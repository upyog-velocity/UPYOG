function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var React = require('react');
var React__default = _interopDefault(React);
var reactI18next = require('react-i18next');
var reactRouterDom = require('react-router-dom');
var digitUiReactComponents = require('@egovernments/digit-ui-react-components');
var reactHookForm = require('react-hook-form');
var reactQuery = require('react-query');

const TestAcknowledgment = () => {
  const getPDFData = (application, t) => {
    var _tenantInfo$city;
    const tenantInfo = {
      "i18nKey": "TENANT_TENANTS_PB_AMRITSAR",
      "code": "pb.amritsar",
      "name": "Amritsar",
      "description": "Amritsar",
      "pincode": [143001, 143002, 143003, 143004, 143005],
      "logoId": "https://s3.ap-south-1.amazonaws.com/pb-egov-assets/pb.amritsar/logo.png",
      "imageId": "/pb-egov-assets/pb.amritsar/logo.png",
      "domainUrl": "www.amritsarcorp.com",
      "type": "CITY",
      "twitterUrl": null,
      "facebookUrl": null,
      "emailId": "support.amritsar@gmail.com",
      "OfficeTimings": {
        "Mon - Fri": "9.00 AM - 6.00 PM"
      },
      "city": {
        "name": "Amritsar",
        "localName": "Amritsar",
        "districtCode": "1",
        "districtName": "Amritsar",
        "districtTenantCode": "pb.amritsar",
        "regionName": "Amritsar Region",
        "ulbGrade": "MC 1",
        "longitude": 74.8723,
        "latitude": 31.634,
        "shapeFileLocation": null,
        "captcha": null,
        "code": "107",
        "regionCode": "1",
        "municipalityName": "Amritsar",
        "ddrName": "Amritsar District"
      },
      "address": "Municipal Corporation Amritsar, C Block, Ranjit Avenue, Amritsar, Punjab",
      "contactNumber": "0181-2227014"
    };
    return {
      name: t(tenantInfo === null || tenantInfo === void 0 ? void 0 : tenantInfo.i18nKey) + " " + t("ULBGRADE_" + (tenantInfo === null || tenantInfo === void 0 ? void 0 : (_tenantInfo$city = tenantInfo.city) === null || _tenantInfo$city === void 0 ? void 0 : _tenantInfo$city.ulbGrade.toUpperCase().replace(" ", "_").replace(".", "_"))),
      email: tenantInfo === null || tenantInfo === void 0 ? void 0 : tenantInfo.emailId,
      phoneNumber: tenantInfo === null || tenantInfo === void 0 ? void 0 : tenantInfo.contactNumber,
      heading: t("WS_NEW_WATER_CONNECTION"),
      breakPageLimit: 4,
      details: [{
        title: t("CS_TITLE_APPLICATION_DETAILS"),
        values: [{
          title: t("WS_COMMON_APPLICATION_NO_LABEL"),
          value: "WS_AP/107/2021-22/250238"
        }]
      }, {
        title: t("WS_COMMON_PROPERTY_DETAILS"),
        values: [{
          title: t("WS_PROPERTY_ID_LABEL"),
          value: "PB-PT-2022-02-24-026486" 
        }, {
          title: t("WS_PROPERTY_TYPE_LABEL"),
          value: "Flat/Part of the building" 
        }, {
          title: t("WS_PROPERTY_USAGE_TYPE_LABEL"),
          value: "Residential" 
        }, {
          title: t("WS_PROPERTY_SUB_USAGE_TYPE_LABEL"),
          value: "N/A"
        }, {
          title: t("WS_PROP_DETAIL_PLOT_SIZE_LABEL"),
          value: "2112" 
        }, {
          title: t("WS_PROPERTY_NO_OF_FLOOR_LABEL"),
          value: "1" 
        }, {
          title: t("WS_SERV_DETAIL_CONN_RAIN_WATER_HARVESTING_FAC"),
          value: "N/A"
        }]
      }, {
        title: t("WS_COMMON_PROP_LOC_DETAIL_HEADER"),
        values: [{
          title: t("WS_PROP_DETAIL_CITY"),
          value: "Amritsar"
        }, {
          title: t("WS_PROP_DETAIL_DHNO"),
          value: "N/A"
        }, {
          title: t("WS_PROP_DETAIL_BUILD_NAME_LABEL"),
          value: "N/A"
        }, {
          title: t("WS_PROP_DETAIL_STREET_NAME"),
          value: "N/A"
        }, {
          title: t("WS_PROP_DETAIL_LOCALITY_MOHALLA_LABEL"),
          value: "Ajit Nagar - Area1"
        }, {
          title: t("WS_PROP_DETAIL_DHNO"),
          value: "143001"
        }]
      }, {
        title: t("WS_TASK_PROP_OWN_HEADER"),
        values: [{
          title: t("Owner - 1"),
          value: ""
        }, {
          title: t("WS_CONN_HOLDER_OWN_DETAIL_MOBILE_NO_LABEL"),
          value: "7878787878" 
        }, {
          title: t("WS_MYCONNECTIONS_OWNER_NAME"),
          value: "OWNER NAME" 
        }, {
          title: t("WS_OWNER_DETAILS_EMAIL_LABEL"),
          value: "N/A"
        }, {
          title: t("WS_OWN_DETAIL_GENDER_LABEL"),
          value: "Male"
        }, {
          title: t("WS_OWN_DETAIL_DOB_LABEL"),
          value: "N/A"
        }, {
          title: t("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),
          value: "N/A"
        }, {
          title: t("WS_OWN_DETAIL_RELATION_LABEL"),
          value: "Husband"
        }, {
          title: t("WS_CONN_HOLDER_OWN_DETAIL_CROSADD"),
          value: "Ajit Nagar - Area1, Amritsar, 143001"
        }, {
          title: t("WS_CONN_HOLDER_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),
          value: "None"
        }]
      }, {
        title: t("WS_COMMON_CONNECTION_DETAILS"),
        values: [{
          title: t("WS_APPLY_FOR"),
          value: "Water"
        }, {
          title: t("WS_CONN_DETAIL_NO_OF_TAPS"),
          value: "12"
        }, {
          title: t("WS_CONN_DETAIL_PIPE_SIZE"),
          value: "0.25"
        }]
      }, {
        title: t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),
        values: [{
          title: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
          value: "Yes"
        }]
      }, {
        title: t("WS_COMMON_DOCS"),
        values: [{
          title: t("WS_OWNER.IDENTITYPROOF"),
          value: "ANXgJeMOAJ.pdf"
        }, {
          title: t("WS_OWNER.ADDRESSPROOF"),
          value: "ANXgJeMOAJ.pdf"
        }, {
          title: t("OWNER.ADDRESSPROOF.ELECTRICITYBILL"),
          value: "ANXgJeMOAJ.pdf"
        }, {
          title: t("PLUMBER_REPORT_DRAWING"),
          value: "ANXgJeMOAJ.pdf"
        }]
      }, {
        title: t("WS_COMMON_ADDN_DETAILS"),
        values: [{
          title: t("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),
          value: "NA"
        }, {
          title: t("WS_SERV_DETAIL_NO_OF_TAPS"),
          value: "NA"
        }, {
          title: t("WS_SERV_DETAIL_WATER_SOURCE"),
          value: "NA"
        }, {
          title: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
          value: "NA"
        }, {
          title: t("WS_SERV_DETAIL_PIPE_SIZE"),
          value: "NA"
        }]
      }, {
        title: t("WS_COMMON_PLUMBER_DETAILS"),
        values: [{
          title: t("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAILS_PLUMBER_LICENCE_NO_LABEL"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAILS_PLUMBER_MOB_NO_LABEL"),
          value: "NA"
        }]
      }, {
        title: t("WS_ROAD_CUTTING_CHARGE"),
        values: [{
          title: t("WS_ADDN_DETAIL_ROAD_TYPE"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAILS_AREA_LABEL"),
          value: "NA"
        }]
      }, {
        title: t("WS_ACTIVATION_DETAILS"),
        values: [{
          title: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
          value: "NA"
        }, {
          title: t("WS_SERV_DETAIL_METER_ID"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAIL_METER_INSTALL_DATE"),
          value: "NA"
        }, {
          title: t("WS_ADDN_DETAILS_INITIAL_METER_READING"),
          value: "NA"
        }]
      }]
    };
  };
  const {
    t
  } = reactI18next.useTranslation();
  const handleDownloadPdf = () => {
    const data = getPDFData({}, t);
    Digit.Utils.pdf.generate(data);
  };
  return /*#__PURE__*/React__default.createElement("div", null, "Test Acknowlwdgment", /*#__PURE__*/React__default.createElement("br", null), /*#__PURE__*/React__default.createElement("button", {
    onClick: handleDownloadPdf
  }, "Print"));
};

const stringReplaceAll = function (str, searcher, replaceWith) {
  if (str === void 0) {
    str = "";
  }
  if (searcher === void 0) {
    searcher = "";
  }
  if (replaceWith === void 0) {
    replaceWith = "";
  }
  if (searcher == "") return str;
  while (str && str.includes(searcher)) {
    str = str.replace(searcher, replaceWith);
  }
  return str;
};
const mdmsData = function (tenantId, t) {
  try {
    return Promise.resolve(Digit.MDMSService.getMultipleTypes(tenantId, "tenant", ["tenants", "citymodule"])).then(function (result) {
      var _filteredResult$, _filteredResult$$city, _filteredResult$2, _filteredResult$3, _filteredResult$4;
      const filteredResult = result === null || result === void 0 ? void 0 : result.tenant.tenants.filter(e => e.code === tenantId);
      const headerLocale = Digit.Utils.locale.getTransformedLocale(tenantId);
      const ulbGrade = filteredResult === null || filteredResult === void 0 ? void 0 : (_filteredResult$ = filteredResult[0]) === null || _filteredResult$ === void 0 ? void 0 : (_filteredResult$$city = _filteredResult$.city) === null || _filteredResult$$city === void 0 ? void 0 : _filteredResult$$city.ulbGrade.replaceAll(" ", "_");
      const obj = {
        header: t("TENANT_TENANTS_" + headerLocale) + " " + t("ULBGRADE_" + ulbGrade),
        subHeader: filteredResult === null || filteredResult === void 0 ? void 0 : filteredResult[0].address,
        description: (filteredResult === null || filteredResult === void 0 ? void 0 : (_filteredResult$2 = filteredResult[0]) === null || _filteredResult$2 === void 0 ? void 0 : _filteredResult$2.contactNumber) + " | " + (filteredResult === null || filteredResult === void 0 ? void 0 : (_filteredResult$3 = filteredResult[0]) === null || _filteredResult$3 === void 0 ? void 0 : _filteredResult$3.domainUrl) + " | " + (filteredResult === null || filteredResult === void 0 ? void 0 : (_filteredResult$4 = filteredResult[0]) === null || _filteredResult$4 === void 0 ? void 0 : _filteredResult$4.emailId)
      };
      return obj;
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const convertEpochToDateDMY = function (dateEpoch, isModify) {
  if (isModify === void 0) {
    isModify = false;
  }
  if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
    return "NA";
  }
  const dateFromApi = new Date(dateEpoch);
  let month = dateFromApi.getMonth() + 1;
  let day = dateFromApi.getDate();
  let year = dateFromApi.getFullYear();
  month = (month > 9 ? "" : "0") + month;
  day = (day > 9 ? "" : "0") + day;
  return isModify ? year + "-" + month + "-" + day : day + "-" + month + "-" + year;
};
const convertEpochToDate = dateEpoch => {
  if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
    return "NA";
  }
  const dateFromApi = new Date(dateEpoch);
  let month = dateFromApi.getMonth() + 1;
  let day = dateFromApi.getDate();
  let year = dateFromApi.getFullYear();
  month = (month > 9 ? "" : "0") + month;
  day = (day > 9 ? "" : "0") + day;
  return day + "/" + month + "/" + year;
};
const pdfDownloadLink = function (documents, fileStoreId, format) {
  if (documents === void 0) {
    documents = {};
  }
  if (fileStoreId === void 0) {
    fileStoreId = "";
  }
  let downloadLink = documents[fileStoreId] || "";
  let differentFormats = (downloadLink === null || downloadLink === void 0 ? void 0 : downloadLink.split(",")) || [];
  let fileURL = "";
  differentFormats.length > 0 && differentFormats.map(link => {
    if (!link.includes("large") && !link.includes("medium") && !link.includes("small")) {
      fileURL = link;
    }
  });
  return fileURL;
};
const DownloadReceipt = function (consumerCode, tenantId, businessService, pdfKey) {
  try {
    tenantId = tenantId ? tenantId : Digit.ULBService.getCurrentTenantId();
    return Promise.resolve(Digit.Utils.downloadReceipt(consumerCode, businessService, "consolidatedreceipt", tenantId)).then(function () {});
  } catch (e) {
    return Promise.reject(e);
  }
};
const getQueryStringParams = query => {
  return query ? (/^[?#]/.test(query) ? query.slice(1) : query).split("&").reduce((params, param) => {
    let [key, value] = param.split("=");
    params[key] = value ? decodeURIComponent(value.replace(/\+/g, " ")) : "";
    return params;
  }, {}) : {};
};
const getAddress = (address, t) => {
  var _address$locality, _address$locality2, _address$city;
  return "" + (address !== null && address !== void 0 && address.doorNo ? (address === null || address === void 0 ? void 0 : address.doorNo) + ", " : "") + (address !== null && address !== void 0 && address.street ? (address === null || address === void 0 ? void 0 : address.street) + ", " : "") + (address !== null && address !== void 0 && address.landmark ? (address === null || address === void 0 ? void 0 : address.landmark) + ", " : "") + (address !== null && address !== void 0 && (_address$locality = address.locality) !== null && _address$locality !== void 0 && _address$locality.code ? t("TENANTS_MOHALLA_" + (address === null || address === void 0 ? void 0 : (_address$locality2 = address.locality) === null || _address$locality2 === void 0 ? void 0 : _address$locality2.code)) : "") + (address !== null && address !== void 0 && (_address$city = address.city) !== null && _address$city !== void 0 && _address$city.code || address !== null && address !== void 0 && address.city ? ", " + t((address === null || address === void 0 ? void 0 : address.city.code) || (address === null || address === void 0 ? void 0 : address.city)) : "") + (address !== null && address !== void 0 && address.pincode ? ", " + address.pincode : " ");
};
const convertDateToEpoch = function (dateString, dayStartOrEnd) {
  if (dayStartOrEnd === void 0) {
    dayStartOrEnd = "dayend";
  }
  try {
    const parts = dateString.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);
    const DateObj = new Date(Date.UTC(parts[1], parts[2] - 1, parts[3]));
    DateObj.setMinutes(DateObj.getMinutes() + DateObj.getTimezoneOffset());
    if (dayStartOrEnd === "dayend") {
      DateObj.setHours(DateObj.getHours() + 24);
      DateObj.setSeconds(DateObj.getSeconds() - 1);
    }
    return DateObj.getTime();
  } catch (e) {
    return dateString;
  }
};
const convertDateToEpochNew = function (dateString, dayStartOrEnd) {
  if (dayStartOrEnd === void 0) {
    dayStartOrEnd = "dayend";
  }
  try {
    const parts = dateString.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);
    const DateObj = new Date(Date.UTC(parts[1], parts[3] - 1, parts[2]));
    DateObj.setMinutes(DateObj.getMinutes() + DateObj.getTimezoneOffset());
    if (dayStartOrEnd === "dayend") {
      DateObj.setHours(DateObj.getHours() + 24);
      DateObj.setSeconds(DateObj.getSeconds() - 1);
    }
    return DateObj.getTime();
  } catch (e) {
    return dateString;
  }
};
const convertEpochToDates = dateEpoch => {
  if (dateEpoch) {
    const dateFromApi = new Date(dateEpoch);
    let month = dateFromApi.getMonth() + 1;
    let day = dateFromApi.getDate();
    let year = dateFromApi.getFullYear();
    month = (month > 9 ? "" : "0") + month;
    day = (day > 9 ? "" : "0") + day;
    return month + "/" + day + "/" + year;
  } else {
    return null;
  }
};
const getPattern = type => {
  switch (type) {
    case "WSOnlyNumbers":
      return /^[0-9]*$/i;
    case "Name":
      return /^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i;
    case "MobileNo":
      return /^[6789][0-9]{9}$/i;
    case "MobileNoWithPrivacy":
      return /^[6789][*]{7}[0-9]{2}|[6789][0-9]{9}$/i;
    case "Amount":
      return /^[0-9]{0,8}$/i;
    case "NonZeroAmount":
      return /^[1-9][0-9]{0,7}$/i;
    case "DecimalNumber":
      return /^\d{0,8}(\.\d{1,2})?$/i;
    case "Email":
      return /^(?=^.{1,64}$)((([^<>()\[\]\\.,;:\s$*@'"]+(\.[^<>()\[\]\\.,;:\s@'"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$/i;
    case "Address":
      return /^[^\$\"<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,500}$/i;
    case "PAN":
      return /^[A-Za-z]{5}\d{4}[A-Za-z]{1}$/i;
    case "TradeName":
      return /^[-@.\/#&+\w\s]*$/;
    case "Date":
      return /^[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/i;
    case "UOMValue":
      return /^(0)*[1-9][0-9]{0,5}$/i;
    case "OperationalArea":
      return /^(0)*[1-9][0-9]{0,6}$/i;
    case "NoOfEmp":
      return /^(0)*[1-9][0-9]{0,6}$/i;
    case "GSTNo":
      return /^\d{2}[A-Z]{5}\d{4}[A-Z]{1}\d[Z]{1}[A-Z\d]{1}$/i;
    case "DoorHouseNo":
      return /^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,50}$/i;
    case "BuildingStreet":
      return /^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,64}$/i;
    case "Pincode":
      return /^[1-9][0-9]{5}$/i;
    case "Landline":
      return /^[0-9]{11}$/i;
    case "PropertyID":
      return /^[a-zA-z0-9\s\\/\-]$/i;
    case "ElectricityConnNo":
      return /^.{1,15}$/i;
    case "DocumentNo":
      return /^[0-9]{1,15}$/i;
    case "eventName":
      return /^[^\$\"<>?\\\\~`!@#$%^()+={}\[\]*,.:;“”]{1,65}$/i;
    case "eventDescription":
      return /^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,500}$/i;
    case "cancelChallan":
      return /^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,100}$/i;
    case "FireNOCNo":
      return /^[a-zA-Z0-9-]*$/i;
    case "consumerNo":
      return /^[a-zA-Z0-9/-]*$/i;
    case "AadharNo":
      return /^([0-9]){12}$/;
    case "ChequeNo":
      return /^(?!0{6})[0-9]{6}$/;
    case "Comments":
      return /^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,50}$/i;
    case "OldLicenceNo":
      return /^[a-zA-Z0-9-/]{0,64}$/;
  }
};
const getFiles = function (filesArray, tenant) {
  try {
    return Promise.resolve(Digit.UploadServices.Filefetch(filesArray, tenant)).then(function (response) {
      var _response$data, _response$data$fileSt, _response$data$fileSt2, _response$data2, _response$data2$fileS, _response$data2$fileS2;
      response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && (_response$data$fileSt = _response$data.fileStoreIds) !== null && _response$data$fileSt !== void 0 && (_response$data$fileSt2 = _response$data$fileSt[0]) !== null && _response$data$fileSt2 !== void 0 && _response$data$fileSt2.url ? window.open(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$fileS = _response$data2.fileStoreIds) === null || _response$data2$fileS === void 0 ? void 0 : (_response$data2$fileS2 = _response$data2$fileS[0]) === null || _response$data2$fileS2 === void 0 ? void 0 : _response$data2$fileS2.url) : null;
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const createPayloadOfWS = function (data) {
  try {
    var _data$cpt, _data$cpt$details, _data$cpt$details$own, _data$ConnectionDetai, _data$ConnectionDetai2, _data$ConnectionDetai3, _data$ConnectionDetai4, _data$ConnectionDetai5, _data$ConnectionDetai6, _data$ConnectionDetai7, _data$ConnectionDetai8, _data$ConnectionDetai9, _data$ConnectionDetai10, _data$ConnectionDetai11, _data$ConnectionDetai12, _data$ConnectionDetai13, _data$ConnectionDetai14, _data$ConnectionDetai15, _data$ConnectionDetai16, _data$ConnectionDetai17, _data$ConnectionDetai18, _data$ConnectionDetai19, _data$ConnectionDetai20, _data$ConnectionDetai21, _data$ConnectionDetai22, _data$ConnectionHolde, _data$ConnectionHolde2, _data$ConnectionHolde3, _data$ConnectionHolde4, _data$ConnectionHolde5, _data$ConnectionHolde6, _data$ConnectionHolde7, _data$ConnectionHolde8, _data$ConnectionHolde9, _data$ConnectionHolde10, _data$ConnectionHolde11, _data$ConnectionHolde12, _data$ConnectionHolde13, _data$ConnectionHolde14, _data$ConnectionHolde15, _data$ConnectionHolde16, _data$ConnectionHolde17, _data$ConnectionHolde18, _data$ConnectionHolde19, _data$ConnectionHolde20, _data$ConnectionHolde21, _data$ConnectionDetai23, _data$ConnectionDetai24, _data$ConnectionDetai25, _data$ConnectionDetai26, _data$ConnectionDetai27, _data$ConnectionDetai28, _data$ConnectionDetai29, _data$ConnectionDetai30, _data$cpt2, _data$cpt3, _data$cpt3$details, _data$cpt4, _data$cpt4$details, _data$cpt4$details$ad, _data$cpt4$details$ad2, _data$cpt5, _data$cpt5$details, _data$cpt5$details$ad, _data$DocumentsRequir, _data$cpt6, _Digit, _Digit$Customizations, _Digit$Customizations2, _Digit2, _Digit2$Customization, _Digit2$Customization2;
    data === null || data === void 0 ? void 0 : (_data$cpt = data.cpt) === null || _data$cpt === void 0 ? void 0 : (_data$cpt$details = _data$cpt.details) === null || _data$cpt$details === void 0 ? void 0 : (_data$cpt$details$own = _data$cpt$details.owners) === null || _data$cpt$details$own === void 0 ? void 0 : _data$cpt$details$own.forEach(owner => {
      if (owner !== null && owner !== void 0 && owner.permanentAddress) owner.correspondenceAddress = owner === null || owner === void 0 ? void 0 : owner.permanentAddress;
    });
    let payload = {
      water: data === null || data === void 0 ? void 0 : (_data$ConnectionDetai = data.ConnectionDetails) === null || _data$ConnectionDetai === void 0 ? void 0 : (_data$ConnectionDetai2 = _data$ConnectionDetai[0]) === null || _data$ConnectionDetai2 === void 0 ? void 0 : _data$ConnectionDetai2.water,
      sewerage: data === null || data === void 0 ? void 0 : (_data$ConnectionDetai3 = data.ConnectionDetails) === null || _data$ConnectionDetai3 === void 0 ? void 0 : (_data$ConnectionDetai4 = _data$ConnectionDetai3[0]) === null || _data$ConnectionDetai4 === void 0 ? void 0 : _data$ConnectionDetai4.sewerage,
      proposedTaps: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai5 = data.ConnectionDetails) === null || _data$ConnectionDetai5 === void 0 ? void 0 : (_data$ConnectionDetai6 = _data$ConnectionDetai5[0]) === null || _data$ConnectionDetai6 === void 0 ? void 0 : _data$ConnectionDetai6.proposedTaps) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai7 = data.ConnectionDetails) === null || _data$ConnectionDetai7 === void 0 ? void 0 : (_data$ConnectionDetai8 = _data$ConnectionDetai7[0]) === null || _data$ConnectionDetai8 === void 0 ? void 0 : _data$ConnectionDetai8.proposedTaps),
      proposedPipeSize: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai9 = data.ConnectionDetails) === null || _data$ConnectionDetai9 === void 0 ? void 0 : (_data$ConnectionDetai10 = _data$ConnectionDetai9[0]) === null || _data$ConnectionDetai10 === void 0 ? void 0 : (_data$ConnectionDetai11 = _data$ConnectionDetai10.proposedPipeSize) === null || _data$ConnectionDetai11 === void 0 ? void 0 : _data$ConnectionDetai11.size) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai12 = data.ConnectionDetails) === null || _data$ConnectionDetai12 === void 0 ? void 0 : (_data$ConnectionDetai13 = _data$ConnectionDetai12[0]) === null || _data$ConnectionDetai13 === void 0 ? void 0 : (_data$ConnectionDetai14 = _data$ConnectionDetai13.proposedPipeSize) === null || _data$ConnectionDetai14 === void 0 ? void 0 : _data$ConnectionDetai14.size),
      proposedWaterClosets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai15 = data.ConnectionDetails) === null || _data$ConnectionDetai15 === void 0 ? void 0 : (_data$ConnectionDetai16 = _data$ConnectionDetai15[0]) === null || _data$ConnectionDetai16 === void 0 ? void 0 : _data$ConnectionDetai16.proposedWaterClosets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai17 = data.ConnectionDetails) === null || _data$ConnectionDetai17 === void 0 ? void 0 : (_data$ConnectionDetai18 = _data$ConnectionDetai17[0]) === null || _data$ConnectionDetai18 === void 0 ? void 0 : _data$ConnectionDetai18.proposedWaterClosets),
      proposedToilets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai19 = data.ConnectionDetails) === null || _data$ConnectionDetai19 === void 0 ? void 0 : (_data$ConnectionDetai20 = _data$ConnectionDetai19[0]) === null || _data$ConnectionDetai20 === void 0 ? void 0 : _data$ConnectionDetai20.proposedToilets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai21 = data.ConnectionDetails) === null || _data$ConnectionDetai21 === void 0 ? void 0 : (_data$ConnectionDetai22 = _data$ConnectionDetai21[0]) === null || _data$ConnectionDetai22 === void 0 ? void 0 : _data$ConnectionDetai22.proposedToilets),
      connectionHolders: !(data !== null && data !== void 0 && (_data$ConnectionHolde = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde !== void 0 && (_data$ConnectionHolde2 = _data$ConnectionHolde[0]) !== null && _data$ConnectionHolde2 !== void 0 && _data$ConnectionHolde2.sameAsOwnerDetails) ? [{
        correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde3 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde3 === void 0 ? void 0 : (_data$ConnectionHolde4 = _data$ConnectionHolde3[0]) === null || _data$ConnectionHolde4 === void 0 ? void 0 : _data$ConnectionHolde4.address) || "",
        fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde5 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde5 === void 0 ? void 0 : (_data$ConnectionHolde6 = _data$ConnectionHolde5[0]) === null || _data$ConnectionHolde6 === void 0 ? void 0 : _data$ConnectionHolde6.guardian) || "",
        gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde7 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde7 === void 0 ? void 0 : (_data$ConnectionHolde8 = _data$ConnectionHolde7[0]) === null || _data$ConnectionHolde8 === void 0 ? void 0 : (_data$ConnectionHolde9 = _data$ConnectionHolde8.gender) === null || _data$ConnectionHolde9 === void 0 ? void 0 : _data$ConnectionHolde9.code) || "",
        mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde10 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde10 === void 0 ? void 0 : (_data$ConnectionHolde11 = _data$ConnectionHolde10[0]) === null || _data$ConnectionHolde11 === void 0 ? void 0 : _data$ConnectionHolde11.mobileNumber) || "",
        name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde12 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde12 === void 0 ? void 0 : (_data$ConnectionHolde13 = _data$ConnectionHolde12[0]) === null || _data$ConnectionHolde13 === void 0 ? void 0 : _data$ConnectionHolde13.name) || "",
        ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde14 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde14 === void 0 ? void 0 : (_data$ConnectionHolde15 = _data$ConnectionHolde14[0]) === null || _data$ConnectionHolde15 === void 0 ? void 0 : (_data$ConnectionHolde16 = _data$ConnectionHolde15.ownerType) === null || _data$ConnectionHolde16 === void 0 ? void 0 : _data$ConnectionHolde16.code) || "",
        relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde17 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde17 === void 0 ? void 0 : (_data$ConnectionHolde18 = _data$ConnectionHolde17[0]) === null || _data$ConnectionHolde18 === void 0 ? void 0 : (_data$ConnectionHolde19 = _data$ConnectionHolde18.relationship) === null || _data$ConnectionHolde19 === void 0 ? void 0 : _data$ConnectionHolde19.code) || "",
        sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde20 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde20 === void 0 ? void 0 : (_data$ConnectionHolde21 = _data$ConnectionHolde20[0]) === null || _data$ConnectionHolde21 === void 0 ? void 0 : _data$ConnectionHolde21.sameAsOwnerDetails
      }] : null,
      service: data !== null && data !== void 0 && (_data$ConnectionDetai23 = data.ConnectionDetails) !== null && _data$ConnectionDetai23 !== void 0 && (_data$ConnectionDetai24 = _data$ConnectionDetai23[0]) !== null && _data$ConnectionDetai24 !== void 0 && _data$ConnectionDetai24.water && !(data !== null && data !== void 0 && (_data$ConnectionDetai25 = data.ConnectionDetails) !== null && _data$ConnectionDetai25 !== void 0 && (_data$ConnectionDetai26 = _data$ConnectionDetai25[0]) !== null && _data$ConnectionDetai26 !== void 0 && _data$ConnectionDetai26.sewerage) ? "Water" : !(data !== null && data !== void 0 && (_data$ConnectionDetai27 = data.ConnectionDetails) !== null && _data$ConnectionDetai27 !== void 0 && (_data$ConnectionDetai28 = _data$ConnectionDetai27[0]) !== null && _data$ConnectionDetai28 !== void 0 && _data$ConnectionDetai28.water) && data !== null && data !== void 0 && (_data$ConnectionDetai29 = data.ConnectionDetails) !== null && _data$ConnectionDetai29 !== void 0 && (_data$ConnectionDetai30 = _data$ConnectionDetai29[0]) !== null && _data$ConnectionDetai30 !== void 0 && _data$ConnectionDetai30.sewerage ? "Sewerage" : "Water And Sewerage",
      property: data === null || data === void 0 ? void 0 : (_data$cpt2 = data.cpt) === null || _data$cpt2 === void 0 ? void 0 : _data$cpt2.details,
      propertyId: data === null || data === void 0 ? void 0 : (_data$cpt3 = data.cpt) === null || _data$cpt3 === void 0 ? void 0 : (_data$cpt3$details = _data$cpt3.details) === null || _data$cpt3$details === void 0 ? void 0 : _data$cpt3$details.propertyId,
      roadCuttingArea: null,
      noOfTaps: null,
      noOfWaterClosets: null,
      noOfToilets: null,
      additionalDetails: {
        initialMeterReading: null,
        detailsProvidedBy: "",
        locality: data === null || data === void 0 ? void 0 : (_data$cpt4 = data.cpt) === null || _data$cpt4 === void 0 ? void 0 : (_data$cpt4$details = _data$cpt4.details) === null || _data$cpt4$details === void 0 ? void 0 : (_data$cpt4$details$ad = _data$cpt4$details.address) === null || _data$cpt4$details$ad === void 0 ? void 0 : (_data$cpt4$details$ad2 = _data$cpt4$details$ad.locality) === null || _data$cpt4$details$ad2 === void 0 ? void 0 : _data$cpt4$details$ad2.code
      },
      tenantId: data === null || data === void 0 ? void 0 : (_data$cpt5 = data.cpt) === null || _data$cpt5 === void 0 ? void 0 : (_data$cpt5$details = _data$cpt5.details) === null || _data$cpt5$details === void 0 ? void 0 : (_data$cpt5$details$ad = _data$cpt5$details.address) === null || _data$cpt5$details$ad === void 0 ? void 0 : _data$cpt5$details$ad.tenantId,
      processInstance: {
        action: "INITIATE"
      },
      channel: "CFC_COUNTER"
    };
    sessionStorage.setItem("WS_DOCUMENTS_INOF", JSON.stringify(data === null || data === void 0 ? void 0 : (_data$DocumentsRequir = data.DocumentsRequired) === null || _data$DocumentsRequir === void 0 ? void 0 : _data$DocumentsRequir.documents));
    sessionStorage.setItem("WS_PROPERTY_INOF", JSON.stringify(data === null || data === void 0 ? void 0 : (_data$cpt6 = data.cpt) === null || _data$cpt6 === void 0 ? void 0 : _data$cpt6.details));
    payload = (_Digit = Digit) !== null && _Digit !== void 0 && (_Digit$Customizations = _Digit.Customizations) !== null && _Digit$Customizations !== void 0 && (_Digit$Customizations2 = _Digit$Customizations.WS) !== null && _Digit$Customizations2 !== void 0 && _Digit$Customizations2.customiseCreatePayloadOfWS ? (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$Customization = _Digit2.Customizations) === null || _Digit2$Customization === void 0 ? void 0 : (_Digit2$Customization2 = _Digit2$Customization.WS) === null || _Digit2$Customization2 === void 0 ? void 0 : _Digit2$Customization2.customiseCreatePayloadOfWS(data, payload) : payload;
    return Promise.resolve(payload);
  } catch (e) {
    return Promise.reject(e);
  }
};
const updatePayloadOfWS = function (data, type) {
  try {
    var _Digit3, _Digit3$Customization, _Digit3$Customization2, _Digit4, _Digit4$Customization, _Digit4$Customization2;
    let payload = {
      ...data,
      processInstance: {
        ...(data === null || data === void 0 ? void 0 : data.processInstance),
        action: "SUBMIT_APPLICATION"
      },
      documents: JSON.parse(sessionStorage.getItem("WS_DOCUMENTS_INOF")),
      property: JSON.parse(sessionStorage.getItem("WS_PROPERTY_INOF")),
      connectionType: type === "WATER" ? data === null || data === void 0 ? void 0 : data.connectionType : "Non Metered"
    };
    payload = (_Digit3 = Digit) !== null && _Digit3 !== void 0 && (_Digit3$Customization = _Digit3.Customizations) !== null && _Digit3$Customization !== void 0 && (_Digit3$Customization2 = _Digit3$Customization.WS) !== null && _Digit3$Customization2 !== void 0 && _Digit3$Customization2.customiseUpdatePayloadOfWS ? (_Digit4 = Digit) === null || _Digit4 === void 0 ? void 0 : (_Digit4$Customization = _Digit4.Customizations) === null || _Digit4$Customization === void 0 ? void 0 : (_Digit4$Customization2 = _Digit4$Customization.WS) === null || _Digit4$Customization2 === void 0 ? void 0 : _Digit4$Customization2.customiseUpdatePayloadOfWS(data, payload, type) : payload;
    return Promise.resolve(payload);
  } catch (e) {
    return Promise.reject(e);
  }
};
const convertToWSUpdate = data => {
  var _data$WaterConnection, _data$WaterConnection2, _data$documents, _Digit5, _Digit5$Customization, _Digit5$Customization2, _Digit6, _Digit6$Customization, _Digit6$Customization2;
  let formdata = {
    WaterConnection: {
      ...(data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnectionResult) === null || _data$WaterConnection === void 0 ? void 0 : (_data$WaterConnection2 = _data$WaterConnection.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2[0]),
      documents: [...(data === null || data === void 0 ? void 0 : (_data$documents = data.documents) === null || _data$documents === void 0 ? void 0 : _data$documents.documents)],
      processInstance: {
        action: "SUBMIT_APPLICATION"
      }
    }
  };
  formdata = (_Digit5 = Digit) !== null && _Digit5 !== void 0 && (_Digit5$Customization = _Digit5.Customizations) !== null && _Digit5$Customization !== void 0 && (_Digit5$Customization2 = _Digit5$Customization.WS) !== null && _Digit5$Customization2 !== void 0 && _Digit5$Customization2.customiseWSUpdate ? (_Digit6 = Digit) === null || _Digit6 === void 0 ? void 0 : (_Digit6$Customization = _Digit6.Customizations) === null || _Digit6$Customization === void 0 ? void 0 : (_Digit6$Customization2 = _Digit6$Customization.WS) === null || _Digit6$Customization2 === void 0 ? void 0 : _Digit6$Customization2.customiseWSUpdate(data, formdata) : formdata;
  return formdata;
};
const convertToEditWSUpdate = data => {
  var _data$WaterConnection3, _data$WaterConnection4, _data$documents2, _data$ConnectionHolde22, _data$ConnectionHolde23, _data$ConnectionHolde24, _data$ConnectionHolde25, _data$ConnectionHolde26, _data$ConnectionHolde27, _data$ConnectionHolde28, _data$ConnectionHolde29, _data$ConnectionHolde30, _data$ConnectionHolde31, _data$ConnectionHolde32, _data$ConnectionHolde33, _data$waterConectionD, _data$waterConectionD2, _data$waterConectionD3, _data$applicationType, _data$applicationType2, _data$serviceName, _waterResult$serviceN, _data$documents3, _data$sewerageConnect, _data$sewerageConnect2, _Digit7, _Digit7$Customization, _Digit7$Customization2, _Digit8, _Digit8$Customization, _Digit8$Customization2;
  let waterResult = data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnectionResult) === null || _data$WaterConnection3 === void 0 ? void 0 : (_data$WaterConnection4 = _data$WaterConnection3.WaterConnection) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4[0];
  let formdata = {
    WaterConnection: {
      id: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.id : waterResult === null || waterResult === void 0 ? void 0 : waterResult.id,
      tenantId: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.tenantId : waterResult === null || waterResult === void 0 ? void 0 : waterResult.tenantId,
      propertyId: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.propertyId : waterResult === null || waterResult === void 0 ? void 0 : waterResult.propertyId,
      applicationNo: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationNo : waterResult === null || waterResult === void 0 ? void 0 : waterResult.applicationNo,
      applicationStatus: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationStatus : waterResult === null || waterResult === void 0 ? void 0 : waterResult.applicationStatus,
      status: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.status : waterResult === null || waterResult === void 0 ? void 0 : waterResult.status,
      connectionNo: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionNo : waterResult === null || waterResult === void 0 ? void 0 : waterResult.connectionNo) || null,
      oldConnectionNo: null,
      documents: [...(data === null || data === void 0 ? void 0 : (_data$documents2 = data.documents) === null || _data$documents2 === void 0 ? void 0 : _data$documents2.documents)],
      plumberInfo: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.plumberInfo : (waterResult === null || waterResult === void 0 ? void 0 : waterResult.plumberInfo) || [],
      roadType: null,
      roadCuttingArea: null,
      roadCuttingInfo: [],
      connectionExecutionDate: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionExecutionDate : waterResult === null || waterResult === void 0 ? void 0 : waterResult.connectionExecutionDate) || null,
      connectionCategory: null,
      connectionType: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionType : waterResult === null || waterResult === void 0 ? void 0 : waterResult.connectionType) || null,
      additionalDetails: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.additionalDetails)
      } : {
        ...(waterResult === null || waterResult === void 0 ? void 0 : waterResult.additionalDetails)
      },
      auditDetails: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.auditDetails : waterResult === null || waterResult === void 0 ? void 0 : waterResult.auditDetails,
      processInstance: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.processInstance),
        action: "RESUBMIT_APPLICATION"
      } : {
        ...(waterResult === null || waterResult === void 0 ? void 0 : waterResult.processInstance),
        action: "SUBMIT_APPLICATION"
      },
      applicationType: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationType : "MODIFY_WATER_CONNECTION",
      dateEffectiveFrom: convertDateToEpoch(Date.now() + 86400000),
      connectionHolders: data !== null && data !== void 0 && data.isEditApplication ? !(data !== null && data !== void 0 && (_data$ConnectionHolde22 = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde22 !== void 0 && _data$ConnectionHolde22.isOwnerSame) ? [{
        correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde23 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde23 === void 0 ? void 0 : _data$ConnectionHolde23.address) || "",
        fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde24 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde24 === void 0 ? void 0 : _data$ConnectionHolde24.guardian) || "",
        gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde25 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde25 === void 0 ? void 0 : (_data$ConnectionHolde26 = _data$ConnectionHolde25.gender) === null || _data$ConnectionHolde26 === void 0 ? void 0 : _data$ConnectionHolde26.code) || "",
        mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde27 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde27 === void 0 ? void 0 : _data$ConnectionHolde27.mobileNumber) || "",
        name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde28 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde28 === void 0 ? void 0 : _data$ConnectionHolde28.name) || "",
        ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde29 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde29 === void 0 ? void 0 : (_data$ConnectionHolde30 = _data$ConnectionHolde29.specialCategoryType) === null || _data$ConnectionHolde30 === void 0 ? void 0 : _data$ConnectionHolde30.code) || "",
        relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde31 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde31 === void 0 ? void 0 : (_data$ConnectionHolde32 = _data$ConnectionHolde31.relationship) === null || _data$ConnectionHolde32 === void 0 ? void 0 : _data$ConnectionHolde32.code) || "",
        sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde33 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde33 === void 0 ? void 0 : _data$ConnectionHolde33.sameAsOwnerDetails
      }] : null : waterResult === null || waterResult === void 0 ? void 0 : waterResult.connectionHolders,
      oldApplication: false,
      channel: "CITIZEN",
      waterSource: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.waterSource : waterResult === null || waterResult === void 0 ? void 0 : waterResult.waterSource) || null,
      meterId: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.meterId : waterResult === null || waterResult === void 0 ? void 0 : waterResult.meterId) || null,
      meterInstallationDate: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.meterInstallationDate : waterResult === null || waterResult === void 0 ? void 0 : waterResult.meterInstallationDate) || null,
      proposedPipeSize: data === null || data === void 0 ? void 0 : (_data$waterConectionD = data.waterConectionDetails) === null || _data$waterConectionD === void 0 ? void 0 : (_data$waterConectionD2 = _data$waterConectionD.proposedPipeSize) === null || _data$waterConectionD2 === void 0 ? void 0 : _data$waterConectionD2.code,
      proposedTaps: data === null || data === void 0 ? void 0 : (_data$waterConectionD3 = data.waterConectionDetails) === null || _data$waterConectionD3 === void 0 ? void 0 : _data$waterConectionD3.proposedTaps,
      pipeSize: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.pipeSize : waterResult === null || waterResult === void 0 ? void 0 : waterResult.pipeSize) || null,
      noOfTaps: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.noOfTaps : waterResult === null || waterResult === void 0 ? void 0 : waterResult.noOfTaps) || null,
      waterSourceSubSource: null,
      waterSubSource: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.waterSubSource : waterResult === null || waterResult === void 0 ? void 0 : waterResult.waterSubSource) || null,
      property: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.property)
      } : {
        ...(waterResult === null || waterResult === void 0 ? void 0 : waterResult.property)
      },
      water: data !== null && data !== void 0 && (_data$applicationType = data.applicationType) !== null && _data$applicationType !== void 0 && _data$applicationType.includes("WATER") ? true : false,
      sewerage: data !== null && data !== void 0 && (_data$applicationType2 = data.applicationType) !== null && _data$applicationType2 !== void 0 && _data$applicationType2.includes("WATER") ? true : false,
      service: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : (_data$serviceName = data.serviceName) === null || _data$serviceName === void 0 ? void 0 : _data$serviceName.code : waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$serviceN = waterResult.serviceName) === null || _waterResult$serviceN === void 0 ? void 0 : _waterResult$serviceN.code,
      reviewDocData: [...(data === null || data === void 0 ? void 0 : (_data$documents3 = data.documents) === null || _data$documents3 === void 0 ? void 0 : _data$documents3.documents)],
      proposedWaterClosets: data === null || data === void 0 ? void 0 : (_data$sewerageConnect = data.sewerageConnectionDetails) === null || _data$sewerageConnect === void 0 ? void 0 : _data$sewerageConnect.proposedWaterClosets,
      proposedToilets: data === null || data === void 0 ? void 0 : (_data$sewerageConnect2 = data.sewerageConnectionDetails) === null || _data$sewerageConnect2 === void 0 ? void 0 : _data$sewerageConnect2.proposedToilets,
      comment: "",
      wfDocuments: [],
      assignee: [],
      action: data !== null && data !== void 0 && data.isEditApplication ? "RESUBMIT_APPLICATION" : "SUBMIT_APPLICATION",
      assignes: []
    }
  };
  formdata = (_Digit7 = Digit) !== null && _Digit7 !== void 0 && (_Digit7$Customization = _Digit7.Customizations) !== null && _Digit7$Customization !== void 0 && (_Digit7$Customization2 = _Digit7$Customization.WS) !== null && _Digit7$Customization2 !== void 0 && _Digit7$Customization2.customiseEditWSUpdate ? (_Digit8 = Digit) === null || _Digit8 === void 0 ? void 0 : (_Digit8$Customization = _Digit8.Customizations) === null || _Digit8$Customization === void 0 ? void 0 : (_Digit8$Customization2 = _Digit8$Customization.WS) === null || _Digit8$Customization2 === void 0 ? void 0 : _Digit8$Customization2.customiseEditWSUpdate(data, formdata) : formdata;
  return formdata;
};
const convertToEditSWUpdate = data => {
  var _data$SewerageConnect, _data$SewerageConnect2, _data$documents4, _data$ConnectionHolde34, _data$ConnectionHolde35, _data$ConnectionHolde36, _data$ConnectionHolde37, _data$ConnectionHolde38, _data$ConnectionHolde39, _data$ConnectionHolde40, _data$ConnectionHolde41, _data$ConnectionHolde42, _data$ConnectionHolde43, _data$ConnectionHolde44, _data$ConnectionHolde45, _data$waterConectionD4, _data$waterConectionD5, _data$waterConectionD6, _data$applicationType3, _data$applicationType4, _data$serviceName2, _SewerageResult$servi, _data$documents5, _data$sewerageConnect3, _data$sewerageConnect4, _Digit9, _Digit9$Customization, _Digit9$Customization2, _Digit10, _Digit10$Customizatio, _Digit10$Customizatio2;
  let SewerageResult = data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnectionResult) === null || _data$SewerageConnect === void 0 ? void 0 : (_data$SewerageConnect2 = _data$SewerageConnect.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2[0];
  let formdata = {
    SewerageConnection: {
      id: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.id : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.id,
      tenantId: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.tenantId : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.tenantId,
      propertyId: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.propertyId : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.propertyId,
      applicationNo: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationNo : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.applicationNo,
      applicationStatus: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationStatus : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.applicationStatus,
      status: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.status : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.status,
      connectionNo: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionNo : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.connectionNo) || null,
      oldConnectionNo: null,
      documents: [...(data === null || data === void 0 ? void 0 : (_data$documents4 = data.documents) === null || _data$documents4 === void 0 ? void 0 : _data$documents4.documents)],
      plumberInfo: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.plumberInfo : (SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.plumberInfo) || [],
      roadType: null,
      roadCuttingArea: null,
      roadCuttingInfo: [],
      connectionExecutionDate: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionExecutionDate : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.connectionExecutionDate) || null,
      connectionCategory: null,
      connectionType: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.connectionType : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.connectionType) || null,
      additionalDetails: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.additionalDetails)
      } : {
        ...(SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.additionalDetails)
      },
      auditDetails: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.auditDetails : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.auditDetails,
      processInstance: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.processInstance),
        action: "RESUBMIT_APPLICATION"
      } : {
        ...(SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.processInstance),
        action: "SUBMIT_APPLICATION"
      },
      applicationType: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.applicationType : "MODIFY_WATER_CONNECTION",
      dateEffectiveFrom: convertDateToEpoch(Date.now() + 86400000),
      connectionHolders: data !== null && data !== void 0 && data.isEditApplication ? !(data !== null && data !== void 0 && (_data$ConnectionHolde34 = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde34 !== void 0 && _data$ConnectionHolde34.isOwnerSame) ? [{
        correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde35 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde35 === void 0 ? void 0 : _data$ConnectionHolde35.address) || "",
        fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde36 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde36 === void 0 ? void 0 : _data$ConnectionHolde36.guardian) || "",
        gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde37 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde37 === void 0 ? void 0 : (_data$ConnectionHolde38 = _data$ConnectionHolde37.gender) === null || _data$ConnectionHolde38 === void 0 ? void 0 : _data$ConnectionHolde38.code) || "",
        mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde39 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde39 === void 0 ? void 0 : _data$ConnectionHolde39.mobileNumber) || "",
        name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde40 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde40 === void 0 ? void 0 : _data$ConnectionHolde40.name) || "",
        ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde41 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde41 === void 0 ? void 0 : (_data$ConnectionHolde42 = _data$ConnectionHolde41.specialCategoryType) === null || _data$ConnectionHolde42 === void 0 ? void 0 : _data$ConnectionHolde42.code) || "",
        relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde43 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde43 === void 0 ? void 0 : (_data$ConnectionHolde44 = _data$ConnectionHolde43.relationship) === null || _data$ConnectionHolde44 === void 0 ? void 0 : _data$ConnectionHolde44.code) || "",
        sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde45 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde45 === void 0 ? void 0 : _data$ConnectionHolde45.sameAsOwnerDetails
      }] : null : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.connectionHolders,
      oldApplication: false,
      channel: "CITIZEN",
      waterSource: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.waterSource : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.waterSource) || null,
      meterId: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.meterId : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.meterId) || null,
      meterInstallationDate: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.meterInstallationDate : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.meterInstallationDate) || null,
      proposedPipeSize: data === null || data === void 0 ? void 0 : (_data$waterConectionD4 = data.waterConectionDetails) === null || _data$waterConectionD4 === void 0 ? void 0 : (_data$waterConectionD5 = _data$waterConectionD4.proposedPipeSize) === null || _data$waterConectionD5 === void 0 ? void 0 : _data$waterConectionD5.code,
      proposedTaps: data === null || data === void 0 ? void 0 : (_data$waterConectionD6 = data.waterConectionDetails) === null || _data$waterConectionD6 === void 0 ? void 0 : _data$waterConectionD6.proposedTaps,
      pipeSize: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.pipeSize : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.pipeSize) || null,
      noOfTaps: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.noOfTaps : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.noOfTaps) || null,
      waterSourceSubSource: null,
      waterSubSource: (data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : data.waterSubSource : SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.waterSubSource) || null,
      property: data !== null && data !== void 0 && data.isEditApplication ? {
        ...(data === null || data === void 0 ? void 0 : data.property)
      } : {
        ...(SewerageResult === null || SewerageResult === void 0 ? void 0 : SewerageResult.property)
      },
      water: data !== null && data !== void 0 && (_data$applicationType3 = data.applicationType) !== null && _data$applicationType3 !== void 0 && _data$applicationType3.includes("WATER") ? true : false,
      sewerage: data !== null && data !== void 0 && (_data$applicationType4 = data.applicationType) !== null && _data$applicationType4 !== void 0 && _data$applicationType4.includes("WATER") ? true : false,
      service: data !== null && data !== void 0 && data.isEditApplication ? data === null || data === void 0 ? void 0 : (_data$serviceName2 = data.serviceName) === null || _data$serviceName2 === void 0 ? void 0 : _data$serviceName2.code : SewerageResult === null || SewerageResult === void 0 ? void 0 : (_SewerageResult$servi = SewerageResult.serviceName) === null || _SewerageResult$servi === void 0 ? void 0 : _SewerageResult$servi.code,
      reviewDocData: [...(data === null || data === void 0 ? void 0 : (_data$documents5 = data.documents) === null || _data$documents5 === void 0 ? void 0 : _data$documents5.documents)],
      proposedWaterClosets: data === null || data === void 0 ? void 0 : (_data$sewerageConnect3 = data.sewerageConnectionDetails) === null || _data$sewerageConnect3 === void 0 ? void 0 : _data$sewerageConnect3.proposedWaterClosets,
      proposedToilets: data === null || data === void 0 ? void 0 : (_data$sewerageConnect4 = data.sewerageConnectionDetails) === null || _data$sewerageConnect4 === void 0 ? void 0 : _data$sewerageConnect4.proposedToilets,
      comment: "",
      wfDocuments: [],
      assignee: [],
      action: data !== null && data !== void 0 && data.isEditApplication ? "RESUBMIT_APPLICATION" : "SUBMIT_APPLICATION",
      assignes: []
    }
  };
  formdata = (_Digit9 = Digit) !== null && _Digit9 !== void 0 && (_Digit9$Customization = _Digit9.Customizations) !== null && _Digit9$Customization !== void 0 && (_Digit9$Customization2 = _Digit9$Customization.WS) !== null && _Digit9$Customization2 !== void 0 && _Digit9$Customization2.customiseEditSWUpdate ? (_Digit10 = Digit) === null || _Digit10 === void 0 ? void 0 : (_Digit10$Customizatio = _Digit10.Customizations) === null || _Digit10$Customizatio === void 0 ? void 0 : (_Digit10$Customizatio2 = _Digit10$Customizatio.WS) === null || _Digit10$Customizatio2 === void 0 ? void 0 : _Digit10$Customizatio2.customiseEditSWUpdate(data, formdata) : formdata;
  return formdata;
};
const convertToSWUpdate = data => {
  var _data$SewerageConnect3, _data$SewerageConnect4, _data$documents6, _Digit11, _Digit11$Customizatio, _Digit11$Customizatio2, _Digit12, _Digit12$Customizatio, _Digit12$Customizatio2;
  let formdata = {
    SewerageConnection: {
      ...(data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnectionResult) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3.SewerageConnections) === null || _data$SewerageConnect4 === void 0 ? void 0 : _data$SewerageConnect4[0]),
      connectionType: "Non Metered",
      documents: [...(data === null || data === void 0 ? void 0 : (_data$documents6 = data.documents) === null || _data$documents6 === void 0 ? void 0 : _data$documents6.documents)],
      processInstance: {
        action: "SUBMIT_APPLICATION"
      }
    }
  };
  formdata = (_Digit11 = Digit) !== null && _Digit11 !== void 0 && (_Digit11$Customizatio = _Digit11.Customizations) !== null && _Digit11$Customizatio !== void 0 && (_Digit11$Customizatio2 = _Digit11$Customizatio.WS) !== null && _Digit11$Customizatio2 !== void 0 && _Digit11$Customizatio2.customiseSWUpdate ? (_Digit12 = Digit) === null || _Digit12 === void 0 ? void 0 : (_Digit12$Customizatio = _Digit12.Customizations) === null || _Digit12$Customizatio === void 0 ? void 0 : (_Digit12$Customizatio2 = _Digit12$Customizatio.WS) === null || _Digit12$Customizatio2 === void 0 ? void 0 : _Digit12$Customizatio2.customiseSWUpdate(data, formdata) : formdata;
  return formdata;
};
const createPayloadOfWSDisconnection = function (data, storeData, service) {
  try {
    var _storeData$applicatio, _storeData$applicatio2, _storeData$applicatio27, _storeData$applicatio28, _storeData$applicatio29, _storeData$applicatio30, _storeData$applicatio31, _storeData$applicatio32, _data$type, _data$type$value, _data$type2, _data$type2$value, _storeData$applicatio33, _storeData$applicatio34, _storeData$applicatio35, _storeData$applicatio36, _storeData$applicatio37, _storeData$applicatio38, _storeData$applicatio39, _storeData$applicatio40, _plumberInfo, _storeData$applicatio41, _storeData$applicatio42, _storeData$applicatio43, _storeData$applicatio44, _storeData$applicatio45, _storeData$applicatio46, _storeData$applicatio47, _storeData$applicatio48, _storeData$applicatio49, _storeData$applicatio50, _storeData$applicatio51, _storeData$applicatio52, _data$type3, _data$type3$value, _storeData$applicatio53, _storeData$applicatio54, _storeData$applicatio55, _storeData$applicatio56, _storeData$applicatio57, _storeData$applicatio58, _plumberInfo2, _storeData$applicatio59, _storeData$applicatio60, _storeData$applicatio61, _storeData$applicatio62, _storeData$applicatio63, _storeData$applicatio64, _storeData$applicatio65, _Digit13, _Digit13$Customizatio, _Digit13$Customizatio2, _Digit14, _Digit14$Customizatio, _Digit14$Customizatio2;
    const user = Digit.UserService.getType();
    let plumberInfo = [];
    if ((storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio = storeData.applicationData) === null || _storeData$applicatio === void 0 ? void 0 : (_storeData$applicatio2 = _storeData$applicatio.plumberInfo) === null || _storeData$applicatio2 === void 0 ? void 0 : _storeData$applicatio2.length) > 0) {
      var _storeData$applicatio3, _storeData$applicatio4, _storeData$applicatio5, _storeData$applicatio6, _storeData$applicatio7, _storeData$applicatio8, _storeData$applicatio9, _storeData$applicatio10, _storeData$applicatio11, _storeData$applicatio12, _storeData$applicatio13, _storeData$applicatio14, _storeData$applicatio15, _storeData$applicatio16, _storeData$applicatio17, _storeData$applicatio18, _storeData$applicatio19, _storeData$applicatio20, _storeData$applicatio21, _storeData$applicatio22, _storeData$applicatio23, _storeData$applicatio24, _storeData$applicatio25, _storeData$applicatio26;
      let plumberInfoData = {};
      if (storeData !== null && storeData !== void 0 && (_storeData$applicatio3 = storeData.applicationData) !== null && _storeData$applicatio3 !== void 0 && (_storeData$applicatio4 = _storeData$applicatio3.plumberInfo) !== null && _storeData$applicatio4 !== void 0 && (_storeData$applicatio5 = _storeData$applicatio4[0]) !== null && _storeData$applicatio5 !== void 0 && _storeData$applicatio5.licenseNo) plumberInfoData.licenseNo = storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio6 = storeData.applicationData) === null || _storeData$applicatio6 === void 0 ? void 0 : (_storeData$applicatio7 = _storeData$applicatio6.plumberInfo) === null || _storeData$applicatio7 === void 0 ? void 0 : (_storeData$applicatio8 = _storeData$applicatio7[0]) === null || _storeData$applicatio8 === void 0 ? void 0 : _storeData$applicatio8.licenseNo;
      if (storeData !== null && storeData !== void 0 && (_storeData$applicatio9 = storeData.applicationData) !== null && _storeData$applicatio9 !== void 0 && (_storeData$applicatio10 = _storeData$applicatio9.plumberInfo) !== null && _storeData$applicatio10 !== void 0 && (_storeData$applicatio11 = _storeData$applicatio10[0]) !== null && _storeData$applicatio11 !== void 0 && _storeData$applicatio11.mobileNumber) plumberInfoData.mobileNumber = storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio12 = storeData.applicationData) === null || _storeData$applicatio12 === void 0 ? void 0 : (_storeData$applicatio13 = _storeData$applicatio12.plumberInfo) === null || _storeData$applicatio13 === void 0 ? void 0 : (_storeData$applicatio14 = _storeData$applicatio13[0]) === null || _storeData$applicatio14 === void 0 ? void 0 : _storeData$applicatio14.mobileNumber;
      if (storeData !== null && storeData !== void 0 && (_storeData$applicatio15 = storeData.applicationData) !== null && _storeData$applicatio15 !== void 0 && (_storeData$applicatio16 = _storeData$applicatio15.plumberInfo) !== null && _storeData$applicatio16 !== void 0 && (_storeData$applicatio17 = _storeData$applicatio16[0]) !== null && _storeData$applicatio17 !== void 0 && _storeData$applicatio17.id) plumberInfoData.id = storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio18 = storeData.applicationData) === null || _storeData$applicatio18 === void 0 ? void 0 : (_storeData$applicatio19 = _storeData$applicatio18.plumberInfo) === null || _storeData$applicatio19 === void 0 ? void 0 : (_storeData$applicatio20 = _storeData$applicatio19[0]) === null || _storeData$applicatio20 === void 0 ? void 0 : _storeData$applicatio20.id;
      if (storeData !== null && storeData !== void 0 && (_storeData$applicatio21 = storeData.applicationData) !== null && _storeData$applicatio21 !== void 0 && (_storeData$applicatio22 = _storeData$applicatio21.plumberInfo) !== null && _storeData$applicatio22 !== void 0 && (_storeData$applicatio23 = _storeData$applicatio22[0]) !== null && _storeData$applicatio23 !== void 0 && _storeData$applicatio23.name) plumberInfoData.name = storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio24 = storeData.applicationData) === null || _storeData$applicatio24 === void 0 ? void 0 : (_storeData$applicatio25 = _storeData$applicatio24.plumberInfo) === null || _storeData$applicatio25 === void 0 ? void 0 : (_storeData$applicatio26 = _storeData$applicatio25[0]) === null || _storeData$applicatio26 === void 0 ? void 0 : _storeData$applicatio26.name;
      plumberInfo = [plumberInfoData];
    }
    let wsPayload = {
      WaterConnection: {
        id: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio27 = storeData.applicationData) === null || _storeData$applicatio27 === void 0 ? void 0 : _storeData$applicatio27.id,
        applicationNo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio28 = storeData.applicationData) === null || _storeData$applicatio28 === void 0 ? void 0 : _storeData$applicatio28.applicationNo,
        applicationStatus: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio29 = storeData.applicationData) === null || _storeData$applicatio29 === void 0 ? void 0 : _storeData$applicatio29.applicationStatus,
        status: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio30 = storeData.applicationData) === null || _storeData$applicatio30 === void 0 ? void 0 : _storeData$applicatio30.status,
        connectionNo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio31 = storeData.applicationData) === null || _storeData$applicatio31 === void 0 ? void 0 : _storeData$applicatio31.connectionNo,
        connectionHolders: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio32 = storeData.applicationData) === null || _storeData$applicatio32 === void 0 ? void 0 : _storeData$applicatio32.connectionHolders,
        applicationType: "NEW_WATER_CONNECTION",
        dateEffectiveFrom: convertDateToEpoch(data === null || data === void 0 ? void 0 : data.date),
        isdisconnection: true,
        isDisconnectionTemporary: (data === null || data === void 0 ? void 0 : (_data$type = data.type) === null || _data$type === void 0 ? void 0 : (_data$type$value = _data$type.value) === null || _data$type$value === void 0 ? void 0 : _data$type$value.code) === "Temporary" || (data === null || data === void 0 ? void 0 : (_data$type2 = data.type) === null || _data$type2 === void 0 ? void 0 : (_data$type2$value = _data$type2.value) === null || _data$type2$value === void 0 ? void 0 : _data$type2$value.code) === "TEMPORARY" ? true : false,
        disconnectionReason: data === null || data === void 0 ? void 0 : data.reason.value,
        documents: data === null || data === void 0 ? void 0 : data.documents,
        water: true,
        sewerage: false,
        proposedTaps: (storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio33 = storeData.applicationData) === null || _storeData$applicatio33 === void 0 ? void 0 : _storeData$applicatio33.proposedTaps) && Number(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio34 = storeData.applicationData) === null || _storeData$applicatio34 === void 0 ? void 0 : _storeData$applicatio34.proposedTaps),
        proposedPipeSize: (storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio35 = storeData.applicationData) === null || _storeData$applicatio35 === void 0 ? void 0 : (_storeData$applicatio36 = _storeData$applicatio35.proposedPipeSize) === null || _storeData$applicatio36 === void 0 ? void 0 : _storeData$applicatio36.size) && Number(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio37 = storeData.applicationData) === null || _storeData$applicatio37 === void 0 ? void 0 : (_storeData$applicatio38 = _storeData$applicatio37.proposedPipeSize) === null || _storeData$applicatio38 === void 0 ? void 0 : _storeData$applicatio38.size),
        service: "Water",
        property: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio39 = storeData.applicationData) === null || _storeData$applicatio39 === void 0 ? void 0 : _storeData$applicatio39.property,
        propertyId: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio40 = storeData.applicationData) === null || _storeData$applicatio40 === void 0 ? void 0 : _storeData$applicatio40.propertyId,
        oldConnectionNo: null,
        plumberInfo: ((_plumberInfo = plumberInfo) === null || _plumberInfo === void 0 ? void 0 : _plumberInfo.length) > 0 ? plumberInfo : null,
        roadCuttingInfo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio41 = storeData.applicationData) === null || _storeData$applicatio41 === void 0 ? void 0 : _storeData$applicatio41.roadCuttingInfo,
        roadCuttingArea: null,
        roadType: null,
        connectionExecutionDate: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio42 = storeData.applicationData) === null || _storeData$applicatio42 === void 0 ? void 0 : _storeData$applicatio42.connectionExecutionDate,
        noOfTaps: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio43 = storeData.applicationData) === null || _storeData$applicatio43 === void 0 ? void 0 : _storeData$applicatio43.noOfTaps,
        additionalDetails: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio44 = storeData.applicationData) === null || _storeData$applicatio44 === void 0 ? void 0 : _storeData$applicatio44.additionalDetails,
        tenantId: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio45 = storeData.applicationData) === null || _storeData$applicatio45 === void 0 ? void 0 : _storeData$applicatio45.tenantId,
        connectionType: storeData.applicationData.connectionType || null,
        waterSource: storeData.applicationData.waterSource || null,
        processInstance: {
          ...(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio46 = storeData.applicationData) === null || _storeData$applicatio46 === void 0 ? void 0 : _storeData$applicatio46.processInstance),
          action: "INITIATE"
        },
        channel: user === "citizen" ? "CITIZEN" : "CFC_COUNTER"
      },
      disconnectRequest: true
    };
    if (storeData.applicationData.connectionType) {
      if (storeData.applicationData.meterInstallationDate) wsPayload.WaterConnection.meterInstallationDate = storeData.applicationData.meterInstallationDate;
      if (storeData.applicationData.meterId) wsPayload.WaterConnection.meterId = storeData.applicationData.meterId;
    }
    let swPayload = {
      SewerageConnection: {
        id: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio47 = storeData.applicationData) === null || _storeData$applicatio47 === void 0 ? void 0 : _storeData$applicatio47.id,
        applicationNo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio48 = storeData.applicationData) === null || _storeData$applicatio48 === void 0 ? void 0 : _storeData$applicatio48.applicationNo,
        applicationStatus: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio49 = storeData.applicationData) === null || _storeData$applicatio49 === void 0 ? void 0 : _storeData$applicatio49.applicationStatus,
        status: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio50 = storeData.applicationData) === null || _storeData$applicatio50 === void 0 ? void 0 : _storeData$applicatio50.status,
        connectionNo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio51 = storeData.applicationData) === null || _storeData$applicatio51 === void 0 ? void 0 : _storeData$applicatio51.connectionNo,
        connectionHolders: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio52 = storeData.applicationData) === null || _storeData$applicatio52 === void 0 ? void 0 : _storeData$applicatio52.connectionHolders,
        applicationType: "NEW_WATER_CONNECTION",
        dateEffectiveFrom: convertDateToEpoch(data === null || data === void 0 ? void 0 : data.date),
        isdisconnection: true,
        isDisconnectionTemporary: (data === null || data === void 0 ? void 0 : (_data$type3 = data.type) === null || _data$type3 === void 0 ? void 0 : (_data$type3$value = _data$type3.value) === null || _data$type3$value === void 0 ? void 0 : _data$type3$value.code) === "Temporary" ? true : false,
        disconnectionReason: data === null || data === void 0 ? void 0 : data.reason.value,
        documents: data === null || data === void 0 ? void 0 : data.documents,
        water: false,
        sewerage: true,
        proposedWaterClosets: (storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio53 = storeData.applicationData) === null || _storeData$applicatio53 === void 0 ? void 0 : _storeData$applicatio53.proposedWaterClosets) && Number(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio54 = storeData.applicationData) === null || _storeData$applicatio54 === void 0 ? void 0 : _storeData$applicatio54.proposedWaterClosets),
        proposedToilets: (storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio55 = storeData.applicationData) === null || _storeData$applicatio55 === void 0 ? void 0 : _storeData$applicatio55.proposedToilets) && Number(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio56 = storeData.applicationData) === null || _storeData$applicatio56 === void 0 ? void 0 : _storeData$applicatio56.proposedToilets),
        service: "Sewerage",
        property: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio57 = storeData.applicationData) === null || _storeData$applicatio57 === void 0 ? void 0 : _storeData$applicatio57.property,
        propertyId: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio58 = storeData.applicationData) === null || _storeData$applicatio58 === void 0 ? void 0 : _storeData$applicatio58.propertyId,
        oldConnectionNo: null,
        plumberInfo: ((_plumberInfo2 = plumberInfo) === null || _plumberInfo2 === void 0 ? void 0 : _plumberInfo2.length) > 0 ? plumberInfo : null,
        roadCuttingInfo: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio59 = storeData.applicationData) === null || _storeData$applicatio59 === void 0 ? void 0 : _storeData$applicatio59.roadCuttingInfo,
        roadCuttingArea: null,
        roadType: null,
        connectionExecutionDate: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio60 = storeData.applicationData) === null || _storeData$applicatio60 === void 0 ? void 0 : _storeData$applicatio60.connectionExecutionDate,
        noOfWaterClosets: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio61 = storeData.applicationData) === null || _storeData$applicatio61 === void 0 ? void 0 : _storeData$applicatio61.noOfWaterClosets,
        noOfToilets: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio62 = storeData.applicationData) === null || _storeData$applicatio62 === void 0 ? void 0 : _storeData$applicatio62.noOfToilets,
        additionalDetails: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio63 = storeData.applicationData) === null || _storeData$applicatio63 === void 0 ? void 0 : _storeData$applicatio63.additionalDetails,
        tenantId: storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio64 = storeData.applicationData) === null || _storeData$applicatio64 === void 0 ? void 0 : _storeData$applicatio64.tenantId,
        connectionType: "Non Metered",
        waterSource: storeData.applicationData.waterSource || null,
        processInstance: {
          ...(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio65 = storeData.applicationData) === null || _storeData$applicatio65 === void 0 ? void 0 : _storeData$applicatio65.processInstance),
          action: "INITIATE"
        },
        channel: user === "citizen" ? "CITIZEN" : "CFC_COUNTER"
      },
      disconnectRequest: true
    };
    let returnObject = service === "WATER" ? wsPayload : swPayload;
    returnObject = (_Digit13 = Digit) !== null && _Digit13 !== void 0 && (_Digit13$Customizatio = _Digit13.Customizations) !== null && _Digit13$Customizatio !== void 0 && (_Digit13$Customizatio2 = _Digit13$Customizatio.WS) !== null && _Digit13$Customizatio2 !== void 0 && _Digit13$Customizatio2.customiseCreatePayloadOfWSDisconnection ? (_Digit14 = Digit) === null || _Digit14 === void 0 ? void 0 : (_Digit14$Customizatio = _Digit14.Customizations) === null || _Digit14$Customizatio === void 0 ? void 0 : (_Digit14$Customizatio2 = _Digit14$Customizatio.WS) === null || _Digit14$Customizatio2 === void 0 ? void 0 : _Digit14$Customizatio2.customiseCreatePayloadOfWSDisconnection(data, returnObject, service) : returnObject;
    return Promise.resolve(returnObject);
  } catch (e) {
    return Promise.reject(e);
  }
};
const createPayloadOfWSReSubmitDisconnection = function (data, storeData, service) {
  try {
    var _data$type4, _data$type4$value, _storeData$applicatio66, _data$type5, _data$type5$value, _storeData$applicatio67, _Digit15, _Digit15$Customizatio, _Digit15$Customizatio2, _Digit16, _Digit16$Customizatio, _Digit16$Customizatio2;
    const user = Digit.UserService.getType();
    let wsPayload = {
      WaterConnection: {
        ...(storeData === null || storeData === void 0 ? void 0 : storeData.applicationData),
        dateEffectiveFrom: convertDateToEpoch(data === null || data === void 0 ? void 0 : data.date),
        isDisconnectionTemporary: (data === null || data === void 0 ? void 0 : (_data$type4 = data.type) === null || _data$type4 === void 0 ? void 0 : (_data$type4$value = _data$type4.value) === null || _data$type4$value === void 0 ? void 0 : _data$type4$value.code) === "Temporary" ? true : false,
        disconnectionReason: data === null || data === void 0 ? void 0 : data.reason.value,
        documents: data === null || data === void 0 ? void 0 : data.documents,
        water: true,
        sewerage: false,
        service: "Water",
        processInstance: {
          ...(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio66 = storeData.applicationData) === null || _storeData$applicatio66 === void 0 ? void 0 : _storeData$applicatio66.processInstance),
          action: "RESUBMIT_APPLICATION"
        },
        channel: "CITIZEN"
      },
      disconnectRequest: true
    };
    if (storeData.applicationData.connectionType) {
      if (storeData.applicationData.meterInstallationDate) wsPayload.WaterConnection.meterInstallationDate = storeData.applicationData.meterInstallationDate;
      if (storeData.applicationData.meterId) wsPayload.WaterConnection.meterId = storeData.applicationData.meterId;
    }
    let swPayload = {
      SewerageConnection: {
        ...(storeData === null || storeData === void 0 ? void 0 : storeData.applicationData),
        dateEffectiveFrom: convertDateToEpoch(data === null || data === void 0 ? void 0 : data.date),
        isdisconnection: true,
        isDisconnectionTemporary: (data === null || data === void 0 ? void 0 : (_data$type5 = data.type) === null || _data$type5 === void 0 ? void 0 : (_data$type5$value = _data$type5.value) === null || _data$type5$value === void 0 ? void 0 : _data$type5$value.code) === "Temporary" ? true : false,
        disconnectionReason: data === null || data === void 0 ? void 0 : data.reason.value,
        documents: data === null || data === void 0 ? void 0 : data.documents,
        water: false,
        sewerage: true,
        service: "Sewerage",
        processInstance: {
          ...(storeData === null || storeData === void 0 ? void 0 : (_storeData$applicatio67 = storeData.applicationData) === null || _storeData$applicatio67 === void 0 ? void 0 : _storeData$applicatio67.processInstance),
          action: "RESUBMIT_APPLICATION"
        },
        channel: "CITIZEN"
      },
      disconnectRequest: true
    };
    let returnObject = service === "WATER" ? wsPayload : swPayload;
    returnObject = (_Digit15 = Digit) !== null && _Digit15 !== void 0 && (_Digit15$Customizatio = _Digit15.Customizations) !== null && _Digit15$Customizatio !== void 0 && (_Digit15$Customizatio2 = _Digit15$Customizatio.WS) !== null && _Digit15$Customizatio2 !== void 0 && _Digit15$Customizatio2.customiseCreatePayloadOfWSReSubmitDisconnection ? (_Digit16 = Digit) === null || _Digit16 === void 0 ? void 0 : (_Digit16$Customizatio = _Digit16.Customizations) === null || _Digit16$Customizatio === void 0 ? void 0 : (_Digit16$Customizatio2 = _Digit16$Customizatio.WS) === null || _Digit16$Customizatio2 === void 0 ? void 0 : _Digit16$Customizatio2.customiseCreatePayloadOfWSReSubmitDisconnection(data, returnObject, service) : returnObject;
    return Promise.resolve(returnObject);
  } catch (e) {
    return Promise.reject(e);
  }
};
const updatePayloadOfWSDisconnection = function (data, type) {
  try {
    var _data$plumberInfo, _data$plumberInfo2, _Digit17, _Digit17$Customizatio, _Digit17$Customizatio2, _Digit18, _Digit18$Customizatio, _Digit18$Customizatio2;
    let payload = {
      ...data,
      plumberInfo: data !== null && data !== void 0 && (_data$plumberInfo = data.plumberInfo) !== null && _data$plumberInfo !== void 0 && _data$plumberInfo[0] ? [{
        ...(data === null || data === void 0 ? void 0 : (_data$plumberInfo2 = data.plumberInfo) === null || _data$plumberInfo2 === void 0 ? void 0 : _data$plumberInfo2[0]),
        id: null
      }] : data === null || data === void 0 ? void 0 : data.plumberInfo,
      applicationType: type === "WATER" ? "DISCONNECT_WATER_CONNECTION" : "DISCONNECT_SEWERAGE_CONNECTION",
      processInstance: {
        ...(data === null || data === void 0 ? void 0 : data.processInstance),
        businessService: type === "WATER" ? "DisconnectWSConnection" : "DisconnectSWConnection",
        action: "SUBMIT_APPLICATION"
      }
    };
    payload = (_Digit17 = Digit) !== null && _Digit17 !== void 0 && (_Digit17$Customizatio = _Digit17.Customizations) !== null && _Digit17$Customizatio !== void 0 && (_Digit17$Customizatio2 = _Digit17$Customizatio.WS) !== null && _Digit17$Customizatio2 !== void 0 && _Digit17$Customizatio2.customiseUpdatePayloadOfWSDisconnection ? (_Digit18 = Digit) === null || _Digit18 === void 0 ? void 0 : (_Digit18$Customizatio = _Digit18.Customizations) === null || _Digit18$Customizatio === void 0 ? void 0 : (_Digit18$Customizatio2 = _Digit18$Customizatio.WS) === null || _Digit18$Customizatio2 === void 0 ? void 0 : _Digit18$Customizatio2.customiseUpdatePayloadOfWSDisconnection(data, payload, type) : payload;
    return Promise.resolve(payload);
  } catch (e) {
    return Promise.reject(e);
  }
};
const checkForEmployee = roles => {
  var _userInfo$info;
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const userInfo = Digit.UserService.getUser();
  let rolesArray = [];
  const rolearray = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.roles.filter(item => {
    for (let i = 0; i < roles.length; i++) {
      if (item.code == roles[i] && item.tenantId === tenantId) rolesArray.push(true);
    }
  });
  return rolesArray === null || rolesArray === void 0 ? void 0 : rolesArray.length;
};
const getBusinessService = data => {
  if ((data === null || data === void 0 ? void 0 : data.service) == "WATER") return "WS.ONE_TIME_FEE";else return "SW.ONE_TIME_FEE";
};
const convertApplicationData = function (data, serviceType, modify, editByConfig, t) {
  var _data$propertyDetails, _data$propertyDetails2, _data$applicationData, _data$applicationData2, _data$applicationData3, _data$applicationData4, _data$applicationData5, _data$applicationData6, _data$applicationData7, _data$applicationData8, _data$applicationData9, _data$applicationData10, _data$applicationData11, _data$applicationData12, _data$applicationData13, _data$applicationData14, _data$applicationData15, _data$applicationData16, _data$applicationData17, _data$applicationData18, _data$applicationData19, _data$applicationData20, _data$applicationData21, _data$applicationData22, _data$applicationData23, _data$applicationData24, _data$applicationData25, _data$applicationData26, _data$applicationData27, _data$applicationData28, _data$applicationData29, _data$applicationData30, _data$applicationData31, _data$applicationData32, _data$applicationData33, _data$applicationData34, _data$applicationData35, _data$applicationData36, _data$applicationData37, _data$applicationData38, _data$applicationData39, _data$applicationData40, _data$applicationData41, _data$applicationData42, _data$applicationData43, _data$applicationData44, _data$applicationData45, _data$applicationData46, _data$applicationData47, _data$applicationData48, _data$applicationData49, _data$applicationData50, _data$applicationData51, _data$applicationData52, _data$applicationData53, _data$applicationData54, _data$applicationData55, _data$applicationData56, _data$applicationData57, _data$applicationData58, _data$applicationData59, _data$applicationData60, _data$applicationData61, _data$applicationData62, _data$applicationData63, _data$applicationData64, _data$applicationData65, _data$applicationData66, _data$applicationData67, _data$applicationData68, _data$applicationData69, _data$applicationData70, _data$applicationData71, _data$applicationData72, _data$applicationData73, _data$applicationData74;
  if (modify === void 0) {
    modify = false;
  }
  if (editByConfig === void 0) {
    editByConfig = false;
  }
  data === null || data === void 0 ? void 0 : (_data$propertyDetails = data.propertyDetails) === null || _data$propertyDetails === void 0 ? void 0 : (_data$propertyDetails2 = _data$propertyDetails.owners) === null || _data$propertyDetails2 === void 0 ? void 0 : _data$propertyDetails2.forEach(owner => {
    if (owner !== null && owner !== void 0 && owner.permanentAddress) owner.correspondenceAddress = owner === null || owner === void 0 ? void 0 : owner.permanentAddress;
  });
  let ConnectionDetails = [{
    water: serviceType === "WATER" ? true : false,
    sewerage: serviceType === "WATER" ? false : true,
    applicationNo: data === null || data === void 0 ? void 0 : (_data$applicationData = data.applicationData) === null || _data$applicationData === void 0 ? void 0 : _data$applicationData.applicationNo,
    serviceName: serviceType,
    proposedTaps: Number(data === null || data === void 0 ? void 0 : (_data$applicationData2 = data.applicationData) === null || _data$applicationData2 === void 0 ? void 0 : _data$applicationData2.proposedTaps) || "",
    proposedPipeSize: data !== null && data !== void 0 && (_data$applicationData3 = data.applicationData) !== null && _data$applicationData3 !== void 0 && _data$applicationData3.proposedPipeSize ? {
      i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData4 = data.applicationData) === null || _data$applicationData4 === void 0 ? void 0 : _data$applicationData4.proposedPipeSize,
      code: data === null || data === void 0 ? void 0 : (_data$applicationData5 = data.applicationData) === null || _data$applicationData5 === void 0 ? void 0 : _data$applicationData5.proposedPipeSize,
      size: data === null || data === void 0 ? void 0 : (_data$applicationData6 = data.applicationData) === null || _data$applicationData6 === void 0 ? void 0 : _data$applicationData6.proposedPipeSize
    } : "",
    proposedToilets: (data === null || data === void 0 ? void 0 : (_data$applicationData7 = data.applicationData) === null || _data$applicationData7 === void 0 ? void 0 : _data$applicationData7.proposedToilets) || "",
    proposedWaterClosets: (data === null || data === void 0 ? void 0 : (_data$applicationData8 = data.applicationData) === null || _data$applicationData8 === void 0 ? void 0 : _data$applicationData8.proposedWaterClosets) || ""
  }];
  const ConnectionHolderDetails = (data === null || data === void 0 ? void 0 : (_data$applicationData9 = data.applicationData) === null || _data$applicationData9 === void 0 ? void 0 : (_data$applicationData10 = _data$applicationData9.connectionHolders) === null || _data$applicationData10 === void 0 ? void 0 : _data$applicationData10.length) > 0 ? [{
    sameAsOwnerDetails: false,
    uuid: data === null || data === void 0 ? void 0 : (_data$applicationData11 = data.applicationData) === null || _data$applicationData11 === void 0 ? void 0 : (_data$applicationData12 = _data$applicationData11.connectionHolders) === null || _data$applicationData12 === void 0 ? void 0 : (_data$applicationData13 = _data$applicationData12[0]) === null || _data$applicationData13 === void 0 ? void 0 : _data$applicationData13.uuid,
    name: (data === null || data === void 0 ? void 0 : (_data$applicationData14 = data.applicationData) === null || _data$applicationData14 === void 0 ? void 0 : (_data$applicationData15 = _data$applicationData14.connectionHolders) === null || _data$applicationData15 === void 0 ? void 0 : (_data$applicationData16 = _data$applicationData15[0]) === null || _data$applicationData16 === void 0 ? void 0 : _data$applicationData16.name) || "",
    mobileNumber: (data === null || data === void 0 ? void 0 : (_data$applicationData17 = data.applicationData) === null || _data$applicationData17 === void 0 ? void 0 : (_data$applicationData18 = _data$applicationData17.connectionHolders) === null || _data$applicationData18 === void 0 ? void 0 : (_data$applicationData19 = _data$applicationData18[0]) === null || _data$applicationData19 === void 0 ? void 0 : _data$applicationData19.mobileNumber) || "",
    guardian: (data === null || data === void 0 ? void 0 : (_data$applicationData20 = data.applicationData) === null || _data$applicationData20 === void 0 ? void 0 : (_data$applicationData21 = _data$applicationData20.connectionHolders) === null || _data$applicationData21 === void 0 ? void 0 : (_data$applicationData22 = _data$applicationData21[0]) === null || _data$applicationData22 === void 0 ? void 0 : _data$applicationData22.fatherOrHusbandName) || "",
    address: (data === null || data === void 0 ? void 0 : (_data$applicationData23 = data.applicationData) === null || _data$applicationData23 === void 0 ? void 0 : (_data$applicationData24 = _data$applicationData23.connectionHolders) === null || _data$applicationData24 === void 0 ? void 0 : (_data$applicationData25 = _data$applicationData24[0]) === null || _data$applicationData25 === void 0 ? void 0 : _data$applicationData25.correspondenceAddress) || "",
    gender: data !== null && data !== void 0 && (_data$applicationData26 = data.applicationData) !== null && _data$applicationData26 !== void 0 && (_data$applicationData27 = _data$applicationData26.connectionHolders) !== null && _data$applicationData27 !== void 0 && (_data$applicationData28 = _data$applicationData27[0]) !== null && _data$applicationData28 !== void 0 && _data$applicationData28.gender ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData29 = data.applicationData) === null || _data$applicationData29 === void 0 ? void 0 : (_data$applicationData30 = _data$applicationData29.connectionHolders) === null || _data$applicationData30 === void 0 ? void 0 : (_data$applicationData31 = _data$applicationData30[0]) === null || _data$applicationData31 === void 0 ? void 0 : _data$applicationData31.gender,
      i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData32 = data.applicationData) === null || _data$applicationData32 === void 0 ? void 0 : (_data$applicationData33 = _data$applicationData32.connectionHolders) === null || _data$applicationData33 === void 0 ? void 0 : (_data$applicationData34 = _data$applicationData33[0]) === null || _data$applicationData34 === void 0 ? void 0 : _data$applicationData34.gender
    } : "",
    relationship: data !== null && data !== void 0 && (_data$applicationData35 = data.applicationData) !== null && _data$applicationData35 !== void 0 && (_data$applicationData36 = _data$applicationData35.connectionHolders) !== null && _data$applicationData36 !== void 0 && (_data$applicationData37 = _data$applicationData36[0]) !== null && _data$applicationData37 !== void 0 && _data$applicationData37.relationship ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData38 = data.applicationData) === null || _data$applicationData38 === void 0 ? void 0 : (_data$applicationData39 = _data$applicationData38.connectionHolders) === null || _data$applicationData39 === void 0 ? void 0 : (_data$applicationData40 = _data$applicationData39[0]) === null || _data$applicationData40 === void 0 ? void 0 : _data$applicationData40.relationship,
      i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData41 = data.applicationData) === null || _data$applicationData41 === void 0 ? void 0 : (_data$applicationData42 = _data$applicationData41.connectionHolders) === null || _data$applicationData42 === void 0 ? void 0 : (_data$applicationData43 = _data$applicationData42[0]) === null || _data$applicationData43 === void 0 ? void 0 : _data$applicationData43.relationship
    } : "",
    ownerType: data !== null && data !== void 0 && (_data$applicationData44 = data.applicationData) !== null && _data$applicationData44 !== void 0 && (_data$applicationData45 = _data$applicationData44.connectionHolders) !== null && _data$applicationData45 !== void 0 && (_data$applicationData46 = _data$applicationData45[0]) !== null && _data$applicationData46 !== void 0 && _data$applicationData46.ownerType ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData47 = data.applicationData) === null || _data$applicationData47 === void 0 ? void 0 : (_data$applicationData48 = _data$applicationData47.connectionHolders) === null || _data$applicationData48 === void 0 ? void 0 : (_data$applicationData49 = _data$applicationData48[0]) === null || _data$applicationData49 === void 0 ? void 0 : _data$applicationData49.ownerType,
      i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData50 = data.applicationData) === null || _data$applicationData50 === void 0 ? void 0 : (_data$applicationData51 = _data$applicationData50.connectionHolders) === null || _data$applicationData51 === void 0 ? void 0 : (_data$applicationData52 = _data$applicationData51[0]) === null || _data$applicationData52 === void 0 ? void 0 : _data$applicationData52.ownerType
    } : "",
    documentId: "",
    documentType: "",
    file: ""
  }] : [{
    sameAsOwnerDetails: true,
    name: "",
    gender: "",
    mobileNumber: "",
    guardian: "",
    relationship: "",
    address: "",
    ownerType: "",
    documentId: "",
    documentType: "",
    file: ""
  }];
  let documents = [];
  if (data !== null && data !== void 0 && (_data$applicationData53 = data.applicationData) !== null && _data$applicationData53 !== void 0 && _data$applicationData53.documents) {
    data.applicationData.documents.forEach(data => {
      var _data$documentType;
      documents.push({
        active: true,
        code: data === null || data === void 0 ? void 0 : data.documentType,
        i18nKey: data === null || data === void 0 ? void 0 : (_data$documentType = data.documentType) === null || _data$documentType === void 0 ? void 0 : _data$documentType.replaceAll(".", "_"),
        documentType: data === null || data === void 0 ? void 0 : data.documentType,
        id: data.id,
        documentUid: data === null || data === void 0 ? void 0 : data.documentUid,
        fileStoreId: data === null || data === void 0 ? void 0 : data.fileStoreId
      });
    });
  }
  let DocumentsRequired = {
    documents: documents
  } || [];
  let cpt = {};
  cpt["details"] = (data === null || data === void 0 ? void 0 : data.propertyDetails) || {};
  let payload = {};
  const sourceSubDataValue = data !== null && data !== void 0 && (_data$applicationData54 = data.applicationData) !== null && _data$applicationData54 !== void 0 && _data$applicationData54.waterSource ? stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData55 = data.applicationData) === null || _data$applicationData55 === void 0 ? void 0 : (_data$applicationData56 = _data$applicationData55.waterSource) === null || _data$applicationData56 === void 0 ? void 0 : _data$applicationData56.toUpperCase(), " ", "_") : "";
  const sourceSubDataFilter = sourceSubDataValue ? stringReplaceAll(sourceSubDataValue === null || sourceSubDataValue === void 0 ? void 0 : sourceSubDataValue.toUpperCase(), ".", "_") : "";
  const connectionDetails = serviceType === "WATER" ? {
    connectionType: data !== null && data !== void 0 && (_data$applicationData57 = data.applicationData) !== null && _data$applicationData57 !== void 0 && _data$applicationData57.connectionType ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData58 = data.applicationData) === null || _data$applicationData58 === void 0 ? void 0 : _data$applicationData58.connectionType,
      i18nKey: t("WS_CONNECTIONTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData59 = data.applicationData) === null || _data$applicationData59 === void 0 ? void 0 : (_data$applicationData60 = _data$applicationData59.connectionType) === null || _data$applicationData60 === void 0 ? void 0 : _data$applicationData60.toUpperCase(), " ", "_"))
    } : "",
    waterSource: data !== null && data !== void 0 && (_data$applicationData61 = data.applicationData) !== null && _data$applicationData61 !== void 0 && _data$applicationData61.waterSource ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData62 = data.applicationData) === null || _data$applicationData62 === void 0 ? void 0 : _data$applicationData62.waterSource,
      i18nKey: t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData63 = data.applicationData) === null || _data$applicationData63 === void 0 ? void 0 : (_data$applicationData64 = _data$applicationData63.waterSource) === null || _data$applicationData64 === void 0 ? void 0 : (_data$applicationData65 = _data$applicationData64.split(".")[0]) === null || _data$applicationData65 === void 0 ? void 0 : _data$applicationData65.toUpperCase(), " ", "_"))
    } : "",
    sourceSubData: data !== null && data !== void 0 && (_data$applicationData66 = data.applicationData) !== null && _data$applicationData66 !== void 0 && _data$applicationData66.waterSource ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData67 = data.applicationData) === null || _data$applicationData67 === void 0 ? void 0 : _data$applicationData67.waterSource,
      i18nKey: t("WS_SERVICES_MASTERS_WATERSOURCE_" + sourceSubDataFilter)
    } : "",
    pipeSize: data !== null && data !== void 0 && (_data$applicationData68 = data.applicationData) !== null && _data$applicationData68 !== void 0 && _data$applicationData68.pipeSize ? {
      code: data === null || data === void 0 ? void 0 : (_data$applicationData69 = data.applicationData) === null || _data$applicationData69 === void 0 ? void 0 : _data$applicationData69.pipeSize,
      i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData70 = data.applicationData) === null || _data$applicationData70 === void 0 ? void 0 : _data$applicationData70.pipeSize,
      size: data === null || data === void 0 ? void 0 : (_data$applicationData71 = data.applicationData) === null || _data$applicationData71 === void 0 ? void 0 : _data$applicationData71.pipeSize
    } : "",
    noOfTaps: (data === null || data === void 0 ? void 0 : (_data$applicationData72 = data.applicationData) === null || _data$applicationData72 === void 0 ? void 0 : _data$applicationData72.noOfTaps) || ""
  } : {
    noOfWaterClosets: (data === null || data === void 0 ? void 0 : (_data$applicationData73 = data.applicationData) === null || _data$applicationData73 === void 0 ? void 0 : _data$applicationData73.noOfWaterClosets) || "",
    noOfToilets: (data === null || data === void 0 ? void 0 : (_data$applicationData74 = data.applicationData) === null || _data$applicationData74 === void 0 ? void 0 : _data$applicationData74.noOfToilets) || ""
  };
  if (modify) {
    var _data$applicationData75, _data$applicationData76, _data$applicationData77, _data$applicationData78, _data$applicationData79, _data$applicationData80, _data$applicationData81, _data$applicationData82, _data$applicationData83, _data$applicationData84, _data$applicationData85, _data$applicationData86, _data$applicationData87, _data$applicationData88, _data$applicationData89, _data$applicationData90, _data$applicationData91, _data$applicationData92, _data$applicationData93, _data$applicationData94, _data$applicationData95, _data$applicationData96, _data$applicationData97, _data$applicationData98, _data$applicationData99, _data$applicationData100, _data$applicationData101, _data$applicationData102, _data$applicationData103, _data$applicationData104, _data$applicationData105, _data$applicationData106;
    const activationDetails = [{
      meterId: data !== null && data !== void 0 && (_data$applicationData75 = data.applicationData) !== null && _data$applicationData75 !== void 0 && _data$applicationData75.meterId ? Number(data === null || data === void 0 ? void 0 : (_data$applicationData76 = data.applicationData) === null || _data$applicationData76 === void 0 ? void 0 : _data$applicationData76.meterId) : "",
      meterInstallationDate: data !== null && data !== void 0 && (_data$applicationData77 = data.applicationData) !== null && _data$applicationData77 !== void 0 && _data$applicationData77.meterInstallationDate ? convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$applicationData78 = data.applicationData) === null || _data$applicationData78 === void 0 ? void 0 : _data$applicationData78.meterInstallationDate, true) : null,
      meterInitialReading: data !== null && data !== void 0 && (_data$applicationData79 = data.applicationData) !== null && _data$applicationData79 !== void 0 && (_data$applicationData80 = _data$applicationData79.additionalDetails) !== null && _data$applicationData80 !== void 0 && _data$applicationData80.initialMeterReading ? Number(data === null || data === void 0 ? void 0 : (_data$applicationData81 = data.applicationData) === null || _data$applicationData81 === void 0 ? void 0 : (_data$applicationData82 = _data$applicationData81.additionalDetails) === null || _data$applicationData82 === void 0 ? void 0 : _data$applicationData82.initialMeterReading) : "",
      connectionExecutionDate: data !== null && data !== void 0 && (_data$applicationData83 = data.applicationData) !== null && _data$applicationData83 !== void 0 && _data$applicationData83.connectionExecutionDate ? convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$applicationData84 = data.applicationData) === null || _data$applicationData84 === void 0 ? void 0 : _data$applicationData84.connectionExecutionDate, true) : null
    }];
    if (window.location.href.includes("modify-application-edit")) activationDetails[0].dateEffectiveFrom = data !== null && data !== void 0 && (_data$applicationData85 = data.applicationData) !== null && _data$applicationData85 !== void 0 && _data$applicationData85.dateEffectiveFrom ? convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$applicationData86 = data.applicationData) === null || _data$applicationData86 === void 0 ? void 0 : _data$applicationData86.dateEffectiveFrom, true) : null;
    const sourceSubDataValue = data !== null && data !== void 0 && (_data$applicationData87 = data.applicationData) !== null && _data$applicationData87 !== void 0 && _data$applicationData87.waterSource ? stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData88 = data.applicationData) === null || _data$applicationData88 === void 0 ? void 0 : (_data$applicationData89 = _data$applicationData88.waterSource) === null || _data$applicationData89 === void 0 ? void 0 : _data$applicationData89.toUpperCase(), " ", "_") : "";
    const sourceSubDataFilter = sourceSubDataValue ? stringReplaceAll(sourceSubDataValue === null || sourceSubDataValue === void 0 ? void 0 : sourceSubDataValue.toUpperCase(), ".", "_") : "";
    const connectionDetails = serviceType === "WATER" ? {
      connectionType: data !== null && data !== void 0 && (_data$applicationData90 = data.applicationData) !== null && _data$applicationData90 !== void 0 && _data$applicationData90.connectionType ? {
        code: data === null || data === void 0 ? void 0 : (_data$applicationData91 = data.applicationData) === null || _data$applicationData91 === void 0 ? void 0 : _data$applicationData91.connectionType,
        i18nKey: t("WS_CONNECTIONTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData92 = data.applicationData) === null || _data$applicationData92 === void 0 ? void 0 : (_data$applicationData93 = _data$applicationData92.connectionType) === null || _data$applicationData93 === void 0 ? void 0 : _data$applicationData93.toUpperCase(), " ", "_"))
      } : "",
      waterSource: data !== null && data !== void 0 && (_data$applicationData94 = data.applicationData) !== null && _data$applicationData94 !== void 0 && _data$applicationData94.waterSource ? {
        code: data === null || data === void 0 ? void 0 : (_data$applicationData95 = data.applicationData) === null || _data$applicationData95 === void 0 ? void 0 : _data$applicationData95.waterSource,
        i18nKey: t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$applicationData96 = data.applicationData) === null || _data$applicationData96 === void 0 ? void 0 : (_data$applicationData97 = _data$applicationData96.waterSource) === null || _data$applicationData97 === void 0 ? void 0 : (_data$applicationData98 = _data$applicationData97.split(".")[0]) === null || _data$applicationData98 === void 0 ? void 0 : _data$applicationData98.toUpperCase(), " ", "_"))
      } : "",
      sourceSubData: data !== null && data !== void 0 && (_data$applicationData99 = data.applicationData) !== null && _data$applicationData99 !== void 0 && _data$applicationData99.waterSource ? {
        code: data === null || data === void 0 ? void 0 : (_data$applicationData100 = data.applicationData) === null || _data$applicationData100 === void 0 ? void 0 : _data$applicationData100.waterSource,
        i18nKey: t("WS_SERVICES_MASTERS_WATERSOURCE_" + sourceSubDataFilter)
      } : "",
      pipeSize: data !== null && data !== void 0 && (_data$applicationData101 = data.applicationData) !== null && _data$applicationData101 !== void 0 && _data$applicationData101.pipeSize ? {
        code: data === null || data === void 0 ? void 0 : (_data$applicationData102 = data.applicationData) === null || _data$applicationData102 === void 0 ? void 0 : _data$applicationData102.pipeSize,
        i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData103 = data.applicationData) === null || _data$applicationData103 === void 0 ? void 0 : _data$applicationData103.pipeSize
      } : "",
      noOfTaps: (data === null || data === void 0 ? void 0 : (_data$applicationData104 = data.applicationData) === null || _data$applicationData104 === void 0 ? void 0 : _data$applicationData104.noOfTaps) || ""
    } : {
      noOfWaterClosets: (data === null || data === void 0 ? void 0 : (_data$applicationData105 = data.applicationData) === null || _data$applicationData105 === void 0 ? void 0 : _data$applicationData105.noOfWaterClosets) || "",
      noOfToilets: (data === null || data === void 0 ? void 0 : (_data$applicationData106 = data.applicationData) === null || _data$applicationData106 === void 0 ? void 0 : _data$applicationData106.noOfToilets) || ""
    };
    if (window.location.href.includes("modify-application-edit")) {
      DocumentsRequired = {
        documents: documents
      };
    } else {
      DocumentsRequired = {
        documents: []
      };
    }
    payload = {
      ConnectionDetails: ConnectionDetails,
      connectionDetails: [connectionDetails],
      ConnectionHolderDetails: ConnectionHolderDetails,
      activationDetails: activationDetails,
      DocumentsRequired: DocumentsRequired,
      cpt: cpt,
      InfoLabel: "InfoLabel"
    };
  } else {
    var _data$applicationData107, _data$applicationData108, _data$applicationData109, _data$applicationData110, _data$applicationData111, _data$applicationData112, _data$applicationData113, _data$applicationData114, _data$applicationData115, _data$applicationData116, _data$applicationData117, _data$applicationData118, _data$applicationData119, _data$applicationData120, _data$applicationData121, _data$applicationData122, _data$applicationData123;
    payload = {
      ConnectionDetails: ConnectionDetails,
      ConnectionHolderDetails: ConnectionHolderDetails,
      DocumentsRequired: DocumentsRequired,
      cpt: cpt,
      InfoLabel: "InfoLabel"
    };
    let plumberDetails = [{
      detailsProvidedBy: data !== null && data !== void 0 && (_data$applicationData107 = data.applicationData) !== null && _data$applicationData107 !== void 0 && (_data$applicationData108 = _data$applicationData107.additionalDetails) !== null && _data$applicationData108 !== void 0 && _data$applicationData108.detailsProvidedBy ? {
        i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData109 = data.applicationData) === null || _data$applicationData109 === void 0 ? void 0 : (_data$applicationData110 = _data$applicationData109.additionalDetails) === null || _data$applicationData110 === void 0 ? void 0 : _data$applicationData110.detailsProvidedBy,
        code: data === null || data === void 0 ? void 0 : (_data$applicationData111 = data.applicationData) === null || _data$applicationData111 === void 0 ? void 0 : (_data$applicationData112 = _data$applicationData111.additionalDetails) === null || _data$applicationData112 === void 0 ? void 0 : _data$applicationData112.detailsProvidedBy,
        size: data === null || data === void 0 ? void 0 : (_data$applicationData113 = data.applicationData) === null || _data$applicationData113 === void 0 ? void 0 : (_data$applicationData114 = _data$applicationData113.additionalDetails) === null || _data$applicationData114 === void 0 ? void 0 : _data$applicationData114.detailsProvidedBy
      } : "",
      plumberName: data === null || data === void 0 ? void 0 : (_data$applicationData115 = data.applicationData) === null || _data$applicationData115 === void 0 ? void 0 : (_data$applicationData116 = _data$applicationData115.plumberInfo) === null || _data$applicationData116 === void 0 ? void 0 : _data$applicationData116[0].name,
      plumberMobileNo: data === null || data === void 0 ? void 0 : (_data$applicationData117 = data.applicationData) === null || _data$applicationData117 === void 0 ? void 0 : (_data$applicationData118 = _data$applicationData117.plumberInfo) === null || _data$applicationData118 === void 0 ? void 0 : _data$applicationData118[0].mobileNumber,
      plumberLicenseNo: data === null || data === void 0 ? void 0 : (_data$applicationData119 = data.applicationData) === null || _data$applicationData119 === void 0 ? void 0 : (_data$applicationData120 = _data$applicationData119.plumberInfo) === null || _data$applicationData120 === void 0 ? void 0 : _data$applicationData120[0].licenseNo
    }];
    let roadCuttingDetails = data !== null && data !== void 0 && (_data$applicationData121 = data.applicationData) !== null && _data$applicationData121 !== void 0 && _data$applicationData121.roadCuttingInfo ? data === null || data === void 0 ? void 0 : (_data$applicationData122 = data.applicationData) === null || _data$applicationData122 === void 0 ? void 0 : (_data$applicationData123 = _data$applicationData122.roadCuttingInfo) === null || _data$applicationData123 === void 0 ? void 0 : _data$applicationData123.map((rc, index) => {
      return rc.id ? {
        key: index + "_" + Date.now(),
        id: rc === null || rc === void 0 ? void 0 : rc.id,
        roadType: {
          i18nKey: "WS_ROADTYPE_" + (rc === null || rc === void 0 ? void 0 : rc.roadType),
          code: rc === null || rc === void 0 ? void 0 : rc.roadType
        },
        area: rc === null || rc === void 0 ? void 0 : rc.roadCuttingArea,
        status: rc === null || rc === void 0 ? void 0 : rc.status
      } : {
        key: index + "_" + Date.now(),
        roadType: {
          i18nKey: "WS_ROADTYPE_" + (rc === null || rc === void 0 ? void 0 : rc.roadType),
          code: rc === null || rc === void 0 ? void 0 : rc.roadType
        },
        area: rc === null || rc === void 0 ? void 0 : rc.roadCuttingArea,
        status: rc === null || rc === void 0 ? void 0 : rc.status
      };
    }) : [{
      key: 99999 + "_" + Date.now(),
      id: null,
      roadType: {
        i18nKey: "",
        code: ""
      },
      area: "",
      status: ""
    }];
    if (editByConfig) {
      payload.connectionDetails = [connectionDetails];
      payload.plumberDetails = plumberDetails;
      payload.roadCuttingDetails = roadCuttingDetails;
    }
  }
  sessionStorage.setItem("Digit.PT_CREATE_EMP_WS_NEW_FORM", JSON.stringify(payload));
  sessionStorage.setItem("WS_EDIT_APPLICATION_DETAILS", JSON.stringify(data));
  return payload;
};
const convertEditApplicationDetails = function (data, appData, actionData) {
  try {
    var _data$cpt18, _data$cpt18$details, _data$cpt18$details$o, _data$cpt19, _data$cpt19$details, _data$ConnectionDetai31, _data$ConnectionDetai32, _data$ConnectionDetai33, _data$ConnectionDetai34, _data$ConnectionDetai35, _data$ConnectionDetai36, _data$ConnectionDetai37, _data$ConnectionDetai38, _data$ConnectionDetai39, _data$ConnectionDetai40, _data$ConnectionDetai41, _data$ConnectionDetai42, _data$ConnectionDetai43, _data$ConnectionDetai44, _data$ConnectionDetai45, _data$ConnectionDetai46, _data$ConnectionDetai47, _data$ConnectionDetai48, _data$ConnectionHolde46, _data$ConnectionHolde47, _appData$applicationD, _appData$applicationD2, _data$ConnectionHolde48, _data$ConnectionHolde49, _data$ConnectionHolde50, _data$ConnectionHolde51, _data$ConnectionHolde52, _data$ConnectionHolde53, _data$ConnectionHolde54, _data$ConnectionHolde55, _data$ConnectionHolde56, _data$ConnectionHolde57, _data$ConnectionHolde58, _data$ConnectionHolde59, _data$ConnectionHolde60, _data$ConnectionHolde61, _data$ConnectionHolde62, _data$ConnectionHolde63, _data$ConnectionHolde64, _data$ConnectionHolde65, _data$ConnectionHolde66, _data$cpt20, _data$DocumentsRequir2;
    data === null || data === void 0 ? void 0 : (_data$cpt18 = data.cpt) === null || _data$cpt18 === void 0 ? void 0 : (_data$cpt18$details = _data$cpt18.details) === null || _data$cpt18$details === void 0 ? void 0 : (_data$cpt18$details$o = _data$cpt18$details.owners) === null || _data$cpt18$details$o === void 0 ? void 0 : _data$cpt18$details$o.forEach(owner => {
      if (owner !== null && owner !== void 0 && owner.permanentAddress) owner.correspondenceAddress = owner === null || owner === void 0 ? void 0 : owner.permanentAddress;
    });
    let payload = {
      ...appData.applicationData,
      propertyId: data === null || data === void 0 ? void 0 : (_data$cpt19 = data.cpt) === null || _data$cpt19 === void 0 ? void 0 : (_data$cpt19$details = _data$cpt19.details) === null || _data$cpt19$details === void 0 ? void 0 : _data$cpt19$details.propertyId,
      proposedTaps: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai31 = data.ConnectionDetails) === null || _data$ConnectionDetai31 === void 0 ? void 0 : (_data$ConnectionDetai32 = _data$ConnectionDetai31[0]) === null || _data$ConnectionDetai32 === void 0 ? void 0 : _data$ConnectionDetai32.proposedTaps) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai33 = data.ConnectionDetails) === null || _data$ConnectionDetai33 === void 0 ? void 0 : (_data$ConnectionDetai34 = _data$ConnectionDetai33[0]) === null || _data$ConnectionDetai34 === void 0 ? void 0 : _data$ConnectionDetai34.proposedTaps),
      proposedPipeSize: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai35 = data.ConnectionDetails) === null || _data$ConnectionDetai35 === void 0 ? void 0 : (_data$ConnectionDetai36 = _data$ConnectionDetai35[0]) === null || _data$ConnectionDetai36 === void 0 ? void 0 : (_data$ConnectionDetai37 = _data$ConnectionDetai36.proposedPipeSize) === null || _data$ConnectionDetai37 === void 0 ? void 0 : _data$ConnectionDetai37.size) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai38 = data.ConnectionDetails) === null || _data$ConnectionDetai38 === void 0 ? void 0 : (_data$ConnectionDetai39 = _data$ConnectionDetai38[0]) === null || _data$ConnectionDetai39 === void 0 ? void 0 : (_data$ConnectionDetai40 = _data$ConnectionDetai39.proposedPipeSize) === null || _data$ConnectionDetai40 === void 0 ? void 0 : _data$ConnectionDetai40.size),
      proposedWaterClosets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai41 = data.ConnectionDetails) === null || _data$ConnectionDetai41 === void 0 ? void 0 : (_data$ConnectionDetai42 = _data$ConnectionDetai41[0]) === null || _data$ConnectionDetai42 === void 0 ? void 0 : _data$ConnectionDetai42.proposedWaterClosets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai43 = data.ConnectionDetails) === null || _data$ConnectionDetai43 === void 0 ? void 0 : (_data$ConnectionDetai44 = _data$ConnectionDetai43[0]) === null || _data$ConnectionDetai44 === void 0 ? void 0 : _data$ConnectionDetai44.proposedWaterClosets),
      proposedToilets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai45 = data.ConnectionDetails) === null || _data$ConnectionDetai45 === void 0 ? void 0 : (_data$ConnectionDetai46 = _data$ConnectionDetai45[0]) === null || _data$ConnectionDetai46 === void 0 ? void 0 : _data$ConnectionDetai46.proposedToilets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai47 = data.ConnectionDetails) === null || _data$ConnectionDetai47 === void 0 ? void 0 : (_data$ConnectionDetai48 = _data$ConnectionDetai47[0]) === null || _data$ConnectionDetai48 === void 0 ? void 0 : _data$ConnectionDetai48.proposedToilets),
      connectionHolders: !(data !== null && data !== void 0 && (_data$ConnectionHolde46 = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde46 !== void 0 && (_data$ConnectionHolde47 = _data$ConnectionHolde46[0]) !== null && _data$ConnectionHolde47 !== void 0 && _data$ConnectionHolde47.sameAsOwnerDetails) ? [{
        ...(appData === null || appData === void 0 ? void 0 : (_appData$applicationD = appData.applicationData) === null || _appData$applicationD === void 0 ? void 0 : (_appData$applicationD2 = _appData$applicationD.connectionHolders) === null || _appData$applicationD2 === void 0 ? void 0 : _appData$applicationD2[0]),
        correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde48 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde48 === void 0 ? void 0 : (_data$ConnectionHolde49 = _data$ConnectionHolde48[0]) === null || _data$ConnectionHolde49 === void 0 ? void 0 : _data$ConnectionHolde49.address) || "",
        fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde50 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde50 === void 0 ? void 0 : (_data$ConnectionHolde51 = _data$ConnectionHolde50[0]) === null || _data$ConnectionHolde51 === void 0 ? void 0 : _data$ConnectionHolde51.guardian) || "",
        gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde52 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde52 === void 0 ? void 0 : (_data$ConnectionHolde53 = _data$ConnectionHolde52[0]) === null || _data$ConnectionHolde53 === void 0 ? void 0 : (_data$ConnectionHolde54 = _data$ConnectionHolde53.gender) === null || _data$ConnectionHolde54 === void 0 ? void 0 : _data$ConnectionHolde54.code) || "",
        mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde55 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde55 === void 0 ? void 0 : (_data$ConnectionHolde56 = _data$ConnectionHolde55[0]) === null || _data$ConnectionHolde56 === void 0 ? void 0 : _data$ConnectionHolde56.mobileNumber) || "",
        name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde57 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde57 === void 0 ? void 0 : (_data$ConnectionHolde58 = _data$ConnectionHolde57[0]) === null || _data$ConnectionHolde58 === void 0 ? void 0 : _data$ConnectionHolde58.name) || "",
        ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde59 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde59 === void 0 ? void 0 : (_data$ConnectionHolde60 = _data$ConnectionHolde59[0]) === null || _data$ConnectionHolde60 === void 0 ? void 0 : (_data$ConnectionHolde61 = _data$ConnectionHolde60.ownerType) === null || _data$ConnectionHolde61 === void 0 ? void 0 : _data$ConnectionHolde61.code) || "",
        relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde62 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde62 === void 0 ? void 0 : (_data$ConnectionHolde63 = _data$ConnectionHolde62[0]) === null || _data$ConnectionHolde63 === void 0 ? void 0 : (_data$ConnectionHolde64 = _data$ConnectionHolde63.relationship) === null || _data$ConnectionHolde64 === void 0 ? void 0 : _data$ConnectionHolde64.code) || "",
        sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde65 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde65 === void 0 ? void 0 : (_data$ConnectionHolde66 = _data$ConnectionHolde65[0]) === null || _data$ConnectionHolde66 === void 0 ? void 0 : _data$ConnectionHolde66.sameAsOwnerDetails
      }] : null,
      property: data === null || data === void 0 ? void 0 : (_data$cpt20 = data.cpt) === null || _data$cpt20 === void 0 ? void 0 : _data$cpt20.details,
      processInstance: {
        action: actionData ? actionData : "RESUBMIT_APPLICATION"
      },
      action: actionData ? actionData : "RESUBMIT_APPLICATION",
      documents: data === null || data === void 0 ? void 0 : (_data$DocumentsRequir2 = data.DocumentsRequired) === null || _data$DocumentsRequir2 === void 0 ? void 0 : _data$DocumentsRequir2.documents
    };
    return Promise.resolve(payload);
  } catch (e) {
    return Promise.reject(e);
  }
};
const convertDisonnectApplicationData = function (data, serviceType, editByConfig, t) {
  var _data$applicationData124, _data$applicationData125, _data$applicationData126, _data$applicationData127, _data$applicationData128, _data$applicationData129;
  if (editByConfig === void 0) {
    editByConfig = false;
  }
  const temp = "TEMPORARY",
    perm = "PERMANENT";
  let disConnectionDetails = [{
    consumerNumber: data === null || data === void 0 ? void 0 : (_data$applicationData124 = data.applicationData) === null || _data$applicationData124 === void 0 ? void 0 : _data$applicationData124.applicationNo,
    disConnectionType: data !== null && data !== void 0 && (_data$applicationData125 = data.applicationData) !== null && _data$applicationData125 !== void 0 && _data$applicationData125.isDisconnectionTemporary ? temp : perm,
    disConnectionReason: (data === null || data === void 0 ? void 0 : (_data$applicationData126 = data.applicationData) === null || _data$applicationData126 === void 0 ? void 0 : _data$applicationData126.disconnectionReason) || "",
    disConnectionProposeDate: data !== null && data !== void 0 && (_data$applicationData127 = data.applicationData) !== null && _data$applicationData127 !== void 0 && _data$applicationData127.dateEffectiveFrom ? convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$applicationData128 = data.applicationData) === null || _data$applicationData128 === void 0 ? void 0 : _data$applicationData128.dateEffectiveFrom, true) : null
  }];
  let documents = [];
  if (data !== null && data !== void 0 && (_data$applicationData129 = data.applicationData) !== null && _data$applicationData129 !== void 0 && _data$applicationData129.documents) {
    data.applicationData.documents.forEach(data => {
      var _data$documentType2;
      documents.push({
        active: true,
        code: data === null || data === void 0 ? void 0 : data.documentType,
        i18nKey: data === null || data === void 0 ? void 0 : (_data$documentType2 = data.documentType) === null || _data$documentType2 === void 0 ? void 0 : _data$documentType2.replaceAll(".", "_"),
        documentType: data === null || data === void 0 ? void 0 : data.documentType,
        id: data.id,
        documentUid: data === null || data === void 0 ? void 0 : data.documentUid,
        fileStoreId: data === null || data === void 0 ? void 0 : data.fileStoreId
      });
    });
  }
  let DocumentsRequired = {
    documents: documents
  };
  let payload = {};
  payload.disConnectionDetails = disConnectionDetails;
  payload.DocumentsRequired = DocumentsRequired;
  if (editByConfig) {
    var _data$applicationData130, _data$applicationData131, _data$applicationData132, _data$applicationData133, _data$applicationData134, _data$applicationData135, _data$applicationData136, _data$applicationData137, _data$applicationData138, _data$applicationData139, _data$applicationData140, _data$applicationData141, _data$applicationData142, _data$applicationData143, _data$applicationData144;
    let plumberDetails = [{
      detailsProvidedBy: data !== null && data !== void 0 && (_data$applicationData130 = data.applicationData) !== null && _data$applicationData130 !== void 0 && (_data$applicationData131 = _data$applicationData130.additionalDetails) !== null && _data$applicationData131 !== void 0 && _data$applicationData131.detailsProvidedBy ? {
        i18nKey: data === null || data === void 0 ? void 0 : (_data$applicationData132 = data.applicationData) === null || _data$applicationData132 === void 0 ? void 0 : (_data$applicationData133 = _data$applicationData132.additionalDetails) === null || _data$applicationData133 === void 0 ? void 0 : _data$applicationData133.detailsProvidedBy,
        code: data === null || data === void 0 ? void 0 : (_data$applicationData134 = data.applicationData) === null || _data$applicationData134 === void 0 ? void 0 : (_data$applicationData135 = _data$applicationData134.additionalDetails) === null || _data$applicationData135 === void 0 ? void 0 : _data$applicationData135.detailsProvidedBy,
        size: data === null || data === void 0 ? void 0 : (_data$applicationData136 = data.applicationData) === null || _data$applicationData136 === void 0 ? void 0 : (_data$applicationData137 = _data$applicationData136.additionalDetails) === null || _data$applicationData137 === void 0 ? void 0 : _data$applicationData137.detailsProvidedBy
      } : "",
      plumberName: data === null || data === void 0 ? void 0 : (_data$applicationData138 = data.applicationData) === null || _data$applicationData138 === void 0 ? void 0 : (_data$applicationData139 = _data$applicationData138.plumberInfo) === null || _data$applicationData139 === void 0 ? void 0 : _data$applicationData139[0].name,
      plumberMobileNo: data === null || data === void 0 ? void 0 : (_data$applicationData140 = data.applicationData) === null || _data$applicationData140 === void 0 ? void 0 : (_data$applicationData141 = _data$applicationData140.plumberInfo) === null || _data$applicationData141 === void 0 ? void 0 : _data$applicationData141[0].mobileNumber,
      plumberLicenseNo: data === null || data === void 0 ? void 0 : (_data$applicationData142 = data.applicationData) === null || _data$applicationData142 === void 0 ? void 0 : (_data$applicationData143 = _data$applicationData142.plumberInfo) === null || _data$applicationData143 === void 0 ? void 0 : _data$applicationData143[0].licenseNo,
      applicationNo: data === null || data === void 0 ? void 0 : (_data$applicationData144 = data.applicationData) === null || _data$applicationData144 === void 0 ? void 0 : _data$applicationData144.applicationNo
    }];
    payload.plumberDetails = plumberDetails;
  }
  sessionStorage.setItem("Digit.PT_CREATE_EMP_WS_NEW_FORM", JSON.stringify(payload));
  sessionStorage.setItem("WS_EDIT_APPLICATION_DETAILS", JSON.stringify(data));
  return payload;
};
const convertDisonnectEditApplicationDetails = function (data, appData, actionData) {
  try {
    var _data$plumberDetails, _data$plumberDetails$, _data$plumberDetails2, _data$plumberDetails3, _data$plumberDetails4, _data$plumberDetails5, _appData$applicationD5, _appData$applicationD6, _appData$applicationD7, _data$disConnectionDe, _data$disConnectionDe2, _data$disConnectionDe3, _data$disConnectionDe4, _data$DocumentsRequir3, _data$disConnectionDe5, _data$disConnectionDe6;
    const docs = sessionStorage.getItem("DISCONNECTION_EDIT_DOCS");
    const docsData = docs ? JSON.parse(docs) : "";
    const documentsData = [];
    docsData === null || docsData === void 0 ? void 0 : docsData.map(data => {
      var _appData$applicationD3, _appData$applicationD4, _doc$, _doc$2;
      const doc = appData === null || appData === void 0 ? void 0 : (_appData$applicationD3 = appData.applicationData) === null || _appData$applicationD3 === void 0 ? void 0 : (_appData$applicationD4 = _appData$applicationD3.documents) === null || _appData$applicationD4 === void 0 ? void 0 : _appData$applicationD4.filter(appDoc => {
        var _appDoc$documentType, _appDoc$documentType$, _appDoc$documentType2, _appDoc$documentType3, _data$documentType3, _data$documentType3$s, _data$documentType4, _data$documentType4$s;
        return (appDoc === null || appDoc === void 0 ? void 0 : (_appDoc$documentType = appDoc.documentType) === null || _appDoc$documentType === void 0 ? void 0 : (_appDoc$documentType$ = _appDoc$documentType.split(".")) === null || _appDoc$documentType$ === void 0 ? void 0 : _appDoc$documentType$[0]) + "." + (appDoc === null || appDoc === void 0 ? void 0 : (_appDoc$documentType2 = appDoc.documentType) === null || _appDoc$documentType2 === void 0 ? void 0 : (_appDoc$documentType3 = _appDoc$documentType2.split(".")) === null || _appDoc$documentType3 === void 0 ? void 0 : _appDoc$documentType3[1]) == (data === null || data === void 0 ? void 0 : (_data$documentType3 = data.documentType) === null || _data$documentType3 === void 0 ? void 0 : (_data$documentType3$s = _data$documentType3.split(".")) === null || _data$documentType3$s === void 0 ? void 0 : _data$documentType3$s[0]) + "." + (data === null || data === void 0 ? void 0 : (_data$documentType4 = data.documentType) === null || _data$documentType4 === void 0 ? void 0 : (_data$documentType4$s = _data$documentType4.split(".")) === null || _data$documentType4$s === void 0 ? void 0 : _data$documentType4$s[1]);
      });
      let document = (doc === null || doc === void 0 ? void 0 : doc.length) > 0 ? {
        auditDetails: null,
        documentType: data === null || data === void 0 ? void 0 : data.documentType,
        documentUid: doc === null || doc === void 0 ? void 0 : (_doc$ = doc[0]) === null || _doc$ === void 0 ? void 0 : _doc$.documentUid,
        fileStoreId: data === null || data === void 0 ? void 0 : data.fileStoreId,
        id: doc === null || doc === void 0 ? void 0 : (_doc$2 = doc[0]) === null || _doc$2 === void 0 ? void 0 : _doc$2.id,
        status: "ACTIVE"
      } : data;
      documentsData.push(document);
    });
    const plumberInfo = [{
      licenseNo: data === null || data === void 0 ? void 0 : (_data$plumberDetails = data.plumberDetails) === null || _data$plumberDetails === void 0 ? void 0 : (_data$plumberDetails$ = _data$plumberDetails[0]) === null || _data$plumberDetails$ === void 0 ? void 0 : _data$plumberDetails$.plumberLicenseNo,
      mobileNumber: data === null || data === void 0 ? void 0 : (_data$plumberDetails2 = data.plumberDetails) === null || _data$plumberDetails2 === void 0 ? void 0 : (_data$plumberDetails3 = _data$plumberDetails2[0]) === null || _data$plumberDetails3 === void 0 ? void 0 : _data$plumberDetails3.plumberMobileNo,
      name: data === null || data === void 0 ? void 0 : (_data$plumberDetails4 = data.plumberDetails) === null || _data$plumberDetails4 === void 0 ? void 0 : (_data$plumberDetails5 = _data$plumberDetails4[0]) === null || _data$plumberDetails5 === void 0 ? void 0 : _data$plumberDetails5.plumberName,
      id: appData === null || appData === void 0 ? void 0 : (_appData$applicationD5 = appData.applicationData) === null || _appData$applicationD5 === void 0 ? void 0 : (_appData$applicationD6 = _appData$applicationD5.plumberInfo) === null || _appData$applicationD6 === void 0 ? void 0 : (_appData$applicationD7 = _appData$applicationD6[0]) === null || _appData$applicationD7 === void 0 ? void 0 : _appData$applicationD7.id
    }];
    const _temp3 = (data === null || data === void 0 ? void 0 : (_data$disConnectionDe = data.disConnectionDetails) === null || _data$disConnectionDe === void 0 ? void 0 : (_data$disConnectionDe2 = _data$disConnectionDe[0]) === null || _data$disConnectionDe2 === void 0 ? void 0 : _data$disConnectionDe2.disConnectionReason) || "",
      _temp2 = (data === null || data === void 0 ? void 0 : (_data$disConnectionDe3 = data.disConnectionDetails) === null || _data$disConnectionDe3 === void 0 ? void 0 : (_data$disConnectionDe4 = _data$disConnectionDe3[0]) === null || _data$disConnectionDe4 === void 0 ? void 0 : _data$disConnectionDe4.disConnectionType) == "TEMPORARY" ? true : false,
      _temp = (documentsData === null || documentsData === void 0 ? void 0 : documentsData.length) > 0 ? documentsData : data === null || data === void 0 ? void 0 : (_data$DocumentsRequir3 = data.DocumentsRequired) === null || _data$DocumentsRequir3 === void 0 ? void 0 : _data$DocumentsRequir3.documents;
    return Promise.resolve(getConvertedDate(data === null || data === void 0 ? void 0 : (_data$disConnectionDe5 = data.disConnectionDetails) === null || _data$disConnectionDe5 === void 0 ? void 0 : (_data$disConnectionDe6 = _data$disConnectionDe5[0]) === null || _data$disConnectionDe6 === void 0 ? void 0 : _data$disConnectionDe6.disConnectionProposeDate)).then(function (_getConvertedDate) {
      var _data$plumberDetails6, _data$plumberDetails7, _data$plumberDetails8;
      let payload = {
        ...appData.applicationData,
        documents: _temp,
        isDisconnectionTemporary: _temp2,
        disconnectionReason: _temp3,
        dateEffectiveFrom: _getConvertedDate,
        processInstance: {
          action: actionData ? actionData : "RESUBMIT_APPLICATION"
        },
        action: actionData ? actionData : "RESUBMIT_APPLICATION"
      };
      if (data !== null && data !== void 0 && (_data$plumberDetails6 = data.plumberDetails) !== null && _data$plumberDetails6 !== void 0 && (_data$plumberDetails7 = _data$plumberDetails6[0]) !== null && _data$plumberDetails7 !== void 0 && (_data$plumberDetails8 = _data$plumberDetails7.detailsProvidedBy) !== null && _data$plumberDetails8 !== void 0 && _data$plumberDetails8.code) {
        var _data$plumberDetails9, _data$plumberDetails10, _data$plumberDetails11, _data$plumberDetails12, _data$plumberDetails13, _data$plumberDetails14;
        payload.additionalDetails.detailsProvidedBy = data === null || data === void 0 ? void 0 : (_data$plumberDetails9 = data.plumberDetails) === null || _data$plumberDetails9 === void 0 ? void 0 : (_data$plumberDetails10 = _data$plumberDetails9[0]) === null || _data$plumberDetails10 === void 0 ? void 0 : (_data$plumberDetails11 = _data$plumberDetails10.detailsProvidedBy) === null || _data$plumberDetails11 === void 0 ? void 0 : _data$plumberDetails11.code;
        if ((data === null || data === void 0 ? void 0 : (_data$plumberDetails12 = data.plumberDetails) === null || _data$plumberDetails12 === void 0 ? void 0 : (_data$plumberDetails13 = _data$plumberDetails12[0]) === null || _data$plumberDetails13 === void 0 ? void 0 : (_data$plumberDetails14 = _data$plumberDetails13.detailsProvidedBy) === null || _data$plumberDetails14 === void 0 ? void 0 : _data$plumberDetails14.code) == "ULB") {
          payload.plumberInfo = plumberInfo;
        }
      }
      return payload;
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getConvertedDate = function (dateOfTime) {
  try {
    const splitStr = dateOfTime === null || dateOfTime === void 0 ? void 0 : dateOfTime.split("-");
    const dateOfTimeReversedArr = splitStr === null || splitStr === void 0 ? void 0 : splitStr.reverse();
    const dateOfTimeReversed = dateOfTimeReversedArr === null || dateOfTimeReversedArr === void 0 ? void 0 : dateOfTimeReversedArr.join("-");
    let dateOfReplace = stringReplaceAll(dateOfTimeReversed, "/", "-");
    let formattedDate = "";
    if (dateOfReplace.split("-")[2] > 1900) {
      formattedDate = dateOfReplace.split("-")[2] + "-" + dateOfReplace.split("-")[1] + "-" + dateOfReplace.split("-")[0];
    } else {
      formattedDate = dateOfReplace.split("-")[0] + "-" + dateOfReplace.split("-")[2] + "-" + dateOfReplace.split("-")[1];
    }
    return Promise.resolve(convertDateToEpoch(formattedDate));
  } catch (e) {
    return Promise.reject(e);
  }
};
const convertModifyApplicationDetails = function (data, appData, actionData) {
  if (actionData === void 0) {
    actionData = "INITIATE";
  }
  try {
    var _data$cpt22, _data$cpt22$details, _data$cpt22$details$o, _data$cpt23, _data$cpt23$details, _data$cpt24, _data$cpt24$details, _data$connectionDetai, _data$connectionDetai2, _data$connectionDetai3, _data$connectionDetai4, _data$connectionDetai5, _data$connectionDetai6, _data$connectionDetai7, _data$connectionDetai8, _data$connectionDetai9, _data$connectionDetai10, _data$connectionDetai11, _data$connectionDetai12, _data$connectionDetai13, _data$connectionDetai14, _data$connectionDetai15, _data$connectionDetai16, _data$connectionDetai17, _data$connectionDetai18, _data$connectionDetai19, _data$connectionDetai20, _data$connectionDetai21, _data$connectionDetai22, _data$connectionDetai23, _data$connectionDetai24, _data$connectionDetai25, _data$connectionDetai26, _data$connectionDetai27, _data$connectionDetai28, _data$connectionDetai29, _data$connectionDetai30, _data$activationDetai13, _data$activationDetai14, _data$activationDetai15, _data$activationDetai16;
    function _temp9() {
      var _data$activationDetai5, _data$activationDetai6, _data$activationDetai7, _data$activationDetai8;
      function _temp7() {
        function _temp5() {
          var _data$DocumentsRequir4, _data$DocumentsRequir5, _data$DocumentsRequir6, _data$ConnectionHolde67, _data$ConnectionHolde68, _data$DocumentsRequir7, _data$cpt21;
          if (data !== null && data !== void 0 && (_data$DocumentsRequir4 = data.DocumentsRequired) !== null && _data$DocumentsRequir4 !== void 0 && (_data$DocumentsRequir5 = _data$DocumentsRequir4.documents) !== null && _data$DocumentsRequir5 !== void 0 && _data$DocumentsRequir5.length) formData.documents = data === null || data === void 0 ? void 0 : (_data$DocumentsRequir6 = data.DocumentsRequired) === null || _data$DocumentsRequir6 === void 0 ? void 0 : _data$DocumentsRequir6.documents;else formData.documents = null;
          if (!(data !== null && data !== void 0 && (_data$ConnectionHolde67 = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde67 !== void 0 && (_data$ConnectionHolde68 = _data$ConnectionHolde67[0]) !== null && _data$ConnectionHolde68 !== void 0 && _data$ConnectionHolde68.sameAsOwnerDetails)) {
            var _appData$applicationD8, _appData$applicationD9, _data$ConnectionHolde69, _data$ConnectionHolde70, _data$ConnectionHolde71, _data$ConnectionHolde72, _data$ConnectionHolde73, _data$ConnectionHolde74, _data$ConnectionHolde75, _data$ConnectionHolde76, _data$ConnectionHolde77, _data$ConnectionHolde78, _data$ConnectionHolde79, _data$ConnectionHolde80, _data$ConnectionHolde81, _data$ConnectionHolde82, _data$ConnectionHolde83, _data$ConnectionHolde84, _data$ConnectionHolde85, _data$ConnectionHolde86, _data$ConnectionHolde87;
            formData.connectionHolders = [{
              ...(appData === null || appData === void 0 ? void 0 : (_appData$applicationD8 = appData.applicationData) === null || _appData$applicationD8 === void 0 ? void 0 : (_appData$applicationD9 = _appData$applicationD8.connectionHolders) === null || _appData$applicationD9 === void 0 ? void 0 : _appData$applicationD9[0]),
              correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde69 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde69 === void 0 ? void 0 : (_data$ConnectionHolde70 = _data$ConnectionHolde69[0]) === null || _data$ConnectionHolde70 === void 0 ? void 0 : _data$ConnectionHolde70.address) || "",
              fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde71 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde71 === void 0 ? void 0 : (_data$ConnectionHolde72 = _data$ConnectionHolde71[0]) === null || _data$ConnectionHolde72 === void 0 ? void 0 : _data$ConnectionHolde72.guardian) || "",
              gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde73 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde73 === void 0 ? void 0 : (_data$ConnectionHolde74 = _data$ConnectionHolde73[0]) === null || _data$ConnectionHolde74 === void 0 ? void 0 : (_data$ConnectionHolde75 = _data$ConnectionHolde74.gender) === null || _data$ConnectionHolde75 === void 0 ? void 0 : _data$ConnectionHolde75.code) || "",
              mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde76 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde76 === void 0 ? void 0 : (_data$ConnectionHolde77 = _data$ConnectionHolde76[0]) === null || _data$ConnectionHolde77 === void 0 ? void 0 : _data$ConnectionHolde77.mobileNumber) || "",
              name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde78 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde78 === void 0 ? void 0 : (_data$ConnectionHolde79 = _data$ConnectionHolde78[0]) === null || _data$ConnectionHolde79 === void 0 ? void 0 : _data$ConnectionHolde79.name) || "",
              ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde80 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde80 === void 0 ? void 0 : (_data$ConnectionHolde81 = _data$ConnectionHolde80[0]) === null || _data$ConnectionHolde81 === void 0 ? void 0 : (_data$ConnectionHolde82 = _data$ConnectionHolde81.ownerType) === null || _data$ConnectionHolde82 === void 0 ? void 0 : _data$ConnectionHolde82.code) || "",
              relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde83 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde83 === void 0 ? void 0 : (_data$ConnectionHolde84 = _data$ConnectionHolde83[0]) === null || _data$ConnectionHolde84 === void 0 ? void 0 : (_data$ConnectionHolde85 = _data$ConnectionHolde84.relationship) === null || _data$ConnectionHolde85 === void 0 ? void 0 : _data$ConnectionHolde85.code) || "",
              sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde86 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde86 === void 0 ? void 0 : (_data$ConnectionHolde87 = _data$ConnectionHolde86[0]) === null || _data$ConnectionHolde87 === void 0 ? void 0 : _data$ConnectionHolde87.sameAsOwnerDetails
            }];
          }
          formData.processInstance = {
            action: actionData
          };
          formData.action = actionData;
          formData.channel = "CFC_COUNTER";
          sessionStorage.setItem("WS_DOCUMENTS_INOF", JSON.stringify((data === null || data === void 0 ? void 0 : (_data$DocumentsRequir7 = data.DocumentsRequired) === null || _data$DocumentsRequir7 === void 0 ? void 0 : _data$DocumentsRequir7.documents) || []));
          sessionStorage.setItem("WS_PROPERTY_INOF", JSON.stringify(data === null || data === void 0 ? void 0 : (_data$cpt21 = data.cpt) === null || _data$cpt21 === void 0 ? void 0 : _data$cpt21.details));
          return formData;
        }
        const _temp4 = function (_data$activationDetai, _data$activationDetai2, _data$activationDetai3, _data$activationDetai4) {
          if (data !== null && data !== void 0 && (_data$activationDetai = data.activationDetails) !== null && _data$activationDetai !== void 0 && (_data$activationDetai2 = _data$activationDetai[0]) !== null && _data$activationDetai2 !== void 0 && _data$activationDetai2.dateEffectiveFrom) return Promise.resolve(getConvertedDate(data === null || data === void 0 ? void 0 : (_data$activationDetai3 = data.activationDetails) === null || _data$activationDetai3 === void 0 ? void 0 : (_data$activationDetai4 = _data$activationDetai3[0]) === null || _data$activationDetai4 === void 0 ? void 0 : _data$activationDetai4.dateEffectiveFrom)).then(function (_getConvertedDate4) {
            formData.dateEffectiveFrom = _getConvertedDate4;
          });
        }();
        return _temp4 && _temp4.then ? _temp4.then(_temp5) : _temp5(_temp4);
      }
      if (data !== null && data !== void 0 && (_data$activationDetai5 = data.activationDetails) !== null && _data$activationDetai5 !== void 0 && (_data$activationDetai6 = _data$activationDetai5[0]) !== null && _data$activationDetai6 !== void 0 && _data$activationDetai6.meterInitialReading) formData.additionalDetails.initialMeterReading = data === null || data === void 0 ? void 0 : (_data$activationDetai7 = data.activationDetails) === null || _data$activationDetai7 === void 0 ? void 0 : (_data$activationDetai8 = _data$activationDetai7[0]) === null || _data$activationDetai8 === void 0 ? void 0 : _data$activationDetai8.meterInitialReading;
      const _temp6 = function (_data$activationDetai9, _data$activationDetai10, _data$activationDetai11, _data$activationDetai12) {
        if (data !== null && data !== void 0 && (_data$activationDetai9 = data.activationDetails) !== null && _data$activationDetai9 !== void 0 && (_data$activationDetai10 = _data$activationDetai9[0]) !== null && _data$activationDetai10 !== void 0 && _data$activationDetai10.connectionExecutionDate) return Promise.resolve(getConvertedDate(data === null || data === void 0 ? void 0 : (_data$activationDetai11 = data.activationDetails) === null || _data$activationDetai11 === void 0 ? void 0 : (_data$activationDetai12 = _data$activationDetai11[0]) === null || _data$activationDetai12 === void 0 ? void 0 : _data$activationDetai12.connectionExecutionDate)).then(function (_getConvertedDate3) {
          formData.connectionExecutionDate = _getConvertedDate3;
        });
      }();
      return _temp6 && _temp6.then ? _temp6.then(_temp7) : _temp7(_temp6);
    }
    data === null || data === void 0 ? void 0 : (_data$cpt22 = data.cpt) === null || _data$cpt22 === void 0 ? void 0 : (_data$cpt22$details = _data$cpt22.details) === null || _data$cpt22$details === void 0 ? void 0 : (_data$cpt22$details$o = _data$cpt22$details.owners) === null || _data$cpt22$details$o === void 0 ? void 0 : _data$cpt22$details$o.forEach(owner => {
      if (owner !== null && owner !== void 0 && owner.permanentAddress) owner.correspondenceAddress = owner === null || owner === void 0 ? void 0 : owner.permanentAddress;
    });
    let formData = {
      ...appData.applicationData
    };
    if (data !== null && data !== void 0 && (_data$cpt23 = data.cpt) !== null && _data$cpt23 !== void 0 && (_data$cpt23$details = _data$cpt23.details) !== null && _data$cpt23$details !== void 0 && _data$cpt23$details.propertyId) formData.propertyId = data === null || data === void 0 ? void 0 : (_data$cpt24 = data.cpt) === null || _data$cpt24 === void 0 ? void 0 : (_data$cpt24$details = _data$cpt24.details) === null || _data$cpt24$details === void 0 ? void 0 : _data$cpt24$details.propertyId;
    if (data !== null && data !== void 0 && (_data$connectionDetai = data.connectionDetails) !== null && _data$connectionDetai !== void 0 && (_data$connectionDetai2 = _data$connectionDetai[0]) !== null && _data$connectionDetai2 !== void 0 && (_data$connectionDetai3 = _data$connectionDetai2.connectionType) !== null && _data$connectionDetai3 !== void 0 && _data$connectionDetai3.code) formData.connectionType = data === null || data === void 0 ? void 0 : (_data$connectionDetai4 = data.connectionDetails) === null || _data$connectionDetai4 === void 0 ? void 0 : (_data$connectionDetai5 = _data$connectionDetai4[0]) === null || _data$connectionDetai5 === void 0 ? void 0 : (_data$connectionDetai6 = _data$connectionDetai5.connectionType) === null || _data$connectionDetai6 === void 0 ? void 0 : _data$connectionDetai6.code;
    if (data !== null && data !== void 0 && (_data$connectionDetai7 = data.connectionDetails) !== null && _data$connectionDetai7 !== void 0 && (_data$connectionDetai8 = _data$connectionDetai7[0]) !== null && _data$connectionDetai8 !== void 0 && (_data$connectionDetai9 = _data$connectionDetai8.waterSource) !== null && _data$connectionDetai9 !== void 0 && _data$connectionDetai9.code) formData.waterSource = data === null || data === void 0 ? void 0 : (_data$connectionDetai10 = data.connectionDetails) === null || _data$connectionDetai10 === void 0 ? void 0 : (_data$connectionDetai11 = _data$connectionDetai10[0]) === null || _data$connectionDetai11 === void 0 ? void 0 : (_data$connectionDetai12 = _data$connectionDetai11.waterSource) === null || _data$connectionDetai12 === void 0 ? void 0 : _data$connectionDetai12.code;
    if (data !== null && data !== void 0 && (_data$connectionDetai13 = data.connectionDetails) !== null && _data$connectionDetai13 !== void 0 && (_data$connectionDetai14 = _data$connectionDetai13[0]) !== null && _data$connectionDetai14 !== void 0 && (_data$connectionDetai15 = _data$connectionDetai14.pipeSize) !== null && _data$connectionDetai15 !== void 0 && _data$connectionDetai15.size) formData.pipeSize = data === null || data === void 0 ? void 0 : (_data$connectionDetai16 = data.connectionDetails) === null || _data$connectionDetai16 === void 0 ? void 0 : (_data$connectionDetai17 = _data$connectionDetai16[0]) === null || _data$connectionDetai17 === void 0 ? void 0 : (_data$connectionDetai18 = _data$connectionDetai17.pipeSize) === null || _data$connectionDetai18 === void 0 ? void 0 : _data$connectionDetai18.size;
    if (data !== null && data !== void 0 && (_data$connectionDetai19 = data.connectionDetails) !== null && _data$connectionDetai19 !== void 0 && (_data$connectionDetai20 = _data$connectionDetai19[0]) !== null && _data$connectionDetai20 !== void 0 && _data$connectionDetai20.noOfTaps) formData.noOfTaps = data === null || data === void 0 ? void 0 : (_data$connectionDetai21 = data.connectionDetails) === null || _data$connectionDetai21 === void 0 ? void 0 : (_data$connectionDetai22 = _data$connectionDetai21[0]) === null || _data$connectionDetai22 === void 0 ? void 0 : _data$connectionDetai22.noOfTaps;
    if (data !== null && data !== void 0 && (_data$connectionDetai23 = data.connectionDetails) !== null && _data$connectionDetai23 !== void 0 && (_data$connectionDetai24 = _data$connectionDetai23[0]) !== null && _data$connectionDetai24 !== void 0 && _data$connectionDetai24.noOfWaterClosets) formData.noOfWaterClosets = data === null || data === void 0 ? void 0 : (_data$connectionDetai25 = data.connectionDetails) === null || _data$connectionDetai25 === void 0 ? void 0 : (_data$connectionDetai26 = _data$connectionDetai25[0]) === null || _data$connectionDetai26 === void 0 ? void 0 : _data$connectionDetai26.noOfWaterClosets;
    if (data !== null && data !== void 0 && (_data$connectionDetai27 = data.connectionDetails) !== null && _data$connectionDetai27 !== void 0 && (_data$connectionDetai28 = _data$connectionDetai27[0]) !== null && _data$connectionDetai28 !== void 0 && _data$connectionDetai28.noOfToilets) formData.noOfToilets = data === null || data === void 0 ? void 0 : (_data$connectionDetai29 = data.connectionDetails) === null || _data$connectionDetai29 === void 0 ? void 0 : (_data$connectionDetai30 = _data$connectionDetai29[0]) === null || _data$connectionDetai30 === void 0 ? void 0 : _data$connectionDetai30.noOfToilets;
    if (data !== null && data !== void 0 && (_data$activationDetai13 = data.activationDetails) !== null && _data$activationDetai13 !== void 0 && (_data$activationDetai14 = _data$activationDetai13[0]) !== null && _data$activationDetai14 !== void 0 && _data$activationDetai14.meterId) formData.meterId = data === null || data === void 0 ? void 0 : (_data$activationDetai15 = data.activationDetails) === null || _data$activationDetai15 === void 0 ? void 0 : (_data$activationDetai16 = _data$activationDetai15[0]) === null || _data$activationDetai16 === void 0 ? void 0 : _data$activationDetai16.meterId;
    const _temp8 = function (_data$activationDetai17, _data$activationDetai18, _data$activationDetai19, _data$activationDetai20) {
      if (data !== null && data !== void 0 && (_data$activationDetai17 = data.activationDetails) !== null && _data$activationDetai17 !== void 0 && (_data$activationDetai18 = _data$activationDetai17[0]) !== null && _data$activationDetai18 !== void 0 && _data$activationDetai18.meterInstallationDate) return Promise.resolve(getConvertedDate(data === null || data === void 0 ? void 0 : (_data$activationDetai19 = data.activationDetails) === null || _data$activationDetai19 === void 0 ? void 0 : (_data$activationDetai20 = _data$activationDetai19[0]) === null || _data$activationDetai20 === void 0 ? void 0 : _data$activationDetai20.meterInstallationDate)).then(function (_getConvertedDate2) {
        formData.meterInstallationDate = _getConvertedDate2;
      });
    }();
    return Promise.resolve(_temp8 && _temp8.then ? _temp8.then(_temp9) : _temp9(_temp8));
  } catch (e) {
    return Promise.reject(e);
  }
};
const downloadPdf = (blob, fileName) => {
  if (window.mSewaApp && window.mSewaApp.isMsewaApp() && window.mSewaApp.downloadBase64File) {
    var reader = new FileReader();
    reader.readAsDataURL(blob);
    reader.onloadend = function () {
      var base64data = reader.result;
      window.mSewaApp.downloadBase64File(base64data, fileName);
    };
  } else {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = fileName;
    document.body.append(link);
    link.click();
    link.remove();
    setTimeout(() => URL.revokeObjectURL(link.href), 7000);
  }
};
const downloadAndOpenPdf = function (connectionNo, filters) {
  try {
    const tenantId = Digit.ULBService.getCurrentTenantId();
    return Promise.resolve(Digit.WSService.generateBillPdf({
      tenantId,
      filters
    })).then(function (response) {
      const responseStatus = parseInt(response.status, 10);
      if (responseStatus === 201 || responseStatus === 200) {
        downloadPdf(new Blob([response.data], {
          type: "application/pdf"
        }), "BILL-" + connectionNo + ".pdf");
      }
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const ifUserRoleExists = role => {
  var _userInfo$info2, _userInfo$info3;
  const userInfo = Digit.UserService.getUser();
  const roleCodes = userInfo !== null && userInfo !== void 0 && (_userInfo$info2 = userInfo.info) !== null && _userInfo$info2 !== void 0 && _userInfo$info2.roles ? userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info3 = userInfo.info) === null || _userInfo$info3 === void 0 ? void 0 : _userInfo$info3.roles.map(role => role.code) : [];
  if (roleCodes.indexOf(role) > -1) {
    return true;
  } else return false;
};

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var lodash = createCommonjsModule(function (module, exports) {
  (function () {
    var undefined$1;
    var VERSION = '4.17.21';
    var LARGE_ARRAY_SIZE = 200;
    var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',
      FUNC_ERROR_TEXT = 'Expected a function',
      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';
    var HASH_UNDEFINED = '__lodash_hash_undefined__';
    var MAX_MEMOIZE_SIZE = 500;
    var PLACEHOLDER = '__lodash_placeholder__';
    var CLONE_DEEP_FLAG = 1,
      CLONE_FLAT_FLAG = 2,
      CLONE_SYMBOLS_FLAG = 4;
    var COMPARE_PARTIAL_FLAG = 1,
      COMPARE_UNORDERED_FLAG = 2;
    var WRAP_BIND_FLAG = 1,
      WRAP_BIND_KEY_FLAG = 2,
      WRAP_CURRY_BOUND_FLAG = 4,
      WRAP_CURRY_FLAG = 8,
      WRAP_CURRY_RIGHT_FLAG = 16,
      WRAP_PARTIAL_FLAG = 32,
      WRAP_PARTIAL_RIGHT_FLAG = 64,
      WRAP_ARY_FLAG = 128,
      WRAP_REARG_FLAG = 256,
      WRAP_FLIP_FLAG = 512;
    var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';
    var HOT_COUNT = 800,
      HOT_SPAN = 16;
    var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2,
      LAZY_WHILE_FLAG = 3;
    var INFINITY = 1 / 0,
      MAX_SAFE_INTEGER = 9007199254740991,
      MAX_INTEGER = 1.7976931348623157e+308,
      NAN = 0 / 0;
    var MAX_ARRAY_LENGTH = 4294967295,
      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;
    var wrapFlags = [['ary', WRAP_ARY_FLAG], ['bind', WRAP_BIND_FLAG], ['bindKey', WRAP_BIND_KEY_FLAG], ['curry', WRAP_CURRY_FLAG], ['curryRight', WRAP_CURRY_RIGHT_FLAG], ['flip', WRAP_FLIP_FLAG], ['partial', WRAP_PARTIAL_FLAG], ['partialRight', WRAP_PARTIAL_RIGHT_FLAG], ['rearg', WRAP_REARG_FLAG]];
    var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      asyncTag = '[object AsyncFunction]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      domExcTag = '[object DOMException]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      genTag = '[object GeneratorFunction]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      nullTag = '[object Null]',
      objectTag = '[object Object]',
      promiseTag = '[object Promise]',
      proxyTag = '[object Proxy]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      symbolTag = '[object Symbol]',
      undefinedTag = '[object Undefined]',
      weakMapTag = '[object WeakMap]',
      weakSetTag = '[object WeakSet]';
    var arrayBufferTag = '[object ArrayBuffer]',
      dataViewTag = '[object DataView]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';
    var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,
      reUnescapedHtml = /[&<>"']/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
    var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;
    var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
    var reRegExpChar = /[\\^$.*+?()[\]{}|]/g,
      reHasRegExpChar = RegExp(reRegExpChar.source);
    var reTrimStart = /^\s+/;
    var reWhitespace = /\s/;
    var reWrapComment = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
      reWrapDetails = /\{\n\/\* \[wrapped with (.+)\] \*/,
      reSplitDetails = /,? & /;
    var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
    var reForbiddenIdentifierChars = /[()=,{}\[\]\/\s]/;
    var reEscapeChar = /\\(\\)?/g;
    var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
    var reFlags = /\w*$/;
    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
    var reIsBinary = /^0b[01]+$/i;
    var reIsHostCtor = /^\[object .+?Constructor\]$/;
    var reIsOctal = /^0o[0-7]+$/i;
    var reIsUint = /^(?:0|[1-9]\d*)$/;
    var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;
    var reNoMatch = /($^)/;
    var reUnescapedString = /['\n\r\u2028\u2029\\]/g;
    var rsAstralRange = '\\ud800-\\udfff',
      rsComboMarksRange = '\\u0300-\\u036f',
      reComboHalfMarksRange = '\\ufe20-\\ufe2f',
      rsComboSymbolsRange = '\\u20d0-\\u20ff',
      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
      rsDingbatRange = '\\u2700-\\u27bf',
      rsLowerRange = 'a-z\\xdf-\\xf6\\xf8-\\xff',
      rsMathOpRange = '\\xac\\xb1\\xd7\\xf7',
      rsNonCharRange = '\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf',
      rsPunctuationRange = '\\u2000-\\u206f',
      rsSpaceRange = ' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',
      rsUpperRange = 'A-Z\\xc0-\\xd6\\xd8-\\xde',
      rsVarRange = '\\ufe0e\\ufe0f',
      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;
    var rsApos = "['\u2019]",
      rsAstral = '[' + rsAstralRange + ']',
      rsBreak = '[' + rsBreakRange + ']',
      rsCombo = '[' + rsComboRange + ']',
      rsDigits = '\\d+',
      rsDingbat = '[' + rsDingbatRange + ']',
      rsLower = '[' + rsLowerRange + ']',
      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',
      rsFitz = '\\ud83c[\\udffb-\\udfff]',
      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
      rsNonAstral = '[^' + rsAstralRange + ']',
      rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
      rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
      rsUpper = '[' + rsUpperRange + ']',
      rsZWJ = '\\u200d';
    var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',
      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',
      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',
      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',
      reOptMod = rsModifier + '?',
      rsOptVar = '[' + rsVarRange + ']?',
      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
      rsOrdLower = '\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',
      rsOrdUpper = '\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])',
      rsSeq = rsOptVar + reOptMod + rsOptJoin,
      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,
      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';
    var reApos = RegExp(rsApos, 'g');
    var reComboMark = RegExp(rsCombo, 'g');
    var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');
    var reUnicodeWord = RegExp([rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')', rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')', rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower, rsUpper + '+' + rsOptContrUpper, rsOrdUpper, rsOrdLower, rsDigits, rsEmoji].join('|'), 'g');
    var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + ']');
    var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
    var contextProps = ['Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array', 'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object', 'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array', 'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap', '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'];
    var templateCounter = -1;
    var typedArrayTags = {};
    typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
    typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
    var cloneableTags = {};
    cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
    cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;
    var deburredLetters = {
      '\xc0': 'A',
      '\xc1': 'A',
      '\xc2': 'A',
      '\xc3': 'A',
      '\xc4': 'A',
      '\xc5': 'A',
      '\xe0': 'a',
      '\xe1': 'a',
      '\xe2': 'a',
      '\xe3': 'a',
      '\xe4': 'a',
      '\xe5': 'a',
      '\xc7': 'C',
      '\xe7': 'c',
      '\xd0': 'D',
      '\xf0': 'd',
      '\xc8': 'E',
      '\xc9': 'E',
      '\xca': 'E',
      '\xcb': 'E',
      '\xe8': 'e',
      '\xe9': 'e',
      '\xea': 'e',
      '\xeb': 'e',
      '\xcc': 'I',
      '\xcd': 'I',
      '\xce': 'I',
      '\xcf': 'I',
      '\xec': 'i',
      '\xed': 'i',
      '\xee': 'i',
      '\xef': 'i',
      '\xd1': 'N',
      '\xf1': 'n',
      '\xd2': 'O',
      '\xd3': 'O',
      '\xd4': 'O',
      '\xd5': 'O',
      '\xd6': 'O',
      '\xd8': 'O',
      '\xf2': 'o',
      '\xf3': 'o',
      '\xf4': 'o',
      '\xf5': 'o',
      '\xf6': 'o',
      '\xf8': 'o',
      '\xd9': 'U',
      '\xda': 'U',
      '\xdb': 'U',
      '\xdc': 'U',
      '\xf9': 'u',
      '\xfa': 'u',
      '\xfb': 'u',
      '\xfc': 'u',
      '\xdd': 'Y',
      '\xfd': 'y',
      '\xff': 'y',
      '\xc6': 'Ae',
      '\xe6': 'ae',
      '\xde': 'Th',
      '\xfe': 'th',
      '\xdf': 'ss',
      '\u0100': 'A',
      '\u0102': 'A',
      '\u0104': 'A',
      '\u0101': 'a',
      '\u0103': 'a',
      '\u0105': 'a',
      '\u0106': 'C',
      '\u0108': 'C',
      '\u010a': 'C',
      '\u010c': 'C',
      '\u0107': 'c',
      '\u0109': 'c',
      '\u010b': 'c',
      '\u010d': 'c',
      '\u010e': 'D',
      '\u0110': 'D',
      '\u010f': 'd',
      '\u0111': 'd',
      '\u0112': 'E',
      '\u0114': 'E',
      '\u0116': 'E',
      '\u0118': 'E',
      '\u011a': 'E',
      '\u0113': 'e',
      '\u0115': 'e',
      '\u0117': 'e',
      '\u0119': 'e',
      '\u011b': 'e',
      '\u011c': 'G',
      '\u011e': 'G',
      '\u0120': 'G',
      '\u0122': 'G',
      '\u011d': 'g',
      '\u011f': 'g',
      '\u0121': 'g',
      '\u0123': 'g',
      '\u0124': 'H',
      '\u0126': 'H',
      '\u0125': 'h',
      '\u0127': 'h',
      '\u0128': 'I',
      '\u012a': 'I',
      '\u012c': 'I',
      '\u012e': 'I',
      '\u0130': 'I',
      '\u0129': 'i',
      '\u012b': 'i',
      '\u012d': 'i',
      '\u012f': 'i',
      '\u0131': 'i',
      '\u0134': 'J',
      '\u0135': 'j',
      '\u0136': 'K',
      '\u0137': 'k',
      '\u0138': 'k',
      '\u0139': 'L',
      '\u013b': 'L',
      '\u013d': 'L',
      '\u013f': 'L',
      '\u0141': 'L',
      '\u013a': 'l',
      '\u013c': 'l',
      '\u013e': 'l',
      '\u0140': 'l',
      '\u0142': 'l',
      '\u0143': 'N',
      '\u0145': 'N',
      '\u0147': 'N',
      '\u014a': 'N',
      '\u0144': 'n',
      '\u0146': 'n',
      '\u0148': 'n',
      '\u014b': 'n',
      '\u014c': 'O',
      '\u014e': 'O',
      '\u0150': 'O',
      '\u014d': 'o',
      '\u014f': 'o',
      '\u0151': 'o',
      '\u0154': 'R',
      '\u0156': 'R',
      '\u0158': 'R',
      '\u0155': 'r',
      '\u0157': 'r',
      '\u0159': 'r',
      '\u015a': 'S',
      '\u015c': 'S',
      '\u015e': 'S',
      '\u0160': 'S',
      '\u015b': 's',
      '\u015d': 's',
      '\u015f': 's',
      '\u0161': 's',
      '\u0162': 'T',
      '\u0164': 'T',
      '\u0166': 'T',
      '\u0163': 't',
      '\u0165': 't',
      '\u0167': 't',
      '\u0168': 'U',
      '\u016a': 'U',
      '\u016c': 'U',
      '\u016e': 'U',
      '\u0170': 'U',
      '\u0172': 'U',
      '\u0169': 'u',
      '\u016b': 'u',
      '\u016d': 'u',
      '\u016f': 'u',
      '\u0171': 'u',
      '\u0173': 'u',
      '\u0174': 'W',
      '\u0175': 'w',
      '\u0176': 'Y',
      '\u0177': 'y',
      '\u0178': 'Y',
      '\u0179': 'Z',
      '\u017b': 'Z',
      '\u017d': 'Z',
      '\u017a': 'z',
      '\u017c': 'z',
      '\u017e': 'z',
      '\u0132': 'IJ',
      '\u0133': 'ij',
      '\u0152': 'Oe',
      '\u0153': 'oe',
      '\u0149': "'n",
      '\u017f': 's'
    };
    var htmlEscapes = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };
    var htmlUnescapes = {
      '&amp;': '&',
      '&lt;': '<',
      '&gt;': '>',
      '&quot;': '"',
      '&#39;': "'"
    };
    var stringEscapes = {
      '\\': '\\',
      "'": "'",
      '\n': 'n',
      '\r': 'r',
      '\u2028': 'u2028',
      '\u2029': 'u2029'
    };
    var freeParseFloat = parseFloat,
      freeParseInt = parseInt;
    var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
    var freeSelf = typeof self == 'object' && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function('return this')();
    var freeExports =  exports && !exports.nodeType && exports;
    var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var freeProcess = moduleExports && freeGlobal.process;
    var nodeUtil = function () {
      try {
        var types = freeModule && freeModule.require && freeModule.require('util').types;
        if (types) {
          return types;
        }
        return freeProcess && freeProcess.binding && freeProcess.binding('util');
      } catch (e) {}
    }();
    var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,
      nodeIsDate = nodeUtil && nodeUtil.isDate,
      nodeIsMap = nodeUtil && nodeUtil.isMap,
      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,
      nodeIsSet = nodeUtil && nodeUtil.isSet,
      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
    function apply(func, thisArg, args) {
      switch (args.length) {
        case 0:
          return func.call(thisArg);
        case 1:
          return func.call(thisArg, args[0]);
        case 2:
          return func.call(thisArg, args[0], args[1]);
        case 3:
          return func.call(thisArg, args[0], args[1], args[2]);
      }
      return func.apply(thisArg, args);
    }
    function arrayAggregator(array, setter, iteratee, accumulator) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        var value = array[index];
        setter(accumulator, value, iteratee(value), array);
      }
      return accumulator;
    }
    function arrayEach(array, iteratee) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (iteratee(array[index], index, array) === false) {
          break;
        }
      }
      return array;
    }
    function arrayEachRight(array, iteratee) {
      var length = array == null ? 0 : array.length;
      while (length--) {
        if (iteratee(array[length], length, array) === false) {
          break;
        }
      }
      return array;
    }
    function arrayEvery(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (!predicate(array[index], index, array)) {
          return false;
        }
      }
      return true;
    }
    function arrayFilter(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length,
        resIndex = 0,
        result = [];
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[resIndex++] = value;
        }
      }
      return result;
    }
    function arrayIncludes(array, value) {
      var length = array == null ? 0 : array.length;
      return !!length && baseIndexOf(array, value, 0) > -1;
    }
    function arrayIncludesWith(array, value, comparator) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (comparator(value, array[index])) {
          return true;
        }
      }
      return false;
    }
    function arrayMap(array, iteratee) {
      var index = -1,
        length = array == null ? 0 : array.length,
        result = Array(length);
      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }
    function arrayPush(array, values) {
      var index = -1,
        length = values.length,
        offset = array.length;
      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }
    function arrayReduce(array, iteratee, accumulator, initAccum) {
      var index = -1,
        length = array == null ? 0 : array.length;
      if (initAccum && length) {
        accumulator = array[++index];
      }
      while (++index < length) {
        accumulator = iteratee(accumulator, array[index], index, array);
      }
      return accumulator;
    }
    function arrayReduceRight(array, iteratee, accumulator, initAccum) {
      var length = array == null ? 0 : array.length;
      if (initAccum && length) {
        accumulator = array[--length];
      }
      while (length--) {
        accumulator = iteratee(accumulator, array[length], length, array);
      }
      return accumulator;
    }
    function arraySome(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }
    var asciiSize = baseProperty('length');
    function asciiToArray(string) {
      return string.split('');
    }
    function asciiWords(string) {
      return string.match(reAsciiWord) || [];
    }
    function baseFindKey(collection, predicate, eachFunc) {
      var result;
      eachFunc(collection, function (value, key, collection) {
        if (predicate(value, key, collection)) {
          result = key;
          return false;
        }
      });
      return result;
    }
    function baseFindIndex(array, predicate, fromIndex, fromRight) {
      var length = array.length,
        index = fromIndex + (fromRight ? 1 : -1);
      while (fromRight ? index-- : ++index < length) {
        if (predicate(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }
    function baseIndexOf(array, value, fromIndex) {
      return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
    }
    function baseIndexOfWith(array, value, fromIndex, comparator) {
      var index = fromIndex - 1,
        length = array.length;
      while (++index < length) {
        if (comparator(array[index], value)) {
          return index;
        }
      }
      return -1;
    }
    function baseIsNaN(value) {
      return value !== value;
    }
    function baseMean(array, iteratee) {
      var length = array == null ? 0 : array.length;
      return length ? baseSum(array, iteratee) / length : NAN;
    }
    function baseProperty(key) {
      return function (object) {
        return object == null ? undefined$1 : object[key];
      };
    }
    function basePropertyOf(object) {
      return function (key) {
        return object == null ? undefined$1 : object[key];
      };
    }
    function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
      eachFunc(collection, function (value, index, collection) {
        accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index, collection);
      });
      return accumulator;
    }
    function baseSortBy(array, comparer) {
      var length = array.length;
      array.sort(comparer);
      while (length--) {
        array[length] = array[length].value;
      }
      return array;
    }
    function baseSum(array, iteratee) {
      var result,
        index = -1,
        length = array.length;
      while (++index < length) {
        var current = iteratee(array[index]);
        if (current !== undefined$1) {
          result = result === undefined$1 ? current : result + current;
        }
      }
      return result;
    }
    function baseTimes(n, iteratee) {
      var index = -1,
        result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }
    function baseToPairs(object, props) {
      return arrayMap(props, function (key) {
        return [key, object[key]];
      });
    }
    function baseTrim(string) {
      return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '') : string;
    }
    function baseUnary(func) {
      return function (value) {
        return func(value);
      };
    }
    function baseValues(object, props) {
      return arrayMap(props, function (key) {
        return object[key];
      });
    }
    function cacheHas(cache, key) {
      return cache.has(key);
    }
    function charsStartIndex(strSymbols, chrSymbols) {
      var index = -1,
        length = strSymbols.length;
      while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
      return index;
    }
    function charsEndIndex(strSymbols, chrSymbols) {
      var index = strSymbols.length;
      while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
      return index;
    }
    function countHolders(array, placeholder) {
      var length = array.length,
        result = 0;
      while (length--) {
        if (array[length] === placeholder) {
          ++result;
        }
      }
      return result;
    }
    var deburrLetter = basePropertyOf(deburredLetters);
    var escapeHtmlChar = basePropertyOf(htmlEscapes);
    function escapeStringChar(chr) {
      return '\\' + stringEscapes[chr];
    }
    function getValue(object, key) {
      return object == null ? undefined$1 : object[key];
    }
    function hasUnicode(string) {
      return reHasUnicode.test(string);
    }
    function hasUnicodeWord(string) {
      return reHasUnicodeWord.test(string);
    }
    function iteratorToArray(iterator) {
      var data,
        result = [];
      while (!(data = iterator.next()).done) {
        result.push(data.value);
      }
      return result;
    }
    function mapToArray(map) {
      var index = -1,
        result = Array(map.size);
      map.forEach(function (value, key) {
        result[++index] = [key, value];
      });
      return result;
    }
    function overArg(func, transform) {
      return function (arg) {
        return func(transform(arg));
      };
    }
    function replaceHolders(array, placeholder) {
      var index = -1,
        length = array.length,
        resIndex = 0,
        result = [];
      while (++index < length) {
        var value = array[index];
        if (value === placeholder || value === PLACEHOLDER) {
          array[index] = PLACEHOLDER;
          result[resIndex++] = index;
        }
      }
      return result;
    }
    function setToArray(set) {
      var index = -1,
        result = Array(set.size);
      set.forEach(function (value) {
        result[++index] = value;
      });
      return result;
    }
    function setToPairs(set) {
      var index = -1,
        result = Array(set.size);
      set.forEach(function (value) {
        result[++index] = [value, value];
      });
      return result;
    }
    function strictIndexOf(array, value, fromIndex) {
      var index = fromIndex - 1,
        length = array.length;
      while (++index < length) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }
    function strictLastIndexOf(array, value, fromIndex) {
      var index = fromIndex + 1;
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return index;
    }
    function stringSize(string) {
      return hasUnicode(string) ? unicodeSize(string) : asciiSize(string);
    }
    function stringToArray(string) {
      return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);
    }
    function trimmedEndIndex(string) {
      var index = string.length;
      while (index-- && reWhitespace.test(string.charAt(index))) {}
      return index;
    }
    var unescapeHtmlChar = basePropertyOf(htmlUnescapes);
    function unicodeSize(string) {
      var result = reUnicode.lastIndex = 0;
      while (reUnicode.test(string)) {
        ++result;
      }
      return result;
    }
    function unicodeToArray(string) {
      return string.match(reUnicode) || [];
    }
    function unicodeWords(string) {
      return string.match(reUnicodeWord) || [];
    }
    var runInContext = function runInContext(context) {
      context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));
      var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;
      var arrayProto = Array.prototype,
        funcProto = Function.prototype,
        objectProto = Object.prototype;
      var coreJsData = context['__core-js_shared__'];
      var funcToString = funcProto.toString;
      var hasOwnProperty = objectProto.hasOwnProperty;
      var idCounter = 0;
      var maskSrcKey = function () {
        var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
        return uid ? 'Symbol(src)_1.' + uid : '';
      }();
      var nativeObjectToString = objectProto.toString;
      var objectCtorString = funcToString.call(Object);
      var oldDash = root._;
      var reIsNative = RegExp('^' + funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');
      var Buffer = moduleExports ? context.Buffer : undefined$1,
        Symbol = context.Symbol,
        Uint8Array = context.Uint8Array,
        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined$1,
        getPrototype = overArg(Object.getPrototypeOf, Object),
        objectCreate = Object.create,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        splice = arrayProto.splice,
        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined$1,
        symIterator = Symbol ? Symbol.iterator : undefined$1,
        symToStringTag = Symbol ? Symbol.toStringTag : undefined$1;
      var defineProperty = function () {
        try {
          var func = getNative(Object, 'defineProperty');
          func({}, '', {});
          return func;
        } catch (e) {}
      }();
      var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,
        ctxNow = Date && Date.now !== root.Date.now && Date.now,
        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;
      var nativeCeil = Math.ceil,
        nativeFloor = Math.floor,
        nativeGetSymbols = Object.getOwnPropertySymbols,
        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined$1,
        nativeIsFinite = context.isFinite,
        nativeJoin = arrayProto.join,
        nativeKeys = overArg(Object.keys, Object),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = Date.now,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random,
        nativeReverse = arrayProto.reverse;
      var DataView = getNative(context, 'DataView'),
        Map = getNative(context, 'Map'),
        Promise = getNative(context, 'Promise'),
        Set = getNative(context, 'Set'),
        WeakMap = getNative(context, 'WeakMap'),
        nativeCreate = getNative(Object, 'create');
      var metaMap = WeakMap && new WeakMap();
      var realNames = {};
      var dataViewCtorString = toSource(DataView),
        mapCtorString = toSource(Map),
        promiseCtorString = toSource(Promise),
        setCtorString = toSource(Set),
        weakMapCtorString = toSource(WeakMap);
      var symbolProto = Symbol ? Symbol.prototype : undefined$1,
        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined$1,
        symbolToString = symbolProto ? symbolProto.toString : undefined$1;
      function lodash(value) {
        if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
          if (value instanceof LodashWrapper) {
            return value;
          }
          if (hasOwnProperty.call(value, '__wrapped__')) {
            return wrapperClone(value);
          }
        }
        return new LodashWrapper(value);
      }
      var baseCreate = function () {
        function object() {}
        return function (proto) {
          if (!isObject(proto)) {
            return {};
          }
          if (objectCreate) {
            return objectCreate(proto);
          }
          object.prototype = proto;
          var result = new object();
          object.prototype = undefined$1;
          return result;
        };
      }();
      function baseLodash() {}
      function LodashWrapper(value, chainAll) {
        this.__wrapped__ = value;
        this.__actions__ = [];
        this.__chain__ = !!chainAll;
        this.__index__ = 0;
        this.__values__ = undefined$1;
      }
      lodash.templateSettings = {
        'escape': reEscape,
        'evaluate': reEvaluate,
        'interpolate': reInterpolate,
        'variable': '',
        'imports': {
          '_': lodash
        }
      };
      lodash.prototype = baseLodash.prototype;
      lodash.prototype.constructor = lodash;
      LodashWrapper.prototype = baseCreate(baseLodash.prototype);
      LodashWrapper.prototype.constructor = LodashWrapper;
      function LazyWrapper(value) {
        this.__wrapped__ = value;
        this.__actions__ = [];
        this.__dir__ = 1;
        this.__filtered__ = false;
        this.__iteratees__ = [];
        this.__takeCount__ = MAX_ARRAY_LENGTH;
        this.__views__ = [];
      }
      function lazyClone() {
        var result = new LazyWrapper(this.__wrapped__);
        result.__actions__ = copyArray(this.__actions__);
        result.__dir__ = this.__dir__;
        result.__filtered__ = this.__filtered__;
        result.__iteratees__ = copyArray(this.__iteratees__);
        result.__takeCount__ = this.__takeCount__;
        result.__views__ = copyArray(this.__views__);
        return result;
      }
      function lazyReverse() {
        if (this.__filtered__) {
          var result = new LazyWrapper(this);
          result.__dir__ = -1;
          result.__filtered__ = true;
        } else {
          result = this.clone();
          result.__dir__ *= -1;
        }
        return result;
      }
      function lazyValue() {
        var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : start - 1,
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);
        if (!isArr || !isRight && arrLength == length && takeCount == length) {
          return baseWrapperValue(array, this.__actions__);
        }
        var result = [];
        outer: while (length-- && resIndex < takeCount) {
          index += dir;
          var iterIndex = -1,
            value = array[index];
          while (++iterIndex < iterLength) {
            var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);
            if (type == LAZY_MAP_FLAG) {
              value = computed;
            } else if (!computed) {
              if (type == LAZY_FILTER_FLAG) {
                continue outer;
              } else {
                break outer;
              }
            }
          }
          result[resIndex++] = value;
        }
        return result;
      }
      LazyWrapper.prototype = baseCreate(baseLodash.prototype);
      LazyWrapper.prototype.constructor = LazyWrapper;
      function Hash(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      function hashClear() {
        this.__data__ = nativeCreate ? nativeCreate(null) : {};
        this.size = 0;
      }
      function hashDelete(key) {
        var result = this.has(key) && delete this.__data__[key];
        this.size -= result ? 1 : 0;
        return result;
      }
      function hashGet(key) {
        var data = this.__data__;
        if (nativeCreate) {
          var result = data[key];
          return result === HASH_UNDEFINED ? undefined$1 : result;
        }
        return hasOwnProperty.call(data, key) ? data[key] : undefined$1;
      }
      function hashHas(key) {
        var data = this.__data__;
        return nativeCreate ? data[key] !== undefined$1 : hasOwnProperty.call(data, key);
      }
      function hashSet(key, value) {
        var data = this.__data__;
        this.size += this.has(key) ? 0 : 1;
        data[key] = nativeCreate && value === undefined$1 ? HASH_UNDEFINED : value;
        return this;
      }
      Hash.prototype.clear = hashClear;
      Hash.prototype['delete'] = hashDelete;
      Hash.prototype.get = hashGet;
      Hash.prototype.has = hashHas;
      Hash.prototype.set = hashSet;
      function ListCache(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      function listCacheClear() {
        this.__data__ = [];
        this.size = 0;
      }
      function listCacheDelete(key) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        if (index < 0) {
          return false;
        }
        var lastIndex = data.length - 1;
        if (index == lastIndex) {
          data.pop();
        } else {
          splice.call(data, index, 1);
        }
        --this.size;
        return true;
      }
      function listCacheGet(key) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        return index < 0 ? undefined$1 : data[index][1];
      }
      function listCacheHas(key) {
        return assocIndexOf(this.__data__, key) > -1;
      }
      function listCacheSet(key, value) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        if (index < 0) {
          ++this.size;
          data.push([key, value]);
        } else {
          data[index][1] = value;
        }
        return this;
      }
      ListCache.prototype.clear = listCacheClear;
      ListCache.prototype['delete'] = listCacheDelete;
      ListCache.prototype.get = listCacheGet;
      ListCache.prototype.has = listCacheHas;
      ListCache.prototype.set = listCacheSet;
      function MapCache(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      function mapCacheClear() {
        this.size = 0;
        this.__data__ = {
          'hash': new Hash(),
          'map': new (Map || ListCache)(),
          'string': new Hash()
        };
      }
      function mapCacheDelete(key) {
        var result = getMapData(this, key)['delete'](key);
        this.size -= result ? 1 : 0;
        return result;
      }
      function mapCacheGet(key) {
        return getMapData(this, key).get(key);
      }
      function mapCacheHas(key) {
        return getMapData(this, key).has(key);
      }
      function mapCacheSet(key, value) {
        var data = getMapData(this, key),
          size = data.size;
        data.set(key, value);
        this.size += data.size == size ? 0 : 1;
        return this;
      }
      MapCache.prototype.clear = mapCacheClear;
      MapCache.prototype['delete'] = mapCacheDelete;
      MapCache.prototype.get = mapCacheGet;
      MapCache.prototype.has = mapCacheHas;
      MapCache.prototype.set = mapCacheSet;
      function SetCache(values) {
        var index = -1,
          length = values == null ? 0 : values.length;
        this.__data__ = new MapCache();
        while (++index < length) {
          this.add(values[index]);
        }
      }
      function setCacheAdd(value) {
        this.__data__.set(value, HASH_UNDEFINED);
        return this;
      }
      function setCacheHas(value) {
        return this.__data__.has(value);
      }
      SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
      SetCache.prototype.has = setCacheHas;
      function Stack(entries) {
        var data = this.__data__ = new ListCache(entries);
        this.size = data.size;
      }
      function stackClear() {
        this.__data__ = new ListCache();
        this.size = 0;
      }
      function stackDelete(key) {
        var data = this.__data__,
          result = data['delete'](key);
        this.size = data.size;
        return result;
      }
      function stackGet(key) {
        return this.__data__.get(key);
      }
      function stackHas(key) {
        return this.__data__.has(key);
      }
      function stackSet(key, value) {
        var data = this.__data__;
        if (data instanceof ListCache) {
          var pairs = data.__data__;
          if (!Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
            pairs.push([key, value]);
            this.size = ++data.size;
            return this;
          }
          data = this.__data__ = new MapCache(pairs);
        }
        data.set(key, value);
        this.size = data.size;
        return this;
      }
      Stack.prototype.clear = stackClear;
      Stack.prototype['delete'] = stackDelete;
      Stack.prototype.get = stackGet;
      Stack.prototype.has = stackHas;
      Stack.prototype.set = stackSet;
      function arrayLikeKeys(value, inherited) {
        var isArr = isArray(value),
          isArg = !isArr && isArguments(value),
          isBuff = !isArr && !isArg && isBuffer(value),
          isType = !isArr && !isArg && !isBuff && isTypedArray(value),
          skipIndexes = isArr || isArg || isBuff || isType,
          result = skipIndexes ? baseTimes(value.length, String) : [],
          length = result.length;
        for (var key in value) {
          if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == 'length' || isBuff && (key == 'offset' || key == 'parent') || isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') || isIndex(key, length)))) {
            result.push(key);
          }
        }
        return result;
      }
      function arraySample(array) {
        var length = array.length;
        return length ? array[baseRandom(0, length - 1)] : undefined$1;
      }
      function arraySampleSize(array, n) {
        return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));
      }
      function arrayShuffle(array) {
        return shuffleSelf(copyArray(array));
      }
      function assignMergeValue(object, key, value) {
        if (value !== undefined$1 && !eq(object[key], value) || value === undefined$1 && !(key in object)) {
          baseAssignValue(object, key, value);
        }
      }
      function assignValue(object, key, value) {
        var objValue = object[key];
        if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined$1 && !(key in object)) {
          baseAssignValue(object, key, value);
        }
      }
      function assocIndexOf(array, key) {
        var length = array.length;
        while (length--) {
          if (eq(array[length][0], key)) {
            return length;
          }
        }
        return -1;
      }
      function baseAggregator(collection, setter, iteratee, accumulator) {
        baseEach(collection, function (value, key, collection) {
          setter(accumulator, value, iteratee(value), collection);
        });
        return accumulator;
      }
      function baseAssign(object, source) {
        return object && copyObject(source, keys(source), object);
      }
      function baseAssignIn(object, source) {
        return object && copyObject(source, keysIn(source), object);
      }
      function baseAssignValue(object, key, value) {
        if (key == '__proto__' && defineProperty) {
          defineProperty(object, key, {
            'configurable': true,
            'enumerable': true,
            'value': value,
            'writable': true
          });
        } else {
          object[key] = value;
        }
      }
      function baseAt(object, paths) {
        var index = -1,
          length = paths.length,
          result = Array(length),
          skip = object == null;
        while (++index < length) {
          result[index] = skip ? undefined$1 : get(object, paths[index]);
        }
        return result;
      }
      function baseClamp(number, lower, upper) {
        if (number === number) {
          if (upper !== undefined$1) {
            number = number <= upper ? number : upper;
          }
          if (lower !== undefined$1) {
            number = number >= lower ? number : lower;
          }
        }
        return number;
      }
      function baseClone(value, bitmask, customizer, key, object, stack) {
        var result,
          isDeep = bitmask & CLONE_DEEP_FLAG,
          isFlat = bitmask & CLONE_FLAT_FLAG,
          isFull = bitmask & CLONE_SYMBOLS_FLAG;
        if (customizer) {
          result = object ? customizer(value, key, object, stack) : customizer(value);
        }
        if (result !== undefined$1) {
          return result;
        }
        if (!isObject(value)) {
          return value;
        }
        var isArr = isArray(value);
        if (isArr) {
          result = initCloneArray(value);
          if (!isDeep) {
            return copyArray(value, result);
          }
        } else {
          var tag = getTag(value),
            isFunc = tag == funcTag || tag == genTag;
          if (isBuffer(value)) {
            return cloneBuffer(value, isDeep);
          }
          if (tag == objectTag || tag == argsTag || isFunc && !object) {
            result = isFlat || isFunc ? {} : initCloneObject(value);
            if (!isDeep) {
              return isFlat ? copySymbolsIn(value, baseAssignIn(result, value)) : copySymbols(value, baseAssign(result, value));
            }
          } else {
            if (!cloneableTags[tag]) {
              return object ? value : {};
            }
            result = initCloneByTag(value, tag, isDeep);
          }
        }
        stack || (stack = new Stack());
        var stacked = stack.get(value);
        if (stacked) {
          return stacked;
        }
        stack.set(value, result);
        if (isSet(value)) {
          value.forEach(function (subValue) {
            result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
          });
        } else if (isMap(value)) {
          value.forEach(function (subValue, key) {
            result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
          });
        }
        var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;
        var props = isArr ? undefined$1 : keysFunc(value);
        arrayEach(props || value, function (subValue, key) {
          if (props) {
            key = subValue;
            subValue = value[key];
          }
          assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
        });
        return result;
      }
      function baseConforms(source) {
        var props = keys(source);
        return function (object) {
          return baseConformsTo(object, source, props);
        };
      }
      function baseConformsTo(object, source, props) {
        var length = props.length;
        if (object == null) {
          return !length;
        }
        object = Object(object);
        while (length--) {
          var key = props[length],
            predicate = source[key],
            value = object[key];
          if (value === undefined$1 && !(key in object) || !predicate(value)) {
            return false;
          }
        }
        return true;
      }
      function baseDelay(func, wait, args) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        return setTimeout(function () {
          func.apply(undefined$1, args);
        }, wait);
      }
      function baseDifference(array, values, iteratee, comparator) {
        var index = -1,
          includes = arrayIncludes,
          isCommon = true,
          length = array.length,
          result = [],
          valuesLength = values.length;
        if (!length) {
          return result;
        }
        if (iteratee) {
          values = arrayMap(values, baseUnary(iteratee));
        }
        if (comparator) {
          includes = arrayIncludesWith;
          isCommon = false;
        } else if (values.length >= LARGE_ARRAY_SIZE) {
          includes = cacheHas;
          isCommon = false;
          values = new SetCache(values);
        }
        outer: while (++index < length) {
          var value = array[index],
            computed = iteratee == null ? value : iteratee(value);
          value = comparator || value !== 0 ? value : 0;
          if (isCommon && computed === computed) {
            var valuesIndex = valuesLength;
            while (valuesIndex--) {
              if (values[valuesIndex] === computed) {
                continue outer;
              }
            }
            result.push(value);
          } else if (!includes(values, computed, comparator)) {
            result.push(value);
          }
        }
        return result;
      }
      var baseEach = createBaseEach(baseForOwn);
      var baseEachRight = createBaseEach(baseForOwnRight, true);
      function baseEvery(collection, predicate) {
        var result = true;
        baseEach(collection, function (value, index, collection) {
          result = !!predicate(value, index, collection);
          return result;
        });
        return result;
      }
      function baseExtremum(array, iteratee, comparator) {
        var index = -1,
          length = array.length;
        while (++index < length) {
          var value = array[index],
            current = iteratee(value);
          if (current != null && (computed === undefined$1 ? current === current && !isSymbol(current) : comparator(current, computed))) {
            var computed = current,
              result = value;
          }
        }
        return result;
      }
      function baseFill(array, value, start, end) {
        var length = array.length;
        start = toInteger(start);
        if (start < 0) {
          start = -start > length ? 0 : length + start;
        }
        end = end === undefined$1 || end > length ? length : toInteger(end);
        if (end < 0) {
          end += length;
        }
        end = start > end ? 0 : toLength(end);
        while (start < end) {
          array[start++] = value;
        }
        return array;
      }
      function baseFilter(collection, predicate) {
        var result = [];
        baseEach(collection, function (value, index, collection) {
          if (predicate(value, index, collection)) {
            result.push(value);
          }
        });
        return result;
      }
      function baseFlatten(array, depth, predicate, isStrict, result) {
        var index = -1,
          length = array.length;
        predicate || (predicate = isFlattenable);
        result || (result = []);
        while (++index < length) {
          var value = array[index];
          if (depth > 0 && predicate(value)) {
            if (depth > 1) {
              baseFlatten(value, depth - 1, predicate, isStrict, result);
            } else {
              arrayPush(result, value);
            }
          } else if (!isStrict) {
            result[result.length] = value;
          }
        }
        return result;
      }
      var baseFor = createBaseFor();
      var baseForRight = createBaseFor(true);
      function baseForOwn(object, iteratee) {
        return object && baseFor(object, iteratee, keys);
      }
      function baseForOwnRight(object, iteratee) {
        return object && baseForRight(object, iteratee, keys);
      }
      function baseFunctions(object, props) {
        return arrayFilter(props, function (key) {
          return isFunction(object[key]);
        });
      }
      function baseGet(object, path) {
        path = castPath(path, object);
        var index = 0,
          length = path.length;
        while (object != null && index < length) {
          object = object[toKey(path[index++])];
        }
        return index && index == length ? object : undefined$1;
      }
      function baseGetAllKeys(object, keysFunc, symbolsFunc) {
        var result = keysFunc(object);
        return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
      }
      function baseGetTag(value) {
        if (value == null) {
          return value === undefined$1 ? undefinedTag : nullTag;
        }
        return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
      }
      function baseGt(value, other) {
        return value > other;
      }
      function baseHas(object, key) {
        return object != null && hasOwnProperty.call(object, key);
      }
      function baseHasIn(object, key) {
        return object != null && key in Object(object);
      }
      function baseInRange(number, start, end) {
        return number >= nativeMin(start, end) && number < nativeMax(start, end);
      }
      function baseIntersection(arrays, iteratee, comparator) {
        var includes = comparator ? arrayIncludesWith : arrayIncludes,
          length = arrays[0].length,
          othLength = arrays.length,
          othIndex = othLength,
          caches = Array(othLength),
          maxLength = Infinity,
          result = [];
        while (othIndex--) {
          var array = arrays[othIndex];
          if (othIndex && iteratee) {
            array = arrayMap(array, baseUnary(iteratee));
          }
          maxLength = nativeMin(array.length, maxLength);
          caches[othIndex] = !comparator && (iteratee || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : undefined$1;
        }
        array = arrays[0];
        var index = -1,
          seen = caches[0];
        outer: while (++index < length && result.length < maxLength) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          value = comparator || value !== 0 ? value : 0;
          if (!(seen ? cacheHas(seen, computed) : includes(result, computed, comparator))) {
            othIndex = othLength;
            while (--othIndex) {
              var cache = caches[othIndex];
              if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed, comparator))) {
                continue outer;
              }
            }
            if (seen) {
              seen.push(computed);
            }
            result.push(value);
          }
        }
        return result;
      }
      function baseInverter(object, setter, iteratee, accumulator) {
        baseForOwn(object, function (value, key, object) {
          setter(accumulator, iteratee(value), key, object);
        });
        return accumulator;
      }
      function baseInvoke(object, path, args) {
        path = castPath(path, object);
        object = parent(object, path);
        var func = object == null ? object : object[toKey(last(path))];
        return func == null ? undefined$1 : apply(func, object, args);
      }
      function baseIsArguments(value) {
        return isObjectLike(value) && baseGetTag(value) == argsTag;
      }
      function baseIsArrayBuffer(value) {
        return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;
      }
      function baseIsDate(value) {
        return isObjectLike(value) && baseGetTag(value) == dateTag;
      }
      function baseIsEqual(value, other, bitmask, customizer, stack) {
        if (value === other) {
          return true;
        }
        if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
          return value !== value && other !== other;
        }
        return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
      }
      function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
        var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = objIsArr ? arrayTag : getTag(object),
          othTag = othIsArr ? arrayTag : getTag(other);
        objTag = objTag == argsTag ? objectTag : objTag;
        othTag = othTag == argsTag ? objectTag : othTag;
        var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;
        if (isSameTag && isBuffer(object)) {
          if (!isBuffer(other)) {
            return false;
          }
          objIsArr = true;
          objIsObj = false;
        }
        if (isSameTag && !objIsObj) {
          stack || (stack = new Stack());
          return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
        }
        if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
          var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');
          if (objIsWrapped || othIsWrapped) {
            var objUnwrapped = objIsWrapped ? object.value() : object,
              othUnwrapped = othIsWrapped ? other.value() : other;
            stack || (stack = new Stack());
            return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
          }
        }
        if (!isSameTag) {
          return false;
        }
        stack || (stack = new Stack());
        return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
      }
      function baseIsMap(value) {
        return isObjectLike(value) && getTag(value) == mapTag;
      }
      function baseIsMatch(object, source, matchData, customizer) {
        var index = matchData.length,
          length = index,
          noCustomizer = !customizer;
        if (object == null) {
          return !length;
        }
        object = Object(object);
        while (index--) {
          var data = matchData[index];
          if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
            return false;
          }
        }
        while (++index < length) {
          data = matchData[index];
          var key = data[0],
            objValue = object[key],
            srcValue = data[1];
          if (noCustomizer && data[2]) {
            if (objValue === undefined$1 && !(key in object)) {
              return false;
            }
          } else {
            var stack = new Stack();
            if (customizer) {
              var result = customizer(objValue, srcValue, key, object, source, stack);
            }
            if (!(result === undefined$1 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result)) {
              return false;
            }
          }
        }
        return true;
      }
      function baseIsNative(value) {
        if (!isObject(value) || isMasked(value)) {
          return false;
        }
        var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
        return pattern.test(toSource(value));
      }
      function baseIsRegExp(value) {
        return isObjectLike(value) && baseGetTag(value) == regexpTag;
      }
      function baseIsSet(value) {
        return isObjectLike(value) && getTag(value) == setTag;
      }
      function baseIsTypedArray(value) {
        return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
      }
      function baseIteratee(value) {
        if (typeof value == 'function') {
          return value;
        }
        if (value == null) {
          return identity;
        }
        if (typeof value == 'object') {
          return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
        }
        return property(value);
      }
      function baseKeys(object) {
        if (!isPrototype(object)) {
          return nativeKeys(object);
        }
        var result = [];
        for (var key in Object(object)) {
          if (hasOwnProperty.call(object, key) && key != 'constructor') {
            result.push(key);
          }
        }
        return result;
      }
      function baseKeysIn(object) {
        if (!isObject(object)) {
          return nativeKeysIn(object);
        }
        var isProto = isPrototype(object),
          result = [];
        for (var key in object) {
          if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
            result.push(key);
          }
        }
        return result;
      }
      function baseLt(value, other) {
        return value < other;
      }
      function baseMap(collection, iteratee) {
        var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];
        baseEach(collection, function (value, key, collection) {
          result[++index] = iteratee(value, key, collection);
        });
        return result;
      }
      function baseMatches(source) {
        var matchData = getMatchData(source);
        if (matchData.length == 1 && matchData[0][2]) {
          return matchesStrictComparable(matchData[0][0], matchData[0][1]);
        }
        return function (object) {
          return object === source || baseIsMatch(object, source, matchData);
        };
      }
      function baseMatchesProperty(path, srcValue) {
        if (isKey(path) && isStrictComparable(srcValue)) {
          return matchesStrictComparable(toKey(path), srcValue);
        }
        return function (object) {
          var objValue = get(object, path);
          return objValue === undefined$1 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
        };
      }
      function baseMerge(object, source, srcIndex, customizer, stack) {
        if (object === source) {
          return;
        }
        baseFor(source, function (srcValue, key) {
          stack || (stack = new Stack());
          if (isObject(srcValue)) {
            baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
          } else {
            var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + '', object, source, stack) : undefined$1;
            if (newValue === undefined$1) {
              newValue = srcValue;
            }
            assignMergeValue(object, key, newValue);
          }
        }, keysIn);
      }
      function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
        var objValue = safeGet(object, key),
          srcValue = safeGet(source, key),
          stacked = stack.get(srcValue);
        if (stacked) {
          assignMergeValue(object, key, stacked);
          return;
        }
        var newValue = customizer ? customizer(objValue, srcValue, key + '', object, source, stack) : undefined$1;
        var isCommon = newValue === undefined$1;
        if (isCommon) {
          var isArr = isArray(srcValue),
            isBuff = !isArr && isBuffer(srcValue),
            isTyped = !isArr && !isBuff && isTypedArray(srcValue);
          newValue = srcValue;
          if (isArr || isBuff || isTyped) {
            if (isArray(objValue)) {
              newValue = objValue;
            } else if (isArrayLikeObject(objValue)) {
              newValue = copyArray(objValue);
            } else if (isBuff) {
              isCommon = false;
              newValue = cloneBuffer(srcValue, true);
            } else if (isTyped) {
              isCommon = false;
              newValue = cloneTypedArray(srcValue, true);
            } else {
              newValue = [];
            }
          } else if (isPlainObject(srcValue) || isArguments(srcValue)) {
            newValue = objValue;
            if (isArguments(objValue)) {
              newValue = toPlainObject(objValue);
            } else if (!isObject(objValue) || isFunction(objValue)) {
              newValue = initCloneObject(srcValue);
            }
          } else {
            isCommon = false;
          }
        }
        if (isCommon) {
          stack.set(srcValue, newValue);
          mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
          stack['delete'](srcValue);
        }
        assignMergeValue(object, key, newValue);
      }
      function baseNth(array, n) {
        var length = array.length;
        if (!length) {
          return;
        }
        n += n < 0 ? length : 0;
        return isIndex(n, length) ? array[n] : undefined$1;
      }
      function baseOrderBy(collection, iteratees, orders) {
        if (iteratees.length) {
          iteratees = arrayMap(iteratees, function (iteratee) {
            if (isArray(iteratee)) {
              return function (value) {
                return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);
              };
            }
            return iteratee;
          });
        } else {
          iteratees = [identity];
        }
        var index = -1;
        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));
        var result = baseMap(collection, function (value, key, collection) {
          var criteria = arrayMap(iteratees, function (iteratee) {
            return iteratee(value);
          });
          return {
            'criteria': criteria,
            'index': ++index,
            'value': value
          };
        });
        return baseSortBy(result, function (object, other) {
          return compareMultiple(object, other, orders);
        });
      }
      function basePick(object, paths) {
        return basePickBy(object, paths, function (value, path) {
          return hasIn(object, path);
        });
      }
      function basePickBy(object, paths, predicate) {
        var index = -1,
          length = paths.length,
          result = {};
        while (++index < length) {
          var path = paths[index],
            value = baseGet(object, path);
          if (predicate(value, path)) {
            baseSet(result, castPath(path, object), value);
          }
        }
        return result;
      }
      function basePropertyDeep(path) {
        return function (object) {
          return baseGet(object, path);
        };
      }
      function basePullAll(array, values, iteratee, comparator) {
        var indexOf = comparator ? baseIndexOfWith : baseIndexOf,
          index = -1,
          length = values.length,
          seen = array;
        if (array === values) {
          values = copyArray(values);
        }
        if (iteratee) {
          seen = arrayMap(array, baseUnary(iteratee));
        }
        while (++index < length) {
          var fromIndex = 0,
            value = values[index],
            computed = iteratee ? iteratee(value) : value;
          while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {
            if (seen !== array) {
              splice.call(seen, fromIndex, 1);
            }
            splice.call(array, fromIndex, 1);
          }
        }
        return array;
      }
      function basePullAt(array, indexes) {
        var length = array ? indexes.length : 0,
          lastIndex = length - 1;
        while (length--) {
          var index = indexes[length];
          if (length == lastIndex || index !== previous) {
            var previous = index;
            if (isIndex(index)) {
              splice.call(array, index, 1);
            } else {
              baseUnset(array, index);
            }
          }
        }
        return array;
      }
      function baseRandom(lower, upper) {
        return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
      }
      function baseRange(start, end, step, fromRight) {
        var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);
        while (length--) {
          result[fromRight ? length : ++index] = start;
          start += step;
        }
        return result;
      }
      function baseRepeat(string, n) {
        var result = '';
        if (!string || n < 1 || n > MAX_SAFE_INTEGER) {
          return result;
        }
        do {
          if (n % 2) {
            result += string;
          }
          n = nativeFloor(n / 2);
          if (n) {
            string += string;
          }
        } while (n);
        return result;
      }
      function baseRest(func, start) {
        return setToString(overRest(func, start, identity), func + '');
      }
      function baseSample(collection) {
        return arraySample(values(collection));
      }
      function baseSampleSize(collection, n) {
        var array = values(collection);
        return shuffleSelf(array, baseClamp(n, 0, array.length));
      }
      function baseSet(object, path, value, customizer) {
        if (!isObject(object)) {
          return object;
        }
        path = castPath(path, object);
        var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;
        while (nested != null && ++index < length) {
          var key = toKey(path[index]),
            newValue = value;
          if (key === '__proto__' || key === 'constructor' || key === 'prototype') {
            return object;
          }
          if (index != lastIndex) {
            var objValue = nested[key];
            newValue = customizer ? customizer(objValue, key, nested) : undefined$1;
            if (newValue === undefined$1) {
              newValue = isObject(objValue) ? objValue : isIndex(path[index + 1]) ? [] : {};
            }
          }
          assignValue(nested, key, newValue);
          nested = nested[key];
        }
        return object;
      }
      var baseSetData = !metaMap ? identity : function (func, data) {
        metaMap.set(func, data);
        return func;
      };
      var baseSetToString = !defineProperty ? identity : function (func, string) {
        return defineProperty(func, 'toString', {
          'configurable': true,
          'enumerable': false,
          'value': constant(string),
          'writable': true
        });
      };
      function baseShuffle(collection) {
        return shuffleSelf(values(collection));
      }
      function baseSlice(array, start, end) {
        var index = -1,
          length = array.length;
        if (start < 0) {
          start = -start > length ? 0 : length + start;
        }
        end = end > length ? length : end;
        if (end < 0) {
          end += length;
        }
        length = start > end ? 0 : end - start >>> 0;
        start >>>= 0;
        var result = Array(length);
        while (++index < length) {
          result[index] = array[index + start];
        }
        return result;
      }
      function baseSome(collection, predicate) {
        var result;
        baseEach(collection, function (value, index, collection) {
          result = predicate(value, index, collection);
          return !result;
        });
        return !!result;
      }
      function baseSortedIndex(array, value, retHighest) {
        var low = 0,
          high = array == null ? low : array.length;
        if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
          while (low < high) {
            var mid = low + high >>> 1,
              computed = array[mid];
            if (computed !== null && !isSymbol(computed) && (retHighest ? computed <= value : computed < value)) {
              low = mid + 1;
            } else {
              high = mid;
            }
          }
          return high;
        }
        return baseSortedIndexBy(array, value, identity, retHighest);
      }
      function baseSortedIndexBy(array, value, iteratee, retHighest) {
        var low = 0,
          high = array == null ? 0 : array.length;
        if (high === 0) {
          return 0;
        }
        value = iteratee(value);
        var valIsNaN = value !== value,
          valIsNull = value === null,
          valIsSymbol = isSymbol(value),
          valIsUndefined = value === undefined$1;
        while (low < high) {
          var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            othIsDefined = computed !== undefined$1,
            othIsNull = computed === null,
            othIsReflexive = computed === computed,
            othIsSymbol = isSymbol(computed);
          if (valIsNaN) {
            var setLow = retHighest || othIsReflexive;
          } else if (valIsUndefined) {
            setLow = othIsReflexive && (retHighest || othIsDefined);
          } else if (valIsNull) {
            setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
          } else if (valIsSymbol) {
            setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
          } else if (othIsNull || othIsSymbol) {
            setLow = false;
          } else {
            setLow = retHighest ? computed <= value : computed < value;
          }
          if (setLow) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return nativeMin(high, MAX_ARRAY_INDEX);
      }
      function baseSortedUniq(array, iteratee) {
        var index = -1,
          length = array.length,
          resIndex = 0,
          result = [];
        while (++index < length) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          if (!index || !eq(computed, seen)) {
            var seen = computed;
            result[resIndex++] = value === 0 ? 0 : value;
          }
        }
        return result;
      }
      function baseToNumber(value) {
        if (typeof value == 'number') {
          return value;
        }
        if (isSymbol(value)) {
          return NAN;
        }
        return +value;
      }
      function baseToString(value) {
        if (typeof value == 'string') {
          return value;
        }
        if (isArray(value)) {
          return arrayMap(value, baseToString) + '';
        }
        if (isSymbol(value)) {
          return symbolToString ? symbolToString.call(value) : '';
        }
        var result = value + '';
        return result == '0' && 1 / value == -INFINITY ? '-0' : result;
      }
      function baseUniq(array, iteratee, comparator) {
        var index = -1,
          includes = arrayIncludes,
          length = array.length,
          isCommon = true,
          result = [],
          seen = result;
        if (comparator) {
          isCommon = false;
          includes = arrayIncludesWith;
        } else if (length >= LARGE_ARRAY_SIZE) {
          var set = iteratee ? null : createSet(array);
          if (set) {
            return setToArray(set);
          }
          isCommon = false;
          includes = cacheHas;
          seen = new SetCache();
        } else {
          seen = iteratee ? [] : result;
        }
        outer: while (++index < length) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          value = comparator || value !== 0 ? value : 0;
          if (isCommon && computed === computed) {
            var seenIndex = seen.length;
            while (seenIndex--) {
              if (seen[seenIndex] === computed) {
                continue outer;
              }
            }
            if (iteratee) {
              seen.push(computed);
            }
            result.push(value);
          } else if (!includes(seen, computed, comparator)) {
            if (seen !== result) {
              seen.push(computed);
            }
            result.push(value);
          }
        }
        return result;
      }
      function baseUnset(object, path) {
        path = castPath(path, object);
        object = parent(object, path);
        return object == null || delete object[toKey(last(path))];
      }
      function baseUpdate(object, path, updater, customizer) {
        return baseSet(object, path, updater(baseGet(object, path)), customizer);
      }
      function baseWhile(array, predicate, isDrop, fromRight) {
        var length = array.length,
          index = fromRight ? length : -1;
        while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}
        return isDrop ? baseSlice(array, fromRight ? 0 : index, fromRight ? index + 1 : length) : baseSlice(array, fromRight ? index + 1 : 0, fromRight ? length : index);
      }
      function baseWrapperValue(value, actions) {
        var result = value;
        if (result instanceof LazyWrapper) {
          result = result.value();
        }
        return arrayReduce(actions, function (result, action) {
          return action.func.apply(action.thisArg, arrayPush([result], action.args));
        }, result);
      }
      function baseXor(arrays, iteratee, comparator) {
        var length = arrays.length;
        if (length < 2) {
          return length ? baseUniq(arrays[0]) : [];
        }
        var index = -1,
          result = Array(length);
        while (++index < length) {
          var array = arrays[index],
            othIndex = -1;
          while (++othIndex < length) {
            if (othIndex != index) {
              result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);
            }
          }
        }
        return baseUniq(baseFlatten(result, 1), iteratee, comparator);
      }
      function baseZipObject(props, values, assignFunc) {
        var index = -1,
          length = props.length,
          valsLength = values.length,
          result = {};
        while (++index < length) {
          var value = index < valsLength ? values[index] : undefined$1;
          assignFunc(result, props[index], value);
        }
        return result;
      }
      function castArrayLikeObject(value) {
        return isArrayLikeObject(value) ? value : [];
      }
      function castFunction(value) {
        return typeof value == 'function' ? value : identity;
      }
      function castPath(value, object) {
        if (isArray(value)) {
          return value;
        }
        return isKey(value, object) ? [value] : stringToPath(toString(value));
      }
      var castRest = baseRest;
      function castSlice(array, start, end) {
        var length = array.length;
        end = end === undefined$1 ? length : end;
        return !start && end >= length ? array : baseSlice(array, start, end);
      }
      var clearTimeout = ctxClearTimeout || function (id) {
        return root.clearTimeout(id);
      };
      function cloneBuffer(buffer, isDeep) {
        if (isDeep) {
          return buffer.slice();
        }
        var length = buffer.length,
          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
        buffer.copy(result);
        return result;
      }
      function cloneArrayBuffer(arrayBuffer) {
        var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
        new Uint8Array(result).set(new Uint8Array(arrayBuffer));
        return result;
      }
      function cloneDataView(dataView, isDeep) {
        var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;
        return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
      }
      function cloneRegExp(regexp) {
        var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
        result.lastIndex = regexp.lastIndex;
        return result;
      }
      function cloneSymbol(symbol) {
        return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
      }
      function cloneTypedArray(typedArray, isDeep) {
        var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
        return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
      }
      function compareAscending(value, other) {
        if (value !== other) {
          var valIsDefined = value !== undefined$1,
            valIsNull = value === null,
            valIsReflexive = value === value,
            valIsSymbol = isSymbol(value);
          var othIsDefined = other !== undefined$1,
            othIsNull = other === null,
            othIsReflexive = other === other,
            othIsSymbol = isSymbol(other);
          if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
            return 1;
          }
          if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
            return -1;
          }
        }
        return 0;
      }
      function compareMultiple(object, other, orders) {
        var index = -1,
          objCriteria = object.criteria,
          othCriteria = other.criteria,
          length = objCriteria.length,
          ordersLength = orders.length;
        while (++index < length) {
          var result = compareAscending(objCriteria[index], othCriteria[index]);
          if (result) {
            if (index >= ordersLength) {
              return result;
            }
            var order = orders[index];
            return result * (order == 'desc' ? -1 : 1);
          }
        }
        return object.index - other.index;
      }
      function composeArgs(args, partials, holders, isCurried) {
        var argsIndex = -1,
          argsLength = args.length,
          holdersLength = holders.length,
          leftIndex = -1,
          leftLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(leftLength + rangeLength),
          isUncurried = !isCurried;
        while (++leftIndex < leftLength) {
          result[leftIndex] = partials[leftIndex];
        }
        while (++argsIndex < holdersLength) {
          if (isUncurried || argsIndex < argsLength) {
            result[holders[argsIndex]] = args[argsIndex];
          }
        }
        while (rangeLength--) {
          result[leftIndex++] = args[argsIndex++];
        }
        return result;
      }
      function composeArgsRight(args, partials, holders, isCurried) {
        var argsIndex = -1,
          argsLength = args.length,
          holdersIndex = -1,
          holdersLength = holders.length,
          rightIndex = -1,
          rightLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(rangeLength + rightLength),
          isUncurried = !isCurried;
        while (++argsIndex < rangeLength) {
          result[argsIndex] = args[argsIndex];
        }
        var offset = argsIndex;
        while (++rightIndex < rightLength) {
          result[offset + rightIndex] = partials[rightIndex];
        }
        while (++holdersIndex < holdersLength) {
          if (isUncurried || argsIndex < argsLength) {
            result[offset + holders[holdersIndex]] = args[argsIndex++];
          }
        }
        return result;
      }
      function copyArray(source, array) {
        var index = -1,
          length = source.length;
        array || (array = Array(length));
        while (++index < length) {
          array[index] = source[index];
        }
        return array;
      }
      function copyObject(source, props, object, customizer) {
        var isNew = !object;
        object || (object = {});
        var index = -1,
          length = props.length;
        while (++index < length) {
          var key = props[index];
          var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined$1;
          if (newValue === undefined$1) {
            newValue = source[key];
          }
          if (isNew) {
            baseAssignValue(object, key, newValue);
          } else {
            assignValue(object, key, newValue);
          }
        }
        return object;
      }
      function copySymbols(source, object) {
        return copyObject(source, getSymbols(source), object);
      }
      function copySymbolsIn(source, object) {
        return copyObject(source, getSymbolsIn(source), object);
      }
      function createAggregator(setter, initializer) {
        return function (collection, iteratee) {
          var func = isArray(collection) ? arrayAggregator : baseAggregator,
            accumulator = initializer ? initializer() : {};
          return func(collection, setter, getIteratee(iteratee, 2), accumulator);
        };
      }
      function createAssigner(assigner) {
        return baseRest(function (object, sources) {
          var index = -1,
            length = sources.length,
            customizer = length > 1 ? sources[length - 1] : undefined$1,
            guard = length > 2 ? sources[2] : undefined$1;
          customizer = assigner.length > 3 && typeof customizer == 'function' ? (length--, customizer) : undefined$1;
          if (guard && isIterateeCall(sources[0], sources[1], guard)) {
            customizer = length < 3 ? undefined$1 : customizer;
            length = 1;
          }
          object = Object(object);
          while (++index < length) {
            var source = sources[index];
            if (source) {
              assigner(object, source, index, customizer);
            }
          }
          return object;
        });
      }
      function createBaseEach(eachFunc, fromRight) {
        return function (collection, iteratee) {
          if (collection == null) {
            return collection;
          }
          if (!isArrayLike(collection)) {
            return eachFunc(collection, iteratee);
          }
          var length = collection.length,
            index = fromRight ? length : -1,
            iterable = Object(collection);
          while (fromRight ? index-- : ++index < length) {
            if (iteratee(iterable[index], index, iterable) === false) {
              break;
            }
          }
          return collection;
        };
      }
      function createBaseFor(fromRight) {
        return function (object, iteratee, keysFunc) {
          var index = -1,
            iterable = Object(object),
            props = keysFunc(object),
            length = props.length;
          while (length--) {
            var key = props[fromRight ? length : ++index];
            if (iteratee(iterable[key], key, iterable) === false) {
              break;
            }
          }
          return object;
        };
      }
      function createBind(func, bitmask, thisArg) {
        var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);
        function wrapper() {
          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          return fn.apply(isBind ? thisArg : this, arguments);
        }
        return wrapper;
      }
      function createCaseFirst(methodName) {
        return function (string) {
          string = toString(string);
          var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined$1;
          var chr = strSymbols ? strSymbols[0] : string.charAt(0);
          var trailing = strSymbols ? castSlice(strSymbols, 1).join('') : string.slice(1);
          return chr[methodName]() + trailing;
        };
      }
      function createCompounder(callback) {
        return function (string) {
          return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');
        };
      }
      function createCtor(Ctor) {
        return function () {
          var args = arguments;
          switch (args.length) {
            case 0:
              return new Ctor();
            case 1:
              return new Ctor(args[0]);
            case 2:
              return new Ctor(args[0], args[1]);
            case 3:
              return new Ctor(args[0], args[1], args[2]);
            case 4:
              return new Ctor(args[0], args[1], args[2], args[3]);
            case 5:
              return new Ctor(args[0], args[1], args[2], args[3], args[4]);
            case 6:
              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
            case 7:
              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
          }
          var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);
          return isObject(result) ? result : thisBinding;
        };
      }
      function createCurry(func, bitmask, arity) {
        var Ctor = createCtor(func);
        function wrapper() {
          var length = arguments.length,
            args = Array(length),
            index = length,
            placeholder = getHolder(wrapper);
          while (index--) {
            args[index] = arguments[index];
          }
          var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);
          length -= holders.length;
          if (length < arity) {
            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, undefined$1, args, holders, undefined$1, undefined$1, arity - length);
          }
          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          return apply(fn, this, args);
        }
        return wrapper;
      }
      function createFind(findIndexFunc) {
        return function (collection, predicate, fromIndex) {
          var iterable = Object(collection);
          if (!isArrayLike(collection)) {
            var iteratee = getIteratee(predicate, 3);
            collection = keys(collection);
            predicate = function (key) {
              return iteratee(iterable[key], key, iterable);
            };
          }
          var index = findIndexFunc(collection, predicate, fromIndex);
          return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined$1;
        };
      }
      function createFlow(fromRight) {
        return flatRest(function (funcs) {
          var length = funcs.length,
            index = length,
            prereq = LodashWrapper.prototype.thru;
          if (fromRight) {
            funcs.reverse();
          }
          while (index--) {
            var func = funcs[index];
            if (typeof func != 'function') {
              throw new TypeError(FUNC_ERROR_TEXT);
            }
            if (prereq && !wrapper && getFuncName(func) == 'wrapper') {
              var wrapper = new LodashWrapper([], true);
            }
          }
          index = wrapper ? index : length;
          while (++index < length) {
            func = funcs[index];
            var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined$1;
            if (data && isLaziable(data[0]) && data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) && !data[4].length && data[9] == 1) {
              wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
            } else {
              wrapper = func.length == 1 && isLaziable(func) ? wrapper[funcName]() : wrapper.thru(func);
            }
          }
          return function () {
            var args = arguments,
              value = args[0];
            if (wrapper && args.length == 1 && isArray(value)) {
              return wrapper.plant(value).value();
            }
            var index = 0,
              result = length ? funcs[index].apply(this, args) : value;
            while (++index < length) {
              result = funcs[index].call(this, result);
            }
            return result;
          };
        });
      }
      function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
        var isAry = bitmask & WRAP_ARY_FLAG,
          isBind = bitmask & WRAP_BIND_FLAG,
          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,
          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),
          isFlip = bitmask & WRAP_FLIP_FLAG,
          Ctor = isBindKey ? undefined$1 : createCtor(func);
        function wrapper() {
          var length = arguments.length,
            args = Array(length),
            index = length;
          while (index--) {
            args[index] = arguments[index];
          }
          if (isCurried) {
            var placeholder = getHolder(wrapper),
              holdersCount = countHolders(args, placeholder);
          }
          if (partials) {
            args = composeArgs(args, partials, holders, isCurried);
          }
          if (partialsRight) {
            args = composeArgsRight(args, partialsRight, holdersRight, isCurried);
          }
          length -= holdersCount;
          if (isCurried && length < arity) {
            var newHolders = replaceHolders(args, placeholder);
            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, thisArg, args, newHolders, argPos, ary, arity - length);
          }
          var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;
          length = args.length;
          if (argPos) {
            args = reorder(args, argPos);
          } else if (isFlip && length > 1) {
            args.reverse();
          }
          if (isAry && ary < length) {
            args.length = ary;
          }
          if (this && this !== root && this instanceof wrapper) {
            fn = Ctor || createCtor(fn);
          }
          return fn.apply(thisBinding, args);
        }
        return wrapper;
      }
      function createInverter(setter, toIteratee) {
        return function (object, iteratee) {
          return baseInverter(object, setter, toIteratee(iteratee), {});
        };
      }
      function createMathOperation(operator, defaultValue) {
        return function (value, other) {
          var result;
          if (value === undefined$1 && other === undefined$1) {
            return defaultValue;
          }
          if (value !== undefined$1) {
            result = value;
          }
          if (other !== undefined$1) {
            if (result === undefined$1) {
              return other;
            }
            if (typeof value == 'string' || typeof other == 'string') {
              value = baseToString(value);
              other = baseToString(other);
            } else {
              value = baseToNumber(value);
              other = baseToNumber(other);
            }
            result = operator(value, other);
          }
          return result;
        };
      }
      function createOver(arrayFunc) {
        return flatRest(function (iteratees) {
          iteratees = arrayMap(iteratees, baseUnary(getIteratee()));
          return baseRest(function (args) {
            var thisArg = this;
            return arrayFunc(iteratees, function (iteratee) {
              return apply(iteratee, thisArg, args);
            });
          });
        });
      }
      function createPadding(length, chars) {
        chars = chars === undefined$1 ? ' ' : baseToString(chars);
        var charsLength = chars.length;
        if (charsLength < 2) {
          return charsLength ? baseRepeat(chars, length) : chars;
        }
        var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));
        return hasUnicode(chars) ? castSlice(stringToArray(result), 0, length).join('') : result.slice(0, length);
      }
      function createPartial(func, bitmask, thisArg, partials) {
        var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);
        function wrapper() {
          var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength),
            fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          while (++leftIndex < leftLength) {
            args[leftIndex] = partials[leftIndex];
          }
          while (argsLength--) {
            args[leftIndex++] = arguments[++argsIndex];
          }
          return apply(fn, isBind ? thisArg : this, args);
        }
        return wrapper;
      }
      function createRange(fromRight) {
        return function (start, end, step) {
          if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {
            end = step = undefined$1;
          }
          start = toFinite(start);
          if (end === undefined$1) {
            end = start;
            start = 0;
          } else {
            end = toFinite(end);
          }
          step = step === undefined$1 ? start < end ? 1 : -1 : toFinite(step);
          return baseRange(start, end, step, fromRight);
        };
      }
      function createRelationalOperation(operator) {
        return function (value, other) {
          if (!(typeof value == 'string' && typeof other == 'string')) {
            value = toNumber(value);
            other = toNumber(other);
          }
          return operator(value, other);
        };
      }
      function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {
        var isCurry = bitmask & WRAP_CURRY_FLAG,
          newHolders = isCurry ? holders : undefined$1,
          newHoldersRight = isCurry ? undefined$1 : holders,
          newPartials = isCurry ? partials : undefined$1,
          newPartialsRight = isCurry ? undefined$1 : partials;
        bitmask |= isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG;
        bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);
        if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {
          bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);
        }
        var newData = [func, bitmask, thisArg, newPartials, newHolders, newPartialsRight, newHoldersRight, argPos, ary, arity];
        var result = wrapFunc.apply(undefined$1, newData);
        if (isLaziable(func)) {
          setData(result, newData);
        }
        result.placeholder = placeholder;
        return setWrapToString(result, func, bitmask);
      }
      function createRound(methodName) {
        var func = Math[methodName];
        return function (number, precision) {
          number = toNumber(number);
          precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);
          if (precision && nativeIsFinite(number)) {
            var pair = (toString(number) + 'e').split('e'),
              value = func(pair[0] + 'e' + (+pair[1] + precision));
            pair = (toString(value) + 'e').split('e');
            return +(pair[0] + 'e' + (+pair[1] - precision));
          }
          return func(number);
        };
      }
      var createSet = !(Set && 1 / setToArray(new Set([, -0]))[1] == INFINITY) ? noop : function (values) {
        return new Set(values);
      };
      function createToPairs(keysFunc) {
        return function (object) {
          var tag = getTag(object);
          if (tag == mapTag) {
            return mapToArray(object);
          }
          if (tag == setTag) {
            return setToPairs(object);
          }
          return baseToPairs(object, keysFunc(object));
        };
      }
      function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
        var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;
        if (!isBindKey && typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        var length = partials ? partials.length : 0;
        if (!length) {
          bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);
          partials = holders = undefined$1;
        }
        ary = ary === undefined$1 ? ary : nativeMax(toInteger(ary), 0);
        arity = arity === undefined$1 ? arity : toInteger(arity);
        length -= holders ? holders.length : 0;
        if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {
          var partialsRight = partials,
            holdersRight = holders;
          partials = holders = undefined$1;
        }
        var data = isBindKey ? undefined$1 : getData(func);
        var newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];
        if (data) {
          mergeData(newData, data);
        }
        func = newData[0];
        bitmask = newData[1];
        thisArg = newData[2];
        partials = newData[3];
        holders = newData[4];
        arity = newData[9] = newData[9] === undefined$1 ? isBindKey ? 0 : func.length : nativeMax(newData[9] - length, 0);
        if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {
          bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);
        }
        if (!bitmask || bitmask == WRAP_BIND_FLAG) {
          var result = createBind(func, bitmask, thisArg);
        } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {
          result = createCurry(func, bitmask, arity);
        } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {
          result = createPartial(func, bitmask, thisArg, partials);
        } else {
          result = createHybrid.apply(undefined$1, newData);
        }
        var setter = data ? baseSetData : setData;
        return setWrapToString(setter(result, newData), func, bitmask);
      }
      function customDefaultsAssignIn(objValue, srcValue, key, object) {
        if (objValue === undefined$1 || eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key)) {
          return srcValue;
        }
        return objValue;
      }
      function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {
        if (isObject(objValue) && isObject(srcValue)) {
          stack.set(srcValue, objValue);
          baseMerge(objValue, srcValue, undefined$1, customDefaultsMerge, stack);
          stack['delete'](srcValue);
        }
        return objValue;
      }
      function customOmitClone(value) {
        return isPlainObject(value) ? undefined$1 : value;
      }
      function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
        var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          arrLength = array.length,
          othLength = other.length;
        if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
          return false;
        }
        var arrStacked = stack.get(array);
        var othStacked = stack.get(other);
        if (arrStacked && othStacked) {
          return arrStacked == other && othStacked == array;
        }
        var index = -1,
          result = true,
          seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined$1;
        stack.set(array, other);
        stack.set(other, array);
        while (++index < arrLength) {
          var arrValue = array[index],
            othValue = other[index];
          if (customizer) {
            var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
          }
          if (compared !== undefined$1) {
            if (compared) {
              continue;
            }
            result = false;
            break;
          }
          if (seen) {
            if (!arraySome(other, function (othValue, othIndex) {
              if (!cacheHas(seen, othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
                return seen.push(othIndex);
              }
            })) {
              result = false;
              break;
            }
          } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
            result = false;
            break;
          }
        }
        stack['delete'](array);
        stack['delete'](other);
        return result;
      }
      function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
        switch (tag) {
          case dataViewTag:
            if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
              return false;
            }
            object = object.buffer;
            other = other.buffer;
          case arrayBufferTag:
            if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
              return false;
            }
            return true;
          case boolTag:
          case dateTag:
          case numberTag:
            return eq(+object, +other);
          case errorTag:
            return object.name == other.name && object.message == other.message;
          case regexpTag:
          case stringTag:
            return object == other + '';
          case mapTag:
            var convert = mapToArray;
          case setTag:
            var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
            convert || (convert = setToArray);
            if (object.size != other.size && !isPartial) {
              return false;
            }
            var stacked = stack.get(object);
            if (stacked) {
              return stacked == other;
            }
            bitmask |= COMPARE_UNORDERED_FLAG;
            stack.set(object, other);
            var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
            stack['delete'](object);
            return result;
          case symbolTag:
            if (symbolValueOf) {
              return symbolValueOf.call(object) == symbolValueOf.call(other);
            }
        }
        return false;
      }
      function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
        var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          objProps = getAllKeys(object),
          objLength = objProps.length,
          othProps = getAllKeys(other),
          othLength = othProps.length;
        if (objLength != othLength && !isPartial) {
          return false;
        }
        var index = objLength;
        while (index--) {
          var key = objProps[index];
          if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
            return false;
          }
        }
        var objStacked = stack.get(object);
        var othStacked = stack.get(other);
        if (objStacked && othStacked) {
          return objStacked == other && othStacked == object;
        }
        var result = true;
        stack.set(object, other);
        stack.set(other, object);
        var skipCtor = isPartial;
        while (++index < objLength) {
          key = objProps[index];
          var objValue = object[key],
            othValue = other[key];
          if (customizer) {
            var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
          }
          if (!(compared === undefined$1 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
            result = false;
            break;
          }
          skipCtor || (skipCtor = key == 'constructor');
        }
        if (result && !skipCtor) {
          var objCtor = object.constructor,
            othCtor = other.constructor;
          if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor == 'function' && objCtor instanceof objCtor && typeof othCtor == 'function' && othCtor instanceof othCtor)) {
            result = false;
          }
        }
        stack['delete'](object);
        stack['delete'](other);
        return result;
      }
      function flatRest(func) {
        return setToString(overRest(func, undefined$1, flatten), func + '');
      }
      function getAllKeys(object) {
        return baseGetAllKeys(object, keys, getSymbols);
      }
      function getAllKeysIn(object) {
        return baseGetAllKeys(object, keysIn, getSymbolsIn);
      }
      var getData = !metaMap ? noop : function (func) {
        return metaMap.get(func);
      };
      function getFuncName(func) {
        var result = func.name + '',
          array = realNames[result],
          length = hasOwnProperty.call(realNames, result) ? array.length : 0;
        while (length--) {
          var data = array[length],
            otherFunc = data.func;
          if (otherFunc == null || otherFunc == func) {
            return data.name;
          }
        }
        return result;
      }
      function getHolder(func) {
        var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;
        return object.placeholder;
      }
      function getIteratee() {
        var result = lodash.iteratee || iteratee;
        result = result === iteratee ? baseIteratee : result;
        return arguments.length ? result(arguments[0], arguments[1]) : result;
      }
      function getMapData(map, key) {
        var data = map.__data__;
        return isKeyable(key) ? data[typeof key == 'string' ? 'string' : 'hash'] : data.map;
      }
      function getMatchData(object) {
        var result = keys(object),
          length = result.length;
        while (length--) {
          var key = result[length],
            value = object[key];
          result[length] = [key, value, isStrictComparable(value)];
        }
        return result;
      }
      function getNative(object, key) {
        var value = getValue(object, key);
        return baseIsNative(value) ? value : undefined$1;
      }
      function getRawTag(value) {
        var isOwn = hasOwnProperty.call(value, symToStringTag),
          tag = value[symToStringTag];
        try {
          value[symToStringTag] = undefined$1;
          var unmasked = true;
        } catch (e) {}
        var result = nativeObjectToString.call(value);
        if (unmasked) {
          if (isOwn) {
            value[symToStringTag] = tag;
          } else {
            delete value[symToStringTag];
          }
        }
        return result;
      }
      var getSymbols = !nativeGetSymbols ? stubArray : function (object) {
        if (object == null) {
          return [];
        }
        object = Object(object);
        return arrayFilter(nativeGetSymbols(object), function (symbol) {
          return propertyIsEnumerable.call(object, symbol);
        });
      };
      var getSymbolsIn = !nativeGetSymbols ? stubArray : function (object) {
        var result = [];
        while (object) {
          arrayPush(result, getSymbols(object));
          object = getPrototype(object);
        }
        return result;
      };
      var getTag = baseGetTag;
      if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map && getTag(new Map()) != mapTag || Promise && getTag(Promise.resolve()) != promiseTag || Set && getTag(new Set()) != setTag || WeakMap && getTag(new WeakMap()) != weakMapTag) {
        getTag = function (value) {
          var result = baseGetTag(value),
            Ctor = result == objectTag ? value.constructor : undefined$1,
            ctorString = Ctor ? toSource(Ctor) : '';
          if (ctorString) {
            switch (ctorString) {
              case dataViewCtorString:
                return dataViewTag;
              case mapCtorString:
                return mapTag;
              case promiseCtorString:
                return promiseTag;
              case setCtorString:
                return setTag;
              case weakMapCtorString:
                return weakMapTag;
            }
          }
          return result;
        };
      }
      function getView(start, end, transforms) {
        var index = -1,
          length = transforms.length;
        while (++index < length) {
          var data = transforms[index],
            size = data.size;
          switch (data.type) {
            case 'drop':
              start += size;
              break;
            case 'dropRight':
              end -= size;
              break;
            case 'take':
              end = nativeMin(end, start + size);
              break;
            case 'takeRight':
              start = nativeMax(start, end - size);
              break;
          }
        }
        return {
          'start': start,
          'end': end
        };
      }
      function getWrapDetails(source) {
        var match = source.match(reWrapDetails);
        return match ? match[1].split(reSplitDetails) : [];
      }
      function hasPath(object, path, hasFunc) {
        path = castPath(path, object);
        var index = -1,
          length = path.length,
          result = false;
        while (++index < length) {
          var key = toKey(path[index]);
          if (!(result = object != null && hasFunc(object, key))) {
            break;
          }
          object = object[key];
        }
        if (result || ++index != length) {
          return result;
        }
        length = object == null ? 0 : object.length;
        return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));
      }
      function initCloneArray(array) {
        var length = array.length,
          result = new array.constructor(length);
        if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
          result.index = array.index;
          result.input = array.input;
        }
        return result;
      }
      function initCloneObject(object) {
        return typeof object.constructor == 'function' && !isPrototype(object) ? baseCreate(getPrototype(object)) : {};
      }
      function initCloneByTag(object, tag, isDeep) {
        var Ctor = object.constructor;
        switch (tag) {
          case arrayBufferTag:
            return cloneArrayBuffer(object);
          case boolTag:
          case dateTag:
            return new Ctor(+object);
          case dataViewTag:
            return cloneDataView(object, isDeep);
          case float32Tag:
          case float64Tag:
          case int8Tag:
          case int16Tag:
          case int32Tag:
          case uint8Tag:
          case uint8ClampedTag:
          case uint16Tag:
          case uint32Tag:
            return cloneTypedArray(object, isDeep);
          case mapTag:
            return new Ctor();
          case numberTag:
          case stringTag:
            return new Ctor(object);
          case regexpTag:
            return cloneRegExp(object);
          case setTag:
            return new Ctor();
          case symbolTag:
            return cloneSymbol(object);
        }
      }
      function insertWrapDetails(source, details) {
        var length = details.length;
        if (!length) {
          return source;
        }
        var lastIndex = length - 1;
        details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];
        details = details.join(length > 2 ? ', ' : ' ');
        return source.replace(reWrapComment, '{\n/* [wrapped with ' + details + '] */\n');
      }
      function isFlattenable(value) {
        return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
      }
      function isIndex(value, length) {
        var type = typeof value;
        length = length == null ? MAX_SAFE_INTEGER : length;
        return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
      }
      function isIterateeCall(value, index, object) {
        if (!isObject(object)) {
          return false;
        }
        var type = typeof index;
        if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {
          return eq(object[index], value);
        }
        return false;
      }
      function isKey(value, object) {
        if (isArray(value)) {
          return false;
        }
        var type = typeof value;
        if (type == 'number' || type == 'symbol' || type == 'boolean' || value == null || isSymbol(value)) {
          return true;
        }
        return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
      }
      function isKeyable(value) {
        var type = typeof value;
        return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ? value !== '__proto__' : value === null;
      }
      function isLaziable(func) {
        var funcName = getFuncName(func),
          other = lodash[funcName];
        if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {
          return false;
        }
        if (func === other) {
          return true;
        }
        var data = getData(other);
        return !!data && func === data[0];
      }
      function isMasked(func) {
        return !!maskSrcKey && maskSrcKey in func;
      }
      var isMaskable = coreJsData ? isFunction : stubFalse;
      function isPrototype(value) {
        var Ctor = value && value.constructor,
          proto = typeof Ctor == 'function' && Ctor.prototype || objectProto;
        return value === proto;
      }
      function isStrictComparable(value) {
        return value === value && !isObject(value);
      }
      function matchesStrictComparable(key, srcValue) {
        return function (object) {
          if (object == null) {
            return false;
          }
          return object[key] === srcValue && (srcValue !== undefined$1 || key in Object(object));
        };
      }
      function memoizeCapped(func) {
        var result = memoize(func, function (key) {
          if (cache.size === MAX_MEMOIZE_SIZE) {
            cache.clear();
          }
          return key;
        });
        var cache = result.cache;
        return result;
      }
      function mergeData(data, source) {
        var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);
        var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;
        if (!(isCommon || isCombo)) {
          return data;
        }
        if (srcBitmask & WRAP_BIND_FLAG) {
          data[2] = source[2];
          newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
        }
        var value = source[3];
        if (value) {
          var partials = data[3];
          data[3] = partials ? composeArgs(partials, value, source[4]) : value;
          data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
        }
        value = source[5];
        if (value) {
          partials = data[5];
          data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
          data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
        }
        value = source[7];
        if (value) {
          data[7] = value;
        }
        if (srcBitmask & WRAP_ARY_FLAG) {
          data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
        }
        if (data[9] == null) {
          data[9] = source[9];
        }
        data[0] = source[0];
        data[1] = newBitmask;
        return data;
      }
      function nativeKeysIn(object) {
        var result = [];
        if (object != null) {
          for (var key in Object(object)) {
            result.push(key);
          }
        }
        return result;
      }
      function objectToString(value) {
        return nativeObjectToString.call(value);
      }
      function overRest(func, start, transform) {
        start = nativeMax(start === undefined$1 ? func.length - 1 : start, 0);
        return function () {
          var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            array = Array(length);
          while (++index < length) {
            array[index] = args[start + index];
          }
          index = -1;
          var otherArgs = Array(start + 1);
          while (++index < start) {
            otherArgs[index] = args[index];
          }
          otherArgs[start] = transform(array);
          return apply(func, this, otherArgs);
        };
      }
      function parent(object, path) {
        return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
      }
      function reorder(array, indexes) {
        var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = copyArray(array);
        while (length--) {
          var index = indexes[length];
          array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined$1;
        }
        return array;
      }
      function safeGet(object, key) {
        if (key === 'constructor' && typeof object[key] === 'function') {
          return;
        }
        if (key == '__proto__') {
          return;
        }
        return object[key];
      }
      var setData = shortOut(baseSetData);
      var setTimeout = ctxSetTimeout || function (func, wait) {
        return root.setTimeout(func, wait);
      };
      var setToString = shortOut(baseSetToString);
      function setWrapToString(wrapper, reference, bitmask) {
        var source = reference + '';
        return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));
      }
      function shortOut(func) {
        var count = 0,
          lastCalled = 0;
        return function () {
          var stamp = nativeNow(),
            remaining = HOT_SPAN - (stamp - lastCalled);
          lastCalled = stamp;
          if (remaining > 0) {
            if (++count >= HOT_COUNT) {
              return arguments[0];
            }
          } else {
            count = 0;
          }
          return func.apply(undefined$1, arguments);
        };
      }
      function shuffleSelf(array, size) {
        var index = -1,
          length = array.length,
          lastIndex = length - 1;
        size = size === undefined$1 ? length : size;
        while (++index < size) {
          var rand = baseRandom(index, lastIndex),
            value = array[rand];
          array[rand] = array[index];
          array[index] = value;
        }
        array.length = size;
        return array;
      }
      var stringToPath = memoizeCapped(function (string) {
        var result = [];
        if (string.charCodeAt(0) === 46) {
          result.push('');
        }
        string.replace(rePropName, function (match, number, quote, subString) {
          result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);
        });
        return result;
      });
      function toKey(value) {
        if (typeof value == 'string' || isSymbol(value)) {
          return value;
        }
        var result = value + '';
        return result == '0' && 1 / value == -INFINITY ? '-0' : result;
      }
      function toSource(func) {
        if (func != null) {
          try {
            return funcToString.call(func);
          } catch (e) {}
          try {
            return func + '';
          } catch (e) {}
        }
        return '';
      }
      function updateWrapDetails(details, bitmask) {
        arrayEach(wrapFlags, function (pair) {
          var value = '_.' + pair[0];
          if (bitmask & pair[1] && !arrayIncludes(details, value)) {
            details.push(value);
          }
        });
        return details.sort();
      }
      function wrapperClone(wrapper) {
        if (wrapper instanceof LazyWrapper) {
          return wrapper.clone();
        }
        var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);
        result.__actions__ = copyArray(wrapper.__actions__);
        result.__index__ = wrapper.__index__;
        result.__values__ = wrapper.__values__;
        return result;
      }
      function chunk(array, size, guard) {
        if (guard ? isIterateeCall(array, size, guard) : size === undefined$1) {
          size = 1;
        } else {
          size = nativeMax(toInteger(size), 0);
        }
        var length = array == null ? 0 : array.length;
        if (!length || size < 1) {
          return [];
        }
        var index = 0,
          resIndex = 0,
          result = Array(nativeCeil(length / size));
        while (index < length) {
          result[resIndex++] = baseSlice(array, index, index += size);
        }
        return result;
      }
      function compact(array) {
        var index = -1,
          length = array == null ? 0 : array.length,
          resIndex = 0,
          result = [];
        while (++index < length) {
          var value = array[index];
          if (value) {
            result[resIndex++] = value;
          }
        }
        return result;
      }
      function concat() {
        var length = arguments.length;
        if (!length) {
          return [];
        }
        var args = Array(length - 1),
          array = arguments[0],
          index = length;
        while (index--) {
          args[index - 1] = arguments[index];
        }
        return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));
      }
      var difference = baseRest(function (array, values) {
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true)) : [];
      });
      var differenceBy = baseRest(function (array, values) {
        var iteratee = last(values);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2)) : [];
      });
      var differenceWith = baseRest(function (array, values) {
        var comparator = last(values);
        if (isArrayLikeObject(comparator)) {
          comparator = undefined$1;
        }
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined$1, comparator) : [];
      });
      function drop(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        return baseSlice(array, n < 0 ? 0 : n, length);
      }
      function dropRight(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        n = length - n;
        return baseSlice(array, 0, n < 0 ? 0 : n);
      }
      function dropRightWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true, true) : [];
      }
      function dropWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true) : [];
      }
      function fill(array, value, start, end) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
          start = 0;
          end = length;
        }
        return baseFill(array, value, start, end);
      }
      function findIndex(array, predicate, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = fromIndex == null ? 0 : toInteger(fromIndex);
        if (index < 0) {
          index = nativeMax(length + index, 0);
        }
        return baseFindIndex(array, getIteratee(predicate, 3), index);
      }
      function findLastIndex(array, predicate, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = length - 1;
        if (fromIndex !== undefined$1) {
          index = toInteger(fromIndex);
          index = fromIndex < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
        }
        return baseFindIndex(array, getIteratee(predicate, 3), index, true);
      }
      function flatten(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseFlatten(array, 1) : [];
      }
      function flattenDeep(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseFlatten(array, INFINITY) : [];
      }
      function flattenDepth(array, depth) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        depth = depth === undefined$1 ? 1 : toInteger(depth);
        return baseFlatten(array, depth);
      }
      function fromPairs(pairs) {
        var index = -1,
          length = pairs == null ? 0 : pairs.length,
          result = {};
        while (++index < length) {
          var pair = pairs[index];
          result[pair[0]] = pair[1];
        }
        return result;
      }
      function head(array) {
        return array && array.length ? array[0] : undefined$1;
      }
      function indexOf(array, value, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = fromIndex == null ? 0 : toInteger(fromIndex);
        if (index < 0) {
          index = nativeMax(length + index, 0);
        }
        return baseIndexOf(array, value, index);
      }
      function initial(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseSlice(array, 0, -1) : [];
      }
      var intersection = baseRest(function (arrays) {
        var mapped = arrayMap(arrays, castArrayLikeObject);
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
      });
      var intersectionBy = baseRest(function (arrays) {
        var iteratee = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);
        if (iteratee === last(mapped)) {
          iteratee = undefined$1;
        } else {
          mapped.pop();
        }
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, getIteratee(iteratee, 2)) : [];
      });
      var intersectionWith = baseRest(function (arrays) {
        var comparator = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        if (comparator) {
          mapped.pop();
        }
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, undefined$1, comparator) : [];
      });
      function join(array, separator) {
        return array == null ? '' : nativeJoin.call(array, separator);
      }
      function last(array) {
        var length = array == null ? 0 : array.length;
        return length ? array[length - 1] : undefined$1;
      }
      function lastIndexOf(array, value, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = length;
        if (fromIndex !== undefined$1) {
          index = toInteger(fromIndex);
          index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
        }
        return value === value ? strictLastIndexOf(array, value, index) : baseFindIndex(array, baseIsNaN, index, true);
      }
      function nth(array, n) {
        return array && array.length ? baseNth(array, toInteger(n)) : undefined$1;
      }
      var pull = baseRest(pullAll);
      function pullAll(array, values) {
        return array && array.length && values && values.length ? basePullAll(array, values) : array;
      }
      function pullAllBy(array, values, iteratee) {
        return array && array.length && values && values.length ? basePullAll(array, values, getIteratee(iteratee, 2)) : array;
      }
      function pullAllWith(array, values, comparator) {
        return array && array.length && values && values.length ? basePullAll(array, values, undefined$1, comparator) : array;
      }
      var pullAt = flatRest(function (array, indexes) {
        var length = array == null ? 0 : array.length,
          result = baseAt(array, indexes);
        basePullAt(array, arrayMap(indexes, function (index) {
          return isIndex(index, length) ? +index : index;
        }).sort(compareAscending));
        return result;
      });
      function remove(array, predicate) {
        var result = [];
        if (!(array && array.length)) {
          return result;
        }
        var index = -1,
          indexes = [],
          length = array.length;
        predicate = getIteratee(predicate, 3);
        while (++index < length) {
          var value = array[index];
          if (predicate(value, index, array)) {
            result.push(value);
            indexes.push(index);
          }
        }
        basePullAt(array, indexes);
        return result;
      }
      function reverse(array) {
        return array == null ? array : nativeReverse.call(array);
      }
      function slice(array, start, end) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
          start = 0;
          end = length;
        } else {
          start = start == null ? 0 : toInteger(start);
          end = end === undefined$1 ? length : toInteger(end);
        }
        return baseSlice(array, start, end);
      }
      function sortedIndex(array, value) {
        return baseSortedIndex(array, value);
      }
      function sortedIndexBy(array, value, iteratee) {
        return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));
      }
      function sortedIndexOf(array, value) {
        var length = array == null ? 0 : array.length;
        if (length) {
          var index = baseSortedIndex(array, value);
          if (index < length && eq(array[index], value)) {
            return index;
          }
        }
        return -1;
      }
      function sortedLastIndex(array, value) {
        return baseSortedIndex(array, value, true);
      }
      function sortedLastIndexBy(array, value, iteratee) {
        return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);
      }
      function sortedLastIndexOf(array, value) {
        var length = array == null ? 0 : array.length;
        if (length) {
          var index = baseSortedIndex(array, value, true) - 1;
          if (eq(array[index], value)) {
            return index;
          }
        }
        return -1;
      }
      function sortedUniq(array) {
        return array && array.length ? baseSortedUniq(array) : [];
      }
      function sortedUniqBy(array, iteratee) {
        return array && array.length ? baseSortedUniq(array, getIteratee(iteratee, 2)) : [];
      }
      function tail(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseSlice(array, 1, length) : [];
      }
      function take(array, n, guard) {
        if (!(array && array.length)) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        return baseSlice(array, 0, n < 0 ? 0 : n);
      }
      function takeRight(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        n = length - n;
        return baseSlice(array, n < 0 ? 0 : n, length);
      }
      function takeRightWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), false, true) : [];
      }
      function takeWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3)) : [];
      }
      var union = baseRest(function (arrays) {
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));
      });
      var unionBy = baseRest(function (arrays) {
        var iteratee = last(arrays);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));
      });
      var unionWith = baseRest(function (arrays) {
        var comparator = last(arrays);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined$1, comparator);
      });
      function uniq(array) {
        return array && array.length ? baseUniq(array) : [];
      }
      function uniqBy(array, iteratee) {
        return array && array.length ? baseUniq(array, getIteratee(iteratee, 2)) : [];
      }
      function uniqWith(array, comparator) {
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return array && array.length ? baseUniq(array, undefined$1, comparator) : [];
      }
      function unzip(array) {
        if (!(array && array.length)) {
          return [];
        }
        var length = 0;
        array = arrayFilter(array, function (group) {
          if (isArrayLikeObject(group)) {
            length = nativeMax(group.length, length);
            return true;
          }
        });
        return baseTimes(length, function (index) {
          return arrayMap(array, baseProperty(index));
        });
      }
      function unzipWith(array, iteratee) {
        if (!(array && array.length)) {
          return [];
        }
        var result = unzip(array);
        if (iteratee == null) {
          return result;
        }
        return arrayMap(result, function (group) {
          return apply(iteratee, undefined$1, group);
        });
      }
      var without = baseRest(function (array, values) {
        return isArrayLikeObject(array) ? baseDifference(array, values) : [];
      });
      var xor = baseRest(function (arrays) {
        return baseXor(arrayFilter(arrays, isArrayLikeObject));
      });
      var xorBy = baseRest(function (arrays) {
        var iteratee = last(arrays);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));
      });
      var xorWith = baseRest(function (arrays) {
        var comparator = last(arrays);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined$1, comparator);
      });
      var zip = baseRest(unzip);
      function zipObject(props, values) {
        return baseZipObject(props || [], values || [], assignValue);
      }
      function zipObjectDeep(props, values) {
        return baseZipObject(props || [], values || [], baseSet);
      }
      var zipWith = baseRest(function (arrays) {
        var length = arrays.length,
          iteratee = length > 1 ? arrays[length - 1] : undefined$1;
        iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined$1;
        return unzipWith(arrays, iteratee);
      });
      function chain(value) {
        var result = lodash(value);
        result.__chain__ = true;
        return result;
      }
      function tap(value, interceptor) {
        interceptor(value);
        return value;
      }
      function thru(value, interceptor) {
        return interceptor(value);
      }
      var wrapperAt = flatRest(function (paths) {
        var length = paths.length,
          start = length ? paths[0] : 0,
          value = this.__wrapped__,
          interceptor = function (object) {
            return baseAt(object, paths);
          };
        if (length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex(start)) {
          return this.thru(interceptor);
        }
        value = value.slice(start, +start + (length ? 1 : 0));
        value.__actions__.push({
          'func': thru,
          'args': [interceptor],
          'thisArg': undefined$1
        });
        return new LodashWrapper(value, this.__chain__).thru(function (array) {
          if (length && !array.length) {
            array.push(undefined$1);
          }
          return array;
        });
      });
      function wrapperChain() {
        return chain(this);
      }
      function wrapperCommit() {
        return new LodashWrapper(this.value(), this.__chain__);
      }
      function wrapperNext() {
        if (this.__values__ === undefined$1) {
          this.__values__ = toArray(this.value());
        }
        var done = this.__index__ >= this.__values__.length,
          value = done ? undefined$1 : this.__values__[this.__index__++];
        return {
          'done': done,
          'value': value
        };
      }
      function wrapperToIterator() {
        return this;
      }
      function wrapperPlant(value) {
        var result,
          parent = this;
        while (parent instanceof baseLodash) {
          var clone = wrapperClone(parent);
          clone.__index__ = 0;
          clone.__values__ = undefined$1;
          if (result) {
            previous.__wrapped__ = clone;
          } else {
            result = clone;
          }
          var previous = clone;
          parent = parent.__wrapped__;
        }
        previous.__wrapped__ = value;
        return result;
      }
      function wrapperReverse() {
        var value = this.__wrapped__;
        if (value instanceof LazyWrapper) {
          var wrapped = value;
          if (this.__actions__.length) {
            wrapped = new LazyWrapper(this);
          }
          wrapped = wrapped.reverse();
          wrapped.__actions__.push({
            'func': thru,
            'args': [reverse],
            'thisArg': undefined$1
          });
          return new LodashWrapper(wrapped, this.__chain__);
        }
        return this.thru(reverse);
      }
      function wrapperValue() {
        return baseWrapperValue(this.__wrapped__, this.__actions__);
      }
      var countBy = createAggregator(function (result, value, key) {
        if (hasOwnProperty.call(result, key)) {
          ++result[key];
        } else {
          baseAssignValue(result, key, 1);
        }
      });
      function every(collection, predicate, guard) {
        var func = isArray(collection) ? arrayEvery : baseEvery;
        if (guard && isIterateeCall(collection, predicate, guard)) {
          predicate = undefined$1;
        }
        return func(collection, getIteratee(predicate, 3));
      }
      function filter(collection, predicate) {
        var func = isArray(collection) ? arrayFilter : baseFilter;
        return func(collection, getIteratee(predicate, 3));
      }
      var find = createFind(findIndex);
      var findLast = createFind(findLastIndex);
      function flatMap(collection, iteratee) {
        return baseFlatten(map(collection, iteratee), 1);
      }
      function flatMapDeep(collection, iteratee) {
        return baseFlatten(map(collection, iteratee), INFINITY);
      }
      function flatMapDepth(collection, iteratee, depth) {
        depth = depth === undefined$1 ? 1 : toInteger(depth);
        return baseFlatten(map(collection, iteratee), depth);
      }
      function forEach(collection, iteratee) {
        var func = isArray(collection) ? arrayEach : baseEach;
        return func(collection, getIteratee(iteratee, 3));
      }
      function forEachRight(collection, iteratee) {
        var func = isArray(collection) ? arrayEachRight : baseEachRight;
        return func(collection, getIteratee(iteratee, 3));
      }
      var groupBy = createAggregator(function (result, value, key) {
        if (hasOwnProperty.call(result, key)) {
          result[key].push(value);
        } else {
          baseAssignValue(result, key, [value]);
        }
      });
      function includes(collection, value, fromIndex, guard) {
        collection = isArrayLike(collection) ? collection : values(collection);
        fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
        var length = collection.length;
        if (fromIndex < 0) {
          fromIndex = nativeMax(length + fromIndex, 0);
        }
        return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
      }
      var invokeMap = baseRest(function (collection, path, args) {
        var index = -1,
          isFunc = typeof path == 'function',
          result = isArrayLike(collection) ? Array(collection.length) : [];
        baseEach(collection, function (value) {
          result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);
        });
        return result;
      });
      var keyBy = createAggregator(function (result, value, key) {
        baseAssignValue(result, key, value);
      });
      function map(collection, iteratee) {
        var func = isArray(collection) ? arrayMap : baseMap;
        return func(collection, getIteratee(iteratee, 3));
      }
      function orderBy(collection, iteratees, orders, guard) {
        if (collection == null) {
          return [];
        }
        if (!isArray(iteratees)) {
          iteratees = iteratees == null ? [] : [iteratees];
        }
        orders = guard ? undefined$1 : orders;
        if (!isArray(orders)) {
          orders = orders == null ? [] : [orders];
        }
        return baseOrderBy(collection, iteratees, orders);
      }
      var partition = createAggregator(function (result, value, key) {
        result[key ? 0 : 1].push(value);
      }, function () {
        return [[], []];
      });
      function reduce(collection, iteratee, accumulator) {
        var func = isArray(collection) ? arrayReduce : baseReduce,
          initAccum = arguments.length < 3;
        return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);
      }
      function reduceRight(collection, iteratee, accumulator) {
        var func = isArray(collection) ? arrayReduceRight : baseReduce,
          initAccum = arguments.length < 3;
        return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);
      }
      function reject(collection, predicate) {
        var func = isArray(collection) ? arrayFilter : baseFilter;
        return func(collection, negate(getIteratee(predicate, 3)));
      }
      function sample(collection) {
        var func = isArray(collection) ? arraySample : baseSample;
        return func(collection);
      }
      function sampleSize(collection, n, guard) {
        if (guard ? isIterateeCall(collection, n, guard) : n === undefined$1) {
          n = 1;
        } else {
          n = toInteger(n);
        }
        var func = isArray(collection) ? arraySampleSize : baseSampleSize;
        return func(collection, n);
      }
      function shuffle(collection) {
        var func = isArray(collection) ? arrayShuffle : baseShuffle;
        return func(collection);
      }
      function size(collection) {
        if (collection == null) {
          return 0;
        }
        if (isArrayLike(collection)) {
          return isString(collection) ? stringSize(collection) : collection.length;
        }
        var tag = getTag(collection);
        if (tag == mapTag || tag == setTag) {
          return collection.size;
        }
        return baseKeys(collection).length;
      }
      function some(collection, predicate, guard) {
        var func = isArray(collection) ? arraySome : baseSome;
        if (guard && isIterateeCall(collection, predicate, guard)) {
          predicate = undefined$1;
        }
        return func(collection, getIteratee(predicate, 3));
      }
      var sortBy = baseRest(function (collection, iteratees) {
        if (collection == null) {
          return [];
        }
        var length = iteratees.length;
        if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
          iteratees = [];
        } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
          iteratees = [iteratees[0]];
        }
        return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
      });
      var now = ctxNow || function () {
        return root.Date.now();
      };
      function after(n, func) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        n = toInteger(n);
        return function () {
          if (--n < 1) {
            return func.apply(this, arguments);
          }
        };
      }
      function ary(func, n, guard) {
        n = guard ? undefined$1 : n;
        n = func && n == null ? func.length : n;
        return createWrap(func, WRAP_ARY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, n);
      }
      function before(n, func) {
        var result;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        n = toInteger(n);
        return function () {
          if (--n > 0) {
            result = func.apply(this, arguments);
          }
          if (n <= 1) {
            func = undefined$1;
          }
          return result;
        };
      }
      var bind = baseRest(function (func, thisArg, partials) {
        var bitmask = WRAP_BIND_FLAG;
        if (partials.length) {
          var holders = replaceHolders(partials, getHolder(bind));
          bitmask |= WRAP_PARTIAL_FLAG;
        }
        return createWrap(func, bitmask, thisArg, partials, holders);
      });
      var bindKey = baseRest(function (object, key, partials) {
        var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;
        if (partials.length) {
          var holders = replaceHolders(partials, getHolder(bindKey));
          bitmask |= WRAP_PARTIAL_FLAG;
        }
        return createWrap(key, bitmask, object, partials, holders);
      });
      function curry(func, arity, guard) {
        arity = guard ? undefined$1 : arity;
        var result = createWrap(func, WRAP_CURRY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
        result.placeholder = curry.placeholder;
        return result;
      }
      function curryRight(func, arity, guard) {
        arity = guard ? undefined$1 : arity;
        var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
        result.placeholder = curryRight.placeholder;
        return result;
      }
      function debounce(func, wait, options) {
        var lastArgs,
          lastThis,
          maxWait,
          result,
          timerId,
          lastCallTime,
          lastInvokeTime = 0,
          leading = false,
          maxing = false,
          trailing = true;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        wait = toNumber(wait) || 0;
        if (isObject(options)) {
          leading = !!options.leading;
          maxing = 'maxWait' in options;
          maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
          trailing = 'trailing' in options ? !!options.trailing : trailing;
        }
        function invokeFunc(time) {
          var args = lastArgs,
            thisArg = lastThis;
          lastArgs = lastThis = undefined$1;
          lastInvokeTime = time;
          result = func.apply(thisArg, args);
          return result;
        }
        function leadingEdge(time) {
          lastInvokeTime = time;
          timerId = setTimeout(timerExpired, wait);
          return leading ? invokeFunc(time) : result;
        }
        function remainingWait(time) {
          var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime,
            timeWaiting = wait - timeSinceLastCall;
          return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
        }
        function shouldInvoke(time) {
          var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime;
          return lastCallTime === undefined$1 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
        }
        function timerExpired() {
          var time = now();
          if (shouldInvoke(time)) {
            return trailingEdge(time);
          }
          timerId = setTimeout(timerExpired, remainingWait(time));
        }
        function trailingEdge(time) {
          timerId = undefined$1;
          if (trailing && lastArgs) {
            return invokeFunc(time);
          }
          lastArgs = lastThis = undefined$1;
          return result;
        }
        function cancel() {
          if (timerId !== undefined$1) {
            clearTimeout(timerId);
          }
          lastInvokeTime = 0;
          lastArgs = lastCallTime = lastThis = timerId = undefined$1;
        }
        function flush() {
          return timerId === undefined$1 ? result : trailingEdge(now());
        }
        function debounced() {
          var time = now(),
            isInvoking = shouldInvoke(time);
          lastArgs = arguments;
          lastThis = this;
          lastCallTime = time;
          if (isInvoking) {
            if (timerId === undefined$1) {
              return leadingEdge(lastCallTime);
            }
            if (maxing) {
              clearTimeout(timerId);
              timerId = setTimeout(timerExpired, wait);
              return invokeFunc(lastCallTime);
            }
          }
          if (timerId === undefined$1) {
            timerId = setTimeout(timerExpired, wait);
          }
          return result;
        }
        debounced.cancel = cancel;
        debounced.flush = flush;
        return debounced;
      }
      var defer = baseRest(function (func, args) {
        return baseDelay(func, 1, args);
      });
      var delay = baseRest(function (func, wait, args) {
        return baseDelay(func, toNumber(wait) || 0, args);
      });
      function flip(func) {
        return createWrap(func, WRAP_FLIP_FLAG);
      }
      function memoize(func, resolver) {
        if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        var memoized = function () {
          var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;
          if (cache.has(key)) {
            return cache.get(key);
          }
          var result = func.apply(this, args);
          memoized.cache = cache.set(key, result) || cache;
          return result;
        };
        memoized.cache = new (memoize.Cache || MapCache)();
        return memoized;
      }
      memoize.Cache = MapCache;
      function negate(predicate) {
        if (typeof predicate != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        return function () {
          var args = arguments;
          switch (args.length) {
            case 0:
              return !predicate.call(this);
            case 1:
              return !predicate.call(this, args[0]);
            case 2:
              return !predicate.call(this, args[0], args[1]);
            case 3:
              return !predicate.call(this, args[0], args[1], args[2]);
          }
          return !predicate.apply(this, args);
        };
      }
      function once(func) {
        return before(2, func);
      }
      var overArgs = castRest(function (func, transforms) {
        transforms = transforms.length == 1 && isArray(transforms[0]) ? arrayMap(transforms[0], baseUnary(getIteratee())) : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));
        var funcsLength = transforms.length;
        return baseRest(function (args) {
          var index = -1,
            length = nativeMin(args.length, funcsLength);
          while (++index < length) {
            args[index] = transforms[index].call(this, args[index]);
          }
          return apply(func, this, args);
        });
      });
      var partial = baseRest(function (func, partials) {
        var holders = replaceHolders(partials, getHolder(partial));
        return createWrap(func, WRAP_PARTIAL_FLAG, undefined$1, partials, holders);
      });
      var partialRight = baseRest(function (func, partials) {
        var holders = replaceHolders(partials, getHolder(partialRight));
        return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined$1, partials, holders);
      });
      var rearg = flatRest(function (func, indexes) {
        return createWrap(func, WRAP_REARG_FLAG, undefined$1, undefined$1, undefined$1, indexes);
      });
      function rest(func, start) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        start = start === undefined$1 ? start : toInteger(start);
        return baseRest(func, start);
      }
      function spread(func, start) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        start = start == null ? 0 : nativeMax(toInteger(start), 0);
        return baseRest(function (args) {
          var array = args[start],
            otherArgs = castSlice(args, 0, start);
          if (array) {
            arrayPush(otherArgs, array);
          }
          return apply(func, this, otherArgs);
        });
      }
      function throttle(func, wait, options) {
        var leading = true,
          trailing = true;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        if (isObject(options)) {
          leading = 'leading' in options ? !!options.leading : leading;
          trailing = 'trailing' in options ? !!options.trailing : trailing;
        }
        return debounce(func, wait, {
          'leading': leading,
          'maxWait': wait,
          'trailing': trailing
        });
      }
      function unary(func) {
        return ary(func, 1);
      }
      function wrap(value, wrapper) {
        return partial(castFunction(wrapper), value);
      }
      function castArray() {
        if (!arguments.length) {
          return [];
        }
        var value = arguments[0];
        return isArray(value) ? value : [value];
      }
      function clone(value) {
        return baseClone(value, CLONE_SYMBOLS_FLAG);
      }
      function cloneWith(value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);
      }
      function cloneDeep(value) {
        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);
      }
      function cloneDeepWith(value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);
      }
      function conformsTo(object, source) {
        return source == null || baseConformsTo(object, source, keys(source));
      }
      function eq(value, other) {
        return value === other || value !== value && other !== other;
      }
      var gt = createRelationalOperation(baseGt);
      var gte = createRelationalOperation(function (value, other) {
        return value >= other;
      });
      var isArguments = baseIsArguments(function () {
        return arguments;
      }()) ? baseIsArguments : function (value) {
        return isObjectLike(value) && hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
      };
      var isArray = Array.isArray;
      var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;
      function isArrayLike(value) {
        return value != null && isLength(value.length) && !isFunction(value);
      }
      function isArrayLikeObject(value) {
        return isObjectLike(value) && isArrayLike(value);
      }
      function isBoolean(value) {
        return value === true || value === false || isObjectLike(value) && baseGetTag(value) == boolTag;
      }
      var isBuffer = nativeIsBuffer || stubFalse;
      var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;
      function isElement(value) {
        return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);
      }
      function isEmpty(value) {
        if (value == null) {
          return true;
        }
        if (isArrayLike(value) && (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' || isBuffer(value) || isTypedArray(value) || isArguments(value))) {
          return !value.length;
        }
        var tag = getTag(value);
        if (tag == mapTag || tag == setTag) {
          return !value.size;
        }
        if (isPrototype(value)) {
          return !baseKeys(value).length;
        }
        for (var key in value) {
          if (hasOwnProperty.call(value, key)) {
            return false;
          }
        }
        return true;
      }
      function isEqual(value, other) {
        return baseIsEqual(value, other);
      }
      function isEqualWith(value, other, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        var result = customizer ? customizer(value, other) : undefined$1;
        return result === undefined$1 ? baseIsEqual(value, other, undefined$1, customizer) : !!result;
      }
      function isError(value) {
        if (!isObjectLike(value)) {
          return false;
        }
        var tag = baseGetTag(value);
        return tag == errorTag || tag == domExcTag || typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value);
      }
      function isFinite(value) {
        return typeof value == 'number' && nativeIsFinite(value);
      }
      function isFunction(value) {
        if (!isObject(value)) {
          return false;
        }
        var tag = baseGetTag(value);
        return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
      }
      function isInteger(value) {
        return typeof value == 'number' && value == toInteger(value);
      }
      function isLength(value) {
        return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
      }
      function isObject(value) {
        var type = typeof value;
        return value != null && (type == 'object' || type == 'function');
      }
      function isObjectLike(value) {
        return value != null && typeof value == 'object';
      }
      var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;
      function isMatch(object, source) {
        return object === source || baseIsMatch(object, source, getMatchData(source));
      }
      function isMatchWith(object, source, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseIsMatch(object, source, getMatchData(source), customizer);
      }
      function isNaN(value) {
        return isNumber(value) && value != +value;
      }
      function isNative(value) {
        if (isMaskable(value)) {
          throw new Error(CORE_ERROR_TEXT);
        }
        return baseIsNative(value);
      }
      function isNull(value) {
        return value === null;
      }
      function isNil(value) {
        return value == null;
      }
      function isNumber(value) {
        return typeof value == 'number' || isObjectLike(value) && baseGetTag(value) == numberTag;
      }
      function isPlainObject(value) {
        if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
          return false;
        }
        var proto = getPrototype(value);
        if (proto === null) {
          return true;
        }
        var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
        return typeof Ctor == 'function' && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
      }
      var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;
      function isSafeInteger(value) {
        return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;
      }
      var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;
      function isString(value) {
        return typeof value == 'string' || !isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag;
      }
      function isSymbol(value) {
        return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;
      }
      var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
      function isUndefined(value) {
        return value === undefined$1;
      }
      function isWeakMap(value) {
        return isObjectLike(value) && getTag(value) == weakMapTag;
      }
      function isWeakSet(value) {
        return isObjectLike(value) && baseGetTag(value) == weakSetTag;
      }
      var lt = createRelationalOperation(baseLt);
      var lte = createRelationalOperation(function (value, other) {
        return value <= other;
      });
      function toArray(value) {
        if (!value) {
          return [];
        }
        if (isArrayLike(value)) {
          return isString(value) ? stringToArray(value) : copyArray(value);
        }
        if (symIterator && value[symIterator]) {
          return iteratorToArray(value[symIterator]());
        }
        var tag = getTag(value),
          func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;
        return func(value);
      }
      function toFinite(value) {
        if (!value) {
          return value === 0 ? value : 0;
        }
        value = toNumber(value);
        if (value === INFINITY || value === -INFINITY) {
          var sign = value < 0 ? -1 : 1;
          return sign * MAX_INTEGER;
        }
        return value === value ? value : 0;
      }
      function toInteger(value) {
        var result = toFinite(value),
          remainder = result % 1;
        return result === result ? remainder ? result - remainder : result : 0;
      }
      function toLength(value) {
        return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
      }
      function toNumber(value) {
        if (typeof value == 'number') {
          return value;
        }
        if (isSymbol(value)) {
          return NAN;
        }
        if (isObject(value)) {
          var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
          value = isObject(other) ? other + '' : other;
        }
        if (typeof value != 'string') {
          return value === 0 ? value : +value;
        }
        value = baseTrim(value);
        var isBinary = reIsBinary.test(value);
        return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
      }
      function toPlainObject(value) {
        return copyObject(value, keysIn(value));
      }
      function toSafeInteger(value) {
        return value ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER) : value === 0 ? value : 0;
      }
      function toString(value) {
        return value == null ? '' : baseToString(value);
      }
      var assign = createAssigner(function (object, source) {
        if (isPrototype(source) || isArrayLike(source)) {
          copyObject(source, keys(source), object);
          return;
        }
        for (var key in source) {
          if (hasOwnProperty.call(source, key)) {
            assignValue(object, key, source[key]);
          }
        }
      });
      var assignIn = createAssigner(function (object, source) {
        copyObject(source, keysIn(source), object);
      });
      var assignInWith = createAssigner(function (object, source, srcIndex, customizer) {
        copyObject(source, keysIn(source), object, customizer);
      });
      var assignWith = createAssigner(function (object, source, srcIndex, customizer) {
        copyObject(source, keys(source), object, customizer);
      });
      var at = flatRest(baseAt);
      function create(prototype, properties) {
        var result = baseCreate(prototype);
        return properties == null ? result : baseAssign(result, properties);
      }
      var defaults = baseRest(function (object, sources) {
        object = Object(object);
        var index = -1;
        var length = sources.length;
        var guard = length > 2 ? sources[2] : undefined$1;
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          length = 1;
        }
        while (++index < length) {
          var source = sources[index];
          var props = keysIn(source);
          var propsIndex = -1;
          var propsLength = props.length;
          while (++propsIndex < propsLength) {
            var key = props[propsIndex];
            var value = object[key];
            if (value === undefined$1 || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {
              object[key] = source[key];
            }
          }
        }
        return object;
      });
      var defaultsDeep = baseRest(function (args) {
        args.push(undefined$1, customDefaultsMerge);
        return apply(mergeWith, undefined$1, args);
      });
      function findKey(object, predicate) {
        return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);
      }
      function findLastKey(object, predicate) {
        return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);
      }
      function forIn(object, iteratee) {
        return object == null ? object : baseFor(object, getIteratee(iteratee, 3), keysIn);
      }
      function forInRight(object, iteratee) {
        return object == null ? object : baseForRight(object, getIteratee(iteratee, 3), keysIn);
      }
      function forOwn(object, iteratee) {
        return object && baseForOwn(object, getIteratee(iteratee, 3));
      }
      function forOwnRight(object, iteratee) {
        return object && baseForOwnRight(object, getIteratee(iteratee, 3));
      }
      function functions(object) {
        return object == null ? [] : baseFunctions(object, keys(object));
      }
      function functionsIn(object) {
        return object == null ? [] : baseFunctions(object, keysIn(object));
      }
      function get(object, path, defaultValue) {
        var result = object == null ? undefined$1 : baseGet(object, path);
        return result === undefined$1 ? defaultValue : result;
      }
      function has(object, path) {
        return object != null && hasPath(object, path, baseHas);
      }
      function hasIn(object, path) {
        return object != null && hasPath(object, path, baseHasIn);
      }
      var invert = createInverter(function (result, value, key) {
        if (value != null && typeof value.toString != 'function') {
          value = nativeObjectToString.call(value);
        }
        result[value] = key;
      }, constant(identity));
      var invertBy = createInverter(function (result, value, key) {
        if (value != null && typeof value.toString != 'function') {
          value = nativeObjectToString.call(value);
        }
        if (hasOwnProperty.call(result, value)) {
          result[value].push(key);
        } else {
          result[value] = [key];
        }
      }, getIteratee);
      var invoke = baseRest(baseInvoke);
      function keys(object) {
        return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
      }
      function keysIn(object) {
        return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
      }
      function mapKeys(object, iteratee) {
        var result = {};
        iteratee = getIteratee(iteratee, 3);
        baseForOwn(object, function (value, key, object) {
          baseAssignValue(result, iteratee(value, key, object), value);
        });
        return result;
      }
      function mapValues(object, iteratee) {
        var result = {};
        iteratee = getIteratee(iteratee, 3);
        baseForOwn(object, function (value, key, object) {
          baseAssignValue(result, key, iteratee(value, key, object));
        });
        return result;
      }
      var merge = createAssigner(function (object, source, srcIndex) {
        baseMerge(object, source, srcIndex);
      });
      var mergeWith = createAssigner(function (object, source, srcIndex, customizer) {
        baseMerge(object, source, srcIndex, customizer);
      });
      var omit = flatRest(function (object, paths) {
        var result = {};
        if (object == null) {
          return result;
        }
        var isDeep = false;
        paths = arrayMap(paths, function (path) {
          path = castPath(path, object);
          isDeep || (isDeep = path.length > 1);
          return path;
        });
        copyObject(object, getAllKeysIn(object), result);
        if (isDeep) {
          result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
        }
        var length = paths.length;
        while (length--) {
          baseUnset(result, paths[length]);
        }
        return result;
      });
      function omitBy(object, predicate) {
        return pickBy(object, negate(getIteratee(predicate)));
      }
      var pick = flatRest(function (object, paths) {
        return object == null ? {} : basePick(object, paths);
      });
      function pickBy(object, predicate) {
        if (object == null) {
          return {};
        }
        var props = arrayMap(getAllKeysIn(object), function (prop) {
          return [prop];
        });
        predicate = getIteratee(predicate);
        return basePickBy(object, props, function (value, path) {
          return predicate(value, path[0]);
        });
      }
      function result(object, path, defaultValue) {
        path = castPath(path, object);
        var index = -1,
          length = path.length;
        if (!length) {
          length = 1;
          object = undefined$1;
        }
        while (++index < length) {
          var value = object == null ? undefined$1 : object[toKey(path[index])];
          if (value === undefined$1) {
            index = length;
            value = defaultValue;
          }
          object = isFunction(value) ? value.call(object) : value;
        }
        return object;
      }
      function set(object, path, value) {
        return object == null ? object : baseSet(object, path, value);
      }
      function setWith(object, path, value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return object == null ? object : baseSet(object, path, value, customizer);
      }
      var toPairs = createToPairs(keys);
      var toPairsIn = createToPairs(keysIn);
      function transform(object, iteratee, accumulator) {
        var isArr = isArray(object),
          isArrLike = isArr || isBuffer(object) || isTypedArray(object);
        iteratee = getIteratee(iteratee, 4);
        if (accumulator == null) {
          var Ctor = object && object.constructor;
          if (isArrLike) {
            accumulator = isArr ? new Ctor() : [];
          } else if (isObject(object)) {
            accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};
          } else {
            accumulator = {};
          }
        }
        (isArrLike ? arrayEach : baseForOwn)(object, function (value, index, object) {
          return iteratee(accumulator, value, index, object);
        });
        return accumulator;
      }
      function unset(object, path) {
        return object == null ? true : baseUnset(object, path);
      }
      function update(object, path, updater) {
        return object == null ? object : baseUpdate(object, path, castFunction(updater));
      }
      function updateWith(object, path, updater, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);
      }
      function values(object) {
        return object == null ? [] : baseValues(object, keys(object));
      }
      function valuesIn(object) {
        return object == null ? [] : baseValues(object, keysIn(object));
      }
      function clamp(number, lower, upper) {
        if (upper === undefined$1) {
          upper = lower;
          lower = undefined$1;
        }
        if (upper !== undefined$1) {
          upper = toNumber(upper);
          upper = upper === upper ? upper : 0;
        }
        if (lower !== undefined$1) {
          lower = toNumber(lower);
          lower = lower === lower ? lower : 0;
        }
        return baseClamp(toNumber(number), lower, upper);
      }
      function inRange(number, start, end) {
        start = toFinite(start);
        if (end === undefined$1) {
          end = start;
          start = 0;
        } else {
          end = toFinite(end);
        }
        number = toNumber(number);
        return baseInRange(number, start, end);
      }
      function random(lower, upper, floating) {
        if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {
          upper = floating = undefined$1;
        }
        if (floating === undefined$1) {
          if (typeof upper == 'boolean') {
            floating = upper;
            upper = undefined$1;
          } else if (typeof lower == 'boolean') {
            floating = lower;
            lower = undefined$1;
          }
        }
        if (lower === undefined$1 && upper === undefined$1) {
          lower = 0;
          upper = 1;
        } else {
          lower = toFinite(lower);
          if (upper === undefined$1) {
            upper = lower;
            lower = 0;
          } else {
            upper = toFinite(upper);
          }
        }
        if (lower > upper) {
          var temp = lower;
          lower = upper;
          upper = temp;
        }
        if (floating || lower % 1 || upper % 1) {
          var rand = nativeRandom();
          return nativeMin(lower + rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1))), upper);
        }
        return baseRandom(lower, upper);
      }
      var camelCase = createCompounder(function (result, word, index) {
        word = word.toLowerCase();
        return result + (index ? capitalize(word) : word);
      });
      function capitalize(string) {
        return upperFirst(toString(string).toLowerCase());
      }
      function deburr(string) {
        string = toString(string);
        return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');
      }
      function endsWith(string, target, position) {
        string = toString(string);
        target = baseToString(target);
        var length = string.length;
        position = position === undefined$1 ? length : baseClamp(toInteger(position), 0, length);
        var end = position;
        position -= target.length;
        return position >= 0 && string.slice(position, end) == target;
      }
      function escape(string) {
        string = toString(string);
        return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
      }
      function escapeRegExp(string) {
        string = toString(string);
        return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, '\\$&') : string;
      }
      var kebabCase = createCompounder(function (result, word, index) {
        return result + (index ? '-' : '') + word.toLowerCase();
      });
      var lowerCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + word.toLowerCase();
      });
      var lowerFirst = createCaseFirst('toLowerCase');
      function pad(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        if (!length || strLength >= length) {
          return string;
        }
        var mid = (length - strLength) / 2;
        return createPadding(nativeFloor(mid), chars) + string + createPadding(nativeCeil(mid), chars);
      }
      function padEnd(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        return length && strLength < length ? string + createPadding(length - strLength, chars) : string;
      }
      function padStart(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        return length && strLength < length ? createPadding(length - strLength, chars) + string : string;
      }
      function parseInt(string, radix, guard) {
        if (guard || radix == null) {
          radix = 0;
        } else if (radix) {
          radix = +radix;
        }
        return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);
      }
      function repeat(string, n, guard) {
        if (guard ? isIterateeCall(string, n, guard) : n === undefined$1) {
          n = 1;
        } else {
          n = toInteger(n);
        }
        return baseRepeat(toString(string), n);
      }
      function replace() {
        var args = arguments,
          string = toString(args[0]);
        return args.length < 3 ? string : string.replace(args[1], args[2]);
      }
      var snakeCase = createCompounder(function (result, word, index) {
        return result + (index ? '_' : '') + word.toLowerCase();
      });
      function split(string, separator, limit) {
        if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {
          separator = limit = undefined$1;
        }
        limit = limit === undefined$1 ? MAX_ARRAY_LENGTH : limit >>> 0;
        if (!limit) {
          return [];
        }
        string = toString(string);
        if (string && (typeof separator == 'string' || separator != null && !isRegExp(separator))) {
          separator = baseToString(separator);
          if (!separator && hasUnicode(string)) {
            return castSlice(stringToArray(string), 0, limit);
          }
        }
        return string.split(separator, limit);
      }
      var startCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + upperFirst(word);
      });
      function startsWith(string, target, position) {
        string = toString(string);
        position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
        target = baseToString(target);
        return string.slice(position, position + target.length) == target;
      }
      function template(string, options, guard) {
        var settings = lodash.templateSettings;
        if (guard && isIterateeCall(string, options, guard)) {
          options = undefined$1;
        }
        string = toString(string);
        options = assignInWith({}, options, settings, customDefaultsAssignIn);
        var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);
        var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";
        var reDelimiters = RegExp((options.escape || reNoMatch).source + '|' + interpolate.source + '|' + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' + (options.evaluate || reNoMatch).source + '|$', 'g');
        var sourceURL = '//# sourceURL=' + (hasOwnProperty.call(options, 'sourceURL') ? (options.sourceURL + '').replace(/\s/g, ' ') : 'lodash.templateSources[' + ++templateCounter + ']') + '\n';
        string.replace(reDelimiters, function (match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
          interpolateValue || (interpolateValue = esTemplateValue);
          source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);
          if (escapeValue) {
            isEscaping = true;
            source += "' +\n__e(" + escapeValue + ") +\n'";
          }
          if (evaluateValue) {
            isEvaluating = true;
            source += "';\n" + evaluateValue + ";\n__p += '";
          }
          if (interpolateValue) {
            source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
          }
          index = offset + match.length;
          return match;
        });
        source += "';\n";
        var variable = hasOwnProperty.call(options, 'variable') && options.variable;
        if (!variable) {
          source = 'with (obj) {\n' + source + '\n}\n';
        } else if (reForbiddenIdentifierChars.test(variable)) {
          throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);
        }
        source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source).replace(reEmptyStringMiddle, '$1').replace(reEmptyStringTrailing, '$1;');
        source = 'function(' + (variable || 'obj') + ') {\n' + (variable ? '' : 'obj || (obj = {});\n') + "var __t, __p = ''" + (isEscaping ? ', __e = _.escape' : '') + (isEvaluating ? ', __j = Array.prototype.join;\n' + "function print() { __p += __j.call(arguments, '') }\n" : ';\n') + source + 'return __p\n}';
        var result = attempt(function () {
          return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined$1, importsValues);
        });
        result.source = source;
        if (isError(result)) {
          throw result;
        }
        return result;
      }
      function toLower(value) {
        return toString(value).toLowerCase();
      }
      function toUpper(value) {
        return toString(value).toUpperCase();
      }
      function trim(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return baseTrim(string);
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          chrSymbols = stringToArray(chars),
          start = charsStartIndex(strSymbols, chrSymbols),
          end = charsEndIndex(strSymbols, chrSymbols) + 1;
        return castSlice(strSymbols, start, end).join('');
      }
      function trimEnd(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return string.slice(0, trimmedEndIndex(string) + 1);
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;
        return castSlice(strSymbols, 0, end).join('');
      }
      function trimStart(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return string.replace(reTrimStart, '');
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          start = charsStartIndex(strSymbols, stringToArray(chars));
        return castSlice(strSymbols, start).join('');
      }
      function truncate(string, options) {
        var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;
        if (isObject(options)) {
          var separator = 'separator' in options ? options.separator : separator;
          length = 'length' in options ? toInteger(options.length) : length;
          omission = 'omission' in options ? baseToString(options.omission) : omission;
        }
        string = toString(string);
        var strLength = string.length;
        if (hasUnicode(string)) {
          var strSymbols = stringToArray(string);
          strLength = strSymbols.length;
        }
        if (length >= strLength) {
          return string;
        }
        var end = length - stringSize(omission);
        if (end < 1) {
          return omission;
        }
        var result = strSymbols ? castSlice(strSymbols, 0, end).join('') : string.slice(0, end);
        if (separator === undefined$1) {
          return result + omission;
        }
        if (strSymbols) {
          end += result.length - end;
        }
        if (isRegExp(separator)) {
          if (string.slice(end).search(separator)) {
            var match,
              substring = result;
            if (!separator.global) {
              separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');
            }
            separator.lastIndex = 0;
            while (match = separator.exec(substring)) {
              var newEnd = match.index;
            }
            result = result.slice(0, newEnd === undefined$1 ? end : newEnd);
          }
        } else if (string.indexOf(baseToString(separator), end) != end) {
          var index = result.lastIndexOf(separator);
          if (index > -1) {
            result = result.slice(0, index);
          }
        }
        return result + omission;
      }
      function unescape(string) {
        string = toString(string);
        return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;
      }
      var upperCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + word.toUpperCase();
      });
      var upperFirst = createCaseFirst('toUpperCase');
      function words(string, pattern, guard) {
        string = toString(string);
        pattern = guard ? undefined$1 : pattern;
        if (pattern === undefined$1) {
          return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);
        }
        return string.match(pattern) || [];
      }
      var attempt = baseRest(function (func, args) {
        try {
          return apply(func, undefined$1, args);
        } catch (e) {
          return isError(e) ? e : new Error(e);
        }
      });
      var bindAll = flatRest(function (object, methodNames) {
        arrayEach(methodNames, function (key) {
          key = toKey(key);
          baseAssignValue(object, key, bind(object[key], object));
        });
        return object;
      });
      function cond(pairs) {
        var length = pairs == null ? 0 : pairs.length,
          toIteratee = getIteratee();
        pairs = !length ? [] : arrayMap(pairs, function (pair) {
          if (typeof pair[1] != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          return [toIteratee(pair[0]), pair[1]];
        });
        return baseRest(function (args) {
          var index = -1;
          while (++index < length) {
            var pair = pairs[index];
            if (apply(pair[0], this, args)) {
              return apply(pair[1], this, args);
            }
          }
        });
      }
      function conforms(source) {
        return baseConforms(baseClone(source, CLONE_DEEP_FLAG));
      }
      function constant(value) {
        return function () {
          return value;
        };
      }
      function defaultTo(value, defaultValue) {
        return value == null || value !== value ? defaultValue : value;
      }
      var flow = createFlow();
      var flowRight = createFlow(true);
      function identity(value) {
        return value;
      }
      function iteratee(func) {
        return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));
      }
      function matches(source) {
        return baseMatches(baseClone(source, CLONE_DEEP_FLAG));
      }
      function matchesProperty(path, srcValue) {
        return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));
      }
      var method = baseRest(function (path, args) {
        return function (object) {
          return baseInvoke(object, path, args);
        };
      });
      var methodOf = baseRest(function (object, args) {
        return function (path) {
          return baseInvoke(object, path, args);
        };
      });
      function mixin(object, source, options) {
        var props = keys(source),
          methodNames = baseFunctions(source, props);
        if (options == null && !(isObject(source) && (methodNames.length || !props.length))) {
          options = source;
          source = object;
          object = this;
          methodNames = baseFunctions(source, keys(source));
        }
        var chain = !(isObject(options) && 'chain' in options) || !!options.chain,
          isFunc = isFunction(object);
        arrayEach(methodNames, function (methodName) {
          var func = source[methodName];
          object[methodName] = func;
          if (isFunc) {
            object.prototype[methodName] = function () {
              var chainAll = this.__chain__;
              if (chain || chainAll) {
                var result = object(this.__wrapped__),
                  actions = result.__actions__ = copyArray(this.__actions__);
                actions.push({
                  'func': func,
                  'args': arguments,
                  'thisArg': object
                });
                result.__chain__ = chainAll;
                return result;
              }
              return func.apply(object, arrayPush([this.value()], arguments));
            };
          }
        });
        return object;
      }
      function noConflict() {
        if (root._ === this) {
          root._ = oldDash;
        }
        return this;
      }
      function noop() {}
      function nthArg(n) {
        n = toInteger(n);
        return baseRest(function (args) {
          return baseNth(args, n);
        });
      }
      var over = createOver(arrayMap);
      var overEvery = createOver(arrayEvery);
      var overSome = createOver(arraySome);
      function property(path) {
        return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
      }
      function propertyOf(object) {
        return function (path) {
          return object == null ? undefined$1 : baseGet(object, path);
        };
      }
      var range = createRange();
      var rangeRight = createRange(true);
      function stubArray() {
        return [];
      }
      function stubFalse() {
        return false;
      }
      function stubObject() {
        return {};
      }
      function stubString() {
        return '';
      }
      function stubTrue() {
        return true;
      }
      function times(n, iteratee) {
        n = toInteger(n);
        if (n < 1 || n > MAX_SAFE_INTEGER) {
          return [];
        }
        var index = MAX_ARRAY_LENGTH,
          length = nativeMin(n, MAX_ARRAY_LENGTH);
        iteratee = getIteratee(iteratee);
        n -= MAX_ARRAY_LENGTH;
        var result = baseTimes(length, iteratee);
        while (++index < n) {
          iteratee(index);
        }
        return result;
      }
      function toPath(value) {
        if (isArray(value)) {
          return arrayMap(value, toKey);
        }
        return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));
      }
      function uniqueId(prefix) {
        var id = ++idCounter;
        return toString(prefix) + id;
      }
      var add = createMathOperation(function (augend, addend) {
        return augend + addend;
      }, 0);
      var ceil = createRound('ceil');
      var divide = createMathOperation(function (dividend, divisor) {
        return dividend / divisor;
      }, 1);
      var floor = createRound('floor');
      function max(array) {
        return array && array.length ? baseExtremum(array, identity, baseGt) : undefined$1;
      }
      function maxBy(array, iteratee) {
        return array && array.length ? baseExtremum(array, getIteratee(iteratee, 2), baseGt) : undefined$1;
      }
      function mean(array) {
        return baseMean(array, identity);
      }
      function meanBy(array, iteratee) {
        return baseMean(array, getIteratee(iteratee, 2));
      }
      function min(array) {
        return array && array.length ? baseExtremum(array, identity, baseLt) : undefined$1;
      }
      function minBy(array, iteratee) {
        return array && array.length ? baseExtremum(array, getIteratee(iteratee, 2), baseLt) : undefined$1;
      }
      var multiply = createMathOperation(function (multiplier, multiplicand) {
        return multiplier * multiplicand;
      }, 1);
      var round = createRound('round');
      var subtract = createMathOperation(function (minuend, subtrahend) {
        return minuend - subtrahend;
      }, 0);
      function sum(array) {
        return array && array.length ? baseSum(array, identity) : 0;
      }
      function sumBy(array, iteratee) {
        return array && array.length ? baseSum(array, getIteratee(iteratee, 2)) : 0;
      }
      lodash.after = after;
      lodash.ary = ary;
      lodash.assign = assign;
      lodash.assignIn = assignIn;
      lodash.assignInWith = assignInWith;
      lodash.assignWith = assignWith;
      lodash.at = at;
      lodash.before = before;
      lodash.bind = bind;
      lodash.bindAll = bindAll;
      lodash.bindKey = bindKey;
      lodash.castArray = castArray;
      lodash.chain = chain;
      lodash.chunk = chunk;
      lodash.compact = compact;
      lodash.concat = concat;
      lodash.cond = cond;
      lodash.conforms = conforms;
      lodash.constant = constant;
      lodash.countBy = countBy;
      lodash.create = create;
      lodash.curry = curry;
      lodash.curryRight = curryRight;
      lodash.debounce = debounce;
      lodash.defaults = defaults;
      lodash.defaultsDeep = defaultsDeep;
      lodash.defer = defer;
      lodash.delay = delay;
      lodash.difference = difference;
      lodash.differenceBy = differenceBy;
      lodash.differenceWith = differenceWith;
      lodash.drop = drop;
      lodash.dropRight = dropRight;
      lodash.dropRightWhile = dropRightWhile;
      lodash.dropWhile = dropWhile;
      lodash.fill = fill;
      lodash.filter = filter;
      lodash.flatMap = flatMap;
      lodash.flatMapDeep = flatMapDeep;
      lodash.flatMapDepth = flatMapDepth;
      lodash.flatten = flatten;
      lodash.flattenDeep = flattenDeep;
      lodash.flattenDepth = flattenDepth;
      lodash.flip = flip;
      lodash.flow = flow;
      lodash.flowRight = flowRight;
      lodash.fromPairs = fromPairs;
      lodash.functions = functions;
      lodash.functionsIn = functionsIn;
      lodash.groupBy = groupBy;
      lodash.initial = initial;
      lodash.intersection = intersection;
      lodash.intersectionBy = intersectionBy;
      lodash.intersectionWith = intersectionWith;
      lodash.invert = invert;
      lodash.invertBy = invertBy;
      lodash.invokeMap = invokeMap;
      lodash.iteratee = iteratee;
      lodash.keyBy = keyBy;
      lodash.keys = keys;
      lodash.keysIn = keysIn;
      lodash.map = map;
      lodash.mapKeys = mapKeys;
      lodash.mapValues = mapValues;
      lodash.matches = matches;
      lodash.matchesProperty = matchesProperty;
      lodash.memoize = memoize;
      lodash.merge = merge;
      lodash.mergeWith = mergeWith;
      lodash.method = method;
      lodash.methodOf = methodOf;
      lodash.mixin = mixin;
      lodash.negate = negate;
      lodash.nthArg = nthArg;
      lodash.omit = omit;
      lodash.omitBy = omitBy;
      lodash.once = once;
      lodash.orderBy = orderBy;
      lodash.over = over;
      lodash.overArgs = overArgs;
      lodash.overEvery = overEvery;
      lodash.overSome = overSome;
      lodash.partial = partial;
      lodash.partialRight = partialRight;
      lodash.partition = partition;
      lodash.pick = pick;
      lodash.pickBy = pickBy;
      lodash.property = property;
      lodash.propertyOf = propertyOf;
      lodash.pull = pull;
      lodash.pullAll = pullAll;
      lodash.pullAllBy = pullAllBy;
      lodash.pullAllWith = pullAllWith;
      lodash.pullAt = pullAt;
      lodash.range = range;
      lodash.rangeRight = rangeRight;
      lodash.rearg = rearg;
      lodash.reject = reject;
      lodash.remove = remove;
      lodash.rest = rest;
      lodash.reverse = reverse;
      lodash.sampleSize = sampleSize;
      lodash.set = set;
      lodash.setWith = setWith;
      lodash.shuffle = shuffle;
      lodash.slice = slice;
      lodash.sortBy = sortBy;
      lodash.sortedUniq = sortedUniq;
      lodash.sortedUniqBy = sortedUniqBy;
      lodash.split = split;
      lodash.spread = spread;
      lodash.tail = tail;
      lodash.take = take;
      lodash.takeRight = takeRight;
      lodash.takeRightWhile = takeRightWhile;
      lodash.takeWhile = takeWhile;
      lodash.tap = tap;
      lodash.throttle = throttle;
      lodash.thru = thru;
      lodash.toArray = toArray;
      lodash.toPairs = toPairs;
      lodash.toPairsIn = toPairsIn;
      lodash.toPath = toPath;
      lodash.toPlainObject = toPlainObject;
      lodash.transform = transform;
      lodash.unary = unary;
      lodash.union = union;
      lodash.unionBy = unionBy;
      lodash.unionWith = unionWith;
      lodash.uniq = uniq;
      lodash.uniqBy = uniqBy;
      lodash.uniqWith = uniqWith;
      lodash.unset = unset;
      lodash.unzip = unzip;
      lodash.unzipWith = unzipWith;
      lodash.update = update;
      lodash.updateWith = updateWith;
      lodash.values = values;
      lodash.valuesIn = valuesIn;
      lodash.without = without;
      lodash.words = words;
      lodash.wrap = wrap;
      lodash.xor = xor;
      lodash.xorBy = xorBy;
      lodash.xorWith = xorWith;
      lodash.zip = zip;
      lodash.zipObject = zipObject;
      lodash.zipObjectDeep = zipObjectDeep;
      lodash.zipWith = zipWith;
      lodash.entries = toPairs;
      lodash.entriesIn = toPairsIn;
      lodash.extend = assignIn;
      lodash.extendWith = assignInWith;
      mixin(lodash, lodash);
      lodash.add = add;
      lodash.attempt = attempt;
      lodash.camelCase = camelCase;
      lodash.capitalize = capitalize;
      lodash.ceil = ceil;
      lodash.clamp = clamp;
      lodash.clone = clone;
      lodash.cloneDeep = cloneDeep;
      lodash.cloneDeepWith = cloneDeepWith;
      lodash.cloneWith = cloneWith;
      lodash.conformsTo = conformsTo;
      lodash.deburr = deburr;
      lodash.defaultTo = defaultTo;
      lodash.divide = divide;
      lodash.endsWith = endsWith;
      lodash.eq = eq;
      lodash.escape = escape;
      lodash.escapeRegExp = escapeRegExp;
      lodash.every = every;
      lodash.find = find;
      lodash.findIndex = findIndex;
      lodash.findKey = findKey;
      lodash.findLast = findLast;
      lodash.findLastIndex = findLastIndex;
      lodash.findLastKey = findLastKey;
      lodash.floor = floor;
      lodash.forEach = forEach;
      lodash.forEachRight = forEachRight;
      lodash.forIn = forIn;
      lodash.forInRight = forInRight;
      lodash.forOwn = forOwn;
      lodash.forOwnRight = forOwnRight;
      lodash.get = get;
      lodash.gt = gt;
      lodash.gte = gte;
      lodash.has = has;
      lodash.hasIn = hasIn;
      lodash.head = head;
      lodash.identity = identity;
      lodash.includes = includes;
      lodash.indexOf = indexOf;
      lodash.inRange = inRange;
      lodash.invoke = invoke;
      lodash.isArguments = isArguments;
      lodash.isArray = isArray;
      lodash.isArrayBuffer = isArrayBuffer;
      lodash.isArrayLike = isArrayLike;
      lodash.isArrayLikeObject = isArrayLikeObject;
      lodash.isBoolean = isBoolean;
      lodash.isBuffer = isBuffer;
      lodash.isDate = isDate;
      lodash.isElement = isElement;
      lodash.isEmpty = isEmpty;
      lodash.isEqual = isEqual;
      lodash.isEqualWith = isEqualWith;
      lodash.isError = isError;
      lodash.isFinite = isFinite;
      lodash.isFunction = isFunction;
      lodash.isInteger = isInteger;
      lodash.isLength = isLength;
      lodash.isMap = isMap;
      lodash.isMatch = isMatch;
      lodash.isMatchWith = isMatchWith;
      lodash.isNaN = isNaN;
      lodash.isNative = isNative;
      lodash.isNil = isNil;
      lodash.isNull = isNull;
      lodash.isNumber = isNumber;
      lodash.isObject = isObject;
      lodash.isObjectLike = isObjectLike;
      lodash.isPlainObject = isPlainObject;
      lodash.isRegExp = isRegExp;
      lodash.isSafeInteger = isSafeInteger;
      lodash.isSet = isSet;
      lodash.isString = isString;
      lodash.isSymbol = isSymbol;
      lodash.isTypedArray = isTypedArray;
      lodash.isUndefined = isUndefined;
      lodash.isWeakMap = isWeakMap;
      lodash.isWeakSet = isWeakSet;
      lodash.join = join;
      lodash.kebabCase = kebabCase;
      lodash.last = last;
      lodash.lastIndexOf = lastIndexOf;
      lodash.lowerCase = lowerCase;
      lodash.lowerFirst = lowerFirst;
      lodash.lt = lt;
      lodash.lte = lte;
      lodash.max = max;
      lodash.maxBy = maxBy;
      lodash.mean = mean;
      lodash.meanBy = meanBy;
      lodash.min = min;
      lodash.minBy = minBy;
      lodash.stubArray = stubArray;
      lodash.stubFalse = stubFalse;
      lodash.stubObject = stubObject;
      lodash.stubString = stubString;
      lodash.stubTrue = stubTrue;
      lodash.multiply = multiply;
      lodash.nth = nth;
      lodash.noConflict = noConflict;
      lodash.noop = noop;
      lodash.now = now;
      lodash.pad = pad;
      lodash.padEnd = padEnd;
      lodash.padStart = padStart;
      lodash.parseInt = parseInt;
      lodash.random = random;
      lodash.reduce = reduce;
      lodash.reduceRight = reduceRight;
      lodash.repeat = repeat;
      lodash.replace = replace;
      lodash.result = result;
      lodash.round = round;
      lodash.runInContext = runInContext;
      lodash.sample = sample;
      lodash.size = size;
      lodash.snakeCase = snakeCase;
      lodash.some = some;
      lodash.sortedIndex = sortedIndex;
      lodash.sortedIndexBy = sortedIndexBy;
      lodash.sortedIndexOf = sortedIndexOf;
      lodash.sortedLastIndex = sortedLastIndex;
      lodash.sortedLastIndexBy = sortedLastIndexBy;
      lodash.sortedLastIndexOf = sortedLastIndexOf;
      lodash.startCase = startCase;
      lodash.startsWith = startsWith;
      lodash.subtract = subtract;
      lodash.sum = sum;
      lodash.sumBy = sumBy;
      lodash.template = template;
      lodash.times = times;
      lodash.toFinite = toFinite;
      lodash.toInteger = toInteger;
      lodash.toLength = toLength;
      lodash.toLower = toLower;
      lodash.toNumber = toNumber;
      lodash.toSafeInteger = toSafeInteger;
      lodash.toString = toString;
      lodash.toUpper = toUpper;
      lodash.trim = trim;
      lodash.trimEnd = trimEnd;
      lodash.trimStart = trimStart;
      lodash.truncate = truncate;
      lodash.unescape = unescape;
      lodash.uniqueId = uniqueId;
      lodash.upperCase = upperCase;
      lodash.upperFirst = upperFirst;
      lodash.each = forEach;
      lodash.eachRight = forEachRight;
      lodash.first = head;
      mixin(lodash, function () {
        var source = {};
        baseForOwn(lodash, function (func, methodName) {
          if (!hasOwnProperty.call(lodash.prototype, methodName)) {
            source[methodName] = func;
          }
        });
        return source;
      }(), {
        'chain': false
      });
      lodash.VERSION = VERSION;
      arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function (methodName) {
        lodash[methodName].placeholder = lodash;
      });
      arrayEach(['drop', 'take'], function (methodName, index) {
        LazyWrapper.prototype[methodName] = function (n) {
          n = n === undefined$1 ? 1 : nativeMax(toInteger(n), 0);
          var result = this.__filtered__ && !index ? new LazyWrapper(this) : this.clone();
          if (result.__filtered__) {
            result.__takeCount__ = nativeMin(n, result.__takeCount__);
          } else {
            result.__views__.push({
              'size': nativeMin(n, MAX_ARRAY_LENGTH),
              'type': methodName + (result.__dir__ < 0 ? 'Right' : '')
            });
          }
          return result;
        };
        LazyWrapper.prototype[methodName + 'Right'] = function (n) {
          return this.reverse()[methodName](n).reverse();
        };
      });
      arrayEach(['filter', 'map', 'takeWhile'], function (methodName, index) {
        var type = index + 1,
          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;
        LazyWrapper.prototype[methodName] = function (iteratee) {
          var result = this.clone();
          result.__iteratees__.push({
            'iteratee': getIteratee(iteratee, 3),
            'type': type
          });
          result.__filtered__ = result.__filtered__ || isFilter;
          return result;
        };
      });
      arrayEach(['head', 'last'], function (methodName, index) {
        var takeName = 'take' + (index ? 'Right' : '');
        LazyWrapper.prototype[methodName] = function () {
          return this[takeName](1).value()[0];
        };
      });
      arrayEach(['initial', 'tail'], function (methodName, index) {
        var dropName = 'drop' + (index ? '' : 'Right');
        LazyWrapper.prototype[methodName] = function () {
          return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
        };
      });
      LazyWrapper.prototype.compact = function () {
        return this.filter(identity);
      };
      LazyWrapper.prototype.find = function (predicate) {
        return this.filter(predicate).head();
      };
      LazyWrapper.prototype.findLast = function (predicate) {
        return this.reverse().find(predicate);
      };
      LazyWrapper.prototype.invokeMap = baseRest(function (path, args) {
        if (typeof path == 'function') {
          return new LazyWrapper(this);
        }
        return this.map(function (value) {
          return baseInvoke(value, path, args);
        });
      });
      LazyWrapper.prototype.reject = function (predicate) {
        return this.filter(negate(getIteratee(predicate)));
      };
      LazyWrapper.prototype.slice = function (start, end) {
        start = toInteger(start);
        var result = this;
        if (result.__filtered__ && (start > 0 || end < 0)) {
          return new LazyWrapper(result);
        }
        if (start < 0) {
          result = result.takeRight(-start);
        } else if (start) {
          result = result.drop(start);
        }
        if (end !== undefined$1) {
          end = toInteger(end);
          result = end < 0 ? result.dropRight(-end) : result.take(end - start);
        }
        return result;
      };
      LazyWrapper.prototype.takeRightWhile = function (predicate) {
        return this.reverse().takeWhile(predicate).reverse();
      };
      LazyWrapper.prototype.toArray = function () {
        return this.take(MAX_ARRAY_LENGTH);
      };
      baseForOwn(LazyWrapper.prototype, function (func, methodName) {
        var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),
          isTaker = /^(?:head|last)$/.test(methodName),
          lodashFunc = lodash[isTaker ? 'take' + (methodName == 'last' ? 'Right' : '') : methodName],
          retUnwrapped = isTaker || /^find/.test(methodName);
        if (!lodashFunc) {
          return;
        }
        lodash.prototype[methodName] = function () {
          var value = this.__wrapped__,
            args = isTaker ? [1] : arguments,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);
          var interceptor = function (value) {
            var result = lodashFunc.apply(lodash, arrayPush([value], args));
            return isTaker && chainAll ? result[0] : result;
          };
          if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
            isLazy = useLazy = false;
          }
          var chainAll = this.__chain__,
            isHybrid = !!this.__actions__.length,
            isUnwrapped = retUnwrapped && !chainAll,
            onlyLazy = isLazy && !isHybrid;
          if (!retUnwrapped && useLazy) {
            value = onlyLazy ? value : new LazyWrapper(this);
            var result = func.apply(value, args);
            result.__actions__.push({
              'func': thru,
              'args': [interceptor],
              'thisArg': undefined$1
            });
            return new LodashWrapper(result, chainAll);
          }
          if (isUnwrapped && onlyLazy) {
            return func.apply(this, args);
          }
          result = this.thru(interceptor);
          return isUnwrapped ? isTaker ? result.value()[0] : result.value() : result;
        };
      });
      arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function (methodName) {
        var func = arrayProto[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:pop|shift)$/.test(methodName);
        lodash.prototype[methodName] = function () {
          var args = arguments;
          if (retUnwrapped && !this.__chain__) {
            var value = this.value();
            return func.apply(isArray(value) ? value : [], args);
          }
          return this[chainName](function (value) {
            return func.apply(isArray(value) ? value : [], args);
          });
        };
      });
      baseForOwn(LazyWrapper.prototype, function (func, methodName) {
        var lodashFunc = lodash[methodName];
        if (lodashFunc) {
          var key = lodashFunc.name + '';
          if (!hasOwnProperty.call(realNames, key)) {
            realNames[key] = [];
          }
          realNames[key].push({
            'name': methodName,
            'func': lodashFunc
          });
        }
      });
      realNames[createHybrid(undefined$1, WRAP_BIND_KEY_FLAG).name] = [{
        'name': 'wrapper',
        'func': undefined$1
      }];
      LazyWrapper.prototype.clone = lazyClone;
      LazyWrapper.prototype.reverse = lazyReverse;
      LazyWrapper.prototype.value = lazyValue;
      lodash.prototype.at = wrapperAt;
      lodash.prototype.chain = wrapperChain;
      lodash.prototype.commit = wrapperCommit;
      lodash.prototype.next = wrapperNext;
      lodash.prototype.plant = wrapperPlant;
      lodash.prototype.reverse = wrapperReverse;
      lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;
      lodash.prototype.first = lodash.prototype.head;
      if (symIterator) {
        lodash.prototype[symIterator] = wrapperToIterator;
      }
      return lodash;
    };
    var _ = runInContext();
    if (freeModule) {
      (freeModule.exports = _)._ = _;
      freeExports._ = _;
    } else {
      root._ = _;
    }
  }).call(commonjsGlobal);
});

const WSApplication = _ref => {
  var _application$connecti, _application$property, _application$property2, _application$property3, _application$property4, _application$property5, _application$property6;
  let {
    application
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  let encodeApplicationNo = encodeURI(application.applicationNo);
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_MYCONNECTIONS_APPLICATION_NO"),
    note: application === null || application === void 0 ? void 0 : application.applicationNo
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_SERVICE_NAME"),
    note: t("WS_APPLICATION_TYPE_" + (application === null || application === void 0 ? void 0 : application.applicationType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_CONSUMER_NAME"),
    note: (application === null || application === void 0 ? void 0 : (_application$connecti = application.connectionHolders) === null || _application$connecti === void 0 ? void 0 : _application$connecti.map(owner => owner.name).join(",")) || (application === null || application === void 0 ? void 0 : (_application$property = application.property) === null || _application$property === void 0 ? void 0 : (_application$property2 = _application$property.owners) === null || _application$property2 === void 0 ? void 0 : _application$property2.map(owner => owner.name).join(",")) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_PROPERTY_ID"),
    note: (application === null || application === void 0 ? void 0 : application.propertyId) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_STATUS"),
    note: t("CS_" + (application === null || application === void 0 ? void 0 : application.applicationStatus)) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_SLA"),
    note: Math.round((application === null || application === void 0 ? void 0 : application.sla) / (24 * 60 * 60 * 1000)) ? Math.round((application === null || application === void 0 ? void 0 : application.sla) / (24 * 60 * 60 * 1000)) + " Days" : t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_PROPERTY_ADDRESS"),
    note: getAddress(application === null || application === void 0 ? void 0 : (_application$property3 = application.property) === null || _application$property3 === void 0 ? void 0 : _application$property3.address, t),
    privacy: {
      uuid: application === null || application === void 0 ? void 0 : (_application$property4 = application.property) === null || _application$property4 === void 0 ? void 0 : (_application$property5 = _application$property4.owners) === null || _application$property5 === void 0 ? void 0 : (_application$property6 = _application$property5[0]) === null || _application$property6 === void 0 ? void 0 : _application$property6.uuid,
      fieldName: ["doorNo", "street", "landmark"],
      model: "Property",
      showValue: true,
      loadData: {
        serviceName: "/property-services/property/_search",
        requestBody: {},
        requestParam: {
          tenantId: application === null || application === void 0 ? void 0 : application.tenantId,
          propertyIds: application === null || application === void 0 ? void 0 : application.propertyId
        },
        jsonPath: "Properties[0].address.street",
        isArray: false,
        d: res => {
          let resultString = (lodash.get(res, "Properties[0].address.doorNo") ? lodash.get(res, "Properties[0].address.doorNo") + ", " : "") + (lodash.get(res, "Properties[0].address.street") ? lodash.get(res, "Properties[0].address.street") + ", " : "") + (lodash.get(res, "Properties[0].address.landmark") ? "" + lodash.get(res, "Properties[0].address.landmark") : "");
          return resultString;
        }
      }
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/connection/application/" + encodeApplicationNo
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_VIEW_DETAILS_LABEL")
  })));
};

const EyeSvgINdex = _ref => {
  let {
    style
  } = _ref;
  return /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement("svg", {
    style: {
      ...style
    },
    display: "inline",
    width: "22",
    height: "16",
    viewBox: "0 0 22 16",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",
    fill: "#a82227"
  })));
};
const WSInfoLabel = _ref2 => {
  let {
    t,
    config,
    onSelect,
    userType,
    formData
  } = _ref2;
  userType = userType || Digit.SessionStorage.get("userType");
  const isMobile = window.Digit.Utils.browser.isMobile();
  let isPrivacyEnabled = sessionStorage.getItem("isPrivacyEnabled");
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, isPrivacyEnabled === "true" && /*#__PURE__*/React__default.createElement("div", {
    style: userType === "citizen" ? {
      maxWidth: "970px"
    } : isMobile ? {} : {
      width: "80%"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "info-banner-wrap",
    style: window.location.href.includes("/connection-details") ? {
      color: "#3498DB",
      margin: "0px"
    } : {
      color: "#3498DB"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoBannerIcon, null), /*#__PURE__*/React__default.createElement("h2", {
    style: {
      color: "#3498DB"
    }
  }, t("CS_FILE_APPLICATION_INFO_LABEL"))), t("WS_CLICK_ON_LABEL") + " ", /*#__PURE__*/React__default.createElement(EyeSvgINdex, {
    style: {
      display: "inline",
      marginBottom: "5px"
    }
  }), " " + t("WS_CLICK_ON_INFO_LABEL"))));
};

const WSMyApplications = () => {
  var _Digit$SessionStorage, _user$info, _user$info2, _user$info3, _data$WaterConnection, _SWdata$SewerageConne, _data$WaterConnection2, _SWdata$SewerageConne2, _WSapplicationsList, _SWapplicationsList, _WSapplicationsList2, _SWapplicationsList2, _applicationsList, _applicationsList2;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  let filter = window.location.href.split("/").pop();
  let filter1 = !isNaN(parseInt(filter)) ? {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info2 = user.info) === null || _user$info2 === void 0 ? void 0 : _user$info2.mobileNumber
  } : {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info3 = user.info) === null || _user$info3 === void 0 ? void 0 : _user$info3.mobileNumber
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1
  }, {
    filters: filter1
  });
  const {
    isLoading: isSWLoading,
    isError: isSWError,
    error: SWerror,
    data: SWdata
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: "SW"
  }, {
    filters: filter1
  });
  let applicationNoWS = data && (data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection.map(ob => ob.applicationNo).join(",")) || "";
  let applicaionNoSW = SWdata && (SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne = SWdata.SewerageConnections) === null || _SWdata$SewerageConne === void 0 ? void 0 : _SWdata$SewerageConne.map(ob => ob.applicationNo).join(",")) || "";
  let applicationNos = applicationNoWS.concat(applicaionNoSW);
  let workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId,
    id: applicationNos,
    moduleCode: "WS,SW",
    config: {
      enabled: !!applicationNos
    }
  });
  let propertyWS = data && (data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2.map(ob => ob === null || ob === void 0 ? void 0 : ob.propertyId).join(",")) || "";
  let propertySW = SWdata && (SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne2 = SWdata.SewerageConnections) === null || _SWdata$SewerageConne2 === void 0 ? void 0 : _SWdata$SewerageConne2.map(ob => ob === null || ob === void 0 ? void 0 : ob.propertyId).join(",")) || "";
  let propertyNos = propertyWS.concat(propertySW);
  const {
    isLoading: PTisLoading,
    isError: PTisError,
    error: PTerror,
    data: PTdata
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyNos
    }
  }, {
    filters: {
      propertyIds: propertyNos
    },
    enabled: propertyNos ? true : false
  });
  if (isLoading || isSWLoading || PTisLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  let {
    WaterConnection: WSapplicationsList
  } = data || {};
  let {
    SewerageConnections: SWapplicationsList
  } = SWdata || {};
  WSapplicationsList = (_WSapplicationsList = WSapplicationsList) === null || _WSapplicationsList === void 0 ? void 0 : _WSapplicationsList.map(ob => {
    var _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3;
    return {
      ...ob,
      "sla": workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.processInstances) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.filter(pi => pi.businessId == ob.applicationNo)[0]) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.businesssServiceSla
    };
  });
  SWapplicationsList = (_SWapplicationsList = SWapplicationsList) === null || _SWapplicationsList === void 0 ? void 0 : _SWapplicationsList.map(ob => {
    var _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6;
    return {
      ...ob,
      "sla": workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data4 = workflowDetails.data) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4.processInstances) === null || _workflowDetails$data5 === void 0 ? void 0 : (_workflowDetails$data6 = _workflowDetails$data5.filter(pi => pi.businessId == ob.applicationNo)[0]) === null || _workflowDetails$data6 === void 0 ? void 0 : _workflowDetails$data6.businesssServiceSla
    };
  });
  WSapplicationsList = (_WSapplicationsList2 = WSapplicationsList) === null || _WSapplicationsList2 === void 0 ? void 0 : _WSapplicationsList2.filter(ob => (ob === null || ob === void 0 ? void 0 : ob.applicationType) !== "MODIFY_WATER_CONNECTION");
  SWapplicationsList = (_SWapplicationsList2 = SWapplicationsList) === null || _SWapplicationsList2 === void 0 ? void 0 : _SWapplicationsList2.filter(ob => (ob === null || ob === void 0 ? void 0 : ob.applicationType) !== "MODIFY_SEWERAGE_CONNECTION");
  let applicationsList = WSapplicationsList.concat(SWapplicationsList);
  applicationsList = applicationsList && applicationsList.map(ob => {
    var _PTdata$Properties;
    return {
      ...ob,
      property: PTdata === null || PTdata === void 0 ? void 0 : (_PTdata$Properties = PTdata.Properties) === null || _PTdata$Properties === void 0 ? void 0 : _PTdata$Properties.filter(pt => (pt === null || pt === void 0 ? void 0 : pt.propertyId) === (ob === null || ob === void 0 ? void 0 : ob.propertyId))[0]
    };
  });
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("CS_HOME_MY_APPLICATIONS") + " " + (applicationsList ? "(" + applicationsList.length + ")" : "")), /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement("div", null, ((_applicationsList = applicationsList) === null || _applicationsList === void 0 ? void 0 : _applicationsList.length) > 0 && applicationsList.sort((a, b) => {
    var _b$auditDetails, _a$auditDetails;
    return ((_b$auditDetails = b.auditDetails) === null || _b$auditDetails === void 0 ? void 0 : _b$auditDetails.lastModifiedTime) - ((_a$auditDetails = a.auditDetails) === null || _a$auditDetails === void 0 ? void 0 : _a$auditDetails.lastModifiedTime);
  }).map((application, index) => /*#__PURE__*/React__default.createElement("div", {
    key: index
  }, /*#__PURE__*/React__default.createElement(WSApplication, {
    application: application
  }))), !((_applicationsList2 = applicationsList) !== null && _applicationsList2 !== void 0 && _applicationsList2.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_NO_APPLICATION_FOUND_MSG"))));
};

const App = _ref => {
  var _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi, _Digit3, _Digit3$ComponentRegi, _Digit4, _Digit4$ComponentRegi, _Digit5, _Digit5$ComponentRegi, _Digit6, _Digit6$ComponentRegi, _Digit7, _Digit7$ComponentRegi, _Digit8, _Digit8$ComponentRegi, _Digit9, _Digit9$ComponentRegi, _Digit10, _Digit10$ComponentReg, _Digit11, _Digit11$ComponentReg, _Digit12, _Digit12$ComponentReg, _Digit13, _Digit13$ComponentReg, _Digit14, _Digit14$ComponentReg;
  let {
    path
  } = _ref;
  const location = reactRouterDom.useLocation();
  const {
    t
  } = reactI18next.useTranslation();
  let isCommonPTPropertyScreen = window.location.href.includes("/ws/create-application/property-details");
  let isAcknowledgement = window.location.href.includes("/acknowledgement") || window.location.href.includes("/disconnect-acknowledge");
  const WSDisconnectAcknowledgement = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent("WSDisconnectAcknowledgement");
  const getBackPageNumber = () => {
    let goBacktoFromProperty = -1;
    if (sessionStorage.getItem("VisitedCommonPTSearch") === "true" && isCommonPTPropertyScreen) {
      goBacktoFromProperty = -4;
      return goBacktoFromProperty;
    }
    return goBacktoFromProperty;
  };
  const WSCreate = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent("WSCreate");
  const WSDisconnection = (_Digit3 = Digit) === null || _Digit3 === void 0 ? void 0 : (_Digit3$ComponentRegi = _Digit3.ComponentRegistryService) === null || _Digit3$ComponentRegi === void 0 ? void 0 : _Digit3$ComponentRegi.getComponent("WSDisconnection");
  const WSSearchConnectionComponent = (_Digit4 = Digit) === null || _Digit4 === void 0 ? void 0 : (_Digit4$ComponentRegi = _Digit4.ComponentRegistryService) === null || _Digit4$ComponentRegi === void 0 ? void 0 : _Digit4$ComponentRegi.getComponent("WSSearchConnectionComponent");
  const WSSearchResultsComponent = (_Digit5 = Digit) === null || _Digit5 === void 0 ? void 0 : (_Digit5$ComponentRegi = _Digit5.ComponentRegistryService) === null || _Digit5$ComponentRegi === void 0 ? void 0 : _Digit5$ComponentRegi.getComponent("WSSearchResultsComponent");
  const WSCitizenApplicationDetails = (_Digit6 = Digit) === null || _Digit6 === void 0 ? void 0 : (_Digit6$ComponentRegi = _Digit6.ComponentRegistryService) === null || _Digit6$ComponentRegi === void 0 ? void 0 : _Digit6$ComponentRegi.getComponent("WSCitizenApplicationDetails");
  const WSAdditionalDetails = (_Digit7 = Digit) === null || _Digit7 === void 0 ? void 0 : (_Digit7$ComponentRegi = _Digit7.ComponentRegistryService) === null || _Digit7$ComponentRegi === void 0 ? void 0 : _Digit7$ComponentRegi.getComponent("WSAdditionalDetails");
  const WSCitizenConnectionDetails = (_Digit8 = Digit) === null || _Digit8 === void 0 ? void 0 : (_Digit8$ComponentRegi = _Digit8.ComponentRegistryService) === null || _Digit8$ComponentRegi === void 0 ? void 0 : _Digit8$ComponentRegi.getComponent("WSCitizenConnectionDetails");
  const WSCitizenConsumptionDetails = (_Digit9 = Digit) === null || _Digit9 === void 0 ? void 0 : (_Digit9$ComponentRegi = _Digit9.ComponentRegistryService) === null || _Digit9$ComponentRegi === void 0 ? void 0 : _Digit9$ComponentRegi.getComponent("WSCitizenConsumptionDetails");
  const WSMyPayments = (_Digit10 = Digit) === null || _Digit10 === void 0 ? void 0 : (_Digit10$ComponentReg = _Digit10.ComponentRegistryService) === null || _Digit10$ComponentReg === void 0 ? void 0 : _Digit10$ComponentReg.getComponent("WSMyPayments");
  const WSCitizenEditApplication = (_Digit11 = Digit) === null || _Digit11 === void 0 ? void 0 : (_Digit11$ComponentReg = _Digit11.ComponentRegistryService) === null || _Digit11$ComponentReg === void 0 ? void 0 : _Digit11$ComponentReg.getComponent("WSCitizenEditApplication");
  const WSReSubmitDisconnectionApplication = (_Digit12 = Digit) === null || _Digit12 === void 0 ? void 0 : (_Digit12$ComponentReg = _Digit12.ComponentRegistryService) === null || _Digit12$ComponentReg === void 0 ? void 0 : _Digit12$ComponentReg.getComponent("WSReSubmitDisconnectionApplication");
  const WSMyConnections = (_Digit13 = Digit) === null || _Digit13 === void 0 ? void 0 : (_Digit13$ComponentReg = _Digit13.ComponentRegistryService) === null || _Digit13$ComponentReg === void 0 ? void 0 : _Digit13$ComponentReg.getComponent("WSMyConnections");
  const WNSMyBillsComponent = (_Digit14 = Digit) === null || _Digit14 === void 0 ? void 0 : (_Digit14$ComponentReg = _Digit14.ComponentRegistryService) === null || _Digit14$ComponentReg === void 0 ? void 0 : _Digit14$ComponentReg.getComponent("WNSMyBillsComponent");
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "ws-citizen-wrapper"
  }, !isAcknowledgement && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    },
    getBackPageNumber: getBackPageNumber
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/create-application",
    component: WSCreate
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/disconnect-application",
    component: WSDisconnection
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/disconnect-acknowledge",
    component: WSDisconnectAcknowledgement
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/resubmit-disconnect-application",
    component: WSReSubmitDisconnectionApplication
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/search",
    component: WSSearchConnectionComponent
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/my-bills",
    component: WNSMyBillsComponent
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/search-results",
    component: WSSearchResultsComponent
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/test-acknowledgment",
    component: TestAcknowledgment
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/my-payments",
    component: WSMyPayments
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/my-applications",
    component: WSMyApplications
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/my-connections",
    component: WSMyConnections
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/connection/application/:acknowledgementIds",
    component: WSCitizenApplicationDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/connection/additional/:acknowledgementIds",
    component: WSAdditionalDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/connection/details/:acknowledgementIds",
    component: WSCitizenConnectionDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/consumption/details",
    component: WSCitizenConsumptionDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edit-application/:tenantId",
    component: WSCitizenEditApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/modify-connection/:tenantId",
    component: WSCitizenEditApplication
  }))));
};

function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

const getPropertyAddress = property => {
  var _property$locality;
  const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
  const street = property === null || property === void 0 ? void 0 : property.street;
  const landMark = property === null || property === void 0 ? void 0 : property.landmark;
  const locality = property === null || property === void 0 ? void 0 : (_property$locality = property.locality) === null || _property$locality === void 0 ? void 0 : _property$locality.name;
  const city = property === null || property === void 0 ? void 0 : property.city;
  const pinCode = property === null || property === void 0 ? void 0 : property.pincode;
  const formattedAddress = "" + (doorNo ? doorNo + ", " : "") + (street ? street + ", " : "") + (landMark ? landMark + ", " : "") + (locality ? locality + ", " : "") + (city ? city : "") + (pinCode ? ", " + pinCode : "");
  return formattedAddress;
};
const getPropertyDetails = (application, t) => {
  var _application$owners2, _owners$map;
  const owners = (application === null || application === void 0 ? void 0 : (_application$owners2 = application.owners) === null || _application$owners2 === void 0 ? void 0 : _application$owners2.filter(owner => owner.active == true)) || [];
  const names = owners === null || owners === void 0 ? void 0 : (_owners$map = owners.map(owner => owner.name)) === null || _owners$map === void 0 ? void 0 : _owners$map.join(",");
  return {
    title: t("WS_COMMON_PROPERTY_DETAILS"),
    values: [{
      title: t("WS_PROPERTY_ID_LABEL"),
      value: t("" + (application === null || application === void 0 ? void 0 : application.propertyId)) || t("CS_NA")
    }, {
      title: t("WS_OWN_DETAIL_NAME"),
      value: names || t("CS_NA")
    }, {
      title: t("WS_PROPERTY_ADDRESS_LABEL"),
      value: getPropertyAddress(application === null || application === void 0 ? void 0 : application.address) || t("CS_NA")
    }]
  };
};
const getConnectionDetails = (application, t) => {
  return {
    title: t("WS_COMMON_CONNECTION_DETAILS"),
    values: (application === null || application === void 0 ? void 0 : application.applicationType) == "NEW_WATER_CONNECTION" ? [{
      title: t("WS_APPLY_FOR"),
      value: t(application === null || application === void 0 ? void 0 : application.applicationType) || t("CS_NA")
    }, {
      title: t("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),
      value: (application === null || application === void 0 ? void 0 : application.proposedTaps) || t("CS_NA")
    }, {
      title: t("WS_TASK_DETAILS_CONN_DETAIL_PIPE_SIZE_PROPOSED"),
      value: (application === null || application === void 0 ? void 0 : application.proposedPipeSize) || t("CS_NA")
    }] : [{
      title: t("WS_APPLY_FOR"),
      value: t(application === null || application === void 0 ? void 0 : application.applicationType) || t("CS_NA")
    }, {
      title: t("WS_NO_WATER_CLOSETS_LABEL"),
      value: (application === null || application === void 0 ? void 0 : application.proposedWaterClosets) || t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
      value: (application === null || application === void 0 ? void 0 : application.proposedToilets) || t("CS_NA")
    }]
  };
};
const getConnectionHolderDetails = (owner, t) => {
  var _owner$connectionHold, _owner$connectionHold2, _owner$connectionHold3, _owner$connectionHold4, _owner$connectionHold5, _owner$connectionHold6, _owner$connectionHold7, _owner$connectionHold8, _owner$connectionHold9;
  return {
    title: t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),
    values: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold = owner.connectionHolders) === null || _owner$connectionHold === void 0 ? void 0 : _owner$connectionHold.length) > 0 ? [{
      title: t("WS_OWN_DETAIL_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold2 = owner.connectionHolders) === null || _owner$connectionHold2 === void 0 ? void 0 : (_owner$connectionHold3 = _owner$connectionHold2[0]) === null || _owner$connectionHold3 === void 0 ? void 0 : _owner$connectionHold3.name) || t("CS_NA")
    }, {
      title: t("CORE_COMMON_MOBILE_NUMBER"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold4 = owner.connectionHolders) === null || _owner$connectionHold4 === void 0 ? void 0 : (_owner$connectionHold5 = _owner$connectionHold4[0]) === null || _owner$connectionHold5 === void 0 ? void 0 : _owner$connectionHold5.mobileNumber) || t("CS_NA")
    }, {
      title: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold6 = owner.connectionHolders) === null || _owner$connectionHold6 === void 0 ? void 0 : (_owner$connectionHold7 = _owner$connectionHold6[0]) === null || _owner$connectionHold7 === void 0 ? void 0 : _owner$connectionHold7.fatherOrHusbandName) || t("CS_NA")
    }, {
      title: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold8 = owner.connectionHolders) === null || _owner$connectionHold8 === void 0 ? void 0 : (_owner$connectionHold9 = _owner$connectionHold8[0]) === null || _owner$connectionHold9 === void 0 ? void 0 : _owner$connectionHold9.correspondenceAddress) || t("CS_NA")
    }] : [{
      title: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
      value: t("SCORE_YES") || t("CS_NA")
    }]
  };
};
const getHeaderDetails = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$applicat, _application$auditDet, _application$auditDet2, _application$addition6;
      let values = [];
      if (application !== null && application !== void 0 && application.applicationNo) values.push({
        title: t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.applicationNo
      });
      if (application !== null && application !== void 0 && application.connectionNo) values.push({
        title: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.connectionNo
      });
      return {
        title: "",
        email: "",
        phoneNumber: "",
        isHeader: true,
        typeOfApplication: application !== null && application !== void 0 && (_application$applicat = application.applicationNo) !== null && _application$applicat !== void 0 && _application$applicat.includes("SW") ? t("WS_NEW_SEWERAGE_CONNECTION") : t("WS_COMMON_INBOX_NEWWS1"),
        date: (application !== null && application !== void 0 && (_application$auditDet = application.auditDetails) !== null && _application$auditDet !== void 0 && _application$auditDet.createdTime ? Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$auditDet2 = application.auditDetails) === null || _application$auditDet2 === void 0 ? void 0 : _application$auditDet2.createdTime) : Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$addition6 = application.additionalDetails) === null || _application$addition6 === void 0 ? void 0 : _application$addition6.appCreatedDate)) || "NA",
        values: values,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getDocumentDetails = (application, t) => {
  const documents = application === null || application === void 0 ? void 0 : application.documents;
  return {
    title: t("WS_COMMON_DOCUMENTS_DETAILS"),
    isAttachments: true,
    values: documents === null || documents === void 0 ? void 0 : documents.map(doc => t(doc === null || doc === void 0 ? void 0 : doc.documentType))
  };
};
const getWSAcknowledgementData = function (application, property, tenantInfo, t) {
  try {
    var _application$tradeLic23, _application$tradeLic24;
    function _temp2() {
      return Promise.resolve(getHeaderDetails(application, t, tenantInfo)).then(function (header) {
        return {
          t: t,
          tenantId: tenantInfo,
          title: "PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",
          name: "" + t("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),
          email: "",
          phoneNumber: "",
          headerDetails: [header],
          details: [getPropertyDetails(property, t), getConnectionHolderDetails(application, t), getConnectionDetails(application, t), getDocumentDetails(application, t)]
        };
      });
    }
    const filesArray = application === null || application === void 0 ? void 0 : (_application$tradeLic23 = application.tradeLicenseDetail) === null || _application$tradeLic23 === void 0 ? void 0 : (_application$tradeLic24 = _application$tradeLic23.applicationDocuments) === null || _application$tradeLic24 === void 0 ? void 0 : _application$tradeLic24.map(value => value === null || value === void 0 ? void 0 : value.fileStoreId);
    let res;
    const _temp = function () {
      if (filesArray) {
        return Promise.resolve(Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId())).then(function (_Digit$UploadServices) {
          res = _Digit$UploadServices;
        });
      }
    }();
    return Promise.resolve(_temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp));
  } catch (e) {
    return Promise.reject(e);
  }
};

const compare = (newVal, oldVal, t) => {
  return oldVal === newVal ? t("WS_NO_CHANGE") : oldVal;
};
const getPropertyAddress$1 = property => {
  var _property$locality;
  const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
  const street = property === null || property === void 0 ? void 0 : property.street;
  const landMark = property === null || property === void 0 ? void 0 : property.landmark;
  const locality = property === null || property === void 0 ? void 0 : (_property$locality = property.locality) === null || _property$locality === void 0 ? void 0 : _property$locality.name;
  const city = property === null || property === void 0 ? void 0 : property.city;
  const pinCode = property === null || property === void 0 ? void 0 : property.pincode;
  const formattedAddress = "" + (doorNo ? doorNo + ", " : "") + (street ? street + ", " : "") + (landMark ? landMark + ", " : "") + (locality ? locality + ", " : "") + (city ? city : "") + (pinCode ? ", " + pinCode : "");
  return formattedAddress;
};
const getPropertyDetails$1 = (application, oldApplication, t) => {
  var _application$owners, _owners$map, _oldApplication$owner, _oldOwners$map;
  const owners = (application === null || application === void 0 ? void 0 : (_application$owners = application.owners) === null || _application$owners === void 0 ? void 0 : _application$owners.filter(owner => owner.active == true)) || [];
  const names = owners === null || owners === void 0 ? void 0 : (_owners$map = owners.map(owner => owner.name)) === null || _owners$map === void 0 ? void 0 : _owners$map.join(",");
  const oldOwners = (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$owner = oldApplication.owners) === null || _oldApplication$owner === void 0 ? void 0 : _oldApplication$owner.filter(owner => owner.active == true)) || [];
  const oldNames = oldOwners === null || oldOwners === void 0 ? void 0 : (_oldOwners$map = oldOwners.map(owner => owner.name)) === null || _oldOwners$map === void 0 ? void 0 : _oldOwners$map.join(",");
  const changeInNames = !(oldNames === names);
  return {
    title: [t("WS_COMMON_PROPERTY_DETAILS"), t("WS_CURRENT_VALUE"), t("WS_OLD_VALUE")],
    values: [{
      val1: t("WS_PROPERTY_ID_LABEL"),
      val2: t("" + (application === null || application === void 0 ? void 0 : application.propertyId)) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : application.propertyId, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.propertyId, t)
    }, {
      val1: t("WS_OWN_DETAIL_NAME"),
      val2: names || t("CS_NA"),
      val3: changeInNames ? oldNames : t("WS_NO_CHANGE")
    }, {
      val1: t("WS_PROPERTY_ADDRESS_LABEL"),
      val2: getPropertyAddress$1(application === null || application === void 0 ? void 0 : application.address) || t("CS_NA"),
      val3: changeInNames ? getPropertyAddress$1(oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.address) : t("WS_NO_CHANGE")
    }]
  };
};
const getConnectionDetails$1 = (application, oldApplication, t) => {
  var _application$addition, _application$addition2, _oldApplication$addit;
  return {
    title: [t("WS_COMMON_CONNECTION_DETAILS"), t(""), t("")],
    values: (application === null || application === void 0 ? void 0 : application.applicationType) == "MODIFY_WATER_CONNECTION" ? [{
      val1: t("WS_SERV_DETAIL_CONN_TYPE"),
      val2: application === null || application === void 0 ? void 0 : application.connectionType,
      val3: compare(application === null || application === void 0 ? void 0 : application.connectionType, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.connectionType, t)
    }, {
      val1: t("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),
      val2: (application === null || application === void 0 ? void 0 : application.noOfTaps) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : application.noOfTaps, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.noOfTaps, t)
    }, {
      val1: t("WS_TASK_DETAILS_CONN_DETAIL_PIPE_SIZE_PROPOSED"),
      val2: (application === null || application === void 0 ? void 0 : application.pipeSize) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : application.pipeSize, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.pipeSize, t)
    }, {
      val1: t("WS_SERV_DETAIL_WATER_SOURCE"),
      val2: t("WS_SERVICES_MASTERS_WATERSOURCE_" + (application === null || application === void 0 ? void 0 : application.waterSource.split(".")[0])),
      val3: compare(t("WS_SERVICES_MASTERS_WATERSOURCE_" + (application === null || application === void 0 ? void 0 : application.waterSource.split(".")[0])), t("WS_SERVICES_MASTERS_WATERSOURCE_" + (oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.waterSource.split(".")[0])), t)
    }, {
      val1: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
      val2: t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(application === null || application === void 0 ? void 0 : application.waterSource, ".", "_")),
      val3: compare(t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(application === null || application === void 0 ? void 0 : application.waterSource, ".", "_")), t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.waterSource, ".", "_")), t)
    }, {
      val1: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
      val2: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.connectionExecutionDate),
      val3: compare(application === null || application === void 0 ? void 0 : application.connectionExecutionDate, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.connectionExecutionDate, t) !== t("WS_NO_CHANGE") ? convertEpochToDateDMY(compare(application === null || application === void 0 ? void 0 : application.connectionExecutionDate, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.connectionExecutionDate, t)) : t("WS_NO_CHANGE")
    }, {
      val1: t("WS_SERV_DETAIL_METER_ID"),
      val2: application === null || application === void 0 ? void 0 : application.meterId,
      val3: compare(application === null || application === void 0 ? void 0 : application.meterId, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.meterId, t)
    }, {
      val1: t("WS_ADDN_DETAIL_METER_INSTALL_DATE"),
      val2: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.meterInstallationDate),
      val3: compare(convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.meterInstallationDate), convertEpochToDateDMY(oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.meterInstallationDate), t)
    }, {
      val1: t("WS_INITIAL_METER_READING_LABEL"),
      val2: (application === null || application === void 0 ? void 0 : (_application$addition = application.additionalDetails) === null || _application$addition === void 0 ? void 0 : _application$addition.initialMeterReading) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : (_application$addition2 = application.additionalDetails) === null || _application$addition2 === void 0 ? void 0 : _application$addition2.initialMeterReading, oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$addit = oldApplication.additionalDetails) === null || _oldApplication$addit === void 0 ? void 0 : _oldApplication$addit.initialMeterReading, t)
    }, {
      val1: t("WS_MODIFICATIONS_EFFECTIVE_DATE"),
      val2: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom),
      val3: compare(convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom), convertEpochToDateDMY(oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.dateEffectiveFrom), t)
    }] : [{
      val1: t("WS_SERV_DETAIL_CONN_TYPE"),
      val2: application === null || application === void 0 ? void 0 : application.connectionType,
      val3: compare(application === null || application === void 0 ? void 0 : application.connectionType, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.connectionType, t)
    }, {
      val1: t("WS_NO_WATER_CLOSETS_LABEL"),
      val2: (application === null || application === void 0 ? void 0 : application.noOfWaterClosets) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : application.noOfWaterClosets, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.noOfWaterClosets, t)
    }, {
      val1: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
      val2: (application === null || application === void 0 ? void 0 : application.noOfToilets) || t("CS_NA"),
      val3: compare(application === null || application === void 0 ? void 0 : application.noOfToilets, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.noOfToilets, t)
    }, {
      val1: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
      val2: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.connectionExecutionDate),
      val3: compare(application === null || application === void 0 ? void 0 : application.connectionExecutionDate, oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.connectionExecutionDate, t)
    }, {
      val1: t("WS_MODIFICATIONS_EFFECTIVE_DATE"),
      val2: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom),
      val3: compare(convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom), convertEpochToDateDMY(oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.dateEffectiveFrom), t)
    }]
  };
};
const getConnectionHolderDetails$1 = (application, oldApplication, t) => {
  var _oldApplication$conne, _application$connecti;
  const oldOwnerExist = (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne = oldApplication.connectionHolders) === null || _oldApplication$conne === void 0 ? void 0 : _oldApplication$conne.length) > 0;
  const newOwnerExist = (application === null || application === void 0 ? void 0 : (_application$connecti = application.connectionHolders) === null || _application$connecti === void 0 ? void 0 : _application$connecti.length) > 0;
  if (oldOwnerExist && newOwnerExist) {
    var _application$connecti2, _application$connecti3, _application$connecti4, _application$connecti5, _oldApplication$conne2, _oldApplication$conne3, _application$connecti6, _application$connecti7, _application$connecti8, _application$connecti9, _oldApplication$conne4, _oldApplication$conne5, _application$connecti10, _application$connecti11, _application$connecti12, _application$connecti13, _oldApplication$conne6, _oldApplication$conne7, _application$connecti14, _application$connecti15, _application$connecti16, _application$connecti17, _oldApplication$conne8, _oldApplication$conne9;
    return {
      title: [t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"), t(""), t("")],
      values: [{
        val1: t("WS_OWN_DETAIL_NAME"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti2 = application.connectionHolders) === null || _application$connecti2 === void 0 ? void 0 : (_application$connecti3 = _application$connecti2[0]) === null || _application$connecti3 === void 0 ? void 0 : _application$connecti3.name) || t("CS_NA"),
        val3: compare(application === null || application === void 0 ? void 0 : (_application$connecti4 = application.connectionHolders) === null || _application$connecti4 === void 0 ? void 0 : (_application$connecti5 = _application$connecti4[0]) === null || _application$connecti5 === void 0 ? void 0 : _application$connecti5.name, oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne2 = oldApplication.connectionHolders) === null || _oldApplication$conne2 === void 0 ? void 0 : (_oldApplication$conne3 = _oldApplication$conne2[0]) === null || _oldApplication$conne3 === void 0 ? void 0 : _oldApplication$conne3.name, t)
      }, {
        val1: t("CORE_COMMON_MOBILE_NUMBER"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti6 = application.connectionHolders) === null || _application$connecti6 === void 0 ? void 0 : (_application$connecti7 = _application$connecti6[0]) === null || _application$connecti7 === void 0 ? void 0 : _application$connecti7.mobileNumber) || t("CS_NA"),
        val3: compare(application === null || application === void 0 ? void 0 : (_application$connecti8 = application.connectionHolders) === null || _application$connecti8 === void 0 ? void 0 : (_application$connecti9 = _application$connecti8[0]) === null || _application$connecti9 === void 0 ? void 0 : _application$connecti9.mobileNumber, oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne4 = oldApplication.connectionHolders) === null || _oldApplication$conne4 === void 0 ? void 0 : (_oldApplication$conne5 = _oldApplication$conne4[0]) === null || _oldApplication$conne5 === void 0 ? void 0 : _oldApplication$conne5.mobileNumber, t)
      }, {
        val1: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti10 = application.connectionHolders) === null || _application$connecti10 === void 0 ? void 0 : (_application$connecti11 = _application$connecti10[0]) === null || _application$connecti11 === void 0 ? void 0 : _application$connecti11.fatherOrHusbandName) || t("CS_NA"),
        val3: compare(application === null || application === void 0 ? void 0 : (_application$connecti12 = application.connectionHolders) === null || _application$connecti12 === void 0 ? void 0 : (_application$connecti13 = _application$connecti12[0]) === null || _application$connecti13 === void 0 ? void 0 : _application$connecti13.fatherOrHusbandName, oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne6 = oldApplication.connectionHolders) === null || _oldApplication$conne6 === void 0 ? void 0 : (_oldApplication$conne7 = _oldApplication$conne6[0]) === null || _oldApplication$conne7 === void 0 ? void 0 : _oldApplication$conne7.fatherOrHusbandName, t)
      }, {
        val1: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti14 = application.connectionHolders) === null || _application$connecti14 === void 0 ? void 0 : (_application$connecti15 = _application$connecti14[0]) === null || _application$connecti15 === void 0 ? void 0 : _application$connecti15.correspondenceAddress) || t("CS_NA"),
        val3: compare(application === null || application === void 0 ? void 0 : (_application$connecti16 = application.connectionHolders) === null || _application$connecti16 === void 0 ? void 0 : (_application$connecti17 = _application$connecti16[0]) === null || _application$connecti17 === void 0 ? void 0 : _application$connecti17.correspondenceAddress, oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne8 = oldApplication.connectionHolders) === null || _oldApplication$conne8 === void 0 ? void 0 : (_oldApplication$conne9 = _oldApplication$conne8[0]) === null || _oldApplication$conne9 === void 0 ? void 0 : _oldApplication$conne9.correspondenceAddress, t)
      }]
    };
  } else if (newOwnerExist && !oldOwnerExist) {
    var _application$connecti18, _application$connecti19, _application$connecti20, _application$connecti21, _application$connecti22, _application$connecti23, _application$connecti24, _application$connecti25;
    return {
      title: [t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"), t(""), t("")],
      values: [{
        val1: t("WS_OWN_DETAIL_NAME"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti18 = application.connectionHolders) === null || _application$connecti18 === void 0 ? void 0 : (_application$connecti19 = _application$connecti18[0]) === null || _application$connecti19 === void 0 ? void 0 : _application$connecti19.name) || t("CS_NA"),
        val3: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("CORE_COMMON_MOBILE_NUMBER"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti20 = application.connectionHolders) === null || _application$connecti20 === void 0 ? void 0 : (_application$connecti21 = _application$connecti20[0]) === null || _application$connecti21 === void 0 ? void 0 : _application$connecti21.mobileNumber) || t("CS_NA"),
        val3: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti22 = application.connectionHolders) === null || _application$connecti22 === void 0 ? void 0 : (_application$connecti23 = _application$connecti22[0]) === null || _application$connecti23 === void 0 ? void 0 : _application$connecti23.fatherOrHusbandName) || t("CS_NA"),
        val3: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
        val2: (application === null || application === void 0 ? void 0 : (_application$connecti24 = application.connectionHolders) === null || _application$connecti24 === void 0 ? void 0 : (_application$connecti25 = _application$connecti24[0]) === null || _application$connecti25 === void 0 ? void 0 : _application$connecti25.correspondenceAddress) || t("CS_NA"),
        val3: t("WS_SAME_AS_PROPERTY_OWNERS")
      }]
    };
  } else if (!newOwnerExist && oldOwnerExist) {
    var _oldApplication$conne10, _oldApplication$conne11, _oldApplication$conne12, _oldApplication$conne13, _oldApplication$conne14, _oldApplication$conne15, _oldApplication$conne16, _oldApplication$conne17;
    return {
      title: [t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"), t(""), t("")],
      values: [{
        val1: t("WS_OWN_DETAIL_NAME"),
        val3: (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne10 = oldApplication.connectionHolders) === null || _oldApplication$conne10 === void 0 ? void 0 : (_oldApplication$conne11 = _oldApplication$conne10[0]) === null || _oldApplication$conne11 === void 0 ? void 0 : _oldApplication$conne11.name) || t("CS_NA"),
        val2: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("CORE_COMMON_MOBILE_NUMBER"),
        val3: (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne12 = oldApplication.connectionHolders) === null || _oldApplication$conne12 === void 0 ? void 0 : (_oldApplication$conne13 = _oldApplication$conne12[0]) === null || _oldApplication$conne13 === void 0 ? void 0 : _oldApplication$conne13.mobileNumber) || t("CS_NA"),
        val2: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
        val3: (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne14 = oldApplication.connectionHolders) === null || _oldApplication$conne14 === void 0 ? void 0 : (_oldApplication$conne15 = _oldApplication$conne14[0]) === null || _oldApplication$conne15 === void 0 ? void 0 : _oldApplication$conne15.fatherOrHusbandName) || t("CS_NA"),
        val2: t("WS_SAME_AS_PROPERTY_OWNERS")
      }, {
        val1: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
        val3: (oldApplication === null || oldApplication === void 0 ? void 0 : (_oldApplication$conne16 = oldApplication.connectionHolders) === null || _oldApplication$conne16 === void 0 ? void 0 : (_oldApplication$conne17 = _oldApplication$conne16[0]) === null || _oldApplication$conne17 === void 0 ? void 0 : _oldApplication$conne17.correspondenceAddress) || t("CS_NA"),
        val2: t("WS_SAME_AS_PROPERTY_OWNERS")
      }]
    };
  } else {
    return {
      title: [t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"), t(""), t("")],
      values: [{
        val1: t("WS_SAME_AS_PROPERTY_OWNERS"),
        val2: t("SCORE_YES") || t("CS_NA"),
        val3: t("SCORE_YES")
      }]
    };
  }
};
const getHeaderDetails$1 = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$tenantId, _application$tenantId2, _application$tenantId3, _application$tenantId4, _application$tenantId5, _application$tenantId6, _application$applicat, _application$auditDet;
      let values = [];
      if (application !== null && application !== void 0 && application.applicationNo) values.push({
        title: t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.applicationNo
      });
      if (application !== null && application !== void 0 && application.connectionNo) values.push({
        title: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.connectionNo
      });
      return {
        title: "",
        isHeader: true,
        header: t((application === null || application === void 0 ? void 0 : (_application$tenantId = application.tenantId) === null || _application$tenantId === void 0 ? void 0 : (_application$tenantId2 = _application$tenantId.replace('.', '_')) === null || _application$tenantId2 === void 0 ? void 0 : _application$tenantId2.toUpperCase()) + "_HEADER_LABEL"),
        subHeader: t((application === null || application === void 0 ? void 0 : (_application$tenantId3 = application.tenantId) === null || _application$tenantId3 === void 0 ? void 0 : (_application$tenantId4 = _application$tenantId3.replace('.', '_')) === null || _application$tenantId4 === void 0 ? void 0 : _application$tenantId4.toUpperCase()) + "_SUB_HEADER_LABEL"),
        description: t((application === null || application === void 0 ? void 0 : (_application$tenantId5 = application.tenantId) === null || _application$tenantId5 === void 0 ? void 0 : (_application$tenantId6 = _application$tenantId5.replace('.', '_')) === null || _application$tenantId6 === void 0 ? void 0 : _application$tenantId6.toUpperCase()) + "_DES_HEADER_LABEL"),
        typeOfApplication: application !== null && application !== void 0 && (_application$applicat = application.applicationNo) !== null && _application$applicat !== void 0 && _application$applicat.includes("SW") ? t("CS_COMMON_INBOX_MODIFYSWCONNECTION") : t("WS_COMMON_INBOX_MODIFYWSCONNECTION"),
        date: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$auditDet = application.auditDetails) === null || _application$auditDet === void 0 ? void 0 : _application$auditDet.createdTime) || "NA",
        values: values,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getDocumentDetails$1 = (application, t) => {
  const documents = application === null || application === void 0 ? void 0 : application.documents;
  return {
    title: t("WS_COMMON_DOCUMENTS_DETAILS"),
    isAttachments: true,
    values: (documents === null || documents === void 0 ? void 0 : documents.length) > 0 ? documents === null || documents === void 0 ? void 0 : documents.map(doc => t(doc === null || doc === void 0 ? void 0 : doc.documentType)) : [t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")]
  };
};
const getWSAcknowledgementData$1 = function (newApplication, property, tenantInfo, t, oldApplication) {
  return Promise.resolve(getHeaderDetails$1(newApplication, t, tenantInfo)).then(function (header) {
    return Promise.resolve(Digit.PTService.search({
      tenantId: tenantInfo,
      filters: {
        propertyIds: oldApplication === null || oldApplication === void 0 ? void 0 : oldApplication.propertyId
      }
    })).then(function (oldPropertyData) {
      var _oldPropertyData$Prop;
      const oldProperty = oldPropertyData === null || oldPropertyData === void 0 ? void 0 : (_oldPropertyData$Prop = oldPropertyData.Properties) === null || _oldPropertyData$Prop === void 0 ? void 0 : _oldPropertyData$Prop[0];
      return {
        tenantId: tenantInfo,
        headerDetails: [header],
        bodyDetails: [getPropertyDetails$1(property, oldProperty, t), getConnectionHolderDetails$1(newApplication, oldApplication, t), getConnectionDetails$1(newApplication, oldApplication, t), getDocumentDetails$1(newApplication, t)]
      };
    });
  });
};

const WSResponse = props => {
  var _waterApplicationData, _waterApplicationData2, _waterApplicationData3, _sewerageApplicationD, _sewerageApplicationD2, _sewerageApplicationD3, _oldDataWater$WaterCo, _oldDataWater$WaterCo2, _oldDataSew$SewerageC, _oldDataSew$SewerageC2;
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [waterApplicationData, setWaterApplicationData] = React.useState({});
  const [sewerageApplicationData, setSewerageApplicationData] = React.useState({});
  const {
    isLoading: waterLoading,
    isError: waterError,
    data: waterApplicationDetails
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, filters === null || filters === void 0 ? void 0 : filters.applicationNumber, "WATER", {
    enabled: filters !== null && filters !== void 0 && filters.applicationNumber ? true : false
  });
  const {
    isLoading: sewerageLoading,
    isError: sewerageError,
    data: sewerageApplicationDetails
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, filters === null || filters === void 0 ? void 0 : filters.applicationNumber1, "SEWERAGE", {
    enabled: filters !== null && filters !== void 0 && filters.applicationNumber1 ? true : false
  });
  React.useEffect(function () {
    try {
      setWaterApplicationData(waterApplicationDetails);
      setSewerageApplicationData(sewerageApplicationDetails);
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  }, [waterApplicationDetails, sewerageApplicationDetails]);
  const {
    data: oldDataWater
  } = Digit.Hooks.ws.useOldValue({
    tenantId,
    filters: {
      connectionNumber: waterApplicationData === null || waterApplicationData === void 0 ? void 0 : (_waterApplicationData = waterApplicationData.applicationData) === null || _waterApplicationData === void 0 ? void 0 : _waterApplicationData.connectionNo,
      isConnectionSearch: true
    },
    businessService: "WATER"
  }, {
    enabled: waterApplicationData !== null && waterApplicationData !== void 0 && (_waterApplicationData2 = waterApplicationData.applicationData) !== null && _waterApplicationData2 !== void 0 && (_waterApplicationData3 = _waterApplicationData2.applicationType) !== null && _waterApplicationData3 !== void 0 && _waterApplicationData3.includes("MODIFY_") ? true : false
  });
  const {
    data: oldDataSew
  } = Digit.Hooks.ws.useOldValue({
    tenantId,
    filters: {
      connectionNumber: sewerageApplicationData === null || sewerageApplicationData === void 0 ? void 0 : (_sewerageApplicationD = sewerageApplicationData.applicationData) === null || _sewerageApplicationD === void 0 ? void 0 : _sewerageApplicationD.connectionNo,
      isConnectionSearch: true
    },
    businessService: "SEWERAGE"
  }, {
    enabled: sewerageApplicationData !== null && sewerageApplicationData !== void 0 && (_sewerageApplicationD2 = sewerageApplicationData.applicationData) !== null && _sewerageApplicationD2 !== void 0 && (_sewerageApplicationD3 = _sewerageApplicationD2.applicationType) !== null && _sewerageApplicationD3 !== void 0 && _sewerageApplicationD3.includes("MODIFY_") ? true : false
  });
  const oldApplicationWater = oldDataWater === null || oldDataWater === void 0 ? void 0 : (_oldDataWater$WaterCo = oldDataWater.WaterConnection) === null || _oldDataWater$WaterCo === void 0 ? void 0 : _oldDataWater$WaterCo[(oldDataWater === null || oldDataWater === void 0 ? void 0 : (_oldDataWater$WaterCo2 = oldDataWater.WaterConnection) === null || _oldDataWater$WaterCo2 === void 0 ? void 0 : _oldDataWater$WaterCo2.length) - 1];
  const oldApplicationSew = oldDataSew === null || oldDataSew === void 0 ? void 0 : (_oldDataSew$SewerageC = oldDataSew.SewerageConnections) === null || _oldDataSew$SewerageC === void 0 ? void 0 : _oldDataSew$SewerageC[(oldDataSew === null || oldDataSew === void 0 ? void 0 : (_oldDataSew$SewerageC2 = oldDataSew.SewerageConnections) === null || _oldDataSew$SewerageC2 === void 0 ? void 0 : _oldDataSew$SewerageC2.length) - 1];
  const handleAckPdfDownloadWater = function () {
    try {
      var _waterApplicationData4, _waterApplicationData5, _waterApplicationData6;
      const tenantInfo = waterApplicationData === null || waterApplicationData === void 0 ? void 0 : (_waterApplicationData4 = waterApplicationData.applicationData) === null || _waterApplicationData4 === void 0 ? void 0 : _waterApplicationData4.tenantId;
      let result = waterApplicationData === null || waterApplicationData === void 0 ? void 0 : waterApplicationData.applicationData;
      if (waterApplicationData !== null && waterApplicationData !== void 0 && (_waterApplicationData5 = waterApplicationData.applicationData) !== null && _waterApplicationData5 !== void 0 && (_waterApplicationData6 = _waterApplicationData5.applicationType) !== null && _waterApplicationData6 !== void 0 && _waterApplicationData6.includes("MODIFY_")) {
        var _oldDataWater$WaterCo3;
        const PDFdata = getWSAcknowledgementData$1({
          ...(oldDataWater === null || oldDataWater === void 0 ? void 0 : (_oldDataWater$WaterCo3 = oldDataWater.WaterConnection) === null || _oldDataWater$WaterCo3 === void 0 ? void 0 : _oldDataWater$WaterCo3[0])
        }, {
          ...(waterApplicationData === null || waterApplicationData === void 0 ? void 0 : waterApplicationData.propertyDetails)
        }, tenantInfo, t, oldApplicationWater);
        PDFdata.then(ress => Digit.Utils.pdf.generateModifyPdf(ress));
        return Promise.resolve();
      }
      const PDFdata = getWSAcknowledgementData({
        ...result
      }, {
        ...(waterApplicationData === null || waterApplicationData === void 0 ? void 0 : waterApplicationData.propertyDetails)
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const handleAckPdfDownloadSew = function () {
    try {
      var _sewerageApplicationD4, _sewerageApplicationD5, _sewerageApplicationD6;
      const tenantInfo = sewerageApplicationData === null || sewerageApplicationData === void 0 ? void 0 : (_sewerageApplicationD4 = sewerageApplicationData.applicationData) === null || _sewerageApplicationD4 === void 0 ? void 0 : _sewerageApplicationD4.tenantId;
      let result = sewerageApplicationData === null || sewerageApplicationData === void 0 ? void 0 : sewerageApplicationData.applicationData;
      if (sewerageApplicationData !== null && sewerageApplicationData !== void 0 && (_sewerageApplicationD5 = sewerageApplicationData.applicationData) !== null && _sewerageApplicationD5 !== void 0 && (_sewerageApplicationD6 = _sewerageApplicationD5.applicationType) !== null && _sewerageApplicationD6 !== void 0 && _sewerageApplicationD6.includes("MODIFY_")) {
        var _oldDataSew$SewerageC3;
        const PDFdata = getWSAcknowledgementData$1({
          ...(oldDataSew === null || oldDataSew === void 0 ? void 0 : (_oldDataSew$SewerageC3 = oldDataSew.SewerageConnections) === null || _oldDataSew$SewerageC3 === void 0 ? void 0 : _oldDataSew$SewerageC3[0])
        }, {
          ...(sewerageApplicationData === null || sewerageApplicationData === void 0 ? void 0 : sewerageApplicationData.propertyDetails)
        }, tenantInfo, t, oldApplicationSew);
        PDFdata.then(ress => Digit.Utils.pdf.generateModifyPdf(ress));
        return Promise.resolve();
      }
      const PDFdata = getWSAcknowledgementData({
        ...result
      }, {
        ...(sewerageApplicationData === null || sewerageApplicationData === void 0 ? void 0 : sewerageApplicationData.propertyDetails)
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const onSubmit = () => {
    history.push("/digit-ui/employee");
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"),
    applicationNumber: filters === null || filters === void 0 ? void 0 : filters.applicationNumber,
    applicationNumberOne: filters === null || filters === void 0 ? void 0 : filters.applicationNumber1,
    info: filters !== null && filters !== void 0 && filters.applicationNumber ? t("WS_WATER_APPLICATION_NUMBER_LABEL") : "",
    infoOne: filters !== null && filters !== void 0 && filters.applicationNumber1 ? t("WS_SEWERAGE_APPLICATION_NUMBER_LABEL") : "",
    successful: true,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    },
    infoOneStyles: {
      paddingTop: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      paddingBottom: "10px",
      marginBottom: "10px"
    }
  }, t("WS_MESSAGE_SUB_DESCRIPTION_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex"
    }
  }, (filters === null || filters === void 0 ? void 0 : filters.applicationNumber) && /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: handleAckPdfDownloadWater
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#a82227"
  })), t("WS_PRINT_WATER_APPLICATION_LABEL")), (filters === null || filters === void 0 ? void 0 : filters.applicationNumber1) && /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: handleAckPdfDownloadSew
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#a82227"
  })), t("WS_PRINT_SEWERAGE_APPLICATION_LABEL"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    onSubmit: onSubmit,
    style: {
      margin: "10px 10px 0px 0px"
    }
  }))));
};

function getReasonDocNoHeader(amendmentReason) {
  if (amendmentReason === "COURT_CASE_SETTLEMENT") return "WS_COURT_ORDER_NO";else if (amendmentReason === "ARREAR_WRITE_OFF" || amendmentReason === "ONE_TIME_SETTLEMENT") return "WS_GOVERNMENT_NOTIFICATION_NUMBER";else return "WS_DOCUMENT_NO";
}
const getHeaderDetails$2 = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$tenantId, _application$tenantId2, _application$tenantId3, _application$tenantId4, _application$tenantId5, _application$tenantId6, _application$auditDet;
      let values = [];
      if (application !== null && application !== void 0 && application.amendmentId) values.push({
        title: t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.amendmentId
      });
      if (application !== null && application !== void 0 && application.consumerCode) values.push({
        title: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.consumerCode
      });
      const DemandRevision = {
        title: t("WS_DEMAND_REVISION_BASIS_DETAILS"),
        values: [{
          title: t("WS_DEMAND_REVISION_BASIS"),
          value: t(application === null || application === void 0 ? void 0 : application.amendmentReason) || t("CS_NA")
        }, {
          title: t(getReasonDocNoHeader(application === null || application === void 0 ? void 0 : application.amendmentReason)),
          value: (application === null || application === void 0 ? void 0 : application.reasonDocumentNumber) || t("CS_NA")
        }, {
          title: t("WS_COMMON_FROM_DATE_LABEL"),
          value: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.effectiveFrom)
        }, {
          ...((application === null || application === void 0 ? void 0 : application.amendmentReason) !== "COURT_CASE_SETTLEMENT" && {
            title: t("WS_COMMON_TO_DATE_LABEL"),
            value: convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.effectiveTill)
          })
        }]
      };
      const documents = application === null || application === void 0 ? void 0 : application.documents;
      const Attachments = {
        title: t("WS_COMMON_DOCUMENTS_DETAILS"),
        isAttachments: true,
        values: documents === null || documents === void 0 ? void 0 : documents.map(doc => t(doc === null || doc === void 0 ? void 0 : doc.documentType))
      };
      return {
        title: "",
        isHeader: true,
        header: t((application === null || application === void 0 ? void 0 : (_application$tenantId = application.tenantId) === null || _application$tenantId === void 0 ? void 0 : (_application$tenantId2 = _application$tenantId.replace('.', '_')) === null || _application$tenantId2 === void 0 ? void 0 : _application$tenantId2.toUpperCase()) + "_HEADER_LABEL"),
        subHeader: t((application === null || application === void 0 ? void 0 : (_application$tenantId3 = application.tenantId) === null || _application$tenantId3 === void 0 ? void 0 : (_application$tenantId4 = _application$tenantId3.replace('.', '_')) === null || _application$tenantId4 === void 0 ? void 0 : _application$tenantId4.toUpperCase()) + "_SUB_HEADER_LABEL"),
        description: t((application === null || application === void 0 ? void 0 : (_application$tenantId5 = application.tenantId) === null || _application$tenantId5 === void 0 ? void 0 : (_application$tenantId6 = _application$tenantId5.replace('.', '_')) === null || _application$tenantId6 === void 0 ? void 0 : _application$tenantId6.toUpperCase()) + "_DES_HEADER_LABEL"),
        typeOfApplication: t("WS_BILL_AMEND_APP"),
        date: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$auditDet = application.auditDetails) === null || _application$auditDet === void 0 ? void 0 : _application$auditDet.createdTime) || "NA",
        values: values,
        DemandRevision,
        Attachments,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getWSAcknowledgementData$2 = function (amendment, tenantInfo, t, tableData, app) {
  return Promise.resolve(getHeaderDetails$2(amendment, t, tenantInfo)).then(function (header) {
    return {
      tenantId: tenantInfo,
      headerDetails: header,
      bodyDetails: tableData[1],
      t
    };
  });
};

const Response = () => {
  var _state$Amendment, _data$Amendments, _data$Amendments$, _data$Amendments2, _data$Amendments2$, _data$Amendments3, _data$Amendments3$;
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const {
    state
  } = reactRouterDom.useLocation();
  const {
    t
  } = reactI18next.useTranslation();
  const connNumber = state === null || state === void 0 ? void 0 : (_state$Amendment = state.Amendment) === null || _state$Amendment === void 0 ? void 0 : _state$Amendment.consumerCode;
  let serviceType = "WATER";
  if (connNumber.includes("SW")) serviceType = "SEWERAGE";
  const {
    mutate,
    isSuccess,
    isError,
    isLoading,
    data
  } = Digit.Hooks.ws.useCreateBillAmendment();
  const getAckPdf = function (amendment, tenantId, t, tableData, app) {
    try {
      const PDFdata = getWSAcknowledgementData$2(amendment, tenantId, t, tableData, app);
      PDFdata.then(ress => Digit.Utils.pdf.generateBillAmendPDF(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const {
    isLoading: isLoadingAppDetails,
    isError: isErrorAppDetails,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSApplicationDetailsBillAmendment(t, tenantId, data === null || data === void 0 ? void 0 : (_data$Amendments = data.Amendments) === null || _data$Amendments === void 0 ? void 0 : (_data$Amendments$ = _data$Amendments[0]) === null || _data$Amendments$ === void 0 ? void 0 : _data$Amendments$.amendmentId, serviceType, {
    enabled: isSuccess
  });
  React.useEffect(() => {
    if (state !== null && state !== void 0 && state.Amendment) {
      mutate(state);
    }
  }, []);
  const handleDownloadPdf = () => {
    getAckPdf(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.amendment, tenantId, t, applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationDetails, applicationDetails);
  };
  return /*#__PURE__*/React__default.createElement("div", null, isLoading || isLoadingAppDetails ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: isSuccess ? t("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL") : t("CS_WATER_UPDATE_APPLICATION_FAILED"),
    applicationNumber: data === null || data === void 0 ? void 0 : (_data$Amendments2 = data.Amendments) === null || _data$Amendments2 === void 0 ? void 0 : (_data$Amendments2$ = _data$Amendments2[0]) === null || _data$Amendments2$ === void 0 ? void 0 : _data$Amendments2$.amendmentId,
    info: isSuccess ? t("WS_MYCONNECTIONS_APPLICATION_NO") : "",
    successful: isSuccess ? true : false
  }), isError ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_MESSAGE_SUB_DESCRIPTION_LABEL")), (isSuccess || !!(data !== null && data !== void 0 && (_data$Amendments3 = data.Amendments) !== null && _data$Amendments3 !== void 0 && (_data$Amendments3$ = _data$Amendments3[0]) !== null && _data$Amendments3$ !== void 0 && _data$Amendments3$.amendmentId)) && !isError && /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: handleDownloadPdf
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "18",
    viewBox: "0 0 20 18",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    style: {
      marginTop: "3px"
    }
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M17 5H3C1.34 5 0 6.34 0 8V14H4V18H16V14H20V8C20 6.34 18.66 5 17 5ZM14 16H6V11H14V16ZM17 9C16.45 9 16 8.55 16 8C16 7.45 16.45 7 17 7C17.55 7 18 7.45 18 8C18 8.55 17.55 9 17 9ZM16 0H4V4H16V0Z",
    fill: "#a82227"
  })), t("WS_PRINT_APPLICATION_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee",
    style: {
      marginRight: "1rem"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))));
};

const ResponseBillAmend = () => {
  var _state$state, _state$state$Amendmen, _state$state$Amendmen2;
  const {
    state
  } = reactRouterDom.useLocation();
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: state ? t("WS_BILL_AMENDMENT_BANNER") : t("WS_BILL_AMENDMENT_FAILURE"),
    applicationNumber: state === null || state === void 0 ? void 0 : (_state$state = state.state) === null || _state$state === void 0 ? void 0 : (_state$state$Amendmen = _state$state.Amendments) === null || _state$state$Amendmen === void 0 ? void 0 : (_state$state$Amendmen2 = _state$state$Amendmen[0]) === null || _state$state$Amendmen2 === void 0 ? void 0 : _state$state$Amendmen2.amendmentId,
    info: "",
    successful: state !== null && state !== void 0 && state.status ? true : false
  }), !state.status ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_BILL_AMENDMENT_MESSAGE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee",
    style: {
      marginRight: "1rem"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))));
};

const getPropertyAddress$2 = property => {
  var _property$locality;
  const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
  const street = property === null || property === void 0 ? void 0 : property.street;
  const landMark = property === null || property === void 0 ? void 0 : property.landmark;
  const locality = property === null || property === void 0 ? void 0 : (_property$locality = property.locality) === null || _property$locality === void 0 ? void 0 : _property$locality.name;
  const city = property === null || property === void 0 ? void 0 : property.city;
  const pinCode = property === null || property === void 0 ? void 0 : property.pincode;
  const formattedAddress = "" + (doorNo ? doorNo + ", " : "") + (street ? street + ", " : "") + (landMark ? landMark + ", " : "") + (locality ? locality + ", " : "") + (city ? city : "") + (pinCode ? ", " + pinCode : "");
  return formattedAddress;
};
const getPropertyDetails$2 = (application, t) => {
  var _application$owners, _owners$map;
  const owners = (application === null || application === void 0 ? void 0 : (_application$owners = application.owners) === null || _application$owners === void 0 ? void 0 : _application$owners.filter(owner => owner.active == true)) || [];
  const names = owners === null || owners === void 0 ? void 0 : (_owners$map = owners.map(owner => owner.name)) === null || _owners$map === void 0 ? void 0 : _owners$map.join(",");
  return {
    title: t("WS_COMMON_PROPERTY_DETAILS"),
    values: [{
      title: t("WS_PROPERTY_ID_LABEL"),
      value: t("" + (application === null || application === void 0 ? void 0 : application.propertyId)) || t("CS_NA")
    }, {
      title: t("WS_OWN_DETAIL_NAME"),
      value: names || t("CS_NA")
    }, {
      title: t("WS_PROPERTY_ADDRESS_LABEL"),
      value: getPropertyAddress$2(application === null || application === void 0 ? void 0 : application.address) || t("CS_NA")
    }]
  };
};
const getConnectionHolderDetails$2 = (owner, t) => {
  var _owner$connectionHold, _owner$connectionHold2, _owner$connectionHold3, _owner$connectionHold4, _owner$connectionHold5, _owner$connectionHold6, _owner$connectionHold7, _owner$connectionHold8;
  return {
    title: t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),
    values: (owner === null || owner === void 0 ? void 0 : owner.connectionHolders) !== null ? [{
      title: t("WS_OWN_DETAIL_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold = owner.connectionHolders) === null || _owner$connectionHold === void 0 ? void 0 : (_owner$connectionHold2 = _owner$connectionHold[0]) === null || _owner$connectionHold2 === void 0 ? void 0 : _owner$connectionHold2.name) || t("CS_NA")
    }, {
      title: t("CORE_COMMON_MOBILE_NUMBER"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold3 = owner.connectionHolders) === null || _owner$connectionHold3 === void 0 ? void 0 : (_owner$connectionHold4 = _owner$connectionHold3[0]) === null || _owner$connectionHold4 === void 0 ? void 0 : _owner$connectionHold4.mobileNumber) || t("CS_NA")
    }, {
      title: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold5 = owner.connectionHolders) === null || _owner$connectionHold5 === void 0 ? void 0 : (_owner$connectionHold6 = _owner$connectionHold5[0]) === null || _owner$connectionHold6 === void 0 ? void 0 : _owner$connectionHold6.fatherOrHusbandName) || t("CS_NA")
    }, {
      title: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold7 = owner.connectionHolders) === null || _owner$connectionHold7 === void 0 ? void 0 : (_owner$connectionHold8 = _owner$connectionHold7[0]) === null || _owner$connectionHold8 === void 0 ? void 0 : _owner$connectionHold8.correspondenceAddress) || t("CS_NA")
    }] : [{
      title: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
      value: t("SCORE_YES") || t("CS_NA")
    }]
  };
};
const getHeaderDetails$3 = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$tenantId, _application$tenantId2, _application$tenantId3, _application$tenantId4, _application$tenantId5, _application$tenantId6, _application$applicat, _application$addition;
      let values = [];
      if (application !== null && application !== void 0 && application.applicationNo) values.push({
        title: t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.applicationNo
      });
      if (application !== null && application !== void 0 && application.applicationType) values.push({
        title: t("WS_SERVICE_NAME") + ":",
        value: t("WS_APPLICATION_TYPE_" + (application === null || application === void 0 ? void 0 : application.applicationType))
      });
      return {
        title: "",
        email: "",
        phoneNumber: "",
        isHeader: true,
        header: t((application === null || application === void 0 ? void 0 : (_application$tenantId = application.tenantId) === null || _application$tenantId === void 0 ? void 0 : (_application$tenantId2 = _application$tenantId.replace('.', '_')) === null || _application$tenantId2 === void 0 ? void 0 : _application$tenantId2.toUpperCase()) + "_HEADER_LABEL"),
        subHeader: t((application === null || application === void 0 ? void 0 : (_application$tenantId3 = application.tenantId) === null || _application$tenantId3 === void 0 ? void 0 : (_application$tenantId4 = _application$tenantId3.replace('.', '_')) === null || _application$tenantId4 === void 0 ? void 0 : _application$tenantId4.toUpperCase()) + "_SUB_HEADER_LABEL"),
        description: t((application === null || application === void 0 ? void 0 : (_application$tenantId5 = application.tenantId) === null || _application$tenantId5 === void 0 ? void 0 : (_application$tenantId6 = _application$tenantId5.replace('.', '_')) === null || _application$tenantId6 === void 0 ? void 0 : _application$tenantId6.toUpperCase()) + "_DES_HEADER_LABEL"),
        typeOfApplication: application !== null && application !== void 0 && (_application$applicat = application.applicationNo) !== null && _application$applicat !== void 0 && _application$applicat.includes("SW") ? t("WS_SEWERAGE_DISCONNECTION") : t("WS_WATER_DISCONNECTION"),
        date: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$addition = application.additionalDetails) === null || _application$addition === void 0 ? void 0 : _application$addition.appCreatedDate) || "NA",
        values: values,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getDisconnectionDetails = (application, t) => {
  return {
    title: t("WS_DISCONNECTION_DETAILS"),
    values: [{
      title: t("WS_DISCONNECTION_TYPE"),
      value: (application === null || application === void 0 ? void 0 : application.isDisconnectionTemporary) === true ? t("WS_DISCONNECTIONTYPE_TEMPORARY") : t("WS_DISCONNECTIONTYPE_PERMANENT") || t("CS_NA")
    }, {
      title: t("WS_DISCONNECTION_PROPOSED_DATE"),
      value: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom) || t("CS_NA")
    }, {
      title: t("WS_DISCONNECTION_REASON"),
      value: (application === null || application === void 0 ? void 0 : application.disconnectionReason) || t("CS_NA")
    }]
  };
};
const getDocumentDetails$2 = (application, t) => {
  const documents = application === null || application === void 0 ? void 0 : application.documents;
  return {
    title: t("WS_COMMON_DOCUMENTS_DETAILS"),
    isAttachments: true,
    values: documents === null || documents === void 0 ? void 0 : documents.map(doc => t(doc === null || doc === void 0 ? void 0 : doc.documentType))
  };
};
const getWSDisconectionAcknowledgementData = function (application, property, tenantInfo, t) {
  try {
    var _application$Disconne, _application$Disconne2;
    function _temp2() {
      return Promise.resolve(getHeaderDetails$3(application, t, tenantInfo)).then(function (header) {
        return {
          t: t,
          tenantId: tenantInfo,
          email: "",
          phoneNumber: "",
          headerDetails: [header],
          details: [getPropertyDetails$2(property, t), getConnectionHolderDetails$2(application, t), getDisconnectionDetails(application, t), getDocumentDetails$2(application, t)]
        };
      });
    }
    const filesArray = application === null || application === void 0 ? void 0 : (_application$Disconne = application.DisconnectionResponse) === null || _application$Disconne === void 0 ? void 0 : (_application$Disconne2 = _application$Disconne.documents) === null || _application$Disconne2 === void 0 ? void 0 : _application$Disconne2.map(value => value === null || value === void 0 ? void 0 : value.fileStoreId);
    let res;
    const _temp = function () {
      if (filesArray) {
        return Promise.resolve(Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId())).then(function (_Digit$UploadServices) {
          res = _Digit$UploadServices;
        });
      }
    }();
    return Promise.resolve(_temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp));
  } catch (e) {
    return Promise.reject(e);
  }
};

const WSDisconnectionResponse = props => {
  var _filters$applicationN;
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const disconnectionData = Digit.SessionStorage.get("WS_DISCONNECTION");
  const handleDownloadPdf = () => {
    const disconnectionRes = disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.DisconnectionResponse;
    const PDFdata = getWSDisconectionAcknowledgementData(disconnectionRes, disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.propertyDetails, disconnectionRes === null || disconnectionRes === void 0 ? void 0 : disconnectionRes.tenantId, t);
    PDFdata.then(res => Digit.Utils.pdf.generatev1(res));
  };
  const onSubmit = () => {
    history.push("/digit-ui/employee");
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"),
    applicationNumber: filters === null || filters === void 0 ? void 0 : filters.applicationNumber,
    info: filters !== null && filters !== void 0 && (_filters$applicationN = filters.applicationNumber) !== null && _filters$applicationN !== void 0 && _filters$applicationN.includes("WS") ? t("WS_WATER_APPLICATION_NUMBER_LABEL") : t("WS_SEWERAGE_APPLICATION_NUMBER_LABEL"),
    successful: true,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    },
    infoOneStyles: {
      paddingTop: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      paddingBottom: "10px",
      marginBottom: "10px"
    }
  }, t("WS_MESSAGE_SUB_DESCRIPTION_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: handleDownloadPdf
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#a82227"
  })), t("WS_PRINT_APPLICATION_LABEL"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    onSubmit: onSubmit,
    style: {
      margin: "10px 10px 0px 0px"
    }
  }))));
};

const BILLSBreadCrumbs = _ref => {
  var _window, _window2;
  let {
    location
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const search = reactRouterDom.useLocation().search;
  const fromScreen = new URLSearchParams(search).get("from") || null;
  const IsEdit = new URLSearchParams(search).get("isEdit") || null;
  const applicationNumbercheck = new URLSearchParams(search).get("applicationNumber") || null;
  let isMobile = window.Digit.Utils.browser.isMobile();
  let requestParam = window.location.href.split("?")[1];
  function findLastIndex(array, searchKey, searchValue) {
    var index = array.slice().reverse().findIndex(x => x[searchKey] === searchValue);
    var count = array.length - 1;
    var finalIndex = index >= 0 ? count - index : index;
    return finalIndex;
  }
  let crumbs = [{
    path: "/digit-ui/employee",
    content: t("ES_COMMON_HOME"),
    show: true,
    style: isMobile ? {
      width: "20%"
    } : {}
  }, {
    path: "/digit-ui/employee/ws/create-application",
    content: t("ES_COMMON_WS_DOCUMENTS_REQUIRED"),
    show: location.pathname.includes("/create-application") ? true : false
  }, {
    path: "/digit-ui/employee/water/inbox",
    content: t("ES_COMMON_BILLS_WATER_INBOX_LABEL"),
    show: location.pathname.includes("/water/inbox") ? true : false
  }, {
    path: "/digit-ui/employee/ws/water/bill-amendment/inbox",
    content: t("ES_COMMON_BILL_AMEND_WATER_INBOX_LABEL"),
    show: location.pathname.includes("/water/bill-amendment/inbox") ? true : false
  }, {
    path: "/digit-ui/employee/ws/sewerage/bill-amendment/inbox",
    content: t("ES_COMMON_BILL_AMEND_SEWERAGE_INBOX_LABEL"),
    show: location.pathname.includes("/sewerage/bill-amendment/inbox") ? true : false
  }, {
    path: "/digit-ui/employee/ws/water/search-application",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_SEARCH_APPLICATIONS") : t("WS_SEARCH_APPLICATIONS"),
    show: location.pathname.includes("/water/search-application") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/water/search-connection",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_SEARCH_CONNECTION") : t("WS_SEARCH_CONNECTION"),
    show: location.pathname.includes("/water/search-connection") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/sewerage/search-application",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_SEARCH_APPLICATIONS") : t("WS_SEARCH_APPLICATIONS"),
    show: location.pathname.includes("/sewerage/search-application") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/sewerage/search-connection",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_SEARCH_CONNECTION") : t("WS_SEARCH_CONNECTION"),
    show: location.pathname.includes("/sewerage/search-connection") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/sewerage/inbox",
    content: t("ES_COMMON_BILLS_SEWERAGE_INBOX_LABEL"),
    show: location.pathname.includes("/sewerage/inbox") ? true : false
  }, {
    path: "/digit-ui/employee/ws/new-application",
    content: t("ES_COMMON_WS_NEW_CONNECTION"),
    show: location.pathname.includes("/new-application") ? true : false
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: t("ACTION_TEST_RESPONSE"),
    show: location.pathname.includes("/ws-response") ? true : false
  }, {
    path: "/digit-ui/employee/ws/consumption-details",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_VIEW_CONSUMPTION_DETAIL") : t("WS_VIEW_CONSUMPTION_DETAIL"),
    show: location.pathname.includes("/consumption-details") ? true : false,
    isBack: fromScreen && true
  }, {
    path: sessionStorage.getItem("redirectedfromEDIT") === "true" ? applicationNumbercheck !== null && applicationNumbercheck !== void 0 && applicationNumbercheck.includes("SW_AP") ? "/digit-ui/employee/ws/sewerage/search-application" : "/digit-ui/employee/ws/water/search-application" : "/digit-ui/employee/ws/application-details",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_APPLICATION_DETAILS_HEADER") : t("WS_APPLICATION_DETAILS_HEADER"),
    show: location.pathname.includes("/application-details") ? true : false,
    isBack: sessionStorage.getItem("redirectedfromEDIT") !== "true" && fromScreen && true
  }, {
    path: sessionStorage.getItem("redirectedfromEDIT") === "true" ? applicationNumbercheck !== null && applicationNumbercheck !== void 0 && applicationNumbercheck.includes("SW_AP") ? "/digit-ui/employee/ws/sewerage/search-application" : "/digit-ui/employee/ws/water/search-application" : "/digit-ui/employee/ws/modify-details",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_APPLICATION_DETAILS_HEADER") : t("WS_APPLICATION_DETAILS_HEADER"),
    show: location.pathname.includes("/modify-details") ? true : false,
    isBack: sessionStorage.getItem("redirectedfromEDIT") !== "true" && fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/disconnection-details",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_APPLICATION_DETAILS_HEADER") : t("WS_APPLICATION_DETAILS_HEADER"),
    show: location.pathname.includes("/disconnection-details") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/connection-details",
    content: fromScreen ? t(fromScreen) + " / " + t("WS_COMMON_CONNECTION_DETAIL") : t("WS_COMMON_CONNECTION_DETAIL"),
    show: location.pathname.includes("/connection-details") ? true : false,
    isBack: fromScreen && true
  }, {
    path: "/digit-ui/employee/ws/edit-application",
    content: t("WS_APPLICATION_DETAILS_HEADER") + " / " + t("WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL"),
    show: location.pathname.includes("/edit-application") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: t("WS_APPLICATION_DETAILS_HEADER") + " / " + t("WF_EMPLOYEE_NEWSW1_ACTIVATE_CONNECTION"),
    show: location.pathname.includes("/activate-connection") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: t("WS_APPLICATION_DETAILS_HEADER") + " / " + t("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),
    show: location.pathname.includes("edit-disconnection-application") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: t("WS_APPLICATION_DETAILS_HEADER") + " / " + t("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),
    show: location.pathname.includes("config-by-disconnection-application") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: t("WS_APPLICATION_DETAILS_HEADER") + " / " + t("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),
    show: location.pathname.includes("resubmit-disconnection-application") ? true : false,
    isBack: true
  }, {
    path: "/digit-ui/employee/ws/new-disconnection/docsrequired",
    content: t("WS_NEW_DISCONNECTION_DOCS_REQUIRED"),
    show: location.pathname.includes("/new-disconnection/docsrequired") ? true : false
  }, {
    path: "/digit-ui/employee/ws/new-disconnection/application-form",
    content: isMobile ? t("WS_NEW_DISCONNECTION_DOCS_REQUIRED") + " / " + t("WS_NEW_DISCONNECTION_APPLICATION") : t("WS_NEW_DISCONNECTION_DOCS_REQUIRED") + " / " + t("WS_NEW_DISCONNECTION_APPLICATION"),
    show: location.pathname.includes("/new-disconnection/application-form") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: "" + t("WS_NEW_DISCONNECTION_RESPONSE"),
    show: location.pathname.includes("/ws-disconnection-response") ? true : false,
    isBack: true
  }, {
    path: "" + (location === null || location === void 0 ? void 0 : location.pathname) + location.search,
    content: fromScreen ? t(fromScreen) + " / " + t("WS_MODIFY_CONNECTION_BUTTON") : t("WS_MODIFY_CONNECTION_BUTTON"),
    show: location.pathname.includes("ws/modify-application") ? true : false,
    isBack: true
  }, {
    path: "/digit-ui/employee/ws/required-documents",
    content: t("ES_COMMON_WS_DOCUMENTS_REQUIRED"),
    show: location.pathname.includes("/required-documents") ? true : false
  }, {
    path: requestParam ? "/digit-ui/employee/ws/bill-amendment?" + requestParam : "/digit-ui/employee/ws/bill-amendment",
    content: t("WS_BILL_AMEND_APP"),
    show: location.pathname.includes("ws/bill-amendment") && !IsEdit ? true : false
  }, {
    path: "/digit-ui/employee/ws/bill-amendment",
    content: t("WS_BILL_AMEND_EDIT_APP"),
    show: location.pathname.includes("ws/bill-amendment") && IsEdit ? true : false
  }, {
    path: "/digit-ui/employee/ws/response",
    content: t("WS_ACK_SCREEN"),
    show: location.pathname.includes("/employee/ws/response") ? true : false,
    isclickable: false
  }, {
    path: "/digit-ui/employee/ws/generate-note-bill-amendment",
    content: t("CS_TITLE_GENERATE_NOTE"),
    show: location.pathname.includes("/generate-note-bill-amendment") ? true : false
  }];
  let lastCrumbIndex = findLastIndex(crumbs, "show", true);
  crumbs[lastCrumbIndex] = {
    ...crumbs[lastCrumbIndex],
    isclickable: false
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: (_window = window) !== null && _window !== void 0 && _window.location.href.includes("/employee/ws/bill-amendment") || (_window2 = window) !== null && _window2 !== void 0 && _window2.location.href.includes("/employee/ws/response") ? {
      marginLeft: "20px"
    } : {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreadCrumb, {
    crumbs: crumbs,
    spanStyle: {
      maxWidth: "min-content"
    }
  }));
};
const App$1 = _ref2 => {
  var _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi, _Digit3, _Digit3$ComponentRegi, _Digit4, _Digit4$ComponentRegi, _Digit5, _Digit5$ComponentRegi, _Digit6, _Digit6$ComponentRegi, _Digit7, _Digit7$ComponentRegi, _Digit8, _Digit8$ComponentRegi, _Digit9, _Digit9$ComponentRegi, _Digit10, _Digit10$ComponentReg, _Digit11, _Digit11$ComponentReg, _Digit12, _Digit12$ComponentReg, _Digit13, _Digit13$ComponentReg, _Digit14, _Digit14$ComponentReg, _Digit15, _Digit15$ComponentReg, _Digit16, _Digit16$ComponentReg, _Digit17, _Digit17$ComponentReg, _Digit18, _Digit18$ComponentReg, _Digit19, _Digit19$ComponentReg, _Digit20, _Digit20$ComponentReg, _Digit21, _Digit21$ComponentReg, _Digit22, _Digit22$ComponentReg, _Digit23, _Digit23$ComponentReg, _Digit24, _Digit24$ComponentReg;
  let {
    path
  } = _ref2;
  const location = reactRouterDom.useLocation();
  const WSDocsRequired = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent("WSDocsRequired");
  const WSInbox = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent("WSInbox");
  const WSDisconnectionDocsRequired = (_Digit3 = Digit) === null || _Digit3 === void 0 ? void 0 : (_Digit3$ComponentRegi = _Digit3.ComponentRegistryService) === null || _Digit3$ComponentRegi === void 0 ? void 0 : _Digit3$ComponentRegi.getComponent('WSDisconnectionDocsRequired');
  const WSApplicationBillAmendment = (_Digit4 = Digit) === null || _Digit4 === void 0 ? void 0 : (_Digit4$ComponentRegi = _Digit4.ComponentRegistryService) === null || _Digit4$ComponentRegi === void 0 ? void 0 : _Digit4$ComponentRegi.getComponent("WSApplicationBillAmendment");
  const WSRequiredDocuments = (_Digit5 = Digit) === null || _Digit5 === void 0 ? void 0 : (_Digit5$ComponentRegi = _Digit5.ComponentRegistryService) === null || _Digit5$ComponentRegi === void 0 ? void 0 : _Digit5$ComponentRegi.getComponent("WSRequiredDocuments");
  const WSNewApplication = (_Digit6 = Digit) === null || _Digit6 === void 0 ? void 0 : (_Digit6$ComponentRegi = _Digit6.ComponentRegistryService) === null || _Digit6$ComponentRegi === void 0 ? void 0 : _Digit6$ComponentRegi.getComponent("WSNewApplication");
  const WSApplicationDetails = (_Digit7 = Digit) === null || _Digit7 === void 0 ? void 0 : (_Digit7$ComponentRegi = _Digit7.ComponentRegistryService) === null || _Digit7$ComponentRegi === void 0 ? void 0 : _Digit7$ComponentRegi.getComponent("WSApplicationDetails");
  const WSGetConnectionDetails = (_Digit8 = Digit) === null || _Digit8 === void 0 ? void 0 : (_Digit8$ComponentRegi = _Digit8.ComponentRegistryService) === null || _Digit8$ComponentRegi === void 0 ? void 0 : _Digit8$ComponentRegi.getComponent("WSGetConnectionDetails");
  const WSActivateConnection = (_Digit9 = Digit) === null || _Digit9 === void 0 ? void 0 : (_Digit9$ComponentRegi = _Digit9.ComponentRegistryService) === null || _Digit9$ComponentRegi === void 0 ? void 0 : _Digit9$ComponentRegi.getComponent("WSActivateConnection");
  const WSApplicationDetailsBillAmendment = (_Digit10 = Digit) === null || _Digit10 === void 0 ? void 0 : (_Digit10$ComponentReg = _Digit10.ComponentRegistryService) === null || _Digit10$ComponentReg === void 0 ? void 0 : _Digit10$ComponentReg.getComponent("WSApplicationDetailsBillAmendment");
  const WSSearch = (_Digit11 = Digit) === null || _Digit11 === void 0 ? void 0 : (_Digit11$ComponentReg = _Digit11.ComponentRegistryService) === null || _Digit11$ComponentReg === void 0 ? void 0 : _Digit11$ComponentReg.getComponent("WSSearch");
  const WSSearchWater = (_Digit12 = Digit) === null || _Digit12 === void 0 ? void 0 : (_Digit12$ComponentReg = _Digit12.ComponentRegistryService) === null || _Digit12$ComponentReg === void 0 ? void 0 : _Digit12$ComponentReg.getComponent("WSSearchWater");
  const WSEditApplication = (_Digit13 = Digit) === null || _Digit13 === void 0 ? void 0 : (_Digit13$ComponentReg = _Digit13.ComponentRegistryService) === null || _Digit13$ComponentReg === void 0 ? void 0 : _Digit13$ComponentReg.getComponent("WSEditApplication");
  const WSConsumptionDetails = (_Digit14 = Digit) === null || _Digit14 === void 0 ? void 0 : (_Digit14$ComponentReg = _Digit14.ComponentRegistryService) === null || _Digit14$ComponentReg === void 0 ? void 0 : _Digit14$ComponentReg.getComponent("WSConsumptionDetails");
  const WSModifyApplication = (_Digit15 = Digit) === null || _Digit15 === void 0 ? void 0 : (_Digit15$ComponentReg = _Digit15.ComponentRegistryService) === null || _Digit15$ComponentReg === void 0 ? void 0 : _Digit15$ComponentReg.getComponent("WSModifyApplication");
  const WSEditModifyApplication = (_Digit16 = Digit) === null || _Digit16 === void 0 ? void 0 : (_Digit16$ComponentReg = _Digit16.ComponentRegistryService) === null || _Digit16$ComponentReg === void 0 ? void 0 : _Digit16$ComponentReg.getComponent("WSEditModifyApplication");
  const WSDisconnectionApplication = (_Digit17 = Digit) === null || _Digit17 === void 0 ? void 0 : (_Digit17$ComponentReg = _Digit17.ComponentRegistryService) === null || _Digit17$ComponentReg === void 0 ? void 0 : _Digit17$ComponentReg.getComponent("WSDisconnectionApplication");
  const WSEditApplicationByConfig = (_Digit18 = Digit) === null || _Digit18 === void 0 ? void 0 : (_Digit18$ComponentReg = _Digit18.ComponentRegistryService) === null || _Digit18$ComponentReg === void 0 ? void 0 : _Digit18$ComponentReg.getComponent("WSEditApplicationByConfig");
  const WSBillIAmendMentInbox = (_Digit19 = Digit) === null || _Digit19 === void 0 ? void 0 : (_Digit19$ComponentReg = _Digit19.ComponentRegistryService) === null || _Digit19$ComponentReg === void 0 ? void 0 : _Digit19$ComponentReg.getComponent("WSBillIAmendMentInbox");
  const WSGetDisconnectionDetails = (_Digit20 = Digit) === null || _Digit20 === void 0 ? void 0 : (_Digit20$ComponentReg = _Digit20.ComponentRegistryService) === null || _Digit20$ComponentReg === void 0 ? void 0 : _Digit20$ComponentReg.getComponent("WSGetDisconnectionDetails");
  const WSModifyApplicationDetails = (_Digit21 = Digit) === null || _Digit21 === void 0 ? void 0 : (_Digit21$ComponentReg = _Digit21.ComponentRegistryService) === null || _Digit21$ComponentReg === void 0 ? void 0 : _Digit21$ComponentReg.getComponent("WSModifyApplicationDetails");
  const WSEditDisconnectionApplication = (_Digit22 = Digit) === null || _Digit22 === void 0 ? void 0 : (_Digit22$ComponentReg = _Digit22.ComponentRegistryService) === null || _Digit22$ComponentReg === void 0 ? void 0 : _Digit22$ComponentReg.getComponent("WSEditDisconnectionApplication");
  const WSEditDisconnectionByConfig = (_Digit23 = Digit) === null || _Digit23 === void 0 ? void 0 : (_Digit23$ComponentReg = _Digit23.ComponentRegistryService) === null || _Digit23$ComponentReg === void 0 ? void 0 : _Digit23$ComponentReg.getComponent("WSEditDisconnectionByConfig");
  const WSResubmitDisconnection = (_Digit24 = Digit) === null || _Digit24 === void 0 ? void 0 : (_Digit24$ComponentReg = _Digit24.ComponentRegistryService) === null || _Digit24$ComponentReg === void 0 ? void 0 : _Digit24$ComponentReg.getComponent("WSResubmitDisconnection");
  const locationCheck = window.location.href.includes("/employee/ws/new-application") || window.location.href.includes("/employee/ws/modify-application") || window.location.href.includes("/employee/ws/edit-application") || window.location.href.includes("/employee/ws/activate-connection") || window.location.href.includes("/employee/ws/application-details") || window.location.href.includes("/employee/ws/modify-details") || window.location.href.includes("/employee/ws/ws-response") || window.location.href.includes("/employee/ws/new-disconnection/application-form") || window.location.href.includes("/employee/ws/ws-disconnection-response") || window.location.href.includes("/employee/ws/consumption-details") || window.location.href.includes("/employee/ws/edit-disconnection-application") || window.location.href.includes("/employee/ws/config-by-disconnection-application");
  window.location.href.includes("/employee/ws/resubmit-disconnection-application");
  const locationCheckReqDocs = window.location.href.includes("/employee/ws/create-application") || window.location.href.includes("/employee/ws/new-disconnection/docsrequired");
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "ground-container"
  }, /*#__PURE__*/React__default.createElement("div", {
    style: locationCheck ? {
      marginLeft: "12px"
    } : locationCheckReqDocs ? {
      marginLeft: "25px"
    } : {
      marginLeft: "-4px"
    }
  }, /*#__PURE__*/React__default.createElement(BILLSBreadCrumbs, {
    location: location
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/create-application",
    component: WSDocsRequired
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/new-application",
    component: WSNewApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edit-application",
    component: WSEditApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edit-disconnection-application",
    component: WSEditDisconnectionApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/resubmit-disconnection-application",
    component: WSResubmitDisconnection
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/config-by-disconnection-application",
    component: WSEditDisconnectionByConfig
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/application-details",
    component: WSApplicationDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/modify-details",
    component: WSModifyApplicationDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/connection-details",
    component: WSGetConnectionDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bill-amendment",
    component: () => /*#__PURE__*/React__default.createElement(WSApplicationBillAmendment, {
      path
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/generate-note-bill-amendment",
    component: () => /*#__PURE__*/React__default.createElement(WSApplicationDetailsBillAmendment, {
      path
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/response",
    component: () => /*#__PURE__*/React__default.createElement(Response, {
      path
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/response-bill-amend",
    component: () => /*#__PURE__*/React__default.createElement(ResponseBillAmend, {
      path
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/required-documents",
    component: () => /*#__PURE__*/React__default.createElement(WSRequiredDocuments, {
      path
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/activate-connection",
    component: WSActivateConnection
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/water/search-application",
    component: props => /*#__PURE__*/React__default.createElement(WSSearch, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sewerage/search-application",
    component: props => /*#__PURE__*/React__default.createElement(WSSearch, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/ws-response",
    component: WSResponse
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/ws-disconnection-response",
    component: WSDisconnectionResponse
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/water/search-connection",
    component: props => /*#__PURE__*/React__default.createElement(WSSearchWater, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sewerage/search-connection",
    component: props => /*#__PURE__*/React__default.createElement(WSSearchWater, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/consumption-details",
    component: WSConsumptionDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/modify-application",
    component: WSModifyApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/modify-application-edit",
    component: WSEditModifyApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/disconnection-application",
    component: WSDisconnectionDocsRequired
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/new-disconnection",
    component: WSDisconnectionApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bill-amend/inbox",
    component: props => /*#__PURE__*/React__default.createElement(WSBillIAmendMentInbox, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/water/inbox",
    component: props => /*#__PURE__*/React__default.createElement(WSInbox, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sewerage/inbox",
    component: props => /*#__PURE__*/React__default.createElement(WSInbox, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edit-application-by-config",
    component: WSEditApplicationByConfig
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/disconnection-details",
    component: WSGetDisconnectionDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/water/bill-amendment/inbox",
    component: props => /*#__PURE__*/React__default.createElement(WSBillIAmendMentInbox, _extends({}, props, {
      parentRoute: path
    }))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sewerage/bill-amendment/inbox",
    component: props => /*#__PURE__*/React__default.createElement(WSBillIAmendMentInbox, _extends({}, props, {
      parentRoute: path
    }))
  }))));
};

let actions = [];
const getAction = flow => {
  switch (flow) {
    default:
      actions = ['WS_COMMON_PROPERTY_DETAILS', 'WS_COMMON_CONNECTION_DETAIL', 'WS_COMMON_DOCUMENT_DETAILS', 'WS_COMMON_SUMMARY'];
  }
};
const Timeline = _ref => {
  let {
    currentStep = 1,
    flow = ""
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const isMobile = window.Digit.Utils.browser.isMobile();
  getAction(flow);
  return /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-container",
    style: isMobile ? {} : {
      maxWidth: "960px",
      minWidth: "640px",
      marginRight: "auto"
    }
  }, actions.map((action, index, arr) => /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-checkpoint",
    key: index
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-content"
  }, /*#__PURE__*/React__default.createElement("span", {
    className: "circle " + (index <= currentStep - 1 && 'active')
  }, index < currentStep - 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.TickMark, null) : index + 1), /*#__PURE__*/React__default.createElement("span", {
    className: "secondary-color"
  }, t(action))), index < arr.length - 1 && /*#__PURE__*/React__default.createElement("span", {
    className: "line " + (index < currentStep - 1 && 'active')
  }))));
};

const WSServiceName = _ref => {
  let {
    t,
    config,
    onSelect,
    userType,
    formData
  } = _ref;
  const [serviceName, setServiceName] = React.useState((formData === null || formData === void 0 ? void 0 : formData.serviceName) || "");
  const [formDetails, setFormDetails] = React.useState(formData || {});
  const isEdit = window.location.href.includes("/ws/edit-application/");
  const serviceNameList = [{
    i18nKey: "WS_WATER_CONNECTION_ONLY",
    code: "WATER"
  }, {
    i18nKey: "WS_SEWERAGE_CONNECTION_ONLY",
    code: "SEWERAGE"
  }, {
    i18nKey: "WS_BOTH_WATER_AND_SEWERAGE",
    code: "BOTH"
  }];
  function onAdd() {}
  function onServiceNameSelect(value) {
    setServiceName(value);
  }
  const onSkip = () => onSelect();
  const handleSubmit = () => {
    var _formDetails$serviceN;
    if ((serviceName === null || serviceName === void 0 ? void 0 : serviceName.code) == "WATER") sessionStorage.setItem("serviceName", "WATER");else if ((serviceName === null || serviceName === void 0 ? void 0 : serviceName.code) == "SEWERAGE") sessionStorage.setItem("serviceName", "SEWERAGE");else sessionStorage.setItem("serviceName", "");
    if ((serviceName === null || serviceName === void 0 ? void 0 : serviceName.code) != "BOTH" && (formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$serviceN = formDetails.serviceName) === null || _formDetails$serviceN === void 0 ? void 0 : _formDetails$serviceN.code) != (serviceName === null || serviceName === void 0 ? void 0 : serviceName.code)) {
      let data = formDetails;
      data.waterConectionDetails = {};
      data.sewerageConnectionDetails = {};
      data.serviceName = serviceName;
      onSelect("", data);
    } else {
      onSelect(config.key, serviceName);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !serviceName,
    onAdd: onAdd
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_SELECT_SERVICE_TYPE_WANT_TO_APPLY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    name: "gender",
    options: serviceNameList,
    selectedOption: serviceName,
    optionKey: "i18nKey",
    onSelect: onServiceNameSelect,
    t: t,
    disabled: isEdit
  })));
};

const WSWaterConnectionDetails = _ref => {
  var _formData$waterConect, _formData$waterConect2;
  let {
    t,
    config,
    userType,
    onSelect,
    formData
  } = _ref;
  const tenantId = Digit.ULBService.getStateId();
  const [proposedTaps, setProposedTaps] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$waterConect = formData.waterConectionDetails) === null || _formData$waterConect === void 0 ? void 0 : _formData$waterConect.proposedTaps) || "");
  const [proposedPipeSize, setProposedPipeSize] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$waterConect2 = formData.waterConectionDetails) === null || _formData$waterConect2 === void 0 ? void 0 : _formData$waterConect2.proposedPipeSize) || "");
  const [isDisableForNext, setIsDisableForNext] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [proposedPipeSizeList, setProposedPipeSizeList] = React.useState([]);
  let validation = {};
  const {
    isLoading: wsServiceCalculationLoading,
    data: wsServiceCalculation
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesCalculation(tenantId);
  React.useEffect(() => {
    var _wsServiceCalculation;
    if ((wsServiceCalculation === null || wsServiceCalculation === void 0 ? void 0 : (_wsServiceCalculation = wsServiceCalculation.PipeSize) === null || _wsServiceCalculation === void 0 ? void 0 : _wsServiceCalculation.length) > 0) {
      var _wsServiceCalculation2;
      let pipeLists = [];
      wsServiceCalculation === null || wsServiceCalculation === void 0 ? void 0 : (_wsServiceCalculation2 = wsServiceCalculation.PipeSize) === null || _wsServiceCalculation2 === void 0 ? void 0 : _wsServiceCalculation2.forEach(type => {
        pipeLists.push({
          i18nKey: type.size + " " + t("WS_INCHES_LABEL"),
          code: type.size,
          id: type.id,
          size: type.size
        });
      });
      setProposedPipeSizeList(pipeLists);
    }
  }, [wsServiceCalculation]);
  function onAdd() {}
  function setNumberOfProposedTaps(e) {
    setProposedTaps(e.target.value);
  }
  function setProposedPipeSizeSelect(value) {
    setProposedPipeSize(value);
  }
  const onSkip = () => onSelect();
  const handleSubmit = () => {
    var _formData$WaterConnec, _formData$WaterConnec2, _formData$WaterConnec3, _formData$serviceName;
    if (!(formData !== null && formData !== void 0 && formData.WaterConnectionResult && formData !== null && formData !== void 0 && (_formData$WaterConnec = formData.WaterConnectionResult) !== null && _formData$WaterConnec !== void 0 && (_formData$WaterConnec2 = _formData$WaterConnec.WaterConnection) !== null && _formData$WaterConnec2 !== void 0 && (_formData$WaterConnec3 = _formData$WaterConnec2[0]) !== null && _formData$WaterConnec3 !== void 0 && _formData$WaterConnec3.id) && (formData === null || formData === void 0 ? void 0 : (_formData$serviceName = formData.serviceName) === null || _formData$serviceName === void 0 ? void 0 : _formData$serviceName.code) === "WATER" || formData !== null && formData !== void 0 && formData.isModifyConnection) {
      setIsDisableForNext(true);
      let payload = {};
      if (formData !== null && formData !== void 0 && formData.isModifyConnection) {
        var _formData$WaterConnec4, _formData$WaterConnec5;
        payload = {
          "WaterConnection": {
            ...(formData === null || formData === void 0 ? void 0 : (_formData$WaterConnec4 = formData.WaterConnectionResult) === null || _formData$WaterConnec4 === void 0 ? void 0 : (_formData$WaterConnec5 = _formData$WaterConnec4.WaterConnection) === null || _formData$WaterConnec5 === void 0 ? void 0 : _formData$WaterConnec5[0]),
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      } else {
        var _formData$cpt, _formData$ConnectionH, _formData$ConnectionH2, _formData$ConnectionH3, _formData$ConnectionH4, _formData$ConnectionH5, _formData$ConnectionH6, _formData$ConnectionH7, _formData$ConnectionH8, _formData$ConnectionH9, _formData$ConnectionH10, _formData$ConnectionH11, _formData$cptId, _formData$cpt2, _formData$cpt2$detail, _formData$cpt3, _formData$cpt3$detail, _formData$cpt3$detail2, _formData$cpt3$detail3, _formData$cpt4, _formData$cpt4$detail;
        payload = {
          "WaterConnection": {
            "water": true,
            "sewerage": false,
            "property": {
              ...(formData === null || formData === void 0 ? void 0 : (_formData$cpt = formData.cpt) === null || _formData$cpt === void 0 ? void 0 : _formData$cpt.details)
            },
            "proposedTaps": proposedTaps,
            "proposedPipeSize": proposedPipeSize === null || proposedPipeSize === void 0 ? void 0 : proposedPipeSize.code,
            "proposedWaterClosets": null,
            "proposedToilets": null,
            "connectionHolders": formData !== null && formData !== void 0 && (_formData$ConnectionH = formData.ConnectionHolderDetails) !== null && _formData$ConnectionH !== void 0 && _formData$ConnectionH.isOwnerSame ? null : [{
              correspondenceAddress: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH2 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH2 === void 0 ? void 0 : _formData$ConnectionH2.address,
              fatherOrHusbandName: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH3 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH3 === void 0 ? void 0 : _formData$ConnectionH3.guardian,
              gender: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH4 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH4 === void 0 ? void 0 : (_formData$ConnectionH5 = _formData$ConnectionH4.gender) === null || _formData$ConnectionH5 === void 0 ? void 0 : _formData$ConnectionH5.code,
              mobileNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH6 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH6 === void 0 ? void 0 : _formData$ConnectionH6.mobileNumber,
              name: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH7 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH7 === void 0 ? void 0 : _formData$ConnectionH7.name,
              ownerType: (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH8 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH8 === void 0 ? void 0 : (_formData$ConnectionH9 = _formData$ConnectionH8.specialCategoryType) === null || _formData$ConnectionH9 === void 0 ? void 0 : _formData$ConnectionH9.code) || "NONE",
              relationship: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH10 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH10 === void 0 ? void 0 : (_formData$ConnectionH11 = _formData$ConnectionH10.relationship) === null || _formData$ConnectionH11 === void 0 ? void 0 : _formData$ConnectionH11.code,
              sameAsPropertyAddress: false
            }],
            "service": "Water",
            "roadCuttingArea": null,
            "noOfTaps": null,
            "noOfWaterClosets": null,
            "noOfToilets": null,
            "propertyId": (formData === null || formData === void 0 ? void 0 : (_formData$cptId = formData.cptId) === null || _formData$cptId === void 0 ? void 0 : _formData$cptId.id) || (formData === null || formData === void 0 ? void 0 : (_formData$cpt2 = formData.cpt) === null || _formData$cpt2 === void 0 ? void 0 : (_formData$cpt2$detail = _formData$cpt2.details) === null || _formData$cpt2$detail === void 0 ? void 0 : _formData$cpt2$detail.propertyId),
            "additionalDetails": {
              "initialMeterReading": null,
              "detailsProvidedBy": "",
              "locality": formData === null || formData === void 0 ? void 0 : (_formData$cpt3 = formData.cpt) === null || _formData$cpt3 === void 0 ? void 0 : (_formData$cpt3$detail = _formData$cpt3.details) === null || _formData$cpt3$detail === void 0 ? void 0 : (_formData$cpt3$detail2 = _formData$cpt3$detail.address) === null || _formData$cpt3$detail2 === void 0 ? void 0 : (_formData$cpt3$detail3 = _formData$cpt3$detail2.locality) === null || _formData$cpt3$detail3 === void 0 ? void 0 : _formData$cpt3$detail3.code
            },
            "tenantId": formData === null || formData === void 0 ? void 0 : (_formData$cpt4 = formData.cpt) === null || _formData$cpt4 === void 0 ? void 0 : (_formData$cpt4$detail = _formData$cpt4.details) === null || _formData$cpt4$detail === void 0 ? void 0 : _formData$cpt4$detail.tenantId,
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      }
      Digit.WSService.create(payload, "WATER").then((result, err) => {
        setIsDisableForNext(false);
        let data = {
          ...formData,
          WaterConnectionResult: result,
          waterConectionDetails: {
            proposedTaps: proposedTaps,
            proposedPipeSize: proposedPipeSize
          }
        };
        onSelect("", data, "", true);
      }).catch(e => {
        var _e$response, _e$response$data, _e$response$data$Erro;
        setIsDisableForNext(false);
        setShowToast({
          key: "error"
        });
        setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message) || null);
      });
    } else {
      let details = {};
      details.proposedTaps = proposedTaps;
      details.proposedPipeSize = proposedPipeSize;
      onSelect(config.key, details);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), !wsServiceCalculationLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !proposedTaps || !proposedPipeSize || isDisableForNext,
    onAdd: onAdd
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_NO_OF_TAPS_PROPOSED"), "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "proposedTaps",
    onChange: setNumberOfProposedTaps,
    value: proposedTaps
  }, validation = {
    isRequired: true,
    pattern: "^[1-9]+[0-9]*$",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG"),
    type: "text"
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_PROPOSED_PIPE_SIZE"), "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    name: "proposedPipeSize",
    options: proposedPipeSizeList,
    selectedOption: proposedPipeSize,
    optionKey: "i18nKey",
    onSelect: setProposedPipeSizeSelect,
    t: t
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    label: error,
    isDleteBtn: true,
    onClose: () => {
      setShowToast(null);
      setError(null);
    }
  }));
};

const WSDocsRequired = _ref => {
  var _wsDocs$Documents2;
  let {
    onSelect,
    userType,
    onSkip,
    config
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const tenantId = Digit.ULBService.getStateId();
  const goNext = () => {
    onSelect("DocsReq", "");
  };
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  sessionStorage.removeItem("FORMSTATE_ERRORS");
  const {
    isLoading: wsDocsLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(tenantId);
  if (userType === "citizen") {
    var _wsDocs$Documents;
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("WS_COMMON_APPL_NEW_CONNECTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
      style: {
        margin: "0px",
        textAlign: "center"
      },
      textStyle: {
        color: "#0B0C0C"
      },
      text: t("WS_DOCS_REQUIRED_TIME"),
      showInfo: false
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_1")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_2")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_DOC_REQ_SCREEN_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_3")), wsDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Documents = wsDocs.Documents) === null || _wsDocs$Documents === void 0 ? void 0 : _wsDocs$Documents.map((doc, index) => {
      var _doc$dropdownData;
      return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
        style: {
          fontWeight: 700,
          marginBottom: "8px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex"
        }
      }, /*#__PURE__*/React__default.createElement("div", null, index + 1 + ".", "\xA0"), /*#__PURE__*/React__default.createElement("div", null, " " + t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_'))))), /*#__PURE__*/React__default.createElement("div", {
        style: {
          marginBottom: "16px",
          marginLeft: "18px"
        }
      }, doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.map((value, index) => {
        var _doc$dropdownData2;
        return (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : _doc$dropdownData2.length) !== index + 1 ? /*#__PURE__*/React__default.createElement("span", null, t(value === null || value === void 0 ? void 0 : value.i18nKey) + ", ") : /*#__PURE__*/React__default.createElement("span", null, "" + t(value === null || value === void 0 ? void 0 : value.i18nKey));
      })));
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      label: t("CS_COMMON_NEXT"),
      onSubmit: goNext
    })));
  }
  const printDiv = () => {
    let content = document.getElementById("documents-div").innerHTML;
    if (window.mSewaApp && window.mSewaApp.isMsewaApp()) {
      window.mSewaApp.downloadBase64File(window.btoa(content), t("WS_REQ_DOCS"));
    } else {
      let printWindow = window.open("", "");
      printWindow.document.write("<html><body>" + content + "</body></html>");
      printWindow.document.close();
      printWindow.focus();
      printWindow.print();
    }
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      margin: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px",
      marginLeft: "18px",
      display: "flex",
      justifyContent: "space-between",
      marginRight: "12px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, t("WS_WATER_AND_SEWERAGE_NEW_CONNECTION_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    onClick: printDiv,
    style: {
      cursor: "pointer",
      display: "flex"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrintBtnCommon, null), /*#__PURE__*/React__default.createElement("div", {
    style: {
      fontSize: "24px",
      fontWeight: "400",
      color: "#0B0C0C"
    }
  }, "Print")))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, wsDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement("div", {
    id: "documents-div"
  }, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Documents2 = wsDocs.Documents) === null || _wsDocs$Documents2 === void 0 ? void 0 : _wsDocs$Documents2.map((doc, index) => {
    var _doc$dropdownData3;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: {
        marginTop: "16px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        marginBottom: "16px",
        lineHeight: "28px",
        fontSize: "24px"
      }
    }, t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_'))), doc.dropdownData && doc.dropdownData.length > 1 && /*#__PURE__*/React__default.createElement("p", {
      style: {
        lineHeight: "24px",
        fontSize: "16px"
      }
    }, t((doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')) + "_DESCRIPTION")), /*#__PURE__*/React__default.createElement("div", {
      style: {
        margin: "16px 0",
        lineHeight: "18px",
        fontSize: "16px"
      }
    }, doc === null || doc === void 0 ? void 0 : (_doc$dropdownData3 = doc.dropdownData) === null || _doc$dropdownData3 === void 0 ? void 0 : _doc$dropdownData3.map((value, idx) => /*#__PURE__*/React__default.createElement("p", {
      style: {
        fontWeight: "bold",
        lineHeight: "32px"
      }
    }, idx + 1 + ". " + t(value === null || value === void 0 ? void 0 : value.i18nKey)))), /*#__PURE__*/React__default.createElement("p", {
      style: {
        fontSize: "16px"
      }
    }, t((doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')) + "_BELOW_DESCRIPTION")));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ACTION_TEST_APPLY"),
    onSubmit: () => {
      history.push(match.path.replace("create-application", "new-application"));
    },
    style: {
      margin: "10px 10px 0px 0px"
    },
    disabled: wsDocsLoading ? true : false
  }))));
};

const _iteratorSymbol = /*#__PURE__*/typeof Symbol !== "undefined" ? Symbol.iterator || (Symbol.iterator = Symbol("Symbol.iterator")) : "@@iterator";
const _asyncIteratorSymbol = /*#__PURE__*/typeof Symbol !== "undefined" ? Symbol.asyncIterator || (Symbol.asyncIterator = Symbol("Symbol.asyncIterator")) : "@@asyncIterator";
function _catch(body, recover) {
  try {
    var result = body();
  } catch (e) {
    return recover(e);
  }
  if (result && result.then) {
    return result.then(void 0, recover);
  }
  return result;
}
function _finallyRethrows(body, finalizer) {
  try {
    var result = body();
  } catch (e) {
    return finalizer(true, e);
  }
  if (result && result.then) {
    return result.then(finalizer.bind(null, false), finalizer.bind(null, true));
  }
  return finalizer(false, result);
}

const WSDocumentDetails = _ref => {
  var _formData$documents, _wsDocs$Documents;
  let {
    t,
    config,
    onSelect,
    userType,
    formData,
    setError: setFormError,
    clearErrors: clearFormErrors,
    formState
  } = _ref;
  const tenantId = Digit.ULBService.getStateId();
  const [documents, setDocuments] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : _formData$documents.documents) || []);
  const [error, setError] = React.useState(null);
  const [enableSubmit, setEnableSubmit] = React.useState(true);
  const [checkRequiredFields, setCheckRequiredFields] = React.useState(false);
  const {
    isLoading: wsDocsLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(tenantId);
  const handleSubmit = () => {
    let document = formData.documents;
    let documentStep;
    documentStep = {
      ...document,
      documents: documents
    };
    onSelect(config.key, documentStep);
  };
  const onSkip = () => onSelect();
  function onAdd() {}
  React.useEffect(() => {
    let count = 0;
    wsDocs === null || wsDocs === void 0 ? void 0 : wsDocs.Documents.map(doc => {
      let isRequired = false;
      documents.map(data => {
        if (doc.required && data !== null && data !== void 0 && data.documentType.includes(doc.code)) isRequired = true;
      });
      if (!isRequired && doc.required) count = count + 1;
    });
    if ((count == "0" || count == 0) && documents.length > 0) setEnableSubmit(false);else setEnableSubmit(true);
  }, [documents, checkRequiredFields]);
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 3
  }), !wsDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: enableSubmit,
    onAdd: onAdd
  }, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Documents = wsDocs.Documents) === null || _wsDocs$Documents === void 0 ? void 0 : _wsDocs$Documents.map((document, index) => {
    return /*#__PURE__*/React__default.createElement(SelectDocument, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields
    });
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    onClose: () => setError(null),
    error: true
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null));
};
function SelectDocument(_ref2) {
  var _doc$dropdownData;
  let {
    t,
    key,
    document: doc,
    setDocuments,
    error,
    setError,
    documents,
    setCheckRequiredFields
  } = _ref2;
  const filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [selectedDocument, setSelectedDocument] = React.useState(filteredDocument ? {
    ...filteredDocument,
    active: true,
    code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
    i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
  } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const handleSelectDocument = value => setSelectedDocument(value);
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(prev => {
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code));
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) return filteredDocumentsByDocumentType;
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        return [...filteredDocumentsByFileStoreId, {
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          documentUid: (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentUid) || null,
          id: (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.id) || null,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
          status: "ACTIVE"
        }];
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp = _catch(function () {
                  setUploadedFile(null);
                  return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0])).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, doc !== null && doc !== void 0 && doc.required ? t(doc === null || doc === void 0 ? void 0 : doc.i18nKey) + " *" : "" + t(doc === null || doc === void 0 ? void 0 : doc.i18nKey)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    isMandatory: false,
    option: doc === null || doc === void 0 ? void 0 : doc.dropdownData,
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    id: "noc-doc-" + key,
    extraStyleName: "propertyCreate",
    accept: "image/*, .pdf, .png, .jpeg, .jpg",
    onUpload: selectfile,
    onDelete: () => {
      setUploadedFile(null);
      setCheckRequiredFields(true);
    },
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("ES_NO_FILE_SELECTED_LABEL"),
    error: error
  }));
}

const WSSewerageConnectionDetails = _ref => {
  var _formData$sewerageCon, _formData$sewerageCon2;
  let {
    t,
    config,
    userType,
    onSelect,
    formData
  } = _ref;
  const [proposedWaterClosets, setProposedWaterClosets] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$sewerageCon = formData.sewerageConnectionDetails) === null || _formData$sewerageCon === void 0 ? void 0 : _formData$sewerageCon.proposedWaterClosets) || "");
  const [proposedToilets, setProposedToilets] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$sewerageCon2 = formData.sewerageConnectionDetails) === null || _formData$sewerageCon2 === void 0 ? void 0 : _formData$sewerageCon2.proposedToilets) || "");
  const [isDisableForNext, setIsDisableForNext] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [error, setError] = React.useState(null);
  let validation = {};
  function onAdd() {}
  function setNumberOfProposedWaterClosets(e) {
    setProposedWaterClosets(e.target.value);
  }
  function setNumberOfProposedToilets(e) {
    setProposedToilets(e.target.value);
  }
  const onSkip = () => onSelect();
  const handleSubmit = () => {
    var _formData$SewerageCon, _formData$SewerageCon2, _formData$SewerageCon3, _formData$serviceName, _formData$SewerageCon6, _formData$SewerageCon7, _formData$WaterConnec, _formData$WaterConnec2, _formData$serviceName2;
    if ((!(formData !== null && formData !== void 0 && formData.SewerageConnectionResult && formData !== null && formData !== void 0 && (_formData$SewerageCon = formData.SewerageConnectionResult) !== null && _formData$SewerageCon !== void 0 && (_formData$SewerageCon2 = _formData$SewerageCon.SewerageConnections) !== null && _formData$SewerageCon2 !== void 0 && (_formData$SewerageCon3 = _formData$SewerageCon2[0]) !== null && _formData$SewerageCon3 !== void 0 && _formData$SewerageCon3.id) || formData !== null && formData !== void 0 && formData.isModifyConnection) && (formData === null || formData === void 0 ? void 0 : (_formData$serviceName = formData.serviceName) === null || _formData$serviceName === void 0 ? void 0 : _formData$serviceName.code) === "SEWERAGE") {
      setIsDisableForNext(true);
      let payload = {};
      if (formData !== null && formData !== void 0 && formData.isModifyConnection) {
        var _formData$SewerageCon4, _formData$SewerageCon5;
        payload = {
          "SewerageConnection": {
            ...(formData === null || formData === void 0 ? void 0 : (_formData$SewerageCon4 = formData.SewerageConnectionResult) === null || _formData$SewerageCon4 === void 0 ? void 0 : (_formData$SewerageCon5 = _formData$SewerageCon4.SewerageConnections) === null || _formData$SewerageCon5 === void 0 ? void 0 : _formData$SewerageCon5[0]),
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      } else {
        var _formData$cpt, _formData$ConnectionH, _formData$ConnectionH2, _formData$ConnectionH3, _formData$ConnectionH4, _formData$ConnectionH5, _formData$ConnectionH6, _formData$ConnectionH7, _formData$ConnectionH8, _formData$ConnectionH9, _formData$ConnectionH10, _formData$ConnectionH11, _formData$cptId, _formData$cpt2, _formData$cpt2$detail, _formData$cpt3, _formData$cpt3$detail, _formData$cpt3$detail2, _formData$cpt3$detail3, _formData$cpt4, _formData$cpt4$detail;
        payload = {
          "SewerageConnection": {
            "water": false,
            "sewerage": true,
            "property": {
              ...(formData === null || formData === void 0 ? void 0 : (_formData$cpt = formData.cpt) === null || _formData$cpt === void 0 ? void 0 : _formData$cpt.details)
            },
            "proposedTaps": null,
            "proposedPipeSize": null,
            "proposedWaterClosets": parseInt(proposedWaterClosets),
            "proposedToilets": parseInt(proposedToilets),
            "connectionHolders": formData !== null && formData !== void 0 && (_formData$ConnectionH = formData.ConnectionHolderDetails) !== null && _formData$ConnectionH !== void 0 && _formData$ConnectionH.isOwnerSame ? null : [{
              correspondenceAddress: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH2 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH2 === void 0 ? void 0 : _formData$ConnectionH2.address,
              fatherOrHusbandName: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH3 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH3 === void 0 ? void 0 : _formData$ConnectionH3.guardian,
              gender: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH4 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH4 === void 0 ? void 0 : (_formData$ConnectionH5 = _formData$ConnectionH4.gender) === null || _formData$ConnectionH5 === void 0 ? void 0 : _formData$ConnectionH5.code,
              mobileNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH6 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH6 === void 0 ? void 0 : _formData$ConnectionH6.mobileNumber,
              name: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH7 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH7 === void 0 ? void 0 : _formData$ConnectionH7.name,
              ownerType: (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH8 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH8 === void 0 ? void 0 : (_formData$ConnectionH9 = _formData$ConnectionH8.specialCategoryType) === null || _formData$ConnectionH9 === void 0 ? void 0 : _formData$ConnectionH9.code) || "NONE",
              relationship: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH10 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH10 === void 0 ? void 0 : (_formData$ConnectionH11 = _formData$ConnectionH10.relationship) === null || _formData$ConnectionH11 === void 0 ? void 0 : _formData$ConnectionH11.code,
              sameAsPropertyAddress: false
            }],
            "service": "Sewerage",
            "roadCuttingArea": null,
            "noOfTaps": null,
            "noOfWaterClosets": null,
            "noOfToilets": null,
            "propertyId": (formData === null || formData === void 0 ? void 0 : (_formData$cptId = formData.cptId) === null || _formData$cptId === void 0 ? void 0 : _formData$cptId.id) || (formData === null || formData === void 0 ? void 0 : (_formData$cpt2 = formData.cpt) === null || _formData$cpt2 === void 0 ? void 0 : (_formData$cpt2$detail = _formData$cpt2.details) === null || _formData$cpt2$detail === void 0 ? void 0 : _formData$cpt2$detail.propertyId),
            "additionalDetails": {
              "initialMeterReading": null,
              "detailsProvidedBy": "",
              "locality": formData === null || formData === void 0 ? void 0 : (_formData$cpt3 = formData.cpt) === null || _formData$cpt3 === void 0 ? void 0 : (_formData$cpt3$detail = _formData$cpt3.details) === null || _formData$cpt3$detail === void 0 ? void 0 : (_formData$cpt3$detail2 = _formData$cpt3$detail.address) === null || _formData$cpt3$detail2 === void 0 ? void 0 : (_formData$cpt3$detail3 = _formData$cpt3$detail2.locality) === null || _formData$cpt3$detail3 === void 0 ? void 0 : _formData$cpt3$detail3.code
            },
            "tenantId": formData === null || formData === void 0 ? void 0 : (_formData$cpt4 = formData.cpt) === null || _formData$cpt4 === void 0 ? void 0 : (_formData$cpt4$detail = _formData$cpt4.details) === null || _formData$cpt4$detail === void 0 ? void 0 : _formData$cpt4$detail.tenantId,
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      }
      Digit.WSService.create(payload, "SEWERAGE").then((result, err) => {
        setIsDisableForNext(false);
        let data = {
          ...formData,
          SewerageConnectionResult: result,
          sewerageConnectionDetails: {
            proposedWaterClosets: proposedWaterClosets,
            proposedToilets: proposedToilets
          }
        };
        onSelect("", data, "", true);
      }).catch(e => {
        var _e$response, _e$response$data, _e$response$data$Erro;
        setIsDisableForNext(false);
        setShowToast({
          key: "error"
        });
        setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message) || null);
      });
    } else if ((!(formData !== null && formData !== void 0 && formData.SewerageConnectionResult && formData !== null && formData !== void 0 && (_formData$SewerageCon6 = formData.SewerageConnectionResult) !== null && _formData$SewerageCon6 !== void 0 && (_formData$SewerageCon7 = _formData$SewerageCon6.SewerageConnection) !== null && _formData$SewerageCon7 !== void 0 && _formData$SewerageCon7.id) && !(formData !== null && formData !== void 0 && formData.WaterConnectionResult && formData !== null && formData !== void 0 && (_formData$WaterConnec = formData.WaterConnectionResult) !== null && _formData$WaterConnec !== void 0 && (_formData$WaterConnec2 = _formData$WaterConnec.WaterConnection) !== null && _formData$WaterConnec2 !== void 0 && _formData$WaterConnec2.id) || formData !== null && formData !== void 0 && formData.isModifyConnection) && (formData === null || formData === void 0 ? void 0 : (_formData$serviceName2 = formData.serviceName) === null || _formData$serviceName2 === void 0 ? void 0 : _formData$serviceName2.code) === "BOTH") {
      setIsDisableForNext(true);
      let payload1 = {};
      if (formData !== null && formData !== void 0 && formData.isModifyConnection) {
        var _formData$WaterConnec3, _formData$WaterConnec4;
        payload = {
          "WaterConnection": {
            ...(formData === null || formData === void 0 ? void 0 : (_formData$WaterConnec3 = formData.WaterConnectionResult) === null || _formData$WaterConnec3 === void 0 ? void 0 : (_formData$WaterConnec4 = _formData$WaterConnec3.WaterConnection) === null || _formData$WaterConnec4 === void 0 ? void 0 : _formData$WaterConnec4[0]),
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      } else {
        var _formData$cpt5, _formData$waterConect, _formData$waterConect2, _formData$waterConect3, _formData$ConnectionH12, _formData$ConnectionH13, _formData$ConnectionH14, _formData$ConnectionH15, _formData$ConnectionH16, _formData$ConnectionH17, _formData$ConnectionH18, _formData$ConnectionH19, _formData$ConnectionH20, _formData$ConnectionH21, _formData$ConnectionH22, _formData$cptId2, _formData$cpt6, _formData$cpt6$detail, _formData$cpt7, _formData$cpt7$detail, _formData$cpt7$detail2, _formData$cpt7$detail3, _formData$cpt8, _formData$cpt8$detail;
        payload1 = {
          "WaterConnection": {
            "water": true,
            "sewerage": true,
            "property": {
              ...(formData === null || formData === void 0 ? void 0 : (_formData$cpt5 = formData.cpt) === null || _formData$cpt5 === void 0 ? void 0 : _formData$cpt5.details)
            },
            "proposedTaps": formData === null || formData === void 0 ? void 0 : (_formData$waterConect = formData.waterConectionDetails) === null || _formData$waterConect === void 0 ? void 0 : _formData$waterConect.proposedTaps,
            "proposedPipeSize": formData === null || formData === void 0 ? void 0 : (_formData$waterConect2 = formData.waterConectionDetails) === null || _formData$waterConect2 === void 0 ? void 0 : (_formData$waterConect3 = _formData$waterConect2.proposedPipeSize) === null || _formData$waterConect3 === void 0 ? void 0 : _formData$waterConect3.code,
            "proposedWaterClosets": parseInt(proposedWaterClosets),
            "proposedToilets": parseInt(proposedToilets),
            "connectionHolders": formData !== null && formData !== void 0 && (_formData$ConnectionH12 = formData.ConnectionHolderDetails) !== null && _formData$ConnectionH12 !== void 0 && _formData$ConnectionH12.isOwnerSame ? null : [{
              correspondenceAddress: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH13 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH13 === void 0 ? void 0 : _formData$ConnectionH13.address,
              fatherOrHusbandName: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH14 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH14 === void 0 ? void 0 : _formData$ConnectionH14.guardian,
              gender: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH15 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH15 === void 0 ? void 0 : (_formData$ConnectionH16 = _formData$ConnectionH15.gender) === null || _formData$ConnectionH16 === void 0 ? void 0 : _formData$ConnectionH16.code,
              mobileNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH17 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH17 === void 0 ? void 0 : _formData$ConnectionH17.mobileNumber,
              name: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH18 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH18 === void 0 ? void 0 : _formData$ConnectionH18.name,
              ownerType: (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH19 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH19 === void 0 ? void 0 : (_formData$ConnectionH20 = _formData$ConnectionH19.specialCategoryType) === null || _formData$ConnectionH20 === void 0 ? void 0 : _formData$ConnectionH20.code) || "NONE",
              relationship: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH21 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH21 === void 0 ? void 0 : (_formData$ConnectionH22 = _formData$ConnectionH21.relationship) === null || _formData$ConnectionH22 === void 0 ? void 0 : _formData$ConnectionH22.code,
              sameAsPropertyAddress: false
            }],
            "service": "Water and Sewerage",
            "roadCuttingArea": null,
            "noOfTaps": null,
            "noOfWaterClosets": null,
            "noOfToilets": null,
            "propertyId": (formData === null || formData === void 0 ? void 0 : (_formData$cptId2 = formData.cptId) === null || _formData$cptId2 === void 0 ? void 0 : _formData$cptId2.id) || (formData === null || formData === void 0 ? void 0 : (_formData$cpt6 = formData.cpt) === null || _formData$cpt6 === void 0 ? void 0 : (_formData$cpt6$detail = _formData$cpt6.details) === null || _formData$cpt6$detail === void 0 ? void 0 : _formData$cpt6$detail.propertyId),
            "additionalDetails": {
              "initialMeterReading": null,
              "detailsProvidedBy": "",
              "locality": formData === null || formData === void 0 ? void 0 : (_formData$cpt7 = formData.cpt) === null || _formData$cpt7 === void 0 ? void 0 : (_formData$cpt7$detail = _formData$cpt7.details) === null || _formData$cpt7$detail === void 0 ? void 0 : (_formData$cpt7$detail2 = _formData$cpt7$detail.address) === null || _formData$cpt7$detail2 === void 0 ? void 0 : (_formData$cpt7$detail3 = _formData$cpt7$detail2.locality) === null || _formData$cpt7$detail3 === void 0 ? void 0 : _formData$cpt7$detail3.code
            },
            "tenantId": formData === null || formData === void 0 ? void 0 : (_formData$cpt8 = formData.cpt) === null || _formData$cpt8 === void 0 ? void 0 : (_formData$cpt8$detail = _formData$cpt8.details) === null || _formData$cpt8$detail === void 0 ? void 0 : _formData$cpt8$detail.tenantId,
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      }
      let payload2 = {};
      if (formData !== null && formData !== void 0 && formData.isModifyConnection) {
        var _formData$SewerageCon8, _formData$SewerageCon9;
        payload2 = {
          "SewerageConnection": {
            ...(formData === null || formData === void 0 ? void 0 : (_formData$SewerageCon8 = formData.SewerageConnectionResult) === null || _formData$SewerageCon8 === void 0 ? void 0 : (_formData$SewerageCon9 = _formData$SewerageCon8.SewerageConnections) === null || _formData$SewerageCon9 === void 0 ? void 0 : _formData$SewerageCon9[0]),
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      } else {
        var _formData$cpt9, _formData$waterConect4, _formData$waterConect5, _formData$waterConect6, _formData$ConnectionH23, _formData$ConnectionH24, _formData$ConnectionH25, _formData$ConnectionH26, _formData$ConnectionH27, _formData$ConnectionH28, _formData$ConnectionH29, _formData$ConnectionH30, _formData$ConnectionH31, _formData$ConnectionH32, _formData$ConnectionH33, _formData$cptId3, _formData$cpt10, _formData$cpt10$detai, _formData$cpt11, _formData$cpt11$detai, _formData$cpt11$detai2, _formData$cpt11$detai3, _formData$cpt12, _formData$cpt12$detai;
        payload2 = {
          "SewerageConnection": {
            "water": true,
            "sewerage": true,
            "property": {
              ...(formData === null || formData === void 0 ? void 0 : (_formData$cpt9 = formData.cpt) === null || _formData$cpt9 === void 0 ? void 0 : _formData$cpt9.details)
            },
            "proposedTaps": formData === null || formData === void 0 ? void 0 : (_formData$waterConect4 = formData.waterConectionDetails) === null || _formData$waterConect4 === void 0 ? void 0 : _formData$waterConect4.proposedTaps,
            "proposedPipeSize": formData === null || formData === void 0 ? void 0 : (_formData$waterConect5 = formData.waterConectionDetails) === null || _formData$waterConect5 === void 0 ? void 0 : (_formData$waterConect6 = _formData$waterConect5.proposedPipeSize) === null || _formData$waterConect6 === void 0 ? void 0 : _formData$waterConect6.code,
            "proposedWaterClosets": parseInt(proposedWaterClosets),
            "proposedToilets": parseInt(proposedToilets),
            "connectionHolders": formData !== null && formData !== void 0 && (_formData$ConnectionH23 = formData.ConnectionHolderDetails) !== null && _formData$ConnectionH23 !== void 0 && _formData$ConnectionH23.isOwnerSame ? null : [{
              correspondenceAddress: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH24 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH24 === void 0 ? void 0 : _formData$ConnectionH24.address,
              fatherOrHusbandName: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH25 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH25 === void 0 ? void 0 : _formData$ConnectionH25.guardian,
              gender: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH26 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH26 === void 0 ? void 0 : (_formData$ConnectionH27 = _formData$ConnectionH26.gender) === null || _formData$ConnectionH27 === void 0 ? void 0 : _formData$ConnectionH27.code,
              mobileNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH28 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH28 === void 0 ? void 0 : _formData$ConnectionH28.mobileNumber,
              name: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH29 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH29 === void 0 ? void 0 : _formData$ConnectionH29.name,
              ownerType: (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH30 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH30 === void 0 ? void 0 : (_formData$ConnectionH31 = _formData$ConnectionH30.specialCategoryType) === null || _formData$ConnectionH31 === void 0 ? void 0 : _formData$ConnectionH31.code) || "NONE",
              relationship: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH32 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH32 === void 0 ? void 0 : (_formData$ConnectionH33 = _formData$ConnectionH32.relationship) === null || _formData$ConnectionH33 === void 0 ? void 0 : _formData$ConnectionH33.code,
              sameAsPropertyAddress: false
            }],
            "service": "Water and Sewerage",
            "roadCuttingArea": null,
            "noOfTaps": null,
            "noOfWaterClosets": null,
            "noOfToilets": null,
            "propertyId": (formData === null || formData === void 0 ? void 0 : (_formData$cptId3 = formData.cptId) === null || _formData$cptId3 === void 0 ? void 0 : _formData$cptId3.id) || (formData === null || formData === void 0 ? void 0 : (_formData$cpt10 = formData.cpt) === null || _formData$cpt10 === void 0 ? void 0 : (_formData$cpt10$detai = _formData$cpt10.details) === null || _formData$cpt10$detai === void 0 ? void 0 : _formData$cpt10$detai.propertyId),
            "additionalDetails": {
              "initialMeterReading": null,
              "detailsProvidedBy": "",
              "locality": formData === null || formData === void 0 ? void 0 : (_formData$cpt11 = formData.cpt) === null || _formData$cpt11 === void 0 ? void 0 : (_formData$cpt11$detai = _formData$cpt11.details) === null || _formData$cpt11$detai === void 0 ? void 0 : (_formData$cpt11$detai2 = _formData$cpt11$detai.address) === null || _formData$cpt11$detai2 === void 0 ? void 0 : (_formData$cpt11$detai3 = _formData$cpt11$detai2.locality) === null || _formData$cpt11$detai3 === void 0 ? void 0 : _formData$cpt11$detai3.code
            },
            "tenantId": formData === null || formData === void 0 ? void 0 : (_formData$cpt12 = formData.cpt) === null || _formData$cpt12 === void 0 ? void 0 : (_formData$cpt12$detai = _formData$cpt12.details) === null || _formData$cpt12$detai === void 0 ? void 0 : _formData$cpt12$detai.tenantId,
            "processInstance": {
              "action": "INITIATE"
            },
            "channel": "CITIZEN"
          }
        };
      }
      Digit.WSService.create(payload1, "WATER").then((result1, err) => {
        Digit.WSService.create(payload2, "SEWERAGE").then((result2, err) => {
          setIsDisableForNext(false);
          let data = {
            ...formData,
            WaterConnectionResult: result1,
            SewerageConnectionResult: result2,
            sewerageConnectionDetails: {
              proposedWaterClosets: proposedWaterClosets,
              proposedToilets: proposedToilets
            }
          };
          onSelect("", data, "", true);
        }).catch(e => {
          var _e$response2, _e$response2$data, _e$response2$data$Err;
          setIsDisableForNext(false);
          setShowToast({
            key: "error"
          });
          setError((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : (_e$response2$data$Err = _e$response2$data.Errors[0]) === null || _e$response2$data$Err === void 0 ? void 0 : _e$response2$data$Err.message) || null);
        });
      }).catch(e => {
        var _e$response3, _e$response3$data, _e$response3$data$Err;
        setIsDisableForNext(false);
        setShowToast({
          key: "error"
        });
        setError((e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : (_e$response3$data$Err = _e$response3$data.Errors[0]) === null || _e$response3$data$Err === void 0 ? void 0 : _e$response3$data$Err.message) || null);
      });
    } else {
      let details = {};
      details.proposedWaterClosets = proposedWaterClosets;
      details.proposedToilets = proposedToilets;
      onSelect(config.key, details);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !proposedWaterClosets || !proposedToilets || isDisableForNext,
    onAdd: onAdd
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_NO_OF_WATER_CLOSETS"), "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    type: "number",
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "proposedWaterClosets",
    onChange: setNumberOfProposedWaterClosets,
    value: proposedWaterClosets
  }, validation = {
    isRequired: true,
    pattern: "^[1-9]+[0-9]*$",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_SERV_DETAIL_NO_OF_TOILETS"), "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    type: "number",
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "proposedToilets",
    onChange: setNumberOfProposedToilets,
    value: proposedToilets
  }, validation = {
    isRequired: true,
    pattern: "^[1-9]+[0-9]*$",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG")
  }))), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    label: error,
    isDleteBtn: true,
    onClose: () => {
      setShowToast(null);
      setError(null);
    }
  }));
};

const WSPlumberPreference = _ref => {
  var _formData$plumberPref;
  let {
    t,
    config,
    onSelect,
    userType,
    formData
  } = _ref;
  const [plumberPreference, setPlumberPreference] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$plumberPref = formData.plumberPreference) === null || _formData$plumberPref === void 0 ? void 0 : _formData$plumberPref.plumberPreference) || {
    i18nKey: "WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE",
    code: "ULB"
  });
  const plumberPreferenceList = [{
    i18nKey: "WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE",
    code: "ULB"
  }, {
    i18nKey: "WS_I_WILL_ARRAGE_THE_PLUMBER_MYSELF",
    code: "Self"
  }];
  function onAdd() {}
  function onPlumberPreferenceSelect(value) {
    setPlumberPreference(value);
  }
  const onSkip = () => onSelect();
  const handleSubmit = () => {
    let plumberDetails = {
      plumberPreference: plumberPreference
    };
    onSelect(config.key, plumberDetails);
  };
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !plumberPreference,
    onAdd: onAdd
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    name: "plumberPreference",
    options: plumberPreferenceList,
    selectedOption: plumberPreference,
    optionKey: "i18nKey",
    onSelect: onPlumberPreferenceSelect,
    t: t,
    innerStyles: {
      display: "flex"
    },
    inputStyle: {
      marginTop: "10px"
    }
  })));
};

const WSConnectionHolder = _ref => {
  var _formData$ConnectionH, _formData$formData, _formData$formData$Co, _formData$ConnectionH2, _formData$formData2, _formData$formData2$C, _formData$ConnectionH3, _formData$formData3, _formData$formData3$C, _formData$ConnectionH4, _formData$formData4, _formData$formData4$C, _formData$ConnectionH5, _formData$formData5, _formData$formData5$C, _formData$ConnectionH6, _formData$formData6, _formData$formData6$C, _formData$ConnectionH7, _formData$formData7, _formData$formData7$C, _formData$ConnectionH8, _formData$formData8, _formData$formData8$C, _formData$config$key, _formData$ConnectionH9, _formData$ConnectionH10, _Documentsob$Property;
  let {
    t,
    config,
    onSelect,
    userType,
    formData,
    ownerIndex
  } = _ref;
  let validation = {};
  const [name, setName] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH = formData.ConnectionHolderDetails) === null || _formData$ConnectionH === void 0 ? void 0 : _formData$ConnectionH.name) || (formData === null || formData === void 0 ? void 0 : (_formData$formData = formData.formData) === null || _formData$formData === void 0 ? void 0 : (_formData$formData$Co = _formData$formData.ConnectionHolderDetails) === null || _formData$formData$Co === void 0 ? void 0 : _formData$formData$Co.name) || "");
  const [guardian, setguardian] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH2 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH2 === void 0 ? void 0 : _formData$ConnectionH2.guardian) || (formData === null || formData === void 0 ? void 0 : (_formData$formData2 = formData.formData) === null || _formData$formData2 === void 0 ? void 0 : (_formData$formData2$C = _formData$formData2.ConnectionHolderDetails) === null || _formData$formData2$C === void 0 ? void 0 : _formData$formData2$C.guardian) || "");
  const [gender, setGender] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH3 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH3 === void 0 ? void 0 : _formData$ConnectionH3.gender) || (formData === null || formData === void 0 ? void 0 : (_formData$formData3 = formData.formData) === null || _formData$formData3 === void 0 ? void 0 : (_formData$formData3$C = _formData$formData3.ConnectionHolderDetails) === null || _formData$formData3$C === void 0 ? void 0 : _formData$formData3$C.gender));
  const [relationship, setrelationship] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH4 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH4 === void 0 ? void 0 : _formData$ConnectionH4.relationship) || (formData === null || formData === void 0 ? void 0 : (_formData$formData4 = formData.formData) === null || _formData$formData4 === void 0 ? void 0 : (_formData$formData4$C = _formData$formData4.ConnectionHolderDetails) === null || _formData$formData4$C === void 0 ? void 0 : _formData$formData4$C.relationship));
  const [mobileNumber, setMobileNumber] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH5 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH5 === void 0 ? void 0 : _formData$ConnectionH5.mobileNumber) || (formData === null || formData === void 0 ? void 0 : (_formData$formData5 = formData.formData) === null || _formData$formData5 === void 0 ? void 0 : (_formData$formData5$C = _formData$formData5.ConnectionHolderDetails) === null || _formData$formData5$C === void 0 ? void 0 : _formData$formData5$C.mobileNumber) || "");
  const [address, setaddress] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH6 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH6 === void 0 ? void 0 : _formData$ConnectionH6.address) || (formData === null || formData === void 0 ? void 0 : (_formData$formData6 = formData.formData) === null || _formData$formData6 === void 0 ? void 0 : (_formData$formData6$C = _formData$formData6.ConnectionHolderDetails) === null || _formData$formData6$C === void 0 ? void 0 : _formData$formData6$C.address) || "");
  const [documentId, setdocumentId] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH7 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH7 === void 0 ? void 0 : _formData$ConnectionH7.documentId) || (formData === null || formData === void 0 ? void 0 : (_formData$formData7 = formData.formData) === null || _formData$formData7 === void 0 ? void 0 : (_formData$formData7$C = _formData$formData7.ConnectionHolderDetails) === null || _formData$formData7$C === void 0 ? void 0 : _formData$formData7$C.documentId) || "");
  const [isOwnerSame, setisOwnerSame] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH8 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH8 === void 0 ? void 0 : _formData$ConnectionH8.isOwnerSame) == false || (formData === null || formData === void 0 ? void 0 : (_formData$formData8 = formData.formData) === null || _formData$formData8 === void 0 ? void 0 : (_formData$formData8$C = _formData$formData8.ConnectionHolderDetails) === null || _formData$formData8$C === void 0 ? void 0 : _formData$formData8$C.isOwnerSame) == false ? false : true);
  const [uploadedFile, setUploadedFile] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$config$key = formData[config.key]) === null || _formData$config$key === void 0 ? void 0 : _formData$config$key.fileStoreId) || null);
  const [file, setFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [dropdownValue, setDropdownValue] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH9 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH9 === void 0 ? void 0 : _formData$ConnectionH9.documentType) || "");
  const [ownerType, setOwnerType] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH10 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH10 === void 0 ? void 0 : _formData$ConnectionH10.specialCategoryType) || {});
  let isMobile = window.Digit.Utils.browser.isMobile();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const stateId = Digit.ULBService.getStateId();
  let dropdownData = [];
  const {
    data: Documentsob = {}
  } = Digit.Hooks.pt.usePropertyMDMS(stateId, "PropertyTax", "Documents");
  const docs = Documentsob === null || Documentsob === void 0 ? void 0 : (_Documentsob$Property = Documentsob.PropertyTax) === null || _Documentsob$Property === void 0 ? void 0 : _Documentsob$Property.Documents;
  const specialProofIdentity = Array.isArray(docs) && docs.filter(doc => doc.code.includes("SPECIALCATEGORYPROOF"));
  if (specialProofIdentity.length > 0) {
    var _specialProofIdentity, _dropdownData;
    dropdownData = (_specialProofIdentity = specialProofIdentity[0]) === null || _specialProofIdentity === void 0 ? void 0 : _specialProofIdentity.dropdownData;
    dropdownData.forEach(data => {
      data.i18nKey = stringReplaceAll(data.code, ".", "_");
    });
    dropdownData = (_dropdownData = dropdownData) === null || _dropdownData === void 0 ? void 0 : _dropdownData.filter(dropdown => dropdown.parentValue.includes(ownerType === null || ownerType === void 0 ? void 0 : ownerType.code));
    if (dropdownData.length == 1 && dropdownValue != dropdownData[0]) {
      setTypeOfDropdownValue(dropdownData[0]);
    }
  }
  const GuardianOptions = [{
    name: "Father",
    code: "FATHER",
    i18nKey: "COMMON_MASTERS_OWNERTYPE_FATHER"
  }, {
    name: "HUSBAND",
    code: "HUSBAND",
    i18nKey: "COMMON_MASTERS_OWNERTYPE_HUSBAND"
  }];
  const {
    isLoading,
    data: genderTypeData
  } = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["GenderType"]);
  const {
    data: Menu,
    isLoading: isSpecialcategoryLoading
  } = Digit.Hooks.pt.usePropertyMDMS(stateId, "PropertyTax", "OwnerType");
  Menu ? Menu.sort((a, b) => a.name.localeCompare(b.name)) : "";
  let menu = [];
  genderTypeData && genderTypeData["common-masters"].GenderType.filter(data => data.active).map(genderDetails => {
    menu.push({
      i18nKey: "COMMON_GENDER_" + genderDetails.code,
      code: "" + genderDetails.code,
      value: "" + genderDetails.code
    });
  });
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 2000000) {
                setError(t("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp = _catch(function () {
                  return Promise.resolve(Digit.UploadServices.Filestorage("property-upload", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("PT_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("PT_FILE_UPLOAD_ERROR"));
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function selectChecked(e) {
    setisOwnerSame(!isOwnerSame);
  }
  function setTypeOfDropdownValue(dropdownValue) {
    setDropdownValue(dropdownValue);
  }
  function SelectName(e) {
    setName(e.target.value);
  }
  function selectguardian(e) {
    setguardian(e.target.value);
  }
  function setGenderName(value) {
    setGender(value);
  }
  function setRelationshipName(value) {
    setrelationship(value);
  }
  function setMobileNo(e) {
    setMobileNumber(e.target.value);
  }
  function selectaddress(e) {
    setaddress(e.target.value);
  }
  function setTypeOfOwner(value) {
    setOwnerType(value);
  }
  const goNext = () => {
    if (isOwnerSame == true) {
      var _formData$cpt, _formData$cpt$details, _formData$cpt$details2, _formData$cpt$details3, _formData$cpt2, _formData$cpt2$detail, _formData$cpt2$detail2, _formData$cpt2$detail3, _formData$cpt3, _formData$cpt3$detail, _formData$cpt3$detail2, _formData$cpt3$detail3, _formData$cpt4, _formData$cpt4$detail, _formData$cpt4$detail2, _formData$cpt4$detail3, _formData$cpt5, _formData$cpt5$detail, _formData$cpt5$detail2, _formData$cpt5$detail3, _formData$cpt6, _formData$cpt6$detail, _formData$cpt6$detail2, _formData$cpt6$detail3, _formData$cpt7, _formData$cpt7$detail, _formData$cpt7$detail2, _formData$cpt7$detail3, _formData$cpt8, _formData$cpt8$detail, _formData$cpt8$detail2, _formData$cpt8$detail3, _formData$cpt9, _formData$cpt9$detail, _formData$cpt9$detail2, _formData$cpt9$detail3, _formData$cpt10, _formData$cpt10$detai, _formData$cpt10$detai2, _formData$cpt10$detai3;
      let ConnectionDet = {
        isOwnerSame: isOwnerSame,
        name: formData === null || formData === void 0 ? void 0 : (_formData$cpt = formData.cpt) === null || _formData$cpt === void 0 ? void 0 : (_formData$cpt$details = _formData$cpt.details) === null || _formData$cpt$details === void 0 ? void 0 : (_formData$cpt$details2 = _formData$cpt$details.owners) === null || _formData$cpt$details2 === void 0 ? void 0 : (_formData$cpt$details3 = _formData$cpt$details2[0]) === null || _formData$cpt$details3 === void 0 ? void 0 : _formData$cpt$details3.name,
        mobileNumber: formData === null || formData === void 0 ? void 0 : (_formData$cpt2 = formData.cpt) === null || _formData$cpt2 === void 0 ? void 0 : (_formData$cpt2$detail = _formData$cpt2.details) === null || _formData$cpt2$detail === void 0 ? void 0 : (_formData$cpt2$detail2 = _formData$cpt2$detail.owners) === null || _formData$cpt2$detail2 === void 0 ? void 0 : (_formData$cpt2$detail3 = _formData$cpt2$detail2[0]) === null || _formData$cpt2$detail3 === void 0 ? void 0 : _formData$cpt2$detail3.mobileNumber,
        gender: formData !== null && formData !== void 0 && (_formData$cpt3 = formData.cpt) !== null && _formData$cpt3 !== void 0 && (_formData$cpt3$detail = _formData$cpt3.details) !== null && _formData$cpt3$detail !== void 0 && (_formData$cpt3$detail2 = _formData$cpt3$detail.owners) !== null && _formData$cpt3$detail2 !== void 0 && (_formData$cpt3$detail3 = _formData$cpt3$detail2[0]) !== null && _formData$cpt3$detail3 !== void 0 && _formData$cpt3$detail3.gender ? {
          code: formData === null || formData === void 0 ? void 0 : (_formData$cpt4 = formData.cpt) === null || _formData$cpt4 === void 0 ? void 0 : (_formData$cpt4$detail = _formData$cpt4.details) === null || _formData$cpt4$detail === void 0 ? void 0 : (_formData$cpt4$detail2 = _formData$cpt4$detail.owners) === null || _formData$cpt4$detail2 === void 0 ? void 0 : (_formData$cpt4$detail3 = _formData$cpt4$detail2[0]) === null || _formData$cpt4$detail3 === void 0 ? void 0 : _formData$cpt4$detail3.gender,
          i18nKey: "COMMON_GENDER_" + (formData === null || formData === void 0 ? void 0 : (_formData$cpt5 = formData.cpt) === null || _formData$cpt5 === void 0 ? void 0 : (_formData$cpt5$detail = _formData$cpt5.details) === null || _formData$cpt5$detail === void 0 ? void 0 : (_formData$cpt5$detail2 = _formData$cpt5$detail.owners) === null || _formData$cpt5$detail2 === void 0 ? void 0 : (_formData$cpt5$detail3 = _formData$cpt5$detail2[0]) === null || _formData$cpt5$detail3 === void 0 ? void 0 : _formData$cpt5$detail3.gender)
        } : null,
        guardian: formData === null || formData === void 0 ? void 0 : (_formData$cpt6 = formData.cpt) === null || _formData$cpt6 === void 0 ? void 0 : (_formData$cpt6$detail = _formData$cpt6.details) === null || _formData$cpt6$detail === void 0 ? void 0 : (_formData$cpt6$detail2 = _formData$cpt6$detail.owners) === null || _formData$cpt6$detail2 === void 0 ? void 0 : (_formData$cpt6$detail3 = _formData$cpt6$detail2[0]) === null || _formData$cpt6$detail3 === void 0 ? void 0 : _formData$cpt6$detail3.fatherOrHusbandName,
        address: formData === null || formData === void 0 ? void 0 : (_formData$cpt7 = formData.cpt) === null || _formData$cpt7 === void 0 ? void 0 : (_formData$cpt7$detail = _formData$cpt7.details) === null || _formData$cpt7$detail === void 0 ? void 0 : (_formData$cpt7$detail2 = _formData$cpt7$detail.owners) === null || _formData$cpt7$detail2 === void 0 ? void 0 : (_formData$cpt7$detail3 = _formData$cpt7$detail2[0]) === null || _formData$cpt7$detail3 === void 0 ? void 0 : _formData$cpt7$detail3.permanentAddress,
        relationship: formData !== null && formData !== void 0 && (_formData$cpt8 = formData.cpt) !== null && _formData$cpt8 !== void 0 && (_formData$cpt8$detail = _formData$cpt8.details) !== null && _formData$cpt8$detail !== void 0 && (_formData$cpt8$detail2 = _formData$cpt8$detail.owners) !== null && _formData$cpt8$detail2 !== void 0 && (_formData$cpt8$detail3 = _formData$cpt8$detail2[0]) !== null && _formData$cpt8$detail3 !== void 0 && _formData$cpt8$detail3.relationship ? {
          code: formData === null || formData === void 0 ? void 0 : (_formData$cpt9 = formData.cpt) === null || _formData$cpt9 === void 0 ? void 0 : (_formData$cpt9$detail = _formData$cpt9.details) === null || _formData$cpt9$detail === void 0 ? void 0 : (_formData$cpt9$detail2 = _formData$cpt9$detail.owners) === null || _formData$cpt9$detail2 === void 0 ? void 0 : (_formData$cpt9$detail3 = _formData$cpt9$detail2[0]) === null || _formData$cpt9$detail3 === void 0 ? void 0 : _formData$cpt9$detail3.relationship,
          i18nKey: "COMMON_MASTERS_OWNERTYPE_" + (formData === null || formData === void 0 ? void 0 : (_formData$cpt10 = formData.cpt) === null || _formData$cpt10 === void 0 ? void 0 : (_formData$cpt10$detai = _formData$cpt10.details) === null || _formData$cpt10$detai === void 0 ? void 0 : (_formData$cpt10$detai2 = _formData$cpt10$detai.owners) === null || _formData$cpt10$detai2 === void 0 ? void 0 : (_formData$cpt10$detai3 = _formData$cpt10$detai2[0]) === null || _formData$cpt10$detai3 === void 0 ? void 0 : _formData$cpt10$detai3.relationship)
        } : null,
        specialCategoryType: ownerType,
        documentId: documentId,
        fileStoreId: uploadedFile,
        documentType: dropdownValue
      };
      onSelect(config.key, ConnectionDet);
    } else {
      let ConnectionDet = {
        isOwnerSame: isOwnerSame,
        name: name,
        mobileNumber: mobileNumber,
        gender: gender,
        guardian: guardian,
        address: address,
        relationship: relationship,
        specialCategoryType: ownerType,
        documentId: documentId,
        fileStoreId: uploadedFile,
        documentType: dropdownValue
      };
      onSelect(config.key, ConnectionDet);
    }
  };
  const onSkip = () => onSelect();
  return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), !isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    t: t,
    isDisabled: !isOwnerSame && (!name || !mobileNumber || !gender || !guardian || !relationship || !(ownerType !== null && ownerType !== void 0 && ownerType.code) || !address)
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
    label: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
    onChange: e => selectChecked(),
    checked: isOwnerSame,
    style: {
      paddingBottom: "10px",
      paddingTop: "3px"
    }
  })), !isOwnerSame && /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "solid",
      borderRadius: "5px",
      padding: "10px",
      paddingTop: "20px",
      marginTop: "10px",
      borderColor: "#f3f3f3",
      background: "#FAFAFA"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_DETAIL_NAME") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "text",
    style: {
      background: "#FAFAFA"
    },
    isMandatory: false,
    optionKey: "i18nKey",
    name: "name",
    value: name,
    onChange: SelectName
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z-.`' ]*$",
    type: "text",
    title: t("WS_NAME_ERROR_MESSAGE")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_DETAIL_GENDER_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
    t: t,
    options: menu,
    optionsKey: "code",
    name: "gender",
    value: gender,
    selectedOption: gender,
    onSelect: setGenderName,
    isDependent: true,
    labelKey: "COMMON_GENDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_MOBILE_NO") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
    value: mobileNumber,
    name: "mobileNumber",
    onChange: value => setMobileNo({
      target: {
        value
      }
    }),
    style: {
      background: "#FAFAFA"
    },
    required: true,
    pattern: "[6-9]{1}[0-9]{9}",
    type: "tel",
    title: t("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_DETAIL_GUARDIAN_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "text",
    isMandatory: false,
    optionKey: "i18nKey",
    name: "guardian",
    value: guardian,
    style: {
      background: "#FAFAFA"
    },
    onChange: selectguardian
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z-.`' ]*$",
    type: "text",
    title: t("WS_NAME_ERROR_MESSAGE")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_DETAIL_RELATIONSHIP_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
    t: t,
    optionsKey: "i18nKey",
    name: "relationship",
    options: GuardianOptions,
    value: relationship,
    selectedOption: relationship,
    onSelect: setRelationshipName,
    isDependent: true,
    labelKey: "COMMON_MASTERS_OWNERTYPE"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_COMMON_TABLE_COL_ADDRESS") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "text",
    style: {
      background: "#FAFAFA"
    },
    isMandatory: false,
    optionKey: "i18nKey",
    name: "address",
    value: address,
    onChange: selectaddress
  }, validation = {
    isRequired: true,
    title: t("WS_ADDR_ERROR_MESSAGE")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_OWN_SPECIAL_CAT_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    className: "form-field",
    selected: ownerType,
    style: isMobile ? {} : {
      width: "540px"
    },
    isMandatory: true,
    option: Menu,
    select: setTypeOfOwner,
    optionKey: "i18nKey",
    t: t
  }))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null));
};

const WSActivationDetails = _ref => {
  let {
    t,
    config,
    userType,
    formData,
    onSelect
  } = _ref;
  const [activationDetails, setActivationDetails] = React__default.useState({
    meterId: "",
    meterInstallationDate: "",
    meterInitialReading: "",
    connectionExecutionDate: ""
  });
  React__default.useEffect(() => {
  });
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      fontWeight: "700"
    }
  }, "" + t("WS_METER_ID")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    t: t,
    type: "text",
    optionKey: "i18nKey",
    name: "meterId",
    value: activationDetails.meterId,
    onChange: ev => {
      setActivationDetails({
        ...activationDetails,
        meterId: ev.target.value
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      fontWeight: "700"
    }
  }, "" + t("WS_METER_INSTALLATION_DATE")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
    date: activationDetails.meterInstallationDate,
    onChange: date => {
      setActivationDetails({
        ...activationDetails,
        meterInstallationDate: date
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      fontWeight: "700"
    }
  }, "" + t("WS_INIT_METER_READING")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    value: activationDetails.meterInitialReading,
    onChange: ev => {
      setActivationDetails({
        ...activationDetails,
        meterInitialReading: ev.target.value
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      fontWeight: "700"
    }
  }, "" + t("WS_CONN_EXEC_DATE")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
    date: activationDetails.connectionExecutionDate,
    onChange: date => {
      setActivationDetails({
        ...activationDetails,
        connectionExecutionDate: date
      });
    }
  }))));
};

const createConnectionDetails = () => ({
  water: true,
  sewerage: false,
  proposedPipeSize: "",
  proposedTaps: "",
  proposedToilets: "",
  proposedWaterClosets: ""
});
const WSConnectionDetails = _ref => {
  var _formData$ConnectionD;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    pathname
  } = reactRouterDom.useLocation();
  const [connectionDetails, setConnectionDetails] = React.useState(formData !== null && formData !== void 0 && formData.ConnectionDetails ? [formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD = formData.ConnectionDetails) === null || _formData$ConnectionD === void 0 ? void 0 : _formData$ConnectionD[0]] : [createConnectionDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const stateCode = Digit.ULBService.getStateId();
  const [isErrors, setIsErrors] = React.useState(false);
  const [waterSewarageSelection, setWaterSewarageSelection] = React.useState({
    water: true,
    sewerage: false
  });
  const [pipeSizeList, setPipesizeList] = React.useState([]);
  const {
    isWSServicesCalculationLoading,
    data: wsServicesCalculationData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-calculation", ["PipeSize"]);
  React.useEffect(() => {
    const data = connectionDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [connectionDetails]);
  React.useEffect(() => {
    var _wsServicesCalculatio;
    const list = (wsServicesCalculationData === null || wsServicesCalculationData === void 0 ? void 0 : (_wsServicesCalculatio = wsServicesCalculationData["ws-services-calculation"]) === null || _wsServicesCalculatio === void 0 ? void 0 : _wsServicesCalculatio.PipeSize) || [];
    list === null || list === void 0 ? void 0 : list.forEach(data => data.i18nKey = data.size);
    setPipesizeList(list);
  }, [wsServicesCalculationData]);
  React.useEffect(() => {
    var _connectionDetails$, _connectionDetails$2;
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...connectionDetails
      });
    }
    if (connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$ = connectionDetails[0]) !== null && _connectionDetails$ !== void 0 && _connectionDetails$.water) setWaterSewarageSelection({
      water: true,
      sewerage: false
    });
    if (connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$2 = connectionDetails[0]) !== null && _connectionDetails$2 !== void 0 && _connectionDetails$2.sewerage) setWaterSewarageSelection({
      water: false,
      sewerage: true
    });
  }, [connectionDetails]);
  React.useEffect(() => {
    if (!(formData !== null && formData !== void 0 && formData.ConnectionDetails)) {
      setConnectionDetails([createConnectionDetails()]);
    }
  }, [formData === null || formData === void 0 ? void 0 : formData.ConnectionDetails]);
  if (isWSServicesCalculationLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  const commonProps = {
    focusIndex,
    connectionDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setConnectionDetails,
    setIsErrors,
    isErrors,
    pipeSizeList,
    wsServicesCalculationData,
    waterSewarageSelection,
    formData
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, connectionDetails.map((connectionDetail, index) => /*#__PURE__*/React__default.createElement(ConnectionDetails, _extends({
    key: connectionDetail.key,
    index: index,
    connectionDetail: connectionDetail
  }, commonProps))));
};
const ConnectionDetails = _props => {
  var _formData$DocumentsRe, _errors$proposedTaps2, _errors$proposedPipeS2, _errors$proposedWater2, _errors$proposedToile2;
  const {
    connectionDetail,
    focusIndex,
    setFocusIndex,
    t,
    config,
    setError,
    clearErrors,
    formState,
    setIsErrors,
    isErrors,
    connectionTypeList,
    setConnectionDetails,
    wsServicesCalculationData,
    pipeSizeList,
    connectionDetails,
    waterSewarageSelection,
    formData
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = connectionDetail[key]);
      if (!lodash.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setConnectionDetails(ob);
        trigger();
      }
    }
  }, [formValue, connectionDetails]);
  React.useEffect(() => {
    var _Object$keys, _Object$keys2, _connectionDetails$3, _connectionDetails$4;
    let isClear = true;
    (_Object$keys = Object.keys(connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails[0])) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(data => {
      if (!connectionDetails[0][data] && connectionDetails[0][data] != false && isClear) isClear = false;
    });
    if (isClear && ((_Object$keys2 = Object.keys(connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails[0])) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) > 1) {
      clearErrors("ConnectionDetails");
    }
    if (!(connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$3 = connectionDetails[0]) !== null && _connectionDetails$3 !== void 0 && _connectionDetails$3.sewerage)) {
      clearErrors(config.key, {
        type: "proposedToilets"
      });
      clearErrors(config.key, {
        type: "proposedWaterClosets"
      });
    }
    if (!(connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$4 = connectionDetails[0]) !== null && _connectionDetails$4 !== void 0 && _connectionDetails$4.water)) {
      clearErrors(config.key, {
        type: "proposedPipeSize"
      });
      clearErrors(config.key, {
        type: "proposedTaps"
      });
    }
    trigger();
  }, [connectionDetails, waterSewarageSelection, formData === null || formData === void 0 ? void 0 : (_formData$DocumentsRe = formData.DocumentsRequired) === null || _formData$DocumentsRe === void 0 ? void 0 : _formData$DocumentsRe.documents]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  const isMobile = window.Digit.Utils.browser.isMobile();
  const isEmployee = window.location.href.includes("/employee");
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "700"
    }
  }, t("WS_APPLY_FOR") + "*"), /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      gap: "0 3rem"
    }
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "water",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.water,
    isMandatory: true,
    render: props => {
      var _errors$water;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
        label: t("WATER_CONNECTION"),
        name: "water",
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "water",
        errorStyle: localFormState.touched.water && errors !== null && errors !== void 0 && (_errors$water = errors.water) !== null && _errors$water !== void 0 && _errors$water.message ? true : false,
        onChange: e => {
          if (e.target.checked || connectionDetail !== null && connectionDetail !== void 0 && connectionDetail.sewerage) {
            props.onChange(e.target.checked);
            setFocusIndex({
              index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
              type: "water"
            });
          }
        },
        checked: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.water,
        style: {
          paddingBottom: "10px",
          paddingTop: "3px"
        },
        onBlur: props.onBlur
      });
    }
  }), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "sewerage",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.sewerage,
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$sewerage;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
        label: t("SEWERAGE_CONNECTION"),
        name: "sewerage",
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "sewerage",
        errorStyle: localFormState.touched.sewerage && errors !== null && errors !== void 0 && (_errors$sewerage = errors.sewerage) !== null && _errors$sewerage !== void 0 && _errors$sewerage.message ? true : false,
        onChange: e => {
          if (e.target.checked || connectionDetail !== null && connectionDetail !== void 0 && connectionDetail.water) {
            props.onChange(e.target.checked);
            setFocusIndex({
              index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
              type: "sewerage"
            });
          }
        },
        checked: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.sewerage,
        style: {
          paddingBottom: "10px",
          paddingTop: "3px"
        },
        onBlur: props.onBlur
      });
    }
  })), (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.water) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_NO_OF_PROPOSED_TAPS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedTaps",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedTaps,
    rules: {
      validate: e => parseInt(e) > 0 && e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedTaps;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedTaps",
        errorStyle: localFormState.touched.proposedTaps && errors !== null && errors !== void 0 && (_errors$proposedTaps = errors.proposedTaps) !== null && _errors$proposedTaps !== void 0 && _errors$proposedTaps.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedTaps"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedTaps ? errors === null || errors === void 0 ? void 0 : (_errors$proposedTaps2 = errors.proposedTaps) === null || _errors$proposedTaps2 === void 0 ? void 0 : _errors$proposedTaps2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%",
      paddingTop: "10px"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_PIPE_SIZE_IN_INCHES_LABEL") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedPipeSize",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedPipeSize,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$proposedPipeS;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("proposedPipeSize"),
        disable: false,
        option: pipeSizeList,
        errorStyle: localFormState.touched.proposedPipeSize && errors !== null && errors !== void 0 && (_errors$proposedPipeS = errors.proposedPipeSize) !== null && _errors$proposedPipeS !== void 0 && _errors$proposedPipeS.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedPipeSize ? errors === null || errors === void 0 ? void 0 : (_errors$proposedPipeS2 = errors.proposedPipeSize) === null || _errors$proposedPipeS2 === void 0 ? void 0 : _errors$proposedPipeS2.message : "")), (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.sewerage) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_WATER_CLOSETS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedWaterClosets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedWaterClosets,
    rules: {
      validate: e => parseInt(e) > 0 && e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedWater;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedWaterClosets",
        errorStyle: localFormState.touched.proposedWaterClosets && errors !== null && errors !== void 0 && (_errors$proposedWater = errors.proposedWaterClosets) !== null && _errors$proposedWater !== void 0 && _errors$proposedWater.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedWaterClosets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedWaterClosets ? errors === null || errors === void 0 ? void 0 : (_errors$proposedWater2 = errors.proposedWaterClosets) === null || _errors$proposedWater2 === void 0 ? void 0 : _errors$proposedWater2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_WATER_TOILETS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedToilets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedToilets,
    rules: {
      validate: e => parseInt(e) > 0 && e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedToile;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedToilets",
        errorStyle: localFormState.touched.proposedToilets && errors !== null && errors !== void 0 && (_errors$proposedToile = errors.proposedToilets) !== null && _errors$proposedToile !== void 0 && _errors$proposedToile.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedToilets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedToilets ? errors === null || errors === void 0 ? void 0 : (_errors$proposedToile2 = errors.proposedToilets) === null || _errors$proposedToile2 === void 0 ? void 0 : _errors$proposedToile2.message : ""))));
};

const WSDocumentsRequired = () => {
  return /*#__PURE__*/React__default.createElement("div", null, "WSDocumentsRequired");
};

const WSPlumberDetails = _ref => {
  let {
    t,
    config,
    userType,
    formData
  } = _ref;
  const [plumberDetails, setPlumberDetails] = React__default.useState({
    plumberName: "",
    plumberMobileNo: "",
    plumberLicenseNo: "",
    plumberProvideBy: {
      code: "",
      value: "",
      i18nKey: ""
    }
  });
  React__default.useEffect(() => {
  });
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_PLUMBER_PROVIDED_BY")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    key: config === null || config === void 0 ? void 0 : config.key,
    selected: plumberDetails.plumberProvideBy,
    select: value => {
      setPlumberDetails({
        ...plumberDetails,
        plumberProvideBy: value
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_PLUMBER_LICENSE_NUMBER")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: config.key,
    value: plumberDetails.plumberLicenseNo,
    onChange: ev => {
      setPlumberDetails({
        ...plumberDetails,
        plumberLicenseNo: ev.target.value
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_PLUMBER_NAME")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: config.key,
    value: plumberDetails.plumberName,
    onChange: ev => {
      setPlumberDetails({
        ...plumberDetails,
        plumberName: ev.target.value
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_PLUMBER_MOB_NUMBER")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: config.key,
    value: plumberDetails.plumberMobileNo,
    onChange: ev => {
      setPlumberDetails({
        ...plumberDetails,
        plumberMobileNo: ev.target.value
      });
    }
  }))));
};

const createRoadCuttingDetails = () => ({
  roadType: {
    code: "",
    value: "",
    i18nKey: ""
  },
  area: "",
  status: "",
  id: null,
  key: Date.now()
});
const WSRoadCuttingDetails = _ref => {
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    pathname
  } = reactRouterDom.useLocation();
  const isEditScreen = pathname.includes("/modify-application/");
  const stateCode = Digit.ULBService.getStateId();
  const {
    isMdmsLoading,
    data: mdmsData
  } = Digit.Hooks.ws.useMDMS(stateCode, "sw-services-calculation", ["RoadType"]);
  const [roadCuttingDetails, setRoadCuttingDetails] = React.useState((formData === null || formData === void 0 ? void 0 : formData.roadCuttingDetails) || [createRoadCuttingDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const addroadCutt = () => {
    const newRoadCutting = createRoadCuttingDetails();
    setRoadCuttingDetails(prev => [...prev, newRoadCutting]);
  };
  const removeroadCutt = roadCutt => {
    (roadCutt === null || roadCutt === void 0 ? void 0 : roadCutt.id) !== null ? setRoadCuttingDetails(prev => prev.map(e => e.key == roadCutt.key && e.id !== null ? {
      ...roadCutt,
      id: e.id,
      status: "INACTIVE"
    } : {
      ...e
    })) : setRoadCuttingDetails(prev => prev.filter(o => o.key != roadCutt.key));
  };
  React.useEffect(() => {
    onSelect(config === null || config === void 0 ? void 0 : config.key, roadCuttingDetails);
  }, [roadCuttingDetails]);
  const commonProps = {
    focusIndex,
    allRoadCuttingDetails: roadCuttingDetails,
    setFocusIndex,
    removeroadCutt,
    formData,
    formState,
    setRoadCuttingDetails,
    mdmsData,
    t,
    setError,
    clearErrors,
    config,
    isEditScreen
  };
  if (isMdmsLoading) return /*#__PURE__*/React__default.createElement(Loader, null);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, roadCuttingDetails.filter(o => o.status !== "INACTIVE").map((roadCutt, index) => /*#__PURE__*/React__default.createElement(RoadCuttForm, _extends({
    key: roadCutt.key,
    index: index,
    roadCutt: roadCutt
  }, commonProps))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("WS_ADD_ROAD_TYPE"),
    onClick: addroadCutt,
    style: {
      color: "orange",
      display: "inline-block"
    }
  }));
};
const RoadCuttForm = _props => {
  var _localFormState$touch, _errors$roadType2, _localFormState$touch2, _errors$area;
  const {
    roadCutt,
    index,
    focusIndex,
    allRoadCuttingDetails,
    setFocusIndex,
    removeroadCutt,
    formData,
    formState,
    setRoadCuttingDetails,
    mdmsData,
    t,
    setError,
    clearErrors,
    config,
    isEditScreen
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  const roadCuttingTypeMenu = React.useMemo(() => {
    var _mdmsData$swServices;
    const RoadTypes = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$swServices = mdmsData["sw-services-calculation"]) === null || _mdmsData$swServices === void 0 ? void 0 : _mdmsData$swServices.RoadType) || [];
    RoadTypes === null || RoadTypes === void 0 ? void 0 : RoadTypes.forEach(data => {
      var _data$code;
      return data.i18nKey = "WS_ROADTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.toUpperCase(), " ", "_");
    });
    return RoadTypes;
  }, [mdmsData]);
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    trigger();
  }, [allRoadCuttingDetails, formData === null || formData === void 0 ? void 0 : formData.connectionDetails, formData === null || formData === void 0 ? void 0 : formData.plumberDetails]);
  const [part, setPart] = React__default.useState({});
  React.useEffect(() => {
    if (!lodash.isEqual(part, formValue)) {
      setPart({
        ...formValue
      });
      setRoadCuttingDetails(prev => prev.map(o => o.key && o.key === roadCutt.key ? {
        ...o,
        ...formValue
      } : {
        ...o
      }));
      trigger();
    }
  }, [formValue]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key]) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "label-field-pair"
  }, /*#__PURE__*/React__default.createElement("h2", {
    className: "card-label card-label-smaller",
    style: {
      color: "#505A5F"
    }
  }, t("WS_COMMON_ROAD_CUTTING_DETAILS"), " ", (allRoadCuttingDetails === null || allRoadCuttingDetails === void 0 ? void 0 : allRoadCuttingDetails.filter(o => o.status !== "INACTIVE").length) > 1 ? index + 1 : null)), /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "1px solid #E3E3E3",
      padding: "16px",
      marginTop: "8px"
    }
  }, (allRoadCuttingDetails === null || allRoadCuttingDetails === void 0 ? void 0 : allRoadCuttingDetails.filter(o => o.status !== "INACTIVE").length) > 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.DeleteIcon, {
      style: {
        float: "right",
        position: "relative",
        bottom: "-6px"
      },
      fill: !((allRoadCuttingDetails === null || allRoadCuttingDetails === void 0 ? void 0 : allRoadCuttingDetails.length) == 1) ? "#494848" : "#FAFAFA"
    }),
    style: {
      width: "100px",
      display: "inline",
      background: "black"
    },
    onClick: e => removeroadCutt(roadCutt)
  }) : null, /*#__PURE__*/React__default.createElement("div", {
    style: (allRoadCuttingDetails === null || allRoadCuttingDetails === void 0 ? void 0 : allRoadCuttingDetails.filter(o => o.status !== "INACTIVE").length) == 1 ? {} : {
      marginTop: "40px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_ROAD_TYPE") + " *"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "roadType",
    defaultValue: roadCutt === null || roadCutt === void 0 ? void 0 : roadCutt.roadType,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$roadType;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("roadType"),
        errorStyle: localFormState.touched.roadType && errors !== null && errors !== void 0 && (_errors$roadType = errors.roadType) !== null && _errors$roadType !== void 0 && _errors$roadType.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        option: roadCuttingTypeMenu,
        onBlur: props.onBlur,
        optionKey: "i18nKey",
        disable: false,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, (_localFormState$touch = localFormState.touched) !== null && _localFormState$touch !== void 0 && _localFormState$touch.roadType ? errors === null || errors === void 0 ? void 0 : (_errors$roadType2 = errors.roadType) === null || _errors$roadType2 === void 0 ? void 0 : _errors$roadType2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, t("WS_AREA_SQ_FT") + " *"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "area",
    defaultValue: roadCutt === null || roadCutt === void 0 ? void 0 : roadCutt.area,
    rules: {
      required: t("CORE_COMMON_REQUIRED_ERRMSG"),
      validate: {
        pattern: e => /^[0-9]{1,10}$/i.test(e) ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG")
      }
    },
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      value: props.value,
      disable: isEditScreen,
      autoFocus: focusIndex.index === roadCutt.key && focusIndex.type === "area",
      onChange: e => {
        props.onChange(e.target.value);
        setFocusIndex({
          index: roadCutt.key,
          type: "area"
        });
      },
      onBlur: e => {
        setFocusIndex({
          index: -1
        });
        props.onBlur(e);
      }
    })
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, (_localFormState$touch2 = localFormState.touched) !== null && _localFormState$touch2 !== void 0 && _localFormState$touch2.area ? errors === null || errors === void 0 ? void 0 : (_errors$area = errors.area) === null || _errors$area === void 0 ? void 0 : _errors$area.message : "")))));
};

const WSPropertyDetails = _ref => {
  var _Digit$SessionStorage, _formData$cptId, _formData$cptId2, _propertyDetails$Prop2, _propertyDetails$Prop3, _propertyDetails$Prop4;
  let {
    t,
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const redirectBackUrl = "/digit-ui/" + userType + "/ws/new-application";
  const [propertyId, setPropertyId] = React__default.useState("");
  const tenantId = (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const {
    isLoading: loading,
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: formData === null || formData === void 0 ? void 0 : (_formData$cptId = formData.cptId) === null || _formData$cptId === void 0 ? void 0 : _formData$cptId.id
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: formData === null || formData === void 0 ? void 0 : (_formData$cptId2 = formData.cptId) === null || _formData$cptId2 === void 0 ? void 0 : _formData$cptId2.id
    },
    tenantId: tenantId
  });
  const getPropertyAddress = () => {
    var _propertyDetails$Prop, _property$address, _property$address2, _property$address3, _property$address3$lo, _property$address4, _property$address5;
    const property = propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop.at(0);
    const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
    const street = property === null || property === void 0 ? void 0 : (_property$address = property.address) === null || _property$address === void 0 ? void 0 : _property$address.street;
    const landMark = property === null || property === void 0 ? void 0 : (_property$address2 = property.address) === null || _property$address2 === void 0 ? void 0 : _property$address2.landmark;
    const locality = property === null || property === void 0 ? void 0 : (_property$address3 = property.address) === null || _property$address3 === void 0 ? void 0 : (_property$address3$lo = _property$address3.locality) === null || _property$address3$lo === void 0 ? void 0 : _property$address3$lo.name;
    const city = property === null || property === void 0 ? void 0 : (_property$address4 = property.address) === null || _property$address4 === void 0 ? void 0 : _property$address4.city;
    const pinCode = property === null || property === void 0 ? void 0 : (_property$address5 = property.address) === null || _property$address5 === void 0 ? void 0 : _property$address5.pincode;
    return (doorNo ? doorNo + ", " : "") + "\n      " + (street ? street + ", " : "") + "\n      " + (landMark ? landMark + ", " : "") + "\n      " + (locality ? locality + ", " : "") + "\n      " + (city ? city : "") + "\n      " + (pinCode ? ", " + pinCode : "");
  };
  if (loading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, "" + t("PROPERTY_ID")), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      marginTop: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: config.key,
    value: propertyId,
    onChange: e => {
      setPropertyId(e.target.value);
      onSelect(config.key, {
        id: e.target.value
      });
    },
    style: {
      width: "65%",
      float: "left",
      marginRight: "20px"
    }
  }), /*#__PURE__*/React__default.createElement("button", {
    className: "submit-bar",
    type: "button",
    onClick: () => setPropertyId(propertyId)
  }, "" + t("PT_SEARCH")))), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee/commonpt/search?redirectToUrl=" + redirectBackUrl
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CPT_SEARCH_PROPERTY"),
    style: {
      color: "#a82227",
      display: "inline-block"
    }
  })), "\xA0 | \xA0", /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee/commonpt/new-application?redirectToUrl=" + redirectBackUrl
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CPT_CREATE_PROPERTY"),
    style: {
      color: "#a82227",
      display: "inline-block"
    }
  })), propertyDetails && (propertyDetails === null || propertyDetails === void 0 ? void 0 : propertyDetails.Properties.length) && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("header", {
    className: "card-section-header",
    style: {
      marginBottom: 0,
      marginTop: "20px"
    }
  }, t("PT_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, "" + t("PROPERTY_ID")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement("p", null, propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop2 = propertyDetails.Properties[0]) === null || _propertyDetails$Prop2 === void 0 ? void 0 : _propertyDetails$Prop2.propertyId))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, "" + t("OWNER_NAME")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement("p", null, propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop3 = propertyDetails.Properties[0]) === null || _propertyDetails$Prop3 === void 0 ? void 0 : (_propertyDetails$Prop4 = _propertyDetails$Prop3.owners[0]) === null || _propertyDetails$Prop4 === void 0 ? void 0 : _propertyDetails$Prop4.name))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }, "" + t("PROPERTY_ADDRESS")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement("p", null, getPropertyAddress()))), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee/commonpt/view-property?propertyId=" + propertyId + "&tenantId=" + tenantId
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CPT_COMPLETE_PROPERTY_DETAILS"),
    style: {
      color: "#a82227"
    }
  }))));
};

const createConnectionHolderDetails = () => ({
  sameAsOwnerDetails: true,
  name: "",
  gender: "",
  mobileNumber: "",
  guardian: "",
  relationship: "",
  address: "",
  ownerType: "",
  documentId: "",
  documentType: "",
  file: ""
});
const WSConnectionHolderDetails = _ref => {
  var _formData$ConnectionH, _formData$config$key, _Documentsob$Property, _formData$ConnectionH18;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    pathname
  } = reactRouterDom.useLocation();
  const filters = getQueryStringParams(location.search);
  const [connectionHolderDetails, setConnectionHolderDetails] = React.useState(formData !== null && formData !== void 0 && formData.ConnectionHolderDetails ? [{
    ...(formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH = formData.ConnectionHolderDetails) === null || _formData$ConnectionH === void 0 ? void 0 : _formData$ConnectionH[0])
  }] : [createConnectionHolderDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const stateId = Digit.ULBService.getStateId();
  const [isErrors, setIsErrors] = React.useState(false);
  const [uploadedFile, setUploadedFile] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$config$key = formData[config.key]) === null || _formData$config$key === void 0 ? void 0 : _formData$config$key.fileStoreId) || null);
  const [file, setFile] = React.useState(null);
  const {
    isLoading,
    data: genderTypeData
  } = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["GenderType"]);
  let menu = [];
  genderTypeData && genderTypeData["common-masters"].GenderType.filter(data => data.active).map(genderDetails => {
    menu.push({
      i18nKey: "COMMON_GENDER_" + genderDetails.code,
      code: "" + genderDetails.code,
      value: "" + genderDetails.code
    });
  });
  let dropdownData = [];
  const {
    data: Documentsob = {}
  } = Digit.Hooks.pt.usePropertyMDMS(stateId, "PropertyTax", "Documents");
  const docs = Documentsob === null || Documentsob === void 0 ? void 0 : (_Documentsob$Property = Documentsob.PropertyTax) === null || _Documentsob$Property === void 0 ? void 0 : _Documentsob$Property.Documents;
  const specialProofIdentity = Array.isArray(docs) && docs.filter(doc => doc.code.includes("SPECIALCATEGORYPROOF"));
  if (specialProofIdentity.length > 0) {
    var _specialProofIdentity, _dropdownData;
    dropdownData = (_specialProofIdentity = specialProofIdentity[0]) === null || _specialProofIdentity === void 0 ? void 0 : _specialProofIdentity.dropdownData;
    dropdownData.forEach(data => {
      data.i18nKey = stringReplaceAll(data.code, ".", "_");
    });
    dropdownData = (_dropdownData = dropdownData) === null || _dropdownData === void 0 ? void 0 : _dropdownData.filter(dropdown => {
      var _connectionHolderDeta;
      return dropdown.parentValue.includes(connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta = connectionHolderDetails[0]) === null || _connectionHolderDeta === void 0 ? void 0 : _connectionHolderDeta.ownerType);
    });
    if (dropdownData.length == 1 && dropdownValue != dropdownData[0]) {
      setTypeOfDropdownValue(dropdownData[0]);
    }
  }
  const GuardianOptions = [{
    name: "HUSBAND",
    code: "HUSBAND",
    i18nKey: "COMMON_MASTERS_OWNERTYPE_HUSBAND"
  }, {
    name: "Father",
    code: "FATHER",
    i18nKey: "COMMON_MASTERS_OWNERTYPE_FATHER"
  }];
  const {
    data: Menu,
    isLoading: isSpecialcategoryLoading
  } = Digit.Hooks.pt.usePropertyMDMS(stateId, "PropertyTax", "OwnerType");
  Menu ? Menu.sort((a, b) => a.name.localeCompare(b.name)) : "";
  React.useEffect(() => {
    const data = connectionHolderDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [connectionHolderDetails]);
  React.useEffect(() => {
    if (userType === "employee") {
      var _formData$config$key2;
      onSelect(config.key, [{
        ...((_formData$config$key2 = formData[config.key]) === null || _formData$config$key2 === void 0 ? void 0 : _formData$config$key2[0]),
        ...(connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : connectionHolderDetails[0])
      }]);
    }
  }, [connectionHolderDetails]);
  function ispagereloadingenabled(eyeclick) {
    var _Object$values, _formData$ConnectionH2;
    if ((window.location.href.includes("edit") || window.location.href.includes("modify")) && formData !== null && formData !== void 0 && formData.ConnectionHolderDetails && ((_Object$values = Object.values(formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH2 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH2 === void 0 ? void 0 : _formData$ConnectionH2[0])) === null || _Object$values === void 0 ? void 0 : _Object$values.length) > 1) {
      var _connectionHolderDeta2, _connectionHolderDeta3, _formData$ConnectionH3, _formData$ConnectionH4, _formData$ConnectionH5, _connectionHolderDeta4, _connectionHolderDeta5, _connectionHolderDeta6, _formData$ConnectionH6, _formData$ConnectionH7, _connectionHolderDeta7, _connectionHolderDeta8, _formData$ConnectionH8, _formData$ConnectionH9, _connectionHolderDeta9, _connectionHolderDeta10, _connectionHolderDeta11, _formData$ConnectionH10, _formData$ConnectionH11, _formData$ConnectionH12, _connectionHolderDeta12, _connectionHolderDeta13, _connectionHolderDeta14, _formData$ConnectionH13, _formData$ConnectionH14, _connectionHolderDeta15, _connectionHolderDeta16, _connectionHolderDeta17, _formData$ConnectionH15, _formData$ConnectionH16, _formData$ConnectionH17, _connectionHolderDeta18, _connectionHolderDeta19;
      if (eyeclick === "gender" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta2 = connectionHolderDetails[0]) !== null && _connectionHolderDeta2 !== void 0 && (_connectionHolderDeta3 = _connectionHolderDeta2.gender) !== null && _connectionHolderDeta3 !== void 0 && _connectionHolderDeta3.code && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH3 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH3 === void 0 ? void 0 : (_formData$ConnectionH4 = _formData$ConnectionH3[0]) === null || _formData$ConnectionH4 === void 0 ? void 0 : (_formData$ConnectionH5 = _formData$ConnectionH4.gender) === null || _formData$ConnectionH5 === void 0 ? void 0 : _formData$ConnectionH5.code) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta4 = connectionHolderDetails[0]) === null || _connectionHolderDeta4 === void 0 ? void 0 : (_connectionHolderDeta5 = _connectionHolderDeta4.gender) === null || _connectionHolderDeta5 === void 0 ? void 0 : _connectionHolderDeta5.code)) return true;else if (eyeclick === "connectionHoldersMobileNumber" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta6 = connectionHolderDetails[0]) !== null && _connectionHolderDeta6 !== void 0 && _connectionHolderDeta6.mobileNumber && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH6 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH6 === void 0 ? void 0 : (_formData$ConnectionH7 = _formData$ConnectionH6[0]) === null || _formData$ConnectionH7 === void 0 ? void 0 : _formData$ConnectionH7.mobileNumber) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta7 = connectionHolderDetails[0]) === null || _connectionHolderDeta7 === void 0 ? void 0 : _connectionHolderDeta7.mobileNumber)) return true;else if (eyeclick === "fatherOrHusbandName" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta8 = connectionHolderDetails[0]) !== null && _connectionHolderDeta8 !== void 0 && _connectionHolderDeta8.guardian && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH8 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH8 === void 0 ? void 0 : (_formData$ConnectionH9 = _formData$ConnectionH8[0]) === null || _formData$ConnectionH9 === void 0 ? void 0 : _formData$ConnectionH9.guardian) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta9 = connectionHolderDetails[0]) === null || _connectionHolderDeta9 === void 0 ? void 0 : _connectionHolderDeta9.guardian)) return true;else if (eyeclick === "relationship" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta10 = connectionHolderDetails[0]) !== null && _connectionHolderDeta10 !== void 0 && (_connectionHolderDeta11 = _connectionHolderDeta10.relationship) !== null && _connectionHolderDeta11 !== void 0 && _connectionHolderDeta11.code && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH10 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH10 === void 0 ? void 0 : (_formData$ConnectionH11 = _formData$ConnectionH10[0]) === null || _formData$ConnectionH11 === void 0 ? void 0 : (_formData$ConnectionH12 = _formData$ConnectionH11.relationship) === null || _formData$ConnectionH12 === void 0 ? void 0 : _formData$ConnectionH12.code) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta12 = connectionHolderDetails[0]) === null || _connectionHolderDeta12 === void 0 ? void 0 : (_connectionHolderDeta13 = _connectionHolderDeta12.relationship) === null || _connectionHolderDeta13 === void 0 ? void 0 : _connectionHolderDeta13.code)) return true;else if (eyeclick === "correspondenceAddress" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta14 = connectionHolderDetails[0]) !== null && _connectionHolderDeta14 !== void 0 && _connectionHolderDeta14.address && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH13 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH13 === void 0 ? void 0 : (_formData$ConnectionH14 = _formData$ConnectionH13[0]) === null || _formData$ConnectionH14 === void 0 ? void 0 : _formData$ConnectionH14.address) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta15 = connectionHolderDetails[0]) === null || _connectionHolderDeta15 === void 0 ? void 0 : _connectionHolderDeta15.address)) return true;else if (eyeclick === "ownerType" && connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta16 = connectionHolderDetails[0]) !== null && _connectionHolderDeta16 !== void 0 && (_connectionHolderDeta17 = _connectionHolderDeta16.ownerType) !== null && _connectionHolderDeta17 !== void 0 && _connectionHolderDeta17.code && (formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH15 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH15 === void 0 ? void 0 : (_formData$ConnectionH16 = _formData$ConnectionH15[0]) === null || _formData$ConnectionH16 === void 0 ? void 0 : (_formData$ConnectionH17 = _formData$ConnectionH16.ownerType) === null || _formData$ConnectionH17 === void 0 ? void 0 : _formData$ConnectionH17.code) !== (connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : (_connectionHolderDeta18 = connectionHolderDetails[0]) === null || _connectionHolderDeta18 === void 0 ? void 0 : (_connectionHolderDeta19 = _connectionHolderDeta18.ownerType) === null || _connectionHolderDeta19 === void 0 ? void 0 : _connectionHolderDeta19.code)) return true;else return false;
    } else return false;
  }
  React.useEffect(() => {
    let eyeclick = sessionStorage.getItem("eyeIconClicked");
    if (ispagereloadingenabled(eyeclick)) {
      sessionStorage.removeItem("eyeIconClicked");
      window.location.reload();
    }
  }, [formData === null || formData === void 0 ? void 0 : (_formData$ConnectionH18 = formData.ConnectionHolderDetails) === null || _formData$ConnectionH18 === void 0 ? void 0 : _formData$ConnectionH18[0], connectionHolderDetails, formData]);
  React.useEffect(() => {
    if (!(formData !== null && formData !== void 0 && formData.ConnectionHolderDetails)) {
      setConnectionHolderDetails([createConnectionHolderDetails()]);
    }
  }, [formData === null || formData === void 0 ? void 0 : formData.ConnectionHolderDetails]);
  const commonProps = {
    focusIndex,
    connectionHolderDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setConnectionHolderDetails,
    setIsErrors,
    isErrors,
    connectionHolderDetails,
    filters,
    menu,
    uploadedFile,
    setUploadedFile,
    file,
    setFile,
    dropdownData,
    GuardianOptions,
    Menu
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, connectionHolderDetails.map((connectionHolderDetail, index) => /*#__PURE__*/React__default.createElement(ConnectionDetails$1, _extends({
    key: connectionHolderDetail.key,
    index: index,
    connectionHolderDetail: connectionHolderDetail
  }, commonProps))));
};
const ConnectionDetails$1 = _props => {
  var _errors$name2, _errors$gender2, _errors$mobileNumber2, _errors$guardian2, _errors$relationship2, _errors$address2, _errors$ownerType2;
  const {
    connectionHolderDetail,
    focusIndex,
    setFocusIndex,
    t,
    formData,
    config,
    setError,
    clearErrors,
    formState,
    connectionHolderDetails,
    setIsErrors,
    isErrors,
    setConnectionHolderDetails,
    menu,
    GuardianOptions,
    Menu
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const [name, setName] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.name);
  const [gender, setGender] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.gender);
  const [mobileNumber, setMobileNumber] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.mobileNumber);
  const [guardian, setGuardian] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.guardian);
  const [relationship, setRelationship] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.relationship);
  const [address, setAddress] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.address);
  const [ownerType, setOwnerType] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.ownerType);
  const [sameAsOwnerDetails, setSameAsOwnerDetails] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.sameAsOwnerDetails);
  const [uuid, setuuid] = React.useState(connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid);
  const formValue = {
    name,
    gender,
    mobileNumber,
    guardian,
    relationship,
    ownerType,
    sameAsOwnerDetails,
    address,
    uuid
  };
  const {
    errors
  } = localFormState;
  const isMobile = window.Digit.Utils.browser.isMobile();
  const isEmployee = window.location.href.includes("/employee");
  const {
    isLoading,
    data: privacyData
  } = Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(), "DataSecurity", [{
    name: "SecurityPolicy"
  }], {
    select: data => {
      var _data$DataSecurity, _data$DataSecurity$Se;
      return (data === null || data === void 0 ? void 0 : (_data$DataSecurity = data.DataSecurity) === null || _data$DataSecurity === void 0 ? void 0 : (_data$DataSecurity$Se = _data$DataSecurity.SecurityPolicy) === null || _data$DataSecurity$Se === void 0 ? void 0 : _data$DataSecurity$Se.find(elem => (elem === null || elem === void 0 ? void 0 : elem.model) == "User")) || {};
    }
  });
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0 && formValue !== null && formValue !== void 0 && formValue.name || formValue !== null && formValue !== void 0 && formValue.uuid) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = connectionHolderDetail[key]);
      if (!lodash.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setConnectionHolderDetails(ob);
        trigger();
      }
    }
  }, [formValue]);
  React.useEffect(() => {
    var _Object$keys, _connectionHolderDeta20, _Object$keys2;
    let isClear = true;
    (_Object$keys = Object.keys(connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : connectionHolderDetails[0])) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(data => {
      if (!connectionHolderDetails[0][data] && connectionHolderDetails[0][data] != false && isClear) isClear = false;
    });
    if (connectionHolderDetails !== null && connectionHolderDetails !== void 0 && (_connectionHolderDeta20 = connectionHolderDetails[0]) !== null && _connectionHolderDeta20 !== void 0 && _connectionHolderDeta20.sameAsOwnerDetails || isClear && ((_Object$keys2 = Object.keys(connectionHolderDetails === null || connectionHolderDetails === void 0 ? void 0 : connectionHolderDetails[0])) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) > 1) {
      clearErrors("ConnectionHolderDetails");
    } else {
      trigger();
    }
  }, [connectionHolderDetails]);
  React.useEffect(() => {
    if (sameAsOwnerDetails) {
      clearErrors("ConnectionHolderDetails");
    } else {
      trigger();
    }
  }, [sameAsOwnerDetails]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  const checkifPrivacyValid = () => {
    if (window.location.href.includes("edit") || window.location.href.includes("modify")) return true;else return false;
  };
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "sameAsOwnerDetails",
    defaultValue: sameAsOwnerDetails,
    isMandatory: true,
    render: props => {
      var _errors$sameAsOwnerDe;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
        label: t("WS_SAME_AS_PROPERTY_OWNERS"),
        name: "sameAsOwnerDetails",
        autoFocus: focusIndex.index === (connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key) && focusIndex.type === "sameAsOwnerDetails",
        errorStyle: localFormState.touched.sameAsOwnerDetails && errors !== null && errors !== void 0 && (_errors$sameAsOwnerDe = errors.sameAsOwnerDetails) !== null && _errors$sameAsOwnerDe !== void 0 && _errors$sameAsOwnerDe.message ? true : false,
        onChange: e => {
          setSameAsOwnerDetails(e.target.checked);
          props.onChange(e.target.checked);
          setFocusIndex({
            index: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key,
            type: "sameAsOwnerDetails"
          });
        },
        checked: sameAsOwnerDetails,
        style: {
          paddingBottom: "10px",
          paddingTop: "3px"
        },
        onBlur: props.onBlur
      });
    }
  })), !sameAsOwnerDetails ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_OWN_DETAIL_NAME") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "name",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.name,
    rules: {
      validate: e => e && getPattern("Name").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$name, _getValues, _getValues2, _formData$ConnectionD, _formData$ConnectionD2, _formData$cpt, _formData$cpt$details, _formData$ConnectionD3, _formData$ConnectionD4, _formData$ConnectionD5, _formData$ConnectionD6;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          marginRight: isMobile && isEmployee ? "" : checkifPrivacyValid() ? "-4%" : "-4%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: getValues("name"),
        autoFocus: focusIndex.index === (connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key) && focusIndex.type === "name",
        errorStyle: localFormState.touched.name && errors !== null && errors !== void 0 && (_errors$name = errors.name) !== null && _errors$name !== void 0 && _errors$name.message ? true : false,
        onChange: e => {
          setName(e.target.value);
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key,
            type: "name"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        style: checkifPrivacyValid() && !((_getValues = getValues("name")) !== null && _getValues !== void 0 && _getValues.includes("*")) ? !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "name",
          model: "User"
        }) && !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "mobileNumber",
          model: "User"
        }) ? isMobile && isEmployee ? {} : {
          width: "96%"
        } : isMobile && isEmployee ? {} : {
          width: "96%"
        } : {}
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: !(isMobile && isEmployee) ? {
          marginRight: "-10px",
          marginLeft: "10px"
        } : {}
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          setName(e);
          props.onChange(e);
        },
        iseyevisible: (_getValues2 = getValues("name")) !== null && _getValues2 !== void 0 && _getValues2.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "name",
          model: "WnSConnectionOwner",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD = formData.ConnectionDetails) !== null && _formData$ConnectionD !== void 0 && (_formData$ConnectionD2 = _formData$ConnectionD[0]) !== null && _formData$ConnectionD2 !== void 0 && _formData$ConnectionD2.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt = formData.cpt) === null || _formData$cpt === void 0 ? void 0 : (_formData$cpt$details = _formData$cpt.details) === null || _formData$cpt$details === void 0 ? void 0 : _formData$cpt$details.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD3 = formData.ConnectionDetails) === null || _formData$ConnectionD3 === void 0 ? void 0 : (_formData$ConnectionD4 = _formData$ConnectionD3[0]) === null || _formData$ConnectionD4 === void 0 ? void 0 : _formData$ConnectionD4.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD5 = formData.ConnectionDetails) !== null && _formData$ConnectionD5 !== void 0 && (_formData$ConnectionD6 = _formData$ConnectionD5[0]) !== null && _formData$ConnectionD6 !== void 0 && _formData$ConnectionD6.water ? "WaterConnection[0].connectionHolders[0].name" : "SewerageConnections[0].connectionHolders[0].name",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.name ? errors === null || errors === void 0 ? void 0 : (_errors$name2 = errors.name) === null || _errors$name2 === void 0 ? void 0 : _errors$name2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_CONN_HOLDER_OWN_DETAIL_GENDER_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "gender",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.gender,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$gender, _gender$i18nKey, _formData$ConnectionD7, _formData$ConnectionD8, _formData$cpt2, _formData$cpt2$detail, _formData$ConnectionD9, _formData$ConnectionD10, _formData$ConnectionD11, _formData$ConnectionD12;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          marginRight: checkifPrivacyValid() && !(isMobile && isEmployee) ? "-20px" : "unset",
          width: isMobile && isEmployee ? "" : checkifPrivacyValid() ? "197%" : "208%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("gender"),
        disable: false,
        option: menu,
        errorStyle: localFormState.touched.gender && errors !== null && errors !== void 0 && (_errors$gender = errors.gender) !== null && _errors$gender !== void 0 && _errors$gender.message ? true : false,
        select: e => {
          setGender(e);
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: {
          marginRight: "-10px",
          marginLeft: isMobile && isEmployee ? "" : "8px",
          marginTop: "15px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          const r = {
            code: e,
            i18nKey: "COMMON_GENDER_" + e,
            name: e
          };
          setGender(r);
          props.onChange(r);
        },
        iseyevisible: (_gender$i18nKey = gender["i18nKey"]) !== null && _gender$i18nKey !== void 0 && _gender$i18nKey.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "gender",
          model: "WnSConnectionOwner",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD7 = formData.ConnectionDetails) !== null && _formData$ConnectionD7 !== void 0 && (_formData$ConnectionD8 = _formData$ConnectionD7[0]) !== null && _formData$ConnectionD8 !== void 0 && _formData$ConnectionD8.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt2 = formData.cpt) === null || _formData$cpt2 === void 0 ? void 0 : (_formData$cpt2$detail = _formData$cpt2.details) === null || _formData$cpt2$detail === void 0 ? void 0 : _formData$cpt2$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD9 = formData.ConnectionDetails) === null || _formData$ConnectionD9 === void 0 ? void 0 : (_formData$ConnectionD10 = _formData$ConnectionD9[0]) === null || _formData$ConnectionD10 === void 0 ? void 0 : _formData$ConnectionD10.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD11 = formData.ConnectionDetails) !== null && _formData$ConnectionD11 !== void 0 && (_formData$ConnectionD12 = _formData$ConnectionD11[0]) !== null && _formData$ConnectionD12 !== void 0 && _formData$ConnectionD12.water ? "WaterConnection[0].connectionHolders[0].gender" : "SewerageConnections[0].connectionHolders[0].gender",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.gender ? errors === null || errors === void 0 ? void 0 : (_errors$gender2 = errors.gender) === null || _errors$gender2 === void 0 ? void 0 : _errors$gender2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("CORE_COMMON_MOBILE_NUMBER") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "mobileNumber",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.mobileNumber,
    rules: {
      validate: e => e && getPattern("MobileNoWithPrivacy").test(e) || !e || e.includes("*") ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _getValues3, _errors$mobileNumber, _getValues4, _getValues5, _formData$ConnectionD13, _formData$ConnectionD14, _formData$cpt3, _formData$cpt3$detail, _formData$ConnectionD15, _formData$ConnectionD16, _formData$ConnectionD17, _formData$ConnectionD18;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          marginRight: isEmployee && isMobile ? "" : (_getValues3 = getValues("mobileNumber")) !== null && _getValues3 !== void 0 && _getValues3.includes("*") && !(isMobile && isEmployee) ? "-20px" : "-4%"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        className: "employee-card-input employee-card-input--front",
        style: {
          position: "relative",
          marginTop: "4px"
        }
      }, "+91"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: getValues("mobileNumber"),
        autoFocus: focusIndex.index === (connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key) && focusIndex.type === "mobileNumber",
        errorStyle: localFormState.touched.mobileNumber && errors !== null && errors !== void 0 && (_errors$mobileNumber = errors.mobileNumber) !== null && _errors$mobileNumber !== void 0 && _errors$mobileNumber.message ? true : false,
        onChange: e => {
          setMobileNumber(e.target.value);
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key,
            type: "mobileNumber"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        style: checkifPrivacyValid() && !((_getValues4 = getValues("mobileNumber")) !== null && _getValues4 !== void 0 && _getValues4.includes("*")) ? !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "connectionHoldersMobileNumber",
          model: "WnSConnectionOwner"
        }) && !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "mobileNumber",
          model: "User"
        }) ? isMobile && isEmployee ? {} : {
          width: "96%"
        } : isMobile && isEmployee ? {} : {
          width: "96%",
          background: "#FAFAFA"
        } : {
          background: "#FAFAFA"
        }
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: !(isMobile && isEmployee) ? {
          marginRight: "-10px",
          marginLeft: "10px"
        } : {}
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          setMobileNumber(e);
          props.onChange(e);
        },
        iseyevisible: (_getValues5 = getValues("mobileNumber")) !== null && _getValues5 !== void 0 && _getValues5.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "connectionHoldersMobileNumber",
          model: "WnSConnectionOwner",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD13 = formData.ConnectionDetails) !== null && _formData$ConnectionD13 !== void 0 && (_formData$ConnectionD14 = _formData$ConnectionD13[0]) !== null && _formData$ConnectionD14 !== void 0 && _formData$ConnectionD14.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt3 = formData.cpt) === null || _formData$cpt3 === void 0 ? void 0 : (_formData$cpt3$detail = _formData$cpt3.details) === null || _formData$cpt3$detail === void 0 ? void 0 : _formData$cpt3$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD15 = formData.ConnectionDetails) === null || _formData$ConnectionD15 === void 0 ? void 0 : (_formData$ConnectionD16 = _formData$ConnectionD15[0]) === null || _formData$ConnectionD16 === void 0 ? void 0 : _formData$ConnectionD16.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD17 = formData.ConnectionDetails) !== null && _formData$ConnectionD17 !== void 0 && (_formData$ConnectionD18 = _formData$ConnectionD17[0]) !== null && _formData$ConnectionD18 !== void 0 && _formData$ConnectionD18.water ? "WaterConnection[0].connectionHolders[0].mobileNumber" : "SewerageConnections[0].connectionHolders[0].mobileNumber",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.mobileNumber ? errors === null || errors === void 0 ? void 0 : (_errors$mobileNumber2 = errors.mobileNumber) === null || _errors$mobileNumber2 === void 0 ? void 0 : _errors$mobileNumber2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_OWN_DETAIL_GUARDIAN_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "guardian",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.guardian,
    rules: {
      validate: e => e && getPattern("Name").test(e) || !e || e.includes("*") ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _getValues6, _errors$guardian, _getValues7, _getValues8, _formData$ConnectionD19, _formData$ConnectionD20, _formData$cpt4, _formData$cpt4$detail, _formData$ConnectionD21, _formData$ConnectionD22, _formData$ConnectionD23, _formData$ConnectionD24;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          marginRight: isEmployee && isMobile ? "" : (_getValues6 = getValues("guardian")) !== null && _getValues6 !== void 0 && _getValues6.includes("*") && !(isMobile && isEmployee) ? "-20px" : "-4%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: getValues("guardian"),
        autoFocus: focusIndex.index === (connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key) && focusIndex.type === "guardian",
        errorStyle: localFormState.touched.guardian && errors !== null && errors !== void 0 && (_errors$guardian = errors.guardian) !== null && _errors$guardian !== void 0 && _errors$guardian.message ? true : false,
        onChange: e => {
          setGuardian(e.target.value);
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key,
            type: "guardian"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        style: checkifPrivacyValid() && !((_getValues7 = getValues("guardian")) !== null && _getValues7 !== void 0 && _getValues7.includes("*")) ? !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "fatherOrHusbandName",
          model: "WnSConnectionOwner"
        }) && !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "mobileNumber",
          model: "User"
        }) ? isMobile && isEmployee ? {} : {
          width: "96%"
        } : isMobile && isEmployee ? {} : {
          width: "96.2%"
        } : {}
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: !(isMobile && isEmployee) ? {
          marginRight: "-10px",
          marginLeft: "10px"
        } : {}
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          setGuardian(e);
          props.onChange(e);
        },
        iseyevisible: (_getValues8 = getValues("guardian")) !== null && _getValues8 !== void 0 && _getValues8.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "fatherOrHusbandName",
          model: "WnSConnectionOwner",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD19 = formData.ConnectionDetails) !== null && _formData$ConnectionD19 !== void 0 && (_formData$ConnectionD20 = _formData$ConnectionD19[0]) !== null && _formData$ConnectionD20 !== void 0 && _formData$ConnectionD20.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt4 = formData.cpt) === null || _formData$cpt4 === void 0 ? void 0 : (_formData$cpt4$detail = _formData$cpt4.details) === null || _formData$cpt4$detail === void 0 ? void 0 : _formData$cpt4$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD21 = formData.ConnectionDetails) === null || _formData$ConnectionD21 === void 0 ? void 0 : (_formData$ConnectionD22 = _formData$ConnectionD21[0]) === null || _formData$ConnectionD22 === void 0 ? void 0 : _formData$ConnectionD22.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD23 = formData.ConnectionDetails) !== null && _formData$ConnectionD23 !== void 0 && (_formData$ConnectionD24 = _formData$ConnectionD23[0]) !== null && _formData$ConnectionD24 !== void 0 && _formData$ConnectionD24.water ? "WaterConnection[0].connectionHolders[0].fatherOrHusbandName" : "SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.guardian ? errors === null || errors === void 0 ? void 0 : (_errors$guardian2 = errors.guardian) === null || _errors$guardian2 === void 0 ? void 0 : _errors$guardian2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_CONN_HOLDER_OWN_DETAIL_RELATION_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "relationship",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.relationship,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$relationship, _relationship$i18nKey, _formData$ConnectionD25, _formData$ConnectionD26, _formData$cpt5, _formData$cpt5$detail, _formData$ConnectionD27, _formData$ConnectionD28, _formData$ConnectionD29, _formData$ConnectionD30;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          marginRight: checkifPrivacyValid() && !(isMobile && isEmployee) ? "-20px" : "unset",
          width: isMobile && isEmployee ? "" : checkifPrivacyValid() ? "197%" : "208%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("relationship"),
        disable: false,
        option: GuardianOptions,
        errorStyle: localFormState.touched.relationship && errors !== null && errors !== void 0 && (_errors$relationship = errors.relationship) !== null && _errors$relationship !== void 0 && _errors$relationship.message ? true : false,
        select: e => {
          setRelationship(e);
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: {
          marginRight: "-10px",
          marginLeft: isMobile && isEmployee ? "" : "8px",
          marginTop: "15px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          const r = {
            code: e,
            i18nKey: "COMMON_MASTERS_OWNERTYPE_" + e,
            name: e
          };
          setRelationship(r);
          props.onChange(r);
        },
        iseyevisible: relationship !== null && relationship !== void 0 && (_relationship$i18nKey = relationship.i18nKey) !== null && _relationship$i18nKey !== void 0 && _relationship$i18nKey.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "relationship",
          model: "WnSConnection",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD25 = formData.ConnectionDetails) !== null && _formData$ConnectionD25 !== void 0 && (_formData$ConnectionD26 = _formData$ConnectionD25[0]) !== null && _formData$ConnectionD26 !== void 0 && _formData$ConnectionD26.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt5 = formData.cpt) === null || _formData$cpt5 === void 0 ? void 0 : (_formData$cpt5$detail = _formData$cpt5.details) === null || _formData$cpt5$detail === void 0 ? void 0 : _formData$cpt5$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD27 = formData.ConnectionDetails) === null || _formData$ConnectionD27 === void 0 ? void 0 : (_formData$ConnectionD28 = _formData$ConnectionD27[0]) === null || _formData$ConnectionD28 === void 0 ? void 0 : _formData$ConnectionD28.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD29 = formData.ConnectionDetails) !== null && _formData$ConnectionD29 !== void 0 && (_formData$ConnectionD30 = _formData$ConnectionD29[0]) !== null && _formData$ConnectionD30 !== void 0 && _formData$ConnectionD30.water ? "WaterConnection[0].connectionHolders[0].relationship" : "SewerageConnections[0].connectionHolders[0].relationship",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.relationship ? errors === null || errors === void 0 ? void 0 : (_errors$relationship2 = errors.relationship) === null || _errors$relationship2 === void 0 ? void 0 : _errors$relationship2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_CORRESPONDANCE_ADDRESS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "address",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.address,
    rules: {
      validate: e => e && getPattern("Address").test(e) || !e || e.includes("*") ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _getValues9, _errors$address, _getValues10, _getValues11, _formData$ConnectionD31, _formData$ConnectionD32, _formData$cpt6, _formData$cpt6$detail, _formData$ConnectionD33, _formData$ConnectionD34, _formData$ConnectionD35, _formData$ConnectionD36;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          marginRight: isEmployee && isMobile ? "" : (_getValues9 = getValues("address")) !== null && _getValues9 !== void 0 && _getValues9.includes("*") && !(isMobile && isEmployee) ? "-20px" : "-4%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: getValues("address"),
        autoFocus: focusIndex.index === (connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key) && focusIndex.type === "address",
        errorStyle: localFormState.touched.address && errors !== null && errors !== void 0 && (_errors$address = errors.address) !== null && _errors$address !== void 0 && _errors$address.message ? true : false,
        onChange: e => {
          setAddress(e.target.value);
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.key,
            type: "address"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        style: checkifPrivacyValid() && !((_getValues10 = getValues("address")) !== null && _getValues10 !== void 0 && _getValues10.includes("*")) ? !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "correspondenceAddress",
          model: "WnSConnectionOwner"
        }) && !Digit.Utils.checkPrivacy(privacyData, {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "mobileNumber",
          model: "User"
        }) ? isMobile && isEmployee ? {} : {
          width: "96%"
        } : isMobile && isEmployee ? {} : {
          width: "96.2%"
        } : {}
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: !(isMobile && isEmployee) ? {
          marginRight: "-10px",
          marginLeft: "10px"
        } : {}
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          setAddress(e);
          props.onChange(e);
        },
        iseyevisible: (_getValues11 = getValues("address")) !== null && _getValues11 !== void 0 && _getValues11.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "correspondenceAddress",
          model: "WnSConnectionOwner",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD31 = formData.ConnectionDetails) !== null && _formData$ConnectionD31 !== void 0 && (_formData$ConnectionD32 = _formData$ConnectionD31[0]) !== null && _formData$ConnectionD32 !== void 0 && _formData$ConnectionD32.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt6 = formData.cpt) === null || _formData$cpt6 === void 0 ? void 0 : (_formData$cpt6$detail = _formData$cpt6.details) === null || _formData$cpt6$detail === void 0 ? void 0 : _formData$cpt6$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD33 = formData.ConnectionDetails) === null || _formData$ConnectionD33 === void 0 ? void 0 : (_formData$ConnectionD34 = _formData$ConnectionD33[0]) === null || _formData$ConnectionD34 === void 0 ? void 0 : _formData$ConnectionD34.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD35 = formData.ConnectionDetails) !== null && _formData$ConnectionD35 !== void 0 && (_formData$ConnectionD36 = _formData$ConnectionD35[0]) !== null && _formData$ConnectionD36 !== void 0 && _formData$ConnectionD36.water ? "WaterConnection[0].connectionHolders[0].correspondenceAddress" : "SewerageConnections[0].connectionHolders[0].correspondenceAddress",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.address ? errors === null || errors === void 0 ? void 0 : (_errors$address2 = errors.address) === null || _errors$address2 === void 0 ? void 0 : _errors$address2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_OWNER_SPECIAL_CATEGORY") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "ownerType",
    defaultValue: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.ownerType,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    render: props => {
      var _errors$ownerType, _ownerType$i18nKey, _formData$ConnectionD37, _formData$ConnectionD38, _formData$cpt7, _formData$cpt7$detail, _formData$ConnectionD39, _formData$ConnectionD40, _formData$ConnectionD41, _formData$ConnectionD42;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          marginRight: checkifPrivacyValid() && !(isMobile && isEmployee) ? "-20px" : "unset",
          width: isMobile && isEmployee ? "" : checkifPrivacyValid() ? "197%" : "208%"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("ownerType"),
        disable: false,
        option: Menu,
        errorStyle: localFormState.touched.ownerType && errors !== null && errors !== void 0 && (_errors$ownerType = errors.ownerType) !== null && _errors$ownerType !== void 0 && _errors$ownerType.message ? true : false,
        select: e => {
          setOwnerType(e);
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      }), checkifPrivacyValid() && /*#__PURE__*/React__default.createElement("div", {
        style: {
          marginRight: "-10px",
          marginLeft: isMobile && isEmployee ? "" : "8px",
          marginTop: "10px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          const r = {
            code: e,
            i18nKey: "COMMON_MASTERS_OWNERTYPE_" + e,
            name: e
          };
          setOwnerType(r);
          props.onChange(r);
        },
        iseyevisible: ownerType !== null && ownerType !== void 0 && (_ownerType$i18nKey = ownerType.i18nKey) !== null && _ownerType$i18nKey !== void 0 && _ownerType$i18nKey.includes("*") ? true : false,
        privacy: {
          uuid: connectionHolderDetail === null || connectionHolderDetail === void 0 ? void 0 : connectionHolderDetail.uuid,
          fieldName: "ownerType",
          model: "WnSConnection",
          loadData: {
            serviceName: formData !== null && formData !== void 0 && (_formData$ConnectionD37 = formData.ConnectionDetails) !== null && _formData$ConnectionD37 !== void 0 && (_formData$ConnectionD38 = _formData$ConnectionD37[0]) !== null && _formData$ConnectionD38 !== void 0 && _formData$ConnectionD38.water ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$cpt7 = formData.cpt) === null || _formData$cpt7 === void 0 ? void 0 : (_formData$cpt7$detail = _formData$cpt7.details) === null || _formData$cpt7$detail === void 0 ? void 0 : _formData$cpt7$detail.tenantId,
              applicationNumber: formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD39 = formData.ConnectionDetails) === null || _formData$ConnectionD39 === void 0 ? void 0 : (_formData$ConnectionD40 = _formData$ConnectionD39[0]) === null || _formData$ConnectionD40 === void 0 ? void 0 : _formData$ConnectionD40.applicationNo
            },
            jsonPath: formData !== null && formData !== void 0 && (_formData$ConnectionD41 = formData.ConnectionDetails) !== null && _formData$ConnectionD41 !== void 0 && (_formData$ConnectionD42 = _formData$ConnectionD41[0]) !== null && _formData$ConnectionD42 !== void 0 && _formData$ConnectionD42.water ? "WaterConnection[0].connectionHolders[0].ownerType" : "SewerageConnections[0].connectionHolders[0].ownerType",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.ownerType ? errors === null || errors === void 0 ? void 0 : (_errors$ownerType2 = errors.ownerType) === null || _errors$ownerType2 === void 0 ? void 0 : _errors$ownerType2.message : "")) : null);
};

function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}
var _listCacheClear = listCacheClear;

function eq(value, other) {
  return value === other || value !== value && other !== other;
}
var eq_1 = eq;

function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq_1(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}
var _assocIndexOf = assocIndexOf;

var arrayProto = Array.prototype;
var splice = arrayProto.splice;
function listCacheDelete(key) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}
var _listCacheDelete = listCacheDelete;

function listCacheGet(key) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  return index < 0 ? undefined : data[index][1];
}
var _listCacheGet = listCacheGet;

function listCacheHas(key) {
  return _assocIndexOf(this.__data__, key) > -1;
}
var _listCacheHas = listCacheHas;

function listCacheSet(key, value) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}
var _listCacheSet = listCacheSet;

function ListCache(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
ListCache.prototype.clear = _listCacheClear;
ListCache.prototype['delete'] = _listCacheDelete;
ListCache.prototype.get = _listCacheGet;
ListCache.prototype.has = _listCacheHas;
ListCache.prototype.set = _listCacheSet;
var _ListCache = ListCache;

function stackClear() {
  this.__data__ = new _ListCache();
  this.size = 0;
}
var _stackClear = stackClear;

function stackDelete(key) {
  var data = this.__data__,
    result = data['delete'](key);
  this.size = data.size;
  return result;
}
var _stackDelete = stackDelete;

function stackGet(key) {
  return this.__data__.get(key);
}
var _stackGet = stackGet;

function stackHas(key) {
  return this.__data__.has(key);
}
var _stackHas = stackHas;

var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
var _freeGlobal = freeGlobal;

var freeSelf = typeof self == 'object' && self && self.Object === Object && self;
var root = _freeGlobal || freeSelf || Function('return this')();
var _root = root;

var Symbol$1 = _root.Symbol;
var _Symbol = Symbol$1;

var objectProto = Object.prototype;
var hasOwnProperty = objectProto.hasOwnProperty;
var nativeObjectToString = objectProto.toString;
var symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
    tag = value[symToStringTag];
  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}
  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}
var _getRawTag = getRawTag;

var objectProto$1 = Object.prototype;
var nativeObjectToString$1 = objectProto$1.toString;
function objectToString(value) {
  return nativeObjectToString$1.call(value);
}
var _objectToString = objectToString;

var nullTag = '[object Null]',
  undefinedTag = '[object Undefined]';
var symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return symToStringTag$1 && symToStringTag$1 in Object(value) ? _getRawTag(value) : _objectToString(value);
}
var _baseGetTag = baseGetTag;

function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}
var isObject_1 = isObject;

var asyncTag = '[object AsyncFunction]',
  funcTag = '[object Function]',
  genTag = '[object GeneratorFunction]',
  proxyTag = '[object Proxy]';
function isFunction(value) {
  if (!isObject_1(value)) {
    return false;
  }
  var tag = _baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}
var isFunction_1 = isFunction;

var coreJsData = _root['__core-js_shared__'];
var _coreJsData = coreJsData;

var maskSrcKey = function () {
  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');
  return uid ? 'Symbol(src)_1.' + uid : '';
}();
function isMasked(func) {
  return !!maskSrcKey && maskSrcKey in func;
}
var _isMasked = isMasked;

var funcProto = Function.prototype;
var funcToString = funcProto.toString;
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return func + '';
    } catch (e) {}
  }
  return '';
}
var _toSource = toSource;

var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
var reIsHostCtor = /^\[object .+?Constructor\]$/;
var funcProto$1 = Function.prototype,
  objectProto$2 = Object.prototype;
var funcToString$1 = funcProto$1.toString;
var hasOwnProperty$1 = objectProto$2.hasOwnProperty;
var reIsNative = RegExp('^' + funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');
function baseIsNative(value) {
  if (!isObject_1(value) || _isMasked(value)) {
    return false;
  }
  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;
  return pattern.test(_toSource(value));
}
var _baseIsNative = baseIsNative;

function getValue(object, key) {
  return object == null ? undefined : object[key];
}
var _getValue = getValue;

function getNative(object, key) {
  var value = _getValue(object, key);
  return _baseIsNative(value) ? value : undefined;
}
var _getNative = getNative;

var Map = _getNative(_root, 'Map');
var _Map = Map;

var nativeCreate = _getNative(Object, 'create');
var _nativeCreate = nativeCreate;

function hashClear() {
  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};
  this.size = 0;
}
var _hashClear = hashClear;

function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}
var _hashDelete = hashDelete;

var HASH_UNDEFINED = '__lodash_hash_undefined__';
var objectProto$3 = Object.prototype;
var hasOwnProperty$2 = objectProto$3.hasOwnProperty;
function hashGet(key) {
  var data = this.__data__;
  if (_nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;
}
var _hashGet = hashGet;

var objectProto$4 = Object.prototype;
var hasOwnProperty$3 = objectProto$4.hasOwnProperty;
function hashHas(key) {
  var data = this.__data__;
  return _nativeCreate ? data[key] !== undefined : hasOwnProperty$3.call(data, key);
}
var _hashHas = hashHas;

var HASH_UNDEFINED$1 = '__lodash_hash_undefined__';
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = _nativeCreate && value === undefined ? HASH_UNDEFINED$1 : value;
  return this;
}
var _hashSet = hashSet;

function Hash(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
Hash.prototype.clear = _hashClear;
Hash.prototype['delete'] = _hashDelete;
Hash.prototype.get = _hashGet;
Hash.prototype.has = _hashHas;
Hash.prototype.set = _hashSet;
var _Hash = Hash;

function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new _Hash(),
    'map': new (_Map || _ListCache)(),
    'string': new _Hash()
  };
}
var _mapCacheClear = mapCacheClear;

function isKeyable(value) {
  var type = typeof value;
  return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ? value !== '__proto__' : value === null;
}
var _isKeyable = isKeyable;

function getMapData(map, key) {
  var data = map.__data__;
  return _isKeyable(key) ? data[typeof key == 'string' ? 'string' : 'hash'] : data.map;
}
var _getMapData = getMapData;

function mapCacheDelete(key) {
  var result = _getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}
var _mapCacheDelete = mapCacheDelete;

function mapCacheGet(key) {
  return _getMapData(this, key).get(key);
}
var _mapCacheGet = mapCacheGet;

function mapCacheHas(key) {
  return _getMapData(this, key).has(key);
}
var _mapCacheHas = mapCacheHas;

function mapCacheSet(key, value) {
  var data = _getMapData(this, key),
    size = data.size;
  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}
var _mapCacheSet = mapCacheSet;

function MapCache(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}
MapCache.prototype.clear = _mapCacheClear;
MapCache.prototype['delete'] = _mapCacheDelete;
MapCache.prototype.get = _mapCacheGet;
MapCache.prototype.has = _mapCacheHas;
MapCache.prototype.set = _mapCacheSet;
var _MapCache = MapCache;

var LARGE_ARRAY_SIZE = 200;
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof _ListCache) {
    var pairs = data.__data__;
    if (!_Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new _MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}
var _stackSet = stackSet;

function Stack(entries) {
  var data = this.__data__ = new _ListCache(entries);
  this.size = data.size;
}
Stack.prototype.clear = _stackClear;
Stack.prototype['delete'] = _stackDelete;
Stack.prototype.get = _stackGet;
Stack.prototype.has = _stackHas;
Stack.prototype.set = _stackSet;
var _Stack = Stack;

function arrayEach(array, iteratee) {
  var index = -1,
    length = array == null ? 0 : array.length;
  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}
var _arrayEach = arrayEach;

var defineProperty = function () {
  try {
    var func = _getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}();
var _defineProperty = defineProperty;

function baseAssignValue(object, key, value) {
  if (key == '__proto__' && _defineProperty) {
    _defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}
var _baseAssignValue = baseAssignValue;

var objectProto$5 = Object.prototype;
var hasOwnProperty$4 = objectProto$5.hasOwnProperty;
function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty$4.call(object, key) && eq_1(objValue, value)) || value === undefined && !(key in object)) {
    _baseAssignValue(object, key, value);
  }
}
var _assignValue = assignValue;

function copyObject(source, props, object, customizer) {
  var isNew = !object;
  object || (object = {});
  var index = -1,
    length = props.length;
  while (++index < length) {
    var key = props[index];
    var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined;
    if (newValue === undefined) {
      newValue = source[key];
    }
    if (isNew) {
      _baseAssignValue(object, key, newValue);
    } else {
      _assignValue(object, key, newValue);
    }
  }
  return object;
}
var _copyObject = copyObject;

function baseTimes(n, iteratee) {
  var index = -1,
    result = Array(n);
  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}
var _baseTimes = baseTimes;

function isObjectLike(value) {
  return value != null && typeof value == 'object';
}
var isObjectLike_1 = isObjectLike;

var argsTag = '[object Arguments]';
function baseIsArguments(value) {
  return isObjectLike_1(value) && _baseGetTag(value) == argsTag;
}
var _baseIsArguments = baseIsArguments;

var objectProto$6 = Object.prototype;
var hasOwnProperty$5 = objectProto$6.hasOwnProperty;
var propertyIsEnumerable = objectProto$6.propertyIsEnumerable;
var isArguments = _baseIsArguments(function () {
  return arguments;
}()) ? _baseIsArguments : function (value) {
  return isObjectLike_1(value) && hasOwnProperty$5.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
};
var isArguments_1 = isArguments;

var isArray = Array.isArray;
var isArray_1 = isArray;

function stubFalse() {
  return false;
}
var stubFalse_1 = stubFalse;

var isBuffer_1 = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;
  var moduleExports = freeModule && freeModule.exports === freeExports;
  var Buffer = moduleExports ? _root.Buffer : undefined;
  var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;
  var isBuffer = nativeIsBuffer || stubFalse_1;
  module.exports = isBuffer;
});

var MAX_SAFE_INTEGER = 9007199254740991;
var reIsUint = /^(?:0|[1-9]\d*)$/;
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
}
var _isIndex = isIndex;

var MAX_SAFE_INTEGER$1 = 9007199254740991;
function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;
}
var isLength_1 = isLength;

var argsTag$1 = '[object Arguments]',
  arrayTag = '[object Array]',
  boolTag = '[object Boolean]',
  dateTag = '[object Date]',
  errorTag = '[object Error]',
  funcTag$1 = '[object Function]',
  mapTag = '[object Map]',
  numberTag = '[object Number]',
  objectTag = '[object Object]',
  regexpTag = '[object RegExp]',
  setTag = '[object Set]',
  stringTag = '[object String]',
  weakMapTag = '[object WeakMap]';
var arrayBufferTag = '[object ArrayBuffer]',
  dataViewTag = '[object DataView]',
  float32Tag = '[object Float32Array]',
  float64Tag = '[object Float64Array]',
  int8Tag = '[object Int8Array]',
  int16Tag = '[object Int16Array]',
  int32Tag = '[object Int32Array]',
  uint8Tag = '[object Uint8Array]',
  uint8ClampedTag = '[object Uint8ClampedArray]',
  uint16Tag = '[object Uint16Array]',
  uint32Tag = '[object Uint32Array]';
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag$1] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag$1] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
function baseIsTypedArray(value) {
  return isObjectLike_1(value) && isLength_1(value.length) && !!typedArrayTags[_baseGetTag(value)];
}
var _baseIsTypedArray = baseIsTypedArray;

function baseUnary(func) {
  return function (value) {
    return func(value);
  };
}
var _baseUnary = baseUnary;

var _nodeUtil = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;
  var moduleExports = freeModule && freeModule.exports === freeExports;
  var freeProcess = moduleExports && _freeGlobal.process;
  var nodeUtil = function () {
    try {
      var types = freeModule && freeModule.require && freeModule.require('util').types;
      if (types) {
        return types;
      }
      return freeProcess && freeProcess.binding && freeProcess.binding('util');
    } catch (e) {}
  }();
  module.exports = nodeUtil;
});

var nodeIsTypedArray = _nodeUtil && _nodeUtil.isTypedArray;
var isTypedArray = nodeIsTypedArray ? _baseUnary(nodeIsTypedArray) : _baseIsTypedArray;
var isTypedArray_1 = isTypedArray;

var objectProto$7 = Object.prototype;
var hasOwnProperty$6 = objectProto$7.hasOwnProperty;
function arrayLikeKeys(value, inherited) {
  var isArr = isArray_1(value),
    isArg = !isArr && isArguments_1(value),
    isBuff = !isArr && !isArg && isBuffer_1(value),
    isType = !isArr && !isArg && !isBuff && isTypedArray_1(value),
    skipIndexes = isArr || isArg || isBuff || isType,
    result = skipIndexes ? _baseTimes(value.length, String) : [],
    length = result.length;
  for (var key in value) {
    if ((inherited || hasOwnProperty$6.call(value, key)) && !(skipIndexes && (key == 'length' || isBuff && (key == 'offset' || key == 'parent') || isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') || _isIndex(key, length)))) {
      result.push(key);
    }
  }
  return result;
}
var _arrayLikeKeys = arrayLikeKeys;

var objectProto$8 = Object.prototype;
function isPrototype(value) {
  var Ctor = value && value.constructor,
    proto = typeof Ctor == 'function' && Ctor.prototype || objectProto$8;
  return value === proto;
}
var _isPrototype = isPrototype;

function overArg(func, transform) {
  return function (arg) {
    return func(transform(arg));
  };
}
var _overArg = overArg;

var nativeKeys = _overArg(Object.keys, Object);
var _nativeKeys = nativeKeys;

var objectProto$9 = Object.prototype;
var hasOwnProperty$7 = objectProto$9.hasOwnProperty;
function baseKeys(object) {
  if (!_isPrototype(object)) {
    return _nativeKeys(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty$7.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }
  return result;
}
var _baseKeys = baseKeys;

function isArrayLike(value) {
  return value != null && isLength_1(value.length) && !isFunction_1(value);
}
var isArrayLike_1 = isArrayLike;

function keys(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object) : _baseKeys(object);
}
var keys_1 = keys;

function baseAssign(object, source) {
  return object && _copyObject(source, keys_1(source), object);
}
var _baseAssign = baseAssign;

function nativeKeysIn(object) {
  var result = [];
  if (object != null) {
    for (var key in Object(object)) {
      result.push(key);
    }
  }
  return result;
}
var _nativeKeysIn = nativeKeysIn;

var objectProto$a = Object.prototype;
var hasOwnProperty$8 = objectProto$a.hasOwnProperty;
function baseKeysIn(object) {
  if (!isObject_1(object)) {
    return _nativeKeysIn(object);
  }
  var isProto = _isPrototype(object),
    result = [];
  for (var key in object) {
    if (!(key == 'constructor' && (isProto || !hasOwnProperty$8.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}
var _baseKeysIn = baseKeysIn;

function keysIn(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object, true) : _baseKeysIn(object);
}
var keysIn_1 = keysIn;

function baseAssignIn(object, source) {
  return object && _copyObject(source, keysIn_1(source), object);
}
var _baseAssignIn = baseAssignIn;

var _cloneBuffer = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;
  var moduleExports = freeModule && freeModule.exports === freeExports;
  var Buffer = moduleExports ? _root.Buffer : undefined,
    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;
  function cloneBuffer(buffer, isDeep) {
    if (isDeep) {
      return buffer.slice();
    }
    var length = buffer.length,
      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
    buffer.copy(result);
    return result;
  }
  module.exports = cloneBuffer;
});

function copyArray(source, array) {
  var index = -1,
    length = source.length;
  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}
var _copyArray = copyArray;

function arrayFilter(array, predicate) {
  var index = -1,
    length = array == null ? 0 : array.length,
    resIndex = 0,
    result = [];
  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}
var _arrayFilter = arrayFilter;

function stubArray() {
  return [];
}
var stubArray_1 = stubArray;

var objectProto$b = Object.prototype;
var propertyIsEnumerable$1 = objectProto$b.propertyIsEnumerable;
var nativeGetSymbols = Object.getOwnPropertySymbols;
var getSymbols = !nativeGetSymbols ? stubArray_1 : function (object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return _arrayFilter(nativeGetSymbols(object), function (symbol) {
    return propertyIsEnumerable$1.call(object, symbol);
  });
};
var _getSymbols = getSymbols;

function copySymbols(source, object) {
  return _copyObject(source, _getSymbols(source), object);
}
var _copySymbols = copySymbols;

function arrayPush(array, values) {
  var index = -1,
    length = values.length,
    offset = array.length;
  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}
var _arrayPush = arrayPush;

var getPrototype = _overArg(Object.getPrototypeOf, Object);
var _getPrototype = getPrototype;

var nativeGetSymbols$1 = Object.getOwnPropertySymbols;
var getSymbolsIn = !nativeGetSymbols$1 ? stubArray_1 : function (object) {
  var result = [];
  while (object) {
    _arrayPush(result, _getSymbols(object));
    object = _getPrototype(object);
  }
  return result;
};
var _getSymbolsIn = getSymbolsIn;

function copySymbolsIn(source, object) {
  return _copyObject(source, _getSymbolsIn(source), object);
}
var _copySymbolsIn = copySymbolsIn;

function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray_1(object) ? result : _arrayPush(result, symbolsFunc(object));
}
var _baseGetAllKeys = baseGetAllKeys;

function getAllKeys(object) {
  return _baseGetAllKeys(object, keys_1, _getSymbols);
}
var _getAllKeys = getAllKeys;

function getAllKeysIn(object) {
  return _baseGetAllKeys(object, keysIn_1, _getSymbolsIn);
}
var _getAllKeysIn = getAllKeysIn;

var DataView = _getNative(_root, 'DataView');
var _DataView = DataView;

var Promise$1 = _getNative(_root, 'Promise');
var _Promise = Promise$1;

var Set = _getNative(_root, 'Set');
var _Set = Set;

var WeakMap = _getNative(_root, 'WeakMap');
var _WeakMap = WeakMap;

var mapTag$1 = '[object Map]',
  objectTag$1 = '[object Object]',
  promiseTag = '[object Promise]',
  setTag$1 = '[object Set]',
  weakMapTag$1 = '[object WeakMap]';
var dataViewTag$1 = '[object DataView]';
var dataViewCtorString = _toSource(_DataView),
  mapCtorString = _toSource(_Map),
  promiseCtorString = _toSource(_Promise),
  setCtorString = _toSource(_Set),
  weakMapCtorString = _toSource(_WeakMap);
var getTag = _baseGetTag;
if (_DataView && getTag(new _DataView(new ArrayBuffer(1))) != dataViewTag$1 || _Map && getTag(new _Map()) != mapTag$1 || _Promise && getTag(_Promise.resolve()) != promiseTag || _Set && getTag(new _Set()) != setTag$1 || _WeakMap && getTag(new _WeakMap()) != weakMapTag$1) {
  getTag = function (value) {
    var result = _baseGetTag(value),
      Ctor = result == objectTag$1 ? value.constructor : undefined,
      ctorString = Ctor ? _toSource(Ctor) : '';
    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString:
          return dataViewTag$1;
        case mapCtorString:
          return mapTag$1;
        case promiseCtorString:
          return promiseTag;
        case setCtorString:
          return setTag$1;
        case weakMapCtorString:
          return weakMapTag$1;
      }
    }
    return result;
  };
}
var _getTag = getTag;

var objectProto$c = Object.prototype;
var hasOwnProperty$9 = objectProto$c.hasOwnProperty;
function initCloneArray(array) {
  var length = array.length,
    result = new array.constructor(length);
  if (length && typeof array[0] == 'string' && hasOwnProperty$9.call(array, 'index')) {
    result.index = array.index;
    result.input = array.input;
  }
  return result;
}
var _initCloneArray = initCloneArray;

var Uint8Array = _root.Uint8Array;
var _Uint8Array = Uint8Array;

function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new _Uint8Array(result).set(new _Uint8Array(arrayBuffer));
  return result;
}
var _cloneArrayBuffer = cloneArrayBuffer;

function cloneDataView(dataView, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(dataView.buffer) : dataView.buffer;
  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
}
var _cloneDataView = cloneDataView;

var reFlags = /\w*$/;
function cloneRegExp(regexp) {
  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
  result.lastIndex = regexp.lastIndex;
  return result;
}
var _cloneRegExp = cloneRegExp;

var symbolProto = _Symbol ? _Symbol.prototype : undefined,
  symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;
function cloneSymbol(symbol) {
  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
}
var _cloneSymbol = cloneSymbol;

function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}
var _cloneTypedArray = cloneTypedArray;

var boolTag$1 = '[object Boolean]',
  dateTag$1 = '[object Date]',
  mapTag$2 = '[object Map]',
  numberTag$1 = '[object Number]',
  regexpTag$1 = '[object RegExp]',
  setTag$2 = '[object Set]',
  stringTag$1 = '[object String]',
  symbolTag = '[object Symbol]';
var arrayBufferTag$1 = '[object ArrayBuffer]',
  dataViewTag$2 = '[object DataView]',
  float32Tag$1 = '[object Float32Array]',
  float64Tag$1 = '[object Float64Array]',
  int8Tag$1 = '[object Int8Array]',
  int16Tag$1 = '[object Int16Array]',
  int32Tag$1 = '[object Int32Array]',
  uint8Tag$1 = '[object Uint8Array]',
  uint8ClampedTag$1 = '[object Uint8ClampedArray]',
  uint16Tag$1 = '[object Uint16Array]',
  uint32Tag$1 = '[object Uint32Array]';
function initCloneByTag(object, tag, isDeep) {
  var Ctor = object.constructor;
  switch (tag) {
    case arrayBufferTag$1:
      return _cloneArrayBuffer(object);
    case boolTag$1:
    case dateTag$1:
      return new Ctor(+object);
    case dataViewTag$2:
      return _cloneDataView(object, isDeep);
    case float32Tag$1:
    case float64Tag$1:
    case int8Tag$1:
    case int16Tag$1:
    case int32Tag$1:
    case uint8Tag$1:
    case uint8ClampedTag$1:
    case uint16Tag$1:
    case uint32Tag$1:
      return _cloneTypedArray(object, isDeep);
    case mapTag$2:
      return new Ctor();
    case numberTag$1:
    case stringTag$1:
      return new Ctor(object);
    case regexpTag$1:
      return _cloneRegExp(object);
    case setTag$2:
      return new Ctor();
    case symbolTag:
      return _cloneSymbol(object);
  }
}
var _initCloneByTag = initCloneByTag;

var objectCreate = Object.create;
var baseCreate = function () {
  function object() {}
  return function (proto) {
    if (!isObject_1(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object.prototype = proto;
    var result = new object();
    object.prototype = undefined;
    return result;
  };
}();
var _baseCreate = baseCreate;

function initCloneObject(object) {
  return typeof object.constructor == 'function' && !_isPrototype(object) ? _baseCreate(_getPrototype(object)) : {};
}
var _initCloneObject = initCloneObject;

var mapTag$3 = '[object Map]';
function baseIsMap(value) {
  return isObjectLike_1(value) && _getTag(value) == mapTag$3;
}
var _baseIsMap = baseIsMap;

var nodeIsMap = _nodeUtil && _nodeUtil.isMap;
var isMap = nodeIsMap ? _baseUnary(nodeIsMap) : _baseIsMap;
var isMap_1 = isMap;

var setTag$3 = '[object Set]';
function baseIsSet(value) {
  return isObjectLike_1(value) && _getTag(value) == setTag$3;
}
var _baseIsSet = baseIsSet;

var nodeIsSet = _nodeUtil && _nodeUtil.isSet;
var isSet = nodeIsSet ? _baseUnary(nodeIsSet) : _baseIsSet;
var isSet_1 = isSet;

var CLONE_DEEP_FLAG = 1,
  CLONE_FLAT_FLAG = 2,
  CLONE_SYMBOLS_FLAG = 4;
var argsTag$2 = '[object Arguments]',
  arrayTag$1 = '[object Array]',
  boolTag$2 = '[object Boolean]',
  dateTag$2 = '[object Date]',
  errorTag$1 = '[object Error]',
  funcTag$2 = '[object Function]',
  genTag$1 = '[object GeneratorFunction]',
  mapTag$4 = '[object Map]',
  numberTag$2 = '[object Number]',
  objectTag$2 = '[object Object]',
  regexpTag$2 = '[object RegExp]',
  setTag$4 = '[object Set]',
  stringTag$2 = '[object String]',
  symbolTag$1 = '[object Symbol]',
  weakMapTag$2 = '[object WeakMap]';
var arrayBufferTag$2 = '[object ArrayBuffer]',
  dataViewTag$3 = '[object DataView]',
  float32Tag$2 = '[object Float32Array]',
  float64Tag$2 = '[object Float64Array]',
  int8Tag$2 = '[object Int8Array]',
  int16Tag$2 = '[object Int16Array]',
  int32Tag$2 = '[object Int32Array]',
  uint8Tag$2 = '[object Uint8Array]',
  uint8ClampedTag$2 = '[object Uint8ClampedArray]',
  uint16Tag$2 = '[object Uint16Array]',
  uint32Tag$2 = '[object Uint32Array]';
var cloneableTags = {};
cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] = cloneableTags[arrayBufferTag$2] = cloneableTags[dataViewTag$3] = cloneableTags[boolTag$2] = cloneableTags[dateTag$2] = cloneableTags[float32Tag$2] = cloneableTags[float64Tag$2] = cloneableTags[int8Tag$2] = cloneableTags[int16Tag$2] = cloneableTags[int32Tag$2] = cloneableTags[mapTag$4] = cloneableTags[numberTag$2] = cloneableTags[objectTag$2] = cloneableTags[regexpTag$2] = cloneableTags[setTag$4] = cloneableTags[stringTag$2] = cloneableTags[symbolTag$1] = cloneableTags[uint8Tag$2] = cloneableTags[uint8ClampedTag$2] = cloneableTags[uint16Tag$2] = cloneableTags[uint32Tag$2] = true;
cloneableTags[errorTag$1] = cloneableTags[funcTag$2] = cloneableTags[weakMapTag$2] = false;
function baseClone(value, bitmask, customizer, key, object, stack) {
  var result,
    isDeep = bitmask & CLONE_DEEP_FLAG,
    isFlat = bitmask & CLONE_FLAT_FLAG,
    isFull = bitmask & CLONE_SYMBOLS_FLAG;
  if (customizer) {
    result = object ? customizer(value, key, object, stack) : customizer(value);
  }
  if (result !== undefined) {
    return result;
  }
  if (!isObject_1(value)) {
    return value;
  }
  var isArr = isArray_1(value);
  if (isArr) {
    result = _initCloneArray(value);
    if (!isDeep) {
      return _copyArray(value, result);
    }
  } else {
    var tag = _getTag(value),
      isFunc = tag == funcTag$2 || tag == genTag$1;
    if (isBuffer_1(value)) {
      return _cloneBuffer(value, isDeep);
    }
    if (tag == objectTag$2 || tag == argsTag$2 || isFunc && !object) {
      result = isFlat || isFunc ? {} : _initCloneObject(value);
      if (!isDeep) {
        return isFlat ? _copySymbolsIn(value, _baseAssignIn(result, value)) : _copySymbols(value, _baseAssign(result, value));
      }
    } else {
      if (!cloneableTags[tag]) {
        return object ? value : {};
      }
      result = _initCloneByTag(value, tag, isDeep);
    }
  }
  stack || (stack = new _Stack());
  var stacked = stack.get(value);
  if (stacked) {
    return stacked;
  }
  stack.set(value, result);
  if (isSet_1(value)) {
    value.forEach(function (subValue) {
      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
    });
  } else if (isMap_1(value)) {
    value.forEach(function (subValue, key) {
      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });
  }
  var keysFunc = isFull ? isFlat ? _getAllKeysIn : _getAllKeys : isFlat ? keysIn_1 : keys_1;
  var props = isArr ? undefined : keysFunc(value);
  _arrayEach(props || value, function (subValue, key) {
    if (props) {
      key = subValue;
      subValue = value[key];
    }
    _assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
  });
  return result;
}
var _baseClone = baseClone;

var CLONE_DEEP_FLAG$1 = 1,
  CLONE_SYMBOLS_FLAG$1 = 4;
function cloneDeep(value) {
  return _baseClone(value, CLONE_DEEP_FLAG$1 | CLONE_SYMBOLS_FLAG$1);
}
var cloneDeep_1 = cloneDeep;

const createConnectionDetails$1 = service => service == "WATER" ? {
  connectionType: "",
  noOfTaps: "",
  waterSource: "",
  pipeSize: "",
  waterSubSource: "",
  sourceSubData: ""
} : {
  noOfWaterClosets: "",
  noOfToilets: ""
};
const WSActivationConnectionDetails = _ref => {
  var _formData$connectionD, _filters$service, _filters$service2;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    pathname
  } = reactRouterDom.useLocation();
  const filters = getQueryStringParams(location.search);
  const [connectionDetails, setConnectionDetails] = window.location.href.includes("modify") ? React.useState(formData !== null && formData !== void 0 && formData.connectionDetails ? [formData === null || formData === void 0 ? void 0 : (_formData$connectionD = formData.connectionDetails) === null || _formData$connectionD === void 0 ? void 0 : _formData$connectionD[0]] : [createConnectionDetails$1(filters === null || filters === void 0 ? void 0 : (_filters$service = filters.service) === null || _filters$service === void 0 ? void 0 : _filters$service.toUpperCase())]) : React.useState((formData === null || formData === void 0 ? void 0 : formData.connectionDetails) || [createConnectionDetails$1(filters === null || filters === void 0 ? void 0 : (_filters$service2 = filters.service) === null || _filters$service2 === void 0 ? void 0 : _filters$service2.toUpperCase())]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const stateCode = Digit.ULBService.getStateId();
  const [isErrors, setIsErrors] = React.useState(false);
  const [pipeSizeList, setPipesizeList] = React.useState([]);
  const [connectionTypeList, setConnectionTypeList] = React.useState([]);
  const [waterSourceList, setWaterSourceList] = React.useState([]);
  const [waterSubSourceList, setWaterSubSourceList] = React.useState([]);
  const {
    isMdmsLoading,
    data: mdmsData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["connectionType", "waterSource"]);
  const {
    isWSServicesCalculationLoading,
    data: wsServicesCalculationData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-calculation", ["PipeSize"]);
  React.useEffect(() => {
    const data = connectionDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [connectionDetails]);
  React.useEffect(() => {
    var _wsServicesCalculatio, _mdmsData$wsServices, _mdmsData$wsServices2, _mdmsData$wsServices3, _connectionDetails$, _connectionDetails$$w;
    const list = (wsServicesCalculationData === null || wsServicesCalculationData === void 0 ? void 0 : (_wsServicesCalculatio = wsServicesCalculationData["ws-services-calculation"]) === null || _wsServicesCalculatio === void 0 ? void 0 : _wsServicesCalculatio.PipeSize) || [];
    list === null || list === void 0 ? void 0 : list.forEach(data => data.i18nKey = data.size);
    const connectionTypes = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices === void 0 ? void 0 : _mdmsData$wsServices.connectionType) || [];
    connectionTypes === null || connectionTypes === void 0 ? void 0 : connectionTypes.forEach(data => {
      var _data$code;
      return data.i18nKey = "WS_CONNECTIONTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.toUpperCase(), " ", "_");
    });
    const waterSource = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices2 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices2 === void 0 ? void 0 : _mdmsData$wsServices2.waterSource) && cloneDeep_1(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices3 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices3 === void 0 ? void 0 : _mdmsData$wsServices3.waterSource) || [];
    waterSource === null || waterSource === void 0 ? void 0 : waterSource.forEach(data => {
      var _data$code2, _data$code2$split$;
      return data.i18nKey = "WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code2 = data.code) === null || _data$code2 === void 0 ? void 0 : (_data$code2$split$ = _data$code2.split('.')[0]) === null || _data$code2$split$ === void 0 ? void 0 : _data$code2$split$.toUpperCase(), " ", "_");
    });
    var flags = [],
      waterSourceOutput = [],
      l = waterSource.length,
      i;
    for (i = 0; i < l; i++) {
      var _waterSource$i, _waterSource$i2;
      if (flags[waterSource[i].i18nKey]) continue;
      flags[waterSource[i].i18nKey] = true;
      waterSourceOutput.push({
        i18nKey: waterSource === null || waterSource === void 0 ? void 0 : (_waterSource$i = waterSource[i]) === null || _waterSource$i === void 0 ? void 0 : _waterSource$i.i18nKey,
        code: waterSource === null || waterSource === void 0 ? void 0 : (_waterSource$i2 = waterSource[i]) === null || _waterSource$i2 === void 0 ? void 0 : _waterSource$i2.code
      });
    }
    setPipesizeList(list);
    setConnectionTypeList(connectionTypes);
    setWaterSourceList(waterSourceOutput);
    if (connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$ = connectionDetails[0]) !== null && _connectionDetails$ !== void 0 && (_connectionDetails$$w = _connectionDetails$.waterSource) !== null && _connectionDetails$$w !== void 0 && _connectionDetails$$w.code) {
      var _mdmsData$wsServices4, _mdmsData$wsServices5;
      const waterSubSource = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices4 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices4 === void 0 ? void 0 : _mdmsData$wsServices4.waterSource) && cloneDeep_1(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices5 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices5 === void 0 ? void 0 : _mdmsData$wsServices5.waterSource) || [];
      waterSubSource === null || waterSubSource === void 0 ? void 0 : waterSubSource.forEach(data => {
        var _data$code3;
        return data.i18nKey = "WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code3 = data.code) === null || _data$code3 === void 0 ? void 0 : _data$code3.toUpperCase(), ".", "_");
      });
      const listOfSubSource = waterSubSource === null || waterSubSource === void 0 ? void 0 : waterSubSource.filter(data => {
        var _connectionDetails$2, _connectionDetails$2$, _connectionDetails$2$2, _data$code4;
        return (connectionDetails === null || connectionDetails === void 0 ? void 0 : (_connectionDetails$2 = connectionDetails[0]) === null || _connectionDetails$2 === void 0 ? void 0 : (_connectionDetails$2$ = _connectionDetails$2.waterSource) === null || _connectionDetails$2$ === void 0 ? void 0 : (_connectionDetails$2$2 = _connectionDetails$2$.code) === null || _connectionDetails$2$2 === void 0 ? void 0 : _connectionDetails$2$2.split('.')[0]) == (data === null || data === void 0 ? void 0 : (_data$code4 = data.code) === null || _data$code4 === void 0 ? void 0 : _data$code4.split(".")[0]);
      });
      setWaterSubSourceList(listOfSubSource);
    }
  }, [mdmsData, wsServicesCalculationData]);
  React.useEffect(() => {
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...connectionDetails
      });
    }
  }, [connectionDetails]);
  if (isMdmsLoading || isWSServicesCalculationLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  const commonProps = {
    focusIndex,
    allOwners: connectionDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setConnectionDetails,
    setIsErrors,
    isErrors,
    connectionDetails,
    connectionTypeList,
    waterSourceList,
    waterSubSourceList,
    pipeSizeList,
    filters,
    setWaterSubSourceList,
    mdmsData
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, connectionDetails.map((connectionDetail, index) => /*#__PURE__*/React__default.createElement(ConnectionDetails$2, _extends({
    key: connectionDetail.key,
    index: index,
    connectionDetail: connectionDetail
  }, commonProps))));
};
const ConnectionDetails$2 = _props => {
  var _errors$connectionTyp2, _errors$waterSource2, _errors$sourceSubData2, _errors$pipeSize2, _errors$noOfTaps2, _errors$noOfWaterClos2, _errors$noOfToilets2;
  const {
    connectionDetail,
    index,
    focusIndex,
    allOwners,
    setFocusIndex,
    t,
    formData,
    config,
    setError,
    clearErrors,
    formState,
    isEdit,
    connectionDetails,
    setIsErrors,
    isErrors,
    connectionTypeList,
    waterSourceList,
    waterSubSourceList,
    pipeSizeList,
    setConnectionDetails,
    filters,
    setWaterSubSourceList,
    mdmsData
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  const isMobile = window.Digit.Utils.browser.isMobile();
  let isEmployee = window.location.href.includes("/employee");
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (window.location.href.includes("modify")) trigger();
  }, [connectionDetails]);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = connectionDetail[key]);
      if (!lodash.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setConnectionDetails(ob);
        trigger();
      }
    }
  }, [formValue]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, !window.location.href.includes("by-config") && !window.location.href.includes("ws/modify-application") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_ACK_COMMON_APP_NO_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    disabled: true,
    value: filters === null || filters === void 0 ? void 0 : filters.applicationNumber
  }))) : null, (filters === null || filters === void 0 ? void 0 : filters.service) === "WATER" ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_CONN_TYPE") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "connectionType",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.connectionType,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$connectionTyp;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("connectionType"),
        disable: false,
        option: connectionTypeList,
        errorStyle: localFormState.touched.connectionType && errors !== null && errors !== void 0 && (_errors$connectionTyp = errors.connectionType) !== null && _errors$connectionTyp !== void 0 && _errors$connectionTyp.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.connectionType ? errors === null || errors === void 0 ? void 0 : (_errors$connectionTyp2 = errors.connectionType) === null || _errors$connectionTyp2 === void 0 ? void 0 : _errors$connectionTyp2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_WATER_SOURCE") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "waterSource",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.waterSource,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$waterSource;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("waterSource"),
        disable: false,
        option: waterSourceList,
        errorStyle: localFormState.touched.waterSource && errors !== null && errors !== void 0 && (_errors$waterSource = errors.waterSource) !== null && _errors$waterSource !== void 0 && _errors$waterSource.message ? true : false,
        select: e => {
          var _mdmsData$wsServices6, _mdmsData$wsServices7;
          let obj = {
            ...(connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails[0]),
            waterSource: e === null || e === void 0 ? void 0 : e.code,
            waterSubSource: ""
          };
          setConnectionDetails([obj]);
          const waterSubSourceData = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices6 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices6 === void 0 ? void 0 : _mdmsData$wsServices6.waterSource) && cloneDeep_1(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices7 = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices7 === void 0 ? void 0 : _mdmsData$wsServices7.waterSource) || [];
          waterSubSourceData === null || waterSubSourceData === void 0 ? void 0 : waterSubSourceData.forEach(data => {
            var _data$code5;
            return data.i18nKey = "WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code5 = data.code) === null || _data$code5 === void 0 ? void 0 : _data$code5.toUpperCase(), ".", "_");
          });
          const listOfSubSource = waterSubSourceData === null || waterSubSourceData === void 0 ? void 0 : waterSubSourceData.filter(data => {
            var _e$code, _data$code6;
            return (e === null || e === void 0 ? void 0 : (_e$code = e.code) === null || _e$code === void 0 ? void 0 : _e$code.split(".")[0]) == (data === null || data === void 0 ? void 0 : (_data$code6 = data.code) === null || _data$code6 === void 0 ? void 0 : _data$code6.split(".")[0]);
          });
          setWaterSubSourceList(listOfSubSource);
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.waterSource ? errors === null || errors === void 0 ? void 0 : (_errors$waterSource2 = errors.waterSource) === null || _errors$waterSource2 === void 0 ? void 0 : _errors$waterSource2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_WATER_SUB_SOURCE") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "sourceSubData",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.sourceSubData,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$sourceSubData;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("sourceSubData"),
        disable: false,
        option: waterSubSourceList,
        errorStyle: localFormState.touched.sourceSubData && errors !== null && errors !== void 0 && (_errors$sourceSubData = errors.sourceSubData) !== null && _errors$sourceSubData !== void 0 && _errors$sourceSubData.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.sourceSubData ? errors === null || errors === void 0 ? void 0 : (_errors$sourceSubData2 = errors.sourceSubData) === null || _errors$sourceSubData2 === void 0 ? void 0 : _errors$sourceSubData2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PIPE_SIZE_IN_INCHES_LABEL") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "pipeSize",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.pipeSize,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$pipeSize;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("pipeSize"),
        disable: false,
        option: pipeSizeList,
        errorStyle: localFormState.touched.pipeSize && errors !== null && errors !== void 0 && (_errors$pipeSize = errors.pipeSize) !== null && _errors$pipeSize !== void 0 && _errors$pipeSize.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.pipeSize ? errors === null || errors === void 0 ? void 0 : (_errors$pipeSize2 = errors.pipeSize) === null || _errors$pipeSize2 === void 0 ? void 0 : _errors$pipeSize2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_NO_OF_TAPS") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "noOfTaps",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.noOfTaps,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$noOfTaps;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "noOfTaps",
        errorStyle: localFormState.touched.noOfTaps && errors !== null && errors !== void 0 && (_errors$noOfTaps = errors.noOfTaps) !== null && _errors$noOfTaps !== void 0 && _errors$noOfTaps.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "noOfTaps"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.noOfTaps ? errors === null || errors === void 0 ? void 0 : (_errors$noOfTaps2 = errors.noOfTaps) === null || _errors$noOfTaps2 === void 0 ? void 0 : _errors$noOfTaps2.message : "")) : /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_NUMBER_WATER_CLOSETS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "noOfWaterClosets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.noOfWaterClosets,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$noOfWaterClos;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        type: "number",
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "noOfWaterClosets",
        errorStyle: localFormState.touched.noOfWaterClosets && errors !== null && errors !== void 0 && (_errors$noOfWaterClos = errors.noOfWaterClosets) !== null && _errors$noOfWaterClos !== void 0 && _errors$noOfWaterClos.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "noOfWaterClosets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.noOfWaterClosets ? errors === null || errors === void 0 ? void 0 : (_errors$noOfWaterClos2 = errors.noOfWaterClosets) === null || _errors$noOfWaterClos2 === void 0 ? void 0 : _errors$noOfWaterClos2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_NO_OF_TOILETS") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "noOfToilets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.noOfToilets,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$noOfToilets;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        type: "number",
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "noOfToilets",
        errorStyle: localFormState.touched.noOfToilets && errors !== null && errors !== void 0 && (_errors$noOfToilets = errors.noOfToilets) !== null && _errors$noOfToilets !== void 0 && _errors$noOfToilets.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "noOfToilets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.noOfToilets ? errors === null || errors === void 0 ? void 0 : (_errors$noOfToilets2 = errors.noOfToilets) === null || _errors$noOfToilets2 === void 0 ? void 0 : _errors$noOfToilets2.message : "")))));
};

const createPlumberDetails = () => [{
  plumberName: "",
  plumberMobileNo: "",
  plumberLicenseNo: "",
  detailsProvidedBy: ""
}];
const WSActivationPlumberDetails = _ref => {
  var _formData$connectionD, _formData$connectionD2;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const filters = getQueryStringParams(location.search);
  const [plumberDetails, setPlumberDetails] = React.useState((formData === null || formData === void 0 ? void 0 : formData.plumberDetails) || [createPlumberDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const [isErrors, setIsErrors] = React.useState(false);
  const options = [{
    i18nKey: "WS_PLUMBER_ULB",
    code: "ULB"
  }, {
    i18nKey: "WS_PLUMBER_SELF",
    code: "Self"
  }];
  React.useEffect(() => {
    const data = plumberDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [plumberDetails, formData === null || formData === void 0 ? void 0 : (_formData$connectionD = formData.connectionDetails) === null || _formData$connectionD === void 0 ? void 0 : (_formData$connectionD2 = _formData$connectionD[0]) === null || _formData$connectionD2 === void 0 ? void 0 : _formData$connectionD2.connectionType]);
  const commonProps = {
    focusIndex,
    allOwners: plumberDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setPlumberDetails,
    setIsErrors,
    isErrors,
    plumberDetails,
    filters,
    options,
    setPlumberDetails
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, plumberDetails.map((plumberDetail, index) => /*#__PURE__*/React__default.createElement(PlumberDetails, _extends({
    key: plumberDetail.key,
    index: index,
    plumberDetail: plumberDetail
  }, commonProps))));
};
const PlumberDetails = _props => {
  var _plumberDetails$, _formData$disConnecti, _errors$detailsProvid2, _plumberDetail$detail, _plumberDetail$detail2, _errors$plumberLicens2, _errors$plumberName2, _errors$plumberMobile2;
  const {
    plumberDetail,
    index,
    focusIndex,
    allOwners,
    setFocusIndex,
    t,
    formData,
    config,
    setError,
    clearErrors,
    formState,
    isEdit,
    plumberDetails,
    setIsErrors,
    isErrors,
    filters,
    options,
    setPlumberDetails
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  const isMobile = window.Digit.Utils.browser.isMobile();
  let isEmployee = window.location.href.includes("/employee");
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    trigger();
  }, [plumberDetails === null || plumberDetails === void 0 ? void 0 : (_plumberDetails$ = plumberDetails[0]) === null || _plumberDetails$ === void 0 ? void 0 : _plumberDetails$.detailsProvidedBy, formData === null || formData === void 0 ? void 0 : (_formData$disConnecti = formData.disConnectionDetails) === null || _formData$disConnecti === void 0 ? void 0 : _formData$disConnecti[0]]);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = plumberDetail[key]);
      let plumbermobileCheck = window.location.href.includes("ws/config-by-disconnection-application") ? (formValue === null || formValue === void 0 ? void 0 : formValue.plumberMobileNo) !== undefined && (part === null || part === void 0 ? void 0 : part.plumberMobileNo) : true;
      if (!lodash.isEqual(formValue, part) && plumbermobileCheck) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setPlumberDetails(ob);
        trigger();
      }
    }
  }, [formValue, plumberDetails]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key]) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "detailsProvidedBy",
    defaultValue: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.detailsProvidedBy,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$detailsProvid;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("detailsProvidedBy"),
        disable: false,
        option: options,
        errorStyle: localFormState.touched.detailsProvidedBy && errors !== null && errors !== void 0 && (_errors$detailsProvid = errors.detailsProvidedBy) !== null && _errors$detailsProvid !== void 0 && _errors$detailsProvid.message ? true : false,
        select: e => {
          if (e.code == "ULB") {
            let obj = {
              ...(plumberDetails === null || plumberDetails === void 0 ? void 0 : plumberDetails[0]),
              detailsProvidedBy: e,
              plumberName: "",
              plumberMobileNo: "",
              plumberLicenseNo: ""
            };
            setPlumberDetails([obj]);
          } else {
            let obj = {
              detailsProvidedBy: e
            };
            setPlumberDetails([obj]);
          }
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.detailsProvidedBy ? errors === null || errors === void 0 ? void 0 : (_errors$detailsProvid2 = errors.detailsProvidedBy) === null || _errors$detailsProvid2 === void 0 ? void 0 : _errors$detailsProvid2.message : ""), !(plumberDetail !== null && plumberDetail !== void 0 && (_plumberDetail$detail = plumberDetail.detailsProvidedBy) !== null && _plumberDetail$detail !== void 0 && _plumberDetail$detail.code) || (plumberDetail === null || plumberDetail === void 0 ? void 0 : (_plumberDetail$detail2 = plumberDetail.detailsProvidedBy) === null || _plumberDetail$detail2 === void 0 ? void 0 : _plumberDetail$detail2.code) == "ULB" ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PLIMBER_LICENSE_NO_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "plumberLicenseNo",
    defaultValue: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.plumberLicenseNo,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$plumberLicens;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        autoFocus: focusIndex.index === (plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key) && focusIndex.type === "plumberLicenseNo",
        errorStyle: localFormState.touched.plumberLicenseNo && errors !== null && errors !== void 0 && (_errors$plumberLicens = errors.plumberLicenseNo) !== null && _errors$plumberLicens !== void 0 && _errors$plumberLicens.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key,
            type: "plumberLicenseNo"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.plumberLicenseNo ? errors === null || errors === void 0 ? void 0 : (_errors$plumberLicens2 = errors.plumberLicenseNo) === null || _errors$plumberLicens2 === void 0 ? void 0 : _errors$plumberLicens2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "plumberName",
    defaultValue: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.plumberName,
    rules: {
      validate: e => e && getPattern("Name").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$plumberName;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        autoFocus: focusIndex.index === (plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key) && focusIndex.type === "plumberName",
        errorStyle: localFormState.touched.plumberName && errors !== null && errors !== void 0 && (_errors$plumberName = errors.plumberName) !== null && _errors$plumberName !== void 0 && _errors$plumberName.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key,
            type: "plumberName"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.plumberName ? errors === null || errors === void 0 ? void 0 : (_errors$plumberName2 = errors.plumberName) === null || _errors$plumberName2 === void 0 ? void 0 : _errors$plumberName2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PLUMBER_MOBILE_NO_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "plumberMobileNo",
    defaultValue: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.plumberMobileNo,
    rules: {
      validate: e => e && getPattern("MobileNoWithPrivacy").test(e) || !e || e.includes("*") ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "mobileNumber",
    isMandatory: true,
    render: props => {
      var _errors$plumberMobile, _props$value, _formData$connectionD3, _formData$connectionD4, _formData$connectionD5, _formData$connectionD6, _formData$disConnecti2, _formData$disConnecti3, _formData$disConnecti4, _formData$connectionD7, _formData$connectionD8, _formData$connectionD9, _formData$connectionD10, _formData$connectionD11, _formData$connectionD12, _formData$connectionD13, _formData$disConnecti5, _formData$disConnecti6, _formData$disConnecti7;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          marginRight: "unset"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          position: "relative",
          zIndex: "1",
          left: "35px",
          marginTop: "-24.5px",
          marginLeft: "-26px"
        }
      }, "+91"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        style: {
          background: "#FAFAFA",
          padding: "0px 35px"
        },
        type: "mobileNumber",
        value: props.value,
        autoFocus: focusIndex.index === (plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key) && focusIndex.type === "plumberMobileNo",
        errorStyle: localFormState.touched.plumberMobileNo && errors !== null && errors !== void 0 && (_errors$plumberMobile = errors.plumberMobileNo) !== null && _errors$plumberMobile !== void 0 && _errors$plumberMobile.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.key,
            type: "plumberMobileNo"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      }), /*#__PURE__*/React__default.createElement("div", {
        style: isMobile && isEmployee ? {} : {
          marginRight: "-50px",
          marginLeft: "10px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.WrapUnMaskComponent, {
        unmaskField: e => {
          props.onChange(e);
        },
        iseyevisible: (_props$value = props.value) !== null && _props$value !== void 0 && _props$value.includes("*") ? true : false,
        privacy: {
          uuid: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.applicationNo,
          fieldName: "plumberInfoMobileNumber",
          model: "WnSConnectionPlumber",
          loadData: {
            serviceName: (formData === null || formData === void 0 ? void 0 : (_formData$connectionD3 = formData.connectionDetails) === null || _formData$connectionD3 === void 0 ? void 0 : (_formData$connectionD4 = _formData$connectionD3[0]) === null || _formData$connectionD4 === void 0 ? void 0 : (_formData$connectionD5 = _formData$connectionD4.formDetails) === null || _formData$connectionD5 === void 0 ? void 0 : (_formData$connectionD6 = _formData$connectionD5.applicationData) === null || _formData$connectionD6 === void 0 ? void 0 : _formData$connectionD6.serviceType) === "WATER" || formData !== null && formData !== void 0 && (_formData$disConnecti2 = formData.disConnectionDetails) !== null && _formData$disConnecti2 !== void 0 && (_formData$disConnecti3 = _formData$disConnecti2[0]) !== null && _formData$disConnecti3 !== void 0 && (_formData$disConnecti4 = _formData$disConnecti3.consumerNumber) !== null && _formData$disConnecti4 !== void 0 && _formData$disConnecti4.includes("WS") ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
            requestBody: {},
            requestParam: {
              tenantId: formData === null || formData === void 0 ? void 0 : (_formData$connectionD7 = formData.connectionDetails) === null || _formData$connectionD7 === void 0 ? void 0 : (_formData$connectionD8 = _formData$connectionD7[0]) === null || _formData$connectionD8 === void 0 ? void 0 : (_formData$connectionD9 = _formData$connectionD8.formDetails) === null || _formData$connectionD9 === void 0 ? void 0 : _formData$connectionD9.tenantId,
              applicationNumber: plumberDetail === null || plumberDetail === void 0 ? void 0 : plumberDetail.applicationNo
            },
            jsonPath: (formData === null || formData === void 0 ? void 0 : (_formData$connectionD10 = formData.connectionDetails) === null || _formData$connectionD10 === void 0 ? void 0 : (_formData$connectionD11 = _formData$connectionD10[0]) === null || _formData$connectionD11 === void 0 ? void 0 : (_formData$connectionD12 = _formData$connectionD11.formDetails) === null || _formData$connectionD12 === void 0 ? void 0 : (_formData$connectionD13 = _formData$connectionD12.applicationData) === null || _formData$connectionD13 === void 0 ? void 0 : _formData$connectionD13.serviceType) === "WATER" || formData !== null && formData !== void 0 && (_formData$disConnecti5 = formData.disConnectionDetails) !== null && _formData$disConnecti5 !== void 0 && (_formData$disConnecti6 = _formData$disConnecti5[0]) !== null && _formData$disConnecti6 !== void 0 && (_formData$disConnecti7 = _formData$disConnecti6.consumerNumber) !== null && _formData$disConnecti7 !== void 0 && _formData$disConnecti7.includes("WS") ? "WaterConnection[0].plumberInfo[0].mobileNumber" : "SewerageConnections[0].plumberInfo[0].mobileNumber",
            isArray: false
          }
        }
      })));
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.plumberMobileNo ? errors === null || errors === void 0 ? void 0 : (_errors$plumberMobile2 = errors.plumberMobileNo) === null || _errors$plumberMobile2 === void 0 ? void 0 : _errors$plumberMobile2.message : "")) : null)));
};

const createActivationDetails = () => ({
  meterId: "",
  meterInstallationDate: null,
  meterInitialReading: "",
  connectionExecutionDate: null
});
const WSActivationPageDetails = _ref => {
  var _formData$activationD;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const filters = getQueryStringParams(location.search);
  const [activationDetails, setActivationDetails] = window.location.href.includes("modify") ? React.useState(formData !== null && formData !== void 0 && formData.activationDetails ? [formData === null || formData === void 0 ? void 0 : (_formData$activationD = formData.activationDetails) === null || _formData$activationD === void 0 ? void 0 : _formData$activationD[0]] : [createActivationDetails()]) : React.useState((formData === null || formData === void 0 ? void 0 : formData.activationDetails) || [createActivationDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const [isErrors, setIsErrors] = React.useState(false);
  React.useEffect(() => {
    const data = activationDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [activationDetails]);
  React.useEffect(() => {
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...activationDetails
      });
    }
  }, [activationDetails]);
  const commonProps = {
    focusIndex,
    allOwners: activationDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setActivationDetails,
    setIsErrors,
    isErrors,
    activationDetails,
    filters
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, activationDetails.map((activationDetail, index) => /*#__PURE__*/React__default.createElement(ConnectionDetails$3, _extends({
    key: activationDetail.key,
    index: index,
    activationDetail: activationDetail
  }, commonProps))));
};
const ConnectionDetails$3 = _props => {
  var _formData$connectionD, _formData$connectionD2, _formData$connectionD3, _formData$connectionD4, _formData$connectionD5, _formData$connectionD6, _errors$meterId2, _errors$meterInstalla, _errors$meterInitialR2, _errors$connectionExe2, _errors$dateEffective2;
  const {
    activationDetail,
    index,
    focusIndex,
    allOwners,
    setFocusIndex,
    t,
    formData,
    config,
    setError,
    clearErrors,
    formState,
    isEdit,
    activationDetails,
    setIsErrors,
    isErrors,
    filters,
    setActivationDetails
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  const isMobile = window.Digit.Utils.browser.isMobile();
  let isEmployee = window.location.href.includes("/employee");
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = activationDetail[key]);
      if (!lodash.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setActivationDetails(ob);
        trigger();
      }
    }
  }, [formValue]);
  React.useEffect(() => {
    trigger();
  }, [formData === null || formData === void 0 ? void 0 : (_formData$connectionD = formData.connectionDetails) === null || _formData$connectionD === void 0 ? void 0 : (_formData$connectionD2 = _formData$connectionD[0]) === null || _formData$connectionD2 === void 0 ? void 0 : _formData$connectionD2.connectionType]);
  React.useEffect(() => {
    if (window.location.href.includes("modify")) trigger();
  }, [activationDetails, formData === null || formData === void 0 ? void 0 : formData.ConnectionDetails, formData === null || formData === void 0 ? void 0 : formData.ConnectionHolderDetails, formData === null || formData === void 0 ? void 0 : formData.DocumentsRequired, formData === null || formData === void 0 ? void 0 : formData.connectionDetails, formData === null || formData === void 0 ? void 0 : formData.cpt]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, (filters === null || filters === void 0 ? void 0 : filters.service) === "WATER" && (formData === null || formData === void 0 ? void 0 : (_formData$connectionD3 = formData.connectionDetails) === null || _formData$connectionD3 === void 0 ? void 0 : (_formData$connectionD4 = _formData$connectionD3[0]) === null || _formData$connectionD4 === void 0 ? void 0 : (_formData$connectionD5 = _formData$connectionD4.connectionType) === null || _formData$connectionD5 === void 0 ? void 0 : (_formData$connectionD6 = _formData$connectionD5.code) === null || _formData$connectionD6 === void 0 ? void 0 : _formData$connectionD6.toUpperCase()) === "METERED" ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_METER_ID") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "meterId",
    defaultValue: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.meterId,
    type: "number",
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$meterId;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key) && focusIndex.type === "meterId",
        errorStyle: localFormState.touched.meterId && errors !== null && errors !== void 0 && (_errors$meterId = errors.meterId) !== null && _errors$meterId !== void 0 && _errors$meterId.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key,
            type: "meterId"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.meterId ? errors === null || errors === void 0 ? void 0 : (_errors$meterId2 = errors.meterId) === null || _errors$meterId2 === void 0 ? void 0 : _errors$meterId2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_ADDN_DETAIL_METER_INSTALL_DATE") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "meterInstallationDate",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    defaultValue: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.meterInstallationDate,
    control: control,
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      date: props.value,
      name: "meterInstallationDate",
      onChange: props.onChange
    })
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.meterInstallationDate ? errors === null || errors === void 0 ? void 0 : (_errors$meterInstalla = errors.meterInstallationDate) === null || _errors$meterInstalla === void 0 ? void 0 : _errors$meterInstalla.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_INITIAL_METER_READING_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    type: "number",
    control: control,
    name: "meterInitialReading",
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    defaultValue: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.meterInitialReading,
    isMandatory: true,
    render: props => {
      var _errors$meterInitialR;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key) && focusIndex.type === "meterInitialReading",
        errorStyle: localFormState.touched.meterInitialReading && errors !== null && errors !== void 0 && (_errors$meterInitialR = errors.meterInitialReading) !== null && _errors$meterInitialR !== void 0 && _errors$meterInitialR.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key,
            type: "meterInitialReading"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.meterInitialReading ? errors === null || errors === void 0 ? void 0 : (_errors$meterInitialR2 = errors.meterInitialReading) === null || _errors$meterInitialR2 === void 0 ? void 0 : _errors$meterInitialR2.message : "")) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_SERV_DETAIL_CONN_EXECUTION_DATE") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "connectionExecutionDate",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    defaultValue: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.connectionExecutionDate,
    control: control,
    render: props => {
      var _errors$connectionExe;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
        date: props.value,
        name: "connectionExecutionDate",
        onChange: props.onChange,
        autoFocus: focusIndex.index === (activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key) && focusIndex.type === "connectionExecutionDate",
        errorStyle: localFormState.touched.connectionExecutionDate && errors !== null && errors !== void 0 && (_errors$connectionExe = errors.connectionExecutionDate) !== null && _errors$connectionExe !== void 0 && _errors$connectionExe.message ? true : false
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.connectionExecutionDate ? errors === null || errors === void 0 ? void 0 : (_errors$connectionExe2 = errors.connectionExecutionDate) === null || _errors$connectionExe2 === void 0 ? void 0 : _errors$connectionExe2.message : ""), window.location.href.includes("modify") ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_MODIFICATIONS_EFFECTIVE_FROM") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "dateEffectiveFrom",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    defaultValue: activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.dateEffectiveFrom,
    control: control,
    render: props => {
      var _errors$dateEffective;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
        date: props.value,
        name: "dateEffectiveFrom",
        onChange: props.onChange,
        autoFocus: focusIndex.index === (activationDetail === null || activationDetail === void 0 ? void 0 : activationDetail.key) && focusIndex.type === "dateEffectiveFrom",
        errorStyle: localFormState.touched.dateEffectiveFrom && errors !== null && errors !== void 0 && (_errors$dateEffective = errors.dateEffectiveFrom) !== null && _errors$dateEffective !== void 0 && _errors$dateEffective.message ? true : false
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.dateEffectiveFrom ? errors === null || errors === void 0 ? void 0 : (_errors$dateEffective2 = errors.dateEffectiveFrom) === null || _errors$dateEffective2 === void 0 ? void 0 : _errors$dateEffective2.message : "")) : null));
};

const WSActivationCommentsDetails = _ref => {
  var _formData$comments;
  let {
    t,
    config,
    userType,
    formData,
    onSelect
  } = _ref;
  const [comments, setComments] = React.useState({
    comments: (formData === null || formData === void 0 ? void 0 : (_formData$comments = formData.comments) === null || _formData$comments === void 0 ? void 0 : _formData$comments.comments) || ""
  });
  React.useEffect(() => {
  });
  React.useEffect(() => {
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...comments
      });
    }
  }, [comments]);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WF_COMMON_COMMENTS"), ":"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: config.key,
    value: comments.comments,
    onChange: ev => {
      setComments({
        ...comments,
        comments: ev.target.value
      });
    }
  }))));
};

const WSActivationSupportingDocuments = _ref => {
  var _formData$supportingD, _formData$supportingD2;
  let {
    t,
    config,
    userType,
    formData,
    onSelect
  } = _ref;
  const stateId = Digit.ULBService.getStateId();
  const tenantIdCode = Digit.ULBService.getCurrentTenantId();
  const [documents, setDocuments] = React.useState(formData !== null && formData !== void 0 && (_formData$supportingD = formData.supportingDocuments) !== null && _formData$supportingD !== void 0 && _formData$supportingD[0] ? [formData === null || formData === void 0 ? void 0 : (_formData$supportingD2 = formData.supportingDocuments) === null || _formData$supportingD2 === void 0 ? void 0 : _formData$supportingD2[0]] : []);
  const [error, setError] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [file, setFile] = React.useState(null);
  const goNext = () => {
    onSelect(config.key, {
      documents
    });
  };
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    goNext();
  }, [documents]);
  React.useEffect(() => {
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...documents
      });
    }
  }, [documents]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, tenantIdCode)).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  React.useEffect(() => {
    if (uploadedFile) {
      setDocuments(prev => {
        return [{
          fileStoreId: uploadedFile,
          documentUid: uploadedFile
        }];
      });
    }
  }, [uploadedFile]);
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      fontWeight: "700"
    }
  }, t("WF_APPROVAL_UPLOAD_HEAD"), ":"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    onUpload: e => {
      selectfile(e);
    },
    onDelete: () => {
      setUploadedFile(null);
    },
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
    textStyles: {
      width: "100%"
    },
    inputStyles: {
      width: "280px"
    },
    buttonType: "button",
    accept: "image/*, .pdf, .png, .jpeg, .jpg",
    iserror: error
  }))));
};

const WSDocumentsEmployee = _ref => {
  var _formData$DocumentsRe, _applicationDetailsDa, _applicationDetailsDa2, _wsDocs$wsDocsData2;
  let {
    t,
    config,
    onSelect,
    userType,
    formData,
    setError: setFormError,
    clearErrors: clearFormErrors,
    formState
  } = _ref;
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const stateId = Digit.ULBService.getStateId();
  const [documents, setDocuments] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$DocumentsRe = formData.DocumentsRequired) === null || _formData$DocumentsRe === void 0 ? void 0 : _formData$DocumentsRe.documents) || []);
  const [error, setError] = React.useState(null);
  const wsDocsData = window.location.href.includes("modify") ? "ModifyConnectionDocuments" : window.location.href.includes("disconnection") ? "DisconnectionDocuments" : "Documents";
  let action = "create";
  const {
    pathname
  } = reactRouterDom.useLocation();
  const isEditScreen = pathname.includes("/modify-application/");
  const isMutation = pathname.includes("/property-mutate/");
  if (isEditScreen) action = "update";
  const {
    isLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(stateId, wsDocsData);
  const goNext = () => {
    onSelect(config.key, {
      documents
    });
  };
  React.useEffect(() => {
    goNext();
  }, [documents]);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const applicationDetailsData = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  if (window.location.href.includes("edit") && (applicationDetailsData === null || applicationDetailsData === void 0 ? void 0 : (_applicationDetailsDa = applicationDetailsData.applicationData) === null || _applicationDetailsDa === void 0 ? void 0 : (_applicationDetailsDa2 = _applicationDetailsDa.documents) === null || _applicationDetailsDa2 === void 0 ? void 0 : _applicationDetailsDa2.length) > 0) {
    var _applicationDetailsDa3;
    const documentsData = (applicationDetailsData === null || applicationDetailsData === void 0 ? void 0 : (_applicationDetailsDa3 = applicationDetailsData.applicationData) === null || _applicationDetailsDa3 === void 0 ? void 0 : _applicationDetailsDa3.documents) || [];
    documentsData === null || documentsData === void 0 ? void 0 : documentsData.map(documentData => {
      var _wsDocs$wsDocsData;
      wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$wsDocsData = wsDocs[wsDocsData]) === null || _wsDocs$wsDocsData === void 0 ? void 0 : _wsDocs$wsDocsData.forEach(docData => {
        var _docData$code, _docData$code2, _docData$code3, _docData$code4, _documentData$documen, _documentData$documen2, _documentData$documen3, _documentData$documen4;
        const docType = docData !== null && docData !== void 0 && (_docData$code = docData.code) !== null && _docData$code !== void 0 && _docData$code.split(".")[1] ? (docData === null || docData === void 0 ? void 0 : (_docData$code2 = docData.code) === null || _docData$code2 === void 0 ? void 0 : _docData$code2.split(".")[0]) + "." + (docData === null || docData === void 0 ? void 0 : (_docData$code3 = docData.code) === null || _docData$code3 === void 0 ? void 0 : _docData$code3.split(".")[1]) : docData === null || docData === void 0 ? void 0 : (_docData$code4 = docData.code) === null || _docData$code4 === void 0 ? void 0 : _docData$code4.split(".")[0];
        const dataDocType = documentData !== null && documentData !== void 0 && (_documentData$documen = documentData.documentType) !== null && _documentData$documen !== void 0 && _documentData$documen.split(".")[1] ? (documentData === null || documentData === void 0 ? void 0 : (_documentData$documen2 = documentData.documentType) === null || _documentData$documen2 === void 0 ? void 0 : _documentData$documen2.split(".")[0]) + "." + (documentData === null || documentData === void 0 ? void 0 : (_documentData$documen3 = documentData.documentType) === null || _documentData$documen3 === void 0 ? void 0 : _documentData$documen3.split(".")[1]) : documentData === null || documentData === void 0 ? void 0 : (_documentData$documen4 = documentData.documentType) === null || _documentData$documen4 === void 0 ? void 0 : _documentData$documen4.split(".")[0];
        if (docType == dataDocType) {
          docData.auditDetails = documentData.auditDetails;
          docData.documentType = docData.documentType;
          docData.documentUid = documentData.documentUid;
          docData.fileStoreId = documentData.fileStoreId;
          docData.id = documentData.id;
          docData.status = "ACTIVE";
        }
      });
    });
  }
  return /*#__PURE__*/React__default.createElement("div", null, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$wsDocsData2 = wsDocs[wsDocsData]) === null || _wsDocs$wsDocsData2 === void 0 ? void 0 : _wsDocs$wsDocsData2.map((document, index) => {
    return /*#__PURE__*/React__default.createElement(SelectDocument$1, {
      key: index,
      document: document,
      action: action,
      t: t,
      id: "pt-document-" + index,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      formData: formData,
      setFormError: setFormError,
      clearFormErrors: clearFormErrors,
      config: config,
      formState: formState
    });
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    onClose: () => setError(null),
    error: true
  }));
};
function SelectDocument$1(_ref2) {
  var _doc$dropdownData, _formData$ConnectionD;
  let {
    t,
    document: doc,
    setDocuments,
    error,
    setError,
    documents,
    action,
    formData,
    setFormError,
    clearFormErrors,
    config,
    formState,
    fromRawData,
    id
  } = _ref2;
  const filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [selectedDocument, setSelectedDocument] = React.useState(filteredDocument ? {
    ...filteredDocument,
    code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
  } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const handleSelectDocument = value => setSelectedDocument(value);
  React.useEffect(() => {
    if (filteredDocument) {
      var _doc$dropdownData2;
      setSelectedDocument(filteredDocument ? {
        ...filteredDocument,
        code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
      } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : _doc$dropdownData2.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
    }
  }, []);
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  const {
    dropdownData
  } = doc;
  var dropDownData = dropdownData;
  const [isHidden, setHidden] = React.useState(false);
  const addError = () => {
    var _formState$errors, _formState$errors$con;
    let type = (_formState$errors = formState.errors) === null || _formState$errors === void 0 ? void 0 : (_formState$errors$con = _formState$errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type;
    if (!Array.isArray(type)) type = [];
    if (!type.includes(doc.code)) {
      type.push(doc.code);
      setFormError(config.key, {
        type
      });
    }
  };
  const removeError = () => {
    var _formState$errors2, _formState$errors2$co;
    let type = (_formState$errors2 = formState.errors) === null || _formState$errors2 === void 0 ? void 0 : (_formState$errors2$co = _formState$errors2[config.key]) === null || _formState$errors2$co === void 0 ? void 0 : _formState$errors2$co.type;
    if (!Array.isArray(type)) type = [];
    if (type.includes(doc === null || doc === void 0 ? void 0 : doc.code)) {
      type = type.filter(e => e != (doc === null || doc === void 0 ? void 0 : doc.code));
      if (!type.length) {
        clearFormErrors(config.key);
      } else {
        setFormError(config.key, {
          type
        });
      }
    }
  };
  React.useEffect(() => {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(prev => {
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code));
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) {
          return filteredDocumentsByDocumentType;
        }
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        const data = [...filteredDocumentsByFileStoreId, {
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          i18nKey: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          id: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.id,
          status: "ACTIVE"
        }];
        sessionStorage.setItem("DISCONNECTION_EDIT_DOCS", JSON.stringify(data));
        return data;
      });
    }
    if (!isHidden) {
      if ((!uploadedFile || !(selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code)) && doc !== null && doc !== void 0 && doc.required) {
        addError();
      } else if (uploadedFile && selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
        removeError();
      }
    } else if (isHidden) {
      removeError();
    }
  }, [uploadedFile, selectedDocument, isHidden, formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD = formData.ConnectionDetails) === null || _formData$ConnectionD === void 0 ? void 0 : _formData$ConnectionD[0]]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp = _catch(function () {
                  setUploadedFile(null);
                  return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  React.useEffect(() => {
    if (isHidden) setUploadedFile(null);
  }, [isHidden]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, doc !== null && doc !== void 0 && doc.hasDropdown ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "700"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t(doc === null || doc === void 0 ? void 0 : doc.i18nKey) + "*" : "" + t(doc === null || doc === void 0 ? void 0 : doc.i18nKey)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    id: "doc-" + (doc === null || doc === void 0 ? void 0 : doc.code),
    key: "doc-" + (doc === null || doc === void 0 ? void 0 : doc.code),
    className: "form-field",
    selected: selectedDocument ? selectedDocument : filteredDocument ? filteredDocument : selectedDocument,
    option: dropDownData.map(e => {
      var _e$code;
      return {
        ...e,
        i18nKey: (_e$code = e.code) === null || _e$code === void 0 ? void 0 : _e$code.replaceAll(".", "_")
      };
    }),
    select: handleSelectDocument,
    optionKey: "i18nKey",
    t: t
  })) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller"
  }), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    onUpload: selectfile,
    onDelete: () => {
      setUploadedFile(null);
    },
    id: id,
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
    textStyles: {
      width: "100%"
    },
    inputStyles: {
      width: "280px"
    },
    buttonType: "button",
    error: !uploadedFile,
    accept: "image/*, .pdf, .png, .jpeg, .jpg"
  }))));
}

const createConnectionDetails$2 = () => ({
  water: true,
  sewerage: false,
  applicationNo: "",
  serviceName: "",
  proposedPipeSize: "",
  proposedTaps: "",
  proposedToilets: "",
  proposedWaterClosets: ""
});
const WSEditConnectionDetails = _ref => {
  var _formData$ConnectionD;
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  let filters = getQueryStringParams(location.search);
  const applicationNumber = filters === null || filters === void 0 ? void 0 : filters.applicationNumber;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    pathname
  } = reactRouterDom.useLocation();
  const [connectionDetails, setConnectionDetails] = React.useState(formData !== null && formData !== void 0 && formData.ConnectionDetails ? [formData === null || formData === void 0 ? void 0 : (_formData$ConnectionD = formData.ConnectionDetails) === null || _formData$ConnectionD === void 0 ? void 0 : _formData$ConnectionD[0]] : [createConnectionDetails$2()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const stateCode = Digit.ULBService.getStateId();
  const [isErrors, setIsErrors] = React.useState(false);
  const [waterSewarageSelection, setWaterSewarageSelection] = React.useState({
    water: true,
    sewerage: false
  });
  const [pipeSizeList, setPipesizeList] = React.useState([]);
  const {
    isWSServicesCalculationLoading,
    data: wsServicesCalculationData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-calculation", ["PipeSize"]);
  React.useEffect(() => {
    const data = connectionDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [connectionDetails]);
  React.useEffect(() => {
    var _wsServicesCalculatio;
    const list = (wsServicesCalculationData === null || wsServicesCalculationData === void 0 ? void 0 : (_wsServicesCalculatio = wsServicesCalculationData["ws-services-calculation"]) === null || _wsServicesCalculatio === void 0 ? void 0 : _wsServicesCalculatio.PipeSize) || [];
    list === null || list === void 0 ? void 0 : list.forEach(data => data.i18nKey = data.size);
    setPipesizeList(list);
  }, [wsServicesCalculationData]);
  React.useEffect(() => {
    var _connectionDetails$, _connectionDetails$2;
    if (userType === "employee") {
      onSelect(config.key, {
        ...formData[config.key],
        ...connectionDetails
      });
    }
    if (connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$ = connectionDetails[0]) !== null && _connectionDetails$ !== void 0 && _connectionDetails$.water) setWaterSewarageSelection({
      water: true,
      sewerage: false
    });
    if (connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$2 = connectionDetails[0]) !== null && _connectionDetails$2 !== void 0 && _connectionDetails$2.sewerage) setWaterSewarageSelection({
      water: false,
      sewerage: true
    });
  }, [connectionDetails]);
  React.useEffect(() => {
    if (!(formData !== null && formData !== void 0 && formData.ConnectionDetails)) {
      setConnectionDetails([createConnectionDetails$2()]);
    }
  }, [formData === null || formData === void 0 ? void 0 : formData.ConnectionDetails]);
  if (isWSServicesCalculationLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  const commonProps = {
    focusIndex,
    connectionDetails,
    setFocusIndex,
    formData,
    formState,
    t,
    setError,
    clearErrors,
    config,
    setConnectionDetails,
    setIsErrors,
    isErrors,
    pipeSizeList,
    wsServicesCalculationData,
    waterSewarageSelection,
    applicationNumber
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, connectionDetails.map((connectionDetail, index) => /*#__PURE__*/React__default.createElement(ConnectionDetails$4, _extends({
    key: connectionDetail.key,
    index: index,
    connectionDetail: connectionDetail
  }, commonProps))));
};
const ConnectionDetails$4 = _props => {
  var _errors$proposedTaps2, _errors$proposedPipeS2, _errors$proposedWater2, _errors$proposedToile2;
  const {
    connectionDetail,
    focusIndex,
    setFocusIndex,
    t,
    config,
    setError,
    clearErrors,
    formState,
    setIsErrors,
    isErrors,
    connectionTypeList,
    setConnectionDetails,
    wsServicesCalculationData,
    pipeSizeList,
    connectionDetails,
    waterSewarageSelection,
    applicationNumber
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = connectionDetail[key]);
      if (!lodash.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setConnectionDetails(ob);
        trigger();
      }
    }
  }, [formValue, connectionDetails]);
  React.useEffect(() => {
    var _Object$keys, _Object$keys2, _connectionDetails$3, _connectionDetails$4;
    let isClear = true;
    (_Object$keys = Object.keys(connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails[0])) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(data => {
      if (!connectionDetails[0][data] && connectionDetails[0][data] != false && isClear) isClear = false;
    });
    if (isClear && ((_Object$keys2 = Object.keys(connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails[0])) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) > 1) {
      clearErrors("ConnectionDetails");
    }
    if (!(connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$3 = connectionDetails[0]) !== null && _connectionDetails$3 !== void 0 && _connectionDetails$3.sewerage)) {
      clearErrors(config.key, {
        type: "proposedToilets"
      });
      clearErrors(config.key, {
        type: "proposedWaterClosets"
      });
    }
    if (!(connectionDetails !== null && connectionDetails !== void 0 && (_connectionDetails$4 = connectionDetails[0]) !== null && _connectionDetails$4 !== void 0 && _connectionDetails$4.water)) {
      clearErrors(config.key, {
        type: "proposedPipeSize"
      });
      clearErrors(config.key, {
        type: "proposedTaps"
      });
    }
    trigger();
  }, [connectionDetails, waterSewarageSelection]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  const isMobile = window.Digit.Utils.browser.isMobile();
  const isEmployee = window.location.href.includes("/employee");
  return /*#__PURE__*/React__default.createElement("div", null, window.location.href.includes("modify-application") ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_COMMON_SERV_DETAIL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    key: "WS_MYCONNECTIONS_CONSUMER_NO",
    label: "" + t("WS_MYCONNECTIONS_CONSUMER_NO"),
    text: applicationNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    key: "WS_SERVICE_NAME_LABEL",
    label: "" + t("WS_SERVICE_NAME_LABEL"),
    text: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.serviceName
  }))) : /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, "" + t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "applicationNo",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.applicationNo,
    isMandatory: true,
    render: props => {
      var _errors$applicationNo;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "applicationNo",
        errorStyle: localFormState.touched.applicationNo && errors !== null && errors !== void 0 && (_errors$applicationNo = errors.applicationNo) !== null && _errors$applicationNo !== void 0 && _errors$applicationNo.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "applicationNo"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        disabled: true,
        disable: true
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, "" + t("WS_SERVICE_NAME_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "serviceName",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.serviceName,
    isMandatory: true,
    render: props => {
      var _errors$serviceName;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "serviceName",
        errorStyle: localFormState.touched.serviceName && errors !== null && errors !== void 0 && (_errors$serviceName = errors.serviceName) !== null && _errors$serviceName !== void 0 && _errors$serviceName.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "serviceName"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        disabled: true,
        disable: true
      });
    }
  }))), (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.serviceName) == "WATER" && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_NO_OF_PROPOSED_TAPS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedTaps",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedTaps,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedTaps;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedTaps",
        errorStyle: localFormState.touched.proposedTaps && errors !== null && errors !== void 0 && (_errors$proposedTaps = errors.proposedTaps) !== null && _errors$proposedTaps !== void 0 && _errors$proposedTaps.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedTaps"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedTaps ? errors === null || errors === void 0 ? void 0 : (_errors$proposedTaps2 = errors.proposedTaps) === null || _errors$proposedTaps2 === void 0 ? void 0 : _errors$proposedTaps2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_PIPE_SIZE_IN_INCHES_LABEL") + "*"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedPipeSize",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedPipeSize,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$proposedPipeS;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        className: "form-field",
        selected: getValues("proposedPipeSize"),
        disable: false,
        option: pipeSizeList,
        errorStyle: localFormState.touched.proposedPipeSize && errors !== null && errors !== void 0 && (_errors$proposedPipeS = errors.proposedPipeSize) !== null && _errors$proposedPipeS !== void 0 && _errors$proposedPipeS.message ? true : false,
        select: e => {
          props.onChange(e);
        },
        optionKey: "i18nKey",
        onBlur: props.onBlur,
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedPipeSize ? errors === null || errors === void 0 ? void 0 : (_errors$proposedPipeS2 = errors.proposedPipeSize) === null || _errors$proposedPipeS2 === void 0 ? void 0 : _errors$proposedPipeS2.message : "")), (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.serviceName) !== "WATER" && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_WATER_CLOSETS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedWaterClosets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedWaterClosets,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedWater;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedWaterClosets",
        errorStyle: localFormState.touched.proposedWaterClosets && errors !== null && errors !== void 0 && (_errors$proposedWater = errors.proposedWaterClosets) !== null && _errors$proposedWater !== void 0 && _errors$proposedWater.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedWaterClosets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedWaterClosets ? errors === null || errors === void 0 ? void 0 : (_errors$proposedWater2 = errors.proposedWaterClosets) === null || _errors$proposedWater2 === void 0 ? void 0 : _errors$proposedWater2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_PROPOSED_WATER_TOILETS_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "proposedToilets",
    defaultValue: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.proposedToilets,
    rules: {
      validate: e => e && getPattern("WSOnlyNumbers").test(e) || !e ? true : t("ERR_DEFAULT_INPUT_FIELD_MSG"),
      required: t("REQUIRED_FIELD")
    },
    type: "number",
    isMandatory: true,
    render: props => {
      var _errors$proposedToile;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        type: "number",
        value: props.value,
        autoFocus: focusIndex.index === (connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key) && focusIndex.type === "proposedToilets",
        errorStyle: localFormState.touched.proposedToilets && errors !== null && errors !== void 0 && (_errors$proposedToile = errors.proposedToilets) !== null && _errors$proposedToile !== void 0 && _errors$proposedToile.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: connectionDetail === null || connectionDetail === void 0 ? void 0 : connectionDetail.key,
            type: "proposedToilets"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.proposedToilets ? errors === null || errors === void 0 ? void 0 : (_errors$proposedToile2 = errors.proposedToilets) === null || _errors$proposedToile2 === void 0 ? void 0 : _errors$proposedToile2.message : ""))));
};

const WSDisconnectionDocsRequired = _ref => {
  var _wsDocs$Disconnection2;
  let {
    userType
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const tenantId = Digit.ULBService.getStateId();
  const {
    isLoading: wsDocsLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(tenantId, "DisconnectionDocuments");
  if (userType === "citizen") {
    var _wsDocs$Disconnection;
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("WS_COMMON_APPLICATION_DISCONNECTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
      style: {
        margin: "0px"
      },
      textStyle: {
        color: "#0B0C0C",
        paddingLeft: "40px",
        paddingRight: "40px"
      },
      text: t("WS_DOCS_REQUIRED_TIME"),
      showInfo: false
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_1")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_2")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_DOC_REQ_SCREEN_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
      style: {
        color: "#0B0C0C",
        marginTop: "12px"
      }
    }, t("WS_NEW_CONNECTION_TEST_3")), wsDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Disconnection = wsDocs.DisconnectionDocuments) === null || _wsDocs$Disconnection === void 0 ? void 0 : _wsDocs$Disconnection.map((doc, index) => {
      var _doc$dropdownData;
      return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
        style: {
          fontWeight: 700,
          marginBottom: "8px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex"
        }
      }, /*#__PURE__*/React__default.createElement("div", null, index + 1 + ".", "\xA0"), /*#__PURE__*/React__default.createElement("div", null, " " + t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_'))))), /*#__PURE__*/React__default.createElement("div", {
        style: {
          marginBottom: "16px",
          marginLeft: "18px",
          color: 'gray'
        }
      }, doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.map((value, index) => {
        var _doc$dropdownData2;
        return (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : _doc$dropdownData2.length) !== index + 1 ? /*#__PURE__*/React__default.createElement("span", {
          style: {
            color: 'gray'
          }
        }, t(value === null || value === void 0 ? void 0 : value.i18nKey) + ", ") : /*#__PURE__*/React__default.createElement("span", {
          style: {
            color: 'gray'
          }
        }, "" + t(value === null || value === void 0 ? void 0 : value.i18nKey));
      })));
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      label: t("CS_COMMON_NEXT"),
      onSubmit: () => {
        history.push(match.path.replace("docsrequired", "application-form"));
      }
    })));
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      margin: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px",
      marginLeft: "18px"
    }
  }, t("WS_WATER_AND_SEWERAGE_DISCONNECTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, wsDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement("div", {
    id: "documents-div"
  }, wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Disconnection2 = wsDocs.DisconnectionDocuments) === null || _wsDocs$Disconnection2 === void 0 ? void 0 : _wsDocs$Disconnection2.map((doc, index) => {
    var _doc$dropdownData3;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: {
        marginTop: "16px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        marginBottom: "16px",
        lineHeight: "28px",
        fontSize: "24px"
      }
    }, t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_'))), doc.dropdownData && doc.dropdownData.length > 1 && /*#__PURE__*/React__default.createElement("p", {
      style: {
        lineHeight: "24px",
        fontSize: "16px"
      }
    }, t((doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')) + "_DESCRIPTION")), /*#__PURE__*/React__default.createElement("div", {
      style: {
        margin: "16px 0",
        lineHeight: "18px",
        fontSize: "16px"
      }
    }, doc === null || doc === void 0 ? void 0 : (_doc$dropdownData3 = doc.dropdownData) === null || _doc$dropdownData3 === void 0 ? void 0 : _doc$dropdownData3.map((value, idx) => /*#__PURE__*/React__default.createElement("p", {
      style: {
        fontWeight: "bold",
        lineHeight: "32px"
      }
    }, idx + 1 + ". " + t(value === null || value === void 0 ? void 0 : value.i18nKey)))), /*#__PURE__*/React__default.createElement("p", {
      style: {
        fontSize: "16px"
      }
    }, t((doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')) + "_BELOW_DESCRIPTION")));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ACTION_TEST_APPLY"),
    onSubmit: () => {
      history.push(match.path.replace("docsrequired", "application-form"));
    },
    style: {
      margin: "10px 10px 0px 0px"
    },
    disabled: wsDocsLoading ? true : false
  }))));
};

let actions$1 = [];
const getAction$1 = flow => {
  switch (flow) {
    default:
      actions$1 = ['WS_COMMON_DISCONNECTION_DETAIL', 'WS_COMMON_DOCUMENT_DETAILS', 'WS_COMMON_SUMMARY'];
  }
};
const DisconnectTimeline = _ref => {
  let {
    currentStep = 1,
    flow = ""
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const isMobile = window.Digit.Utils.browser.isMobile();
  getAction$1(flow);
  return /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-container",
    style: isMobile ? {} : {
      maxWidth: "960px",
      minWidth: "640px",
      marginRight: "auto"
    }
  }, actions$1.map((action, index, arr) => /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-checkpoint",
    key: index
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-content"
  }, /*#__PURE__*/React__default.createElement("span", {
    className: "circle " + (index <= currentStep - 1 && 'active')
  }, index < currentStep - 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.TickMark, null) : index + 1), /*#__PURE__*/React__default.createElement("span", {
    className: "secondary-color"
  }, t(action))), index < arr.length - 1 && /*#__PURE__*/React__default.createElement("span", {
    className: "line " + (index < currentStep - 1 && 'active')
  }))));
};

function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);
  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule");
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}

function addDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);
  if (isNaN(amount)) {
    return new Date(NaN);
  }
  if (!amount) {
    return date;
  }
  date.setDate(date.getDate() + amount);
  return date;
}

function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}

function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || typeof value === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

function isValid(dirtyDate) {
  requiredArgs(1, arguments);
  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }
  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}

var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};
var formatDistance = function (token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }
  return result;
};

function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};

var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};
var formatRelative = function (token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};

function buildLocalizeFn(args) {
  return function (dirtyIndex, dirtyOptions) {
    var options = dirtyOptions || {};
    var context = options.context ? String(options.context) : 'standalone';
    var valuesArray;
    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    return valuesArray[index];
  };
}

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
};
var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};
var ordinalNumber = function (dirtyNumber, _options) {
  var number = Number(dirtyNumber);
  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';
      case 2:
        return number + 'nd';
      case 3:
        return number + 'rd';
    }
  }
  return number + 'th';
};
var localize = {
  ordinalNumber: ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function (quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};

function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return undefined;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return undefined;
}

function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function (value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function (index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};

var locale = {
  code: 'en-US',
  formatDistance: formatDistance,
  formatLong: formatLong,
  formatRelative: formatRelative,
  localize: localize,
  match: match,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};

function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}

var MILLISECONDS_IN_DAY = 86400000;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK = 604800000;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

function startOfUTCWeek(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCWeekYear(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, dirtyOptions);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, dirtyOptions);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCWeekYear(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);
  var year = getUTCWeekYear(dirtyDate, dirtyOptions);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, dirtyOptions);
  return date;
}

var MILLISECONDS_IN_WEEK$1 = 604800000;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}

function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = '0' + output;
  }
  return sign + output;
}

var formatters = {
  y: function (date, token) {
    var signedYear = date.getUTCFullYear();
    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);
  },
  M: function (date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  d: function (date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  a: function (date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();
      case 'aaa':
        return dayPeriodEnumValue;
      case 'aaaaa':
        return dayPeriodEnumValue[0];
      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  h: function (date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  H: function (date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  m: function (date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  s: function (date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  S: function (date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};
var formatters$1 = {
  G: function (date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  y: function (date, token, localize) {
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear();
      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }
    return formatters.y(date, token);
  },
  Y: function (date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear(date, options);
    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  R: function (date, token) {
    var isoWeekYear = getUTCISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  u: function (date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  Q: function (date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case 'Q':
        return String(quarter);
      case 'QQ':
        return addLeadingZeros(quarter, 2);
      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  q: function (date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case 'q':
        return String(quarter);
      case 'qq':
        return addLeadingZeros(quarter, 2);
      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  M: function (date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'M':
      case 'MM':
        return formatters.M(date, token);
      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  L: function (date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'L':
        return String(month + 1);
      case 'LL':
        return addLeadingZeros(month + 1, 2);
      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  w: function (date, token, localize, options) {
    var week = getUTCWeek(date, options);
    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }
    return addLeadingZeros(week, token.length);
  },
  I: function (date, token, localize) {
    var isoWeek = getUTCISOWeek(date);
    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  d: function (date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }
    return formatters.d(date, token);
  },
  D: function (date, token, localize) {
    var dayOfYear = getUTCDayOfYear(date);
    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  E: function (date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    switch (token) {
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  e: function (date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case 'e':
        return String(localDayOfWeek);
      case 'ee':
        return addLeadingZeros(localDayOfWeek, 2);
      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  c: function (date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case 'c':
        return String(localDayOfWeek);
      case 'cc':
        return addLeadingZeros(localDayOfWeek, token.length);
      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  i: function (date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      case 'i':
        return String(isoDayOfWeek);
      case 'ii':
        return addLeadingZeros(isoDayOfWeek, token.length);
      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  a: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  b: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }
    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  B: function (date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  h: function (date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return formatters.h(date, token);
  },
  H: function (date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }
    return formatters.H(date, token);
  },
  K: function (date, token, localize) {
    var hours = date.getUTCHours() % 12;
    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  k: function (date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;
    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  m: function (date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }
    return formatters.m(date, token);
  },
  s: function (date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }
    return formatters.s(date, token);
  },
  S: function (date, token) {
    return formatters.S(date, token);
  },
  X: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return 'Z';
    }
    switch (token) {
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case 'XXXX':
      case 'XX':
        return formatTimezone(timezoneOffset);
      case 'XXXXX':
      case 'XXX':
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  x: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case 'xxxx':
      case 'xx':
        return formatTimezone(timezoneOffset);
      case 'xxxxx':
      case 'xxx':
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  O: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  z: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  t: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros(timestamp, token.length);
  },
  T: function (date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });
    case 'PP':
      return formatLong.date({
        width: 'medium'
      });
    case 'PPP':
      return formatLong.date({
        width: 'long'
      });
    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
}
function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });
    case 'pp':
      return formatLong.time({
        width: 'medium'
      });
    case 'ppp':
      return formatLong.time({
        width: 'long'
      });
    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
}
function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;
    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;
    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;
    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }
  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
}
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  }
}

var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(dirtyDate, dirtyFormatStr, dirtyOptions) {
  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var options = dirtyOptions || {};
  var locale$1 = options.locale || locale;
  var localeFirstWeekContainsDate = locale$1.options && locale$1.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var localeWeekStartsOn = locale$1.options && locale$1.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  if (!locale$1.localize) {
    throw new RangeError('locale must contain localize property');
  }
  if (!locale$1.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }
  var originalDate = toDate(dirtyDate);
  if (!isValid(originalDate)) {
    throw new RangeError('Invalid time value');
  }
  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale$1,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale$1.formatLong, formatterOptions);
    }
    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }
    var formatter = formatters$1[firstCharacter];
    if (formatter) {
      if (!options.useAdditionalWeekYearTokens && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, dirtyDate);
      }
      if (!options.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, dirtyDate);
      }
      return formatter(utcDate, substring, locale$1.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }
    return substring;
  }).join('');
  return result;
}
function cleanEscapedString(input) {
  return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, "'");
}

const WSDisconnectionForm = _ref => {
  var _applicationData$appl2, _disconnectionData$ty4, _disconnectionData$ty5, _disconnectionData$ty6, _disconnectionData$re4, _wsDocs$Disconnection;
  let {
    t,
    config,
    onSelect,
    userType
  } = _ref;
  const stateCode = Digit.ULBService.getStateId();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const isMobile = window.Digit.Utils.browser.isMobile();
  const applicationData = Digit.SessionStorage.get("WS_DISCONNECTION");
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const [disconnectionData, setDisconnectionData] = React.useState({
    type: applicationData.WSDisconnectionForm ? applicationData.WSDisconnectionForm.type : "",
    date: applicationData.WSDisconnectionForm ? applicationData.WSDisconnectionForm.date : "",
    reason: applicationData.WSDisconnectionForm ? applicationData.WSDisconnectionForm.reason : "",
    documents: applicationData.WSDisconnectionForm ? applicationData.WSDisconnectionForm.documents : []
  });
  const [documents, setDocuments] = React.useState(applicationData.WSDisconnectionForm ? applicationData.WSDisconnectionForm.documents : []);
  const [error, setError] = React.useState(null);
  const [disconnectionTypeList, setDisconnectionTypeList] = React.useState([]);
  const [checkRequiredFields, setCheckRequiredFields] = React.useState(false);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const {
    isMdmsLoading,
    data: mdmsData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["disconnectionType"]);
  const {
    isLoading: wsDocsLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(stateCode, "DisconnectionDocuments");
  const {
    isLoading: slaLoading,
    data: slaData
  } = Digit.Hooks.ws.useDisconnectionWorkflow({
    tenantId
  });
  const isReSubmit = window.location.href.includes("resubmit");
  const {
    isLoading: creatingWaterApplicationLoading,
    isError: createWaterApplicationError,
    data: createWaterResponse,
    error: createWaterError,
    mutate: waterMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("WATER");
  const {
    isLoading: updatingWaterApplicationLoading,
    isError: updateWaterApplicationError,
    data: updateWaterResponse,
    error: updateWaterError,
    mutate: waterUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("WATER");
  const {
    isLoading: creatingSewerageApplicationLoading,
    isError: createSewerageApplicationError,
    data: createSewerageResponse,
    error: createSewerageError,
    mutate: sewerageMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE");
  const {
    isLoading: updatingSewerageApplicationLoading,
    isError: updateSewerageApplicationError,
    data: updateSewerageResponse,
    error: updateSewerageError,
    mutate: sewerageUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");
  const closeToastOfError = () => {
    setError(null);
  };
  React.useEffect(() => {
    const oldData = {
      ...disconnectionData
    };
    oldData['documents'] = documents;
    setDisconnectionData(oldData);
  }, [documents]);
  React.useEffect(() => {
    var _mdmsData$wsServices;
    const disconnectionTypes = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices === void 0 ? void 0 : _mdmsData$wsServices.disconnectionType) || [];
    disconnectionTypes === null || disconnectionTypes === void 0 ? void 0 : disconnectionTypes.forEach(data => {
      var _data$code;
      return data.i18nKey = "WS_DISCONNECTIONTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.toUpperCase(), " ", "_");
    });
    setDisconnectionTypeList(disconnectionTypes);
  }, [mdmsData]);
  React.useEffect(() => {
    Digit.SessionStorage.set("WS_DISCONNECTION", {
      ...applicationData,
      WSDisconnectionForm: disconnectionData
    });
  }, [disconnectionData]);
  const handleSubmit = () => onSelect(config.key, {
    WSDisConnectionForm: disconnectionData
  });
  const handleEmployeeSubmit = () => {
    onSelect(config.key, {
      WSDisConnectionForm: {
        ...disconnectionData,
        documents: documents
      }
    });
  };
  const onSkip = () => onSelect();
  const filedChange = val => {
    const oldData = {
      ...disconnectionData
    };
    oldData[val.code] = val;
    setDisconnectionData(oldData);
  };
  const onSubmit = function (data) {
    try {
      const appDate = new Date();
      const proposedDate = format(addDays(appDate, slaData === null || slaData === void 0 ? void 0 : slaData.slaDays), 'yyyy-MM-dd').toString();
      const _temp6 = function () {
        if (convertDateToEpoch(data === null || data === void 0 ? void 0 : data.date) <= convertDateToEpoch(proposedDate)) {
          setError({
            key: "error",
            message: "PROPOSED_DISCONNECTION_INVALID_DATE"
          });
          setTimeout(() => {
            setError(false);
          }, 3000);
        } else {
          const _temp5 = function (_disconnectionData$re) {
            if (wsDocsLoading || documents.length < 2 || (disconnectionData === null || disconnectionData === void 0 ? void 0 : (_disconnectionData$re = disconnectionData.reason) === null || _disconnectionData$re === void 0 ? void 0 : _disconnectionData$re.value) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.reason) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.date) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.type) === "") {
              setError({
                warning: true,
                message: "PLEASE_FILL_MANDATORY_DETAILS"
              });
              setTimeout(() => {
                setError(false);
              }, 3000);
            } else {
              var _applicationData$appl;
              return Promise.resolve(createPayloadOfWSDisconnection(data, applicationData, applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$appl = applicationData.applicationData) === null || _applicationData$appl === void 0 ? void 0 : _applicationData$appl.serviceType)).then(function (payload) {
                const _temp4 = function (_payload$WaterConnect) {
                  if (payload !== null && payload !== void 0 && (_payload$WaterConnect = payload.WaterConnection) !== null && _payload$WaterConnect !== void 0 && _payload$WaterConnect.water) {
                    const _temp = function () {
                      if (waterMutation) {
                        setIsEnableLoader(true);
                        return Promise.resolve(waterMutation(payload, {
                          onError: (error, variables) => {
                            var _error$response, _error$response$data, _error$response$data$, _error$response2, _error$response2$data, _error$response2$data2;
                            setIsEnableLoader(false);
                            setError({
                              key: "error",
                              message: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors) !== null && _error$response$data$ !== void 0 && _error$response$data$[0].message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2[0].message : error
                            });
                            setTimeout(closeToastOfError, 5000);
                          },
                          onSuccess: function (data, variables) {
                            try {
                              var _data$WaterConnection;
                              return Promise.resolve(updatePayloadOfWSDisconnection(data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection[0], "WATER")).then(function (response) {
                                let waterConnectionUpdate = {
                                  WaterConnection: response
                                };
                                waterConnectionUpdate = {
                                  ...waterConnectionUpdate,
                                  disconnectRequest: true
                                };
                                return Promise.resolve(waterUpdateMutation(waterConnectionUpdate, {
                                  onError: (error, variables) => {
                                    var _error$response3, _error$response3$data, _error$response3$data2, _error$response4, _error$response4$data, _error$response4$data2;
                                    setIsEnableLoader(false);
                                    setError({
                                      key: "error",
                                      message: error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && (_error$response3$data2 = _error$response3$data.Errors) !== null && _error$response3$data2 !== void 0 && _error$response3$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : (_error$response4$data2 = _error$response4$data.Errors) === null || _error$response4$data2 === void 0 ? void 0 : _error$response4$data2[0].message : error
                                    });
                                    setTimeout(closeToastOfError, 5000);
                                  },
                                  onSuccess: (data, variables) => {
                                    var _data$WaterConnection2, _data$WaterConnection3, _data$WaterConnection4;
                                    Digit.SessionStorage.set("WS_DISCONNECTION", {
                                      ...applicationData,
                                      DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2[0]
                                    });
                                    history.push("/digit-ui/employee/ws/ws-disconnection-response?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : (_data$WaterConnection4 = _data$WaterConnection3[0]) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4.applicationNo));
                                  }
                                })).then(function () {});
                              });
                            } catch (e) {
                              return Promise.reject(e);
                            }
                          }
                        })).then(function () {});
                      }
                    }();
                    if (_temp && _temp.then) return _temp.then(function () {});
                  } else {
                    const _temp3 = function (_payload$SewerageConn) {
                      if (payload !== null && payload !== void 0 && (_payload$SewerageConn = payload.SewerageConnection) !== null && _payload$SewerageConn !== void 0 && _payload$SewerageConn.sewerage) {
                        const _temp2 = function () {
                          if (sewerageMutation) {
                            setIsEnableLoader(true);
                            return Promise.resolve(sewerageMutation(payload, {
                              onError: (error, variables) => {
                                var _error$response5, _error$response5$data, _error$response5$data2, _error$response6, _error$response6$data, _error$response6$data2;
                                setIsEnableLoader(false);
                                setError({
                                  key: "error",
                                  message: error !== null && error !== void 0 && (_error$response5 = error.response) !== null && _error$response5 !== void 0 && (_error$response5$data = _error$response5.data) !== null && _error$response5$data !== void 0 && (_error$response5$data2 = _error$response5$data.Errors) !== null && _error$response5$data2 !== void 0 && _error$response5$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : (_error$response6$data2 = _error$response6$data.Errors) === null || _error$response6$data2 === void 0 ? void 0 : _error$response6$data2[0].message : error
                                });
                                setTimeout(closeToastOfError, 5000);
                              },
                              onSuccess: function (data, variables) {
                                try {
                                  var _data$SewerageConnect;
                                  return Promise.resolve(updatePayloadOfWSDisconnection(data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : _data$SewerageConnect[0], "SEWERAGE")).then(function (response) {
                                    let sewerageConnectionUpdate = {
                                      SewerageConnection: response
                                    };
                                    sewerageConnectionUpdate = {
                                      ...sewerageConnectionUpdate,
                                      disconnectRequest: true
                                    };
                                    return Promise.resolve(sewerageUpdateMutation(sewerageConnectionUpdate, {
                                      onError: (error, variables) => {
                                        var _error$response7, _error$response7$data, _error$response7$data2, _error$response8, _error$response8$data, _error$response8$data2;
                                        setIsEnableLoader(false);
                                        setError({
                                          key: "error",
                                          message: error !== null && error !== void 0 && (_error$response7 = error.response) !== null && _error$response7 !== void 0 && (_error$response7$data = _error$response7.data) !== null && _error$response7$data !== void 0 && (_error$response7$data2 = _error$response7$data.Errors) !== null && _error$response7$data2 !== void 0 && _error$response7$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : (_error$response8$data2 = _error$response8$data.Errors) === null || _error$response8$data2 === void 0 ? void 0 : _error$response8$data2[0].message : error
                                        });
                                        setTimeout(closeToastOfError, 5000);
                                      },
                                      onSuccess: (data, variables) => {
                                        var _data$SewerageConnect2, _data$SewerageConnect3, _data$SewerageConnect4;
                                        Digit.SessionStorage.set("WS_DISCONNECTION", {
                                          ...applicationData,
                                          DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$SewerageConnect2 = data.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2[0]
                                        });
                                        history.push("/digit-ui/employee/ws/ws-disconnection-response?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnections) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3[0]) === null || _data$SewerageConnect4 === void 0 ? void 0 : _data$SewerageConnect4.applicationNo));
                                      }
                                    })).then(function () {});
                                  });
                                } catch (e) {
                                  return Promise.reject(e);
                                }
                              }
                            })).then(function () {});
                          }
                        }();
                        if (_temp2 && _temp2.then) return _temp2.then(function () {});
                      }
                    }();
                    if (_temp3 && _temp3.then) return _temp3.then(function () {});
                  }
                }();
                if (_temp4 && _temp4.then) return _temp4.then(function () {});
              });
            }
          }();
          if (_temp5 && _temp5.then) return _temp5.then(function () {});
        }
      }();
      return Promise.resolve(_temp6 && _temp6.then ? _temp6.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isMdmsLoading || wsDocsLoading || isEnableLoader || slaLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  if (userType === 'citizen') {
    var _disconnectionData$ty, _disconnectionData$ty2, _disconnectionData$ty3, _disconnectionData$re2, _disconnectionData$re3;
    return /*#__PURE__*/React__default.createElement("div", null, userType === "citizen" && /*#__PURE__*/React__default.createElement(DisconnectTimeline, {
      currentStep: 1
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
      config: config,
      onSelect: handleSubmit,
      onSkip: onSkip,
      t: t
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        padding: "0px 10px 10px 10px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, isReSubmit ? t("RESUBMIT_DISCONNECTION_FORM") : t("WS_APPLICATION_FORM")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      key: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),
      label: "" + t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),
      text: applicationData === null || applicationData === void 0 ? void 0 : applicationData.connectionNo,
      className: "border-none"
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      className: "card-label-smaller",
      style: {
        display: "inline"
      }
    }, t("WS_DISCONNECTION_TYPE") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
      t: t,
      options: disconnectionTypeList,
      optionsKey: "i18nKey",
      value: (_disconnectionData$ty = disconnectionData.type) === null || _disconnectionData$ty === void 0 ? void 0 : (_disconnectionData$ty2 = _disconnectionData$ty.value) === null || _disconnectionData$ty2 === void 0 ? void 0 : _disconnectionData$ty2.code,
      selectedOption: (_disconnectionData$ty3 = disconnectionData.type) === null || _disconnectionData$ty3 === void 0 ? void 0 : _disconnectionData$ty3.value,
      isMandatory: false,
      onSelect: val => filedChange({
        code: "type",
        value: val
      }),
      labelKey: "WS_DISCONNECTION_TYPE",
      inputStyle: isMobile ? {
        marginLeft: "unset"
      } : {}
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      className: "card-label-smaller",
      style: {
        display: "inline"
      }
    }, t("WS_DISCONNECTION_PROPOSED_DATE") + "*", /*#__PURE__*/React__default.createElement("div", {
      className: "tooltip",
      style: {
        position: "absolute"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoIcon, null), /*#__PURE__*/React__default.createElement("span", {
      className: "tooltiptext",
      style: {
        whiteSpace: Digit.Utils.browser.isMobile() ? "unset" : "nowrap",
        fontSize: "medium",
        width: Digit.Utils.browser.isMobile() ? "150px" : "unset"
      }
    }, t("SHOULD_BE_DATE") + " " + (slaData === null || slaData === void 0 ? void 0 : slaData.slaDays) + " " + t("DAYS_OF_APPLICATION_DATE")))), /*#__PURE__*/React__default.createElement("div", {
      className: "field"
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      date: disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.date,
      onChange: date => {
        setDisconnectionData({
          ...disconnectionData,
          date: date
        });
      }
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      className: "card-label-smaller",
      style: {
        display: "inline"
      }
    }, t("WS_DISCONNECTION_REASON") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextArea, {
      isMandatory: false,
      optionKey: "i18nKey",
      t: t,
      name: "reason",
      value: (_disconnectionData$re2 = disconnectionData.reason) === null || _disconnectionData$re2 === void 0 ? void 0 : _disconnectionData$re2.value,
      onChange: e => filedChange({
        code: "reason",
        value: e.target.value
      })
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      label: t("CS_COMMON_NEXT"),
      onSubmit: () => {
        const appDate = new Date();
        const proposedDate = format(addDays(appDate, slaData === null || slaData === void 0 ? void 0 : slaData.slaDays), 'yyyy-MM-dd').toString();
        if (parseInt(convertDateToEpoch(disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.date)) <= parseInt(convertDateToEpoch(proposedDate))) {
          setError({
            key: "error",
            message: "PROPOSED_DISCONNECTION_INVALID_DATE"
          });
          setTimeout(() => {
            setError(false);
          }, 3000);
        } else {
          history.push(match.path.replace("application-form", "documents-upload"));
        }
      },
      disabled: (disconnectionData === null || disconnectionData === void 0 ? void 0 : (_disconnectionData$re3 = disconnectionData.reason) === null || _disconnectionData$re3 === void 0 ? void 0 : _disconnectionData$re3.value) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.reason) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.date) === "" || (disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.type) === "" ? true : false
    }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: (error === null || error === void 0 ? void 0 : error.key) === "error" ? true : false,
      label: t(error === null || error === void 0 ? void 0 : error.message),
      onClose: () => setError(null)
    }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
      style: {
        margin: "0px"
      },
      textStyle: {
        color: "#0B0C0C"
      },
      text: t("WS_DISONNECT_APPL_INFO"),
      info: t("CS_COMMON_INFO")
    }));
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      margin: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px",
      marginLeft: "18px"
    }
  }, t("WS_WATER_AND_SEWERAGE_DISCONNECTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: handleEmployeeSubmit,
    onSkip: onSkip,
    t: t
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      padding: "10px",
      paddingTop: "20px",
      marginTop: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t("CS_TITLE_APPLICATION_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),
    label: "" + t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),
    text: applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$appl2 = applicationData.applicationData) === null || _applicationData$appl2 === void 0 ? void 0 : _applicationData$appl2.connectionNo,
    className: "border-none"
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t("WS_DISCONNECTION_TYPE") + "*", /*#__PURE__*/React__default.createElement("div", {
    className: "tooltip",
    style: {
      marginLeft: "8px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoIcon, null), /*#__PURE__*/React__default.createElement("span", {
    className: "tooltiptext",
    style: {
      whiteSpace: Digit.Utils.browser.isMobile() ? "unset" : "nowrap",
      fontSize: "medium",
      width: Digit.Utils.browser.isMobile() && window.location.href.includes("/employee") ? "200px" : ""
    }
  }, "" + t("WS_DISCONNECTION_PERMANENT_TOOLTIP"), /*#__PURE__*/React__default.createElement("br", null), /*#__PURE__*/React__default.createElement("br", null), "" + t("WS_DISCONNECTION_TEMPORARY_TOOLTIP")))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
    t: t,
    options: disconnectionTypeList,
    optionsKey: "i18nKey",
    value: (_disconnectionData$ty4 = disconnectionData.type) === null || _disconnectionData$ty4 === void 0 ? void 0 : (_disconnectionData$ty5 = _disconnectionData$ty4.value) === null || _disconnectionData$ty5 === void 0 ? void 0 : _disconnectionData$ty5.code,
    selectedOption: (_disconnectionData$ty6 = disconnectionData.type) === null || _disconnectionData$ty6 === void 0 ? void 0 : _disconnectionData$ty6.value,
    isMandatory: false,
    onSelect: val => filedChange({
      code: "type",
      value: val
    }),
    labelKey: "WS_DISCONNECTION_TYPE",
    style: {
      display: "flex",
      gap: "0px 3rem"
    },
    inputStyle: isMobile ? {
      marginLeft: "unset"
    } : {}
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "-5px",
      fontWeight: "700",
      display: "inline"
    },
    className: "card-label-smaller"
  }, t("WS_DISCONNECTION_PROPOSED_DATE") + "*", /*#__PURE__*/React__default.createElement("div", {
    className: "tooltip",
    style: {
      position: "absolute",
      marginLeft: "4px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoIcon, null), /*#__PURE__*/React__default.createElement("span", {
    className: "tooltiptext",
    style: {
      whiteSpace: Digit.Utils.browser.isMobile() ? "unset" : "nowrap",
      fontSize: "medium"
    }
  }, t("SHOULD_BE_DATE") + " " + (slaData === null || slaData === void 0 ? void 0 : slaData.slaDays) + " " + t("DAYS_OF_APPLICATION_DATE")))), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
    date: disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.date,
    onChange: date => {
      setDisconnectionData({
        ...disconnectionData,
        date: date
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "-5px",
      fontWeight: "700",
      display: "inline"
    },
    className: "card-label-smaller"
  }, t("WS_DISCONNECTION_REASON") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextArea, {
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "reason",
    value: (_disconnectionData$re4 = disconnectionData.reason) === null || _disconnectionData$re4 === void 0 ? void 0 : _disconnectionData$re4.value,
    onChange: e => filedChange({
      code: "reason",
      value: e.target.value
    })
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "8px"
    }
  }, t("WS_DISCONNECTION_DOCUMENTS") + "*"), wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Disconnection = wsDocs.DisconnectionDocuments) === null || _wsDocs$Disconnection === void 0 ? void 0 : _wsDocs$Disconnection.map((document, index) => {
    return /*#__PURE__*/React__default.createElement(SelectDocument$2, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields
    });
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: (error === null || error === void 0 ? void 0 : error.key) === "error" ? true : false,
    label: t(error === null || error === void 0 ? void 0 : error.message),
    warning: error === null || error === void 0 ? void 0 : error.warning,
    onClose: () => setError(null)
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ACTION_TEST_SUBMIT"),
    onSubmit: () => onSubmit(disconnectionData),
    style: {
      margin: "10px 10px 0px 0px"
    }
  })));
};
function SelectDocument$2(_ref2) {
  var _doc$dropdownData;
  let {
    t,
    key,
    document: doc,
    setDocuments,
    error,
    setError,
    documents,
    setCheckRequiredFields
  } = _ref2;
  const filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [selectedDocument, setSelectedDocument] = React.useState(filteredDocument ? {
    ...filteredDocument,
    active: true,
    code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
    i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
  } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const handleSelectDocument = value => setSelectedDocument(value);
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(prev => {
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code));
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) return filteredDocumentsByDocumentType;
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        return [...filteredDocumentsByFileStoreId, {
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          documentUid: uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || ""
        }];
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp9 = function () {
          if (file) {
            const _temp8 = function () {
              if (file.size >= 5242880) {
                setError({
                  key: "error",
                  message: "CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"
                });
              } else {
                const _temp7 = _catch(function () {
                  setUploadedFile(null);
                  return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0])).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError({
                        key: "error",
                        message: "CS_FILE_UPLOAD_ERROR"
                      });
                    }
                  });
                }, function () {
                  setError({
                    key: "error",
                    message: "CS_FILE_UPLOAD_ERROR"
                  });
                });
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp8 && _temp8.then) return _temp8.then(function () {});
          }
        }();
        return _temp9 && _temp9.then ? _temp9.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "-5px",
      fontWeight: "700",
      display: "inline"
    },
    className: "card-label-smaller"
  }, t(doc === null || doc === void 0 ? void 0 : doc.i18nKey) + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    isMandatory: false,
    option: doc === null || doc === void 0 ? void 0 : doc.dropdownData,
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    id: "noc-doc-1-" + key,
    extraStyleName: "propertyCreate",
    accept: "image/*, .pdf, .png, .jpeg, .jpg",
    onUpload: selectfile,
    onDelete: () => {
      setUploadedFile(null);
      setCheckRequiredFields(true);
    },
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("ES_NO_FILE_SELECTED_LABEL"),
    error: error
  }))));
}

function WSDisconnectionDocumentsForm(_ref) {
  var _wsDocs$Disconnection;
  let {
    t,
    config,
    onSelect,
    userType,
    formData
  } = _ref;
  const tenantId = Digit.ULBService.getStateId();
  const storedData = Digit.SessionStorage.get("WS_DISCONNECTION");
  const [documents, setDocuments] = React.useState(storedData.WSDisconnectionForm.documents ? storedData.WSDisconnectionForm.documents : []);
  const [error, setError] = React.useState(null);
  const [checkRequiredFields, setCheckRequiredFields] = React.useState(false);
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const handleSubmit = () => {
    onSelect(config.key, {
      WSDisconnectionDocumentsForm: documents
    });
  };
  React.useEffect(() => {
    Digit.SessionStorage.set("WS_DISCONNECTION", {
      ...storedData,
      WSDisconnectionForm: {
        ...storedData.WSDisconnectionForm,
        documents: documents
      }
    });
  }, [documents]);
  const {
    isLoading: wsDocsLoading,
    data: wsDocs
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(tenantId, 'DisconnectionDocuments');
  if (wsDocsLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, userType === "citizen" && /*#__PURE__*/React__default.createElement(DisconnectTimeline, {
    currentStep: 2
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("WS_DISCONNECTION_UPLOAD_DOCUMENTS")), wsDocs === null || wsDocs === void 0 ? void 0 : (_wsDocs$Disconnection = wsDocs.DisconnectionDocuments) === null || _wsDocs$Disconnection === void 0 ? void 0 : _wsDocs$Disconnection.map((document, index) => {
    return /*#__PURE__*/React__default.createElement(SelectDocument$3, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields
    });
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: () => {
      history.push(match.path.replace("documents-upload", "check"));
    },
    disabled: documents.length < 2 ? true : false
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: (error === null || error === void 0 ? void 0 : error.key) === "error" ? true : false,
    label: t(error === null || error === void 0 ? void 0 : error.message),
    onClose: () => setError(null)
  })));
}
function SelectDocument$3(_ref2) {
  var _doc$dropdownData;
  let {
    t,
    key,
    document: doc,
    setDocuments,
    error,
    setError,
    documents,
    setCheckRequiredFields
  } = _ref2;
  const filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [selectedDocument, setSelectedDocument] = React.useState(filteredDocument ? {
    ...filteredDocument,
    active: true,
    code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
    i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
  } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const handleSelectDocument = value => setSelectedDocument(value);
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(prev => {
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code));
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) return filteredDocumentsByDocumentType;
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        return [...filteredDocumentsByFileStoreId, {
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          id: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.id,
          i18nKey: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          documentUid: selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.documentUid ? selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentUid : uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
          status: "ACTIVE"
        }];
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 5242880) {
                setError({
                  key: "error",
                  message: "CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"
                });
              } else {
                const _temp = _catch(function () {
                  setUploadedFile(null);
                  return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0])).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError({
                        key: "error",
                        message: "CS_FILE_UPLOAD_ERROR"
                      });
                    }
                  });
                }, function () {
                  setError({
                    key: "error",
                    message: "CS_FILE_UPLOAD_ERROR"
                  });
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t(doc === null || doc === void 0 ? void 0 : doc.i18nKey) + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    isMandatory: false,
    option: doc === null || doc === void 0 ? void 0 : doc.dropdownData,
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    id: "noc-doc-" + key,
    extraStyleName: "propertyCreate",
    accept: "image/*, .pdf, .png, .jpeg, .jpg",
    onUpload: selectfile,
    onDelete: () => {
      setUploadedFile(null);
      setCheckRequiredFields(true);
    },
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("ES_NO_FILE_SELECTED_LABEL"),
    error: error
  }));
}

const BannerPicker = props => {
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: props.message,
    applicationNumber: props === null || props === void 0 ? void 0 : props.applicationNumber,
    successful: props.isSuccess,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    },
    infoOneStyles: {
      paddingTop: "20px"
    }
  });
};
const WSDisconnectAcknowledgement = () => {
  var _disconnectionData$Di;
  const {
    t
  } = reactI18next.useTranslation();
  const disconnectionData = Digit.SessionStorage.get("WS_DISCONNECTION");
  const handleDownloadPdf = () => {
    const disconnectionRes = disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.DisconnectionResponse;
    const PDFdata = getWSDisconectionAcknowledgementData(disconnectionRes, disconnectionData === null || disconnectionData === void 0 ? void 0 : disconnectionData.property, disconnectionRes === null || disconnectionRes === void 0 ? void 0 : disconnectionRes.tenantId, t);
    PDFdata.then(res => Digit.Utils.pdf.generatev1(res));
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, /*#__PURE__*/React__default.createElement(BannerPicker, {
    isSuccess: true,
    message: t("WS_APPLICATION_COMPLETED_SUCCESSFULLY_LABEL"),
    applicationNumber: disconnectionData === null || disconnectionData === void 0 ? void 0 : (_disconnectionData$Di = disconnectionData.DisconnectionResponse) === null || _disconnectionData$Di === void 0 ? void 0 : _disconnectionData$Di.applicationNo
  }), " ", /*#__PURE__*/React__default.createElement("successSvg", null)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t('WS_DISCONNECTION_APPLICATION_SUCC_MSG')), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_DOWNLOAD_ACK_FORM"),
    onSubmit: handleDownloadPdf
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    onClick: () => Digit.SessionStorage.del("WS_DISCONNECTION")
  })));
};

const createDisConnectionAppDetails = () => [{
  consumerNumber: "",
  disConnectionType: "",
  disConnectionProposeDate: "",
  disConnectionReason: ""
}];
const WSDisconnectionAppDetails = _ref => {
  let {
    config,
    onSelect,
    userType,
    formData,
    setError,
    formState,
    clearErrors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const [disConnectionDetails, setDisConnectionDetails] = React.useState((formData === null || formData === void 0 ? void 0 : formData.disConnectionDetails) || [createDisConnectionAppDetails()]);
  const [focusIndex, setFocusIndex] = React.useState({
    index: -1,
    type: ""
  });
  const [isErrors, setIsErrors] = React.useState(false);
  const [disconnectionTypeList, setDisconnectionTypeList] = React.useState([]);
  const stateCode = Digit.ULBService.getStateId();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const {
    isMdmsLoading,
    data: mdmsData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["disconnectionType"]);
  const {
    isLoading: slaLoading,
    data: slaData
  } = Digit.Hooks.ws.useDisconnectionWorkflow({
    tenantId
  });
  React.useEffect(() => {
    var _mdmsData$wsServices;
    const disconnectionTypes = (mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$wsServices = mdmsData["ws-services-masters"]) === null || _mdmsData$wsServices === void 0 ? void 0 : _mdmsData$wsServices.disconnectionType) || [];
    disconnectionTypes === null || disconnectionTypes === void 0 ? void 0 : disconnectionTypes.forEach(data => {
      var _data$code, _data$code2, _data$code3, _data$code4;
      data.code = data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.toUpperCase();
      data.i18nKey = "WS_DISCONNECTIONTYPE_" + (data === null || data === void 0 ? void 0 : (_data$code2 = data.code) === null || _data$code2 === void 0 ? void 0 : _data$code2.toUpperCase());
      data.value = data === null || data === void 0 ? void 0 : (_data$code3 = data.code) === null || _data$code3 === void 0 ? void 0 : _data$code3.toUpperCase();
      data.name = data === null || data === void 0 ? void 0 : (_data$code4 = data.code) === null || _data$code4 === void 0 ? void 0 : _data$code4.toUpperCase();
    });
    setDisconnectionTypeList(disconnectionTypes);
  }, [mdmsData]);
  React.useEffect(() => {
    const data = disConnectionDetails.map(e => {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
  }, [disConnectionDetails]);
  const commonProps = {
    focusIndex,
    setFocusIndex,
    t,
    config,
    setError,
    clearErrors,
    formState,
    disConnectionDetails,
    setIsErrors,
    setDisConnectionDetails,
    disconnectionTypeList
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, disConnectionDetails.map((disConnectionDetail, index) => /*#__PURE__*/React__default.createElement(PlumberDetails$1, _extends({
    key: disConnectionDetail.key,
    index: index,
    disConnectionDetail: disConnectionDetail
  }, commonProps))));
};
const PlumberDetails$1 = _props => {
  var _errors$disConnection2, _errors$disConnection4;
  const {
    disConnectionDetail,
    focusIndex,
    setFocusIndex,
    t,
    config,
    setError,
    clearErrors,
    formState,
    disConnectionDetails,
    setIsErrors,
    options,
    setDisConnectionDetails,
    disconnectionTypeList
  } = _props;
  const {
    control,
    formState: localFormState,
    watch,
    setError: setLocalError,
    clearErrors: clearLocalErrors,
    setValue,
    trigger,
    getValues
  } = reactHookForm.useForm();
  const formValue = watch();
  const {
    errors
  } = localFormState;
  const isMobile = window.Digit.Utils.browser.isMobile();
  const isEmployee = window.location.href.includes("/employee");
  React.useEffect(() => {
    trigger();
  }, []);
  React.useEffect(() => {
    if (Object.entries(formValue).length > 0) {
      const keys = Object.keys(formValue);
      const part = {};
      keys.forEach(key => part[key] = disConnectionDetail[key]);
      if (!_.isEqual(formValue, part)) {
        let isErrorsFound = true;
        Object.keys(formValue).map(data => {
          if (!formValue[data] && isErrorsFound) {
            isErrorsFound = false;
            setIsErrors(false);
          }
        });
        if (isErrorsFound) setIsErrors(true);
        let ob = [{
          ...formValue
        }];
        setDisConnectionDetails(ob);
        trigger();
      }
    }
  }, [formValue, disConnectionDetails]);
  React.useEffect(() => {
    var _formState$errors$con;
    if (Object.keys(errors).length && !_.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key]) {
      clearErrors(config.key);
    }
  }, [errors]);
  const errorStyle = {
    width: "70%",
    marginLeft: "30%",
    fontSize: "12px",
    marginTop: "-21px"
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      marginBottom: "40px",
      "fontSize": "24px",
      "lineHeight": "32px"
    }
  }, t("WS_APPLICATION_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_ACK_COMMON_APP_NO_LABEL") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "consumerNumber",
    defaultValue: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.consumerNumber,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$consumerNumbe;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        value: props.value,
        autoFocus: focusIndex.index === (disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.key) && focusIndex.type === "consumerNumber",
        errorStyle: localFormState.touched.consumerNumber && errors !== null && errors !== void 0 && (_errors$consumerNumbe = errors.consumerNumber) !== null && _errors$consumerNumbe !== void 0 && _errors$consumerNumbe.message ? true : false,
        onChange: e => {
          props.onChange(e.target.value);
          setFocusIndex({
            index: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.key,
            type: "consumerNumber"
          });
        },
        labelStyle: {
          marginTop: "unset"
        },
        onBlur: props.onBlur,
        style: {
          border: "none",
          color: "#0b0c0c !important",
          "pointerEvents": "none"
        }
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, "" + t("WS_DISCONNECTION_TYPE")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "disConnectionType",
    defaultValue: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
    rules: {
      required: t("REQUIRED_FIELD")
    },
    isMandatory: true,
    render: props => {
      var _errors$disConnection;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        t: t,
        options: disconnectionTypeList,
        optionsKey: "i18nKey",
        value: {
          name: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          value: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          code: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          i18nKey: "WS_DISCONNECTIONTYPE_" + stringReplaceAll(disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType, " ", "_")
        },
        selectedOption: {
          name: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          value: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          code: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType,
          i18nKey: "WS_DISCONNECTIONTYPE_" + stringReplaceAll(disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionType, " ", "_")
        },
        onSelect: e => {
          props.onChange(e.code);
        },
        labelKey: "WS_DISCONNECTIONTYPE",
        errorStyle: localFormState.touched.disConnectionType && errors !== null && errors !== void 0 && (_errors$disConnection = errors.disConnectionType) !== null && _errors$disConnection !== void 0 && _errors$disConnection.message ? true : false,
        autoFocus: focusIndex.index === (disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.key) && focusIndex.type === "disConnectionType",
        style: {
          display: "flex",
          gap: "0px 3rem"
        },
        isDependent: true
      });
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_DISCONNECTION_PROPOSED_DATE") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "disConnectionProposeDate",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    defaultValue: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionProposeDate,
    control: control,
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      date: props.value,
      name: "disConnectionProposeDate",
      onChange: props.onChange
    })
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.disConnectionProposeDate ? errors === null || errors === void 0 ? void 0 : (_errors$disConnection2 = errors.disConnectionProposeDate) === null || _errors$disConnection2 === void 0 ? void 0 : _errors$disConnection2.message : ""), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: isMobile && isEmployee ? {
      fontWeight: "700",
      width: "100%"
    } : {
      marginTop: "-5px",
      fontWeight: "700"
    },
    className: "card-label-smaller"
  }, t("WS_DISCONNECTION_REASON") + "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    defaultValue: disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.disConnectionReason,
    name: "disConnectionReason",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    render: props => {
      var _errors$disConnection3;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextArea, {
        t: t,
        type: "text",
        isMandatory: false,
        name: "disConnectionReason",
        value: props.value,
        errorStyle: localFormState.touched.disConnectionReason && errors !== null && errors !== void 0 && (_errors$disConnection3 = errors.disConnectionReason) !== null && _errors$disConnection3 !== void 0 && _errors$disConnection3.message ? true : false,
        autoFocus: focusIndex.index === (disConnectionDetail === null || disConnectionDetail === void 0 ? void 0 : disConnectionDetail.key) && focusIndex.type === "disConnectionReason",
        onChange: e => {
          props.onChange(e);
          setFocusIndex({
            index: disConnectionDetail.key,
            type: "disConnectionReason"
          });
        },
        onBlur: props.onBlur
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: errorStyle
  }, localFormState.touched.disConnectionReason ? errors === null || errors === void 0 ? void 0 : (_errors$disConnection4 = errors.disConnectionReason) === null || _errors$disConnection4 === void 0 ? void 0 : _errors$disConnection4.message : "")));
};

const SearchFormFieldsComponents = _ref => {
  var _searchFormState$erro, _searchFormState$erro2, _searchFormState$erro3, _searchFormState$erro4;
  let {
    registerRef,
    searchFormState
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const propsForMobileNumber = {
    maxlength: 10,
    pattern: "[6-9][0-9]{9}",
    title: t("ES_SEARCH_APPLICATION_MOBILE_INVALID"),
    componentInFront: "+91"
  };
  let validation = {};
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("WS_ACK_COMMON_APP_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "applicationNumber",
    inputRef: registerRef({})
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9-_\/]*$",
    type: "text",
    title: t("ERR_INVALID_APPLICATION_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("WS_MYCONNECTIONS_CONSUMER_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "consumerNo",
    inputRef: registerRef({})
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9\/-]*$",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, _extends({
    name: "mobileNumber",
    type: "number",
    inputRef: registerRef({})
  }, propsForMobileNumber)), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro = searchFormState.errors) !== null && _searchFormState$erro !== void 0 && (_searchFormState$erro2 = _searchFormState$erro["mobileNumber"]) !== null && _searchFormState$erro2 !== void 0 && _searchFormState$erro2.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro3 = searchFormState.errors) === null || _searchFormState$erro3 === void 0 ? void 0 : (_searchFormState$erro4 = _searchFormState$erro3["mobileNumber"]) === null || _searchFormState$erro4 === void 0 ? void 0 : _searchFormState$erro4.message) : null));
};

const FilterFormFieldsComponent = _ref => {
  var _statuses$filter, _statuses$filter2, _statuses$filter3, _statuses$filter4, _statuses$filter5, _statuses$filter6;
  let {
    statuses,
    isInboxLoading,
    controlFilterForm,
    filterFormState,
    localitiesForEmployeesCurrentTenant,
    loadingLocalitiesForEmployeesCurrentTenant,
    checkPathName
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const availableOptions = [{
    code: "ASSIGNED_TO_ME",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ME")
  }, {
    code: "ASSIGNED_TO_ALL",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ALL")
  }];
  const selectedApplicationType = reactHookForm.useWatch({
    control: controlFilterForm,
    name: "applicationType",
    defaultValue: (filterFormState === null || filterFormState === void 0 ? void 0 : filterFormState.applicationType) || null
  });
  let totalnewWSCount = 0,
    totalModifyWSCount = 0,
    totalDisconnectionWSCount = 0,
    totalnewSWCOunt = 0,
    totalModifySWCount = 0,
    totalDisconnectionSWCount = 0;
  const totalnewWS = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter = statuses.filter(e => e.businessservice === "NewWS1")) === null || _statuses$filter === void 0 ? void 0 : _statuses$filter.forEach(data => totalnewWSCount = totalnewWSCount + (data === null || data === void 0 ? void 0 : data.count));
  const totalModifyWS = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter2 = statuses.filter(e => e.businessservice === "ModifyWSConnection")) === null || _statuses$filter2 === void 0 ? void 0 : _statuses$filter2.forEach(data => totalModifyWSCount = totalModifyWSCount + (data === null || data === void 0 ? void 0 : data.count));
  const totalDisconnectionWS = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter3 = statuses.filter(e => e.businessservice === "DisconnectWSConnection")) === null || _statuses$filter3 === void 0 ? void 0 : _statuses$filter3.forEach(data => totalDisconnectionWSCount = totalDisconnectionWSCount + (data === null || data === void 0 ? void 0 : data.count));
  const totalnewSW = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter4 = statuses.filter(e => e.businessservice === "NewSW1")) === null || _statuses$filter4 === void 0 ? void 0 : _statuses$filter4.forEach(data => totalnewSWCOunt = totalnewSWCOunt + (data === null || data === void 0 ? void 0 : data.count));
  const totalModifySW = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter5 = statuses.filter(e => e.businessservice === "ModifySWConnection")) === null || _statuses$filter5 === void 0 ? void 0 : _statuses$filter5.forEach(data => totalModifySWCount = totalModifySWCount + (data === null || data === void 0 ? void 0 : data.count));
  const totalDisconnectionSW = statuses === null || statuses === void 0 ? void 0 : (_statuses$filter6 = statuses.filter(e => e.businessservice === "DisconnectSWConnection")) === null || _statuses$filter6 === void 0 ? void 0 : _statuses$filter6.forEach(data => totalDisconnectionSWCount = totalDisconnectionSWCount + (data === null || data === void 0 ? void 0 : data.count));
  const applicationTypeStatuses = checkPathName ? [{
    code: "NewWS1",
    name: t("CS_COMMON_INBOX_NEWWS1") + " (" + totalnewWSCount + ")"
  }, {
    code: "ModifyWSConnection",
    name: t("CS_COMMON_INBOX_MODIFYWSCONNECTION") + " (" + totalModifyWSCount + ")"
  }, {
    code: "DisconnectWSConnection",
    name: t("CS_COMMON_INBOX_DISCONNECTIONWS") + " (" + totalDisconnectionWSCount + ")"
  }] : [{
    code: "NewSW1",
    name: t("CS_COMMON_INBOX_NEWSW1") + " (" + totalnewSWCOunt + ")"
  }, {
    code: "ModifySWConnection",
    name: t("CS_COMMON_INBOX_MODIFYSWCONNECTION") + " (" + totalModifySWCount + ")"
  }, {
    code: "DisconnectSWConnection",
    name: t("CS_COMMON_INBOX_DISCONNECTIONSW") + " (" + totalDisconnectionSWCount + ")"
  }];
  const selectrole = (listOfSelections, props) => {
    const res = listOfSelections.map(propsData => {
      const data = propsData[1];
      return data;
    });
    return props.onChange(res);
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "assignee",
    control: controlFilterForm,
    render: props => {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: e => {
          props.onChange(e.code);
        },
        selectedOption: availableOptions.filter(option => option.code === props.value)[0],
        optionsKey: "name",
        name: "assignee",
        options: availableOptions
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "locality",
    control: controlFilterForm,
    render: props => {
      const renderRemovableTokens = React.useMemo(() => {
        var _props$value;
        return props === null || props === void 0 ? void 0 : (_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.map((locality, index) => {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RemoveableTag, {
            key: index,
            text: locality.i18nkey,
            onClick: () => {
              var _props$value2;
              props.onChange(props === null || props === void 0 ? void 0 : (_props$value2 = props.value) === null || _props$value2 === void 0 ? void 0 : _props$value2.filter(loc => loc.code !== locality.code));
            }
          });
        });
      }, [props === null || props === void 0 ? void 0 : props.value]);
      return loadingLocalitiesForEmployeesCurrentTenant ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label"
      }, t("ES_INBOX_LOCALITY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiSelectDropdown, {
        options: localitiesForEmployeesCurrentTenant ? localitiesForEmployeesCurrentTenant : [],
        optionsKey: "i18nkey",
        props: props,
        isPropsNeeded: true,
        onSelect: selectrole,
        selected: props === null || props === void 0 ? void 0 : props.value,
        defaultLabel: t("ES_WS_ALL_SELECTED"),
        defaultUnit: t("WS_SELECTED_TEXT")
      }), /*#__PURE__*/React__default.createElement("div", {
        className: "tag-container"
      }, renderRemovableTokens));
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationType",
    control: controlFilterForm,
    render: props => {
      function changeItemCheckStatus(value) {
        props.onChange(value);
      }
      const renderStatusCheckBoxess = React.useMemo(() => applicationTypeStatuses === null || applicationTypeStatuses === void 0 ? void 0 : applicationTypeStatuses.map((status, index) => {
        var _props$value4;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
          onChange: e => {
            var _props$value3;
            return e.target.checked ? changeItemCheckStatus([...props.value, status === null || status === void 0 ? void 0 : status.code]) : changeItemCheckStatus((_props$value3 = props.value) === null || _props$value3 === void 0 ? void 0 : _props$value3.filter(ele => ele !== (status === null || status === void 0 ? void 0 : status.code)));
          },
          checked: (_props$value4 = props.value) === null || _props$value4 === void 0 ? void 0 : _props$value4.includes(status === null || status === void 0 ? void 0 : status.code),
          label: status === null || status === void 0 ? void 0 : status.name,
          value: status.name,
          key: index + 1
        });
      }), [props.value, statuses]);
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label"
      }, t("WS_COMMON_TABLE_COL_APP_TYPE_LABEL")), isInboxLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, " ", renderStatusCheckBoxess));
    }
  })), (selectedApplicationType === null || selectedApplicationType === void 0 ? void 0 : selectedApplicationType.length) > 0 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationStatus",
    control: controlFilterForm,
    render: props => {
      function changeItemCheckStatus(value) {
        props.onChange(value);
      }
      const renderStatusCheckBoxes = React.useMemo(() => {
        var _statuses$filter7;
        return statuses === null || statuses === void 0 ? void 0 : (_statuses$filter7 = statuses.filter(e => {
          const value = selectedApplicationType;
          return value.includes(e.businessservice);
        })) === null || _statuses$filter7 === void 0 ? void 0 : _statuses$filter7.map((status, index) => {
          var _props$value6;
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
            key: index + 1,
            onChange: e => {
              var _props$value5;
              return e.target.checked ? changeItemCheckStatus([...props.value, status === null || status === void 0 ? void 0 : status.statusid]) : changeItemCheckStatus((_props$value5 = props.value) === null || _props$value5 === void 0 ? void 0 : _props$value5.filter(id => id !== (status === null || status === void 0 ? void 0 : status.statusid)));
            },
            checked: (_props$value6 = props.value) === null || _props$value6 === void 0 ? void 0 : _props$value6.includes(status === null || status === void 0 ? void 0 : status.statusid),
            label: t("WF_" + status.businessservice.toUpperCase() + "_" + status.applicationstatus.split("_").pop()) + " (" + status.count + ")"
          });
        });
      }, [props.value, statuses, selectedApplicationType]);
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label"
      }, t("WS_MYCONNECTIONS_STATUS")), isInboxLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, renderStatusCheckBoxes));
    }
  })) : null);
};

const useInboxTableConfig = _ref => {
  var _formState$tableForm, _formState$tableForm2, _formState$tableForm7, _formState$searchForm;
  let {
    parentRoute,
    onPageSizeChange,
    formState,
    totalCount,
    table,
    dispatch,
    onSortingByData,
    tenantId,
    inboxStyles = {},
    tableStyle = {}
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const GetCell = value => /*#__PURE__*/React__default.createElement("span", {
    className: "cell-text styled-cell"
  }, value);
  const GetStatusCell = value => value === "Active" || value > 0 ? /*#__PURE__*/React__default.createElement("span", {
    className: "sla-cell-success"
  }, value) : /*#__PURE__*/React__default.createElement("span", {
    className: "sla-cell-error"
  }, value);
  const tableColumnConfig = React.useMemo(() => {
    return [{
      Header: t("WS_ACK_COMMON_APP_NO_LABEL"),
      accessor: "applicationNo",
      disableSortBy: true,
      Cell: _ref2 => {
        var _row$original, _row$original$applica, _row$original$applica2, _row$original2, _row$original2$applic, _row$original2$applic2;
        let {
          row
        } = _ref2;
        let service = "WATER";
        if (row.original["applicationNo"].includes("SW")) service = "SEWERAGE";
        let application = "application";
        if (row !== null && row !== void 0 && (_row$original = row.original) !== null && _row$original !== void 0 && (_row$original$applica = _row$original["applicationType"]) !== null && _row$original$applica !== void 0 && (_row$original$applica2 = _row$original$applica.toUpperCase()) !== null && _row$original$applica2 !== void 0 && _row$original$applica2.includes("DISCONNECT")) {
          application = "disconnection";
        } else if (row !== null && row !== void 0 && (_row$original2 = row.original) !== null && _row$original2 !== void 0 && (_row$original2$applic = _row$original2["applicationType"]) !== null && _row$original2$applic !== void 0 && (_row$original2$applic2 = _row$original2$applic.toUpperCase()) !== null && _row$original2$applic2 !== void 0 && _row$original2$applic2.includes("MODIFY")) {
          application = "modify";
        }
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/employee/ws/" + application + "-details?applicationNumber=" + row.original["applicationNo"] + "&tenantId=" + tenantId + "&service=" + service + "&from=WS_SEWERAGE_INBOX"
        }, " ", /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, row.original["applicationNo"])));
      }
    }, {
      Header: t("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),
      accessor: "connectionNo",
      disableSortBy: true
    }, {
      Header: t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),
      accessor: "owner",
      disableSortBy: true
    }, {
      Header: t("WS_COMMON_TABLE_COL_APP_TYPE_LABEL"),
      accessor: row => {
        var _row$applicationType;
        return GetCell(t("CS_COMMON_INBOX_" + (row === null || row === void 0 ? void 0 : (_row$applicationType = row.applicationType) === null || _row$applicationType === void 0 ? void 0 : _row$applicationType.toUpperCase())));
      },
      disableSortBy: true
    }, {
      Header: t("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),
      accessor: row => GetCell(t("CS_" + (row === null || row === void 0 ? void 0 : row.status))),
      disableSortBy: true
    }, {
      Header: t("ES_INBOX_SLA_DAYS_REMAINING"),
      accessor: row => GetStatusCell(row === null || row === void 0 ? void 0 : row.sla)
    }];
  });
  return {
    getCellProps: cellInfo => {
      return {
        style: {
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    disableSort: false,
    autoSort: false,
    manualPagination: true,
    initSortId: "applicationDate",
    onPageSizeChange: onPageSizeChange,
    currentPage: ((_formState$tableForm = formState.tableForm) === null || _formState$tableForm === void 0 ? void 0 : _formState$tableForm.offset) / ((_formState$tableForm2 = formState.tableForm) === null || _formState$tableForm2 === void 0 ? void 0 : _formState$tableForm2.limit),
    onNextPage: () => {
      var _formState$tableForm3, _formState$tableForm4;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: parseInt((_formState$tableForm3 = formState.tableForm) === null || _formState$tableForm3 === void 0 ? void 0 : _formState$tableForm3.offset) + parseInt((_formState$tableForm4 = formState.tableForm) === null || _formState$tableForm4 === void 0 ? void 0 : _formState$tableForm4.limit)
        }
      });
    },
    onPrevPage: () => {
      var _formState$tableForm5, _formState$tableForm6;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: parseInt((_formState$tableForm5 = formState.tableForm) === null || _formState$tableForm5 === void 0 ? void 0 : _formState$tableForm5.offset) - parseInt((_formState$tableForm6 = formState.tableForm) === null || _formState$tableForm6 === void 0 ? void 0 : _formState$tableForm6.limit)
        }
      });
    },
    pageSizeLimit: (_formState$tableForm7 = formState.tableForm) === null || _formState$tableForm7 === void 0 ? void 0 : _formState$tableForm7.limit,
    onSort: onSortingByData,
    totalRecords: totalCount,
    onSearch: formState === null || formState === void 0 ? void 0 : (_formState$searchForm = formState.searchForm) === null || _formState$searchForm === void 0 ? void 0 : _formState$searchForm.message,
    onLastPage: () => {
      var _formState$tableForm8;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: Math.ceil(totalCount / 10) * 10 - parseInt((_formState$tableForm8 = formState.tableForm) === null || _formState$tableForm8 === void 0 ? void 0 : _formState$tableForm8.limit)
        }
      });
    },
    onFirstPage: () => dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        offset: 0
      }
    }),
    data: table,
    columns: tableColumnConfig,
    inboxStyles: {
      ...inboxStyles
    },
    tableStyle: {
      ...tableStyle
    }
  };
};

const useInboxMobileCardsData = _ref => {
  let {
    parentRoute,
    table
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const GetStatusCell = value => value === "Active" || value > 0 ? /*#__PURE__*/React__default.createElement("span", {
    className: "sla-cell-success"
  }, value) : /*#__PURE__*/React__default.createElement("span", {
    className: "sla-cell-error"
  }, value);
  const GetStatusLinkCell = (value, tenantId, applicationType) => {
    var _applicationType$toUp, _applicationType$toUp2;
    let service = value !== null && value !== void 0 && value.includes("WS") ? "WATER" : "SEWERAGE";
    let application = "application";
    if (applicationType !== null && applicationType !== void 0 && (_applicationType$toUp = applicationType.toUpperCase()) !== null && _applicationType$toUp !== void 0 && _applicationType$toUp.includes("DISCONNECT")) {
      application = "disconnection";
    } else if (applicationType !== null && applicationType !== void 0 && (_applicationType$toUp2 = applicationType.toUpperCase()) !== null && _applicationType$toUp2 !== void 0 && _applicationType$toUp2.includes("MODIFY")) {
      application = "modify";
    }
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: "/digit-ui/employee/ws/" + application + "-details?applicationNumber=" + value + "&tenantId=" + tenantId + "&service=" + service
    }, " ", /*#__PURE__*/React__default.createElement("span", {
      className: "link"
    }, value)));
  };
  const dataForMobileInboxCards = table === null || table === void 0 ? void 0 : table.map(_ref2 => {
    let {
      applicationNo,
      status,
      owner,
      sla,
      businessService,
      connectionNo,
      applicationType,
      tenantId
    } = _ref2;
    return {
      [t("WS_ACK_COMMON_APP_NO_LABEL")]: GetStatusLinkCell(applicationNo, tenantId, applicationType),
      [t("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL")]: connectionNo,
      [t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]: owner,
      [t("WS_COMMON_TABLE_COL_APP_TYPE_LABEL")]: t("WS_" + (applicationType === null || applicationType === void 0 ? void 0 : applicationType.toUpperCase())),
      [t("WS_COMMON_TABLE_COL_SERVICE_LABEL")]: businessService ? t("WS_COMMON_INBOX_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase())) : "NA",
      [t("WS_COMMON_TABLE_COL_APPLICATION_STATUS")]: t("CS_" + status),
      [t("ES_INBOX_SLA_DAYS_REMAINING")]: GetStatusCell(sla)
    };
  });
  const MobileSortFormValues = () => {
    const sortOrderOptions = [{
      code: "DESC",
      i18nKey: "ES_COMMON_SORT_BY_DESC"
    }, {
      code: "ASC",
      i18nKey: "ES_COMMON_SORT_BY_ASC"
    }];
    const {
      control: controlSortForm
    } = reactHookForm.useFormContext();
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "sortOrder",
      control: controlSortForm,
      render: _ref3 => {
        let {
          onChange,
          value
        } = _ref3;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          onSelect: e => {
            onChange(e.code);
          },
          selectedOption: sortOrderOptions.filter(option => option.code === value)[0],
          optionsKey: "i18nKey",
          name: "sortOrder",
          options: sortOrderOptions
        });
      }
    }));
  };
  return {
    data: dataForMobileInboxCards,
    serviceRequestIdKey: t("NOC_APP_NO_LABEL"),
    MobileSortFormValues
  };
};

const WSInbox = _ref => {
  let {
    parentRoute
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const getUrlPathName = window.location.pathname;
  const checkPathName = getUrlPathName.includes("water/inbox");
  const searchFormDefaultValues = {
    mobileNumber: "",
    applicationNumber: "",
    consumerNo: ""
  };
  const filterFormDefaultValues = {
    businessService: checkPathName ? ["NewWS1", "ModifyWSConnection", "DisconnectWSConnection"] : ["NewSW1", "ModifySWConnection", "DisconnectSWConnection"],
    moduleName: checkPathName ? "ws-services" : "sw-services",
    locality: [],
    assignee: "ASSIGNED_TO_ALL",
    applicationStatus: [],
    applicationType: []
  };
  const tableOrderFormDefaultValues = {
    sortBy: "createdTime",
    limit: window.Digit.Utils.browser.isMobile() ? 50 : 10,
    offset: 0,
    sortOrder: "ASC"
  };
  sessionStorage.removeItem("Digit.BILL.INBOX");
  sessionStorage.removeItem("Digit.SW.INBOX");
  function formReducer(state, payload) {
    if (checkPathName) {
      switch (payload.action) {
        case "mutateSearchForm":
          Digit.SessionStorage.set("BILL.INBOX", {
            ...state,
            searchForm: payload.data
          });
          return {
            ...state,
            searchForm: payload.data
          };
        case "mutateFilterForm":
          Digit.SessionStorage.set("BILL.INBOX", {
            ...state,
            filterForm: payload.data
          });
          return {
            ...state,
            filterForm: payload.data
          };
        case "mutateTableForm":
          Digit.SessionStorage.set("BILL.INBOX", {
            ...state,
            tableForm: payload.data
          });
          return {
            ...state,
            tableForm: payload.data
          };
      }
    } else {
      switch (payload.action) {
        case "mutateSearchForm":
          Digit.SessionStorage.set("BILL.SW.INBOX", {
            ...state,
            searchForm: payload.data
          });
          return {
            ...state,
            searchForm: payload.data
          };
        case "mutateFilterForm":
          Digit.SessionStorage.set("BILL.SW.INBOX", {
            ...state,
            filterForm: payload.data
          });
          return {
            ...state,
            filterForm: payload.data
          };
        case "mutateTableForm":
          Digit.SessionStorage.set("BILL.SW.INBOX", {
            ...state,
            tableForm: payload.data
          });
          return {
            ...state,
            tableForm: payload.data
          };
      }
    }
  }
  const InboxObjectInSessionStorage = Digit.SessionStorage.get("BILL.INBOX");
  const onSearchFormReset = setSearchFormValue => {
    setSearchFormValue("mobileNumber", null);
    setSearchFormValue("applicationNumber", null);
    setSearchFormValue("consumerNo", null);
    dispatch({
      action: "mutateSearchForm",
      data: searchFormDefaultValues
    });
  };
  const onFilterFormReset = setFilterFormValue => {
    setFilterFormValue("moduleName", checkPathName ? "ws-services" : "sw-services");
    setFilterFormValue("applicationStatus", []);
    setFilterFormValue("applicationType", []);
    setFilterFormValue("locality", []);
    setFilterFormValue("assignee", "ASSIGNED_TO_ALL");
    dispatch({
      action: "mutateFilterForm",
      data: filterFormDefaultValues
    });
  };
  const onSortFormReset = setSortFormValue => {
    setSortFormValue("sortOrder", "DESC");
    dispatch({
      action: "mutateTableForm",
      data: tableOrderFormDefaultValues
    });
  };
  const formInitValue = React.useMemo(() => {
    return InboxObjectInSessionStorage || {
      filterForm: filterFormDefaultValues,
      searchForm: searchFormDefaultValues,
      tableForm: tableOrderFormDefaultValues
    };
  }, [Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.filterForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.searchForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.tableForm) || {})]);
  const [formState, dispatch] = React.useReducer(formReducer, formInitValue);
  const onPageSizeChange = e => {
    dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        limit: e.target.value
      }
    });
  };
  const onSortingByData = e => {
    if (e.length > 0) {
      const [{
        id,
        desc
      }] = e;
      const sortOrder = desc ? "DESC" : "ASC";
      const sortBy = id;
      if (!(formState.tableForm.sortBy === sortBy && formState.tableForm.sortOrder === sortOrder)) {
        dispatch({
          action: "mutateTableForm",
          data: {
            ...formState.tableForm,
            sortBy: id,
            sortOrder: desc ? "DESC" : "ASC"
          }
        });
      }
    }
  };
  const onMobileSortOrderData = data => {
    const {
      sortOrder
    } = data;
    dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        sortOrder
      }
    });
  };
  const {
    data: localitiesForEmployeesCurrentTenant,
    isLoading: loadingLocalitiesForEmployeesCurrentTenant
  } = Digit.Hooks.useBoundaryLocalities(tenantId, "revenue", {}, t);
  const {
    isLoading: isInboxLoading,
    data: {
      table,
      statuses,
      totalCount
    } = {}
  } = Digit.Hooks.ws.useInbox({
    tenantId,
    filters: {
      ...formState
    }
  });
  let links = [{
    text: t("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),
    link: "/digit-ui/employee/ws/create-application",
    roles: ["WS_CEMP", "SW_CEMP"]
  }];
  links = links.filter(link => link.roles ? checkForEmployee(link.roles) : true);
  const PropsForInboxLinks = {
    logoIcon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.DropIcon, null),
    headerText: checkPathName ? "MODULE_WATER" : "MODULE_SW",
    links: [...links, {
      text: t("WS_SEWERAGE_CONNECTION_SEARCH_LABEL"),
      link: checkPathName ? "/digit-ui/employee/ws/water/search-connection?from=WS_SEWERAGE_INBOX" : "/digit-ui/employee/ws/sewerage/search-connection?from=WS_SEWERAGE_INBOX",
      roles: checkPathName ? ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"] : ["SW_CEMP", "SW_APPROVER", "SW_FIELD_INSPECTOR", "SW_DOC_VERIFIER", "SW_CLERK"]
    }, {
      text: t("WS_SEWERAGE_APPLICATION_SEARCH"),
      link: checkPathName ? "/digit-ui/employee/ws/water/search-application?from=WS_SEWERAGE_INBOX" : "/digit-ui/employee/ws/sewerage/search-application?from=WS_SEWERAGE_INBOX",
      roles: checkPathName ? ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"] : ["SW_CEMP", "SW_APPROVER", "SW_FIELD_INSPECTOR", "SW_DOC_VERIFIER", "SW_CLERK"]
    }]
  };
  const SearchFormFields = React.useCallback(_ref2 => {
    let {
      registerRef,
      searchFormState
    } = _ref2;
    return /*#__PURE__*/React__default.createElement(SearchFormFieldsComponents, {
      registerRef,
      searchFormState,
      className: "search"
    });
  }, []);
  const FilterFormFields = React.useCallback(_ref3 => {
    let {
      registerRef,
      controlFilterForm,
      setFilterFormValue,
      getFilterFormValue
    } = _ref3;
    return /*#__PURE__*/React__default.createElement(FilterFormFieldsComponent, {
      statuses,
      isInboxLoading,
      registerRef,
      controlFilterForm,
      setFilterFormValue,
      filterFormState: formState === null || formState === void 0 ? void 0 : formState.filterForm,
      getFilterFormValue,
      localitiesForEmployeesCurrentTenant,
      loadingLocalitiesForEmployeesCurrentTenant,
      checkPathName
    });
  }, [statuses, isInboxLoading, localitiesForEmployeesCurrentTenant, loadingLocalitiesForEmployeesCurrentTenant]);
  const onSearchFormSubmit = data => {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: {
        ...tableOrderFormDefaultValues
      }
    });
    dispatch({
      action: "mutateSearchForm",
      data
    });
  };
  const onFilterFormSubmit = data => {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: {
        ...tableOrderFormDefaultValues
      }
    });
    dispatch({
      action: "mutateFilterForm",
      data
    });
  };
  const propsForSearchForm = {
    SearchFormFields,
    onSearchFormSubmit,
    searchFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.searchForm,
    resetSearchFormDefaultValues: searchFormDefaultValues,
    onSearchFormReset,
    className: "search-form-wns-inbox"
  };
  const propsForFilterForm = {
    FilterFormFields,
    onFilterFormSubmit,
    filterFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.filterForm,
    resetFilterFormDefaultValues: filterFormDefaultValues,
    onFilterFormReset
  };
  const propsForInboxTable = useInboxTableConfig({
    ...{
      parentRoute,
      onPageSizeChange,
      formState,
      totalCount,
      table,
      dispatch,
      onSortingByData,
      tenantId,
      inboxStyles: {
        overflowX: "scroll",
        overflowY: "hidden"
      },
      tableStyle: {
        width: "70%"
      }
    }
  });
  const propsForInboxMobileCards = useInboxMobileCardsData({
    parentRoute,
    table
  });
  const propsForMobileSortForm = {
    onMobileSortOrderData,
    sortFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.tableForm,
    onSortFormReset
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_INBOX"), totalCount ? /*#__PURE__*/React__default.createElement("p", {
    className: "inbox-count"
  }, totalCount) : null), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InboxComposer, _extends({
    isInboxLoading,
    PropsForInboxLinks
  }, propsForSearchForm, propsForFilterForm, propsForMobileSortForm, {
    propsForInboxTable,
    propsForInboxMobileCards,
    formState
  })));
};

const BillAmendmentCard = () => {
  if (!Digit.Utils.wsAccess()) {
    return null;
  }
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [totalCount, setTotalCount] = React.useState(0);
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  const tableOrderFormDefaultValues = {
    sortBy: "",
    limit: 10,
    offset: 0,
    sortOrder: "DESC"
  };
  const searchFormDefaultValues = {};
  const filterFormDefaultBillAmendmentValues = {
    applicationStatus: [],
    businessService: ["WS.AMENDMENT"],
    moduleName: "bsWs-service",
    locality: [],
    assignee: "ASSIGNED_TO_ALL"
  };
  const formInitBilAmendmentValue = {
    filterForm: filterFormDefaultBillAmendmentValues,
    searchForm: searchFormDefaultValues,
    tableForm: tableOrderFormDefaultValues
  };
  const formInitBilAmendmentValueSW = {
    filterForm: {
      ...filterFormDefaultBillAmendmentValues,
      businessService: ["SW.AMENDMENT"],
      moduleName: "bsSw-service"
    },
    searchForm: searchFormDefaultValues,
    tableForm: tableOrderFormDefaultValues
  };
  const {
    isLoading: isBillAMDInboxLoading,
    data: billData
  } = Digit.Hooks.useBillAmendmentInbox({
    tenantId,
    filters: {
      ...formInitBilAmendmentValue
    }
  });
  const {
    isLoading: isSWBillAMDInboxLoading,
    data: swbillData
  } = Digit.Hooks.useBillAmendmentInbox({
    tenantId,
    filters: {
      ...formInitBilAmendmentValueSW
    }
  });
  React.useEffect(() => {
    if (!isBillAMDInboxLoading || !isSWBillAMDInboxLoading) {
      const billCount = billData !== null && billData !== void 0 && billData.totalCount && swbillData !== null && swbillData !== void 0 && swbillData.totalCount ? (billData === null || billData === void 0 ? void 0 : billData.totalCount) + (swbillData === null || swbillData === void 0 ? void 0 : swbillData.totalCount) : billData !== null && billData !== void 0 && billData.totalCount ? billData === null || billData === void 0 ? void 0 : billData.totalCount : swbillData !== null && swbillData !== void 0 && swbillData.totalCount ? swbillData === null || swbillData === void 0 ? void 0 : swbillData.totalCount : 0;
      setTotalCount(billCount);
    }
  }, [billData, swbillData]);
  const propsForModuleCard = React.useMemo(() => ({
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.WSICon, null),
    moduleName: t("WS_BILL_AMENDMENT_BUTTON"),
    kpis: [{
      count: isBillAMDInboxLoading ? "-" : totalCount,
      label: t("TOTAL_WS"),
      link: "/digit-ui/employee/ws/water/bill-amendment/inbox"
    }, {
      count: isBillAMDInboxLoading ? "-" : billData === null || billData === void 0 ? void 0 : billData.slaCount,
      label: t("TOTAL_NEARING_SLA"),
      link: "/digit-ui/employee/ws/water/bill-amendment/inbox"
    }],
    links: [{
      count: isBillAMDInboxLoading ? "-" : billData === null || billData === void 0 ? void 0 : billData.totalCount,
      label: t("WS_WATER_INBOX"),
      link: "/digit-ui/employee/ws/water/bill-amendment/inbox",
      roles: ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"]
    }, {
      count: isBillAMDInboxLoading ? "-" : swbillData === null || swbillData === void 0 ? void 0 : swbillData.totalCount,
      label: t("SW_WATER_INBOX"),
      link: "/digit-ui/employee/ws/sewerage/bill-amendment/inbox",
      roles: ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"]
    }]
  }), [isBillAMDInboxLoading, billData, totalCount]);
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.EmployeeModuleCard, propsForModuleCard);
};

const SearchFields = _ref => {
  var _statusData$otherRole, _statusData$userRoleS;
  let {
    register,
    control,
    reset,
    tenantId,
    t,
    businessService
  } = _ref;
  const {
    isLoading: applicationTypesLoading,
    data: applicationTypes
  } = Digit.Hooks.ws.useWSMDMSWS.applicationTypes(Digit.ULBService.getStateId());
  const filterString = businessService === "WS" ? "WATER" : "SEWERAGE";
  const filteredApplicationTypes = applicationTypes === null || applicationTypes === void 0 ? void 0 : applicationTypes.filter(e => {
    var _e$code;
    return e === null || e === void 0 ? void 0 : (_e$code = e.code) === null || _e$code === void 0 ? void 0 : _e$code.includes(filterString);
  });
  const applicationType = reactHookForm.useWatch({
    control,
    name: "applicationType"
  });
  let businessServices = [];
  let selectedService = "";
  businessServices = ["NewWS1", "NewSW1", "ModifyWSConnection", "ModifySWConnection", "DisconnectWSConnection", "DisconnectSWConnection"];
  if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "NEW_WATER_CONNECTION") selectedService = "NewWS1";else if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "NEW_SEWERAGE_CONNECTION") selectedService = "NewSW1";else if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "MODIFY_WATER_CONNECTION") selectedService = "ModifyWSConnection";else if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "MODIFY_SEWERAGE_CONNECTION") selectedService = "ModifySWConnection";else if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "DISCONNECT_WATER_CONNECTION") selectedService = "DisconnectWSConnection";else if (applicationType && (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "DISCONNECT_SEWERAGE_CONNECTION") selectedService = "DisconnectSWConnection";
  const {
    data: statusData,
    isLoading
  } = Digit.Hooks.useApplicationStatusGeneral({
    businessServices,
    tenantId
  }, {});
  let applicationStatuses = [];
  statusData && (statusData === null || statusData === void 0 ? void 0 : (_statusData$otherRole = statusData.otherRoleStates) === null || _statusData$otherRole === void 0 ? void 0 : _statusData$otherRole.map(status => {
    if (selectedService !== "") {
      (status === null || status === void 0 ? void 0 : status.stateBusinessService) === selectedService && applicationStatuses.push({
        code: status === null || status === void 0 ? void 0 : status.applicationStatus,
        i18nKey: "WF_NEWWS1_" + (status === null || status === void 0 ? void 0 : status.applicationStatus)
      });
      return;
    }
    let found = applicationStatuses.length > 0 ? applicationStatuses === null || applicationStatuses === void 0 ? void 0 : applicationStatuses.some(el => (el === null || el === void 0 ? void 0 : el.code) === status.applicationStatus) : false;
    if (!found) applicationStatuses.push({
      code: status === null || status === void 0 ? void 0 : status.applicationStatus,
      i18nKey: "WF_NEWWS1_" + (status === null || status === void 0 ? void 0 : status.applicationStatus)
    });
  }));
  statusData && (statusData === null || statusData === void 0 ? void 0 : (_statusData$userRoleS = statusData.userRoleStates) === null || _statusData$userRoleS === void 0 ? void 0 : _statusData$userRoleS.map(status => {
    if (selectedService !== "") {
      (status === null || status === void 0 ? void 0 : status.stateBusinessService) === selectedService && applicationStatuses.push({
        code: status === null || status === void 0 ? void 0 : status.applicationStatus,
        i18nKey: "WF_NEWWS1_" + (status === null || status === void 0 ? void 0 : status.applicationStatus)
      });
      return;
    }
    let found = applicationStatuses.length > 0 ? applicationStatuses === null || applicationStatuses === void 0 ? void 0 : applicationStatuses.some(el => (el === null || el === void 0 ? void 0 : el.code) === status.applicationStatus) : false;
    if (!found) applicationStatuses.push({
      code: status === null || status === void 0 ? void 0 : status.applicationStatus,
      i18nKey: "WF_NEWWS1_" + (status === null || status === void 0 ? void 0 : status.applicationStatus)
    });
  }));
  applicationStatuses === null || applicationStatuses === void 0 ? void 0 : applicationStatuses.sort((a, b) => t(a.i18nKey) > t(b.i18nKey) ? 1 : t(b.i18nKey) > t(a.i18nKey) ? -1 : 0);
  const propsForMobileNumber = {
    maxlength: 10,
    pattern: "[6-9][0-9]{9}",
    title: t("ES_SEARCH_APPLICATION_MOBILE_INVALID"),
    componentInFront: "+91"
  };
  let validation = {};
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_ACK_COMMON_APP_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "applicationNumber",
    inputRef: register()
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9-_\/]*$",
    type: "text",
    title: t("ERR_INVALID_APPLICATION_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_MYCONNECTIONS_CONSUMER_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "connectionNumber",
    inputRef: register()
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9\/-]*$",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("CONSUMER_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, _extends({
    name: "mobileNumber",
    type: "number",
    inputRef: register({})
  }, propsForMobileNumber))), applicationTypesLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_APPLICATION_TYPE_LABEL")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "applicationType",
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
      selected: props.value,
      select: props.onChange,
      onBlur: props.onBlur,
      option: filteredApplicationTypes,
      optionKey: "i18nKey",
      t: t
    })
  })), isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    control: control,
    name: "applicationStatus",
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
      selected: props.value,
      select: props.onChange,
      onBlur: props.onBlur,
      option: applicationStatuses,
      optionKey: "i18nKey",
      t: t
    })
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_COMMON_FROM_DATE_LABEL")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      date: props.value,
      onChange: props.onChange
    }),
    name: "fromDate",
    control: control
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_COMMON_TO_DATE_LABEL")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      date: props.value,
      onChange: props.onChange
    }),
    name: "toDate",
    control: control
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "submit"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ES_COMMON_SEARCH"),
    submit: true
  }), /*#__PURE__*/React__default.createElement("p", {
    onClick: () => {
      reset({
        applicationType: "",
        fromDate: "",
        toDate: "",
        connectionNumber: "",
        applicationStatus: "",
        applicationNumber: "",
        tradeName: "",
        offset: 0,
        limit: 10,
        sortBy: "commencementDate",
        sortOrder: "DESC"
      });
    }
  }, t("CS_COMMON_CLEAR_SEARCH"))));
};

const MobileSearchApplication = _ref => {
  let {
    Controller,
    register,
    control,
    t,
    reset,
    previousPage,
    handleSubmit,
    tenantId,
    data,
    onSubmit,
    businessService
  } = _ref;
  function activateModal(state, action) {
    switch (action.type) {
      case "set":
        return action.payload;
      case "remove":
        return false;
    }
  }
  const [currentlyActiveMobileModal, setActiveMobileModal] = React.useReducer(activateModal, false);
  const closeMobilePopupModal = () => {
    setActiveMobileModal({
      type: "remove"
    });
  };
  const MobilePopUpCloseButton = () => /*#__PURE__*/React__default.createElement("div", {
    className: "InboxMobilePopupCloseButtonWrapper",
    onClick: closeMobilePopupModal
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CloseSvg, null));
  const searchFormFieldsComponentProps = {
    Controller,
    register,
    control,
    t,
    reset,
    previousPage,
    businessService
  };
  const MobileComponentDirectory = _ref2 => {
    let {
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    } = _ref2;
    const {
      closeMobilePopupModal
    } = props;
    switch (currentlyActiveMobileModal) {
      case "SearchFormComponent":
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, props, /*#__PURE__*/React__default.createElement(MobilePopUpCloseButton, null), /*#__PURE__*/React__default.createElement("div", {
          className: "MobilePopupHeadingWrapper"
        }, /*#__PURE__*/React__default.createElement("h2", null, t("ES_COMMON_SEARCH"), ":")), /*#__PURE__*/React__default.createElement(SearchFields, _extends({}, searchFormFieldsComponentProps, {
          closeMobilePopupModal,
          tenantId,
          t
        })));
      default:
        return /*#__PURE__*/React__default.createElement("span", null);
    }
  };
  const CurrentMobileModalComponent = React.useCallback(_ref3 => {
    let {
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    } = _ref3;
    return MobileComponentDirectory({
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    });
  }, [currentlyActiveMobileModal]);
  const replaceUnderscore = str => {
    str = str.replace(/_/g, " ");
    return str;
  };
  const propsMobileInboxCards = React.useMemo(() => {
    if (data !== null && data !== void 0 && data.display) {
      return [];
    }
    const getWaterSewerageData = data => {
      if ((data === null || data === void 0 ? void 0 : data.applicationType) == "NEW_WATER_CONNECTION" || (data === null || data === void 0 ? void 0 : data.applicationType) == "MODIFY_WATER_CONNECTION" || (data === null || data === void 0 ? void 0 : data.applicationType) == "DISCONNECT_WATER_CONNECTION") {
        return "WATER";
      } else if ((data === null || data === void 0 ? void 0 : data.applicationType) == "NEW_SEWERAGE_CONNECTION" || (data === null || data === void 0 ? void 0 : data.applicationType) == "MODIFY_SEWERAGE_CONNECTION" || (data === null || data === void 0 ? void 0 : data.applicationType) == "DISCONNECT_SEWERAGE_CONNECTION") {
        return "SEWERAGE";
      }
    };
    const getFlowUrls = applicationType => {
      var _applicationType$toUp, _applicationType$toUp2;
      let application = "application";
      if (applicationType !== null && applicationType !== void 0 && (_applicationType$toUp = applicationType.toUpperCase()) !== null && _applicationType$toUp !== void 0 && _applicationType$toUp.includes("DISCONNECT")) {
        application = "disconnection";
      } else if (applicationType !== null && applicationType !== void 0 && (_applicationType$toUp2 = applicationType.toUpperCase()) !== null && _applicationType$toUp2 !== void 0 && _applicationType$toUp2.includes("MODIFY")) {
        application = "modify";
      }
      return application;
    };
    return data === null || data === void 0 ? void 0 : data.map(data => ({
      [t("WS_MYCONNECTIONS_CONSUMER_NO")]: data !== null && data !== void 0 && data.connectionNo ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
        className: "link"
      }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: "/digit-ui/employee/ws/connection-details?applicationNumber=" + (data === null || data === void 0 ? void 0 : data.connectionNo) + "&tenantId=" + tenantId + "&service=" + getWaterSewerageData(data)
      }, data === null || data === void 0 ? void 0 : data.connectionNo))) : t("CS_NA"),
      [t("WS_ACK_COMMON_APP_NO_LABEL")]: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
        className: "link"
      }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: "/digit-ui/employee/ws/" + getFlowUrls(data === null || data === void 0 ? void 0 : data.applicationType) + "-details?applicationNumber=" + (data === null || data === void 0 ? void 0 : data.applicationNo) + "&tenantId=" + tenantId + "&service=" + getWaterSewerageData(data)
      }, data === null || data === void 0 ? void 0 : data.applicationNo))),
      [t("WS_APPLICATION_TYPE_LABEL")]: data !== null && data !== void 0 && data.applicationType ? replaceUnderscore(data.applicationType) : "-",
      [t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]: (data === null || data === void 0 ? void 0 : data.ownerNames) || "-",
      [t("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL")]: t((data === null || data === void 0 ? void 0 : data.applicationStatus) || "NA"),
      [t("WS_COMMON_TABLE_COL_ADDRESS")]: (data === null || data === void 0 ? void 0 : data.address) || "-"
    }));
  }, [data]);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "searchBox"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchAction, {
    text: t("ES_COMMON_SEARCH"),
    handleActionClick: () => setActiveMobileModal({
      type: "set",
      payload: "SearchFormComponent"
    }),
    tenantId,
    t
  })), currentlyActiveMobileModal ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.PopUp, null, /*#__PURE__*/React__default.createElement(CurrentMobileModalComponent, {
    onSubmit: data => {
      setActiveMobileModal({
        type: "remove"
      });
      onSubmit(data);
    },
    handleSubmit: handleSubmit,
    id: "search-form",
    className: "rm-mb form-field-flex-one inboxPopupMobileWrapper",
    searchFormFieldsComponentProps,
    currentlyActiveMobileModal,
    closeMobilePopupModal,
    tenantId
  })) : null, data !== null && data !== void 0 && data.display ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      marginTop: 20
    }
  }, t(data === null || data === void 0 ? void 0 : data.display).split("\\n").map((text, index) => /*#__PURE__*/React__default.createElement("p", {
    key: index,
    style: {
      textAlign: "center"
    }
  }, text))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.DetailsCard, {
    data: propsMobileInboxCards,
    serviceRequestIdKey: t("WS_COMMON_TABLE_COL_APP_NO")
  }));
};

const SearchApplication = _ref => {
  let {
    tenantId,
    onSubmit,
    data,
    count,
    resultOk,
    businessService,
    isLoading
  } = _ref;
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA", {});
  const [sessionBillFormData, setSessionBillFormData, clearBillSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA", {});
  const {
    t
  } = reactI18next.useTranslation();
  const {
    register,
    control,
    handleSubmit,
    setValue,
    getValues,
    reset
  } = reactHookForm.useForm({
    defaultValues: {
      offset: 0,
      limit: 10,
      sortBy: "commencementDate",
      sortOrder: "DESC",
      isConnectionSearch: true
    }
  });
  React.useEffect(() => {
    register("offset", 0);
    register("limit", 10);
    register("sortBy", "commencementDate");
    register("sortOrder", "DESC");
    register("sortOrder", "DESC");
    register("isConnectionSearch", true);
  }, [register]);
  React.useEffect(() => {
    clearSessionFormData();
    setSessionFormData({});
    setSessionBillFormData({});
    clearBillSessionFormData();
  }, []);
  const onSort = React.useCallback(args => {
    if (args.length === 0) return;
    setValue("sortBy", args.id);
    setValue("sortOrder", args.desc ? "DESC" : "ASC");
  }, []);
  function onPageSizeChange(e) {
    setValue("limit", Number(e.target.value));
    handleSubmit(onSubmit)();
  }
  function nextPage() {
    setValue("offset", getValues("offset") + getValues("limit"));
    handleSubmit(onSubmit)();
  }
  function previousPage() {
    setValue("offset", getValues("offset") - getValues("limit"));
    handleSubmit(onSubmit)();
  }
  const isMobile = window.Digit.Utils.browser.isMobile();
  if (isMobile) {
    return /*#__PURE__*/React__default.createElement(MobileSearchApplication, {
      Controller: reactHookForm.Controller,
      register,
      control,
      t,
      reset,
      previousPage,
      handleSubmit,
      tenantId,
      data,
      onSubmit,
      businessService
    });
  }
  const GetCell = value => /*#__PURE__*/React__default.createElement("span", {
    className: "cell-text"
  }, value);
  const columns = React.useMemo(() => [{
    Header: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    disableSortBy: true,
    accessor: "connectionNo",
    Cell: _ref2 => {
      var _row$original, _row$original2, _row$original3, _row$original4, _row$original5, _row$original6, _row$original7;
      let {
        row
      } = _ref2;
      let service = "WATER";
      if ((row === null || row === void 0 ? void 0 : (_row$original = row.original) === null || _row$original === void 0 ? void 0 : _row$original["applicationType"]) == "NEW_WATER_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2["applicationType"]) == "MODIFY_WATER_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original3 = row.original) === null || _row$original3 === void 0 ? void 0 : _row$original3["applicationType"]) == "DISCONNECT_WATER_CONNECTION") {
        service = "WATER";
      } else if ((row === null || row === void 0 ? void 0 : (_row$original4 = row.original) === null || _row$original4 === void 0 ? void 0 : _row$original4["applicationType"]) == "NEW_SEWERAGE_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original5 = row.original) === null || _row$original5 === void 0 ? void 0 : _row$original5["applicationType"]) == "MODIFY_SEWERAGE_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original6 = row.original) === null || _row$original6 === void 0 ? void 0 : _row$original6["applicationType"]) == "DISCONNECT_SEWERAGE_CONNECTION") {
        service = "SEWERAGE";
      }
      return /*#__PURE__*/React__default.createElement("div", null, row.original["connectionNo"] ? /*#__PURE__*/React__default.createElement("span", {
        className: "link"
      }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: "/digit-ui/employee/ws/connection-details?applicationNumber=" + row.original["connectionNo"] + "&tenantId=" + tenantId + "&service=" + service + "&due=" + (((_row$original7 = row.original) === null || _row$original7 === void 0 ? void 0 : _row$original7.due) || 0) + "&from=WS_SEWERAGE_APPLICATION_SEARCH"
      }, row.original["connectionNo"] || "NA")) : /*#__PURE__*/React__default.createElement("span", null, t("NA")));
    }
  }, {
    Header: t("WS_ACK_COMMON_APP_NO_LABEL"),
    accessor: "applicationNo",
    disableSortBy: true,
    Cell: _ref3 => {
      var _row$original8, _row$original9, _row$original10, _row$original11, _row$original12, _row$original13;
      let {
        row
      } = _ref3;
      let service = "WATER";
      if ((row === null || row === void 0 ? void 0 : (_row$original8 = row.original) === null || _row$original8 === void 0 ? void 0 : _row$original8["applicationType"]) == "NEW_WATER_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original9 = row.original) === null || _row$original9 === void 0 ? void 0 : _row$original9["applicationType"]) == "MODIFY_WATER_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original10 = row.original) === null || _row$original10 === void 0 ? void 0 : _row$original10["applicationType"]) == "DISCONNECT_WATER_CONNECTION") {
        service = "WATER";
      } else if ((row === null || row === void 0 ? void 0 : (_row$original11 = row.original) === null || _row$original11 === void 0 ? void 0 : _row$original11["applicationType"]) == "NEW_SEWERAGE_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original12 = row.original) === null || _row$original12 === void 0 ? void 0 : _row$original12["applicationType"]) == "MODIFY_SEWERAGE_CONNECTION" || (row === null || row === void 0 ? void 0 : (_row$original13 = row.original) === null || _row$original13 === void 0 ? void 0 : _row$original13["applicationType"]) == "DISCONNECT_SEWERAGE_CONNECTION") {
        service = "SEWERAGE";
      }
      if (row.original["applicationType"] === "MODIFY_SEWERAGE_CONNECTION" || row.original["applicationType"] === "MODIFY_WATER_CONNECTION") {
        var _row$original14, _row$original14$appli, _row$original14$appli2, _row$original15, _row$original15$appli, _row$original15$appli2;
        let application = "application";
        if (row !== null && row !== void 0 && (_row$original14 = row.original) !== null && _row$original14 !== void 0 && (_row$original14$appli = _row$original14["applicationType"]) !== null && _row$original14$appli !== void 0 && (_row$original14$appli2 = _row$original14$appli.toUpperCase()) !== null && _row$original14$appli2 !== void 0 && _row$original14$appli2.includes("DISCONNECT")) {
          application = "disconnection";
        } else if (row !== null && row !== void 0 && (_row$original15 = row.original) !== null && _row$original15 !== void 0 && (_row$original15$appli = _row$original15["applicationType"]) !== null && _row$original15$appli !== void 0 && (_row$original15$appli2 = _row$original15$appli.toUpperCase()) !== null && _row$original15$appli2 !== void 0 && _row$original15$appli2.includes("MODIFY")) {
          application = "modify";
        }
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/employee/ws/" + application + "-details?applicationNumber=" + row.original["applicationNo"] + "&tenantId=" + tenantId + "&service=" + service + "&mode=" + "MODIFY" + "&from=WS_SEWERAGE_APPLICATION_SEARCH"
        }, row.original["applicationNo"])));
      } else {
        var _row$original16, _row$original16$appli, _row$original17, _row$original17$appli;
        let application = "application";
        if (row !== null && row !== void 0 && (_row$original16 = row.original) !== null && _row$original16 !== void 0 && (_row$original16$appli = _row$original16["applicationType"]) !== null && _row$original16$appli !== void 0 && _row$original16$appli.includes("DISCONNECT")) {
          application = "disconnection";
        } else if (row !== null && row !== void 0 && (_row$original17 = row.original) !== null && _row$original17 !== void 0 && (_row$original17$appli = _row$original17["applicationType"]) !== null && _row$original17$appli !== void 0 && _row$original17$appli.includes("MODIFY")) {
          application = "modify";
        }
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/employee/ws/" + application + "-details?applicationNumber=" + row.original["applicationNo"] + "&tenantId=" + tenantId + "&service=" + service + "&from=WS_SEWERAGE_APPLICATION_SEARCH"
        }, row.original["applicationNo"])));
      }
    }
  }, {
    Header: t("WS_APPLICATION_TYPE_LABEL"),
    disableSortBy: true,
    accessor: row => {
      return GetCell(t("WS_" + row.applicationType));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),
    disableSortBy: true,
    accessor: row => {
      var _row$connectionHolder, _row$connectionHolder2, _row$connectionHolder3, _row$connectionHolder4;
      return GetCell(row !== null && row !== void 0 && (_row$connectionHolder = row.connectionHolders) !== null && _row$connectionHolder !== void 0 && (_row$connectionHolder2 = _row$connectionHolder[0]) !== null && _row$connectionHolder2 !== void 0 && _row$connectionHolder2.name ? row === null || row === void 0 ? void 0 : (_row$connectionHolder3 = row.connectionHolders) === null || _row$connectionHolder3 === void 0 ? void 0 : (_row$connectionHolder4 = _row$connectionHolder3[0]) === null || _row$connectionHolder4 === void 0 ? void 0 : _row$connectionHolder4.name : (row === null || row === void 0 ? void 0 : row.ownerNames) || "-");
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL"),
    accessor: row => GetCell(t((row === null || row === void 0 ? void 0 : row.applicationStatus) || "NA")),
    disableSortBy: true
  }, {
    Header: t("WS_COMMON_TABLE_COL_ADDRESS"),
    disableSortBy: true,
    accessor: row => GetCell((row === null || row === void 0 ? void 0 : row.address) || "-")
  }], []);
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, businessService === "WS" ? t("WS_WATER_SEARCH_APPLICATION_SUB_HEADER") : t("WS_SEWERAGE_SEARCH_APPLICATION_SUB_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    className: "card-search-heading"
  }, /*#__PURE__*/React__default.createElement("span", {
    style: {
      color: "#505A5F"
    }
  }, t("WS_INFO_VALIDATION"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, {
    onSubmit: onSubmit,
    handleSubmit: handleSubmit
  }, /*#__PURE__*/React__default.createElement(SearchFields, {
    register,
    control,
    reset,
    tenantId,
    t,
    businessService
  })), isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : null, data !== null && data !== void 0 && data.display && !resultOk ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      marginTop: 20
    }
  }, t(data === null || data === void 0 ? void 0 : data.display).split("\\n").map((text, index) => /*#__PURE__*/React__default.createElement("p", {
    key: index,
    style: {
      textAlign: "center"
    }
  }, text))) : resultOk ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
    t: t,
    data: data,
    totalRecords: count,
    columns: columns,
    getCellProps: cellInfo => {
      return {
        style: {
          minWidth: cellInfo.column.Header === t("ES_INBOX_APPLICATION_NO") ? "240px" : "",
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    onPageSizeChange: onPageSizeChange,
    currentPage: getValues("offset") / getValues("limit"),
    onNextPage: nextPage,
    onPrevPage: previousPage,
    pageSizeLimit: getValues("limit"),
    onSort: onSort,
    disableSort: false,
    sortParams: [{
      id: getValues("sortBy"),
      desc: getValues("sortOrder") === "DESC" ? true : false
    }]
  }) : null);
};

const SearchFields$1 = _ref => {
  let {
    register,
    control,
    reset,
    tenantId,
    t
  } = _ref;
  const propsForMobileNumber = {
    maxlength: 10,
    pattern: "[6-9][0-9]{9}",
    title: t("ES_SEARCH_APPLICATION_MOBILE_INVALID"),
    componentInFront: "+91"
  };
  const propsForOldConnectionNumberNpropertyId = {
    pattern: "[A-Za-z]{2}\-[A-Za-z]{2}\-[0-9]{4}\-[0-9]{2}\-[0-9]{2}\-[0-9]{6}",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG")
  };
  let validation = {};
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_MYCONNECTIONS_CONSUMER_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "connectionNumber",
    inputRef: register({})
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9\/-]*$",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_SEARCH_CONNNECTION_OLD_CONSUMER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "oldConnectionNumber",
    inputRef: register({})
  }, propsForOldConnectionNumberNpropertyId))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_PROPERTY_ID_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "propertyId",
    inputRef: register({})
  }, propsForOldConnectionNumberNpropertyId))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("WS_HOME_SEARCH_RESULTS_OWN_MOB_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, _extends({
    name: "mobileNumber",
    inputRef: register({})
  }, propsForMobileNumber))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "submit"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_SEARCH_CONNECTION_SEARCH_BUTTON"),
    submit: true
  }), /*#__PURE__*/React__default.createElement("p", {
    onClick: () => {
      reset({
        searchType: "CONNECTION",
        mobileNumber: "",
        offset: 0,
        limit: 10,
        sortBy: "commencementDate",
        sortOrder: "DESC",
        propertyId: "",
        connectionNumber: "",
        oldConnectionNumber: ""
      });
    }
  }, t("WS_SEARCH_CONNECTION_RESET_BUTTON"))));
};

const MobileSearchWater = _ref => {
  let {
    Controller,
    register,
    control,
    t,
    reset,
    previousPage,
    handleSubmit,
    tenantId,
    data,
    onSubmit
  } = _ref;
  function activateModal(state, action) {
    switch (action.type) {
      case "set":
        return action.payload;
      case "remove":
        return false;
    }
  }
  const [currentlyActiveMobileModal, setActiveMobileModal] = React.useReducer(activateModal, false);
  const closeMobilePopupModal = () => {
    setActiveMobileModal({
      type: "remove"
    });
  };
  const MobilePopUpCloseButton = () => /*#__PURE__*/React__default.createElement("div", {
    className: "InboxMobilePopupCloseButtonWrapper",
    onClick: closeMobilePopupModal
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CloseSvg, null));
  const searchFormFieldsComponentProps = {
    Controller,
    register,
    control,
    t,
    reset,
    previousPage
  };
  const MobileComponentDirectory = _ref2 => {
    let {
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    } = _ref2;
    const {
      closeMobilePopupModal
    } = props;
    switch (currentlyActiveMobileModal) {
      case "SearchFormComponent":
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, props, /*#__PURE__*/React__default.createElement(MobilePopUpCloseButton, null), /*#__PURE__*/React__default.createElement("div", {
          className: "MobilePopupHeadingWrapper"
        }, /*#__PURE__*/React__default.createElement("h2", null, t("ES_COMMON_SEARCH"), ":")), /*#__PURE__*/React__default.createElement(SearchFields$1, _extends({}, searchFormFieldsComponentProps, {
          closeMobilePopupModal,
          tenantId,
          t
        })));
      default:
        return /*#__PURE__*/React__default.createElement("span", null);
    }
  };
  const convertEpochToDate = dateEpoch => {
    if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
      return "NA";
    }
    const dateFromApi = new Date(dateEpoch);
    let month = dateFromApi.getMonth() + 1;
    let day = dateFromApi.getDate();
    let year = dateFromApi.getFullYear();
    month = (month > 9 ? "" : "0") + month;
    day = (day > 9 ? "" : "0") + day;
    return day + "/" + month + "/" + year;
  };
  const CurrentMobileModalComponent = React.useCallback(_ref3 => {
    let {
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    } = _ref3;
    return MobileComponentDirectory({
      currentlyActiveMobileModal,
      searchFormFieldsComponentProps,
      tenantId,
      ...props
    });
  }, [currentlyActiveMobileModal]);
  const getActionItems = (status, data) => {
    switch (status) {
      case "Active":
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: {
            pathname: "/digit-ui/employee/payment/collect/" + ((data === null || data === void 0 ? void 0 : data["service"]) == "WATER" ? "WS" : "SW") + "/" + encodeURIComponent(data === null || data === void 0 ? void 0 : data["connectionNo"]) + "/" + (data === null || data === void 0 ? void 0 : data["tenantId"]) + "?tenantId=" + (data === null || data === void 0 ? void 0 : data["tenantId"]) + "&ISWSCON"
          }
        }, t("WS_COMMON_COLLECT_LABEL"), " ")));
    }
  };
  const GetStatusLinkCell = value => {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
      className: "link"
    }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: "/digit-ui/employee/ws/connection-details?applicationNumber=" + (value === null || value === void 0 ? void 0 : value.connectionNo) + "&tenantId=" + (value === null || value === void 0 ? void 0 : value.tenantId) + "&service=" + (value === null || value === void 0 ? void 0 : value.service) + "&connectionType=" + (value === null || value === void 0 ? void 0 : value.connectionType) + "&due=" + ((value === null || value === void 0 ? void 0 : value.due) || 0)
    }, (value === null || value === void 0 ? void 0 : value.connectionNo) || "NA")));
  };
  const propsMobileInboxCards = React.useMemo(() => {
    if (data !== null && data !== void 0 && data.display) {
      return [];
    }
    return data === null || data === void 0 ? void 0 : data.map(data => {
      var _data$status, _data$status2;
      return {
        [t("WS_MYCONNECTIONS_CONSUMER_NO")]: GetStatusLinkCell(data) || t("WS_NA"),
        [t("WS_COMMON_TABLE_COL_SERVICE_LABEL")]: t("WS_" + (data === null || data === void 0 ? void 0 : data.service)),
        [t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]: (data === null || data === void 0 ? void 0 : data.owner) || t("WS_NA"),
        [t("WS_COMMON_TABLE_COL_STATUS_LABEL")]: t("WS_" + (data === null || data === void 0 ? void 0 : (_data$status = data.status) === null || _data$status === void 0 ? void 0 : _data$status.toUpperCase())),
        [t("WS_COMMON_TABLE_COL_AMT_DUE_LABEL")]: (data === null || data === void 0 ? void 0 : data.due) || t("WS_NA"),
        [t("WS_COMMON_TABLE_COL_ADDRESS")]: (data === null || data === void 0 ? void 0 : data.address) || t("WS_NA"),
        [t("WS_COMMON_TABLE_COL_DUE_DATE_LABEL")]: (data === null || data === void 0 ? void 0 : (_data$status2 = data.status) === null || _data$status2 === void 0 ? void 0 : _data$status2.toUpperCase()) === "INACTIVE" ? t("WS_NA") : data !== null && data !== void 0 && data.dueDate ? convertEpochToDate(data === null || data === void 0 ? void 0 : data.dueDate) : t("WS_NA"),
        [t("WS_COMMON_TABLE_COL_ACTION_LABEL")]: data !== null && data !== void 0 && data.due ? getActionItems(data === null || data === void 0 ? void 0 : data.status, data) : t("WS_NA")
      };
    });
  }, [data]);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "searchBox"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchAction, {
    text: t("ES_COMMON_SEARCH"),
    handleActionClick: () => setActiveMobileModal({
      type: "set",
      payload: "SearchFormComponent"
    }),
    tenantId,
    t
  })), currentlyActiveMobileModal ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.PopUp, null, /*#__PURE__*/React__default.createElement(CurrentMobileModalComponent, {
    onSubmit: data => {
      setActiveMobileModal({
        type: "remove"
      });
      onSubmit(data);
    },
    handleSubmit: handleSubmit,
    id: "search-form",
    className: "rm-mb form-field-flex-one inboxPopupMobileWrapper",
    searchFormFieldsComponentProps,
    currentlyActiveMobileModal,
    closeMobilePopupModal,
    tenantId
  })) : null, data !== null && data !== void 0 && data.display ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      marginTop: 20
    }
  }, t(data === null || data === void 0 ? void 0 : data.display).split("\\n").map((text, index) => /*#__PURE__*/React__default.createElement("p", {
    key: index,
    style: {
      textAlign: "center"
    }
  }, text))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.DetailsCard, {
    data: propsMobileInboxCards,
    serviceRequestIdKey: t("WS_COMMON_TABLE_COL_APP_NO")
  }));
};

const SearchWaterConnection = _ref => {
  let {
    tenantId,
    onSubmit,
    data,
    count,
    resultOk,
    businessService,
    isLoading
  } = _ref;
  const convertEpochToDate = dateEpoch => {
    if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
      return "NA";
    }
    const dateFromApi = new Date(dateEpoch);
    let month = dateFromApi.getMonth() + 1;
    let day = dateFromApi.getDate();
    let year = dateFromApi.getFullYear();
    month = (month > 9 ? "" : "0") + month;
    day = (day > 9 ? "" : "0") + day;
    return day + "/" + month + "/" + year;
  };
  const {
    t
  } = reactI18next.useTranslation();
  const {
    register,
    control,
    handleSubmit,
    setValue,
    getValues,
    reset
  } = reactHookForm.useForm({
    defaultValues: {
      offset: 0,
      limit: 10,
      sortBy: "commencementDate",
      sortOrder: "DESC",
      searchType: "CONNECTION"
    }
  });
  React.useEffect(() => {
    register("offset", 0);
    register("limit", 10);
    register("sortBy", "commencementDate");
    register("searchType", "CONNECTION");
    register("sortOrder", "DESC");
    register("propertyId", "");
  }, [register]);
  const onSort = React.useCallback(args => {
    if (args.length === 0) return;
    setValue("sortBy", args.id);
    setValue("sortOrder", args.desc ? "DESC" : "ASC");
  }, []);
  function onPageSizeChange(e) {
    setValue("limit", Number(e.target.value));
    handleSubmit(onSubmit)();
  }
  function nextPage() {
    setValue("offset", getValues("offset") + getValues("limit"));
    handleSubmit(onSubmit)();
  }
  function previousPage() {
    setValue("offset", getValues("offset") - getValues("limit"));
    handleSubmit(onSubmit)();
  }
  const isMobile = window.Digit.Utils.browser.isMobile();
  if (isMobile) {
    return /*#__PURE__*/React__default.createElement(MobileSearchWater, {
      Controller: reactHookForm.Controller,
      register,
      control,
      t,
      reset,
      previousPage,
      handleSubmit,
      tenantId,
      data,
      onSubmit
    });
  }
  const GetCell = value => /*#__PURE__*/React__default.createElement("span", {
    className: "cell-text"
  }, value);
  const columns = React.useMemo(() => [{
    Header: t("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),
    disableSortBy: true,
    accessor: "connectionNo",
    Cell: _ref2 => {
      var _row$original, _row$original2, _row$original3;
      let {
        row
      } = _ref2;
      return /*#__PURE__*/React__default.createElement("div", null, row.original["connectionNo"] ? /*#__PURE__*/React__default.createElement("span", {
        className: "link"
      }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: "/digit-ui/employee/ws/connection-details?applicationNumber=" + row.original["connectionNo"] + "&tenantId=" + tenantId + "&service=" + ((_row$original = row.original) === null || _row$original === void 0 ? void 0 : _row$original["service"]) + "&connectionType=" + ((_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2["connectionType"]) + "&due=" + (((_row$original3 = row.original) === null || _row$original3 === void 0 ? void 0 : _row$original3.due) || 0) + "&from=WS_SEWERAGE_CONNECTION_SEARCH_LABEL"
      }, row.original["connectionNo"] || "NA")) : /*#__PURE__*/React__default.createElement("span", null, t("NA")));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_SERVICE_LABEL"),
    disableSortBy: true,
    Cell: _ref3 => {
      var _row$original4;
      let {
        row
      } = _ref3;
      return GetCell(t("WS_" + ((_row$original4 = row.original) === null || _row$original4 === void 0 ? void 0 : _row$original4["service"])));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),
    disableSortBy: true,
    Cell: _ref4 => {
      var _row$original5, _row$original5$connec, _row$original6, _row$original6$connec, _row$original7;
      let {
        row
      } = _ref4;
      return GetCell(row !== null && row !== void 0 && (_row$original5 = row.original) !== null && _row$original5 !== void 0 && (_row$original5$connec = _row$original5.connectionHolders) !== null && _row$original5$connec !== void 0 && _row$original5$connec.map(owner => owner === null || owner === void 0 ? void 0 : owner.name).join(",") ? row === null || row === void 0 ? void 0 : (_row$original6 = row.original) === null || _row$original6 === void 0 ? void 0 : (_row$original6$connec = _row$original6.connectionHolders) === null || _row$original6$connec === void 0 ? void 0 : _row$original6$connec.map(owner => owner === null || owner === void 0 ? void 0 : owner.name).join(",") : "" + (((_row$original7 = row.original) === null || _row$original7 === void 0 ? void 0 : _row$original7["owner"]) || "NA"));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_STATUS_LABEL"),
    disableSortBy: true,
    Cell: _ref5 => {
      var _row$original8, _row$original8$status;
      let {
        row
      } = _ref5;
      return GetCell(t("WS_" + ((_row$original8 = row.original) === null || _row$original8 === void 0 ? void 0 : (_row$original8$status = _row$original8["status"]) === null || _row$original8$status === void 0 ? void 0 : _row$original8$status.toUpperCase())));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),
    disableSortBy: true,
    Cell: _ref6 => {
      var _row$original9;
      let {
        row
      } = _ref6;
      return GetCell("" + (((_row$original9 = row.original) === null || _row$original9 === void 0 ? void 0 : _row$original9["due"]) || "NA"));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_ADDRESS"),
    disableSortBy: true,
    Cell: _ref7 => {
      var _row$original10;
      let {
        row
      } = _ref7;
      return GetCell("" + (((_row$original10 = row.original) === null || _row$original10 === void 0 ? void 0 : _row$original10["address"]) || "NA"));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_DUE_DATE_LABEL"),
    disableSortBy: true,
    Cell: _ref8 => {
      var _row$original11, _row$original11$statu, _row$original12, _row$original13;
      let {
        row
      } = _ref8;
      const status = ((_row$original11 = row.original) === null || _row$original11 === void 0 ? void 0 : (_row$original11$statu = _row$original11["status"]) === null || _row$original11$statu === void 0 ? void 0 : _row$original11$statu.toUpperCase()) || "";
      const dueDate = ((_row$original12 = row.original) === null || _row$original12 === void 0 ? void 0 : _row$original12.dueDate) === "NA" ? t("WS_NA") : convertEpochToDate((_row$original13 = row.original) === null || _row$original13 === void 0 ? void 0 : _row$original13.dueDate);
      return GetCell(status === "INACTIVE" ? t("WS_NA") : t("" + dueDate));
    }
  }, {
    Header: t("WS_COMMON_TABLE_COL_ACTION_LABEL"),
    disableSortBy: true,
    Cell: _ref9 => {
      var _row$original14;
      let {
        row
      } = _ref9;
      const amount = (_row$original14 = row.original) === null || _row$original14 === void 0 ? void 0 : _row$original14.due;
      if (amount > 0) {
        var _row$original15;
        return GetCell(getActionItem((_row$original15 = row.original) === null || _row$original15 === void 0 ? void 0 : _row$original15.status, row));
      } else {
        return GetCell(t("WS_NA"));
      }
    }
  }], []);
  const getActionItem = (status, row) => {
    var _row$original16, _row$original17, _row$original18, _row$original19, _row$original20, _row$original21, _row$original22, _row$original23, _row$original24;
    const userInfo = Digit.UserService.getUser();
    const userRoles = userInfo.info.roles.map(roleData => roleData.code);
    const isUserAllowedToAddMeterReading = userRoles.filter(role => role === "WS_CEMP" || role === "SW_CEMP").length > 0;
    if (!isUserAllowedToAddMeterReading) return null;
    switch (status) {
      case "Active":
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, ((_row$original16 = row.original) === null || _row$original16 === void 0 ? void 0 : _row$original16.service) === "WATER" ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: {
            pathname: "/digit-ui/employee/payment/collect/" + (((_row$original17 = row.original) === null || _row$original17 === void 0 ? void 0 : _row$original17["service"]) === "WATER" ? "WS" : "SW") + "/" + encodeURIComponent((_row$original18 = row.original) === null || _row$original18 === void 0 ? void 0 : _row$original18["connectionNo"]) + "/" + ((_row$original19 = row.original) === null || _row$original19 === void 0 ? void 0 : _row$original19["tenantId"]) + "?tenantId=" + ((_row$original20 = row.original) === null || _row$original20 === void 0 ? void 0 : _row$original20["tenantId"]) + "?workflow=WS&ISWSCON"
          }
        }, t("WS_COMMON_COLLECT_LABEL"), " ") : /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: {
            pathname: "/digit-ui/employee/payment/collect/" + (((_row$original21 = row.original) === null || _row$original21 === void 0 ? void 0 : _row$original21["service"]) === "WATER" ? "WS" : "SW") + "/" + encodeURIComponent((_row$original22 = row.original) === null || _row$original22 === void 0 ? void 0 : _row$original22["connectionNo"]) + "/" + ((_row$original23 = row.original) === null || _row$original23 === void 0 ? void 0 : _row$original23["tenantId"]) + "?tenantId=" + ((_row$original24 = row.original) === null || _row$original24 === void 0 ? void 0 : _row$original24["tenantId"]) + "?workflow=SW&ISWSCON"
          }
        }, t("WS_COMMON_COLLECT_LABEL"), " ")));
    }
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, businessService === "WS" ? t("WS_WATER_SEARCH_CONNECTION_SUB_HEADER") : t("WS_SEWERAGE_SEARCH_CONNECTION_SUB_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, {
    className: "ws-custom-wrapper",
    onSubmit: onSubmit,
    handleSubmit: handleSubmit
  }, /*#__PURE__*/React__default.createElement(SearchFields$1, {
    register,
    control,
    reset,
    tenantId,
    t
  })), isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : null, data !== null && data !== void 0 && data.display && !resultOk ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      marginTop: 20
    }
  }, t(data === null || data === void 0 ? void 0 : data.display).split("\\n").map((text, index) => /*#__PURE__*/React__default.createElement("p", {
    key: index,
    style: {
      textAlign: "center"
    }
  }, text))) : resultOk ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
    t: t,
    data: data,
    totalRecords: count,
    columns: columns,
    getCellProps: cellInfo => {
      return {
        style: {
          minWidth: cellInfo.column.Header === t("ES_INBOX_APPLICATION_NO") ? "240px" : "",
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    onPageSizeChange: onPageSizeChange,
    currentPage: getValues("offset") / getValues("limit"),
    onNextPage: nextPage,
    onPrevPage: previousPage,
    pageSizeLimit: getValues("limit"),
    onSort: onSort,
    disableSort: false,
    sortParams: [{
      id: getValues("sortBy"),
      desc: getValues("sortOrder") === "DESC" ? true : false
    }]
  }) : null);
};

const WSCard = () => {
  if (!Digit.Utils.wsAccess()) {
    return null;
  }
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [totalCount, setTotalCount] = React.useState(0);
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  const filterFormDefaultValues = {
    businessService: ["NewWS1", "ModifyWSConnection", "DisconnectWSConnection"],
    moduleName: "ws-services",
    locality: [],
    applicationStatus: [],
    applicationType: []
  };
  const tableOrderFormDefaultValues = {
    sortBy: "auditDetails.lastModifiedTime",
    sortOrder: "DESC"
  };
  const searchFormDefaultValues = {};
  const formInitValue = {
    filterForm: filterFormDefaultValues,
    searchForm: searchFormDefaultValues,
    tableForm: tableOrderFormDefaultValues
  };
  const {
    isLoading: isWSInboxLoading,
    data: wsData
  } = Digit.Hooks.ws.useInbox({
    tenantId,
    filters: {
      ...formInitValue
    }
  });
  React.useEffect(() => {
    if (!isWSInboxLoading) {
      const waterCount = wsData !== null && wsData !== void 0 && wsData.totalCount ? wsData === null || wsData === void 0 ? void 0 : wsData.totalCount : 0;
      setTotalCount(waterCount);
    }
  }, [wsData]);
  let links = [{
    label: t("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),
    link: "/digit-ui/employee/ws/create-application",
    roles: ["WS_CEMP", "SW_CEMP"]
  }];
  links = links.filter(link => link.roles ? checkForEmployee(link.roles) : true);
  const propsForModuleCard = {
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.WSICon, null),
    moduleName: t("ACTION_TEST_WATER"),
    kpis: [{
      count: isWSInboxLoading ? "-" : totalCount,
      label: t("TOTAL_WS"),
      link: "/digit-ui/employee/ws/water/inbox"
    }, {
      count: isWSInboxLoading ? "-" : wsData === null || wsData === void 0 ? void 0 : wsData.slaCount,
      label: t("TOTAL_NEARING_SLA"),
      link: "/digit-ui/employee/ws/water/inbox"
    }],
    links: [{
      count: isWSInboxLoading ? "-" : wsData === null || wsData === void 0 ? void 0 : wsData.totalCount,
      label: t("WS_INBOX_HEADER"),
      link: "/digit-ui/employee/ws/water/inbox",
      roles: ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"]
    }, ...links, {
      label: t("WS_WATER_CONNECTION_SEARCH_LABEL"),
      link: "/digit-ui/employee/ws/water/search-connection",
      roles: ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"]
    }, {
      label: t("WS_WATER_APPLICATION_SEARCH"),
      link: "/digit-ui/employee/ws/water/search-application",
      roles: ["WS_CEMP", "WS_APPROVER", "WS_FIELD_INSPECTOR", "WS_DOC_VERIFIER", "WS_CLERK"]
    }]
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.EmployeeModuleCard, propsForModuleCard);
};

const SWCard = () => {
  if (!Digit.Utils.swAccess()) {
    return null;
  }
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [totalCount, setTotalCount] = React.useState(0);
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  const filterFormDefaultValues1 = {
    businessService: ["NewSW1", "ModifySWConnection", "DisconnectSWConnection"],
    moduleName: "sw-services",
    locality: [],
    applicationStatus: [],
    applicationType: []
  };
  const tableOrderFormDefaultValues = {
    sortBy: "auditDetails.lastModifiedTime",
    sortOrder: "DESC"
  };
  const searchFormDefaultValues = {};
  const formInitValue = {
    filterForm: filterFormDefaultValues1,
    searchForm: searchFormDefaultValues,
    tableForm: tableOrderFormDefaultValues
  };
  const {
    isLoading: isSWInboxLoading,
    data: swData
  } = Digit.Hooks.ws.useInbox({
    tenantId,
    filters: {
      ...formInitValue
    }
  });
  React.useEffect(() => {
    if (!isSWInboxLoading) {
      const sewerageCount = swData !== null && swData !== void 0 && swData.totalCount ? swData === null || swData === void 0 ? void 0 : swData.totalCount : 0;
      setTotalCount(sewerageCount);
    }
  }, [swData]);
  let links = [{
    label: t("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),
    link: "/digit-ui/employee/ws/create-application",
    roles: ["WS_CEMP", "SW_CEMP"]
  }];
  links = links.filter(link => link.roles ? checkForEmployee(link.roles) : true);
  const propsForModuleCard = {
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.WSICon, null),
    moduleName: t("ACTION_TEST_SEWERAGE"),
    kpis: [{
      count: isSWInboxLoading ? "-" : totalCount,
      label: t("TOTAL_SW"),
      link: "/digit-ui/employee/ws/sewerage/inbox"
    }, {
      count: isSWInboxLoading ? "-" : swData === null || swData === void 0 ? void 0 : swData.slaCount,
      label: t("TOTAL_NEARING_SLA"),
      link: "/digit-ui/employee/ws/sewerage/inbox"
    }],
    links: [{
      count: isSWInboxLoading ? "-" : swData === null || swData === void 0 ? void 0 : swData.totalCount,
      label: t("WS_SEWERAGE_INBOX"),
      link: "/digit-ui/employee/ws/sewerage/inbox",
      roles: ["SW_CEMP", "SW_APPROVER", "SW_FIELD_INSPECTOR", "SW_DOC_VERIFIER", "SW_CLERK"]
    }, ...links, {
      label: t("WS_SEWERAGE_CONNECTION_SEARCH_LABEL"),
      link: "/digit-ui/employee/ws/sewerage/search-connection",
      roles: ["SW_CEMP", "SW_APPROVER", "SW_FIELD_INSPECTOR", "SW_DOC_VERIFIER", "SW_CLERK"]
    }, {
      label: t("WS_SEWERAGE_APPLICATION_SEARCH"),
      link: "/digit-ui/employee/ws/sewerage/search-application",
      roles: ["SW_CEMP", "SW_APPROVER", "SW_FIELD_INSPECTOR", "SW_DOC_VERIFIER", "SW_CLERK"]
    }]
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.EmployeeModuleCard, propsForModuleCard);
};

const SearchFormFieldsComponents$1 = _ref => {
  var _searchFormState$erro, _searchFormState$erro2, _searchFormState$erro3, _searchFormState$erro4;
  let {
    registerRef,
    searchFormState
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const propsForMobileNumber = {
    maxlength: 10,
    pattern: "[6-9][0-9]{9}",
    title: t("ES_SEARCH_APPLICATION_MOBILE_INVALID"),
    componentInFront: "+91"
  };
  let validation = {};
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("BILLAMEND_APPLICATIONNO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "applicationNumber",
    inputRef: registerRef({})
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9-_\/]*$",
    type: "text",
    title: t("ERR_INVALID_APPLICATION_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("BILLAMEND_CONSUMER_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    name: "consumerCode",
    inputRef: registerRef({})
  }, validation = {
    isRequired: false,
    pattern: "^[a-zA-Z0-9\/-]*$",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "wns-search-field"
  }, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, _extends({
    name: "mobileNumber",
    type: "number",
    inputRef: registerRef({})
  }, propsForMobileNumber)), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro = searchFormState.errors) !== null && _searchFormState$erro !== void 0 && (_searchFormState$erro2 = _searchFormState$erro["mobileNumber"]) !== null && _searchFormState$erro2 !== void 0 && _searchFormState$erro2.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro3 = searchFormState.errors) === null || _searchFormState$erro3 === void 0 ? void 0 : (_searchFormState$erro4 = _searchFormState$erro3["mobileNumber"]) === null || _searchFormState$erro4 === void 0 ? void 0 : _searchFormState$erro4.message) : null));
};

const FilterFormFieldsComponent$1 = _ref => {
  let {
    controlFilterForm,
    localitiesForEmployeesCurrentTenant,
    loadingLocalitiesForEmployeesCurrentTenant,
    isInboxLoading,
    filterFormState,
    statuses
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const availableOptions = [{
    code: "ASSIGNED_TO_ME",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ME")
  }, {
    code: "ASSIGNED_TO_ALL",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ALL")
  }];
  const selectedApplicationStatus = reactHookForm.useWatch({
    control: controlFilterForm,
    name: "status",
    defaultValue: (filterFormState === null || filterFormState === void 0 ? void 0 : filterFormState.applicationStatus) || null
  });
  const totalnewWS = statuses === null || statuses === void 0 ? void 0 : statuses.filter(e => e.businessservice === "BS.AMENDMENT").length;
  const applicationTypeStatuses = [{
    code: "NewWS1",
    name: t("INWORKFLOW") + " "
  }, {
    code: "ModifyWSConnection",
    name: t("CONSUMED") + " "
  }];
  const selectrole = (listOfSelections, props) => {
    const res = listOfSelections.map(propsData => {
      const data = propsData[1];
      return data;
    });
    return props.onChange(res);
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "assignee",
    control: controlFilterForm,
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
      onSelect: e => {
        props.onChange(e.code);
      },
      selectedOption: availableOptions.filter(option => option.code === props.value)[0],
      optionsKey: "name",
      name: "assignee",
      options: availableOptions
    })
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "locality",
    control: controlFilterForm,
    render: props => {
      const renderRemovableTokens = React.useMemo(() => {
        var _props$value;
        return props === null || props === void 0 ? void 0 : (_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.map((locality, index) => {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RemoveableTag, {
            key: index,
            text: locality.i18nkey,
            onClick: () => {
              var _props$value2;
              props.onChange(props === null || props === void 0 ? void 0 : (_props$value2 = props.value) === null || _props$value2 === void 0 ? void 0 : _props$value2.filter(loc => loc.code !== locality.code));
            }
          });
        });
      }, [props === null || props === void 0 ? void 0 : props.value]);
      return loadingLocalitiesForEmployeesCurrentTenant ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label"
      }, t("ES_INBOX_LOCALITY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiSelectDropdown, {
        options: localitiesForEmployeesCurrentTenant ? localitiesForEmployeesCurrentTenant : [],
        optionsKey: "i18nkey",
        props: props,
        isPropsNeeded: true,
        onSelect: selectrole,
        selected: props === null || props === void 0 ? void 0 : props.value,
        defaultLabel: t("ES_BPA_ALL_SELECTED"),
        defaultUnit: t("BPA_SELECTED_TEXT"),
        ServerStyle: {
          overflowX: "hidden",
          width: "100%"
        }
      }), /*#__PURE__*/React__default.createElement("div", {
        className: "tag-container"
      }, renderRemovableTokens));
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationStatus",
    control: controlFilterForm,
    render: props => {
      function changeItemCheckStatus(value) {
        props.onChange(value);
      }
      const renderStatusCheckBoxess = React.useMemo(() => statuses === null || statuses === void 0 ? void 0 : statuses.map((status, index) => {
        var _props$value4;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
          onChange: e => {
            var _props$value3;
            return e.target.checked ? changeItemCheckStatus([...props.value, status === null || status === void 0 ? void 0 : status.statusid]) : changeItemCheckStatus((_props$value3 = props.value) === null || _props$value3 === void 0 ? void 0 : _props$value3.filter(ele => ele !== (status === null || status === void 0 ? void 0 : status.statusid)));
          },
          checked: (_props$value4 = props.value) === null || _props$value4 === void 0 ? void 0 : _props$value4.includes(status === null || status === void 0 ? void 0 : status.statusid),
          label: "" + t(status.applicationstatus + " (" + status.count + ")"),
          value: status.applicationStatus,
          key: index + 1
        });
      }), [props.value, statuses]);
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label"
      }, t("CS_INBOX_STATUS_FILTER")), isInboxLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, " ", renderStatusCheckBoxess));
    }
  })));
};

const useInboxTableConfig$1 = _ref => {
  var _formState$tableForm, _formState$tableForm2, _formState$tableForm7, _formState$searchForm;
  let {
    parentRoute,
    onPageSizeChange,
    formState,
    totalCount,
    table,
    dispatch,
    onSortingByData,
    inboxStyles = {},
    tableStyle = {}
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const GetCell = value => /*#__PURE__*/React__default.createElement("span", {
    className: "cell-text styled-cell"
  }, value);
  const GetStatusCell = value => {
    if (value === "Approved") {
      return /*#__PURE__*/React__default.createElement("span", {
        style: {
          color: "#00703C"
        }
      }, value);
    }
    if (value === "Rejected") {
      return /*#__PURE__*/React__default.createElement("span", {
        style: {
          color: "#0B0C0C"
        }
      }, value);
    }
    if (value === "Inworkflow") {
      return /*#__PURE__*/React__default.createElement("span", {
        style: {
          color: "#E50000"
        }
      }, value);
    }
  };
  const tableColumnConfig = React.useMemo(() => {
    return [{
      Header: t("WS_COMMON_TABLE_COL_SERVICE_LABEL"),
      disableSortBy: true,
      Cell: _ref2 => {
        var _row$original, _row$original$service;
        let {
          row
        } = _ref2;
        return GetCell(t("ACTION_TEST_" + (row !== null && row !== void 0 && (_row$original = row.original) !== null && _row$original !== void 0 && (_row$original$service = _row$original.service) !== null && _row$original$service !== void 0 && _row$original$service.includes("WS") ? "WATER" : "SEWERAGE")));
      }
    }, {
      Header: t("WS_MYCONNECTIONS_APPLICATION_NO"),
      disableSortBy: true,
      Cell: _ref3 => {
        var _row$original2;
        let {
          row
        } = _ref3;
        return /*#__PURE__*/React__default.createElement("div", {
          style: {
            display: "flex",
            flexDirection: "column"
          }
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber=" + row.original["applicationNo"]
        }, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, row.original["applicationNo"])), GetCell(t("BILLAMENDMENT_" + (row === null || row === void 0 ? void 0 : (_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2.amendmentReason) + "_HEADING")));
      }
    },, {
      Header: t("CORE_COMMON_NAME"),
      disableSortBy: true,
      accessor: "owner"
    }, {
      Header: t("WS_COMMON_TABLE_COL_ADDRESS"),
      disableSortBy: true,
      accessor: row => GetCell(t(Digit.Utils.locale.getRevenueLocalityCode(row.address, tenantId)))
    }, {
      Header: t("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),
      disableSortBy: true,
      accessor: row => GetStatusCell(t(row === null || row === void 0 ? void 0 : row.status))
    }, {
      Header: t("WS_COMMON_TABLE_COL_TASK_OWNER"),
      disableSortBy: true,
      accessor: "taskOwner"
    }];
  });
  return {
    getCellProps: cellInfo => {
      return {
        style: {
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    disableSort: false,
    autoSort: false,
    manualPagination: true,
    initSortId: "applicationDate",
    onPageSizeChange: onPageSizeChange,
    currentPage: ((_formState$tableForm = formState.tableForm) === null || _formState$tableForm === void 0 ? void 0 : _formState$tableForm.offset) / ((_formState$tableForm2 = formState.tableForm) === null || _formState$tableForm2 === void 0 ? void 0 : _formState$tableForm2.limit),
    onNextPage: () => {
      var _formState$tableForm3, _formState$tableForm4;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: parseInt((_formState$tableForm3 = formState.tableForm) === null || _formState$tableForm3 === void 0 ? void 0 : _formState$tableForm3.offset) + parseInt((_formState$tableForm4 = formState.tableForm) === null || _formState$tableForm4 === void 0 ? void 0 : _formState$tableForm4.limit)
        }
      });
    },
    onPrevPage: () => {
      var _formState$tableForm5, _formState$tableForm6;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: parseInt((_formState$tableForm5 = formState.tableForm) === null || _formState$tableForm5 === void 0 ? void 0 : _formState$tableForm5.offset) - parseInt((_formState$tableForm6 = formState.tableForm) === null || _formState$tableForm6 === void 0 ? void 0 : _formState$tableForm6.limit)
        }
      });
    },
    pageSizeLimit: (_formState$tableForm7 = formState.tableForm) === null || _formState$tableForm7 === void 0 ? void 0 : _formState$tableForm7.limit,
    onSort: onSortingByData,
    totalRecords: totalCount,
    onSearch: formState === null || formState === void 0 ? void 0 : (_formState$searchForm = formState.searchForm) === null || _formState$searchForm === void 0 ? void 0 : _formState$searchForm.message,
    onLastPage: () => {
      var _formState$tableForm8;
      return dispatch({
        action: "mutateTableForm",
        data: {
          ...formState.tableForm,
          offset: Math.ceil(totalCount / 10) * 10 - parseInt((_formState$tableForm8 = formState.tableForm) === null || _formState$tableForm8 === void 0 ? void 0 : _formState$tableForm8.limit)
        }
      });
    },
    onFirstPage: () => dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        offset: 0
      }
    }),
    data: table,
    columns: tableColumnConfig,
    inboxStyles: {
      ...inboxStyles
    },
    tableStyle: {
      ...tableStyle
    }
  };
};

const useInboxMobileCardsData$1 = _ref => {
  let {
    parentRoute,
    table
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const GetCell = value => /*#__PURE__*/React__default.createElement("span", {
    className: "cell-text styled-cell"
  }, value);
  const getApplicationNumberCell = (value, amendmentReason) => {
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        flexDirection: "column"
      }
    }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: "/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber=" + value
    }, /*#__PURE__*/React__default.createElement("span", {
      className: "link"
    }, value)), GetCell(t("BILLAMENDMENT_" + amendmentReason + "_HEADING")));
  };
  const dataForMobileInboxCards = table === null || table === void 0 ? void 0 : table.map(_ref2 => {
    let {
      applicationNo,
      address,
      status,
      owner,
      service,
      tenantId,
      amendmentReason,
      taskOwner
    } = _ref2;
    return {
      [t("WS_COMMON_TABLE_COL_SERVICE_LABEL")]: t("ACTION_TEST_" + service),
      [t("WS_MYCONNECTIONS_APPLICATION_NO")]: getApplicationNumberCell(applicationNo, amendmentReason),
      [t("CORE_COMMON_NAME")]: owner,
      [t("WS_COMMON_TABLE_COL_ADDRESS")]: t(Digit.Utils.locale.getRevenueLocalityCode(address, tenantId)),
      [t("WS_COMMON_TABLE_COL_APPLICATION_STATUS")]: t(status),
      [t("WS_COMMON_TABLE_COL_TASK_OWNER")]: taskOwner
    };
  });
  const MobileSortFormValues = () => {
    const sortOrderOptions = [{
      code: "DESC",
      i18nKey: "ES_COMMON_SORT_BY_DESC"
    }, {
      code: "ASC",
      i18nKey: "ES_COMMON_SORT_BY_ASC"
    }];
    const {
      control: controlSortForm
    } = reactHookForm.useFormContext();
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "sortOrder",
      control: controlSortForm,
      render: _ref3 => {
        let {
          onChange,
          value
        } = _ref3;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          onSelect: e => {
            onChange(e.code);
          },
          selectedOption: sortOrderOptions.filter(option => option.code === value)[0],
          optionsKey: "i18nKey",
          name: "sortOrder",
          options: sortOrderOptions
        });
      }
    }));
  };
  return {
    data: dataForMobileInboxCards,
    serviceRequestIdKey: t("NOC_APP_NO_LABEL"),
    MobileSortFormValues
  };
};

const Inbox = _ref => {
  let {
    parentRoute
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const checkPathName = window.location.href.includes("/ws/water/bill-amendment/inbox");
  const searchFormDefaultValues = {
    mobileNumber: "",
    applicationNumber: "",
    consumerCode: ""
  };
  const filterFormDefaultValues = {
    applicationStatus: [],
    businessService: checkPathName ? ["WS.AMENDMENT"] : ["SW.AMENDMENT"],
    moduleName: checkPathName ? "bsWs-service" : "bsSw-service",
    locality: [],
    assignee: "ASSIGNED_TO_ALL"
  };
  const tableOrderFormDefaultValues = {
    sortBy: "createdTime",
    limit: window.Digit.Utils.browser.isMobile() ? 50 : 10,
    offset: 0,
    sortOrder: "ASC"
  };
  sessionStorage.removeItem("Digit.BILL.AMENDMENT.INBOX");
  function formReducer(state, payload) {
    switch (payload.action) {
      case "mutateSearchForm":
        Digit.SessionStorage.set("BILL.AMENDMENT.INBOX", {
          ...state,
          searchForm: payload.data
        });
        return {
          ...state,
          searchForm: payload.data
        };
      case "mutateFilterForm":
        Digit.SessionStorage.set("BILL.AMENDMENT.INBOX", {
          ...state,
          filterForm: payload.data
        });
        return {
          ...state,
          filterForm: payload.data
        };
      case "mutateTableForm":
        Digit.SessionStorage.set("BILL.AMENDMENT.INBOX", {
          ...state,
          tableForm: payload.data
        });
        return {
          ...state,
          tableForm: payload.data
        };
    }
  }
  const InboxObjectInSessionStorage = Digit.SessionStorage.get("BILL.AMENDMENT.INBOX");
  const onSearchFormReset = setSearchFormValue => {
    setSearchFormValue("mobileNumber", null);
    setSearchFormValue("applicationNo", null);
    setSearchFormValue("consumerCode", null);
    dispatch({
      action: "mutateSearchForm",
      data: searchFormDefaultValues
    });
  };
  const onFilterFormReset = setFilterFormValue => {
    setFilterFormValue("moduleName", checkPathName ? "bsWs-service" : "bsSw-service");
    setFilterFormValue("locality", []);
    setFilterFormValue("assignee", "ASSIGNED_TO_ALL");
    setFilterFormValue("applicationStatus", []);
    dispatch({
      action: "mutateFilterForm",
      data: filterFormDefaultValues
    });
  };
  const onSortFormReset = setSortFormValue => {
    setSortFormValue("sortOrder", "DESC");
    dispatch({
      action: "mutateTableForm",
      data: tableOrderFormDefaultValues
    });
  };
  const formInitValue = React.useMemo(() => {
    return InboxObjectInSessionStorage || {
      filterForm: filterFormDefaultValues,
      searchForm: searchFormDefaultValues,
      tableForm: tableOrderFormDefaultValues
    };
  }, [Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.filterForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.searchForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.tableForm) || {})]);
  const [formState, dispatch] = React.useReducer(formReducer, formInitValue);
  const onPageSizeChange = e => {
    dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        limit: e.target.value
      }
    });
  };
  const onSortingByData = e => {
    if (e.length > 0) {
      const [{
        id,
        desc
      }] = e;
      const sortOrder = desc ? "DESC" : "ASC";
      const sortBy = id;
      if (!(formState.tableForm.sortBy === sortBy && formState.tableForm.sortOrder === sortOrder)) {
        dispatch({
          action: "mutateTableForm",
          data: {
            ...formState.tableForm,
            sortBy: id,
            sortOrder: desc ? "DESC" : "ASC"
          }
        });
      }
    }
  };
  const onMobileSortOrderData = data => {
    const {
      sortOrder
    } = data;
    dispatch({
      action: "mutateTableForm",
      data: {
        ...formState.tableForm,
        sortOrder
      }
    });
  };
  const {
    data: localitiesForEmployeesCurrentTenant,
    isLoading: loadingLocalitiesForEmployeesCurrentTenant
  } = Digit.Hooks.useBoundaryLocalities(tenantId, "revenue", {}, t);
  const {
    isLoading: isInboxLoading,
    data: {
      table,
      statuses,
      totalCount
    } = {}
  } = Digit.Hooks.useBillAmendmentInbox({
    tenantId,
    filters: {
      ...formState
    },
    config: {
      cacheTime: 0
    }
  });
  const {
    data: statusData,
    isLoading
  } = Digit.Hooks.useApplicationStatusGeneral({
    businessServices: ["WS.AMENDMENT", "SW.AMENDMENT"],
    tenantId
  }, {
    enabled: (statuses === null || statuses === void 0 ? void 0 : statuses.length) > 0
  });
  statuses === null || statuses === void 0 ? void 0 : statuses.map(status => {
    var _statusData$otherRole, _statusData$userRoleS;
    statusData === null || statusData === void 0 ? void 0 : (_statusData$otherRole = statusData.otherRoleStates) === null || _statusData$otherRole === void 0 ? void 0 : _statusData$otherRole.map(state => {
      if ((state === null || state === void 0 ? void 0 : state.uuid) === (status === null || status === void 0 ? void 0 : status.statusid)) {
        status["applicationstatus"] = t(state === null || state === void 0 ? void 0 : state.state);
      }
    });
    statusData === null || statusData === void 0 ? void 0 : (_statusData$userRoleS = statusData.userRoleStates) === null || _statusData$userRoleS === void 0 ? void 0 : _statusData$userRoleS.map(state => {
      if ((state === null || state === void 0 ? void 0 : state.uuid) === (status === null || status === void 0 ? void 0 : status.statusid)) {
        status["applicationstatus"] = t(state === null || state === void 0 ? void 0 : state.state);
      }
    });
  });
  const PropsForInboxLinks = {
    logoIcon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.CollectionIcon, null),
    headerText: "ACTION_TEST_BILLAMENDMENT",
    links: []
  };
  const SearchFormFields = React.useCallback(_ref2 => {
    let {
      registerRef,
      searchFormState
    } = _ref2;
    return /*#__PURE__*/React__default.createElement(SearchFormFieldsComponents$1, {
      registerRef,
      searchFormState,
      className: "search"
    });
  }, []);
  const FilterFormFields = React.useCallback(_ref3 => {
    let {
      registerRef,
      controlFilterForm,
      setFilterFormValue,
      getFilterFormValue
    } = _ref3;
    return /*#__PURE__*/React__default.createElement(FilterFormFieldsComponent$1, {
      statuses,
      isInboxLoading,
      registerRef,
      controlFilterForm,
      setFilterFormValue,
      filterFormState: formState === null || formState === void 0 ? void 0 : formState.filterForm,
      getFilterFormValue,
      localitiesForEmployeesCurrentTenant,
      loadingLocalitiesForEmployeesCurrentTenant
    });
  }, [statuses, isInboxLoading, localitiesForEmployeesCurrentTenant, loadingLocalitiesForEmployeesCurrentTenant, statusData]);
  const onSearchFormSubmit = data => {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: {
        ...tableOrderFormDefaultValues
      }
    });
    dispatch({
      action: "mutateSearchForm",
      data
    });
  };
  const onFilterFormSubmit = data => {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: {
        ...tableOrderFormDefaultValues
      }
    });
    dispatch({
      action: "mutateFilterForm",
      data
    });
  };
  const propsForSearchForm = {
    SearchFormFields,
    onSearchFormSubmit,
    searchFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.searchForm,
    resetSearchFormDefaultValues: searchFormDefaultValues,
    onSearchFormReset,
    className: "search-form-wns-inbox"
  };
  const propsForFilterForm = {
    FilterFormFields,
    onFilterFormSubmit,
    filterFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.filterForm,
    resetFilterFormDefaultValues: filterFormDefaultValues,
    onFilterFormReset
  };
  const propsForInboxTable = useInboxTableConfig$1({
    ...{
      parentRoute,
      onPageSizeChange,
      formState,
      totalCount,
      table,
      dispatch,
      onSortingByData,
      inboxStyles: {
        overflowX: "scroll",
        overflowY: "hidden"
      },
      tableStyle: {
        width: "70%"
      }
    }
  });
  const propsForInboxMobileCards = useInboxMobileCardsData$1({
    parentRoute,
    table
  });
  const propsForMobileSortForm = {
    onMobileSortOrderData,
    sortFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.tableForm,
    onSortFormReset
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_INBOX"), totalCount ? /*#__PURE__*/React__default.createElement("p", {
    className: "inbox-count"
  }, totalCount) : null), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InboxComposer, _extends({
    isInboxLoading,
    PropsForInboxLinks
  }, propsForSearchForm, propsForFilterForm, propsForMobileSortForm, {
    propsForInboxTable,
    propsForInboxMobileCards,
    formState
  })));
};

const newConfig = [{
  head: "",
  body: [{
    type: "component",
    route: "know-your-property",
    isMandatory: true,
    component: "CPTKnowYourProperty",
    texts: {
      header: "PT_DO_YOU_KNOW_YOUR_PROPERTY",
      submitBarLabel: "CS_COMMON_NEXT"
    },
    key: "knowyourproperty",
    withoutLabel: true,
    nextStep: {
      TL_COMMON_YES: "search-property",
      TL_COMMON_NO: "create-property"
    },
    hideInEmployee: true
  }, {
    type: "component",
    route: "search-property",
    isMandatory: true,
    component: "CPTSearchProperty",
    key: "cptsearchproperty",
    withoutLabel: true,
    nextStep: 'search-results',
    hideInEmployee: true
  }, {
    type: "component",
    route: "search-results",
    isMandatory: true,
    component: "CPTSearchResults",
    key: "cptsearchresults",
    withoutLabel: true,
    nextStep: 'docsrequired',
    hideInEmployee: true
  }, {
    type: "component",
    route: "create-property",
    isMandatory: true,
    component: "CPTCreateProperty",
    key: "cptcreateproperty",
    withoutLabel: true,
    nextStep: 'acknowledge-create-property',
    hideInEmployee: true
  }, {
    type: "component",
    route: "acknowledge-create-property",
    isMandatory: true,
    component: "CPTAcknowledgement",
    key: "cptacknowledgement",
    withoutLabel: true,
    nextStep: 'docsrequired',
    hideInEmployee: true
  }, {
    type: "component",
    route: "property-details",
    isMandatory: true,
    component: "CPTPropertyDetails",
    key: "propertydetails",
    withoutLabel: true,
    nextStep: 'connection-holder',
    hideInEmployee: true
  }]
}, {
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "docsrequired",
    component: "WSDocsRequired",
    key: "data",
    nextStep: "property-details"
  }, {
    route: "connection-holder",
    component: "WSConnectionHolder",
    key: "ConnectionHolderDetails",
    nextStep: "service-name",
    texts: {
      headerCaption: "WS_COMMON_CONNECTION_DETAIL",
      header: "WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",
      cardText: "WS_CONNECTION_HOLDER_TEXT",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "service-name",
    component: "WSServiceName",
    key: "serviceName",
    nextStep: "water-connection-details",
    WATER: "water-connection-details",
    SEWERAGE: "sewerage-connection-details",
    texts: {
      headerCaption: "WS_COMMON_CONNECTION_DETAIL",
      header: "WS_SERVICE_NAME",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "water-connection-details",
    component: "WSWaterConnectionDetails",
    key: "waterConectionDetails",
    nextStep: "sewerage-connection-details",
    WATER: "document-details",
    texts: {
      headerCaption: "WS_COMMON_CONNECTION_DETAIL",
      header: "WS_WATER_CONNECTION_DETAILS",
      cardText: "WS_PROVIDE_PROPOSED_NO_OF_TAPS_SELECT_PIPE_SIZE",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "sewerage-connection-details",
    component: "WSSewerageConnectionDetails",
    key: "sewerageConnectionDetails",
    nextStep: "document-details",
    SEWERAGE: "document-details",
    texts: {
      headerCaption: "WS_COMMON_CONNECTION_DETAIL",
      header: "PDF_STATIC_LABEL_SW_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",
      cardText: "WS_PROVIDE_NO_WATER_CLOSETS_TOILETS",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "document-details",
    component: "WSDocumentDetails",
    key: "documents",
    nextStep: null,
    texts: {
      headerCaption: "CE_DOCUMENT_DETAILS",
      header: "WS_DOCUMENT_DETAILS_HEADER",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }]
}, {
  head: "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",
  isCreate: true,
  hideInCitizen: true,
  body: [{
    head: "",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "InfoLabel",
      component: "WSInfoLabel",
      withoutLabel: true
    }]
  }, {
    head: "",
    isEditConnection: true,
    isCreateConnection: false,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "WSEditConnectionDetails",
      withoutLabel: true,
      key: "ConnectionDetails",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_PROPERTY_DETAILS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "CPTPropertySearchNSummary",
      withoutLabel: true,
      key: "cpt",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "ConnectionHolderDetails",
      component: "WSConnectionHolderDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_ACTIVATION_DETAILS",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "activationDetails",
      component: "WSActivationPageDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    subHead: "WS_CONNECTION_DETAILS_HEADER_SUB_TEXT_LABEL",
    isEditConnection: false,
    isCreateConnection: true,
    body: [{
      type: "component",
      key: "ConnectionDetails",
      component: "WSConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_PLUMBER_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "plumberDetails",
      component: "WSActivationPlumberDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_ROAD_CUTTING_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "roadCuttingDetails",
      component: "WSRoadCuttingDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_DOCS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "DocumentsRequired",
      component: "WSDocumentsEmployee",
      withoutLabel: true
    }]
  }]
}, {
  head: "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",
  isModify: true,
  hideInCitizen: true,
  body: [{
    head: "",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "InfoLabel",
      component: "WSInfoLabel",
      withoutLabel: true
    }]
  }, {
    head: "",
    isEditConnection: true,
    isCreateConnection: false,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "WSEditConnectionDetails",
      withoutLabel: true,
      key: "ConnectionDetails",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_PROPERTY_DETAILS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "CPTPropertySearchNSummary",
      withoutLabel: true,
      key: "cpt",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "ConnectionHolderDetails",
      component: "WSConnectionHolderDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_ACTIVATION_DETAILS",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "activationDetails",
      component: "WSActivationPageDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: true,
    body: [{
      type: "component",
      key: "ConnectionDetails",
      component: "WSConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_PLUMBER_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "plumberDetails",
      component: "WSActivationPlumberDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_ROAD_CUTTING_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "roadCuttingDetails",
      component: "WSRoadCuttingDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_DOCS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "DocumentsRequired",
      component: "WSDocumentsEmployee",
      withoutLabel: true
    }]
  }]
}, {
  head: "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",
  isEdit: true,
  hideInCitizen: true,
  body: [{
    head: "",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "InfoLabel",
      component: "WSInfoLabel",
      withoutLabel: true
    }]
  }, {
    head: "",
    isEditConnection: true,
    isCreateConnection: false,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "WSEditConnectionDetails",
      withoutLabel: true,
      key: "ConnectionDetails",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_PROPERTY_DETAILS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "CPTPropertySearchNSummary",
      withoutLabel: true,
      key: "cpt",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "ConnectionHolderDetails",
      component: "WSConnectionHolderDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_ACTIVATION_DETAILS",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "activationDetails",
      component: "WSActivationPageDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: true,
    body: [{
      type: "component",
      key: "ConnectionDetails",
      component: "WSConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_PLUMBER_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "plumberDetails",
      component: "WSActivationPlumberDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_ROAD_CUTTING_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "roadCuttingDetails",
      component: "WSRoadCuttingDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_DOCS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "DocumentsRequired",
      component: "WSDocumentsEmployee",
      withoutLabel: true
    }]
  }]
}, {
  head: "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",
  isEditByConfig: true,
  hideInCitizen: true,
  body: [{
    head: "",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "InfoLabel",
      component: "WSInfoLabel",
      withoutLabel: true
    }]
  }, {
    head: "",
    isEditConnection: true,
    isCreateConnection: false,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "WSEditConnectionDetails",
      withoutLabel: true,
      key: "ConnectionDetails",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_PROPERTY_DETAILS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      component: "CPTPropertySearchNSummary",
      withoutLabel: true,
      key: "cpt",
      type: "component",
      hideInCitizen: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "ConnectionHolderDetails",
      component: "WSConnectionHolderDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_ACTIVATION_DETAILS",
    isEditConnection: false,
    isCreateConnection: false,
    isModifyConnection: true,
    body: [{
      type: "component",
      key: "activationDetails",
      component: "WSActivationPageDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditConnection: false,
    isCreateConnection: true,
    body: [{
      type: "component",
      key: "ConnectionDetails",
      component: "WSConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_CONNECTION_DETAIL",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "connectionDetails",
      component: "WSActivationConnectionDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_PLUMBER_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "plumberDetails",
      component: "WSActivationPlumberDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_ROAD_CUTTING_DETAILS",
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "roadCuttingDetails",
      component: "WSRoadCuttingDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_DOCS",
    isEditConnection: true,
    isCreateConnection: true,
    isModifyConnection: true,
    isEditByConfigConnection: true,
    body: [{
      type: "component",
      key: "DocumentsRequired",
      component: "WSDocumentsEmployee",
      withoutLabel: true
    }]
  }]
}];

const getPath = (path, params) => {
  params && Object.keys(params).map(key => {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
const WSCreate = () => {
  var _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi, _newConfig, _newConfig2;
  const queryClient = reactQuery.useQueryClient();
  const {
    t
  } = reactI18next.useTranslation();
  const {
    path,
    url
  } = reactRouterDom.useRouteMatch();
  const {
    pathname,
    state
  } = reactRouterDom.useLocation();
  const match = reactRouterDom.useRouteMatch();
  const history = reactRouterDom.useHistory();
  const location = reactRouterDom.useLocation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [params, setParams, clearParams] = Digit.Hooks.useSessionStorage("WS_CREATE", state !== null && state !== void 0 && state.edcrNumber ? {
    data: {
      scrutinyNumber: {
        edcrNumber: state === null || state === void 0 ? void 0 : state.edcrNumber
      }
    }
  } : {});
  const CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('WSCheckPage');
  const Acknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('WSAcknowledgement');
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig$1
  } = Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(stateId, []);
  let isModifyEdit = window.location.href.includes("/modify-connection/") || window.location.href.includes("/edit-application/");
  const goNext = skipStep => {
    var _params$cptId, _params$cpt, _params$cpt$details, _params$cpt2, _params$cpt2$details;
    const currentPath = pathname.split("/").pop();
    let {
      nextStep
    } = config.find(routeObj => routeObj.route === currentPath);
    let routeObject = config.find(routeObj => routeObj.route === currentPath && routeObj);
    if (typeof nextStep == "object" && nextStep != null) {
      if (nextStep[sessionStorage.getItem("KnowProperty")] && (nextStep[sessionStorage.getItem("KnowProperty")] === "search-property" || nextStep[sessionStorage.getItem("KnowProperty")] === "create-property")) {
        nextStep = "" + nextStep[sessionStorage.getItem("KnowProperty")];
      }
    }
    if (routeObject[sessionStorage.getItem("serviceName")]) nextStep = routeObject[sessionStorage.getItem("serviceName")];
    if ((params !== null && params !== void 0 && (_params$cptId = params.cptId) !== null && _params$cptId !== void 0 && _params$cptId.id || params !== null && params !== void 0 && (_params$cpt = params.cpt) !== null && _params$cpt !== void 0 && (_params$cpt$details = _params$cpt.details) !== null && _params$cpt$details !== void 0 && _params$cpt$details.propertyId || isModifyEdit && params !== null && params !== void 0 && (_params$cpt2 = params.cpt) !== null && _params$cpt2 !== void 0 && (_params$cpt2$details = _params$cpt2.details) !== null && _params$cpt2$details !== void 0 && _params$cpt2$details.propertyId) && nextStep === "know-your-property") {
      nextStep = "property-details";
    }
    if (nextStep === "docsrequired" && sessionStorage.getItem("changePropertySelected") === "yes") {
      nextStep = "property-details";
    }
    let redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath(match.path, match.params) + "/" + nextStep);
  };
  if (params && Object.keys(params).length > 0 && window.location.href.includes("/citizen/ws/create-application/search-property")) {
    clearParams();
    queryClient.invalidateQueries("WS_CREATE");
  }
  const onSuccess = () => {
    queryClient.invalidateQueries("WS_CREATE");
  };
  const createApplication = function () {
    try {
      sessionStorage.setItem("isCreateEnabled", "true");
      history.push(getPath(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const handleSelect = (key, data, skipStep, isFromCreateApi) => {
    if (isFromCreateApi) setParams(data);else if (key === "") setParams({
      ...data
    });else setParams({
      ...params,
      ...{
        [key]: {
          ...params[key],
          ...data
        }
      }
    });
    goNext();
  };
  const handleSkip = () => {};
  let config = [];
  newConfig$1 = (_newConfig = newConfig$1) !== null && _newConfig !== void 0 && _newConfig.WSCreateConfig ? (_newConfig2 = newConfig$1) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.WSCreateConfig : newConfig;
  newConfig$1.forEach(obj => {
    config = config.concat(obj.body.filter(a => !a.hideInCitizen));
  });
  config.indexRoute = "search-property";
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map((routeObj, index) => {
    const {
      component,
      texts,
      inputs,
      key,
      isSkipEnabled
    } = routeObj;
    const Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts,
        inputs,
        key,
        isSkipEnabled
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params,
      userType: "citizen"
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(Acknowledgement, {
    data: params,
    onSuccess: onSuccess,
    clearParams: clearParams
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath(match.path, match.params) + "/" + config.indexRoute
  })));
};

const newConfig$1 = [{
  head: "NEW_DISCONNECTION",
  body: [{
    route: "docsrequired",
    component: "WSDisconnectionDocsRequired",
    key: "data",
    type: "component",
    withoutLabel: true,
    nextStep: "application-form"
  }, {
    route: "application-form",
    component: "WSDisconnectionForm",
    key: "WSDisconnectionForm",
    type: "component",
    withoutLabel: true,
    nextStep: "documents-upload"
  }, {
    route: "documents-upload",
    component: "WSDisconnectionDocumentsForm",
    key: "WSDisconnectionDocumentsForm",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    nextStep: "check",
    hideInEmployee: true
  }, {
    route: "check",
    component: "WSDisconnectionCheckPage",
    key: "WSDisconnectionCheckPage",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    nextStep: "disconnect-acknowledge",
    hideInEmployee: true
  }, {
    route: "disconnect-acknowledge",
    component: "WSDisconnectAcknowledgement",
    key: "WSDisconnectAcknowledgement",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    hideInEmployee: true
  }]
}, {
  head: "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",
  isEditByConfig: true,
  hideInCitizen: true,
  isDisonnectionEdit: true,
  isDisonnectionEditByConfig: true,
  body: [{
    head: "",
    isDisonnectionEdit: true,
    isDisonnectionEditByConfig: true,
    body: [{
      type: "component",
      key: "disConnectionDetails",
      component: "WSDisconnectionAppDetails",
      isDisonnectionEdit: true,
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_PLUMBER_DETAILS",
    isDisonnectionEditByConfig: true,
    body: [{
      type: "component",
      key: "plumberDetails",
      component: "WSActivationPlumberDetails",
      withoutLabel: true
    }]
  }, {
    head: "WS_COMMON_DOCS",
    isDisonnectionEdit: true,
    isDisonnectionEditByConfig: true,
    body: [{
      type: "component",
      key: "DocumentsRequired",
      component: "WSDocumentsEmployee",
      withoutLabel: true
    }]
  }]
}, {
  head: "RE_SUBMIT_DISCONNECTION_APPLICATION",
  body: [{
    route: "application-form",
    component: "WSDisconnectionForm",
    key: "WSDisconnectionForm",
    type: "component",
    withoutLabel: true,
    nextStep: "documents-upload"
  }, {
    route: "documents-upload",
    component: "WSDisconnectionDocumentsForm",
    key: "WSDisconnectionDocumentsForm",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    nextStep: "resubmit-check",
    hideInEmployee: true
  }, {
    route: "check",
    component: "WSReSubmitDisconnectionCheckPage",
    key: "WSReSubmitDisconnectionCheckPage",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    nextStep: "disconnect-acknowledge",
    hideInEmployee: true
  }, {
    route: "disconnect-acknowledge",
    component: "WSDisconnectAcknowledgement",
    key: "WSDisconnectAcknowledgement",
    type: "component",
    isMandatory: true,
    withoutLabel: true,
    hideInEmployee: true
  }]
}];

const getPath$1 = (path, params) => {
  params && Object.keys(params).map(key => {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
const WSDisconnection = () => {
  var _newConfig, _newConfig2, _newConfig$filter;
  const queryClient = reactQuery.useQueryClient();
  const {
    t
  } = reactI18next.useTranslation();
  const match = reactRouterDom.useRouteMatch();
  const stateId = Digit.ULBService.getStateId();
  let config = [];
  let {
    data: newConfig,
    isLoading: configLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(stateId, {});
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.WSDisconnectionConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.WSDisconnectionConfig : newConfig$1;
  newConfig = newConfig$1;
  (_newConfig$filter = newConfig.filter(e => e.head === "NEW_DISCONNECTION")) === null || _newConfig$filter === void 0 ? void 0 : _newConfig$filter.forEach(obj => {
    config = config.concat(obj.body.filter(a => !a.hideInCitizen));
  });
  config.indexRoute = "docsrequired";
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map((routeObj, index) => {
    const {
      component,
      texts,
      inputs,
      key,
      isSkipEnabled
    } = routeObj;
    const Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$1(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts,
        inputs,
        key,
        isSkipEnabled
      },
      t: t,
      userType: "citizen"
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$1(match.path, match.params) + "/" + config.indexRoute
  })));
};

const config = [{
  texts: {
    header: "WS_SEARCH_CONNECTION",
    submitBarLabel: "WS_SEARCH_LABEL",
    cardText: ""
  },
  inputs: [{
    label: "CORE_COMMON_MOBILE_NUMBER",
    type: "mobileNumber",
    name: "mobileNumber",
    error: "CORE_COMMON_PHONENO_INVALIDMSG"
  }, {
    label: "WS_PROP_DETAIL_CITY",
    name: "city",
    error: "WS_WRONG_CITY"
  }, {
    label: "WS_PROP_DETAIL_LOCALITY_LABEL",
    type: "any",
    name: "locality",
    error: "UC_INVALID_LOCALITY"
  }]
}];

var b = "function" === typeof Symbol && Symbol.for,
  c = b ? Symbol.for("react.element") : 60103,
  d = b ? Symbol.for("react.portal") : 60106,
  e = b ? Symbol.for("react.fragment") : 60107,
  f = b ? Symbol.for("react.strict_mode") : 60108,
  g = b ? Symbol.for("react.profiler") : 60114,
  h = b ? Symbol.for("react.provider") : 60109,
  k = b ? Symbol.for("react.context") : 60110,
  l = b ? Symbol.for("react.async_mode") : 60111,
  m = b ? Symbol.for("react.concurrent_mode") : 60111,
  n = b ? Symbol.for("react.forward_ref") : 60112,
  p = b ? Symbol.for("react.suspense") : 60113,
  q = b ? Symbol.for("react.suspense_list") : 60120,
  r = b ? Symbol.for("react.memo") : 60115,
  t = b ? Symbol.for("react.lazy") : 60116,
  v = b ? Symbol.for("react.block") : 60121,
  w = b ? Symbol.for("react.fundamental") : 60117,
  x = b ? Symbol.for("react.responder") : 60118,
  y = b ? Symbol.for("react.scope") : 60119;
function z(a) {
  if ("object" === typeof a && null !== a) {
    var u = a.$$typeof;
    switch (u) {
      case c:
        switch (a = a.type, a) {
          case l:
          case m:
          case e:
          case g:
          case f:
          case p:
            return a;
          default:
            switch (a = a && a.$$typeof, a) {
              case k:
              case n:
              case t:
              case r:
              case h:
                return a;
              default:
                return u;
            }
        }
      case d:
        return u;
    }
  }
}
function A(a) {
  return z(a) === m;
}
var AsyncMode = l;
var ConcurrentMode = m;
var ContextConsumer = k;
var ContextProvider = h;
var Element = c;
var ForwardRef = n;
var Fragment = e;
var Lazy = t;
var Memo = r;
var Portal = d;
var Profiler = g;
var StrictMode = f;
var Suspense = p;
var isAsyncMode = function (a) {
  return A(a) || z(a) === l;
};
var isConcurrentMode = A;
var isContextConsumer = function (a) {
  return z(a) === k;
};
var isContextProvider = function (a) {
  return z(a) === h;
};
var isElement = function (a) {
  return "object" === typeof a && null !== a && a.$$typeof === c;
};
var isForwardRef = function (a) {
  return z(a) === n;
};
var isFragment = function (a) {
  return z(a) === e;
};
var isLazy = function (a) {
  return z(a) === t;
};
var isMemo = function (a) {
  return z(a) === r;
};
var isPortal = function (a) {
  return z(a) === d;
};
var isProfiler = function (a) {
  return z(a) === g;
};
var isStrictMode = function (a) {
  return z(a) === f;
};
var isSuspense = function (a) {
  return z(a) === p;
};
var isValidElementType = function (a) {
  return "string" === typeof a || "function" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || "object" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);
};
var typeOf = z;
var reactIs_production_min = {
  AsyncMode: AsyncMode,
  ConcurrentMode: ConcurrentMode,
  ContextConsumer: ContextConsumer,
  ContextProvider: ContextProvider,
  Element: Element,
  ForwardRef: ForwardRef,
  Fragment: Fragment,
  Lazy: Lazy,
  Memo: Memo,
  Portal: Portal,
  Profiler: Profiler,
  StrictMode: StrictMode,
  Suspense: Suspense,
  isAsyncMode: isAsyncMode,
  isConcurrentMode: isConcurrentMode,
  isContextConsumer: isContextConsumer,
  isContextProvider: isContextProvider,
  isElement: isElement,
  isForwardRef: isForwardRef,
  isFragment: isFragment,
  isLazy: isLazy,
  isMemo: isMemo,
  isPortal: isPortal,
  isProfiler: isProfiler,
  isStrictMode: isStrictMode,
  isSuspense: isSuspense,
  isValidElementType: isValidElementType,
  typeOf: typeOf
};

var reactIs_development = createCommonjsModule(function (module, exports) {

  if (process.env.NODE_ENV !== "production") {
    (function () {
      var hasSymbol = typeof Symbol === 'function' && Symbol.for;
      var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;
      var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;
      var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;
      var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;
      var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;
      var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;
      var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace;
      var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;
      var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;
      var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;
      var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;
      var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;
      var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;
      var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;
      var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;
      var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;
      var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;
      var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;
      function isValidElementType(type) {
        return typeof type === 'string' || typeof type === 'function' || type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);
      }
      function typeOf(object) {
        if (typeof object === 'object' && object !== null) {
          var $$typeof = object.$$typeof;
          switch ($$typeof) {
            case REACT_ELEMENT_TYPE:
              var type = object.type;
              switch (type) {
                case REACT_ASYNC_MODE_TYPE:
                case REACT_CONCURRENT_MODE_TYPE:
                case REACT_FRAGMENT_TYPE:
                case REACT_PROFILER_TYPE:
                case REACT_STRICT_MODE_TYPE:
                case REACT_SUSPENSE_TYPE:
                  return type;
                default:
                  var $$typeofType = type && type.$$typeof;
                  switch ($$typeofType) {
                    case REACT_CONTEXT_TYPE:
                    case REACT_FORWARD_REF_TYPE:
                    case REACT_LAZY_TYPE:
                    case REACT_MEMO_TYPE:
                    case REACT_PROVIDER_TYPE:
                      return $$typeofType;
                    default:
                      return $$typeof;
                  }
              }
            case REACT_PORTAL_TYPE:
              return $$typeof;
          }
        }
        return undefined;
      }
      var AsyncMode = REACT_ASYNC_MODE_TYPE;
      var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;
      var ContextConsumer = REACT_CONTEXT_TYPE;
      var ContextProvider = REACT_PROVIDER_TYPE;
      var Element = REACT_ELEMENT_TYPE;
      var ForwardRef = REACT_FORWARD_REF_TYPE;
      var Fragment = REACT_FRAGMENT_TYPE;
      var Lazy = REACT_LAZY_TYPE;
      var Memo = REACT_MEMO_TYPE;
      var Portal = REACT_PORTAL_TYPE;
      var Profiler = REACT_PROFILER_TYPE;
      var StrictMode = REACT_STRICT_MODE_TYPE;
      var Suspense = REACT_SUSPENSE_TYPE;
      var hasWarnedAboutDeprecatedIsAsyncMode = false;
      function isAsyncMode(object) {
        {
          if (!hasWarnedAboutDeprecatedIsAsyncMode) {
            hasWarnedAboutDeprecatedIsAsyncMode = true;
            console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');
          }
        }
        return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;
      }
      function isConcurrentMode(object) {
        return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;
      }
      function isContextConsumer(object) {
        return typeOf(object) === REACT_CONTEXT_TYPE;
      }
      function isContextProvider(object) {
        return typeOf(object) === REACT_PROVIDER_TYPE;
      }
      function isElement(object) {
        return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;
      }
      function isForwardRef(object) {
        return typeOf(object) === REACT_FORWARD_REF_TYPE;
      }
      function isFragment(object) {
        return typeOf(object) === REACT_FRAGMENT_TYPE;
      }
      function isLazy(object) {
        return typeOf(object) === REACT_LAZY_TYPE;
      }
      function isMemo(object) {
        return typeOf(object) === REACT_MEMO_TYPE;
      }
      function isPortal(object) {
        return typeOf(object) === REACT_PORTAL_TYPE;
      }
      function isProfiler(object) {
        return typeOf(object) === REACT_PROFILER_TYPE;
      }
      function isStrictMode(object) {
        return typeOf(object) === REACT_STRICT_MODE_TYPE;
      }
      function isSuspense(object) {
        return typeOf(object) === REACT_SUSPENSE_TYPE;
      }
      exports.AsyncMode = AsyncMode;
      exports.ConcurrentMode = ConcurrentMode;
      exports.ContextConsumer = ContextConsumer;
      exports.ContextProvider = ContextProvider;
      exports.Element = Element;
      exports.ForwardRef = ForwardRef;
      exports.Fragment = Fragment;
      exports.Lazy = Lazy;
      exports.Memo = Memo;
      exports.Portal = Portal;
      exports.Profiler = Profiler;
      exports.StrictMode = StrictMode;
      exports.Suspense = Suspense;
      exports.isAsyncMode = isAsyncMode;
      exports.isConcurrentMode = isConcurrentMode;
      exports.isContextConsumer = isContextConsumer;
      exports.isContextProvider = isContextProvider;
      exports.isElement = isElement;
      exports.isForwardRef = isForwardRef;
      exports.isFragment = isFragment;
      exports.isLazy = isLazy;
      exports.isMemo = isMemo;
      exports.isPortal = isPortal;
      exports.isProfiler = isProfiler;
      exports.isStrictMode = isStrictMode;
      exports.isSuspense = isSuspense;
      exports.isValidElementType = isValidElementType;
      exports.typeOf = typeOf;
    })();
  }
});

var reactIs = createCommonjsModule(function (module) {

  if (process.env.NODE_ENV === 'production') {
    module.exports = reactIs_production_min;
  } else {
    module.exports = reactIs_development;
  }
});

var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty$a = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;
function toObject(val) {
  if (val === null || val === undefined) {
    throw new TypeError('Object.assign cannot be called with null or undefined');
  }
  return Object(val);
}
function shouldUseNative() {
  try {
    if (!Object.assign) {
      return false;
    }
    var test1 = new String('abc');
    test1[5] = 'de';
    if (Object.getOwnPropertyNames(test1)[0] === '5') {
      return false;
    }
    var test2 = {};
    for (var i = 0; i < 10; i++) {
      test2['_' + String.fromCharCode(i)] = i;
    }
    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
      return test2[n];
    });
    if (order2.join('') !== '0123456789') {
      return false;
    }
    var test3 = {};
    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
      test3[letter] = letter;
    });
    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {
      return false;
    }
    return true;
  } catch (err) {
    return false;
  }
}
var objectAssign = shouldUseNative() ? Object.assign : function (target, source) {
  var from;
  var to = toObject(target);
  var symbols;
  for (var s = 1; s < arguments.length; s++) {
    from = Object(arguments[s]);
    for (var key in from) {
      if (hasOwnProperty$a.call(from, key)) {
        to[key] = from[key];
      }
    }
    if (getOwnPropertySymbols) {
      symbols = getOwnPropertySymbols(from);
      for (var i = 0; i < symbols.length; i++) {
        if (propIsEnumerable.call(from, symbols[i])) {
          to[symbols[i]] = from[symbols[i]];
        }
      }
    }
  }
  return to;
};

var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';
var ReactPropTypesSecret_1 = ReactPropTypesSecret;

var has = Function.call.bind(Object.prototype.hasOwnProperty);

var printWarning = function () {};
if (process.env.NODE_ENV !== 'production') {
  var ReactPropTypesSecret$1 = ReactPropTypesSecret_1;
  var loggedTypeFailures = {};
  var has$1 = has;
  printWarning = function (text) {
    var message = 'Warning: ' + text;
    if (typeof console !== 'undefined') {
      console.error(message);
    }
    try {
      throw new Error(message);
    } catch (x) {}
  };
}
function checkPropTypes(typeSpecs, values, location, componentName, getStack) {
  if (process.env.NODE_ENV !== 'production') {
    for (var typeSpecName in typeSpecs) {
      if (has$1(typeSpecs, typeSpecName)) {
        var error;
        try {
          if (typeof typeSpecs[typeSpecName] !== 'function') {
            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');
            err.name = 'Invariant Violation';
            throw err;
          }
          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$1);
        } catch (ex) {
          error = ex;
        }
        if (error && !(error instanceof Error)) {
          printWarning((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');
        }
        if (error instanceof Error && !(error.message in loggedTypeFailures)) {
          loggedTypeFailures[error.message] = true;
          var stack = getStack ? getStack() : '';
          printWarning('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));
        }
      }
    }
  }
}
checkPropTypes.resetWarningCache = function () {
  if (process.env.NODE_ENV !== 'production') {
    loggedTypeFailures = {};
  }
};
var checkPropTypes_1 = checkPropTypes;

var printWarning$1 = function () {};
if (process.env.NODE_ENV !== 'production') {
  printWarning$1 = function (text) {
    var message = 'Warning: ' + text;
    if (typeof console !== 'undefined') {
      console.error(message);
    }
    try {
      throw new Error(message);
    } catch (x) {}
  };
}
function emptyFunctionThatReturnsNull() {
  return null;
}
var factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {
  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;
  var FAUX_ITERATOR_SYMBOL = '@@iterator';
  function getIteratorFn(maybeIterable) {
    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);
    if (typeof iteratorFn === 'function') {
      return iteratorFn;
    }
  }
  var ANONYMOUS = '<<anonymous>>';
  var ReactPropTypes = {
    array: createPrimitiveTypeChecker('array'),
    bigint: createPrimitiveTypeChecker('bigint'),
    bool: createPrimitiveTypeChecker('boolean'),
    func: createPrimitiveTypeChecker('function'),
    number: createPrimitiveTypeChecker('number'),
    object: createPrimitiveTypeChecker('object'),
    string: createPrimitiveTypeChecker('string'),
    symbol: createPrimitiveTypeChecker('symbol'),
    any: createAnyTypeChecker(),
    arrayOf: createArrayOfTypeChecker,
    element: createElementTypeChecker(),
    elementType: createElementTypeTypeChecker(),
    instanceOf: createInstanceTypeChecker,
    node: createNodeChecker(),
    objectOf: createObjectOfTypeChecker,
    oneOf: createEnumTypeChecker,
    oneOfType: createUnionTypeChecker,
    shape: createShapeTypeChecker,
    exact: createStrictShapeTypeChecker
  };
  function is(x, y) {
    if (x === y) {
      return x !== 0 || 1 / x === 1 / y;
    } else {
      return x !== x && y !== y;
    }
  }
  function PropTypeError(message, data) {
    this.message = message;
    this.data = data && typeof data === 'object' ? data : {};
    this.stack = '';
  }
  PropTypeError.prototype = Error.prototype;
  function createChainableTypeChecker(validate) {
    if (process.env.NODE_ENV !== 'production') {
      var manualPropTypeCallCache = {};
      var manualPropTypeWarningCount = 0;
    }
    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {
      componentName = componentName || ANONYMOUS;
      propFullName = propFullName || propName;
      if (secret !== ReactPropTypesSecret_1) {
        if (throwOnDirectAccess) {
          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');
          err.name = 'Invariant Violation';
          throw err;
        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {
          var cacheKey = componentName + ':' + propName;
          if (!manualPropTypeCallCache[cacheKey] && manualPropTypeWarningCount < 3) {
            printWarning$1('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');
            manualPropTypeCallCache[cacheKey] = true;
            manualPropTypeWarningCount++;
          }
        }
      }
      if (props[propName] == null) {
        if (isRequired) {
          if (props[propName] === null) {
            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));
          }
          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));
        }
        return null;
      } else {
        return validate(props, propName, componentName, location, propFullName);
      }
    }
    var chainedCheckType = checkType.bind(null, false);
    chainedCheckType.isRequired = checkType.bind(null, true);
    return chainedCheckType;
  }
  function createPrimitiveTypeChecker(expectedType) {
    function validate(props, propName, componentName, location, propFullName, secret) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== expectedType) {
        var preciseType = getPreciseType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {
          expectedType: expectedType
        });
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createAnyTypeChecker() {
    return createChainableTypeChecker(emptyFunctionThatReturnsNull);
  }
  function createArrayOfTypeChecker(typeChecker) {
    function validate(props, propName, componentName, location, propFullName) {
      if (typeof typeChecker !== 'function') {
        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');
      }
      var propValue = props[propName];
      if (!Array.isArray(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));
      }
      for (var i = 0; i < propValue.length; i++) {
        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret_1);
        if (error instanceof Error) {
          return error;
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createElementTypeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      if (!isValidElement(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createElementTypeTypeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      if (!reactIs.isValidElementType(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createInstanceTypeChecker(expectedClass) {
    function validate(props, propName, componentName, location, propFullName) {
      if (!(props[propName] instanceof expectedClass)) {
        var expectedClassName = expectedClass.name || ANONYMOUS;
        var actualClassName = getClassName(props[propName]);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createEnumTypeChecker(expectedValues) {
    if (!Array.isArray(expectedValues)) {
      if (process.env.NODE_ENV !== 'production') {
        if (arguments.length > 1) {
          printWarning$1('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');
        } else {
          printWarning$1('Invalid argument supplied to oneOf, expected an array.');
        }
      }
      return emptyFunctionThatReturnsNull;
    }
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      for (var i = 0; i < expectedValues.length; i++) {
        if (is(propValue, expectedValues[i])) {
          return null;
        }
      }
      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {
        var type = getPreciseType(value);
        if (type === 'symbol') {
          return String(value);
        }
        return value;
      });
      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));
    }
    return createChainableTypeChecker(validate);
  }
  function createObjectOfTypeChecker(typeChecker) {
    function validate(props, propName, componentName, location, propFullName) {
      if (typeof typeChecker !== 'function') {
        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');
      }
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));
      }
      for (var key in propValue) {
        if (has(propValue, key)) {
          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);
          if (error instanceof Error) {
            return error;
          }
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createUnionTypeChecker(arrayOfTypeCheckers) {
    if (!Array.isArray(arrayOfTypeCheckers)) {
      process.env.NODE_ENV !== 'production' ? printWarning$1('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;
      return emptyFunctionThatReturnsNull;
    }
    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
      var checker = arrayOfTypeCheckers[i];
      if (typeof checker !== 'function') {
        printWarning$1('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');
        return emptyFunctionThatReturnsNull;
      }
    }
    function validate(props, propName, componentName, location, propFullName) {
      var expectedTypes = [];
      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
        var checker = arrayOfTypeCheckers[i];
        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret_1);
        if (checkerResult == null) {
          return null;
        }
        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {
          expectedTypes.push(checkerResult.data.expectedType);
        }
      }
      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';
      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));
    }
    return createChainableTypeChecker(validate);
  }
  function createNodeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      if (!isNode(props[propName])) {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function invalidValidatorError(componentName, location, propFullName, key, type) {
    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');
  }
  function createShapeTypeChecker(shapeTypes) {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
      }
      for (var key in shapeTypes) {
        var checker = shapeTypes[key];
        if (typeof checker !== 'function') {
          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
        }
        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);
        if (error) {
          return error;
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function createStrictShapeTypeChecker(shapeTypes) {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
      }
      var allKeys = objectAssign({}, props[propName], shapeTypes);
      for (var key in allKeys) {
        var checker = shapeTypes[key];
        if (has(shapeTypes, key) && typeof checker !== 'function') {
          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
        }
        if (!checker) {
          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));
        }
        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);
        if (error) {
          return error;
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }
  function isNode(propValue) {
    switch (typeof propValue) {
      case 'number':
      case 'string':
      case 'undefined':
        return true;
      case 'boolean':
        return !propValue;
      case 'object':
        if (Array.isArray(propValue)) {
          return propValue.every(isNode);
        }
        if (propValue === null || isValidElement(propValue)) {
          return true;
        }
        var iteratorFn = getIteratorFn(propValue);
        if (iteratorFn) {
          var iterator = iteratorFn.call(propValue);
          var step;
          if (iteratorFn !== propValue.entries) {
            while (!(step = iterator.next()).done) {
              if (!isNode(step.value)) {
                return false;
              }
            }
          } else {
            while (!(step = iterator.next()).done) {
              var entry = step.value;
              if (entry) {
                if (!isNode(entry[1])) {
                  return false;
                }
              }
            }
          }
        } else {
          return false;
        }
        return true;
      default:
        return false;
    }
  }
  function isSymbol(propType, propValue) {
    if (propType === 'symbol') {
      return true;
    }
    if (!propValue) {
      return false;
    }
    if (propValue['@@toStringTag'] === 'Symbol') {
      return true;
    }
    if (typeof Symbol === 'function' && propValue instanceof Symbol) {
      return true;
    }
    return false;
  }
  function getPropType(propValue) {
    var propType = typeof propValue;
    if (Array.isArray(propValue)) {
      return 'array';
    }
    if (propValue instanceof RegExp) {
      return 'object';
    }
    if (isSymbol(propType, propValue)) {
      return 'symbol';
    }
    return propType;
  }
  function getPreciseType(propValue) {
    if (typeof propValue === 'undefined' || propValue === null) {
      return '' + propValue;
    }
    var propType = getPropType(propValue);
    if (propType === 'object') {
      if (propValue instanceof Date) {
        return 'date';
      } else if (propValue instanceof RegExp) {
        return 'regexp';
      }
    }
    return propType;
  }
  function getPostfixForTypeWarning(value) {
    var type = getPreciseType(value);
    switch (type) {
      case 'array':
      case 'object':
        return 'an ' + type;
      case 'boolean':
      case 'date':
      case 'regexp':
        return 'a ' + type;
      default:
        return type;
    }
  }
  function getClassName(propValue) {
    if (!propValue.constructor || !propValue.constructor.name) {
      return ANONYMOUS;
    }
    return propValue.constructor.name;
  }
  ReactPropTypes.checkPropTypes = checkPropTypes_1;
  ReactPropTypes.resetWarningCache = checkPropTypes_1.resetWarningCache;
  ReactPropTypes.PropTypes = ReactPropTypes;
  return ReactPropTypes;
};

function emptyFunction() {}
function emptyFunctionWithReset() {}
emptyFunctionWithReset.resetWarningCache = emptyFunction;
var factoryWithThrowingShims = function () {
  function shim(props, propName, componentName, location, propFullName, secret) {
    if (secret === ReactPropTypesSecret_1) {
      return;
    }
    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');
    err.name = 'Invariant Violation';
    throw err;
  }
  shim.isRequired = shim;
  function getShim() {
    return shim;
  }
  var ReactPropTypes = {
    array: shim,
    bigint: shim,
    bool: shim,
    func: shim,
    number: shim,
    object: shim,
    string: shim,
    symbol: shim,
    any: shim,
    arrayOf: getShim,
    element: shim,
    elementType: shim,
    instanceOf: getShim,
    node: shim,
    objectOf: getShim,
    oneOf: getShim,
    oneOfType: getShim,
    shape: getShim,
    exact: getShim,
    checkPropTypes: emptyFunctionWithReset,
    resetWarningCache: emptyFunction
  };
  ReactPropTypes.PropTypes = ReactPropTypes;
  return ReactPropTypes;
};

var propTypes = createCommonjsModule(function (module) {
  if (process.env.NODE_ENV !== 'production') {
    var ReactIs = reactIs;
    var throwOnDirectAccess = true;
    module.exports = factoryWithTypeCheckers(ReactIs.isElement, throwOnDirectAccess);
  } else {
    module.exports = factoryWithThrowingShims();
  }
});

const SearchConnection = _ref => {
  var _Digit$Hooks$ws$usews;
  let {
    config: propsConfig,
    formData
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  let validation = {};
  const history = reactRouterDom.useHistory();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const logginedUser = Digit.UserService.getUser();
  const [mobileNumber, setMobileNumber] = React.useState((formData === null || formData === void 0 ? void 0 : formData.mobileNumber) || "");
  const [consumerNumber, setconsumerNumber] = React.useState((formData === null || formData === void 0 ? void 0 : formData.consumerNumber) || "");
  const [oldconsumerNumber, setoldconsumerNumber] = React.useState((formData === null || formData === void 0 ? void 0 : formData.oldconsumerNumber) || "");
  const [doorNumber, setdoorNumber] = React.useState((formData === null || formData === void 0 ? void 0 : formData.doorNumber) || "");
  const [propertyId, setpropertyId] = React.useState((formData === null || formData === void 0 ? void 0 : formData.propertyId) || "");
  const [consumerName, setconsumerName] = React.useState((formData === null || formData === void 0 ? void 0 : formData.consumerName) || "");
  const [Servicecateogry, setServicecateogry] = React.useState((formData === null || formData === void 0 ? void 0 : formData.Servicecateogry) || "");
  const [city, setcity] = React.useState((formData === null || formData === void 0 ? void 0 : formData.city) || "");
  const [showToast, setShowToast] = React.useState(null);
  const [locality, setLocality] = React.useState((formData === null || formData === void 0 ? void 0 : formData.locality) || "");
  const [searchType, setSearchType] = React.useState((formData === null || formData === void 0 ? void 0 : formData.searchType) || {
    code: "CONSUMER_NUMBER",
    i18nKey: "WS_CONSUMER_NUMBER_SEARCH"
  });
  const allCities = (_Digit$Hooks$ws$usews = Digit.Hooks.ws.usewsTenants()) === null || _Digit$Hooks$ws$usews === void 0 ? void 0 : _Digit$Hooks$ws$usews.sort((a, b) => {
    var _a$i18nKey, _a$i18nKey$localeComp;
    return a === null || a === void 0 ? void 0 : (_a$i18nKey = a.i18nKey) === null || _a$i18nKey === void 0 ? void 0 : (_a$i18nKey$localeComp = _a$i18nKey.localeCompare) === null || _a$i18nKey$localeComp === void 0 ? void 0 : _a$i18nKey$localeComp.call(_a$i18nKey, b === null || b === void 0 ? void 0 : b.i18nKey);
  });
  const [mobileNumberError, setmobileNumberError] = React.useState(null);
  let filters = {};
  const {
    data: Menu,
    isLoading
  } = Digit.Hooks.mcollect.useMCollectMDMS(tenantId, "BillingService", "BusinessService");
  const {
    data: ptSearchConfig,
    isLoading: isValidationLoading
  } = Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(), "DIGIT-UI", "HelpText", {
    select: data => {
      var _data$DIGITUI, _data$DIGITUI$HelpTex, _data$DIGITUI$HelpTex2;
      return data === null || data === void 0 ? void 0 : (_data$DIGITUI = data["DIGIT-UI"]) === null || _data$DIGITUI === void 0 ? void 0 : (_data$DIGITUI$HelpTex = _data$DIGITUI["HelpText"]) === null || _data$DIGITUI$HelpTex === void 0 ? void 0 : (_data$DIGITUI$HelpTex2 = _data$DIGITUI$HelpTex[0]) === null || _data$DIGITUI$HelpTex2 === void 0 ? void 0 : _data$DIGITUI$HelpTex2.PT;
    }
  });
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const onConnectionSearch = function (data) {
    try {
      const _temp4 = function () {
        if (searchType.code === "CONSUMER_NUMBER") {
          if (!city.code) setShowToast({
            key: true,
            label: "WS_PLEASE_PROVIDE_CITY"
          });else if (!mobileNumber && !consumerNumber && !oldconsumerNumber && !propertyId) {
            setShowToast({
              key: true,
              label: "WS_HOME_SEARCH_CONN_RESULTS_DESC"
            });
          } else {
            history.push("/digit-ui/citizen/ws/search-results?mobileNumber=" + mobileNumber + "&consumerNumber=" + consumerNumber + "&oldconsumerNumber=" + oldconsumerNumber + "&propertyId=" + propertyId + "&tenantId=" + city.code + "&locality=" + undefined);
          }
        } else {
          const _temp3 = function () {
            if (!city.code) setShowToast({
              key: true,
              label: "WS_PLEASE_PROVIDE_CITY"
            });else {
              const _temp2 = function () {
                if (logginedUser == null && !locality) setShowToast({
                  key: true,
                  label: "WS_PLEASE_PROVIDE_LOCALITY"
                });else {
                  const _temp = function () {
                    if (!doorNumber && !consumerName) setShowToast({
                      key: true,
                      label: "WS_HOME_SEARCH_CONN_RESULTS_DESC"
                    });else {
                      if (locality !== "undefined") filters.locality = locality === null || locality === void 0 ? void 0 : locality.code;
                      if (doorNumber) filters.doorNo = doorNumber;
                      if (consumerName) filters.ownerName = consumerName;
                      filters = {
                        ...filters,
                        searchType: "CONNECTION"
                      };
                      return Promise.resolve(Digit.WSService.search({
                        tenantId: city === null || city === void 0 ? void 0 : city.code,
                        filters: {
                          ...filters
                        },
                        businessService: "WS"
                      })).then(function (response) {
                        return Promise.resolve(Digit.WSService.search({
                          tenantId: city === null || city === void 0 ? void 0 : city.code,
                          filters: {
                            ...filters
                          },
                          businessService: "SW"
                        })).then(function (SWresponse) {
                          let totalResponse = (response === null || response === void 0 ? void 0 : response.TotalCount) + (SWresponse === null || SWresponse === void 0 ? void 0 : SWresponse.TotalCount);
                          if (ptSearchConfig !== null && ptSearchConfig !== void 0 && ptSearchConfig.maxResultValidation && totalResponse > (ptSearchConfig === null || ptSearchConfig === void 0 ? void 0 : ptSearchConfig.maxPropertyResult)) setShowToast({
                            key: true,
                            label: "Refine your search"
                          });else history.push("/digit-ui/citizen/ws/search-results?doorNumber=" + doorNumber + "&consumerName=" + consumerName + "&tenantId=" + city.code + "&locality=" + locality.code);
                        });
                      });
                    }
                  }();
                  if (_temp && _temp.then) return _temp.then(function () {});
                }
              }();
              if (_temp2 && _temp2.then) return _temp2.then(function () {});
            }
          }();
          if (_temp3 && _temp3.then) return _temp3.then(function () {});
        }
      }();
      return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  let SearchTypes = [{
    code: "CONSUMER_NUMBER",
    i18nKey: "WS_CONSUMER_NUMBER_SEARCH"
  }, {
    code: "CONNECTION_DETAILS",
    i18nKey: "WS_CONNECTION_DETAILS_SEARCH"
  }];
  function setMobileNo(e) {
    setmobileNumberError(null);
    let validation = "^\\d{10}$";
    if (!e.target.value.match(validation)) {
      setmobileNumberError("CORE_COMMON_PHONENO_INVALIDMSG");
    }
    setMobileNumber(e.target.value);
  }
  function selectconsumerNumber(e) {
    setconsumerNumber(e.target.value);
  }
  function selectoldconsumerNumber(e) {
    setoldconsumerNumber(e.target.value);
  }
  function selectdoorNumber(e) {
    setdoorNumber(e.target.value);
  }
  function selectpropertyId(e) {
    setpropertyId(e.target.value);
  }
  function selectconsumerName(e) {
    setconsumerName(e.target.value);
  }
  function selectCity(value) {
    setcity(value);
    setLocality("");
  }
  function selectLocality(value) {
    setLocality(value);
  }
  function selectSearchType(value) {
    setSearchType(value);
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: propsConfig,
    label: propsConfig.texts.submitButtonLabel,
    heading: propsConfig.texts.header,
    text: propsConfig.texts.text,
    cardStyle: {
      margin: "auto",
      maxWidth: "960px"
    },
    headingStyle: {
      fontSize: "32px",
      marginBottom: "16px"
    },
    onSelect: onConnectionSearch,
    componentInFront: /*#__PURE__*/React__default.createElement("div", {
      className: "employee-card-input employee-card-input--front"
    }, "+91"),
    isDisabled: false,
    forcedError: t(mobileNumberError),
    t: t
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, _extends({
    className: "form-field",
    isMandatory: true,
    t: t,
    optionKey: "code",
    name: "SearchType",
    options: SearchTypes,
    value: searchType,
    selectedOption: searchType,
    onSelect: selectSearchType
  }, validation = {
    isRequired: true,
    title: t("WS_SEARCH_TYPE_MANDATORY")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_PROP_DETAIL_CITY") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, _extends({
    className: "form-field",
    isMandatory: true,
    t: t,
    optionKey: "code",
    name: "City",
    options: allCities,
    value: city,
    selectedOption: city,
    onSelect: selectCity
  }, validation = {
    isRequired: true,
    title: t("UC_CITY_MANDATORY")
  })), city && searchType && (searchType === null || searchType === void 0 ? void 0 : searchType.code) == "CONNECTION_DETAILS" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_PROP_DETAIL_LOCALITY_LABEL") + "*"), city && searchType && (searchType === null || searchType === void 0 ? void 0 : searchType.code) == "CONNECTION_DETAILS" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Localities, {
    selectLocality: selectLocality,
    tenantId: city === null || city === void 0 ? void 0 : city.code,
    boundaryType: "revenue",
    keepNull: false,
    optionCardStyles: {
      height: "600px",
      overflow: "auto",
      zIndex: "10"
    },
    selected: locality,
    disableLoader: false
  }), searchType && (searchType === null || searchType === void 0 ? void 0 : searchType.code) == "CONSUMER_NUMBER" && /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "solid",
      borderRadius: "5px",
      padding: "10px",
      paddingTop: "20px",
      marginTop: "10px",
      borderColor: "#f3f3f3",
      background: "#FAFAFA",
      marginBottom: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_SEARCH_TEXT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_CONSUMER_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    className: "field-container"
  }, /*#__PURE__*/React__default.createElement("span", {
    className: "employee-card-input employee-card-input--front",
    style: {
      marginTop: "-1px"
    }
  }, "+91"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    type: "mobileNumber",
    style: {
      background: "#FAFAFA",
      maxWidth: "500px"
    },
    t: t,
    isMandatory: false,
    optionKey: "i18nKey",
    name: "mobileNumber",
    value: mobileNumber,
    onChange: setMobileNo
  }, validation = {
    isRequired: false,
    pattern: "[6-9]{1}[0-9]{9}",
    type: "tel",
    title: t("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      textAlign: "center",
      color: "#505A5F"
    }
  }, "" + t("(or)")), /*#__PURE__*/React__default.createElement("div", {
    className: "tooltip"
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      gap: "0 4px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_MYCONNECTIONS_CONSUMER_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoBannerIcon, {
    fill: "#0b0c0c"
  }), /*#__PURE__*/React__default.createElement("span", {
    className: "tooltiptext",
    style: {
      position: "absolute",
      width: "70%",
      marginLeft: "50%",
      fontSize: "medium"
    }
  }, t("WS_CONSUMER_NO_DESCRIPTION") + " " + t("WS_CONSUMER_NO_FORMAT")))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "any",
    isMandatory: false,
    style: {
      background: "#FAFAFA"
    },
    name: "consumerNumber",
    value: consumerNumber,
    onChange: selectconsumerNumber
  }, validation = {
    isRequired: false,
    pattern: "[A-Za-z]{2}\/[0-9]{3,4}\/[0-9]{4}\-[0-9]{2}\/[0-9]{6}",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      textAlign: "center",
      color: "#505A5F"
    }
  }, "" + t("(or)")), /*#__PURE__*/React__default.createElement("div", {
    className: "tooltip"
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      gap: "0 4px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_SEARCH_CONNNECTION_OLD_CONSUMER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoBannerIcon, {
    fill: "#0b0c0c"
  }), /*#__PURE__*/React__default.createElement("span", {
    className: "tooltiptext",
    style: {
      position: "absolute",
      width: "55%",
      marginLeft: "50%",
      fontSize: "medium"
    }
  }, t("WS_CONSUMER_NO_DESCRIPTION") + " " + t("WS_CONSUMER_NO_FORMAT")))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "any",
    isMandatory: false,
    style: {
      background: "#FAFAFA"
    },
    name: "oldconsumerNumber",
    value: oldconsumerNumber,
    onChange: selectoldconsumerNumber
  }, validation = {
    isRequired: false,
    pattern: "[A-Za-z]{2}\/[0-9]{3}\/[0-9]{4}\-[0-9]{2}\/[0-9]{6}",
    type: "text",
    title: t("ERR_INVALID_CONSUMER_NO")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      textAlign: "center",
      color: "#505A5F"
    }
  }, "" + t("(or)")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_PROPERTY_ID_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "any",
    isMandatory: false,
    style: {
      background: "#FAFAFA"
    },
    name: "propertyId",
    value: propertyId,
    onChange: selectpropertyId
  }, validation = {
    isRequired: false,
    pattern: "[A-Za-z]{2}\-[A-Za-z]{2}\-[0-9]{4}\-[0-9]{2}\-[0-9]{2}\-[0-9]{6}",
    type: "text",
    title: t("ERR_INVALID_PROPERTY_ID")
  }))), searchType && (searchType === null || searchType === void 0 ? void 0 : searchType.code) == "CONNECTION_DETAILS" && /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "solid",
      borderRadius: "5px",
      padding: "10px",
      paddingTop: "20px",
      marginTop: "10px",
      borderColor: "#f3f3f3",
      background: "#FAFAFA",
      marginBottom: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_SEARCH_TEXT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_DOOR_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "any",
    isMandatory: false,
    style: {
      background: "#FAFAFA"
    },
    name: "doorNumber",
    value: doorNumber,
    onChange: selectdoorNumber
  }, validation = {
    isRequired: false,
    pattern: "^([1-9][0-9]*)$",
    type: "text",
    title: t("ERR_INVALID_DOOR_NO")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("WS_CONSUMER_NAME_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    t: t,
    type: "any",
    isMandatory: false,
    style: {
      background: "#FAFAFA"
    },
    name: "consumerName",
    value: consumerName,
    onChange: selectconsumerName
  }))), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    isDleteBtn: true,
    error: showToast.key,
    label: t(showToast.label),
    onClose: () => {
      setShowToast(null);
    }
  }));
};
SearchConnection.propTypes = {
  loginParams: propTypes.any
};
SearchConnection.defaultProps = {
  loginParams: null
};

const SearchConnection$1 = () => {
  const {
    t
  } = reactI18next.useTranslation();
  const {
    path
  } = reactRouterDom.useRouteMatch();
  const params = React.useMemo(() => config.map(step => {
    const texts = {};
    for (const key in step.texts) {
      texts[key] = t(step.texts[key]);
    }
    return {
      ...step,
      texts
    };
  }, [config]));
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: "" + path,
    exact: true
  }, /*#__PURE__*/React__default.createElement(SearchConnection, {
    config: params[0]
  })));
};

const config$1 = [{
  texts: {
    header: "CS_SEARCH_RESULTS",
    actionButtonLabel: "WS_VIEW_DETAILS_AND_PAY"
  },
  labels: [{
    label: "WS_COMMON_TABLE_COL_AMT_DUE_LABEL",
    key: "AmountDue",
    noteStyle: {
      fontSize: "24px",
      fontWeight: "bold"
    },
    notePrefix: "₹ "
  }, {
    label: "WS_MYCONNECTIONS_CONSUMER_NO",
    key: "ConsumerNumber"
  }, {
    label: "WS_CONSUMER_NAME_LABEL",
    key: "ConsumerName"
  }, {
    label: "WS_MYCONNECTION_ADDRESS",
    key: "Address"
  }, {
    label: "WS_VIEW_BILL_DUE_DATE_LABEL",
    key: "DueDate"
  }]
}];

var bind = function bind(fn, thisArg) {
  return function wrap() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};

var toString = Object.prototype.toString;
function isArray$1(val) {
  return toString.call(val) === '[object Array]';
}
function isUndefined(val) {
  return typeof val === 'undefined';
}
function isBuffer(val) {
  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);
}
function isArrayBuffer(val) {
  return toString.call(val) === '[object ArrayBuffer]';
}
function isFormData(val) {
  return typeof FormData !== 'undefined' && val instanceof FormData;
}
function isArrayBufferView(val) {
  var result;
  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && val.buffer instanceof ArrayBuffer;
  }
  return result;
}
function isString(val) {
  return typeof val === 'string';
}
function isNumber(val) {
  return typeof val === 'number';
}
function isObject$1(val) {
  return val !== null && typeof val === 'object';
}
function isPlainObject(val) {
  if (toString.call(val) !== '[object Object]') {
    return false;
  }
  var prototype = Object.getPrototypeOf(val);
  return prototype === null || prototype === Object.prototype;
}
function isDate$1(val) {
  return toString.call(val) === '[object Date]';
}
function isFile(val) {
  return toString.call(val) === '[object File]';
}
function isBlob(val) {
  return toString.call(val) === '[object Blob]';
}
function isFunction$1(val) {
  return toString.call(val) === '[object Function]';
}
function isStream(val) {
  return isObject$1(val) && isFunction$1(val.pipe);
}
function isURLSearchParams(val) {
  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;
}
function trim(str) {
  return str.replace(/^\s*/, '').replace(/\s*$/, '');
}
function isStandardBrowserEnv() {
  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' || navigator.product === 'NativeScript' || navigator.product === 'NS')) {
    return false;
  }
  return typeof window !== 'undefined' && typeof document !== 'undefined';
}
function forEach(obj, fn) {
  if (obj === null || typeof obj === 'undefined') {
    return;
  }
  if (typeof obj !== 'object') {
    obj = [obj];
  }
  if (isArray$1(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}
function merge() {
  var result = {};
  function assignValue(val, key) {
    if (isPlainObject(result[key]) && isPlainObject(val)) {
      result[key] = merge(result[key], val);
    } else if (isPlainObject(val)) {
      result[key] = merge({}, val);
    } else if (isArray$1(val)) {
      result[key] = val.slice();
    } else {
      result[key] = val;
    }
  }
  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}
function extend(a, b, thisArg) {
  forEach(b, function assignValue(val, key) {
    if (thisArg && typeof val === 'function') {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}
function stripBOM(content) {
  if (content.charCodeAt(0) === 0xFEFF) {
    content = content.slice(1);
  }
  return content;
}
var utils = {
  isArray: isArray$1,
  isArrayBuffer: isArrayBuffer,
  isBuffer: isBuffer,
  isFormData: isFormData,
  isArrayBufferView: isArrayBufferView,
  isString: isString,
  isNumber: isNumber,
  isObject: isObject$1,
  isPlainObject: isPlainObject,
  isUndefined: isUndefined,
  isDate: isDate$1,
  isFile: isFile,
  isBlob: isBlob,
  isFunction: isFunction$1,
  isStream: isStream,
  isURLSearchParams: isURLSearchParams,
  isStandardBrowserEnv: isStandardBrowserEnv,
  forEach: forEach,
  merge: merge,
  extend: extend,
  trim: trim,
  stripBOM: stripBOM
};

function encode(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, '+').replace(/%5B/gi, '[').replace(/%5D/gi, ']');
}
var buildURL = function buildURL(url, params, paramsSerializer) {
  if (!params) {
    return url;
  }
  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];
    utils.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === 'undefined') {
        return;
      }
      if (utils.isArray(val)) {
        key = key + '[]';
      } else {
        val = [val];
      }
      utils.forEach(val, function parseValue(v) {
        if (utils.isDate(v)) {
          v = v.toISOString();
        } else if (utils.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode(key) + '=' + encode(v));
      });
    });
    serializedParams = parts.join('&');
  }
  if (serializedParams) {
    var hashmarkIndex = url.indexOf('#');
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
  }
  return url;
};

function InterceptorManager() {
  this.handlers = [];
}
InterceptorManager.prototype.use = function use(fulfilled, rejected) {
  this.handlers.push({
    fulfilled: fulfilled,
    rejected: rejected
  });
  return this.handlers.length - 1;
};
InterceptorManager.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};
InterceptorManager.prototype.forEach = function forEach(fn) {
  utils.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};
var InterceptorManager_1 = InterceptorManager;

var transformData = function transformData(data, headers, fns) {
  utils.forEach(fns, function transform(fn) {
    data = fn(data, headers);
  });
  return data;
};

var isCancel = function isCancel(value) {
  return !!(value && value.__CANCEL__);
};

var normalizeHeaderName = function normalizeHeaderName(headers, normalizedName) {
  utils.forEach(headers, function processHeader(value, name) {
    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name];
    }
  });
};

var enhanceError = function enhanceError(error, config, code, request, response) {
  error.config = config;
  if (code) {
    error.code = code;
  }
  error.request = request;
  error.response = response;
  error.isAxiosError = true;
  error.toJSON = function toJSON() {
    return {
      message: this.message,
      name: this.name,
      description: this.description,
      number: this.number,
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      config: this.config,
      code: this.code
    };
  };
  return error;
};

var createError = function createError(message, config, code, request, response) {
  var error = new Error(message);
  return enhanceError(error, config, code, request, response);
};

var settle = function settle(resolve, reject, response) {
  var validateStatus = response.config.validateStatus;
  if (!response.status || !validateStatus || validateStatus(response.status)) {
    resolve(response);
  } else {
    reject(createError('Request failed with status code ' + response.status, response.config, null, response.request, response));
  }
};

var cookies = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
  return {
    write: function write(name, value, expires, path, domain, secure) {
      var cookie = [];
      cookie.push(name + '=' + encodeURIComponent(value));
      if (utils.isNumber(expires)) {
        cookie.push('expires=' + new Date(expires).toGMTString());
      }
      if (utils.isString(path)) {
        cookie.push('path=' + path);
      }
      if (utils.isString(domain)) {
        cookie.push('domain=' + domain);
      }
      if (secure === true) {
        cookie.push('secure');
      }
      document.cookie = cookie.join('; ');
    },
    read: function read(name) {
      var match = document.cookie.match(new RegExp('(^|;\\s*)(' + name + ')=([^;]*)'));
      return match ? decodeURIComponent(match[3]) : null;
    },
    remove: function remove(name) {
      this.write(name, '', Date.now() - 86400000);
    }
  };
}() : function nonStandardBrowserEnv() {
  return {
    write: function write() {},
    read: function read() {
      return null;
    },
    remove: function remove() {}
  };
}();

var isAbsoluteURL = function isAbsoluteURL(url) {
  return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
};

var combineURLs = function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '') : baseURL;
};

var buildFullPath = function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
};

var ignoreDuplicateOf = ['age', 'authorization', 'content-length', 'content-type', 'etag', 'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since', 'last-modified', 'location', 'max-forwards', 'proxy-authorization', 'referer', 'retry-after', 'user-agent'];
var parseHeaders = function parseHeaders(headers) {
  var parsed = {};
  var key;
  var val;
  var i;
  if (!headers) {
    return parsed;
  }
  utils.forEach(headers.split('\n'), function parser(line) {
    i = line.indexOf(':');
    key = utils.trim(line.substr(0, i)).toLowerCase();
    val = utils.trim(line.substr(i + 1));
    if (key) {
      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
        return;
      }
      if (key === 'set-cookie') {
        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
      } else {
        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;
      }
    }
  });
  return parsed;
};

var isURLSameOrigin = utils.isStandardBrowserEnv() ? function standardBrowserEnv() {
  var msie = /(msie|trident)/i.test(navigator.userAgent);
  var urlParsingNode = document.createElement('a');
  var originURL;
  function resolveURL(url) {
    var href = url;
    if (msie) {
      urlParsingNode.setAttribute('href', href);
      href = urlParsingNode.href;
    }
    urlParsingNode.setAttribute('href', href);
    return {
      href: urlParsingNode.href,
      protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',
      host: urlParsingNode.host,
      search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, '') : '',
      hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',
      hostname: urlParsingNode.hostname,
      port: urlParsingNode.port,
      pathname: urlParsingNode.pathname.charAt(0) === '/' ? urlParsingNode.pathname : '/' + urlParsingNode.pathname
    };
  }
  originURL = resolveURL(window.location.href);
  return function isURLSameOrigin(requestURL) {
    var parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
    return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
  };
}() : function nonStandardBrowserEnv() {
  return function isURLSameOrigin() {
    return true;
  };
}();

var xhr = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    var requestData = config.data;
    var requestHeaders = config.headers;
    if (utils.isFormData(requestData)) {
      delete requestHeaders['Content-Type'];
    }
    var request = new XMLHttpRequest();
    if (config.auth) {
      var username = config.auth.username || '';
      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';
      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);
    }
    var fullPath = buildFullPath(config.baseURL, config.url);
    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);
    request.timeout = config.timeout;
    request.onreadystatechange = function handleLoad() {
      if (!request || request.readyState !== 4) {
        return;
      }
      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {
        return;
      }
      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;
      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;
      var response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config: config,
        request: request
      };
      settle(resolve, reject, response);
      request = null;
    };
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(createError('Request aborted', config, 'ECONNABORTED', request));
      request = null;
    };
    request.onerror = function handleError() {
      reject(createError('Network Error', config, null, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';
      if (config.timeoutErrorMessage) {
        timeoutErrorMessage = config.timeoutErrorMessage;
      }
      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED', request));
      request = null;
    };
    if (utils.isStandardBrowserEnv()) {
      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ? cookies.read(config.xsrfCookieName) : undefined;
      if (xsrfValue) {
        requestHeaders[config.xsrfHeaderName] = xsrfValue;
      }
    }
    if ('setRequestHeader' in request) {
      utils.forEach(requestHeaders, function setRequestHeader(val, key) {
        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {
          delete requestHeaders[key];
        } else {
          request.setRequestHeader(key, val);
        }
      });
    }
    if (!utils.isUndefined(config.withCredentials)) {
      request.withCredentials = !!config.withCredentials;
    }
    if (config.responseType) {
      try {
        request.responseType = config.responseType;
      } catch (e) {
        if (config.responseType !== 'json') {
          throw e;
        }
      }
    }
    if (typeof config.onDownloadProgress === 'function') {
      request.addEventListener('progress', config.onDownloadProgress);
    }
    if (typeof config.onUploadProgress === 'function' && request.upload) {
      request.upload.addEventListener('progress', config.onUploadProgress);
    }
    if (config.cancelToken) {
      config.cancelToken.promise.then(function onCanceled(cancel) {
        if (!request) {
          return;
        }
        request.abort();
        reject(cancel);
        request = null;
      });
    }
    if (!requestData) {
      requestData = null;
    }
    request.send(requestData);
  });
};

var DEFAULT_CONTENT_TYPE = {
  'Content-Type': 'application/x-www-form-urlencoded'
};
function setContentTypeIfUnset(headers, value) {
  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {
    headers['Content-Type'] = value;
  }
}
function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== 'undefined') {
    adapter = xhr;
  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    adapter = xhr;
  }
  return adapter;
}
var defaults = {
  adapter: getDefaultAdapter(),
  transformRequest: [function transformRequest(data, headers) {
    normalizeHeaderName(headers, 'Accept');
    normalizeHeaderName(headers, 'Content-Type');
    if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');
      return data.toString();
    }
    if (utils.isObject(data)) {
      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');
      return JSON.stringify(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    if (typeof data === 'string') {
      try {
        data = JSON.parse(data);
      } catch (e) {}
    }
    return data;
  }],
  timeout: 0,
  xsrfCookieName: 'XSRF-TOKEN',
  xsrfHeaderName: 'X-XSRF-TOKEN',
  maxContentLength: -1,
  maxBodyLength: -1,
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  }
};
defaults.headers = {
  common: {
    'Accept': 'application/json, text/plain, */*'
  }
};
utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});
utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});
var defaults_1 = defaults;

function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
}
var dispatchRequest = function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = config.headers || {};
  config.data = transformData(config.data, config.headers, config.transformRequest);
  config.headers = utils.merge(config.headers.common || {}, config.headers[config.method] || {}, config.headers);
  utils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch', 'common'], function cleanHeaderConfig(method) {
    delete config.headers[method];
  });
  var adapter = config.adapter || defaults_1.adapter;
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData(response.data, response.headers, config.transformResponse);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData(reason.response.data, reason.response.headers, config.transformResponse);
      }
    }
    return Promise.reject(reason);
  });
};

var mergeConfig = function mergeConfig(config1, config2) {
  config2 = config2 || {};
  var config = {};
  var valueFromConfig2Keys = ['url', 'method', 'data'];
  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];
  var defaultToConfig2Keys = ['baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer', 'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName', 'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress', 'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent', 'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'];
  var directMergeKeys = ['validateStatus'];
  function getMergedValue(target, source) {
    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
      return utils.merge(target, source);
    } else if (utils.isPlainObject(source)) {
      return utils.merge({}, source);
    } else if (utils.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(prop) {
    if (!utils.isUndefined(config2[prop])) {
      config[prop] = getMergedValue(config1[prop], config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      config[prop] = getMergedValue(undefined, config1[prop]);
    }
  }
  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      config[prop] = getMergedValue(undefined, config2[prop]);
    }
  });
  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);
  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      config[prop] = getMergedValue(undefined, config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      config[prop] = getMergedValue(undefined, config1[prop]);
    }
  });
  utils.forEach(directMergeKeys, function merge(prop) {
    if (prop in config2) {
      config[prop] = getMergedValue(config1[prop], config2[prop]);
    } else if (prop in config1) {
      config[prop] = getMergedValue(undefined, config1[prop]);
    }
  });
  var axiosKeys = valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys);
  var otherKeys = Object.keys(config1).concat(Object.keys(config2)).filter(function filterAxiosKeys(key) {
    return axiosKeys.indexOf(key) === -1;
  });
  utils.forEach(otherKeys, mergeDeepProperties);
  return config;
};

function Axios(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager_1(),
    response: new InterceptorManager_1()
  };
}
Axios.prototype.request = function request(config) {
  if (typeof config === 'string') {
    config = arguments[1] || {};
    config.url = arguments[0];
  } else {
    config = config || {};
  }
  config = mergeConfig(this.defaults, config);
  if (config.method) {
    config.method = config.method.toLowerCase();
  } else if (this.defaults.method) {
    config.method = this.defaults.method.toLowerCase();
  } else {
    config.method = 'get';
  }
  var chain = [dispatchRequest, undefined];
  var promise = Promise.resolve(config);
  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    chain.unshift(interceptor.fulfilled, interceptor.rejected);
  });
  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    chain.push(interceptor.fulfilled, interceptor.rejected);
  });
  while (chain.length) {
    promise = promise.then(chain.shift(), chain.shift());
  }
  return promise;
};
Axios.prototype.getUri = function getUri(config) {
  config = mergeConfig(this.defaults, config);
  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, '');
};
utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {
  Axios.prototype[method] = function (url, config) {
    return this.request(mergeConfig(config || {}, {
      method: method,
      url: url,
      data: (config || {}).data
    }));
  };
});
utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  Axios.prototype[method] = function (url, data, config) {
    return this.request(mergeConfig(config || {}, {
      method: method,
      url: url,
      data: data
    }));
  };
});
var Axios_1 = Axios;

function Cancel(message) {
  this.message = message;
}
Cancel.prototype.toString = function toString() {
  return 'Cancel' + (this.message ? ': ' + this.message : '');
};
Cancel.prototype.__CANCEL__ = true;
var Cancel_1 = Cancel;

function CancelToken(executor) {
  if (typeof executor !== 'function') {
    throw new TypeError('executor must be a function.');
  }
  var resolvePromise;
  this.promise = new Promise(function promiseExecutor(resolve) {
    resolvePromise = resolve;
  });
  var token = this;
  executor(function cancel(message) {
    if (token.reason) {
      return;
    }
    token.reason = new Cancel_1(message);
    resolvePromise(token.reason);
  });
}
CancelToken.prototype.throwIfRequested = function throwIfRequested() {
  if (this.reason) {
    throw this.reason;
  }
};
CancelToken.source = function source() {
  var cancel;
  var token = new CancelToken(function executor(c) {
    cancel = c;
  });
  return {
    token: token,
    cancel: cancel
  };
};
var CancelToken_1 = CancelToken;

var spread = function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
};

var isAxiosError = function isAxiosError(payload) {
  return typeof payload === 'object' && payload.isAxiosError === true;
};

function createInstance(defaultConfig) {
  var context = new Axios_1(defaultConfig);
  var instance = bind(Axios_1.prototype.request, context);
  utils.extend(instance, Axios_1.prototype, context);
  utils.extend(instance, context);
  return instance;
}
var axios = createInstance(defaults_1);
axios.Axios = Axios_1;
axios.create = function create(instanceConfig) {
  return createInstance(mergeConfig(axios.defaults, instanceConfig));
};
axios.Cancel = Cancel_1;
axios.CancelToken = CancelToken_1;
axios.isCancel = isCancel;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
var axios_1 = axios;
var _default = axios;
axios_1.default = _default;

const ChallanSearchResults = _ref => {
  let {
    template,
    header,
    actionButtonLabel
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const {
    mobileNumber,
    consumerNumber,
    oldconsumerNumber,
    tenantId,
    propertyId,
    locality,
    doorNumber,
    consumerName,
    PToffset
  } = Digit.Hooks.useQueryParams();
  let filters = {};
  let OfsetForSearch = PToffset;
  let t1;
  let off;
  if (!isNaN(parseInt(OfsetForSearch))) {
    off = OfsetForSearch;
    t1 = parseInt(OfsetForSearch) + 5;
  } else {
    t1 = 5;
  }
  let filter1 = !isNaN(parseInt(OfsetForSearch)) ? {
    limit: "5",
    sortOrder: "ASC",
    sortBy: "createdTime",
    offset: off
  } : {
    limit: "5",
    sortOrder: "ASC",
    sortBy: "createdTime",
    offset: "0"
  };
  if (mobileNumber) filters.mobileNumber = mobileNumber;
  if (consumerNumber) filters.connectionNumber = consumerNumber;
  if (oldconsumerNumber) filters.oldConnectionNumber = oldconsumerNumber;
  if (propertyId) filters.propertyId = propertyId;
  if (locality !== "undefined") filters.locality = locality;
  if (doorNumber) filters.doorNo = doorNumber;
  if (consumerName) filters.ownerName = consumerName;
  if (locality || searchQuery && searchQuery.locality) {
    filters.limit = filter1.limit;
    filters.sortOrder = filter1.sortOrder;
    filters.sortBy = filter1.sortBy;
    filters.offset = filter1.offset;
  }
  filters = {
    ...filters,
    searchType: "CONNECTION"
  };
  const {
    isLoading: isWSLoading,
    data: Waterresult
  } = Digit.Hooks.ws.useWaterSearch({
    tenantId,
    filters: {
      ...filters
    },
    BusinessService: "WS",
    t
  }, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  const {
    isLoading: isSWLoading,
    data: Sewarageresult
  } = Digit.Hooks.ws.useSewarageSearch({
    tenantId,
    filters: {
      ...filters
    },
    BusinessService: "SW",
    t
  }, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  if (isWSLoading || isSWLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const onSubmit = data => {
    history.push("/digit-ui/citizen/payment/my-bills/" + (data === null || data === void 0 ? void 0 : data.ConsumerNumber.split("/")[0]) + "/" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.ConsumerNumber, "/", "+") + "?workflow=WNS&tenantId=" + tenantId + "&ConsumerName=" + (data === null || data === void 0 ? void 0 : data.ConsumerName));
  };
  const searchResults = Waterresult && Sewarageresult ? Waterresult.concat(Sewarageresult) : Waterresult ? Waterresult : Sewarageresult ? Sewarageresult : [];
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, header && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    style: {
      marginLeft: "8px"
    }
  }, t(header), " (", searchResults === null || searchResults === void 0 ? void 0 : searchResults.length, ")"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ResponseComposer, {
    data: searchResults,
    template: template,
    actionButtonLabel: actionButtonLabel,
    onSubmit: onSubmit
  }), !(searchResults !== null && searchResults !== void 0 && searchResults.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_NO_APP_FOUND_MSG")), (searchResults === null || searchResults === void 0 ? void 0 : searchResults.length) !== 0 && ((searchResults === null || searchResults === void 0 ? void 0 : searchResults.length) == 5 || (searchResults === null || searchResults === void 0 ? void 0 : searchResults.length) == 50) && (locality || searchQuery && searchQuery.locality) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_LOAD_MORE_MSG"), " ", /*#__PURE__*/React__default.createElement("span", {
    className: "link"
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/search-results?doorNumber=" + doorNumber + "&consumerName=" + consumerName + "&tenantId=" + (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]) + "&locality=" + locality.code + "&PToffset=" + t1
  }, t("PT_COMMON_CLICK_HERE"))))), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_WANT_TO_ADD_NEW_CONNECTION"), " ", /*#__PURE__*/React__default.createElement("span", {
    className: "link",
    style: {
      display: "block"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/create-application/search-property"
  }, t("WS_CLICK_HERE_TO_APPLY"))))));
};
ChallanSearchResults.propTypes = {
  template: propTypes.any,
  header: propTypes.string,
  actionButtonLabel: propTypes.string
};
ChallanSearchResults.defaultProps = {
  template: [],
  header: null,
  actionButtonLabel: null
};

const CitizenSearchResults = () => {
  const {
    t
  } = reactI18next.useTranslation();
  const {
    path
  } = reactRouterDom.useRouteMatch();
  const params = React.useMemo(() => config$1.map(step => {
    const texts = {};
    for (const key in step.texts) {
      texts[key] = t(step.texts[key]);
    }
    return {
      ...step,
      texts
    };
  }, [config$1]));
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: "" + path,
    exact: true
  }, /*#__PURE__*/React__default.createElement(ChallanSearchResults, {
    template: params[0].labels,
    header: params[0].texts.header,
    actionButtonLabel: params[0].texts.actionButtonLabel,
    t: t
  })));
};

const WSWFCaption = _ref => {
  var _data$wfComment, _data$thumbnailsToSho, _data$thumbnailsToSho2;
  let {
    data,
    OpenImage
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement("div", null, data.date && /*#__PURE__*/React__default.createElement("p", null, data.date), /*#__PURE__*/React__default.createElement("p", null, data.name), data.mobileNumber && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TelePhone, {
    mobile: data.mobileNumber
  }), data.source && /*#__PURE__*/React__default.createElement("p", null, t("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_" + data.source.toUpperCase())), data.comment && /*#__PURE__*/React__default.createElement(Reason, {
    otherComment: data === null || data === void 0 ? void 0 : data.otherComment,
    headComment: data === null || data === void 0 ? void 0 : data.comment
  }), data !== null && data !== void 0 && data.wfComment ? /*#__PURE__*/React__default.createElement("div", null, data === null || data === void 0 ? void 0 : (_data$wfComment = data.wfComment) === null || _data$wfComment === void 0 ? void 0 : _data$wfComment.map(e => /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("WF_COMMON_COMMENTS")), /*#__PURE__*/React__default.createElement("p", null, e)))) : null, (data === null || data === void 0 ? void 0 : (_data$thumbnailsToSho = data.thumbnailsToShow) === null || _data$thumbnailsToSho === void 0 ? void 0 : (_data$thumbnailsToSho2 = _data$thumbnailsToSho.thumbs) === null || _data$thumbnailsToSho2 === void 0 ? void 0 : _data$thumbnailsToSho2.length) > 0 ? /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("CS_COMMON_ATTACHMENTS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.DisplayPhotos, {
    srcs: data === null || data === void 0 ? void 0 : data.thumbnailsToShow.thumbs,
    onClick: (src, index) => {
      OpenImage(src, index, data === null || data === void 0 ? void 0 : data.thumbnailsToShow);
    }
  })) : null);
};

const WSWFApplicationTimeline = props => {
  var _props$application, _props$application2, _data$timeline, _data$timeline2, _data$timeline$;
  const {
    t
  } = reactI18next.useTranslation();
  const businessService = (_props$application = props.application) === null || _props$application === void 0 ? void 0 : _props$application.applicationNo.split("_")[0];
  const {
    isLoading,
    data
  } = Digit.Hooks.useWorkflowDetails({
    tenantId: (_props$application2 = props.application) === null || _props$application2 === void 0 ? void 0 : _props$application2.tenantId,
    id: props.id,
    moduleCode: businessService
  });
  function OpenImage(imageSource, index, thumbnailsToShow) {
    var _thumbnailsToShow$ful;
    window.open(thumbnailsToShow === null || thumbnailsToShow === void 0 ? void 0 : (_thumbnailsToShow$ful = thumbnailsToShow.fullImage) === null || _thumbnailsToShow$ful === void 0 ? void 0 : _thumbnailsToShow$ful[0], "_blank");
  }
  const getTimelineCaptions = checkpoint => {
    if (checkpoint.state === "OPEN") {
      var _props$application3, _props$application3$a, _props$application4;
      const caption = {
        date: Digit.DateUtils.ConvertTimestampToDate((_props$application3 = props.application) === null || _props$application3 === void 0 ? void 0 : (_props$application3$a = _props$application3.auditDetails) === null || _props$application3$a === void 0 ? void 0 : _props$application3$a.createdTime),
        source: ((_props$application4 = props.application) === null || _props$application4 === void 0 ? void 0 : _props$application4.channel) || ""
      };
      return /*#__PURE__*/React__default.createElement(WSWFCaption, {
        data: caption
      });
    } else if (checkpoint.status === "ACTIVE") {
      var _props$application5, _props$application6;
      return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: "/digit-ui/citizen/commonpt/view-property?propertyId=" + (props === null || props === void 0 ? void 0 : (_props$application5 = props.application) === null || _props$application5 === void 0 ? void 0 : _props$application5.propertyId) + "&tenantId=" + (props === null || props === void 0 ? void 0 : (_props$application6 = props.application) === null || _props$application6 === void 0 ? void 0 : _props$application6.tenantId)
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionLinks, null, t("PT_VIEW_PROPERTY_DETAILS"))));
    } else {
      var _props$application7, _checkpoint$auditDeta, _checkpoint$assignes, _checkpoint$assignes$, _checkpoint$assignes2, _checkpoint$assignes3;
      const caption = {
        source: ((_props$application7 = props.application) === null || _props$application7 === void 0 ? void 0 : _props$application7.channel) || "",
        date: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$auditDeta = checkpoint.auditDetails) === null || _checkpoint$auditDeta === void 0 ? void 0 : _checkpoint$auditDeta.lastModified,
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes = checkpoint.assignes) === null || _checkpoint$assignes === void 0 ? void 0 : (_checkpoint$assignes$ = _checkpoint$assignes[0]) === null || _checkpoint$assignes$ === void 0 ? void 0 : _checkpoint$assignes$.name,
        mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes2 = checkpoint.assignes) === null || _checkpoint$assignes2 === void 0 ? void 0 : (_checkpoint$assignes3 = _checkpoint$assignes2[0]) === null || _checkpoint$assignes3 === void 0 ? void 0 : _checkpoint$assignes3.mobileNumber,
        comment: t(checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.comment),
        wfComment: checkpoint.wfComment,
        thumbnailsToShow: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.thumbnailsToShow
      };
      return /*#__PURE__*/React__default.createElement(WSWFCaption, {
        data: caption,
        OpenImage: OpenImage
      });
    }
  };
  const showNextActions = nextActions => {
    var _nextAction;
    let nextAction = nextActions[0];
    const next = nextActions.map(action => action.action);
    if (next.includes("PAY") || next.includes("EDIT")) {
      let currentIndex = next.indexOf("EDIT") || next.indexOf("PAY");
      currentIndex = currentIndex != -1 ? currentIndex : next.indexOf("PAY");
      nextAction = nextActions[currentIndex];
    }
    switch ((_nextAction = nextAction) === null || _nextAction === void 0 ? void 0 : _nextAction.action) {
      case "PAY":
        {
          if ((props === null || props === void 0 ? void 0 : props.paymentbuttonenabled) !== false) return /*#__PURE__*/React__default.createElement("div", {
            style: {
              marginTop: "1em",
              bottom: "0px",
              width: "100%",
              marginBottom: "1.2em"
            }
          }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
            to: {
              pathname: "/digit-ui/citizen/payment/collect/" + businessService + "/" + props.id + "?consumerCode=" + props.id + "&&workflow=WNS",
              state: {
                tenantId: props.application.tenantId
              }
            }
          }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
            label: t("CS_APPLICATION_DETAILS_MAKE_PAYMENT")
          })));
          break;
        }
      case "EDIT":
        return /*#__PURE__*/React__default.createElement("div", {
          style: {
            marginTop: "1em",
            bottom: "0px",
            width: "100%",
            marginBottom: "1.2em"
          }
        }, businessService != "PT.MUTATION" && /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: {
            pathname: "/digit-ui/citizen/pt/property/edit-application/action=edit-" + businessService + "/" + props.id,
            state: {
              tenantId: props.application.tenantId
            }
          }
        }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
          label: t("CS_APPLICATION_DETAILS_EDIT")
        })));
      case "SUBMIT_FEEDBACK":
        return /*#__PURE__*/React__default.createElement("div", {
          style: {
            marginTop: "24px"
          }
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/citizen/fsm/rate/" + props.id
        }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
          label: t("CS_APPLICATION_DETAILS_RATE")
        })));
    }
  };
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !isLoading && /*#__PURE__*/React__default.createElement(React.Fragment, null, (data === null || data === void 0 ? void 0 : (_data$timeline = data.timeline) === null || _data$timeline === void 0 ? void 0 : _data$timeline.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px"
    }
  }, t("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")), data !== null && data !== void 0 && data.timeline && (data === null || data === void 0 ? void 0 : (_data$timeline2 = data.timeline) === null || _data$timeline2 === void 0 ? void 0 : _data$timeline2.length) === 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
    isCompleted: true,
    label: t((data === null || data === void 0 ? void 0 : (_data$timeline$ = data.timeline[0]) === null || _data$timeline$ === void 0 ? void 0 : _data$timeline$.state) && "CS_" + data.timeline[0].state || "NA"),
    customChild: getTimelineCaptions(data === null || data === void 0 ? void 0 : data.timeline[0])
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ConnectingCheckPoints, null, (data === null || data === void 0 ? void 0 : data.timeline) && (data === null || data === void 0 ? void 0 : data.timeline.map((checkpoint, index, arr) => {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
      keyValue: index,
      isCompleted: index === 0,
      label: checkpoint.state ? t("CS_" + checkpoint.state) : "NA",
      customChild: getTimelineCaptions(checkpoint)
    }));
  })))), data && showNextActions(data === null || data === void 0 ? void 0 : data.nextActions));
};

function WSDocument(_ref) {
  var _value$documents;
  let {
    value = {},
    Code,
    index,
    showFileName = false
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useWSDocumentSearch({
    value
  }, {
    value
  }, Code, index);
  const documents = [];
  value !== null && value !== void 0 && value.documents ? value === null || value === void 0 ? void 0 : (_value$documents = value.documents) === null || _value$documents === void 0 ? void 0 : _value$documents.documents.filter(doc => (doc === null || doc === void 0 ? void 0 : doc.documentType) === Code).map(ob => {
    documents.push(ob);
  }) : value.filter(doc => (doc === null || doc === void 0 ? void 0 : doc.documentType) === Code).map(ob => {
    documents.push(ob);
  });
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      flexWrap: "wrap"
    }
  }, documents === null || documents === void 0 ? void 0 : documents.map((document, index) => {
    let documentLink = pdfDownloadLink(data.pdfFiles, document === null || document === void 0 ? void 0 : document.fileStoreId);
    return /*#__PURE__*/React__default.createElement("a", {
      target: "_",
      href: documentLink,
      style: {
        minWidth: "160px"
      },
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), showFileName ? /*#__PURE__*/React__default.createElement("p", {
      style: {
        marginTop: "8px"
      }
    }, t(Code === null || Code === void 0 ? void 0 : Code.split('.').slice(0, 3).join('_'))) : null);
  }))));
}

const getPropertyAddress$3 = property => {
  var _property$locality;
  const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
  const street = property === null || property === void 0 ? void 0 : property.street;
  const landMark = property === null || property === void 0 ? void 0 : property.landmark;
  const locality = property === null || property === void 0 ? void 0 : (_property$locality = property.locality) === null || _property$locality === void 0 ? void 0 : _property$locality.name;
  const city = property === null || property === void 0 ? void 0 : property.city;
  const pinCode = property === null || property === void 0 ? void 0 : property.pincode;
  const formattedAddress = "" + (doorNo ? doorNo + ", " : "") + (street ? street + ", " : "") + (landMark ? landMark + ", " : "") + (locality ? locality + ", " : "") + (city ? city : "") + (pinCode ? ", " + pinCode : "");
  return formattedAddress;
};
const getPropertyDetails$3 = (application, t) => {
  var _application$owners, _owners$map;
  const owners = (application === null || application === void 0 ? void 0 : (_application$owners = application.owners) === null || _application$owners === void 0 ? void 0 : _application$owners.filter(owner => owner.active == true)) || [];
  const names = owners === null || owners === void 0 ? void 0 : (_owners$map = owners.map(owner => owner.name)) === null || _owners$map === void 0 ? void 0 : _owners$map.join(",");
  return {
    title: t("WS_COMMON_PROPERTY_DETAILS"),
    values: [{
      title: t("WS_PROPERTY_ID_LABEL"),
      value: t("" + (application === null || application === void 0 ? void 0 : application.propertyId)) || t("CS_NA")
    }, {
      title: t("WS_OWN_DETAIL_NAME"),
      value: names || t("CS_NA")
    }, {
      title: t("WS_PROPERTY_ADDRESS_LABEL"),
      value: getPropertyAddress$3(application === null || application === void 0 ? void 0 : application.address) || t("CS_NA")
    }]
  };
};
const getConnectionDetails$2 = (application, t) => {
  return {
    title: t("WS_COMMON_CONNECTION_DETAILS"),
    values: [{
      title: t("WS_DISCONNECTION_TYPE"),
      value: (application === null || application === void 0 ? void 0 : application.isDisconnectionTemporary) === true ? t("WS_DISCONNECTIONTYPE_TEMPORARY") : t("WS_DISCONNECTIONTYPE_PERMANENT") || t("CS_NA")
    }, {
      title: t("WS_DISCONNECTION_PROPOSED_DATE"),
      value: application !== null && application !== void 0 && application.dateEffectiveFrom ? Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.dateEffectiveFrom) : t("CS_NA")
    }, {
      title: t("WS_DISCONNECTION_REASON"),
      value: (application === null || application === void 0 ? void 0 : application.disconnectionReason) || t("CS_NA")
    }]
  };
};
const getConnectionHolderDetails$3 = (owner, t) => {
  var _owner$connectionHold, _owner$connectionHold2, _owner$connectionHold3, _owner$connectionHold4, _owner$connectionHold5, _owner$connectionHold6, _owner$connectionHold7, _owner$connectionHold8, _owner$connectionHold9;
  return {
    title: t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),
    values: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold = owner.connectionHolders) === null || _owner$connectionHold === void 0 ? void 0 : _owner$connectionHold.length) > 0 ? [{
      title: t("WS_OWN_DETAIL_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold2 = owner.connectionHolders) === null || _owner$connectionHold2 === void 0 ? void 0 : (_owner$connectionHold3 = _owner$connectionHold2[0]) === null || _owner$connectionHold3 === void 0 ? void 0 : _owner$connectionHold3.name) || t("CS_NA")
    }, {
      title: t("CORE_COMMON_MOBILE_NUMBER"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold4 = owner.connectionHolders) === null || _owner$connectionHold4 === void 0 ? void 0 : (_owner$connectionHold5 = _owner$connectionHold4[0]) === null || _owner$connectionHold5 === void 0 ? void 0 : _owner$connectionHold5.mobileNumber) || t("CS_NA")
    }, {
      title: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold6 = owner.connectionHolders) === null || _owner$connectionHold6 === void 0 ? void 0 : (_owner$connectionHold7 = _owner$connectionHold6[0]) === null || _owner$connectionHold7 === void 0 ? void 0 : _owner$connectionHold7.fatherOrHusbandName) || t("CS_NA")
    }, {
      title: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold8 = owner.connectionHolders) === null || _owner$connectionHold8 === void 0 ? void 0 : (_owner$connectionHold9 = _owner$connectionHold8[0]) === null || _owner$connectionHold9 === void 0 ? void 0 : _owner$connectionHold9.correspondenceAddress) || t("CS_NA")
    }] : [{
      title: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
      value: t("SCORE_YES") || t("CS_NA")
    }]
  };
};
const getHeaderDetails$4 = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$applicat, _application$auditDet;
      let values = [];
      if (application !== null && application !== void 0 && application.applicationNo) values.push({
        title: t("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.applicationNo
      });
      if (application !== null && application !== void 0 && application.applicationType) values.push({
        title: t("WS_SERVICE_NAME") + ":",
        value: t("WS_APPLICATION_TYPE_" + (application === null || application === void 0 ? void 0 : application.applicationType))
      });
      return {
        title: "",
        isHeader: true,
        typeOfApplication: application !== null && application !== void 0 && (_application$applicat = application.applicationNo) !== null && _application$applicat !== void 0 && _application$applicat.includes("SW") ? t("WS_NEW_SEWERAGE_DISCONNECTION") : t("WS_NEW_WATER_DISCONNECTION"),
        date: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$auditDet = application.auditDetails) === null || _application$auditDet === void 0 ? void 0 : _application$auditDet.createdTime) || "NA",
        values: values,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getDocumentDetails$3 = (application, t) => {
  const documents = application === null || application === void 0 ? void 0 : application.documents;
  return {
    title: t("WS_COMMON_DOCUMENTS_DETAILS"),
    isAttachments: true,
    values: documents === null || documents === void 0 ? void 0 : documents.map(doc => t(doc === null || doc === void 0 ? void 0 : doc.documentType))
  };
};
const getWSDisconnectionApplicationForm = function (application, property, tenantInfo, t) {
  try {
    var _application$tradeLic, _application$tradeLic2;
    function _temp2() {
      return Promise.resolve(getHeaderDetails$4(application, t, tenantInfo)).then(function (header) {
        return {
          t: t,
          tenantId: tenantInfo,
          title: "PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",
          name: "" + t("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),
          email: "",
          phoneNumber: "",
          headerDetails: [header],
          details: [getPropertyDetails$3(property, t), getConnectionHolderDetails$3(application, t), getConnectionDetails$2(application, t), getDocumentDetails$3(application, t)]
        };
      });
    }
    const filesArray = application === null || application === void 0 ? void 0 : (_application$tradeLic = application.tradeLicenseDetail) === null || _application$tradeLic === void 0 ? void 0 : (_application$tradeLic2 = _application$tradeLic.applicationDocuments) === null || _application$tradeLic2 === void 0 ? void 0 : _application$tradeLic2.map(value => value === null || value === void 0 ? void 0 : value.fileStoreId);
    let res;
    const _temp = function () {
      if (filesArray) {
        return Promise.resolve(Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId())).then(function (_Digit$UploadServices) {
          res = _Digit$UploadServices;
        });
      }
    }();
    return Promise.resolve(_temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp));
  } catch (e) {
    return Promise.reject(e);
  }
};

const WSApplicationDetails = () => {
  var _Digit$SessionStorage, _user$info, _data$WaterConnection, _data$WaterConnection2, _data$SewerageConnect, _data$SewerageConnect2, _data$WaterConnection3, _data$WaterConnection4, _data$SewerageConnect3, _data$SewerageConnect4, _data$WaterConnection5, _data$WaterConnection6, _data$SewerageConnect5, _data$SewerageConnect6, _data$WaterConnection7, _data$WaterConnection8, _data$WaterConnection9, _data$WaterConnection10, _data$WaterConnection11, _data$WaterConnection12, _data$WaterConnection13, _data$WaterConnection14, _data$SewerageConnect7, _data$SewerageConnect8, _data$SewerageConnect9, _data$SewerageConnect10, _data$WaterConnection15, _data$WaterConnection16, _data$WaterConnection17, _data$WaterConnection18, _data$SewerageConnect11, _data$SewerageConnect12, _data$SewerageConnect13, _data$SewerageConnect14, _data$WaterConnection37, _data$WaterConnection38, _data$SewerageConnect29, _data$SewerageConnect30, _data$WaterConnection39, _data$WaterConnection40, _data$SewerageConnect31, _data$SewerageConnect32, _data$WaterConnection41, _data$WaterConnection42, _data$SewerageConnect33, _data$SewerageConnect34, _data$WaterConnection43, _data$WaterConnection44, _data$SewerageConnect35, _data$SewerageConnect36, _data$WaterConnection45, _data$WaterConnection46, _data$WaterConnection47, _data$SewerageConnect37, _data$SewerageConnect38, _data$WaterConnection48, _data$WaterConnection49, _data$SewerageConnect39, _data$SewerageConnect40, _data$WaterConnection50, _data$WaterConnection51, _data$SewerageConnect41, _data$SewerageConnect42, _data$WaterConnection52, _data$WaterConnection53, _data$SewerageConnect43, _data$SewerageConnect44, _paymentDetails$data, _paymentDetails$data$, _paymentDetails$data$2, _paymentDetails$data$3, _paymentDetails$data$4, _paymentDetails$data2, _paymentDetails$data3, _paymentDetails$data4, _paymentDetails$data5, _paymentDetails$data6, _data$WaterConnection54, _data$WaterConnection55, _data$SewerageConnect45, _data$SewerageConnect46, _data$WaterConnection56, _data$WaterConnection57, _data$SewerageConnect47, _data$SewerageConnect48, _data$WaterConnection58, _data$WaterConnection59, _data$SewerageConnect49, _data$SewerageConnect50, _data$WaterConnection60, _data$WaterConnection61, _data$SewerageConnect51, _data$SewerageConnect52, _data$WaterConnection62, _data$WaterConnection63, _data$SewerageConnect53, _data$SewerageConnect54, _data$WaterConnection64, _data$WaterConnection65, _data$WaterConnection66, _data$WaterConnection67, _data$SewerageConnect55, _data$SewerageConnect56, _data$SewerageConnect57, _data$SewerageConnect58, _paymentDetails$data7, _paymentDetails$data8, _paymentDetails$data9, _paymentDetails$data10, _paymentDetails$data11, _paymentDetails$data12, _paymentDetails$data13, _paymentDetails$data14, _paymentDetails$data15, _paymentDetails$data16, _paymentDetails$data17, _paymentDetails$data18, _paymentDetails$data19, _paymentDetails$data20, _paymentDetails$data21, _paymentDetails$data22, _paymentDetails$data23, _paymentDetails$data24, _paymentDetails$data25, _paymentDetails$data26, _paymentDetails$data27, _paymentDetails$data28, _paymentDetails$data29, _paymentDetails$data30, _paymentDetails$data31, _data$WaterConnection68, _data$WaterConnection69, _data$SewerageConnect59, _data$SewerageConnect60, _PTData$Properties3, _PTData$Properties3$, _PTData$Properties3$$, _PTData$Properties3$$2, _PTData$Properties4, _PTData$Properties4$, _PTData$Properties5, _PTData$Properties5$, _PTData$Properties5$$, _PTData$Properties5$$2, _PTData$Properties6, _PTData$Properties6$, _data$WaterConnection70, _data$WaterConnection71, _data$SewerageConnect61, _data$SewerageConnect62, _data$WaterConnection72, _data$WaterConnection73, _data$SewerageConnect63, _data$SewerageConnect64, _data$WaterConnection74, _data$WaterConnection75, _data$SewerageConnect65, _data$SewerageConnect66, _data$WaterConnection76, _data$WaterConnection77, _data$WaterConnection78, _data$SewerageConnect67, _data$SewerageConnect68, _data$SewerageConnect69, _data$WaterConnection79, _data$WaterConnection80, _data$WaterConnection81, _data$WaterConnection82, _data$SewerageConnect70, _data$SewerageConnect71, _data$SewerageConnect72, _data$SewerageConnect73, _data$WaterConnection83, _data$WaterConnection84, _data$WaterConnection85, _data$WaterConnection86, _data$SewerageConnect74, _data$SewerageConnect75, _data$SewerageConnect76, _data$SewerageConnect77, _data$WaterConnection87, _data$WaterConnection88, _data$WaterConnection89, _data$WaterConnection90, _data$SewerageConnect78, _data$SewerageConnect79, _data$SewerageConnect80, _data$SewerageConnect81, _data$WaterConnection91, _data$WaterConnection92, _data$WaterConnection93, _data$WaterConnection94, _data$SewerageConnect82, _data$SewerageConnect83, _data$SewerageConnect84, _data$SewerageConnect85, _data$WaterConnection95, _data$WaterConnection96, _data$WaterConnection97, _data$WaterConnection98, _data$SewerageConnect86, _data$SewerageConnect87, _data$SewerageConnect88, _data$SewerageConnect89, _data$WaterConnection99, _data$WaterConnection100, _data$WaterConnection101, _data$WaterConnection102, _data$SewerageConnect90, _data$SewerageConnect91, _data$SewerageConnect92, _data$SewerageConnect93, _data$WaterConnection103, _data$WaterConnection104, _data$WaterConnection105, _data$WaterConnection106, _data$SewerageConnect94, _data$SewerageConnect95, _data$SewerageConnect96, _data$SewerageConnect97, _data$WaterConnection107, _data$WaterConnection108, _data$WaterConnection109, _data$WaterConnection110, _data$SewerageConnect98, _data$SewerageConnect99, _data$SewerageConnect100, _data$SewerageConnect101, _data$WaterConnection111, _data$WaterConnection112, _data$WaterConnection113, _data$WaterConnection114, _data$SewerageConnect102, _data$SewerageConnect103, _data$SewerageConnect104, _data$SewerageConnect105, _data$WaterConnection115, _data$WaterConnection116, _data$WaterConnection117, _data$WaterConnection118, _data$SewerageConnect106, _data$SewerageConnect107, _data$SewerageConnect108, _data$SewerageConnect109, _data$WaterConnection119, _data$WaterConnection120, _data$WaterConnection121, _data$WaterConnection122, _data$SewerageConnect110, _data$SewerageConnect111, _data$SewerageConnect112, _data$SewerageConnect113, _data$WaterConnection123, _data$WaterConnection124, _data$WaterConnection125, _data$WaterConnection126, _data$WaterConnection127, _data$SewerageConnect114, _data$SewerageConnect115, _data$SewerageConnect116, _data$SewerageConnect117, _data$SewerageConnect118, _data$WaterConnection128, _data$WaterConnection129, _data$WaterConnection130, _data$WaterConnection131, _data$SewerageConnect119, _data$SewerageConnect120, _data$SewerageConnect121, _data$SewerageConnect122, _data$WaterConnection132, _data$WaterConnection133, _data$WaterConnection134, _data$WaterConnection135, _data$SewerageConnect123, _data$SewerageConnect124, _data$SewerageConnect125, _data$SewerageConnect126, _data$WaterConnection136, _data$WaterConnection137, _data$WaterConnection138, _data$WaterConnection139, _data$SewerageConnect127, _data$SewerageConnect128, _data$SewerageConnect129, _data$SewerageConnect130, _data$WaterConnection140, _data$WaterConnection141, _data$WaterConnection142, _data$WaterConnection143, _data$WaterConnection144, _data$WaterConnection145, _data$WaterConnection146, _data$SewerageConnect131, _data$SewerageConnect132, _data$SewerageConnect133, _data$SewerageConnect134, _data$SewerageConnect135, _data$SewerageConnect136, _data$SewerageConnect137, _data$WaterConnection147, _data$WaterConnection148, _data$WaterConnection149, _data$WaterConnection150, _data$SewerageConnect138, _data$SewerageConnect139, _data$SewerageConnect140, _data$SewerageConnect141, _data$WaterConnection155, _data$SewerageConnect146, _data$WaterConnection156, _data$WaterConnection157, _data$SewerageConnect147, _data$SewerageConnect148, _data$WaterConnection158, _data$WaterConnection159, _data$SewerageConnect149, _data$SewerageConnect150, _paymentDetails$data32, _paymentDetails$data33, _paymentDetails$data34, _data$WaterConnection160, _data$WaterConnection161, _data$SewerageConnect151, _data$SewerageConnect152, _data$WaterConnection162, _data$WaterConnection163, _data$SewerageConnect153, _data$SewerageConnect154, _data$WaterConnection164, _data$WaterConnection165, _data$SewerageConnect155, _data$SewerageConnect156, _data$WaterConnection166, _data$WaterConnection167, _data$WaterConnection168, _data$SewerageConnect157, _data$SewerageConnect158, _data$SewerageConnect159, _PTData$Properties7, _PTData$Properties7$, _PTData$Properties7$$, _data$WaterConnection169, _data$WaterConnection170, _data$WaterConnection171, _data$WaterConnection172, _data$SewerageConnect160, _data$SewerageConnect161, _data$SewerageConnect162, _data$SewerageConnect163, _data$WaterConnection173, _data$WaterConnection174, _data$SewerageConnect164, _data$SewerageConnect165, _data$WaterConnection175, _data$WaterConnection176, _data$SewerageConnect166, _data$SewerageConnect167, _data$WaterConnection177, _data$WaterConnection178, _data$WaterConnection179, _data$WaterConnection180, _data$SewerageConnect168, _data$SewerageConnect169, _data$SewerageConnect170, _data$SewerageConnect171, _data$WaterConnection181, _data$WaterConnection182, _data$SewerageConnect172, _data$SewerageConnect173, _data$SewerageConnect174, _data$SewerageConnect175, _data$SewerageConnect176, _data$SewerageConnect177, _data$SewerageConnect178, _data$SewerageConnect179, _data$SewerageConnect180, _data$SewerageConnect181, _data$SewerageConnect182, _data$WaterConnection183, _data$WaterConnection184, _data$WaterConnection185, _data$WaterConnection186, _data$WaterConnection187, _data$WaterConnection188, _data$WaterConnection189, _data$WaterConnection190, _data$WaterConnection191;
  const getDisconnectionNoticeSearch = function () {
    try {
      var _data$WaterConnection193, _data$WaterConnection194, _data$SewerageConnect184, _data$SewerageConnect185;
      let key = "ws-waterdisconnectionnotice";
      let details = {};
      if (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS")) {
        var _data$WaterConnection192, _PTData$Properties8;
        details = {
          WaterConnection: [{
            ...(data === null || data === void 0 ? void 0 : (_data$WaterConnection192 = data.WaterConnection) === null || _data$WaterConnection192 === void 0 ? void 0 : _data$WaterConnection192[0]),
            property: PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties8 = PTData.Properties) === null || _PTData$Properties8 === void 0 ? void 0 : _PTData$Properties8[0]
          }]
        };
      } else {
        var _data$SewerageConnect183, _PTData$Properties9;
        key = "ws-seweragedisconnectionnotice";
        details = {
          SewerageConnection: [{
            ...(data === null || data === void 0 ? void 0 : (_data$SewerageConnect183 = data.SewerageConnections) === null || _data$SewerageConnect183 === void 0 ? void 0 : _data$SewerageConnect183[0]),
            property: PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties9 = PTData.Properties) === null || _PTData$Properties9 === void 0 ? void 0 : _PTData$Properties9[0]
          }]
        };
      }
      return Promise.resolve(Digit.WSService.WSDisconnectionNotice((data === null || data === void 0 ? void 0 : (_data$WaterConnection193 = data.WaterConnection) === null || _data$WaterConnection193 === void 0 ? void 0 : (_data$WaterConnection194 = _data$WaterConnection193[0]) === null || _data$WaterConnection194 === void 0 ? void 0 : _data$WaterConnection194.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect184 = data.SewerageConnections) === null || _data$SewerageConnect184 === void 0 ? void 0 : (_data$SewerageConnect185 = _data$SewerageConnect184[0]) === null || _data$SewerageConnect185 === void 0 ? void 0 : _data$SewerageConnect185.tenantId), details, key)).then(function (response) {
        var _data$WaterConnection195, _data$WaterConnection196, _data$SewerageConnect186, _data$SewerageConnect187;
        return Promise.resolve(Digit.PaymentService.printReciept((data === null || data === void 0 ? void 0 : (_data$WaterConnection195 = data.WaterConnection) === null || _data$WaterConnection195 === void 0 ? void 0 : (_data$WaterConnection196 = _data$WaterConnection195[0]) === null || _data$WaterConnection196 === void 0 ? void 0 : _data$WaterConnection196.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect186 = data.SewerageConnections) === null || _data$SewerageConnect186 === void 0 ? void 0 : (_data$SewerageConnect187 = _data$SewerageConnect186[0]) === null || _data$SewerageConnect187 === void 0 ? void 0 : _data$SewerageConnect187.tenantId), {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const {
    t
  } = reactI18next.useTranslation();
  const menuRef = React.useRef();
  const user = Digit.UserService.getUser();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  const stateCode = Digit.ULBService.getStateId();
  const [showOptions, setShowOptions] = React.useState(false);
  const applicationNobyData = window.location.href.includes("SW_") ? window.location.href.substring(window.location.href.indexOf("SW_")) : window.location.href.substring(window.location.href.indexOf("WS_"));
  let filter1 = {
    tenantId: tenantId,
    applicationNumber: applicationNobyData
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? "SW" : "WS"
  }, {
    filters: filter1,
    privacy: Digit.Utils.getPrivacyObject()
  });
  const closeModal = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeModal, showOptions);
  const fetchBillParams = {
    consumerCode: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("DC") ? (data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : (_data$WaterConnection2 = _data$WaterConnection[0]) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2.connectionNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : (_data$SewerageConnect2 = _data$SewerageConnect[0]) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2.connectionNo) : (data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : (_data$WaterConnection4 = _data$WaterConnection3[0]) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4.applicationNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnections) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3[0]) === null || _data$SewerageConnect4 === void 0 ? void 0 : _data$SewerageConnect4.applicationNo)
  };
  const {
    data: generatePdfKey
  } = Digit.Hooks.useCommonMDMS(tenantId, "common-masters", "ReceiptKey", {
    select: data => {
      var _data$commonMasters, _data$commonMasters$u, _data$commonMasters$u2;
      return ((_data$commonMasters = data["common-masters"]) === null || _data$commonMasters === void 0 ? void 0 : (_data$commonMasters$u = _data$commonMasters.uiCommonPay) === null || _data$commonMasters$u === void 0 ? void 0 : (_data$commonMasters$u2 = _data$commonMasters$u.filter(_ref => {
        var _WSONE_TIME_FEE;
        let {
          code
        } = _ref;
        return (_WSONE_TIME_FEE = "WS.ONE_TIME_FEE") === null || _WSONE_TIME_FEE === void 0 ? void 0 : _WSONE_TIME_FEE.includes(code);
      })[0]) === null || _data$commonMasters$u2 === void 0 ? void 0 : _data$commonMasters$u2.receiptKey) || "consolidatedreceipt";
    }
  });
  const paymentDetails = Digit.Hooks.useFetchBillsForBuissnessService({
    businessService: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("DC") ? "SW" : "SW.ONE_TIME_FEE" : applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("DC") ? "WS" : "WS.ONE_TIME_FEE",
    ...fetchBillParams,
    tenantId: tenantId
  }, {
    enabled: data !== null && data !== void 0 && (_data$WaterConnection5 = data.WaterConnection) !== null && _data$WaterConnection5 !== void 0 && (_data$WaterConnection6 = _data$WaterConnection5[0]) !== null && _data$WaterConnection6 !== void 0 && _data$WaterConnection6.applicationNo || data !== null && data !== void 0 && (_data$SewerageConnect5 = data.SewerageConnections) !== null && _data$SewerageConnect5 !== void 0 && (_data$SewerageConnect6 = _data$SewerageConnect5[0]) !== null && _data$SewerageConnect6 !== void 0 && _data$SewerageConnect6.applicationNo ? true : false,
    retry: false
  });
  const {
    isLoading: isPTLoading,
    isError: isPTError,
    error: PTerror,
    data: PTData
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: data === null || data === void 0 ? void 0 : (_data$WaterConnection7 = data.WaterConnection) === null || _data$WaterConnection7 === void 0 ? void 0 : (_data$WaterConnection8 = _data$WaterConnection7[0]) === null || _data$WaterConnection8 === void 0 ? void 0 : _data$WaterConnection8.propertyId
    }
  }, {
    filters: {
      propertyIds: data === null || data === void 0 ? void 0 : (_data$WaterConnection9 = data.WaterConnection) === null || _data$WaterConnection9 === void 0 ? void 0 : (_data$WaterConnection10 = _data$WaterConnection9[0]) === null || _data$WaterConnection10 === void 0 ? void 0 : _data$WaterConnection10.propertyId
    },
    privacy: Digit.Utils.getPrivacyObject()
  });
  const checkifPrivacyenabled = Digit.Hooks.ws.useToCheckPrivacyEnablement({
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection11 = data.WaterConnection) === null || _data$WaterConnection11 === void 0 ? void 0 : (_data$WaterConnection12 = _data$WaterConnection11[0]) === null || _data$WaterConnection12 === void 0 ? void 0 : (_data$WaterConnection13 = _data$WaterConnection12.connectionHolders) === null || _data$WaterConnection13 === void 0 ? void 0 : (_data$WaterConnection14 = _data$WaterConnection13[0]) === null || _data$WaterConnection14 === void 0 ? void 0 : _data$WaterConnection14.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect7 = data.SewerageConnections) === null || _data$SewerageConnect7 === void 0 ? void 0 : (_data$SewerageConnect8 = _data$SewerageConnect7[0]) === null || _data$SewerageConnect8 === void 0 ? void 0 : (_data$SewerageConnect9 = _data$SewerageConnect8.connectionHolders) === null || _data$SewerageConnect9 === void 0 ? void 0 : (_data$SewerageConnect10 = _data$SewerageConnect9[0]) === null || _data$SewerageConnect10 === void 0 ? void 0 : _data$SewerageConnect10.uuid,
      fieldName: "connectionHoldersMobileNumber",
      model: "WnSConnectionOwner"
    }
  }) || false;
  const isPaid = (data === null || data === void 0 ? void 0 : (_data$WaterConnection15 = data.WaterConnection) === null || _data$WaterConnection15 === void 0 ? void 0 : (_data$WaterConnection16 = _data$WaterConnection15[0]) === null || _data$WaterConnection16 === void 0 ? void 0 : _data$WaterConnection16.applicationStatus) === 'CONNECTION_ACTIVATED' || (data === null || data === void 0 ? void 0 : (_data$WaterConnection17 = data.WaterConnection) === null || _data$WaterConnection17 === void 0 ? void 0 : (_data$WaterConnection18 = _data$WaterConnection17[0]) === null || _data$WaterConnection18 === void 0 ? void 0 : _data$WaterConnection18.applicationStatus) === 'PENDING_FOR_CONNECTION_ACTIVATION' || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect11 = data.SewerageConnections) === null || _data$SewerageConnect11 === void 0 ? void 0 : (_data$SewerageConnect12 = _data$SewerageConnect11[0]) === null || _data$SewerageConnect12 === void 0 ? void 0 : _data$SewerageConnect12.applicationStatus) === 'CONNECTION_ACTIVATED' || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect13 = data.SewerageConnections) === null || _data$SewerageConnect13 === void 0 ? void 0 : (_data$SewerageConnect14 = _data$SewerageConnect13[0]) === null || _data$SewerageConnect14 === void 0 ? void 0 : _data$SewerageConnect14.applicationStatus) === 'PENDING_FOR_CONNECTION_ACTIVATION' ? true : false;
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const handleDownloadPdf = function () {
    try {
      var _data$WaterConnection19, _data$WaterConnection20, _data$SewerageConnect15, _data$SewerageConnect16, _data$WaterConnection21, _data$SewerageConnect17, _PTData$Properties;
      const tenantInfo = (data === null || data === void 0 ? void 0 : (_data$WaterConnection19 = data.WaterConnection) === null || _data$WaterConnection19 === void 0 ? void 0 : (_data$WaterConnection20 = _data$WaterConnection19[0]) === null || _data$WaterConnection20 === void 0 ? void 0 : _data$WaterConnection20.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect15 = data.SewerageConnections) === null || _data$SewerageConnect15 === void 0 ? void 0 : (_data$SewerageConnect16 = _data$SewerageConnect15[0]) === null || _data$SewerageConnect16 === void 0 ? void 0 : _data$SewerageConnect16.tenantId);
      let res = (data === null || data === void 0 ? void 0 : (_data$WaterConnection21 = data.WaterConnection) === null || _data$WaterConnection21 === void 0 ? void 0 : _data$WaterConnection21[0]) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect17 = data.SewerageConnections) === null || _data$SewerageConnect17 === void 0 ? void 0 : _data$SewerageConnect17[0]);
      const PDFdata = getWSAcknowledgementData({
        ...res
      }, {
        ...(PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties = PTData.Properties) === null || _PTData$Properties === void 0 ? void 0 : _PTData$Properties[0])
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      setShowOptions(false);
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const handleDownloadDisconnectPdf = function () {
    try {
      var _data$WaterConnection22, _data$WaterConnection23, _data$SewerageConnect18, _data$SewerageConnect19, _data$WaterConnection24, _data$SewerageConnect20, _PTData$Properties2;
      const tenantInfo = (data === null || data === void 0 ? void 0 : (_data$WaterConnection22 = data.WaterConnection) === null || _data$WaterConnection22 === void 0 ? void 0 : (_data$WaterConnection23 = _data$WaterConnection22[0]) === null || _data$WaterConnection23 === void 0 ? void 0 : _data$WaterConnection23.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect18 = data.SewerageConnections) === null || _data$SewerageConnect18 === void 0 ? void 0 : (_data$SewerageConnect19 = _data$SewerageConnect18[0]) === null || _data$SewerageConnect19 === void 0 ? void 0 : _data$SewerageConnect19.tenantId);
      let res = (data === null || data === void 0 ? void 0 : (_data$WaterConnection24 = data.WaterConnection) === null || _data$WaterConnection24 === void 0 ? void 0 : _data$WaterConnection24[0]) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect20 = data.SewerageConnections) === null || _data$SewerageConnect20 === void 0 ? void 0 : _data$SewerageConnect20[0]);
      const PDFdata = getWSDisconnectionApplicationForm({
        ...res
      }, {
        ...(PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties2 = PTData.Properties) === null || _PTData$Properties2 === void 0 ? void 0 : _PTData$Properties2[0])
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      setShowOptions(false);
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const printApplicationReceipts = function () {
    try {
      var _data$WaterConnection25, _data$WaterConnection26, _data$WaterConnection27, _data$WaterConnection28, _data$SewerageConnect21, _data$SewerageConnect22;
      const tenantId = Digit.ULBService.getCurrentTenantId();
      const state = Digit.ULBService.getStateId();
      let key = data !== null && data !== void 0 && (_data$WaterConnection25 = data.WaterConnection) !== null && _data$WaterConnection25 !== void 0 && _data$WaterConnection25[0] ? "WS.ONE_TIME_FEE" : "SW.ONE_TIME_FEE";
      return Promise.resolve(Digit.PaymentService.getReciept(tenantId, key, {
        consumerCodes: data !== null && data !== void 0 && (_data$WaterConnection26 = data.WaterConnection) !== null && _data$WaterConnection26 !== void 0 && _data$WaterConnection26[0] ? data === null || data === void 0 ? void 0 : (_data$WaterConnection27 = data.WaterConnection) === null || _data$WaterConnection27 === void 0 ? void 0 : (_data$WaterConnection28 = _data$WaterConnection27[0]) === null || _data$WaterConnection28 === void 0 ? void 0 : _data$WaterConnection28.applicationNo : data === null || data === void 0 ? void 0 : (_data$SewerageConnect21 = data.SewerageConnections) === null || _data$SewerageConnect21 === void 0 ? void 0 : (_data$SewerageConnect22 = _data$SewerageConnect21[0]) === null || _data$SewerageConnect22 === void 0 ? void 0 : _data$SewerageConnect22.applicationNo
      })).then(function (payments) {
        var _payments$Payments$;
        function _temp2() {
          return Promise.resolve(Digit.PaymentService.printReciept(state, {
            fileStoreIds: response.filestoreIds[0]
          })).then(function (fileStore) {
            window.open(fileStore[response.filestoreIds[0]], "_blank");
          });
        }
        let response = {
          filestoreIds: [(_payments$Payments$ = payments.Payments[0]) === null || _payments$Payments$ === void 0 ? void 0 : _payments$Payments$.fileStoreId]
        };
        const _temp = function (_payments$Payments$2) {
          if (!((_payments$Payments$2 = payments.Payments[0]) !== null && _payments$Payments$2 !== void 0 && _payments$Payments$2.fileStoreId)) {
            return Promise.resolve(Digit.PaymentService.generatePdf(state, {
              Payments: payments.Payments
            }, generatePdfKey)).then(function (_Digit$PaymentService) {
              response = _Digit$PaymentService;
            });
          }
        }();
        return _temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp);
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  let downloadOptions = [];
  const wsEstimateDownloadObject = {
    order: 1,
    label: t("WS_ESTIMATION_NOTICE"),
    onClick: () => {
      var _data$WaterConnection29, _data$WaterConnection30, _data$WaterConnection31, _data$WaterConnection32, _data$SewerageConnect23, _data$SewerageConnect24, _data$SewerageConnect25;
      return data !== null && data !== void 0 && (_data$WaterConnection29 = data.WaterConnection) !== null && _data$WaterConnection29 !== void 0 && _data$WaterConnection29[0] ? getFiles([data === null || data === void 0 ? void 0 : (_data$WaterConnection30 = data.WaterConnection) === null || _data$WaterConnection30 === void 0 ? void 0 : (_data$WaterConnection31 = _data$WaterConnection30[0]) === null || _data$WaterConnection31 === void 0 ? void 0 : (_data$WaterConnection32 = _data$WaterConnection31.additionalDetails) === null || _data$WaterConnection32 === void 0 ? void 0 : _data$WaterConnection32.estimationFileStoreId], stateCode) : getFiles([data === null || data === void 0 ? void 0 : (_data$SewerageConnect23 = data.SewerageConnections) === null || _data$SewerageConnect23 === void 0 ? void 0 : (_data$SewerageConnect24 = _data$SewerageConnect23[0]) === null || _data$SewerageConnect24 === void 0 ? void 0 : (_data$SewerageConnect25 = _data$SewerageConnect24.additionalDetails) === null || _data$SewerageConnect25 === void 0 ? void 0 : _data$SewerageConnect25.estimationFileStoreId], stateCode);
    }
  };
  const sanctionDownloadObject = {
    order: 2,
    label: t("WS_SANCTION_LETTER"),
    onClick: () => {
      var _data$WaterConnection33, _data$WaterConnection34, _data$WaterConnection35, _data$WaterConnection36, _data$SewerageConnect26, _data$SewerageConnect27, _data$SewerageConnect28;
      return data !== null && data !== void 0 && (_data$WaterConnection33 = data.WaterConnection) !== null && _data$WaterConnection33 !== void 0 && _data$WaterConnection33[0] ? getFiles([data === null || data === void 0 ? void 0 : (_data$WaterConnection34 = data.WaterConnection) === null || _data$WaterConnection34 === void 0 ? void 0 : (_data$WaterConnection35 = _data$WaterConnection34[0]) === null || _data$WaterConnection35 === void 0 ? void 0 : (_data$WaterConnection36 = _data$WaterConnection35.additionalDetails) === null || _data$WaterConnection36 === void 0 ? void 0 : _data$WaterConnection36.sanctionFileStoreId], stateCode) : getFiles([data === null || data === void 0 ? void 0 : (_data$SewerageConnect26 = data.SewerageConnections) === null || _data$SewerageConnect26 === void 0 ? void 0 : (_data$SewerageConnect27 = _data$SewerageConnect26[0]) === null || _data$SewerageConnect27 === void 0 ? void 0 : (_data$SewerageConnect28 = _data$SewerageConnect27.additionalDetails) === null || _data$SewerageConnect28 === void 0 ? void 0 : _data$SewerageConnect28.sanctionFileStoreId], stateCode);
    }
  };
  const applicationDownloadObject = {
    order: 3,
    label: t("WS_APPLICATION"),
    onClick: handleDownloadPdf
  };
  const receiptApplicationFeeDownloadObject = {
    order: 4,
    label: t("WS_RECEIPT_APPLICATION_FEE"),
    onClick: printApplicationReceipts
  };
  const disconnectionNoticeNApplicationFormOptions = [{
    order: 1,
    label: t("WS_APPLICATION"),
    onClick: handleDownloadDisconnectPdf
  }, {
    order: 2,
    label: t("WS_DISCONNECTION_NOTICE_LABEL"),
    onClick: () => getDisconnectionNoticeSearch()
  }];
  const isDisconnection = (data === null || data === void 0 ? void 0 : (_data$WaterConnection37 = data.WaterConnection) === null || _data$WaterConnection37 === void 0 ? void 0 : (_data$WaterConnection38 = _data$WaterConnection37[0].applicationType) === null || _data$WaterConnection38 === void 0 ? void 0 : _data$WaterConnection38.includes("DISCONNECT")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect29 = data.SewerageConnections) === null || _data$SewerageConnect29 === void 0 ? void 0 : (_data$SewerageConnect30 = _data$SewerageConnect29[0].applicationType) === null || _data$SewerageConnect30 === void 0 ? void 0 : _data$SewerageConnect30.includes("DISCONNECT"));
  const appStatus = (data === null || data === void 0 ? void 0 : (_data$WaterConnection39 = data.WaterConnection) === null || _data$WaterConnection39 === void 0 ? void 0 : (_data$WaterConnection40 = _data$WaterConnection39[0]) === null || _data$WaterConnection40 === void 0 ? void 0 : _data$WaterConnection40.applicationStatus) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect31 = data.SewerageConnections) === null || _data$SewerageConnect31 === void 0 ? void 0 : (_data$SewerageConnect32 = _data$SewerageConnect31[0]) === null || _data$SewerageConnect32 === void 0 ? void 0 : _data$SewerageConnect32.applicationStatus);
  switch (appStatus) {
    case "PENDING_FOR_DOCUMENT_VERIFICATION":
      if (data !== null && data !== void 0 && (_data$WaterConnection41 = data.WaterConnection) !== null && _data$WaterConnection41 !== void 0 && (_data$WaterConnection42 = _data$WaterConnection41[0].applicationType) !== null && _data$WaterConnection42 !== void 0 && _data$WaterConnection42.includes("DISCONNECT") || data !== null && data !== void 0 && (_data$SewerageConnect33 = data.SewerageConnections) !== null && _data$SewerageConnect33 !== void 0 && (_data$SewerageConnect34 = _data$SewerageConnect33[0].applicationType) !== null && _data$SewerageConnect34 !== void 0 && _data$SewerageConnect34.includes("DISCONNECT")) {
        downloadOptions = disconnectionNoticeNApplicationFormOptions;
      } else {
        downloadOptions = downloadOptions.concat(applicationDownloadObject);
      }
      break;
    case "PENDING_FOR_CITIZEN_ACTION":
    case "PENDING_FOR_FIELD_INSPECTION":
      downloadOptions = downloadOptions.concat(applicationDownloadObject);
      break;
    case "PENDING_APPROVAL_FOR_CONNECTION":
    case "PENDING_FOR_PAYMENT":
      downloadOptions = downloadOptions.concat(applicationDownloadObject, wsEstimateDownloadObject);
      break;
    case "PENDING_FOR_CONNECTION_ACTIVATION":
    case "CONNECTION_ACTIVATED":
      downloadOptions = downloadOptions.concat(sanctionDownloadObject, wsEstimateDownloadObject, applicationDownloadObject, receiptApplicationFeeDownloadObject);
      break;
    case "REJECTED":
      downloadOptions = downloadOptions.concat(applicationDownloadObject);
      break;
    case "PENDING_FOR_DISCONNECTION_EXECUTION":
    case "DISCONNECTION_EXECUTED":
    case "PENDING_FOR_PAYMENT":
      if (data !== null && data !== void 0 && (_data$WaterConnection43 = data.WaterConnection) !== null && _data$WaterConnection43 !== void 0 && (_data$WaterConnection44 = _data$WaterConnection43[0].applicationType) !== null && _data$WaterConnection44 !== void 0 && _data$WaterConnection44.includes("DISCONNECT") || data !== null && data !== void 0 && (_data$SewerageConnect35 = data.SewerageConnections) !== null && _data$SewerageConnect35 !== void 0 && (_data$SewerageConnect36 = _data$SewerageConnect35[0].applicationType) !== null && _data$SewerageConnect36 !== void 0 && _data$SewerageConnect36.includes("DISCONNECT")) {
        downloadOptions = disconnectionNoticeNApplicationFormOptions;
      } else {
        downloadOptions = downloadOptions.concat(applicationDownloadObject);
      }
      break;
    default:
      downloadOptions = downloadOptions.concat(applicationDownloadObject);
      break;
  }
  downloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  let serviceType = data && data !== null && data !== void 0 && (_data$WaterConnection45 = data.WaterConnection) !== null && _data$WaterConnection45 !== void 0 && _data$WaterConnection45[0] ? "WATER" : "SEWERAGE";
  sessionStorage.setItem("ApplicationNoState", applicationNobyData);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, downloadOptions && downloadOptions.length > 0 && /*#__PURE__*/React__default.createElement("div", {
    ref: menuRef
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: downloadOptions
  })), /*#__PURE__*/React__default.createElement("div", {
    className: "cardHeaderWithOptions",
    style: {
      marginRight: "auto",
      maxWidth: "960px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_APPLICATION_DETAILS_HEADER"))), checkifPrivacyenabled && /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement("div", {
    className: "hide-seperator"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_MYCONNECTIONS_APPLICATION_NO"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection46 = data.WaterConnection) === null || _data$WaterConnection46 === void 0 ? void 0 : (_data$WaterConnection47 = _data$WaterConnection46[0]) === null || _data$WaterConnection47 === void 0 ? void 0 : _data$WaterConnection47.applicationNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect37 = data.SewerageConnections) === null || _data$SewerageConnect37 === void 0 ? void 0 : (_data$SewerageConnect38 = _data$SewerageConnect37[0]) === null || _data$SewerageConnect38 === void 0 ? void 0 : _data$SewerageConnect38.applicationNo),
    textStyle: {}
  }), ((data === null || data === void 0 ? void 0 : (_data$WaterConnection48 = data.WaterConnection) === null || _data$WaterConnection48 === void 0 ? void 0 : (_data$WaterConnection49 = _data$WaterConnection48[0].applicationType) === null || _data$WaterConnection49 === void 0 ? void 0 : _data$WaterConnection49.includes("DISCONNECT")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect39 = data.SewerageConnections) === null || _data$SewerageConnect39 === void 0 ? void 0 : (_data$SewerageConnect40 = _data$SewerageConnect39[0].applicationType) === null || _data$SewerageConnect40 === void 0 ? void 0 : _data$SewerageConnect40.includes("DISCONNECT"))) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection50 = data.WaterConnection) === null || _data$WaterConnection50 === void 0 ? void 0 : (_data$WaterConnection51 = _data$WaterConnection50[0]) === null || _data$WaterConnection51 === void 0 ? void 0 : _data$WaterConnection51.connectionNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect41 = data.SewerageConnections) === null || _data$SewerageConnect41 === void 0 ? void 0 : (_data$SewerageConnect42 = _data$SewerageConnect41[0]) === null || _data$SewerageConnect42 === void 0 ? void 0 : _data$SewerageConnect42.connectionNo),
    textStyle: {
      wordBreak: "break-word"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERVICE_NAME_LABEL"),
    text: t("WS_APPLICATION_TYPE_" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection52 = data.WaterConnection) === null || _data$WaterConnection52 === void 0 ? void 0 : (_data$WaterConnection53 = _data$WaterConnection52[0]) === null || _data$WaterConnection53 === void 0 ? void 0 : _data$WaterConnection53.applicationType) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect43 = data.SewerageConnections) === null || _data$SewerageConnect43 === void 0 ? void 0 : (_data$SewerageConnect44 = _data$SewerageConnect43[0]) === null || _data$SewerageConnect44 === void 0 ? void 0 : _data$SewerageConnect44.applicationType))),
    textStyle: {
      wordBreak: "break-word"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),
    text: paymentDetails !== null && paymentDetails !== void 0 && (_paymentDetails$data = paymentDetails.data) !== null && _paymentDetails$data !== void 0 && (_paymentDetails$data$ = _paymentDetails$data.Bill) !== null && _paymentDetails$data$ !== void 0 && (_paymentDetails$data$2 = _paymentDetails$data$[0]) !== null && _paymentDetails$data$2 !== void 0 && (_paymentDetails$data$3 = _paymentDetails$data$2.billDetails) !== null && _paymentDetails$data$3 !== void 0 && (_paymentDetails$data$4 = _paymentDetails$data$3[0]) !== null && _paymentDetails$data$4 !== void 0 && _paymentDetails$data$4.amount ? "₹ " + Number(paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data2 = paymentDetails.data) === null || _paymentDetails$data2 === void 0 ? void 0 : (_paymentDetails$data3 = _paymentDetails$data2.Bill) === null || _paymentDetails$data3 === void 0 ? void 0 : (_paymentDetails$data4 = _paymentDetails$data3[0]) === null || _paymentDetails$data4 === void 0 ? void 0 : (_paymentDetails$data5 = _paymentDetails$data4.billDetails) === null || _paymentDetails$data5 === void 0 ? void 0 : (_paymentDetails$data6 = _paymentDetails$data5[0]) === null || _paymentDetails$data6 === void 0 ? void 0 : _paymentDetails$data6.amount).toFixed(2) : t("₹0"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), ((data === null || data === void 0 ? void 0 : (_data$WaterConnection54 = data.WaterConnection) === null || _data$WaterConnection54 === void 0 ? void 0 : (_data$WaterConnection55 = _data$WaterConnection54[0].applicationType) === null || _data$WaterConnection55 === void 0 ? void 0 : _data$WaterConnection55.includes("DISCONNECT")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect45 = data.SewerageConnections) === null || _data$SewerageConnect45 === void 0 ? void 0 : (_data$SewerageConnect46 = _data$SewerageConnect45[0].applicationType) === null || _data$SewerageConnect46 === void 0 ? void 0 : _data$SewerageConnect46.includes("DISCONNECT"))) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_PROPOSED_DATE"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? convertEpochToDate(data === null || data === void 0 ? void 0 : (_data$WaterConnection56 = data.WaterConnection) === null || _data$WaterConnection56 === void 0 ? void 0 : (_data$WaterConnection57 = _data$WaterConnection56[0]) === null || _data$WaterConnection57 === void 0 ? void 0 : _data$WaterConnection57.dateEffectiveFrom) : convertEpochToDate(data === null || data === void 0 ? void 0 : (_data$SewerageConnect47 = data.SewerageConnections) === null || _data$SewerageConnect47 === void 0 ? void 0 : (_data$SewerageConnect48 = _data$SewerageConnect47[0]) === null || _data$SewerageConnect48 === void 0 ? void 0 : _data$SewerageConnect48.dateEffectiveFrom),
    textStyle: {
      wordBreak: "break-word"
    }
  }), ((data === null || data === void 0 ? void 0 : (_data$WaterConnection58 = data.WaterConnection) === null || _data$WaterConnection58 === void 0 ? void 0 : (_data$WaterConnection59 = _data$WaterConnection58[0].applicationType) === null || _data$WaterConnection59 === void 0 ? void 0 : _data$WaterConnection59.includes("DISCONNECT")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect49 = data.SewerageConnections) === null || _data$SewerageConnect49 === void 0 ? void 0 : (_data$SewerageConnect50 = _data$SewerageConnect49[0].applicationType) === null || _data$SewerageConnect50 === void 0 ? void 0 : _data$SewerageConnect50.includes("DISCONNECT"))) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_EXECUTED_DATE"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? convertEpochToDate(data === null || data === void 0 ? void 0 : (_data$WaterConnection60 = data.WaterConnection) === null || _data$WaterConnection60 === void 0 ? void 0 : (_data$WaterConnection61 = _data$WaterConnection60[0]) === null || _data$WaterConnection61 === void 0 ? void 0 : _data$WaterConnection61.disconnectionExecutionDate) : convertEpochToDate(data === null || data === void 0 ? void 0 : (_data$SewerageConnect51 = data.SewerageConnections) === null || _data$SewerageConnect51 === void 0 ? void 0 : (_data$SewerageConnect52 = _data$SewerageConnect51[0]) === null || _data$SewerageConnect52 === void 0 ? void 0 : _data$SewerageConnect52.disconnectionExecutionDate),
    textStyle: {
      wordBreak: "break-word"
    }
  }), ((data === null || data === void 0 ? void 0 : (_data$WaterConnection62 = data.WaterConnection) === null || _data$WaterConnection62 === void 0 ? void 0 : (_data$WaterConnection63 = _data$WaterConnection62[0].applicationType) === null || _data$WaterConnection63 === void 0 ? void 0 : _data$WaterConnection63.includes("DISCONNECT")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect53 = data.SewerageConnections) === null || _data$SewerageConnect53 === void 0 ? void 0 : (_data$SewerageConnect54 = _data$SewerageConnect53[0].applicationType) === null || _data$SewerageConnect54 === void 0 ? void 0 : _data$SewerageConnect54.includes("DISCONNECT"))) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_REASON"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection64 = data.WaterConnection) === null || _data$WaterConnection64 === void 0 ? void 0 : (_data$WaterConnection65 = _data$WaterConnection64[0]) === null || _data$WaterConnection65 === void 0 ? void 0 : _data$WaterConnection65.disconnectionReason) != null ? data === null || data === void 0 ? void 0 : (_data$WaterConnection66 = data.WaterConnection) === null || _data$WaterConnection66 === void 0 ? void 0 : (_data$WaterConnection67 = _data$WaterConnection66[0]) === null || _data$WaterConnection67 === void 0 ? void 0 : _data$WaterConnection67.disconnectionReason : (data === null || data === void 0 ? void 0 : (_data$SewerageConnect55 = data.SewerageConnections) === null || _data$SewerageConnect55 === void 0 ? void 0 : (_data$SewerageConnect56 = _data$SewerageConnect55[0]) === null || _data$SewerageConnect56 === void 0 ? void 0 : _data$SewerageConnect56.disconnectionReason) != null ? data === null || data === void 0 ? void 0 : (_data$SewerageConnect57 = data.SewerageConnections) === null || _data$SewerageConnect57 === void 0 ? void 0 : (_data$SewerageConnect58 = _data$SewerageConnect57[0]) === null || _data$SewerageConnect58 === void 0 ? void 0 : _data$SewerageConnect58.disconnectionReason : t("NA"),
    textStyle: {
      wordBreak: "break-word"
    }
  }))), (paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data7 = paymentDetails.data) === null || _paymentDetails$data7 === void 0 ? void 0 : (_paymentDetails$data8 = _paymentDetails$data7.Bill) === null || _paymentDetails$data8 === void 0 ? void 0 : (_paymentDetails$data9 = _paymentDetails$data8[0]) === null || _paymentDetails$data9 === void 0 ? void 0 : (_paymentDetails$data10 = _paymentDetails$data9.billDetails) === null || _paymentDetails$data10 === void 0 ? void 0 : (_paymentDetails$data11 = _paymentDetails$data10[0]) === null || _paymentDetails$data11 === void 0 ? void 0 : _paymentDetails$data11.billAccountDetails.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_FEE_DEATAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data12 = paymentDetails.data) === null || _paymentDetails$data12 === void 0 ? void 0 : (_paymentDetails$data13 = _paymentDetails$data12.Bill) === null || _paymentDetails$data13 === void 0 ? void 0 : (_paymentDetails$data14 = _paymentDetails$data13[0]) === null || _paymentDetails$data14 === void 0 ? void 0 : (_paymentDetails$data15 = _paymentDetails$data14.billDetails) === null || _paymentDetails$data15 === void 0 ? void 0 : (_paymentDetails$data16 = _paymentDetails$data15[0]) === null || _paymentDetails$data16 === void 0 ? void 0 : _paymentDetails$data16.billAccountDetails.map(bill => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t(bill === null || bill === void 0 ? void 0 : bill.taxHeadCode),
    text: "\u20B9" + Number(bill === null || bill === void 0 ? void 0 : bill.amount).toFixed(2),
    textStyle: {
      textAlign: "right"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_TOTAL_AMOUNT_DUE"),
    text: "\u20B9" + Number(isPaid ? 0 : paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data17 = paymentDetails.data) === null || _paymentDetails$data17 === void 0 ? void 0 : (_paymentDetails$data18 = _paymentDetails$data17.Bill) === null || _paymentDetails$data18 === void 0 ? void 0 : (_paymentDetails$data19 = _paymentDetails$data18[0]) === null || _paymentDetails$data19 === void 0 ? void 0 : (_paymentDetails$data20 = _paymentDetails$data19.billDetails) === null || _paymentDetails$data20 === void 0 ? void 0 : (_paymentDetails$data21 = _paymentDetails$data20[0]) === null || _paymentDetails$data21 === void 0 ? void 0 : _paymentDetails$data21.amount).toFixed(2),
    textStyle: {
      textAlign: "right",
      fontSize: "18px",
      fontWeight: "700"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),
    text: isPaid || Number(paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data22 = paymentDetails.data) === null || _paymentDetails$data22 === void 0 ? void 0 : (_paymentDetails$data23 = _paymentDetails$data22.Bill) === null || _paymentDetails$data23 === void 0 ? void 0 : (_paymentDetails$data24 = _paymentDetails$data23[0]) === null || _paymentDetails$data24 === void 0 ? void 0 : (_paymentDetails$data25 = _paymentDetails$data24.billDetails) === null || _paymentDetails$data25 === void 0 ? void 0 : (_paymentDetails$data26 = _paymentDetails$data25[0]) === null || _paymentDetails$data26 === void 0 ? void 0 : _paymentDetails$data26.amount).toFixed(2) == 0 ? t("WS_COMMON_PAID_LABEL") : t("WS_COMMON_NOT_PAID"),
    textStyle: isPaid || Number(paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data27 = paymentDetails.data) === null || _paymentDetails$data27 === void 0 ? void 0 : (_paymentDetails$data28 = _paymentDetails$data27.Bill) === null || _paymentDetails$data28 === void 0 ? void 0 : (_paymentDetails$data29 = _paymentDetails$data28[0]) === null || _paymentDetails$data29 === void 0 ? void 0 : (_paymentDetails$data30 = _paymentDetails$data29.billDetails) === null || _paymentDetails$data30 === void 0 ? void 0 : (_paymentDetails$data31 = _paymentDetails$data30[0]) === null || _paymentDetails$data31 === void 0 ? void 0 : _paymentDetails$data31.amount).toFixed(2) == 0 ? {
      textAlign: "right",
      color: "darkgreen"
    } : {
      textAlign: "right",
      color: "red"
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_PROPERTY_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PROPERTY_ID_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection68 = data.WaterConnection) === null || _data$WaterConnection68 === void 0 ? void 0 : (_data$WaterConnection69 = _data$WaterConnection68[0]) === null || _data$WaterConnection69 === void 0 ? void 0 : _data$WaterConnection69.propertyId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect59 = data.SewerageConnections) === null || _data$SewerageConnect59 === void 0 ? void 0 : (_data$SewerageConnect60 = _data$SewerageConnect59[0]) === null || _data$SewerageConnect60 === void 0 ? void 0 : _data$SewerageConnect60.propertyId),
    textStyle: {
      wordBreak: "break-word"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_OWN_NAME_LABEL"),
    text: PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties3 = PTData.Properties) === null || _PTData$Properties3 === void 0 ? void 0 : (_PTData$Properties3$ = _PTData$Properties3[0]) === null || _PTData$Properties3$ === void 0 ? void 0 : (_PTData$Properties3$$ = _PTData$Properties3$.owners) === null || _PTData$Properties3$$ === void 0 ? void 0 : (_PTData$Properties3$$2 = _PTData$Properties3$$[0]) === null || _PTData$Properties3$$2 === void 0 ? void 0 : _PTData$Properties3$$2.name,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PROPERTY_ADDRESS"),
    text: getAddress(PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties4 = PTData.Properties) === null || _PTData$Properties4 === void 0 ? void 0 : (_PTData$Properties4$ = _PTData$Properties4[0]) === null || _PTData$Properties4$ === void 0 ? void 0 : _PTData$Properties4$.address, t) || t("CS_NA"),
    textStyle: {
      wordBreak: "break-word"
    },
    privacy: {
      uuid: PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties5 = PTData.Properties) === null || _PTData$Properties5 === void 0 ? void 0 : (_PTData$Properties5$ = _PTData$Properties5[0]) === null || _PTData$Properties5$ === void 0 ? void 0 : (_PTData$Properties5$$ = _PTData$Properties5$.owners) === null || _PTData$Properties5$$ === void 0 ? void 0 : (_PTData$Properties5$$2 = _PTData$Properties5$$[0]) === null || _PTData$Properties5$$2 === void 0 ? void 0 : _PTData$Properties5$$2.uuid,
      fieldName: ["doorNo", "street", "landmark"],
      model: "Property",
      hide: !(PTData !== null && PTData !== void 0 && (_PTData$Properties6 = PTData.Properties) !== null && _PTData$Properties6 !== void 0 && (_PTData$Properties6$ = _PTData$Properties6[0]) !== null && _PTData$Properties6$ !== void 0 && _PTData$Properties6$.address),
      showValue: true,
      loadData: {
        serviceName: "/property-services/property/_search",
        requestBody: {},
        requestParam: {
          tenantId: tenantId,
          propertyIds: (data === null || data === void 0 ? void 0 : (_data$WaterConnection70 = data.WaterConnection) === null || _data$WaterConnection70 === void 0 ? void 0 : (_data$WaterConnection71 = _data$WaterConnection70[0]) === null || _data$WaterConnection71 === void 0 ? void 0 : _data$WaterConnection71.propertyId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect61 = data.SewerageConnections) === null || _data$SewerageConnect61 === void 0 ? void 0 : (_data$SewerageConnect62 = _data$SewerageConnect61[0]) === null || _data$SewerageConnect62 === void 0 ? void 0 : _data$SewerageConnect62.propertyId)
        },
        jsonPath: "Properties[0].address.street",
        isArray: false,
        d: res => {
          let resultString = (lodash.get(res, "Properties[0].address.doorNo") ? lodash.get(res, "Properties[0].address.doorNo") + ", " : "") + (lodash.get(res, "Properties[0].address.street") ? lodash.get(res, "Properties[0].address.street") + ", " : "") + (lodash.get(res, "Properties[0].address.landmark") ? "" + lodash.get(res, "Properties[0].address.landmark") : "");
          return resultString;
        }
      }
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/commonpt/view-property?propertyId=" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection72 = data.WaterConnection) === null || _data$WaterConnection72 === void 0 ? void 0 : (_data$WaterConnection73 = _data$WaterConnection72[0]) === null || _data$WaterConnection73 === void 0 ? void 0 : _data$WaterConnection73.propertyId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect63 = data.SewerageConnections) === null || _data$SewerageConnect63 === void 0 ? void 0 : (_data$SewerageConnect64 = _data$SewerageConnect63[0]) === null || _data$SewerageConnect64 === void 0 ? void 0 : _data$SewerageConnect64.propertyId)) + "&tenantId=" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection74 = data.WaterConnection) === null || _data$WaterConnection74 === void 0 ? void 0 : (_data$WaterConnection75 = _data$WaterConnection74[0]) === null || _data$WaterConnection75 === void 0 ? void 0 : _data$WaterConnection75.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect65 = data.SewerageConnections) === null || _data$SewerageConnect65 === void 0 ? void 0 : (_data$SewerageConnect66 = _data$SewerageConnect65[0]) === null || _data$SewerageConnect66 === void 0 ? void 0 : _data$SewerageConnect66.tenantId))
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left"
    },
    label: t("WS_VIEW_PROPERTY")
  })))), (data === null || data === void 0 ? void 0 : (_data$WaterConnection76 = data.WaterConnection) === null || _data$WaterConnection76 === void 0 ? void 0 : (_data$WaterConnection77 = _data$WaterConnection76[0]) === null || _data$WaterConnection77 === void 0 ? void 0 : (_data$WaterConnection78 = _data$WaterConnection77.connectionHolders) === null || _data$WaterConnection78 === void 0 ? void 0 : _data$WaterConnection78.length) > 0 || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect67 = data.SewerageConnections) === null || _data$SewerageConnect67 === void 0 ? void 0 : (_data$SewerageConnect68 = _data$SewerageConnect67[0]) === null || _data$SewerageConnect68 === void 0 ? void 0 : (_data$SewerageConnect69 = _data$SewerageConnect68.connectionHolders) === null || _data$SewerageConnect69 === void 0 ? void 0 : _data$SewerageConnect69.length) > 0 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_MOBILE_NO_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection79 = data.WaterConnection) === null || _data$WaterConnection79 === void 0 ? void 0 : (_data$WaterConnection80 = _data$WaterConnection79[0]) === null || _data$WaterConnection80 === void 0 ? void 0 : (_data$WaterConnection81 = _data$WaterConnection80.connectionHolders) === null || _data$WaterConnection81 === void 0 ? void 0 : (_data$WaterConnection82 = _data$WaterConnection81[0]) === null || _data$WaterConnection82 === void 0 ? void 0 : _data$WaterConnection82.mobileNumber) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect70 = data.SewerageConnections) === null || _data$SewerageConnect70 === void 0 ? void 0 : (_data$SewerageConnect71 = _data$SewerageConnect70[0]) === null || _data$SewerageConnect71 === void 0 ? void 0 : (_data$SewerageConnect72 = _data$SewerageConnect71.connectionHolders) === null || _data$SewerageConnect72 === void 0 ? void 0 : (_data$SewerageConnect73 = _data$SewerageConnect72[0]) === null || _data$SewerageConnect73 === void 0 ? void 0 : _data$SewerageConnect73.mobileNumber),
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection83 = data.WaterConnection) === null || _data$WaterConnection83 === void 0 ? void 0 : (_data$WaterConnection84 = _data$WaterConnection83[0]) === null || _data$WaterConnection84 === void 0 ? void 0 : (_data$WaterConnection85 = _data$WaterConnection84.connectionHolders) === null || _data$WaterConnection85 === void 0 ? void 0 : (_data$WaterConnection86 = _data$WaterConnection85[0]) === null || _data$WaterConnection86 === void 0 ? void 0 : _data$WaterConnection86.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect74 = data.SewerageConnections) === null || _data$SewerageConnect74 === void 0 ? void 0 : (_data$SewerageConnect75 = _data$SewerageConnect74[0]) === null || _data$SewerageConnect75 === void 0 ? void 0 : (_data$SewerageConnect76 = _data$SewerageConnect75.connectionHolders) === null || _data$SewerageConnect76 === void 0 ? void 0 : (_data$SewerageConnect77 = _data$SewerageConnect76[0]) === null || _data$SewerageConnect77 === void 0 ? void 0 : _data$SewerageConnect77.uuid,
      fieldName: "connectionHoldersMobileNumber",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].mobileNumber" : "SewerageConnections[0].connectionHolders[0].mobileNumber",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_OWN_NAME_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection87 = data.WaterConnection) === null || _data$WaterConnection87 === void 0 ? void 0 : (_data$WaterConnection88 = _data$WaterConnection87[0]) === null || _data$WaterConnection88 === void 0 ? void 0 : (_data$WaterConnection89 = _data$WaterConnection88.connectionHolders) === null || _data$WaterConnection89 === void 0 ? void 0 : (_data$WaterConnection90 = _data$WaterConnection89[0]) === null || _data$WaterConnection90 === void 0 ? void 0 : _data$WaterConnection90.name) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect78 = data.SewerageConnections) === null || _data$SewerageConnect78 === void 0 ? void 0 : (_data$SewerageConnect79 = _data$SewerageConnect78[0]) === null || _data$SewerageConnect79 === void 0 ? void 0 : (_data$SewerageConnect80 = _data$SewerageConnect79.connectionHolders) === null || _data$SewerageConnect80 === void 0 ? void 0 : (_data$SewerageConnect81 = _data$SewerageConnect80[0]) === null || _data$SewerageConnect81 === void 0 ? void 0 : _data$SewerageConnect81.name),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_GENDER_LABEL"),
    text: t((data === null || data === void 0 ? void 0 : (_data$WaterConnection91 = data.WaterConnection) === null || _data$WaterConnection91 === void 0 ? void 0 : (_data$WaterConnection92 = _data$WaterConnection91[0]) === null || _data$WaterConnection92 === void 0 ? void 0 : (_data$WaterConnection93 = _data$WaterConnection92.connectionHolders) === null || _data$WaterConnection93 === void 0 ? void 0 : (_data$WaterConnection94 = _data$WaterConnection93[0]) === null || _data$WaterConnection94 === void 0 ? void 0 : _data$WaterConnection94.gender) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect82 = data.SewerageConnections) === null || _data$SewerageConnect82 === void 0 ? void 0 : (_data$SewerageConnect83 = _data$SewerageConnect82[0]) === null || _data$SewerageConnect83 === void 0 ? void 0 : (_data$SewerageConnect84 = _data$SewerageConnect83.connectionHolders) === null || _data$SewerageConnect84 === void 0 ? void 0 : (_data$SewerageConnect85 = _data$SewerageConnect84[0]) === null || _data$SewerageConnect85 === void 0 ? void 0 : _data$SewerageConnect85.gender)),
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection95 = data.WaterConnection) === null || _data$WaterConnection95 === void 0 ? void 0 : (_data$WaterConnection96 = _data$WaterConnection95[0]) === null || _data$WaterConnection96 === void 0 ? void 0 : (_data$WaterConnection97 = _data$WaterConnection96.connectionHolders) === null || _data$WaterConnection97 === void 0 ? void 0 : (_data$WaterConnection98 = _data$WaterConnection97[0]) === null || _data$WaterConnection98 === void 0 ? void 0 : _data$WaterConnection98.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect86 = data.SewerageConnections) === null || _data$SewerageConnect86 === void 0 ? void 0 : (_data$SewerageConnect87 = _data$SewerageConnect86[0]) === null || _data$SewerageConnect87 === void 0 ? void 0 : (_data$SewerageConnect88 = _data$SewerageConnect87.connectionHolders) === null || _data$SewerageConnect88 === void 0 ? void 0 : (_data$SewerageConnect89 = _data$SewerageConnect88[0]) === null || _data$SewerageConnect89 === void 0 ? void 0 : _data$SewerageConnect89.uuid,
      fieldName: "gender",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].gender" : "SewerageConnections[0].connectionHolders[0].gender",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection99 = data.WaterConnection) === null || _data$WaterConnection99 === void 0 ? void 0 : (_data$WaterConnection100 = _data$WaterConnection99[0]) === null || _data$WaterConnection100 === void 0 ? void 0 : (_data$WaterConnection101 = _data$WaterConnection100.connectionHolders) === null || _data$WaterConnection101 === void 0 ? void 0 : (_data$WaterConnection102 = _data$WaterConnection101[0]) === null || _data$WaterConnection102 === void 0 ? void 0 : _data$WaterConnection102.fatherOrHusbandName) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect90 = data.SewerageConnections) === null || _data$SewerageConnect90 === void 0 ? void 0 : (_data$SewerageConnect91 = _data$SewerageConnect90[0]) === null || _data$SewerageConnect91 === void 0 ? void 0 : (_data$SewerageConnect92 = _data$SewerageConnect91.connectionHolders) === null || _data$SewerageConnect92 === void 0 ? void 0 : (_data$SewerageConnect93 = _data$SewerageConnect92[0]) === null || _data$SewerageConnect93 === void 0 ? void 0 : _data$SewerageConnect93.fatherOrHusbandName) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection103 = data.WaterConnection) === null || _data$WaterConnection103 === void 0 ? void 0 : (_data$WaterConnection104 = _data$WaterConnection103[0]) === null || _data$WaterConnection104 === void 0 ? void 0 : (_data$WaterConnection105 = _data$WaterConnection104.connectionHolders) === null || _data$WaterConnection105 === void 0 ? void 0 : (_data$WaterConnection106 = _data$WaterConnection105[0]) === null || _data$WaterConnection106 === void 0 ? void 0 : _data$WaterConnection106.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect94 = data.SewerageConnections) === null || _data$SewerageConnect94 === void 0 ? void 0 : (_data$SewerageConnect95 = _data$SewerageConnect94[0]) === null || _data$SewerageConnect95 === void 0 ? void 0 : (_data$SewerageConnect96 = _data$SewerageConnect95.connectionHolders) === null || _data$SewerageConnect96 === void 0 ? void 0 : (_data$SewerageConnect97 = _data$SewerageConnect96[0]) === null || _data$SewerageConnect97 === void 0 ? void 0 : _data$SewerageConnect97.uuid,
      fieldName: "fatherOrHusbandName",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].fatherOrHusbandName" : "SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_RELATION_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection107 = data.WaterConnection) === null || _data$WaterConnection107 === void 0 ? void 0 : (_data$WaterConnection108 = _data$WaterConnection107[0]) === null || _data$WaterConnection108 === void 0 ? void 0 : (_data$WaterConnection109 = _data$WaterConnection108.connectionHolders) === null || _data$WaterConnection109 === void 0 ? void 0 : (_data$WaterConnection110 = _data$WaterConnection109[0]) === null || _data$WaterConnection110 === void 0 ? void 0 : _data$WaterConnection110.relationship) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect98 = data.SewerageConnections) === null || _data$SewerageConnect98 === void 0 ? void 0 : (_data$SewerageConnect99 = _data$SewerageConnect98[0]) === null || _data$SewerageConnect99 === void 0 ? void 0 : (_data$SewerageConnect100 = _data$SewerageConnect99.connectionHolders) === null || _data$SewerageConnect100 === void 0 ? void 0 : (_data$SewerageConnect101 = _data$SewerageConnect100[0]) === null || _data$SewerageConnect101 === void 0 ? void 0 : _data$SewerageConnect101.relationship) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection111 = data.WaterConnection) === null || _data$WaterConnection111 === void 0 ? void 0 : (_data$WaterConnection112 = _data$WaterConnection111[0]) === null || _data$WaterConnection112 === void 0 ? void 0 : (_data$WaterConnection113 = _data$WaterConnection112.connectionHolders) === null || _data$WaterConnection113 === void 0 ? void 0 : (_data$WaterConnection114 = _data$WaterConnection113[0]) === null || _data$WaterConnection114 === void 0 ? void 0 : _data$WaterConnection114.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect102 = data.SewerageConnections) === null || _data$SewerageConnect102 === void 0 ? void 0 : (_data$SewerageConnect103 = _data$SewerageConnect102[0]) === null || _data$SewerageConnect103 === void 0 ? void 0 : (_data$SewerageConnect104 = _data$SewerageConnect103.connectionHolders) === null || _data$SewerageConnect104 === void 0 ? void 0 : (_data$SewerageConnect105 = _data$SewerageConnect104[0]) === null || _data$SewerageConnect105 === void 0 ? void 0 : _data$SewerageConnect105.uuid,
      fieldName: "relationship",
      model: "WnSConnection",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].relationship" : "SewerageConnections[0].connectionHolders[0].relationship",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_CROSADD"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection115 = data.WaterConnection) === null || _data$WaterConnection115 === void 0 ? void 0 : (_data$WaterConnection116 = _data$WaterConnection115[0]) === null || _data$WaterConnection116 === void 0 ? void 0 : (_data$WaterConnection117 = _data$WaterConnection116.connectionHolders) === null || _data$WaterConnection117 === void 0 ? void 0 : (_data$WaterConnection118 = _data$WaterConnection117[0]) === null || _data$WaterConnection118 === void 0 ? void 0 : _data$WaterConnection118.correspondenceAddress) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect106 = data.SewerageConnections) === null || _data$SewerageConnect106 === void 0 ? void 0 : (_data$SewerageConnect107 = _data$SewerageConnect106[0]) === null || _data$SewerageConnect107 === void 0 ? void 0 : (_data$SewerageConnect108 = _data$SewerageConnect107.connectionHolders) === null || _data$SewerageConnect108 === void 0 ? void 0 : (_data$SewerageConnect109 = _data$SewerageConnect108[0]) === null || _data$SewerageConnect109 === void 0 ? void 0 : _data$SewerageConnect109.correspondenceAddress) || t("CS_NA"),
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection119 = data.WaterConnection) === null || _data$WaterConnection119 === void 0 ? void 0 : (_data$WaterConnection120 = _data$WaterConnection119[0]) === null || _data$WaterConnection120 === void 0 ? void 0 : (_data$WaterConnection121 = _data$WaterConnection120.connectionHolders) === null || _data$WaterConnection121 === void 0 ? void 0 : (_data$WaterConnection122 = _data$WaterConnection121[0]) === null || _data$WaterConnection122 === void 0 ? void 0 : _data$WaterConnection122.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect110 = data.SewerageConnections) === null || _data$SewerageConnect110 === void 0 ? void 0 : (_data$SewerageConnect111 = _data$SewerageConnect110[0]) === null || _data$SewerageConnect111 === void 0 ? void 0 : (_data$SewerageConnect112 = _data$SewerageConnect111.connectionHolders) === null || _data$SewerageConnect112 === void 0 ? void 0 : (_data$SewerageConnect113 = _data$SewerageConnect112[0]) === null || _data$SewerageConnect113 === void 0 ? void 0 : _data$SewerageConnect113.uuid,
      fieldName: "correspondenceAddress",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].correspondenceAddress" : "SewerageConnections[0].connectionHolders[0].correspondenceAddress",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),
    text: (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? !(data !== null && data !== void 0 && (_data$WaterConnection123 = data.WaterConnection) !== null && _data$WaterConnection123 !== void 0 && (_data$WaterConnection124 = _data$WaterConnection123[0]) !== null && _data$WaterConnection124 !== void 0 && (_data$WaterConnection125 = _data$WaterConnection124.connectionHolders) !== null && _data$WaterConnection125 !== void 0 && (_data$WaterConnection126 = _data$WaterConnection125[0]) !== null && _data$WaterConnection126 !== void 0 && (_data$WaterConnection127 = _data$WaterConnection126.ownerType) !== null && _data$WaterConnection127 !== void 0 && _data$WaterConnection127.includes("*")) : !(data !== null && data !== void 0 && (_data$SewerageConnect114 = data.SewerageConnections) !== null && _data$SewerageConnect114 !== void 0 && (_data$SewerageConnect115 = _data$SewerageConnect114[0]) !== null && _data$SewerageConnect115 !== void 0 && (_data$SewerageConnect116 = _data$SewerageConnect115.connectionHolders) !== null && _data$SewerageConnect116 !== void 0 && (_data$SewerageConnect117 = _data$SewerageConnect116[0]) !== null && _data$SewerageConnect117 !== void 0 && (_data$SewerageConnect118 = _data$SewerageConnect117.ownerType) !== null && _data$SewerageConnect118 !== void 0 && _data$SewerageConnect118.includes("*"))) ? t("COMMON_MASTERS_OWNERTYPE_" + (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection128 = data.WaterConnection) === null || _data$WaterConnection128 === void 0 ? void 0 : (_data$WaterConnection129 = _data$WaterConnection128[0]) === null || _data$WaterConnection129 === void 0 ? void 0 : (_data$WaterConnection130 = _data$WaterConnection129.connectionHolders) === null || _data$WaterConnection130 === void 0 ? void 0 : (_data$WaterConnection131 = _data$WaterConnection130[0]) === null || _data$WaterConnection131 === void 0 ? void 0 : _data$WaterConnection131.ownerType : data === null || data === void 0 ? void 0 : (_data$SewerageConnect119 = data.SewerageConnections) === null || _data$SewerageConnect119 === void 0 ? void 0 : (_data$SewerageConnect120 = _data$SewerageConnect119[0]) === null || _data$SewerageConnect120 === void 0 ? void 0 : (_data$SewerageConnect121 = _data$SewerageConnect120.connectionHolders) === null || _data$SewerageConnect121 === void 0 ? void 0 : (_data$SewerageConnect122 = _data$SewerageConnect121[0]) === null || _data$SewerageConnect122 === void 0 ? void 0 : _data$SewerageConnect122.ownerType)) : applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection132 = data.WaterConnection) === null || _data$WaterConnection132 === void 0 ? void 0 : (_data$WaterConnection133 = _data$WaterConnection132[0]) === null || _data$WaterConnection133 === void 0 ? void 0 : (_data$WaterConnection134 = _data$WaterConnection133.connectionHolders) === null || _data$WaterConnection134 === void 0 ? void 0 : (_data$WaterConnection135 = _data$WaterConnection134[0]) === null || _data$WaterConnection135 === void 0 ? void 0 : _data$WaterConnection135.ownerType : data === null || data === void 0 ? void 0 : (_data$SewerageConnect123 = data.SewerageConnections) === null || _data$SewerageConnect123 === void 0 ? void 0 : (_data$SewerageConnect124 = _data$SewerageConnect123[0]) === null || _data$SewerageConnect124 === void 0 ? void 0 : (_data$SewerageConnect125 = _data$SewerageConnect124.connectionHolders) === null || _data$SewerageConnect125 === void 0 ? void 0 : (_data$SewerageConnect126 = _data$SewerageConnect125[0]) === null || _data$SewerageConnect126 === void 0 ? void 0 : _data$SewerageConnect126.ownerType,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection136 = data.WaterConnection) === null || _data$WaterConnection136 === void 0 ? void 0 : (_data$WaterConnection137 = _data$WaterConnection136[0]) === null || _data$WaterConnection137 === void 0 ? void 0 : (_data$WaterConnection138 = _data$WaterConnection137.connectionHolders) === null || _data$WaterConnection138 === void 0 ? void 0 : (_data$WaterConnection139 = _data$WaterConnection138[0]) === null || _data$WaterConnection139 === void 0 ? void 0 : _data$WaterConnection139.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect127 = data.SewerageConnections) === null || _data$SewerageConnect127 === void 0 ? void 0 : (_data$SewerageConnect128 = _data$SewerageConnect127[0]) === null || _data$SewerageConnect128 === void 0 ? void 0 : (_data$SewerageConnect129 = _data$SewerageConnect128.connectionHolders) === null || _data$SewerageConnect129 === void 0 ? void 0 : (_data$SewerageConnect130 = _data$SewerageConnect129[0]) === null || _data$SewerageConnect130 === void 0 ? void 0 : _data$SewerageConnect130.uuid,
      fieldName: "ownerType",
      model: "WnSConnection",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].ownerType" : "SewerageConnections[0].connectionHolders[0].ownerType",
        isArray: false,
        d: res => {
          var _res$WaterConnection, _res$WaterConnection2, _res$WaterConnection3, _res$WaterConnection4, _res$WaterConnection5, _res$WaterConnection6, _res$SewerageConnecti, _res$SewerageConnecti2, _res$SewerageConnecti3, _res$SewerageConnecti4, _res$SewerageConnecti5;
          let resultString = res !== null && res !== void 0 && (_res$WaterConnection = res.WaterConnection) !== null && _res$WaterConnection !== void 0 && _res$WaterConnection[0] ? t("PROPERTYTAX_OWNERTYPE_" + (res === null || res === void 0 ? void 0 : (_res$WaterConnection2 = res.WaterConnection) === null || _res$WaterConnection2 === void 0 ? void 0 : (_res$WaterConnection3 = _res$WaterConnection2[0]) === null || _res$WaterConnection3 === void 0 ? void 0 : (_res$WaterConnection4 = _res$WaterConnection3.connectionHolders) === null || _res$WaterConnection4 === void 0 ? void 0 : (_res$WaterConnection5 = _res$WaterConnection4[0]) === null || _res$WaterConnection5 === void 0 ? void 0 : (_res$WaterConnection6 = _res$WaterConnection5.ownerType) === null || _res$WaterConnection6 === void 0 ? void 0 : _res$WaterConnection6.toUpperCase())) : t("PROPERTYTAX_OWNERTYPE_" + (res === null || res === void 0 ? void 0 : (_res$SewerageConnecti = res.SewerageConnections) === null || _res$SewerageConnecti === void 0 ? void 0 : (_res$SewerageConnecti2 = _res$SewerageConnecti[0]) === null || _res$SewerageConnecti2 === void 0 ? void 0 : (_res$SewerageConnecti3 = _res$SewerageConnecti2.connectionHolders) === null || _res$SewerageConnecti3 === void 0 ? void 0 : (_res$SewerageConnecti4 = _res$SewerageConnecti3[0]) === null || _res$SewerageConnecti4 === void 0 ? void 0 : (_res$SewerageConnecti5 = _res$SewerageConnecti4.ownerType) === null || _res$SewerageConnecti5 === void 0 ? void 0 : _res$SewerageConnecti5.toUpperCase()));
          return resultString;
        }
      }
    }
  }))) : /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_SAME_AS_PROPERTY_OWNERS")))), isDisconnection ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_DETAIL")), (data === null || data === void 0 ? void 0 : data.WaterConnection) && (data === null || data === void 0 ? void 0 : (_data$WaterConnection140 = data.WaterConnection) === null || _data$WaterConnection140 === void 0 ? void 0 : _data$WaterConnection140.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection141 = data.WaterConnection) === null || _data$WaterConnection141 === void 0 ? void 0 : (_data$WaterConnection142 = _data$WaterConnection141[0]) === null || _data$WaterConnection142 === void 0 ? void 0 : _data$WaterConnection142.proposedTaps) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_PIPE_SIZE"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection143 = data.WaterConnection) === null || _data$WaterConnection143 === void 0 ? void 0 : (_data$WaterConnection144 = _data$WaterConnection143[0]) === null || _data$WaterConnection144 === void 0 ? void 0 : _data$WaterConnection144.proposedPipeSize) + " " + t("WS_INCHES_LABEL") || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/connection/additional/" + (data === null || data === void 0 ? void 0 : (_data$WaterConnection145 = data.WaterConnection) === null || _data$WaterConnection145 === void 0 ? void 0 : (_data$WaterConnection146 = _data$WaterConnection145[0]) === null || _data$WaterConnection146 === void 0 ? void 0 : _data$WaterConnection146.applicationNo)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left"
    },
    label: t("WS_ADDITIONAL_DETAILS")
  }))), (data === null || data === void 0 ? void 0 : data.SewerageConnections) && (data === null || data === void 0 ? void 0 : (_data$SewerageConnect131 = data.SewerageConnections) === null || _data$SewerageConnect131 === void 0 ? void 0 : _data$SewerageConnect131.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_NO_OF_WATER_CLOSETS_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$SewerageConnect132 = data.SewerageConnections) === null || _data$SewerageConnect132 === void 0 ? void 0 : (_data$SewerageConnect133 = _data$SewerageConnect132[0]) === null || _data$SewerageConnect133 === void 0 ? void 0 : _data$SewerageConnect133.proposedWaterClosets,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
    text: (data === null || data === void 0 ? void 0 : (_data$SewerageConnect134 = data.SewerageConnections) === null || _data$SewerageConnect134 === void 0 ? void 0 : (_data$SewerageConnect135 = _data$SewerageConnect134[0]) === null || _data$SewerageConnect135 === void 0 ? void 0 : _data$SewerageConnect135.proposedToilets) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/connection/additional/" + (data === null || data === void 0 ? void 0 : (_data$SewerageConnect136 = data.SewerageConnections) === null || _data$SewerageConnect136 === void 0 ? void 0 : (_data$SewerageConnect137 = _data$SewerageConnect136[0]) === null || _data$SewerageConnect137 === void 0 ? void 0 : _data$SewerageConnect137.applicationNo)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left"
    },
    label: t("WS_ADDITIONAL_DETAILS")
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_DOCUMENT_DETAILS")), (data === null || data === void 0 ? void 0 : (_data$WaterConnection147 = data.WaterConnection) === null || _data$WaterConnection147 === void 0 ? void 0 : (_data$WaterConnection148 = _data$WaterConnection147[0]) === null || _data$WaterConnection148 === void 0 ? void 0 : _data$WaterConnection148.documents) && (data === null || data === void 0 ? void 0 : (_data$WaterConnection149 = data.WaterConnection) === null || _data$WaterConnection149 === void 0 ? void 0 : (_data$WaterConnection150 = _data$WaterConnection149[0]) === null || _data$WaterConnection150 === void 0 ? void 0 : _data$WaterConnection150.documents.map((doc, index) => {
    var _doc$documentType, _data$WaterConnection151, _data$WaterConnection152, _data$WaterConnection153, _data$WaterConnection154;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "doc-" + index
    }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t(doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.split(".").slice(0, 2).join("_"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(WSDocument, {
      value: data === null || data === void 0 ? void 0 : (_data$WaterConnection151 = data.WaterConnection) === null || _data$WaterConnection151 === void 0 ? void 0 : (_data$WaterConnection152 = _data$WaterConnection151[0]) === null || _data$WaterConnection152 === void 0 ? void 0 : _data$WaterConnection152.documents,
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index
    }), (data === null || data === void 0 ? void 0 : (_data$WaterConnection153 = data.WaterConnection) === null || _data$WaterConnection153 === void 0 ? void 0 : (_data$WaterConnection154 = _data$WaterConnection153[0]) === null || _data$WaterConnection154 === void 0 ? void 0 : _data$WaterConnection154.documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#cccccc",
        backgroundColor: "#cccccc",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null)));
  })), (data === null || data === void 0 ? void 0 : (_data$SewerageConnect138 = data.SewerageConnections) === null || _data$SewerageConnect138 === void 0 ? void 0 : (_data$SewerageConnect139 = _data$SewerageConnect138[0]) === null || _data$SewerageConnect139 === void 0 ? void 0 : _data$SewerageConnect139.documents) && (data === null || data === void 0 ? void 0 : (_data$SewerageConnect140 = data.SewerageConnections) === null || _data$SewerageConnect140 === void 0 ? void 0 : (_data$SewerageConnect141 = _data$SewerageConnect140[0]) === null || _data$SewerageConnect141 === void 0 ? void 0 : _data$SewerageConnect141.documents.map((doc, index) => {
    var _doc$documentType2, _data$SewerageConnect142, _data$SewerageConnect143, _data$SewerageConnect144, _data$SewerageConnect145;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "doc-" + index
    }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t(doc === null || doc === void 0 ? void 0 : (_doc$documentType2 = doc.documentType) === null || _doc$documentType2 === void 0 ? void 0 : _doc$documentType2.split(".").slice(0, 2).join("_"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(WSDocument, {
      value: data === null || data === void 0 ? void 0 : (_data$SewerageConnect142 = data.SewerageConnections) === null || _data$SewerageConnect142 === void 0 ? void 0 : (_data$SewerageConnect143 = _data$SewerageConnect142[0]) === null || _data$SewerageConnect143 === void 0 ? void 0 : _data$SewerageConnect143.documents,
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index
    }), (data === null || data === void 0 ? void 0 : (_data$SewerageConnect144 = data.SewerageConnections) === null || _data$SewerageConnect144 === void 0 ? void 0 : (_data$SewerageConnect145 = _data$SewerageConnect144[0]) === null || _data$SewerageConnect145 === void 0 ? void 0 : _data$SewerageConnect145.documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "white",
        backgroundColor: "white",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null)));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(WSWFApplicationTimeline, {
    application: (data === null || data === void 0 ? void 0 : (_data$WaterConnection155 = data.WaterConnection) === null || _data$WaterConnection155 === void 0 ? void 0 : _data$WaterConnection155[0]) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect146 = data.SewerageConnections) === null || _data$SewerageConnect146 === void 0 ? void 0 : _data$SewerageConnect146[0]),
    id: (data === null || data === void 0 ? void 0 : (_data$WaterConnection156 = data.WaterConnection) === null || _data$WaterConnection156 === void 0 ? void 0 : (_data$WaterConnection157 = _data$WaterConnection156[0]) === null || _data$WaterConnection157 === void 0 ? void 0 : _data$WaterConnection157.applicationNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect147 = data.SewerageConnections) === null || _data$SewerageConnect147 === void 0 ? void 0 : (_data$SewerageConnect148 = _data$SewerageConnect147[0]) === null || _data$SewerageConnect148 === void 0 ? void 0 : _data$SewerageConnect148.applicationNo),
    paymentbuttonenabled: false
  }), (data === null || data === void 0 ? void 0 : (_data$WaterConnection158 = data.WaterConnection) === null || _data$WaterConnection158 === void 0 ? void 0 : (_data$WaterConnection159 = _data$WaterConnection158[0]) === null || _data$WaterConnection159 === void 0 ? void 0 : _data$WaterConnection159.applicationStatus) === "PENDING_FOR_PAYMENT" || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect149 = data.SewerageConnections) === null || _data$SewerageConnect149 === void 0 ? void 0 : (_data$SewerageConnect150 = _data$SewerageConnect149[0]) === null || _data$SewerageConnect150 === void 0 ? void 0 : _data$SewerageConnect150.applicationStatus) === "PENDING_FOR_PAYMENT" ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/payment/my-bills/" + (paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data32 = paymentDetails.data) === null || _paymentDetails$data32 === void 0 ? void 0 : (_paymentDetails$data33 = _paymentDetails$data32.Bill) === null || _paymentDetails$data33 === void 0 ? void 0 : (_paymentDetails$data34 = _paymentDetails$data33[0]) === null || _paymentDetails$data34 === void 0 ? void 0 : _paymentDetails$data34.businessService) + "/" + (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("DC") ? stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$WaterConnection160 = data.WaterConnection) === null || _data$WaterConnection160 === void 0 ? void 0 : (_data$WaterConnection161 = _data$WaterConnection160[0]) === null || _data$WaterConnection161 === void 0 ? void 0 : _data$WaterConnection161.connectionNo, "/", "+") || stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$SewerageConnect151 = data.SewerageConnections) === null || _data$SewerageConnect151 === void 0 ? void 0 : (_data$SewerageConnect152 = _data$SewerageConnect151[0]) === null || _data$SewerageConnect152 === void 0 ? void 0 : _data$SewerageConnect152.connectionNo, "/", "+") : stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$WaterConnection162 = data.WaterConnection) === null || _data$WaterConnection162 === void 0 ? void 0 : (_data$WaterConnection163 = _data$WaterConnection162[0]) === null || _data$WaterConnection163 === void 0 ? void 0 : _data$WaterConnection163.applicationNo, "/", "+") || stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$SewerageConnect153 = data.SewerageConnections) === null || _data$SewerageConnect153 === void 0 ? void 0 : (_data$SewerageConnect154 = _data$SewerageConnect153[0]) === null || _data$SewerageConnect154 === void 0 ? void 0 : _data$SewerageConnect154.applicationNo, "/", "+")) + "?workflow=WNS&tenantId=" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection164 = data.WaterConnection) === null || _data$WaterConnection164 === void 0 ? void 0 : (_data$WaterConnection165 = _data$WaterConnection164[0]) === null || _data$WaterConnection165 === void 0 ? void 0 : _data$WaterConnection165.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect155 = data.SewerageConnections) === null || _data$SewerageConnect155 === void 0 ? void 0 : (_data$SewerageConnect156 = _data$SewerageConnect155[0]) === null || _data$SewerageConnect156 === void 0 ? void 0 : _data$SewerageConnect156.tenantId)) + "&ConsumerName=" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection166 = data.WaterConnection) === null || _data$WaterConnection166 === void 0 ? void 0 : (_data$WaterConnection167 = _data$WaterConnection166[0]) === null || _data$WaterConnection167 === void 0 ? void 0 : (_data$WaterConnection168 = _data$WaterConnection167.connectionHolders) === null || _data$WaterConnection168 === void 0 ? void 0 : _data$WaterConnection168.map(owner => owner.name).join(",")) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect157 = data.SewerageConnections) === null || _data$SewerageConnect157 === void 0 ? void 0 : (_data$SewerageConnect158 = _data$SewerageConnect157[0]) === null || _data$SewerageConnect158 === void 0 ? void 0 : (_data$SewerageConnect159 = _data$SewerageConnect158.connectionHolders) === null || _data$SewerageConnect159 === void 0 ? void 0 : _data$SewerageConnect159.map(owner => owner.name).join(",")) || (PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties7 = PTData.Properties) === null || _PTData$Properties7 === void 0 ? void 0 : (_PTData$Properties7$ = _PTData$Properties7[0]) === null || _PTData$Properties7$ === void 0 ? void 0 : (_PTData$Properties7$$ = _PTData$Properties7$.owners) === null || _PTData$Properties7$$ === void 0 ? void 0 : _PTData$Properties7$$.map(owner => owner.name).join(","))) + "&isDisoconnectFlow=" + (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("DC") ? true : false),
      state: {}
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("MAKE_PAYMENT")
  })) : null, !(data !== null && data !== void 0 && (_data$WaterConnection169 = data.WaterConnection) !== null && _data$WaterConnection169 !== void 0 && (_data$WaterConnection170 = _data$WaterConnection169[0]) !== null && _data$WaterConnection170 !== void 0 && _data$WaterConnection170.applicationType.includes("DISCONNECT")) && data !== null && data !== void 0 && (_data$WaterConnection171 = data.WaterConnection) !== null && _data$WaterConnection171 !== void 0 && (_data$WaterConnection172 = _data$WaterConnection171[0]) !== null && _data$WaterConnection172 !== void 0 && _data$WaterConnection172.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION") || !(data !== null && data !== void 0 && (_data$SewerageConnect160 = data.SewerageConnections) !== null && _data$SewerageConnect160 !== void 0 && (_data$SewerageConnect161 = _data$SewerageConnect160[0]) !== null && _data$SewerageConnect161 !== void 0 && _data$SewerageConnect161.applicationType.includes("DISCONNECT")) && data !== null && data !== void 0 && (_data$SewerageConnect162 = data.SewerageConnections) !== null && _data$SewerageConnect162 !== void 0 && (_data$SewerageConnect163 = _data$SewerageConnect162[0]) !== null && _data$SewerageConnect163 !== void 0 && _data$SewerageConnect163.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION") ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/ws/edit-application/" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection173 = data.WaterConnection) === null || _data$WaterConnection173 === void 0 ? void 0 : (_data$WaterConnection174 = _data$WaterConnection173[0]) === null || _data$WaterConnection174 === void 0 ? void 0 : _data$WaterConnection174.tenantId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect164 = data.SewerageConnections) === null || _data$SewerageConnect164 === void 0 ? void 0 : (_data$SewerageConnect165 = _data$SewerageConnect164[0]) === null || _data$SewerageConnect165 === void 0 ? void 0 : _data$SewerageConnect165.tenantId)),
      state: {
        id: "" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection175 = data.WaterConnection) === null || _data$WaterConnection175 === void 0 ? void 0 : (_data$WaterConnection176 = _data$WaterConnection175[0]) === null || _data$WaterConnection176 === void 0 ? void 0 : _data$WaterConnection176.applicationNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect166 = data.SewerageConnections) === null || _data$SewerageConnect166 === void 0 ? void 0 : (_data$SewerageConnect167 = _data$SewerageConnect166[0]) === null || _data$SewerageConnect167 === void 0 ? void 0 : _data$SewerageConnect167.applicationNo))
      }
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("COMMON_EDIT")
  })) : null, data !== null && data !== void 0 && (_data$WaterConnection177 = data.WaterConnection) !== null && _data$WaterConnection177 !== void 0 && (_data$WaterConnection178 = _data$WaterConnection177[0]) !== null && _data$WaterConnection178 !== void 0 && _data$WaterConnection178.applicationType.includes("DISCONNECT") && data !== null && data !== void 0 && (_data$WaterConnection179 = data.WaterConnection) !== null && _data$WaterConnection179 !== void 0 && (_data$WaterConnection180 = _data$WaterConnection179[0]) !== null && _data$WaterConnection180 !== void 0 && _data$WaterConnection180.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION") || data !== null && data !== void 0 && (_data$SewerageConnect168 = data.SewerageConnections) !== null && _data$SewerageConnect168 !== void 0 && (_data$SewerageConnect169 = _data$SewerageConnect168[0]) !== null && _data$SewerageConnect169 !== void 0 && _data$SewerageConnect169.applicationType.includes("DISCONNECT") && data !== null && data !== void 0 && (_data$SewerageConnect170 = data.SewerageConnections) !== null && _data$SewerageConnect170 !== void 0 && (_data$SewerageConnect171 = _data$SewerageConnect170[0]) !== null && _data$SewerageConnect171 !== void 0 && _data$SewerageConnect171.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION") ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/ws/resubmit-disconnect-application",
      state: {
        id: "" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection181 = data.WaterConnection) === null || _data$WaterConnection181 === void 0 ? void 0 : (_data$WaterConnection182 = _data$WaterConnection181[0]) === null || _data$WaterConnection182 === void 0 ? void 0 : _data$WaterConnection182.applicationNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect172 = data.SewerageConnections) === null || _data$SewerageConnect172 === void 0 ? void 0 : (_data$SewerageConnect173 = _data$SewerageConnect172[0]) === null || _data$SewerageConnect173 === void 0 ? void 0 : _data$SewerageConnect173.applicationNo))
      }
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("RESUBMIT_APPLICATION"),
    onSubmit: Digit.SessionStorage.set("WS_DISCONNECTION", applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? {
      applicationData: data === null || data === void 0 ? void 0 : (_data$SewerageConnect174 = data.SewerageConnections) === null || _data$SewerageConnect174 === void 0 ? void 0 : _data$SewerageConnect174[0],
      serviceType: "SEWERAGE",
      WSDisconnectionForm: {
        type: data !== null && data !== void 0 && (_data$SewerageConnect175 = data.SewerageConnections) !== null && _data$SewerageConnect175 !== void 0 && (_data$SewerageConnect176 = _data$SewerageConnect175[0]) !== null && _data$SewerageConnect176 !== void 0 && _data$SewerageConnect176.isDisconnectionTemporary ? {
          code: "type",
          value: {
            name: "Temporary",
            i18nKey: "WS_DISCONNECTIONTYPE_TEMPORARY",
            active: true,
            code: "Temporary"
          }
        } : {
          code: "type",
          value: {
            name: "Permanent",
            i18nKey: "WS_DISCONNECTIONTYPE_PERMANENT",
            active: true,
            code: "Permanent"
          }
        },
        date: convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$SewerageConnect177 = data.SewerageConnections) === null || _data$SewerageConnect177 === void 0 ? void 0 : (_data$SewerageConnect178 = _data$SewerageConnect177[0]) === null || _data$SewerageConnect178 === void 0 ? void 0 : _data$SewerageConnect178.dateEffectiveFrom, true),
        reason: {
          code: "reason",
          value: data === null || data === void 0 ? void 0 : (_data$SewerageConnect179 = data.SewerageConnections) === null || _data$SewerageConnect179 === void 0 ? void 0 : (_data$SewerageConnect180 = _data$SewerageConnect179[0]) === null || _data$SewerageConnect180 === void 0 ? void 0 : _data$SewerageConnect180.disconnectionReason
        },
        documents: data === null || data === void 0 ? void 0 : (_data$SewerageConnect181 = data.SewerageConnections) === null || _data$SewerageConnect181 === void 0 ? void 0 : (_data$SewerageConnect182 = _data$SewerageConnect181[0]) === null || _data$SewerageConnect182 === void 0 ? void 0 : _data$SewerageConnect182.documents
      }
    } : {
      applicationData: data === null || data === void 0 ? void 0 : (_data$WaterConnection183 = data.WaterConnection) === null || _data$WaterConnection183 === void 0 ? void 0 : _data$WaterConnection183[0],
      serviceType: "WATER",
      WSDisconnectionForm: {
        type: data !== null && data !== void 0 && (_data$WaterConnection184 = data.WaterConnection) !== null && _data$WaterConnection184 !== void 0 && (_data$WaterConnection185 = _data$WaterConnection184[0]) !== null && _data$WaterConnection185 !== void 0 && _data$WaterConnection185.isDisconnectionTemporary ? {
          code: "type",
          value: {
            name: "Temporary",
            i18nKey: "WS_DISCONNECTIONTYPE_TEMPORARY",
            active: true,
            code: "Temporary"
          }
        } : {
          code: "type",
          value: {
            name: "Permanent",
            i18nKey: "WS_DISCONNECTIONTYPE_PERMANENT",
            active: true,
            code: "Permanent"
          }
        },
        date: convertEpochToDateDMY(data === null || data === void 0 ? void 0 : (_data$WaterConnection186 = data.WaterConnection) === null || _data$WaterConnection186 === void 0 ? void 0 : (_data$WaterConnection187 = _data$WaterConnection186[0]) === null || _data$WaterConnection187 === void 0 ? void 0 : _data$WaterConnection187.dateEffectiveFrom, true),
        reason: {
          code: "reason",
          value: data === null || data === void 0 ? void 0 : (_data$WaterConnection188 = data.WaterConnection) === null || _data$WaterConnection188 === void 0 ? void 0 : (_data$WaterConnection189 = _data$WaterConnection188[0]) === null || _data$WaterConnection189 === void 0 ? void 0 : _data$WaterConnection189.disconnectionReason
        },
        documents: data === null || data === void 0 ? void 0 : (_data$WaterConnection190 = data.WaterConnection) === null || _data$WaterConnection190 === void 0 ? void 0 : (_data$WaterConnection191 = _data$WaterConnection190[0]) === null || _data$WaterConnection191 === void 0 ? void 0 : _data$WaterConnection191.documents
      }
    })
  })) : null)));
};

const WSAdditionalDetails = () => {
  var _user$info, _data$WaterConnection, _data$WaterConnection2, _data$SewerageConnect, _data$SewerageConnect2, _data$WaterConnection3, _data$WaterConnection4, _data$WaterConnection5, _data$SewerageConnect3, _data$SewerageConnect4, _data$WaterConnection6, _data$WaterConnection7, _data$SewerageConnect5, _data$SewerageConnect6, _data$WaterConnection8, _data$WaterConnection9, _data$WaterConnection10, _data$WaterConnection11, _data$SewerageConnect7, _data$SewerageConnect8, _data$WaterConnection12, _data$WaterConnection13, _data$WaterConnection14, _data$WaterConnection15, _data$SewerageConnect9, _data$SewerageConnect10, _data$SewerageConnect11, _data$SewerageConnect12, _data$SewerageConnect13, _data$WaterConnection16, _data$WaterConnection17, _data$WaterConnection18, _data$SewerageConnect14, _data$SewerageConnect15, _data$SewerageConnect16, _data$WaterConnection19, _data$WaterConnection20, _data$WaterConnection21, _data$SewerageConnect17, _data$SewerageConnect18, _data$SewerageConnect19, _data$WaterConnection22, _data$WaterConnection23, _data$WaterConnection24, _data$WaterConnection25, _data$SewerageConnect20, _data$SewerageConnect21, _data$SewerageConnect22, _data$WaterConnection26, _data$WaterConnection27, _data$WaterConnection28, _data$WaterConnection29, _data$SewerageConnect23, _data$SewerageConnect24, _data$SewerageConnect25, _data$WaterConnection30, _data$WaterConnection31, _data$WaterConnection32, _data$WaterConnection33, _data$SewerageConnect26, _data$SewerageConnect27, _data$SewerageConnect28, _data$WaterConnection34, _data$WaterConnection35, _data$WaterConnection36, _data$WaterConnection37, _data$SewerageConnect29, _data$SewerageConnect30, _data$SewerageConnect31, _data$SewerageConnect32, _data$WaterConnection38, _data$WaterConnection39, _data$WaterConnection40, _data$WaterConnection41, _data$SewerageConnect33, _data$SewerageConnect34, _data$SewerageConnect35, _data$SewerageConnect36, _data$WaterConnection42, _data$WaterConnection43, _data$WaterConnection44, _data$WaterConnection45, _data$SewerageConnect37, _data$SewerageConnect38, _data$SewerageConnect39, _data$SewerageConnect40, _data$WaterConnection46, _data$WaterConnection47, _data$SewerageConnect41, _data$SewerageConnect42, _data$WaterConnection48, _data$WaterConnection49, _data$SewerageConnect43, _data$SewerageConnect44, _data$WaterConnection50, _data$WaterConnection51, _data$WaterConnection52, _data$SewerageConnect45, _data$SewerageConnect46, _data$WaterConnection53, _data$WaterConnection54, _data$SewerageConnect47, _data$SewerageConnect48, _data$WaterConnection55, _data$WaterConnection56, _data$SewerageConnect49, _data$SewerageConnect50, _data$WaterConnection57, _data$WaterConnection58, _data$WaterConnection59, _data$SewerageConnect51, _data$SewerageConnect52, _data$SewerageConnect53;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = Digit.ULBService.getCurrentTenantId() || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity);
  const applicationNobyData = window.location.href.includes("SW_") ? window.location.href.substring(window.location.href.indexOf("SW_")) : window.location.href.substring(window.location.href.indexOf("WS_"));
  let filter1 = {
    tenantId: tenantId,
    applicationNumber: applicationNobyData
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? "SW" : "WS"
  }, {
    filters: filter1
  });
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_COMMON_ADDN_DETAILS")), /*#__PURE__*/React__default.createElement("div", {
    className: "hide-seperator"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_COMMON_CONNECTION_DETAIL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : (_data$WaterConnection2 = _data$WaterConnection[0]) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2.connectionType) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : (_data$SewerageConnect2 = _data$SewerageConnect[0]) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2.connectionType) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), (data === null || data === void 0 ? void 0 : data.WaterConnection) && (data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : _data$WaterConnection3.length) > 0 && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TAPS"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection4 = data.WaterConnection) === null || _data$WaterConnection4 === void 0 ? void 0 : (_data$WaterConnection5 = _data$WaterConnection4[0]) === null || _data$WaterConnection5 === void 0 ? void 0 : _data$WaterConnection5.noOfTaps) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnections) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3[0]) === null || _data$SewerageConnect4 === void 0 ? void 0 : _data$SewerageConnect4.noOfTaps) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PIPE_SIZE_IN_INCHES_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection6 = data.WaterConnection) === null || _data$WaterConnection6 === void 0 ? void 0 : (_data$WaterConnection7 = _data$WaterConnection6[0]) === null || _data$WaterConnection7 === void 0 ? void 0 : _data$WaterConnection7.pipeSize) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect5 = data.SewerageConnections) === null || _data$SewerageConnect5 === void 0 ? void 0 : (_data$SewerageConnect6 = _data$SewerageConnect5[0]) === null || _data$SewerageConnect6 === void 0 ? void 0 : _data$SewerageConnect6.pipeSize) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_WATER_SOURCE"),
    text: t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$WaterConnection8 = data.WaterConnection) === null || _data$WaterConnection8 === void 0 ? void 0 : (_data$WaterConnection9 = _data$WaterConnection8[0]) === null || _data$WaterConnection9 === void 0 ? void 0 : (_data$WaterConnection10 = _data$WaterConnection9.waterSource) === null || _data$WaterConnection10 === void 0 ? void 0 : (_data$WaterConnection11 = _data$WaterConnection10.split(".")) === null || _data$WaterConnection11 === void 0 ? void 0 : _data$WaterConnection11[0], ".", "_")) || t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$SewerageConnect7 = data.SewerageConnections) === null || _data$SewerageConnect7 === void 0 ? void 0 : (_data$SewerageConnect8 = _data$SewerageConnect7[0]) === null || _data$SewerageConnect8 === void 0 ? void 0 : _data$SewerageConnect8.waterSource, ".", "_")) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
    text: t(data === null || data === void 0 ? void 0 : (_data$WaterConnection12 = data.WaterConnection) === null || _data$WaterConnection12 === void 0 ? void 0 : (_data$WaterConnection13 = _data$WaterConnection12[0]) === null || _data$WaterConnection13 === void 0 ? void 0 : (_data$WaterConnection14 = _data$WaterConnection13.waterSource) === null || _data$WaterConnection14 === void 0 ? void 0 : (_data$WaterConnection15 = _data$WaterConnection14.split(".")) === null || _data$WaterConnection15 === void 0 ? void 0 : _data$WaterConnection15[1]) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }))), (data === null || data === void 0 ? void 0 : data.SewerageConnections) && (data === null || data === void 0 ? void 0 : (_data$SewerageConnect9 = data.SewerageConnections) === null || _data$SewerageConnect9 === void 0 ? void 0 : _data$SewerageConnect9.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_NUMBER_WATER_CLOSETS_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$SewerageConnect10 = data.SewerageConnections) === null || _data$SewerageConnect10 === void 0 ? void 0 : (_data$SewerageConnect11 = _data$SewerageConnect10[0]) === null || _data$SewerageConnect11 === void 0 ? void 0 : _data$SewerageConnect11.proposedWaterClosets,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
    text: (data === null || data === void 0 ? void 0 : (_data$SewerageConnect12 = data.SewerageConnections) === null || _data$SewerageConnect12 === void 0 ? void 0 : (_data$SewerageConnect13 = _data$SewerageConnect12[0]) === null || _data$SewerageConnect13 === void 0 ? void 0 : _data$SewerageConnect13.proposedToilets) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_COMMON_PLUMBER_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY"),
    text: ((data === null || data === void 0 ? void 0 : (_data$WaterConnection16 = data.WaterConnection) === null || _data$WaterConnection16 === void 0 ? void 0 : (_data$WaterConnection17 = _data$WaterConnection16[0]) === null || _data$WaterConnection17 === void 0 ? void 0 : (_data$WaterConnection18 = _data$WaterConnection17.additionalDetails) === null || _data$WaterConnection18 === void 0 ? void 0 : _data$WaterConnection18.detailsProvidedBy) === "ULB" ? t("WS_PLUMBER_ULB") : t("WS_PLUMBER_SELF")) || ((data === null || data === void 0 ? void 0 : (_data$SewerageConnect14 = data.SewerageConnections) === null || _data$SewerageConnect14 === void 0 ? void 0 : (_data$SewerageConnect15 = _data$SewerageConnect14[0]) === null || _data$SewerageConnect15 === void 0 ? void 0 : (_data$SewerageConnect16 = _data$SewerageConnect15.additionalDetails) === null || _data$SewerageConnect16 === void 0 ? void 0 : _data$SewerageConnect16.detailsProvidedBy) === "ULB" ? t("WS_PLUMBER_ULB") : t("WS_PLUMBER_SELF")) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), ((data === null || data === void 0 ? void 0 : (_data$WaterConnection19 = data.WaterConnection) === null || _data$WaterConnection19 === void 0 ? void 0 : (_data$WaterConnection20 = _data$WaterConnection19[0]) === null || _data$WaterConnection20 === void 0 ? void 0 : (_data$WaterConnection21 = _data$WaterConnection20.additionalDetails) === null || _data$WaterConnection21 === void 0 ? void 0 : _data$WaterConnection21.detailsProvidedBy) === "ULB" || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect17 = data.SewerageConnections) === null || _data$SewerageConnect17 === void 0 ? void 0 : (_data$SewerageConnect18 = _data$SewerageConnect17[0]) === null || _data$SewerageConnect18 === void 0 ? void 0 : (_data$SewerageConnect19 = _data$SewerageConnect18.additionalDetails) === null || _data$SewerageConnect19 === void 0 ? void 0 : _data$SewerageConnect19.detailsProvidedBy) === "ULB") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PLUMBER_LIC_NO"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection22 = data.WaterConnection) === null || _data$WaterConnection22 === void 0 ? void 0 : (_data$WaterConnection23 = _data$WaterConnection22[0]) === null || _data$WaterConnection23 === void 0 ? void 0 : (_data$WaterConnection24 = _data$WaterConnection23.plumberInfo) === null || _data$WaterConnection24 === void 0 ? void 0 : (_data$WaterConnection25 = _data$WaterConnection24[0]) === null || _data$WaterConnection25 === void 0 ? void 0 : _data$WaterConnection25.licenseNo) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect20 = data.SewerageConnections) === null || _data$SewerageConnect20 === void 0 ? void 0 : (_data$SewerageConnect21 = _data$SewerageConnect20[0]) === null || _data$SewerageConnect21 === void 0 ? void 0 : (_data$SewerageConnect22 = _data$SewerageConnect21.plumberInfo) === null || _data$SewerageConnect22 === void 0 ? void 0 : _data$SewerageConnect22.licenseNo) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection26 = data.WaterConnection) === null || _data$WaterConnection26 === void 0 ? void 0 : (_data$WaterConnection27 = _data$WaterConnection26[0]) === null || _data$WaterConnection27 === void 0 ? void 0 : (_data$WaterConnection28 = _data$WaterConnection27.plumberInfo) === null || _data$WaterConnection28 === void 0 ? void 0 : (_data$WaterConnection29 = _data$WaterConnection28[0]) === null || _data$WaterConnection29 === void 0 ? void 0 : _data$WaterConnection29.name) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect23 = data.SewerageConnections) === null || _data$SewerageConnect23 === void 0 ? void 0 : (_data$SewerageConnect24 = _data$SewerageConnect23[0]) === null || _data$SewerageConnect24 === void 0 ? void 0 : (_data$SewerageConnect25 = _data$SewerageConnect24.plumberInfo) === null || _data$SewerageConnect25 === void 0 ? void 0 : _data$SewerageConnect25.name) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PLUMBER_MOB_NO"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection30 = data.WaterConnection) === null || _data$WaterConnection30 === void 0 ? void 0 : (_data$WaterConnection31 = _data$WaterConnection30[0]) === null || _data$WaterConnection31 === void 0 ? void 0 : (_data$WaterConnection32 = _data$WaterConnection31.plumberInfo) === null || _data$WaterConnection32 === void 0 ? void 0 : (_data$WaterConnection33 = _data$WaterConnection32[0]) === null || _data$WaterConnection33 === void 0 ? void 0 : _data$WaterConnection33.mobileNumber) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect26 = data.SewerageConnections) === null || _data$SewerageConnect26 === void 0 ? void 0 : (_data$SewerageConnect27 = _data$SewerageConnect26[0]) === null || _data$SewerageConnect27 === void 0 ? void 0 : (_data$SewerageConnect28 = _data$SewerageConnect27.plumberInfo) === null || _data$SewerageConnect28 === void 0 ? void 0 : _data$SewerageConnect28.mobileNumber) || "NA",
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData,
      fieldName: ["plumberInfoMobileNumber"],
      model: "WnSConnectionPlumber",
      showValue: false,
      loadData: {
        serviceName: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? "WaterConnection[0].plumberInfo[0].mobileNumber" : "SewerageConnections[0].plumberInfo[0].mobileNumber",
        isArray: false
      }
    }
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_ROAD_CUTTING_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAIL_ROAD_TYPE"),
    text: data !== null && data !== void 0 && (_data$WaterConnection34 = data.WaterConnection) !== null && _data$WaterConnection34 !== void 0 && (_data$WaterConnection35 = _data$WaterConnection34[0]) !== null && _data$WaterConnection35 !== void 0 && (_data$WaterConnection36 = _data$WaterConnection35.roadCuttingInfo) !== null && _data$WaterConnection36 !== void 0 && (_data$WaterConnection37 = _data$WaterConnection36[0]) !== null && _data$WaterConnection37 !== void 0 && _data$WaterConnection37.roadType || data !== null && data !== void 0 && (_data$SewerageConnect29 = data.SewerageConnections) !== null && _data$SewerageConnect29 !== void 0 && (_data$SewerageConnect30 = _data$SewerageConnect29[0]) !== null && _data$SewerageConnect30 !== void 0 && (_data$SewerageConnect31 = _data$SewerageConnect30.roadCuttingInfo) !== null && _data$SewerageConnect31 !== void 0 && (_data$SewerageConnect32 = _data$SewerageConnect31[0]) !== null && _data$SewerageConnect32 !== void 0 && _data$SewerageConnect32.roadType ? t("WS_ROADTYPE_" + ((data === null || data === void 0 ? void 0 : (_data$WaterConnection38 = data.WaterConnection) === null || _data$WaterConnection38 === void 0 ? void 0 : (_data$WaterConnection39 = _data$WaterConnection38[0]) === null || _data$WaterConnection39 === void 0 ? void 0 : (_data$WaterConnection40 = _data$WaterConnection39.roadCuttingInfo) === null || _data$WaterConnection40 === void 0 ? void 0 : (_data$WaterConnection41 = _data$WaterConnection40[0]) === null || _data$WaterConnection41 === void 0 ? void 0 : _data$WaterConnection41.roadType) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect33 = data.SewerageConnections) === null || _data$SewerageConnect33 === void 0 ? void 0 : (_data$SewerageConnect34 = _data$SewerageConnect33[0]) === null || _data$SewerageConnect34 === void 0 ? void 0 : (_data$SewerageConnect35 = _data$SewerageConnect34.roadCuttingInfo) === null || _data$SewerageConnect35 === void 0 ? void 0 : (_data$SewerageConnect36 = _data$SewerageConnect35[0]) === null || _data$SewerageConnect36 === void 0 ? void 0 : _data$SewerageConnect36.roadType))) : t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAILS_AREA_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection42 = data.WaterConnection) === null || _data$WaterConnection42 === void 0 ? void 0 : (_data$WaterConnection43 = _data$WaterConnection42[0]) === null || _data$WaterConnection43 === void 0 ? void 0 : (_data$WaterConnection44 = _data$WaterConnection43.roadCuttingInfo) === null || _data$WaterConnection44 === void 0 ? void 0 : (_data$WaterConnection45 = _data$WaterConnection44[0]) === null || _data$WaterConnection45 === void 0 ? void 0 : _data$WaterConnection45.roadCuttingArea) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect37 = data.SewerageConnections) === null || _data$SewerageConnect37 === void 0 ? void 0 : (_data$SewerageConnect38 = _data$SewerageConnect37[0]) === null || _data$SewerageConnect38 === void 0 ? void 0 : (_data$SewerageConnect39 = _data$SewerageConnect38.roadCuttingInfo) === null || _data$SewerageConnect39 === void 0 ? void 0 : (_data$SewerageConnect40 = _data$SewerageConnect39[0]) === null || _data$SewerageConnect40 === void 0 ? void 0 : _data$SewerageConnect40.roadCuttingArea) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("WS_ACTIVATION_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
    text: data !== null && data !== void 0 && (_data$WaterConnection46 = data.WaterConnection) !== null && _data$WaterConnection46 !== void 0 && (_data$WaterConnection47 = _data$WaterConnection46[0]) !== null && _data$WaterConnection47 !== void 0 && _data$WaterConnection47.connectionExecutionDate || data !== null && data !== void 0 && (_data$SewerageConnect41 = data.SewerageConnections) !== null && _data$SewerageConnect41 !== void 0 && (_data$SewerageConnect42 = _data$SewerageConnect41[0]) !== null && _data$SewerageConnect42 !== void 0 && _data$SewerageConnect42.connectionExecutionDate ? Digit.DateUtils.ConvertEpochToDate((data === null || data === void 0 ? void 0 : (_data$WaterConnection48 = data.WaterConnection) === null || _data$WaterConnection48 === void 0 ? void 0 : (_data$WaterConnection49 = _data$WaterConnection48[0]) === null || _data$WaterConnection49 === void 0 ? void 0 : _data$WaterConnection49.connectionExecutionDate) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect43 = data.SewerageConnections) === null || _data$SewerageConnect43 === void 0 ? void 0 : (_data$SewerageConnect44 = _data$SewerageConnect43[0]) === null || _data$SewerageConnect44 === void 0 ? void 0 : _data$SewerageConnect44.connectionExecutionDate)) : t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), (data === null || data === void 0 ? void 0 : data.WaterConnection) && (data === null || data === void 0 ? void 0 : (_data$WaterConnection50 = data.WaterConnection) === null || _data$WaterConnection50 === void 0 ? void 0 : _data$WaterConnection50.length) > 0 && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_METER_ID"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection51 = data.WaterConnection) === null || _data$WaterConnection51 === void 0 ? void 0 : (_data$WaterConnection52 = _data$WaterConnection51[0]) === null || _data$WaterConnection52 === void 0 ? void 0 : _data$WaterConnection52.meterId) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect45 = data.SewerageConnections) === null || _data$SewerageConnect45 === void 0 ? void 0 : (_data$SewerageConnect46 = _data$SewerageConnect45[0]) === null || _data$SewerageConnect46 === void 0 ? void 0 : _data$SewerageConnect46.meterId) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAIL_METER_INSTALL_DATE"),
    text: data !== null && data !== void 0 && (_data$WaterConnection53 = data.WaterConnection) !== null && _data$WaterConnection53 !== void 0 && (_data$WaterConnection54 = _data$WaterConnection53[0]) !== null && _data$WaterConnection54 !== void 0 && _data$WaterConnection54.meterInstallationDate || data !== null && data !== void 0 && (_data$SewerageConnect47 = data.SewerageConnections) !== null && _data$SewerageConnect47 !== void 0 && (_data$SewerageConnect48 = _data$SewerageConnect47[0]) !== null && _data$SewerageConnect48 !== void 0 && _data$SewerageConnect48.meterInstallationDate ? Digit.DateUtils.ConvertEpochToDate((data === null || data === void 0 ? void 0 : (_data$WaterConnection55 = data.WaterConnection) === null || _data$WaterConnection55 === void 0 ? void 0 : (_data$WaterConnection56 = _data$WaterConnection55[0]) === null || _data$WaterConnection56 === void 0 ? void 0 : _data$WaterConnection56.meterInstallationDate) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect49 = data.SewerageConnections) === null || _data$SewerageConnect49 === void 0 ? void 0 : (_data$SewerageConnect50 = _data$SewerageConnect49[0]) === null || _data$SewerageConnect50 === void 0 ? void 0 : _data$SewerageConnect50.meterInstallationDate)) : t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAILS_INITIAL_METER_READING"),
    text: (data === null || data === void 0 ? void 0 : (_data$WaterConnection57 = data.WaterConnection) === null || _data$WaterConnection57 === void 0 ? void 0 : (_data$WaterConnection58 = _data$WaterConnection57[0]) === null || _data$WaterConnection58 === void 0 ? void 0 : (_data$WaterConnection59 = _data$WaterConnection58.additionalDetails) === null || _data$WaterConnection59 === void 0 ? void 0 : _data$WaterConnection59.initialMeterReading) || (data === null || data === void 0 ? void 0 : (_data$SewerageConnect51 = data.SewerageConnections) === null || _data$SewerageConnect51 === void 0 ? void 0 : (_data$SewerageConnect52 = _data$SewerageConnect51[0]) === null || _data$SewerageConnect52 === void 0 ? void 0 : (_data$SewerageConnect53 = _data$SewerageConnect52.additionalDetails) === null || _data$SewerageConnect53 === void 0 ? void 0 : _data$SewerageConnect53.initialMeterReading) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  }))))));
};

const getPropertyAddress$4 = property => {
  var _property$locality;
  const doorNo = property === null || property === void 0 ? void 0 : property.doorNo;
  const street = property === null || property === void 0 ? void 0 : property.street;
  const landMark = property === null || property === void 0 ? void 0 : property.landmark;
  const locality = property === null || property === void 0 ? void 0 : (_property$locality = property.locality) === null || _property$locality === void 0 ? void 0 : _property$locality.name;
  const city = property === null || property === void 0 ? void 0 : property.city;
  const pinCode = property === null || property === void 0 ? void 0 : property.pincode;
  const formattedAddress = "" + (doorNo ? doorNo + ", " : "") + (street ? street + ", " : "") + (landMark ? landMark + ", " : "") + (locality ? locality + ", " : "") + (city ? city : "") + (pinCode ? ", " + pinCode : "");
  return formattedAddress;
};
const getPropertyDetails$4 = (application, t) => {
  var _application$owners, _owners$map;
  const owners = (application === null || application === void 0 ? void 0 : (_application$owners = application.owners) === null || _application$owners === void 0 ? void 0 : _application$owners.filter(owner => owner.active == true)) || [];
  const names = owners === null || owners === void 0 ? void 0 : (_owners$map = owners.map(owner => owner.name)) === null || _owners$map === void 0 ? void 0 : _owners$map.join(",");
  return {
    title: t("WS_COMMON_PROPERTY_DETAILS"),
    values: [{
      title: t("WS_PROPERTY_ID_LABEL"),
      value: t("" + (application === null || application === void 0 ? void 0 : application.propertyId)) || t("CS_NA")
    }, {
      title: t("WS_OWN_DETAIL_NAME"),
      value: names || t("CS_NA")
    }, {
      title: t("WS_PROPERTY_ADDRESS_LABEL"),
      value: getPropertyAddress$4(application === null || application === void 0 ? void 0 : application.address) || t("CS_NA")
    }]
  };
};
const getConnectionDetails$3 = (application, t) => {
  var _application$applicat, _application$connecti, _application$waterSou, _application$waterSou2, _application$waterSou3, _application$waterSou4, _application$addition, _application$applicat2, _application$connecti2, _application$waterSou5, _application$waterSou6, _application$waterSou7, _application$waterSou8, _application$connecti3;
  return {
    title: t("WS_COMMON_CONNECTION_DETAILS"),
    values: application !== null && application !== void 0 && (_application$applicat = application.applicationNo) !== null && _application$applicat !== void 0 && _application$applicat.includes("WS") && (application === null || application === void 0 ? void 0 : application.connectionType) == "Metered" ? [{
      title: t("WS_SERV_DETAIL_CONN_TYPE"),
      value: application !== null && application !== void 0 && application.connectionType ? t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(application === null || application === void 0 ? void 0 : (_application$connecti = application.connectionType) === null || _application$connecti === void 0 ? void 0 : _application$connecti.toUpperCase(), " ", "_")) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_NO_OF_TAPS"),
      value: (application === null || application === void 0 ? void 0 : application.noOfTaps) || t("CS_NA")
    }, {
      title: t("WS_PIPE_SIZE_IN_INCHES_LABEL"),
      value: (application === null || application === void 0 ? void 0 : application.pipeSize) || t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_WATER_SOURCE"),
      value: application !== null && application !== void 0 && application.waterSource ? t("WS_SERVICES_MASTERS_WATERSOURCE_" + (application === null || application === void 0 ? void 0 : (_application$waterSou = application.waterSource) === null || _application$waterSou === void 0 ? void 0 : (_application$waterSou2 = _application$waterSou.toUpperCase()) === null || _application$waterSou2 === void 0 ? void 0 : _application$waterSou2.split(".")[0])) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
      value: application !== null && application !== void 0 && application.waterSource ? t("" + (application === null || application === void 0 ? void 0 : (_application$waterSou3 = application.waterSource) === null || _application$waterSou3 === void 0 ? void 0 : (_application$waterSou4 = _application$waterSou3.toUpperCase()) === null || _application$waterSou4 === void 0 ? void 0 : _application$waterSou4.split(".")[1])) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
      value: application !== null && application !== void 0 && application.connectionExecutionDate ? convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.connectionExecutionDate) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_METER_ID"),
      value: (application === null || application === void 0 ? void 0 : application.meterId) || t("CS_NA")
    }, {
      title: t("WS_INITIAL_METER_READING_LABEL"),
      value: (application === null || application === void 0 ? void 0 : (_application$addition = application.additionalDetails) === null || _application$addition === void 0 ? void 0 : _application$addition.initialMeterReading) || t("CS_NA")
    }, {
      title: t("WS_INSTALLATION_DATE_LABEL"),
      value: application !== null && application !== void 0 && application.meterInstallationDate ? convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.meterInstallationDate) : t("CS_NA")
    }] : application !== null && application !== void 0 && (_application$applicat2 = application.applicationNo) !== null && _application$applicat2 !== void 0 && _application$applicat2.includes("WS") && (application === null || application === void 0 ? void 0 : application.connectionType) !== "Metered" ? [{
      title: t("WS_SERV_DETAIL_CONN_TYPE"),
      value: application !== null && application !== void 0 && application.connectionType ? t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(application === null || application === void 0 ? void 0 : (_application$connecti2 = application.connectionType) === null || _application$connecti2 === void 0 ? void 0 : _application$connecti2.toUpperCase(), " ", "_")) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_NO_OF_TAPS"),
      value: (application === null || application === void 0 ? void 0 : application.noOfTaps) || t("CS_NA")
    }, {
      title: t("WS_PIPE_SIZE_IN_INCHES_LABEL"),
      value: (application === null || application === void 0 ? void 0 : application.pipeSize) || t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_WATER_SOURCE"),
      value: application !== null && application !== void 0 && application.waterSource ? t("WS_SERVICES_MASTERS_WATERSOURCE_" + (application === null || application === void 0 ? void 0 : (_application$waterSou5 = application.waterSource) === null || _application$waterSou5 === void 0 ? void 0 : (_application$waterSou6 = _application$waterSou5.toUpperCase()) === null || _application$waterSou6 === void 0 ? void 0 : _application$waterSou6.split(".")[0])) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
      value: application !== null && application !== void 0 && application.waterSource ? t("" + (application === null || application === void 0 ? void 0 : (_application$waterSou7 = application.waterSource) === null || _application$waterSou7 === void 0 ? void 0 : (_application$waterSou8 = _application$waterSou7.toUpperCase()) === null || _application$waterSou8 === void 0 ? void 0 : _application$waterSou8.split(".")[1])) : t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
      value: application !== null && application !== void 0 && application.connectionExecutionDate ? convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.connectionExecutionDate) : t("CS_NA")
    }] : [{
      title: t("WS_SERV_DETAIL_CONN_TYPE"),
      value: application !== null && application !== void 0 && application.connectionType ? t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll(application === null || application === void 0 ? void 0 : (_application$connecti3 = application.connectionType) === null || _application$connecti3 === void 0 ? void 0 : _application$connecti3.toUpperCase(), " ", "_")) : t("CS_NA")
    }, {
      title: t("WS_NUMBER_WATER_CLOSETS_LABEL"),
      value: (application === null || application === void 0 ? void 0 : application.noOfWaterClosets) || t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
      value: (application === null || application === void 0 ? void 0 : application.noOfToilets) || t("CS_NA")
    }, {
      title: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
      value: application !== null && application !== void 0 && application.connectionExecutionDate ? convertEpochToDateDMY(application === null || application === void 0 ? void 0 : application.connectionExecutionDate) : t("CS_NA")
    }]
  };
};
const getConnectionHolderDetails$4 = (owner, t) => {
  var _owner$connectionHold, _owner$connectionHold2, _owner$connectionHold3, _owner$connectionHold4, _owner$connectionHold5, _owner$connectionHold6, _owner$connectionHold7, _owner$connectionHold8, _owner$connectionHold9;
  return {
    title: t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),
    values: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold = owner.connectionHolders) === null || _owner$connectionHold === void 0 ? void 0 : _owner$connectionHold.length) > 0 ? [{
      title: t("WS_OWN_DETAIL_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold2 = owner.connectionHolders) === null || _owner$connectionHold2 === void 0 ? void 0 : (_owner$connectionHold3 = _owner$connectionHold2[0]) === null || _owner$connectionHold3 === void 0 ? void 0 : _owner$connectionHold3.name) || t("CS_NA")
    }, {
      title: t("CORE_COMMON_MOBILE_NUMBER"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold4 = owner.connectionHolders) === null || _owner$connectionHold4 === void 0 ? void 0 : (_owner$connectionHold5 = _owner$connectionHold4[0]) === null || _owner$connectionHold5 === void 0 ? void 0 : _owner$connectionHold5.mobileNumber) || t("CS_NA")
    }, {
      title: t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold6 = owner.connectionHolders) === null || _owner$connectionHold6 === void 0 ? void 0 : (_owner$connectionHold7 = _owner$connectionHold6[0]) === null || _owner$connectionHold7 === void 0 ? void 0 : _owner$connectionHold7.fatherOrHusbandName) || t("CS_NA")
    }, {
      title: t("WS_CORRESPONDANCE_ADDRESS_LABEL"),
      value: (owner === null || owner === void 0 ? void 0 : (_owner$connectionHold8 = owner.connectionHolders) === null || _owner$connectionHold8 === void 0 ? void 0 : (_owner$connectionHold9 = _owner$connectionHold8[0]) === null || _owner$connectionHold9 === void 0 ? void 0 : _owner$connectionHold9.correspondenceAddress) || t("CS_NA")
    }] : [{
      title: t("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),
      value: t("SCORE_YES") || t("CS_NA")
    }]
  };
};
const getHeaderDetails$5 = function (application, t, tenantId) {
  try {
    return Promise.resolve(mdmsData(tenantId, t)).then(function (dynamicHeaderData) {
      var _application$connecti4, _application$auditDet, _application$auditDet2, _application$addition2;
      let values = [];
      if (application !== null && application !== void 0 && application.connectionNo) values.push({
        title: t("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL") + ":",
        value: application === null || application === void 0 ? void 0 : application.connectionNo
      });
      return {
        title: "",
        isHeader: true,
        typeOfApplication: application !== null && application !== void 0 && (_application$connecti4 = application.connectionNo) !== null && _application$connecti4 !== void 0 && _application$connecti4.includes("SW") ? t("PDF_STATIC_LABEL_SW_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER") : t("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_WATER_CONNECTIONDETAIL"),
        date: (application !== null && application !== void 0 && (_application$auditDet = application.auditDetails) !== null && _application$auditDet !== void 0 && _application$auditDet.createdTime ? Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$auditDet2 = application.auditDetails) === null || _application$auditDet2 === void 0 ? void 0 : _application$auditDet2.createdTime) : Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : (_application$addition2 = application.additionalDetails) === null || _application$addition2 === void 0 ? void 0 : _application$addition2.appCreatedDate)) || "NA",
        values: values,
        ...dynamicHeaderData
      };
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
const getConnectionDetailsPDF = function (application, property, tenantInfo, t) {
  try {
    var _application$tradeLic, _application$tradeLic2;
    function _temp2() {
      return Promise.resolve(getHeaderDetails$5(application, t, tenantInfo)).then(function (header) {
        return {
          t: t,
          tenantId: tenantInfo,
          title: "PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",
          name: "" + t("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),
          email: "",
          phoneNumber: "",
          headerDetails: [header],
          details: [getConnectionDetails$3(application, t), getPropertyDetails$4(property, t), getConnectionHolderDetails$4(application, t)]
        };
      });
    }
    const filesArray = application === null || application === void 0 ? void 0 : (_application$tradeLic = application.tradeLicenseDetail) === null || _application$tradeLic === void 0 ? void 0 : (_application$tradeLic2 = _application$tradeLic.applicationDocuments) === null || _application$tradeLic2 === void 0 ? void 0 : _application$tradeLic2.map(value => value === null || value === void 0 ? void 0 : value.fileStoreId);
    let res;
    const _temp = function () {
      if (filesArray) {
        return Promise.resolve(Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId())).then(function (_Digit$UploadServices) {
          res = _Digit$UploadServices;
        });
      }
    }();
    return Promise.resolve(_temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp));
  } catch (e) {
    return Promise.reject(e);
  }
};

const ConnectionDetails$5 = () => {
  var _Digit$SessionStorage, _user$info, _data$SewerageConnect, _data$SewerageConnect2, _data$WaterConnection, _data$WaterConnection2, _Object$keys, _connectionData$Water, _connectionData$Sewer, _data$WaterConnection3, _data$WaterConnection4, _data$WaterConnection5, _data$WaterConnection6, _data$WaterConnection7, _data$WaterConnection8, _data$WaterConnection9, _data$WaterConnection10, _data$SewerageConnect3, _data$SewerageConnect4, _data$SewerageConnect5, _data$SewerageConnect6, _state, _state$applicationNo, _state2, _state3, _state4, _state4$applicationTy, _state5, _state6, _state7, _state8, _state8$applicationTy, _state9, _state10, _state11, _state12, _state12$applicationT, _state13, _state14, _state15, _state16, _state17, _state17$applicationT, _state18, _state18$waterSource, _state18$waterSource$, _state19, _state20, _state20$waterSource, _state20$waterSource$, _state21, _state22, _state23, _state24, _state24$additionalDe, _state25, _state26, _state27, _state28, _state28$property, _state28$property$own, _PTData$Properties2, _PTData$Properties2$, _PTData$Properties3, _PTData$Properties3$, _PTData$Properties3$$, _PTData$Properties3$$2, _PTData$Properties4, _PTData$Properties4$, _state29, _state30, _state31, _state32, _state33, _state33$connectionHo, _state33$connectionHo2, _data$WaterConnection18, _data$WaterConnection19, _data$WaterConnection20, _data$WaterConnection21, _data$SewerageConnect7, _data$SewerageConnect8, _data$SewerageConnect9, _data$SewerageConnect10, _data$WaterConnection22, _data$WaterConnection23, _data$WaterConnection24, _data$WaterConnection25, _data$SewerageConnect11, _data$SewerageConnect12, _data$SewerageConnect13, _data$SewerageConnect14, _data$WaterConnection26, _data$WaterConnection27, _data$WaterConnection28, _data$WaterConnection29, _data$SewerageConnect15, _data$SewerageConnect16, _data$SewerageConnect17, _data$SewerageConnect18, _data$WaterConnection30, _data$WaterConnection31, _data$WaterConnection32, _data$WaterConnection33, _data$SewerageConnect19, _data$SewerageConnect20, _data$SewerageConnect21, _data$SewerageConnect22, _data$WaterConnection34, _data$WaterConnection35, _data$WaterConnection36, _data$WaterConnection37, _data$SewerageConnect23, _data$SewerageConnect24, _data$SewerageConnect25, _data$SewerageConnect26, _data$WaterConnection38, _data$WaterConnection39, _data$WaterConnection40, _data$WaterConnection41, _data$SewerageConnect27, _data$SewerageConnect28, _data$SewerageConnect29, _data$SewerageConnect30, _data$WaterConnection42, _data$WaterConnection43, _data$WaterConnection44, _data$WaterConnection45, _data$SewerageConnect31, _data$SewerageConnect32, _data$SewerageConnect33, _data$SewerageConnect34, _data$WaterConnection46, _data$WaterConnection47, _data$WaterConnection48, _data$WaterConnection49, _data$SewerageConnect35, _data$SewerageConnect36, _data$SewerageConnect37, _data$SewerageConnect38, _data$WaterConnection50, _data$WaterConnection51, _data$WaterConnection52, _data$WaterConnection53, _data$SewerageConnect39, _data$SewerageConnect40, _data$SewerageConnect41, _data$SewerageConnect42, _data$WaterConnection54, _data$WaterConnection55, _data$WaterConnection56, _data$WaterConnection57, _data$SewerageConnect43, _data$SewerageConnect44, _data$SewerageConnect45, _data$SewerageConnect46, _state34, _data$WaterConnection58, _data$WaterConnection59, _data$WaterConnection60, _data$WaterConnection61, _data$WaterConnection62, _data$SewerageConnect47, _data$SewerageConnect48, _data$SewerageConnect49, _data$SewerageConnect50, _data$SewerageConnect51, _data$WaterConnection63, _data$WaterConnection64, _data$WaterConnection65, _data$WaterConnection66, _data$SewerageConnect52, _data$SewerageConnect53, _data$SewerageConnect54, _data$SewerageConnect55, _data$WaterConnection67, _data$WaterConnection68, _data$WaterConnection69, _data$WaterConnection70, _data$SewerageConnect56, _data$SewerageConnect57, _data$SewerageConnect58, _data$SewerageConnect59, _data$WaterConnection71, _data$WaterConnection72, _data$WaterConnection73, _data$WaterConnection74, _data$SewerageConnect60, _data$SewerageConnect61, _data$SewerageConnect62, _data$SewerageConnect63, _state35, _state35$connectionHo, _state35$connectionHo2, _state36, _state37, _state38, _paymentDetails$data5, _paymentDetails$data6;
  const {
    t
  } = reactI18next.useTranslation();
  const menuRef = React.useRef();
  const user = Digit.UserService.getUser();
  const history = reactRouterDom.useHistory();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  const [showOptions, setShowOptions] = React.useState(false);
  const applicationNobyData = window.location.href.includes("SW_") ? window.location.href.substring(window.location.href.indexOf("SW_")) : window.location.href.substring(window.location.href.indexOf("WS_"));
  let {
    state = {}
  } = reactRouterDom.useLocation();
  const [showModal, setshowModal] = React.useState(false);
  const [showActionToast, setshowActionToast] = React.useState(null);
  const mobileView = Digit.Utils.browser.isMobile();
  const getAddress = address => {
    var _address$locality, _address$locality2, _address$city;
    return "" + (address !== null && address !== void 0 && address.doorNo ? (address === null || address === void 0 ? void 0 : address.doorNo) + ", " : "") + (address !== null && address !== void 0 && address.street ? (address === null || address === void 0 ? void 0 : address.street) + ", " : "") + (address !== null && address !== void 0 && address.landmark ? (address === null || address === void 0 ? void 0 : address.landmark) + ", " : "") + (address !== null && address !== void 0 && (_address$locality = address.locality) !== null && _address$locality !== void 0 && _address$locality.code ? t("TENANTS_MOHALLA_" + (address === null || address === void 0 ? void 0 : (_address$locality2 = address.locality) === null || _address$locality2 === void 0 ? void 0 : _address$locality2.code)) : "") + (address !== null && address !== void 0 && (_address$city = address.city) !== null && _address$city !== void 0 && _address$city.code || address !== null && address !== void 0 && address.city ? ", " + t((address === null || address === void 0 ? void 0 : address.city.code) || (address === null || address === void 0 ? void 0 : address.city)) : "") + (address !== null && address !== void 0 && address.pincode ? ", " + address.pincode : " ");
  };
  let filter1 = {
    tenantId: tenantId,
    applicationNumber: applicationNobyData
  };
  var {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? "SW" : "WS"
  }, {
    filters: filter1,
    privacy: Digit.Utils.getPrivacyObject()
  }, true);
  let filter2 = {
    tenantId: tenantId,
    connectionNumber: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : (_data$SewerageConnect2 = _data$SewerageConnect[0]) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2.connectionNo : data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : (_data$WaterConnection2 = _data$WaterConnection[0]) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2.connectionNo
  };
  var {
    isLoading: isconnectionLoading,
    data: connectionData
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter2,
    BusinessService: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("SW") ? "SW" : "WS"
  }, {
    filters: filter2,
    privacy: Digit.Utils.getPrivacyObject(),
    enabled: filter2 !== null && filter2 !== void 0 && filter2.connectionNumber ? true : false
  }, true);
  state = ((_Object$keys = Object.keys(state)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) > 0 ? state : applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? connectionData === null || connectionData === void 0 ? void 0 : (_connectionData$Water = connectionData.WaterConnection) === null || _connectionData$Water === void 0 ? void 0 : _connectionData$Water[0] : connectionData === null || connectionData === void 0 ? void 0 : (_connectionData$Sewer = connectionData.SewerageConnections) === null || _connectionData$Sewer === void 0 ? void 0 : _connectionData$Sewer[0];
  const closeModal = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeModal, showOptions);
  const {
    isLoading: isPTLoading,
    isError: isPTError,
    error: PTerror,
    data: PTData
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : (_data$WaterConnection4 = _data$WaterConnection3[0]) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4.propertyId
    }
  }, {
    filters: {
      propertyIds: data === null || data === void 0 ? void 0 : (_data$WaterConnection5 = data.WaterConnection) === null || _data$WaterConnection5 === void 0 ? void 0 : (_data$WaterConnection6 = _data$WaterConnection5[0]) === null || _data$WaterConnection6 === void 0 ? void 0 : _data$WaterConnection6.propertyId
    },
    privacy: Digit.Utils.getPrivacyObject()
  });
  const checkifPrivacyenabled = Digit.Hooks.ws.useToCheckPrivacyEnablement({
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection7 = data.WaterConnection) === null || _data$WaterConnection7 === void 0 ? void 0 : (_data$WaterConnection8 = _data$WaterConnection7[0]) === null || _data$WaterConnection8 === void 0 ? void 0 : (_data$WaterConnection9 = _data$WaterConnection8.connectionHolders) === null || _data$WaterConnection9 === void 0 ? void 0 : (_data$WaterConnection10 = _data$WaterConnection9[0]) === null || _data$WaterConnection10 === void 0 ? void 0 : _data$WaterConnection10.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnections) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3[0]) === null || _data$SewerageConnect4 === void 0 ? void 0 : (_data$SewerageConnect5 = _data$SewerageConnect4.connectionHolders) === null || _data$SewerageConnect5 === void 0 ? void 0 : (_data$SewerageConnect6 = _data$SewerageConnect5[0]) === null || _data$SewerageConnect6 === void 0 ? void 0 : _data$SewerageConnect6.uuid,
      fieldName: "connectionHoldersMobileNumber",
      model: "WnSConnectionOwner"
    }
  }) || false;
  const closeBillToast = () => {
    setshowActionToast(null);
  };
  let noOfConnections = applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? connectionData === null || connectionData === void 0 ? void 0 : connectionData.WaterConnection : connectionData === null || connectionData === void 0 ? void 0 : connectionData.SewerageConnections;
  let isDisconnectionDone = false;
  if ((noOfConnections === null || noOfConnections === void 0 ? void 0 : noOfConnections.length) > 0) {
    const datalength = noOfConnections === null || noOfConnections === void 0 ? void 0 : noOfConnections.filter(data => (data === null || data === void 0 ? void 0 : data.applicationStatus) == "DISCONNECTION_EXECUTED" && (data === null || data === void 0 ? void 0 : data.applicationType.includes("DISCONNECT")));
    if (datalength !== null && datalength !== void 0 && datalength.length) isDisconnectionDone = true;
  }
  const {
    data: generatePdfKey
  } = Digit.Hooks.useCommonMDMS(tenantId, "common-masters", "ReceiptKey", {
    select: data => {
      var _data$commonMasters, _data$commonMasters$u, _data$commonMasters$u2;
      return ((_data$commonMasters = data["common-masters"]) === null || _data$commonMasters === void 0 ? void 0 : (_data$commonMasters$u = _data$commonMasters.uiCommonPay) === null || _data$commonMasters$u === void 0 ? void 0 : (_data$commonMasters$u2 = _data$commonMasters$u.filter(_ref => {
        var _WS;
        let {
          code
        } = _ref;
        return (_WS = "WS") === null || _WS === void 0 ? void 0 : _WS.includes(code);
      })[0]) === null || _data$commonMasters$u2 === void 0 ? void 0 : _data$commonMasters$u2.receiptKey) || "consolidatedreceipt";
    }
  });
  const handleDownloadPdf = function () {
    try {
      var _data$WaterConnection11, _data$WaterConnection12, _data$WaterConnection13, _PTData$Properties;
      const tenantInfo = data === null || data === void 0 ? void 0 : (_data$WaterConnection11 = data.WaterConnection) === null || _data$WaterConnection11 === void 0 ? void 0 : (_data$WaterConnection12 = _data$WaterConnection11[0]) === null || _data$WaterConnection12 === void 0 ? void 0 : _data$WaterConnection12.tenantId;
      let res = data === null || data === void 0 ? void 0 : (_data$WaterConnection13 = data.WaterConnection) === null || _data$WaterConnection13 === void 0 ? void 0 : _data$WaterConnection13[0];
      const PDFdata = getConnectionDetailsPDF({
        ...res
      }, {
        ...(PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties = PTData.Properties) === null || _PTData$Properties === void 0 ? void 0 : _PTData$Properties[0])
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      setShowOptions(false);
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const printApplicationReceipts = function () {
    try {
      var _data$WaterConnection14, _data$WaterConnection15;
      const tenantId = Digit.ULBService.getCurrentTenantId();
      const state = Digit.ULBService.getStateId();
      return Promise.resolve(Digit.PaymentService.getReciept(tenantId, "WS", {
        consumerCodes: data === null || data === void 0 ? void 0 : (_data$WaterConnection14 = data.WaterConnection) === null || _data$WaterConnection14 === void 0 ? void 0 : (_data$WaterConnection15 = _data$WaterConnection14[0]) === null || _data$WaterConnection15 === void 0 ? void 0 : _data$WaterConnection15.connectionNo
      })).then(function (payments) {
        var _payments$Payments$;
        function _temp2() {
          return Promise.resolve(Digit.PaymentService.printReciept(state, {
            fileStoreIds: response.filestoreIds[0]
          })).then(function (fileStore) {
            window.open(fileStore[response.filestoreIds[0]], "_blank");
          });
        }
        let response = {
          filestoreIds: [(_payments$Payments$ = payments.Payments[0]) === null || _payments$Payments$ === void 0 ? void 0 : _payments$Payments$.fileStoreId]
        };
        const _temp = function (_payments$Payments$2) {
          if (!((_payments$Payments$2 = payments.Payments[0]) !== null && _payments$Payments$2 !== void 0 && _payments$Payments$2.fileStoreId)) {
            return Promise.resolve(Digit.PaymentService.generatePdf(state, {
              Payments: payments.Payments
            }, generatePdfKey)).then(function (_Digit$PaymentService) {
              response = _Digit$PaymentService;
            });
          }
        }();
        return _temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp);
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  let downloadOptions = [];
  downloadOptions.push({
    order: 1,
    label: t("WS_CONNECTION_DETAILS"),
    onClick: () => handleDownloadPdf()
  });
  const applicationDownloadObject = {
    order: 2,
    label: t("WS_APPLICATION"),
    onClick: () => handleDownloadPdf
  };
  const receiptApplicationFeeDownloadObject = {
    order: 3,
    label: t("WS_RECEIPT_APPLICATION_FEE"),
    onClick: printApplicationReceipts
  };
  downloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  const isSW = (_state = state) === null || _state === void 0 ? void 0 : (_state$applicationNo = _state.applicationNo) === null || _state$applicationNo === void 0 ? void 0 : _state$applicationNo.includes("SW");
  const fetchBillParams = {
    consumerCode: (_state2 = state) === null || _state2 === void 0 ? void 0 : _state2.connectionNo
  };
  const paymentDetails = Digit.Hooks.useFetchBillsForBuissnessService({
    businessService: isSW ? "SW" : "WS",
    ...fetchBillParams,
    tenantId: tenantId
  }, {
    retry: false
  });
  const getDisconnectionButton = () => {
    if (!(data !== null && data !== void 0 && data.checkWorkFlow)) {
      setshowActionToast({
        key: "error",
        label: "CONNECTION_INPROGRESS_LABEL"
      });
      setTimeout(() => {
        closeBillToast();
      }, 5000);
    } else {
      var _paymentDetails$data, _paymentDetails$data$, _paymentDetails$data2, _paymentDetails$data3, _paymentDetails$data4;
      if ((paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data = paymentDetails.data) === null || _paymentDetails$data === void 0 ? void 0 : (_paymentDetails$data$ = _paymentDetails$data.Bill) === null || _paymentDetails$data$ === void 0 ? void 0 : _paymentDetails$data$.length) === 0) {
        let pathname = "/digit-ui/citizen/ws/disconnect-application";
        Digit.SessionStorage.set("WS_DISCONNECTION", {
          ...state,
          serviceType: isSW ? "SEWERAGE" : "WATER"
        });
        history.push("" + pathname);
      } else if ((paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data2 = paymentDetails.data) === null || _paymentDetails$data2 === void 0 ? void 0 : (_paymentDetails$data3 = _paymentDetails$data2.Bill) === null || _paymentDetails$data3 === void 0 ? void 0 : (_paymentDetails$data4 = _paymentDetails$data3[0]) === null || _paymentDetails$data4 === void 0 ? void 0 : _paymentDetails$data4.totalAmount) !== 0) {
        setshowModal(true);
      }
    }
  };
  function onActionSelect() {
    getDisconnectionButton();
  }
  const Close = () => /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
  const Heading = props => {
    return /*#__PURE__*/React__default.createElement("h1", {
      style: {
        marginLeft: "22px"
      },
      className: "heading-m BPAheading-m"
    }, props.label);
  };
  const CloseBtn = props => {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "icon-bg-secondary",
      onClick: props.onClick
    }, /*#__PURE__*/React__default.createElement(Close, null));
  };
  if (isLoading || isPTLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  sessionStorage.setItem("ApplicationNoState", (_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.applicationNo);
  let serviceType = (_state4 = state) !== null && _state4 !== void 0 && (_state4$applicationTy = _state4.applicationType) !== null && _state4$applicationTy !== void 0 && _state4$applicationTy.includes("WATER") ? "WATER" : "SEWERAGE";
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "cardHeaderWithOptions",
    style: {
      marginRight: "auto",
      maxWidth: "960px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_COMMON_CONNECTION_DETAIL")), downloadOptions && downloadOptions.length > 0 && /*#__PURE__*/React__default.createElement("div", {
    ref: menuRef
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: downloadOptions,
    optionsStyle: {
      margin: '0px'
    }
  }))), checkifPrivacyenabled && /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement("div", {
    className: "hide-seperator"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    text: (_state5 = state) === null || _state5 === void 0 ? void 0 : _state5.connectionNo
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERVICE_NAME_LABEL"),
    text: t("WS_APPLICATION_TYPE_" + ((_state6 = state) === null || _state6 === void 0 ? void 0 : _state6.applicationType)),
    textStyle: {
      wordBreak: "break-word"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_STATUS"),
    text: ((_state7 = state) === null || _state7 === void 0 ? void 0 : _state7.status) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_DETAIL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, ((_state8 = state) === null || _state8 === void 0 ? void 0 : (_state8$applicationTy = _state8.applicationType) === null || _state8$applicationTy === void 0 ? void 0 : _state8$applicationTy.includes("WATER")) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),
    text: ((_state9 = state) === null || _state9 === void 0 ? void 0 : _state9.connectionType) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TAPS"),
    text: (_state10 = state) === null || _state10 === void 0 ? void 0 : _state10.noOfTaps,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PIPE_SIZE_IN_INCHES_LABEL"),
    text: ((_state11 = state) === null || _state11 === void 0 ? void 0 : _state11.pipeSize) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  })), ((_state12 = state) === null || _state12 === void 0 ? void 0 : (_state12$applicationT = _state12.applicationType) === null || _state12$applicationT === void 0 ? void 0 : _state12$applicationT.includes("SEWERAGE")) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONN_DETAIL_WATER_CLOSETS"),
    text: (_state13 = state) === null || _state13 === void 0 ? void 0 : _state13.proposedWaterClosets,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
    text: ((_state14 = state) === null || _state14 === void 0 ? void 0 : _state14.proposedToilets) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
    text: (_state15 = state) !== null && _state15 !== void 0 && _state15.connectionExecutionDate ? Digit.DateUtils.ConvertEpochToDate((_state16 = state) === null || _state16 === void 0 ? void 0 : _state16.connectionExecutionDate) : t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  })), ((_state17 = state) === null || _state17 === void 0 ? void 0 : (_state17$applicationT = _state17.applicationType) === null || _state17$applicationT === void 0 ? void 0 : _state17$applicationT.includes("WATER")) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_WATER_SOURCE"),
    text: t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll((_state18 = state) === null || _state18 === void 0 ? void 0 : (_state18$waterSource = _state18.waterSource) === null || _state18$waterSource === void 0 ? void 0 : (_state18$waterSource$ = _state18$waterSource.split(".")) === null || _state18$waterSource$ === void 0 ? void 0 : _state18$waterSource$[0], ".", "_")) || t("WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll((_state19 = state) === null || _state19 === void 0 ? void 0 : _state19.waterSource, ".", "_")) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),
    text: t((_state20 = state) === null || _state20 === void 0 ? void 0 : (_state20$waterSource = _state20.waterSource) === null || _state20$waterSource === void 0 ? void 0 : (_state20$waterSource$ = _state20$waterSource.split(".")) === null || _state20$waterSource$ === void 0 ? void 0 : _state20$waterSource$[1]) || t("CS_NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),
    text: Digit.DateUtils.ConvertEpochToDate((_state21 = state) === null || _state21 === void 0 ? void 0 : _state21.connectionExecutionDate) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_METER_ID"),
    text: (_state22 = state) === null || _state22 === void 0 ? void 0 : _state22.meterId,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAIL_METER_INSTALL_DATE"),
    text: Digit.DateUtils.ConvertEpochToDate((_state23 = state) === null || _state23 === void 0 ? void 0 : _state23.meterInstallationDate) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_ADDN_DETAILS_INITIAL_METER_READING"),
    text: ((_state24 = state) === null || _state24 === void 0 ? void 0 : (_state24$additionalDe = _state24.additionalDetails) === null || _state24$additionalDe === void 0 ? void 0 : _state24$additionalDe.initialMeterReading) || "NA",
    textStyle: {
      whiteSpace: "pre"
    }
  })), ((_state25 = state) === null || _state25 === void 0 ? void 0 : _state25.connectionType) === "Metered" && /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/ws/consumption/details?applicationNo=" + ((_state26 = state) === null || _state26 === void 0 ? void 0 : _state26.connectionNo)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left",
      marginBottom: "10px",
      marginTop: "5px"
    },
    label: t("WS_CONNECTION_DETAILS_VIEW_CONSUMPTION_LABEL")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_PROPERTY_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PROPERTY_ID_LABEL"),
    text: (_state27 = state) === null || _state27 === void 0 ? void 0 : _state27.propertyId
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_OWN_NAME_LABEL"),
    text: (_state28 = state) === null || _state28 === void 0 ? void 0 : (_state28$property = _state28.property) === null || _state28$property === void 0 ? void 0 : (_state28$property$own = _state28$property.owners) === null || _state28$property$own === void 0 ? void 0 : _state28$property$own.map(owner => owner.name).join(","),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_PROPADD"),
    text: getAddress(PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties2 = PTData.Properties) === null || _PTData$Properties2 === void 0 ? void 0 : (_PTData$Properties2$ = _PTData$Properties2[0]) === null || _PTData$Properties2$ === void 0 ? void 0 : _PTData$Properties2$.address) || t("CS_NA"),
    textStyle: {
      wordBreak: "break-word"
    },
    privacy: {
      uuid: PTData === null || PTData === void 0 ? void 0 : (_PTData$Properties3 = PTData.Properties) === null || _PTData$Properties3 === void 0 ? void 0 : (_PTData$Properties3$ = _PTData$Properties3[0]) === null || _PTData$Properties3$ === void 0 ? void 0 : (_PTData$Properties3$$ = _PTData$Properties3$.owners) === null || _PTData$Properties3$$ === void 0 ? void 0 : (_PTData$Properties3$$2 = _PTData$Properties3$$[0]) === null || _PTData$Properties3$$2 === void 0 ? void 0 : _PTData$Properties3$$2.uuid,
      fieldName: ["doorNo", "street", "landmark"],
      model: "Property",
      hide: !(PTData !== null && PTData !== void 0 && (_PTData$Properties4 = PTData.Properties) !== null && _PTData$Properties4 !== void 0 && (_PTData$Properties4$ = _PTData$Properties4[0]) !== null && _PTData$Properties4$ !== void 0 && _PTData$Properties4$.address),
      showValue: true,
      loadData: {
        serviceName: "/property-services/property/_search",
        requestBody: {},
        requestParam: {
          tenantId: tenantId,
          propertyIds: (_state29 = state) === null || _state29 === void 0 ? void 0 : _state29.propertyId
        },
        jsonPath: "Properties[0].address.street",
        isArray: false,
        d: res => {
          let resultString = (lodash.get(res, "Properties[0].address.doorNo") ? lodash.get(res, "Properties[0].address.doorNo") + ", " : "") + (lodash.get(res, "Properties[0].address.street") ? lodash.get(res, "Properties[0].address.street") + ", " : "") + (lodash.get(res, "Properties[0].address.landmark") ? "" + lodash.get(res, "Properties[0].address.landmark") : "");
          return resultString;
        }
      }
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/commonpt/view-property?propertyId=" + ((_state30 = state) === null || _state30 === void 0 ? void 0 : _state30.propertyId) + "&tenantId=" + ((_state31 = state) === null || _state31 === void 0 ? void 0 : _state31.tenantId)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left",
      marginBottom: "10px",
      marginTop: "5px"
    },
    label: t("WS_VIEW_PROPERTY")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")), (_state32 = state) !== null && _state32 !== void 0 && _state32.connectionHolders ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_OWN_NAME_LABEL"),
    text: (_state33 = state) === null || _state33 === void 0 ? void 0 : (_state33$connectionHo = _state33.connectionHolders) === null || _state33$connectionHo === void 0 ? void 0 : (_state33$connectionHo2 = _state33$connectionHo[0]) === null || _state33$connectionHo2 === void 0 ? void 0 : _state33$connectionHo2.name,
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_GENDER_LABEL"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection18 = data.WaterConnection) === null || _data$WaterConnection18 === void 0 ? void 0 : (_data$WaterConnection19 = _data$WaterConnection18[0]) === null || _data$WaterConnection19 === void 0 ? void 0 : (_data$WaterConnection20 = _data$WaterConnection19.connectionHolders) === null || _data$WaterConnection20 === void 0 ? void 0 : (_data$WaterConnection21 = _data$WaterConnection20[0]) === null || _data$WaterConnection21 === void 0 ? void 0 : _data$WaterConnection21.gender : data === null || data === void 0 ? void 0 : (_data$SewerageConnect7 = data.SewerageConnections) === null || _data$SewerageConnect7 === void 0 ? void 0 : (_data$SewerageConnect8 = _data$SewerageConnect7[0]) === null || _data$SewerageConnect8 === void 0 ? void 0 : (_data$SewerageConnect9 = _data$SewerageConnect8.connectionHolders) === null || _data$SewerageConnect9 === void 0 ? void 0 : (_data$SewerageConnect10 = _data$SewerageConnect9[0]) === null || _data$SewerageConnect10 === void 0 ? void 0 : _data$SewerageConnect10.gender,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection22 = data.WaterConnection) === null || _data$WaterConnection22 === void 0 ? void 0 : (_data$WaterConnection23 = _data$WaterConnection22[0]) === null || _data$WaterConnection23 === void 0 ? void 0 : (_data$WaterConnection24 = _data$WaterConnection23.connectionHolders) === null || _data$WaterConnection24 === void 0 ? void 0 : (_data$WaterConnection25 = _data$WaterConnection24[0]) === null || _data$WaterConnection25 === void 0 ? void 0 : _data$WaterConnection25.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect11 = data.SewerageConnections) === null || _data$SewerageConnect11 === void 0 ? void 0 : (_data$SewerageConnect12 = _data$SewerageConnect11[0]) === null || _data$SewerageConnect12 === void 0 ? void 0 : (_data$SewerageConnect13 = _data$SewerageConnect12.connectionHolders) === null || _data$SewerageConnect13 === void 0 ? void 0 : (_data$SewerageConnect14 = _data$SewerageConnect13[0]) === null || _data$SewerageConnect14 === void 0 ? void 0 : _data$SewerageConnect14.uuid,
      fieldName: "gender",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].gender" : "SewerageConnections[0].connectionHolders[0].gender",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_MOBILE_NO_LABEL"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection26 = data.WaterConnection) === null || _data$WaterConnection26 === void 0 ? void 0 : (_data$WaterConnection27 = _data$WaterConnection26[0]) === null || _data$WaterConnection27 === void 0 ? void 0 : (_data$WaterConnection28 = _data$WaterConnection27.connectionHolders) === null || _data$WaterConnection28 === void 0 ? void 0 : (_data$WaterConnection29 = _data$WaterConnection28[0]) === null || _data$WaterConnection29 === void 0 ? void 0 : _data$WaterConnection29.mobileNumber : data === null || data === void 0 ? void 0 : (_data$SewerageConnect15 = data.SewerageConnections) === null || _data$SewerageConnect15 === void 0 ? void 0 : (_data$SewerageConnect16 = _data$SewerageConnect15[0]) === null || _data$SewerageConnect16 === void 0 ? void 0 : (_data$SewerageConnect17 = _data$SewerageConnect16.connectionHolders) === null || _data$SewerageConnect17 === void 0 ? void 0 : (_data$SewerageConnect18 = _data$SewerageConnect17[0]) === null || _data$SewerageConnect18 === void 0 ? void 0 : _data$SewerageConnect18.mobileNumber,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection30 = data.WaterConnection) === null || _data$WaterConnection30 === void 0 ? void 0 : (_data$WaterConnection31 = _data$WaterConnection30[0]) === null || _data$WaterConnection31 === void 0 ? void 0 : (_data$WaterConnection32 = _data$WaterConnection31.connectionHolders) === null || _data$WaterConnection32 === void 0 ? void 0 : (_data$WaterConnection33 = _data$WaterConnection32[0]) === null || _data$WaterConnection33 === void 0 ? void 0 : _data$WaterConnection33.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect19 = data.SewerageConnections) === null || _data$SewerageConnect19 === void 0 ? void 0 : (_data$SewerageConnect20 = _data$SewerageConnect19[0]) === null || _data$SewerageConnect20 === void 0 ? void 0 : (_data$SewerageConnect21 = _data$SewerageConnect20.connectionHolders) === null || _data$SewerageConnect21 === void 0 ? void 0 : (_data$SewerageConnect22 = _data$SewerageConnect21[0]) === null || _data$SewerageConnect22 === void 0 ? void 0 : _data$SewerageConnect22.uuid,
      fieldName: "connectionHoldersMobileNumber",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].mobileNumber" : "SewerageConnections[0].connectionHolders[0].mobileNumber",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection34 = data.WaterConnection) === null || _data$WaterConnection34 === void 0 ? void 0 : (_data$WaterConnection35 = _data$WaterConnection34[0]) === null || _data$WaterConnection35 === void 0 ? void 0 : (_data$WaterConnection36 = _data$WaterConnection35.connectionHolders) === null || _data$WaterConnection36 === void 0 ? void 0 : (_data$WaterConnection37 = _data$WaterConnection36[0]) === null || _data$WaterConnection37 === void 0 ? void 0 : _data$WaterConnection37.fatherOrHusbandName : data === null || data === void 0 ? void 0 : (_data$SewerageConnect23 = data.SewerageConnections) === null || _data$SewerageConnect23 === void 0 ? void 0 : (_data$SewerageConnect24 = _data$SewerageConnect23[0]) === null || _data$SewerageConnect24 === void 0 ? void 0 : (_data$SewerageConnect25 = _data$SewerageConnect24.connectionHolders) === null || _data$SewerageConnect25 === void 0 ? void 0 : (_data$SewerageConnect26 = _data$SewerageConnect25[0]) === null || _data$SewerageConnect26 === void 0 ? void 0 : _data$SewerageConnect26.fatherOrHusbandName,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection38 = data.WaterConnection) === null || _data$WaterConnection38 === void 0 ? void 0 : (_data$WaterConnection39 = _data$WaterConnection38[0]) === null || _data$WaterConnection39 === void 0 ? void 0 : (_data$WaterConnection40 = _data$WaterConnection39.connectionHolders) === null || _data$WaterConnection40 === void 0 ? void 0 : (_data$WaterConnection41 = _data$WaterConnection40[0]) === null || _data$WaterConnection41 === void 0 ? void 0 : _data$WaterConnection41.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect27 = data.SewerageConnections) === null || _data$SewerageConnect27 === void 0 ? void 0 : (_data$SewerageConnect28 = _data$SewerageConnect27[0]) === null || _data$SewerageConnect28 === void 0 ? void 0 : (_data$SewerageConnect29 = _data$SewerageConnect28.connectionHolders) === null || _data$SewerageConnect29 === void 0 ? void 0 : (_data$SewerageConnect30 = _data$SewerageConnect29[0]) === null || _data$SewerageConnect30 === void 0 ? void 0 : _data$SewerageConnect30.uuid,
      fieldName: "fatherOrHusbandName",
      model: "WnSConnectionOwner",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].fatherOrHusbandName" : "SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_RELATION_LABEL"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection42 = data.WaterConnection) === null || _data$WaterConnection42 === void 0 ? void 0 : (_data$WaterConnection43 = _data$WaterConnection42[0]) === null || _data$WaterConnection43 === void 0 ? void 0 : (_data$WaterConnection44 = _data$WaterConnection43.connectionHolders) === null || _data$WaterConnection44 === void 0 ? void 0 : (_data$WaterConnection45 = _data$WaterConnection44[0]) === null || _data$WaterConnection45 === void 0 ? void 0 : _data$WaterConnection45.relationship : data === null || data === void 0 ? void 0 : (_data$SewerageConnect31 = data.SewerageConnections) === null || _data$SewerageConnect31 === void 0 ? void 0 : (_data$SewerageConnect32 = _data$SewerageConnect31[0]) === null || _data$SewerageConnect32 === void 0 ? void 0 : (_data$SewerageConnect33 = _data$SewerageConnect32.connectionHolders) === null || _data$SewerageConnect33 === void 0 ? void 0 : (_data$SewerageConnect34 = _data$SewerageConnect33[0]) === null || _data$SewerageConnect34 === void 0 ? void 0 : _data$SewerageConnect34.relationship,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection46 = data.WaterConnection) === null || _data$WaterConnection46 === void 0 ? void 0 : (_data$WaterConnection47 = _data$WaterConnection46[0]) === null || _data$WaterConnection47 === void 0 ? void 0 : (_data$WaterConnection48 = _data$WaterConnection47.connectionHolders) === null || _data$WaterConnection48 === void 0 ? void 0 : (_data$WaterConnection49 = _data$WaterConnection48[0]) === null || _data$WaterConnection49 === void 0 ? void 0 : _data$WaterConnection49.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect35 = data.SewerageConnections) === null || _data$SewerageConnect35 === void 0 ? void 0 : (_data$SewerageConnect36 = _data$SewerageConnect35[0]) === null || _data$SewerageConnect36 === void 0 ? void 0 : (_data$SewerageConnect37 = _data$SewerageConnect36.connectionHolders) === null || _data$SewerageConnect37 === void 0 ? void 0 : (_data$SewerageConnect38 = _data$SewerageConnect37[0]) === null || _data$SewerageConnect38 === void 0 ? void 0 : _data$SewerageConnect38.uuid,
      fieldName: "relationship",
      model: "WnSConnection",
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].relationship" : "SewerageConnections[0].connectionHolders[0].relationship",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_CROSADD"),
    text: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection50 = data.WaterConnection) === null || _data$WaterConnection50 === void 0 ? void 0 : (_data$WaterConnection51 = _data$WaterConnection50[0]) === null || _data$WaterConnection51 === void 0 ? void 0 : (_data$WaterConnection52 = _data$WaterConnection51.connectionHolders) === null || _data$WaterConnection52 === void 0 ? void 0 : (_data$WaterConnection53 = _data$WaterConnection52[0]) === null || _data$WaterConnection53 === void 0 ? void 0 : _data$WaterConnection53.correspondenceAddress : data === null || data === void 0 ? void 0 : (_data$SewerageConnect39 = data.SewerageConnections) === null || _data$SewerageConnect39 === void 0 ? void 0 : (_data$SewerageConnect40 = _data$SewerageConnect39[0]) === null || _data$SewerageConnect40 === void 0 ? void 0 : (_data$SewerageConnect41 = _data$SewerageConnect40.connectionHolders) === null || _data$SewerageConnect41 === void 0 ? void 0 : (_data$SewerageConnect42 = _data$SewerageConnect41[0]) === null || _data$SewerageConnect42 === void 0 ? void 0 : _data$SewerageConnect42.correspondenceAddress,
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection54 = data.WaterConnection) === null || _data$WaterConnection54 === void 0 ? void 0 : (_data$WaterConnection55 = _data$WaterConnection54[0]) === null || _data$WaterConnection55 === void 0 ? void 0 : (_data$WaterConnection56 = _data$WaterConnection55.connectionHolders) === null || _data$WaterConnection56 === void 0 ? void 0 : (_data$WaterConnection57 = _data$WaterConnection56[0]) === null || _data$WaterConnection57 === void 0 ? void 0 : _data$WaterConnection57.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect43 = data.SewerageConnections) === null || _data$SewerageConnect43 === void 0 ? void 0 : (_data$SewerageConnect44 = _data$SewerageConnect43[0]) === null || _data$SewerageConnect44 === void 0 ? void 0 : (_data$SewerageConnect45 = _data$SewerageConnect44.connectionHolders) === null || _data$SewerageConnect45 === void 0 ? void 0 : (_data$SewerageConnect46 = _data$SewerageConnect45[0]) === null || _data$SewerageConnect46 === void 0 ? void 0 : _data$SewerageConnect46.uuid,
      fieldName: "correspondenceAddress",
      model: "WnSConnectionOwner",
      hide: !((_state34 = state) !== null && _state34 !== void 0 && _state34.connectionHolders),
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].correspondenceAddress" : "SewerageConnections[0].connectionHolders[0].correspondenceAddress",
        isArray: false
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),
    text: (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? !(data !== null && data !== void 0 && (_data$WaterConnection58 = data.WaterConnection) !== null && _data$WaterConnection58 !== void 0 && (_data$WaterConnection59 = _data$WaterConnection58[0]) !== null && _data$WaterConnection59 !== void 0 && (_data$WaterConnection60 = _data$WaterConnection59.connectionHolders) !== null && _data$WaterConnection60 !== void 0 && (_data$WaterConnection61 = _data$WaterConnection60[0]) !== null && _data$WaterConnection61 !== void 0 && (_data$WaterConnection62 = _data$WaterConnection61.ownerType) !== null && _data$WaterConnection62 !== void 0 && _data$WaterConnection62.includes("*")) : !(data !== null && data !== void 0 && (_data$SewerageConnect47 = data.SewerageConnections) !== null && _data$SewerageConnect47 !== void 0 && (_data$SewerageConnect48 = _data$SewerageConnect47[0]) !== null && _data$SewerageConnect48 !== void 0 && (_data$SewerageConnect49 = _data$SewerageConnect48.connectionHolders) !== null && _data$SewerageConnect49 !== void 0 && (_data$SewerageConnect50 = _data$SewerageConnect49[0]) !== null && _data$SewerageConnect50 !== void 0 && (_data$SewerageConnect51 = _data$SewerageConnect50.ownerType) !== null && _data$SewerageConnect51 !== void 0 && _data$SewerageConnect51.includes("*"))) ? t("COMMON_MASTERS_OWNERTYPE_" + (applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection63 = data.WaterConnection) === null || _data$WaterConnection63 === void 0 ? void 0 : (_data$WaterConnection64 = _data$WaterConnection63[0]) === null || _data$WaterConnection64 === void 0 ? void 0 : (_data$WaterConnection65 = _data$WaterConnection64.connectionHolders) === null || _data$WaterConnection65 === void 0 ? void 0 : (_data$WaterConnection66 = _data$WaterConnection65[0]) === null || _data$WaterConnection66 === void 0 ? void 0 : _data$WaterConnection66.ownerType : data === null || data === void 0 ? void 0 : (_data$SewerageConnect52 = data.SewerageConnections) === null || _data$SewerageConnect52 === void 0 ? void 0 : (_data$SewerageConnect53 = _data$SewerageConnect52[0]) === null || _data$SewerageConnect53 === void 0 ? void 0 : (_data$SewerageConnect54 = _data$SewerageConnect53.connectionHolders) === null || _data$SewerageConnect54 === void 0 ? void 0 : (_data$SewerageConnect55 = _data$SewerageConnect54[0]) === null || _data$SewerageConnect55 === void 0 ? void 0 : _data$SewerageConnect55.ownerType)) : applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection67 = data.WaterConnection) === null || _data$WaterConnection67 === void 0 ? void 0 : (_data$WaterConnection68 = _data$WaterConnection67[0]) === null || _data$WaterConnection68 === void 0 ? void 0 : (_data$WaterConnection69 = _data$WaterConnection68.connectionHolders) === null || _data$WaterConnection69 === void 0 ? void 0 : (_data$WaterConnection70 = _data$WaterConnection69[0]) === null || _data$WaterConnection70 === void 0 ? void 0 : _data$WaterConnection70.ownerType : data === null || data === void 0 ? void 0 : (_data$SewerageConnect56 = data.SewerageConnections) === null || _data$SewerageConnect56 === void 0 ? void 0 : (_data$SewerageConnect57 = _data$SewerageConnect56[0]) === null || _data$SewerageConnect57 === void 0 ? void 0 : (_data$SewerageConnect58 = _data$SewerageConnect57.connectionHolders) === null || _data$SewerageConnect58 === void 0 ? void 0 : (_data$SewerageConnect59 = _data$SewerageConnect58[0]) === null || _data$SewerageConnect59 === void 0 ? void 0 : _data$SewerageConnect59.ownerType,
    textStyle: {
      whiteSpace: "pre"
    },
    privacy: {
      uuid: applicationNobyData !== null && applicationNobyData !== void 0 && applicationNobyData.includes("WS") ? data === null || data === void 0 ? void 0 : (_data$WaterConnection71 = data.WaterConnection) === null || _data$WaterConnection71 === void 0 ? void 0 : (_data$WaterConnection72 = _data$WaterConnection71[0]) === null || _data$WaterConnection72 === void 0 ? void 0 : (_data$WaterConnection73 = _data$WaterConnection72.connectionHolders) === null || _data$WaterConnection73 === void 0 ? void 0 : (_data$WaterConnection74 = _data$WaterConnection73[0]) === null || _data$WaterConnection74 === void 0 ? void 0 : _data$WaterConnection74.uuid : data === null || data === void 0 ? void 0 : (_data$SewerageConnect60 = data.SewerageConnections) === null || _data$SewerageConnect60 === void 0 ? void 0 : (_data$SewerageConnect61 = _data$SewerageConnect60[0]) === null || _data$SewerageConnect61 === void 0 ? void 0 : (_data$SewerageConnect62 = _data$SewerageConnect61.connectionHolders) === null || _data$SewerageConnect62 === void 0 ? void 0 : (_data$SewerageConnect63 = _data$SewerageConnect62[0]) === null || _data$SewerageConnect63 === void 0 ? void 0 : _data$SewerageConnect63.uuid,
      fieldName: "ownerType",
      model: "WnSConnection",
      hide: !((_state35 = state) !== null && _state35 !== void 0 && (_state35$connectionHo = _state35.connectionHolders) !== null && _state35$connectionHo !== void 0 && (_state35$connectionHo2 = _state35$connectionHo[0]) !== null && _state35$connectionHo2 !== void 0 && _state35$connectionHo2.ownerType),
      showValue: false,
      loadData: {
        serviceName: serviceType === "WATER" ? "/ws-services/wc/_search" : "/sw-services/swc/_search",
        requestBody: {},
        requestParam: {
          tenantId,
          applicationNumber: applicationNobyData
        },
        jsonPath: serviceType === "WATER" ? "WaterConnection[0].connectionHolders[0].ownerType" : "SewerageConnections[0].connectionHolders[0].ownerType",
        isArray: false,
        d: res => {
          var _res$WaterConnection, _res$WaterConnection2, _res$WaterConnection3, _res$WaterConnection4, _res$WaterConnection5, _res$WaterConnection6, _res$SewerageConnecti, _res$SewerageConnecti2, _res$SewerageConnecti3, _res$SewerageConnecti4, _res$SewerageConnecti5;
          let resultString = res !== null && res !== void 0 && (_res$WaterConnection = res.WaterConnection) !== null && _res$WaterConnection !== void 0 && _res$WaterConnection[0] ? t("PROPERTYTAX_OWNERTYPE_" + (res === null || res === void 0 ? void 0 : (_res$WaterConnection2 = res.WaterConnection) === null || _res$WaterConnection2 === void 0 ? void 0 : (_res$WaterConnection3 = _res$WaterConnection2[0]) === null || _res$WaterConnection3 === void 0 ? void 0 : (_res$WaterConnection4 = _res$WaterConnection3.connectionHolders) === null || _res$WaterConnection4 === void 0 ? void 0 : (_res$WaterConnection5 = _res$WaterConnection4[0]) === null || _res$WaterConnection5 === void 0 ? void 0 : (_res$WaterConnection6 = _res$WaterConnection5.ownerType) === null || _res$WaterConnection6 === void 0 ? void 0 : _res$WaterConnection6.toUpperCase())) : t("PROPERTYTAX_OWNERTYPE_" + (res === null || res === void 0 ? void 0 : (_res$SewerageConnecti = res.SewerageConnections) === null || _res$SewerageConnecti === void 0 ? void 0 : (_res$SewerageConnecti2 = _res$SewerageConnecti[0]) === null || _res$SewerageConnecti2 === void 0 ? void 0 : (_res$SewerageConnecti3 = _res$SewerageConnecti2.connectionHolders) === null || _res$SewerageConnecti3 === void 0 ? void 0 : (_res$SewerageConnecti4 = _res$SewerageConnecti3[0]) === null || _res$SewerageConnecti4 === void 0 ? void 0 : (_res$SewerageConnecti5 = _res$SewerageConnecti4.ownerType) === null || _res$SewerageConnecti5 === void 0 ? void 0 : _res$SewerageConnecti5.toUpperCase()));
          return resultString;
        }
      }
    }
  }))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_PROPERTY_OWNER_SAME_AS_CONN_HOLDERS")), (((_state36 = state) === null || _state36 === void 0 ? void 0 : _state36.status) !== "inactive" || ((_state37 = state) === null || _state37 === void 0 ? void 0 : _state37.applicationStatus) !== "Inactive" || ((_state38 = state) === null || _state38 === void 0 ? void 0 : _state38.applicationStatus) !== "INACTIVE") && !isDisconnectionDone ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      position: "relative",
      boxShadow: "none",
      minWidth: "240px",
      maxWidth: "310px",
      padding: "0px",
      marginTop: "15px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    style: {
      width: "100%"
    },
    label: t("WS_DISCONNECTION_BUTTON"),
    onSubmit: onActionSelect
  }))) : null, showModal ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    open: showModal,
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t("WS_PENDING_DUES_LABEL")
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: () => setshowModal(false)
    }),
    center: true,
    formId: "modal-action",
    actionSingleLabel: t("COMMON_MAKE_PAYMENT"),
    hideSubmit: true,
    actionSingleSubmit: () => {
      var _state39, _state40;
      history.push("/digit-ui/citizen/payment/collect/" + (isSW ? "SW" : "WS") + "/" + encodeURIComponent((_state39 = state) === null || _state39 === void 0 ? void 0 : _state39.connectionNo) + "/" + tenantId + "?consumerCode=" + ((_state40 = state) === null || _state40 === void 0 ? void 0 : _state40.connectionNo) + "&&tenantId=" + tenantId + "&&workflow=WNS");
      setshowModal(false);
    },
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      minHeight: "45px",
      height: "auto",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      minHeight: "45px",
      height: "auto",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "modal-header-ws"
  }, t("WS_CLEAR_DUES_DISCONNECTION_SUB_HEADER_LABEL"), " "), /*#__PURE__*/React__default.createElement("div", {
    className: "modal-body-ws"
  }, /*#__PURE__*/React__default.createElement("span", null, t("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"), ": \u20B9", Number(paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$data5 = paymentDetails.data) === null || _paymentDetails$data5 === void 0 ? void 0 : (_paymentDetails$data6 = _paymentDetails$data5.Bill[0]) === null || _paymentDetails$data6 === void 0 ? void 0 : _paymentDetails$data6.totalAmount).toFixed(2)), " ")) : null), showActionToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    style: {
      bottom: "150px"
    },
    error: showActionToast.key,
    label: t("" + showActionToast.label),
    onClose: closeBillToast
  })));
};

const consumptionDetails = _ref => {
  var _Digit$SessionStorage, _user$info;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  const {
    applicationNo
  } = Digit.Hooks.useQueryParams();
  let filter1 = {
    tenantId: tenantId,
    connectionNos: applicationNo
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useWSConsumptionSearch({
    filters: filter1
  }, {
    filters: filter1
  });
  const consumption = (currentReading, lastReading) => {
    if (currentReading && lastReading) {
      return Number(currentReading - lastReading);
    } else return t("NA");
  };
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  let {
    meterReadings
  } = data || {};
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, "" + t("WS_VIEW_CONSUMPTION")), /*#__PURE__*/React__default.createElement("div", null, (meterReadings === null || meterReadings === void 0 ? void 0 : meterReadings.length) > 0 && meterReadings.map((application, index) => /*#__PURE__*/React__default.createElement("div", {
    key: index
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    text: (application === null || application === void 0 ? void 0 : application.connectionNo) || t("NA"),
    textStyle: {}
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.billingPeriod) || t("NA"),
    textStyle: {
      wordBreak: "break-word"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.meterStatus) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.lastReading) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),
    text: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.lastReadingDate) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_CURRENT_READING_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.currentReading) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),
    text: Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.currentReadingDate) || t("NA"),
    textStyle: {
      whiteSpace: "pre"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),
    text: consumption(application === null || application === void 0 ? void 0 : application.currentReading, application === null || application === void 0 ? void 0 : application.lastReading),
    textStyle: {
      whiteSpace: "pre"
    }
  }))))), !(meterReadings !== null && meterReadings !== void 0 && meterReadings.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_NO_CONSUMPTION_FOUND"))));
};

const WSPayments = _ref => {
  var _application$paymentD, _application$paymentD2, _application$paymentD3, _application$paymentD4, _application$paymentD5, _application$paymentD6, _application$paymentD7, _application$property, _application$property2, _application$property3, _application$property4, _application$paymentD8, _application$paymentD9, _application$paymentD10, _application$paymentD11;
  let {
    application
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    noteStyle: {
      fontSize: "24px",
      fontWeight: "700"
    },
    keyValue: t("CS_PAYMENT_AMOUNT_DUE_WITHOUT_SYMBOL"),
    note: "\u20B9 " + (application === null || application === void 0 ? void 0 : (_application$paymentD = application.paymentDetails) === null || _application$paymentD === void 0 ? void 0 : (_application$paymentD2 = _application$paymentD[0]) === null || _application$paymentD2 === void 0 ? void 0 : _application$paymentD2.totalAmountPaid)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_SERVICE_NAME_LABEL"),
    note: t("WS_SERVICE_TYPE_" + (application === null || application === void 0 ? void 0 : (_application$paymentD3 = application.paymentDetails) === null || _application$paymentD3 === void 0 ? void 0 : (_application$paymentD4 = _application$paymentD3[0]) === null || _application$paymentD4 === void 0 ? void 0 : _application$paymentD4.businessService))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_CONSUMER_CODE"),
    note: t(application === null || application === void 0 ? void 0 : (_application$paymentD5 = application.paymentDetails) === null || _application$paymentD5 === void 0 ? void 0 : (_application$paymentD6 = _application$paymentD5[0]) === null || _application$paymentD6 === void 0 ? void 0 : (_application$paymentD7 = _application$paymentD6.bill) === null || _application$paymentD7 === void 0 ? void 0 : _application$paymentD7.consumerCode)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_CONSUMER_NAME"),
    note: (application === null || application === void 0 ? void 0 : (_application$property = application.property) === null || _application$property === void 0 ? void 0 : (_application$property2 = _application$property.connectionHolders) === null || _application$property2 === void 0 ? void 0 : _application$property2.map(owner => owner === null || owner === void 0 ? void 0 : owner.name).join(",")) || (application === null || application === void 0 ? void 0 : (_application$property3 = application.property) === null || _application$property3 === void 0 ? void 0 : (_application$property4 = _application$property3.owners) === null || _application$property4 === void 0 ? void 0 : _application$property4.map(owner => owner === null || owner === void 0 ? void 0 : owner.name).join(",")) || (application === null || application === void 0 ? void 0 : application.payerName)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_RECEIPT_NO_LABEL"),
    note: t(application === null || application === void 0 ? void 0 : (_application$paymentD8 = application.paymentDetails) === null || _application$paymentD8 === void 0 ? void 0 : (_application$paymentD9 = _application$paymentD8[0]) === null || _application$paymentD9 === void 0 ? void 0 : _application$paymentD9.receiptNumber)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_RECEIPT_DATE_LABEL"),
    note: convertEpochToDate(application === null || application === void 0 ? void 0 : (_application$paymentD10 = application.paymentDetails) === null || _application$paymentD10 === void 0 ? void 0 : (_application$paymentD11 = _application$paymentD10[0]) === null || _application$paymentD11 === void 0 ? void 0 : _application$paymentD11.receiptDate) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_PAYMENT_STATUS"),
    note: t(application === null || application === void 0 ? void 0 : application.paymentStatus)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_DOWNLOAD_RECEIPT"),
    onSubmit: e => {
      var _application$paymentD12, _application$paymentD13, _application$paymentD14, _application$paymentD15, _application$paymentD16, _application$paymentD17, _application$paymentD18;
      return DownloadReceipt(application === null || application === void 0 ? void 0 : (_application$paymentD12 = application.paymentDetails) === null || _application$paymentD12 === void 0 ? void 0 : (_application$paymentD13 = _application$paymentD12[0]) === null || _application$paymentD13 === void 0 ? void 0 : (_application$paymentD14 = _application$paymentD13.bill) === null || _application$paymentD14 === void 0 ? void 0 : _application$paymentD14.consumerCode, application === null || application === void 0 ? void 0 : application.tenantId, application !== null && application !== void 0 && (_application$paymentD15 = application.paymentDetails) !== null && _application$paymentD15 !== void 0 && (_application$paymentD16 = _application$paymentD15[0]) !== null && _application$paymentD16 !== void 0 && (_application$paymentD17 = _application$paymentD16.bill) !== null && _application$paymentD17 !== void 0 && (_application$paymentD18 = _application$paymentD17.consumerCode) !== null && _application$paymentD18 !== void 0 && _application$paymentD18.includes("SW") ? "SW" : "WS");
    }
  }));
};

const WSMyPayments = () => {
  var _Digit$SessionStorage, _user$info, _user$info2, _user$info3, _data$WaterConnection, _data$WaterConnection2, _data$WaterConnection3, _SWdata$SewerageConne, _SWdata$SewerageConne2, _data$WaterConnection4, _data$WaterConnection5, _SWdata$SewerageConne3, _SWdata$SewerageConne4, _applicationsList, _applicationsList2, _applicationsList3, _applicationsList4;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  let filter = window.location.href.split("/").pop();
  let filter1 = !isNaN(parseInt(filter)) ? {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info2 = user.info) === null || _user$info2 === void 0 ? void 0 : _user$info2.mobileNumber,
    searchType: "CONNECTION"
  } : {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info3 = user.info) === null || _user$info3 === void 0 ? void 0 : _user$info3.mobileNumber,
    searchType: "CONNECTION"
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1
  }, {
    filters: filter1
  });
  const {
    isLoading: isSWLoading,
    isError: isSWError,
    error: SWerror,
    data: SWdata
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: "SW"
  }, {
    filters: filter1
  });
  let totalApaplications = data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection.concat(SWdata === null || SWdata === void 0 ? void 0 : SWdata.SewerageConnections);
  let connectionNoWS = data && (data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2.length) > 0 ? data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : _data$WaterConnection3.map(ob => ob.connectionNo).join(",") : null;
  let connectionNoSW = SWdata && (SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne = SWdata.SewerageConnections) === null || _SWdata$SewerageConne === void 0 ? void 0 : _SWdata$SewerageConne.length) > 0 ? SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne2 = SWdata.SewerageConnections) === null || _SWdata$SewerageConne2 === void 0 ? void 0 : _SWdata$SewerageConne2.map(ob => ob.connectionNo).join(",") : null;
  let propertyIdWS = data && (data === null || data === void 0 ? void 0 : (_data$WaterConnection4 = data.WaterConnection) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4.length) > 0 ? data === null || data === void 0 ? void 0 : (_data$WaterConnection5 = data.WaterConnection) === null || _data$WaterConnection5 === void 0 ? void 0 : _data$WaterConnection5.map(ob => ob.propertyId).join(",") : null;
  let propertyIdSW = SWdata && (SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne3 = SWdata.SewerageConnections) === null || _SWdata$SewerageConne3 === void 0 ? void 0 : _SWdata$SewerageConne3.length) > 0 ? SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne4 = SWdata.SewerageConnections) === null || _SWdata$SewerageConne4 === void 0 ? void 0 : _SWdata$SewerageConne4.map(ob => ob.propertyId).join(",") : null;
  let totalPropertyIds = propertyIdWS ? propertyIdWS === null || propertyIdWS === void 0 ? void 0 : propertyIdWS.concat(",", propertyIdSW) : propertyIdSW === null || propertyIdSW === void 0 ? void 0 : propertyIdSW.concat(",", propertyIdWS);
  const {
    data: wspayments,
    isLoading: iswsLoading
  } = Digit.Hooks.ws.useMypaymentWS({
    tenantId: tenantId,
    filters: {
      consumerCodes: connectionNoWS
    },
    BusinessService: "WS"
  }, {
    enabled: connectionNoWS !== null ? true : false
  });
  const {
    data: swpayments,
    isLoading: isswLoading
  } = Digit.Hooks.ws.useMypaymentWS({
    tenantId: tenantId,
    filters: {
      consumerCodes: connectionNoSW
    },
    BusinessService: "SW"
  }, {
    enabled: connectionNoSW !== null ? true : false
  });
  const {
    data: properties,
    isLoading: isPropertyLoading
  } = Digit.Hooks.ws.useWaterPropertySearch({
    tenantId: tenantId,
    filters: {
      propertyids: totalPropertyIds
    }
  }, {
    enabled: connectionNoSW !== null ? true : false
  });
  if (isLoading || iswsLoading || isswLoading || isSWLoading || isPropertyLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const wspayment = wspayments && (wspayments === null || wspayments === void 0 ? void 0 : wspayments.Payments) || [];
  const swpayment = swpayments && (swpayments === null || swpayments === void 0 ? void 0 : swpayments.Payments) || [];
  let applicationsList = wspayment.concat(swpayment);
  applicationsList = (_applicationsList = applicationsList) === null || _applicationsList === void 0 ? void 0 : _applicationsList.map(ob => {
    var _totalApaplications$f;
    return {
      ...ob,
      details: totalApaplications === null || totalApaplications === void 0 ? void 0 : (_totalApaplications$f = totalApaplications.filter(app => {
        var _ob$paymentDetails, _ob$paymentDetails$, _ob$paymentDetails$$b;
        return (app === null || app === void 0 ? void 0 : app.connectionNo) === (ob === null || ob === void 0 ? void 0 : (_ob$paymentDetails = ob.paymentDetails) === null || _ob$paymentDetails === void 0 ? void 0 : (_ob$paymentDetails$ = _ob$paymentDetails[0]) === null || _ob$paymentDetails$ === void 0 ? void 0 : (_ob$paymentDetails$$b = _ob$paymentDetails$.bill) === null || _ob$paymentDetails$$b === void 0 ? void 0 : _ob$paymentDetails$$b.consumerCode);
      })) === null || _totalApaplications$f === void 0 ? void 0 : _totalApaplications$f[0]
    };
  });
  applicationsList = (_applicationsList2 = applicationsList) === null || _applicationsList2 === void 0 ? void 0 : _applicationsList2.map(ob => {
    var _properties$Propertie, _properties$Propertie2;
    return {
      ...ob,
      property: properties === null || properties === void 0 ? void 0 : (_properties$Propertie = properties.Properties) === null || _properties$Propertie === void 0 ? void 0 : (_properties$Propertie2 = _properties$Propertie.filter(prop => {
        var _ob$details;
        return (prop === null || prop === void 0 ? void 0 : prop.propertyId) === (ob === null || ob === void 0 ? void 0 : (_ob$details = ob.details) === null || _ob$details === void 0 ? void 0 : _ob$details.propertyId);
      })) === null || _properties$Propertie2 === void 0 ? void 0 : _properties$Propertie2[0]
    };
  });
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_MY_PAYMENTS_HEADER") + " " + (applicationsList ? "(" + applicationsList.length + ")" : "")), /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement("div", null, ((_applicationsList3 = applicationsList) === null || _applicationsList3 === void 0 ? void 0 : _applicationsList3.length) > 0 && applicationsList.map((application, index) => /*#__PURE__*/React__default.createElement("div", {
    key: index
  }, /*#__PURE__*/React__default.createElement(WSPayments, {
    application: application
  }))), !((_applicationsList4 = applicationsList) !== null && _applicationsList4 !== void 0 && _applicationsList4.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("PT_NO_APPLICATION_FOUND_MSG"))));
};

const getPath$2 = (path, params) => {
  params && Object.keys(params).map(key => {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
const getEditDetails = (waterResult, sewerageresult, t) => {
  if (waterResult) {
    var _waterResult$connecti, _waterResult$connecti2, _waterResult$connecti3, _waterResult$connecti4, _waterResult$connecti5, _waterResult$connecti6, _waterResult$connecti7, _waterResult$connecti8, _waterResult$connecti9, _waterResult$connecti10, _waterResult$connecti11, _waterResult$connecti12, _waterResult$connecti13, _waterResult$connecti14, _waterResult$connecti15, _waterResult$connecti16, _waterResult$connecti17, _waterResult$connecti18, _waterResult$connecti19, _waterResult$connecti20, _waterResult$connecti21, _waterResult$connecti22, _waterResult$connecti23, _waterResult$connecti24, _waterResult$connecti25, _waterResult$connecti26, _waterResult$connecti27, _waterResult$connecti28, _waterResult$property, _waterResult$property2, _waterResult$property3, _waterResult$property4, _waterResult$property5, _waterResult$property6, _waterResult$property7, _waterResult$property8, _waterResult$property9, _waterResult$property10, _waterResult$property11, _waterResult$property12, _waterResult$property13, _waterResult$property14, _waterResult$property15, _waterResult$property16, _waterResult$property17, _waterResult$property18, _waterResult$property19, _waterResult$property20, _waterResult$property21, _waterResult$property22, _waterResult$property23, _waterResult$property24, _waterResult$property25, _waterResult$property26, _waterResult$property27, _waterResult$property28, _waterResult$property29, _waterResult$property30, _waterResult$connecti29, _waterResult$connecti30, _waterResult$connecti31, _waterResult$connecti32, _waterResult$connecti33, _waterResult$connecti34, _waterResult$applicat;
    waterResult["ConnectionHolderDetails"] = waterResult !== null && waterResult !== void 0 && waterResult.connectionHolders ? {
      ...(waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti = waterResult.connectionHolders) === null || _waterResult$connecti === void 0 ? void 0 : _waterResult$connecti[0]),
      address: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti2 = waterResult.connectionHolders) === null || _waterResult$connecti2 === void 0 ? void 0 : (_waterResult$connecti3 = _waterResult$connecti2[0]) === null || _waterResult$connecti3 === void 0 ? void 0 : _waterResult$connecti3.correspondenceAddress,
      documentId: "",
      documentType: "",
      filestoreId: null,
      gender: waterResult !== null && waterResult !== void 0 && (_waterResult$connecti4 = waterResult.connectionHolders) !== null && _waterResult$connecti4 !== void 0 && (_waterResult$connecti5 = _waterResult$connecti4[0]) !== null && _waterResult$connecti5 !== void 0 && _waterResult$connecti5.gender ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti6 = waterResult.connectionHolders) === null || _waterResult$connecti6 === void 0 ? void 0 : (_waterResult$connecti7 = _waterResult$connecti6[0]) === null || _waterResult$connecti7 === void 0 ? void 0 : _waterResult$connecti7.gender,
        i18nKey: "COMMON_GENDER_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti8 = waterResult.connectionHolders) === null || _waterResult$connecti8 === void 0 ? void 0 : (_waterResult$connecti9 = _waterResult$connecti8[0]) === null || _waterResult$connecti9 === void 0 ? void 0 : _waterResult$connecti9.gender)
      } : null,
      guardian: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti10 = waterResult.connectionHolders) === null || _waterResult$connecti10 === void 0 ? void 0 : (_waterResult$connecti11 = _waterResult$connecti10[0]) === null || _waterResult$connecti11 === void 0 ? void 0 : _waterResult$connecti11.fatherOrHusbandName,
      isOwnerSame: (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti12 = waterResult.connectionHolders) === null || _waterResult$connecti12 === void 0 ? void 0 : _waterResult$connecti12.length) > 0 ? false : true,
      mobileNumber: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti13 = waterResult.connectionHolders) === null || _waterResult$connecti13 === void 0 ? void 0 : (_waterResult$connecti14 = _waterResult$connecti13[0]) === null || _waterResult$connecti14 === void 0 ? void 0 : _waterResult$connecti14.mobileNumber,
      name: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti15 = waterResult.connectionHolders) === null || _waterResult$connecti15 === void 0 ? void 0 : (_waterResult$connecti16 = _waterResult$connecti15[0]) === null || _waterResult$connecti16 === void 0 ? void 0 : _waterResult$connecti16.name,
      relationship: waterResult !== null && waterResult !== void 0 && (_waterResult$connecti17 = waterResult.connectionHolders) !== null && _waterResult$connecti17 !== void 0 && (_waterResult$connecti18 = _waterResult$connecti17[0]) !== null && _waterResult$connecti18 !== void 0 && _waterResult$connecti18.relationship ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti19 = waterResult.connectionHolders) === null || _waterResult$connecti19 === void 0 ? void 0 : (_waterResult$connecti20 = _waterResult$connecti19[0]) === null || _waterResult$connecti20 === void 0 ? void 0 : _waterResult$connecti20.relationship,
        i18nKey: "COMMON_MASTERS_OWNERTYPE_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti21 = waterResult.connectionHolders) === null || _waterResult$connecti21 === void 0 ? void 0 : (_waterResult$connecti22 = _waterResult$connecti21[0]) === null || _waterResult$connecti22 === void 0 ? void 0 : _waterResult$connecti22.relationship)
      } : null,
      specialCategoryType: waterResult !== null && waterResult !== void 0 && (_waterResult$connecti23 = waterResult.connectionHolders) !== null && _waterResult$connecti23 !== void 0 && (_waterResult$connecti24 = _waterResult$connecti23[0]) !== null && _waterResult$connecti24 !== void 0 && _waterResult$connecti24.ownerType ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti25 = waterResult.connectionHolders) === null || _waterResult$connecti25 === void 0 ? void 0 : (_waterResult$connecti26 = _waterResult$connecti25[0]) === null || _waterResult$connecti26 === void 0 ? void 0 : _waterResult$connecti26.ownerType,
        i18nKey: "PROPERTYTAX_OWNERTYPE_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti27 = waterResult.connectionHolders) === null || _waterResult$connecti27 === void 0 ? void 0 : (_waterResult$connecti28 = _waterResult$connecti27[0]) === null || _waterResult$connecti28 === void 0 ? void 0 : _waterResult$connecti28.ownerType)
      } : ""
    } : {
      address: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property = waterResult.property) === null || _waterResult$property === void 0 ? void 0 : (_waterResult$property2 = _waterResult$property.owners) === null || _waterResult$property2 === void 0 ? void 0 : (_waterResult$property3 = _waterResult$property2[0]) === null || _waterResult$property3 === void 0 ? void 0 : _waterResult$property3.correspondenceAddress,
      documentId: "",
      documentType: "",
      filestoreId: null,
      gender: waterResult !== null && waterResult !== void 0 && (_waterResult$property4 = waterResult.property) !== null && _waterResult$property4 !== void 0 && (_waterResult$property5 = _waterResult$property4.owners) !== null && _waterResult$property5 !== void 0 && (_waterResult$property6 = _waterResult$property5[0]) !== null && _waterResult$property6 !== void 0 && _waterResult$property6.gender ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property7 = waterResult.property) === null || _waterResult$property7 === void 0 ? void 0 : (_waterResult$property8 = _waterResult$property7.owners) === null || _waterResult$property8 === void 0 ? void 0 : (_waterResult$property9 = _waterResult$property8[0]) === null || _waterResult$property9 === void 0 ? void 0 : _waterResult$property9.gender,
        i18nKey: "COMMON_GENDER_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property10 = waterResult.property) === null || _waterResult$property10 === void 0 ? void 0 : (_waterResult$property11 = _waterResult$property10.owners) === null || _waterResult$property11 === void 0 ? void 0 : (_waterResult$property12 = _waterResult$property11[0]) === null || _waterResult$property12 === void 0 ? void 0 : _waterResult$property12.gender)
      } : null,
      guardian: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property13 = waterResult.property) === null || _waterResult$property13 === void 0 ? void 0 : (_waterResult$property14 = _waterResult$property13.owners) === null || _waterResult$property14 === void 0 ? void 0 : (_waterResult$property15 = _waterResult$property14[0]) === null || _waterResult$property15 === void 0 ? void 0 : _waterResult$property15.fatherOrHusbandName,
      isOwnerSame: waterResult !== null && waterResult !== void 0 && waterResult.connectionHolders ? false : true,
      mobileNumber: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property16 = waterResult.property) === null || _waterResult$property16 === void 0 ? void 0 : (_waterResult$property17 = _waterResult$property16.owners) === null || _waterResult$property17 === void 0 ? void 0 : (_waterResult$property18 = _waterResult$property17[0]) === null || _waterResult$property18 === void 0 ? void 0 : _waterResult$property18.mobileNumber,
      name: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property19 = waterResult.property) === null || _waterResult$property19 === void 0 ? void 0 : (_waterResult$property20 = _waterResult$property19.owners) === null || _waterResult$property20 === void 0 ? void 0 : (_waterResult$property21 = _waterResult$property20[0]) === null || _waterResult$property21 === void 0 ? void 0 : _waterResult$property21.name,
      relationship: waterResult !== null && waterResult !== void 0 && (_waterResult$property22 = waterResult.property) !== null && _waterResult$property22 !== void 0 && (_waterResult$property23 = _waterResult$property22.owners) !== null && _waterResult$property23 !== void 0 && (_waterResult$property24 = _waterResult$property23[0]) !== null && _waterResult$property24 !== void 0 && _waterResult$property24.relationship ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property25 = waterResult.property) === null || _waterResult$property25 === void 0 ? void 0 : (_waterResult$property26 = _waterResult$property25.owners) === null || _waterResult$property26 === void 0 ? void 0 : (_waterResult$property27 = _waterResult$property26[0]) === null || _waterResult$property27 === void 0 ? void 0 : _waterResult$property27.relationship,
        i18nKey: "COMMON_MASTERS_OWNERTYPE_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$property28 = waterResult.property) === null || _waterResult$property28 === void 0 ? void 0 : (_waterResult$property29 = _waterResult$property28.owners) === null || _waterResult$property29 === void 0 ? void 0 : (_waterResult$property30 = _waterResult$property29[0]) === null || _waterResult$property30 === void 0 ? void 0 : _waterResult$property30.relationship)
      } : null,
      specialCategoryType: waterResult !== null && waterResult !== void 0 && (_waterResult$connecti29 = waterResult.connectionHolders) !== null && _waterResult$connecti29 !== void 0 && (_waterResult$connecti30 = _waterResult$connecti29[0]) !== null && _waterResult$connecti30 !== void 0 && _waterResult$connecti30.ownerType ? {
        code: waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti31 = waterResult.connectionHolders) === null || _waterResult$connecti31 === void 0 ? void 0 : (_waterResult$connecti32 = _waterResult$connecti31[0]) === null || _waterResult$connecti32 === void 0 ? void 0 : _waterResult$connecti32.ownerType,
        i18nKey: "PROPERTYTAX_OWNERTYPE_" + (waterResult === null || waterResult === void 0 ? void 0 : (_waterResult$connecti33 = waterResult.connectionHolders) === null || _waterResult$connecti33 === void 0 ? void 0 : (_waterResult$connecti34 = _waterResult$connecti33[0]) === null || _waterResult$connecti34 === void 0 ? void 0 : _waterResult$connecti34.ownerType)
      } : ""
    };
    waterResult.WaterConnectionResult = {
      WaterConnection: [{
        ...waterResult
      }]
    };
    waterResult.cpt = {
      details: {
        ...(waterResult === null || waterResult === void 0 ? void 0 : waterResult.property)
      }
    };
    waterResult.cptId = {
      id: waterResult === null || waterResult === void 0 ? void 0 : waterResult.propertyId
    };
    waterResult.documents = {
      documents: waterResult === null || waterResult === void 0 ? void 0 : waterResult.documents
    };
    waterResult.plumberPreference = {
      plumberPreference: {
        code: "ULB",
        i18nKey: "WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE"
      }
    };
    waterResult.serviceName = waterResult !== null && waterResult !== void 0 && (_waterResult$applicat = waterResult.applicationType) !== null && _waterResult$applicat !== void 0 && _waterResult$applicat.includes("WATER") ? {
      code: "WATER",
      i18nKey: "WS_WATER_CONNECTION_ONLY"
    } : {
      code: "SEWERAGE",
      i18nKey: "WS_SEWERAGE_CONNECTION_ONLY"
    };
    waterResult.waterConectionDetails = {
      proposedPipeSize: {
        code: waterResult === null || waterResult === void 0 ? void 0 : waterResult.proposedPipeSize,
        i18nKey: (waterResult === null || waterResult === void 0 ? void 0 : waterResult.proposedPipeSize) + " " + t("WS_INCHES_LABEL"),
        size: waterResult === null || waterResult === void 0 ? void 0 : waterResult.proposedPipeSize
      },
      proposedTaps: waterResult === null || waterResult === void 0 ? void 0 : waterResult.proposedTaps
    };
  } else if (sewerageresult) {
    var _sewerageresult$conne, _sewerageresult$conne2, _sewerageresult$conne3, _sewerageresult$conne4, _sewerageresult$conne5, _sewerageresult$conne6, _sewerageresult$conne7, _sewerageresult$conne8, _sewerageresult$conne9, _sewerageresult$conne10, _sewerageresult$conne11, _sewerageresult$conne12, _sewerageresult$conne13, _sewerageresult$conne14, _sewerageresult$conne15, _sewerageresult$conne16, _sewerageresult$conne17, _sewerageresult$conne18, _sewerageresult$conne19, _sewerageresult$conne20, _sewerageresult$conne21, _sewerageresult$conne22, _sewerageresult$conne23, _sewerageresult$conne24, _sewerageresult$conne25, _sewerageresult$conne26, _sewerageresult$conne27, _sewerageresult$conne28, _sewerageresult$prope, _sewerageresult$prope2, _sewerageresult$prope3, _sewerageresult$prope4, _sewerageresult$prope5, _sewerageresult$prope6, _sewerageresult$prope7, _sewerageresult$prope8, _sewerageresult$prope9, _sewerageresult$prope10, _sewerageresult$prope11, _sewerageresult$prope12, _sewerageresult$prope13, _sewerageresult$prope14, _sewerageresult$prope15, _sewerageresult$prope16, _sewerageresult$prope17, _sewerageresult$prope18, _sewerageresult$prope19, _sewerageresult$prope20, _sewerageresult$prope21, _sewerageresult$prope22, _sewerageresult$prope23, _sewerageresult$prope24, _sewerageresult$prope25, _sewerageresult$prope26, _sewerageresult$prope27, _sewerageresult$prope28, _sewerageresult$prope29, _sewerageresult$prope30, _sewerageresult$conne29, _sewerageresult$conne30, _sewerageresult$conne31, _sewerageresult$conne32, _sewerageresult$conne33, _sewerageresult$conne34;
    sewerageresult.ConnectionHolderDetails = sewerageresult !== null && sewerageresult !== void 0 && sewerageresult.connectionHolders ? {
      ...(sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne = sewerageresult.connectionHolders) === null || _sewerageresult$conne === void 0 ? void 0 : _sewerageresult$conne[0]),
      address: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne2 = sewerageresult.connectionHolders) === null || _sewerageresult$conne2 === void 0 ? void 0 : (_sewerageresult$conne3 = _sewerageresult$conne2[0]) === null || _sewerageresult$conne3 === void 0 ? void 0 : _sewerageresult$conne3.correspondenceAddress,
      documentId: "",
      documentType: "",
      filestoreId: null,
      gender: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$conne4 = sewerageresult.connectionHolders) !== null && _sewerageresult$conne4 !== void 0 && (_sewerageresult$conne5 = _sewerageresult$conne4[0]) !== null && _sewerageresult$conne5 !== void 0 && _sewerageresult$conne5.gender ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne6 = sewerageresult.connectionHolders) === null || _sewerageresult$conne6 === void 0 ? void 0 : (_sewerageresult$conne7 = _sewerageresult$conne6[0]) === null || _sewerageresult$conne7 === void 0 ? void 0 : _sewerageresult$conne7.gender,
        i18nKey: "COMMON_GENDER_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne8 = sewerageresult.connectionHolders) === null || _sewerageresult$conne8 === void 0 ? void 0 : (_sewerageresult$conne9 = _sewerageresult$conne8[0]) === null || _sewerageresult$conne9 === void 0 ? void 0 : _sewerageresult$conne9.gender)
      } : null,
      guardian: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne10 = sewerageresult.connectionHolders) === null || _sewerageresult$conne10 === void 0 ? void 0 : (_sewerageresult$conne11 = _sewerageresult$conne10[0]) === null || _sewerageresult$conne11 === void 0 ? void 0 : _sewerageresult$conne11.fatherOrHusbandName,
      isOwnerSame: (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne12 = sewerageresult.connectionHolders) === null || _sewerageresult$conne12 === void 0 ? void 0 : _sewerageresult$conne12.length) > 0 ? false : true,
      mobileNumber: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne13 = sewerageresult.connectionHolders) === null || _sewerageresult$conne13 === void 0 ? void 0 : (_sewerageresult$conne14 = _sewerageresult$conne13[0]) === null || _sewerageresult$conne14 === void 0 ? void 0 : _sewerageresult$conne14.mobileNumber,
      name: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne15 = sewerageresult.connectionHolders) === null || _sewerageresult$conne15 === void 0 ? void 0 : (_sewerageresult$conne16 = _sewerageresult$conne15[0]) === null || _sewerageresult$conne16 === void 0 ? void 0 : _sewerageresult$conne16.name,
      relationship: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$conne17 = sewerageresult.connectionHolders) !== null && _sewerageresult$conne17 !== void 0 && (_sewerageresult$conne18 = _sewerageresult$conne17[0]) !== null && _sewerageresult$conne18 !== void 0 && _sewerageresult$conne18.relationship ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne19 = sewerageresult.connectionHolders) === null || _sewerageresult$conne19 === void 0 ? void 0 : (_sewerageresult$conne20 = _sewerageresult$conne19[0]) === null || _sewerageresult$conne20 === void 0 ? void 0 : _sewerageresult$conne20.relationship,
        i18nKey: "COMMON_MASTERS_OWNERTYPE_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne21 = sewerageresult.connectionHolders) === null || _sewerageresult$conne21 === void 0 ? void 0 : (_sewerageresult$conne22 = _sewerageresult$conne21[0]) === null || _sewerageresult$conne22 === void 0 ? void 0 : _sewerageresult$conne22.relationship)
      } : null,
      specialCategoryType: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$conne23 = sewerageresult.connectionHolders) !== null && _sewerageresult$conne23 !== void 0 && (_sewerageresult$conne24 = _sewerageresult$conne23[0]) !== null && _sewerageresult$conne24 !== void 0 && _sewerageresult$conne24.ownerType ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne25 = sewerageresult.connectionHolders) === null || _sewerageresult$conne25 === void 0 ? void 0 : (_sewerageresult$conne26 = _sewerageresult$conne25[0]) === null || _sewerageresult$conne26 === void 0 ? void 0 : _sewerageresult$conne26.ownerType,
        i18nKey: "PROPERTYTAX_OWNERTYPE_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne27 = sewerageresult.connectionHolders) === null || _sewerageresult$conne27 === void 0 ? void 0 : (_sewerageresult$conne28 = _sewerageresult$conne27[0]) === null || _sewerageresult$conne28 === void 0 ? void 0 : _sewerageresult$conne28.ownerType)
      } : ""
    } : {
      address: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope = sewerageresult.property) === null || _sewerageresult$prope === void 0 ? void 0 : (_sewerageresult$prope2 = _sewerageresult$prope.owners) === null || _sewerageresult$prope2 === void 0 ? void 0 : (_sewerageresult$prope3 = _sewerageresult$prope2[0]) === null || _sewerageresult$prope3 === void 0 ? void 0 : _sewerageresult$prope3.correspondenceAddress,
      documentId: "",
      documentType: "",
      filestoreId: null,
      gender: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$prope4 = sewerageresult.property) !== null && _sewerageresult$prope4 !== void 0 && (_sewerageresult$prope5 = _sewerageresult$prope4.owners) !== null && _sewerageresult$prope5 !== void 0 && (_sewerageresult$prope6 = _sewerageresult$prope5[0]) !== null && _sewerageresult$prope6 !== void 0 && _sewerageresult$prope6.gender ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope7 = sewerageresult.property) === null || _sewerageresult$prope7 === void 0 ? void 0 : (_sewerageresult$prope8 = _sewerageresult$prope7.owners) === null || _sewerageresult$prope8 === void 0 ? void 0 : (_sewerageresult$prope9 = _sewerageresult$prope8[0]) === null || _sewerageresult$prope9 === void 0 ? void 0 : _sewerageresult$prope9.gender,
        i18nKey: "COMMON_GENDER_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope10 = sewerageresult.property) === null || _sewerageresult$prope10 === void 0 ? void 0 : (_sewerageresult$prope11 = _sewerageresult$prope10.owners) === null || _sewerageresult$prope11 === void 0 ? void 0 : (_sewerageresult$prope12 = _sewerageresult$prope11[0]) === null || _sewerageresult$prope12 === void 0 ? void 0 : _sewerageresult$prope12.gender)
      } : null,
      guardian: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope13 = sewerageresult.property) === null || _sewerageresult$prope13 === void 0 ? void 0 : (_sewerageresult$prope14 = _sewerageresult$prope13.owners) === null || _sewerageresult$prope14 === void 0 ? void 0 : (_sewerageresult$prope15 = _sewerageresult$prope14[0]) === null || _sewerageresult$prope15 === void 0 ? void 0 : _sewerageresult$prope15.fatherOrHusbandName,
      isOwnerSame: sewerageresult !== null && sewerageresult !== void 0 && sewerageresult.connectionHolders ? false : true,
      mobileNumber: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope16 = sewerageresult.property) === null || _sewerageresult$prope16 === void 0 ? void 0 : (_sewerageresult$prope17 = _sewerageresult$prope16.owners) === null || _sewerageresult$prope17 === void 0 ? void 0 : (_sewerageresult$prope18 = _sewerageresult$prope17[0]) === null || _sewerageresult$prope18 === void 0 ? void 0 : _sewerageresult$prope18.mobileNumber,
      name: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope19 = sewerageresult.property) === null || _sewerageresult$prope19 === void 0 ? void 0 : (_sewerageresult$prope20 = _sewerageresult$prope19.owners) === null || _sewerageresult$prope20 === void 0 ? void 0 : (_sewerageresult$prope21 = _sewerageresult$prope20[0]) === null || _sewerageresult$prope21 === void 0 ? void 0 : _sewerageresult$prope21.name,
      relationship: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$prope22 = sewerageresult.property) !== null && _sewerageresult$prope22 !== void 0 && (_sewerageresult$prope23 = _sewerageresult$prope22.owners) !== null && _sewerageresult$prope23 !== void 0 && (_sewerageresult$prope24 = _sewerageresult$prope23[0]) !== null && _sewerageresult$prope24 !== void 0 && _sewerageresult$prope24.relationship ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope25 = sewerageresult.property) === null || _sewerageresult$prope25 === void 0 ? void 0 : (_sewerageresult$prope26 = _sewerageresult$prope25.owners) === null || _sewerageresult$prope26 === void 0 ? void 0 : (_sewerageresult$prope27 = _sewerageresult$prope26[0]) === null || _sewerageresult$prope27 === void 0 ? void 0 : _sewerageresult$prope27.relationship,
        i18nKey: "COMMON_MASTERS_OWNERTYPE_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$prope28 = sewerageresult.property) === null || _sewerageresult$prope28 === void 0 ? void 0 : (_sewerageresult$prope29 = _sewerageresult$prope28.owners) === null || _sewerageresult$prope29 === void 0 ? void 0 : (_sewerageresult$prope30 = _sewerageresult$prope29[0]) === null || _sewerageresult$prope30 === void 0 ? void 0 : _sewerageresult$prope30.relationship)
      } : null,
      specialCategoryType: sewerageresult !== null && sewerageresult !== void 0 && (_sewerageresult$conne29 = sewerageresult.connectionHolders) !== null && _sewerageresult$conne29 !== void 0 && (_sewerageresult$conne30 = _sewerageresult$conne29[0]) !== null && _sewerageresult$conne30 !== void 0 && _sewerageresult$conne30.ownerType ? {
        code: sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne31 = sewerageresult.connectionHolders) === null || _sewerageresult$conne31 === void 0 ? void 0 : (_sewerageresult$conne32 = _sewerageresult$conne31[0]) === null || _sewerageresult$conne32 === void 0 ? void 0 : _sewerageresult$conne32.ownerType,
        i18nKey: "PROPERTYTAX_OWNERTYPE_" + (sewerageresult === null || sewerageresult === void 0 ? void 0 : (_sewerageresult$conne33 = sewerageresult.connectionHolders) === null || _sewerageresult$conne33 === void 0 ? void 0 : (_sewerageresult$conne34 = _sewerageresult$conne33[0]) === null || _sewerageresult$conne34 === void 0 ? void 0 : _sewerageresult$conne34.ownerType)
      } : ""
    };
    sewerageresult.SewerageConnectionResult = {
      SewerageConnections: [{
        ...sewerageresult
      }]
    };
    sewerageresult.cpt = {
      details: {
        ...(sewerageresult === null || sewerageresult === void 0 ? void 0 : sewerageresult.property)
      }
    };
    sewerageresult.cptId = {
      id: sewerageresult === null || sewerageresult === void 0 ? void 0 : sewerageresult.propertyId
    };
    sewerageresult.documents = {
      documents: [...(sewerageresult === null || sewerageresult === void 0 ? void 0 : sewerageresult.documents)]
    };
    sewerageresult.plumberPreference = {
      plumberPreference: {
        code: "ULB",
        i18nKey: "WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE"
      }
    };
    sewerageresult.serviceName = sewerageresult !== null && sewerageresult !== void 0 && sewerageresult.applicationType.includes("WATER") ? {
      code: "WATER",
      i18nKey: "WS_WATER_CONNECTION_ONLY"
    } : {
      code: "SEWERAGE",
      i18nKey: "WS_SEWERAGE_CONNECTION_ONLY"
    };
    sewerageresult.sewerageConnectionDetails = {
      proposedToilets: sewerageresult === null || sewerageresult === void 0 ? void 0 : sewerageresult.proposedToilets,
      proposedWaterClosets: sewerageresult === null || sewerageresult === void 0 ? void 0 : sewerageresult.proposedWaterClosets
    };
  }
  if (waterResult) return {
    ...waterResult
  };else return {
    ...sewerageresult
  };
};
const EditApplication = _ref => {
  var _newConfig, _newConfig2, _newConfig3, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  const queryClient = reactQuery.useQueryClient();
  let match = reactRouterDom.useRouteMatch();
  const {
    t
  } = reactI18next.useTranslation();
  let {
    tenantId
  } = reactRouterDom.useParams();
  const {
    pathname,
    state
  } = reactRouterDom.useLocation();
  const history = reactRouterDom.useHistory();
  let applicationNumber = (state === null || state === void 0 ? void 0 : state.id) || sessionStorage.getItem("ApplicationNoState");
  let config = [];
  let waterapplication = {};
  let sewerageapplication = {};
  const [params, setParams, clearParams] = Digit.Hooks.useSessionStorage("WS_EDIT_APPLICATION", {});
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig$1,
    isLoading: configLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(stateId, {});
  let filter1 = {};
  if (applicationNumber) filter1.applicationNumber = applicationNumber;
  if (tenantId) filter1.tenantId = tenantId;
  const {
    data: Waterresult
  } = Digit.Hooks.ws.useWaterSearch({
    tenantId,
    filters: {
      ...filter1,
      isInternalCall: true
    },
    BusinessService: "WS",
    t
  }, {
    enabled: applicationNumber && applicationNumber.includes("WS") ? true : false
  });
  const {
    data: Sewarageresult
  } = Digit.Hooks.ws.useSewarageSearch({
    tenantId,
    filters: {
      ...filter1,
      isInternalCall: true
    },
    BusinessService: "SW",
    t
  }, {
    enabled: applicationNumber && applicationNumber.includes("SW") ? true : false
  });
  let isModifyEdit = window.location.href.includes("/modify-connection/") || window.location.href.includes("/edit-application/");
  React.useEffect(() => {
    var _waterapplication, _sewerageapplication;
    waterapplication = Waterresult;
    sewerageapplication = Sewarageresult;
    if ((Waterresult && waterapplication || Sewarageresult && sewerageapplication) && (!(Object.keys(params).length > 0) || waterapplication && (params === null || params === void 0 ? void 0 : params.applicationNo) !== ((_waterapplication = waterapplication) === null || _waterapplication === void 0 ? void 0 : _waterapplication.applicationNo) || sewerageapplication && (params === null || params === void 0 ? void 0 : params.applicationNo) !== ((_sewerageapplication = sewerageapplication) === null || _sewerageapplication === void 0 ? void 0 : _sewerageapplication.applicationNo))) {
      waterapplication = Waterresult;
      sewerageapplication = Sewarageresult;
      if (window.location.href.includes("edit-application")) {
        if (waterapplication) {
          waterapplication.isEditApplication = true;
          waterapplication.isModifyConnection = false;
        }
        if (sewerageapplication) {
          sewerageapplication.isEditApplication = true;
          sewerageapplication.isModifyConnection = false;
        }
      } else if (window.location.href.includes("modify-connection")) {
        if (waterapplication) {
          waterapplication.isModifyConnection = true;
          waterapplication.isEditApplication = false;
        }
        if (sewerageapplication) {
          sewerageapplication.isModifyConnection = true;
          sewerageapplication.isEditApplication = false;
        }
      }
      sessionStorage.setItem("WaterInitialObject", JSON.stringify({
        ...waterapplication
      }));
      sessionStorage.setItem("SewerageInitialObject", JSON.stringify({
        ...sewerageapplication
      }));
      let EditDetails = getEditDetails(waterapplication, sewerageapplication, t);
      setParams({
        ...params,
        ...EditDetails
      });
    }
  }, [Waterresult, Sewarageresult]);
  const goNext = skipStep => {
    var _params$cptId, _params$cpt, _params$cpt$details, _params$cpt2, _params$cpt2$details;
    const currentPath = pathname.split("/").pop();
    let {
      nextStep
    } = config.find(routeObj => routeObj.route === currentPath);
    let routeObject = config.find(routeObj => routeObj.route === currentPath && routeObj);
    if (typeof nextStep == "object" && nextStep != null) {
      if (nextStep[sessionStorage.getItem("KnowProperty")] && (nextStep[sessionStorage.getItem("KnowProperty")] === "search-property" || nextStep[sessionStorage.getItem("KnowProperty")] === "create-property")) {
        nextStep = "" + nextStep[sessionStorage.getItem("KnowProperty")];
      }
    }
    if (routeObject[sessionStorage.getItem("serviceName")]) nextStep = routeObject[sessionStorage.getItem("serviceName")];
    if ((params !== null && params !== void 0 && (_params$cptId = params.cptId) !== null && _params$cptId !== void 0 && _params$cptId.id || params !== null && params !== void 0 && (_params$cpt = params.cpt) !== null && _params$cpt !== void 0 && (_params$cpt$details = _params$cpt.details) !== null && _params$cpt$details !== void 0 && _params$cpt$details.propertyId || isModifyEdit && params !== null && params !== void 0 && (_params$cpt2 = params.cpt) !== null && _params$cpt2 !== void 0 && (_params$cpt2$details = _params$cpt2.details) !== null && _params$cpt2$details !== void 0 && _params$cpt2$details.propertyId) && nextStep === "know-your-property") {
      nextStep = "property-details";
    }
    if (nextStep === "docsrequired" && sessionStorage.getItem("changePropertySelected") === "yes") {
      nextStep = "property-details";
    }
    let redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath$2(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath$2(match.path, match.params) + "/" + nextStep);
  };
  const onSuccess = () => {
    queryClient.invalidateQueries("WS_CREATE");
  };
  const createApplication = function () {
    try {
      history.push(getPath$2(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const handleSelect = (key, data, skipStep, isFromCreateApi) => {
    if (isFromCreateApi) setParams(data);else if (key === "") setParams({
      ...data
    });else setParams({
      ...params,
      ...{
        [key]: {
          ...params[key],
          ...data
        }
      }
    });
    goNext();
  };
  const handleSkip = () => {};
  newConfig$1 = (_newConfig = newConfig$1) !== null && _newConfig !== void 0 && _newConfig.WSCreateConfig ? (_newConfig2 = newConfig$1) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.WSCreateConfig : newConfig;
  (_newConfig3 = newConfig$1) === null || _newConfig3 === void 0 ? void 0 : _newConfig3.forEach(obj => {
    config = config.concat(obj.body.filter(a => !a.hideInCitizen));
  });
  config.indexRoute = "property-details";
  if ((Waterresult && Object.keys(Waterresult).length > 0 || !Sewarageresult) && Waterresult !== null && Waterresult !== void 0 && Waterresult.isLoading || Sewarageresult !== null && Sewarageresult !== void 0 && Sewarageresult.isLoading || configLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('WSCheckPage');
  const Acknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('WSAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map((routeObj, index) => {
    const {
      component,
      texts,
      inputs,
      key,
      isSkipEnabled
    } = routeObj;
    const Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$2(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts,
        inputs,
        key,
        isSkipEnabled
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params,
      userType: "citizen"
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$2(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$2(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(Acknowledgement, {
    data: params,
    onSuccess: onSuccess,
    clearParams: clearParams
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$2(match.path, match.params) + "/" + config.indexRoute
  })));
};

const getPath$3 = (path, params) => {
  params && Object.keys(params).map(key => {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
const ReSubmitDisconnectionApplication = () => {
  var _newConfig, _newConfig2, _newConfig$filter;
  const queryClient = reactQuery.useQueryClient();
  const {
    t
  } = reactI18next.useTranslation();
  const match = reactRouterDom.useRouteMatch();
  const stateId = Digit.ULBService.getStateId();
  let config = [];
  let {
    data: newConfig,
    isLoading: configLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(stateId, {});
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.WSDisconnectionConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.WSDisconnectionConfig : newConfig$1;
  (_newConfig$filter = newConfig.filter(e => e.head === "RE_SUBMIT_DISCONNECTION_APPLICATION")) === null || _newConfig$filter === void 0 ? void 0 : _newConfig$filter.forEach(obj => {
    config = config.concat(obj.body.filter(a => !a.hideInCitizen));
  });
  config.indexRoute = "application-form";
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map((routeObj, index) => {
    const {
      component,
      texts,
      inputs,
      key,
      isSkipEnabled
    } = routeObj;
    const Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$3(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts,
        inputs,
        key,
        isSkipEnabled
      },
      t: t,
      userType: "citizen"
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$3(match.path, match.params) + "/" + config.indexRoute
  })));
};

const CheckPage = _ref => {
  var _cpt$details14, _cpt$details15, _cpt$details15$owners, _cpt$details16, _cpt$details17, _cpt$details18, _ConnectionHolderDeta, _ConnectionHolderDeta2, _ConnectionHolderDeta3, _Object$keys, _waterConectionDetail, _Object$keys2;
  let {
    onSubmit,
    value
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  let isMobile = window.Digit.Utils.browser.isMobile();
  const {
    ConnectionHolderDetails,
    plumberPreference,
    serviceName,
    waterConectionDetails,
    sewerageConnectionDetails,
    documents,
    cpt
  } = value;
  let routeLink = "/digit-ui/citizen/ws/create-application";
  if (window.location.href.includes("/edit-application/")) routeLink = "/digit-ui/citizen/ws/edit-application/" + (value === null || value === void 0 ? void 0 : value.tenantId);
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  let propAddArr = [];
  if (cpt && cpt !== null && cpt !== void 0 && cpt.details && Object.keys(cpt === null || cpt === void 0 ? void 0 : cpt.details).length > 0) {
    var _cpt$details, _cpt$details$address, _cpt$details3, _cpt$details3$address, _cpt$details5, _cpt$details5$address, _cpt$details7, _cpt$details7$address, _cpt$details7$address2, _cpt$details10, _cpt$details12, _cpt$details12$addres;
    if (cpt !== null && cpt !== void 0 && (_cpt$details = cpt.details) !== null && _cpt$details !== void 0 && (_cpt$details$address = _cpt$details.address) !== null && _cpt$details$address !== void 0 && _cpt$details$address.doorNo) {
      var _cpt$details2, _cpt$details2$address;
      propAddArr.push(cpt === null || cpt === void 0 ? void 0 : (_cpt$details2 = cpt.details) === null || _cpt$details2 === void 0 ? void 0 : (_cpt$details2$address = _cpt$details2.address) === null || _cpt$details2$address === void 0 ? void 0 : _cpt$details2$address.doorNo);
    }
    if (cpt !== null && cpt !== void 0 && (_cpt$details3 = cpt.details) !== null && _cpt$details3 !== void 0 && (_cpt$details3$address = _cpt$details3.address) !== null && _cpt$details3$address !== void 0 && _cpt$details3$address.street) {
      var _cpt$details4, _cpt$details4$address;
      propAddArr.push(cpt === null || cpt === void 0 ? void 0 : (_cpt$details4 = cpt.details) === null || _cpt$details4 === void 0 ? void 0 : (_cpt$details4$address = _cpt$details4.address) === null || _cpt$details4$address === void 0 ? void 0 : _cpt$details4$address.street);
    }
    if (cpt !== null && cpt !== void 0 && (_cpt$details5 = cpt.details) !== null && _cpt$details5 !== void 0 && (_cpt$details5$address = _cpt$details5.address) !== null && _cpt$details5$address !== void 0 && _cpt$details5$address.landmark) {
      var _cpt$details6, _cpt$details6$address;
      propAddArr.push(cpt === null || cpt === void 0 ? void 0 : (_cpt$details6 = cpt.details) === null || _cpt$details6 === void 0 ? void 0 : (_cpt$details6$address = _cpt$details6.address) === null || _cpt$details6$address === void 0 ? void 0 : _cpt$details6$address.landmark);
    }
    if (cpt !== null && cpt !== void 0 && (_cpt$details7 = cpt.details) !== null && _cpt$details7 !== void 0 && (_cpt$details7$address = _cpt$details7.address) !== null && _cpt$details7$address !== void 0 && (_cpt$details7$address2 = _cpt$details7$address.locality) !== null && _cpt$details7$address2 !== void 0 && _cpt$details7$address2.code) {
      var _cpt$details8, _cpt$details8$address, _cpt$details8$address2, _cpt$details9;
      propAddArr.push(t(Digit.Utils.pt.getMohallaLocale(cpt === null || cpt === void 0 ? void 0 : (_cpt$details8 = cpt.details) === null || _cpt$details8 === void 0 ? void 0 : (_cpt$details8$address = _cpt$details8.address) === null || _cpt$details8$address === void 0 ? void 0 : (_cpt$details8$address2 = _cpt$details8$address.locality) === null || _cpt$details8$address2 === void 0 ? void 0 : _cpt$details8$address2.code, cpt === null || cpt === void 0 ? void 0 : (_cpt$details9 = cpt.details) === null || _cpt$details9 === void 0 ? void 0 : _cpt$details9.tenantId)));
    }
    if (cpt !== null && cpt !== void 0 && (_cpt$details10 = cpt.details) !== null && _cpt$details10 !== void 0 && _cpt$details10.tenantId) {
      var _cpt$details11;
      propAddArr.push(t(Digit.Utils.pt.getCityLocale(cpt === null || cpt === void 0 ? void 0 : (_cpt$details11 = cpt.details) === null || _cpt$details11 === void 0 ? void 0 : _cpt$details11.tenantId)));
    }
    if (cpt !== null && cpt !== void 0 && (_cpt$details12 = cpt.details) !== null && _cpt$details12 !== void 0 && (_cpt$details12$addres = _cpt$details12.address) !== null && _cpt$details12$addres !== void 0 && _cpt$details12$addres.pincode) {
      var _cpt$details13, _cpt$details13$addres;
      propAddArr.push(cpt === null || cpt === void 0 ? void 0 : (_cpt$details13 = cpt.details) === null || _cpt$details13 === void 0 ? void 0 : (_cpt$details13$addres = _cpt$details13.address) === null || _cpt$details13$addres === void 0 ? void 0 : _cpt$details13$addres.pincode);
    }
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 4
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("WS_COMMON_SUMMARY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_BASIC_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_PROPERTY_ID_LABEL"),
    text: cpt === null || cpt === void 0 ? void 0 : (_cpt$details14 = cpt.details) === null || _cpt$details14 === void 0 ? void 0 : _cpt$details14.propertyId
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWNERS_NAME_LABEL"),
    text: t(cpt === null || cpt === void 0 ? void 0 : (_cpt$details15 = cpt.details) === null || _cpt$details15 === void 0 ? void 0 : (_cpt$details15$owners = _cpt$details15.owners[0]) === null || _cpt$details15$owners === void 0 ? void 0 : _cpt$details15$owners.name)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_COMMON_TABLE_COL_ADDRESS"),
    text: propAddArr.join(', ')
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONNECTION_DETAILS_STATUS_LABEL"),
    text: t(cpt === null || cpt === void 0 ? void 0 : (_cpt$details16 = cpt.details) === null || _cpt$details16 === void 0 ? void 0 : _cpt$details16.status)
  })), /*#__PURE__*/React__default.createElement("div", {
    style: {
      textAlign: "left"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen/commonpt/view-property?propertyId=" + (cpt === null || cpt === void 0 ? void 0 : (_cpt$details17 = cpt.details) === null || _cpt$details17 === void 0 ? void 0 : _cpt$details17.propertyId) + "&tenantId=" + (cpt === null || cpt === void 0 ? void 0 : (_cpt$details18 = cpt.details) === null || _cpt$details18 === void 0 ? void 0 : _cpt$details18.tenantId)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      textAlign: "left"
    },
    label: t("PT_VIEW_PROPERTY")
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      position: "relative"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px",
        marginRight: "-10px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/connection-holder")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    textStyle: isMobile ? {
      marginRight: "-5px"
    } : {},
    label: t("WS_OWN_MOBILE_NO"),
    text: ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : ConnectionHolderDetails.mobileNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_NAME"),
    text: ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : ConnectionHolderDetails.name
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_GENDER_LABEL"),
    text: t(ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : (_ConnectionHolderDeta = ConnectionHolderDetails.gender) === null || _ConnectionHolderDeta === void 0 ? void 0 : _ConnectionHolderDeta.i18nKey) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_FATHERS_HUSBAND_NAME"),
    text: (ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : ConnectionHolderDetails.guardian) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_CONN_HOLDER_OWN_DETAIL_RELATION_LABEL"),
    text: t(ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : (_ConnectionHolderDeta2 = ConnectionHolderDetails.relationship) === null || _ConnectionHolderDeta2 === void 0 ? void 0 : _ConnectionHolderDeta2.i18nKey) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_CROSADD"),
    text: (ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : ConnectionHolderDetails.address) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),
    text: t(ConnectionHolderDetails === null || ConnectionHolderDetails === void 0 ? void 0 : (_ConnectionHolderDeta3 = ConnectionHolderDetails.specialCategoryType) === null || _ConnectionHolderDeta3 === void 0 ? void 0 : _ConnectionHolderDeta3.i18nKey) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      position: "relative"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_CONNECTION_DETAIL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/service-name")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    textStyle: isMobile ? {
      marginRight: "-10px"
    } : {},
    label: t("WS_SERVICE_NAME_LABEL"),
    text: t(serviceName === null || serviceName === void 0 ? void 0 : serviceName.i18nKey)
  }), waterConectionDetails && ((_Object$keys = Object.keys(waterConectionDetails)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) > 0 && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_NO_OF_TAPS_PROPOSED"),
    text: waterConectionDetails === null || waterConectionDetails === void 0 ? void 0 : waterConectionDetails.proposedTaps
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_PIPE_SIZE"),
    text: t(waterConectionDetails === null || waterConectionDetails === void 0 ? void 0 : (_waterConectionDetail = waterConectionDetails.proposedPipeSize) === null || _waterConectionDetail === void 0 ? void 0 : _waterConectionDetail.i18nKey)
  })), sewerageConnectionDetails && ((_Object$keys2 = Object.keys(sewerageConnectionDetails)) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) > 0 && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_NO_OF_WATER_CLOSETS"),
    text: sewerageConnectionDetails === null || sewerageConnectionDetails === void 0 ? void 0 : sewerageConnectionDetails.proposedWaterClosets
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_SERV_DETAIL_NO_OF_TOILETS"),
    text: sewerageConnectionDetails === null || sewerageConnectionDetails === void 0 ? void 0 : sewerageConnectionDetails.proposedToilets
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      position: "relative"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_DOCUMENT_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/document-details")
  })), documents && (documents === null || documents === void 0 ? void 0 : documents.documents.map((doc, index) => {
    var _doc$documentType;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "doc-" + index
    }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t(doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.split('.').slice(0, 2).join('_'))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(WSDocument, {
      value: value,
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index
    }), (documents === null || documents === void 0 ? void 0 : documents.documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "white",
        backgroundColor: "white",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null)));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    style: {
      marginLeft: "10px",
      maxWidth: "95%"
    }
  }));
};

const WSConnection = _ref => {
  var _application$connecti, _application$property, _application$property2, _application$property3, _application$property4, _application$property5, _application$property6, _application$property7;
  let {
    application
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  let encodeApplicationNo = encodeURI(application.applicationNo);
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    note: application === null || application === void 0 ? void 0 : application.connectionNo
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_SERVICE_NAME_LABEL"),
    note: t("WS_APPLICATION_TYPE_" + (application === null || application === void 0 ? void 0 : application.applicationType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_CONSUMER_NAME"),
    note: (application === null || application === void 0 ? void 0 : (_application$connecti = application.connectionHolders) === null || _application$connecti === void 0 ? void 0 : _application$connecti.map(owner => owner.name).join(",")) || (application === null || application === void 0 ? void 0 : (_application$property = application.property) === null || _application$property === void 0 ? void 0 : (_application$property2 = _application$property.owners) === null || _application$property2 === void 0 ? void 0 : _application$property2.map(owner => owner.name).join(","))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_MYCONNECTION_ADDRESS"),
    note: getAddress(application === null || application === void 0 ? void 0 : (_application$property3 = application.property) === null || _application$property3 === void 0 ? void 0 : _application$property3.address, t),
    privacy: {
      uuid: application === null || application === void 0 ? void 0 : (_application$property4 = application.property) === null || _application$property4 === void 0 ? void 0 : (_application$property5 = _application$property4.owners) === null || _application$property5 === void 0 ? void 0 : (_application$property6 = _application$property5[0]) === null || _application$property6 === void 0 ? void 0 : _application$property6.uuid,
      fieldName: ["doorNo", "street", "landmark"],
      model: "Property",
      showValue: true,
      loadData: {
        serviceName: "/property-services/property/_search",
        requestBody: {},
        requestParam: {
          tenantId: application === null || application === void 0 ? void 0 : application.tenantId,
          propertyIds: application === null || application === void 0 ? void 0 : (_application$property7 = application.property) === null || _application$property7 === void 0 ? void 0 : _application$property7.propertyId
        },
        jsonPath: "Properties[0].address.street",
        isArray: false,
        d: res => {
          let resultString = (lodash.get(res, "Properties[0].address.doorNo") ? lodash.get(res, "Properties[0].address.doorNo") + ", " : "") + (lodash.get(res, "Properties[0].address.street") ? lodash.get(res, "Properties[0].address.street") + ", " : "") + (lodash.get(res, "Properties[0].address.landmark") ? "" + lodash.get(res, "Properties[0].address.landmark") : "");
          return resultString;
        }
      }
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
    keyValue: t("WS_MYCONNECTIONS_STATUS"),
    note: t(application === null || application === void 0 ? void 0 : application.status)
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/ws/connection/details/" + encodeApplicationNo,
      state: {
        ...application
      }
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_VIEW_DETAILS_LABEL")
  })));
};

const MyConnections = _ref => {
  var _Digit$SessionStorage, _user$info, _user$info2, _user$info3, _data$WaterConnection, _SWdata$SewerageConne, _connectionList, _connectionList2;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  let filter = window.location.href.split("/").pop();
  let filter1 = !isNaN(parseInt(filter)) ? {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info2 = user.info) === null || _user$info2 === void 0 ? void 0 : _user$info2.mobileNumber,
    searchType: "CONNECTION"
  } : {
    tenantId: tenantId,
    mobileNumber: user === null || user === void 0 ? void 0 : (_user$info3 = user.info) === null || _user$info3 === void 0 ? void 0 : _user$info3.mobileNumber,
    searchType: "CONNECTION"
  };
  const {
    isLoading,
    isError,
    error,
    data
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1
  }, {
    filters: filter1
  });
  const {
    isLoading: isSWLoading,
    isError: isSWError,
    error: SWerror,
    data: SWdata
  } = Digit.Hooks.ws.useMyApplicationSearch({
    filters: filter1,
    BusinessService: "SW"
  }, {
    filters: filter1
  });
  let connectionList = data === null || data === void 0 ? void 0 : data.WaterConnection.concat(SWdata === null || SWdata === void 0 ? void 0 : SWdata.SewerageConnections);
  let applicationNoWS = data && (data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection.map(ob => ob === null || ob === void 0 ? void 0 : ob.propertyId).join(",")) || "";
  let applicaionNoSW = SWdata && (SWdata === null || SWdata === void 0 ? void 0 : (_SWdata$SewerageConne = SWdata.SewerageConnections) === null || _SWdata$SewerageConne === void 0 ? void 0 : _SWdata$SewerageConne.map(ob => ob === null || ob === void 0 ? void 0 : ob.propertyId).join(",")) || "";
  let applicationNos = applicationNoWS.concat(applicaionNoSW);
  const {
    isLoading: PTisLoading,
    isError: PTisError,
    error: PTerror,
    data: PTdata
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: applicationNos
    }
  }, {
    filters: {
      propertyIds: applicationNos
    },
    enabled: applicationNos ? true : false
  });
  connectionList = connectionList && connectionList.map(ob => {
    var _PTdata$Properties;
    return {
      ...ob,
      property: PTdata === null || PTdata === void 0 ? void 0 : (_PTdata$Properties = PTdata.Properties) === null || _PTdata$Properties === void 0 ? void 0 : _PTdata$Properties.filter(pt => (pt === null || pt === void 0 ? void 0 : pt.propertyId) === (ob === null || ob === void 0 ? void 0 : ob.propertyId))[0]
    };
  });
  if (isLoading || PTisLoading || isSWLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_MYCONNECTIONS_HEADER") + " " + (connectionList ? "(" + connectionList.length + ")" : "")), /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement("div", null, ((_connectionList = connectionList) === null || _connectionList === void 0 ? void 0 : _connectionList.length) > 0 && connectionList.map((application, index) => /*#__PURE__*/React__default.createElement("div", {
    key: index
  }, /*#__PURE__*/React__default.createElement(WSConnection, {
    application: application
  }))), !((_connectionList2 = connectionList) !== null && _connectionList2 !== void 0 && _connectionList2.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("PT_NO_APPLICATION_FOUND_MSG"))));
};

const GetActionMessage = props => {
  const {
    t
  } = reactI18next.useTranslation();
  if (props.isSuccess) {
    return t("CS_WATER_UPDATE_APPLICATION_SUCCESS");
  } else if (props.isLoading) {
    return t("CS_WATER_UPDATE_APPLICATION_PENDING");
  } else if (!props.isSuccess) {
    return t("CS_WATER_UPDATE_APPLICATION_FAILED");
  }
};
const BannerPicker$1 = props => {
  var _props$Waterdata, _props$Waterdata$Wate, _props$Waterdata$Wate2, _props$Seweragedata, _props$Seweragedata$S, _props$Seweragedata$S2;
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: GetActionMessage(props),
    info: props.isSuccess && props !== null && props !== void 0 && props.Waterdata ? props.t("WS_ACKNO_APP_NO_LABEL") : "",
    applicationNumber: props !== null && props !== void 0 && props.Waterdata ? props === null || props === void 0 ? void 0 : (_props$Waterdata = props.Waterdata) === null || _props$Waterdata === void 0 ? void 0 : (_props$Waterdata$Wate = _props$Waterdata.WaterConnection) === null || _props$Waterdata$Wate === void 0 ? void 0 : (_props$Waterdata$Wate2 = _props$Waterdata$Wate[0]) === null || _props$Waterdata$Wate2 === void 0 ? void 0 : _props$Waterdata$Wate2.applicationNo : "",
    infoOne: props.isSuccess && props !== null && props !== void 0 && props.Seweragedata ? props.t("WS_ACKNO_SEW_APP_NO_LABEL") : "",
    applicationNumberOne: props !== null && props !== void 0 && props.Seweragedata ? props === null || props === void 0 ? void 0 : (_props$Seweragedata = props.Seweragedata) === null || _props$Seweragedata === void 0 ? void 0 : (_props$Seweragedata$S = _props$Seweragedata.SewerageConnections) === null || _props$Seweragedata$S === void 0 ? void 0 : (_props$Seweragedata$S2 = _props$Seweragedata$S[0]) === null || _props$Seweragedata$S2 === void 0 ? void 0 : _props$Seweragedata$S2.applicationNo : "",
    successful: props.isSuccess
  });
};
const WSAcknowledgement = _ref => {
  var _data$serviceName7, _data$serviceName8, _data$serviceName9, _data$serviceName10, _data$serviceName11, _data$serviceName12, _data$serviceName13, _data$serviceName14, _data$serviceName15, _data$serviceName16;
  let {
    data,
    onSuccess,
    clearParams
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const [mutationHappened, setMutationHappened, clear] = Digit.Hooks.useSessionStorage("CITIZEN_TL_MUTATION_HAPPENED", false);
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const WSmutation = Digit.Hooks.ws.useWSUpdateAPI("WATER");
  const SWmutation = Digit.Hooks.ws.useWSUpdateAPI("SEWERAGE");
  let isEdit = window.location.href.includes("/edit-application/") || window.location.href.includes("/modify-connection/");
  const {
    data: storeData
  } = Digit.Hooks.useStore.getInitData();
  const {
    tenants
  } = storeData || {};
  const stateId = Digit.ULBService.getStateId();
  React.useEffect(() => {
    if (sessionStorage.getItem("isCreateEnabled") !== "true") window.history.forward();else sessionStorage.removeItem("isCreateEnabled");
  });
  React.useEffect(() => {
    try {
      var _data$serviceName, _data$serviceName2;
      let tenantId;
      if ((data === null || data === void 0 ? void 0 : (_data$serviceName = data.serviceName) === null || _data$serviceName === void 0 ? void 0 : _data$serviceName.code) === "WATER" || (data === null || data === void 0 ? void 0 : (_data$serviceName2 = data.serviceName) === null || _data$serviceName2 === void 0 ? void 0 : _data$serviceName2.code) === "BOTH") {
        var _data$cpt, _data$cpt$details;
        tenantId = (data === null || data === void 0 ? void 0 : (_data$cpt = data.cpt) === null || _data$cpt === void 0 ? void 0 : (_data$cpt$details = _data$cpt.details) === null || _data$cpt$details === void 0 ? void 0 : _data$cpt$details.tenantId) || tenantId;
        let formdata = isEdit ? convertToEditWSUpdate(data) : convertToWSUpdate(data);
        WSmutation.mutate(formdata, {
          onSuccess
        });
      }
    } catch (err) {}
  }, [data]);
  React.useEffect(() => {
    var _data$serviceName3, _data$serviceName4;
    if ((data === null || data === void 0 ? void 0 : (_data$serviceName3 = data.serviceName) === null || _data$serviceName3 === void 0 ? void 0 : _data$serviceName3.code) === "SEWERAGE" || (data === null || data === void 0 ? void 0 : (_data$serviceName4 = data.serviceName) === null || _data$serviceName4 === void 0 ? void 0 : _data$serviceName4.code) === "BOTH" && WSmutation.isSuccess) {
      let formdata = isEdit ? convertToEditSWUpdate(data) : convertToSWUpdate(data);
      SWmutation.mutate(formdata, {
        onSuccess
      });
    }
  }, [data, WSmutation.isSuccess]);
  const handleDownloadPdfWater = () => {
    var _WSmutation$data, _WSmutation$data$Wate, _data$cpt4;
    const WSmutationdata = WSmutation === null || WSmutation === void 0 ? void 0 : (_WSmutation$data = WSmutation.data) === null || _WSmutation$data === void 0 ? void 0 : (_WSmutation$data$Wate = _WSmutation$data.WaterConnection) === null || _WSmutation$data$Wate === void 0 ? void 0 : _WSmutation$data$Wate[0];
    const tenantInfo = tenants.find(tenant => {
      var _data$cpt3, _data$cpt3$details;
      return tenant.code === (data === null || data === void 0 ? void 0 : (_data$cpt3 = data.cpt) === null || _data$cpt3 === void 0 ? void 0 : (_data$cpt3$details = _data$cpt3.details) === null || _data$cpt3$details === void 0 ? void 0 : _data$cpt3$details.tenantId);
    });
    const data1 = getWSAcknowledgementData({
      ...WSmutationdata
    }, {
      ...(data === null || data === void 0 ? void 0 : (_data$cpt4 = data.cpt) === null || _data$cpt4 === void 0 ? void 0 : _data$cpt4.details)
    }, tenantInfo === null || tenantInfo === void 0 ? void 0 : tenantInfo.code, t);
    data1.then(ress => Digit.Utils.pdf.generatev1(ress));
  };
  const handleDownloadPdfSewerage = () => {
    var _SWmutation$data, _SWmutation$data$Sewe, _data$cpt6;
    const SWmutationdata = SWmutation === null || SWmutation === void 0 ? void 0 : (_SWmutation$data = SWmutation.data) === null || _SWmutation$data === void 0 ? void 0 : (_SWmutation$data$Sewe = _SWmutation$data.SewerageConnections) === null || _SWmutation$data$Sewe === void 0 ? void 0 : _SWmutation$data$Sewe[0];
    const tenantInfo = tenants.find(tenant => {
      var _data$cpt5, _data$cpt5$details;
      return tenant.code === (data === null || data === void 0 ? void 0 : (_data$cpt5 = data.cpt) === null || _data$cpt5 === void 0 ? void 0 : (_data$cpt5$details = _data$cpt5.details) === null || _data$cpt5$details === void 0 ? void 0 : _data$cpt5$details.tenantId);
    });
    const data2 = getWSAcknowledgementData({
      ...SWmutationdata
    }, {
      ...(data === null || data === void 0 ? void 0 : (_data$cpt6 = data.cpt) === null || _data$cpt6 === void 0 ? void 0 : _data$cpt6.details)
    }, tenantInfo === null || tenantInfo === void 0 ? void 0 : tenantInfo.code, t);
    data2.then(ress => Digit.Utils.pdf.generatev1(ress));
  };
  return ((data === null || data === void 0 ? void 0 : (_data$serviceName7 = data.serviceName) === null || _data$serviceName7 === void 0 ? void 0 : _data$serviceName7.code) === "WATER" ? WSmutation.isLoading || WSmutation.isIdle : (data === null || data === void 0 ? void 0 : (_data$serviceName8 = data.serviceName) === null || _data$serviceName8 === void 0 ? void 0 : _data$serviceName8.code) === "SEWERAGE" ? SWmutation.isLoading || SWmutation.isIdle : WSmutation.isLoading || WSmutation.isIdle || SWmutation.isLoading || SWmutation.isIdle) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(BannerPicker$1, {
    t: t,
    clearParams: clearParams,
    Waterdata: WSmutation.data,
    Seweragedata: SWmutation.data,
    isSuccess: (data === null || data === void 0 ? void 0 : (_data$serviceName9 = data.serviceName) === null || _data$serviceName9 === void 0 ? void 0 : _data$serviceName9.code) === "WATER" ? WSmutation.isSuccess : SWmutation.isSuccess,
    isLoading: (data === null || data === void 0 ? void 0 : (_data$serviceName10 = data.serviceName) === null || _data$serviceName10 === void 0 ? void 0 : _data$serviceName10.code) === "WATER" ? WSmutation.isLoading || WSmutation.isIdle : (data === null || data === void 0 ? void 0 : (_data$serviceName11 = data.serviceName) === null || _data$serviceName11 === void 0 ? void 0 : _data$serviceName11.code) === "SEWERAGE" ? SWmutation.isLoading || SWmutation.isIdle : WSmutation.isLoading || WSmutation.isIdle || SWmutation.isLoading || SWmutation.isIdle
  }), ((data === null || data === void 0 ? void 0 : (_data$serviceName12 = data.serviceName) === null || _data$serviceName12 === void 0 ? void 0 : _data$serviceName12.code) === "WATER" ? WSmutation.isSuccess : SWmutation.isSuccess) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("WS_FILE_RESPONSE")), ((data === null || data === void 0 ? void 0 : (_data$serviceName13 = data.serviceName) === null || _data$serviceName13 === void 0 ? void 0 : _data$serviceName13.code) === "WATER" || (data === null || data === void 0 ? void 0 : (_data$serviceName14 = data.serviceName) === null || _data$serviceName14 === void 0 ? void 0 : _data$serviceName14.code) === "BOTH") && WSmutation.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement("div", {
      className: "response-download-button"
    }, /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      width: "24",
      height: "24",
      viewBox: "0 0 24 24",
      fill: "#a82227"
    }, /*#__PURE__*/React__default.createElement("path", {
      d: "M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"
    }))), /*#__PURE__*/React__default.createElement("span", {
      className: "download-button"
    }, t("WS_PRINT_WATER_APPLICATION_LABEL"))),
    onClick: handleDownloadPdfWater
  }), ((data === null || data === void 0 ? void 0 : (_data$serviceName15 = data.serviceName) === null || _data$serviceName15 === void 0 ? void 0 : _data$serviceName15.code) === "SEWERAGE" || (data === null || data === void 0 ? void 0 : (_data$serviceName16 = data.serviceName) === null || _data$serviceName16 === void 0 ? void 0 : _data$serviceName16.code) === "BOTH") && SWmutation.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement("div", {
      className: "response-download-button"
    }, /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      width: "24",
      height: "24",
      viewBox: "0 0 24 24",
      fill: "#a82227"
    }, /*#__PURE__*/React__default.createElement("path", {
      d: "M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"
    }))), /*#__PURE__*/React__default.createElement("span", {
      className: "download-button"
    }, t("WS_PRINT_SEWERAGE_APPLICATION_LABEL"))),
    onClick: handleDownloadPdfSewerage
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })));
};

const CheckPage$1 = () => {
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const value = Digit.SessionStorage.get("WS_DISCONNECTION");
  const [documents, setDocuments] = React.useState(value.WSDisconnectionForm.documents || []);
  let routeLink = "/digit-ui/citizen/ws/disconnect-application";
  if (window.location.href.includes("/edit-application/")) routeLink = "/digit-ui/citizen/ws/edit-disconnect-application";
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const {
    isLoading: creatingWaterApplicationLoading,
    isError: createWaterApplicationError,
    data: createWaterResponse,
    error: createWaterError,
    mutate: waterMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("WATER");
  const {
    isLoading: updatingWaterApplicationLoading,
    isError: updateWaterApplicationError,
    data: updateWaterResponse,
    error: updateWaterError,
    mutate: waterUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("WATER");
  const {
    isLoading: creatingSewerageApplicationLoading,
    isError: createSewerageApplicationError,
    data: createSewerageResponse,
    error: createSewerageError,
    mutate: sewerageMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE");
  const {
    isLoading: updatingSewerageApplicationLoading,
    isError: updateSewerageApplicationError,
    data: updateSewerageResponse,
    error: updateSewerageError,
    mutate: sewerageUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");
  const closeToastOfError = () => {
    setShowToast(null);
  };
  const onSubmit = function (data) {
    try {
      return Promise.resolve(createPayloadOfWSDisconnection(data, {
        applicationData: value
      }, value.serviceType)).then(function (payload) {
        const _temp4 = function (_payload$WaterConnect) {
          if (payload !== null && payload !== void 0 && (_payload$WaterConnect = payload.WaterConnection) !== null && _payload$WaterConnect !== void 0 && _payload$WaterConnect.water) {
            const _temp = function () {
              if (waterMutation) {
                setIsEnableLoader(true);
                return Promise.resolve(waterMutation(payload, {
                  onError: (error, variables) => {
                    var _error$response, _error$response$data, _error$response$data$, _error$response2, _error$response2$data, _error$response2$data2;
                    setIsEnableLoader(false);
                    setError({
                      key: "error",
                      message: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors) !== null && _error$response$data$ !== void 0 && _error$response$data$[0].message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2[0].message : error
                    });
                    setTimeout(closeToastOfError, 5000);
                  },
                  onSuccess: function (data, variables) {
                    try {
                      var _data$WaterConnection;
                      return Promise.resolve(updatePayloadOfWSDisconnection(data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection[0], "WATER")).then(function (response) {
                        let waterConnectionUpdate = {
                          WaterConnection: response
                        };
                        waterConnectionUpdate = {
                          ...waterConnectionUpdate,
                          disconnectRequest: true
                        };
                        return Promise.resolve(waterUpdateMutation(waterConnectionUpdate, {
                          onError: (error, variables) => {
                            var _error$response3, _error$response3$data, _error$response3$data2, _error$response4, _error$response4$data, _error$response4$data2;
                            setIsEnableLoader(false);
                            setError({
                              key: "error",
                              message: error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && (_error$response3$data2 = _error$response3$data.Errors) !== null && _error$response3$data2 !== void 0 && _error$response3$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : (_error$response4$data2 = _error$response4$data.Errors) === null || _error$response4$data2 === void 0 ? void 0 : _error$response4$data2[0].message : error
                            });
                            setTimeout(closeToastOfError, 5000);
                          },
                          onSuccess: (data, variables) => {
                            var _data$WaterConnection2;
                            Digit.SessionStorage.set("WS_DISCONNECTION", {
                              ...value,
                              DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2[0]
                            });
                            history.push("/digit-ui/citizen/ws/disconnect-acknowledge");
                          }
                        })).then(function () {});
                      });
                    } catch (e) {
                      return Promise.reject(e);
                    }
                  }
                })).then(function () {});
              }
            }();
            if (_temp && _temp.then) return _temp.then(function () {});
          } else {
            const _temp3 = function (_payload$SewerageConn) {
              if (payload !== null && payload !== void 0 && (_payload$SewerageConn = payload.SewerageConnection) !== null && _payload$SewerageConn !== void 0 && _payload$SewerageConn.sewerage) {
                const _temp2 = function () {
                  if (sewerageMutation) {
                    setIsEnableLoader(true);
                    return Promise.resolve(sewerageMutation(payload, {
                      onError: (error, variables) => {
                        var _error$response5, _error$response5$data, _error$response5$data2, _error$response6, _error$response6$data, _error$response6$data2;
                        setIsEnableLoader(false);
                        setError({
                          key: "error",
                          message: error !== null && error !== void 0 && (_error$response5 = error.response) !== null && _error$response5 !== void 0 && (_error$response5$data = _error$response5.data) !== null && _error$response5$data !== void 0 && (_error$response5$data2 = _error$response5$data.Errors) !== null && _error$response5$data2 !== void 0 && _error$response5$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : (_error$response6$data2 = _error$response6$data.Errors) === null || _error$response6$data2 === void 0 ? void 0 : _error$response6$data2[0].message : error
                        });
                        setTimeout(closeToastOfError, 5000);
                      },
                      onSuccess: function (data, variables) {
                        try {
                          var _data$SewerageConnect;
                          return Promise.resolve(updatePayloadOfWSDisconnection(data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : _data$SewerageConnect[0], "SEWERAGE")).then(function (response) {
                            let sewerageConnectionUpdate = {
                              SewerageConnection: response
                            };
                            sewerageConnectionUpdate = {
                              ...sewerageConnectionUpdate,
                              disconnectRequest: true
                            };
                            return Promise.resolve(sewerageUpdateMutation(sewerageConnectionUpdate, {
                              onError: (error, variables) => {
                                var _error$response7, _error$response7$data, _error$response7$data2, _error$response8, _error$response8$data, _error$response8$data2;
                                setIsEnableLoader(false);
                                setError({
                                  key: "error",
                                  message: error !== null && error !== void 0 && (_error$response7 = error.response) !== null && _error$response7 !== void 0 && (_error$response7$data = _error$response7.data) !== null && _error$response7$data !== void 0 && (_error$response7$data2 = _error$response7$data.Errors) !== null && _error$response7$data2 !== void 0 && _error$response7$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : (_error$response8$data2 = _error$response8$data.Errors) === null || _error$response8$data2 === void 0 ? void 0 : _error$response8$data2[0].message : error
                                });
                                setTimeout(closeToastOfError, 5000);
                              },
                              onSuccess: (data, variables) => {
                                var _data$SewerageConnect2;
                                Digit.SessionStorage.set("WS_DISCONNECTION", {
                                  ...value,
                                  DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$SewerageConnect2 = data.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2[0]
                                });
                                history.push("/digit-ui/citizen/ws/disconnect-acknowledge");
                              }
                            })).then(function () {});
                          });
                        } catch (e) {
                          return Promise.reject(e);
                        }
                      }
                    })).then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        if (_temp4 && _temp4.then) return _temp4.then(function () {});
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isEnableLoader) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("WS_COMMON_SUMMARY")), /*#__PURE__*/React__default.createElement(DisconnectTimeline, {
    currentStep: 3
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "inline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_DISCONNECTION_APPLICATION_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-20px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/application-form")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_CONSUMER_NUMBER"),
    text: value.connectionNo
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_TYPE"),
    text: t(value.WSDisconnectionForm.type.value.i18nKey)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_PROPOSED_DATE"),
    text: convertEpochToDate(convertDateToEpoch(value.WSDisconnectionForm.date))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_REASON"),
    text: value.WSDisconnectionForm.reason.value
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "inline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_DOCUMENT_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-20px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/documents-upload")
  })), documents && (documents === null || documents === void 0 ? void 0 : documents.map((doc, index) => {
    var _doc$documentType;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "doc-" + index
    }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t(doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.split('.').slice(0, 2).join('_'))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(WSDocument, {
      value: {
        documents: value.WSDisconnectionForm
      },
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index,
      showFileName: true
    }), (documents === null || documents === void 0 ? void 0 : documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#cccccc",
        backgroundColor: "#cccccc",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null)));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: () => onSubmit(value === null || value === void 0 ? void 0 : value.WSDisconnectionForm)
  })));
};

const CheckPage$2 = () => {
  var _value$applicationDat;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const match = reactRouterDom.useRouteMatch();
  const value = Digit.SessionStorage.get("WS_DISCONNECTION");
  const [documents, setDocuments] = React.useState(value.WSDisconnectionForm.documents || []);
  let routeLink = "/digit-ui/citizen/ws/resubmit-disconnect-application";
  if (window.location.href.includes("/resubmit")) routeLink = "/digit-ui/citizen/ws/resubmit-disconnect-application";
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const {
    isLoading: updatingWaterApplicationLoading,
    isError: updateWaterApplicationError,
    data: updateWaterResponse,
    error: updateWaterError,
    mutate: waterUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("WATER");
  const {
    isLoading: updatingSewerageApplicationLoading,
    isError: updateSewerageApplicationError,
    data: updateSewerageResponse,
    error: updateSewerageError,
    mutate: sewerageUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");
  const closeToastOfError = () => {
    setShowToast(null);
  };
  const onSubmit = function (data) {
    try {
      return Promise.resolve(createPayloadOfWSReSubmitDisconnection(data, value, value.serviceType)).then(function (payload) {
        const _temp4 = function (_payload$WaterConnect) {
          if (payload !== null && payload !== void 0 && (_payload$WaterConnect = payload.WaterConnection) !== null && _payload$WaterConnect !== void 0 && _payload$WaterConnect.water) {
            const _temp = function () {
              if (waterUpdateMutation) {
                setIsEnableLoader(true);
                return Promise.resolve(waterUpdateMutation(payload, {
                  onError: (error, variables) => {
                    var _error$response, _error$response$data, _error$response$data$, _error$response2, _error$response2$data, _error$response2$data2;
                    setIsEnableLoader(false);
                    setError({
                      key: "error",
                      message: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors) !== null && _error$response$data$ !== void 0 && _error$response$data$[0].message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2[0].message : error
                    });
                    setTimeout(closeToastOfError, 5000);
                  },
                  onSuccess: function (data, variables) {
                    try {
                      var _data$WaterConnection, _data$WaterConnection2, _data$WaterConnection3;
                      Digit.SessionStorage.set("WS_DISCONNECTION", {
                        ...(value === null || value === void 0 ? void 0 : value.applicationData),
                        ...(value === null || value === void 0 ? void 0 : value.WSDisconnectionForm),
                        DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection[0]
                      });
                      history.push("/digit-ui/citizen/ws/disconnect-acknowledge?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : (_data$WaterConnection3 = _data$WaterConnection2[0]) === null || _data$WaterConnection3 === void 0 ? void 0 : _data$WaterConnection3.applicationNo));
                      return Promise.resolve();
                    } catch (e) {
                      return Promise.reject(e);
                    }
                  }
                })).then(function () {});
              }
            }();
            if (_temp && _temp.then) return _temp.then(function () {});
          } else {
            const _temp3 = function (_payload$SewerageConn) {
              if (payload !== null && payload !== void 0 && (_payload$SewerageConn = payload.SewerageConnection) !== null && _payload$SewerageConn !== void 0 && _payload$SewerageConn.sewerage) {
                const _temp2 = function () {
                  if (sewerageUpdateMutation) {
                    setIsEnableLoader(true);
                    return Promise.resolve(sewerageUpdateMutation(payload, {
                      onError: (error, variables) => {
                        var _error$response3, _error$response3$data, _error$response3$data2, _error$response4, _error$response4$data, _error$response4$data2;
                        setIsEnableLoader(false);
                        setError({
                          key: "error",
                          message: error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && (_error$response3$data2 = _error$response3$data.Errors) !== null && _error$response3$data2 !== void 0 && _error$response3$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : (_error$response4$data2 = _error$response4$data.Errors) === null || _error$response4$data2 === void 0 ? void 0 : _error$response4$data2[0].message : error
                        });
                        setTimeout(closeToastOfError, 5000);
                      },
                      onSuccess: function (data, variables) {
                        try {
                          var _data$SewerageConnect, _data$SewerageConnect2, _data$SewerageConnect3;
                          Digit.SessionStorage.set("WS_DISCONNECTION", {
                            ...(value === null || value === void 0 ? void 0 : value.applicationData),
                            ...(value === null || value === void 0 ? void 0 : value.WSDisconnectionForm),
                            DisconnectionResponse: data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : _data$SewerageConnect[0]
                          });
                          history.push("/digit-ui/citizen/ws/disconnect-acknowledge?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$SewerageConnect2 = data.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : (_data$SewerageConnect3 = _data$SewerageConnect2[0]) === null || _data$SewerageConnect3 === void 0 ? void 0 : _data$SewerageConnect3.applicationNo));
                          return Promise.resolve();
                        } catch (e) {
                          return Promise.reject(e);
                        }
                      }
                    })).then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        if (_temp4 && _temp4.then) return _temp4.then(function () {});
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isEnableLoader) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("WS_COMMON_SUMMARY")), /*#__PURE__*/React__default.createElement(DisconnectTimeline, {
    currentStep: 3
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "inline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_DISCONNECTION_APPLICATION_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-20px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/application-form")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_CONSUMER_NUMBER"),
    text: value.connectionNo || (value === null || value === void 0 ? void 0 : (_value$applicationDat = value.applicationData) === null || _value$applicationDat === void 0 ? void 0 : _value$applicationDat.connectionNo)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_TYPE"),
    text: t(value.WSDisconnectionForm.type.value.i18nKey)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_PROPOSED_DATE"),
    text: convertEpochToDate(convertDateToEpoch(value.WSDisconnectionForm.date))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("WS_DISCONNECTION_REASON"),
    text: value.WSDisconnectionForm.reason.value
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "inline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "28px"
    }
  }, t("WS_COMMON_DOCUMENT_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-20px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: () => routeTo(routeLink + "/documents-upload")
  })), documents && (documents === null || documents === void 0 ? void 0 : documents.map((doc, index) => {
    var _doc$documentType;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "doc-" + index
    }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t(doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.split('.').slice(0, 2).join('_'))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(WSDocument, {
      value: {
        documents: value.WSDisconnectionForm
      },
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index,
      showFileName: true
    }), (documents === null || documents === void 0 ? void 0 : documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#cccccc",
        backgroundColor: "#cccccc",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null)));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: () => onSubmit(value === null || value === void 0 ? void 0 : value.WSDisconnectionForm)
  })));
};

const config$2 = [{
  texts: {
    header: "CS_TITLE_MY_BILLS",
    actionButtonLabel: "WS_VIEW_DETAILS_AND_PAY"
  },
  labels: [{
    label: "WNS_COMMON_TABLE_COL_AMT_DUE_LABEL",
    key: "AmountDue",
    noteStyle: {
      fontSize: "24px",
      fontWeight: "bold"
    },
    notePrefix: "₹ "
  }, {
    label: "WNS_MYCONNECTIONS_SERVICE",
    key: "ServiceName"
  }, {
    label: "WNS_MYCONNECTIONS_CONSUMER_NO",
    key: "ConsumerNumber"
  }, {
    label: "WNS_BILLING_PERIOD",
    key: "BillingPeriod"
  }, {
    label: "WNS_CONSUMER_NAME_LABEL",
    key: "ConsumerName"
  }, {
    label: "WNS_MYCONNECTION_ADDRESS",
    key: "Address"
  }, {
    label: "WNS_VIEW_BILL_DUE_DATE_LABEL",
    key: "DueDate"
  }]
}];

const WNSMyBills = _ref => {
  var _Digit$UserService$ge, _Digit$SessionStorage, _Digit$UserService$ge2, _Digit$UserService$ge3, _location$state, _Digit$UserService$ge4, _searchResults, _searchResults2, _searchResults3;
  let {
    template,
    header,
    actionButtonLabel
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  const location = reactRouterDom.useLocation();
  const {
    tenantId: _tenantId
  } = Digit.Hooks.useQueryParams();
  let {
    tenantId
  } = ((_Digit$UserService$ge = Digit.UserService.getUser()) === null || _Digit$UserService$ge === void 0 ? void 0 : _Digit$UserService$ge.info) || (location === null || location === void 0 ? void 0 : location.state) || {
    tenantId: _tenantId
  } || {};
  tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || ((_Digit$UserService$ge2 = Digit.UserService.getUser()) === null || _Digit$UserService$ge2 === void 0 ? void 0 : (_Digit$UserService$ge3 = _Digit$UserService$ge2.info) === null || _Digit$UserService$ge3 === void 0 ? void 0 : _Digit$UserService$ge3.permanentCity) || tenantId;
  if (!tenantId && !(location !== null && location !== void 0 && (_location$state = location.state) !== null && _location$state !== void 0 && _location$state.fromSearchResults)) {
    history.replace("/digit-ui/citizen/login", {
      from: url
    });
  }
  let filters = {};
  const {
    mobileNumber
  } = ((_Digit$UserService$ge4 = Digit.UserService.getUser()) === null || _Digit$UserService$ge4 === void 0 ? void 0 : _Digit$UserService$ge4.info) || {};
  filters = {
    ...filters,
    searchType: "CONNECTION"
  };
  const params = {
    mobileNumber,
    ...filters
  };
  const Waterresult = Digit.Hooks.ws.useMyBillsWaterSearch({
    tenantId,
    filters: {
      ...params
    },
    BusinessService: "WS",
    t
  }, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  const Sewarageresult = Digit.Hooks.ws.useMyBillsSewarageSearch({
    tenantId,
    filters: {
      ...params
    },
    BusinessService: "SW",
    t
  }, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  if (Waterresult !== null && Waterresult !== void 0 && Waterresult.isLoading || Sewarageresult !== null && Sewarageresult !== void 0 && Sewarageresult.isLoading || Waterresult == undefined || Sewarageresult == undefined) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const onSubmit = data => {
    history.push("/digit-ui/citizen/payment/my-bills/" + (data === null || data === void 0 ? void 0 : data.ConsumerNumber.split("/")[0]) + "/" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.ConsumerNumber, "/", "+") + "?workflow=WNS&tenantId=" + tenantId + "&ConsumerName=" + (data === null || data === void 0 ? void 0 : data.ConsumerName));
  };
  let searchResults = Waterresult && Sewarageresult ? Waterresult.concat(Sewarageresult) : [];
  searchResults = (_searchResults = searchResults) === null || _searchResults === void 0 ? void 0 : _searchResults.filter(ob => (ob === null || ob === void 0 ? void 0 : ob.AmountDue) && (ob === null || ob === void 0 ? void 0 : ob.AmountDue) !== "0");
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, header && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    style: {
      marginLeft: 10,
      marginTop: 10
    }
  }, t(header), " (", (_searchResults2 = searchResults) === null || _searchResults2 === void 0 ? void 0 : _searchResults2.length, ")"), /*#__PURE__*/React__default.createElement(WSInfoLabel, {
    t: t
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ResponseComposer, {
    data: searchResults,
    template: template,
    actionButtonLabel: actionButtonLabel,
    onSubmit: onSubmit
  })), !((_searchResults3 = searchResults) !== null && _searchResults3 !== void 0 && _searchResults3.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      paddingLeft: "16px"
    }
  }, t("CS_BILLS_TEXT_NO_BILLS_FOUND")));
};
WNSMyBills.propTypes = {
  template: propTypes.any,
  header: propTypes.string,
  actionButtonLabel: propTypes.string
};
WNSMyBills.defaultProps = {
  template: [],
  header: null,
  actionButtonLabel: null
};

const BillSearchResults = () => {
  const {
    t
  } = reactI18next.useTranslation();
  const {
    path
  } = reactRouterDom.useRouteMatch();
  const params = React.useMemo(() => config$2.map(step => {
    const texts = {};
    for (const key in step.texts) {
      texts[key] = t(step.texts[key]);
    }
    return {
      ...step,
      texts
    };
  }, [config$2]));
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: "" + path,
    exact: true
  }, /*#__PURE__*/React__default.createElement(WNSMyBills, {
    template: params[0].labels,
    header: params[0].texts.header,
    actionButtonLabel: params[0].texts.actionButtonLabel,
    t: t
  })));
};

const ApplicationBillAmendment = () => {
  var _data$BillingService, _data$BillingService$, _data$BillingService2, _data$BillingService3, _state, _state$data, _state$data$applicati, _state$data$applicati2, _state$data$applicati3, _billSearchData, _billSearchData$filte, _billSearchData2, _state9, _state9$data, _errors$WS_REDUCED_AM, _errors$WS_ADDITIONAL, _billSearchData3, _errors$effectiveTill, _errors$effectiveTill2, _state14, _state14$data;
  const [showToast, setShowToast] = React.useState(null);
  const {
    t
  } = reactI18next.useTranslation();
  const {
    connectionNumber,
    tenantId,
    service,
    connectionType,
    isEdit
  } = Digit.Hooks.useQueryParams();
  const stateId = Digit.ULBService.getStateId();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const [error, setUploadError] = React.useState("");
  const [ischeckedReduce, setischeckedReduce] = React.useState(false);
  const [ischeckedAddition, setischeckedAddition] = React.useState(false);
  let isMobile = window.Digit.Utils.browser.isMobile();
  let isEmployee = window.location.href.includes("/employee");
  const {
    isLoading: BillAmendmentMDMSLoading,
    data: BillAmendmentMDMS
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSMDMSBillAmendment({
    tenantId: stateId
  });
  const servicev1 = connectionNumber.includes("WS") ? "WS" : "SW";
  const billSearchFilters = {
    tenantId,
    consumerCode: connectionNumber,
    service: servicev1
  };
  const {
    data: preBillSearchData,
    isLoading: isBillSearchLoading
  } = Digit.Hooks.usePaymentSearch(tenantId, billSearchFilters);
  const {
    data,
    isFetched
  } = Digit.Hooks.fsm.useMDMS(stateId, "DIGIT-UI", "WSTaxHeadMaster");
  const availableBillAmendmentTaxHeads = data === null || data === void 0 ? void 0 : (_data$BillingService = data.BillingService) === null || _data$BillingService === void 0 ? void 0 : (_data$BillingService$ = _data$BillingService.TaxHeadMaster) === null || _data$BillingService$ === void 0 ? void 0 : _data$BillingService$.filter(w => w.IsBillamend);
  let billSearchData = preBillSearchData === null || preBillSearchData === void 0 ? void 0 : preBillSearchData.filter(e => availableBillAmendmentTaxHeads === null || availableBillAmendmentTaxHeads === void 0 ? void 0 : availableBillAmendmentTaxHeads.find(taxHeadMaster => taxHeadMaster.code === e.taxHeadCode));
  const rebateAndPenaltyTaxHeads = data === null || data === void 0 ? void 0 : (_data$BillingService2 = data.BillingService) === null || _data$BillingService2 === void 0 ? void 0 : (_data$BillingService3 = _data$BillingService2.TaxHeadMaster) === null || _data$BillingService3 === void 0 ? void 0 : _data$BillingService3.filter(e => e.code.includes("ADHOC") && e.IsBillamend && e.service === servicev1);
  const {
    register,
    control,
    watch,
    setValue,
    unregister,
    handleSubmit,
    formState: {
      errors,
      ...rest
    },
    getValues,
    reset,
    ...methods
  } = reactHookForm.useForm({
    defaultValues: {
      ...((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : (_state$data$applicati = _state$data.applicationDetails) === null || _state$data$applicati === void 0 ? void 0 : (_state$data$applicati2 = _state$data$applicati.amendment) === null || _state$data$applicati2 === void 0 ? void 0 : (_state$data$applicati3 = _state$data$applicati2.additionalDetails) === null || _state$data$applicati3 === void 0 ? void 0 : _state$data$applicati3.editForm)
    }
  });
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    isSuccess,
    mutate
  } = Digit.Hooks.ws.useApplicationActionsBillAmendUpdate();
  const [goToAppDetailsPage, setGoToAppDetailsPage] = React.useState(false);
  const fromDateVal = watch("effectivefrom");
  const amendmentReason = watch("amendmentReason");
  const WS_REDUCED_AMOUNT = watch("WS_REDUCED_AMOUNT");
  const WS_ADDITIONAL_AMOUNT = watch("WS_ADDITIONAL_AMOUNT");
  const SW_REDUCED_AMOUNT = watch("SW_REDUCED_AMOUNT");
  const SW_ADDITIONAL_AMOUNT = watch("SW_ADDITIONAL_AMOUNT");
  const history = reactRouterDom.useHistory();
  const uploadFile = function (data, fname, props) {
    try {
      setUploadError("");
      return Promise.resolve(_finallyRethrows(function () {
        return _catch(function () {
          const _temp2 = function (_data$target, _data$target$files, _data$target$files$, _data$target2, _data$target2$files, _data$target2$files$) {
            if ((data === null || data === void 0 ? void 0 : (_data$target = data.target) === null || _data$target === void 0 ? void 0 : (_data$target$files = _data$target.files) === null || _data$target$files === void 0 ? void 0 : (_data$target$files$ = _data$target$files[0]) === null || _data$target$files$ === void 0 ? void 0 : _data$target$files$.size) < 5242880 && /(.*?)(jpg|jpeg|png|pdf)$/i.test(data === null || data === void 0 ? void 0 : (_data$target2 = data.target) === null || _data$target2 === void 0 ? void 0 : (_data$target2$files = _data$target2.files) === null || _data$target2$files === void 0 ? void 0 : (_data$target2$files$ = _data$target2$files[0]) === null || _data$target2$files$ === void 0 ? void 0 : _data$target2$files$.type)) {
              var _data$target3;
              dispatch({
                type: "addLoader",
                payload: {
                  id: fname
                }
              });
              return Promise.resolve(Digit.UploadServices.Filestorage("WS", data === null || data === void 0 ? void 0 : (_data$target3 = data.target) === null || _data$target3 === void 0 ? void 0 : _data$target3.files[0], tenantId)).then(function (response) {
                var _response$data, _response$data$files, _response$data$files$;
                const fileStoreId = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : (_response$data$files$ = _response$data$files[0]) === null || _response$data$files$ === void 0 ? void 0 : _response$data$files$.fileStoreId;
                const _temp = function () {
                  if (fileStoreId) {
                    return Promise.resolve(Digit.UploadServices.Filefetch([fileStoreId], tenantId)).then(function (_ref) {
                      var _urlResponse$fileStor, _urlResponse$fileStor2, _data$target4, _data$target4$files$;
                      let {
                        data: urlResponse
                      } = _ref;
                      const url = urlResponse === null || urlResponse === void 0 ? void 0 : (_urlResponse$fileStor = urlResponse.fileStoreIds) === null || _urlResponse$fileStor === void 0 ? void 0 : (_urlResponse$fileStor2 = _urlResponse$fileStor[0]) === null || _urlResponse$fileStor2 === void 0 ? void 0 : _urlResponse$fileStor2.url;
                      dispatch({
                        type: "upload",
                        payload: {
                          id: fname,
                          url
                        }
                      });
                      props.onChange({
                        id: fname,
                        url,
                        fileName: data === null || data === void 0 ? void 0 : (_data$target4 = data.target) === null || _data$target4 === void 0 ? void 0 : (_data$target4$files$ = _data$target4.files[0]) === null || _data$target4$files$ === void 0 ? void 0 : _data$target4$files$.name,
                        fileStoreId,
                        fileStore: fileStoreId
                      });
                    });
                  } else {
                    alert(t("CS_FILE_UPLOAD_ERROR"));
                  }
                }();
                if (_temp && _temp.then) return _temp.then(function () {});
              });
            } else {
              var _data$target5, _data$target5$files, _data$target5$files$;
              if ((data === null || data === void 0 ? void 0 : (_data$target5 = data.target) === null || _data$target5 === void 0 ? void 0 : (_data$target5$files = _data$target5.files) === null || _data$target5$files === void 0 ? void 0 : (_data$target5$files$ = _data$target5$files[0]) === null || _data$target5$files$ === void 0 ? void 0 : _data$target5$files$.size) > 5242880) {
                setUploadError({
                  message: "FILE_SIZE_EXCEEDED",
                  documentType: fname
                });
              } else setUploadError({
                message: "FILE_TYPE_MISMATCHED",
                documentType: fname
              });
            }
          }();
          if (_temp2 && _temp2.then) return _temp2.then(function () {});
        }, function () {});
      }, function (_wasThrown, _result) {
        dispatch({
          type: "removeLoader",
          payload: {
            id: fname
          }
        });
        if (_wasThrown) throw _result;
        return _result;
      }));
    } catch (e) {
      return Promise.reject(e);
    }
  };
  React.useEffect(() => dispatch({
    type: "updateAmendmentReason",
    payload: amendmentReason
  }), [amendmentReason]);
  function fileReducer(state, action) {
    var _action$payload, _action$payload$allow;
    switch (action.type) {
      case "upload":
        return state.map(e => e.documentType === action.payload.id ? {
          ...e,
          url: action.payload.url
        } : e);
      case "remove":
        return state.map(e => {
          let __e = e;
          if (e.documentType === action.payload.id) {
            delete __e.url;
            delete __e.loader;
          }
          return __e;
        });
      case "addLoader":
        return state.map(e => e.documentType === action.payload.id ? {
          ...e,
          loader: true
        } : e);
      case "removeLoader":
        return state.map(e => e.documentType === action.payload.id ? {
          ...e,
          loader: false
        } : e);
      case "updateAmendmentReason":
        return (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$allow = _action$payload.allowedDocuments) === null || _action$payload$allow === void 0 ? void 0 : _action$payload$allow.allowedDocs;
      default:
        return state;
    }
  }
  const functionToHandleFileUpload = function (data, fname, props) {
    return Promise.resolve(uploadFile(data, fname, props)).then(function () {});
  };
  const [requiredDocuments, dispatch] = React.useReducer(fileReducer, []);
  const setOtherTextFieldsAndActionToNull = key => {
    setValue(key, {
      VALUE: false
    });
  };
  const getDemandDetailsComparingUpdates = d => {
    var _d, _d2, _d3, _d4, _d$WS_REDUCED_AMOUNT, _d$SW_REDUCED_AMOUNT, _actionPerformed, _actionPerformedInArr;
    let actionPerformed;
    const action = (d === null || d === void 0 ? void 0 : (_d = d[servicev1 + "_REDUCED_AMOUNT"]) === null || _d === void 0 ? void 0 : _d.VALUE) !== undefined && d !== null && d !== void 0 && (_d2 = d[servicev1 + "_REDUCED_AMOUNT"]) !== null && _d2 !== void 0 && _d2.VALUE || (d === null || d === void 0 ? void 0 : (_d3 = d[servicev1 + "_ADDITIONAL_AMOUNT"]) === null || _d3 === void 0 ? void 0 : _d3.VALUE) !== undefined && !(d !== null && d !== void 0 && (_d4 = d[servicev1 + "_ADDITIONAL_AMOUNT"]) !== null && _d4 !== void 0 && _d4.VALUE) ? "rebate" : "penalty";
    if (servicev1 === "WS") actionPerformed = JSON.parse(JSON.stringify(d !== null && d !== void 0 && (_d$WS_REDUCED_AMOUNT = d.WS_REDUCED_AMOUNT) !== null && _d$WS_REDUCED_AMOUNT !== void 0 && _d$WS_REDUCED_AMOUNT.VALUE ? d === null || d === void 0 ? void 0 : d.WS_REDUCED_AMOUNT : d === null || d === void 0 ? void 0 : d.WS_ADDITIONAL_AMOUNT));else actionPerformed = JSON.parse(JSON.stringify(d !== null && d !== void 0 && (_d$SW_REDUCED_AMOUNT = d.SW_REDUCED_AMOUNT) !== null && _d$SW_REDUCED_AMOUNT !== void 0 && _d$SW_REDUCED_AMOUNT.VALUE ? d === null || d === void 0 ? void 0 : d.SW_REDUCED_AMOUNT : d === null || d === void 0 ? void 0 : d.SW_ADDITIONAL_AMOUNT));
    (_actionPerformed = actionPerformed) === null || _actionPerformed === void 0 ? true : delete _actionPerformed.VALUE;
    const actionPerformedInArray = Object.entries(actionPerformed);
    if (d !== null && d !== void 0 && d[servicev1 + "_REBATE"]) {
      actionPerformedInArray.push([servicev1 + "_TIME_ADHOC_REBATE", d === null || d === void 0 ? void 0 : d[servicev1 + "_REBATE"]]);
    } else if (d !== null && d !== void 0 && d[servicev1 + "_PENALTY"]) {
      actionPerformedInArray.push([servicev1 + "_TIME_ADHOC_PENALTY", d === null || d === void 0 ? void 0 : d[servicev1 + "_PENALTY"]]);
    }
    return (_actionPerformedInArr = actionPerformedInArray.filter(ob => (ob === null || ob === void 0 ? void 0 : ob[1]) !== "")) === null || _actionPerformedInArr === void 0 ? void 0 : _actionPerformedInArr.map(e => {
      var _billSearchData$find;
      const preUpdateDataAmount = (_billSearchData$find = billSearchData.find(a => a.taxHeadCode === e[0])) === null || _billSearchData$find === void 0 ? void 0 : _billSearchData$find.amount;
      return {
        taxHeadMasterCode: e[0],
        taxAmount: e[1] ? action !== "penalty" ? -parseInt(e[1]) : parseInt(e[1]) : 0
      };
    });
  };
  const getTotalDetailsOfUpdatedData = d => {
    var _d5, _d$WS_REDUCED_AMOUNT2, _d$SW_REDUCED_AMOUNT2, _actionPerformed2;
    const action = d !== null && d !== void 0 && (_d5 = d[servicev1 + "_REDUCED_AMOUNT"]) !== null && _d5 !== void 0 && _d5.VALUE ? "REBATE" : "PENALTY";
    const originalDemand = {};
    billSearchData.map(el => {
      originalDemand[el.taxHeadCode] = el.amount;
    });
    let actionPerformed;
    if (servicev1 === "WS") actionPerformed = JSON.parse(JSON.stringify(d !== null && d !== void 0 && (_d$WS_REDUCED_AMOUNT2 = d.WS_REDUCED_AMOUNT) !== null && _d$WS_REDUCED_AMOUNT2 !== void 0 && _d$WS_REDUCED_AMOUNT2.VALUE ? d === null || d === void 0 ? void 0 : d.WS_REDUCED_AMOUNT : d === null || d === void 0 ? void 0 : d.WS_ADDITIONAL_AMOUNT));else actionPerformed = JSON.parse(JSON.stringify(d !== null && d !== void 0 && (_d$SW_REDUCED_AMOUNT2 = d.SW_REDUCED_AMOUNT) !== null && _d$SW_REDUCED_AMOUNT2 !== void 0 && _d$SW_REDUCED_AMOUNT2.VALUE ? d === null || d === void 0 ? void 0 : d.SW_REDUCED_AMOUNT : d === null || d === void 0 ? void 0 : d.SW_ADDITIONAL_AMOUNT));
    (_actionPerformed2 = actionPerformed) === null || _actionPerformed2 === void 0 ? true : delete _actionPerformed2.VALUE;
    actionPerformed[servicev1 + "_" + action] = d !== null && d !== void 0 && d[servicev1 + "_" + action] ? d === null || d === void 0 ? void 0 : d[servicev1 + "_" + action] : 0;
    return {
      ...actionPerformed,
      actionPerformed,
      TOTAL: Object.values(actionPerformed).reduce((a, b) => parseInt(a) + parseInt(b), 0),
      originalDemand,
      action
    };
  };
  const closeToast = () => {
    setShowToast(null);
  };
  React.useEffect(() => {
    const timer = setTimeout(() => {
      var _state3;
      if (goToAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber=" + ((_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.data.applicationDetails.amendment.amendmentId);
    }, 5000);
    return () => clearTimeout(timer);
  }, [goToAppDetailsPage]);
  const onFormSubmit = d => {
    var _state4, _state4$data;
    const data = {
      Amendment: {
        consumerCode: connectionNumber,
        tenantId,
        businessService: servicev1,
        amendmentReason: amendmentReason === null || amendmentReason === void 0 ? void 0 : amendmentReason.code,
        reasonDocumentNumber: d === null || d === void 0 ? void 0 : d.reasonDocumentNumber,
        effectiveFrom: new Date(d === null || d === void 0 ? void 0 : d.effectiveFrom).getTime(),
        effectiveTill: new Date(d === null || d === void 0 ? void 0 : d.effectiveTill).getTime(),
        documents: Object.values(d === null || d === void 0 ? void 0 : d.DOCUMENTS).map(e => {
          const res = {
            ...e,
            documentType: e === null || e === void 0 ? void 0 : e.id,
            fileUrl: e === null || e === void 0 ? void 0 : e.url
          };
          delete res.id;
          delete res.url;
          return res;
        }),
        demandDetails: getDemandDetailsComparingUpdates(d),
        additionalDetails: {
          searchBillDetails: getTotalDetailsOfUpdatedData(d),
          editForm: d
        }
      }
    };
    if (((_state4 = state) === null || _state4 === void 0 ? void 0 : (_state4$data = _state4.data) === null || _state4$data === void 0 ? void 0 : _state4$data.action) === "RE-SUBMIT-APPLICATION") {
      var _state5, _state5$data, _state5$data$applicat, _state5$data$applicat2, _state6, _state6$data, _state6$data$applicat, _state6$data$applicat2, _state7, _state7$data, _state7$data$applicat, _state7$data$applicat2, _state8, _state8$data, _state8$data$applicat, _state8$data$applicat2;
      const workflow = {
        businessId: (_state5 = state) === null || _state5 === void 0 ? void 0 : (_state5$data = _state5.data) === null || _state5$data === void 0 ? void 0 : (_state5$data$applicat = _state5$data.applicationDetails) === null || _state5$data$applicat === void 0 ? void 0 : (_state5$data$applicat2 = _state5$data$applicat.amendment) === null || _state5$data$applicat2 === void 0 ? void 0 : _state5$data$applicat2.amendmentId,
        action: "RE-SUBMIT",
        tenantId: tenantId,
        businessService: ((_state6 = state) === null || _state6 === void 0 ? void 0 : (_state6$data = _state6.data) === null || _state6$data === void 0 ? void 0 : (_state6$data$applicat = _state6$data.applicationDetails) === null || _state6$data$applicat === void 0 ? void 0 : (_state6$data$applicat2 = _state6$data$applicat.applicationData) === null || _state6$data$applicat2 === void 0 ? void 0 : _state6$data$applicat2.serviceType) === "WATER" ? "WS.AMENDMENT" : "SW.AMENDMENT",
        moduleName: ((_state7 = state) === null || _state7 === void 0 ? void 0 : (_state7$data = _state7.data) === null || _state7$data === void 0 ? void 0 : (_state7$data$applicat = _state7$data.applicationDetails) === null || _state7$data$applicat === void 0 ? void 0 : (_state7$data$applicat2 = _state7$data$applicat.applicationData) === null || _state7$data$applicat2 === void 0 ? void 0 : _state7$data$applicat2.serviceType) === "WATER" ? "WS" : "SW"
      };
      const AmendmentUpdate = {
        ...((_state8 = state) === null || _state8 === void 0 ? void 0 : (_state8$data = _state8.data) === null || _state8$data === void 0 ? void 0 : (_state8$data$applicat = _state8$data.applicationDetails) === null || _state8$data$applicat === void 0 ? void 0 : (_state8$data$applicat2 = _state8$data$applicat.applicationData) === null || _state8$data$applicat2 === void 0 ? void 0 : _state8$data$applicat2.billAmendmentDetails),
        workflow,
        ...(data === null || data === void 0 ? void 0 : data.Amendment)
      };
      mutate({
        AmendmentUpdate
      }, {
        onError: (error, variables) => {
          setShowToast({
            key: "error",
            error,
            label: t("CS_WATER_UPDATE_APPLICATION_FAILED")
          });
          setTimeout(closeToast, 5000);
        },
        onSuccess: (data, variables) => {
          var _data$Amendments;
          if ((data === null || data === void 0 ? void 0 : (_data$Amendments = data.Amendments) === null || _data$Amendments === void 0 ? void 0 : _data$Amendments.length) > 0) {
            var _variables$AmendmentU, _variables$AmendmentU2;
            if (variables !== null && variables !== void 0 && (_variables$AmendmentU = variables.AmendmentUpdate) !== null && _variables$AmendmentU !== void 0 && (_variables$AmendmentU2 = _variables$AmendmentU.workflow) !== null && _variables$AmendmentU2 !== void 0 && _variables$AmendmentU2.action.includes("RE-SUBMIT")) {
              setShowToast({
                key: "success",
                label: t("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")
              });
            }
            setGoToAppDetailsPage(true);
            return;
          }
        }
      });
      return;
    }
    history.push("/digit-ui/employee/ws/response", data);
  };
  const isValidToDate = enteredValue => {
    const enteredTs = new Date(enteredValue).getTime();
    const fromDate = fromDateVal ? new Date(fromDateVal).getTime() : new Date().getTime();
    return enteredTs > fromDate ? true : "Invalid format";
  };
  function getReasonDocNoHeader() {
    if ((amendmentReason === null || amendmentReason === void 0 ? void 0 : amendmentReason.code) === "COURT_CASE_SETTLEMENT") return "WS_COURT_ORDER_NO";else if ((amendmentReason === null || amendmentReason === void 0 ? void 0 : amendmentReason.code) === "ARREAR_WRITE_OFF" || (amendmentReason === null || amendmentReason === void 0 ? void 0 : amendmentReason.code) === "ONE_TIME_SETTLEMENT") return "WS_GOVERNMENT_NOTIFICATION_NUMBER";else return "WS_DOCUMENT_NO";
  }
  let adhocAmount = 0;
  (_billSearchData = billSearchData) === null || _billSearchData === void 0 ? void 0 : (_billSearchData$filte = _billSearchData.filter(ob => {
    var _ob$taxHeadCode;
    return ob === null || ob === void 0 ? void 0 : (_ob$taxHeadCode = ob.taxHeadCode) === null || _ob$taxHeadCode === void 0 ? void 0 : _ob$taxHeadCode.includes("ADHOC");
  })) === null || _billSearchData$filte === void 0 ? void 0 : _billSearchData$filte.map(ob => {
    adhocAmount = adhocAmount + (ob === null || ob === void 0 ? void 0 : ob.amount);
  });
  billSearchData = (_billSearchData2 = billSearchData) === null || _billSearchData2 === void 0 ? void 0 : _billSearchData2.filter(ob => {
    var _ob$taxHeadCode2;
    return !(ob !== null && ob !== void 0 && (_ob$taxHeadCode2 = ob.taxHeadCode) !== null && _ob$taxHeadCode2 !== void 0 && _ob$taxHeadCode2.includes("ADHOC"));
  });
  return /*#__PURE__*/React__default.createElement("form", {
    onSubmit: handleSubmit(onFormSubmit)
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, (_state9 = state) !== null && _state9 !== void 0 && (_state9$data = _state9.data) !== null && _state9$data !== void 0 && _state9$data.action ? t("WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL") : t("WS_BILL_AMENDMENT_BUTTON"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      marginBottom: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "500"
    }
  }, t("WS_ACKNO_CONNECTION_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      marginBottom: "0px"
    }
  }, connectionNumber)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px"
    }
  }, t("WS_ADJUSTMENT_AMOUNT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionSubText, {
    style: {
      marginBottom: "16px"
    }
  }, t("WS_ADJUSTMENT_AMOUNT_ADDITION_TEXT")), !isBillSearchLoading ? /*#__PURE__*/React__default.createElement("table", {
    cellPadding: "8px",
    cellSpacing: "10px"
  }, /*#__PURE__*/React__default.createElement("div", {
    style: isMobile && isEmployee ? {
      overflow: "scroll",
      maxWidth: "50%"
    } : {}
  }, /*#__PURE__*/React__default.createElement("tbody", null, /*#__PURE__*/React__default.createElement("tr", {
    style: {
      textAlign: "left"
    }
  }, /*#__PURE__*/React__default.createElement("th", null, t("WS_TAX_HEADS")), /*#__PURE__*/React__default.createElement("th", {
    style: {
      textAlign: "right"
    }
  }, t("WS_CURRENT_AMOUNT")), /*#__PURE__*/React__default.createElement("th", {
    style: {
      paddingLeft: "150px"
    }
  }, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: servicev1 + "_REDUCED_AMOUNT.VALUE",
    key: servicev1 + "_REDUCED_AMOUNT.VALUE",
    control: control,
    rules: {
      validate: value => {
        return !!value || (servicev1 === "WS" ? !!(WS_ADDITIONAL_AMOUNT !== null && WS_ADDITIONAL_AMOUNT !== void 0 && WS_ADDITIONAL_AMOUNT.VALUE) : !!(SW_ADDITIONAL_AMOUNT !== null && SW_ADDITIONAL_AMOUNT !== void 0 && SW_ADDITIONAL_AMOUNT.VALUE));
      }
    },
    render: props => {
      var _state10, _state10$data, _state10$data$applica, _state10$data$applica2, _state10$data$applica3, _state10$data$applica4, _state10$data$applica5, _state11, _state11$data, _state11$data$applica, _state11$data$applica2, _state11$data$applica3, _state11$data$applica4, _state11$data$applica5;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          paddingTop: "20px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
        style: {
          "marginLeft": "35px"
        },
        label: t(servicev1 + "_REDUCED_AMOUNT"),
        onChange: e => {
          if (e.target.checked) {
            props.onChange(true);
            setischeckedReduce(true);
            setischeckedAddition(false);
            setOtherTextFieldsAndActionToNull(servicev1 + "_ADDITIONAL_AMOUNT");
          } else {
            setischeckedReduce(false);
            props.onChange(false);
          }
        },
        disable: isEdit && (((_state10 = state) === null || _state10 === void 0 ? void 0 : (_state10$data = _state10.data) === null || _state10$data === void 0 ? void 0 : (_state10$data$applica = _state10$data.applicationDetails) === null || _state10$data$applica === void 0 ? void 0 : (_state10$data$applica2 = _state10$data$applica.amendment) === null || _state10$data$applica2 === void 0 ? void 0 : (_state10$data$applica3 = _state10$data$applica2.additionalDetails) === null || _state10$data$applica3 === void 0 ? void 0 : (_state10$data$applica4 = _state10$data$applica3.editForm) === null || _state10$data$applica4 === void 0 ? void 0 : (_state10$data$applica5 = _state10$data$applica4["WS_REDUCED_AMOUNT"]) === null || _state10$data$applica5 === void 0 ? void 0 : _state10$data$applica5["VALUE"]) == false || ((_state11 = state) === null || _state11 === void 0 ? void 0 : (_state11$data = _state11.data) === null || _state11$data === void 0 ? void 0 : (_state11$data$applica = _state11$data.applicationDetails) === null || _state11$data$applica === void 0 ? void 0 : (_state11$data$applica2 = _state11$data$applica.amendment) === null || _state11$data$applica2 === void 0 ? void 0 : (_state11$data$applica3 = _state11$data$applica2.additionalDetails) === null || _state11$data$applica3 === void 0 ? void 0 : (_state11$data$applica4 = _state11$data$applica3.editForm) === null || _state11$data$applica4 === void 0 ? void 0 : (_state11$data$applica5 = _state11$data$applica4["SW_REDUCED_AMOUNT"]) === null || _state11$data$applica5 === void 0 ? void 0 : _state11$data$applica5["VALUE"]) == false) ? true : false,
        checked: props === null || props === void 0 ? void 0 : props.value
      }));
    }
  }), errors !== null && errors !== void 0 && (_errors$WS_REDUCED_AM = errors.WS_REDUCED_AMOUNT) !== null && _errors$WS_REDUCED_AM !== void 0 && _errors$WS_REDUCED_AM.VALUE && ischeckedReduce == true ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, t("WS_REQUIRED_FIELD")) : null)), /*#__PURE__*/React__default.createElement("th", null, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: servicev1 + "_ADDITIONAL_AMOUNT.VALUE",
    key: servicev1 + "_ADDITIONAL_AMOUNT.VALUE",
    control: control,
    rules: {
      validate: value => {
        return !!value || (servicev1 === "WS" ? !!(WS_REDUCED_AMOUNT !== null && WS_REDUCED_AMOUNT !== void 0 && WS_REDUCED_AMOUNT.VALUE) : !!(SW_REDUCED_AMOUNT !== null && SW_REDUCED_AMOUNT !== void 0 && SW_REDUCED_AMOUNT.VALUE));
      }
    },
    render: props => {
      var _state12, _state12$data, _state12$data$applica, _state12$data$applica2, _state12$data$applica3, _state12$data$applica4, _state12$data$applica5, _state13, _state13$data, _state13$data$applica, _state13$data$applica2, _state13$data$applica3, _state13$data$applica4, _state13$data$applica5;
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          paddingTop: "17px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
        style: {
          "marginLeft": "35px"
        },
        label: t(servicev1 + "_ADDITIONAL_AMOUNT"),
        onChange: e => {
          if (e.target.checked) {
            props.onChange(true);
            setischeckedAddition(true);
            setischeckedReduce(false);
            setOtherTextFieldsAndActionToNull(servicev1 + "_REDUCED_AMOUNT");
          } else {
            setischeckedAddition(false);
            props.onChange(false);
          }
        },
        disable: isEdit && (((_state12 = state) === null || _state12 === void 0 ? void 0 : (_state12$data = _state12.data) === null || _state12$data === void 0 ? void 0 : (_state12$data$applica = _state12$data.applicationDetails) === null || _state12$data$applica === void 0 ? void 0 : (_state12$data$applica2 = _state12$data$applica.amendment) === null || _state12$data$applica2 === void 0 ? void 0 : (_state12$data$applica3 = _state12$data$applica2.additionalDetails) === null || _state12$data$applica3 === void 0 ? void 0 : (_state12$data$applica4 = _state12$data$applica3.editForm) === null || _state12$data$applica4 === void 0 ? void 0 : (_state12$data$applica5 = _state12$data$applica4["WS_ADDITIONAL_AMOUNT"]) === null || _state12$data$applica5 === void 0 ? void 0 : _state12$data$applica5["VALUE"]) == false || ((_state13 = state) === null || _state13 === void 0 ? void 0 : (_state13$data = _state13.data) === null || _state13$data === void 0 ? void 0 : (_state13$data$applica = _state13$data.applicationDetails) === null || _state13$data$applica === void 0 ? void 0 : (_state13$data$applica2 = _state13$data$applica.amendment) === null || _state13$data$applica2 === void 0 ? void 0 : (_state13$data$applica3 = _state13$data$applica2.additionalDetails) === null || _state13$data$applica3 === void 0 ? void 0 : (_state13$data$applica4 = _state13$data$applica3.editForm) === null || _state13$data$applica4 === void 0 ? void 0 : (_state13$data$applica5 = _state13$data$applica4["WS_ADDITIONAL_AMOUNT"]) === null || _state13$data$applica5 === void 0 ? void 0 : _state13$data$applica5["VALUE"]) == false) ? true : false,
        checked: props === null || props === void 0 ? void 0 : props.value
      }));
    }
  }), errors !== null && errors !== void 0 && (_errors$WS_ADDITIONAL = errors.WS_ADDITIONAL_AMOUNT) !== null && _errors$WS_ADDITIONAL !== void 0 && _errors$WS_ADDITIONAL.VALUE && ischeckedAddition == true ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, t("WS_REQUIRED_FIELD")) : null))), (_billSearchData3 = billSearchData) === null || _billSearchData3 === void 0 ? void 0 : _billSearchData3.map(node => {
    var _errors$WS_REDUCED_AM2, _errors$WS_REDUCED_AM3, _errors$WS_REDUCED_AM4, _errors$SW_REDUCED_AM, _errors$SW_REDUCED_AM2, _errors$WS_ADDITIONAL2, _errors$WS_ADDITIONAL3, _errors$WS_ADDITIONAL4, _errors$SW_ADDITIONAL, _errors$SW_ADDITIONAL2, _errors$SW_ADDITIONAL3;
    return /*#__PURE__*/React__default.createElement("tr", null, /*#__PURE__*/React__default.createElement("td", {
      style: {
        paddingRight: "60px",
        fontWeight: "700"
      }
    }, t("" + node.taxHeadCode)), /*#__PURE__*/React__default.createElement("td", {
      style: {
        textAlign: "end"
      }
    }, "\u20B9 ", node.amount), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("td", {
      style: {
        paddingRight: "60px",
        paddingLeft: "150px"
      }
    }, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      disabled: servicev1 === "WS" ? !(WS_REDUCED_AMOUNT !== null && WS_REDUCED_AMOUNT !== void 0 && WS_REDUCED_AMOUNT.VALUE) : !(SW_REDUCED_AMOUNT !== null && SW_REDUCED_AMOUNT !== void 0 && SW_REDUCED_AMOUNT.VALUE),
      type: "number",
      name: servicev1 + "_REDUCED_AMOUNT." + node.taxHeadCode,
      inputRef: register({
        max: {
          value: node.amount,
          message: t(servicev1 + "_ERROR_ENTER_LESS_THAN_MAX_VALUE")
        },
        pattern: {
          value: /^[+]?[1-9]\d*$/,
          message: t("CS_INVALID_INPUT")
        }
      })
    }))), servicev1 === "WS" ? (errors === null || errors === void 0 ? void 0 : (_errors$WS_REDUCED_AM2 = errors.WS_REDUCED_AMOUNT) === null || _errors$WS_REDUCED_AM2 === void 0 ? void 0 : _errors$WS_REDUCED_AM2[node.taxHeadCode]) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
      style: {
        marginBottom: "-20px",
        marginTop: "-30px",
        marginLeft: "150px"
      }
    }, errors === null || errors === void 0 ? void 0 : (_errors$WS_REDUCED_AM3 = errors.WS_REDUCED_AMOUNT) === null || _errors$WS_REDUCED_AM3 === void 0 ? void 0 : (_errors$WS_REDUCED_AM4 = _errors$WS_REDUCED_AM3[node.taxHeadCode]) === null || _errors$WS_REDUCED_AM4 === void 0 ? void 0 : _errors$WS_REDUCED_AM4.message) : (errors === null || errors === void 0 ? void 0 : (_errors$SW_REDUCED_AM = errors.SW_REDUCED_AMOUNT) === null || _errors$SW_REDUCED_AM === void 0 ? void 0 : _errors$SW_REDUCED_AM[node.taxHeadCode]) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
      style: {
        marginBottom: "-20px",
        marginTop: "-30px",
        marginLeft: "150px"
      }
    }, errors === null || errors === void 0 ? void 0 : (_errors$SW_REDUCED_AM2 = errors.SW_REDUCED_AMOUNT) === null || _errors$SW_REDUCED_AM2 === void 0 ? void 0 : _errors$SW_REDUCED_AM2[node.taxHeadCode].message)), /*#__PURE__*/React__default.createElement("td", {
      style: {
        paddingRight: "60px"
      }
    }, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      disabled: servicev1 === "WS" ? !(WS_ADDITIONAL_AMOUNT !== null && WS_ADDITIONAL_AMOUNT !== void 0 && WS_ADDITIONAL_AMOUNT.VALUE) : !(SW_ADDITIONAL_AMOUNT !== null && SW_ADDITIONAL_AMOUNT !== void 0 && SW_ADDITIONAL_AMOUNT.VALUE),
      type: "number",
      name: servicev1 + "_ADDITIONAL_AMOUNT." + node.taxHeadCode,
      inputRef: register({
        pattern: {
          value: /^[+]?[1-9]\d*$/,
          message: t("CS_INVALID_INPUT")
        }
      })
    })), servicev1 === "WS" ? (errors === null || errors === void 0 ? void 0 : (_errors$WS_ADDITIONAL2 = errors.WS_ADDITIONAL_AMOUNT) === null || _errors$WS_ADDITIONAL2 === void 0 ? void 0 : _errors$WS_ADDITIONAL2[node.taxHeadCode]) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
      style: {
        marginTop: "-19px"
      }
    }, errors === null || errors === void 0 ? void 0 : (_errors$WS_ADDITIONAL3 = errors.WS_ADDITIONAL_AMOUNT) === null || _errors$WS_ADDITIONAL3 === void 0 ? void 0 : (_errors$WS_ADDITIONAL4 = _errors$WS_ADDITIONAL3[node.taxHeadCode]) === null || _errors$WS_ADDITIONAL4 === void 0 ? void 0 : _errors$WS_ADDITIONAL4.message) : (errors === null || errors === void 0 ? void 0 : (_errors$SW_ADDITIONAL = errors.SW_ADDITIONAL_AMOUNT) === null || _errors$SW_ADDITIONAL === void 0 ? void 0 : _errors$SW_ADDITIONAL[node.taxHeadCode]) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
      style: {
        marginTop: "-19px"
      }
    }, errors === null || errors === void 0 ? void 0 : (_errors$SW_ADDITIONAL2 = errors.SW_ADDITIONAL_AMOUNT) === null || _errors$SW_ADDITIONAL2 === void 0 ? void 0 : (_errors$SW_ADDITIONAL3 = _errors$SW_ADDITIONAL2[node.taxHeadCode]) === null || _errors$SW_ADDITIONAL3 === void 0 ? void 0 : _errors$SW_ADDITIONAL3.message)));
  }), /*#__PURE__*/React__default.createElement("tr", null, /*#__PURE__*/React__default.createElement("td", {
    style: {
      paddingRight: "60px",
      fontWeight: "700"
    }
  }, t("WS_REBATE_PENALTY"), /*#__PURE__*/React__default.createElement("div", {
    className: "tooltip",
    style: {
      marginLeft: "10px",
      marginBottom: "-4px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoBannerIcon, {
    fill: "#0b0c0c",
    style: true
  }), /*#__PURE__*/React__default.createElement("span", {
    className: "tooltiptext",
    style: {
      whiteSpace: "nowrap",
      fontSize: "medium"
    }
  }, "1. " + t("WS_ADHOC_REBATE_TOOLTIP"), /*#__PURE__*/React__default.createElement("br", null), /*#__PURE__*/React__default.createElement("br", null), "2. " + t("WS_ADHOC_PENALTY_TOOLTIP")))), /*#__PURE__*/React__default.createElement("td", {
    style: {
      textAlign: "end"
    }
  }, "\u20B9 ", adhocAmount || 0), /*#__PURE__*/React__default.createElement("td", {
    style: {
      paddingRight: "60px",
      paddingLeft: "150px"
    }
  }, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    disabled: servicev1 === "WS" ? !(WS_REDUCED_AMOUNT !== null && WS_REDUCED_AMOUNT !== void 0 && WS_REDUCED_AMOUNT.VALUE) : !(SW_REDUCED_AMOUNT !== null && SW_REDUCED_AMOUNT !== void 0 && SW_REDUCED_AMOUNT.VALUE),
    name: servicev1 + "_REBATE",
    inputRef: register()
  }))), /*#__PURE__*/React__default.createElement("td", {
    style: {
      paddingRight: "60px"
    }
  }, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    disabled: servicev1 === "WS" ? !(WS_ADDITIONAL_AMOUNT !== null && WS_ADDITIONAL_AMOUNT !== void 0 && WS_ADDITIONAL_AMOUNT.VALUE) : !(SW_ADDITIONAL_AMOUNT !== null && SW_ADDITIONAL_AMOUNT !== void 0 && SW_ADDITIONAL_AMOUNT.VALUE),
    name: servicev1 + "_PENALTY",
    inputRef: register()
  }))))))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), BillAmendmentMDMSLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px"
    }
  }, t("WS_ADD_DEMAND_REVISION_BASIS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionSubText, {
    style: {
      marginBottom: "16px"
    }
  }, t("WS_SELECT_DEMAND_REVISION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "500"
    }
  }, t("WS_DEMAND_REVISION_BASIS") + " *"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "amendmentReason",
    control: control,
    rules: {
      required: true
    },
    render: props => {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        style: isMobile && isEmployee ? {} : {
          width: "640px"
        },
        option: BillAmendmentMDMS,
        selected: props === null || props === void 0 ? void 0 : props.value,
        optionKey: "code",
        t: t,
        select: props === null || props === void 0 ? void 0 : props.onChange
      });
    }
  })), errors !== null && errors !== void 0 && errors.amendmentReason ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: {
      width: "70%",
      marginLeft: "30%",
      fontSize: "12px",
      marginTop: "-21px"
    }
  }, t("WS_REQUIRED_FIELD")) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "500"
    }
  }, t(getReasonDocNoHeader()) + " *"), /*#__PURE__*/React__default.createElement("div", {
    className: "reasonDocumentNumber"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    style: isMobile && isEmployee ? {} : {
      width: "640px"
    },
    name: "reasonDocumentNumber",
    inputRef: register({
      required: true
    })
  }))), errors !== null && errors !== void 0 && errors.reasonDocumentNumber ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: {
      width: "70%",
      marginLeft: "30%",
      fontSize: "12px",
      marginTop: "-21px"
    }
  }, t("WS_REQUIRED_FIELD")) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "500"
    }
  }, t("WS_BILL_AMEND_EFFECTIVE_FROM") + " *"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      style: isMobile && isEmployee ? {} : {
        width: "640px"
      },
      date: props.value,
      disabled: false,
      onChange: props.onChange
    }),
    name: "effectiveFrom",
    rules: {
      required: true
    },
    control: control
  })), errors !== null && errors !== void 0 && errors.effectiveFrom ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: {
      width: "70%",
      marginLeft: "30%",
      fontSize: "12px",
      marginTop: "-21px"
    }
  }, t("WS_REQUIRED_FIELD")) : null, (amendmentReason === null || amendmentReason === void 0 ? void 0 : amendmentReason.code) !== "COURT_CASE_SETTLEMENT" && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      fontWeight: "500"
    }
  }, t("WS_BILL_AMEND_EFFECTIVE_TILL") + " *"), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
      style: isMobile && isEmployee ? {} : {
        width: "640px"
      },
      date: props.value,
      disabled: false,
      onChange: props.onChange
    }),
    name: "effectiveTill",
    rules: {
      required: true,
      validate: {
        isValidToDate
      }
    },
    control: control
  })), (errors === null || errors === void 0 ? void 0 : (_errors$effectiveTill = errors.effectiveTill) === null || _errors$effectiveTill === void 0 ? void 0 : _errors$effectiveTill.type) === "required" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: {
      width: "70%",
      marginLeft: "30%",
      fontSize: "12px",
      marginTop: "-21px"
    }
  }, t("WS_REQUIRED_FIELD")), (errors === null || errors === void 0 ? void 0 : (_errors$effectiveTill2 = errors.effectiveTill) === null || _errors$effectiveTill2 === void 0 ? void 0 : _errors$effectiveTill2.message) === "Invalid format" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
    style: {
      width: "70%",
      marginLeft: "30%",
      fontSize: "12px",
      marginTop: "-21px"
    }
  }, t("ERR_DEFAULT_INPUT_FIELD_MSG")))), !!amendmentReason ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px"
    }
  }, t("WS_DOCUMENT_REQUIRED")) : null, requiredDocuments === null || requiredDocuments === void 0 ? void 0 : requiredDocuments.map(e => {
    var _errors$DOCUMENTS;
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginBottom: "25px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        fontWeight: "500"
      }
    }, t("" + (e === null || e === void 0 ? void 0 : e.documentType)), e !== null && e !== void 0 && e.required ? "*" : null), /*#__PURE__*/React__default.createElement("div", {
      className: "field"
    }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "DOCUMENTS." + (e === null || e === void 0 ? void 0 : e.documentType),
      control: control,
      rules: e !== null && e !== void 0 && e.required ? {
        required: true
      } : {},
      render: props => /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
        id: "ws-doc-" + e.documentType,
        onUpload: d => functionToHandleFileUpload(d, e === null || e === void 0 ? void 0 : e.documentType, props),
        onDelete: () => dispatch({
          type: "remove",
          payload: {
            id: e === null || e === void 0 ? void 0 : e.documentType
          }
        }),
        style: isMobile && isEmployee ? {} : {
          width: "640px"
        },
        message: e !== null && e !== void 0 && e.url ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
        accept: "image/*, .pdf, .png, .jpeg, .jpg",
        textStyles: {
          width: "100%"
        },
        inputStyles: {
          width: "280px"
        },
        error: error === null || error === void 0 ? void 0 : error.message
      })
    }))), errors !== null && errors !== void 0 && (_errors$DOCUMENTS = errors["DOCUMENTS"]) !== null && _errors$DOCUMENTS !== void 0 && _errors$DOCUMENTS[e === null || e === void 0 ? void 0 : e.documentType] || error && (error === null || error === void 0 ? void 0 : error.documentType) === e.documentType ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, {
      style: {
        width: "70%",
        marginLeft: "30%",
        fontSize: "12px"
      }
    }, error && (error === null || error === void 0 ? void 0 : error.documentType) === e.documentType ? t(error === null || error === void 0 ? void 0 : error.message) : t("WS_NO_FILE_SELECTED")) : null);
  })), showToast ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    isDleteBtn: true,
    error: showToast === null || showToast === void 0 ? void 0 : showToast.error,
    label: showToast === null || showToast === void 0 ? void 0 : showToast.label,
    onClose: closeToast
  }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    submit: true,
    label: (_state14 = state) !== null && _state14 !== void 0 && (_state14$data = _state14.data) !== null && _state14$data !== void 0 && _state14$data.action ? t("WF_CITIZEN_NEWSW1_RESUBMIT_APPLICATION") : t("WS_COMMON_BUTTON_SUBMIT"),
    disabled: servicev1 == "WS" && ischeckedReduce && (getValues().WS_REDUCED_AMOUNT.WS_CHARGE == "" || getValues().WS_REDUCED_AMOUNT.WS_CHARGE == null) && (getValues().WS_REDUCED_AMOUNT.WS_TIME_PENALTY == "" || getValues().WS_REDUCED_AMOUNT.WS_TIME_PENALTY == null) && (getValues().WS_REDUCED_AMOUNT.WS_TIME_INTEREST == "" || getValues().WS_REDUCED_AMOUNT.WS_TIME_INTEREST == null) && (getValues().WS_REDUCED_AMOUNT.WS_WATER_CESS == "" || getValues().WS_REDUCED_AMOUNT.WS_WATER_CESS == null) || servicev1 == "SW" && ischeckedReduce && (getValues().SW_REDUCED_AMOUNT.SW_CHARGE == "" || getValues().SW_REDUCED_AMOUNT.SW_CHARGE == null) && (getValues().SW_REDUCED_AMOUNT.SW_TIME_PENALTY == "" || getValues().SW_REDUCED_AMOUNT.SW_TIME_PENALTY == null) && (getValues().SW_REDUCED_AMOUNT.SW_TIME_INTEREST == "" || getValues().SW_REDUCED_AMOUNT.SW_TIME_INTEREST == null) && (getValues().SW_REDUCED_AMOUNT.SW_SEWERAGE_CESS == "" || getValues().SW_REDUCED_AMOUNT.SW_SEWERAGE_CESS == null) || servicev1 == "WS" && ischeckedAddition && (getValues().WS_ADDITIONAL_AMOUNT.WS_CHARGE == "" || getValues().WS_ADDITIONAL_AMOUNT.WS_CHARGE == null) && (getValues().WS_ADDITIONAL_AMOUNT.WS_TIME_PENALTY == "" || getValues().WS_ADDITIONAL_AMOUNT.WS_TIME_PENALTY == null) && (getValues().WS_ADDITIONAL_AMOUNT.WS_TIME_INTEREST == "" || getValues().WS_ADDITIONAL_AMOUNT.WS_TIME_INTEREST == null) && (getValues().WS_ADDITIONAL_AMOUNT.WS_WATER_CESS == "" || getValues().WS_ADDITIONAL_AMOUNT.WS_WATER_CESS == null) || servicev1 == "SW" && ischeckedAddition && (getValues().SW_ADDITIONAL_AMOUNT.SW_CHARGE == "" || getValues().SW_ADDITIONAL_AMOUNT.SW_CHARGE == null) && (getValues().SW_ADDITIONAL_AMOUNT.SW_TIME_PENALTY == "" || getValues().SW_ADDITIONAL_AMOUNT.SW_TIME_PENALTY == null) && (getValues().SW_ADDITIONAL_AMOUNT.SW_TIME_INTEREST == "" || getValues().SW_ADDITIONAL_AMOUNT.SW_TIME_INTEREST == null) && (getValues().SW_ADDITIONAL_AMOUNT.SW_SEWERAGE_CESS == "" || getValues().SW_ADDITIONAL_AMOUNT.SW_SEWERAGE_CESS == null)
  })));
};

const RequiredDocuments = _ref => {
  let {
    path
  } = _ref;
  const {
    search
  } = reactRouterDom.useLocation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const history = reactRouterDom.useHistory();
  const {
    t
  } = reactI18next.useTranslation();
  const stateId = Digit.ULBService.getStateId();
  const fullPageRef = React.useRef();
  const {
    isLoading: BillAmendmentMDMSLoading,
    data: BillAmendmentMDMS
  } = Digit.Hooks.ws.WSSearchMdmsTypes.useWSMDMSBillAmendment({
    tenantId: stateId
  });
  const redirectToBillAmdmentPage = () => {
    var _state;
    history.push(path + "/bill-amendment" + search, JSON.stringify({
      data: (_state = state) === null || _state === void 0 ? void 0 : _state.data
    }));
  };
  const handlePrint = () => Digit.Download.PDF(fullPageRef, t("ES_COMMON_WS_DOCUMENTS_REQUIRED"));
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    ref: fullPageRef
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "options"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_WS_DOCUMENTS_REQUIRED")), /*#__PURE__*/React__default.createElement("div", {
    className: "mrsm",
    style: {
      marginRight: "35px"
    },
    onClick: handlePrint
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.DownloadIcon, {
    className: "mrsm"
  }), t("ES_WS_REQUIRED_DOCS_DOWNLOAD"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      position: "relative"
    },
    className: "employeeCard-override"
  }, BillAmendmentMDMSLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : BillAmendmentMDMS === null || BillAmendmentMDMS === void 0 ? void 0 : BillAmendmentMDMS.map(e => {
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t(e.code).replaceAll("_", " ")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("WS_DOCS_REQ_INFO")), e.allowedDocuments.allowedDocs.map((e, i) => /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelDesc, null, i + 1, ". ", t("" + e.documentType))));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_COMMON_BUTTON_APPLY"),
    onSubmit: () => redirectToBillAmdmentPage()
  })));
};

const NewApplication = () => {
  var _Digit$SessionStorage;
  const {
    t
  } = reactI18next.useTranslation();
  const {
    state
  } = reactRouterDom.useLocation();
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appDetails, setAppDetails] = React.useState({});
  const [waterAndSewerageBoth, setWaterAndSewerageBoth] = React.useState(null);
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(stateId, {});
  const [propertyId, setPropertyId] = React.useState(new URLSearchParams(reactRouterDom.useLocation().search).get("propertyId"));
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const {
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId,
    enabled: propertyId && propertyId != "" ? true : false
  });
  React.useEffect(() => {
    if (!isLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.hideInCitizen && conf.isCreate);
      config.head = "WS_APP_FOR_WATER_AND_SEWERAGE_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isCreateConnection) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    var _sessionFormData$cpt, _sessionFormData$cpt$, _sessionFormData$cpt2, _sessionFormData$cpt3;
    !propertyId && (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt = sessionFormData.cpt) === null || _sessionFormData$cpt === void 0 ? void 0 : (_sessionFormData$cpt$ = _sessionFormData$cpt.details) === null || _sessionFormData$cpt$ === void 0 ? void 0 : _sessionFormData$cpt$.propertyId) && setPropertyId(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt2 = sessionFormData.cpt) === null || _sessionFormData$cpt2 === void 0 ? void 0 : (_sessionFormData$cpt3 = _sessionFormData$cpt2.details) === null || _sessionFormData$cpt3 === void 0 ? void 0 : _sessionFormData$cpt3.propertyId);
  }, [sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    var _propertyDetails$Prop;
    setSessionFormData({
      ...sessionFormData,
      cpt: {
        details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop[0]
      }
    });
  }, [propertyDetails]);
  const {
    isLoading: creatingWaterApplicationLoading,
    isError: createWaterApplicationError,
    data: createWaterResponse,
    error: createWaterError,
    mutate: waterMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("WATER");
  const {
    isLoading: updatingWaterApplicationLoading,
    isError: updateWaterApplicationError,
    data: updateWaterResponse,
    error: updateWaterError,
    mutate: waterUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("WATER");
  const {
    isLoading: creatingSewerageApplicationLoading,
    isError: createSewerageApplicationError,
    data: createSewerageResponse,
    error: createSewerageError,
    mutate: sewerageMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE");
  const {
    isLoading: updatingSewerageApplicationLoading,
    isError: updateSewerageApplicationError,
    data: updateSewerageResponse,
    error: updateSewerageError,
    mutate: sewerageUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");
  const onFormValueChange = (setValue, formData, formState) => {
    var _formState$errors, _formState$errors$Con, _Object$keys, _formState$errors2, _formState$errors2$Co;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
      sessionStorage.setItem("FORMSTATE_ERRORS", JSON.stringify(formState === null || formState === void 0 ? void 0 : formState.errors));
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState !== null && formState !== void 0 && (_formState$errors = formState.errors) !== null && _formState$errors !== void 0 && (_formState$errors$Con = _formState$errors["ConnectionHolderDetails"]) !== null && _formState$errors$Con !== void 0 && _formState$errors$Con.type && ((_Object$keys = Object.keys(formState === null || formState === void 0 ? void 0 : (_formState$errors2 = formState.errors) === null || _formState$errors2 === void 0 ? void 0 : (_formState$errors2$Co = _formState$errors2["ConnectionHolderDetails"]) === null || _formState$errors2$Co === void 0 ? void 0 : _formState$errors2$Co.type)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) == 1 && formState.errors["ConnectionHolderDetails"] && Object.values(formState.errors["ConnectionHolderDetails"].type).filter(ob => {
      var _ob$ref;
      return ob.type === "required" && (ob === null || ob === void 0 ? void 0 : (_ob$ref = ob.ref) === null || _ob$ref === void 0 ? void 0 : _ob$ref.value) !== "";
    }).length > 0) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const closeToastOfError = () => {
    setShowToast(null);
  };
  const onSubmit = function (data) {
    try {
      var _data$cpt, _propertyDetails$Prop2;
      if (!(data !== null && data !== void 0 && (_data$cpt = data.cpt) !== null && _data$cpt !== void 0 && _data$cpt.id) && !(propertyDetails !== null && propertyDetails !== void 0 && (_propertyDetails$Prop2 = propertyDetails.Properties) !== null && _propertyDetails$Prop2 !== void 0 && _propertyDetails$Prop2[0])) {
        var _data$cpt2;
        if (!(data !== null && data !== void 0 && (_data$cpt2 = data.cpt) !== null && _data$cpt2 !== void 0 && _data$cpt2.details) || !propertyDetails) {
          setShowToast({
            key: "error",
            message: "ERR_INVALID_PROPERTY_ID"
          });
          return Promise.resolve();
        }
      }
      const errors = sessionStorage.getItem("FORMSTATE_ERRORS");
      const formStateErros = typeof errors == "string" ? JSON.parse(errors) : {};
      return Promise.resolve(function (_formStateErros$Conne, _Object$keys2, _formStateErros$Conne2) {
        if (Object.keys(formStateErros).length > 0 && !(Object.keys(formStateErros).length == 1 && formStateErros !== null && formStateErros !== void 0 && (_formStateErros$Conne = formStateErros["ConnectionHolderDetails"]) !== null && _formStateErros$Conne !== void 0 && _formStateErros$Conne.type && ((_Object$keys2 = Object.keys(formStateErros === null || formStateErros === void 0 ? void 0 : (_formStateErros$Conne2 = formStateErros["ConnectionHolderDetails"]) === null || _formStateErros$Conne2 === void 0 ? void 0 : _formStateErros$Conne2.type)) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) == 1 && formStateErros["ConnectionHolderDetails"] && Object.values(formStateErros["ConnectionHolderDetails"].type).filter(ob => {
          var _ob$ref2;
          return ob.type === "required" && (ob === null || ob === void 0 ? void 0 : (_ob$ref2 = ob.ref) === null || _ob$ref2 === void 0 ? void 0 : _ob$ref2.value) !== "";
        }).length > 0)) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
        } else {
          var _data$cpt3;
          if (!(data !== null && data !== void 0 && (_data$cpt3 = data.cpt) !== null && _data$cpt3 !== void 0 && _data$cpt3.details)) {
            var _propertyDetails$Prop3;
            data.cpt = {
              details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop3 = propertyDetails.Properties) === null || _propertyDetails$Prop3 === void 0 ? void 0 : _propertyDetails$Prop3[0]
            };
          }
          const allDetails = cloneDeep_1(data);
          return Promise.resolve(createPayloadOfWS(data)).then(function (payload) {
            let waterAndSewerageLoader = false,
              waterLoader = false,
              sewerageLoader = false;
            if (payload !== null && payload !== void 0 && payload.water && payload !== null && payload !== void 0 && payload.sewerage) waterAndSewerageLoader = true;
            if (payload !== null && payload !== void 0 && payload.water && !(payload !== null && payload !== void 0 && payload.sewerage)) waterLoader = true;
            if (!(payload !== null && payload !== void 0 && payload.water) && payload !== null && payload !== void 0 && payload.sewerage) sewerageLoader = true;
            let waterConnection = {
              WaterConnection: payload
            };
            let sewerageConnection = {
              SewerageConnection: payload
            };
            if (waterAndSewerageLoader) {
              setWaterAndSewerageBoth(true);
              sessionStorage.setItem("setWaterAndSewerageBoth", JSON.stringify(true));
            } else {
              sessionStorage.setItem("setWaterAndSewerageBoth", JSON.stringify(false));
            }
            const _temp6 = function () {
              if (payload !== null && payload !== void 0 && payload.water && payload !== null && payload !== void 0 && payload.sewerage) {
                const _temp = function () {
                  if (waterMutation && sewerageMutation) {
                    setIsEnableLoader(true);
                    return Promise.resolve(waterMutation(waterConnection, {
                      onError: (error, variables) => {
                        var _error$response, _error$response$data, _error$response$data$, _error$response2, _error$response2$data, _error$response2$data2;
                        setIsEnableLoader(false);
                        setShowToast({
                          key: "error",
                          message: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors) !== null && _error$response$data$ !== void 0 && _error$response$data$[0].message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2[0].message : error
                        });
                        setTimeout(closeToastOfError, 5000);
                      },
                      onSuccess: function (waterData, variables) {
                        try {
                          var _waterData$WaterConne;
                          return Promise.resolve(updatePayloadOfWS(waterData === null || waterData === void 0 ? void 0 : (_waterData$WaterConne = waterData.WaterConnection) === null || _waterData$WaterConne === void 0 ? void 0 : _waterData$WaterConne[0], "WATER")).then(function (response) {
                            let waterConnectionUpdate = {
                              WaterConnection: response
                            };
                            waterUpdateMutation(waterConnectionUpdate, {
                              onError: (error, variables) => {
                                var _error$response3, _error$response3$data, _error$response3$data2, _error$response4, _error$response4$data, _error$response4$data2;
                                setIsEnableLoader(false);
                                setShowToast({
                                  key: "error",
                                  message: error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && (_error$response3$data2 = _error$response3$data.Errors) !== null && _error$response3$data2 !== void 0 && _error$response3$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : (_error$response4$data2 = _error$response4$data.Errors) === null || _error$response4$data2 === void 0 ? void 0 : _error$response4$data2[0].message : error
                                });
                                setTimeout(closeToastOfError, 5000);
                              },
                              onSuccess: function (waterUpdateData, variables) {
                                try {
                                  var _waterUpdateData$Wate;
                                  setAppDetails({
                                    ...appDetails,
                                    waterConnection: waterUpdateData === null || waterUpdateData === void 0 ? void 0 : (_waterUpdateData$Wate = waterUpdateData.WaterConnection) === null || _waterUpdateData$Wate === void 0 ? void 0 : _waterUpdateData$Wate[0]
                                  });
                                  return Promise.resolve(sewerageMutation(sewerageConnection, {
                                    onError: (error, variables) => {
                                      var _error$response5, _error$response5$data, _error$response5$data2, _error$response6, _error$response6$data, _error$response6$data2;
                                      setIsEnableLoader(false);
                                      setShowToast({
                                        key: "error",
                                        message: error !== null && error !== void 0 && (_error$response5 = error.response) !== null && _error$response5 !== void 0 && (_error$response5$data = _error$response5.data) !== null && _error$response5$data !== void 0 && (_error$response5$data2 = _error$response5$data.Errors) !== null && _error$response5$data2 !== void 0 && _error$response5$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : (_error$response6$data2 = _error$response6$data.Errors) === null || _error$response6$data2 === void 0 ? void 0 : _error$response6$data2[0].message : error
                                      });
                                      setTimeout(closeToastOfError, 5000);
                                    },
                                    onSuccess: function (sewerageData, variables) {
                                      try {
                                        var _sewerageData$Sewerag;
                                        return Promise.resolve(updatePayloadOfWS(sewerageData === null || sewerageData === void 0 ? void 0 : (_sewerageData$Sewerag = sewerageData.SewerageConnections) === null || _sewerageData$Sewerag === void 0 ? void 0 : _sewerageData$Sewerag[0], "SEWERAGE")).then(function (response) {
                                          let sewerageConnectionUpdate = {
                                            SewerageConnection: response
                                          };
                                          return Promise.resolve(sewerageUpdateMutation(sewerageConnectionUpdate, {
                                            onError: (error, variables) => {
                                              var _error$response7, _error$response7$data, _error$response7$data2, _error$response8, _error$response8$data, _error$response8$data2;
                                              setIsEnableLoader(false);
                                              setShowToast({
                                                key: "error",
                                                message: error !== null && error !== void 0 && (_error$response7 = error.response) !== null && _error$response7 !== void 0 && (_error$response7$data = _error$response7.data) !== null && _error$response7$data !== void 0 && (_error$response7$data2 = _error$response7$data.Errors) !== null && _error$response7$data2 !== void 0 && _error$response7$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : (_error$response8$data2 = _error$response8$data.Errors) === null || _error$response8$data2 === void 0 ? void 0 : _error$response8$data2[0].message : error
                                              });
                                              setTimeout(closeToastOfError, 5000);
                                            },
                                            onSuccess: function (sewerageUpdateData, variables) {
                                              try {
                                                var _sewerageUpdateData$S, _waterUpdateData$Wate2, _waterUpdateData$Wate3, _sewerageUpdateData$S2, _sewerageUpdateData$S3;
                                                setAppDetails({
                                                  ...appDetails,
                                                  sewerageConnection: sewerageUpdateData === null || sewerageUpdateData === void 0 ? void 0 : (_sewerageUpdateData$S = sewerageUpdateData.SewerageConnections) === null || _sewerageUpdateData$S === void 0 ? void 0 : _sewerageUpdateData$S[0]
                                                });
                                                clearSessionFormData();
                                                history.push("/digit-ui/employee/ws/ws-response?applicationNumber=" + (waterUpdateData === null || waterUpdateData === void 0 ? void 0 : (_waterUpdateData$Wate2 = waterUpdateData.WaterConnection) === null || _waterUpdateData$Wate2 === void 0 ? void 0 : (_waterUpdateData$Wate3 = _waterUpdateData$Wate2[0]) === null || _waterUpdateData$Wate3 === void 0 ? void 0 : _waterUpdateData$Wate3.applicationNo) + "&applicationNumber1=" + (sewerageUpdateData === null || sewerageUpdateData === void 0 ? void 0 : (_sewerageUpdateData$S2 = sewerageUpdateData.SewerageConnections) === null || _sewerageUpdateData$S2 === void 0 ? void 0 : (_sewerageUpdateData$S3 = _sewerageUpdateData$S2[0]) === null || _sewerageUpdateData$S3 === void 0 ? void 0 : _sewerageUpdateData$S3.applicationNo));
                                                return Promise.resolve();
                                              } catch (e) {
                                                return Promise.reject(e);
                                              }
                                            }
                                          })).then(function () {});
                                        });
                                      } catch (e) {
                                        return Promise.reject(e);
                                      }
                                    }
                                  })).then(function () {});
                                } catch (e) {
                                  return Promise.reject(e);
                                }
                              }
                            });
                          });
                        } catch (e) {
                          return Promise.reject(e);
                        }
                      }
                    })).then(function () {});
                  }
                }();
                if (_temp && _temp.then) return _temp.then(function () {});
              } else {
                const _temp5 = function () {
                  if (payload !== null && payload !== void 0 && payload.water && !(payload !== null && payload !== void 0 && payload.sewerage)) {
                    const _temp2 = function () {
                      if (waterMutation) {
                        setIsEnableLoader(true);
                        return Promise.resolve(waterMutation(waterConnection, {
                          onError: (error, variables) => {
                            var _error$response9, _error$response9$data, _error$response9$data2, _error$response10, _error$response10$dat, _error$response10$dat2;
                            setIsEnableLoader(false);
                            setShowToast({
                              key: "error",
                              message: error !== null && error !== void 0 && (_error$response9 = error.response) !== null && _error$response9 !== void 0 && (_error$response9$data = _error$response9.data) !== null && _error$response9$data !== void 0 && (_error$response9$data2 = _error$response9$data.Errors) !== null && _error$response9$data2 !== void 0 && _error$response9$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response10 = error.response) === null || _error$response10 === void 0 ? void 0 : (_error$response10$dat = _error$response10.data) === null || _error$response10$dat === void 0 ? void 0 : (_error$response10$dat2 = _error$response10$dat.Errors) === null || _error$response10$dat2 === void 0 ? void 0 : _error$response10$dat2[0].message : error
                            });
                            setTimeout(closeToastOfError, 5000);
                          },
                          onSuccess: function (data, variables) {
                            try {
                              var _data$WaterConnection;
                              return Promise.resolve(updatePayloadOfWS(data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection[0], "WATER")).then(function (response) {
                                let waterConnectionUpdate = {
                                  WaterConnection: response
                                };
                                waterUpdateMutation(waterConnectionUpdate, {
                                  onError: (error, variables) => {
                                    var _error$response11, _error$response11$dat, _error$response11$dat2, _error$response12, _error$response12$dat, _error$response12$dat2;
                                    setIsEnableLoader(false);
                                    setShowToast({
                                      key: "error",
                                      message: error !== null && error !== void 0 && (_error$response11 = error.response) !== null && _error$response11 !== void 0 && (_error$response11$dat = _error$response11.data) !== null && _error$response11$dat !== void 0 && (_error$response11$dat2 = _error$response11$dat.Errors) !== null && _error$response11$dat2 !== void 0 && _error$response11$dat2[0].message ? error === null || error === void 0 ? void 0 : (_error$response12 = error.response) === null || _error$response12 === void 0 ? void 0 : (_error$response12$dat = _error$response12.data) === null || _error$response12$dat === void 0 ? void 0 : (_error$response12$dat2 = _error$response12$dat.Errors) === null || _error$response12$dat2 === void 0 ? void 0 : _error$response12$dat2[0].message : error
                                    });
                                    setTimeout(closeToastOfError, 5000);
                                  },
                                  onSuccess: (data, variables) => {
                                    var _data$WaterConnection2, _data$WaterConnection3, _data$WaterConnection4;
                                    setAppDetails({
                                      ...appDetails,
                                      waterConnection: data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : _data$WaterConnection2[0]
                                    });
                                    clearSessionFormData();
                                    history.push("/digit-ui/employee/ws/ws-response?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$WaterConnection3 = data.WaterConnection) === null || _data$WaterConnection3 === void 0 ? void 0 : (_data$WaterConnection4 = _data$WaterConnection3[0]) === null || _data$WaterConnection4 === void 0 ? void 0 : _data$WaterConnection4.applicationNo));
                                  }
                                });
                              });
                            } catch (e) {
                              return Promise.reject(e);
                            }
                          }
                        })).then(function () {});
                      }
                    }();
                    if (_temp2 && _temp2.then) return _temp2.then(function () {});
                  } else {
                    const _temp4 = function () {
                      if (payload !== null && payload !== void 0 && payload.sewerage && !(payload !== null && payload !== void 0 && payload.water)) {
                        const _temp3 = function () {
                          if (sewerageMutation) {
                            setIsEnableLoader(true);
                            return Promise.resolve(sewerageMutation(sewerageConnection, {
                              onError: (error, variables) => {
                                var _error$response13, _error$response13$dat, _error$response13$dat2, _error$response14, _error$response14$dat, _error$response14$dat2;
                                setIsEnableLoader(false);
                                setShowToast({
                                  key: "error",
                                  message: error !== null && error !== void 0 && (_error$response13 = error.response) !== null && _error$response13 !== void 0 && (_error$response13$dat = _error$response13.data) !== null && _error$response13$dat !== void 0 && (_error$response13$dat2 = _error$response13$dat.Errors) !== null && _error$response13$dat2 !== void 0 && _error$response13$dat2[0].message ? error === null || error === void 0 ? void 0 : (_error$response14 = error.response) === null || _error$response14 === void 0 ? void 0 : (_error$response14$dat = _error$response14.data) === null || _error$response14$dat === void 0 ? void 0 : (_error$response14$dat2 = _error$response14$dat.Errors) === null || _error$response14$dat2 === void 0 ? void 0 : _error$response14$dat2[0].message : error
                                });
                                setTimeout(closeToastOfError, 5000);
                              },
                              onSuccess: function (data, variables) {
                                try {
                                  var _data$SewerageConnect;
                                  return Promise.resolve(updatePayloadOfWS(data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : _data$SewerageConnect[0], "SEWERAGE")).then(function (response) {
                                    let sewerageConnectionUpdate = {
                                      SewerageConnection: response
                                    };
                                    return Promise.resolve(sewerageUpdateMutation(sewerageConnectionUpdate, {
                                      onError: (error, variables) => {
                                        var _error$response15, _error$response15$dat, _error$response15$dat2, _error$response16, _error$response16$dat, _error$response16$dat2;
                                        setIsEnableLoader(false);
                                        setShowToast({
                                          key: "error",
                                          message: error !== null && error !== void 0 && (_error$response15 = error.response) !== null && _error$response15 !== void 0 && (_error$response15$dat = _error$response15.data) !== null && _error$response15$dat !== void 0 && (_error$response15$dat2 = _error$response15$dat.Errors) !== null && _error$response15$dat2 !== void 0 && _error$response15$dat2[0].message ? error === null || error === void 0 ? void 0 : (_error$response16 = error.response) === null || _error$response16 === void 0 ? void 0 : (_error$response16$dat = _error$response16.data) === null || _error$response16$dat === void 0 ? void 0 : (_error$response16$dat2 = _error$response16$dat.Errors) === null || _error$response16$dat2 === void 0 ? void 0 : _error$response16$dat2[0].message : error
                                        });
                                        setTimeout(closeToastOfError, 5000);
                                      },
                                      onSuccess: (data, variables) => {
                                        var _data$SewerageConnect2, _data$SewerageConnect3, _data$SewerageConnect4;
                                        setAppDetails({
                                          ...appDetails,
                                          sewerageConnection: data === null || data === void 0 ? void 0 : (_data$SewerageConnect2 = data.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : _data$SewerageConnect2[0]
                                        });
                                        clearSessionFormData();
                                        history.push("/digit-ui/employee/ws/ws-response?applicationNumber1=" + (data === null || data === void 0 ? void 0 : (_data$SewerageConnect3 = data.SewerageConnections) === null || _data$SewerageConnect3 === void 0 ? void 0 : (_data$SewerageConnect4 = _data$SewerageConnect3[0]) === null || _data$SewerageConnect4 === void 0 ? void 0 : _data$SewerageConnect4.applicationNo));
                                      }
                                    })).then(function () {});
                                  });
                                } catch (e) {
                                  return Promise.reject(e);
                                }
                              }
                            })).then(function () {});
                          }
                        }();
                        if (_temp3 && _temp3.then) return _temp3.then(function () {});
                      }
                    }();
                    if (_temp4 && _temp4.then) return _temp4.then(function () {});
                  }
                }();
                if (_temp5 && _temp5.then) return _temp5.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          });
        }
      }());
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  if (isEnableLoader || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    isDleteBtn: true,
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    onClose: closeToast,
    isWarning: showToast === null || showToast === void 0 ? void 0 : showToast.isWarning
  }));
};

const configPTApproverApplication = _ref => {
  var _action$assigneeRoles;
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService
  } = _ref;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "ES_PT_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: action.isTerminateState || (action === null || action === void 0 ? void 0 : action.action) === "SENDBACKTOCITIZEN" ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || (action === null || action === void 0 ? void 0 : action.action) === "SENDBACKTOCITIZEN" ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("ES_PT_ACTION_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("ES_PT_ATTACH_FILE") + (action.docUploadRequired ? " *" : ""),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          showHint: true,
          hintText: t("PT_ATTACH_RESTRICTIONS_SIZE"),
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("ES_PT_ACTION_NO_FILEUPLOADED")
        })
      }]
    }]
  };
};

const configPTAssessProperty = _ref => {
  let {
    t,
    action,
    financialYears,
    selectedFinancialYear,
    setSelectedFinancialYear
  } = _ref;
  return {
    label: {
      heading: "WF_" + action.action + "_APPLICATION",
      submit: "WF_PT.CREATE_" + action.action,
      cancel: "ES_PT_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: t("ES_PT_FINANCIAL_YEARS"),
        isMandatory: true,
        type: "radio",
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          options: financialYears,
          optionsKey: "name",
          onSelect: setSelectedFinancialYear,
          selectedOption: selectedFinancialYear
        })
      }]
    }]
  };
};

const configTLApproverApplication = _ref => {
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService
  } = _ref;
  let checkCondtions = true;
  if ((action === null || action === void 0 ? void 0 : action.action) == "SENDBACKTOCITIZEN" || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "WF_EMPLOYEE_NEWTL_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED")
        })
      }]
    }]
  };
};

const configBPAREGApproverApplication = _ref => {
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService,
    error
  } = _ref;
  let checkCondtions = true;
  if ((action === null || action === void 0 ? void 0 : action.action) == "SENDBACKTOCITIZEN") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "WF_EMPLOYEE_BPAREG_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

const configBPAApproverApplication = _ref => {
  var _action$assigneeRoles;
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService,
    error
  } = _ref;
  let isRejectOrRevocate = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT" || action.action == "SKIP_PAYMENT" || (action === null || action === void 0 ? void 0 : action.action) == "SEND_BACK_TO_CITIZEN" || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE") {
    isRejectOrRevocate = true;
  }
  let isCommentRequired = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT") {
    isCommentRequired = true;
  }
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "BPA_CITIZEN_CANCEL_BUTTON"
    },
    form: [{
      body: [{
        label: action.isTerminateState || isRejectOrRevocate ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || isRejectOrRevocate ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        isMandatory: isCommentRequired,
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("WF_APPROVAL_UPLOAD_HEAD"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

const configNOCApproverApplication = _ref => {
  var _action$assigneeRoles;
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService,
    error
  } = _ref;
  let isCommentRequired = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT") {
    isCommentRequired = true;
  }
  let isRejectOrRevocate = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "APPROVE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT" || action.action == "AUTO_APPROVE" || action.action == "AUTO_REJECT") {
    isRejectOrRevocate = true;
  }
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "CORE_LOGOUTPOPUP_CANCEL"
    },
    form: [{
      body: [{
        label: action.isTerminateState || isRejectOrRevocate ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || isRejectOrRevocate ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        isMandatory: isCommentRequired,
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("WF_APPROVAL_UPLOAD_HEAD"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          showHint: true,
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

const configWSApproverApplication = _ref => {
  var _action$action;
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService,
    error
  } = _ref;
  let checkCondtions = true;
  if (action !== null && action !== void 0 && (_action$action = action.action) !== null && _action$action !== void 0 && _action$action.includes("SEND_BACK") || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE_FOR_CONNECTION") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "CS_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          accept: ".jpg,.pdf,.png,.jpeg",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          error: error,
          iserror: error,
          showHintBelow: true,
          hintText: "WS_HINT_TEXT_LABEL"
        })
      }]
    }]
  };
};

const configWSDisConnectApplication = _ref => {
  var _action$action;
  let {
    t,
    action,
    approvers,
    selectedApprover,
    setSelectedApprover,
    selectFile,
    uploadedFile,
    setUploadedFile,
    assigneeLabel,
    businessService,
    error
  } = _ref;
  let checkCondtions = true,
    isDatePickerDisplay = false;
  if (action !== null && action !== void 0 && (_action$action = action.action) !== null && _action$action !== void 0 && _action$action.includes("SEND_BACK") || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE_FOR_DISCONNECTION" || (action === null || action === void 0 ? void 0 : action.action) == "RESUBMIT_APPLICATION") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "EXECUTE_DISCONNECTION" || (action === null || action === void 0 ? void 0 : action.action) == "DISCONNECTION_EXECUTED") isDatePickerDisplay = true;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "CS_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, isDatePickerDisplay && {
        label: t("ES_FSM_ACTION_SERVICE_DATE"),
        isMandatory: isDatePickerDisplay ? true : false,
        type: "custom",
        populators: isDatePickerDisplay ? {
          name: "date",
          validation: {
            required: true
          },
          defaultValue: Digit.Utils.date.getDate(),
          component: (props, customProps) => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, _extends({
            onChange: props.onChange,
            date: props.value
          }, customProps))
        } : null
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          accept: ".jpg,.pdf,.png,.jpeg",
          onUpload: selectFile,
          onDelete: () => {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          error: error,
          iserror: error,
          showHintBelow: true,
          hintText: "WS_HINT_TEXT_LABEL"
        })
      }]
    }]
  };
};

const Heading = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    className: "heading-m"
  }, props.label);
};
const Close = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close, null));
};
const ActionModal = _ref => {
  var _action$assigneeRoles, _action$assigneeRoles2;
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationData,
    businessService,
    moduleCode
  } = _ref;
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, e => ({
      code: e
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const {
    isLoading: financialYearsLoading,
    data: financialYearsData
  } = Digit.Hooks.pt.useMDMS(tenantId, businessService, "FINANCIAL_YEARLS", {}, {
    details: {
      tenantId: Digit.ULBService.getStateId(),
      moduleDetails: [{
        moduleName: "egf-master",
        masterDetails: [{
          name: "FinancialYear",
          filter: "[?(@.module == 'PT')]"
        }]
      }]
    }
  });
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState(null);
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [financialYears, setFinancialYears] = React.useState([]);
  const [selectedFinancialYear, setSelectedFinancialYear] = React.useState(null);
  const [disableActionSubmit, setDisableActionSubmit] = React.useState(false);
  React.useEffect(() => {
    if (financialYearsData && financialYearsData["egf-master"]) {
      var _financialYearsData$e;
      setFinancialYears((_financialYearsData$e = financialYearsData["egf-master"]) === null || _financialYearsData$e === void 0 ? void 0 : _financialYearsData$e["FinancialYear"]);
    }
  }, [financialYearsData]);
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp = _catch(function () {
                  return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    if (!(action !== null && action !== void 0 && action.showFinancialYearsModal)) {
      let workflow = {
        action: action === null || action === void 0 ? void 0 : action.action,
        comment: data === null || data === void 0 ? void 0 : data.comments,
        businessService,
        moduleName: moduleCode
      };
      workflow["assignes"] = action !== null && action !== void 0 && action.isTerminateState || !selectedApprover ? [] : [selectedApprover];
      if (uploadedFile) workflow["documents"] = [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }];
      submitAction({
        Property: {
          ...applicationData,
          workflow
        }
      });
    } else {
      submitAction({
        customFunctionToExecute: action === null || action === void 0 ? void 0 : action.customFunctionToExecute,
        Assessment: {
          financialYear: selectedFinancialYear === null || selectedFinancialYear === void 0 ? void 0 : selectedFinancialYear.name,
          propertyId: applicationData === null || applicationData === void 0 ? void 0 : applicationData.propertyId,
          tenantId,
          source: applicationData === null || applicationData === void 0 ? void 0 : applicationData.source,
          channel: applicationData === null || applicationData === void 0 ? void 0 : applicationData.channel,
          assessmentDate: Date.now()
        }
      });
    }
  }
  React.useEffect(() => {
    if (action) {
      if (action !== null && action !== void 0 && action.showFinancialYearsModal) {
        setConfig(configPTAssessProperty({
          t,
          action,
          financialYears,
          selectedFinancialYear,
          setSelectedFinancialYear
        }));
      } else {
        setConfig(configPTApproverApplication({
          t,
          action,
          approvers,
          selectedApprover,
          setSelectedApprover,
          selectFile,
          uploadedFile,
          setUploadedFile,
          businessService
        }));
      }
    }
  }, [action, approvers, financialYears, selectedFinancialYear, uploadedFile]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    isDisabled: !action.showFinancialYearsModal ? PTALoading || (action === null || action === void 0 ? void 0 : action.docUploadRequired) && !uploadedFile : !selectedFinancialYear,
    formId: "modal-action"
  }, financialYearsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const Heading$1 = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    className: "heading-m"
  }, props.label);
};
const Close$1 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$1 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$1, null));
};
const ActionModal$1 = _ref => {
  var _action$assigneeRoles, _action$assigneeRoles2;
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationData,
    businessService,
    moduleCode
  } = _ref;
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, e => ({
      code: e
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const {
    isLoading: financialYearsLoading,
    data: financialYearsData
  } = Digit.Hooks.pt.useMDMS(tenantId, businessService, "FINANCIAL_YEARLS", {}, {
    details: {
      tenantId: Digit.ULBService.getStateId(),
      moduleDetails: [{
        moduleName: "egf-master",
        masterDetails: [{
          name: "FinancialYear",
          filter: "[?(@.module == 'TL')]"
        }]
      }]
    }
  });
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState({});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [financialYears, setFinancialYears] = React.useState([]);
  const [selectedFinancialYear, setSelectedFinancialYear] = React.useState(null);
  React.useEffect(() => {
    if (financialYearsData && financialYearsData["egf-master"]) {
      var _financialYearsData$e;
      setFinancialYears((_financialYearsData$e = financialYearsData["egf-master"]) === null || _financialYearsData$e === void 0 ? void 0 : _financialYearsData$e["FinancialYear"]);
    }
  }, [financialYearsData]);
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp3 = function () {
          if (file) {
            const _temp2 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp = _catch(function () {
                  return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp && _temp.then) return _temp.then(function () {});
              }
            }();
            if (_temp2 && _temp2.then) return _temp2.then(function () {});
          }
        }();
        return _temp3 && _temp3.then ? _temp3.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    applicationData = {
      ...applicationData,
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: data === null || data === void 0 ? void 0 : data.comments,
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null
    };
    submitAction({
      Licenses: [applicationData]
    });
  }
  React.useEffect(() => {
    if (action) {
      setConfig(configTLApproverApplication({
        t,
        action,
        approvers,
        selectedApprover,
        setSelectedApprover,
        selectFile,
        uploadedFile,
        setUploadedFile,
        businessService
      }));
    }
  }, [action, approvers, financialYears, selectedFinancialYear, uploadedFile]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$1, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$1, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action"
  }, financialYearsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const Heading$2 = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
const Close$2 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$2 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$2, null));
};
const ActionModal$2 = _ref => {
  var _action$assigneeRoles, _action$assigneeRoles2;
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationData,
    businessService,
    moduleCode
  } = _ref;
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, e => ({
      code: e
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState({});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const mobileView = Digit.Utils.browser.isMobile() ? true : false;
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("OBPS", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    applicationData = {
      ...applicationData,
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: data === null || data === void 0 ? void 0 : data.comments,
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null
    };
    submitAction({
      Licenses: [applicationData]
    }, false, {
      isStakeholder: true,
      bpa: false
    });
  }
  React.useEffect(() => {
    if (action) {
      setConfig(configBPAREGApproverApplication({
        t,
        action,
        approvers,
        selectedApprover,
        setSelectedApprover,
        selectFile,
        uploadedFile,
        setUploadedFile,
        businessService,
        error
      }));
    }
  }, [action, approvers, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$2, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$2, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      height: "45px",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      height: "45px",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const Heading$3 = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
const Close$3 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$3 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$3, null));
};
const ActionModal$3 = _ref => {
  var _applicationData, _applicationData$land, _applicationData$land2, _applicationData2, _applicationData2$lan, _applicationData2$lan2, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6;
  const submit = function (data) {
    try {
      var _applicationData3, _data$comments, _data$comments2, _applicationDetails$n, _nocDetails$, _nocDetails$$Noc;
      let workflow = {
        action: action === null || action === void 0 ? void 0 : action.action,
        comments: data === null || data === void 0 ? void 0 : data.comments,
        businessService,
        moduleName: moduleCode
      };
      applicationData = {
        ...applicationData,
        documents: getDocuments(applicationData),
        additionalDetails: {
          ...((_applicationData3 = applicationData) === null || _applicationData3 === void 0 ? void 0 : _applicationData3.additionalDetails),
          fieldinspection_pending: getfeildInspection(applicationData),
          pendingapproval: getPendingApprovals()
        },
        workflow: {
          action: action === null || action === void 0 ? void 0 : action.action,
          comment: (data === null || data === void 0 ? void 0 : (_data$comments = data.comments) === null || _data$comments === void 0 ? void 0 : _data$comments.length) > 0 ? data === null || data === void 0 ? void 0 : data.comments : null,
          comments: (data === null || data === void 0 ? void 0 : (_data$comments2 = data.comments) === null || _data$comments2 === void 0 ? void 0 : _data$comments2.length) > 0 ? data === null || data === void 0 ? void 0 : data.comments : null,
          assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
          assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
          varificationDocuments: uploadedFile ? [{
            documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
            fileName: file === null || file === void 0 ? void 0 : file.name,
            fileStoreId: uploadedFile
          }] : null
        },
        action: action === null || action === void 0 ? void 0 : action.action,
        comment: data === null || data === void 0 ? void 0 : data.comments,
        assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
        wfDocuments: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : null
      };
      const nocDetails = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$n = applicationDetails.nocData) === null || _applicationDetails$n === void 0 ? void 0 : _applicationDetails$n.map(noc => {
        const uploadedDocuments = Digit.SessionStorage.get(noc === null || noc === void 0 ? void 0 : noc.nocType) || [];
        return {
          Noc: {
            ...noc,
            documents: [...(noc !== null && noc !== void 0 && noc.documents ? noc === null || noc === void 0 ? void 0 : noc.documents : []), ...(uploadedDocuments ? uploadedDocuments : [])]
          }
        };
      });
      let filters = {
        sourceRefId: nocDetails === null || nocDetails === void 0 ? void 0 : (_nocDetails$ = nocDetails[0]) === null || _nocDetails$ === void 0 ? void 0 : (_nocDetails$$Noc = _nocDetails$.Noc) === null || _nocDetails$$Noc === void 0 ? void 0 : _nocDetails$$Noc.sourceRefId
      };
      return Promise.resolve(Digit.NOCSearch.all(tenantId, filters)).then(function (response) {
        var _response$Noc;
        let AirportFlag = true;
        let NocFlag = true;
        response === null || response === void 0 ? void 0 : (_response$Noc = response.Noc) === null || _response$Noc === void 0 ? void 0 : _response$Noc.map(ob => {
          var _ob$applicationStatus, _ob$applicationStatus2, _ob$applicationStatus3, _ob$applicationStatus4, _ob$applicationStatus5;
          if (((ob === null || ob === void 0 ? void 0 : (_ob$applicationStatus = ob.applicationStatus) === null || _ob$applicationStatus === void 0 ? void 0 : _ob$applicationStatus.toUpperCase()) === "APPROVED" || (ob === null || ob === void 0 ? void 0 : (_ob$applicationStatus2 = ob.applicationStatus) === null || _ob$applicationStatus2 === void 0 ? void 0 : _ob$applicationStatus2.toUpperCase()) === "AUTO_APPROVED" || (ob === null || ob === void 0 ? void 0 : (_ob$applicationStatus3 = ob.applicationStatus) === null || _ob$applicationStatus3 === void 0 ? void 0 : _ob$applicationStatus3.toUpperCase()) === "REJECTED" || (ob === null || ob === void 0 ? void 0 : (_ob$applicationStatus4 = ob.applicationStatus) === null || _ob$applicationStatus4 === void 0 ? void 0 : _ob$applicationStatus4.toUpperCase()) === "AUTO_REJECTED" || (ob === null || ob === void 0 ? void 0 : (_ob$applicationStatus5 = ob.applicationStatus) === null || _ob$applicationStatus5 === void 0 ? void 0 : _ob$applicationStatus5.toUpperCase()) === "VOIDED") && (AirportFlag == true || NocFlag == true)) {
            if ((ob === null || ob === void 0 ? void 0 : ob.nocType) === "AIRPORT_AUTHORITY") AirportFlag = false;else if ((ob === null || ob === void 0 ? void 0 : ob.nocType) === "FIRE_NOC") NocFlag = false;
          }
        });
        let nocData = [];
        if (nocDetails) {
          nocDetails.map(noc => {
            var _noc$Noc, _noc$Noc$applicationS, _noc$Noc2, _noc$Noc2$application, _noc$Noc3, _noc$Noc3$application, _noc$Noc4, _noc$Noc4$application, _noc$Noc5, _noc$Noc5$application, _noc$Noc6, _noc$Noc7;
            if ((noc === null || noc === void 0 ? void 0 : (_noc$Noc = noc.Noc) === null || _noc$Noc === void 0 ? void 0 : (_noc$Noc$applicationS = _noc$Noc.applicationStatus) === null || _noc$Noc$applicationS === void 0 ? void 0 : _noc$Noc$applicationS.toUpperCase()) != "APPROVED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc2 = noc.Noc) === null || _noc$Noc2 === void 0 ? void 0 : (_noc$Noc2$application = _noc$Noc2.applicationStatus) === null || _noc$Noc2$application === void 0 ? void 0 : _noc$Noc2$application.toUpperCase()) != "AUTO_APPROVED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc3 = noc.Noc) === null || _noc$Noc3 === void 0 ? void 0 : (_noc$Noc3$application = _noc$Noc3.applicationStatus) === null || _noc$Noc3$application === void 0 ? void 0 : _noc$Noc3$application.toUpperCase()) != "REJECTED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc4 = noc.Noc) === null || _noc$Noc4 === void 0 ? void 0 : (_noc$Noc4$application = _noc$Noc4.applicationStatus) === null || _noc$Noc4$application === void 0 ? void 0 : _noc$Noc4$application.toUpperCase()) != "AUTO_REJECTED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc5 = noc.Noc) === null || _noc$Noc5 === void 0 ? void 0 : (_noc$Noc5$application = _noc$Noc5.applicationStatus) === null || _noc$Noc5$application === void 0 ? void 0 : _noc$Noc5$application.toUpperCase()) != "VOIDED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc6 = noc.Noc) === null || _noc$Noc6 === void 0 ? void 0 : _noc$Noc6.nocType) === "AIRPORT_AUTHORITY" && AirportFlag || (noc === null || noc === void 0 ? void 0 : (_noc$Noc7 = noc.Noc) === null || _noc$Noc7 === void 0 ? void 0 : _noc$Noc7.nocType) === "FIRE_NOC" && NocFlag) {
              nocData.push(noc);
            }
          });
        }
        submitAction({
          BPA: applicationData
        }, (nocData === null || nocData === void 0 ? void 0 : nocData.length) > 0 ? nocData : false, {
          isStakeholder: false,
          bpa: true
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationDetails,
    applicationData,
    businessService,
    moduleCode,
    workflowDetails
  } = _ref;
  const mutation1 = Digit.Hooks.obps.useObpsAPI((_applicationData = applicationData) !== null && _applicationData !== void 0 && (_applicationData$land = _applicationData.landInfo) !== null && _applicationData$land !== void 0 && (_applicationData$land2 = _applicationData$land.address) !== null && _applicationData$land2 !== void 0 && _applicationData$land2.city ? (_applicationData2 = applicationData) === null || _applicationData2 === void 0 ? void 0 : (_applicationData2$lan = _applicationData2.landInfo) === null || _applicationData2$lan === void 0 ? void 0 : (_applicationData2$lan2 = _applicationData2$lan.address) === null || _applicationData2$lan2 === void 0 ? void 0 : _applicationData2$lan2.city : tenantId, false);
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.initialActionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.filter(ele => (ele === null || ele === void 0 ? void 0 : ele.action) == (action === null || action === void 0 ? void 0 : action.action))) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4[0]) === null || _workflowDetails$data5 === void 0 ? void 0 : (_workflowDetails$data6 = _workflowDetails$data5.assigneeRoles) === null || _workflowDetails$data6 === void 0 ? void 0 : _workflowDetails$data6.map(role => ({
      code: role
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const queryClient = reactQuery.useQueryClient();
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState({});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [selectedFinancialYear, setSelectedFinancialYear] = React.useState(null);
  const mobileView = Digit.Utils.browser.isMobile() ? true : false;
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("OBPS", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  const getInspectionDocs = docs => {
    let refinedDocs = [];
    docs && docs.map((doc, ind) => {
      refinedDocs.push({
        "documentType": (doc.documentType + "_" + doc.documentType.split("_")[1]).replaceAll("_", "."),
        "fileStoreId": doc.fileStoreId,
        "fileStore": doc.fileStoreId,
        "fileName": "",
        "dropDownValues": {
          "value": (doc.documentType + "_" + doc.documentType.split("_")[1]).replaceAll("_", ".")
        }
      });
    });
    return refinedDocs;
  };
  const getQuestion = data => {
    let refinedQues = [];
    var i;
    for (i = 0; i < (data === null || data === void 0 ? void 0 : data.questionLength); i++) {
      var _data;
      refinedQues.push({
        "remarks": data["Remarks_" + i],
        "question": data === null || data === void 0 ? void 0 : data.questionList[i].question,
        "value": data === null || data === void 0 ? void 0 : (_data = data["question_" + i]) === null || _data === void 0 ? void 0 : _data.code
      });
    }
    return refinedQues;
  };
  const getfeildInspection = data => {
    var _data$additionalDetai, _data$additionalDetai2;
    let formdata = [],
      inspectionOb = [];
    if ((data === null || data === void 0 ? void 0 : (_data$additionalDetai = data.additionalDetails) === null || _data$additionalDetai === void 0 ? void 0 : (_data$additionalDetai2 = _data$additionalDetai.fieldinspection_pending) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.length) > 0) {
      var _data$additionalDetai3;
      inspectionOb = data === null || data === void 0 ? void 0 : (_data$additionalDetai3 = data.additionalDetails) === null || _data$additionalDetai3 === void 0 ? void 0 : _data$additionalDetai3.fieldinspection_pending;
    }
    if (data.status == "FIELDINSPECTION_INPROGRESS") {
      var _formdata;
      formdata = JSON.parse(sessionStorage.getItem("INSPECTION_DATA"));
      ((_formdata = formdata) === null || _formdata === void 0 ? void 0 : _formdata.length) > 0 && formdata.map((ob, ind) => {
        inspectionOb.push({
          docs: getInspectionDocs(ob.Documents),
          date: ob.InspectionDate,
          questions: getQuestion(ob),
          time: ob === null || ob === void 0 ? void 0 : ob.InspectionTime
        });
      });
      inspectionOb = inspectionOb.filter(ob => ob.docs && ob.docs.length > 0);
    } else {
      sessionStorage.removeItem("INSPECTION_DATA");
    }
    let fieldinspection_pending = [...inspectionOb];
    return fieldinspection_pending;
  };
  const getDocuments = applicationData => {
    let documentsformdata = JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS"));
    let documentList = [];
    documentsformdata.map(doc => {
      var _doc$uploadedDocument, _doc$uploadedDocument2, _doc$uploadedDocument3, _doc$uploadedDocument4, _doc$uploadedDocument5, _doc$newUploadedDocs;
      if ((doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : (_doc$uploadedDocument2 = _doc$uploadedDocument[0]) === null || _doc$uploadedDocument2 === void 0 ? void 0 : (_doc$uploadedDocument3 = _doc$uploadedDocument2.values) === null || _doc$uploadedDocument3 === void 0 ? void 0 : _doc$uploadedDocument3.length) > 0) documentList = [...documentList, ...(doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument4 = doc.uploadedDocuments) === null || _doc$uploadedDocument4 === void 0 ? void 0 : (_doc$uploadedDocument5 = _doc$uploadedDocument4[0]) === null || _doc$uploadedDocument5 === void 0 ? void 0 : _doc$uploadedDocument5.values)];
      if ((doc === null || doc === void 0 ? void 0 : (_doc$newUploadedDocs = doc.newUploadedDocs) === null || _doc$newUploadedDocs === void 0 ? void 0 : _doc$newUploadedDocs.length) > 0) documentList = [...documentList, ...(doc === null || doc === void 0 ? void 0 : doc.newUploadedDocs)];
    });
    return documentList;
  };
  const getPendingApprovals = () => {
    var _result;
    const approvals = Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS");
    const newApprovals = Digit.SessionStorage.get("OBPS_NEW_APPROVALS");
    let result = approvals === null || approvals === void 0 ? void 0 : approvals.reduce((acc, approval) => approval !== null && approval !== void 0 && approval.checked ? acc.push(approval === null || approval === void 0 ? void 0 : approval.label) && acc : acc, []);
    result = (_result = result) === null || _result === void 0 ? void 0 : _result.concat(newApprovals !== null ? newApprovals.filter(ob => ob.label !== "").map(approval => approval === null || approval === void 0 ? void 0 : approval.label) : []);
    return result;
  };
  React.useEffect(() => {
    if (action) {
      setConfig(configBPAApproverApplication({
        t,
        action,
        approvers,
        selectedApprover,
        setSelectedApprover,
        selectFile,
        uploadedFile,
        setUploadedFile,
        businessService,
        assigneeLabel: "WF_ASSIGNEE_NAME_LABEL",
        error
      }));
    }
  }, [action, approvers, selectedFinancialYear, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$3, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$3, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      minHeight: "45px",
      height: "auto",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      minHeight: "45px",
      height: "auto",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const Heading$4 = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
const Close$4 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$4 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$4, null));
};
const ActionModal$4 = _ref => {
  var _action$assigneeRoles, _action$assigneeRoles2;
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationData,
    businessService,
    moduleCode
  } = _ref;
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, e => ({
      code: e
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const queryClient = reactQuery.useQueryClient();
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState({});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const mobileView = Digit.Utils.browser.isMobile() ? true : false;
  const history = reactRouterDom.useHistory();
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("NOC", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    var _applicationData, _applicationData$docu, _applicationData2;
    let enteredDocs = JSON.parse(sessionStorage.getItem("NewNOCDocs"));
    let newDocs = ((_applicationData = applicationData) === null || _applicationData === void 0 ? void 0 : (_applicationData$docu = _applicationData.documents) === null || _applicationData$docu === void 0 ? void 0 : _applicationData$docu.length) > 0 ? [...((_applicationData2 = applicationData) === null || _applicationData2 === void 0 ? void 0 : _applicationData2.documents)] : [];
    enteredDocs.map((d, index) => {
      newDocs.push(d);
    });
    applicationData = {
      ...applicationData,
      workflow: {
        action: action === null || action === void 0 ? void 0 : action.action,
        comment: data !== null && data !== void 0 && data.comments ? data === null || data === void 0 ? void 0 : data.comments : null,
        assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
        documents: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : null
      },
      documents: newDocs
    };
    submitAction({
      Noc: applicationData
    }, false, {
      isNoc: true
    });
  }
  React.useEffect(() => {
    if (action) {
      setConfig(configNOCApproverApplication({
        t,
        action,
        approvers,
        selectedApprover,
        setSelectedApprover,
        selectFile,
        uploadedFile,
        setUploadedFile,
        businessService,
        assigneeLabel: "WF_ASSIGNEE_NAME_LABEL",
        error
      }));
    }
  }, [action, approvers, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$4, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$4, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      height: "45px",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      height: "45px",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const Heading$5 = props => {
  return /*#__PURE__*/React__default.createElement("h1", {
    className: "heading-m"
  }, props.label);
};
const Close$5 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$5 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$5, null));
};
const convertDateToEpochNew$1 = function (dateString, dayStartOrEnd) {
  if (dayStartOrEnd === void 0) {
    dayStartOrEnd = "dayend";
  }
  try {
    const parts = dateString.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);
    const DateObj = new Date(Date.UTC(parts[1], parts[2] - 1, parts[3]));
    DateObj.setMinutes(DateObj.getMinutes() + DateObj.getTimezoneOffset());
    if (dayStartOrEnd === "dayend") {
      DateObj.setHours(DateObj.getHours() + 24);
      DateObj.setSeconds(DateObj.getSeconds() - 1);
    }
    return DateObj.getTime();
  } catch (e) {
    return dateString;
  }
};
const ActionModal$5 = _ref => {
  var _action$assigneeRoles, _action$assigneeRoles2;
  let {
    t,
    action,
    tenantId,
    state,
    id,
    closeModal,
    submitAction,
    actionData,
    applicationData,
    businessService,
    moduleCode
  } = _ref;
  const {
    data: approverData,
    isLoading: PTALoading
  } = Digit.Hooks.useEmployeeSearch(tenantId, {
    roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, e => ({
      code: e
    })),
    isActive: true
  }, {
    enabled: !(action !== null && action !== void 0 && action.isTerminateState)
  });
  const [config, setConfig] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const [approvers, setApprovers] = React.useState([]);
  const [selectedApprover, setSelectedApprover] = React.useState({});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(null);
  const [error, setError] = React.useState(null);
  const isMobile = window.Digit.Utils.browser.isMobile();
  const isEmployee = window.location.href.includes("/employee");
  React.useEffect(() => {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(employee => {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("WS", file, Digit.ULBService.getCurrentTenantId())).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function (err) {
                      console.error("Modal -> err ", err);
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    var _applicationData, _applicationData7, _applicationData8, _applicationData8$app, _applicationData9, _applicationData9$pro, _applicationData10, _applicationData10$pr;
    if ((_applicationData = applicationData) !== null && _applicationData !== void 0 && _applicationData.isBillAmend) {
      var _applicationData2, _applicationData2$bil, _applicationData3, _applicationData4, _applicationData4$bil, _applicationData5, _applicationData5$app, _applicationData6, _applicationData6$app;
      const comments = data !== null && data !== void 0 && data.comments ? data.comments : null;
      const additionalDetails = {
        ...((_applicationData2 = applicationData) === null || _applicationData2 === void 0 ? void 0 : (_applicationData2$bil = _applicationData2.billAmendmentDetails) === null || _applicationData2$bil === void 0 ? void 0 : _applicationData2$bil.additionalDetails),
        comments
      };
      const amendment = {
        ...((_applicationData3 = applicationData) === null || _applicationData3 === void 0 ? void 0 : _applicationData3.billAmendmentDetails),
        workflow: {
          businessId: (_applicationData4 = applicationData) === null || _applicationData4 === void 0 ? void 0 : (_applicationData4$bil = _applicationData4.billAmendmentDetails) === null || _applicationData4$bil === void 0 ? void 0 : _applicationData4$bil.amendmentId,
          action: action === null || action === void 0 ? void 0 : action.action,
          tenantId: tenantId,
          businessService: (_applicationData5 = applicationData) !== null && _applicationData5 !== void 0 && (_applicationData5$app = _applicationData5.applicationType) !== null && _applicationData5$app !== void 0 && _applicationData5$app.includes("WATER") ? "WS.AMENDMENT" : "SW.AMENDMENT",
          moduleName: (_applicationData6 = applicationData) !== null && _applicationData6 !== void 0 && (_applicationData6$app = _applicationData6.applicationType) !== null && _applicationData6$app !== void 0 && _applicationData6$app.includes("WATER") ? "WS" : "SW",
          assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? [] : [{
            uuid: selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid
          }],
          comment: (data === null || data === void 0 ? void 0 : data.comments) || "",
          documents: uploadedFile ? [{
            documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
            fileName: file === null || file === void 0 ? void 0 : file.name,
            fileStoreId: uploadedFile
          }] : []
        },
        additionalDetails,
        comment: (data === null || data === void 0 ? void 0 : data.comments) || "",
        wfDocuments: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : null,
        processInstance: {
          action: action === null || action === void 0 ? void 0 : action.action,
          assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? [] : [{
            uuid: selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid
          }],
          comment: (data === null || data === void 0 ? void 0 : data.comments) || "",
          documents: uploadedFile ? [{
            documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
            fileName: file === null || file === void 0 ? void 0 : file.name,
            fileStoreId: uploadedFile
          }] : []
        }
      };
      submitAction({
        AmendmentUpdate: amendment
      });
      return;
    }
    applicationData = {
      ...applicationData,
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: (data === null || data === void 0 ? void 0 : data.comments) || "",
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? [] : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? [] : [{
        uuid: selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid
      }],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null,
      processInstance: {
        ...((_applicationData7 = applicationData) === null || _applicationData7 === void 0 ? void 0 : _applicationData7.processInstance),
        action: action === null || action === void 0 ? void 0 : action.action,
        assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? [] : [{
          uuid: selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid
        }],
        comment: (data === null || data === void 0 ? void 0 : data.comments) || "",
        documents: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : []
      }
    };
    if (data !== null && data !== void 0 && data.date && (_applicationData8 = applicationData) !== null && _applicationData8 !== void 0 && (_applicationData8$app = _applicationData8.applicationType) !== null && _applicationData8$app !== void 0 && _applicationData8$app.includes("DISCONNECT")) {
      const disconnectionExecutionDate = cloneDeep_1(data === null || data === void 0 ? void 0 : data.date);
      applicationData.disconnectionExecutionDate = convertDateToEpochNew$1(disconnectionExecutionDate);
    } else if (data !== null && data !== void 0 && data.date) {
      const connectionExecutionDate = cloneDeep_1(data === null || data === void 0 ? void 0 : data.date);
      applicationData.connectionExecutionDate = convertDateToEpochNew$1(connectionExecutionDate);
    }
    if (((_applicationData9 = applicationData) === null || _applicationData9 === void 0 ? void 0 : (_applicationData9$pro = _applicationData9.processInstance) === null || _applicationData9$pro === void 0 ? void 0 : _applicationData9$pro.businessService) == "DisconnectWSConnection" || ((_applicationData10 = applicationData) === null || _applicationData10 === void 0 ? void 0 : (_applicationData10$pr = _applicationData10.processInstance) === null || _applicationData10$pr === void 0 ? void 0 : _applicationData10$pr.businessService) == "DisconnectSWConnection" || window.location.href.includes("disconnection")) {
      var _applicationData11;
      ((_applicationData11 = applicationData) === null || _applicationData11 === void 0 ? void 0 : _applicationData11.serviceType) == "WATER" ? submitAction({
        WaterConnection: applicationData,
        disconnectRequest: true
      }) : submitAction({
        SewerageConnection: applicationData,
        disconnectRequest: true
      });
    } else {
      var _parsedAdhocRebateDat, _parsedAdhocRebateDat2, _parsedAdhocRebateDat3, _parsedAdhocRebateDat4, _parsedAdhocRebateDat5, _parsedAdhocRebateDat6, _parsedAdhocRebateDat7, _parsedAdhocRebateDat8, _parsedAdhocRebateDat9, _parsedAdhocRebateDat10, _parsedAdhocRebateDat11, _parsedAdhocRebateDat12, _applicationData12;
      const adhocRebateData = sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA");
      const parsedAdhocRebateData = adhocRebateData ? JSON.parse(adhocRebateData) : "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat !== void 0 && _parsedAdhocRebateDat.adhocPenalty) applicationData.additionalDetails.adhocPenalty = parseInt(parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat2 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat2 === void 0 ? void 0 : _parsedAdhocRebateDat2.adhocPenalty) || "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat3 = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat3 !== void 0 && _parsedAdhocRebateDat3.adhocPenaltyComment) applicationData.additionalDetails.adhocPenaltyComment = (parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat4 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat4 === void 0 ? void 0 : _parsedAdhocRebateDat4.adhocPenaltyComment) || "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat5 = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat5 !== void 0 && _parsedAdhocRebateDat5.adhocPenaltyReason) applicationData.additionalDetails.adhocPenaltyReason = (parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat6 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat6 === void 0 ? void 0 : _parsedAdhocRebateDat6.adhocPenaltyReason) || "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat7 = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat7 !== void 0 && _parsedAdhocRebateDat7.adhocRebate) applicationData.additionalDetails.adhocRebate = parseInt(parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat8 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat8 === void 0 ? void 0 : _parsedAdhocRebateDat8.adhocRebate) || "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat9 = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat9 !== void 0 && _parsedAdhocRebateDat9.adhocRebateComment) applicationData.additionalDetails.adhocRebateComment = (parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat10 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat10 === void 0 ? void 0 : _parsedAdhocRebateDat10.adhocRebateComment) || "";
      if (parsedAdhocRebateData !== null && parsedAdhocRebateData !== void 0 && (_parsedAdhocRebateDat11 = parsedAdhocRebateData.value) !== null && _parsedAdhocRebateDat11 !== void 0 && _parsedAdhocRebateDat11.adhocRebateReason) applicationData.additionalDetails.adhocRebateReason = (parsedAdhocRebateData === null || parsedAdhocRebateData === void 0 ? void 0 : (_parsedAdhocRebateDat12 = parsedAdhocRebateData.value) === null || _parsedAdhocRebateDat12 === void 0 ? void 0 : _parsedAdhocRebateDat12.adhocRebateReason) || "";
      ((_applicationData12 = applicationData) === null || _applicationData12 === void 0 ? void 0 : _applicationData12.serviceType) == "WATER" ? submitAction({
        WaterConnection: applicationData
      }) : submitAction({
        SewerageConnection: applicationData
      });
    }
  }
  React.useEffect(() => {
    var _applicationData13, _applicationData13$pr, _applicationData14, _applicationData14$pr;
    if (((_applicationData13 = applicationData) === null || _applicationData13 === void 0 ? void 0 : (_applicationData13$pr = _applicationData13.processInstance) === null || _applicationData13$pr === void 0 ? void 0 : _applicationData13$pr.businessService) == "DisconnectWSConnection" || ((_applicationData14 = applicationData) === null || _applicationData14 === void 0 ? void 0 : (_applicationData14$pr = _applicationData14.processInstance) === null || _applicationData14$pr === void 0 ? void 0 : _applicationData14$pr.businessService) == "DisconnectSWConnection") {
      if (action) {
        setConfig(configWSDisConnectApplication({
          t,
          action,
          approvers,
          selectedApprover,
          setSelectedApprover,
          selectFile,
          uploadedFile,
          setUploadedFile,
          businessService,
          error
        }));
      }
    } else {
      if (action) {
        setConfig(configWSApproverApplication({
          t,
          action,
          approvers,
          selectedApprover,
          setSelectedApprover,
          selectFile,
          uploadedFile,
          setUploadedFile,
          businessService,
          error
        }));
      }
    }
  }, [action, approvers, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$5, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$5, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action",
    style: isMobile && isEmployee ? {
      width: "100%",
      height: "auto"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

const ActionModal$6 = props => {
  if (props !== null && props !== void 0 && props.businessService.includes("PT")) {
    return /*#__PURE__*/React__default.createElement(ActionModal, props);
  }
  if (props !== null && props !== void 0 && props.businessService.includes("NewTL") || props !== null && props !== void 0 && props.businessService.includes("TL") || props !== null && props !== void 0 && props.businessService.includes("EDITRENEWAL") || props !== null && props !== void 0 && props.businessService.includes("DIRECTRENEWAL")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$1, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("BPAREG")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$2, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("BPA")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$3, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("NOC")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$4, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("WS")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$5, props);
  }
};

function DocumentsPreview(_ref) {
  let {
    documents,
    svgStyles = {},
    isSendBackFlow = false,
    isHrLine = false,
    titleStyles
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const isStakeholderApplication = window.location.href.includes("stakeholder");
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, !isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map((document, index) => {
    var _document$values;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: titleStyles ? titleStyles : {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        flexWrap: "wrap",
        justifyContent: "flex-start"
      }
    }, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values = document.values) === null || _document$values === void 0 ? void 0 : _document$values.map((value, index) => {
      var _value$documentType;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: value === null || value === void 0 ? void 0 : value.url,
        style: {
          minWidth: "80px",
          marginRight: "10px",
          maxWidth: "100px",
          height: "auto",
          minWidth: "100px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          justifyContent: "center"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontWeight: "bold",
          textAlign: "center",
          color: "#505A5F"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), isSendBackFlow ? value !== null && value !== void 0 && (_value$documentType = value.documentType) !== null && _value$documentType !== void 0 && _value$documentType.includes("NOC") ? /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType.split(".")[1])) : /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType)) : "");
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))), isHrLine && (documents === null || documents === void 0 ? void 0 : documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#D6D5D4",
        backgroundColor: "#D6D5D4",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null);
  })), isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map((document, index) => {
    var _document$values2;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", null, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values2 = document.values) === null || _document$values2 === void 0 ? void 0 : _document$values2.map((value, index) => /*#__PURE__*/React__default.createElement("a", {
      target: "_",
      href: value === null || value === void 0 ? void 0 : value.url,
      style: {
        minWidth: svgStyles !== null && svgStyles !== void 0 && svgStyles.minWidth ? svgStyles === null || svgStyles === void 0 ? void 0 : svgStyles.minWidth : "160px",
        marginRight: "20px"
      },
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        maxWidth: "940px",
        padding: "8px",
        borderRadius: "4px",
        border: "1px solid #D6D5D4",
        background: "#FAFAFA"
      }
    }, /*#__PURE__*/React__default.createElement("p", {
      style: {
        marginTop: "8px",
        fontWeight: "bold",
        marginBottom: "10px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title)), value !== null && value !== void 0 && value.docInfo ? /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontSize: "12px",
        color: "#505A5F",
        fontWeight: 400,
        lineHeight: "15px",
        marginBottom: "10px"
      }
    }, "" + t(value === null || value === void 0 ? void 0 : value.docInfo)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
      style: {
        marginTop: "8px",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#505A5F",
        fontWeight: "400",
        textAlign: "center",
        color: "#505A5F"
      }
    }, "" + t(value === null || value === void 0 ? void 0 : value.title))))) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })));
}

const BPADocuments = _ref => {
  var _bpaActionsDetails$da, _formData$documents;
  let {
    t,
    formData,
    applicationData,
    docs,
    bpaActionsDetails
  } = _ref;
  const applicationStatus = (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) || "";
  const actions = (bpaActionsDetails === null || bpaActionsDetails === void 0 ? void 0 : (_bpaActionsDetails$da = bpaActionsDetails.data) === null || _bpaActionsDetails$da === void 0 ? void 0 : _bpaActionsDetails$da.nextActions) || [];
  const stateId = Digit.ULBService.getStateId();
  const [documents, setDocuments] = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : _formData$documents.documents) || []);
  const [error, setError] = React.useState(null);
  const [bpaTaxDocuments, setBpaTaxDocuments] = React.useState([]);
  const [enableSubmit, setEnableSubmit] = React.useState(true);
  const [checkRequiredFields, setCheckRequiredFields] = React.useState(false);
  const [checkEnablingDocs, setCheckEnablingDocs] = React.useState(false);
  const {
    isLoading: bpaDocsLoading,
    data: bpaDocs
  } = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["DocTypeMapping"]);
  const {
    isLoading: commonDocsLoading,
    data: commonDocs
  } = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["DocumentType"]);
  React.useEffect(() => {
    var _bpaDocs$BPA, _filtredBpaDocs, _filtredBpaDocs$, _filtredBpaDocs$$docT;
    let filtredBpaDocs = [];
    if (bpaDocs !== null && bpaDocs !== void 0 && (_bpaDocs$BPA = bpaDocs.BPA) !== null && _bpaDocs$BPA !== void 0 && _bpaDocs$BPA.DocTypeMapping) {
      var _bpaDocs$BPA2, _bpaDocs$BPA2$DocType;
      filtredBpaDocs = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA2 = bpaDocs.BPA) === null || _bpaDocs$BPA2 === void 0 ? void 0 : (_bpaDocs$BPA2$DocType = _bpaDocs$BPA2.DocTypeMapping) === null || _bpaDocs$BPA2$DocType === void 0 ? void 0 : _bpaDocs$BPA2$DocType.filter(data => {
        var _applicationData$addi, _applicationData$addi2;
        return data.WFState == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) ? applicationData === null || applicationData === void 0 ? void 0 : applicationData.status :  data.RiskType == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.riskType) && data.ServiceType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi = applicationData.additionalDetails) === null || _applicationData$addi === void 0 ? void 0 : _applicationData$addi.serviceType) && data.applicationType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi2 = applicationData.additionalDetails) === null || _applicationData$addi2 === void 0 ? void 0 : _applicationData$addi2.applicationType);
      });
    }
    let documentsList = [];
    (_filtredBpaDocs = filtredBpaDocs) === null || _filtredBpaDocs === void 0 ? void 0 : (_filtredBpaDocs$ = _filtredBpaDocs[0]) === null || _filtredBpaDocs$ === void 0 ? void 0 : (_filtredBpaDocs$$docT = _filtredBpaDocs$.docTypes) === null || _filtredBpaDocs$$docT === void 0 ? void 0 : _filtredBpaDocs$$docT.forEach(doc => {
      var _commonDocs$commonMa, _commonDocs$commonMa$, _docs$, _docs$$values;
      let code = doc.code;
      doc.dropdownData = [];
      doc.uploadedDocuments = [];
      commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : (_commonDocs$commonMa$ = _commonDocs$commonMa.DocumentType) === null || _commonDocs$commonMa$ === void 0 ? void 0 : _commonDocs$commonMa$.forEach(value => {
        let values = value.code.slice(0, code.length);
        if (code === values) {
          doc.hasDropdown = true;
          value.i18nKey = value.code;
          doc.dropdownData.push(value);
        }
      });
      doc.uploadedDocuments[0] = {};
      doc.uploadedDocuments[0].values = [];
      docs === null || docs === void 0 ? void 0 : (_docs$ = docs[0]) === null || _docs$ === void 0 ? void 0 : (_docs$$values = _docs$.values) === null || _docs$$values === void 0 ? void 0 : _docs$$values.map(upDocs => {
        var _upDocs$documentType, _upDocs$documentType2;
        if (code === (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType = upDocs.documentType) === null || _upDocs$documentType === void 0 ? void 0 : _upDocs$documentType.split('.')[0]) + "." + (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType2 = upDocs.documentType) === null || _upDocs$documentType2 === void 0 ? void 0 : _upDocs$documentType2.split('.')[1])) {
          doc.uploadedDocuments[0].values.push(upDocs);
        }
      });
      documentsList.push(doc);
    });
    sessionStorage.setItem("BPA_DOCUMENTS", JSON.stringify(documentsList));
    setBpaTaxDocuments(documentsList);
  }, [!bpaDocsLoading, !commonDocsLoading]);
  React.useEffect(() => {
    let count = 0;
    bpaTaxDocuments.map(doc => {
      let isRequired = false;
      documents.map(data => {
        if (doc.required && doc.code == data.documentType.split('.')[0] + "." + data.documentType.split('.')[1]) {
          isRequired = true;
        }
      });
      if (!isRequired && doc.required) {
        count = count + 1;
      }
    });
    if ((count == "0" || count == 0) && documents.length > 0) setEnableSubmit(false);else setEnableSubmit(true);
  }, [documents, checkRequiredFields]);
  React.useEffect(() => {
    if (applicationStatus === "DOC_VERIFICATION_INPROGRESS" && (actions === null || actions === void 0 ? void 0 : actions.length) > 0) setCheckEnablingDocs(true);else setCheckEnablingDocs(false);
  }, [applicationData, bpaActionsDetails]);
  return /*#__PURE__*/React__default.createElement("div", null, bpaTaxDocuments === null || bpaTaxDocuments === void 0 ? void 0 : bpaTaxDocuments.map((document, index) => {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(SelectDocument$4, {
      key: index,
      index: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields,
      applicationStatus: applicationStatus,
      actions: actions,
      bpaTaxDocuments: bpaTaxDocuments,
      checkEnablingDocs: checkEnablingDocs
    }));
  }));
};
function SelectDocument$4(_ref2) {
  var _doc$dropdownData, _doc$uploadedDocument;
  let {
    t,
    document: doc,
    setDocuments,
    error,
    setError,
    documents,
    setCheckRequiredFields,
    index,
    applicationStatus,
    actions,
    bpaTaxDocuments,
    checkEnablingDocs
  } = _ref2;
  const filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getStateId();
  const [selectedDocument, setSelectedDocument] = React.useState(filteredDocument ? {
    ...filteredDocument,
    active: true,
    code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
    i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
  } : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const [selectArrayFiles, SetSelectArrayFiles] = React.useState([]);
  const handleSelectDocument = value => setSelectedDocument(value);
  const allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfiles(e) {
    e && setFile(e.file);
  }
  React.useEffect(() => {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(prev => {
        var _documents$find;
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code));
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) return filteredDocumentsByDocumentType;
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        return [...filteredDocumentsByFileStoreId, {
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          documentUid: uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
          id: documents ? (_documents$find = documents.find(x => x.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code))) === null || _documents$find === void 0 ? void 0 : _documents$find.id : undefined
        }];
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(() => {
    try {
      if (selectArrayFiles.length > 0) {
        sessionStorage.removeItem("BPA_DOCUMENTS");
        doc.newUploadedDocs = [];
        selectArrayFiles.map(newDoc => {
          if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
            var _newDoc$fileStoreId, _newDoc$fileStoreId2, _newDoc$fileStoreId3;
            doc.newUploadedDocs.push({
              documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
              fileStoreId: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId = newDoc.fileStoreId) === null || _newDoc$fileStoreId === void 0 ? void 0 : _newDoc$fileStoreId.fileStoreId,
              documentUid: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId2 = newDoc.fileStoreId) === null || _newDoc$fileStoreId2 === void 0 ? void 0 : _newDoc$fileStoreId2.fileStoreId,
              tenantId: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId3 = newDoc.fileStoreId) === null || _newDoc$fileStoreId3 === void 0 ? void 0 : _newDoc$fileStoreId3.tenantId
            });
          }
        });
        bpaTaxDocuments[index] = doc;
        sessionStorage.setItem("BPA_DOCUMENTS", JSON.stringify(bpaTaxDocuments));
      }
    } catch (e) {
      Promise.reject(e);
    }
  }, [selectArrayFiles, selectedDocument]);
  React.useEffect(() => {
  }, [file]);
  const getData = (index, state) => {
    let data = Object.fromEntries(state);
    let newArr = Object.values(data);
    if (Object.keys(data).length !== 0) SetSelectArrayFiles(newArr);
    selectfiles(newArr[newArr.length - 1]);
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px",
      maxWidth: "950px",
      minWidth: "280px",
      background: "#FAFAFA",
      borderRadius: "4px",
      border: "1px solid #D6D5D4",
      padding: "8px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      marginBottom: "8px",
      paddingBottom: "9px",
      color: "#0B0C0C",
      fontSize: "16px",
      lineHeight: "19px"
    }
  }, "" + t(doc === null || doc === void 0 ? void 0 : doc.code)), (doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : _doc$uploadedDocument.length) && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: doc === null || doc === void 0 ? void 0 : doc.uploadedDocuments,
    svgStyles: {
      width: "100px",
      height: "100px",
      viewBox: "0 0 25 25",
      minWidth: "100px"
    }
  }), checkEnablingDocs ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "-10px",
      width: "100%"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t(doc === null || doc === void 0 ? void 0 : doc.code) + "* " : "" + t(doc === null || doc === void 0 ? void 0 : doc.code)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    className: "form-field",
    t: t,
    isMandatory: false,
    option: doc === null || doc === void 0 ? void 0 : doc.dropdownData,
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument,
    style: {
      width: "100%"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      width: "100%"
    }
  }), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "BPA",
    tenantId: tenantId,
    getFormState: e => getData(index, e),
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  })))) : null);
}

const getDocuments = fiDocuments => {
  const returnDocuments = [{
    title: "BPA_DOCUMENT_DETAILS_LABEL",
    values: fiDocuments === null || fiDocuments === void 0 ? void 0 : fiDocuments.map(doc => {
      var _doc$documentType;
      return {
        title: doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.replaceAll('.', '_'),
        documentType: doc === null || doc === void 0 ? void 0 : doc.documentType,
        documentUid: doc === null || doc === void 0 ? void 0 : doc.documentUid,
        fileStoreId: doc === null || doc === void 0 ? void 0 : doc.fileStoreId,
        id: doc === null || doc === void 0 ? void 0 : doc.id,
        url: doc === null || doc === void 0 ? void 0 : doc.url
      };
    })
  }];
  return returnDocuments;
};
function InspectionReport(_ref) {
  let {
    fiReport,
    isCitizen = false
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "10px"
    }
  }, isCitizen ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    style: {
      fontSize: "24px"
    }
  }, "" + t("BPA_FI_REPORT")) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      fontSize: "24px"
    }
  }, "" + t("BPA_FI_REPORT")), fiReport.map((fiData, index) => {
    var _fiData$date, _fiData$date2, _fiData$date3, _fiData$questions, _fiData$questions2;
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        maxWidth: "950px",
        minWidth: "280px",
        marginBottom: "24px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        fontSize: "20px"
      }
    }, (fiReport === null || fiReport === void 0 ? void 0 : fiReport.length) == 1 ? "" + t("BPA_FI_REPORT") : t("BPA_FI_REPORT") + " - " + (index + 1)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_FI_DATE_LABEL"),
      text: fiData !== null && fiData !== void 0 && fiData.date ? fiData.date.includes("-") ? ((_fiData$date = fiData.date) === null || _fiData$date === void 0 ? void 0 : _fiData$date.split("-")[2]) + "/" + ((_fiData$date2 = fiData.date) === null || _fiData$date2 === void 0 ? void 0 : _fiData$date2.split("-")[1]) + "/" + ((_fiData$date3 = fiData.date) === null || _fiData$date3 === void 0 ? void 0 : _fiData$date3.split("-")[0]) : fiData === null || fiData === void 0 ? void 0 : fiData.date : "NA"
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_FI_TIME_LABEL"),
      text: fiData !== null && fiData !== void 0 && fiData.time ? fiData === null || fiData === void 0 ? void 0 : fiData.time : "NA"
    }), (fiData === null || fiData === void 0 ? void 0 : (_fiData$questions = fiData.questions) === null || _fiData$questions === void 0 ? void 0 : _fiData$questions.length) && (fiData === null || fiData === void 0 ? void 0 : (_fiData$questions2 = fiData.questions) === null || _fiData$questions2 === void 0 ? void 0 : _fiData$questions2.map(qstn => /*#__PURE__*/React__default.createElement("div", {
      style: {
        background: "white",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        marginTop: "10px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("" + qstn.question),
      text: qstn !== null && qstn !== void 0 && qstn.value ? qstn === null || qstn === void 0 ? void 0 : qstn.value : "NA"
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_ENTER_REMARKS"),
      text: qstn.remarks ? qstn.remarks : "NA"
    })))), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getDocuments(fiData === null || fiData === void 0 ? void 0 : fiData.docs),
      svgStyles: {
        width: "100px",
        height: "100px",
        viewBox: "0 0 25 25",
        minWidth: "100px"
      }
    })));
  })));
}

function SelectDocument$5(_ref) {
  let {
    t,
    document: doc,
    setNocDocuments,
    setError,
    nocDocuments
  } = _ref;
  const filteredDocument = nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.filter(item => {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  const tenantId = Digit.ULBService.getStateId();
  const [selectedDocument, setSelectedDocument] = React.useState();
  const [file, setFile] = React.useState(null);
  const [uploadedFile, setUploadedFile] = React.useState(() => (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null);
  const allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfile(e) {
    e && setFile(e.file);
  }
  React.useEffect(() => {
    var _doc$dropdownData, _doc$dropdownData$;
    if (doc !== null && doc !== void 0 && (_doc$dropdownData = doc.dropdownData) !== null && _doc$dropdownData !== void 0 && (_doc$dropdownData$ = _doc$dropdownData[0]) !== null && _doc$dropdownData$ !== void 0 && _doc$dropdownData$.code) {
      setNocDocuments(prev => {
        var _doc$dropdownData3;
        const filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(item => {
          var _doc$dropdownData2, _doc$dropdownData2$;
          return (item === null || item === void 0 ? void 0 : item.documentType) !== (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : (_doc$dropdownData2$ = _doc$dropdownData2[0]) === null || _doc$dropdownData2$ === void 0 ? void 0 : _doc$dropdownData2$.code);
        });
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) {
          return filteredDocumentsByDocumentType;
        }
        const filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(item => (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile);
        return [...filteredDocumentsByFileStoreId, {
          documentType: doc === null || doc === void 0 ? void 0 : (_doc$dropdownData3 = doc.dropdownData) === null || _doc$dropdownData3 === void 0 ? void 0 : _doc$dropdownData3[0].code,
          fileStoreId: uploadedFile,
          documentUid: uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || ""
        }];
      });
    }
  }, [uploadedFile]);
  React.useEffect(() => {
    (function () {
      try {
        setError(null);
        const _temp4 = function () {
          if (file) {
            const allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            const _temp3 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                const _temp2 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    const _temp = _catch(function () {
                      setUploadedFile(null);
                      return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp && _temp.then) return _temp.then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            if (_temp3 && _temp3.then) return _temp3.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  const getData = state => {
    let data = Object.fromEntries(state);
    let newArr = Object.values(data);
    selectfile(newArr[newArr.length - 1]);
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "98%",
      marginRight: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      width: "100%"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t("TL_BUTTON_UPLOAD FILE") + "*" : "" + t("TL_BUTTON_UPLOAD FILE")), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "NOC",
    tenantId: tenantId,
    getFormState: e => getData(e),
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  }))));
}
const NOCDocuments = _ref2 => {
  var _bpaActionsDetails$da;
  let {
    t,
    noc,
    docs,
    isNoc,
    applicationData,
    NOCdata,
    bpaActionsDetails
  } = _ref2;
  const tenantId = Digit.ULBService.getStateId();
  const stateId = Digit.ULBService.getStateId();
  const bpaApplicationStatus = (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) || "";
  const actions = (bpaActionsDetails === null || bpaActionsDetails === void 0 ? void 0 : (_bpaActionsDetails$da = bpaActionsDetails.data) === null || _bpaActionsDetails$da === void 0 ? void 0 : _bpaActionsDetails$da.nextActions) || [];
  const {
    isLoading: nocDocsLoading,
    data: nocDocs
  } = Digit.Hooks.obps.useMDMS(stateId, "NOC", ["DocumentTypeMapping"], {
    enabled: isNoc
  });
  const {
    isLoading: bpaDocsLoading,
    data: bpaDocs
  } = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["DocTypeMapping"], {
    enabled: !isNoc
  });
  const {
    isLoading: commonDocsLoading,
    data: commonDocs
  } = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["DocumentType"]);
  const [commonDocMaping, setCommonDocMaping] = React.useState([]);
  const [nocTaxDocuments, setNocTaxDocuments] = React.useState([]);
  const [checkEnablingDocs, setCheckEnablingDocs] = React.useState(false);
  const [nocDocuments, setNocDocuments] = Digit.Hooks.useSessionStorage(noc === null || noc === void 0 ? void 0 : noc.nocType, []);
  const [error, setError] = React.useState(null);
  const isEmployee = window.location.href.includes("/employee/");
  React.useEffect(() => {
    var _commonDocs$commonMa;
    setCommonDocMaping(commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : _commonDocs$commonMa.DocumentType);
  }, [commonDocs]);
  React.useEffect(() => {
    var _filteredData, _filteredData$, _filteredData$$docTyp;
    let documents = [];
    let filteredData;
    if (isNoc) {
      var _nocDocs$NOC, _nocDocs$NOC$Document;
      filteredData = nocDocs === null || nocDocs === void 0 ? void 0 : (_nocDocs$NOC = nocDocs.NOC) === null || _nocDocs$NOC === void 0 ? void 0 : (_nocDocs$NOC$Document = _nocDocs$NOC.DocumentTypeMapping) === null || _nocDocs$NOC$Document === void 0 ? void 0 : _nocDocs$NOC$Document.filter(data => {
        return (data === null || data === void 0 ? void 0 : data.applicationType) === (noc === null || noc === void 0 ? void 0 : noc.applicationType) && (data === null || data === void 0 ? void 0 : data.nocType) === (noc === null || noc === void 0 ? void 0 : noc.nocType);
      });
    } else {
      var _bpaDocs$BPA, _bpaDocs$BPA$DocTypeM;
      filteredData = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA = bpaDocs.BPA) === null || _bpaDocs$BPA === void 0 ? void 0 : (_bpaDocs$BPA$DocTypeM = _bpaDocs$BPA.DocTypeMapping) === null || _bpaDocs$BPA$DocTypeM === void 0 ? void 0 : _bpaDocs$BPA$DocTypeM.filter(data => {
        var _applicationData$addi, _applicationData$addi2;
        return data.WFState == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) && data.RiskType == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.riskType) && data.ServiceType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi = applicationData.additionalDetails) === null || _applicationData$addi === void 0 ? void 0 : _applicationData$addi.serviceType) && data.applicationType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi2 = applicationData.additionalDetails) === null || _applicationData$addi2 === void 0 ? void 0 : _applicationData$addi2.applicationType);
      });
    }
    if ((_filteredData = filteredData) !== null && _filteredData !== void 0 && (_filteredData$ = _filteredData[0]) !== null && _filteredData$ !== void 0 && (_filteredData$$docTyp = _filteredData$.docTypes) !== null && _filteredData$$docTyp !== void 0 && _filteredData$$docTyp[0]) {
      filteredData[0].docTypes[0].nocType = filteredData[0].nocType;
      filteredData[0].docTypes[0].additionalDetails = {
        submissionDetails: noc === null || noc === void 0 ? void 0 : noc.additionalDetails,
        applicationStatus: noc === null || noc === void 0 ? void 0 : noc.applicationStatus,
        appNumberLink: noc === null || noc === void 0 ? void 0 : noc.applicationNo,
        nocNo: noc === null || noc === void 0 ? void 0 : noc.nocNo
      };
      documents.push(filteredData[0].docTypes[0]);
    }
    let documentsList = [];
    if (documents && documents.length > 0) {
      documents.map(doc => {
        let code = doc.documentType;
        doc.dropdownData = [];
        commonDocMaping === null || commonDocMaping === void 0 ? void 0 : commonDocMaping.forEach(value => {
          let values = value.code.slice(0, code === null || code === void 0 ? void 0 : code.length);
          if (code === values) {
            doc.hasDropdown = true;
            doc.dropdownData.push(value);
          }
        });
        documentsList.push(doc);
      });
      setNocTaxDocuments(documentsList);
    }
  }, [nocDocs, commonDocMaping]);
  React.useEffect(() => {
    if (bpaApplicationStatus === 'NOC_VERIFICATION_INPROGRESS' && (actions === null || actions === void 0 ? void 0 : actions.length) > 0) setCheckEnablingDocs(true);else setCheckEnablingDocs(false);
  }, [applicationData, bpaActionsDetails]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "1px solid #D6D5D4",
      padding: "16px 0px 16px 8px",
      background: "#FAFAFA",
      borderRadius: "5px",
      marginBottom: "24px",
      maxWidth: "950px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: isEmployee ? "" + t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER") : t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER"),
    labelStyle: {
      fontSize: "20px",
      width: "150%"
    }
  }), NOCdata && NOCdata.map((noc, index) => {
    if (noc !== null && noc !== void 0 && noc.value) {
      if ((noc === null || noc === void 0 ? void 0 : noc.field) == "STATUS") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          className: "border-none",
          label: isEmployee ? "" + t(noc === null || noc === void 0 ? void 0 : noc.title) : t(noc === null || noc === void 0 ? void 0 : noc.title),
          text: noc !== null && noc !== void 0 && noc.value ? t(noc === null || noc === void 0 ? void 0 : noc.value) : t("CS_NA"),
          textStyle: (noc === null || noc === void 0 ? void 0 : noc.value) == "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.value) == "AUTO_APPROVED" ? {
            color: "#00703C"
          } : {
            color: "#D4351C"
          }
        });
      } else {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          className: "border-none",
          label: isEmployee ? "" + t(noc === null || noc === void 0 ? void 0 : noc.title) : t(noc === null || noc === void 0 ? void 0 : noc.title),
          text: noc !== null && noc !== void 0 && noc.value ? t(noc === null || noc === void 0 ? void 0 : noc.value) : t("CS_NA")
        });
      }
    }
  })), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: docs,
    svgStyles: {
      width: "80px",
      height: "100px",
      viewBox: "0 0 25 25",
      minWidth: "80px"
    }
  }), checkEnablingDocs && (nocTaxDocuments === null || nocTaxDocuments === void 0 ? void 0 : nocTaxDocuments.map((document, index) => {
    return /*#__PURE__*/React__default.createElement(SelectDocument$5, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setNocDocuments: setNocDocuments,
      nocDocuments: nocDocuments,
      checkEnablingDocs: checkEnablingDocs
    });
  })));
};

const PermissionCheck = _ref => {
  let {
    permissions,
    t
  } = _ref;
  const [approvalChecks, setApprovalChecks, clearApprovals] = Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS", permissions === null || permissions === void 0 ? void 0 : permissions.map(permission => ({
    label: permission,
    checked: false
  })));
  const [newApprovals, setNewApprovals, clearNewApprovals] = Digit.Hooks.useSessionStorage('OBPS_NEW_APPROVALS', []);
  React.useEffect(() => {
    return () => {
      Digit.SessionStorage.del("OBPS_NEW_APPROVALS");
      Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS");
    };
  }, []);
  const handleAdd = () => {
    setNewApprovals([...newApprovals, {
      label: ''
    }]);
  };
  const handleRemove = index => {
    const values = [...newApprovals];
    values.splice(index, 1);
    setNewApprovals([...values]);
  };
  const handleChange = (event, index) => {
    setNewApprovals(() => {
      return newApprovals === null || newApprovals === void 0 ? void 0 : newApprovals.map((approval, id) => {
        if (index === id) {
          var _event$target;
          return {
            label: event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value
          };
        }
        return approval;
      });
    });
  };
  const handleCheck = (event, label, index) => {
    const isChecked = event.target.checked;
    setApprovalChecks(() => {
      return approvalChecks === null || approvalChecks === void 0 ? void 0 : approvalChecks.map((approval, id) => {
        if (index === id) {
          return {
            ...approval,
            checked: isChecked
          };
        }
        return approval;
      });
    });
  };
  const isMobile = window.Digit.Utils.browser.isMobile();
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      marginBottom: "16px",
      fontSize: "24px"
    }
  }, t("BPA_PERMIT_CONDITIONS")), approvalChecks === null || approvalChecks === void 0 ? void 0 : approvalChecks.map((permission, index) => /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
    key: index,
    styles: {
      margin: "20px 0 40px",
      maxWidth: isMobile ? "100%" : "70%"
    },
    label: permission === null || permission === void 0 ? void 0 : permission.label,
    checked: permission === null || permission === void 0 ? void 0 : permission.checked,
    onChange: event => handleCheck(event, permission === null || permission === void 0 ? void 0 : permission.label, index),
    isLabelFirst: true,
    index: index
  })), newApprovals === null || newApprovals === void 0 ? void 0 : newApprovals.map((approval, index) => /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    key: index,
    value: approval === null || approval === void 0 ? void 0 : approval.label,
    onChange: event => handleChange(event, index),
    textInputStyle: {
      maxWidth: isMobile ? "96%" : "830px",
      width: isMobile ? "96%" : "830px"
    },
    style: isMobile ? {
      paddingRight: "10%"
    } : {},
    placeholder: t("BPA_ENTER_PERMIT_CONDITIONS_LABEL")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Close, {
      style: {
        float: "right",
        position: "relative",
        bottom: "32px",
        marginTop: "-22px",
        marginRight: isMobile ? "5%" : "35%"
      }
    }))),
    style: {},
    onClick: e => handleRemove(index)
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      color: "#a82227",
      maxWidth: isMobile ? "fit-content" : "10%",
      marginRight: "3%"
    },
    label: t("BPA_ADD_MORE"),
    onClick: handleAdd
  }));
};

function PropertyDocuments(_ref) {
  let {
    documents,
    svgStyles = {},
    isSendBackFlow = false
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const [filesArray, setFilesArray] = React.useState(() => []);
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [pdfFiles, setPdfFiles] = React.useState({});
  React.useEffect(() => {
    var _acc;
    let acc = [];
    documents === null || documents === void 0 ? void 0 : documents.forEach((element, index, array) => {
      acc = [...acc, ...(element.values ? element.values : [])];
    });
    setFilesArray((_acc = acc) === null || _acc === void 0 ? void 0 : _acc.map(value => value === null || value === void 0 ? void 0 : value.fileStoreId));
  }, [documents]);
  React.useEffect(() => {
    var _documents$;
    if (filesArray !== null && filesArray !== void 0 && filesArray.length && (documents === null || documents === void 0 ? void 0 : (_documents$ = documents[0]) === null || _documents$ === void 0 ? void 0 : _documents$.BS) === "BillAmend") {
      Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getCurrentTenantId()).then(res => {
        setPdfFiles(res === null || res === void 0 ? void 0 : res.data);
      });
    } else if (filesArray !== null && filesArray !== void 0 && filesArray.length) {
      Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId()).then(res => {
        setPdfFiles(res === null || res === void 0 ? void 0 : res.data);
      });
    }
  }, [filesArray]);
  const checkLocation = window.location.href.includes("employee/tl") || window.location.href.includes("/obps") || window.location.href.includes("employee/ws");
  const isStakeholderApplication = window.location.href.includes("stakeholder");
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, !isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map((document, index) => {
    var _document$values;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: checkLocation ? {
        marginTop: "32px",
        marginBottom: "18px",
        color: "#0B0C0C, 100%",
        fontSize: "24px",
        lineHeight: "30px"
      } : {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        flexWrap: "wrap",
        justifyContent: "flex-start"
      }
    }, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values = document.values) === null || _document$values === void 0 ? void 0 : _document$values.map((value, index) => {
      var _pdfFiles$value$fileS, _value$documentType;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: (_pdfFiles$value$fileS = pdfFiles[value.fileStoreId]) === null || _pdfFiles$value$fileS === void 0 ? void 0 : _pdfFiles$value$fileS.split(",")[0],
        style: {
          minWidth: "80px",
          marginRight: "10px",
          maxWidth: "100px",
          height: "auto"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          justifyContent: "center"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), /*#__PURE__*/React__default.createElement("p", {
        style: checkLocation ? {
          marginTop: "8px",
          fontWeight: "bold",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F",
          textAlign: "center"
        } : {
          marginTop: "8px",
          fontWeight: "bold"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), isSendBackFlow ? value !== null && value !== void 0 && (_value$documentType = value.documentType) !== null && _value$documentType !== void 0 && _value$documentType.includes("NOC") ? /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType.split(".")[1])) : /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType)) : "");
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })), isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map((document, index) => {
    var _document$values2;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", null, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values2 = document.values) === null || _document$values2 === void 0 ? void 0 : _document$values2.map((value, index) => {
      var _pdfFiles$value$fileS2;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: (_pdfFiles$value$fileS2 = pdfFiles[value.fileStoreId]) === null || _pdfFiles$value$fileS2 === void 0 ? void 0 : _pdfFiles$value$fileS2.split(",")[0],
        style: {
          minWidth: svgStyles !== null && svgStyles !== void 0 && svgStyles.minWidth ? svgStyles === null || svgStyles === void 0 ? void 0 : svgStyles.minWidth : "160px",
          marginRight: "20px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          maxWidth: "940px",
          padding: "8px",
          borderRadius: "4px",
          border: "1px solid #D6D5D4",
          background: "#FAFAFA"
        }
      }, /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontWeight: "bold",
          marginBottom: "10px"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), value !== null && value !== void 0 && value.docInfo ? /*#__PURE__*/React__default.createElement("div", {
        style: {
          fontSize: "12px",
          color: "#505A5F",
          fontWeight: 400,
          lineHeight: "15px",
          marginBottom: "10px"
        }
      }, "" + t(value === null || value === void 0 ? void 0 : value.docInfo)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F",
          fontWeight: "400"
        }
      }, "" + t(value === null || value === void 0 ? void 0 : value.title))));
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })));
}

function PropertyEstimates(_ref) {
  let {
    taxHeadEstimatesCalculation
  } = _ref;
  const {
    taxHeadEstimates
  } = taxHeadEstimatesCalculation;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "40px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: t("ES_PT_TITLE_TAX_HEADS"),
    text: t("ES_PT_TITLE_AMOUNT"),
    className: "border-none",
    textStyle: {
      fontWeight: "bold"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, {
    style: {
      margin: "16px 0",
      width: "40%"
    }
  }), taxHeadEstimates === null || taxHeadEstimates === void 0 ? void 0 : taxHeadEstimates.map((estimate, index) => {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      key: t(estimate.taxHeadCode),
      label: t(estimate.taxHeadCode),
      text: "\u20B9 " + estimate.estimateAmount || "N/A",
      last: index === (taxHeadEstimates === null || taxHeadEstimates === void 0 ? void 0 : taxHeadEstimates.length) - 1,
      className: "border-none",
      textStyle: {
        color: "#505A5F"
      },
      labelStyle: {
        color: "#505A5F"
      }
    });
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, {
    style: {
      margin: "16px 0",
      width: "40%"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: t("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),
    text: "\u20B9 " + (taxHeadEstimatesCalculation === null || taxHeadEstimatesCalculation === void 0 ? void 0 : taxHeadEstimatesCalculation.totalAmount) || "N/A",
    className: "border-none",
    textStyle: {
      fontSize: "24px",
      fontWeight: "bold"
    }
  })));
}

function PropertyFloors(_ref) {
  let {
    floors
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, floors.map(floor => {
    var _floor$values;
    return /*#__PURE__*/React__default.createElement("div", {
      key: t(floor === null || floor === void 0 ? void 0 : floor.title),
      style: {
        marginTop: "19px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(floor === null || floor === void 0 ? void 0 : floor.title)), floor === null || floor === void 0 ? void 0 : (_floor$values = floor.values) === null || _floor$values === void 0 ? void 0 : _floor$values.map((value, index) => {
      var _value$values;
      return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
        style: {
          marginBottom: "16px",
          color: "#505A5F",
          fontSize: "16px",
          marginTop: index !== 0 ? "16px" : "revert"
        }
      }, t(value.title)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          padding: "8px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          border: "1px solid #D6D5D4",
          padding: "16px",
          marginTop: "8px",
          borderRadius: "4px",
          background: "#FAFAFA",
          maxWidth: "100%"
        }
      }, value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.map((value, index) => {
        var _value$values2;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title),
          text: t(value.value) || "N/A",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values2 = value.values) === null || _value$values2 === void 0 ? void 0 : _value$values2.length) - 1,
          caption: value.caption,
          className: "border-none"
        });
      }))));
    }));
  }));
}

function PropertyOwners(_ref) {
  let {
    owners
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const checkOwnerLength = (owners === null || owners === void 0 ? void 0 : owners.length) || 1;
  let cardStyles = {
    marginTop: "19px"
  };
  let statusTableStyles = {
    position: "relative",
    padding: "8px"
  };
  let rowContainerStyle = {
    justifyContent: "space-between",
    fontSize: "16px",
    lineHeight: "19px",
    color: "#0B0C0C"
  };
  if ( Number(checkOwnerLength) > 1) {
    cardStyles = {
      marginTop: "19px",
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      borderRadius: "4px",
      padding: "8px",
      lineHeight: "19px",
      maxWidth: "600px",
      minWidth: "280px"
    };
  } else if ( !(Number(checkOwnerLength) > 1)) {
    cardStyles = {
      marginTop: "19px",
      lineHeight: "19px",
      maxWidth: "600px",
      minWidth: "280px"
    };
    statusTableStyles = {
      position: "relative",
      marginTop: "19px"
    };
  }
  if (window.location.href.includes("obps")) {
    cardStyles = {
      ...cardStyles,
      maxWidth: "950px"
    };
    cardStyles = {
      ...cardStyles,
      maxWidth: "950px"
    };
    rowContainerStyle = {};
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, owners.map((owner, index) => {
    var _owner$values;
    return /*#__PURE__*/React__default.createElement("div", {
      key: t(owner === null || owner === void 0 ? void 0 : owner.title),
      style: cardStyles
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style:  Number(checkOwnerLength) > 1 ? {
        marginBottom: "8px",
        paddingBottom: "9px",
        color: "#0B0C0C",
        fontSize: "16px",
        lineHeight: "19px"
      } : {
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    },  Number(checkOwnerLength) > 1 ? t(owner === null || owner === void 0 ? void 0 : owner.title) + " " + (index + 1) : t(owner === null || owner === void 0 ? void 0 : owner.title)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
      style: statusTableStyles
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        maxWidth: "640px",
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
        width: "auto"
      }
    }), owner === null || owner === void 0 ? void 0 : (_owner$values = owner.values) === null || _owner$values === void 0 ? void 0 : _owner$values.map((value, index) => {
      var _value$values;
      if (value.map === true && value.value !== "N/A") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title),
          text: /*#__PURE__*/React__default.createElement("img", {
            src: t(value.value),
            alt: "",
            privacy: value === null || value === void 0 ? void 0 : value.privacy
          })
        });
      }
      return /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        key: t(value.title),
        label:  "" + t(value.title),
        text: t(value.value) || "N/A",
        last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
        caption: value.caption,
        className: "border-none",
        textStyle: value.textStyle,
        privacy: value === null || value === void 0 ? void 0 : value.privacy,
        rowContainerStyle: rowContainerStyle
      }));
    }))));
  }));
}

const ScruntinyDetails = _ref => {
  var _scrutinyDetails$valu, _scrutinyDetails$perm, _scrutinyDetails$scru;
  let {
    scrutinyDetails,
    paymentsList = []
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const getTextValues = data => {
    if (data !== null && data !== void 0 && data.value && data !== null && data !== void 0 && data.isTransLate) return /*#__PURE__*/React__default.createElement("span", {
      style: {
        color: "#00703C"
      }
    }, t(data === null || data === void 0 ? void 0 : data.value));else if (data !== null && data !== void 0 && data.value && data !== null && data !== void 0 && data.isTransLate) return t(data === null || data === void 0 ? void 0 : data.value);else if (data !== null && data !== void 0 && data.value) return data === null || data === void 0 ? void 0 : data.value;else t("NA");
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, !(scrutinyDetails !== null && scrutinyDetails !== void 0 && scrutinyDetails.isChecklist) && /*#__PURE__*/React__default.createElement("div", {
    style: {
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      padding: "8px",
      borderRadius: "4px",
      maxWidth: "950px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement("div", null, scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$valu = scrutinyDetails.values) === null || _scrutinyDetails$valu === void 0 ? void 0 : _scrutinyDetails$valu.map((value, index) => {
    if (value !== null && value !== void 0 && value.isUnit) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: (value === null || value === void 0 ? void 0 : value.value) === "Paid" ? {
        color: "darkgreen"
      } : (value === null || value === void 0 ? void 0 : value.value) === "Unpaid" ? {
        color: "red"
      } : {},
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.value ? getTextValues(value) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("NA"),
      labelStyle: value !== null && value !== void 0 && value.isHeader ? {
        fontSize: "20px"
      } : {}
    });else if (value !== null && value !== void 0 && value.isHeader && !(value !== null && value !== void 0 && value.isUnit)) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else if (value !== null && value !== void 0 && value.isSubTitle && !(value !== null && value !== void 0 && value.isUnit)) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px",
        margin: "0px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: (value === null || value === void 0 ? void 0 : value.value) === "Paid" ? {
        color: "darkgreen",
        wordBreak: "break-all"
      } : (value === null || value === void 0 ? void 0 : value.value) === "Unpaid" ? {
        color: "red",
        wordBreak: "break-all"
      } : {
        wordBreak: "break-all"
      },
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: getTextValues(value),
      labelStyle: value !== null && value !== void 0 && value.isHeader ? {
        fontSize: "20px"
      } : {}
    });
  }), scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$perm = scrutinyDetails.permit) === null || _scrutinyDetails$perm === void 0 ? void 0 : _scrutinyDetails$perm.map((value, ind) => {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        fontWeight: "400"
      }
    }, value === null || value === void 0 ? void 0 : value.title);
  })), /*#__PURE__*/React__default.createElement("div", null, scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$scru = scrutinyDetails.scruntinyDetails) === null || _scrutinyDetails$scru === void 0 ? void 0 : _scrutinyDetails$scru.map((report, index) => {
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t(report === null || report === void 0 ? void 0 : report.title),
      labelStyle: {
        width: "150%"
      }
    }), /*#__PURE__*/React__default.createElement("a", {
      href: report === null || report === void 0 ? void 0 : report.value
    }, " ", /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), " "), /*#__PURE__*/React__default.createElement("p", {
      style: {
        margin: "8px 0px",
        fontWeight: "bold",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#505A5F"
      }
    }, t(report === null || report === void 0 ? void 0 : report.text)));
  })))));
};

const SubOccupancyTable = _ref => {
  var _edcrDetails$values, _edcrDetails$subOccup, _edcrDetails$subOccup2, _edcrDetails$subOccup3, _edcrDetails$subOccup4;
  let {
    edcrDetails,
    applicationData
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const isMobile = window.Digit.Utils.browser.isMobile();
  const tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  const accessData = plot => {
    const name = plot;
    return (originalRow, rowIndex, columns) => {
      return originalRow[name];
    };
  };
  const tableColumns = React.useMemo(() => {
    return tableHeader.map(ob => ({
      Header: t("" + ob.name),
      accessor: accessData(ob.id),
      id: ob.id
    }));
  });
  function getFloorData(block) {
    var _block$building;
    let floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : _block$building.floors.map(ob => {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  const stringReplaceAll = function (str, searcher, replaceWith) {
    if (str === void 0) {
      str = "";
    }
    if (searcher === void 0) {
      searcher = "";
    }
    if (replaceWith === void 0) {
      replaceWith = "";
    }
    if (searcher == "") return str;
    while (str.includes(searcher)) {
      str = str.replace(searcher, replaceWith);
    }
    return str;
  };
  function getSubOccupancyValues(index) {
    var _applicationData$land;
    let values = applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$land = applicationData.landInfo) === null || _applicationData$land === void 0 ? void 0 : _applicationData$land.unit;
    let returnValue = "";
    if ((values === null || values === void 0 ? void 0 : values.length) > 0) {
      var _values$index, _values$index$usageCa;
      let splitArray = (_values$index = values[index]) === null || _values$index === void 0 ? void 0 : (_values$index$usageCa = _values$index.usageCategory) === null || _values$index$usageCa === void 0 ? void 0 : _values$index$usageCa.split(',');
      if (splitArray !== null && splitArray !== void 0 && splitArray.length) {
        const returnValueArray = splitArray.map(data => data ? "" + t("BPA_SUBOCCUPANCYTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.toUpperCase(), "-", "_")) : "NA");
        returnValue = returnValueArray.join(', ');
      }
    }
    return returnValue ? returnValue : "NA";
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      padding: "8px",
      borderRadius: "4px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$values = edcrDetails.values) === null || _edcrDetails$values === void 0 ? void 0 : _edcrDetails$values.map((value, index) => {
    if (value !== null && value !== void 0 && value.isHeader) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      labelStyle: {
        width: "100%",
        fontSize: "20px"
      },
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : ""
    });
  })), edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$subOccup = edcrDetails.subOccupancyTableDetails) === null || _edcrDetails$subOccup === void 0 ? void 0 : (_edcrDetails$subOccup2 = _edcrDetails$subOccup[0]) === null || _edcrDetails$subOccup2 === void 0 ? void 0 : (_edcrDetails$subOccup3 = _edcrDetails$subOccup2.value) === null || _edcrDetails$subOccup3 === void 0 ? void 0 : (_edcrDetails$subOccup4 = _edcrDetails$subOccup3.planDetail) === null || _edcrDetails$subOccup4 === void 0 ? void 0 : _edcrDetails$subOccup4.blocks.map((block, index) => {
    var _edcrDetails$subOccup5, _edcrDetails$subOccup6, _edcrDetails$subOccup7, _edcrDetails$subOccup8, _edcrDetails$subOccup9;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$subOccup5 = edcrDetails.subOccupancyTableDetails) === null || _edcrDetails$subOccup5 === void 0 ? void 0 : (_edcrDetails$subOccup6 = _edcrDetails$subOccup5[0]) === null || _edcrDetails$subOccup6 === void 0 ? void 0 : (_edcrDetails$subOccup7 = _edcrDetails$subOccup6.value) === null || _edcrDetails$subOccup7 === void 0 ? void 0 : (_edcrDetails$subOccup8 = _edcrDetails$subOccup7.planDetail) === null || _edcrDetails$subOccup8 === void 0 ? void 0 : (_edcrDetails$subOccup9 = _edcrDetails$subOccup8.blocks) === null || _edcrDetails$subOccup9 === void 0 ? void 0 : _edcrDetails$subOccup9.length) > 0 ? {
        marginBottom: "30px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        maxWidth: "950px",
        minWidth: "280px"
      } : {
        marginBottom: "30px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "8px",
        paddingBottom: "9px",
        color: "#0B0C0C",
        fontSize: "18px",
        lineHeight: "19px"
      }
    }, t("BPA_BLOCK_SUBHEADER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: {
        wordBreak: "break-word"
      },
      label: "" + t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getSubOccupancyValues(index)
    })), /*#__PURE__*/React__default.createElement("div", {
      style: window.location.href.includes("citizen") || isMobile ? {
        overflow: "scroll"
      } : {
        maxWidth: "950px",
        maxHeight: "280px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false,
      initSortId: "S N ",
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: cellInfo => {
        return {
          style: {}
        };
      }
    })));
  })));
};

const Reason$1 = _ref => {
  let {
    headComment,
    otherComment
  } = _ref;
  return /*#__PURE__*/React__default.createElement("div", {
    className: "checkpoint-comments-wrap"
  }, /*#__PURE__*/React__default.createElement("h4", null, headComment), /*#__PURE__*/React__default.createElement("p", null, otherComment));
};

const TLCaption = _ref => {
  var _data$wfComment, _data$thumbnailsToSho, _data$thumbnailsToSho2;
  let {
    data,
    OpenImage,
    privacy = {}
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement("div", null, data.date && /*#__PURE__*/React__default.createElement("p", null, data.date), /*#__PURE__*/React__default.createElement("p", null, data.name), data.mobileNumber && /*#__PURE__*/React__default.createElement("span", {
    style: {
      display: "inline-flex",
      width: "fit-content",
      marginLeft: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TelePhone, {
    mobile: data.mobileNumber,
    privacy: privacy
  }), /*#__PURE__*/React__default.createElement("p", null, "\xA0\xA0\xA0\xA0")), data.source && /*#__PURE__*/React__default.createElement("p", null, t("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_" + data.source.toUpperCase())), data.comment && /*#__PURE__*/React__default.createElement(Reason$1, {
    otherComment: data === null || data === void 0 ? void 0 : data.otherComment,
    headComment: data === null || data === void 0 ? void 0 : data.comment
  }), data !== null && data !== void 0 && data.wfComment ? /*#__PURE__*/React__default.createElement("div", null, data === null || data === void 0 ? void 0 : (_data$wfComment = data.wfComment) === null || _data$wfComment === void 0 ? void 0 : _data$wfComment.map(e => /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("WF_COMMON_COMMENTS")), /*#__PURE__*/React__default.createElement("p", null, e)))) : null, (data === null || data === void 0 ? void 0 : (_data$thumbnailsToSho = data.thumbnailsToShow) === null || _data$thumbnailsToSho === void 0 ? void 0 : (_data$thumbnailsToSho2 = _data$thumbnailsToSho.thumbs) === null || _data$thumbnailsToSho2 === void 0 ? void 0 : _data$thumbnailsToSho2.length) > 0 ? /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("CS_COMMON_ATTACHMENTS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.DisplayPhotos, {
    srcs: data === null || data === void 0 ? void 0 : data.thumbnailsToShow.thumbs,
    onClick: (src, index) => {
      OpenImage(src, index, data === null || data === void 0 ? void 0 : data.thumbnailsToShow);
    }
  })) : null);
};

function TLTradeAccessories(_ref) {
  let {
    units
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, units.map((unit, index) => {
    var _unit$values;
    return (
      /*#__PURE__*/
      React__default.createElement("div", {
        key: t(unit === null || unit === void 0 ? void 0 : unit.title),
        style: {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "600px",
          minWidth: "280px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
        style: {
          marginBottom: "8px",
          paddingBottom: "9px",
          color: "#0B0C0C",
          fontSize: "16px",
          lineHeight: "19px"
        }
      }, t(unit === null || unit === void 0 ? void 0 : unit.title) + " " + (index + 1)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          marginTop: "19px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          position: "absolute",
          maxWidth: "640px",
          top: 0,
          left: 0,
          bottom: 0,
          right: 0,
          width: "auto"
        }
      }), unit === null || unit === void 0 ? void 0 : (_unit$values = unit.values) === null || _unit$values === void 0 ? void 0 : _unit$values.map((value, index) => {
        var _value$values;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title) + ":",
          text: t(value.value) || "N/A",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
          caption: value.caption,
          className: "border-none",
          rowContainerStyle: {
            justifyContent: "space-between",
            fontSize: "16px",
            lineHeight: "19px",
            color: "#0B0C0C"
          }
        });
      }))))
    );
  }));
}

function TLTradeUnits(_ref) {
  let {
    units
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, units.map((unit, index) => {
    var _unit$values;
    return (
      /*#__PURE__*/
      React__default.createElement("div", {
        key: t(unit === null || unit === void 0 ? void 0 : unit.title),
        style: {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "600px",
          minWidth: "280px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
        style: {
          marginBottom: "9px",
          paddingBottom: "9px",
          color: "#0B0C0C",
          fontSize: "16px",
          lineHeight: "19px"
        }
      }, t(unit === null || unit === void 0 ? void 0 : unit.title) + " " + (index + 1)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          marginTop: "19px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          position: "absolute",
          maxWidth: "640px",
          top: 0,
          left: 0,
          bottom: 0,
          right: 0,
          width: "auto"
        }
      }), unit === null || unit === void 0 ? void 0 : (_unit$values = unit.values) === null || _unit$values === void 0 ? void 0 : _unit$values.map((value, index) => {
        var _value$values;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title) + ":",
          text: t(value.value) || "NA",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
          caption: value.caption,
          className: "border-none",
          rowContainerStyle: {
            justifyContent: "space-between",
            fontSize: "16px",
            lineHeight: "19px",
            color: "#0B0C0C"
          }
        });
      }))))
    );
  }));
}

const cardSubHeaderStyles = () => {
  return {
    fontSize: "24px",
    marginBottom: "16px",
    marginTop: "32px"
  };
};
const WSAdditonalDetails = _ref => {
  var _wsAdditionalDetails$, _wsAdditionalDetails$2, _wsAdditionalDetails$3, _wsAdditionalDetails$4;
  let {
    wsAdditionalDetails,
    oldValue
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  let filters = getQueryStringParams(location.search);
  const isModify = filters === null || filters === void 0 ? void 0 : filters.mode;
  var {
    connectionDetails,
    plumberDetails,
    roadCuttingDetails,
    activationDetails
  } = (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : wsAdditionalDetails.additionalDetails) || {
    connectionDetails: [],
    plumberDetails: []
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      lineHeight: "19px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$ = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$ === void 0 ? void 0 : _wsAdditionalDetails$.connectionDetails) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: cardSubHeaderStyles()
  }, t("WS_COMMON_CONNECTION_DETAIL")), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "connection-details-new-value-wrapper"
  }, connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails.map((value, index) => {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.oldValue ? value === null || value === void 0 ? void 0 : value.oldValue : value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : ""
    }));
  })))), (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$2 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$2 === void 0 ? void 0 : _wsAdditionalDetails$2.plumberDetails) && isModify != "MODIFY" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: cardSubHeaderStyles()
  }, t("WS_COMMON_PLUMBER_DETAILS")), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "plumber-details-new-value-wrapper"
  }, plumberDetails === null || plumberDetails === void 0 ? void 0 : plumberDetails.map((value, index) => {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.oldValue ? value === null || value === void 0 ? void 0 : value.oldValue : value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : "",
      privacy: value.privacy
    });
  })))), (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$3 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$3 === void 0 ? void 0 : _wsAdditionalDetails$3.roadCuttingDetails) && isModify != "MODIFY" && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: cardSubHeaderStyles()
  }, t("WS_ROAD_CUTTING_DETAILS")), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "plumber-details-new-value-wrapper"
  }, roadCuttingDetails === null || roadCuttingDetails === void 0 ? void 0 : roadCuttingDetails.map(value => {
    var _value$values;
    return /*#__PURE__*/React__default.createElement("div", {
      style: (roadCuttingDetails === null || roadCuttingDetails === void 0 ? void 0 : roadCuttingDetails.length) > 1 ? {
        border: "1px solid #D6D5D4",
        background: "#FAFAFA",
        borderRadius: "4px",
        padding: "10px 10px 0px 10px",
        margin: "5px 0px"
      } : {}
    }, value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.map(roadValue => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      key: "" + roadValue.title,
      label: "" + t("" + roadValue.title),
      text: roadValue !== null && roadValue !== void 0 && roadValue.oldValue ? roadValue === null || roadValue === void 0 ? void 0 : roadValue.oldValue : roadValue !== null && roadValue !== void 0 && roadValue.value ? roadValue === null || roadValue === void 0 ? void 0 : roadValue.value : ""
    })));
  })))), (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$4 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$4 === void 0 ? void 0 : _wsAdditionalDetails$4.activationDetails) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: cardSubHeaderStyles()
  }, t("WS_ACTIVATION_DETAILS")), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "plumber-details-new-value-wrapper"
  }, activationDetails === null || activationDetails === void 0 ? void 0 : activationDetails.map((value, index) => {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.oldValue ? value === null || value === void 0 ? void 0 : value.oldValue : value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : ""
    });
  }))))));
};

const Penality_menu = [{
  title: "PT_PENDING_DUES_FROM_EARLIER",
  value: "Pending dues from earlier"
}, {
  title: "PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",
  value: "Miscalculation of earlier Assessment"
}, {
  title: "PT_ONE_TIME_PENALITY",
  value: "One time penality"
}, {
  title: "PT_OTHERS",
  value: "Others"
}];
const Rebate_menu = [{
  title: "PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",
  value: "Advanced Paid By Citizen Earlier"
}, {
  title: "PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",
  value: "Rebate provided by commissioner/EO"
}, {
  title: "PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",
  value: "Additional amount charged from the citizen"
}, {
  title: "PT_OTHERS",
  value: "Others"
}];
const WSFeeEstimation = _ref => {
  var _wsAdditionalDetails$, _wsAdditionalDetails$20, _fields$adhocPenaltyR, _fields$adhocRebateRe;
  let {
    wsAdditionalDetails,
    workflowDetails
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA", {});
  const [sessionBillFormData, setSessionBillFormData, clearBillSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA", {});
  const isPaid = wsAdditionalDetails !== null && wsAdditionalDetails !== void 0 && (_wsAdditionalDetails$ = wsAdditionalDetails.additionalDetails) !== null && _wsAdditionalDetails$ !== void 0 && _wsAdditionalDetails$.isPaid ? true : false;
  const [popup, showPopUp] = React.useState(false);
  const [fields, setFields] = React.useState(sessionFormData ? sessionFormData : {});
  const [showToast, setShowToast] = React.useState(null);
  const [billDetails, setBillDetails] = React.useState(wsAdditionalDetails.additionalDetails.data ? wsAdditionalDetails.additionalDetails.data : {});
  const [values, setValues] = React.useState(wsAdditionalDetails.additionalDetails.values ? wsAdditionalDetails.additionalDetails.values : []);
  const stateCode = Digit.ULBService.getStateId();
  const {
    isMdmsLoading,
    data: mdmsRes
  } = Digit.Hooks.ws.useMDMS(stateCode, "BillingService", ["TaxHeadMaster"]);
  React.useEffect(() => {
    var _wsAdditionalDetails$2, _wsAdditionalDetails$3, _sessionFormData$bill;
    const data = {
      ...(wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$2 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$2 === void 0 ? void 0 : (_wsAdditionalDetails$3 = _wsAdditionalDetails$2.appDetails) === null || _wsAdditionalDetails$3 === void 0 ? void 0 : _wsAdditionalDetails$3.additionalDetails)
    };
    if ((sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$bill = sessionFormData.billDetails) === null || _sessionFormData$bill === void 0 ? void 0 : _sessionFormData$bill.length) > 0) {
      var _sessionFormData$bill2, _sessionFormData$bill3, _sessionFormData$bill4, _sessionFormData$bill5, _sessionFormData$bill6, _sessionFormData$bill7, _sessionFormData$bill8;
      const values = [{
        title: "WS_APPLICATION_FEE_HEADER",
        value: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$bill2 = sessionFormData.billDetails) === null || _sessionFormData$bill2 === void 0 ? void 0 : (_sessionFormData$bill3 = _sessionFormData$bill2[0]) === null || _sessionFormData$bill3 === void 0 ? void 0 : _sessionFormData$bill3.fee)
      }, {
        title: "WS_SERVICE_FEE_HEADER",
        value: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$bill4 = sessionFormData.billDetails) === null || _sessionFormData$bill4 === void 0 ? void 0 : (_sessionFormData$bill5 = _sessionFormData$bill4[0]) === null || _sessionFormData$bill5 === void 0 ? void 0 : _sessionFormData$bill5.charge)
      }, {
        title: "WS_TAX_HEADER",
        value: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$bill6 = sessionFormData.billDetails) === null || _sessionFormData$bill6 === void 0 ? void 0 : (_sessionFormData$bill7 = _sessionFormData$bill6[0]) === null || _sessionFormData$bill7 === void 0 ? void 0 : _sessionFormData$bill7.taxAmount)
      }];
      setValues(values);
      setBillDetails(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$bill8 = sessionFormData.billDetails) === null || _sessionFormData$bill8 === void 0 ? void 0 : _sessionFormData$bill8[0]);
    } else {
      setSessionFormData(data);
      setFields(data);
    }
  }, []);
  let validation = {};
  const Heading = props => {
    return /*#__PURE__*/React__default.createElement("h1", {
      className: "heading-m"
    }, props.label);
  };
  const Close = () => /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
  const CloseBtn = props => {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "icon-bg-secondary",
      onClick: props.onClick
    }, /*#__PURE__*/React__default.createElement(Close, null));
  };
  const closeToast = () => {
    setShowToast(false);
  };
  const addAdhocRebatePenality = e => {
    const adhocAmount = fields !== null && fields !== void 0 && fields.adhocPenalty ? Number(fields === null || fields === void 0 ? void 0 : fields.adhocPenalty) : 0;
    const rebateAmount = fields !== null && fields !== void 0 && fields.adhocRebate ? Number(fields === null || fields === void 0 ? void 0 : fields.adhocRebate) : 0;
    if (adhocAmount || rebateAmount) {
      var _wsAdditionalDetails$4, _wsAdditionalDetails$5;
      const totalAmount = wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$4 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$4 === void 0 ? void 0 : (_wsAdditionalDetails$5 = _wsAdditionalDetails$4.data) === null || _wsAdditionalDetails$5 === void 0 ? void 0 : _wsAdditionalDetails$5.totalAmount;
      if (rebateAmount > totalAmount) {
        setShowToast({
          isError: false,
          isWarning: true,
          key: "error",
          message: t("ERR_WS_REBATE_GREATER_THAN_AMOUNT")
        });
      } else {
        var _wsAdditionalDetails$10, _wsAdditionalDetails$11, _wsAdditionalDetails$12, _wsAdditionalDetails$13, _wsAdditionalDetails$14, _wsAdditionalDetails$15, _wsAdditionalDetails$16, _wsAdditionalDetails$17, _wsAdditionalDetails$18, _wsAdditionalDetails$19;
        const applicationNo = wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$10 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$10 === void 0 ? void 0 : (_wsAdditionalDetails$11 = _wsAdditionalDetails$10.appDetails) === null || _wsAdditionalDetails$11 === void 0 ? void 0 : _wsAdditionalDetails$11.applicationNo;
        const tenantId = wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$12 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$12 === void 0 ? void 0 : (_wsAdditionalDetails$13 = _wsAdditionalDetails$12.appDetails) === null || _wsAdditionalDetails$13 === void 0 ? void 0 : _wsAdditionalDetails$13.tenantId;
        const appAdditionalDetails = {
          ...(wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$14 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$14 === void 0 ? void 0 : (_wsAdditionalDetails$15 = _wsAdditionalDetails$14.appDetails) === null || _wsAdditionalDetails$15 === void 0 ? void 0 : _wsAdditionalDetails$15.additionalDetails),
          ...fields
        };
        wsAdditionalDetails.additionalDetails.appDetails.additionalDetails = appAdditionalDetails;
        const data = {
          CalculationCriteria: (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$16 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$16 === void 0 ? void 0 : (_wsAdditionalDetails$17 = _wsAdditionalDetails$16.appDetails) === null || _wsAdditionalDetails$17 === void 0 ? void 0 : _wsAdditionalDetails$17.service) == "WATER" ? [{
            applicationNo: applicationNo,
            tenantId: tenantId,
            waterConnection: wsAdditionalDetails.additionalDetails.appDetails
          }] : [{
            applicationNo: applicationNo,
            tenantId: tenantId,
            sewerageConnection: wsAdditionalDetails.additionalDetails.appDetails
          }],
          isconnectionCalculation: false
        };
        let businessService = (wsAdditionalDetails === null || wsAdditionalDetails === void 0 ? void 0 : (_wsAdditionalDetails$18 = wsAdditionalDetails.additionalDetails) === null || _wsAdditionalDetails$18 === void 0 ? void 0 : (_wsAdditionalDetails$19 = _wsAdditionalDetails$18.appDetails) === null || _wsAdditionalDetails$19 === void 0 ? void 0 : _wsAdditionalDetails$19.service) == "WATER" ? "WS" : "SW";
        Digit.WSService.wsCalculationEstimate(data, businessService).then((result, err) => {
          var _result$Calculation, _result$Calculation$, _result$Calculation$$, _result$Calculation3, _result$Calculation3$, _result$Calculation4, _result$Calculation4$, _result$Calculation5, _result$Calculation5$, _result$Calculation6, _result$Calculation6$, _result$Calculation7;
          if ((result === null || result === void 0 ? void 0 : (_result$Calculation = result.Calculation) === null || _result$Calculation === void 0 ? void 0 : (_result$Calculation$ = _result$Calculation[0]) === null || _result$Calculation$ === void 0 ? void 0 : (_result$Calculation$$ = _result$Calculation$.taxHeadEstimates) === null || _result$Calculation$$ === void 0 ? void 0 : _result$Calculation$$.length) > 0) {
            var _result$Calculation2, _result$Calculation2$, _result$Calculation2$2;
            result === null || result === void 0 ? void 0 : (_result$Calculation2 = result.Calculation) === null || _result$Calculation2 === void 0 ? void 0 : (_result$Calculation2$ = _result$Calculation2[0]) === null || _result$Calculation2$ === void 0 ? void 0 : (_result$Calculation2$2 = _result$Calculation2$.taxHeadEstimates) === null || _result$Calculation2$2 === void 0 ? void 0 : _result$Calculation2$2.forEach(data => data.amount = data.estimateAmount);
          }
          result.Calculation[0].billSlabData = _.groupBy(result === null || result === void 0 ? void 0 : (_result$Calculation3 = result.Calculation) === null || _result$Calculation3 === void 0 ? void 0 : (_result$Calculation3$ = _result$Calculation3[0]) === null || _result$Calculation3$ === void 0 ? void 0 : _result$Calculation3$.taxHeadEstimates, 'category');
          const values = [{
            title: "WS_APPLICATION_FEE_HEADER",
            value: (_result$Calculation4 = result.Calculation) === null || _result$Calculation4 === void 0 ? void 0 : (_result$Calculation4$ = _result$Calculation4[0]) === null || _result$Calculation4$ === void 0 ? void 0 : _result$Calculation4$.fee
          }, {
            title: "WS_SERVICE_FEE_HEADER",
            value: (_result$Calculation5 = result.Calculation) === null || _result$Calculation5 === void 0 ? void 0 : (_result$Calculation5$ = _result$Calculation5[0]) === null || _result$Calculation5$ === void 0 ? void 0 : _result$Calculation5$.charge
          }, {
            title: "WS_TAX_HEADER",
            value: (_result$Calculation6 = result.Calculation) === null || _result$Calculation6 === void 0 ? void 0 : (_result$Calculation6$ = _result$Calculation6[0]) === null || _result$Calculation6$ === void 0 ? void 0 : _result$Calculation6$.taxAmount
          }];
          setSessionBillFormData(cloneDeep_1(result.Calculation[0]));
          setBillDetails(result === null || result === void 0 ? void 0 : (_result$Calculation7 = result.Calculation) === null || _result$Calculation7 === void 0 ? void 0 : _result$Calculation7[0]);
          setValues(values);
          fields.billDetails = result === null || result === void 0 ? void 0 : result.Calculation;
          setSessionFormData(fields);
          showPopUp(false);
        }).catch(e => {
          var _e$response, _e$response$data, _e$response$data$Erro, _e$response2, _e$response2$data, _e$response2$data$Err;
          setShowToast({
            isError: true,
            isWarning: false,
            key: "error",
            message: e !== null && e !== void 0 && (_e$response = e.response) !== null && _e$response !== void 0 && (_e$response$data = _e$response.data) !== null && _e$response$data !== void 0 && (_e$response$data$Erro = _e$response$data.Errors[0]) !== null && _e$response$data$Erro !== void 0 && _e$response$data$Erro.message ? t("" + (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : (_e$response2$data$Err = _e$response2$data.Errors[0]) === null || _e$response2$data$Err === void 0 ? void 0 : _e$response2$data$Err.code)) : t("PT_COMMON_ADD_REBATE_PENALITY")
          });
        });
      }
    } else {
      setShowToast({
        isError: false,
        isWarning: true,
        key: "warning",
        message: t("ERR_WS_ENTER_ATLEAST_ONE_FIELD")
      });
    }
  };
  const selectedValuesData = function (value, isDropDownValue, e) {
    if (isDropDownValue === void 0) {
      isDropDownValue = false;
    }
    let values = {
      ...fields
    };
    if ((value == "adhocPenalty" || value == "adhocRebate") && e.target.value) {
      var _e$target, _e$target2;
      const targetValueSign = (e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value) == 0 ? 1 : Math.sign(e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.value) || -1;
      if (targetValueSign == 1) {
        values[value] = e.target.value;
      } else {
        values[value] = '';
      }
    } else if (isDropDownValue) {
      values[value + "_data"] = e;
      values[value] = e.title;
      if (e.title == "PT_OTHERS" && value == "adhocPenaltyReason") values["adhocPenaltyComment"] = "";
      if (e.title == "PT_OTHERS" && value == "adhocRebateReason") values["adhocRebateComment"] = "";
    } else {
      values[value] = e.target.value;
    }
    setFields(values);
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      lineHeight: "19px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, values && /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement("div", null, values === null || values === void 0 ? void 0 : values.map((value, index) => {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : ""
    });
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      border: "1px solid #D6D5D4",
      color: "#D6D5D4",
      margin: "16px 0px"
    }
  }), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    key: "WS_COMMON_TOTAL_AMT",
    label: "" + t("WS_COMMON_TOTAL_AMT"),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", (billDetails === null || billDetails === void 0 ? void 0 : billDetails.totalAmount) || 0),
    textStyle: {
      fontSize: "24px",
      fontWeight: "700"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    key: "CS_INBOX_STATUS_FILTER",
    label: "" + t("CS_INBOX_STATUS_FILTER"),
    text: isPaid ? t("WS_COMMON_PAID_LABEL") : t("WS_COMMON_NOT_PAID"),
    textStyle: !isPaid ? {
      color: "#D4351C"
    } : {
      color: "#00703C"
    }
  }))), wsAdditionalDetails !== null && wsAdditionalDetails !== void 0 && (_wsAdditionalDetails$20 = wsAdditionalDetails.additionalDetails) !== null && _wsAdditionalDetails$20 !== void 0 && _wsAdditionalDetails$20.isAdhocRebate ? /*#__PURE__*/React__default.createElement("div", {
    onClick: e => {
      showPopUp(true);
    }
  }, /*#__PURE__*/React__default.createElement("span", {
    style: {
      cursor: "pointer",
      color: "#a82227"
    }
  }, t("WS_PAYMENT_ADD_REBATE_PENALTY"))) : null, popup && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t("PT_ADD_REBATE_PENALITY")
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: () => {
        setFields(sessionFormData);
        showPopUp(false);
      }
    }),
    actionCancelLabel: t("PT_CANCEL"),
    actionCancelOnSubmit: () => {
      setFields(sessionFormData);
      showPopUp(false);
    },
    actionSaveLabel: t("PT_ADD"),
    actionSaveOnSubmit: e => addAdhocRebatePenality(),
    hideSubmit: false,
    popupStyles: {
      overflowY: "auto"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "10px 10px 1px 10px",
      margin: "0px 0px 15px 0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      fontSize: "16px",
      fontWeight: "700",
      lineHeight: "18px",
      padding: "0px",
      margin: "0px 0px 10px 0px"
    }
  }, t("PT_AD_PENALTY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_TX_HEADS")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    isMandatory: true,
    option: Penality_menu,
    optionKey: "title",
    select: e => selectedValuesData("adhocPenaltyReason", true, e),
    selected: (fields === null || fields === void 0 ? void 0 : fields.adhocPenaltyReason_data) || "",
    isPropertyAssess: true,
    name: "adhocPenaltyReason_data",
    t: t
  })), (fields === null || fields === void 0 ? void 0 : (_fields$adhocPenaltyR = fields.adhocPenaltyReason_data) === null || _fields$adhocPenaltyR === void 0 ? void 0 : _fields$adhocPenaltyR.title) === "PT_OTHERS" && /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_REASON")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    style: {
      background: "#FAFAFA"
    },
    t: t,
    type: "text",
    isMandatory: false,
    name: "adhocPenaltyComment",
    value: (fields === null || fields === void 0 ? void 0 : fields.adhocPenaltyComment) || "",
    onChange: e => selectedValuesData("adhocPenaltyComment", false, e)
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z-.`' ]*$",
    type: "text",
    title: t("TL_NAME_ERROR_MESSAGE")
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_HEAD_AMT")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    style: {
      background: "#FAFAFA"
    },
    t: t,
    type: "number",
    isMandatory: false,
    name: "adhocPenalty",
    value: (fields === null || fields === void 0 ? void 0 : fields.adhocPenalty) || "",
    onChange: e => selectedValuesData("adhocPenalty", false, e)
  }, validation = {
    isRequired: true,
    pattern: "^[1-9]+[0-9]*$",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG")
  })))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "10px 10px 1px 10px",
      margin: "0px 0px 15px 0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      fontSize: "16px",
      fontWeight: "700",
      lineHeight: "18px",
      padding: "0px",
      margin: "0px 0px 10px 0px"
    }
  }, t("PT_AD_REBATE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_TX_HEADS")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    isMandatory: true,
    option: Rebate_menu,
    optionKey: "title",
    select: e => selectedValuesData("adhocRebateReason", true, e),
    selected: (fields === null || fields === void 0 ? void 0 : fields.adhocRebateReason_data) || "",
    name: "adhocRebateReason_data",
    isPropertyAssess: true,
    t: t
  })), (fields === null || fields === void 0 ? void 0 : (_fields$adhocRebateRe = fields.adhocRebateReason_data) === null || _fields$adhocRebateRe === void 0 ? void 0 : _fields$adhocRebateRe.title) === "PT_OTHERS" && /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_REASON")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    style: {
      background: "#FAFAFA"
    },
    t: t,
    type: "text",
    isMandatory: false,
    name: "adhocRebateComment",
    value: (fields === null || fields === void 0 ? void 0 : fields.adhocRebateComment) || "",
    onChange: e => selectedValuesData("adhocRebateComment", false, e)
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z-.`' ]*$",
    type: "text",
    title: t("TL_NAME_ERROR_MESSAGE")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("PT_HEAD_AMT")), /*#__PURE__*/React__default.createElement("div", {
    className: "field"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    style: {
      background: "#FAFAFA"
    },
    t: t,
    type: "number",
    isMandatory: false,
    name: "adhocRebate",
    value: (fields === null || fields === void 0 ? void 0 : fields.adhocRebate) || "",
    onChange: e => selectedValuesData("adhocRebate", false, e)
  }, validation = {
    isRequired: true,
    pattern: "^[1-9]+[0-9]*$",
    title: t("ERR_DEFAULT_INPUT_FIELD_MSG")
  }))))), " "), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    style: {
      zIndex: "10000"
    },
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.isWarning,
    error: showToast !== null && showToast !== void 0 && showToast.isWarning ? false : true,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    onClose: closeToast,
    isDleteBtn: true
  })));
};

const EyeSvgINdex$1 = _ref => {
  let {
    style
  } = _ref;
  return /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement("svg", {
    style: {
      ...style
    },
    display: "inline",
    width: "22",
    height: "16",
    viewBox: "0 0 22 16",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",
    fill: "#a82227"
  })));
};
const InfoDetails = _ref2 => {
  let {
    t,
    userType = false,
    infoBannerLabel = "",
    infoClickLable = "",
    infoClickInfoLabel = "",
    infoClickInfoLabel1 = ""
  } = _ref2;
  userType = userType || Digit.SessionStorage.get("userType");
  const isMobile = window.Digit.Utils.browser.isMobile();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: isMobile ? {} : {
      width: "80%"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "info-banner-wrap",
    style: {
      color: "#3498DB",
      margin: "0px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.InfoBannerIcon, null), /*#__PURE__*/React__default.createElement("h2", {
    style: {
      color: "#3498DB"
    }
  }, t(infoBannerLabel))), t(infoClickLable) + " ", /*#__PURE__*/React__default.createElement(EyeSvgINdex$1, {
    style: {
      display: "inline",
      marginBottom: "5px"
    }
  }), " " + t(infoClickInfoLabel), /*#__PURE__*/React__default.createElement("div", null, " " + t(infoClickInfoLabel1)))));
};

const ViewBreakup = _ref => {
  var _wsAdditionalDetails$, _breakUpData$billSlab, _breakUpData$billSlab2, _breakUpData$billSlab3, _breakUpData$billSlab4, _breakUpData$billSlab5, _breakUpData$billSlab6;
  let {
    wsAdditionalDetails,
    workflowDetails
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const [popup, showPopUp] = React.useState(false);
  const [breakUpData, setBreakUpData] = React.useState({});
  const Heading = props => {
    return /*#__PURE__*/React__default.createElement("h1", {
      className: "heading-m"
    }, props.label);
  };
  const Close = () => /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
  const CloseBtn = props => {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "icon-bg-secondary",
      onClick: props.onClick
    }, /*#__PURE__*/React__default.createElement(Close, null));
  };
  const onPopupOpen = () => {
    var _sessionBillFormData$;
    let breakupData = wsAdditionalDetails.additionalDetails.data || {};
    const sessionBillData = sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA");
    const sessionBillFormData = sessionBillData ? JSON.parse(sessionBillData) : {};
    if (sessionBillFormData !== null && sessionBillFormData !== void 0 && (_sessionBillFormData$ = sessionBillFormData.value) !== null && _sessionBillFormData$ !== void 0 && _sessionBillFormData$.totalAmount) breakupData = sessionBillFormData === null || sessionBillFormData === void 0 ? void 0 : sessionBillFormData.value;
    setBreakUpData(breakupData);
    showPopUp(true);
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      lineHeight: "19px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, wsAdditionalDetails !== null && wsAdditionalDetails !== void 0 && (_wsAdditionalDetails$ = wsAdditionalDetails.additionalDetails) !== null && _wsAdditionalDetails$ !== void 0 && _wsAdditionalDetails$.isViewBreakup ? /*#__PURE__*/React__default.createElement("div", {
    onClick: e => onPopupOpen(),
    style: {
      marginTop: "12px"
    }
  }, /*#__PURE__*/React__default.createElement("span", {
    style: {
      cursor: "pointer",
      color: "#a82227"
    }
  }, t("WS_PAYMENT_VIEW_BREAKUP"))) : null, popup && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t("WS_CALCULATION_BREAKUP")
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: () => {
        showPopUp(false);
      }
    }),
    hideSubmit: true,
    popupStyles: {
      overflowY: "auto"
    },
    headerBarMainStyle: {
      marginBottom: "0px"
    },
    popupModuleMianStyles: {
      paddingTop: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      padding: "10px",
      paddingTop: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      margin: "10px 0px"
    }
  }, t("WS_APPLICATION_FEE_HEADER")), breakUpData === null || breakUpData === void 0 ? void 0 : (_breakUpData$billSlab = breakUpData.billSlabData) === null || _breakUpData$billSlab === void 0 ? void 0 : (_breakUpData$billSlab2 = _breakUpData$billSlab.FEE) === null || _breakUpData$billSlab2 === void 0 ? void 0 : _breakUpData$billSlab2.map(data => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "" + (data === null || data === void 0 ? void 0 : data.taxHeadCode),
    label: "" + t("" + (data === null || data === void 0 ? void 0 : data.taxHeadCode)),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(data === null || data === void 0 ? void 0 : data.amount) || 0),
    textStyle: {
      textAlign: "right"
    }
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      marginBottom: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",
    label: "" + t("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(breakUpData === null || breakUpData === void 0 ? void 0 : breakUpData.fee) || 0),
    textStyle: {
      textAlign: "right",
      fontWeight: "700",
      fontSize: "24px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      margin: "10px 0px"
    }
  }, t("WS_SERVICE_FEE_HEADER")), breakUpData === null || breakUpData === void 0 ? void 0 : (_breakUpData$billSlab3 = breakUpData.billSlabData) === null || _breakUpData$billSlab3 === void 0 ? void 0 : (_breakUpData$billSlab4 = _breakUpData$billSlab3.CHARGES) === null || _breakUpData$billSlab4 === void 0 ? void 0 : _breakUpData$billSlab4.map(data => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "" + (data === null || data === void 0 ? void 0 : data.taxHeadCode),
    label: "" + t("" + (data === null || data === void 0 ? void 0 : data.taxHeadCode)),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(data === null || data === void 0 ? void 0 : data.amount) || 0),
    textStyle: {
      textAlign: "right"
    }
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      marginBottom: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",
    label: "" + t("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(breakUpData === null || breakUpData === void 0 ? void 0 : breakUpData.charge) || 0),
    textStyle: {
      textAlign: "right",
      fontWeight: "700",
      fontSize: "24px"
    }
  }), breakUpData === null || breakUpData === void 0 ? void 0 : (_breakUpData$billSlab5 = breakUpData.billSlabData) === null || _breakUpData$billSlab5 === void 0 ? void 0 : (_breakUpData$billSlab6 = _breakUpData$billSlab5.TAX) === null || _breakUpData$billSlab6 === void 0 ? void 0 : _breakUpData$billSlab6.map(data => /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "" + (data === null || data === void 0 ? void 0 : data.taxHeadCode),
    label: "" + t("" + (data === null || data === void 0 ? void 0 : data.taxHeadCode)),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(data === null || data === void 0 ? void 0 : data.amount) || 0),
    textStyle: {
      textAlign: "right"
    }
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      marginBottom: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    rowContainerStyle: {
      margin: "0px"
    },
    labelStyle: {
      width: "50%"
    },
    key: "PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",
    label: "" + t("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),
    text: /*#__PURE__*/React__default.createElement("span", null, "\u20B9", Number(breakUpData === null || breakUpData === void 0 ? void 0 : breakUpData.totalAmount) || 0),
    textStyle: {
      textAlign: "right",
      fontWeight: "700",
      fontSize: "24px"
    }
  })))));
};

function ApplicationDetailsContent(_ref) {
  var _applicationDetails$a, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12;
  let {
    applicationDetails,
    workflowDetails,
    isDataLoading,
    applicationData,
    businessService,
    timelineStatusPrefix,
    showTimeLine = true,
    statusAttribute = "status",
    paymentsList,
    oldValue,
    isInfoLabel = false
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  function OpenImage(imageSource, index, thumbnailsToShow) {
    var _thumbnailsToShow$ful;
    window.open(thumbnailsToShow === null || thumbnailsToShow === void 0 ? void 0 : (_thumbnailsToShow$ful = thumbnailsToShow.fullImage) === null || _thumbnailsToShow$ful === void 0 ? void 0 : _thumbnailsToShow$ful[0], "_blank");
  }
  const convertEpochToDateDMY = dateEpoch => {
    if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
      return "NA";
    }
    const dateFromApi = new Date(dateEpoch);
    let month = dateFromApi.getMonth() + 1;
    let day = dateFromApi.getDate();
    let year = dateFromApi.getFullYear();
    month = (month > 9 ? "" : "0") + month;
    day = (day > 9 ? "" : "0") + day;
    return day + "/" + month + "/" + year;
  };
  const getTimelineCaptions = function (checkpoint, index) {
    if (index === void 0) {
      index = 0;
    }
    if (checkpoint.state === "OPEN" || checkpoint.status === "INITIATED" && !window.location.href.includes("/obps/")) {
      var _applicationData$audi;
      const caption = {
        date: convertEpochToDateDMY(applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$audi = applicationData.auditDetails) === null || _applicationData$audi === void 0 ? void 0 : _applicationData$audi.createdTime),
        source: (applicationData === null || applicationData === void 0 ? void 0 : applicationData.channel) || ""
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: caption
      });
    } else if (window.location.href.includes("/obps/") || window.location.href.includes("/noc/") || window.location.href.includes("/ws/")) {
      var _checkpoint$assignes, _checkpoint$assignes$, _checkpoint$auditDeta, _checkpoint$assignes2, _checkpoint$assignes3, _applicationData$proc, _applicationData$proc2, _applicationData$proc3, _checkpoint$assignes4, _checkpoint$assignes5, _applicationData$proc4, _applicationData$proc5, _applicationData$proc6, _applicationData$proc7, _applicationData$proc8, _applicationData$proc9, _checkpoint$assignes6, _checkpoint$assignes7;
      const privacy = {
        uuid: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes = checkpoint.assignes) === null || _checkpoint$assignes === void 0 ? void 0 : (_checkpoint$assignes$ = _checkpoint$assignes[0]) === null || _checkpoint$assignes$ === void 0 ? void 0 : _checkpoint$assignes$.uuid,
        fieldName: "mobileNumber",
        model: "User",
        showValue: false,
        loadData: {
          serviceName: "/egov-workflow-v2/egov-wf/process/_search",
          requestBody: {},
          requestParam: {
            tenantId: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId,
            businessIds: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo,
            history: true
          },
          jsonPath: "ProcessInstances[0].assignes[0].mobileNumber",
          isArray: false,
          d: res => {
            let resultstring = "";
            resultstring = "+91 " + _.get(res, "ProcessInstances[" + index + "].assignes[0].mobileNumber");
            return resultstring;
          }
        }
      };
      const caption = {
        date: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$auditDeta = checkpoint.auditDetails) === null || _checkpoint$auditDeta === void 0 ? void 0 : _checkpoint$auditDeta.lastModified,
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes2 = checkpoint.assignes) === null || _checkpoint$assignes2 === void 0 ? void 0 : (_checkpoint$assignes3 = _checkpoint$assignes2[0]) === null || _checkpoint$assignes3 === void 0 ? void 0 : _checkpoint$assignes3.name,
        mobileNumber: (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$proc = applicationData.processInstance) === null || _applicationData$proc === void 0 ? void 0 : (_applicationData$proc2 = _applicationData$proc.assignes) === null || _applicationData$proc2 === void 0 ? void 0 : (_applicationData$proc3 = _applicationData$proc2[0]) === null || _applicationData$proc3 === void 0 ? void 0 : _applicationData$proc3.uuid) === (checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes4 = checkpoint.assignes) === null || _checkpoint$assignes4 === void 0 ? void 0 : (_checkpoint$assignes5 = _checkpoint$assignes4[0]) === null || _checkpoint$assignes5 === void 0 ? void 0 : _checkpoint$assignes5.uuid) && applicationData !== null && applicationData !== void 0 && (_applicationData$proc4 = applicationData.processInstance) !== null && _applicationData$proc4 !== void 0 && (_applicationData$proc5 = _applicationData$proc4.assignes) !== null && _applicationData$proc5 !== void 0 && (_applicationData$proc6 = _applicationData$proc5[0]) !== null && _applicationData$proc6 !== void 0 && _applicationData$proc6.mobileNumber ? applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$proc7 = applicationData.processInstance) === null || _applicationData$proc7 === void 0 ? void 0 : (_applicationData$proc8 = _applicationData$proc7.assignes) === null || _applicationData$proc8 === void 0 ? void 0 : (_applicationData$proc9 = _applicationData$proc8[0]) === null || _applicationData$proc9 === void 0 ? void 0 : _applicationData$proc9.mobileNumber : checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes6 = checkpoint.assignes) === null || _checkpoint$assignes6 === void 0 ? void 0 : (_checkpoint$assignes7 = _checkpoint$assignes6[0]) === null || _checkpoint$assignes7 === void 0 ? void 0 : _checkpoint$assignes7.mobileNumber,
        comment: t(checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.comment),
        wfComment: checkpoint.wfComment,
        thumbnailsToShow: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.thumbnailsToShow
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: caption,
        OpenImage: OpenImage,
        privacy: privacy
      });
    } else {
      var _applicationData$audi2, _checkpoint$assignes8, _checkpoint$assignes9, _checkpoint$assignes10, _checkpoint$assignes11;
      const caption = {
        date: convertEpochToDateDMY(applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$audi2 = applicationData.auditDetails) === null || _applicationData$audi2 === void 0 ? void 0 : _applicationData$audi2.lastModifiedTime),
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes8 = checkpoint.assignes) === null || _checkpoint$assignes8 === void 0 ? void 0 : (_checkpoint$assignes9 = _checkpoint$assignes8[0]) === null || _checkpoint$assignes9 === void 0 ? void 0 : _checkpoint$assignes9.name,
        wfComment: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.wfComment,
        mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes10 = checkpoint.assignes) === null || _checkpoint$assignes10 === void 0 ? void 0 : (_checkpoint$assignes11 = _checkpoint$assignes10[0]) === null || _checkpoint$assignes11 === void 0 ? void 0 : _checkpoint$assignes11.mobileNumber
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: caption
      });
    }
  };
  const getTranslatedValues = (dataValue, isNotTranslated) => {
    if (dataValue) {
      return !isNotTranslated ? t(dataValue) : dataValue;
    } else {
      return t("NA");
    }
  };
  const checkLocation = window.location.href.includes("employee/tl") || window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc");
  const isNocLocation = window.location.href.includes("employee/noc");
  const isBPALocation = window.location.href.includes("employee/obps");
  const isWS = window.location.href.includes("employee/ws");
  const getRowStyles = () => {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc")) {
      return {
        justifyContent: "space-between",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#0B0C0C"
      };
    } else if (checkLocation) {
      return {
        justifyContent: "space-between",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#0B0C0C"
      };
    } else {
      return {};
    }
  };
  const getTableStyles = () => {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc")) {
      return {
        position: "relative",
        marginTop: "19px"
      };
    } else if (checkLocation) {
      return {
        position: "relative",
        marginTop: "19px"
      };
    } else {
      return {};
    }
  };
  const getMainDivStyles = () => {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc") || window.location.href.includes("employee/ws")) {
      return {
        lineHeight: "19px",
        maxWidth: "950px",
        minWidth: "280px"
      };
    } else if (checkLocation) {
      return {
        lineHeight: "19px",
        maxWidth: "600px",
        minWidth: "280px"
      };
    } else {
      return {};
    }
  };
  const getTextValue = value => {
    if (value !== null && value !== void 0 && value.skip) return value.value;else if (value !== null && value !== void 0 && value.isUnit) return value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("N/A");else return value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) : t("N/A");
  };
  const getClickInfoDetails = () => {
    if (window.location.href.includes("disconnection") || window.location.href.includes("application")) {
      return "WS_DISCONNECTION_CLICK_ON_INFO_LABEL";
    } else {
      return "WS_CLICK_ON_INFO_LABEL";
    }
  };
  const getClickInfoDetails1 = () => {
    if (window.location.href.includes("disconnection") || window.location.href.includes("application")) {
      return "WS_DISCONNECTION_CLICK_ON_INFO1_LABEL";
    } else {
      return "";
    }
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      position: "relative"
    },
    className: "employeeCard-override"
  }, isInfoLabel ? /*#__PURE__*/React__default.createElement(InfoDetails, {
    t: t,
    userType: false,
    infoBannerLabel: "CS_FILE_APPLICATION_INFO_LABEL",
    infoClickLable: "WS_CLICK_ON_LABEL",
    infoClickInfoLabel: getClickInfoDetails(),
    infoClickInfoLabel1: getClickInfoDetails1()
  }) : null, applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationDetails) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.map((detail, index) => {
    var _detail$values, _detail$additionalDet, _applicationDetails$a2, _applicationDetails$a3, _applicationDetails$a4, _detail$additionalDet2, _applicationDetails$a5, _applicationDetails$a6, _detail$additionalDet3, _detail$additionalDet4, _detail$additionalDet5, _detail$additionalDet6, _detail$additionalDet7, _detail$additionalDet8, _detail$additionalDet9, _detail$additionalDet10, _detail$additionalDet11, _workflowDetails$data, _workflowDetails$data2, _detail$additionalDet12, _detail$additionalDet13, _detail$additionalDet14, _detail$additionalDet15, _detail$additionalDet16, _detail$additionalDet17, _detail$additionalDet18, _detail$additionalDet19, _detail$additionalDet20, _detail$additionalDet21, _detail$additionalDet22, _detail$additionalDet23, _detail$additionalDet24, _detail$additionalDet25, _detail$additionalDet26, _detail$additionalDet27, _detail$additionalDet28, _detail$additionalDet29, _detail$additionalDet30, _detail$additionalDet31;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: getMainDivStyles()
    }, index === 0 && !detail.asSectionHeader ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "16px",
        fontSize: "24px"
      }
    }, t(detail.title)) : /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: index == 0 && checkLocation ? {
        marginBottom: "16px",
        fontSize: "24px"
      } : {
        marginBottom: "16px",
        marginTop: "32px",
        fontSize: "24px"
      }
    }, isNocLocation ? "" + t(detail.title) : t(detail.title), detail !== null && detail !== void 0 && detail.Component ? /*#__PURE__*/React__default.createElement(detail.Component, null) : null)), (detail === null || detail === void 0 ? void 0 : detail.isTable) && /*#__PURE__*/React__default.createElement("table", {
      style: {
        tableLayout: "fixed",
        width: "100%",
        borderCollapse: "collapse"
      }
    }, /*#__PURE__*/React__default.createElement("tr", {
      style: {
        textAlign: "left"
      }
    }, detail === null || detail === void 0 ? void 0 : detail.headers.map(header => /*#__PURE__*/React__default.createElement("th", {
      style: {
        padding: "10px",
        paddingLeft: "0px"
      }
    }, t(header)))), detail === null || detail === void 0 ? void 0 : detail.tableRows.map((row, index) => {
      if (index === (detail === null || detail === void 0 ? void 0 : detail.tableRows.length) - 1) {
        return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("hr", {
          style: {
            width: "370%",
            marginTop: "15px"
          },
          className: "underline"
        }), /*#__PURE__*/React__default.createElement("tr", null, row.map(element => /*#__PURE__*/React__default.createElement("td", {
          style: {
            textAlign: "left"
          }
        }, t(element)))));
      }
      return /*#__PURE__*/React__default.createElement("tr", null, row.map(element => /*#__PURE__*/React__default.createElement("td", {
        style: {
          paddingTop: "20px",
          textAlign: "left"
        }
      }, t(element))));
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
      style: getTableStyles()
    }, (detail === null || detail === void 0 ? void 0 : detail.title) && !(detail !== null && detail !== void 0 && detail.title.includes("NOC")) && (detail === null || detail === void 0 ? void 0 : (_detail$values = detail.values) === null || _detail$values === void 0 ? void 0 : _detail$values.map((value, index) => {
      var _detail$values3;
      if (value.map === true && value.value !== "N/A") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          labelStyle: {
            wordBreak: "break-all"
          },
          textStyle: {
            wordBreak: "break-all"
          },
          key: t(value.title),
          label: t(value.title),
          text: /*#__PURE__*/React__default.createElement("img", {
            src: t(value.value),
            alt: "",
            privacy: value === null || value === void 0 ? void 0 : value.privacy
          })
        });
      }
      if ((value === null || value === void 0 ? void 0 : value.isLink) == true) {
        var _detail$values2;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: window.location.href.includes("tl") || window.location.href.includes("ws") ? /*#__PURE__*/React__default.createElement("div", {
            style: {
              width: "200%"
            }
          }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
            to: value === null || value === void 0 ? void 0 : value.to
          }, /*#__PURE__*/React__default.createElement("span", {
            className: "link",
            style: {
              color: "#a82227"
            }
          }, t(value === null || value === void 0 ? void 0 : value.title)))) : isNocLocation || isBPALocation ? "" + t(value.title) : t(value.title),
          text: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
            to: value === null || value === void 0 ? void 0 : value.to
          }, /*#__PURE__*/React__default.createElement("span", {
            className: "link",
            style: {
              color: "#a82227"
            }
          }, value === null || value === void 0 ? void 0 : value.value))),
          last: index === (detail === null || detail === void 0 ? void 0 : (_detail$values2 = detail.values) === null || _detail$values2 === void 0 ? void 0 : _detail$values2.length) - 1,
          caption: value.caption,
          className: "border-none",
          rowContainerStyle: getRowStyles(),
          labelStyle: {
            wordBreak: "break-all"
          },
          textStyle: {
            wordBreak: "break-all"
          }
        });
      }
      return /*#__PURE__*/React__default.createElement("div", null, window.location.href.includes("modify") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        key: "" + value.title,
        label: "" + t("" + value.title),
        privacy: value === null || value === void 0 ? void 0 : value.privacy,
        text: value !== null && value !== void 0 && value.oldValue ? value === null || value === void 0 ? void 0 : value.oldValue : value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : "",
        labelStyle: {
          wordBreak: "break-all"
        },
        textStyle: {
          wordBreak: "break-all"
        }
      }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        key: t(value.title),
        label: t(value.title),
        text: getTextValue(value),
        last: index === (detail === null || detail === void 0 ? void 0 : (_detail$values3 = detail.values) === null || _detail$values3 === void 0 ? void 0 : _detail$values3.length) - 1,
        caption: value.caption,
        className: "border-none",
        privacy: value === null || value === void 0 ? void 0 : value.privacy,
        rowContainerStyle: getRowStyles(),
        labelStyle: {
          wordBreak: "break-all"
        },
        textStyle: {
          wordBreak: "break-all"
        }
      }));
    })))), (detail === null || detail === void 0 ? void 0 : detail.belowComponent) && /*#__PURE__*/React__default.createElement(detail.belowComponent, null), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet = detail.additionalDetails) === null || _detail$additionalDet === void 0 ? void 0 : _detail$additionalDet.inspectionReport) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      paymentsList: paymentsList
    }), (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.applicationData) === null || _applicationDetails$a2 === void 0 ? void 0 : (_applicationDetails$a3 = _applicationDetails$a2.additionalDetails) === null || _applicationDetails$a3 === void 0 ? void 0 : (_applicationDetails$a4 = _applicationDetails$a3.fieldinspection_pending) === null || _applicationDetails$a4 === void 0 ? void 0 : _applicationDetails$a4.length) > 0 && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet2 = detail.additionalDetails) === null || _detail$additionalDet2 === void 0 ? void 0 : _detail$additionalDet2.fiReport) && /*#__PURE__*/React__default.createElement(InspectionReport, {
      fiReport: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a5 = applicationDetails.applicationData) === null || _applicationDetails$a5 === void 0 ? void 0 : (_applicationDetails$a6 = _applicationDetails$a5.additionalDetails) === null || _applicationDetails$a6 === void 0 ? void 0 : _applicationDetails$a6.fieldinspection_pending
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet3 = detail.additionalDetails) === null || _detail$additionalDet3 === void 0 ? void 0 : _detail$additionalDet3.floors) && /*#__PURE__*/React__default.createElement(PropertyFloors, {
      floors: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet4 = detail.additionalDetails) === null || _detail$additionalDet4 === void 0 ? void 0 : _detail$additionalDet4.floors
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet5 = detail.additionalDetails) === null || _detail$additionalDet5 === void 0 ? void 0 : _detail$additionalDet5.owners) && /*#__PURE__*/React__default.createElement(PropertyOwners, {
      owners: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet6 = detail.additionalDetails) === null || _detail$additionalDet6 === void 0 ? void 0 : _detail$additionalDet6.owners
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet7 = detail.additionalDetails) === null || _detail$additionalDet7 === void 0 ? void 0 : _detail$additionalDet7.units) && /*#__PURE__*/React__default.createElement(TLTradeUnits, {
      units: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet8 = detail.additionalDetails) === null || _detail$additionalDet8 === void 0 ? void 0 : _detail$additionalDet8.units
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet9 = detail.additionalDetails) === null || _detail$additionalDet9 === void 0 ? void 0 : _detail$additionalDet9.accessories) && /*#__PURE__*/React__default.createElement(TLTradeAccessories, {
      units: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet10 = detail.additionalDetails) === null || _detail$additionalDet10 === void 0 ? void 0 : _detail$additionalDet10.accessories
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet11 = detail.additionalDetails) === null || _detail$additionalDet11 === void 0 ? void 0 : _detail$additionalDet11.permissions) && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.nextActions) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.length) > 0 && /*#__PURE__*/React__default.createElement(PermissionCheck, {
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      t: t,
      permissions: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet12 = detail.additionalDetails) === null || _detail$additionalDet12 === void 0 ? void 0 : _detail$additionalDet12.permissions
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet13 = detail.additionalDetails) === null || _detail$additionalDet13 === void 0 ? void 0 : _detail$additionalDet13.obpsDocuments) && /*#__PURE__*/React__default.createElement(BPADocuments, {
      t: t,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      docs: detail.additionalDetails.obpsDocuments,
      bpaActionsDetails: workflowDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet14 = detail.additionalDetails) === null || _detail$additionalDet14 === void 0 ? void 0 : _detail$additionalDet14.noc) && /*#__PURE__*/React__default.createElement(NOCDocuments, {
      t: t,
      isNoc: true,
      NOCdata: detail.values,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      docs: detail.additionalDetails.noc,
      noc: (_detail$additionalDet15 = detail.additionalDetails) === null || _detail$additionalDet15 === void 0 ? void 0 : _detail$additionalDet15.data,
      bpaActionsDetails: workflowDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet16 = detail.additionalDetails) === null || _detail$additionalDet16 === void 0 ? void 0 : _detail$additionalDet16.scruntinyDetails) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet17 = detail.additionalDetails) === null || _detail$additionalDet17 === void 0 ? void 0 : _detail$additionalDet17.buildingExtractionDetails) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet18 = detail.additionalDetails) === null || _detail$additionalDet18 === void 0 ? void 0 : _detail$additionalDet18.subOccupancyTableDetails) && /*#__PURE__*/React__default.createElement(SubOccupancyTable, {
      edcrDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet19 = detail.additionalDetails) === null || _detail$additionalDet19 === void 0 ? void 0 : _detail$additionalDet19.documentsWithUrl) && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet20 = detail.additionalDetails) === null || _detail$additionalDet20 === void 0 ? void 0 : _detail$additionalDet20.documentsWithUrl
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet21 = detail.additionalDetails) === null || _detail$additionalDet21 === void 0 ? void 0 : _detail$additionalDet21.documents) && /*#__PURE__*/React__default.createElement(PropertyDocuments, {
      documents: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet22 = detail.additionalDetails) === null || _detail$additionalDet22 === void 0 ? void 0 : _detail$additionalDet22.documents
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet23 = detail.additionalDetails) === null || _detail$additionalDet23 === void 0 ? void 0 : _detail$additionalDet23.taxHeadEstimatesCalculation) && /*#__PURE__*/React__default.createElement(PropertyEstimates, {
      taxHeadEstimatesCalculation: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet24 = detail.additionalDetails) === null || _detail$additionalDet24 === void 0 ? void 0 : _detail$additionalDet24.taxHeadEstimatesCalculation
    }), (detail === null || detail === void 0 ? void 0 : detail.isWaterConnectionDetails) && /*#__PURE__*/React__default.createElement(WSAdditonalDetails, {
      wsAdditionalDetails: detail,
      oldValue: oldValue
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet25 = detail.additionalDetails) === null || _detail$additionalDet25 === void 0 ? void 0 : _detail$additionalDet25.redirectUrl) && /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontSize: "16px",
        lineHeight: "24px",
        fontWeight: "400",
        padding: "10px 0px"
      }
    }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet26 = detail.additionalDetails) === null || _detail$additionalDet26 === void 0 ? void 0 : (_detail$additionalDet27 = _detail$additionalDet26.redirectUrl) === null || _detail$additionalDet27 === void 0 ? void 0 : _detail$additionalDet27.url
    }, /*#__PURE__*/React__default.createElement("span", {
      className: "link",
      style: {
        color: "#a82227"
      }
    }, detail === null || detail === void 0 ? void 0 : (_detail$additionalDet28 = detail.additionalDetails) === null || _detail$additionalDet28 === void 0 ? void 0 : (_detail$additionalDet29 = _detail$additionalDet28.redirectUrl) === null || _detail$additionalDet29 === void 0 ? void 0 : _detail$additionalDet29.title))), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet30 = detail.additionalDetails) === null || _detail$additionalDet30 === void 0 ? void 0 : _detail$additionalDet30.estimationDetails) && /*#__PURE__*/React__default.createElement(WSFeeEstimation, {
      wsAdditionalDetails: detail,
      workflowDetails: workflowDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet31 = detail.additionalDetails) === null || _detail$additionalDet31 === void 0 ? void 0 : _detail$additionalDet31.estimationDetails) && /*#__PURE__*/React__default.createElement(ViewBreakup, {
      wsAdditionalDetails: detail,
      workflowDetails: workflowDetails
    }));
  }), showTimeLine && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data3 = workflowDetails.data) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.timeline) === null || _workflowDetails$data4 === void 0 ? void 0 : _workflowDetails$data4.length) > 0 && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, null), ((workflowDetails === null || workflowDetails === void 0 ? void 0 : workflowDetails.isLoading) || isDataLoading) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && !isDataLoading && /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px",
      marginTop: "32px"
    }
  }, t("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")), workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data5 = workflowDetails.data) !== null && _workflowDetails$data5 !== void 0 && _workflowDetails$data5.timeline && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data6 = workflowDetails.data) === null || _workflowDetails$data6 === void 0 ? void 0 : (_workflowDetails$data7 = _workflowDetails$data6.timeline) === null || _workflowDetails$data7 === void 0 ? void 0 : _workflowDetails$data7.length) === 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
    isCompleted: true,
    label: t("" + timelineStatusPrefix + (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data8 = workflowDetails.data) === null || _workflowDetails$data8 === void 0 ? void 0 : (_workflowDetails$data9 = _workflowDetails$data8.timeline[0]) === null || _workflowDetails$data9 === void 0 ? void 0 : _workflowDetails$data9.state)),
    customChild: getTimelineCaptions(workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data10 = workflowDetails.data) === null || _workflowDetails$data10 === void 0 ? void 0 : _workflowDetails$data10.timeline[0])
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ConnectingCheckPoints, null, (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data11 = workflowDetails.data) === null || _workflowDetails$data11 === void 0 ? void 0 : _workflowDetails$data11.timeline) && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data12 = workflowDetails.data) === null || _workflowDetails$data12 === void 0 ? void 0 : _workflowDetails$data12.timeline.map((checkpoint, index, arr) => {
    let timelineStatusPostfix = "";
    if (window.location.href.includes("/obps/")) {
      var _workflowDetails$data13, _workflowDetails$data14, _workflowDetails$data15, _workflowDetails$data16, _workflowDetails$data17, _workflowDetails$data18;
      if (workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data13 = workflowDetails.data) !== null && _workflowDetails$data13 !== void 0 && (_workflowDetails$data14 = _workflowDetails$data13.timeline[index - 1]) !== null && _workflowDetails$data14 !== void 0 && (_workflowDetails$data15 = _workflowDetails$data14.state) !== null && _workflowDetails$data15 !== void 0 && _workflowDetails$data15.includes("BACK_FROM") || workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data16 = workflowDetails.data) !== null && _workflowDetails$data16 !== void 0 && (_workflowDetails$data17 = _workflowDetails$data16.timeline[index - 1]) !== null && _workflowDetails$data17 !== void 0 && (_workflowDetails$data18 = _workflowDetails$data17.state) !== null && _workflowDetails$data18 !== void 0 && _workflowDetails$data18.includes("SEND_TO_CITIZEN")) timelineStatusPostfix = "_NOT_DONE";else if ((checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.performedAction) === "SEND_TO_ARCHITECT") timelineStatusPostfix = "_BY_ARCHITECT_DONE";else timelineStatusPostfix = index == 0 ? "" : "_DONE";
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
      keyValue: index,
      isCompleted: index === 0,
      info: checkpoint.comment,
      label: t("" + timelineStatusPrefix + ((checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.performedAction) === "REOPEN" ? checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.performedAction : checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint[statusAttribute]) + timelineStatusPostfix),
      customChild: getTimelineCaptions(checkpoint, index)
    }));
  }))))));
}

function ApplicationDetailsToast(_ref) {
  var _showToast$error, _showToast$error2, _showToast$error3, _showToast$error4, _showToast$error5, _showToast$error6, _showToast$error7, _showToast$error8, _showToast$action2, _showToast$error9, _showToast$error10, _showToast$error11, _showToast$error12, _showToast$error13, _showToast$error14, _showToast$error15, _showToast$error16, _showToast$action4;
  let {
    t,
    showToast,
    closeToast,
    businessService
  } = _ref;
  if (businessService !== null && businessService !== void 0 && businessService.includes("NewTL") || businessService !== null && businessService !== void 0 && businessService.includes("TL") || businessService !== null && businessService !== void 0 && businessService.includes("EDITRENEWAL")) {
    var _showToast$action;
    let label = "";
    switch (showToast === null || showToast === void 0 ? void 0 : (_showToast$action = showToast.action) === null || _showToast$action === void 0 ? void 0 : _showToast$action.action) {
      case "SENDBACK":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error = showToast.error) === null || _showToast$error === void 0 ? void 0 : _showToast$error.message : t("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");
        break;
      case "FORWARD":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error2 = showToast.error) === null || _showToast$error2 === void 0 ? void 0 : _showToast$error2.message : t("TL_FORWARD_SUCCESS_MESSAGE_MAIN");
        break;
      case "APPROVE":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error3 = showToast.error) === null || _showToast$error3 === void 0 ? void 0 : _showToast$error3.message : t("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");
        break;
      case "SENDBACKTOCITIZEN":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error4 = showToast.error) === null || _showToast$error4 === void 0 ? void 0 : _showToast$error4.message : t("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");
        break;
      case "REJECT":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error5 = showToast.error) === null || _showToast$error5 === void 0 ? void 0 : _showToast$error5.message : t("TL_APPROVAL_REJ_MESSAGE_HEAD");
        break;
      case "RESUBMIT":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error6 = showToast.error) === null || _showToast$error6 === void 0 ? void 0 : _showToast$error6.message : t("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");
        break;
      case "CANCEL":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error7 = showToast.error) === null || _showToast$error7 === void 0 ? void 0 : _showToast$error7.message : t("TL_TL_CANCELLED_MESSAGE_HEAD");
        break;
      default:
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error8 = showToast.error) === null || _showToast$error8 === void 0 ? void 0 : _showToast$error8.message : t("ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action2 = showToast.action) === null || _showToast$action2 === void 0 ? void 0 : _showToast$action2.action) + "_UPDATE_SUCCESS");
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: label,
      onClose: closeToast
    }));
  } else if (businessService !== null && businessService !== void 0 && businessService.includes("BPA") || businessService !== null && businessService !== void 0 && businessService.includes("BPA_LOW") || businessService !== null && businessService !== void 0 && businessService.includes("BPA_OC")) {
    var _showToast$action3;
    const getMessage = function (messages) {
      var _messages;
      if (messages === void 0) {
        messages = [];
      }
      let returnValue = messages[0];
      if (((_messages = messages) === null || _messages === void 0 ? void 0 : _messages.length) == 2) returnValue = businessService !== null && businessService !== void 0 && businessService.includes("BPA_OC") ? t(messages[1]) : t(messages[0]);else returnValue = t(messages[0]);
      return returnValue;
    };
    let label = "";
    switch (showToast === null || showToast === void 0 ? void 0 : (_showToast$action3 = showToast.action) === null || _showToast$action3 === void 0 ? void 0 : _showToast$action3.action) {
      case "REVOCATE":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error9 = showToast.error) === null || _showToast$error9 === void 0 ? void 0 : _showToast$error9.message : getMessage(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD", "BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);
        break;
      case "VERIFY_AND_FORWARD":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error10 = showToast.error) === null || _showToast$error10 === void 0 ? void 0 : _showToast$error10.message : getMessage(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "SEND_BACK_TO_CITIZEN":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error11 = showToast.error) === null || _showToast$error11 === void 0 ? void 0 : _showToast$error11.message : getMessage(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "APPROVE":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error12 = showToast.error) === null || _showToast$error12 === void 0 ? void 0 : _showToast$error12.message : getMessage(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);
        break;
      case "REJECT":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error13 = showToast.error) === null || _showToast$error13 === void 0 ? void 0 : _showToast$error13.message : getMessage(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD", "BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);
        break;
      case "FORWARD":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error14 = showToast.error) === null || _showToast$error14 === void 0 ? void 0 : _showToast$error14.message : getMessage(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "SEND_BACK_FOR_DOCUMENT_VERIFICATION":
      case "SEND_BACK_FOR_FIELD_INSPECTION":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error15 = showToast.error) === null || _showToast$error15 === void 0 ? void 0 : _showToast$error15.message : getMessage(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);
        break;
      default:
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error16 = showToast.error) === null || _showToast$error16 === void 0 ? void 0 : _showToast$error16.message : t("ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action4 = showToast.action) === null || _showToast$action4 === void 0 ? void 0 : _showToast$action4.action) + "_UPDATE_SUCCESS");
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: label,
      onClose: closeToast
    }));
  } else {
    var _showToast$error17, _showToast$action5;
    const label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error17 = showToast.error) === null || _showToast$error17 === void 0 ? void 0 : _showToast$error17.message : "ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action5 = showToast.action) === null || _showToast$action5 === void 0 ? void 0 : _showToast$action5.action) + "_UPDATE_SUCCESS";
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: t(label),
      onClose: closeToast
    }));
  }
}

function ApplicationDetailsActionBar(_ref) {
  var _user, _user$info, _user$info$roles, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _actions$, _actions$$redirection, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _actions$2, _actions$3, _actions$4;
  let {
    workflowDetails,
    displayMenu,
    onActionSelect,
    setDisplayMenu,
    businessService,
    forcedActionPrefix,
    ActionBarStyle = {},
    MenuStyle = {}
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  let user = Digit.UserService.getUser();
  const menuRef = React.useRef();
  if (window.location.href.includes("/obps") || window.location.href.includes("/noc")) {
    const userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
    const userInfo = userInfos ? JSON.parse(userInfos) : {};
    user = userInfo === null || userInfo === void 0 ? void 0 : userInfo.value;
  }
  const userRoles = (_user = user) === null || _user === void 0 ? void 0 : (_user$info = _user.info) === null || _user$info === void 0 ? void 0 : (_user$info$roles = _user$info.roles) === null || _user$info$roles === void 0 ? void 0 : _user$info$roles.map(e => e.code);
  let isSingleButton = false;
  let isMenuBotton = false;
  let actions = (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.actionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.filter(e => {
    return (userRoles === null || userRoles === void 0 ? void 0 : userRoles.some(role => {
      var _e$roles;
      return (_e$roles = e.roles) === null || _e$roles === void 0 ? void 0 : _e$roles.includes(role);
    })) || !e.roles;
  })) || (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data4 = workflowDetails.data) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4.nextActions) === null || _workflowDetails$data5 === void 0 ? void 0 : _workflowDetails$data5.filter(e => {
    return (userRoles === null || userRoles === void 0 ? void 0 : userRoles.some(role => {
      var _e$roles2;
      return (_e$roles2 = e.roles) === null || _e$roles2 === void 0 ? void 0 : _e$roles2.includes(role);
    })) || !e.roles;
  }));
  const closeMenu = () => {
    setDisplayMenu(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeMenu, displayMenu);
  if ((window.location.href.includes("/obps") || window.location.href.includes("/noc")) && (actions === null || actions === void 0 ? void 0 : actions.length) == 1 || actions !== null && actions !== void 0 && (_actions$ = actions[0]) !== null && _actions$ !== void 0 && (_actions$$redirection = _actions$.redirectionUrl) !== null && _actions$$redirection !== void 0 && _actions$$redirection.pathname.includes("/pt/property-details/") && (actions === null || actions === void 0 ? void 0 : actions.length) == 1) {
    isMenuBotton = false;
    isSingleButton = true;
  } else if ((actions === null || actions === void 0 ? void 0 : actions.length) > 0) {
    isMenuBotton = true;
    isSingleButton = false;
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && isMenuBotton && !isSingleButton && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      ...ActionBarStyle
    }
  }, displayMenu && (workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data6 = workflowDetails.data) !== null && _workflowDetails$data6 !== void 0 && (_workflowDetails$data7 = _workflowDetails$data6.actionState) !== null && _workflowDetails$data7 !== void 0 && _workflowDetails$data7.nextActions || workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data8 = workflowDetails.data) !== null && _workflowDetails$data8 !== void 0 && _workflowDetails$data8.nextActions) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Menu, {
    localeKeyPrefix: forcedActionPrefix || "WF_EMPLOYEE_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()),
    options: actions,
    optionKey: "action",
    t: t,
    onSelect: onActionSelect,
    style: MenuStyle
  }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    ref: menuRef,
    label: t("WF_TAKE_ACTION"),
    onSubmit: () => setDisplayMenu(!displayMenu)
  })), !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && !isMenuBotton && isSingleButton && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      ...ActionBarStyle
    }
  }, /*#__PURE__*/React__default.createElement("button", {
    style: {
      color: "#FFFFFF",
      fontSize: "18px"
    },
    className: "submit-bar",
    name: actions === null || actions === void 0 ? void 0 : (_actions$2 = actions[0]) === null || _actions$2 === void 0 ? void 0 : _actions$2.action,
    value: actions === null || actions === void 0 ? void 0 : (_actions$3 = actions[0]) === null || _actions$3 === void 0 ? void 0 : _actions$3.action,
    onClick: e => {
      onActionSelect((actions === null || actions === void 0 ? void 0 : actions[0]) || {});
    }
  }, t((forcedActionPrefix || "WF_EMPLOYEE_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase())) + "_" + (actions === null || actions === void 0 ? void 0 : (_actions$4 = actions[0]) === null || _actions$4 === void 0 ? void 0 : _actions$4.action)))));
}

const Close$6 = () => /*#__PURE__*/React__default.createElement("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "#FFFFFF"
}, /*#__PURE__*/React__default.createElement("path", {
  d: "M0 0h24v24H0V0z",
  fill: "none"
}), /*#__PURE__*/React__default.createElement("path", {
  d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
}));
const CloseBtn$6 = props => {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$6, null));
};
function ApplicationDetailsWarningPopup(_ref) {
  let {
    action,
    workflowDetails,
    businessService,
    isWarningPop,
    closeWarningPopup
  } = _ref;
  const {
    t
  } = reactI18next.useTranslation();
  const isMobile = window.Digit.Utils.browser.isMobile();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement("h1", {
      className: "heading-m"
    }, t("PT_DUES_ARE_PENDING")),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$6, {
      onClick: () => {
        closeWarningPopup();
      }
    }),
    hideSubmit: true,
    isDisabled: false,
    popupStyles: isMobile ? {} : {
      width: "29%",
      marginTop: "auto"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "30px"
    }
  }, /*#__PURE__*/React__default.createElement("h1", null, t("PT_YOU_HAVE"), " \u20B9", action === null || action === void 0 ? void 0 : action.AmountDueForPay, " ", t("PT_DUE_WARNING_MSG2"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    rowContainerStyle: {
      display: "flex"
    },
    labelStyle: {
      fontSize: "24px",
      fontWeight: "700",
      marginRight: "10%"
    },
    textStyle: {
      fontSize: "24px",
      fontWeight: "700",
      marginBottom: "20px"
    },
    label: "" + t("PT_AMOUNT_DUE"),
    text: "\u20B9" + t(action === null || action === void 0 ? void 0 : action.AmountDueForPay)
  }), /*#__PURE__*/React__default.createElement("div", {
    style: {
      width: "100%",
      display: "flex",
      justifyContent: "flex-end"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.ButtonSelector, {
    theme: "border",
    label: t('ES_PT_COMMON_CANCEL'),
    onSubmit: closeWarningPopup,
    style: {
      marginLeft: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ButtonSelector, {
    label: t('PT_COLLECT'),
    onSubmit: () => {
      var _action$redirectionUr;
      return window.location.assign("" + window.location.origin + (action === null || action === void 0 ? void 0 : (_action$redirectionUr = action.redirectionUrl) === null || _action$redirectionUr === void 0 ? void 0 : _action$redirectionUr.pathname));
    },
    style: {
      marginLeft: "10px"
    }
  })))), ")");
}

const ApplicationDetails = props => {
  var _workflowDetails$data;
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const state = Digit.ULBService.getStateId();
  const {
    t
  } = reactI18next.useTranslation();
  const history = reactRouterDom.useHistory();
  let {
    id: applicationNumber
  } = reactRouterDom.useParams();
  const [displayMenu, setDisplayMenu] = React.useState(false);
  const [selectedAction, setSelectedAction] = React.useState(null);
  const [showModal, setShowModal] = React.useState(false);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const [isWarningPop, setWarningPopUp] = React.useState(false);
  const {
    applicationDetails,
    showToast,
    setShowToast,
    isLoading,
    isDataLoading,
    applicationData,
    mutate,
    nocMutation,
    workflowDetails,
    businessService,
    closeToast,
    moduleCode,
    timelineStatusPrefix,
    forcedActionPrefix,
    statusAttribute,
    ActionBarStyle,
    MenuStyle,
    paymentsList,
    showTimeLine = true,
    oldValue,
    isInfoLabel = false,
    clearDataDetails
  } = props;
  React.useEffect(() => {
    if (showToast) {
      workflowDetails.revalidate();
    }
  }, [showToast]);
  function onActionSelect(action) {
    if (action) {
      if (action !== null && action !== void 0 && action.isToast) {
        setShowToast({
          key: "error",
          error: {
            message: action === null || action === void 0 ? void 0 : action.toastMessage
          }
        });
        setTimeout(closeToast, 5000);
      } else if (action !== null && action !== void 0 && action.isWarningPopUp) {
        setWarningPopUp(true);
      } else if (action !== null && action !== void 0 && action.redirectionUrll) {
        var _action$redirectionUr, _action$redirectionUr4;
        if ((action === null || action === void 0 ? void 0 : (_action$redirectionUr = action.redirectionUrll) === null || _action$redirectionUr === void 0 ? void 0 : _action$redirectionUr.action) === "ACTIVATE_CONNECTION") {
          var _action$redirectionUr2, _action$redirectionUr3, _location;
          history.push("" + (action === null || action === void 0 ? void 0 : (_action$redirectionUr2 = action.redirectionUrll) === null || _action$redirectionUr2 === void 0 ? void 0 : _action$redirectionUr2.pathname), JSON.stringify({
            data: action === null || action === void 0 ? void 0 : (_action$redirectionUr3 = action.redirectionUrll) === null || _action$redirectionUr3 === void 0 ? void 0 : _action$redirectionUr3.state,
            url: "" + ((_location = location) === null || _location === void 0 ? void 0 : _location.pathname) + location.search
          }));
        } else if ((action === null || action === void 0 ? void 0 : (_action$redirectionUr4 = action.redirectionUrll) === null || _action$redirectionUr4 === void 0 ? void 0 : _action$redirectionUr4.action) === "RE-SUBMIT-APPLICATION") {
          var _action$redirectionUr5, _action$redirectionUr6;
          history.push("" + (action === null || action === void 0 ? void 0 : (_action$redirectionUr5 = action.redirectionUrll) === null || _action$redirectionUr5 === void 0 ? void 0 : _action$redirectionUr5.pathname), {
            data: action === null || action === void 0 ? void 0 : (_action$redirectionUr6 = action.redirectionUrll) === null || _action$redirectionUr6 === void 0 ? void 0 : _action$redirectionUr6.state
          });
        } else {
          var _action$redirectionUr7;
          window.location.assign(window.location.origin + "/digit-ui/employee/payment/collect/" + (action === null || action === void 0 ? void 0 : (_action$redirectionUr7 = action.redirectionUrll) === null || _action$redirectionUr7 === void 0 ? void 0 : _action$redirectionUr7.pathname));
        }
      } else if (!(action !== null && action !== void 0 && action.redirectionUrl)) {
        setShowModal(true);
      } else {
        var _action$redirectionUr8, _action$redirectionUr9;
        history.push({
          pathname: (_action$redirectionUr8 = action.redirectionUrl) === null || _action$redirectionUr8 === void 0 ? void 0 : _action$redirectionUr8.pathname,
          state: {
            ...((_action$redirectionUr9 = action.redirectionUrl) === null || _action$redirectionUr9 === void 0 ? void 0 : _action$redirectionUr9.state)
          }
        });
      }
    }
    setSelectedAction(action);
    setDisplayMenu(false);
  }
  const queryClient = reactQuery.useQueryClient();
  const closeModal = () => {
    setSelectedAction(null);
    setShowModal(false);
  };
  const closeWarningPopup = () => {
    setWarningPopUp(false);
  };
  const submitAction = function (data, nocData, isOBPS) {
    if (nocData === void 0) {
      nocData = false;
    }
    if (isOBPS === void 0) {
      isOBPS = {};
    }
    try {
      let _exit = false;
      function _temp3(_result2) {
        if (_exit) return _result2;
        if (mutate) {
          setIsEnableLoader(true);
          mutate(data, {
            onError: (error, variables) => {
              setIsEnableLoader(false);
              setShowToast({
                key: "error",
                error
              });
              setTimeout(closeToast, 5000);
            },
            onSuccess: (data, variables) => {
              var _data$Amendments;
              sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS");
              setIsEnableLoader(false);
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.bpa) {
                data.selectedAction = selectedAction;
                history.replace("/digit-ui/employee/obps/response", {
                  data: data
                });
              }
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.isStakeholder) {
                data.selectedAction = selectedAction;
                history.push("/digit-ui/employee/obps/stakeholder-response", {
                  data: data
                });
              }
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.isNoc) {
                history.push("/digit-ui/employee/noc/response", {
                  data: data
                });
              }
              if ((data === null || data === void 0 ? void 0 : (_data$Amendments = data.Amendments) === null || _data$Amendments === void 0 ? void 0 : _data$Amendments.length) > 0) {
                var _variables$AmendmentU, _variables$AmendmentU2, _variables$AmendmentU3, _variables$AmendmentU4, _variables$AmendmentU5, _variables$AmendmentU6, _variables$AmendmentU7, _variables$AmendmentU8;
                if (variables !== null && variables !== void 0 && (_variables$AmendmentU = variables.AmendmentUpdate) !== null && _variables$AmendmentU !== void 0 && (_variables$AmendmentU2 = _variables$AmendmentU.workflow) !== null && _variables$AmendmentU2 !== void 0 && _variables$AmendmentU2.action.includes("SEND_BACK")) {
                  setShowToast({
                    key: "success",
                    label: t("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")
                  });
                } else if (variables !== null && variables !== void 0 && (_variables$AmendmentU3 = variables.AmendmentUpdate) !== null && _variables$AmendmentU3 !== void 0 && (_variables$AmendmentU4 = _variables$AmendmentU3.workflow) !== null && _variables$AmendmentU4 !== void 0 && _variables$AmendmentU4.action.includes("RE-SUBMIT")) {
                  setShowToast({
                    key: "success",
                    label: t("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")
                  });
                } else if (variables !== null && variables !== void 0 && (_variables$AmendmentU5 = variables.AmendmentUpdate) !== null && _variables$AmendmentU5 !== void 0 && (_variables$AmendmentU6 = _variables$AmendmentU5.workflow) !== null && _variables$AmendmentU6 !== void 0 && _variables$AmendmentU6.action.includes("APPROVE")) {
                  setShowToast({
                    key: "success",
                    label: t("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")
                  });
                } else if (variables !== null && variables !== void 0 && (_variables$AmendmentU7 = variables.AmendmentUpdate) !== null && _variables$AmendmentU7 !== void 0 && (_variables$AmendmentU8 = _variables$AmendmentU7.workflow) !== null && _variables$AmendmentU8 !== void 0 && _variables$AmendmentU8.action.includes("REJECT")) {
                  setShowToast({
                    key: "success",
                    label: t("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")
                  });
                }
                return;
              }
              setShowToast({
                key: "success",
                action: selectedAction
              });
              clearDataDetails && setTimeout(clearDataDetails, 3000);
              setTimeout(closeToast, 5000);
              queryClient.clear();
              queryClient.refetchQueries("APPLICATION_SEARCH");
            }
          });
        }
        closeModal();
      }
      setIsEnableLoader(true);
      if (typeof (data === null || data === void 0 ? void 0 : data.customFunctionToExecute) === "function") {
        data === null || data === void 0 ? void 0 : data.customFunctionToExecute({
          ...data
        });
      }
      const _temp2 = function () {
        if (nocData !== false && nocMutation) {
          var _nocData;
          const nocPrmomises = (_nocData = nocData) === null || _nocData === void 0 ? void 0 : _nocData.map(noc => {
            return nocMutation === null || nocMutation === void 0 ? void 0 : nocMutation.mutateAsync(noc);
          });
          const _temp = _catch(function () {
            setIsEnableLoader(true);
            return Promise.resolve(Promise.all(nocPrmomises)).then(function (values) {
              values && values.map(ob => {
                var _ob$Noc, _ob$Noc$;
                Digit.SessionStorage.del(ob === null || ob === void 0 ? void 0 : (_ob$Noc = ob.Noc) === null || _ob$Noc === void 0 ? void 0 : (_ob$Noc$ = _ob$Noc[0]) === null || _ob$Noc$ === void 0 ? void 0 : _ob$Noc$.nocType);
              });
            });
          }, function (err) {
            var _err$response, _err$response$data, _err$response$data$Er, _err$response$data$Er2, _err$response2, _err$response2$data, _err$response2$data$E, _err$response2$data$E2, _err$response3, _err$response3$data, _err$response3$data$E, _err$response3$data$E2;
            setIsEnableLoader(false);
            let errorValue = err !== null && err !== void 0 && (_err$response = err.response) !== null && _err$response !== void 0 && (_err$response$data = _err$response.data) !== null && _err$response$data !== void 0 && (_err$response$data$Er = _err$response$data.Errors) !== null && _err$response$data$Er !== void 0 && (_err$response$data$Er2 = _err$response$data$Er[0]) !== null && _err$response$data$Er2 !== void 0 && _err$response$data$Er2.code ? t(err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : (_err$response2$data$E = _err$response2$data.Errors) === null || _err$response2$data$E === void 0 ? void 0 : (_err$response2$data$E2 = _err$response2$data$E[0]) === null || _err$response2$data$E2 === void 0 ? void 0 : _err$response2$data$E2.code) : (err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : (_err$response3$data$E = _err$response3$data.Errors) === null || _err$response3$data$E === void 0 ? void 0 : (_err$response3$data$E2 = _err$response3$data$E[0]) === null || _err$response3$data$E2 === void 0 ? void 0 : _err$response3$data$E2.message) || err;
            closeModal();
            setShowToast({
              key: "error",
              error: {
                message: errorValue
              }
            });
            setTimeout(closeToast, 5000);
            _exit = true;
          });
          if (_temp && _temp.then) return _temp.then(function () {});
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(_temp3) : _temp3(_temp2));
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isLoading || isEnableLoader) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !isLoading ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(ApplicationDetailsContent, {
    applicationDetails: applicationDetails,
    workflowDetails: workflowDetails,
    isDataLoading: isDataLoading,
    applicationData: applicationData,
    businessService: businessService,
    timelineStatusPrefix: timelineStatusPrefix,
    statusAttribute: statusAttribute,
    paymentsList: paymentsList,
    showTimeLine: showTimeLine,
    oldValue: oldValue,
    isInfoLabel: isInfoLabel
  }), showModal ? /*#__PURE__*/React__default.createElement(ActionModal$6, {
    t: t,
    action: selectedAction,
    tenantId: tenantId,
    state: state,
    id: applicationNumber,
    applicationDetails: applicationDetails,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    closeModal: closeModal,
    submitAction: submitAction,
    actionData: workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : _workflowDetails$data.timeline,
    businessService: businessService,
    workflowDetails: workflowDetails,
    moduleCode: moduleCode
  }) : null, isWarningPop ? /*#__PURE__*/React__default.createElement(ApplicationDetailsWarningPopup, {
    action: selectedAction,
    workflowDetails: workflowDetails,
    businessService: businessService,
    isWarningPop: isWarningPop,
    closeWarningPopup: closeWarningPopup
  }) : null, /*#__PURE__*/React__default.createElement(ApplicationDetailsToast, {
    t: t,
    showToast: showToast,
    closeToast: closeToast,
    businessService: businessService
  }), /*#__PURE__*/React__default.createElement(ApplicationDetailsActionBar, {
    workflowDetails: workflowDetails,
    displayMenu: displayMenu,
    onActionSelect: onActionSelect,
    setDisplayMenu: setDisplayMenu,
    businessService: businessService,
    forcedActionPrefix: forcedActionPrefix,
    ActionBarStyle: ActionBarStyle,
    MenuStyle: MenuStyle
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null));
};

var FUNC_ERROR_TEXT = 'Expected a function';
function memoize(func, resolver) {
  if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function () {
    var args = arguments,
      key = resolver ? resolver.apply(this, args) : args[0],
      cache = memoized.cache;
    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || _MapCache)();
  return memoized;
}
memoize.Cache = _MapCache;
var memoize_1 = memoize;

var MAX_MEMOIZE_SIZE = 500;
function memoizeCapped(func) {
  var result = memoize_1(func, function (key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });
  var cache = result.cache;
  return result;
}
var _memoizeCapped = memoizeCapped;

var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var reEscapeChar = /\\(\\)?/g;
var stringToPath = _memoizeCapped(function (string) {
  var result = [];
  if (string.charCodeAt(0) === 46) {
    result.push('');
  }
  string.replace(rePropName, function (match, number, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);
  });
  return result;
});

const ApplicationDetails$1 = () => {
  var _mdmsCommonmastersDat, _commonPayInfo, _applicationDetails$p4, _applicationDetails$p5, _applicationDetails$p6, _applicationDetails$p7, _applicationDetails$a3, _applicationDetails$a4, _applicationDetails$a5, _applicationDetails$a6, _applicationDetails$a7, _applicationDetails$a8, _newValueFilter$, _applicationDetails$a22, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12, _workflowDetails$data13, _workflowDetails$data14, _workflowDetails$data15, _workflowDetails$data16, _workflowDetails$data17, _workflowDetails$data18, _workflowDetails$data19, _workflowDetails$data20, _workflowDetails$data23, _workflowDetails$data24, _workflowDetails$data25, _workflowDetails$data26, _workflowDetails$data27, _workflowDetails$data28, _workflowDetails$data29, _workflowDetails$data30, _workflowDetails$data31, _workflowDetails$data32, _workflowDetails$data33, _workflowDetails$data34, _workflowDetails$data35, _oldData$WaterConnect, _oldData$WaterConnect2, _oldData$SewerageConn, _oldData$SewerageConn2, _applicationDetails$a35, _applicationDetails$a36, _reciept_data$Payment2, _applicationDetails$p13, _applicationDetails$p14, _applicationDetails$p15, _applicationDetails$p16, _applicationDetails$p17, _applicationDetails$p18;
  const getRecieptSearch = function (tenantId, payments, consumerCodes, receiptKey) {
    try {
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Payments: [{
          ...payments
        }]
      }, receiptKey)).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const {
    id
  } = reactRouterDom.useParams();
  const {
    t
  } = reactI18next.useTranslation();
  const userInfo = Digit.UserService.getUser();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const stateCode = Digit.ULBService.getStateId();
  const [showToast, setShowToast] = React.useState(null);
  const [showWaringToast, setShowWaringToast] = React.useState(null);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const history = reactRouterDom.useHistory();
  const stateId = Digit.ULBService.getStateId();
  const isMobile = window.Digit.Utils.browser.isMobile();
  const [showOptions, setShowOptions] = React.useState(false);
  let filters = getQueryStringParams(location.search);
  const applicationNumber = filters === null || filters === void 0 ? void 0 : filters.applicationNumber;
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const menuRef = React.useRef();
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA", {});
  const [sessionBillFormData, setSessionBillFormData, clearBillSessionFormData] = Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA", {});
  const {
    isBillingServiceLoading,
    data: mdmsBillingServiceData
  } = Digit.Hooks.obps.useMDMS(stateCode, "BillingService", ["BusinessService"]);
  const {
    isCommonmastersLoading,
    data: mdmsCommonmastersData
  } = Digit.Hooks.obps.useMDMS(stateCode, "common-masters", ["uiCommonPay"]);
  const {
    isServicesMasterLoading,
    data: servicesMasterData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["WSEditApplicationByConfigUser"]);
  const commonPayDetails = (mdmsCommonmastersData === null || mdmsCommonmastersData === void 0 ? void 0 : (_mdmsCommonmastersDat = mdmsCommonmastersData["common-masters"]) === null || _mdmsCommonmastersDat === void 0 ? void 0 : _mdmsCommonmastersDat.uiCommonPay) || [];
  const index = commonPayDetails && commonPayDetails.findIndex(item => {
    return item.code == "WS.ONE_TIME_FEE";
  });
  let commonPayInfo = "";
  if (index > -1) commonPayInfo = commonPayDetails[index];else commonPayInfo = commonPayDetails && commonPayDetails.filter(item => item.code === "DEFAULT");
  const receiptKey = ((_commonPayInfo = commonPayInfo) === null || _commonPayInfo === void 0 ? void 0 : _commonPayInfo.receiptKey) || "consolidatedreceipt";
  const {
    isLoading: isPrivacyLoading,
    data: privacyData
  } = Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(), "DataSecurity", [{
    name: "SecurityPolicy"
  }], {
    select: data => {
      var _data$DataSecurity, _data$DataSecurity$Se;
      return (data === null || data === void 0 ? void 0 : (_data$DataSecurity = data.DataSecurity) === null || _data$DataSecurity === void 0 ? void 0 : (_data$DataSecurity$Se = _data$DataSecurity.SecurityPolicy) === null || _data$DataSecurity$Se === void 0 ? void 0 : _data$DataSecurity$Se.find(elem => (elem === null || elem === void 0 ? void 0 : elem.model) == "User")) || {};
    }
  });
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, applicationNumber, serviceType, userInfo, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  function checkforPrivacyenablement() {
    var _applicationDetails$a, _applicationDetails$a2, _applicationDetails$p, _applicationDetails$p2, _applicationDetails$p3;
    if (!isLoading && Digit.Utils.checkPrivacy(privacyData, {
      uuid: (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : (_applicationDetails$a2 = _applicationDetails$a.connectionHolders) === null || _applicationDetails$a2 === void 0 ? void 0 : _applicationDetails$a2.uuid) || (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.propertyDetails) === null || _applicationDetails$p === void 0 ? void 0 : (_applicationDetails$p2 = _applicationDetails$p.owners) === null || _applicationDetails$p2 === void 0 ? void 0 : (_applicationDetails$p3 = _applicationDetails$p2[0]) === null || _applicationDetails$p3 === void 0 ? void 0 : _applicationDetails$p3.uuid),
      fieldName: "mobileNumber",
      model: "User"
    })) return true;else return false;
  }
  let workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId,
    id: applicationNumber,
    moduleCode: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p4 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p4 === void 0 ? void 0 : (_applicationDetails$p5 = _applicationDetails$p4[0]) === null || _applicationDetails$p5 === void 0 ? void 0 : _applicationDetails$p5.businessService,
    config: {
      enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$p6 = applicationDetails.processInstancesDetails) !== null && _applicationDetails$p6 !== void 0 && (_applicationDetails$p7 = _applicationDetails$p6[0]) !== null && _applicationDetails$p7 !== void 0 && _applicationDetails$p7.businessService ? true : false,
      privacy: Digit.Utils.getPrivacyObject()
    }
  });
  const {
    data: reciept_data,
    isLoading: recieptDataLoading
  } = Digit.Hooks.useRecieptSearch({
    tenantId: tenantId,
    businessService: serviceType == "WATER" ? "WS.ONE_TIME_FEE" : "SW.ONE_TIME_FEE",
    consumerCodes: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a3 = applicationDetails.applicationData) === null || _applicationDetails$a3 === void 0 ? void 0 : _applicationDetails$a3.applicationNo
  }, {
    enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a4 = applicationDetails.applicationData) !== null && _applicationDetails$a4 !== void 0 && (_applicationDetails$a5 = _applicationDetails$a4.applicationType) !== null && _applicationDetails$a5 !== void 0 && _applicationDetails$a5.includes("NEW_") ? true : false,
    privacy: Digit.Utils.getPrivacyObject()
  });
  const {
    data: oldData
  } = Digit.Hooks.ws.useOldValue({
    tenantId,
    filters: {
      connectionNumber: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a6 = applicationDetails.applicationData) === null || _applicationDetails$a6 === void 0 ? void 0 : _applicationDetails$a6.connectionNo,
      isConnectionSearch: true
    },
    businessService: serviceType
  }, {
    enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a7 = applicationDetails.applicationData) !== null && _applicationDetails$a7 !== void 0 && (_applicationDetails$a8 = _applicationDetails$a7.applicationType) !== null && _applicationDetails$a8 !== void 0 && _applicationDetails$a8.includes("MODIFY_") ? true : false,
    privacy: Digit.Utils.getPrivacyObject()
  });
  sessionStorage.removeItem("eyeIconClicked");
  const oldValueWC = oldData === null || oldData === void 0 ? void 0 : oldData.WaterConnection;
  const oldValueSC = oldData === null || oldData === void 0 ? void 0 : oldData.SewerageConnections;
  const oldValueCopy = [oldValueWC, oldValueSC];
  const newValueFilter = oldValueCopy === null || oldValueCopy === void 0 ? void 0 : oldValueCopy.filter(ele => ele);
  const currentValue = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData;
  const res = (_newValueFilter$ = newValueFilter[0]) === null || _newValueFilter$ === void 0 ? void 0 : _newValueFilter$.flatMap(o => {
    const pairs = Object.entries(o).filter(_ref => {
      let [k, v] = _ref;
      return (currentValue === null || currentValue === void 0 ? void 0 : currentValue[k]) !== v;
    });
    return pairs !== null && pairs !== void 0 && pairs.length ? Object.fromEntries(pairs) : [];
  });
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const clearDataDetails = () => {
    clearSessionFormData();
    setSessionFormData({});
    setSessionBillFormData({});
    clearBillSessionFormData();
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const closeWaringToast = () => {
    setShowWaringToast(null);
  };
  const checkWSAdditionalDetails = () => {
    var _applicationDetails$a9, _applicationDetails$a10, _applicationDetails$a11, _applicationDetails$a12, _applicationDetails$a13, _applicationDetails$a14, _applicationDetails$a15, _applicationDetails$a16, _applicationDetails$a17, _applicationDetails$a18, _applicationDetails$a19, _applicationDetails$a20, _applicationDetails$a21;
    const connectionType = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a9 = applicationDetails.applicationData) === null || _applicationDetails$a9 === void 0 ? void 0 : _applicationDetails$a9.connectionType;
    const noOfTaps = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a10 = applicationDetails.applicationData) === null || _applicationDetails$a10 === void 0 ? void 0 : _applicationDetails$a10.noOfTaps) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a11 = applicationDetails.applicationData) === null || _applicationDetails$a11 === void 0 ? void 0 : _applicationDetails$a11.noOfTaps;
    const pipeSize = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a12 = applicationDetails.applicationData) === null || _applicationDetails$a12 === void 0 ? void 0 : _applicationDetails$a12.pipeSize) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a13 = applicationDetails.applicationData) === null || _applicationDetails$a13 === void 0 ? void 0 : _applicationDetails$a13.pipeSize;
    const waterSource = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a14 = applicationDetails.applicationData) === null || _applicationDetails$a14 === void 0 ? void 0 : _applicationDetails$a14.waterSource;
    const noOfWaterClosets = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a15 = applicationDetails.applicationData) === null || _applicationDetails$a15 === void 0 ? void 0 : _applicationDetails$a15.noOfWaterClosets) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a16 = applicationDetails.applicationData) === null || _applicationDetails$a16 === void 0 ? void 0 : _applicationDetails$a16.noOfWaterClosets;
    const noOfToilets = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a17 = applicationDetails.applicationData) === null || _applicationDetails$a17 === void 0 ? void 0 : _applicationDetails$a17.noOfToilets) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a18 = applicationDetails.applicationData) === null || _applicationDetails$a18 === void 0 ? void 0 : _applicationDetails$a18.noOfToilets;
    const plumberDetails = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a19 = applicationDetails.applicationData) === null || _applicationDetails$a19 === void 0 ? void 0 : (_applicationDetails$a20 = _applicationDetails$a19.additionalDetails) === null || _applicationDetails$a20 === void 0 ? void 0 : _applicationDetails$a20.detailsProvidedBy;
    const roadCuttingInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a21 = applicationDetails.applicationData) === null || _applicationDetails$a21 === void 0 ? void 0 : _applicationDetails$a21.roadCuttingInfo;
    if (!connectionType || !(noOfTaps && pipeSize && waterSource || noOfWaterClosets && noOfToilets) || !plumberDetails || !roadCuttingInfo) {
      return false;
    }
    return true;
  };
  let dowloadOptions = [],
    appStatus = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a22 = applicationDetails.applicationData) === null || _applicationDetails$a22 === void 0 ? void 0 : _applicationDetails$a22.applicationStatus) || "";
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.actionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "ACTIVATE_CONNECTION") {
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: "/digit-ui/employee/ws/activate-connection?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&action=ACTIVATE_CONNECTION",
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData
      };
    }
    if ((action === null || action === void 0 ? void 0 : action.action) === "RESUBMIT_APPLICATION") {
      var _applicationDetails$p8, _servicesMasterData$w, _userConfig$, _userConfig$2;
      let pathName = "/digit-ui/employee/ws/edit-application?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p8 = applicationDetails.propertyDetails) === null || _applicationDetails$p8 === void 0 ? void 0 : _applicationDetails$p8.propertyId);
      const userConfig = (servicesMasterData === null || servicesMasterData === void 0 ? void 0 : (_servicesMasterData$w = servicesMasterData["ws-services-masters"]) === null || _servicesMasterData$w === void 0 ? void 0 : _servicesMasterData$w.WSEditApplicationByConfigUser) || [];
      const editApplicationUserRole = (userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$ = userConfig[0]) === null || _userConfig$ === void 0 ? void 0 : _userConfig$.roles) || [];
      const mdmsApplicationStatus = userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$2 = userConfig[0]) === null || _userConfig$2 === void 0 ? void 0 : _userConfig$2.status;
      let isFieldInspector = false;
      editApplicationUserRole.every((role, index) => {
        isFieldInspector = ifUserRoleExists(role);
        if (isFieldInspector) return false;else return true;
      });
      if (isFieldInspector && appStatus === mdmsApplicationStatus) {
        var _applicationDetails$p9;
        pathName = "/digit-ui/employee/ws/edit-application-by-config?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p9 = applicationDetails.propertyDetails) === null || _applicationDetails$p9 === void 0 ? void 0 : _applicationDetails$p9.propertyId);
      }
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "RESUBMIT_APPLICATION"
        }
      };
    }
    if ((action === null || action === void 0 ? void 0 : action.action) === "SUBMIT_APPLICATION") {
      var _applicationDetails$p10;
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: "/digit-ui/employee/ws/modify-application-edit?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p10 = applicationDetails.propertyDetails) === null || _applicationDetails$p10 === void 0 ? void 0 : _applicationDetails$p10.propertyId),
        state: applicationDetails
      };
    }
  });
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data4 = workflowDetails.data) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4.nextActions) === null || _workflowDetails$data5 === void 0 ? void 0 : _workflowDetails$data5.length) > 0 && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data6 = workflowDetails.data) === null || _workflowDetails$data6 === void 0 ? void 0 : (_workflowDetails$data7 = _workflowDetails$data6.actionState) === null || _workflowDetails$data7 === void 0 ? void 0 : (_workflowDetails$data8 = _workflowDetails$data7.nextActions) === null || _workflowDetails$data8 === void 0 ? void 0 : _workflowDetails$data8.length) > 0 && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data9 = workflowDetails.data) !== null && _workflowDetails$data9 !== void 0 && (_workflowDetails$data10 = _workflowDetails$data9.actionState) !== null && _workflowDetails$data10 !== void 0 && (_workflowDetails$data11 = _workflowDetails$data10.nextActions) !== null && _workflowDetails$data11 !== void 0 && _workflowDetails$data11.find(e => e.action === "EDIT")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data12 = workflowDetails.data) !== null && _workflowDetails$data12 !== void 0 && (_workflowDetails$data13 = _workflowDetails$data12.actionState) !== null && _workflowDetails$data13 !== void 0 && (_workflowDetails$data14 = _workflowDetails$data13.nextActions) !== null && _workflowDetails$data14 !== void 0 && _workflowDetails$data14.find(e => e.action === "RESUBMIT_APPLICATION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data15 = workflowDetails.data) !== null && _workflowDetails$data15 !== void 0 && (_workflowDetails$data16 = _workflowDetails$data15.actionState) !== null && _workflowDetails$data16 !== void 0 && (_workflowDetails$data17 = _workflowDetails$data16.nextActions) !== null && _workflowDetails$data17 !== void 0 && _workflowDetails$data17.find(e => e.action === "ACTIVATE_CONNECTION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data18 = workflowDetails.data) !== null && _workflowDetails$data18 !== void 0 && (_workflowDetails$data19 = _workflowDetails$data18.actionState) !== null && _workflowDetails$data19 !== void 0 && (_workflowDetails$data20 = _workflowDetails$data19.nextActions) !== null && _workflowDetails$data20 !== void 0 && _workflowDetails$data20.find(e => e.action === "SUBMIT_APPLICATION"))) {
    var _workflowDetails$data21, _workflowDetails$data22;
    workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data21 = workflowDetails.data) === null || _workflowDetails$data21 === void 0 ? void 0 : (_workflowDetails$data22 = _workflowDetails$data21.nextActions) === null || _workflowDetails$data22 === void 0 ? void 0 : _workflowDetails$data22.forEach(data => {
      if (data.action == "EDIT") workflowDetails.data.actionState.nextActions.push(data);
    });
  }
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data23 = workflowDetails.data) === null || _workflowDetails$data23 === void 0 ? void 0 : (_workflowDetails$data24 = _workflowDetails$data23.actionState) === null || _workflowDetails$data24 === void 0 ? void 0 : (_workflowDetails$data25 = _workflowDetails$data24.nextActions) === null || _workflowDetails$data25 === void 0 ? void 0 : _workflowDetails$data25.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "EDIT") {
      var _applicationDetails$p11, _servicesMasterData$w2, _userConfig$3, _userConfig$4;
      let pathName = "/digit-ui/employee/ws/edit-application?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p11 = applicationDetails.propertyDetails) === null || _applicationDetails$p11 === void 0 ? void 0 : _applicationDetails$p11.propertyId);
      const userConfig = (servicesMasterData === null || servicesMasterData === void 0 ? void 0 : (_servicesMasterData$w2 = servicesMasterData["ws-services-masters"]) === null || _servicesMasterData$w2 === void 0 ? void 0 : _servicesMasterData$w2.WSEditApplicationByConfigUser) || [];
      const editApplicationUserRole = (userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$3 = userConfig[0]) === null || _userConfig$3 === void 0 ? void 0 : _userConfig$3.roles) || [];
      const mdmsApplicationStatus = userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$4 = userConfig[0]) === null || _userConfig$4 === void 0 ? void 0 : _userConfig$4.status;
      let isFieldInspector = false;
      editApplicationUserRole.every((role, index) => {
        isFieldInspector = ifUserRoleExists(role);
        if (isFieldInspector) return false;else return true;
      });
      if (isFieldInspector && appStatus === mdmsApplicationStatus) {
        var _applicationDetails$p12;
        pathName = "/digit-ui/employee/ws/edit-application-by-config?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p12 = applicationDetails.propertyDetails) === null || _applicationDetails$p12 === void 0 ? void 0 : _applicationDetails$p12.propertyId);
      }
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "VERIFY_AND_FORWARD"
        }
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data26 = workflowDetails.data) === null || _workflowDetails$data26 === void 0 ? void 0 : (_workflowDetails$data27 = _workflowDetails$data26.nextActions) === null || _workflowDetails$data27 === void 0 ? void 0 : _workflowDetails$data27.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "VERIFY_AND_FORWARD" && appStatus === "PENDING_FOR_FIELD_INSPECTION" && !checkWSAdditionalDetails()) {
      action.isToast = true;
      action.toastMessage = "MISSING_ADDITIONAL_DETAILS";
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data28 = workflowDetails.data) === null || _workflowDetails$data28 === void 0 ? void 0 : (_workflowDetails$data29 = _workflowDetails$data28.actionState) === null || _workflowDetails$data29 === void 0 ? void 0 : (_workflowDetails$data30 = _workflowDetails$data29.nextActions) === null || _workflowDetails$data30 === void 0 ? void 0 : _workflowDetails$data30.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "VERIFY_AND_FORWARD" && appStatus === "PENDING_FOR_FIELD_INSPECTION" && !checkWSAdditionalDetails()) {
      action.isToast = true;
      action.toastMessage = "MISSING_ADDITIONAL_DETAILS";
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data31 = workflowDetails.data) === null || _workflowDetails$data31 === void 0 ? void 0 : (_workflowDetails$data32 = _workflowDetails$data31.nextActions) === null || _workflowDetails$data32 === void 0 ? void 0 : _workflowDetails$data32.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      action.redirectionUrll = {
        pathname: getBusinessService(filters) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo),
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data33 = workflowDetails.data) === null || _workflowDetails$data33 === void 0 ? void 0 : (_workflowDetails$data34 = _workflowDetails$data33.actionState) === null || _workflowDetails$data34 === void 0 ? void 0 : (_workflowDetails$data35 = _workflowDetails$data34.nextActions) === null || _workflowDetails$data35 === void 0 ? void 0 : _workflowDetails$data35.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      action.redirectionUrll = {
        pathname: getBusinessService(filters) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo),
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  const oldApplication = serviceType === "WATER" ? oldData === null || oldData === void 0 ? void 0 : (_oldData$WaterConnect = oldData.WaterConnection) === null || _oldData$WaterConnect === void 0 ? void 0 : _oldData$WaterConnect[(oldData === null || oldData === void 0 ? void 0 : (_oldData$WaterConnect2 = oldData.WaterConnection) === null || _oldData$WaterConnect2 === void 0 ? void 0 : _oldData$WaterConnect2.length) - 1] : oldData === null || oldData === void 0 ? void 0 : (_oldData$SewerageConn = oldData.SewerageConnections) === null || _oldData$SewerageConn === void 0 ? void 0 : _oldData$SewerageConn[(oldData === null || oldData === void 0 ? void 0 : (_oldData$SewerageConn2 = oldData.SewerageConnections) === null || _oldData$SewerageConn2 === void 0 ? void 0 : _oldData$SewerageConn2.length) - 1];
  const handleDownloadPdf = function () {
    try {
      var _applicationDetails$a23, _applicationDetails$a24, _applicationDetails$a25;
      const tenantInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a23 = applicationDetails.applicationData) === null || _applicationDetails$a23 === void 0 ? void 0 : _applicationDetails$a23.tenantId;
      let result = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData;
      if (applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a24 = applicationDetails.applicationData) !== null && _applicationDetails$a24 !== void 0 && (_applicationDetails$a25 = _applicationDetails$a24.applicationType) !== null && _applicationDetails$a25 !== void 0 && _applicationDetails$a25.includes("MODIFY_")) {
        const PDFdata = getWSAcknowledgementData$1({
          ...result
        }, {
          ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.propertyDetails)
        }, tenantInfo, t, oldApplication);
        PDFdata.then(ress => Digit.Utils.pdf.generateModifyPdf(ress));
        return Promise.resolve();
      }
      const PDFdata = getWSAcknowledgementData({
        ...result
      }, {
        ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.propertyDetails)
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const handleEstimateDownload = function () {
    try {
      const _temp2 = function (_applicationDetails$a26, _applicationDetails$a27) {
        if (applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a26 = applicationDetails.applicationData) !== null && _applicationDetails$a26 !== void 0 && (_applicationDetails$a27 = _applicationDetails$a26.additionalDetails) !== null && _applicationDetails$a27 !== void 0 && _applicationDetails$a27.estimationFileStoreId) {
          var _applicationDetails$a28, _applicationDetails$a29;
          getFiles([applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a28 = applicationDetails.applicationData) === null || _applicationDetails$a28 === void 0 ? void 0 : (_applicationDetails$a29 = _applicationDetails$a28.additionalDetails) === null || _applicationDetails$a29 === void 0 ? void 0 : _applicationDetails$a29.estimationFileStoreId], stateCode);
        } else {
          const warningCount = sessionStorage.getItem("WARINIG_COUNT") || "0";
          const warningCountDetails = JSON.parse(warningCount);
          const _temp = function () {
            if (warningCountDetails == 0) {
              const filters = {
                applicationNumber
              };
              return Promise.resolve(Digit.WSService.search({
                tenantId: tenantId,
                filters: {
                  ...filters
                },
                businessService: serviceType == "WATER" ? "WS" : "SW"
              })).then(function (response) {
                var _response$WaterConnec, _response$SewerageCon, _details$additionalDe;
                let details = serviceType == "WATER" ? response === null || response === void 0 ? void 0 : (_response$WaterConnec = response.WaterConnection) === null || _response$WaterConnec === void 0 ? void 0 : _response$WaterConnec[0] : response === null || response === void 0 ? void 0 : (_response$SewerageCon = response.SewerageConnections) === null || _response$SewerageCon === void 0 ? void 0 : _response$SewerageCon[0];
                if (details !== null && details !== void 0 && (_details$additionalDe = details.additionalDetails) !== null && _details$additionalDe !== void 0 && _details$additionalDe.estimationFileStoreId) {
                  var _details$additionalDe2;
                  getFiles([details === null || details === void 0 ? void 0 : (_details$additionalDe2 = details.additionalDetails) === null || _details$additionalDe2 === void 0 ? void 0 : _details$additionalDe2.estimationFileStoreId], stateCode);
                } else {
                  sessionStorage.setItem("WARINIG_COUNT", warningCountDetails ? warningCountDetails + 1 : 1);
                  setTimeout(() => {
                    sessionStorage.setItem("WARINIG_COUNT", "0");
                  }, 60000);
                  setShowWaringToast({
                    isError: false,
                    isWarning: true,
                    key: "warning",
                    message: t("WS_WARNING_FILESTOREID_PLEASE_TRY_AGAIN_SOMETIME_LABEL")
                  });
                }
              });
            } else if (!showWaringToast) {
              setShowWaringToast({
                isError: false,
                isWarning: true,
                key: "warning",
                message: t("WS_WARNING_FILESTOREID_PLEASE_TRY_AGAIN_SOMETIME_LABEL")
              });
            }
          }();
          if (_temp && _temp.then) return _temp.then(function () {});
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const wsEstimateDownloadObject = {
    order: 1,
    label: t("WS_ESTIMATION_NOTICE"),
    onClick: handleEstimateDownload
  };
  const sanctionDownloadObject = {
    order: 2,
    label: t("WS_SANCTION_LETTER"),
    onClick: () => {
      var _applicationDetails$a30, _applicationDetails$a31;
      return getFiles([applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a30 = applicationDetails.applicationData) === null || _applicationDetails$a30 === void 0 ? void 0 : (_applicationDetails$a31 = _applicationDetails$a30.additionalDetails) === null || _applicationDetails$a31 === void 0 ? void 0 : _applicationDetails$a31.sanctionFileStoreId], stateCode);
    }
  };
  const applicationDownloadObject = {
    order: 3,
    label: t("WS_APPLICATION"),
    onClick: handleDownloadPdf
  };
  const appFeeDownloadReceipt = {
    order: 4,
    label: t("DOWNLOAD_RECEIPT_HEADER"),
    onClick: () => {
      var _applicationDetails$a32, _applicationDetails$a33, _reciept_data$Payment, _applicationDetails$a34;
      return getRecieptSearch(applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a32 = applicationDetails.applicationData) !== null && _applicationDetails$a32 !== void 0 && _applicationDetails$a32.tenantId ? applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a33 = applicationDetails.applicationData) === null || _applicationDetails$a33 === void 0 ? void 0 : _applicationDetails$a33.tenantId : Digit.ULBService.getCurrentTenantId(), reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment = reciept_data.Payments) === null || _reciept_data$Payment === void 0 ? void 0 : _reciept_data$Payment[0], applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a34 = applicationDetails.applicationData) === null || _applicationDetails$a34 === void 0 ? void 0 : _applicationDetails$a34.applicationNo, receiptKey);
    }
  };
  const applicationFeeReceipt = {
    order: 4,
    label: t("WS_APLICATION_RECEIPT"),
    onClick: function () {
      try {
        return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
          WaterConnection: [applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData]
        }, "ws-consolidatedacknowlegment")).then(function (ConnectionDetailsfile) {
          return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
            fileStoreIds: ConnectionDetailsfile.filestoreIds[0]
          })).then(function (file) {
            window.open(file[ConnectionDetailsfile.filestoreIds[0]], "_blank");
          });
        });
      } catch (e) {
        return Promise.reject(e);
      }
    }
  };
  switch (appStatus) {
    case "PENDING_FOR_DOCUMENT_VERIFICATION":
    case "PENDING_FOR_CITIZEN_ACTION":
    case "PENDING_FOR_FIELD_INSPECTION":
      dowloadOptions = [applicationDownloadObject];
      break;
    case "PENDING_APPROVAL_FOR_CONNECTION":
    case "PENDING_FOR_PAYMENT":
      dowloadOptions = [applicationDownloadObject, wsEstimateDownloadObject];
      break;
    case "PENDING_FOR_CONNECTION_ACTIVATION":
    case "CONNECTION_ACTIVATED":
      if (applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a35 = applicationDetails.applicationData) !== null && _applicationDetails$a35 !== void 0 && (_applicationDetails$a36 = _applicationDetails$a35.applicationType) !== null && _applicationDetails$a36 !== void 0 && _applicationDetails$a36.includes("NEW_") && (reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment2 = reciept_data.Payments) === null || _reciept_data$Payment2 === void 0 ? void 0 : _reciept_data$Payment2.length) > 0) dowloadOptions = [sanctionDownloadObject, wsEstimateDownloadObject, applicationDownloadObject, appFeeDownloadReceipt];else dowloadOptions = [sanctionDownloadObject, wsEstimateDownloadObject, applicationDownloadObject];
      break;
    case "REJECTED":
      dowloadOptions = [applicationDownloadObject];
      break;
    default:
      dowloadOptions = [applicationDownloadObject];
      break;
  }
  const closeMenu = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeMenu, showOptions);
  dowloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-main-application-details"
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "0px",
      paddingTop: "10px",
      fontSize: "32px"
    }
  }, t("CS_TITLE_APPLICATION_DETAILS")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className",
    ref: menuRef
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails, {
    applicationDetails: applicationDetails,
    isLoading: isLoading || isBillingServiceLoading || isCommonmastersLoading || isServicesMasterLoading,
    isDataLoading: isLoading || isBillingServiceLoading || isCommonmastersLoading || isServicesMasterLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p13 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p13 === void 0 ? void 0 : (_applicationDetails$p14 = _applicationDetails$p13[0]) === null || _applicationDetails$p14 === void 0 ? void 0 : (_applicationDetails$p15 = _applicationDetails$p14.businessService) === null || _applicationDetails$p15 === void 0 ? void 0 : _applicationDetails$p15.toUpperCase(),
    moduleCode: "WS",
    showToast: showToast,
    setShowToast: setShowToast,
    closeToast: closeToast,
    timelineStatusPrefix: "WF_" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p16 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p16 === void 0 ? void 0 : (_applicationDetails$p17 = _applicationDetails$p16[0]) === null || _applicationDetails$p17 === void 0 ? void 0 : (_applicationDetails$p18 = _applicationDetails$p17.businessService) === null || _applicationDetails$p18 === void 0 ? void 0 : _applicationDetails$p18.toUpperCase()) + "_",
    oldValue: res,
    isInfoLabel: checkforPrivacyenablement(),
    clearDataDetails: clearDataDetails
  }), showWaringToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    style: {
      zIndex: "10000"
    },
    warning: showWaringToast === null || showWaringToast === void 0 ? void 0 : showWaringToast.isWarning,
    error: showWaringToast !== null && showWaringToast !== void 0 && showWaringToast.isWarning ? false : true,
    label: t(showWaringToast === null || showWaringToast === void 0 ? void 0 : showWaringToast.message),
    onClose: closeWaringToast,
    isDleteBtn: true
  })));
};

const GetConnectionDetails = () => {
  var _applicationDetails$a, _applicationDetails$a2, _applicationDetails$a3, _applicationDetails$a4, _applicationDetails$a5, _applicationDetails$a6, _applicationDetails$a7, _applicationDetails$a8, _applicationDetails$a9, _applicationDetails$a10, _applicationDetails$a11, _applicationDetails$a12, _applicationDetails$a13, _applicationDetails$a14, _mdmsCommonmastersDat, _applicationDetails$a16, _applicationDetails$a19, _applicationDetails$f3, _applicationDetails$p2, _applicationDetails$p3, _applicationDetails$f4, _applicationDetails$f5;
  const getBillSearch = function () {
    try {
      const _temp = function (_applicationDetails$f6) {
        if ((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$f6 = applicationDetails.fetchBillsData) === null || _applicationDetails$f6 === void 0 ? void 0 : _applicationDetails$f6.length) > 0) {
          var _applicationDetails$a20;
          const service = serviceType === "WATER" ? "WS" : "SW";
          let wsSearchFilters = {
            isConnectionSearch: true,
            connectionNumber: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a20 = applicationDetails.applicationData) === null || _applicationDetails$a20 === void 0 ? void 0 : _applicationDetails$a20.connectionNo
          };
          return Promise.resolve(Digit.WSService.search({
            tenantId,
            filters: wsSearchFilters,
            businessService: service
          })).then(function (wsConnectionDetails) {
            var _wsConnectionDetails$, _wsConnectionDetails$2, _wsConnectionDetails$3, _wsConnectionDetails$4, _wsConnectionDetails$5, _wsConnectionDetails$6;
            let filters = {
              applicationNumber: serviceType === "WATER" ? wsConnectionDetails === null || wsConnectionDetails === void 0 ? void 0 : (_wsConnectionDetails$ = wsConnectionDetails.WaterConnection) === null || _wsConnectionDetails$ === void 0 ? void 0 : (_wsConnectionDetails$2 = _wsConnectionDetails$[0]) === null || _wsConnectionDetails$2 === void 0 ? void 0 : _wsConnectionDetails$2.applicationNo : wsConnectionDetails === null || wsConnectionDetails === void 0 ? void 0 : (_wsConnectionDetails$3 = wsConnectionDetails.SewerageConnections) === null || _wsConnectionDetails$3 === void 0 ? void 0 : (_wsConnectionDetails$4 = _wsConnectionDetails$3[0]) === null || _wsConnectionDetails$4 === void 0 ? void 0 : _wsConnectionDetails$4.applicationNo,
              bussinessService: service
            };
            if ((wsConnectionDetails === null || wsConnectionDetails === void 0 ? void 0 : (_wsConnectionDetails$5 = wsConnectionDetails.WaterConnection) === null || _wsConnectionDetails$5 === void 0 ? void 0 : _wsConnectionDetails$5.length) > 0 || (wsConnectionDetails === null || wsConnectionDetails === void 0 ? void 0 : (_wsConnectionDetails$6 = wsConnectionDetails.SewerageConnections) === null || _wsConnectionDetails$6 === void 0 ? void 0 : _wsConnectionDetails$6.length) > 0) {
              var _applicationDetails$a21;
              downloadAndOpenPdf(applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a21 = applicationDetails.applicationData) === null || _applicationDetails$a21 === void 0 ? void 0 : _applicationDetails$a21.connectionNo, filters);
            }
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const history = reactRouterDom.useHistory();
  const [displayMenu, setDisplayMenu] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  let filters = getQueryStringParams(location.search);
  const applicationNumber = filters === null || filters === void 0 ? void 0 : filters.applicationNumber;
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const due = filters === null || filters === void 0 ? void 0 : filters.due;
  const getTenantId = filters === null || filters === void 0 ? void 0 : filters.tenantId;
  const [showOptions, setShowOptions] = React.useState(false);
  const stateCode = Digit.ULBService.getStateId();
  const actionConfig = ["MODIFY_CONNECTION_BUTTON", "BILL_AMENDMENT_BUTTON", "DISCONNECTION_BUTTON"];
  const {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useConnectionDetail(t, tenantId, applicationNumber, serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  const menuRef = React.useRef();
  const actionMenuRef = React.useRef();
  sessionStorage.removeItem("IsDetailsExists");
  Digit.SessionStorage.del("PT_CREATE_EMP_WS_NEW_FORM");
  const {
    isLoading: isLoadingDemand,
    data: demandData
  } = Digit.Hooks.useDemandSearch({
    consumerCode: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.connectionNo,
    businessService: serviceType === "WATER" ? "WS" : "SW",
    tenantId
  }, {
    enabled: !!(applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a2 = applicationDetails.applicationData) !== null && _applicationDetails$a2 !== void 0 && _applicationDetails$a2.applicationNo)
  });
  const [showModal, setshowModal] = React.useState(false);
  const [billData, setBilldata] = React.useState([]);
  const [showActionToast, setshowActionToast] = React.useState(null);
  const checkifPrivacyenabled = Digit.Hooks.ws.useToCheckPrivacyEnablement({
    privacy: {
      uuid: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a3 = applicationDetails.applicationData) !== null && _applicationDetails$a3 !== void 0 && (_applicationDetails$a4 = _applicationDetails$a3.applicationNo) !== null && _applicationDetails$a4 !== void 0 && _applicationDetails$a4.includes("WS") ? applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a5 = applicationDetails.applicationData) === null || _applicationDetails$a5 === void 0 ? void 0 : (_applicationDetails$a6 = _applicationDetails$a5.WaterConnection) === null || _applicationDetails$a6 === void 0 ? void 0 : (_applicationDetails$a7 = _applicationDetails$a6[0]) === null || _applicationDetails$a7 === void 0 ? void 0 : (_applicationDetails$a8 = _applicationDetails$a7.connectionHolders) === null || _applicationDetails$a8 === void 0 ? void 0 : (_applicationDetails$a9 = _applicationDetails$a8[0]) === null || _applicationDetails$a9 === void 0 ? void 0 : _applicationDetails$a9.uuid : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a10 = applicationDetails.applicationData) === null || _applicationDetails$a10 === void 0 ? void 0 : (_applicationDetails$a11 = _applicationDetails$a10.SewerageConnections) === null || _applicationDetails$a11 === void 0 ? void 0 : (_applicationDetails$a12 = _applicationDetails$a11[0]) === null || _applicationDetails$a12 === void 0 ? void 0 : (_applicationDetails$a13 = _applicationDetails$a12.connectionHolders) === null || _applicationDetails$a13 === void 0 ? void 0 : (_applicationDetails$a14 = _applicationDetails$a13[0]) === null || _applicationDetails$a14 === void 0 ? void 0 : _applicationDetails$a14.uuid,
      fieldName: ["connectionHoldersMobileNumber"],
      model: "WnSConnectionOwner"
    }
  }) || false;
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const mobileView = Digit.Utils.browser.isMobile();
  const {
    isCommonmastersLoading,
    data: mdmsCommonmastersData
  } = Digit.Hooks.obps.useMDMS(stateCode, "common-masters", ["uiCommonPay"]);
  const commonPayDetails = (mdmsCommonmastersData === null || mdmsCommonmastersData === void 0 ? void 0 : (_mdmsCommonmastersDat = mdmsCommonmastersData["common-masters"]) === null || _mdmsCommonmastersDat === void 0 ? void 0 : _mdmsCommonmastersDat.uiCommonPay) || [];
  const index = commonPayDetails && commonPayDetails.findIndex(item => {
    return item.code == "WS.ONE_TIME_FEE";
  });
  let commonPayInfo = "";
  if (index > -1) commonPayInfo = commonPayDetails[index];else commonPayInfo = commonPayDetails && commonPayDetails.filter(item => item.code === "DEFAULT");
  React.useEffect(function () {
    try {
      let businessService = serviceType === "WATER" ? "WS" : "SW";
      return Promise.resolve(Digit.PaymentService.searchAmendment(tenantId, {
        consumerCode: applicationNumber,
        businessService
      })).then(function (res) {
        setBilldata(res.Amendments);
      });
    } catch (e) {
      return Promise.reject(e);
    }
  }, []);
  const downloadConnectionDetails = function () {
    try {
      var _applicationDetails$a15;
      const tenantInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a15 = applicationDetails.applicationData) === null || _applicationDetails$a15 === void 0 ? void 0 : _applicationDetails$a15.tenantId;
      let result = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData;
      const PDFdata = getConnectionDetailsPDF({
        ...result
      }, {
        ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.propertyDetails)
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const closeBillToast = () => {
    setshowActionToast(null);
  };
  setTimeout(() => {
    closeBillToast();
  }, 10000);
  const checkApplicationStatus = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a16 = applicationDetails.applicationData) === null || _applicationDetails$a16 === void 0 ? void 0 : _applicationDetails$a16.status) === "Active" ? true : false;
  const checkWorkflow = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.isApplicationApproved;
  const getModifyConnectionButton = () => {
    var _applicationDetails$f, _applicationDetails$a17, _applicationDetails$p;
    if (!checkApplicationStatus) {
      setshowActionToast({
        key: "error",
        label: "CONN_NOT_ACTIVE"
      });
      return;
    }
    if ((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$f = applicationDetails.fetchBillsData[0]) === null || _applicationDetails$f === void 0 ? void 0 : _applicationDetails$f.totalAmount) > 0) {
      setshowActionToast({
        key: "error",
        label: "WS_DUE_AMOUNT_SHOULD_BE_ZERO"
      });
      return;
    }
    let pathname = "/digit-ui/employee/ws/modify-application?applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a17 = applicationDetails.applicationData) === null || _applicationDetails$a17 === void 0 ? void 0 : _applicationDetails$a17.connectionNo) + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.propertyDetails) === null || _applicationDetails$p === void 0 ? void 0 : _applicationDetails$p.propertyId) + "&from=WS_COMMON_CONNECTION_DETAIL";
    history.push("" + pathname, JSON.stringify({
      data: applicationDetails
    }));
  };
  const getBillAmendmentButton = () => {
    var _demandData$Demands, _applicationDetails$a18;
    let isBillAmendNotApplicable = false;
    billData === null || billData === void 0 ? void 0 : billData.map(bill => {
      if ((bill === null || bill === void 0 ? void 0 : bill.status) === "INWORKFLOW") {
        isBillAmendNotApplicable = true;
        return;
      }
    });
    if ((demandData === null || demandData === void 0 ? void 0 : (_demandData$Demands = demandData.Demands) === null || _demandData$Demands === void 0 ? void 0 : _demandData$Demands.length) === 0) {
      setshowActionToast({
        key: "error",
        label: "No_Bills_Found"
      });
      return;
    } else if (isBillAmendNotApplicable) {
      setshowActionToast({
        key: "error",
        label: "WORKFLOW_IN_PROGRESS"
      });
      return;
    }
    history.push("/digit-ui/employee/ws/required-documents?connectionNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a18 = applicationDetails.applicationData) === null || _applicationDetails$a18 === void 0 ? void 0 : _applicationDetails$a18.connectionNo) + "&tenantId=" + getTenantId + "&service=" + serviceType, JSON.stringify({
      data: applicationDetails
    }));
  };
  const closeMenu = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeMenu, showOptions);
  const closeActionMenu = () => {
    setDisplayMenu(false);
  };
  Digit.Hooks.useClickOutside(actionMenuRef, closeActionMenu, displayMenu);
  const getDisconnectionButton = () => {
    let pathname = "/digit-ui/employee/ws/new-disconnection";
    if (!checkWorkflow) {
      setshowActionToast({
        key: "error",
        label: "WORKFLOW_IN_PROGRESS"
      });
    } else {
      var _billData$, _applicationDetails$f2;
      if (((_billData$ = billData[0]) === null || _billData$ === void 0 ? void 0 : _billData$.status) === "ACTIVE" || (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$f2 = applicationDetails.fetchBillsData) === null || _applicationDetails$f2 === void 0 ? void 0 : _applicationDetails$f2.length) <= 0 || due === "0") {
        Digit.SessionStorage.set("WS_DISCONNECTION", applicationDetails);
        history.push("" + pathname);
      } else {
        setshowModal(true);
      }
    }
  };
  function onActionSelect(action) {
    if (action === "MODIFY_CONNECTION_BUTTON") {
      getModifyConnectionButton();
    } else if (action === "BILL_AMENDMENT_BUTTON") {
      getBillAmendmentButton();
    } else if (action === "DISCONNECTION_BUTTON") {
      getDisconnectionButton();
    }
  }
  const checkApplicationStatusForDisconnection = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a19 = applicationDetails.applicationData) === null || _applicationDetails$a19 === void 0 ? void 0 : _applicationDetails$a19.status) === "Active" ? true : false;
  const showAction = checkApplicationStatusForDisconnection ? actionConfig : actionConfig.filter(item => item !== "DISCONNECTION_BUTTON");
  let dowloadOptions = [];
  const appFeeDownloadReceipt = {
    order: 1,
    label: t("WS_COMMON_DOWNLOAD_BILL"),
    onClick: () => getBillSearch()
  };
  const connectionDetailsReceipt = {
    order: 2,
    label: t("WS_CONNECTION_DETAILS_RECEIPT"),
    onClick: () => downloadConnectionDetails()
  };
  if ((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$f3 = applicationDetails.fetchBillsData) === null || _applicationDetails$f3 === void 0 ? void 0 : _applicationDetails$f3.length) > 0) dowloadOptions = [appFeeDownloadReceipt, connectionDetailsReceipt];else dowloadOptions = [connectionDetailsReceipt];
  const Close = () => /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
  const Heading = props => {
    return /*#__PURE__*/React__default.createElement("h1", {
      style: {
        marginLeft: "22px"
      },
      className: "heading-m BPAheading-m"
    }, props.label);
  };
  const CloseBtn = props => {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "icon-bg-secondary",
      onClick: props.onClick
    }, /*#__PURE__*/React__default.createElement(Close, null));
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "0px",
      paddingTop: "10px",
      fontSize: "32px"
    }
  }, t("WS_CONNECTION_DETAILS")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className",
    ref: menuRef
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails, {
    applicationDetails: applicationDetails,
    isLoading: isLoading,
    isDataLoading: isLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    businessService: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p2 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p2 === void 0 ? void 0 : (_applicationDetails$p3 = _applicationDetails$p2[0]) === null || _applicationDetails$p3 === void 0 ? void 0 : _applicationDetails$p3.businessService,
    moduleCode: "WS",
    showToast: showToast,
    setShowToast: setShowToast,
    closeToast: closeToast,
    isInfoLabel: checkifPrivacyenabled,
    labelComponent: /*#__PURE__*/React__default.createElement(WSInfoLabel, {
      t: t
    })
  }), ifUserRoleExists("WS_CEMP") && checkApplicationStatus && !(applicationDetails !== null && applicationDetails !== void 0 && applicationDetails.isDisconnectionDone) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, null, displayMenu ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Menu, {
    options: showAction,
    localeKeyPrefix: "WS",
    t: t,
    onSelect: onActionSelect
  }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    ref: actionMenuRef,
    label: t("WF_TAKE_ACTION"),
    onSubmit: () => setDisplayMenu(!displayMenu)
  })) : null, showModal ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    open: showModal,
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t("WS_PENDING_DUES_LABEL")
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: () => setshowModal(false)
    }),
    center: true,
    formId: "modal-action",
    actionCancelOnSubmit: () => setshowModal(false),
    actionCancelLabel: t("CS_COMMON_CANCEL"),
    actionSaveLabel: t("WS_COMMON_COLLECT_LABEL"),
    actionSaveOnSubmit: () => {
      history.push("/digit-ui/employee/payment/collect/" + (serviceType === "WATER" ? "WS" : "SW") + "/" + encodeURIComponent(applicationNumber) + "/" + getTenantId + "?tenantId=" + getTenantId + "&ISWSCON");
      setshowModal(false);
    },
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      minHeight: "45px",
      height: "auto",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      minHeight: "45px",
      height: "auto",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "modal-header-ws"
  }, t("WS_CLEAR_DUES_DISCONNECTION_SUB_HEADER_LABEL"), " "), /*#__PURE__*/React__default.createElement("div", {
    className: "modal-body-ws"
  }, /*#__PURE__*/React__default.createElement("span", null, t("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"), ": \u20B9", due ? due : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$f4 = applicationDetails.fetchBillsData) === null || _applicationDetails$f4 === void 0 ? void 0 : (_applicationDetails$f5 = _applicationDetails$f4[0]) === null || _applicationDetails$f5 === void 0 ? void 0 : _applicationDetails$f5.totalAmount))) : null, showActionToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showActionToast.key,
    label: t("" + showActionToast.label),
    onClose: closeBillToast
  })));
};

const ActivateConnection = () => {
  var _Digit$SessionStorage, _state, _details, _details2, _state2, _state2$data, _state3, _state3$data, _state4, _state4$data, _state5, _state5$data, _state6, _state6$data, _state6$data$connecti, _state7, _state7$data, _state8, _state8$data, _state9, _state9$data, _state9$data$waterSou, _state9$data$waterSou2, _state10, _state10$data, _state11, _state11$data, _state12, _state12$data, _state13, _state13$data, _state14, _state14$data, _state15, _state15$data, _state16, _state16$data, _state17, _state17$data, _state18, _state18$data, _state18$data$plumber, _state18$data$plumber2, _state19, _state19$data, _state19$data$plumber, _state19$data$plumber2, _state20, _state20$data, _state20$data$plumber, _state20$data$plumber2, _state21, _state21$data, _state21$data$additio, _state22, _state22$data, _state22$data$additio, _state22$data$additio2, _state23, _state23$data, _state23$data$additio, _state24, _state24$data, _state25, _state25$data, _state25$data$connect, _state26, _state26$data, _state27, _state27$data, _state28, _state28$data, _state29, _state29$data, _state29$data$additio, _state30, _state30$data, _state31, _state31$data, _state32, _state32$data, _state33, _state33$data;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? JSON.parse(state) : {};
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appDetails, setAppDetails] = React.useState({});
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  const [config, setConfig] = React__default.useState({
    head: "",
    body: []
  });
  const stateId = Digit.ULBService.getStateId();
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  let {
    data: newConfig,
    isLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSActivationConfig(stateId, {});
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : _state.data);
  let {
    isLoading: isappdetailsLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : _details2.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = cloneDeep_1(applicationDetails);
  state = {
    data: {
      ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData)
    }
  };
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(filters === null || filters === void 0 ? void 0 : filters.service);
  const waterSourceSubDataWithClone = (_state2 = state) !== null && _state2 !== void 0 && (_state2$data = _state2.data) !== null && _state2$data !== void 0 && _state2$data.waterSource ? cloneDeep_1((_state3 = state) === null || _state3 === void 0 ? void 0 : (_state3$data = _state3.data) === null || _state3$data === void 0 ? void 0 : _state3$data.waterSource) : "";
  const waterSourceSubDataWithUS = waterSourceSubDataWithClone ? stringReplaceAll(waterSourceSubDataWithClone === null || waterSourceSubDataWithClone === void 0 ? void 0 : waterSourceSubDataWithClone.toUpperCase(), " ", "_") : "";
  const waterSourceSubDataWithCma = waterSourceSubDataWithUS ? stringReplaceAll(waterSourceSubDataWithUS === null || waterSourceSubDataWithUS === void 0 ? void 0 : waterSourceSubDataWithUS.toUpperCase(), ".", "_") : "";
  const connectionDetails = (filters === null || filters === void 0 ? void 0 : filters.service) === "WATER" ? {
    connectionType: (_state4 = state) !== null && _state4 !== void 0 && (_state4$data = _state4.data) !== null && _state4$data !== void 0 && _state4$data.connectionType ? {
      code: (_state5 = state) === null || _state5 === void 0 ? void 0 : (_state5$data = _state5.data) === null || _state5$data === void 0 ? void 0 : _state5$data.connectionType,
      i18nKey: "WS_CONNECTIONTYPE_" + stringReplaceAll((_state6 = state) === null || _state6 === void 0 ? void 0 : (_state6$data = _state6.data) === null || _state6$data === void 0 ? void 0 : (_state6$data$connecti = _state6$data.connectionType) === null || _state6$data$connecti === void 0 ? void 0 : _state6$data$connecti.toUpperCase(), " ", "_")
    } : "",
    waterSource: (_state7 = state) !== null && _state7 !== void 0 && (_state7$data = _state7.data) !== null && _state7$data !== void 0 && _state7$data.waterSource ? {
      code: (_state8 = state) === null || _state8 === void 0 ? void 0 : (_state8$data = _state8.data) === null || _state8$data === void 0 ? void 0 : _state8$data.waterSource,
      i18nKey: "WS_SERVICES_MASTERS_WATERSOURCE_" + stringReplaceAll((_state9 = state) === null || _state9 === void 0 ? void 0 : (_state9$data = _state9.data) === null || _state9$data === void 0 ? void 0 : (_state9$data$waterSou = _state9$data.waterSource) === null || _state9$data$waterSou === void 0 ? void 0 : (_state9$data$waterSou2 = _state9$data$waterSou.split('.')[0]) === null || _state9$data$waterSou2 === void 0 ? void 0 : _state9$data$waterSou2.toUpperCase(), " ", "_")
    } : "",
    sourceSubData: (_state10 = state) !== null && _state10 !== void 0 && (_state10$data = _state10.data) !== null && _state10$data !== void 0 && _state10$data.waterSource ? {
      code: (_state11 = state) === null || _state11 === void 0 ? void 0 : (_state11$data = _state11.data) === null || _state11$data === void 0 ? void 0 : _state11$data.waterSource,
      i18nKey: "WS_SERVICES_MASTERS_WATERSOURCE_" + waterSourceSubDataWithCma
    } : "",
    pipeSize: (_state12 = state) !== null && _state12 !== void 0 && (_state12$data = _state12.data) !== null && _state12$data !== void 0 && _state12$data.pipeSize ? {
      code: (_state13 = state) === null || _state13 === void 0 ? void 0 : (_state13$data = _state13.data) === null || _state13$data === void 0 ? void 0 : _state13$data.pipeSize,
      i18nKey: (_state14 = state) === null || _state14 === void 0 ? void 0 : (_state14$data = _state14.data) === null || _state14$data === void 0 ? void 0 : _state14$data.pipeSize
    } : "",
    noOfTaps: ((_state15 = state) === null || _state15 === void 0 ? void 0 : (_state15$data = _state15.data) === null || _state15$data === void 0 ? void 0 : _state15$data.noOfTaps) || "",
    formDetails: details
  } : {
    noOfWaterClosets: ((_state16 = state) === null || _state16 === void 0 ? void 0 : (_state16$data = _state16.data) === null || _state16$data === void 0 ? void 0 : _state16$data.noOfWaterClosets) || "",
    noOfToilets: ((_state17 = state) === null || _state17 === void 0 ? void 0 : (_state17$data = _state17.data) === null || _state17$data === void 0 ? void 0 : _state17$data.noOfToilets) || "",
    formDetails: details
  };
  const plumberDetails = [{
    plumberName: ((_state18 = state) === null || _state18 === void 0 ? void 0 : (_state18$data = _state18.data) === null || _state18$data === void 0 ? void 0 : (_state18$data$plumber = _state18$data.plumberInfo) === null || _state18$data$plumber === void 0 ? void 0 : (_state18$data$plumber2 = _state18$data$plumber[0]) === null || _state18$data$plumber2 === void 0 ? void 0 : _state18$data$plumber2.name) || "",
    plumberMobileNo: ((_state19 = state) === null || _state19 === void 0 ? void 0 : (_state19$data = _state19.data) === null || _state19$data === void 0 ? void 0 : (_state19$data$plumber = _state19$data.plumberInfo) === null || _state19$data$plumber === void 0 ? void 0 : (_state19$data$plumber2 = _state19$data$plumber[0]) === null || _state19$data$plumber2 === void 0 ? void 0 : _state19$data$plumber2.mobileNumber) || "",
    plumberLicenseNo: ((_state20 = state) === null || _state20 === void 0 ? void 0 : (_state20$data = _state20.data) === null || _state20$data === void 0 ? void 0 : (_state20$data$plumber = _state20$data.plumberInfo) === null || _state20$data$plumber === void 0 ? void 0 : (_state20$data$plumber2 = _state20$data$plumber[0]) === null || _state20$data$plumber2 === void 0 ? void 0 : _state20$data$plumber2.licenseNo) || "",
    detailsProvidedBy: (_state21 = state) !== null && _state21 !== void 0 && (_state21$data = _state21.data) !== null && _state21$data !== void 0 && (_state21$data$additio = _state21$data.additionalDetails) !== null && _state21$data$additio !== void 0 && _state21$data$additio.detailsProvidedBy ? {
      i18nKey: "WS_PLUMBER_" + ((_state22 = state) === null || _state22 === void 0 ? void 0 : (_state22$data = _state22.data) === null || _state22$data === void 0 ? void 0 : (_state22$data$additio = _state22$data.additionalDetails) === null || _state22$data$additio === void 0 ? void 0 : (_state22$data$additio2 = _state22$data$additio.detailsProvidedBy) === null || _state22$data$additio2 === void 0 ? void 0 : _state22$data$additio2.toUpperCase()),
      code: (_state23 = state) === null || _state23 === void 0 ? void 0 : (_state23$data = _state23.data) === null || _state23$data === void 0 ? void 0 : (_state23$data$additio = _state23$data.additionalDetails) === null || _state23$data$additio === void 0 ? void 0 : _state23$data$additio.detailsProvidedBy
    } : "",
    applicationNo: (_state24 = state) === null || _state24 === void 0 ? void 0 : (_state24$data = _state24.data) === null || _state24$data === void 0 ? void 0 : _state24$data.applicationNo,
    key: Date.now()
  }];
  const activationDetails = ((_state25 = state) === null || _state25 === void 0 ? void 0 : (_state25$data = _state25.data) === null || _state25$data === void 0 ? void 0 : (_state25$data$connect = _state25$data.connectionType) === null || _state25$data$connect === void 0 ? void 0 : _state25$data$connect.toUpperCase()) === "METERED" ? [{
    meterId: ((_state26 = state) === null || _state26 === void 0 ? void 0 : (_state26$data = _state26.data) === null || _state26$data === void 0 ? void 0 : _state26$data.meterId) || "",
    meterInstallationDate: (_state27 = state) !== null && _state27 !== void 0 && (_state27$data = _state27.data) !== null && _state27$data !== void 0 && _state27$data.meterInstallationDate ? convertEpochToDates((_state28 = state) === null || _state28 === void 0 ? void 0 : (_state28$data = _state28.data) === null || _state28$data === void 0 ? void 0 : _state28$data.meterInstallationDate) : null,
    meterInitialReading: ((_state29 = state) === null || _state29 === void 0 ? void 0 : (_state29$data = _state29.data) === null || _state29$data === void 0 ? void 0 : (_state29$data$additio = _state29$data.additionalDetails) === null || _state29$data$additio === void 0 ? void 0 : _state29$data$additio.initialMeterReading) || "",
    connectionExecutionDate: (_state30 = state) !== null && _state30 !== void 0 && (_state30$data = _state30.data) !== null && _state30$data !== void 0 && _state30$data.connectionExecutionDate ? convertEpochToDates((_state31 = state) === null || _state31 === void 0 ? void 0 : (_state31$data = _state31.data) === null || _state31$data === void 0 ? void 0 : _state31$data.connectionExecutionDate) : null
  }] : [{
    connectionExecutionDate: (_state32 = state) !== null && _state32 !== void 0 && (_state32$data = _state32.data) !== null && _state32$data !== void 0 && _state32$data.connectionExecutionDate ? convertEpochToDates((_state33 = state) === null || _state33 === void 0 ? void 0 : (_state33$data = _state33.data) === null || _state33$data === void 0 ? void 0 : _state33$data.connectionExecutionDate) : null
  }];
  const defaultValues = {
    formDetails: details,
    connectionDetails: [connectionDetails],
    plumberDetails: plumberDetails,
    activationDetails: activationDetails
  };
  React.useEffect(() => {
    if (!isappdetailsLoading) {
      setAppDetails(details);
    }
  }, []);
  React.useEffect(() => {
    if (!isLoading) {
      const config = newConfig.find(conf => conf.hideInCitizen);
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      if (isAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/application-details?applicationNumber=" + (filters === null || filters === void 0 ? void 0 : filters.applicationNumber) + "&service=" + (filters === null || filters === void 0 ? void 0 : filters.service);
    }, 3000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const onFormValueChange = (setValue, formData, formState) => {
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && Object.getPrototypeOf(formState.errors) === Object.prototype) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const getConvertedDate = function (dateOfTime) {
    try {
      let dateOfReplace = stringReplaceAll(dateOfTime, "/", "-");
      let formattedDate = "";
      if (dateOfReplace.split("-")[2] > 1900) {
        formattedDate = dateOfReplace.split("-")[2] + "-" + dateOfReplace.split("-")[1] + "-" + dateOfReplace.split("-")[0];
      } else {
        formattedDate = dateOfReplace.split("-")[0] + "-" + dateOfReplace.split("-")[2] + "-" + dateOfReplace.split("-")[1];
      }
      return Promise.resolve(convertDateToEpochNew(formattedDate));
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const closeToastOfError = () => {
    setShowToast(null);
  };
  const onSubmit = function (data) {
    try {
      const _temp5 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          var _Object$keys, _details3, _formDetails$connecti, _formDetails$connecti2, _formDetails$connecti3, _formDetails$connecti4, _formDetails$connecti5, _formDetails$connecti6, _formDetails$connecti7, _formDetails$connecti8, _formDetails$connecti9, _formDetails$connecti10, _formDetails$connecti11, _formDetails$connecti12, _formDetails$connecti13, _formDetails$connecti14, _formDetails$connecti15, _formDetails$connecti16, _formDetails$connecti17, _formDetails$connecti18, _formDetails$connecti19, _formDetails$connecti20, _formDetails$connecti21, _formDetails$connecti22, _formDetails$connecti23, _formDetails$connecti24, _formDetails$connecti25, _formDetails$connecti26, _formDetails$connecti27, _formDetails$connecti28, _formDetails$connecti29, _formDetails$connecti30, _formDetails$plumberD, _formDetails$plumberD2, _formDetails$plumberD3, _formDetails$plumberD4, _formDetails$plumberD5, _formDetails$plumberD6, _formData$plumberInfo, _formDetails$plumberD7, _formDetails$plumberD8, _formDetails$plumberD9, _formDetails$plumberD10, _formDetails$plumberD11, _formDetails$plumberD12, _formDetails$plumberD13, _formDetails$plumberD14, _formDetails$plumberD15, _formDetails$plumberD16, _formDetails$plumberD17, _formDetails$plumberD18, _formDetails$plumberD19, _formDetails$plumberD20, _formDetails$activati9, _formDetails$activati10, _formDetails$activati11, _formDetails$activati12;
          function _temp4() {
            var _formDetails$activati, _formDetails$activati2, _formDetails$activati3, _formDetails$activati4;
            function _temp2() {
              var _formDetails$comments, _data$supportingDocum, _data$supportingDocum2, _data$supportingDocum3, _data$supportingDocum4, _formDetails$comments2, _data$supportingDocum5, _data$supportingDocum6, _data$supportingDocum7, _data$supportingDocum8;
              formData.comment = (formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$comments = formDetails.comments) === null || _formDetails$comments === void 0 ? void 0 : _formDetails$comments.comments) || "";
              formData.action = filters === null || filters === void 0 ? void 0 : filters.action;
              formData.wfDocuments = data !== null && data !== void 0 && (_data$supportingDocum = data.supportingDocuments) !== null && _data$supportingDocum !== void 0 && (_data$supportingDocum2 = _data$supportingDocum[0]) !== null && _data$supportingDocum2 !== void 0 && _data$supportingDocum2.fileStoreId ? [{
                documentType: "Document - 1",
                fileStoreId: data === null || data === void 0 ? void 0 : (_data$supportingDocum3 = data.supportingDocuments) === null || _data$supportingDocum3 === void 0 ? void 0 : (_data$supportingDocum4 = _data$supportingDocum3[0]) === null || _data$supportingDocum4 === void 0 ? void 0 : _data$supportingDocum4.fileStoreId
              }] : [], formData.processInstance = {
                action: filters === null || filters === void 0 ? void 0 : filters.action,
                comment: (formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$comments2 = formDetails.comments) === null || _formDetails$comments2 === void 0 ? void 0 : _formDetails$comments2.comments) || "",
                documents: data !== null && data !== void 0 && (_data$supportingDocum5 = data.supportingDocuments) !== null && _data$supportingDocum5 !== void 0 && (_data$supportingDocum6 = _data$supportingDocum5[0]) !== null && _data$supportingDocum6 !== void 0 && _data$supportingDocum6.fileStoreId ? [{
                  documentType: "Document - 1",
                  fileStoreId: data === null || data === void 0 ? void 0 : (_data$supportingDocum7 = data.supportingDocuments) === null || _data$supportingDocum7 === void 0 ? void 0 : (_data$supportingDocum8 = _data$supportingDocum7[0]) === null || _data$supportingDocum8 === void 0 ? void 0 : _data$supportingDocum8.fileStoreId
                }] : []
              };
              const reqDetails = (filters === null || filters === void 0 ? void 0 : filters.service) == "WATER" ? {
                WaterConnection: formData
              } : {
                SewerageConnection: formData
              };
              if (mutate) {
                mutate(reqDetails, {
                  onError: (error, variables) => {
                    setShowToast({
                      key: "error",
                      message: error !== null && error !== void 0 && error.message ? error.message : error
                    });
                    setTimeout(closeToastOfError, 5000);
                  },
                  onSuccess: (data, variables) => {
                    setShowToast({
                      key: false,
                      message: "WS_ACTIVATE_SUCCESS_MESSAGE_MAIN"
                    });
                    setIsAppDetailsPage(true);
                  }
                });
              }
            }
            if (formDetails !== null && formDetails !== void 0 && (_formDetails$activati = formDetails.activationDetails) !== null && _formDetails$activati !== void 0 && (_formDetails$activati2 = _formDetails$activati[0]) !== null && _formDetails$activati2 !== void 0 && _formDetails$activati2.meterInitialReading) formData.additionalDetails.initialMeterReading = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$activati3 = formDetails.activationDetails) === null || _formDetails$activati3 === void 0 ? void 0 : (_formDetails$activati4 = _formDetails$activati3[0]) === null || _formDetails$activati4 === void 0 ? void 0 : _formDetails$activati4.meterInitialReading;
            const _temp = function (_formDetails$activati5, _formDetails$activati6, _formDetails$activati7, _formDetails$activati8) {
              if (formDetails !== null && formDetails !== void 0 && (_formDetails$activati5 = formDetails.activationDetails) !== null && _formDetails$activati5 !== void 0 && (_formDetails$activati6 = _formDetails$activati5[0]) !== null && _formDetails$activati6 !== void 0 && _formDetails$activati6.connectionExecutionDate) return Promise.resolve(getConvertedDate(formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$activati7 = formDetails.activationDetails) === null || _formDetails$activati7 === void 0 ? void 0 : (_formDetails$activati8 = _formDetails$activati7[0]) === null || _formDetails$activati8 === void 0 ? void 0 : _formDetails$activati8.connectionExecutionDate)).then(function (_getConvertedDate2) {
                formData.connectionExecutionDate = _getConvertedDate2;
              });
            }();
            return _temp && _temp.then ? _temp.then(_temp2) : _temp2(_temp);
          }
          const formDetails = cloneDeep_1(data);
          const formData = ((_Object$keys = Object.keys(appDetails)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) > 0 ? {
            ...appDetails
          } : {
            ...((_details3 = details) === null || _details3 === void 0 ? void 0 : _details3.applicationData)
          };
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti = formDetails.connectionDetails) !== null && _formDetails$connecti !== void 0 && (_formDetails$connecti2 = _formDetails$connecti[0]) !== null && _formDetails$connecti2 !== void 0 && (_formDetails$connecti3 = _formDetails$connecti2.connectionType) !== null && _formDetails$connecti3 !== void 0 && _formDetails$connecti3.code) formData.connectionType = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti4 = formDetails.connectionDetails) === null || _formDetails$connecti4 === void 0 ? void 0 : (_formDetails$connecti5 = _formDetails$connecti4[0]) === null || _formDetails$connecti5 === void 0 ? void 0 : (_formDetails$connecti6 = _formDetails$connecti5.connectionType) === null || _formDetails$connecti6 === void 0 ? void 0 : _formDetails$connecti6.code;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti7 = formDetails.connectionDetails) !== null && _formDetails$connecti7 !== void 0 && (_formDetails$connecti8 = _formDetails$connecti7[0]) !== null && _formDetails$connecti8 !== void 0 && (_formDetails$connecti9 = _formDetails$connecti8.waterSource) !== null && _formDetails$connecti9 !== void 0 && _formDetails$connecti9.code) formData.waterSource = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti10 = formDetails.connectionDetails) === null || _formDetails$connecti10 === void 0 ? void 0 : (_formDetails$connecti11 = _formDetails$connecti10[0]) === null || _formDetails$connecti11 === void 0 ? void 0 : (_formDetails$connecti12 = _formDetails$connecti11.sourceSubData) === null || _formDetails$connecti12 === void 0 ? void 0 : _formDetails$connecti12.code;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti13 = formDetails.connectionDetails) !== null && _formDetails$connecti13 !== void 0 && (_formDetails$connecti14 = _formDetails$connecti13[0]) !== null && _formDetails$connecti14 !== void 0 && (_formDetails$connecti15 = _formDetails$connecti14.pipeSize) !== null && _formDetails$connecti15 !== void 0 && _formDetails$connecti15.size) formData.pipeSize = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti16 = formDetails.connectionDetails) === null || _formDetails$connecti16 === void 0 ? void 0 : (_formDetails$connecti17 = _formDetails$connecti16[0]) === null || _formDetails$connecti17 === void 0 ? void 0 : (_formDetails$connecti18 = _formDetails$connecti17.pipeSize) === null || _formDetails$connecti18 === void 0 ? void 0 : _formDetails$connecti18.size;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti19 = formDetails.connectionDetails) !== null && _formDetails$connecti19 !== void 0 && (_formDetails$connecti20 = _formDetails$connecti19[0]) !== null && _formDetails$connecti20 !== void 0 && _formDetails$connecti20.noOfTaps) formData.noOfTaps = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti21 = formDetails.connectionDetails) === null || _formDetails$connecti21 === void 0 ? void 0 : (_formDetails$connecti22 = _formDetails$connecti21[0]) === null || _formDetails$connecti22 === void 0 ? void 0 : _formDetails$connecti22.noOfTaps;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti23 = formDetails.connectionDetails) !== null && _formDetails$connecti23 !== void 0 && (_formDetails$connecti24 = _formDetails$connecti23[0]) !== null && _formDetails$connecti24 !== void 0 && _formDetails$connecti24.noOfWaterClosets) formData.noOfWaterClosets = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti25 = formDetails.connectionDetails) === null || _formDetails$connecti25 === void 0 ? void 0 : (_formDetails$connecti26 = _formDetails$connecti25[0]) === null || _formDetails$connecti26 === void 0 ? void 0 : _formDetails$connecti26.noOfWaterClosets;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$connecti27 = formDetails.connectionDetails) !== null && _formDetails$connecti27 !== void 0 && (_formDetails$connecti28 = _formDetails$connecti27[0]) !== null && _formDetails$connecti28 !== void 0 && _formDetails$connecti28.noOfToilets) formData.noOfToilets = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$connecti29 = formDetails.connectionDetails) === null || _formDetails$connecti29 === void 0 ? void 0 : (_formDetails$connecti30 = _formDetails$connecti29[0]) === null || _formDetails$connecti30 === void 0 ? void 0 : _formDetails$connecti30.noOfToilets;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$plumberD = formDetails.plumberDetails) !== null && _formDetails$plumberD !== void 0 && (_formDetails$plumberD2 = _formDetails$plumberD[0]) !== null && _formDetails$plumberD2 !== void 0 && (_formDetails$plumberD3 = _formDetails$plumberD2.detailsProvidedBy) !== null && _formDetails$plumberD3 !== void 0 && _formDetails$plumberD3.code) formData.additionalDetails.detailsProvidedBy = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$plumberD4 = formDetails.plumberDetails) === null || _formDetails$plumberD4 === void 0 ? void 0 : (_formDetails$plumberD5 = _formDetails$plumberD4[0]) === null || _formDetails$plumberD5 === void 0 ? void 0 : (_formDetails$plumberD6 = _formDetails$plumberD5.detailsProvidedBy) === null || _formDetails$plumberD6 === void 0 ? void 0 : _formDetails$plumberD6.code;
          if (!(formData !== null && formData !== void 0 && (_formData$plumberInfo = formData.plumberInfo) !== null && _formData$plumberInfo !== void 0 && _formData$plumberInfo[0]) && (formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$plumberD7 = formDetails.plumberDetails) === null || _formDetails$plumberD7 === void 0 ? void 0 : (_formDetails$plumberD8 = _formDetails$plumberD7.detailsProvidedBy) === null || _formDetails$plumberD8 === void 0 ? void 0 : _formDetails$plumberD8.code) == "ULB") formData.plumberInfo = [{}];
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$plumberD9 = formDetails.plumberDetails) !== null && _formDetails$plumberD9 !== void 0 && (_formDetails$plumberD10 = _formDetails$plumberD9[0]) !== null && _formDetails$plumberD10 !== void 0 && _formDetails$plumberD10.plumberName) formData.plumberInfo[0].name = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$plumberD11 = formDetails.plumberDetails) === null || _formDetails$plumberD11 === void 0 ? void 0 : (_formDetails$plumberD12 = _formDetails$plumberD11[0]) === null || _formDetails$plumberD12 === void 0 ? void 0 : _formDetails$plumberD12.plumberName;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$plumberD13 = formDetails.plumberDetails) !== null && _formDetails$plumberD13 !== void 0 && (_formDetails$plumberD14 = _formDetails$plumberD13[0]) !== null && _formDetails$plumberD14 !== void 0 && _formDetails$plumberD14.plumberLicenseNo) formData.plumberInfo[0].licenseNo = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$plumberD15 = formDetails.plumberDetails) === null || _formDetails$plumberD15 === void 0 ? void 0 : (_formDetails$plumberD16 = _formDetails$plumberD15[0]) === null || _formDetails$plumberD16 === void 0 ? void 0 : _formDetails$plumberD16.plumberLicenseNo;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$plumberD17 = formDetails.plumberDetails) !== null && _formDetails$plumberD17 !== void 0 && (_formDetails$plumberD18 = _formDetails$plumberD17[0]) !== null && _formDetails$plumberD18 !== void 0 && _formDetails$plumberD18.plumberMobileNo) formData.plumberInfo[0].mobileNumber = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$plumberD19 = formDetails.plumberDetails) === null || _formDetails$plumberD19 === void 0 ? void 0 : (_formDetails$plumberD20 = _formDetails$plumberD19[0]) === null || _formDetails$plumberD20 === void 0 ? void 0 : _formDetails$plumberD20.plumberMobileNo;
          if (formDetails !== null && formDetails !== void 0 && (_formDetails$activati9 = formDetails.activationDetails) !== null && _formDetails$activati9 !== void 0 && (_formDetails$activati10 = _formDetails$activati9[0]) !== null && _formDetails$activati10 !== void 0 && _formDetails$activati10.meterId) formData.meterId = formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$activati11 = formDetails.activationDetails) === null || _formDetails$activati11 === void 0 ? void 0 : (_formDetails$activati12 = _formDetails$activati11[0]) === null || _formDetails$activati12 === void 0 ? void 0 : _formDetails$activati12.meterId;
          const _temp3 = function (_formDetails$activati13, _formDetails$activati14, _formDetails$activati15, _formDetails$activati16) {
            if (formDetails !== null && formDetails !== void 0 && (_formDetails$activati13 = formDetails.activationDetails) !== null && _formDetails$activati13 !== void 0 && (_formDetails$activati14 = _formDetails$activati13[0]) !== null && _formDetails$activati14 !== void 0 && _formDetails$activati14.meterInstallationDate) return Promise.resolve(getConvertedDate(formDetails === null || formDetails === void 0 ? void 0 : (_formDetails$activati15 = formDetails.activationDetails) === null || _formDetails$activati15 === void 0 ? void 0 : (_formDetails$activati16 = _formDetails$activati15[0]) === null || _formDetails$activati16 === void 0 ? void 0 : _formDetails$activati16.meterInstallationDate)).then(function (_getConvertedDate) {
              formData.meterInstallationDate = _getConvertedDate;
            });
          }();
          return _temp3 && _temp3.then ? _temp3.then(_temp4) : _temp4(_temp3);
        }
      }();
      return Promise.resolve(_temp5 && _temp5.then ? _temp5.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isEnableLoader || isLoading || isappdetailsLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    defaultValues: defaultValues,
    onSubmit: onSubmit,
    label: t("WF_EMPLOYEE_NEWSW1_ACTIVATE_CONNECTION"),
    onFormValueChange: onFormValueChange
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const ApplicationDetailsBillAmendment = () => {
  var _applicationDetails$p, _applicationDetails$p2, _applicationDetails$p3, _applicationDetails$p4, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _applicationDetails$a2, _applicationDetails$p5, _applicationDetails$p6, _applicationDetails$p7, _applicationDetails$p8, _applicationDetails$p9;
  const {
    applicationNumber
  } = Digit.Hooks.useQueryParams();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const {
    t
  } = reactI18next.useTranslation();
  let serviceType = "WATER";
  if (applicationNumber.includes("SW")) serviceType = "SEWERAGE";
  const [showToast, setShowToast] = React.useState(false);
  const {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSApplicationDetailsBillAmendment(t, tenantId, applicationNumber, serviceType);
  const workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId,
    id: applicationNumber,
    moduleCode: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.processInstancesDetails) === null || _applicationDetails$p === void 0 ? void 0 : (_applicationDetails$p2 = _applicationDetails$p[0]) === null || _applicationDetails$p2 === void 0 ? void 0 : _applicationDetails$p2.businessService,
    config: {
      enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$p3 = applicationDetails.processInstancesDetails) !== null && _applicationDetails$p3 !== void 0 && (_applicationDetails$p4 = _applicationDetails$p3[0]) !== null && _applicationDetails$p4 !== void 0 && _applicationDetails$p4.businessService ? true : false
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.actionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "RE-SUBMIT") {
      var _applicationDetails$a;
      let pathName = "/digit-ui/employee/ws/bill-amendment?connectionNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.connectionNo) + "&tenantId=" + tenantId + "&isEdit=true";
      action.redirectionUrll = {
        action: "RE-SUBMIT-APPLICATION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "RE-SUBMIT-APPLICATION"
        }
      };
    }
  });
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    isSuccess,
    mutate
  } = Digit.Hooks.ws.useApplicationActionsBillAmendUpdate();
  React.useEffect(() => {
    if (showToast) {
      setTimeout(() => setShowToast(false), 5000);
    }
  }, [showToast]);
  const [showOptions, setShowOptions] = React.useState(false);
  const getAckPdf = function (amendment, tenantId, t, tableData, app) {
    try {
      const PDFdata = getWSAcknowledgementData$2(amendment, tenantId, t, tableData, app);
      PDFdata.then(ress => Digit.Utils.pdf.generateBillAmendPDF(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const dowloadOptions = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.amendment) === null || _applicationDetails$a2 === void 0 ? void 0 : _applicationDetails$a2.status) === "CONSUMED" ? [{
    order: 1,
    label: t("WS_ACK_PDF"),
    onClick: () => getAckPdf(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.amendment, tenantId, t, applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationDetails, applicationDetails)
  }] : [{
    order: 1,
    label: t("WS_ACK_PDF"),
    onClick: () => getAckPdf(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.amendment, tenantId, t, applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationDetails, applicationDetails)
  }];
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-main-application-details"
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "0px",
      paddingTop: "10px",
      fontSize: "32px"
    }
  }, t("CS_TITLE_GENERATE_NOTE")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className"
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails, {
    applicationDetails: applicationDetails,
    isLoading: isLoading,
    isDataLoading: isLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p5 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p5 === void 0 ? void 0 : (_applicationDetails$p6 = _applicationDetails$p5[0]) === null || _applicationDetails$p6 === void 0 ? void 0 : _applicationDetails$p6.businessService,
    moduleCode: "WS",
    showToast: showToast,
    setShowToast: setShowToast,
    closeToast: () => setShowToast(null),
    timelineStatusPrefix: "WF_" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p7 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p7 === void 0 ? void 0 : (_applicationDetails$p8 = _applicationDetails$p7[0]) === null || _applicationDetails$p8 === void 0 ? void 0 : (_applicationDetails$p9 = _applicationDetails$p8.businessService) === null || _applicationDetails$p9 === void 0 ? void 0 : _applicationDetails$p9.toUpperCase()) + "_"
  })), showToast ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    isDleteBtn: true,
    error: updateApplicationError ? "WS_APPLICATION_UPDATE_ERROR" : null,
    label: isSuccess ? showToast === null || showToast === void 0 ? void 0 : showToast.label : updateError === null || updateError === void 0 ? void 0 : updateError.Error
  }) : null);
};

const Search = _ref => {
  const [isBothCallsFinished, setIsBothCallFinished] = React.useState(true);
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [payload, setPayload] = React.useState({});
  const Search = Digit.ComponentRegistryService.getComponent("WSSearchApplication");
  const getUrlPathName = window.location.pathname;
  const checkPathName = getUrlPathName.includes("water/search-application");
  const businessServ = checkPathName ? "WS" : "SW";
  const [showToast, setShowToast] = React.useState(null);
  function onSubmit(_data) {
    if (_data.applicationNumber === "" && _data.connectionNumber === "" && _data.mobileNumber === "" && !_data.applicationType && !_data.applicationStatus && !_data.fromDate && !_data.toDate) {
      setShowToast({
        warning: true,
        label: "ERR_PT_FILL_VALID_FIELDS"
      });
      setTimeout(() => {
        setShowToast(false);
      }, 3000);
      return;
    }
    var fromDate = new Date(_data === null || _data === void 0 ? void 0 : _data.fromDate);
    fromDate === null || fromDate === void 0 ? void 0 : fromDate.setSeconds((fromDate === null || fromDate === void 0 ? void 0 : fromDate.getSeconds()) - 19800);
    var toDate = new Date(_data === null || _data === void 0 ? void 0 : _data.toDate);
    toDate === null || toDate === void 0 ? void 0 : toDate.setSeconds((toDate === null || toDate === void 0 ? void 0 : toDate.getSeconds()) + 86399 - 19800);
    const data = {
      ..._data,
      ...(_data.toDate ? {
        toDate: toDate === null || toDate === void 0 ? void 0 : toDate.getTime()
      } : {}),
      ...(_data.fromDate ? {
        fromDate: fromDate === null || fromDate === void 0 ? void 0 : fromDate.getTime()
      } : {})
    };
    setPayload(Object.keys(data).filter(k => data[k]).reduce((acc, key) => ({
      ...acc,
      [key]: typeof data[key] === "object" ? data[key].code : data[key]
    }), {}));
  }
  const config = {
    enabled: !!(payload && Object.keys(payload).length > 0)
  };
  const result = Digit.Hooks.ws.useSearchWS({
    tenantId,
    filters: payload,
    config,
    bussinessService: businessServ,
    t,
    shortAddress: true
  });
  const isMobile = window.Digit.Utils.browser.isMobile();
  if (result !== null && result !== void 0 && result.isLoading && isMobile) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const getData = () => {
    var _result$data, _result$data2;
    if ((result === null || result === void 0 ? void 0 : (_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.length) == 0) {
      return {
        display: "ES_COMMON_NO_DATA"
      };
    } else if ((result === null || result === void 0 ? void 0 : (_result$data2 = result.data) === null || _result$data2 === void 0 ? void 0 : _result$data2.length) > 0) {
      return result === null || result === void 0 ? void 0 : result.data;
    } else {
      return [];
    }
  };
  const isResultsOk = () => {
    var _result$data3;
    return (result === null || result === void 0 ? void 0 : (_result$data3 = result.data) === null || _result$data3 === void 0 ? void 0 : _result$data3.length) > 0 ? true : false;
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(Search, {
    t: t,
    tenantId: tenantId,
    onSubmit: onSubmit,
    data: getData(),
    count: result === null || result === void 0 ? void 0 : result.count,
    resultOk: isResultsOk(),
    businessService: businessServ,
    isLoading: result === null || result === void 0 ? void 0 : result.isLoading
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.error,
    warning: showToast.warning,
    label: t(showToast.label),
    onClose: () => {
      setShowToast(null);
    }
  }));
};

const SearchWater = _ref => {
  var _result$data4;
  const [isBothCallsFinished, setIsBothCallFinished] = React.useState(true);
  const {
    t
  } = reactI18next.useTranslation();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [payload, setPayload] = React.useState({});
  const [setLoading, setLoadingState] = React.useState(false);
  const SWater = Digit.ComponentRegistryService.getComponent("WSSearchWaterConnection");
  const getUrlPathName = window.location.pathname;
  const checkPathName = getUrlPathName.includes("water/search-connection");
  const businessServ = checkPathName ? "WS" : "SW";
  const [showToast, setShowToast] = React.useState(null);
  const serviceConfig = {
    WATER: "WATER",
    SEWERAGE: "SEWERAGE"
  };
  const onSubmit = React.useCallback(_data => {
    const {
      connectionNumber,
      oldConnectionNumber,
      mobileNumber,
      propertyId
    } = _data;
    if (!connectionNumber && !oldConnectionNumber && !mobileNumber && !propertyId) {
      setShowToast({
        error: true,
        label: "WS_HOME_SEARCH_CONN_RESULTS_DESC"
      });
      setTimeout(() => {
        setShowToast(false);
      }, 3000);
    } else {
      setPayload(Object.keys(_data).filter(k => _data[k]).reduce((acc, key) => ({
        ...acc,
        [key]: typeof _data[key] === "object" ? _data[key].code : _data[key]
      }), {}));
    }
  });
  const config = {
    enabled: !!(payload && Object.keys(payload).length > 0)
  };
  let result = Digit.Hooks.ws.useSearchWS({
    tenantId,
    filters: payload,
    config,
    bussinessService: businessServ,
    t,
    shortAddress: true
  });
  const isMobile = window.Digit.Utils.browser.isMobile();
  if (result !== null && result !== void 0 && result.isLoading && isMobile) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  const getData = () => {
    var _result$data, _result$data2;
    if ((result === null || result === void 0 ? void 0 : (_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.length) == 0) {
      return {
        display: "ES_COMMON_NO_DATA"
      };
    } else if ((result === null || result === void 0 ? void 0 : (_result$data2 = result.data) === null || _result$data2 === void 0 ? void 0 : _result$data2.length) > 0) {
      return result === null || result === void 0 ? void 0 : result.data;
    } else {
      return [];
    }
  };
  const isResultsOk = () => {
    var _result$data3;
    return (result === null || result === void 0 ? void 0 : (_result$data3 = result.data) === null || _result$data3 === void 0 ? void 0 : _result$data3.length) > 0 ? true : false;
  };
  if (!(result !== null && result !== void 0 && result.isLoading)) result.data = result === null || result === void 0 ? void 0 : (_result$data4 = result.data) === null || _result$data4 === void 0 ? void 0 : _result$data4.map(item => {
    var _item$connectionNo, _item$connectionNo2;
    if (item !== null && item !== void 0 && (_item$connectionNo = item.connectionNo) !== null && _item$connectionNo !== void 0 && _item$connectionNo.includes("WS")) {
      item.service = serviceConfig.WATER;
    } else if (item !== null && item !== void 0 && (_item$connectionNo2 = item.connectionNo) !== null && _item$connectionNo2 !== void 0 && _item$connectionNo2.includes("SW")) {
      item.service = serviceConfig.SEWERAGE;
    }
    return item;
  });
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(SWater, {
    t: t,
    tenantId: tenantId,
    onSubmit: onSubmit,
    data: getData(),
    count: result === null || result === void 0 ? void 0 : result.count,
    resultOk: isResultsOk(),
    businessService: businessServ,
    isLoading: result === null || result === void 0 ? void 0 : result.isLoading
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.error,
    warning: showToast.warning,
    label: t(showToast.label),
    onClose: () => {
      setShowToast(null);
    }
  }));
};

const EditApplication$1 = () => {
  var _Digit$SessionStorage, _editApplicationDetai, _state, _state$data, _state2, _state2$data, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  const [enabledLoader, setEnabledLoader] = React.useState(true);
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const editApplicationDetails = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  const serviceType = (filters === null || filters === void 0 ? void 0 : filters.service) || (editApplicationDetails === null || editApplicationDetails === void 0 ? void 0 : (_editApplicationDetai = editApplicationDetails.applicationData) === null || _editApplicationDetai === void 0 ? void 0 : _editApplicationDetai.serviceType);
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : _state$data.applicationDetails);
  const actionData = cloneDeep_1((_state2 = state) === null || _state2 === void 0 ? void 0 : (_state2$data = _state2.data) === null || _state2$data === void 0 ? void 0 : _state2$data.action);
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(stateId, {});
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [propertyId, setPropertyId] = React.useState(new URLSearchParams(reactRouterDom.useLocation().search).get("propertyId"));
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const {
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId,
    enabled: propertyId && propertyId != "" ? true : false,
    privacy: Digit.Utils.getPrivacyObject()
  });
  React.useEffect(() => {
    if (!isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.hideInCitizen && conf.isEdit);
      config.head = "WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isEditConnection) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    var _sessionFormData$cpt, _sessionFormData$cpt$, _sessionFormData$cpt2, _sessionFormData$cpt3;
    !propertyId && (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt = sessionFormData.cpt) === null || _sessionFormData$cpt === void 0 ? void 0 : (_sessionFormData$cpt$ = _sessionFormData$cpt.details) === null || _sessionFormData$cpt$ === void 0 ? void 0 : _sessionFormData$cpt$.propertyId) && setPropertyId(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt2 = sessionFormData.cpt) === null || _sessionFormData$cpt2 === void 0 ? void 0 : (_sessionFormData$cpt3 = _sessionFormData$cpt2.details) === null || _sessionFormData$cpt3 === void 0 ? void 0 : _sessionFormData$cpt3.propertyId);
  }, [sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id && !IsDetailsExists) {
          sessionStorage.setItem("appData", JSON.stringify(appData));
          return Promise.resolve(convertApplicationData(details, serviceType, false, false, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt, sessionFormData, propertyDetails]);
  React.useEffect(() => {
    var _propertyDetails$Prop;
    setSessionFormData({
      ...sessionFormData,
      cpt: {
        details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop[0]
      }
    });
  }, [propertyDetails]);
  React.useEffect(() => {
    var _sessionFormData$Docu, _sessionFormData$Docu2, _sessionFormData$Conn, _sessionFormData$Conn2, _sessionFormData$Conn3, _sessionFormData$Conn4, _sessionFormData$cpt4;
    if ((sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Docu = sessionFormData.DocumentsRequired) === null || _sessionFormData$Docu === void 0 ? void 0 : (_sessionFormData$Docu2 = _sessionFormData$Docu.documents) === null || _sessionFormData$Docu2 === void 0 ? void 0 : _sessionFormData$Docu2.length) > 0 || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn !== void 0 && (_sessionFormData$Conn2 = _sessionFormData$Conn[0]) !== null && _sessionFormData$Conn2 !== void 0 && _sessionFormData$Conn2.water || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn3 = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn3 !== void 0 && (_sessionFormData$Conn4 = _sessionFormData$Conn3[0]) !== null && _sessionFormData$Conn4 !== void 0 && _sessionFormData$Conn4.sewerage || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$cpt4 = sessionFormData.cpt) !== null && _sessionFormData$cpt4 !== void 0 && _sessionFormData$cpt4.details && !isLoading) {
      setEnabledLoader(false);
    }
  }, [propertyDetails, sessionFormData, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      var _sessionFormData$Conn5, _sessionFormData$Conn6, _sessionFormData$Conn7, _sessionFormData$Conn8, _sessionFormData$Conn9;
      if (isAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/application-details?applicationNumber=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn5 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn5 === void 0 ? void 0 : (_sessionFormData$Conn6 = _sessionFormData$Conn5[0]) === null || _sessionFormData$Conn6 === void 0 ? void 0 : _sessionFormData$Conn6.applicationNo) + "&service=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn7 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn7 === void 0 ? void 0 : (_sessionFormData$Conn8 = _sessionFormData$Conn7[0]) === null || _sessionFormData$Conn8 === void 0 ? void 0 : (_sessionFormData$Conn9 = _sessionFormData$Conn8.serviceName) === null || _sessionFormData$Conn9 === void 0 ? void 0 : _sessionFormData$Conn9.toUpperCase());
    }, 5000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertEditApplicationDetails(data, details, actionData)).then(function (convertAppData) {
            var _data$ConnectionDetai, _data$ConnectionDetai2, _details$processInsta, _details$processInsta2, _details$processInsta3, _details$processInsta4;
            const reqDetails = (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai = data.ConnectionDetails) === null || _data$ConnectionDetai === void 0 ? void 0 : (_data$ConnectionDetai2 = _data$ConnectionDetai[0]) === null || _data$ConnectionDetai2 === void 0 ? void 0 : _data$ConnectionDetai2.serviceName) == "WATER" ? {
              WaterConnection: convertAppData
            } : {
              SewerageConnection: convertAppData
            };
            setSubmitValve(false);
            if (details !== null && details !== void 0 && (_details$processInsta = details.processInstancesDetails) !== null && _details$processInsta !== void 0 && (_details$processInsta2 = _details$processInsta[0]) !== null && _details$processInsta2 !== void 0 && (_details$processInsta3 = _details$processInsta2.state) !== null && _details$processInsta3 !== void 0 && (_details$processInsta4 = _details$processInsta3.applicationStatus) !== null && _details$processInsta4 !== void 0 && _details$processInsta4.includes("CITIZEN_ACTION")) {
              if (mutate) {
                mutate(reqDetails, {
                  onError: (error, variables) => {
                    setShowToast({
                      key: "error",
                      message: error !== null && error !== void 0 && error.message ? error.message : error
                    });
                    setTimeout(closeToastOfError, 5000);
                    setSubmitValve(true);
                  },
                  onSuccess: (data, variables) => {
                    setShowToast({
                      key: false,
                      message: "WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"
                    });
                    setIsAppDetailsPage(true);
                  }
                });
              }
            } else {
              var _state3;
              sessionStorage.setItem("redirectedfromEDIT", true);
              sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS", JSON.stringify(convertAppData));
              window.location.assign("" + window.location.origin + ((_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.url));
            }
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  if (enabledLoader || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const ConsumptionDetails = _ref => {
  var _user$info, _mdmsBillingPeriod$Md, _mdmsBillingPeriod$Md2, _mdmsMeterStatus$Mdms, _mdmsMeterStatus$Mdms2, _details$4, _details$5;
  const {
    t
  } = reactI18next.useTranslation();
  const user = Digit.UserService.getUser();
  const tenantId = (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.tenantId) || Digit.ULBService.getCurrentTenantId();
  let filters = getQueryStringParams(location.search);
  const {
    applicationNo
  } = Digit.Hooks.useQueryParams();
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  let filter1 = {
    tenantId: tenantId,
    connectionNos: applicationNo
  };
  const [openModal, setOpenModal] = React.useState(false);
  const [meterDetails, setMeterDetails] = React.useState({});
  const [defaultValues, setDefaultValues] = React.useState({});
  const businessService = serviceType === "WATER" ? "WS" : "SW";
  const mobileView = Digit.Utils.browser.isMobile() ? true : false;
  const [selectMeterStatus, setSelectMeterStatus] = React.useState("");
  const [showToast, setShowToast] = React.useState(null);
  const [error, setError] = React.useState(null);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  const [currentMeterReading, setCurrentReading] = React.useState("");
  const [selectedConsumtion, setConsumption] = React.useState("");
  const [currentBillingPeriod, setBillingPeriod] = React.useState("");
  const [isAddMeterReadingButtonEnable, setisAddMeterReadingButtonEnable] = React.useState(false);
  const userInfo = Digit.UserService.getUser();
  const userRoles = userInfo.info.roles.map(roleData => roleData.code);
  const isUserAllowedToAddMeterReading = userRoles.filter(role => role === "WS_CEMP" || role === "SW_CEMP").length > 0;
  const {
    isLoading,
    isError,
    data: response
  } = Digit.Hooks.ws.useWSConsumptionSearch({
    filters: filter1
  }, {
    filters: filter1
  });
  const {
    isLoading: meterStatusLoading,
    data: mdmsMeterStatus
  } = Digit.Hooks.ws.useGetMeterStatusList(tenantId);
  const {
    isLoading: billingPeriodLoading,
    data: mdmsBillingPeriod
  } = Digit.Hooks.ws.useGetBillingPeriodValidation(tenantId);
  let connectionFilters = {
    connectionNumber: applicationNo
  };
  const {
    isLoading: isConnectionDetailsLoading,
    data: connectionDetailsData
  } = Digit.Hooks.ws.useOldValue({
    tenantId: tenantId,
    filters: {
      ...connectionFilters
    },
    businessService: businessService === "WS" ? "WATER" : "SEWERAGE"
  });
  const {
    isLoading: updatingMeterConnectionLoading,
    isError: updateMeterConnectionError,
    data: updateMeterConnectionResponse,
    error: updateMeterError,
    mutate: meterReadingMutation
  } = Digit.Hooks.ws.useMeterReadingCreateAPI(businessService);
  React.useEffect(() => {
    if (!isConnectionDetailsLoading) {
      let connectionDetails = businessService == "WS" ? connectionDetailsData === null || connectionDetailsData === void 0 ? void 0 : connectionDetailsData.WaterConnection : connectionDetailsData === null || connectionDetailsData === void 0 ? void 0 : connectionDetailsData.SewerageConnections;
      let connectionData = connectionDetails === null || connectionDetails === void 0 ? void 0 : connectionDetails.filter(ob => {
        var _ob$applicationType;
        return ob === null || ob === void 0 ? void 0 : (_ob$applicationType = ob.applicationType) === null || _ob$applicationType === void 0 ? void 0 : _ob$applicationType.includes("DISCONNECT");
      });
      if ((connectionData === null || connectionData === void 0 ? void 0 : connectionData.length) == 0) setisAddMeterReadingButtonEnable(true);
      connectionData === null || connectionData === void 0 ? void 0 : connectionData.map(data => {
        if ((data === null || data === void 0 ? void 0 : data.applicationStatus) === "DISCONNECTION_EXECUTED" || (data === null || data === void 0 ? void 0 : data.applicationStatus) === "PENDING_FOR_DISCONNECTION_EXECUTION") setisAddMeterReadingButtonEnable(false);else setisAddMeterReadingButtonEnable(true);
      });
    }
  }, [connectionDetailsData]);
  const convertDateToEpoch = function (dateString, dayStartOrEnd) {
    if (dayStartOrEnd === void 0) {
      dayStartOrEnd = "dayend";
    }
    try {
      const parts = dateString.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);
      const DateObj = new Date(Date.UTC(parts[1], parts[2] - 1, parts[3]));
      DateObj.setMinutes(DateObj.getMinutes() + DateObj.getTimezoneOffset());
      if (dayStartOrEnd === "dayend") {
        DateObj.setHours(DateObj.getHours() + 24);
        DateObj.setSeconds(DateObj.getSeconds() - 1);
      }
      return DateObj.getTime();
    } catch (e) {
      return dateString;
    }
  };
  const getBillingPeriodFromMdms = mdmsBillingPeriod === null || mdmsBillingPeriod === void 0 ? void 0 : (_mdmsBillingPeriod$Md = mdmsBillingPeriod.MdmsRes) === null || _mdmsBillingPeriod$Md === void 0 ? void 0 : (_mdmsBillingPeriod$Md2 = _mdmsBillingPeriod$Md["ws-services-masters"]) === null || _mdmsBillingPeriod$Md2 === void 0 ? void 0 : _mdmsBillingPeriod$Md2.billingPeriod.filter(e => e.connectionType === "Metered");
  const popUp = () => {
    var _response$meterReadin, _response$meterReadin2;
    setOpenModal(true);
    setMeterDetails(response === null || response === void 0 ? void 0 : response.meterReadings[0]);
    setSelectMeterStatus({
      code: response === null || response === void 0 ? void 0 : (_response$meterReadin = response.meterReadings[0]) === null || _response$meterReadin === void 0 ? void 0 : _response$meterReadin.meterStatus,
      i18nKey: "WS_SERVICES_CALCULATION_METERSTATUS_" + Digit.Utils.locale.getTransformedLocale(response === null || response === void 0 ? void 0 : (_response$meterReadin2 = response.meterReadings[0]) === null || _response$meterReadin2 === void 0 ? void 0 : _response$meterReadin2.meterStatus)
    });
    setBillingPeriod(getDate(meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReadingDate) + " - " + getDate(convertDateToEpoch(Digit.Utils.date.getDate())));
  };
  const closeModal = () => {
    setOpenModal(false);
  };
  const closeToast = () => {
    setShowToast(false);
    setError(null);
  };
  const onSubmit = function (data) {
    try {
      let fromDate = parseInt(meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReadingDate);
      let selectedDate = parseInt(convertDateToEpoch(data === null || data === void 0 ? void 0 : data.currentReadingDate));
      let toDate = parseInt(convertDateToEpoch(Digit.Utils.date.getDate()));
      if ((selectMeterStatus === null || selectMeterStatus === void 0 ? void 0 : selectMeterStatus.code) === "Working") {
        var _details$;
        if (!(data !== null && data !== void 0 && data.currentReading) || (data === null || data === void 0 ? void 0 : data.currentReading) == null || (data === null || data === void 0 ? void 0 : data.currentReading) === "") {
          setShowToast({
            key: "error",
            message: t("ERR_CURRENT_READING_REQUIRED")
          });
          setError(t("ERR_CURRENT_READING_REQUIRED"));
          setTimeout(closeToast, 5000);
          return Promise.resolve();
        }
        if (selectedDate < fromDate || selectedDate > toDate) {
          setShowToast({
            key: "error",
            message: t("ERR_CURRENT_READING_DATE_SHOULD_NOT_BE_LESS_THAN_FROM_DATE_AND_NOT_GREATER_THAN_TO_DATE")
          });
          setError(t("ERR_CURRENT_READING_DATE_SHOULD_NOT_BE_LESS_THAN_FROM_DATE_AND_NOT_GREATER_THAN_TO_DATE"));
          setTimeout(closeToast, 5000);
          return Promise.resolve();
        }
        if ((data === null || data === void 0 ? void 0 : data.currentReading) <= (details === null || details === void 0 ? void 0 : (_details$ = details[0]) === null || _details$ === void 0 ? void 0 : _details$.currentReading)) {
          setShowToast({
            key: "error",
            message: t("CURRENT_READING_ERROR")
          });
          setError(t("CURRENT_READING_ERROR"));
          setTimeout(closeToast, 5000);
          return Promise.resolve();
        }
      } else {
        data.currentReading = parseInt(meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReading) + parseInt(data === null || data === void 0 ? void 0 : data.consumption);
      }
      let meterReadingsJS = {
        billingPeriod: getDate(meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReadingDate) + " - " + getDate(data === null || data === void 0 ? void 0 : data.currentReadingDate),
        connectionNo: meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.connectionNo,
        currentReading: data === null || data === void 0 ? void 0 : data.currentReading,
        currentReadingDate: convertDateToEpoch(data === null || data === void 0 ? void 0 : data.currentReadingDate),
        lastReading: meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReading,
        lastReadingDate: meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReadingDate,
        meterStatus: selectMeterStatus === null || selectMeterStatus === void 0 ? void 0 : selectMeterStatus.code,
        tenantId: meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.tenantId
      };
      let meterReadingsPayload = {
        meterReadings: meterReadingsJS
      };
      const _temp = function () {
        if (meterReadingMutation) {
          setIsEnableLoader(true);
          return Promise.resolve(meterReadingMutation(meterReadingsPayload, {
            onError: (error, variables) => {
              setIsEnableLoader(false);
              setOpenModal(false);
              setShowToast({
                key: "error",
                message: error !== null && error !== void 0 && error.message ? error.message : error
              });
              setTimeout(closeToast, 5000);
            },
            onSuccess: function (data, variables) {
              try {
                setIsEnableLoader(false);
                setOpenModal(false);
                setShowToast({
                  key: "success",
                  message: "WS_METER_READING_ADDED_SUCCESFULLY"
                });
                setTimeout(closeToast, 3000);
                setTimeout(() => {
                  window.location.reload();
                }, 4000);
                return Promise.resolve();
              } catch (e) {
                return Promise.reject(e);
              }
            }
          })).then(function () {});
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  let optionsList = mdmsMeterStatus === null || mdmsMeterStatus === void 0 ? void 0 : (_mdmsMeterStatus$Mdms = mdmsMeterStatus.MdmsRes) === null || _mdmsMeterStatus$Mdms === void 0 ? void 0 : (_mdmsMeterStatus$Mdms2 = _mdmsMeterStatus$Mdms["ws-services-calculation"]) === null || _mdmsMeterStatus$Mdms2 === void 0 ? void 0 : _mdmsMeterStatus$Mdms2.MeterStatus.map(status => ({
    code: status,
    i18nKey: "WS_SERVICES_CALCULATION_METERSTATUS_" + Digit.Utils.locale.getTransformedLocale(status)
  }));
  const onFormValueChange = (setValue, formData, formState) => {
    if ((selectMeterStatus === null || selectMeterStatus === void 0 ? void 0 : selectMeterStatus.code) === "Working") {
      var _details$2;
      setCurrentReading(formData === null || formData === void 0 ? void 0 : formData.currentReading);
      setBillingPeriod(getDate(meterDetails === null || meterDetails === void 0 ? void 0 : meterDetails.currentReadingDate) + " - " + getDate(formData === null || formData === void 0 ? void 0 : formData.currentReadingDate));
      if (parseInt(currentMeterReading) < parseInt(details === null || details === void 0 ? void 0 : (_details$2 = details[0]) === null || _details$2 === void 0 ? void 0 : _details$2.lastReading)) {
        formData.consumption = "0";
        setConsumption("0");
      } else {
        var _details$3;
        formData.consumption = "" + (parseInt(currentMeterReading) - parseInt(details === null || details === void 0 ? void 0 : (_details$3 = details[0]) === null || _details$3 === void 0 ? void 0 : _details$3.currentReading));
        setConsumption(formData.consumption);
      }
    } else {
      setConsumption(formData.consumption);
    }
  };
  let tempObj = {};
  let tempObj1 = {};
  const getDate = epochdate => {
    return epochdate ? new Date(epochdate).getDate() + "/" + (new Date(epochdate).getMonth() + 1) + "/" + new Date(epochdate).getFullYear().toString() : "NA";
  };
  const details = response === null || response === void 0 ? void 0 : response.meterReadings;
  const config = {
    label: {
      heading: "WS_CONSUMPTION_BUTTON_METER_READING_LABEL",
      submit: "CORE_COMMON_SAVE",
      cancel: "CORE_CHANGE_TENANT_CANCEL"
    },
    form: [{
      body: [{
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),
          label: "" + t("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),
          text: currentBillingPeriod,
          className: "border-none"
        }))
      }, {
        label: "" + t("WS_SERV_DETAIL_METER_STAT"),
        isMandatory: true,
        type: "dropdown",
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: optionsList,
          autoComplete: "off",
          optionKey: "i18nKey",
          id: "meterStatus",
          select: e => {
            setSelectMeterStatus(e);
            setConsumption("");
          },
          selected: selectMeterStatus,
          t: t
        })
      }, {
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),
          label: "" + t("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),
          text: details === null || details === void 0 ? void 0 : (_details$4 = details[0]) === null || _details$4 === void 0 ? void 0 : _details$4.currentReading,
          className: "border-none"
        }))
      }, {
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),
          label: "" + t("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),
          text: getDate(details === null || details === void 0 ? void 0 : (_details$5 = details[0]) === null || _details$5 === void 0 ? void 0 : _details$5.currentReadingDate),
          className: "border-none"
        }))
      }, {
        label: t("WS_CONSUMPTION_DETAILS_CURRENT_READING_LABEL"),
        isMandatory: selectMeterStatus.code === "Working" ? true : false,
        disable: selectMeterStatus.code === "Working" ? false : true,
        type: "number",
        populators: {
          name: "currentReading",
          ...(tempObj = selectMeterStatus.code === "Working" ? {} : {
            value: ""
          })
        }
      }, {
        label: t("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),
        isMandatory: selectMeterStatus.code === "Working" ? true : false,
        disable: selectMeterStatus.code === "Working" ? false : true,
        type: "custom",
        populators: {
          name: "currentReadingDate",
          validation: {
            required: selectMeterStatus.code === "Working" ? true : false
          },
          customProps: {},
          defaultValue: Digit.Utils.date.getDate(),
          component: (props, customProps) => /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, _extends({
            onChange: props.onChange,
            date: props.value
          }, customProps, {
            disabled: selectMeterStatus.code === "Working" ? false : true
          }))
        }
      }, {
        label: t("WS_SERV_DETAIL_CONSUMP"),
        isMandatory: false,
        type: "number",
        disable: selectMeterStatus.code === "Working" ? true : false,
        populators: {
          ...(tempObj1 = selectMeterStatus.code === "Working" ? {
            name: "consumption",
            value: selectedConsumtion
          } : {
            name: "consumption"
          })
        }
      }]
    }]
  };
  const Heading = props => {
    return /*#__PURE__*/React__default.createElement("h1", {
      className: "heading-m"
    }, props.label);
  };
  const Close = () => /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
  const CloseBtn = props => {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "icon-bg-secondary",
      onClick: props.onClick
    }, /*#__PURE__*/React__default.createElement(Close, null));
  };
  const consumption = (currentReading, lastReading) => {
    if (currentReading && lastReading) {
      return Number(currentReading - lastReading);
    } else return t("NA");
  };
  if (isLoading || isConnectionDetailsLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  let {
    meterReadings
  } = response || {};
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "15px"
    }
  }, "" + t("WS_VIEW_CONSUMPTION")), /*#__PURE__*/React__default.createElement("div", null, (meterReadings === null || meterReadings === void 0 ? void 0 : meterReadings.length) > 0 && meterReadings.map((application, index) => /*#__PURE__*/React__default.createElement("div", {
    key: index
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_MYCONNECTIONS_CONSUMER_NO"),
    label: "" + t("WS_MYCONNECTIONS_CONSUMER_NO"),
    text: (application === null || application === void 0 ? void 0 : application.connectionNo) || t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),
    label: "" + t("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.billingPeriod) || t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),
    label: "" + t("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.meterStatus) || t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),
    label: "" + t("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),
    text: (application === null || application === void 0 ? void 0 : application.lastReading) || t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),
    label: "" + t("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),
    text: application !== null && application !== void 0 && application.lastReadingDate ? Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.lastReadingDate) : t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_SERV_DETAIL_CUR_METER_READ"),
    label: "" + t("WS_SERV_DETAIL_CUR_METER_READ"),
    text: (application === null || application === void 0 ? void 0 : application.currentReading) || t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),
    label: "" + t("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),
    text: application !== null && application !== void 0 && application.currentReadingDate ? Digit.DateUtils.ConvertEpochToDate(application === null || application === void 0 ? void 0 : application.currentReadingDate) : t("NA"),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    key: t("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),
    label: "" + t("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),
    text: consumption(application === null || application === void 0 ? void 0 : application.currentReading, application === null || application === void 0 ? void 0 : application.lastReading),
    className: "border-none"
  }))))), !(meterReadings !== null && meterReadings !== void 0 && meterReadings.length) > 0 && /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginLeft: "16px",
      marginTop: "16px"
    }
  }, t("WS_NO_CONSUMPTION_FOUND"))), isLoading || meterStatusLoading || billingPeriodLoading || !isUserAllowedToAddMeterReading ? null : /*#__PURE__*/React__default.createElement("div", null, isAddMeterReadingButtonEnable && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WS_CONSUMPTION_BUTTON_METER_READING_LABEL"),
    onSubmit: popUp
  })))), openModal && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: () => {},
    formId: "modal-action",
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, isEnableLoader ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    onFormValueChange: onFormValueChange,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: onSubmit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    style: {
      zIndex: "10000"
    },
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    onClose: closeToast
  }));
};

const ModifyApplication = () => {
  var _state, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  const [enabledLoader, setEnabledLoader] = React.useState(true);
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  const [isEnableLoader, setIsEnableLoader] = React.useState(false);
  let tenantId = Digit.ULBService.getCurrentTenantId();
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(stateId, {});
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : _state.data);
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [propertyId, setPropertyId] = React.useState(new URLSearchParams(reactRouterDom.useLocation().search).get("propertyId"));
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const {
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId,
    enabled: propertyId && propertyId != "" ? true : false,
    privacy: Digit.Utils.getPrivacyObject()
  });
  React.useEffect(() => {
    if (!isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.hideInCitizen && conf.isModify);
      config.head = "WS_WATER_AND_SEWERAGE_MODIFY_CONNECTION_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isModifyConnection) bodyDetails.push(data);
      });
      bodyDetails.forEach(bdyData => {
        if ((bdyData === null || bdyData === void 0 ? void 0 : bdyData.head) == "WS_COMMON_PROPERTY_DETAILS") bdyData.head = "";
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    var _sessionFormData$cpt, _sessionFormData$cpt$, _sessionFormData$cpt2, _sessionFormData$cpt3;
    !propertyId && (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt = sessionFormData.cpt) === null || _sessionFormData$cpt === void 0 ? void 0 : (_sessionFormData$cpt$ = _sessionFormData$cpt.details) === null || _sessionFormData$cpt$ === void 0 ? void 0 : _sessionFormData$cpt$.propertyId) && setPropertyId(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt2 = sessionFormData.cpt) === null || _sessionFormData$cpt2 === void 0 ? void 0 : (_sessionFormData$cpt3 = _sessionFormData$cpt2.details) === null || _sessionFormData$cpt3 === void 0 ? void 0 : _sessionFormData$cpt3.propertyId);
  }, [sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id) {
          return Promise.resolve(convertApplicationData(details, serviceType, true, undefined, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails]);
  React.useEffect(() => {
    var _propertyDetails$Prop;
    setSessionFormData({
      ...sessionFormData,
      cpt: {
        details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop[0]
      }
    });
  }, [propertyDetails]);
  React.useEffect(() => {
    var _sessionFormData$Conn, _sessionFormData$Conn2;
    if (sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn !== void 0 && (_sessionFormData$Conn2 = _sessionFormData$Conn[0]) !== null && _sessionFormData$Conn2 !== void 0 && _sessionFormData$Conn2.applicationNo) {
      setEnabledLoader(false);
    }
  }, [propertyDetails, sessionFormData, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      var _sessionFormData$Conn3, _sessionFormData$Conn4, _sessionFormData$Conn5, _sessionFormData$Conn6, _sessionFormData$Conn7;
      if (isAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/application-details?applicationNumber=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn3 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn3 === void 0 ? void 0 : (_sessionFormData$Conn4 = _sessionFormData$Conn3[0]) === null || _sessionFormData$Conn4 === void 0 ? void 0 : _sessionFormData$Conn4.applicationNo) + "&service=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn5 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn5 === void 0 ? void 0 : (_sessionFormData$Conn6 = _sessionFormData$Conn5[0]) === null || _sessionFormData$Conn6 === void 0 ? void 0 : (_sessionFormData$Conn7 = _sessionFormData$Conn6.serviceName) === null || _sessionFormData$Conn7 === void 0 ? void 0 : _sessionFormData$Conn7.toUpperCase());
    }, 3000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const {
    isLoading: creatingWaterApplicationLoading,
    isError: createWaterApplicationError,
    data: createWaterResponse,
    error: createWaterError,
    mutate: waterMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("WATER");
  const {
    isLoading: updatingWaterApplicationLoading,
    isError: updateWaterApplicationError,
    data: updateWaterResponse,
    error: updateWaterError,
    mutate: waterUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("WATER");
  const {
    isLoading: creatingSewerageApplicationLoading,
    isError: createSewerageApplicationError,
    data: createSewerageResponse,
    error: createSewerageError,
    mutate: sewerageMutation
  } = Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE");
  const {
    isLoading: updatingSewerageApplicationLoading,
    isError: updateSewerageApplicationError,
    data: updateSewerageResponse,
    error: updateSewerageError,
    mutate: sewerageUpdateMutation
  } = Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      var _data$cpt, _propertyDetails$Prop2;
      if (!(data !== null && data !== void 0 && (_data$cpt = data.cpt) !== null && _data$cpt !== void 0 && _data$cpt.id) && !(propertyDetails !== null && propertyDetails !== void 0 && (_propertyDetails$Prop2 = propertyDetails.Properties) !== null && _propertyDetails$Prop2 !== void 0 && _propertyDetails$Prop2[0])) {
        var _data$cpt2;
        if (!(data !== null && data !== void 0 && (_data$cpt2 = data.cpt) !== null && _data$cpt2 !== void 0 && _data$cpt2.details) || !propertyDetails) {
          setShowToast({
            key: "error",
            message: "ERR_INVALID_PROPERTY_ID"
          });
          return Promise.resolve();
        }
      }
      const _temp7 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          var _data$cpt3;
          if (!(data !== null && data !== void 0 && (_data$cpt3 = data.cpt) !== null && _data$cpt3 !== void 0 && _data$cpt3.details)) {
            var _propertyDetails$Prop3;
            data.cpt = {
              details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop3 = propertyDetails.Properties) === null || _propertyDetails$Prop3 === void 0 ? void 0 : _propertyDetails$Prop3[0]
            };
          }
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertModifyApplicationDetails(data, details)).then(function (convertAppData) {
            var _data$ConnectionDetai, _data$ConnectionDetai2;
            function _temp6() {
              const _temp4 = function () {
                if (serviceType !== "WATER") {
                  const _temp3 = function () {
                    if (sewerageMutation) {
                      setIsEnableLoader(true);
                      return Promise.resolve(sewerageMutation(reqDetails, {
                        onError: (error, variables) => {
                          var _error$response, _error$response$data, _error$response$data$, _error$response$data$2, _error$response2, _error$response2$data, _error$response2$data2, _error$response2$data3;
                          setIsEnableLoader(false);
                          setShowToast({
                            key: "error",
                            message: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors) !== null && _error$response$data$ !== void 0 && (_error$response$data$2 = _error$response$data$[0]) !== null && _error$response$data$2 !== void 0 && _error$response$data$2.message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors) === null || _error$response2$data2 === void 0 ? void 0 : (_error$response2$data3 = _error$response2$data2[0]) === null || _error$response2$data3 === void 0 ? void 0 : _error$response2$data3.message : error
                          });
                          setTimeout(closeToastOfError, 5000);
                        },
                        onSuccess: function (data, variables) {
                          try {
                            var _data$SewerageConnect;
                            return Promise.resolve(updatePayloadOfWS(data === null || data === void 0 ? void 0 : (_data$SewerageConnect = data.SewerageConnections) === null || _data$SewerageConnect === void 0 ? void 0 : _data$SewerageConnect[0], "SEWERAGE")).then(function (response) {
                              let sewerageConnectionUpdate = {
                                SewerageConnection: response
                              };
                              return Promise.resolve(sewerageUpdateMutation(sewerageConnectionUpdate, {
                                onError: (error, variables) => {
                                  setIsEnableLoader(false);
                                  setShowToast({
                                    key: "error",
                                    message: error !== null && error !== void 0 && error.message ? error.message : error
                                  });
                                  setTimeout(closeToastOfError, 5000);
                                },
                                onSuccess: (data, variables) => {
                                  var _data$SewerageConnect2, _data$SewerageConnect3;
                                  clearSessionFormData();
                                  history.push("/digit-ui/employee/ws/ws-response?applicationNumber1=" + (data === null || data === void 0 ? void 0 : (_data$SewerageConnect2 = data.SewerageConnections) === null || _data$SewerageConnect2 === void 0 ? void 0 : (_data$SewerageConnect3 = _data$SewerageConnect2[0]) === null || _data$SewerageConnect3 === void 0 ? void 0 : _data$SewerageConnect3.applicationNo));
                                }
                              })).then(function () {});
                            });
                          } catch (e) {
                            return Promise.reject(e);
                          }
                        }
                      })).then(function () {});
                    }
                  }();
                  if (_temp3 && _temp3.then) return _temp3.then(function () {});
                }
              }();
              if (_temp4 && _temp4.then) return _temp4.then(function () {});
            }
            const reqDetails = (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai = data.ConnectionDetails) === null || _data$ConnectionDetai === void 0 ? void 0 : (_data$ConnectionDetai2 = _data$ConnectionDetai[0]) === null || _data$ConnectionDetai2 === void 0 ? void 0 : _data$ConnectionDetai2.serviceName) == "WATER" ? {
              WaterConnection: convertAppData
            } : {
              SewerageConnection: convertAppData
            };
            const _temp5 = function () {
              if (serviceType == "WATER") {
                const _temp2 = function () {
                  if (waterMutation) {
                    setIsEnableLoader(true);
                    return Promise.resolve(waterMutation(reqDetails, {
                      onError: (error, variables) => {
                        var _error$response3, _error$response3$data, _error$response3$data2, _error$response4, _error$response4$data, _error$response4$data2;
                        setIsEnableLoader(false);
                        setShowToast({
                          key: "error",
                          message: error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && (_error$response3$data2 = _error$response3$data.Errors) !== null && _error$response3$data2 !== void 0 && _error$response3$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : (_error$response4$data2 = _error$response4$data.Errors) === null || _error$response4$data2 === void 0 ? void 0 : _error$response4$data2[0].message : error
                        });
                        setTimeout(closeToastOfError, 5000);
                      },
                      onSuccess: function (data, variables) {
                        try {
                          var _data$WaterConnection;
                          return Promise.resolve(updatePayloadOfWS(data === null || data === void 0 ? void 0 : (_data$WaterConnection = data.WaterConnection) === null || _data$WaterConnection === void 0 ? void 0 : _data$WaterConnection[0], "WATER")).then(function (response) {
                            let waterConnectionUpdate = {
                              WaterConnection: response
                            };
                            waterUpdateMutation(waterConnectionUpdate, {
                              onError: (error, variables) => {
                                var _error$response5, _error$response5$data, _error$response5$data2, _error$response6, _error$response6$data, _error$response6$data2;
                                setIsEnableLoader(false);
                                setShowToast({
                                  key: "error",
                                  message: error !== null && error !== void 0 && (_error$response5 = error.response) !== null && _error$response5 !== void 0 && (_error$response5$data = _error$response5.data) !== null && _error$response5$data !== void 0 && (_error$response5$data2 = _error$response5$data.Errors) !== null && _error$response5$data2 !== void 0 && _error$response5$data2[0].message ? error === null || error === void 0 ? void 0 : (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : (_error$response6$data2 = _error$response6$data.Errors) === null || _error$response6$data2 === void 0 ? void 0 : _error$response6$data2[0].message : error
                                });
                                setTimeout(closeToastOfError, 5000);
                              },
                              onSuccess: (data, variables) => {
                                var _data$WaterConnection2, _data$WaterConnection3;
                                clearSessionFormData();
                                history.push("/digit-ui/employee/ws/ws-response?applicationNumber=" + (data === null || data === void 0 ? void 0 : (_data$WaterConnection2 = data.WaterConnection) === null || _data$WaterConnection2 === void 0 ? void 0 : (_data$WaterConnection3 = _data$WaterConnection2[0]) === null || _data$WaterConnection3 === void 0 ? void 0 : _data$WaterConnection3.applicationNo));
                              }
                            });
                          });
                        } catch (e) {
                          return Promise.reject(e);
                        }
                      }
                    })).then(function () {});
                  }
                }();
                if (_temp2 && _temp2.then) return _temp2.then(function () {});
              }
            }();
            return _temp5 && _temp5.then ? _temp5.then(_temp6) : _temp6(_temp5);
          });
        }
      }();
      return Promise.resolve(_temp7 && _temp7.then ? _temp7.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  if (enabledLoader || isEnableLoader || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    isDleteBtn: true,
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    onClose: closeToast
  }));
};

const EditModifyApplication = () => {
  var _state;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  const [enabledLoader, setEnabledLoader] = React.useState(true);
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : _state.data);
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(stateId, {});
  const [propertyId, setPropertyId] = React.useState(new URLSearchParams(reactRouterDom.useLocation().search).get("propertyId"));
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const {
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId,
    enabled: propertyId && propertyId != "" ? true : false
  });
  React.useEffect(() => {
    if (!isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.hideInCitizen && conf.isModify);
      config.head = "WS_WATER_AND_SEWERAGE_MODIFY_CONNECTION_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isModifyConnection) bodyDetails.push(data);
      });
      bodyDetails.forEach(bdyData => {
        if ((bdyData === null || bdyData === void 0 ? void 0 : bdyData.head) == "WS_COMMON_PROPERTY_DETAILS") bdyData.head = "";
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    var _sessionFormData$cpt, _sessionFormData$cpt$, _sessionFormData$cpt2, _sessionFormData$cpt3;
    !propertyId && (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt = sessionFormData.cpt) === null || _sessionFormData$cpt === void 0 ? void 0 : (_sessionFormData$cpt$ = _sessionFormData$cpt.details) === null || _sessionFormData$cpt$ === void 0 ? void 0 : _sessionFormData$cpt$.propertyId) && setPropertyId(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt2 = sessionFormData.cpt) === null || _sessionFormData$cpt2 === void 0 ? void 0 : (_sessionFormData$cpt3 = _sessionFormData$cpt2.details) === null || _sessionFormData$cpt3 === void 0 ? void 0 : _sessionFormData$cpt3.propertyId);
  }, [sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details$applicationD) {
        if (details !== null && details !== void 0 && (_details$applicationD = details.applicationData) !== null && _details$applicationD !== void 0 && _details$applicationD.id && !IsDetailsExists) {
          return Promise.resolve(convertApplicationData(details, serviceType, true, false, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [propertyDetails, sessionFormData, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    var _propertyDetails$Prop;
    setSessionFormData({
      ...sessionFormData,
      cpt: {
        details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop[0]
      }
    });
  }, [propertyDetails]);
  React.useEffect(() => {
    var _sessionFormData$Conn, _sessionFormData$Conn2;
    if (sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn !== void 0 && (_sessionFormData$Conn2 = _sessionFormData$Conn[0]) !== null && _sessionFormData$Conn2 !== void 0 && _sessionFormData$Conn2.applicationNo) {
      setEnabledLoader(false);
    }
  }, [propertyDetails, sessionFormData, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      var _sessionFormData$Conn3, _sessionFormData$Conn4, _sessionFormData$Conn5, _sessionFormData$Conn6, _sessionFormData$Conn7;
      if (isAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/application-details?applicationNumber=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn3 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn3 === void 0 ? void 0 : (_sessionFormData$Conn4 = _sessionFormData$Conn3[0]) === null || _sessionFormData$Conn4 === void 0 ? void 0 : _sessionFormData$Conn4.applicationNo) + "&service=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn5 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn5 === void 0 ? void 0 : (_sessionFormData$Conn6 = _sessionFormData$Conn5[0]) === null || _sessionFormData$Conn6 === void 0 ? void 0 : (_sessionFormData$Conn7 = _sessionFormData$Conn6.serviceName) === null || _sessionFormData$Conn7 === void 0 ? void 0 : _sessionFormData$Conn7.toUpperCase()) + "&mode=MODIFY";
    }, 3000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(filters === null || filters === void 0 ? void 0 : filters.service);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertModifyApplicationDetails(data, details, "SUBMIT_APPLICATION")).then(function (convertAppData) {
            var _data$ConnectionDetai, _data$ConnectionDetai2;
            const reqDetails = (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai = data.ConnectionDetails) === null || _data$ConnectionDetai === void 0 ? void 0 : (_data$ConnectionDetai2 = _data$ConnectionDetai[0]) === null || _data$ConnectionDetai2 === void 0 ? void 0 : _data$ConnectionDetai2.serviceName) == "WATER" ? {
              WaterConnection: convertAppData
            } : {
              SewerageConnection: convertAppData
            };
            if (mutate) {
              mutate(reqDetails, {
                onError: (error, variables) => {
                  setShowToast({
                    key: "error",
                    message: error !== null && error !== void 0 && error.message ? error.message : error
                  });
                  setTimeout(closeToastOfError, 5000);
                },
                onSuccess: (data, variables) => {
                  setShowToast({
                    key: false,
                    message: "WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"
                  });
                  setIsAppDetailsPage(true);
                }
              });
            }
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  if (enabledLoader || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    onClose: closeToast,
    isDleteBtn: true
  }));
};

const getPath$4 = (path, params) => {
  params && Object.keys(params).map(key => {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
const DisconnectionApplication = () => {
  const {
    t
  } = reactI18next.useTranslation();
  const match = reactRouterDom.useRouteMatch();
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(stateId, {});
  let config = [];
  if (!isLoading && newConfig.length > 0) {
    newConfig.forEach(obj => {
      config = config.concat(obj.body.filter(a => !a.hideInCitizen));
    });
    config.indexRoute = "docsrequired";
  } else {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map((routeObj, index) => {
    const {
      component,
      texts,
      inputs,
      key,
      isSkipEnabled
    } = routeObj;
    const Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$4(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts,
        inputs,
        key,
        isSkipEnabled
      },
      t: t,
      userType: "employee"
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$4(match.path, match.params) + "/" + config.indexRoute
  })));
};

const convertEditApplicationDetails1 = (data, appData, serviceType) => {
  var _data$cpt, _data$cpt$details, _data$cpt$details$own, _data$ConnectionDetai, _data$ConnectionDetai2, _data$ConnectionDetai3, _data$ConnectionDetai4, _data$ConnectionDetai5, _data$ConnectionDetai6, _data$ConnectionDetai7, _data$ConnectionDetai8, _data$ConnectionDetai9, _data$ConnectionDetai10, _data$ConnectionDetai11, _data$ConnectionDetai12, _data$ConnectionDetai13, _data$ConnectionDetai14, _data$ConnectionDetai15, _data$ConnectionDetai16, _data$ConnectionDetai17, _data$ConnectionDetai18, _data$ConnectionHolde, _data$ConnectionHolde2, _appData$applicationD, _appData$applicationD2, _data$ConnectionHolde3, _data$ConnectionHolde4, _data$ConnectionHolde5, _data$ConnectionHolde6, _data$ConnectionHolde7, _data$ConnectionHolde8, _data$ConnectionHolde9, _data$ConnectionHolde10, _data$ConnectionHolde11, _data$ConnectionHolde12, _data$ConnectionHolde13, _data$ConnectionHolde14, _data$ConnectionHolde15, _data$ConnectionHolde16, _data$ConnectionHolde17, _data$ConnectionHolde18, _data$ConnectionHolde19, _data$ConnectionHolde20, _data$ConnectionHolde21, _data$cpt2, _data$cpt3, _data$cpt3$details, _data$DocumentsRequir, _data$plumberDetails, _data$plumberDetails$, _data$plumberDetails2, _data$plumberDetails3, _data$plumberDetails4, _data$plumberDetails5, _data$roadCuttingDeta, _data$connectionDetai, _data$connectionDetai2, _data$connectionDetai3, _data$connectionDetai4, _data$connectionDetai5, _data$connectionDetai6, _data$connectionDetai7, _data$connectionDetai8, _data$connectionDetai9, _data$connectionDetai10, _data$connectionDetai11, _data$connectionDetai12, _data$connectionDetai13, _data$connectionDetai14, _data$connectionDetai15, _data$connectionDetai16, _data$connectionDetai17, _data$connectionDetai18, _data$cpt4, _data$cpt4$details, _data$plumberDetails6, _data$plumberDetails7, _data$plumberDetails8, _data$cpt5, _data$cpt5$details, _data$cpt5$details$ad, _data$cpt5$details$ad2, _data$plumberDetails12, _data$plumberDetails13, _data$plumberDetails14;
  data === null || data === void 0 ? void 0 : (_data$cpt = data.cpt) === null || _data$cpt === void 0 ? void 0 : (_data$cpt$details = _data$cpt.details) === null || _data$cpt$details === void 0 ? void 0 : (_data$cpt$details$own = _data$cpt$details.owners) === null || _data$cpt$details$own === void 0 ? void 0 : _data$cpt$details$own.forEach(owner => {
    if (owner !== null && owner !== void 0 && owner.permanentAddress) owner.correspondenceAddress = owner === null || owner === void 0 ? void 0 : owner.permanentAddress;
  });
  let payload = {
    ...appData.applicationData,
    proposedTaps: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai = data.ConnectionDetails) === null || _data$ConnectionDetai === void 0 ? void 0 : (_data$ConnectionDetai2 = _data$ConnectionDetai[0]) === null || _data$ConnectionDetai2 === void 0 ? void 0 : _data$ConnectionDetai2.proposedTaps) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai3 = data.ConnectionDetails) === null || _data$ConnectionDetai3 === void 0 ? void 0 : (_data$ConnectionDetai4 = _data$ConnectionDetai3[0]) === null || _data$ConnectionDetai4 === void 0 ? void 0 : _data$ConnectionDetai4.proposedTaps),
    proposedPipeSize: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai5 = data.ConnectionDetails) === null || _data$ConnectionDetai5 === void 0 ? void 0 : (_data$ConnectionDetai6 = _data$ConnectionDetai5[0]) === null || _data$ConnectionDetai6 === void 0 ? void 0 : (_data$ConnectionDetai7 = _data$ConnectionDetai6.proposedPipeSize) === null || _data$ConnectionDetai7 === void 0 ? void 0 : _data$ConnectionDetai7.size) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai8 = data.ConnectionDetails) === null || _data$ConnectionDetai8 === void 0 ? void 0 : (_data$ConnectionDetai9 = _data$ConnectionDetai8[0]) === null || _data$ConnectionDetai9 === void 0 ? void 0 : (_data$ConnectionDetai10 = _data$ConnectionDetai9.proposedPipeSize) === null || _data$ConnectionDetai10 === void 0 ? void 0 : _data$ConnectionDetai10.size),
    proposedWaterClosets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai11 = data.ConnectionDetails) === null || _data$ConnectionDetai11 === void 0 ? void 0 : (_data$ConnectionDetai12 = _data$ConnectionDetai11[0]) === null || _data$ConnectionDetai12 === void 0 ? void 0 : _data$ConnectionDetai12.proposedWaterClosets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai13 = data.ConnectionDetails) === null || _data$ConnectionDetai13 === void 0 ? void 0 : (_data$ConnectionDetai14 = _data$ConnectionDetai13[0]) === null || _data$ConnectionDetai14 === void 0 ? void 0 : _data$ConnectionDetai14.proposedWaterClosets),
    proposedToilets: (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai15 = data.ConnectionDetails) === null || _data$ConnectionDetai15 === void 0 ? void 0 : (_data$ConnectionDetai16 = _data$ConnectionDetai15[0]) === null || _data$ConnectionDetai16 === void 0 ? void 0 : _data$ConnectionDetai16.proposedToilets) && Number(data === null || data === void 0 ? void 0 : (_data$ConnectionDetai17 = data.ConnectionDetails) === null || _data$ConnectionDetai17 === void 0 ? void 0 : (_data$ConnectionDetai18 = _data$ConnectionDetai17[0]) === null || _data$ConnectionDetai18 === void 0 ? void 0 : _data$ConnectionDetai18.proposedToilets),
    connectionHolders: !(data !== null && data !== void 0 && (_data$ConnectionHolde = data.ConnectionHolderDetails) !== null && _data$ConnectionHolde !== void 0 && (_data$ConnectionHolde2 = _data$ConnectionHolde[0]) !== null && _data$ConnectionHolde2 !== void 0 && _data$ConnectionHolde2.sameAsOwnerDetails) ? [{
      ...(appData === null || appData === void 0 ? void 0 : (_appData$applicationD = appData.applicationData) === null || _appData$applicationD === void 0 ? void 0 : (_appData$applicationD2 = _appData$applicationD.connectionHolders) === null || _appData$applicationD2 === void 0 ? void 0 : _appData$applicationD2[0]),
      correspondenceAddress: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde3 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde3 === void 0 ? void 0 : (_data$ConnectionHolde4 = _data$ConnectionHolde3[0]) === null || _data$ConnectionHolde4 === void 0 ? void 0 : _data$ConnectionHolde4.address) || "",
      fatherOrHusbandName: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde5 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde5 === void 0 ? void 0 : (_data$ConnectionHolde6 = _data$ConnectionHolde5[0]) === null || _data$ConnectionHolde6 === void 0 ? void 0 : _data$ConnectionHolde6.guardian) || "",
      gender: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde7 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde7 === void 0 ? void 0 : (_data$ConnectionHolde8 = _data$ConnectionHolde7[0]) === null || _data$ConnectionHolde8 === void 0 ? void 0 : (_data$ConnectionHolde9 = _data$ConnectionHolde8.gender) === null || _data$ConnectionHolde9 === void 0 ? void 0 : _data$ConnectionHolde9.code) || "",
      mobileNumber: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde10 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde10 === void 0 ? void 0 : (_data$ConnectionHolde11 = _data$ConnectionHolde10[0]) === null || _data$ConnectionHolde11 === void 0 ? void 0 : _data$ConnectionHolde11.mobileNumber) || "",
      name: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde12 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde12 === void 0 ? void 0 : (_data$ConnectionHolde13 = _data$ConnectionHolde12[0]) === null || _data$ConnectionHolde13 === void 0 ? void 0 : _data$ConnectionHolde13.name) || "",
      ownerType: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde14 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde14 === void 0 ? void 0 : (_data$ConnectionHolde15 = _data$ConnectionHolde14[0]) === null || _data$ConnectionHolde15 === void 0 ? void 0 : (_data$ConnectionHolde16 = _data$ConnectionHolde15.ownerType) === null || _data$ConnectionHolde16 === void 0 ? void 0 : _data$ConnectionHolde16.code) || "",
      relationship: (data === null || data === void 0 ? void 0 : (_data$ConnectionHolde17 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde17 === void 0 ? void 0 : (_data$ConnectionHolde18 = _data$ConnectionHolde17[0]) === null || _data$ConnectionHolde18 === void 0 ? void 0 : (_data$ConnectionHolde19 = _data$ConnectionHolde18.relationship) === null || _data$ConnectionHolde19 === void 0 ? void 0 : _data$ConnectionHolde19.code) || "",
      sameAsPropertyAddress: data === null || data === void 0 ? void 0 : (_data$ConnectionHolde20 = data.ConnectionHolderDetails) === null || _data$ConnectionHolde20 === void 0 ? void 0 : (_data$ConnectionHolde21 = _data$ConnectionHolde20[0]) === null || _data$ConnectionHolde21 === void 0 ? void 0 : _data$ConnectionHolde21.sameAsOwnerDetails
    }] : null,
    property: data === null || data === void 0 ? void 0 : (_data$cpt2 = data.cpt) === null || _data$cpt2 === void 0 ? void 0 : _data$cpt2.details,
    propertyId: data === null || data === void 0 ? void 0 : (_data$cpt3 = data.cpt) === null || _data$cpt3 === void 0 ? void 0 : (_data$cpt3$details = _data$cpt3.details) === null || _data$cpt3$details === void 0 ? void 0 : _data$cpt3$details.propertyId,
    processInstance: {
      ...(appData === null || appData === void 0 ? void 0 : appData.processInstance),
      action: "VERIFY_AND_FORWARD"
    },
    action: "VERIFY_AND_FORWARD",
    documents: data === null || data === void 0 ? void 0 : (_data$DocumentsRequir = data.DocumentsRequired) === null || _data$DocumentsRequir === void 0 ? void 0 : _data$DocumentsRequir.documents,
    plumberInfo: [{
      licenseNo: (data === null || data === void 0 ? void 0 : (_data$plumberDetails = data.plumberDetails) === null || _data$plumberDetails === void 0 ? void 0 : (_data$plumberDetails$ = _data$plumberDetails[0]) === null || _data$plumberDetails$ === void 0 ? void 0 : _data$plumberDetails$.plumberLicenseNo) || (appData === null || appData === void 0 ? void 0 : appData.plumberLicenseNo),
      name: (data === null || data === void 0 ? void 0 : (_data$plumberDetails2 = data.plumberDetails) === null || _data$plumberDetails2 === void 0 ? void 0 : (_data$plumberDetails3 = _data$plumberDetails2[0]) === null || _data$plumberDetails3 === void 0 ? void 0 : _data$plumberDetails3.plumberName) || (appData === null || appData === void 0 ? void 0 : appData.plumberName),
      mobileNumber: (data === null || data === void 0 ? void 0 : (_data$plumberDetails4 = data.plumberDetails) === null || _data$plumberDetails4 === void 0 ? void 0 : (_data$plumberDetails5 = _data$plumberDetails4[0]) === null || _data$plumberDetails5 === void 0 ? void 0 : _data$plumberDetails5.plumberMobileNo) || (appData === null || appData === void 0 ? void 0 : appData.plumberMobileNo)
    }],
    roadCuttingInfo: data === null || data === void 0 ? void 0 : (_data$roadCuttingDeta = data.roadCuttingDetails) === null || _data$roadCuttingDeta === void 0 ? void 0 : _data$roadCuttingDeta.filter(o => o.roadType.code != "").map(details => {
      var _details$roadType, _details$roadType2;
      return details !== null && details !== void 0 && details.id && (details === null || details === void 0 ? void 0 : details.id) !== null ? {
        id: details === null || details === void 0 ? void 0 : details.id,
        roadType: details === null || details === void 0 ? void 0 : (_details$roadType = details.roadType) === null || _details$roadType === void 0 ? void 0 : _details$roadType.code,
        roadCuttingArea: details === null || details === void 0 ? void 0 : details.area,
        status: details === null || details === void 0 ? void 0 : details.status
      } : {
        roadType: details === null || details === void 0 ? void 0 : (_details$roadType2 = details.roadType) === null || _details$roadType2 === void 0 ? void 0 : _details$roadType2.code,
        roadCuttingArea: details === null || details === void 0 ? void 0 : details.area
      };
    }),
    connectionNo: null,
    ...(serviceType === "WATER" ? {
      connectionType: (data === null || data === void 0 ? void 0 : (_data$connectionDetai = data.connectionDetails) === null || _data$connectionDetai === void 0 ? void 0 : (_data$connectionDetai2 = _data$connectionDetai[0]) === null || _data$connectionDetai2 === void 0 ? void 0 : (_data$connectionDetai3 = _data$connectionDetai2.connectionType) === null || _data$connectionDetai3 === void 0 ? void 0 : _data$connectionDetai3.code) || (appData === null || appData === void 0 ? void 0 : appData.connectionType),
      waterSource: (data === null || data === void 0 ? void 0 : (_data$connectionDetai4 = data.connectionDetails) === null || _data$connectionDetai4 === void 0 ? void 0 : (_data$connectionDetai5 = _data$connectionDetai4[0]) === null || _data$connectionDetai5 === void 0 ? void 0 : (_data$connectionDetai6 = _data$connectionDetai5.sourceSubData) === null || _data$connectionDetai6 === void 0 ? void 0 : _data$connectionDetai6.code) || (appData === null || appData === void 0 ? void 0 : appData.waterSource),
      pipeSize: (data === null || data === void 0 ? void 0 : (_data$connectionDetai7 = data.connectionDetails) === null || _data$connectionDetai7 === void 0 ? void 0 : (_data$connectionDetai8 = _data$connectionDetai7[0]) === null || _data$connectionDetai8 === void 0 ? void 0 : (_data$connectionDetai9 = _data$connectionDetai8.pipeSize) === null || _data$connectionDetai9 === void 0 ? void 0 : _data$connectionDetai9.size) || (appData === null || appData === void 0 ? void 0 : appData.pipeSize),
      noOfTaps: (data === null || data === void 0 ? void 0 : (_data$connectionDetai10 = data.connectionDetails) === null || _data$connectionDetai10 === void 0 ? void 0 : (_data$connectionDetai11 = _data$connectionDetai10[0]) === null || _data$connectionDetai11 === void 0 ? void 0 : _data$connectionDetai11.noOfTaps) || (appData === null || appData === void 0 ? void 0 : appData.noOfTaps),
      sourceSubData: (data === null || data === void 0 ? void 0 : (_data$connectionDetai12 = data.connectionDetails) === null || _data$connectionDetai12 === void 0 ? void 0 : (_data$connectionDetai13 = _data$connectionDetai12[0]) === null || _data$connectionDetai13 === void 0 ? void 0 : (_data$connectionDetai14 = _data$connectionDetai13.sourceSubData) === null || _data$connectionDetai14 === void 0 ? void 0 : _data$connectionDetai14.code) || (appData === null || appData === void 0 ? void 0 : appData.sourceSubData)
    } : {
      connectionType: 'Non Metered',
      noOfWaterClosets: (data === null || data === void 0 ? void 0 : (_data$connectionDetai15 = data.connectionDetails) === null || _data$connectionDetai15 === void 0 ? void 0 : (_data$connectionDetai16 = _data$connectionDetai15[0]) === null || _data$connectionDetai16 === void 0 ? void 0 : _data$connectionDetai16.noOfWaterClosets) || (appData === null || appData === void 0 ? void 0 : appData.noOfWaterClosets) || "",
      noOfToilets: (data === null || data === void 0 ? void 0 : (_data$connectionDetai17 = data.connectionDetails) === null || _data$connectionDetai17 === void 0 ? void 0 : (_data$connectionDetai18 = _data$connectionDetai17[0]) === null || _data$connectionDetai18 === void 0 ? void 0 : _data$connectionDetai18.noOfToilets) || (appData === null || appData === void 0 ? void 0 : appData.noOfToilets) || ""
    }),
    tenantId: data === null || data === void 0 ? void 0 : (_data$cpt4 = data.cpt) === null || _data$cpt4 === void 0 ? void 0 : (_data$cpt4$details = _data$cpt4.details) === null || _data$cpt4$details === void 0 ? void 0 : _data$cpt4$details.tenantId
  };
  if (data !== null && data !== void 0 && (_data$plumberDetails6 = data.plumberDetails) !== null && _data$plumberDetails6 !== void 0 && (_data$plumberDetails7 = _data$plumberDetails6[0]) !== null && _data$plumberDetails7 !== void 0 && (_data$plumberDetails8 = _data$plumberDetails7.detailsProvidedBy) !== null && _data$plumberDetails8 !== void 0 && _data$plumberDetails8.code || appData !== null && appData !== void 0 && appData.detailsProvidedBy) {
    var _data$plumberDetails9, _data$plumberDetails10, _data$plumberDetails11;
    payload.additionalDetails.detailsProvidedBy = (data === null || data === void 0 ? void 0 : (_data$plumberDetails9 = data.plumberDetails) === null || _data$plumberDetails9 === void 0 ? void 0 : (_data$plumberDetails10 = _data$plumberDetails9[0]) === null || _data$plumberDetails10 === void 0 ? void 0 : (_data$plumberDetails11 = _data$plumberDetails10.detailsProvidedBy) === null || _data$plumberDetails11 === void 0 ? void 0 : _data$plumberDetails11.code) || (appData === null || appData === void 0 ? void 0 : appData.detailsProvidedBy);
    payload.additionalDetails.initialMeterReading = null;
  }
  if (data !== null && data !== void 0 && (_data$cpt5 = data.cpt) !== null && _data$cpt5 !== void 0 && (_data$cpt5$details = _data$cpt5.details) !== null && _data$cpt5$details !== void 0 && (_data$cpt5$details$ad = _data$cpt5$details.address) !== null && _data$cpt5$details$ad !== void 0 && (_data$cpt5$details$ad2 = _data$cpt5$details$ad.locality) !== null && _data$cpt5$details$ad2 !== void 0 && _data$cpt5$details$ad2.code) {
    var _data$cpt6, _data$cpt6$details, _data$cpt6$details$ad, _data$cpt6$details$ad2;
    payload.additionalDetails.locality = data === null || data === void 0 ? void 0 : (_data$cpt6 = data.cpt) === null || _data$cpt6 === void 0 ? void 0 : (_data$cpt6$details = _data$cpt6.details) === null || _data$cpt6$details === void 0 ? void 0 : (_data$cpt6$details$ad = _data$cpt6$details.address) === null || _data$cpt6$details$ad === void 0 ? void 0 : (_data$cpt6$details$ad2 = _data$cpt6$details$ad.locality) === null || _data$cpt6$details$ad2 === void 0 ? void 0 : _data$cpt6$details$ad2.code;
  }
  if ((data === null || data === void 0 ? void 0 : (_data$plumberDetails12 = data.plumberDetails) === null || _data$plumberDetails12 === void 0 ? void 0 : (_data$plumberDetails13 = _data$plumberDetails12[0]) === null || _data$plumberDetails13 === void 0 ? void 0 : (_data$plumberDetails14 = _data$plumberDetails13.detailsProvidedBy) === null || _data$plumberDetails14 === void 0 ? void 0 : _data$plumberDetails14.code) == "ULB") {
    var _data$plumberDetails15, _data$plumberDetails16, _data$plumberDetails17, _data$plumberDetails18, _data$plumberDetails19, _data$plumberDetails20;
    payload.plumberInfo = [{
      licenseNo: (data === null || data === void 0 ? void 0 : (_data$plumberDetails15 = data.plumberDetails) === null || _data$plumberDetails15 === void 0 ? void 0 : (_data$plumberDetails16 = _data$plumberDetails15[0]) === null || _data$plumberDetails16 === void 0 ? void 0 : _data$plumberDetails16.plumberLicenseNo) || (appData === null || appData === void 0 ? void 0 : appData.plumberLicenseNo),
      name: (data === null || data === void 0 ? void 0 : (_data$plumberDetails17 = data.plumberDetails) === null || _data$plumberDetails17 === void 0 ? void 0 : (_data$plumberDetails18 = _data$plumberDetails17[0]) === null || _data$plumberDetails18 === void 0 ? void 0 : _data$plumberDetails18.plumberName) || (appData === null || appData === void 0 ? void 0 : appData.plumberName),
      mobileNumber: (data === null || data === void 0 ? void 0 : (_data$plumberDetails19 = data.plumberDetails) === null || _data$plumberDetails19 === void 0 ? void 0 : (_data$plumberDetails20 = _data$plumberDetails19[0]) === null || _data$plumberDetails20 === void 0 ? void 0 : _data$plumberDetails20.plumberMobileNo) || (appData === null || appData === void 0 ? void 0 : appData.plumberMobileNo)
    }];
  }
  return payload;
};
const WSEditApplicationByConfig = () => {
  var _Digit$SessionStorage, _editApplicationDetai, _state, _state$data, _state2, _state2$data, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  const history = reactRouterDom.useHistory();
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  const [enabledLoader, setEnabledLoader] = React.useState(true);
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const editApplicationDetails = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  const serviceType = (filters === null || filters === void 0 ? void 0 : filters.service) || (editApplicationDetails === null || editApplicationDetails === void 0 ? void 0 : (_editApplicationDetai = editApplicationDetails.applicationData) === null || _editApplicationDetai === void 0 ? void 0 : _editApplicationDetai.serviceType);
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(stateId, {});
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : _state$data.applicationDetails);
  const actionData = cloneDeep_1((_state2 = state) === null || _state2 === void 0 ? void 0 : (_state2$data = _state2.data) === null || _state2$data === void 0 ? void 0 : _state2$data.action);
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSDetailsPage(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [propertyId, setPropertyId] = React.useState(new URLSearchParams(reactRouterDom.useLocation().search).get("propertyId"));
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const [sessionAhocFormData, setSessionAdhocFormData, clearSessionAdhocFormData] = Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA", {});
  const {
    data: propertyDetails
  } = Digit.Hooks.pt.usePropertySearch({
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId
  }, {
    filters: {
      propertyIds: propertyId
    },
    tenantId: tenantId,
    enabled: propertyId && propertyId != "" ? true : false,
    privacy: Digit.Utils.getPrivacyObject()
  });
  React.useEffect(() => {
    if (!isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.hideInCitizen && conf.isEditByConfig);
      config.head = "WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isEditByConfigConnection) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [newConfig]);
  React.useEffect(() => {
    var _sessionFormData$cpt, _sessionFormData$cpt$, _sessionFormData$cpt2, _sessionFormData$cpt3;
    !propertyId && (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt = sessionFormData.cpt) === null || _sessionFormData$cpt === void 0 ? void 0 : (_sessionFormData$cpt$ = _sessionFormData$cpt.details) === null || _sessionFormData$cpt$ === void 0 ? void 0 : _sessionFormData$cpt$.propertyId) && setPropertyId(sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$cpt2 = sessionFormData.cpt) === null || _sessionFormData$cpt2 === void 0 ? void 0 : (_sessionFormData$cpt3 = _sessionFormData$cpt2.details) === null || _sessionFormData$cpt3 === void 0 ? void 0 : _sessionFormData$cpt3.propertyId);
  }, [sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id && !IsDetailsExists) {
          sessionStorage.setItem("appData", JSON.stringify(appData));
          return Promise.resolve(convertApplicationData(details, serviceType, false, false, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt, sessionFormData, propertyDetails]);
  React.useEffect(() => {
    var _propertyDetails$Prop;
    setSessionFormData({
      ...sessionFormData,
      cpt: {
        details: propertyDetails === null || propertyDetails === void 0 ? void 0 : (_propertyDetails$Prop = propertyDetails.Properties) === null || _propertyDetails$Prop === void 0 ? void 0 : _propertyDetails$Prop[0]
      }
    });
  }, [propertyDetails]);
  React.useEffect(() => {
    var _sessionFormData$Docu, _sessionFormData$Docu2, _sessionFormData$Conn, _sessionFormData$Conn2, _sessionFormData$Conn3, _sessionFormData$Conn4, _sessionFormData$cpt4;
    if ((sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Docu = sessionFormData.DocumentsRequired) === null || _sessionFormData$Docu === void 0 ? void 0 : (_sessionFormData$Docu2 = _sessionFormData$Docu.documents) === null || _sessionFormData$Docu2 === void 0 ? void 0 : _sessionFormData$Docu2.length) > 0 || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn !== void 0 && (_sessionFormData$Conn2 = _sessionFormData$Conn[0]) !== null && _sessionFormData$Conn2 !== void 0 && _sessionFormData$Conn2.water || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$Conn3 = sessionFormData.ConnectionDetails) !== null && _sessionFormData$Conn3 !== void 0 && (_sessionFormData$Conn4 = _sessionFormData$Conn3[0]) !== null && _sessionFormData$Conn4 !== void 0 && _sessionFormData$Conn4.sewerage || sessionFormData !== null && sessionFormData !== void 0 && (_sessionFormData$cpt4 = sessionFormData.cpt) !== null && _sessionFormData$cpt4 !== void 0 && _sessionFormData$cpt4.details && !isLoading) {
      setEnabledLoader(false);
    }
  }, [propertyDetails, sessionFormData, sessionFormData === null || sessionFormData === void 0 ? void 0 : sessionFormData.cpt]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      var _sessionFormData$Conn5, _sessionFormData$Conn6, _sessionFormData$Conn7, _sessionFormData$Conn8, _sessionFormData$Conn9;
      if (isAppDetailsPage) window.location.href = window.location.origin + "/digit-ui/employee/ws/application-details?applicationNumber=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn5 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn5 === void 0 ? void 0 : (_sessionFormData$Conn6 = _sessionFormData$Conn5[0]) === null || _sessionFormData$Conn6 === void 0 ? void 0 : _sessionFormData$Conn6.applicationNo) + "&service=" + (sessionFormData === null || sessionFormData === void 0 ? void 0 : (_sessionFormData$Conn7 = sessionFormData.ConnectionDetails) === null || _sessionFormData$Conn7 === void 0 ? void 0 : (_sessionFormData$Conn8 = _sessionFormData$Conn7[0]) === null || _sessionFormData$Conn8 === void 0 ? void 0 : (_sessionFormData$Conn9 = _sessionFormData$Conn8.serviceName) === null || _sessionFormData$Conn9 === void 0 ? void 0 : _sessionFormData$Conn9.toUpperCase());
    }, 5000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details, _formData$ConnectionD, _formData$ConnectionD2, _formData$roadCutting, _formData$roadCutting2, _formData$roadCutting3, _formData$roadCutting4, _formData$roadCutting5, _formData$plumberDeta, _formData$plumberDeta2, _formData$connectionD, _formData$connectionD2, _formData$connectionD3, _formData$connectionD4, _formData$connectionD5, _formData$connectionD6, _formData$ConnectionD3, _formData$ConnectionD4, _formData$roadCutting6, _formData$roadCutting7, _formData$roadCutting8, _formData$roadCutting9, _formData$roadCutting10, _formData$plumberDeta3, _formData$plumberDeta4, _formData$connectionD7, _formData$connectionD8, _formData$connectionD9, _formData$connectionD10;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else if ((_formData$ConnectionD = formData.ConnectionDetails) !== null && _formData$ConnectionD !== void 0 && (_formData$ConnectionD2 = _formData$ConnectionD[0]) !== null && _formData$ConnectionD2 !== void 0 && _formData$ConnectionD2.water && (((_formData$roadCutting = formData.roadCuttingDetails) === null || _formData$roadCutting === void 0 ? void 0 : (_formData$roadCutting2 = _formData$roadCutting[0]) === null || _formData$roadCutting2 === void 0 ? void 0 : (_formData$roadCutting3 = _formData$roadCutting2.roadType) === null || _formData$roadCutting3 === void 0 ? void 0 : _formData$roadCutting3.code) == "" || ((_formData$roadCutting4 = formData.roadCuttingDetails) === null || _formData$roadCutting4 === void 0 ? void 0 : (_formData$roadCutting5 = _formData$roadCutting4[0]) === null || _formData$roadCutting5 === void 0 ? void 0 : _formData$roadCutting5.area) == "" || ((_formData$plumberDeta = formData.plumberDetails) === null || _formData$plumberDeta === void 0 ? void 0 : (_formData$plumberDeta2 = _formData$plumberDeta[0]) === null || _formData$plumberDeta2 === void 0 ? void 0 : _formData$plumberDeta2.detailsProvidedBy) == "" || ((_formData$connectionD = formData.connectionDetails) === null || _formData$connectionD === void 0 ? void 0 : (_formData$connectionD2 = _formData$connectionD[0]) === null || _formData$connectionD2 === void 0 ? void 0 : _formData$connectionD2.connectionType) == "" || ((_formData$connectionD3 = formData.connectionDetails) === null || _formData$connectionD3 === void 0 ? void 0 : (_formData$connectionD4 = _formData$connectionD3[0]) === null || _formData$connectionD4 === void 0 ? void 0 : _formData$connectionD4.waterSource) == "" || ((_formData$connectionD5 = formData.connectionDetails) === null || _formData$connectionD5 === void 0 ? void 0 : (_formData$connectionD6 = _formData$connectionD5[0]) === null || _formData$connectionD6 === void 0 ? void 0 : _formData$connectionD6.sourceSubData) == "")) {
      setSubmitValve(false);
    } else if ((_formData$ConnectionD3 = formData.ConnectionDetails) !== null && _formData$ConnectionD3 !== void 0 && (_formData$ConnectionD4 = _formData$ConnectionD3[0]) !== null && _formData$ConnectionD4 !== void 0 && _formData$ConnectionD4.sewerage && (((_formData$roadCutting6 = formData.roadCuttingDetails) === null || _formData$roadCutting6 === void 0 ? void 0 : (_formData$roadCutting7 = _formData$roadCutting6[0]) === null || _formData$roadCutting7 === void 0 ? void 0 : (_formData$roadCutting8 = _formData$roadCutting7.roadType) === null || _formData$roadCutting8 === void 0 ? void 0 : _formData$roadCutting8.code) == "" || ((_formData$roadCutting9 = formData.roadCuttingDetails) === null || _formData$roadCutting9 === void 0 ? void 0 : (_formData$roadCutting10 = _formData$roadCutting9[0]) === null || _formData$roadCutting10 === void 0 ? void 0 : _formData$roadCutting10.area) == "" || ((_formData$plumberDeta3 = formData.plumberDetails) === null || _formData$plumberDeta3 === void 0 ? void 0 : (_formData$plumberDeta4 = _formData$plumberDeta3[0]) === null || _formData$plumberDeta4 === void 0 ? void 0 : _formData$plumberDeta4.detailsProvidedBy) == "" || ((_formData$connectionD7 = formData.connectionDetails) === null || _formData$connectionD7 === void 0 ? void 0 : (_formData$connectionD8 = _formData$connectionD7[0]) === null || _formData$connectionD8 === void 0 ? void 0 : _formData$connectionD8.noOfWaterClosets) == "" || ((_formData$connectionD9 = formData.connectionDetails) === null || _formData$connectionD9 === void 0 ? void 0 : (_formData$connectionD10 = _formData$connectionD9[0]) === null || _formData$connectionD10 === void 0 ? void 0 : _formData$connectionD10.noOfToilets) == "")) {
      setSubmitValve(false);
    } else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertEditApplicationDetails1(data, details, serviceType)).then(function (convertAppData) {
            var _data$ConnectionDetai19, _data$ConnectionDetai20, _state3;
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocPenalty) convertAppData.additionalDetails.adhocPenalty = parseInt(sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocPenalty);
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocPenaltyComment) convertAppData.additionalDetails.adhocPenaltyComment = (sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocPenaltyComment) || "";
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocPenaltyReason) convertAppData.additionalDetails.adhocPenaltyReason = (sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocPenaltyReason) || "";
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocRebate) convertAppData.additionalDetails.adhocRebate = parseInt(sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocRebate);
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocRebateComment) convertAppData.additionalDetails.adhocRebateComment = (sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocRebateComment) || "";
            if (sessionAhocFormData !== null && sessionAhocFormData !== void 0 && sessionAhocFormData.adhocRebateReason) convertAppData.additionalDetails.adhocRebateReason = (sessionAhocFormData === null || sessionAhocFormData === void 0 ? void 0 : sessionAhocFormData.adhocRebateReason) || "";
            const reqDetails = (data === null || data === void 0 ? void 0 : (_data$ConnectionDetai19 = data.ConnectionDetails) === null || _data$ConnectionDetai19 === void 0 ? void 0 : (_data$ConnectionDetai20 = _data$ConnectionDetai19[0]) === null || _data$ConnectionDetai20 === void 0 ? void 0 : _data$ConnectionDetai20.serviceName) == "WATER" ? {
              WaterConnection: convertAppData
            } : {
              SewerageConnection: convertAppData
            };
            setSubmitValve(false);
            sessionStorage.setItem("redirectedfromEDIT", true);
            sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS", JSON.stringify(convertAppData));
            window.location.assign("" + window.location.origin + ((_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.url));
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  if (enabledLoader || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const GetDisconnectionDetails = () => {
  var _location, _applicationDetails$a, _applicationDetails$p, _applicationDetails$p2, _applicationDetails$p3, _applicationDetails$p4, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12, _workflowDetails$data13, _workflowDetails$data14, _workflowDetails$data15, _workflowDetails$data16, _workflowDetails$data17, _workflowDetails$data18, _workflowDetails$data19, _workflowDetails$data20, _applicationDetails$a2, _workflowDetails$data26, _workflowDetails$data27, _workflowDetails$data28, _workflowDetails$data29, _workflowDetails$data30, _workflowDetails$data31, _workflowDetails$data32, _workflowDetails$data33, _applicationDetails$p5, _applicationDetails$p6, _applicationDetails$p7, _applicationDetails$p8, _applicationDetails$p9, _applicationDetails$p10;
  const getDisconnectionNoticeSearch = function () {
    try {
      var _applicationDetails$a8, _applicationDetails$a9, _applicationDetails$a10;
      let key = "ws-waterdisconnectionnotice";
      let details = {
        WaterConnection: [{
          ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData),
          property: applicationDetails.propertyDetails
        }]
      };
      if (!(applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$a8 = applicationDetails.applicationData) !== null && _applicationDetails$a8 !== void 0 && (_applicationDetails$a9 = _applicationDetails$a8.applicationType) !== null && _applicationDetails$a9 !== void 0 && _applicationDetails$a9.includes("WATER"))) {
        key = "ws-seweragedisconnectionnotice";
        details = {
          SewerageConnection: [{
            ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData),
            property: applicationDetails.propertyDetails
          }]
        };
      }
      return Promise.resolve(Digit.WSService.WSDisconnectionNotice(applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a10 = applicationDetails.applicationData) === null || _applicationDetails$a10 === void 0 ? void 0 : _applicationDetails$a10.tenantId, details, key)).then(function (response) {
        var _applicationDetails$a11;
        return Promise.resolve(Digit.PaymentService.printReciept(applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a11 = applicationDetails.applicationData) === null || _applicationDetails$a11 === void 0 ? void 0 : _applicationDetails$a11.tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const {
    t
  } = reactI18next.useTranslation();
  const menuRef = React.useRef();
  let filters = getQueryStringParams(location.search);
  const [showOptions, setShowOptions] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const applicationNumber = filters === null || filters === void 0 ? void 0 : filters.applicationNumber;
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const stateCode = Digit.ULBService.getStateId();
  sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM");
  sessionStorage.removeItem("IsDetailsExists");
  sessionStorage.setItem("disconnectionURL", JSON.stringify({
    url: "" + ((_location = location) === null || _location === void 0 ? void 0 : _location.pathname) + location.search
  }));
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useDisConnectionDetails(t, tenantId, applicationNumber, serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  const {
    isServicesMasterLoading,
    data: servicesMasterData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["WSEditApplicationByConfigUser"]);
  const appStatus = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.applicationStatus) || "";
  let workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId,
    id: applicationNumber,
    moduleCode: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.processInstancesDetails) === null || _applicationDetails$p === void 0 ? void 0 : (_applicationDetails$p2 = _applicationDetails$p[0]) === null || _applicationDetails$p2 === void 0 ? void 0 : _applicationDetails$p2.businessService
  }, {
    enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$p3 = applicationDetails.processInstancesDetails) !== null && _applicationDetails$p3 !== void 0 && (_applicationDetails$p4 = _applicationDetails$p3[0]) !== null && _applicationDetails$p4 !== void 0 && _applicationDetails$p4.businessService ? true : false
  });
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const closeToast = () => {
    setShowToast(null);
  };
  const closeMenu = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeMenu, showOptions);
  const mobileView = Digit.Utils.browser.isMobile();
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.nextActions) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.length) > 0 && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data3 = workflowDetails.data) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.actionState) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4.nextActions) === null || _workflowDetails$data5 === void 0 ? void 0 : _workflowDetails$data5.length) > 0 && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data6 = workflowDetails.data) !== null && _workflowDetails$data6 !== void 0 && (_workflowDetails$data7 = _workflowDetails$data6.actionState) !== null && _workflowDetails$data7 !== void 0 && (_workflowDetails$data8 = _workflowDetails$data7.nextActions) !== null && _workflowDetails$data8 !== void 0 && _workflowDetails$data8.find(e => e.action === "EDIT")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data9 = workflowDetails.data) !== null && _workflowDetails$data9 !== void 0 && (_workflowDetails$data10 = _workflowDetails$data9.actionState) !== null && _workflowDetails$data10 !== void 0 && (_workflowDetails$data11 = _workflowDetails$data10.nextActions) !== null && _workflowDetails$data11 !== void 0 && _workflowDetails$data11.find(e => e.action === "RESUBMIT_APPLICATION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data12 = workflowDetails.data) !== null && _workflowDetails$data12 !== void 0 && (_workflowDetails$data13 = _workflowDetails$data12.actionState) !== null && _workflowDetails$data13 !== void 0 && (_workflowDetails$data14 = _workflowDetails$data13.nextActions) !== null && _workflowDetails$data14 !== void 0 && _workflowDetails$data14.find(e => e.action === "EXECUTE_DISCONNECTION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data15 = workflowDetails.data) !== null && _workflowDetails$data15 !== void 0 && (_workflowDetails$data16 = _workflowDetails$data15.actionState) !== null && _workflowDetails$data16 !== void 0 && (_workflowDetails$data17 = _workflowDetails$data16.nextActions) !== null && _workflowDetails$data17 !== void 0 && _workflowDetails$data17.find(e => e.action === "SUBMIT_APPLICATION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data18 = workflowDetails.data) !== null && _workflowDetails$data18 !== void 0 && (_workflowDetails$data19 = _workflowDetails$data18.actionState) !== null && _workflowDetails$data19 !== void 0 && (_workflowDetails$data20 = _workflowDetails$data19.nextActions) !== null && _workflowDetails$data20 !== void 0 && _workflowDetails$data20.find(e => e.action === "DISCONNECTION_EXECUTED"))) {
    var _workflowDetails$data21, _workflowDetails$data22;
    workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data21 = workflowDetails.data) === null || _workflowDetails$data21 === void 0 ? void 0 : (_workflowDetails$data22 = _workflowDetails$data21.nextActions) === null || _workflowDetails$data22 === void 0 ? void 0 : _workflowDetails$data22.forEach(data => {
      if (data.action == "EDIT") workflowDetails.data.actionState.nextActions.push(data);
    });
  }
  if ((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.applicationData) === null || _applicationDetails$a2 === void 0 ? void 0 : _applicationDetails$a2.applicationStatus) == "DISCONNECTION_EXECUTED") {
    var _workflowDetails$data23, _workflowDetails$data24, _workflowDetails$data25;
    if (workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data23 = workflowDetails.data) !== null && _workflowDetails$data23 !== void 0 && (_workflowDetails$data24 = _workflowDetails$data23.actionState) !== null && _workflowDetails$data24 !== void 0 && _workflowDetails$data24.nextActions) workflowDetails.data.actionState.nextActions = [];
    if (workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data25 = workflowDetails.data) !== null && _workflowDetails$data25 !== void 0 && _workflowDetails$data25.nextActions) workflowDetails.data.nextActions = [];
  }
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data26 = workflowDetails.data) === null || _workflowDetails$data26 === void 0 ? void 0 : (_workflowDetails$data27 = _workflowDetails$data26.nextActions) === null || _workflowDetails$data27 === void 0 ? void 0 : _workflowDetails$data27.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      var _applicationDetails$a3, _applicationDetails$a4;
      action.redirectionUrll = {
        pathname: (serviceType == "WATER" ? "WS" : "SW") + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a3 = applicationDetails.applicationData) === null || _applicationDetails$a3 === void 0 ? void 0 : _applicationDetails$a3.connectionNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a4 = applicationDetails.applicationData) === null || _applicationDetails$a4 === void 0 ? void 0 : _applicationDetails$a4.connectionNo) + "&IsDisconnectionFlow=" + true,
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data28 = workflowDetails.data) === null || _workflowDetails$data28 === void 0 ? void 0 : (_workflowDetails$data29 = _workflowDetails$data28.actionState) === null || _workflowDetails$data29 === void 0 ? void 0 : (_workflowDetails$data30 = _workflowDetails$data29.nextActions) === null || _workflowDetails$data30 === void 0 ? void 0 : _workflowDetails$data30.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      var _applicationDetails$a5, _applicationDetails$a6;
      action.redirectionUrll = {
        pathname: (serviceType == "WATER" ? "WS" : "SW") + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a5 = applicationDetails.applicationData) === null || _applicationDetails$a5 === void 0 ? void 0 : _applicationDetails$a5.connectionNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a6 = applicationDetails.applicationData) === null || _applicationDetails$a6 === void 0 ? void 0 : _applicationDetails$a6.connectionNo) + "&IsDisconnectionFlow=" + true,
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data31 = workflowDetails.data) === null || _workflowDetails$data31 === void 0 ? void 0 : (_workflowDetails$data32 = _workflowDetails$data31.actionState) === null || _workflowDetails$data32 === void 0 ? void 0 : (_workflowDetails$data33 = _workflowDetails$data32.nextActions) === null || _workflowDetails$data33 === void 0 ? void 0 : _workflowDetails$data33.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "EDIT") {
      var _servicesMasterData$w, _userConfig$, _userConfig$2;
      let pathName = "/digit-ui/employee/ws/edit-disconnection-application?applicationNumber=" + applicationNumber + "&service=" + serviceType;
      const userConfig = (servicesMasterData === null || servicesMasterData === void 0 ? void 0 : (_servicesMasterData$w = servicesMasterData["ws-services-masters"]) === null || _servicesMasterData$w === void 0 ? void 0 : _servicesMasterData$w.WSEditApplicationByConfigUser) || [];
      const editApplicationUserRole = (userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$ = userConfig[0]) === null || _userConfig$ === void 0 ? void 0 : _userConfig$.roles) || [];
      const mdmsApplicationStatus = userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$2 = userConfig[0]) === null || _userConfig$2 === void 0 ? void 0 : _userConfig$2.status;
      let isFieldInspector = false;
      editApplicationUserRole.every((role, index) => {
        isFieldInspector = ifUserRoleExists(role);
        if (isFieldInspector) return false;else return true;
      });
      if (isFieldInspector && appStatus === mdmsApplicationStatus) {
        pathName = "/digit-ui/employee/ws/config-by-disconnection-application?applicationNumber=" + applicationNumber + "&service=" + serviceType;
      }
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "VERIFY_AND_FORWARD"
        }
      };
    }
    if ((action === null || action === void 0 ? void 0 : action.action) === "RESUBMIT_APPLICATION") {
      let pathName = "/digit-ui/employee/ws/resubmit-disconnection-application?applicationNumber=" + applicationNumber + "&service=" + serviceType;
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "VERIFY_AND_FORWARD"
        }
      };
    }
  });
  const handleDownloadPdf = function () {
    try {
      var _applicationDetails$a7;
      const tenantInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a7 = applicationDetails.applicationData) === null || _applicationDetails$a7 === void 0 ? void 0 : _applicationDetails$a7.tenantId;
      let result = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData;
      const PDFdata = getWSDisconnectionApplicationForm({
        ...result
      }, {
        ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.propertyDetails)
      }, tenantInfo, t);
      PDFdata.then(ress => Digit.Utils.pdf.generatev1(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const applicationDownloadObject = {
    order: 1,
    label: t("WS_APPLICATION"),
    onClick: handleDownloadPdf
  };
  const disconnectionNoticeObject = {
    order: 2,
    label: t("WS_DISCONNECTION_NOTICE_LABEL"),
    onClick: () => getDisconnectionNoticeSearch()
  };
  let dowloadOptions = [];
  switch (appStatus) {
    case "DISCONNECTION_EXECUTED":
    case "PENDING_FOR_PAYMENT":
    case "PENDING_FOR_DISCONNECTION_EXECUTION":
      dowloadOptions = [applicationDownloadObject, disconnectionNoticeObject];
      break;
    default:
      dowloadOptions = [applicationDownloadObject];
      break;
  }
  dowloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("WS_APPLICATION_DETAILS"), " "), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className",
    ref: menuRef
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails, {
    applicationDetails: applicationDetails,
    isLoading: isLoading || isServicesMasterLoading,
    isDataLoading: isLoading || isServicesMasterLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p5 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p5 === void 0 ? void 0 : (_applicationDetails$p6 = _applicationDetails$p5[0]) === null || _applicationDetails$p6 === void 0 ? void 0 : (_applicationDetails$p7 = _applicationDetails$p6.businessService) === null || _applicationDetails$p7 === void 0 ? void 0 : _applicationDetails$p7.toUpperCase(),
    moduleCode: "WS",
    showToast: showToast,
    setShowToast: setShowToast,
    closeToast: closeToast,
    timelineStatusPrefix: "WF_" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p8 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p8 === void 0 ? void 0 : (_applicationDetails$p9 = _applicationDetails$p8[0]) === null || _applicationDetails$p9 === void 0 ? void 0 : (_applicationDetails$p10 = _applicationDetails$p9.businessService) === null || _applicationDetails$p10 === void 0 ? void 0 : _applicationDetails$p10.toUpperCase()) + "_",
    isInfoLabel: sessionStorage.getItem("isPrivacyEnabled") === "true" ? true : false
  })));
};

const ModifyApplicationDetails = () => {
  var _applicationDetails$p, _applicationDetails$p2, _applicationDetails$p3, _applicationDetails$p4, _applicationDetails$a14, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12, _workflowDetails$data13, _workflowDetails$data14, _workflowDetails$data15, _workflowDetails$data16, _workflowDetails$data17, _workflowDetails$data18, _workflowDetails$data19, _workflowDetails$data20, _workflowDetails$data23, _workflowDetails$data24, _workflowDetails$data25, _workflowDetails$data26, _workflowDetails$data27, _workflowDetails$data28, _workflowDetails$data29, _workflowDetails$data30, _workflowDetails$data31, _workflowDetails$data32, _workflowDetails$data33, _workflowDetails$data34, _workflowDetails$data35, _applicationDetails$p10, _applicationDetails$p11, _applicationDetails$p12, _applicationDetails$p13, _applicationDetails$p14, _applicationDetails$p15;
  const {
    t
  } = reactI18next.useTranslation();
  const userInfo = Digit.UserService.getUser();
  const tenantId = Digit.ULBService.getCurrentTenantId();
  const [showToast, setShowToast] = React.useState(null);
  const [showOptions, setShowOptions] = React.useState(false);
  let filters = getQueryStringParams(location.search);
  const applicationNumber = filters === null || filters === void 0 ? void 0 : filters.applicationNumber;
  const serviceType = filters === null || filters === void 0 ? void 0 : filters.service;
  const stateCode = Digit.ULBService.getStateId();
  const menuRef = React.useRef();
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useWSModifyDetailsPage(t, tenantId, applicationNumber, serviceType, userInfo, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  const {
    isServicesMasterLoading,
    data: servicesMasterData
  } = Digit.Hooks.ws.useMDMS(stateCode, "ws-services-masters", ["WSEditApplicationByConfigUser"]);
  let workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId,
    id: applicationNumber,
    moduleCode: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.processInstancesDetails) === null || _applicationDetails$p === void 0 ? void 0 : (_applicationDetails$p2 = _applicationDetails$p[0]) === null || _applicationDetails$p2 === void 0 ? void 0 : _applicationDetails$p2.businessService,
    config: {
      enabled: applicationDetails !== null && applicationDetails !== void 0 && (_applicationDetails$p3 = applicationDetails.processInstancesDetails) !== null && _applicationDetails$p3 !== void 0 && (_applicationDetails$p4 = _applicationDetails$p3[0]) !== null && _applicationDetails$p4 !== void 0 && _applicationDetails$p4.businessService ? true : false,
      privacy: Digit.Utils.getPrivacyObject()
    }
  });
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  const closeToast = () => {
    setShowToast(null);
  };
  const checkWSAdditionalDetails = () => {
    var _applicationDetails$a, _applicationDetails$a2, _applicationDetails$a3, _applicationDetails$a4, _applicationDetails$a5, _applicationDetails$a6, _applicationDetails$a7, _applicationDetails$a8, _applicationDetails$a9, _applicationDetails$a10, _applicationDetails$a11, _applicationDetails$a12, _applicationDetails$a13;
    const connectionType = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.connectionType;
    const noOfTaps = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.applicationData) === null || _applicationDetails$a2 === void 0 ? void 0 : _applicationDetails$a2.noOfTaps) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a3 = applicationDetails.applicationData) === null || _applicationDetails$a3 === void 0 ? void 0 : _applicationDetails$a3.noOfTaps;
    const pipeSize = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a4 = applicationDetails.applicationData) === null || _applicationDetails$a4 === void 0 ? void 0 : _applicationDetails$a4.pipeSize) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a5 = applicationDetails.applicationData) === null || _applicationDetails$a5 === void 0 ? void 0 : _applicationDetails$a5.pipeSize;
    const waterSource = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a6 = applicationDetails.applicationData) === null || _applicationDetails$a6 === void 0 ? void 0 : _applicationDetails$a6.waterSource;
    const noOfWaterClosets = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a7 = applicationDetails.applicationData) === null || _applicationDetails$a7 === void 0 ? void 0 : _applicationDetails$a7.noOfWaterClosets) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a8 = applicationDetails.applicationData) === null || _applicationDetails$a8 === void 0 ? void 0 : _applicationDetails$a8.noOfWaterClosets;
    const noOfToilets = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a9 = applicationDetails.applicationData) === null || _applicationDetails$a9 === void 0 ? void 0 : _applicationDetails$a9.noOfToilets) === 0 ? null : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a10 = applicationDetails.applicationData) === null || _applicationDetails$a10 === void 0 ? void 0 : _applicationDetails$a10.noOfToilets;
    const plumberDetails = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a11 = applicationDetails.applicationData) === null || _applicationDetails$a11 === void 0 ? void 0 : (_applicationDetails$a12 = _applicationDetails$a11.additionalDetails) === null || _applicationDetails$a12 === void 0 ? void 0 : _applicationDetails$a12.detailsProvidedBy;
    const roadCuttingInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a13 = applicationDetails.applicationData) === null || _applicationDetails$a13 === void 0 ? void 0 : _applicationDetails$a13.roadCuttingInfo;
    if (!connectionType || !(noOfTaps && pipeSize && waterSource || noOfWaterClosets && noOfToilets) || !plumberDetails || !roadCuttingInfo) {
      return false;
    }
    return true;
  };
  let dowloadOptions = [],
    appStatus = (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a14 = applicationDetails.applicationData) === null || _applicationDetails$a14 === void 0 ? void 0 : _applicationDetails$a14.applicationStatus) || "";
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.actionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "ACTIVATE_CONNECTION") {
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: "/digit-ui/employee/ws/activate-connection?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&action=ACTIVATE_CONNECTION",
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData
      };
    }
    if ((action === null || action === void 0 ? void 0 : action.action) === "RESUBMIT_APPLICATION") {
      var _applicationDetails$p5, _servicesMasterData$w, _userConfig$, _userConfig$2;
      let pathName = "/digit-ui/employee/ws/edit-application?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p5 = applicationDetails.propertyDetails) === null || _applicationDetails$p5 === void 0 ? void 0 : _applicationDetails$p5.propertyId);
      const userConfig = (servicesMasterData === null || servicesMasterData === void 0 ? void 0 : (_servicesMasterData$w = servicesMasterData["ws-services-masters"]) === null || _servicesMasterData$w === void 0 ? void 0 : _servicesMasterData$w.WSEditApplicationByConfigUser) || [];
      const editApplicationUserRole = (userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$ = userConfig[0]) === null || _userConfig$ === void 0 ? void 0 : _userConfig$.roles) || [];
      const mdmsApplicationStatus = userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$2 = userConfig[0]) === null || _userConfig$2 === void 0 ? void 0 : _userConfig$2.status;
      let isFieldInspector = false;
      editApplicationUserRole.every((role, index) => {
        isFieldInspector = ifUserRoleExists(role);
        if (isFieldInspector) return false;else return true;
      });
      if (isFieldInspector && appStatus === mdmsApplicationStatus) {
        var _applicationDetails$p6;
        pathName = "/digit-ui/employee/ws/edit-application-by-config?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p6 = applicationDetails.propertyDetails) === null || _applicationDetails$p6 === void 0 ? void 0 : _applicationDetails$p6.propertyId);
      }
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "RESUBMIT_APPLICATION"
        }
      };
    }
    if ((action === null || action === void 0 ? void 0 : action.action) === "SUBMIT_APPLICATION") {
      var _applicationDetails$p7;
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: "/digit-ui/employee/ws/modify-application-edit?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p7 = applicationDetails.propertyDetails) === null || _applicationDetails$p7 === void 0 ? void 0 : _applicationDetails$p7.propertyId),
        state: applicationDetails
      };
    }
  });
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data4 = workflowDetails.data) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4.nextActions) === null || _workflowDetails$data5 === void 0 ? void 0 : _workflowDetails$data5.length) > 0 && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data6 = workflowDetails.data) === null || _workflowDetails$data6 === void 0 ? void 0 : (_workflowDetails$data7 = _workflowDetails$data6.actionState) === null || _workflowDetails$data7 === void 0 ? void 0 : (_workflowDetails$data8 = _workflowDetails$data7.nextActions) === null || _workflowDetails$data8 === void 0 ? void 0 : _workflowDetails$data8.length) > 0 && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data9 = workflowDetails.data) !== null && _workflowDetails$data9 !== void 0 && (_workflowDetails$data10 = _workflowDetails$data9.actionState) !== null && _workflowDetails$data10 !== void 0 && (_workflowDetails$data11 = _workflowDetails$data10.nextActions) !== null && _workflowDetails$data11 !== void 0 && _workflowDetails$data11.find(e => e.action === "EDIT")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data12 = workflowDetails.data) !== null && _workflowDetails$data12 !== void 0 && (_workflowDetails$data13 = _workflowDetails$data12.actionState) !== null && _workflowDetails$data13 !== void 0 && (_workflowDetails$data14 = _workflowDetails$data13.nextActions) !== null && _workflowDetails$data14 !== void 0 && _workflowDetails$data14.find(e => e.action === "RESUBMIT_APPLICATION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data15 = workflowDetails.data) !== null && _workflowDetails$data15 !== void 0 && (_workflowDetails$data16 = _workflowDetails$data15.actionState) !== null && _workflowDetails$data16 !== void 0 && (_workflowDetails$data17 = _workflowDetails$data16.nextActions) !== null && _workflowDetails$data17 !== void 0 && _workflowDetails$data17.find(e => e.action === "ACTIVATE_CONNECTION")) && !(workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data18 = workflowDetails.data) !== null && _workflowDetails$data18 !== void 0 && (_workflowDetails$data19 = _workflowDetails$data18.actionState) !== null && _workflowDetails$data19 !== void 0 && (_workflowDetails$data20 = _workflowDetails$data19.nextActions) !== null && _workflowDetails$data20 !== void 0 && _workflowDetails$data20.find(e => e.action === "SUBMIT_APPLICATION"))) {
    var _workflowDetails$data21, _workflowDetails$data22;
    workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data21 = workflowDetails.data) === null || _workflowDetails$data21 === void 0 ? void 0 : (_workflowDetails$data22 = _workflowDetails$data21.nextActions) === null || _workflowDetails$data22 === void 0 ? void 0 : _workflowDetails$data22.forEach(data => {
      if (data.action == "EDIT") workflowDetails.data.actionState.nextActions.push(data);
    });
  }
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data23 = workflowDetails.data) === null || _workflowDetails$data23 === void 0 ? void 0 : (_workflowDetails$data24 = _workflowDetails$data23.actionState) === null || _workflowDetails$data24 === void 0 ? void 0 : (_workflowDetails$data25 = _workflowDetails$data24.nextActions) === null || _workflowDetails$data25 === void 0 ? void 0 : _workflowDetails$data25.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "EDIT") {
      var _applicationDetails$p8, _servicesMasterData$w2, _userConfig$3, _userConfig$4;
      let pathName = "/digit-ui/employee/ws/edit-application?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p8 = applicationDetails.propertyDetails) === null || _applicationDetails$p8 === void 0 ? void 0 : _applicationDetails$p8.propertyId);
      const userConfig = (servicesMasterData === null || servicesMasterData === void 0 ? void 0 : (_servicesMasterData$w2 = servicesMasterData["ws-services-masters"]) === null || _servicesMasterData$w2 === void 0 ? void 0 : _servicesMasterData$w2.WSEditApplicationByConfigUser) || [];
      const editApplicationUserRole = (userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$3 = userConfig[0]) === null || _userConfig$3 === void 0 ? void 0 : _userConfig$3.roles) || [];
      const mdmsApplicationStatus = userConfig === null || userConfig === void 0 ? void 0 : (_userConfig$4 = userConfig[0]) === null || _userConfig$4 === void 0 ? void 0 : _userConfig$4.status;
      let isFieldInspector = false;
      editApplicationUserRole.every((role, index) => {
        isFieldInspector = ifUserRoleExists(role);
        if (isFieldInspector) return false;else return true;
      });
      if (isFieldInspector && appStatus === mdmsApplicationStatus) {
        var _applicationDetails$p9;
        pathName = "/digit-ui/employee/ws/edit-application-by-config?applicationNumber=" + applicationNumber + "&service=" + serviceType + "&propertyId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p9 = applicationDetails.propertyDetails) === null || _applicationDetails$p9 === void 0 ? void 0 : _applicationDetails$p9.propertyId);
      }
      action.redirectionUrll = {
        action: "ACTIVATE_CONNECTION",
        pathname: pathName,
        state: {
          applicationDetails: applicationDetails,
          action: "VERIFY_AND_FORWARD"
        }
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data26 = workflowDetails.data) === null || _workflowDetails$data26 === void 0 ? void 0 : (_workflowDetails$data27 = _workflowDetails$data26.nextActions) === null || _workflowDetails$data27 === void 0 ? void 0 : _workflowDetails$data27.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "VERIFY_AND_FORWARD" && appStatus === "PENDING_FOR_FIELD_INSPECTION" && !checkWSAdditionalDetails()) {
      action.isToast = true;
      action.toastMessage = "MISSING_ADDITIONAL_DETAILS";
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data28 = workflowDetails.data) === null || _workflowDetails$data28 === void 0 ? void 0 : (_workflowDetails$data29 = _workflowDetails$data28.actionState) === null || _workflowDetails$data29 === void 0 ? void 0 : (_workflowDetails$data30 = _workflowDetails$data29.nextActions) === null || _workflowDetails$data30 === void 0 ? void 0 : _workflowDetails$data30.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "VERIFY_AND_FORWARD" && appStatus === "PENDING_FOR_FIELD_INSPECTION" && !checkWSAdditionalDetails()) {
      action.isToast = true;
      action.toastMessage = "MISSING_ADDITIONAL_DETAILS";
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data31 = workflowDetails.data) === null || _workflowDetails$data31 === void 0 ? void 0 : (_workflowDetails$data32 = _workflowDetails$data31.nextActions) === null || _workflowDetails$data32 === void 0 ? void 0 : _workflowDetails$data32.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      action.redirectionUrll = {
        pathname: getBusinessService(filters) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo),
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data33 = workflowDetails.data) === null || _workflowDetails$data33 === void 0 ? void 0 : (_workflowDetails$data34 = _workflowDetails$data33.actionState) === null || _workflowDetails$data34 === void 0 ? void 0 : (_workflowDetails$data35 = _workflowDetails$data34.nextActions) === null || _workflowDetails$data35 === void 0 ? void 0 : _workflowDetails$data35.forEach(action => {
    if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
      action.redirectionUrll = {
        pathname: getBusinessService(filters) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo) + "/" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "?tenantId=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId) + "&ISWSAPP&applicationNumber=" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationNo),
        state: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.tenantId
      };
    }
  });
  const handleDownloadPdf = function () {
    try {
      var _applicationDetails$a15;
      const tenantInfo = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a15 = applicationDetails.applicationData) === null || _applicationDetails$a15 === void 0 ? void 0 : _applicationDetails$a15.tenantId;
      let result = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData;
      let oldApplication = applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.oldApplication;
      const PDFdata = getWSAcknowledgementData$1({
        ...result
      }, {
        ...(applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.propertyDetails)
      }, tenantInfo, t, oldApplication);
      PDFdata.then(ress => Digit.Utils.pdf.generateModifyPdf(ress));
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const applicationDownloadObject = {
    order: 3,
    label: t("WS_APPLICATION"),
    onClick: handleDownloadPdf
  };
  switch (appStatus) {
    case "REJECTED":
      dowloadOptions = [applicationDownloadObject];
      break;
    default:
      dowloadOptions = [applicationDownloadObject];
      break;
  }
  const closeMenu = () => {
    setShowOptions(false);
  };
  Digit.Hooks.useClickOutside(menuRef, closeMenu, showOptions);
  dowloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-main-application-details"
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "0px",
      paddingTop: "10px",
      fontSize: "32px"
    }
  }, t("CS_TITLE_APPLICATION_DETAILS")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: () => setShowOptions(!showOptions),
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className",
    ref: menuRef
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails, {
    applicationDetails: applicationDetails,
    isLoading: isLoading || isServicesMasterLoading,
    isDataLoading: isLoading || isServicesMasterLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p10 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p10 === void 0 ? void 0 : (_applicationDetails$p11 = _applicationDetails$p10[0]) === null || _applicationDetails$p11 === void 0 ? void 0 : (_applicationDetails$p12 = _applicationDetails$p11.businessService) === null || _applicationDetails$p12 === void 0 ? void 0 : _applicationDetails$p12.toUpperCase(),
    moduleCode: "WS",
    showToast: showToast,
    setShowToast: setShowToast,
    closeToast: closeToast,
    timelineStatusPrefix: "WF_" + (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p13 = applicationDetails.processInstancesDetails) === null || _applicationDetails$p13 === void 0 ? void 0 : (_applicationDetails$p14 = _applicationDetails$p13[0]) === null || _applicationDetails$p14 === void 0 ? void 0 : (_applicationDetails$p15 = _applicationDetails$p14.businessService) === null || _applicationDetails$p15 === void 0 ? void 0 : _applicationDetails$p15.toUpperCase()) + "_",
    isInfoLabel: sessionStorage.getItem("isPrivacyEnabled") === "true" ? true : false
  })));
};

const EditDisconnectionByConfig = () => {
  var _Digit$SessionStorage, _editApplicationDetai, _state, _state$data, _state2, _state2$data, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const editApplicationDetails = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  const serviceType = (filters === null || filters === void 0 ? void 0 : filters.service) || (editApplicationDetails === null || editApplicationDetails === void 0 ? void 0 : (_editApplicationDetai = editApplicationDetails.applicationData) === null || _editApplicationDetai === void 0 ? void 0 : _editApplicationDetai.serviceType);
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(stateId, {});
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : _state$data.applicationDetails);
  const actionData = cloneDeep_1((_state2 = state) === null || _state2 === void 0 ? void 0 : (_state2$data = _state2.data) === null || _state2$data === void 0 ? void 0 : _state2$data.action);
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useDisConnectionDetails(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  React.useEffect(() => {
    if (!isLoading && !isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.isDisonnectionEdit);
      config.head = "WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isDisonnectionEdit) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [applicationDetails, isLoading, newConfig]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id && !IsDetailsExists) {
          return Promise.resolve(convertDisonnectApplicationData(details, serviceType, false, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails, sessionFormData]);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertDisonnectEditApplicationDetails(data, details, actionData)).then(function (convertAppData) {
            var _state3;
            setSubmitValve(false);
            sessionStorage.setItem("redirectedfromEDIT", true);
            sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS", JSON.stringify(convertAppData));
            window.location.assign("" + window.location.origin + ((_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.url));
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
  if (isLoading || !IsDetailsExists || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData,
    noBreakLine: true
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const EditDisconnectionByConfig$1 = () => {
  var _Digit$SessionStorage, _editApplicationDetai, _state, _state$data, _state2, _state2$data, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const editApplicationDetails = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  const serviceType = (filters === null || filters === void 0 ? void 0 : filters.service) || (editApplicationDetails === null || editApplicationDetails === void 0 ? void 0 : (_editApplicationDetai = editApplicationDetails.applicationData) === null || _editApplicationDetai === void 0 ? void 0 : _editApplicationDetai.serviceType);
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(stateId, {});
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : _state$data.applicationDetails);
  const actionData = cloneDeep_1((_state2 = state) === null || _state2 === void 0 ? void 0 : (_state2$data = _state2.data) === null || _state2$data === void 0 ? void 0 : _state2$data.action);
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useDisConnectionDetails(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  React.useEffect(() => {
    if (!isLoading && !isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.isDisonnectionEdit);
      config.head = "WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isDisonnectionEditByConfig) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [applicationDetails, isLoading, newConfig]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id && !IsDetailsExists) {
          return Promise.resolve(convertDisonnectApplicationData(details, serviceType, true, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails, sessionFormData]);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "Please fill mandatory details"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertDisonnectEditApplicationDetails(data, details, actionData)).then(function (convertAppData) {
            var _state3;
            setSubmitValve(false);
            sessionStorage.setItem("redirectedfromEDIT", true);
            sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS", JSON.stringify(convertAppData));
            window.location.assign("" + window.location.origin + ((_state3 = state) === null || _state3 === void 0 ? void 0 : _state3.url));
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
  if (isLoading || !IsDetailsExists || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData,
    noBreakLine: true
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const ResubmitDisconnection = () => {
  var _Digit$SessionStorage, _editApplicationDetai, _state, _state$data, _state2, _state2$data, _details, _details2, _details2$application;
  const {
    t
  } = reactI18next.useTranslation();
  let {
    state
  } = reactRouterDom.useLocation();
  state = state ? typeof state === "string" ? JSON.parse(state) : state : {};
  let filters = getQueryStringParams(location.search);
  const [canSubmit, setSubmitValve] = React.useState(false);
  const [showToast, setShowToast] = React.useState(null);
  const [appData, setAppData] = React.useState({});
  const [config, setConfig] = React.useState({
    head: "",
    body: []
  });
  const [isAppDetailsPage, setIsAppDetailsPage] = React.useState(false);
  let tenantId = Digit.ULBService.getCurrentTenantId();
  tenantId ? tenantId : (_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code;
  const stateId = Digit.ULBService.getStateId();
  let {
    data: newConfig,
    isLoading: isConfigLoading
  } = Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(stateId, {});
  const editApplicationDetails = JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));
  const serviceType = (filters === null || filters === void 0 ? void 0 : filters.service) || (editApplicationDetails === null || editApplicationDetails === void 0 ? void 0 : (_editApplicationDetai = editApplicationDetails.applicationData) === null || _editApplicationDetai === void 0 ? void 0 : _editApplicationDetai.serviceType);
  let details = cloneDeep_1((_state = state) === null || _state === void 0 ? void 0 : (_state$data = _state.data) === null || _state$data === void 0 ? void 0 : _state$data.applicationDetails);
  const actionData = cloneDeep_1((_state2 = state) === null || _state2 === void 0 ? void 0 : (_state2$data = _state2.data) === null || _state2$data === void 0 ? void 0 : _state2$data.action);
  let {
    isLoading,
    isError,
    data: applicationDetails,
    error
  } = Digit.Hooks.ws.useDisConnectionDetails(t, tenantId, (_details = details) === null || _details === void 0 ? void 0 : _details.applicationNo, (_details2 = details) === null || _details2 === void 0 ? void 0 : (_details2$application = _details2.applicationData) === null || _details2$application === void 0 ? void 0 : _details2$application.serviceType, {
    privacy: Digit.Utils.getPrivacyObject()
  });
  details = applicationDetails;
  const [sessionFormData, setSessionFormData, clearSessionFormData] = Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM", {});
  const {
    isLoading: updatingApplication,
    isError: updateApplicationError,
    data: updateResponse,
    error: updateError,
    mutate
  } = Digit.Hooks.ws.useWSApplicationActions(serviceType);
  React.useEffect(() => {
    if (!isLoading && !isConfigLoading) {
      var _config$body;
      const config = newConfig.find(conf => conf.isDisonnectionEdit);
      config.head = "WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";
      let bodyDetails = [];
      config === null || config === void 0 ? void 0 : (_config$body = config.body) === null || _config$body === void 0 ? void 0 : _config$body.forEach(data => {
        if (data !== null && data !== void 0 && data.isDisonnectionEdit) bodyDetails.push(data);
      });
      config.body = bodyDetails;
      setConfig(config);
    }
  }, [applicationDetails, isLoading, newConfig]);
  React.useEffect(function () {
    try {
      const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
      const _temp = function (_details3, _details3$application) {
        if ((_details3 = details) !== null && _details3 !== void 0 && (_details3$application = _details3.applicationData) !== null && _details3$application !== void 0 && _details3$application.id && !IsDetailsExists) {
          return Promise.resolve(convertDisonnectApplicationData(details, serviceType, false, t)).then(function (convertAppData) {
            setSessionFormData({
              ...sessionFormData,
              ...convertAppData
            });
            setAppData({
              ...convertAppData
            });
            sessionStorage.setItem("IsDetailsExists", JSON.stringify(true));
          });
        }
      }();
      return Promise.resolve(_temp && _temp.then ? _temp.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [details, applicationDetails, sessionFormData]);
  React.useEffect(() => {
    const timer = setTimeout(() => {
      const dataDetails = sessionStorage.getItem("disconnectionURL");
      const details = dataDetails ? JSON.parse(dataDetails) : {};
      if (isAppDetailsPage) window.location.assign("" + window.location.origin + (details === null || details === void 0 ? void 0 : details.url));
    }, 5000);
    return () => clearTimeout(timer);
  }, [isAppDetailsPage]);
  const onFormValueChange = (setValue, formData, formState) => {
    var _formData$cpt, _formData$cpt$details;
    if (!lodash.isEqual(sessionFormData, formData)) {
      setSessionFormData({
        ...sessionFormData,
        ...formData
      });
    }
    if (Object.keys(formState.errors).length > 0 && Object.keys(formState.errors).length == 1 && formState.errors["owners"] && Object.values(formState.errors["owners"].type).filter(ob => ob.type === "required").length == 0 && !(formData !== null && formData !== void 0 && (_formData$cpt = formData.cpt) !== null && _formData$cpt !== void 0 && (_formData$cpt$details = _formData$cpt.details) !== null && _formData$cpt$details !== void 0 && _formData$cpt$details.propertyId)) setSubmitValve(true);else setSubmitValve(!Object.keys(formState.errors).length);
  };
  const onSubmit = function (data) {
    try {
      const _temp2 = function () {
        if (!canSubmit) {
          setShowToast({
            warning: true,
            message: "PLEASE_FILL_MANDATORY_DETAILS"
          });
          setTimeout(() => {
            setShowToast(false);
          }, 3000);
        } else {
          const details = sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS") ? JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")) : {};
          return Promise.resolve(convertDisonnectEditApplicationDetails(data, details, actionData)).then(function (convertAppData) {
            setSubmitValve(false);
            sessionStorage.setItem("redirectedfromEDIT", true);
            sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS", JSON.stringify(convertAppData));
            convertAppData.processInstance.action = "RESUBMIT_APPLICATION";
            let reqDetails = convertAppData.serviceType == "WATER" ? {
              WaterConnection: convertAppData
            } : {
              SewerageConnection: convertAppData
            };
            reqDetails.disconnectRequest = true;
            if (mutate) {
              mutate(reqDetails, {
                onError: (error, variables) => {
                  setShowToast({
                    key: "error",
                    message: error !== null && error !== void 0 && error.message ? error.message : error
                  });
                  setSubmitValve(true);
                },
                onSuccess: (data, variables) => {
                  setShowToast({
                    key: false,
                    message: "WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"
                  });
                  setIsAppDetailsPage(true);
                }
              });
            }
          });
        }
      }();
      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  const closeToast = () => {
    setShowToast(null);
  };
  const IsDetailsExists = sessionStorage.getItem("IsDetailsExists") ? JSON.parse(sessionStorage.getItem("IsDetailsExists")) : false;
  if (isLoading || !IsDetailsExists || isConfigLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginLeft: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t(config.head))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.body,
    userType: "employee",
    onFormValueChange: onFormValueChange,
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    defaultValues: sessionFormData,
    appData: appData,
    noBreakLine: true
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    onClose: closeToast
  }));
};

const WSModule = _ref => {
  var _Digit$SessionStorage;
  let {
    stateCode,
    userType,
    tenants
  } = _ref;
  const tenantId = ((_Digit$SessionStorage = Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY")) === null || _Digit$SessionStorage === void 0 ? void 0 : _Digit$SessionStorage.code) || Digit.ULBService.getCurrentTenantId();
  const moduleCode = ["ws", "pt", "common", tenantId, "bill-amend", "abg"];
  const {
    path,
    url
  } = reactRouterDom.useRouteMatch();
  const language = Digit.StoreData.getCurrentLanguage();
  const {
    isLoading,
    data: store
  } = Digit.Services.useStore({
    stateCode,
    moduleCode,
    language
  });
  Digit.SessionStorage.set("WS_TENANTS", tenants);
  Digit.SessionStorage.set("PT_TENANTS", tenants);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  if (userType === "citizen") {
    return /*#__PURE__*/React__default.createElement(App, {
      path: path,
      stateCode: stateCode
    });
  }
  return /*#__PURE__*/React__default.createElement(App$1, {
    path: path,
    stateCode: stateCode
  });
};
const WSLinks = _ref2 => {
  let {
    matchPath,
    userType
  } = _ref2;
  const {
    t
  } = reactI18next.useTranslation();
  const links = [{
    link: matchPath + "/my-bills",
    i18nKey: t("ACTION_TEST_WNS_MY_BILLS")
  }, {
    link: matchPath + "/my-payments",
    i18nKey: t("ACTION_TEST_MY_PAYMENTS")
  }, {
    link: matchPath + "/create-application",
    i18nKey: t("ACTION_TEST_APPLY_NEW_CONNECTION")
  }, {
    link: matchPath + "/search",
    i18nKey: t("ACTION_TEXT_WS_SEARCH_AND_PAY")
  }, {
    link: matchPath + "/my-applications",
    i18nKey: t("ACTION_TEXT_WS_MY_APPLICATION")
  }, {
    link: matchPath + "/my-connections",
    i18nKey: t("ACTION_TEXT_WS_MY_CONNECTION")
  }];
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenHomeCard, {
    header: t("ACTION_TEST_WATER_AND_SEWERAGE"),
    links: links,
    Icon: () => /*#__PURE__*/React__default.createElement(digitUiReactComponents.WSICon, null)
  });
};
const componentsToRegister = {
  WSModule,
  WSLinks,
  WSServiceName,
  WSWaterConnectionDetails,
  WSDocsRequired,
  WSDocumentDetails,
  WSSewerageConnectionDetails,
  WSPlumberPreference,
  WSConnectionHolder,
  WSInfoLabel,
  WSActivationDetails,
  WSConnectionDetails,
  WSDocumentsRequired,
  WSPlumberDetails,
  WSRoadCuttingDetails,
  WSPropertyDetails,
  WSConnectionHolderDetails,
  WSActivationConnectionDetails,
  WSActivationPlumberDetails,
  WSActivationPageDetails,
  WSActivationCommentsDetails,
  WSActivationSupportingDocuments,
  WSDocumentsEmployee,
  WSEditConnectionDetails,
  WSDisconnectionDocsRequired,
  WSDisconnectionForm,
  WSDisconnectionDocumentsForm,
  WSDisconnectAcknowledgement,
  WSDisconnectionAppDetails,
  WSInbox,
  BillAmendmentCard,
  WSSearchApplication: SearchApplication,
  WSSearchWaterConnection: SearchWaterConnection,
  WSCard,
  SWCard,
  WSBillIAmendMentInbox: Inbox,
  WSCreate: WSCreate,
  WSDisconnection: WSDisconnection,
  WSSearchConnectionComponent: SearchConnection$1,
  WSSearchResultsComponent: CitizenSearchResults,
  WSCitizenApplicationDetails: WSApplicationDetails,
  WSAdditionalDetails: WSAdditionalDetails,
  WSMyConnections: MyConnections,
  WSCitizenConnectionDetails: ConnectionDetails$5,
  WSCitizenConsumptionDetails: consumptionDetails,
  WSMyPayments: WSMyPayments,
  WSCitizenEditApplication: EditApplication,
  WSReSubmitDisconnectionApplication: ReSubmitDisconnectionApplication,
  WNSMyBillsComponent: BillSearchResults,
  WSCheckPage: CheckPage,
  WSAcknowledgement,
  WSDisconnectionCheckPage: CheckPage$1,
  WSReSubmitDisconnectionCheckPage: CheckPage$2,
  WSApplicationBillAmendment: ApplicationBillAmendment,
  WSRequiredDocuments: RequiredDocuments,
  WSNewApplication: NewApplication,
  WSApplicationDetails: ApplicationDetails$1,
  WSGetConnectionDetails: GetConnectionDetails,
  WSActivateConnection: ActivateConnection,
  WSApplicationDetailsBillAmendment: ApplicationDetailsBillAmendment,
  WSSearch: Search,
  WSSearchWater: SearchWater,
  WSEditApplication: EditApplication$1,
  WSConsumptionDetails: ConsumptionDetails,
  WSModifyApplication: ModifyApplication,
  WSEditModifyApplication: EditModifyApplication,
  WSDisconnectionApplication: DisconnectionApplication,
  WSEditApplicationByConfig: WSEditApplicationByConfig,
  WSGetDisconnectionDetails: GetDisconnectionDetails,
  WSModifyApplicationDetails: ModifyApplicationDetails,
  WSEditDisconnectionApplication: EditDisconnectionByConfig,
  WSEditDisconnectionByConfig: EditDisconnectionByConfig$1,
  WSResubmitDisconnection: ResubmitDisconnection
};
const initWSComponents = () => {
  Object.entries(componentsToRegister).forEach(_ref3 => {
    let [key, value] = _ref3;
    Digit.ComponentRegistryService.setComponent(key, value);
  });
};

exports.initWSComponents = initWSComponents;
//# sourceMappingURL=index.js.map
