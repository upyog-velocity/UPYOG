var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,l=require("react-router-dom"),o=require("@egovernments/digit-ui-react-components"),a=require("react-i18next"),i=require("react-hook-form");function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,l,o={},a=Object.keys(e);for(l=0;l<a.length;l++)t.indexOf(n=a[l])>=0||(o[n]=e[n]);return o}var s=["isLoading","isError","error","data"],c=function(e){if(e){var t=new Date(e),n=t.getMonth()+1,l=t.getDate();return t.getFullYear()+"-"+(n=(n>9?"":"0")+n)+"-"+(l>9?"":"0")+l}return null},d=function(e){if(e){var t=new Date(e),n=t.getMonth()+1,l=t.getDate();return(l=(l>9?"":"0")+l)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()}return null},m=function(e){var t,n,l;void 0===e&&(e=[]);var o=Digit.UserService.getUser(),a={};return null==o||null===(t=o.info)||void 0===t||t.roles.map(function(e){a[null==e?void 0:e.code]=a[null==e?void 0:e.code]?[].concat(a[null==e?void 0:e.code],[null==e?void 0:e.tenantId]):[null==e?void 0:e.tenantId]}),Digit.ULBService.getCurrentTenantId(),a[null===(n=Digit.Utils)||void 0===n||null===(l=n.hrmsRoles)||void 0===l?void 0:l[0]].includes(Digit.ULBService.getStateId())?e:e.filter(function(e){var t,n,l;return null===(t=a[null===(n=Digit.Utils)||void 0===n||null===(l=n.hrmsRoles)||void 0===l?void 0:l[0]])||void 0===t?void 0:t.includes(null==e?void 0:e.code)})},E=["searchParams","onFilterChange","onSearch","removeParam"],v=["isLoading","isError","errors","data"],p=function(e){var l,i,s,c,d,p=e.searchParams,f=e.onFilterChange,y=u(e,E),g=t.useState((null==p||null===(l=p.filters)||void 0===l?void 0:l.role)||{role:[]}),_=g[0],S=g[1],h=t.useState(function(){return p}),b=h[0],A=h[1],R=t.useState(null),D=R[0],C=R[1],L=a.useTranslation().t,N=Digit.SessionStorage.get("HRMS_TENANTS");t.useEffect(function(){C(_.role.length>1?{name:_.role.length+" selected"}:_.role[0])},[_.role]);var O=t.useState(function(){return N.filter(function(e){var t;return e.code==(null===(t=null!=(null==p?void 0:p.tenantId)?{code:null==p?void 0:p.tenantId}:{code:Digit.ULBService.getCurrentTenantId()})||void 0===t?void 0:t.code)})[0]}),T=O[0],M=O[1],I=Digit.Hooks.hrms.useHrmsMDMS(T?T.code:null==p?void 0:p.tenantId,"egov-hrms","HRMSRolesandDesignation"),P=I.data,H=(u(I,v),t.useState(function(){return{departments:null}})),k=H[0],x=H[1],F=t.useState(function(){return{roles:null}}),w=F[0],B=F[1],U=t.useState(function(){return{isActive:!0}}),V=U[0],Y=U[1];t.useEffect(function(){T.code&&A(r({},b,{tenantId:T.code}))},[T]),t.useEffect(function(){if(_.role&&_.role.length>0){var e=[];if(_.role.forEach(function(t){e.push(t.code)}),A(r({},b,{roles:[].concat(e).join(",")})),_.role&&_.role.length>1){var t=[];_.role.forEach(function(e){t.push(e.code)}),A(r({},b,{roles:[].concat(t).join(",")}))}}},[_.role]),t.useEffect(function(){k&&A(r({},b,{departments:k.code}))},[k]),t.useEffect(function(){w&&A(r({},b,{roles:w.code}))},[w]),t.useEffect(function(){V&&A(r({},b,{isActive:V.code}))},[V]);var j,G,z,J,K,W,q=function(){var e;f({delete:Object.keys(p)}),M(N.filter(function(e){return e.code==Digit.ULBService.getCurrentTenantId()})[0]),x(null),B(null),Y(null),null==y||null===(e=y.onClose)||void 0===e||e.call(y),S({role:[]})};return n.createElement(n.Fragment,null,n.createElement("div",{className:"filter"},n.createElement("div",{className:"filter-card"},n.createElement("div",{className:"heading"},n.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},n.createElement("span",null,n.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),n.createElement("span",null,L("HR_COMMON_FILTER"),":")," "),n.createElement("div",{className:"clearAll",onClick:q},L("HR_COMMON_CLEAR_ALL")),"desktop"===y.type&&n.createElement("span",{className:"clear-search",onClick:q,style:{border:"1px solid #e0e0e0",padding:"6px"}},n.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===y.type&&n.createElement("span",{onClick:y.onClose},n.createElement(o.CloseSvg,null))),n.createElement("div",null,n.createElement("div",null,n.createElement("div",{className:"filter-label"},L("HR_ULB_LABEL")),n.createElement(o.Dropdown,{option:[].concat(null===(i=m(N))||void 0===i?void 0:i.sort(function(e,t){var n;return null==e||null===(n=e.name)||void 0===n?void 0:n.localeCompare(null==t?void 0:t.name)}).map(function(e){return r({},e,{i18text:Digit.Utils.locale.getCityLocale(e.code)})})),selected:T,select:M,optionKey:"i18text",t:L})),n.createElement("div",null,n.createElement("div",{className:"filter-label"},L("HR_COMMON_TABLE_COL_DEPT")),n.createElement(o.Dropdown,{option:Digit.Utils.locale.convertToLocaleData(null==P||null===(s=P.MdmsRes)||void 0===s||null===(c=s["common-masters"])||void 0===c?void 0:c.Department,"COMMON_MASTERS_DEPARTMENT"),selected:k,select:x,optionKey:"i18text",t:L})),n.createElement("div",null,n.createElement("div",null,(j=L("HR_COMMON_TABLE_COL_ROLE"),G=Digit.Utils.locale.convertToLocaleData(null==P||null===(d=P.MdmsRes["ACCESSCONTROL-ROLES"])||void 0===d?void 0:d.roles,"ACCESSCONTROL_ROLES_ROLES",L),z=(z=D)||((J={}).i18text=" ",J.code="",J),n.createElement("div",null,n.createElement("div",{className:"filter-label"},j),n.createElement(o.Dropdown,{option:G,selected:z,select:function(e){return function(e,t){var n,l;l=e,(null==(n=_.role)?void 0:n.filter(function(e){return e.code===l.code}).length)||S(r({},_,{role:[].concat(_.role,[e])}))}(e)},optionKey:"i18text"}),n.createElement("div",{className:"tag-container"},(null==_||null===(K=_.role)||void 0===K?void 0:K.length)>0&&(null==_||null===(W=_.role)||void 0===W?void 0:W.map(function(e,t){return n.createElement(o.RemoveableTag,{key:t,text:e.i18text.slice(0,22)+" ...",onClick:function(){return function(e,t){var n,l=_.role.filter(function(t,n){return n!==e});S(r({},_,((n={}).role=l,n)))}(t)}})}))))))),n.createElement("div",null,n.createElement("div",{className:"filter-label"},L("HR_EMP_STATUS_LABEL")),n.createElement(o.RadioButtons,{onSelect:Y,selected:V,selectedOption:V,optionsKey:"name",options:[{code:!0,name:L("HR_ACTIVATE_HEAD")},{code:!1,name:L("HR_DEACTIVATE_HEAD")}]}),"mobile"!==y.type&&n.createElement("div",null,n.createElement(o.SubmitBar,{onSubmit:function(){return f(b)},label:L("HR_COMMON_APPLY")})))))),"mobile"===y.type&&n.createElement(o.ActionBar,null,n.createElement(o.ApplyFilterBar,{submit:!1,labelLink:L("ES_COMMON_CLEAR_ALL"),buttonLink:L("ES_COMMON_FILTER"),onClear:q,onSubmit:function(){var e;f(b),null==y||null===(e=y.onClose)||void 0===e||e.call(y)},style:{flex:1}})))};"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var f,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g="object"==typeof self&&self&&self.Object===Object&&self,_="object"==typeof y&&y&&y.Object===Object&&y||g||Function("return this")(),S=_.Symbol,h=Object.prototype,b=h.hasOwnProperty,A=h.toString,R=S?S.toStringTag:void 0,D=Object.prototype.toString,C=S?S.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":C&&C in Object(e)?function(e){var t=b.call(e,R),n=e[R];try{e[R]=void 0;var l=!0}catch(e){}var o=A.call(e);return l&&(t?e[R]=n:delete e[R]),o}(e):function(e){return D.call(e)}(e)},N=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},O=_["__core-js_shared__"],T=(f=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",M=Function.prototype.toString,I=/^\[object .+?Constructor\]$/,P=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!N(e)||(t=e,T&&T in t))&&(function(e){if(!N(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?P:I).test(function(e){if(null!=e){try{return M.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}(n)?n:void 0},k=function(){try{var e=H(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),x=function(e,t){return e===t||e!=e&&t!=t},F=Object.prototype.hasOwnProperty,w=function(e,t,n){var l=e[t];F.call(e,t)&&x(l,n)&&(void 0!==n||t in e)||function(e,t,n){"__proto__"==t&&k?k(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)},B=Array.isArray,U=function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==L(e)},V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,j=H(Object,"create"),G=Object.prototype.hasOwnProperty,z=Object.prototype.hasOwnProperty;function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}J.prototype.clear=function(){this.__data__=j?j(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(j){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return G.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return j?void 0!==t[e]:z.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=j&&void 0===t?"__lodash_hash_undefined__":t,this};var K=J,W=function(e,t){for(var n=e.length;n--;)if(x(e[n][0],t))return n;return-1},q=Array.prototype.splice;function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}$.prototype.clear=function(){this.__data__=[],this.size=0},$.prototype.delete=function(e){var t=this.__data__,n=W(t,e);return!(n<0||(n==t.length-1?t.pop():q.call(t,n,1),--this.size,0))},$.prototype.get=function(e){var t=this.__data__,n=W(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return W(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,l=W(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this};var X=$,Z=H(_,"Map"),Q=function(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}ee.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(Z||X),string:new K}},ee.prototype.delete=function(e){var t=Q(this,e).delete(e);return this.size-=t?1:0,t},ee.prototype.get=function(e){return Q(this,e).get(e)},ee.prototype.has=function(e){return Q(this,e).has(e)},ee.prototype.set=function(e,t){var n=Q(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this};var te=ee;function ne(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var l=arguments,o=t?t.apply(this,l):l[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,l);return n.cache=a.set(o,i)||a,i};return n.cache=new(ne.Cache||te),n}ne.Cache=te;var le,oe,ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/\\(\\)?/g,re=(le=ne(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ae,function(e,n,l,o){t.push(l?o.replace(ie,"$1"):n||e)}),t},function(e){return 500===oe.size&&oe.clear(),e}),oe=le.cache,le),ue=S?S.prototype:void 0,se=ue?ue.toString:void 0,ce=/^(?:0|[1-9]\d*)$/,de=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ce.test(e))&&e>-1&&e%1==0&&e<t},me=function(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Ee=function(e,t,n){return null==e?e:function(e,t,n,l){if(!N(e))return e;for(var o=-1,a=(t=function(e,t){return B(e)?e:function(e,t){if(B(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!U(e))||Y.test(e)||!V.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:re(function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(B(t))return function(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}(t,e)+"";if(U(t))return se?se.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}(e))}(t,e)).length,i=a-1,r=e;null!=r&&++o<a;){var u=me(t[o]),s=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=i){var c=r[u];void 0===(s=void 0)&&(s=N(c)?c:de(t[o+1])?[]:{})}w(r,u,s),r=r[u]}return e}(e,t,n)},ve=["isLoading","isError","errors","data"],pe=function(e){var a,i,r=e.t,s=e.action,d=e.tenantId,m=e.closeModal,E=e.applicationData,v=l.useHistory(),p=t.useState({}),f=p[0],y=p[1],g=t.useState(null),_=g[0],S=g[1],h=t.useState(null),b=h[0],A=h[1],R=t.useState(null)[1],D=t.useState([]),C=D[0],L=D[1],N=t.useState(""),O=N[0],T=N[1],M=Digit.Hooks.hrms.useHrmsMDMS(d,"egov-hrms","DeactivationReason"),I=M.data;u(M,ve),t.useEffect(function(){switch(s){case"DEACTIVATE_EMPLOYEE_HEAD":return y(function(e){var t=e.t,l=e.selectFile,a=e.uploadedFile,i=e.setUploadedFile,r=e.selectedReason,u=e.Reasons,s=e.selectReason;return{label:{heading:"HR_DEACTIVATE_EMPLOYEE_HEAD",submit:"HR_DEACTIVATE_EMPLOYEE_HEAD"},form:[{body:[{label:t("HR_DEACTIVATION_REASON"),type:"dropdown",isMandatory:!0,name:"reasonForDeactivation",populators:n.createElement(o.Dropdown,{isMandatory:!0,selected:r,optionKey:"i18key",option:u,select:s,t:t})},{label:t("HR_ORDER_NO"),type:"text",populators:{name:"orderNo"}},{label:t("HR_EFFECTIVE_DATE"),type:"date",isMandatory:!0,disable:!0,populators:{error:t("HR_EFFECTIVE_DATE_INVALID"),name:"effectiveFrom",min:c((new Date).toJSON().slice(0,10).replace(/-/g,"/")),max:c((new Date).toJSON().slice(0,10).replace(/-/g,"/")),defaultValue:c((new Date).toJSON().slice(0,10).replace(/-/g,"/"))}},{label:t("HR_APPROVAL_UPLOAD_HEAD"),populators:n.createElement("div",{style:{marginBottom:"2rem"}},n.createElement("span",null,t("TL_APPROVAL_UPLOAD_SUBHEAD")),n.createElement(o.UploadFile,{id:"hrms-deactivation-doc",onUpload:l,onDelete:function(){i(null)},message:a?"1 "+t("HR_ACTION_FILEUPLOADED"):t("HR_ACTION_NO_FILEUPLOADED")}))},{label:t("HR_REMARKS"),type:"text",populators:{name:"remarks"}}]}]}}({t:r,action:s,selectFile:F,uploadedFile:b,setUploadedFile:A,selectedReason:O,Reasons:C,selectReason:H}));case"ACTIVATE_EMPLOYEE_HEAD":return y(function(e){var t,l,a=e.t,i=e.selectFile,r=e.uploadedFile,u=e.setUploadedFile,s=e.selectedReason,d=e.Reasons,m=e.selectReason,E=e.employees,v=void 0===E?{}:E;return v.deactivationDetails=null==v||null===(t=v.deactivationDetails)||void 0===t?void 0:t.sort(function(e,t){var n,l;return(null==t||null===(n=t.auditDetails)||void 0===n?void 0:n.createdDate)-(null==e||null===(l=e.auditDetails)||void 0===l?void 0:l.createdDate)}),{label:{heading:"HR_ACTIVATE_EMPLOYEE_HEAD",submit:"HR_ACTIVATE_EMPLOYEE_HEAD"},form:[{body:[{label:a("HR_ACTIVATION_REASON"),type:"dropdown",isMandatory:!0,name:"reasonForDeactivation",populators:n.createElement(o.Dropdown,{isMandatory:!0,selected:s,optionKey:"i18key",option:d,select:m,t:a})},{label:a("HR_ORDER_NO"),type:"text",populators:{name:"orderNo"}},{label:a("HR_EFFECTIVE_DATE"),type:"date",isMandatory:!0,disable:!0,populators:{error:a("HR_EFFECTIVE_DATE_INVALID"),name:"effectiveFrom",min:c(null==v||null===(l=v.deactivationDetails)||void 0===l?void 0:l[0].effectiveFrom),max:c((new Date).toJSON().slice(0,10).replace(/-/g,"/")),defaultValue:c((new Date).toJSON().slice(0,10).replace(/-/g,"/"))}},{label:a("HR_APPROVAL_UPLOAD_HEAD"),populators:n.createElement("div",{style:{marginBottom:"2rem"}},n.createElement("span",null,a("TL_APPROVAL_UPLOAD_SUBHEAD")),n.createElement(o.UploadFile,{id:"hrms-activation-doc",accept:"image/*, .pdf, .png, .jpeg",onUpload:i,onDelete:function(){u(null)},message:r?"1 "+a("HR_ACTION_FILEUPLOADED"):a("HR_ACTION_NO_FILEUPLOADED")}))},{label:a("HR_REMARKS"),type:"text",populators:{name:"remarks"}}]}]}}({t:r,action:s,selectFile:F,uploadedFile:b,setUploadedFile:A,selectedReason:O,Reasons:C,selectReason:H,employees:(null==E?void 0:E.Employees[0])||{}}))}},[s,b,C]);var P=function(e){return n.createElement("h1",{className:"heading-m"},e.label)};function H(e){T(e)}var k=function(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},x=function(e){return n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(k,null))};function F(e){S(e.target.files[0])}return t.useEffect(function(){var e;L(null==I||null===(e=I["egov-hrms"])||void 0===e?void 0:e.DeactivationReason.map(function(e){return e.i18key="EGOV_HRMS_DEACTIVATIONREASON_"+e.code,e}))},[I]),t.useEffect(function(){!function(){try{R(null);var e=function(){if(_){var e=function(){if(_.size>=5242880)R(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=function(e,t){try{var n=(A(null),Promise.resolve(Digit.UploadServices.Filestorage("HRMS",_,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?A(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):R(r("CS_FILE_UPLOAD_ERROR"))}))}catch(e){return t()}return n&&n.then?n.then(void 0,t):n}(0,function(){R(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[_]),s&&null!=f&&f.form?n.createElement(o.Modal,{headerBarMain:n.createElement(P,{label:r(null==f||null===(a=f.label)||void 0===a?void 0:a.heading)}),headerBarEnd:n.createElement(x,{onClick:m}),actionCancelOnSubmit:m,actionSaveLabel:r(null==f||null===(i=f.label)||void 0===i?void 0:i.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isDisabled:!O},n.createElement(o.FormComposer,{config:null==f?void 0:f.form,noBoxShadow:!0,inline:!0,disabled:!0,childrenAtTheBottom:!0,onSubmit:function(e){e.effectiveFrom=new Date(e.effectiveFrom).getTime(),e.reasonForDeactivation=O.code;var t,n,l=[].concat(E.Employees);"ACTIVATE_EMPLOYEE_HEAD"!==s?(_&&E.Employees[0].documents.push({referenceType:"DEACTIVATION",documentId:b,documentName:_.name}),Ee(l[0],"deactivationDetails[0].effectiveFrom",null===(t=new Date)||void 0===t?void 0:t.getTime()),Ee(l[0],"deactivationDetails[0].orderNo",null==e?void 0:e.orderNo),Ee(l[0],"deactivationDetails[0].reasonForDeactivation",null==e?void 0:e.reasonForDeactivation),Ee(l[0],"deactivationDetails[0].remarks",null==e?void 0:e.remarks),l[0].isActive=!1,v.replace("/digit-ui/employee/hrms/response",{Employees:l,key:"UPDATE",action:"DEACTIVATION"})):(_&&E.Employees[0].documents.push({referenceType:"ACTIVATION",documentId:b,documentName:_.name}),Ee(l[0],"reactivationDetails[0].effectiveFrom",null===(n=new Date)||void 0===n?void 0:n.getTime()),Ee(l[0],"reactivationDetails[0].orderNo",null==e?void 0:e.orderNo),Ee(l[0],"reactivationDetails[0].reasonForDeactivation",null==e?void 0:e.reasonForDeactivation),Ee(l[0],"reactivationDetails[0].remarks",null==e?void 0:e.remarks),l[0].isActive=!0,v.replace("/digit-ui/employee/hrms/response",{Employees:l,key:"UPDATE",action:"ACTIVATION"}))},formId:"modal-action"})):n.createElement(o.Loader,null)},fe=function(e){return n.createElement(pe,e)},ye=function e(t){if(t)return Object.keys(t).reduce(function(n,l){return void 0===t[l]||(n[l]="object"==typeof t[l]?e(t[l]):t[l]),n},{})};function ge(e){var t,l=e.t,a=e.assignment,i=e.assignments,u=e.setassignments,s=e.index,d=e.focusIndex,m=e.setFocusIndex,E=e.getdepartmentdata,v=e.department,p=e.formData,f=e.handleRemoveUnit,y=e.designation,g=e.getdesignationdata,_=e.setCurrentAssiginmentDate,S=e.currentassignemtDate;return n.createElement("div",{key:s+1,style:{marginBottom:"16px"}},n.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},n.createElement(o.LabelFieldPair,null,n.createElement("div",{className:"label-field-pair",style:{width:"100%"}},n.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},l("HR_ASSIGNMENT")," ",s+1)),!(i.length>1)||null!=a&&a.id||null!=a&&a.isCurrentAssignment?null:n.createElement("div",{onClick:function(){return f(a)},style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"}},"X")),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:null!=a&&a.id?"card-label-smaller disabled":"card-label-smaller"}," ",l("HR_ASMT_FROM_DATE_LABEL")+" * "," "),n.createElement("div",{className:"field"},n.createElement(o.DatePicker,{type:"date",name:"fromDate",max:S||c(new Date),min:null==p||null===(t=p.SelectDateofEmployment)||void 0===t?void 0:t.dateOfAppointment,disabled:!(null==a||!a.id),onChange:function(e){u(function(t){return t.map(function(t){return t.key===a.key?r({},t,{fromDate:e}):t})}),m(s)},date:null==a?void 0:a.fromDate,autoFocus:d===s}))),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:null!=a&&a.isCurrentAssignment?"card-label-smaller disabled":"card-label-smaller"},l("HR_ASMT_TO_DATE_LABEL"),null!=a&&a.isCurrentAssignment?"":" * "," "),n.createElement("div",{className:"field"},n.createElement(o.DatePicker,{type:"date",name:"toDate",min:null==a?void 0:a.fromDate,max:S||c(new Date),disabled:null==a?void 0:a.isCurrentAssignment,onChange:function(e){u(function(t){return t.map(function(t){return t.key===a.key?r({},t,{toDate:e}):t})}),m(s)},date:null==a?void 0:a.toDate,autoFocus:d===s}))),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller",style:{color:"white"}},"."),n.createElement("div",{className:"field"},n.createElement(o.CheckBox,{onChange:function(e){return t=e.target.checked,u(function(e){return e.map(function(e){return r({},e,e.key===a.key?{isCurrentAssignment:t}:{isCurrentAssignment:!1})})}),void(t?(u(function(e){return e.map(function(e){return e.key===a.key?r({},e,{toDate:null}):e})}),i.map(function(e){e.key==a.key&&_(e.fromDate)})):_(null));var t},checked:null==a?void 0:a.isCurrentAssignment,label:l("HR_CURRENTLY_ASSIGNED_HERE_SWITCH_LABEL")}))),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:null!=a&&a.id?"card-label-smaller disabled":"card-label-smaller"}," ",l("HR_DEPT_LABEL")+" * "),n.createElement(o.Dropdown,{className:"form-field",selected:null==a?void 0:a.department,disable:!(null==a||!a.id),optionKey:"i18key",option:E(v)||[],select:function(e){u(function(t){return t.map(function(t){return t.key===a.key?r({},t,{department:e}):t})})},t:l})),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:null!=a&&a.id?"card-label-smaller disabled":"card-label-smaller"},l("HR_DESG_LABEL")+" * "),n.createElement(o.Dropdown,{className:"form-field",selected:null==a?void 0:a.designation,disable:!(null==a||!a.id),option:g(y)||[],select:function(e){u(function(t){return t.map(function(t){return t.key===a.key?r({},t,{designation:e}):t})})},optionKey:"i18key",t:l}))))}function _e(e){var l=e.t,a=e.data,i=e.jurisdiction,u=e.jurisdictions,s=e.setjurisdictions,c=e.gethierarchylistdata,d=e.handleRemoveUnit,m=e.hierarchylist,E=e.getroledata,v=e.roleoption,p=e.index,f=t.useState([]),y=f[0],g=f[1],_=t.useState([]),S=_[0],h=_[1];t.useEffect(function(){var e;g(null==a||null===(e=a.MdmsRes)||void 0===e?void 0:e["egov-location"].TenantBoundary.filter(function(e){var t,n;return(null==e||null===(t=e.hierarchyType)||void 0===t?void 0:t.code)==(null==i||null===(n=i.hierarchy)||void 0===n?void 0:n.code)}).map(function(e){return r({},e.boundary,{i18text:Digit.Utils.locale.convertToLocale(e.boundary.label,"EGOV_LOCATION_BOUNDARYTYPE")})}))},[null==i?void 0:i.hierarchy,null==a?void 0:a.MdmsRes]),Digit.ULBService.getCurrentTenantId(),t.useEffect(function(){var e,t;h(null==a||null===(e=a.MdmsRes)||void 0===e||null===(t=e.tenant)||void 0===t?void 0:t.tenants.filter(function(e){return e.code!=Digit.ULBService.getStateId()}).map(function(e){return r({},e,{i18text:Digit.Utils.locale.getCityLocale(e.code)})}))},[null==i?void 0:i.boundaryType,null==a?void 0:a.MdmsRes]),t.useEffect(function(){(null==S?void 0:S.length)>0&&b(null==S?void 0:S.filter(function(e){var t;return e.code==(null==i||null===(t=i.boundary)||void 0===t?void 0:t.code)})[0])},[S]);var b=function(e){s(function(t){return t.map(function(t){return t.key===i.key?r({},t,{boundary:e}):t})})};return n.createElement("div",{key:null==i?void 0:i.keys,style:{marginBottom:"16px"}},n.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},n.createElement(o.LabelFieldPair,null,n.createElement("div",{className:"label-field-pair",style:{width:"100%"}},n.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},l("HR_JURISDICTION")," ",p+1)),u.length>1?n.createElement("div",{onClick:function(){return d(i)},style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"}},"X"):null),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{isMandatory:!0,className:"card-label-smaller"},l("HR_HIERARCHY_LABEL")+" * "),n.createElement(o.Dropdown,{className:"form-field",selected:null==i?void 0:i.hierarchy,disable:!1,isMandatory:!0,option:c(m)||[],select:function(e){s(function(t){return t.map(function(t){return t.key===i.key?r({},t,{hierarchy:e}):t})})},optionKey:"code",t:l})),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},l("HR_BOUNDARY_TYPE_LABEL")+" * "),n.createElement(o.Dropdown,{className:"form-field",isMandatory:!0,selected:null==i?void 0:i.boundaryType,disable:0===(null==y?void 0:y.length),option:y,select:function(e){s(function(t){return t.map(function(t){return t.key===i.key?r({},t,{boundaryType:e}):t})})},optionKey:"i18text",t:l})),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},l("HR_BOUNDARY_LABEL")+" * "),n.createElement(o.Dropdown,{className:"form-field",isMandatory:!0,selected:null==i?void 0:i.boundary,disable:0===(null==S?void 0:S.length),option:S,select:b,optionKey:"i18text",t:l})),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},l("HR_COMMON_TABLE_COL_ROLE")," *"),n.createElement("div",{className:"form-field"},n.createElement(o.MultiSelectDropdown,{className:"form-field",isMandatory:!0,defaultUnit:"Selected",selected:null==i?void 0:i.roles,options:E(v),onSelect:function(e,t){var n=[];e&&(null==e||e.map(function(e){n.push(null==e?void 0:e[1])})),null==n||n.forEach(function(e){e.labelKey="ACCESSCONTROL_ROLES_ROLES_"+e.code}),s(function(e){return e.map(function(e){return e.key===i.key?r({},e,{roles:n}):e})})},optionsKey:"labelKey",t:l}),n.createElement("div",{className:"tag-container"},(null==i?void 0:i.roles.length)>0&&(null==i?void 0:i.roles.map(function(e,t){return n.createElement(o.RemoveableTag,{key:t,text:l(e.labelKey).slice(0,22)+" ...",onClick:function(){return function(e,t){var n=null==i?void 0:i.roles.filter(function(t,n){return n!==e});s(function(e){return e.map(function(e){return e.key===i.key?r({},e,{roles:n}):e})})}(t)}})})))))))}var Se=function(e){var t,i,u,s,c,d,m,E,v,p,f=e.path,y=a.useTranslation().t,g=(l.useLocation(),innerWidth<=640),_={searchParams:{tenantId:Digit.ULBService.getCurrentTenantId()}},S=null===(t=Digit)||void 0===t||null===(i=t.ComponentRegistryService)||void 0===i?void 0:i.getComponent("HRMSResponse"),h=null===(u=Digit)||void 0===u||null===(s=u.ComponentRegistryService)||void 0===s?void 0:s.getComponent("HRMSDetails"),b=null===(c=Digit)||void 0===c||null===(d=c.ComponentRegistryService)||void 0===d?void 0:d.getComponent("HRInbox"),A=null===(m=Digit)||void 0===m||null===(E=m.ComponentRegistryService)||void 0===E?void 0:E.getComponent("HRCreateEmployee"),R=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("HREditEmpolyee");return n.createElement(l.Switch,null,n.createElement(n.Fragment,null,n.createElement("div",{className:"ground-container"},n.createElement("p",{className:"breadcrumb",style:{marginLeft:g?"1vw":"15px"}},n.createElement(l.Link,{to:"/digit-ui/employee",style:{cursor:"pointer",color:"#666"}},y("HR_COMMON_BUTTON_HOME"))," ","/ ",n.createElement("span",null,y("HR_COMMON_HEADER"))),n.createElement(o.PrivateRoute,{path:f+"/inbox",component:function(){return n.createElement(b,{parentRoute:f,businessService:"hrms",filterComponent:"HRMS_INBOX_FILTER",initialStates:_,isInbox:!0})}}),n.createElement(o.PrivateRoute,{path:f+"/create",component:function(){return n.createElement(A,null)}}),n.createElement(o.PrivateRoute,{path:f+"/response",component:function(e){return n.createElement(S,r({},e,{parentRoute:f}))}}),n.createElement(o.PrivateRoute,{path:f+"/details/:tenantId/:id",component:function(){return n.createElement(h,null)}}),n.createElement(o.PrivateRoute,{path:f+"/edit/:tenantId/:id",component:function(){return n.createElement(R,null)}}))))},he=[{head:"Personal Details",body:[{type:"component",component:"SelectEmployeeName",key:"SelectEmployeeName",withoutLabel:!0},{type:"component",component:"SelectEmployeePhoneNumber",key:"SelectEmployeePhoneNumber",withoutLabel:!0},{type:"component",component:"SelectEmployeeGender",key:"SelectEmployeeGender",withoutLabel:!0},{type:"component",component:"SelectDateofBirthEmployment",key:"SelectDateofBirthEmployment",withoutLabel:!0},{type:"component",component:"SelectEmployeeEmailId",key:"SelectEmployeeEmailId",withoutLabel:!0},{type:"component",component:"SelectEmployeeCorrespondenceAddress",key:"SelectEmployeeCorrespondenceAddress",withoutLabel:!0}]},{head:"HR_NEW_EMPLOYEE_FORM_HEADER",body:[{type:"component",component:"SelectEmployeeType",key:"SelectEmployeeType",withoutLabel:!0},{type:"component",component:"SelectDateofEmployment",key:"SelectDateofEmployment",withoutLabel:!0},{type:"component",component:"SelectEmployeeId",key:"SelectEmployeeId",withoutLabel:!0},{type:"component",component:"Banner",key:"Banner1",withoutLabel:!0,texts:{headerCaption:"Info",header:"HR_EMP_ID_MESSAGE"}}]},{head:"HR_JURISDICTION_DETAILS_HEADER",body:[{type:"component",isMandatory:!0,component:"Jurisdictions",key:"Jurisdictions",withoutLabel:!0}]},{head:"HR_ASSIGN_DET_HEADER",body:[{type:"component",component:"HRBanner",key:"Banner2",withoutLabel:!0,texts:{nosideText:!0,headerCaption:"Info",header:"HR_ASSIGN_DET_SUB_HEADER"}},{type:"component",component:"Assignments",key:"Assignments",withoutLabel:!0}]}],be=function(e){var i,u,s,d,m,E,v,p=e.tenantId,f=e.data,y=a.useTranslation().t,g=l.useHistory(),_=t.useState(!1),S=_[0],h=_[1],b=t.useState(null),A=b[0],R=b[1],D=t.useState(null),C=D[0],L=D[1],N=t.useState(!1),O=N[0],T=N[1],M=t.useState(!1),I=M[0],P=M[1],H=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"egov-hrms",["CommonFieldsConfig"],{select:function(e){var t,n;return{config:null==e||null===(t=e.MdmsRes)||void 0===t||null===(n=t["egov-hrms"])||void 0===n?void 0:n.CommonFieldsConfig}},retry:!1,enable:!1}),k=H.data,x=H.isLoading,F=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_ERROR_DATA",!1)[2],w=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_HAPPENED",!1)[1],B=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_SUCCESS_DATA",!1)[2];t.useEffect(function(){w(!1),B(),F()},[]),t.useEffect(function(){C&&10==C.length&&C.match(Digit.Utils.getPattern("MobileNo"))?(R(null),f.user.mobileNumber==C?T(!0):Digit.HRMSService.search(p,null,{phone:C}).then(function(e,t){e.Employees.length>0?(R({key:!0,label:"ERR_HRMS_USER_EXIST_MOB"}),T(!1)):T(!0)})):T(!1)},[C]);var U={tenantId:p,employeeStatus:"EMPLOYED",employeeType:null==f?void 0:f.code,SelectEmployeePhoneNumber:{mobileNumber:null==f||null===(i=f.user)||void 0===i?void 0:i.mobileNumber},SelectEmployeeId:{code:null==f?void 0:f.code},SelectEmployeeName:{employeeName:null==f||null===(u=f.user)||void 0===u?void 0:u.name},SelectEmployeeEmailId:{emailId:null==f||null===(s=f.user)||void 0===s?void 0:s.emailId},SelectEmployeeCorrespondenceAddress:{correspondenceAddress:null==f||null===(d=f.user)||void 0===d?void 0:d.correspondenceAddress},SelectDateofEmployment:{dateOfAppointment:c(null==f?void 0:f.dateOfAppointment)},SelectEmployeeType:{code:null==f?void 0:f.employeeType,active:!0},SelectEmployeeGender:{gender:{code:null==f||null===(m=f.user)||void 0===m?void 0:m.gender,name:"COMMON_GENDER_"+(null==f||null===(E=f.user)||void 0===E?void 0:E.gender)}},SelectDateofBirthEmployment:{dob:c(null==f||null===(v=f.user)||void 0===v?void 0:v.dob)},Jurisdictions:null==f?void 0:f.jurisdictions.map(function(e,t){var n;return Object.assign({},e,{key:t,hierarchy:{code:e.hierarchy,name:e.hierarchy},boundaryType:{label:e.boundaryType,i18text:"EGOV_LOCATION_BOUNDARYTYPE_"+e.boundaryType.toUpperCase()},boundary:{code:e.boundary},roles:null==f||null===(n=f.user)||void 0===n?void 0:n.roles.filter(function(t){return t.tenantId==e.boundary})})}),Assignments:null==f?void 0:f.assignments.map(function(e,t){return Object.assign({},e,{key:t,fromDate:c(e.fromDate),toDate:c(e.toDate),isCurrentAssignment:e.isCurrentAssignment,designation:{code:e.designation,i18key:"COMMON_MASTERS_DESIGNATION_"+e.designation},department:{code:e.department,i18key:"COMMON_MASTERS_DEPARTMENT_"+e.department}})})};if(x)return n.createElement(o.Loader,null);var V=null!=k&&k.config?k.config:he;return n.createElement("div",null,n.createElement(o.FormComposer,{heading:y("HR_COMMON_EDIT_EMPLOYEE_HEADER"),isDisabled:!S,label:y("HR_COMMON_BUTTON_SUBMIT"),config:V.map(function(e){return r({},e,{body:e.body.filter(function(e){return!e.hideInEmployee})})}),fieldStyle:{marginRight:0},onSubmit:function(e){var t,n,l,o,a,i,r,u,s,c,d,m,E,v;if(0!=e.Jurisdictions.filter(function(e){return e.tenantId==p&&!1!==e.isActive}).length)if(Object.values(e.Jurisdictions.reduce(function(e,t){return t&&null!=t&&t.tenantId&&(e[t.tenantId]=e[t.tenantId]?e[t.tenantId]+1:1),e},{})).every(function(e){return 1==e})){var y=null==e||null===(t=e.Jurisdictions)||void 0===t?void 0:t.map(function(e){var t;return null===(t=e.roles)||void 0===t?void 0:t.map(function(t){return t.tenantId=e.boundary,t})}),_=Object.assign({},f);y=[].concat.apply([],y),_.assignments=null==e?void 0:e.Assignments,_.dateOfAppointment=Date.parse(null==e||null===(n=e.SelectDateofEmployment)||void 0===n?void 0:n.dateOfAppointment),_.code=null!=e&&null!==(l=e.SelectEmployeeId)&&void 0!==l&&l.code?null==e||null===(o=e.SelectEmployeeId)||void 0===o?void 0:o.code:void 0,_.jurisdictions=null==e?void 0:e.Jurisdictions,_.user.emailId=null!=e&&null!==(a=e.SelectEmployeeEmailId)&&void 0!==a&&a.emailId?null==e||null===(i=e.SelectEmployeeEmailId)||void 0===i?void 0:i.emailId:void 0,_.user.gender=null==e||null===(r=e.SelectEmployeeGender)||void 0===r?void 0:r.gender.code,_.user.dob=Date.parse(null==e||null===(u=e.SelectDateofBirthEmployment)||void 0===u?void 0:u.dob),_.user.mobileNumber=null==e||null===(s=e.SelectEmployeePhoneNumber)||void 0===s?void 0:s.mobileNumber,_.user.name=null==e||null===(c=e.SelectEmployeeName)||void 0===c?void 0:c.employeeName,_.user.correspondenceAddress=null==e||null===(d=e.SelectEmployeeCorrespondenceAddress)||void 0===d?void 0:d.correspondenceAddress,_.user.roles=y.filter(function(e){return e&&e.name});var S=[_];S=null!==(m=Digit)&&void 0!==m&&null!==(E=m.Customizations)&&void 0!==E&&null!==(v=E.HRMS)&&void 0!==v&&v.customiseUpdateFormData?Digit.Customizations.HRMS.customiseUpdateFormData(f,S):S,g.replace("/digit-ui/employee/hrms/response",{Employees:S,key:"UPDATE",action:"UPDATE"})}else R({key:!0,label:"ERR_INVALID_JURISDICTION"});else R({key:!0,label:"ERR_BASE_TENANT_MANDATORY"})},defaultValues:U,onFormValueChange:function(e,t){var n,l,o,a,i,r,u,s;null!=t&&null!==(n=t.SelectEmployeePhoneNumber)&&void 0!==n&&n.mobileNumber?L(null==t||null===(u=t.SelectEmployeePhoneNumber)||void 0===u?void 0:u.mobileNumber):L(null==t||null===(s=t.SelectEmployeePhoneNumber)||void 0===s?void 0:s.mobileNumber);for(var c=0;c<(null==t||null===(d=t.Jurisdictions)||void 0===d?void 0:d.length);c++){var d,m,E=null==t?void 0:t.Jurisdictions[c];if(!(null!=E&&E.boundary&&null!=E&&E.boundaryType&&null!=E&&E.hierarchy&&null!=E&&E.tenantId&&(null==E||null===(m=E.roles)||void 0===m?void 0:m.length)>0)){P(!1);break}P(!0)}for(var v=!1,p=0;p<(null==t||null===(f=t.Assignments)||void 0===f?void 0:f.length);p++){var f,y,g,_=null==t?void 0:t.Assignments[p];if(!(_.department&&_.designation&&_.fromDate&&(null!=t&&t.Assignments[p].toDate||null!=t&&null!==(y=t.Assignments[p])&&void 0!==y&&y.isCurrentAssignment))){v=!1;break}if(null==(null==t?void 0:t.Assignments[p].toDate)&&0==(null==t||null===(g=t.Assignments[p])||void 0===g?void 0:g.isCurrentAssignment)){v=!1;break}v=!0}null!=t&&null!==(l=t.SelectDateofEmployment)&&void 0!==l&&l.dateOfAppointment&&null!=t&&null!==(o=t.SelectEmployeeCorrespondenceAddress)&&void 0!==o&&o.correspondenceAddress&&null!=t&&null!==(a=t.SelectEmployeeGender)&&void 0!==a&&a.gender.code&&null!=t&&null!==(i=t.SelectEmployeeName)&&void 0!==i&&i.employeeName&&null!=t&&null!==(r=t.SelectEmployeePhoneNumber)&&void 0!==r&&r.mobileNumber&&I&&v&&O&&function(e){var t,n,l,o=(null==e||null===(t=e.SelectEmployeeEmailId)||void 0===t?void 0:t.emailId)||"",a=(null==e||null===(n=e.SelectEmployeeName)||void 0===n?void 0:n.employeeName)||"",i=(null==e||null===(l=e.SelectEmployeeCorrespondenceAddress)||void 0===l?void 0:l.correspondenceAddress)||"";return(0==o.length||o.match(Digit.Utils.getPattern("Email")))&&a.match(Digit.Utils.getPattern("Name"))&&i.match(Digit.Utils.getPattern("Address"))}(t)?h(!0):h(!1)}})," ",A&&n.createElement(o.Toast,{error:A.key,label:y(A.label),onClose:function(){R(null)}}))},Ae=["isLoading","isError","error","data"],Re=["isLoading","isError","error","data"],De=function(e){return n.createElement(o.Table,{t:e.t,data:e.data,columns:e.columns,getCellProps:e.getCellProps,onNextPage:e.onNextPage,onPrevPage:e.onPrevPage,currentPage:e.currentPage,totalRecords:e.totalRecords,onPageSizeChange:e.onPageSizeChange,pageSizeLimit:e.pageSizeLimit})},Ce=function(e){var i=e.businessService,r=e.allLinks,u=e.headerText,s=a.useTranslation().t,c=t.useState([]),d=c[0],m=c[1],E=Digit.UserService.getUser().info.roles;return t.useEffect(function(){var e=r.filter(function(e){return e.businessService===i}).filter(function(e){var t=e.roles;return t.some(function(e){return E.map(function(e){return e.code}).includes(e)})||!t.length});m(e)},[]),n.createElement(o.Card,{className:"employeeCard filter inboxLinks"},n.createElement("div",{className:"complaint-links-container"},n.createElement("div",{className:"header"},n.createElement("span",{className:"logo"},n.createElement(o.PersonIcon,null))," ",n.createElement("span",{className:"text"},s(u))),n.createElement("div",{className:"body"},d.map(function(e,t){var o=e.link,a=e.text,i=e.hyperlink;return n.createElement("span",{className:"link",key:t},void 0!==i&&i?n.createElement("a",{href:o},s(a)):n.createElement(l.Link,{to:o},s(a)))}))))},Le=function(e){var t,l=e.onSearch,u=e.type,s=e.onClose,c=e.searchFields,d=e.searchParams,m=e.isInboxPage,E=a.useTranslation().t,v=i.useForm({defaultValues:d}),p=v.register,f=v.reset,y=v.watch,g=v.control,_=innerWidth<=640;function S(){var e=c.reduce(function(e,t){var n;return r({},e,((n={})[null==t?void 0:t.name]="",n))},{});f(e);var t=r({},d);t.delete=[],c.forEach(function(e){t.delete.push(null==e?void 0:e.name)}),l(r({},t))}var h=function(e){return n.createElement(o.LinkLabel,{style:r({display:"inline"},e?{margin:0}:{}),onClick:S},E("HR_COMMON_CLEAR_SEARCH"))};return n.createElement("form",{onSubmit:(0,v.handleSubmit)(function(e){e.mobileNumber||delete e.mobileNumber,e.delete=[],c.forEach(function(t){e[t.name]||e.delete.push(t.name)}),l(e),"mobile"===u&&s()})},n.createElement(n.Fragment,null,n.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:m?"24px":"revert"}},n.createElement("div",{className:"search-complaint-container"},("mobile"===u||_)&&n.createElement("div",{className:"complaint-header",style:{display:"flex",justifyContent:"space-between"}},n.createElement("h2",null,E("ES_COMMON_SEARCH_BY")),n.createElement("span",{onClick:s},n.createElement(o.CloseSvg,null))),n.createElement("div",{className:"complaint-input-container",style:{width:"100%"}},null==c||null===(t=c.filter(function(e){return!0}))||void 0===t?void 0:t.map(function(e,t){return n.createElement("div",{key:e.name,className:"input-fields"},n.createElement("span",{className:"mobile-input"},n.createElement(o.Label,null,e.label),"date"!==e.type?n.createElement("div",{className:"field-container"},null!=e&&e.componentInFront?n.createElement("span",{className:"citizen-card-input citizen-card-input--front",style:{flex:"none"}},null==e?void 0:e.componentInFront):null,n.createElement(o.TextInput,r({},e,{inputRef:p,watch:y,shouldUpdate:!0}))):n.createElement(i.Controller,{render:function(e){return n.createElement(o.DatePicker,{date:e.value,onChange:e.onChange})},name:e.name,control:g,defaultValue:null})," "))})),n.createElement("div",{className:"inbox-action-container"},"desktop"===u&&!_&&n.createElement("span",{style:{paddingTop:"9px"},className:"clear-search"},h()),"desktop"===u&&!_&&n.createElement(o.SubmitBar,{style:{marginTop:"unset"},className:"submit-bar-search",label:E("ES_COMMON_SEARCH"),submit:!0})))),("mobile"===u||_)&&n.createElement(o.ActionBar,{className:"clear-search-container"},n.createElement("button",{className:"clear-search",style:{flex:1}},h(_)),n.createElement(o.SubmitBar,{label:E("HR_COMMON_SEARCH"),style:{flex:1},submit:!0}))))},Ne=["tableConfig","filterComponent"],Oe=function(e){var i,r,s=e.filterComponent,c=u(e,Ne),d=a.useTranslation().t,m=Digit.SessionStorage.get("HRMS_TENANTS"),E=function(e){return n.createElement("span",{className:"cell-text"},d(e))},v=null==c||null===(i=c.data)||void 0===i?void 0:i.Employees,p=t.useState(function(){var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(s)})[0],f=n.useMemo(function(){return[{Header:d("HR_EMP_ID_LABEL"),disableSortBy:!0,Cell:function(e){var t=e.row;return n.createElement("span",{className:"link"},n.createElement(l.Link,{to:"/digit-ui/employee/hrms/details/"+t.original.tenantId+"/"+t.original.code},t.original.code))}},{Header:d("HR_EMP_NAME_LABEL"),disableSortBy:!0,Cell:function(e){var t,n;return E(""+(null===(t=e.row.original)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name))}},{Header:d("HR_ROLE_NO_LABEL"),Cell:function(e){var t,l,o,a,i=e.row;return n.createElement("div",{className:"tooltip"}," ",E(""+(null===(t=i.original)||void 0===t||null===(l=t.user)||void 0===l?void 0:l.roles.length)),n.createElement("span",{className:"tooltiptext",style:{whiteSpace:"nowrap"}},null===(o=i.original)||void 0===o||null===(a=o.user)||void 0===a?void 0:a.roles.map(function(e,t){return n.createElement("span",null,t+1+". "+d("ACCESSCONTROL_ROLES_ROLES_"+e.code)," ",n.createElement("br",null)," ")})))},disableSortBy:!0},{Header:d("HR_DESG_LABEL"),disableSortBy:!0,Cell:function(e){var t,n,l;return E(""+(d("COMMON_MASTERS_DESIGNATION_"+(null===(t=e.row.original)||void 0===t||null===(n=t.assignments)||void 0===n||null===(l=n.sort(function(e,t){return new Date(e.fromDate)-new Date(t.fromDate)})[0])||void 0===l?void 0:l.designation))||""))}},{Header:d("HR_DEPT_LABEL"),disableSortBy:!0,Cell:function(e){var t,n,l;return E(""+(d("COMMON_MASTERS_DEPARTMENT_"+(null===(t=e.row.original)||void 0===t||null===(n=t.assignments)||void 0===n||null===(l=n.sort(function(e,t){return new Date(e.fromDate)-new Date(t.fromDate)})[0])||void 0===l?void 0:l.department))||""))}},{Header:d("HR_STATUS_LABEL"),disableSortBy:!0,Cell:function(e){var t,l;return l=null!==(t=e.row.original)&&void 0!==t&&t.isActive?"ACTIVE":"INACTIVE",n.createElement("span","INACTIVE"==l?{className:"sla-cell-error"}:{className:"sla-cell-success"},d(l)||"")}}]},[]);if(c.isLoading)r=n.createElement(o.Loader,null);else if(0===(null==v?void 0:v.length))r=n.createElement(o.Card,{style:{marginTop:20}},d("COMMON_TABLE_NO_RECORD_FOUND").split("\\n").map(function(e,t){return n.createElement("p",{key:t,style:{textAlign:"center"}},e)}));else if((null==v?void 0:v.length)>0){var y;r=n.createElement(De,((y={t:d,data:v,columns:f,getCellProps:function(e){return{style:{maxWidth:e.column.Header==d("HR_EMP_ID_LABEL")?"150px":"",padding:"20px 18px",fontSize:"16px",minWidth:"150px"}}},onPageSizeChange:c.onPageSizeChange,currentPage:c.currentPage,onNextPage:c.onNextPage,onPrevPage:c.onPrevPage,pageSizeLimit:c.pageSizeLimit,onSort:c.onSort,disableSort:c.disableSort}).onPageSizeChange=c.onPageSizeChange,y.sortParams=c.sortParams,y.totalRecords=c.totalRecords,y))}return n.createElement("div",{className:"inbox-container"},!c.isSearch&&n.createElement("div",{className:"filters-container"},n.createElement(Ce,{parentRoute:c.parentRoute,allLinks:[{text:"HR_COMMON_CREATE_EMPLOYEE_HEADER",link:"/digit-ui/employee/hrms/create",businessService:"hrms",roles:["HRMS_ADMIN"]}],headerText:"HRMS",businessService:c.businessService}),n.createElement("div",null,n.createElement(p,{defaultSearchParams:c.defaultSearchParams,onFilterChange:c.onFilterChange,searchParams:c.searchParams,type:"desktop",tenantIds:m}))),n.createElement("div",{style:{flex:1}},n.createElement(Le,{defaultSearchParams:c.defaultSearchParams,onSearch:c.onSearch,type:"desktop",tenantIds:m,searchFields:c.searchFields,isInboxPage:!(null!=c&&c.isSearch),searchParams:c.searchParams}),n.createElement("div",{className:"result",style:{marginLeft:null!=c&&c.isSearch?"":"24px",flex:1}},r)))},Te=function(e){var l=e.t,a=e.data,i=e.onFilterChange,u=e.onSearch,s=e.serviceRequestIdKey,c=e.isFstpOperator,d=e.isLoading,m=e.isSearch,E=e.searchParams,v=e.searchFields,f=e.sortParams,y=e.linkPrefix,g=e.removeParam,_=t.useState(m?"SEARCH":""),S=_[0],h=_[1],b=t.useState(!!m),A=b[0],R=b[1],D=t.useState(E),C=D[0],L=D[1],N=t.useState(f)[1];t.useEffect(function(){S&&R(!0)},[S]);var O,T=Digit.UserService.hasAccess(["FSM_DSO"])||!1,M=function(){R(!1),h(""),L(E),N(f)};return d?n.createElement(o.Loader,null):(a&&0!==(null==a?void 0:a.length)?a&&(null==a?void 0:a.length)>0&&(O=n.createElement(o.DetailsCard,{data:a,serviceRequestIdKey:s,linkPrefix:y||(T?"/digit-ui/employee/fsm/application-details/":"/digit-ui/employee/fsm/")})):O=n.createElement(o.Card,{style:{marginTop:20}},l("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map(function(e,t){return n.createElement("p",{key:t,style:{textAlign:"center"}},e)})),n.createElement(n.Fragment,null,n.createElement("div",{className:"searchBox"},u&&n.createElement(o.SearchAction,{text:"SEARCH",handleActionClick:function(){h("SEARCH"),R(!0)}}),!m&&i&&n.createElement(o.FilterAction,{text:"FILTER",handleActionClick:function(){h("FILTER"),R(!0)}})),O,A&&n.createElement(o.PopUp,null,"FILTER"===S&&n.createElement("div",{className:"popup-module"},n.createElement(p,{onFilterChange:i,onClose:M,onSearch:function(e){i(r({},C,e)),h(""),R(!1),u()},type:"mobile",searchParams:C,removeParam:g})),"SEARCH"===S&&n.createElement("div",{className:"popup-module"},n.createElement(Le,{type:"mobile",onClose:M,onSearch:u,isFstpOperator:c,searchParams:E,searchFields:v})))))},Me=function(e){var t,l=e.data,o=e.isLoading,i=e.isSearch,r=e.searchFields,u=e.onFilterChange,s=e.onSearch,c=e.onSort,d=e.searchParams,m=e.sortParams,E=e.linkPrefix,v=e.filterComponent,p=a.useTranslation().t,f=function(e){return n.createElement("span",{className:"cell-text"},p(e))};return n.createElement("div",{style:{padding:0}},n.createElement("div",{className:"inbox-container"},n.createElement("div",{className:"filters-container"},n.createElement(Te,{t:p,data:null==l||null===(t=l.Employees)||void 0===t?void 0:t.map(function(e){var t,l,o,a,i,r,u,s;return(u={})[p("HR_EMP_ID_LABEL")]=null==e?void 0:e.code,u[p("HR_EMP_NAME_LABEL")]=f((null==e||null===(t=e.user)||void 0===t?void 0:t.name)||""),u[p("HR_ROLE_NO_LABEL")]=f((null==e||null===(l=e.user)||void 0===l?void 0:l.roles.length)||""),u[p("HR_DESG_LABEL")]=f(p("COMMON_MASTERS_DESIGNATION_"+(null==e||null===(o=e.assignments)||void 0===o||null===(a=o.sort(function(e,t){return new Date(e.fromDate)-new Date(t.fromDate)})[0])||void 0===a?void 0:a.designation))),u[p("HR_DEPT_LABEL")]=f(p("COMMON_MASTERS_DEPARTMENT_"+(null==e||null===(i=e.assignments)||void 0===i||null===(r=i.sort(function(e,t){return new Date(e.fromDate)-new Date(t.fromDate)})[0])||void 0===r?void 0:r.department))),u[p("HR_STATUS_LABEL")]=n.createElement("span","INACTIVE"==(s=null!=e&&e.isActive?"ACTIVE":"INACTIVE")?{className:"sla-cell-error"}:{className:"sla-cell-success"},p(s)||""),u}),onFilterChange:u,isLoading:o,isSearch:i,onSearch:s,onSort:c,searchParams:d,searchFields:r,linkPrefix:E,sortParams:m,filterComponent:v,serviceRequestIdKey:function(e){return(null==d?void 0:d.tenantId)+"/"+(null==e?void 0:e[p("HR_EMP_ID_LABEL")])}}))))},Ie=["isLoading","isError","error","data"],Pe=function(e,t,n,l){if(t)return l("HR_EMPLOYEE_ID_LABEL")},He=function(e){var t,l,a,i,r,u;return n.createElement(o.Banner,{message:(i=e.action,r=e.isSuccess,u=e.t,function(e,t,n,l,o){return o("EMPLOYEE_RESPONSE_"+(t||"CREATE")+"_ACTION"+(n?"":"_ERROR"))}(0,i,r,0,u)),applicationNumber:e.isSuccess?null==e||null===(t=e.data)||void 0===t||null===(l=t.Employees)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.code:"",info:Pe(0,e.isSuccess,0,e.t),successful:e.isSuccess})},ke=function(e){var t=e.stateCode,o=e.userType,a=e.tenants,i=Digit.StoreData.getCurrentLanguage();Digit.Services.useStore({stateCode:t,moduleCode:"HR",language:i}),Digit.SessionStorage.set("HRMS_TENANTS",a);var r=l.useRouteMatch(),u=r.path,s=r.url;return Digit.Utils.hrmsAccess()&&"employee"===o?n.createElement(Se,{path:u,url:s}):null},xe={HRMSCard:function(){var e,t;if(!Digit.Utils.hrmsAccess())return null;var l=a.useTranslation().t,i=Digit.ULBService.getCurrentTenantId(),r=Digit.Hooks.hrms.useHRMSCount(i),c=r.isLoading,d=r.data,m=(u(r,s),{Icon:n.createElement(o.PersonIcon,null),moduleName:l("ACTION_TEST_HRMS"),kpis:[{count:c?"-":null==d||null===(e=d.EmployeCount)||void 0===e?void 0:e.totalEmployee,label:l("TOTAL_EMPLOYEES"),link:"/digit-ui/employee/hrms/inbox"},{count:c?"-":null==d||null===(t=d.EmployeCount)||void 0===t?void 0:t.activeEmployee,label:l("ACTIVE_EMPLOYEES"),link:"/digit-ui/employee/hrms/inbox"}],links:[{label:l("HR_HOME_SEARCH_RESULTS_HEADING"),link:"/digit-ui/employee/hrms/inbox"},{label:l("HR_COMMON_CREATE_EMPLOYEE_HEADER"),link:"/digit-ui/employee/hrms/create"}]});return n.createElement(o.EmployeeModuleCard,m)},HRMSDetails:function(){var e,i,r,s,c,m,E,v,p,f,y,g,_,S,h,b,A,R,D,C,L,N,O,T,M,I,P,H,k,x,F,w,B,U,V,Y,j,G,z,J,K,W,q,$,X,Z,Q,ee,te,ne,le,oe,ae,ie,re,ue,se,ce,de,me=t.useState(null),Ee=me[0],ve=me[1],pe=t.useState(!1),ye=pe[0],ge=pe[1],_e=a.useTranslation().t,Se=l.useParams().id,he=l.useParams().tenantId,be=l.useHistory(),Ae=t.useState(!1),De=Ae[0],Ce=Ae[1],Le=Digit.SessionStorage.get("isupdate"),Ne=Digit.Hooks.hrms.useHRMSSearch({codes:Se},he,null,Le),Oe=Ne.isLoading,Te=Ne.data,Me=(u(Ne,Re),Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_ERROR_DATA",!1)[2]),Ie=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_HAPPENED",!1)[1],Pe=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_SUCCESS_DATA",!1)[2],He=window.Digit.Utils.browser.isMobile();return t.useEffect(function(){Ie(!1),Pe(),Me()},[]),t.useEffect(function(){switch(Ee){case"DEACTIVATE_EMPLOYEE_HEAD":case"ACTIVATE_EMPLOYEE_HEAD":return ge(!0);case"COMMON_EDIT_EMPLOYEE_HEADER":return be.push("/digit-ui/employee/hrms/edit/"+he+"/"+Se)}},[Ee]),Oe?n.createElement(o.Loader,null):n.createElement(n.Fragment,null,n.createElement("div",{style:He?{marginLeft:"-12px",fontFamily:"calibri",color:"#FF0000"}:{marginLeft:"15px",fontFamily:"calibri",color:"#FF0000"}},n.createElement(o.Header,null,_e("HR_NEW_EMPLOYEE_FORM_HEADER"))),!Oe&&(null==Te?void 0:Te.Employees.length)>0?n.createElement("div",null,n.createElement(o.Card,null,n.createElement(o.StatusTable,null,n.createElement(o.Row,{label:n.createElement(o.CardSubHeader,{className:"card-section-header"},_e("HR_EMP_STATUS_LABEL")," "),text:null!=Te&&null!==(e=Te.Employees)&&void 0!==e&&null!==(i=e[0])&&void 0!==i&&i.isActive?n.createElement("div",{className:"sla-cell-success"}," ",_e("ACTIVE")," "):n.createElement("div",{className:"sla-cell-error"},_e("INACTIVE")),textStyle:{fontWeight:"bold",maxWidth:"6.5rem"}})),n.createElement(o.CardSubHeader,{className:"card-section-header"},_e("HR_PERSONAL_DETAILS_FORM_HEADER")," "),n.createElement(o.StatusTable,null,n.createElement(o.Row,{label:_e("HR_NAME_LABEL"),text:(null==Te||null===(r=Te.Employees)||void 0===r||null===(s=r[0])||void 0===s||null===(c=s.user)||void 0===c?void 0:c.name)||"NA",textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_MOB_NO_LABEL"),text:(null==Te||null===(m=Te.Employees)||void 0===m||null===(E=m[0])||void 0===E||null===(v=E.user)||void 0===v?void 0:v.mobileNumber)||"NA",textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_GENDER_LABEL"),text:_e(null==Te||null===(p=Te.Employees)||void 0===p||null===(f=p[0])||void 0===f||null===(y=f.user)||void 0===y?void 0:y.gender)||"NA"}),n.createElement(o.Row,{label:_e("HR_EMAIL_LABEL"),text:(null==Te||null===(g=Te.Employees)||void 0===g||null===(_=g[0])||void 0===_||null===(S=_.user)||void 0===S?void 0:S.emailId)||"NA"}),n.createElement(o.Row,{label:_e("HR_CORRESPONDENCE_ADDRESS_LABEL"),text:(null==Te||null===(h=Te.Employees)||void 0===h||null===(b=h[0])||void 0===b||null===(A=b.user)||void 0===A?void 0:A.correspondenceAddress)||"NA"})),n.createElement(o.CardSubHeader,{className:"card-section-header"},_e("HR_NEW_EMPLOYEE_FORM_HEADER")),n.createElement(o.StatusTable,null,n.createElement(o.Row,{label:_e("HR_EMPLOYMENT_TYPE_LABEL"),text:_e(null!=Te&&null!==(R=Te.Employees)&&void 0!==R&&null!==(D=R[0])&&void 0!==D&&D.employeeType?"EGOV_HRMS_EMPLOYEETYPE_"+(null==Te||null===(C=Te.Employees)||void 0===C||null===(L=C[0])||void 0===L?void 0:L.employeeType):"NA"),textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_APPOINTMENT_DATE_LABEL"),text:d(null==Te||null===(N=Te.Employees)||void 0===N||null===(O=N[0])||void 0===O?void 0:O.dateOfAppointment)||"NA",textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_EMPLOYEE_ID_LABEL"),text:null==Te||null===(T=Te.Employees)||void 0===T||null===(M=T[0])||void 0===M?void 0:M.code})),0==(null==Te||null===(I=Te.Employees)||void 0===I||null===(P=I[0])||void 0===P?void 0:P.isActive)?n.createElement(o.StatusTable,null,n.createElement(o.Row,{label:_e("HR_EFFECTIVE_DATE"),text:d(null==Te||null===(H=Te.Employees)||void 0===H||null===(k=H[0])||void 0===k||null===(x=k.deactivationDetails)||void 0===x||null===(F=x.sort(function(e,t){return new Date(e.effectiveFrom)-new Date(t.effectiveFrom)})[0])||void 0===F?void 0:F.effectiveFrom)}),n.createElement(o.Row,{label:_e("HR_DEACTIVATION_REASON"),text:_e("EGOV_HRMS_DEACTIVATIONREASON_"+(null==Te||null===(w=Te.Employees)||void 0===w||null===(B=w[0])||void 0===B||null===(U=B.deactivationDetails)||void 0===U?void 0:U.sort(function(e,t){return new Date(e.effectiveFrom)-new Date(t.effectiveFrom)})[0].reasonForDeactivation))||"NA"}),n.createElement(o.Row,{label:_e("HR_REMARKS"),text:(null==Te||null===(V=Te.Employees)||void 0===V||null===(Y=V[0])||void 0===Y||null===(j=Y.deactivationDetails)||void 0===j?void 0:j.sort(function(e,t){return new Date(e.effectiveFrom)-new Date(t.effectiveFrom)})[0].remarks)||"NA"}),n.createElement(o.Row,{label:_e("HR_ORDER_NO"),text:(null==Te||null===(G=Te.Employees)||void 0===G||null===(z=G[0])||void 0===z||null===(J=z.deactivationDetails)||void 0===J||null===(K=J.sort(function(e,t){return new Date(e.effectiveFrom)-new Date(t.effectiveFrom)})[0])||void 0===K?void 0:K.orderNo)||"NA"})):null,null!=Te&&null!==(W=Te.Employees)&&void 0!==W&&null!==(q=W[0])&&void 0!==q&&q.documents?n.createElement(o.StatusTable,{style:{marginBottom:"40px"}},n.createElement(o.Row,{label:_e("TL_APPROVAL_UPLOAD_HEAD"),text:""}),n.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},null==Te||null===($=Te.Employees)||void 0===$||null===(X=$[0])||void 0===X||null===(Z=X.documents)||void 0===Z?void 0:Z.map(function(e,t){return n.createElement("a",{onClick:function(){return function(e){try{return Promise.resolve(Digit.UploadServices.Filefetch([null==e?void 0:e.documentId],Digit.ULBService.getStateId())).then(function(t){var n=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t="");var l=e[t]||"",o=(null==l?void 0:l.split(","))||[],a="";return o.length>0&&o.map(function(e){e.includes("large")||e.includes("medium")||e.includes("small")||(a=e)}),a}(t.data,null==e?void 0:e.documentId);window.open(n,"_blank")})}catch(e){return Promise.reject(e)}}(e)},style:{minWidth:"160px",marginRight:"20px"},key:t},n.createElement(o.DocumentSVG,{width:85,height:100,style:{background:"#f6f6f6",padding:"8px",marginLeft:"15px"}}),n.createElement("p",{style:{marginTop:"8px",maxWidth:"196px"}},e.documentName))}))):null,(null==Te||null===(Q=Te.Employees)||void 0===Q||null===(ee=Q[0])||void 0===ee?void 0:ee.jurisdictions.length)>0?n.createElement(o.CardSubHeader,{className:"card-section-header"},_e("HR_JURIS_DET_HEADER")):null,(null==Te||null===(te=Te.Employees)||void 0===te||null===(ne=te[0])||void 0===ne||null===(le=ne.jurisdictions)||void 0===le?void 0:le.length)>0?null==Te||null===(oe=Te.Employees)||void 0===oe||null===(ae=oe[0])||void 0===ae?void 0:ae.jurisdictions.map(function(e,t){var l,a;return n.createElement(o.StatusTable,{key:t,style:{maxWidth:"640px",border:"1px solid rgb(214, 213, 212)",inset:"0px",width:"auto",padding:".2rem",marginBottom:"2rem"}},n.createElement("div",{style:{paddingBottom:"2rem"}}," ",_e("HR_JURISDICTION")," ",t+1),n.createElement(o.Row,{label:_e("HR_HIERARCHY_LABEL"),text:_e(null!=e&&e.hierarchy?"EGOV_LOCATION_TENANTBOUNDARY_"+(null==e?void 0:e.hierarchy):"NA"),textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_BOUNDARY_TYPE_LABEL"),text:_e(Digit.Utils.locale.convertToLocale(null==e?void 0:e.boundaryType,"EGOV_LOCATION_BOUNDARYTYPE")),textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_BOUNDARY_LABEL"),text:_e(null==e?void 0:e.boundary)}),n.createElement(o.Row,{label:_e("HR_ROLE_LABEL"),text:null==Te||null===(l=Te.Employees)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.user.roles.filter(function(t){return t.tenantId==(null==e?void 0:e.boundary)}).map(function(e){return _e("ACCESSCONTROL_ROLES_ROLES_"+(null==e?void 0:e.code))})}))}):null,(null==Te||null===(ie=Te.Employees)||void 0===ie||null===(re=ie[0])||void 0===re?void 0:re.assignments.length)>0?n.createElement(o.CardSubHeader,{className:"card-section-header"},_e("HR_ASSIGN_DET_HEADER")):null,null==Te||null===(ue=Te.Employees)||void 0===ue||null===(se=ue[0])||void 0===se?void 0:se.assignments.map(function(e,t){return n.createElement(o.StatusTable,{key:t,style:{maxWidth:"640px",border:"1px solid rgb(214, 213, 212)",inset:"0px",width:"auto",padding:".2rem",marginBottom:"2rem"}},n.createElement("div",{style:{paddingBottom:"2rem"}},_e("HR_ASSIGNMENT")," ",t+1),n.createElement(o.Row,{label:_e("HR_ASMT_FROM_DATE_LABEL"),text:d(null==e?void 0:e.fromDate),textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_ASMT_TO_DATE_LABEL"),text:null!=e&&e.isCurrentAssignment?"Currently Working Here":d(null==e?void 0:e.toDate),textStyle:{whiteSpace:"pre"}}),n.createElement(o.Row,{label:_e("HR_DEPT_LABEL"),text:_e("COMMON_MASTERS_DEPARTMENT_"+(null==e?void 0:e.department))}),n.createElement(o.Row,{label:_e("HR_DESG_LABEL"),text:_e("COMMON_MASTERS_DESIGNATION_"+(null==e?void 0:e.designation))}))}))):null,ye?n.createElement(fe,{t:_e,action:Ee,tenantId:he,applicationData:Te,closeModal:function(){ve(null),ge(!1)},submitAction:function(e){}}):null,n.createElement(o.ActionBar,null,De&&Te?n.createElement(o.Menu,{localeKeyPrefix:"HR",options:null!=Te&&null!==(ce=Te.Employees)&&void 0!==ce&&null!==(de=ce[0])&&void 0!==de&&de.isActive?["DEACTIVATE_EMPLOYEE_HEAD","COMMON_EDIT_EMPLOYEE_HEADER"]:["ACTIVATE_EMPLOYEE_HEAD"],t:_e,onSelect:function(e){ve(e),Ce(!1)}}):null,n.createElement(o.SubmitBar,{label:_e("HR_COMMON_TAKE_ACTION"),onSubmit:function(){return Ce(!De)}})))},SelectEmployeeEmailId:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=e.errors,d=(l.useLocation(),[{label:"HR_EMAIL_LABEL",type:"email",name:"emailId",validation:{title:t("CORE_COMMON_APPLICANT_NAME_INVALID")}}]);return n.createElement("div",null,null==d?void 0:d.map(function(e,l){var u=s&&s[a.key]&&s[a.key][e.name]||"";return n.createElement(n.Fragment,{key:l},c[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.TextInput,r({type:e.type,key:e.name,value:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t.target.value,e.name)},disable:!1,defaultValue:void 0},e.validation)),u&&u.length>0&&!u.match(Digit.Utils.getPattern("Email"))&&n.createElement(o.CardLabelError,{style:{width:"100%",marginTop:"-15px",fontSize:"16px",marginBottom:"12px"}},t("CS_PROFILE_EMAIL_ERRORMSG")))))}))},SelectEmployeeName:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=e.errors,d=(l.useLocation(),[{label:"HR_EMP_NAME_LABEL",type:"text",name:"employeeName",validation:{isRequired:!0,pattern:Digit.Utils.getPattern("Name"),title:t("CORE_COMMON_APPLICANT_NAME_INVALID")},isMandatory:!0}]);return n.createElement("div",null,null==d?void 0:d.map(function(e,l){var u=s&&s[a.key]&&s[a.key][e.name]||"";return n.createElement(n.Fragment,{key:l},c[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.TextInput,r({key:e.name,value:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t.target.value,e.name)},disable:!1,defaultValue:void 0},e.validation)),u&&u.length>0&&!u.match(Digit.Utils.getPattern("Name"))&&n.createElement(o.CardLabelError,{style:{width:"100%",marginTop:"-15px",fontSize:"16px",marginBottom:"12px"}},t("CORE_COMMON_APPLICANT_NAME_INVALID")))))}))},SelectEmployeeId:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=e.errors,d=(l.useLocation(),window.location.pathname.includes("/edit/")),m=[{label:"HR_EMP_ID_LABEL",type:"text",name:"code",validation:{title:t("CORE_COMMON_APPLICANT_NAME_INVALID")}}];return n.createElement("div",null,null==m?void 0:m.map(function(e,l){return n.createElement(n.Fragment,{key:l},c[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.TextInput,r({key:e.name,value:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t.target.value,e.name)},disable:d,defaultValue:void 0},e.validation)))))}))},Jurisdictions:function(e){var l=e.t,a=e.config,i=e.onSelect,u=e.formData,s=Digit.ULBService.getCurrentTenantId(),c=t.useState([]),d=c[0],m=c[1],E=Digit.Hooks.hrms.useHrmsMDMS(s,"egov-hrms","HRMSRolesandDesignation")||{},v=E.data,p=void 0===v?{}:v,f=E.isLoading,y=t.useState((null==u?void 0:u.Jurisdictions)||[{id:void 0,key:1,hierarchy:null,boundaryType:null,boundary:null,roles:[]}]),g=y[0],_=y[1];t.useEffect(function(){var e=null==g?void 0:g.map(function(e){var t,n,l,o,a={id:null==e?void 0:e.id,hierarchy:null==e||null===(t=e.hierarchy)||void 0===t?void 0:t.code,boundaryType:null==e||null===(n=e.boundaryType)||void 0===n?void 0:n.label,boundary:null==e||null===(l=e.boundary)||void 0===l?void 0:l.code,tenantId:null==e||null===(o=e.boundary)||void 0===o?void 0:o.code,auditDetails:null==e?void 0:e.auditDetails};return a=ye(a),null!=e&&e.roles&&(a.roles=null==e?void 0:e.roles.map(function(e){return delete e.description,e})),a});i(a.key,[].concat(e,d).filter(function(e){return 0!==Object.keys(e).length}))},[g]);var S=function(e){var t,n;if(e.id){var l,o,a,i,u={id:null==e?void 0:e.id,hierarchy:null==e||null===(l=e.hierarchy)||void 0===l?void 0:l.code,boundaryType:null==e||null===(o=e.boundaryType)||void 0===o?void 0:o.label,boundary:null==e||null===(a=e.boundary)||void 0===a?void 0:a.code,tenantId:null==e||null===(i=e.boundary)||void 0===i?void 0:i.code,auditDetails:null==e?void 0:e.auditDetails,isdeleted:!0,isActive:!1};u=ye(u),null!=e&&e.roles&&(u.roles=null==e?void 0:e.roles.map(function(e){return delete e.description,e})),m([].concat(d,[u]))}_(function(t){return t.filter(function(t){return t.key!==e.key})}),(null===(t=FormData.errors)||void 0===t||null===(n=t.Jurisdictions)||void 0===n?void 0:n.type)==e.key&&clearErrors("Jurisdictions"),_(function(e){return e.map(function(e,t){return r({},e,{key:t})})})},h=[],b=[],A=t.useState(-1),R=A[0],D=A[1];function C(){var e;return null==p||null===(e=p.MdmsRes)||void 0===e?void 0:e["egov-location"].TenantBoundary.map(function(e){return e.hierarchyType})}function L(){return[]}function N(){var e;return null==p||null===(e=p.MdmsRes)||void 0===e?void 0:e["ACCESSCONTROL-ROLES"].roles.map(function(e){return{code:e.code,name:null!=e&&e.name?null==e?void 0:e.name:" ",labelKey:"ACCESSCONTROL_ROLES_ROLES_"+e.code}})}return f?n.createElement(o.Loader,null):n.createElement("div",null,null==g?void 0:g.map(function(e,t){return n.createElement(_e,{t:l,formData:u,jurisdictions:g,key:t,keys:e.key,data:p,jurisdiction:e,setjurisdictions:_,index:t,focusIndex:R,setFocusIndex:D,gethierarchylistdata:C,hierarchylist:h,boundaryTypeoption:b,getboundarydata:L,getroledata:N,handleRemoveUnit:S})}),n.createElement("label",{onClick:function(){_(function(e){return[].concat(e,[{key:e.length+1,hierarchy:null,boundaryType:null,boundary:null,roles:[]}])})},className:"link-label",style:{width:"12rem"}},l("HR_ADD_JURISDICTION")))},Assignments:function(e){var l=e.t,a=e.config,i=e.onSelect,u=e.formData,s=Digit.ULBService.getCurrentTenantId(),c=Digit.Hooks.hrms.useHrmsMDMS(s,"egov-hrms","HRMSRolesandDesignation")||{},d=c.data,m=void 0===d?{}:d,E=c.isLoading,v=t.useState(null),p=v[0],f=v[1],y=t.useState((null==u?void 0:u.Assignments)||[{key:1,fromDate:void 0,toDate:void 0,isCurrentAssignment:!1,department:null,designation:null}]),g=y[0],_=y[1],S=function(e){var t,n;_(function(t){return t.filter(function(t){return t.key!==e.key})}),(null===(t=FormData.errors)||void 0===t||null===(n=t.Assignments)||void 0===n?void 0:n.type)==e.key&&clearErrors("Jurisdictions"),_(function(e){return e.map(function(e,t){return r({},e,{key:t})})})};t.useEffect(function(){var e=null==g?void 0:g.map(function(e){var t,n;return e?ye({id:null==e?void 0:e.id,position:null==e?void 0:e.position,govtOrderNumber:null==e?void 0:e.govtOrderNumber,tenantid:null==e?void 0:e.tenantid,auditDetails:null==e?void 0:e.auditDetails,fromDate:null!=e&&e.fromDate?new Date(null==e?void 0:e.fromDate).getTime():void 0,toDate:null!=e&&e.toDate?new Date(null==e?void 0:e.toDate).getTime():void 0,isCurrentAssignment:null==e?void 0:e.isCurrentAssignment,department:null==e||null===(t=e.department)||void 0===t?void 0:t.code,designation:null==e||null===(n=e.designation)||void 0===n?void 0:n.code}):[]});Promise.all(e).then(function(e){i(a.key,e.filter(function(e){return 0!==Object.keys(e).length}))}),g.map(function(e){e.isCurrentAssignment&&f(e.fromDate)})},[g]);var h=[],b=[],A=t.useState(-1),R=A[0],D=A[1];function C(){var e,t;return null==m||null===(e=m.MdmsRes)||void 0===e||null===(t=e["common-masters"])||void 0===t?void 0:t.Department.map(function(e){return e.i18key=l("COMMON_MASTERS_DEPARTMENT_"+e.code),e})}function L(){var e,t;return null==m||null===(e=m.MdmsRes)||void 0===e||null===(t=e["common-masters"])||void 0===t?void 0:t.Designation.map(function(e){return e.i18key=l("COMMON_MASTERS_DESIGNATION_"+e.code),e})}return E?n.createElement(o.Loader,null):n.createElement("div",null,null==g?void 0:g.map(function(e,t){return n.createElement(ge,{t:l,key:t,keys:t.key,formData:u,assignment:e,setassignments:_,index:t,focusIndex:R,setFocusIndex:D,getdepartmentdata:C,department:h,designation:b,getdesignationdata:L,assignments:g,handleRemoveUnit:S,setCurrentAssiginmentDate:f,currentassignemtDate:p})}),n.createElement("label",{onClick:function(){_(function(e){return[].concat(e,[{key:e.length+1,fromDate:void 0,toDate:void 0,isCurrentAssignment:!1,department:null,designation:null}])})},className:"link-label",style:{width:"12rem"}},l("HR_ADD_ASSIGNMENT")))},ActionModal:fe,HRBanner:function(e){var t,l,a,i=e.t,r=e.config;return n.createElement(o.LabelFieldPair,null,!0!==(null==r||null===(t=r.texts)||void 0===t?void 0:t.nosideText)&&n.createElement(o.CardLabel,{className:"card-label-smaller",style:{color:"white"}},"."),n.createElement("span",{className:"form-field",style:!0!==(null==r||null===(l=r.texts)||void 0===l?void 0:l.nosideText)?{color:"gray"}:{color:"gray",width:"100%",marginTop:"-20px"}},i(null==r||null===(a=r.texts)||void 0===a?void 0:a.header)))},SelectEmployeePhoneNumber:function(e){var a=e.t,i=e.config,u=e.onSelect,s=e.formData,c=void 0===s?{}:s,d=(l.useLocation(),t.useState(!1)),m=d[0],E=d[1],v=window.Digit.Utils.browser.isMobile(),p=[{label:a("HR_MOB_NO_LABEL"),isMandatory:!0,type:"text",name:"mobileNumber",populators:{validation:{required:!0,pattern:/^[6-9]\d{9}$/},componentInFront:n.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91"),error:a("CORE_COMMON_MOBILE_ERROR")}}];function f(e,t){E(!t.populators.validation.pattern.test(e))}return n.createElement("div",null,null==p?void 0:p.map(function(e,t){return n.createElement(n.Fragment,{key:t},n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},a(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field-container",style:{width:v?"100%":"50%",display:"block"}},n.createElement("div",null,n.createElement("div",{style:{display:"flex"}},n.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91"),n.createElement(o.TextInput,r({className:"field desktop-w-full",key:e.name,value:c&&c[i.key]?c[i.key][e.name]:void 0,onChange:function(t){!function(e,t){var n;u(i.key,r({},c[i.key],((n={})[t]=e,n)))}(t.target.value,e.name,f(t.target.value,e))},disable:!1,defaultValue:void 0,onBlur:function(t){return f(t.target.value,e)}},e.validation))),n.createElement("div",null,m?n.createElement(o.CardLabelError,{style:{width:"100%"}},a(e.populators.error)):n.createElement("span",{style:{color:"gray",width:"100%",border:"none",background:"none",justifyContent:"start"}},a("HR_MOBILE_NO_CHECK")))))))}))},SelectDateofEmployment:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,d=e.errors,m=(l.useLocation(),[{label:"HR_APPOINTMENT_DATE_LABEL",type:"date",name:"dateOfAppointment",validation:{isRequired:!0,title:t("CORE_COMMON_APPLICANT_NAME_INVALID")},isMandatory:!0}]);return n.createElement("div",null,null==m?void 0:m.map(function(e,l){var u;return n.createElement(n.Fragment,{key:l},d[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.DatePicker,r({key:e.name,min:null==s||null===(u=s.SelectDateofBirthEmployment)||void 0===u?void 0:u.dob,max:c(new Date),date:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t,e.name)},disable:!1},e.validation,{defaultValue:void 0})))))}))},SelectEmployeeType:function(e){var a=e.t,i=e.config,r=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=Digit.ULBService.getCurrentTenantId(),d=(l.useLocation().pathname.includes("/modify-application/"),Digit.Hooks.hrms.useHrmsMDMS(c,"egov-hrms","EmployeeType")||{}),m=d.data,E=void 0===m?[]:m,v=d.isLoading,p=t.useState(null==s?void 0:s.SelectEmployeeType),f=p[0],y=p[1];function g(e){y(e)}t.useEffect(function(){r(i.key,f)},[f]);var _=[{label:"HR_EMPLOYMENT_TYPE_LABEL",type:"text",name:"EmployeeType",validation:{isRequired:!0},isMandatory:!0}];return v?n.createElement(o.Loader,null):null==_?void 0:_.map(function(e,t){var l;return n.createElement(o.LabelFieldPair,{key:t},n.createElement(o.CardLabel,{className:"card-label-smaller"},a(e.label),e.isMandatory?" * ":null),n.createElement(o.Dropdown,{className:"form-field",selected:f,option:null==E||null===(l=E["egov-hrms"])||void 0===l?void 0:l.EmployeeType,select:g,optionKey:"code",defaultValue:void 0,t:a}))})},SelectEmployeeCorrespondenceAddress:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=e.errors,d=(l.useLocation(),[{label:"HR_CORRESPONDENCE_ADDRESS_LABEL",type:"text",name:"correspondenceAddress",validation:{pattern:Digit.Utils.getPattern("Address"),isRequired:!0,title:t("CORE_COMMON_APPLICANT_NAME_INVALID")},isMandatory:!0}]);return n.createElement("div",null,null==d?void 0:d.map(function(e,l){var u=s&&s[a.key]&&s[a.key][e.name]||"";return n.createElement(n.Fragment,{key:l},c[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.TextInput,r({key:e.name,value:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t.target.value,e.name)},disable:!1,defaultValue:void 0},e.validation)),u&&u.length>0&&!u.match(Digit.Utils.getPattern("Address"))&&n.createElement(o.CardLabelError,{style:{width:"100%",marginTop:"-15px",fontSize:"16px",marginBottom:"12px"}},t("CORE_COMMON_APPLICANT_ADDRESS_INVALID")))))}))},SelectEmployeeGender:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,c=e.errors,d=(l.useLocation(),[{label:"HR_GENDER_LABEL",type:"text",name:"gender",validation:{isRequired:!0,title:t("CORE_COMMON_APPLICANT_NAME_INVALID")},isMandatory:!0}]),m=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),E=Digit.Hooks.hrms.useHRMSGenderMDMS(m,"common-masters","GenderType").data,v=[];return E&&E.map(function(e){v.push({name:"COMMON_GENDER_"+e.code,code:""+e.code})}),n.createElement("div",null,null==d?void 0:d.map(function(e,l){return n.createElement(n.Fragment,{key:l},c[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.RadioButtons,r({style:{display:"flex",justifyContent:"space-between"},options:v,key:e.name,optionsKey:"name",selectedOption:s&&s[a.key]?s[a.key][e.name]:null,onSelect:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t,e.name)},disable:!1,defaultValue:void 0,t:t},e.validation)))))}))},SelectDateofBirthEmployment:function(e){var t=e.t,a=e.config,i=e.onSelect,u=e.formData,s=void 0===u?{}:u,d=e.errors,m=(l.useLocation(),[{label:"HR_BIRTH_DATE_LABEL",type:"date",name:"dob",validation:{isRequired:!0,title:t("CORE_COMMON_APPLICANT_NAME_INVALID")},isMandatory:!0}]);return n.createElement("div",null,null==m?void 0:m.map(function(e,l){return n.createElement(n.Fragment,{key:l},d[e.name]&&n.createElement(o.CardLabelError,null,t(e.error)),n.createElement(o.LabelFieldPair,null,n.createElement(o.CardLabel,{className:"card-label-smaller"},t(e.label),e.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(o.DatePicker,r({key:e.name,date:s&&s[a.key]?s[a.key][e.name]:void 0,onChange:function(t){return function(e,t){var n;i(a.key,r({},s[a.key],((n={})[t]=e,n)))}(t,e.name)},disable:!1,max:c((new Date).setFullYear((new Date).getFullYear()-18)),defaultValue:void 0},e.validation)))))}))},HRMSModule:ke,HRMSResponse:function(e){var i,r,u,s,c=a.useTranslation().t,d=Digit.ULBService.getCurrentTenantId(),m=(Digit.ULBService.getStateId(),e.location.state),E=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_HAPPENED",!1),v=E[0],p=E[1],f=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_SUCCESS_DATA",!1),y=f[0],g=f[1],_=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_ERROR_DATA",!1),S=_[0],h=_[1],b="UPDATE"===m.key?Digit.Hooks.hrms.useHRMSUpdate(d):Digit.Hooks.hrms.useHRMSCreate(d),A=function(e,t){var n,l,o;h((null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.code)||"ERROR"),p(!0)};return t.useEffect(function(){b.data&&g(b.data)},[b.data]),t.useEffect(function(){var e=function(){p(!0)};v||("UPDATE"===m.key?b.mutate({Employees:m.Employees},{onError:A,onSuccess:e}):b.mutate(m,{onSuccess:e}))},[]),b.isLoading||b.isIdle&&!v?n.createElement(o.Loader,null):n.createElement(o.Card,null,n.createElement(He,{t:c,data:(null==b?void 0:b.data)||y,action:m.action,isSuccess:!!y||(null==b?void 0:b.isSuccess),isLoading:b.isIdle&&!v||(null==b?void 0:b.isLoading),isEmployee:e.parentRoute.includes("employee")}),n.createElement(o.CardText,null,c((i=b.isSuccess||!!y,e.parentRoute.includes("employee"),i?(Digit.SessionStorage.set("isupdate",Math.floor(1e5+9e5*Math.random())),"CREATE"===m.key?"HRMS_CREATE_EMPLOYEE_INFO":""):(null==b||null===(r=b.error)||void 0===r||null===(u=r.response)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.Errors[0].code)||S),c)),n.createElement(o.ActionBar,null,n.createElement(l.Link,{to:e.parentRoute.includes("employee")?"/digit-ui/employee":"/digit-ui/citizen"},n.createElement(o.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")}))))},HREditEmpolyee:function(e){var t=Digit.SessionStorage.get("isupdate"),a=l.useParams().id,i=l.useParams().tenantId,r=Digit.Hooks.hrms.useHRMSSearch({codes:a},i,t),s=r.isLoading,c=r.data;return u(r,Ae),s?n.createElement(o.Loader,null):n.createElement(be,{data:null==c?void 0:c.Employees[0],tenantId:i})},HRCreateEmployee:function(){var e=Digit.ULBService.getCurrentTenantId(),i=t.useState(!1),r=i[0],u=i[1],s=t.useState(null),c=s[0],d=s[1],m=t.useState(null),E=m[0],v=m[1],p=t.useState(!1),f=p[0],y=p[1],g=t.useState(!1),_=g[0],S=g[1],h=a.useTranslation().t,b=l.useHistory(),A=window.Digit.Utils.browser.isMobile(),R=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"egov-hrms",["CommonFieldsConfig"],{select:function(e){var t,n;return{config:null==e||null===(t=e.MdmsRes)||void 0===t||null===(n=t["egov-hrms"])||void 0===n?void 0:n.CommonFieldsConfig}},retry:!1,enable:!1}),D=R.data,C=R.isLoading,L=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_HAPPENED",!1)[1],N=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_ERROR_DATA",!1)[2],O=Digit.Hooks.useSessionStorage("EMPLOYEE_HRMS_MUTATION_SUCCESS_DATA",!1)[2];t.useEffect(function(){L(!1),O(),N()},[]),t.useEffect(function(){c&&10==c.length&&c.match(Digit.Utils.getPattern("MobileNo"))?(v(null),Digit.HRMSService.search(e,null,{phone:c}).then(function(e,t){e.Employees.length>0?(v({key:!0,label:"ERR_HRMS_USER_EXIST_MOB"}),y(!1)):y(!0)})):y(!1)},[c]);var T={Jurisdictions:[{id:void 0,key:1,hierarchy:null,boundaryType:null,boundary:{code:e},roles:[]}]},M=function(e){b.replace("/digit-ui/employee/hrms/response",{Employees:e,key:"CREATE",action:"CREATE"})};if(C)return n.createElement(o.Loader,null);var I=null!=D&&D.config?D.config:he;return n.createElement("div",null,n.createElement("div",{style:A?{marginLeft:"-12px",fontFamily:"calibri",color:"#FF0000"}:{marginLeft:"15px",fontFamily:"calibri",color:"#FF0000"}},n.createElement(o.Header,null,h("HR_COMMON_CREATE_EMPLOYEE_HEADER"))),n.createElement(o.FormComposer,{defaultValues:T,heading:h(""),config:I,onSubmit:function(t){var n,l,o,a,i,r,u,s,c,d,m,E,p,f,y,g,_,S;if(0!=t.Jurisdictions.filter(function(t){return t.tenantId==e}).length)if(Object.values(t.Jurisdictions.reduce(function(e,t){return t&&null!=t&&t.tenantId&&(e[t.tenantId]=e[t.tenantId]?e[t.tenantId]+1:1),e},{})).every(function(e){return 1==e})){var h,b=null==t||null===(n=t.Jurisdictions)||void 0===n?void 0:n.map(function(e){var t;return null===(t=e.roles)||void 0===t?void 0:t.map(function(t){return t.tenantId=e.boundary,t})}),A=[].concat.apply([],b),R=[{tenantId:e,employeeStatus:"EMPLOYED",assignments:null==t?void 0:t.Assignments,code:null!=t&&null!==(l=t.SelectEmployeeId)&&void 0!==l&&l.code?null==t||null===(o=t.SelectEmployeeId)||void 0===o?void 0:o.code:void 0,dateOfAppointment:new Date(null==t||null===(a=t.SelectDateofEmployment)||void 0===a?void 0:a.dateOfAppointment).getTime(),employeeType:null==t||null===(i=t.SelectEmployeeType)||void 0===i?void 0:i.code,jurisdictions:null==t?void 0:t.Jurisdictions,user:{mobileNumber:null==t||null===(r=t.SelectEmployeePhoneNumber)||void 0===r?void 0:r.mobileNumber,name:null==t||null===(u=t.SelectEmployeeName)||void 0===u?void 0:u.employeeName,correspondenceAddress:null==t||null===(s=t.SelectEmployeeCorrespondenceAddress)||void 0===s?void 0:s.correspondenceAddress,emailId:null!=t&&null!==(c=t.SelectEmployeeEmailId)&&void 0!==c&&c.emailId?null==t||null===(d=t.SelectEmployeeEmailId)||void 0===d?void 0:d.emailId:void 0,gender:null==t||null===(m=t.SelectEmployeeGender)||void 0===m?void 0:m.gender.code,dob:new Date(null==t||null===(E=t.SelectDateofBirthEmployment)||void 0===E?void 0:E.dob).getTime(),roles:A,tenantId:e},serviceHistory:[],education:[],tests:[]}];R=null!==(p=Digit)&&void 0!==p&&null!==(f=p.Customizations)&&void 0!==f&&null!==(y=f.HRMS)&&void 0!==y&&y.customiseCreateFormData?Digit.Customizations.HRMS.customiseCreateFormData(t,R):R,null!=t&&null!==(g=t.SelectEmployeeId)&&void 0!==g&&g.code&&(null==t||null===(_=t.SelectEmployeeId)||void 0===_||null===(S=_.code)||void 0===S?void 0:S.trim().length)>0?Digit.HRMSService.search(e,null,{codes:null==t||null===(h=t.SelectEmployeeId)||void 0===h?void 0:h.code}).then(function(e,t){e.Employees.length>0?v({key:!0,label:"ERR_HRMS_USER_EXIST_ID"}):M(R)}):M(R)}else v({key:!0,label:"ERR_INVALID_JURISDICTION"});else v({key:!0,label:"ERR_BASE_TENANT_MANDATORY"})},onFormValueChange:function(e,t){var n,l,o,a,i,r,s,c,m;null!=t&&null!==(n=t.SelectEmployeePhoneNumber)&&void 0!==n&&n.mobileNumber?d(null==t||null===(c=t.SelectEmployeePhoneNumber)||void 0===c?void 0:c.mobileNumber):d(null==t||null===(m=t.SelectEmployeePhoneNumber)||void 0===m?void 0:m.mobileNumber);for(var E=0;E<(null==t||null===(v=t.Jurisdictions)||void 0===v?void 0:v.length);E++){var v,p,y=null==t?void 0:t.Jurisdictions[E];if(!(null!=y&&y.boundary&&null!=y&&y.boundaryType&&null!=y&&y.hierarchy&&null!=y&&y.tenantId&&(null==y||null===(p=y.roles)||void 0===p?void 0:p.length)>0)){S(!1);break}S(!0)}for(var g=!1,h=0;h<(null==t||null===(b=t.Assignments)||void 0===b?void 0:b.length);h++){var b,A,R,D=null==t?void 0:t.Assignments[h];if(!(D.department&&D.designation&&D.fromDate&&(null!=t&&t.Assignments[h].toDate||null!=t&&null!==(A=t.Assignments[h])&&void 0!==A&&A.isCurrentAssignment))){g=!1;break}if(null==(null==t?void 0:t.Assignments[h].toDate)&&0==(null==t||null===(R=t.Assignments[h])||void 0===R?void 0:R.isCurrentAssignment)){g=!1;break}g=!0}null!=t&&null!==(l=t.SelectDateofEmployment)&&void 0!==l&&l.dateOfAppointment&&null!=t&&null!==(o=t.SelectEmployeeCorrespondenceAddress)&&void 0!==o&&o.correspondenceAddress&&null!=t&&null!==(a=t.SelectEmployeeGender)&&void 0!==a&&a.gender.code&&null!=t&&null!==(i=t.SelectEmployeeName)&&void 0!==i&&i.employeeName&&null!=t&&null!==(r=t.SelectEmployeeType)&&void 0!==r&&r.code&&null!=t&&null!==(s=t.SelectEmployeePhoneNumber)&&void 0!==s&&s.mobileNumber&&_&&g&&f&&function(e){var t,n,l,o=(null==e||null===(t=e.SelectEmployeeEmailId)||void 0===t?void 0:t.emailId)||"",a=(null==e||null===(n=e.SelectEmployeeName)||void 0===n?void 0:n.employeeName)||"",i=(null==e||null===(l=e.SelectEmployeeCorrespondenceAddress)||void 0===l?void 0:l.correspondenceAddress)||"";return(0==o.length||o.match(Digit.Utils.getPattern("Email")))&&a.match(Digit.Utils.getPattern("Name"))&&i.match(Digit.Utils.getPattern("Address"))}(t)?u(!0):u(!1)},isDisabled:!r,label:h("HR_COMMON_BUTTON_SUBMIT")}),E&&n.createElement(o.Toast,{error:E.key,label:h(E.label),onClose:function(){v(null)}}))},HRInbox:function(e){var l,i,s=e.parentRoute,c=e.businessService,d=void 0===c?"HRMS":c,m=e.initialStates,E=void 0===m?{}:m,v=e.filterComponent,p=e.isInbox,f=Digit.ULBService.getCurrentTenantId(),y=Digit.Hooks.hrms.useHRMSCount(f),g=y.isLoading,_=y.data,S=a.useTranslation().t,h=t.useState(E.pageOffset||0),b=h[0],A=h[1],R=t.useState(E.pageSize||10),D=R[0],C=R[1],L=t.useState(E.sortParams||[{id:"createdTime",desc:!1}]),N=L[0],O=L[1],T=t.useState(void 0)[0],M=t.useState(function(){return E.searchParams||{}}),I=M[0],P=M[1],H=window.Digit.Utils.browser.isMobile(),k=H?{limit:100,offset:b,sortOrder:null!=N&&null!==(l=N[0])&&void 0!==l&&l.desc?"DESC":"ASC"}:{limit:D,offset:b,sortOrder:null!=N&&null!==(i=N[0])&&void 0!==i&&i.desc?"DESC":"ASC"},x=Digit.SessionStorage.get("isupdate"),F=Digit.Hooks.hrms.useHRMSSearch(I,f,k,x),w=F.isLoading,B=F.data,U=u(F,Ie);t.useEffect(function(){},[_]),t.useEffect(function(){},[w,U]),t.useEffect(function(){A(0)},[I]);var V=function(){A(function(e){return e+D})},Y=function(){A(function(e){return e-D})},j=function(e){var t=e.delete,n=r({},I,e);t&&t.forEach(function(e){return delete n[e]}),delete n.delete,P(r({},n))},G=t.useCallback(function(e){0!==e.length&&O(e)},[]),z=function(e){C(Number(e.target.value))},J=function(){return[{label:S("HR_NAME_LABEL"),name:"names"},{label:S("HR_MOB_NO_LABEL"),name:"phone",maxlength:10,pattern:"[6-9][0-9]{9}",title:S("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"},{label:S("HR_EMPLOYEE_ID_LABEL"),name:"codes"}]};return g?n.createElement(o.Loader,null):null!==(null==B?void 0:B.length)?H?n.createElement(Me,{businessService:d,data:B,isLoading:w,defaultSearchParams:E.searchParams,isSearch:!p,onFilterChange:j,searchFields:J(),onSearch:j,onSort:G,onNextPage:V,tableConfig:null==U?void 0:U.tableConfig,onPrevPage:Y,currentPage:Math.floor(b/D),pageSizeLimit:D,disableSort:!1,onPageSizeChange:z,parentRoute:s,searchParams:I,sortParams:N,totalRecords:T,linkPrefix:"/digit-ui/employee/hrms/details/",filterComponent:v}):n.createElement("div",null,p&&n.createElement(o.Header,null,S("HR_HOME_SEARCH_RESULTS_HEADING")),n.createElement(Oe,{businessService:d,data:B,isLoading:w,defaultSearchParams:E.searchParams,isSearch:!p,onFilterChange:j,searchFields:J(),onSearch:j,onSort:G,onNextPage:V,onPrevPage:Y,currentPage:Math.floor(b/D),pageSizeLimit:D,disableSort:!1,onPageSizeChange:z,parentRoute:s,searchParams:I,sortParams:N,totalRecords:T,filterComponent:v})):void 0},HRMS_INBOX_FILTER:function(e){return n.createElement(p,e)}};exports.HRMSModule=ke,exports.initHRMSComponents=function(){Object.entries(xe).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
