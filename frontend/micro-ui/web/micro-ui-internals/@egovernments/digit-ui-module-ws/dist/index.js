var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,l=require("react-i18next"),o=require("react-router-dom"),i=require("@egovernments/digit-ui-react-components"),a=require("react-hook-form"),r=require("xlsx"),u=require("react-query");const d=()=>{const{t:e}=l.useTranslation();return t.createElement("div",null,"Test Acknowlwdgment",t.createElement("br",null),t.createElement("button",{onClick:()=>{const n=((e,n)=>{var t;const l={i18nKey:"TENANT_TENANTS_PB_AMRITSAR",code:"pb.amritsar",name:"Amritsar",description:"Amritsar",pincode:[143001,143002,143003,143004,143005],logoId:"https://s3.ap-south-1.amazonaws.com/pb-egov-assets/pb.amritsar/logo.png",imageId:"/pb-egov-assets/pb.amritsar/logo.png",domainUrl:"www.amritsarcorp.com",type:"CITY",twitterUrl:null,facebookUrl:null,emailId:"support.amritsar@gmail.com",OfficeTimings:{"Mon - Fri":"9.00 AM - 6.00 PM"},city:{name:"Amritsar",localName:"Amritsar",districtCode:"1",districtName:"Amritsar",districtTenantCode:"pb.amritsar",regionName:"Amritsar Region",ulbGrade:"MC 1",longitude:74.8723,latitude:31.634,shapeFileLocation:null,captcha:null,code:"107",regionCode:"1",municipalityName:"Amritsar",ddrName:"Amritsar District"},address:"Municipal Corporation Amritsar, C Block, Ranjit Avenue, Amritsar, Punjab",contactNumber:"0181-2227014"};return{name:n(null==l?void 0:l.i18nKey)+" "+n("ULBGRADE_"+(null==l||null===(t=l.city)||void 0===t?void 0:t.ulbGrade.toUpperCase().replace(" ","_").replace(".","_"))),email:null==l?void 0:l.emailId,phoneNumber:null==l?void 0:l.contactNumber,heading:n("WS_NEW_WATER_CONNECTION"),breakPageLimit:4,details:[{title:n("CS_TITLE_APPLICATION_DETAILS"),values:[{title:n("WS_COMMON_APPLICATION_NO_LABEL"),value:"WS_AP/107/2021-22/250238"}]},{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:"PB-PT-2022-02-24-026486"},{title:n("WS_PROPERTY_TYPE_LABEL"),value:"Flat/Part of the building"},{title:n("WS_PROPERTY_USAGE_TYPE_LABEL"),value:"Residential"},{title:n("WS_PROPERTY_SUB_USAGE_TYPE_LABEL"),value:"N/A"},{title:n("WS_PROP_DETAIL_PLOT_SIZE_LABEL"),value:"2112"},{title:n("WS_PROPERTY_NO_OF_FLOOR_LABEL"),value:"1"},{title:n("WS_SERV_DETAIL_CONN_RAIN_WATER_HARVESTING_FAC"),value:"N/A"}]},{title:n("WS_COMMON_PROP_LOC_DETAIL_HEADER"),values:[{title:n("WS_PROP_DETAIL_CITY"),value:"Amritsar"},{title:n("WS_PROP_DETAIL_DHNO"),value:"N/A"},{title:n("WS_PROP_DETAIL_BUILD_NAME_LABEL"),value:"N/A"},{title:n("WS_PROP_DETAIL_STREET_NAME"),value:"N/A"},{title:n("WS_PROP_DETAIL_LOCALITY_MOHALLA_LABEL"),value:"Ajit Nagar - Area1"},{title:n("WS_PROP_DETAIL_DHNO"),value:"143001"}]},{title:n("WS_TASK_PROP_OWN_HEADER"),values:[{title:n("Owner - 1"),value:""},{title:n("WS_CONN_HOLDER_OWN_DETAIL_MOBILE_NO_LABEL"),value:"7878787878"},{title:n("WS_MYCONNECTIONS_OWNER_NAME"),value:"OWNER NAME"},{title:n("WS_OWNER_DETAILS_EMAIL_LABEL"),value:"N/A"},{title:n("WS_OWN_DETAIL_GENDER_LABEL"),value:"Male"},{title:n("WS_OWN_DETAIL_DOB_LABEL"),value:"N/A"},{title:n("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),value:"N/A"},{title:n("WS_OWN_DETAIL_RELATION_LABEL"),value:"Husband"},{title:n("WS_CONN_HOLDER_OWN_DETAIL_CROSADD"),value:"Ajit Nagar - Area1, Amritsar, 143001"},{title:n("WS_CONN_HOLDER_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),value:"None"}]},{title:n("WS_COMMON_CONNECTION_DETAILS"),values:[{title:n("WS_APPLY_FOR"),value:"Water"},{title:n("WS_CONN_DETAIL_NO_OF_TAPS"),value:"12"},{title:n("WS_CONN_DETAIL_PIPE_SIZE"),value:"0.25"}]},{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:"Yes"}]},{title:n("WS_COMMON_DOCS"),values:[{title:n("WS_OWNER.IDENTITYPROOF"),value:"ANXgJeMOAJ.pdf"},{title:n("WS_OWNER.ADDRESSPROOF"),value:"ANXgJeMOAJ.pdf"},{title:n("OWNER.ADDRESSPROOF.ELECTRICITYBILL"),value:"ANXgJeMOAJ.pdf"},{title:n("PLUMBER_REPORT_DRAWING"),value:"ANXgJeMOAJ.pdf"}]},{title:n("WS_COMMON_ADDN_DETAILS"),values:[{title:n("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),value:"NA"},{title:n("WS_SERV_DETAIL_NO_OF_TAPS"),value:"NA"},{title:n("WS_SERV_DETAIL_WATER_SOURCE"),value:"NA"},{title:n("WS_SERV_DETAIL_WATER_SUB_SOURCE"),value:"NA"},{title:n("WS_SERV_DETAIL_PIPE_SIZE"),value:"NA"}]},{title:n("WS_COMMON_PLUMBER_DETAILS"),values:[{title:n("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY"),value:"NA"},{title:n("WS_ADDN_DETAILS_PLUMBER_LICENCE_NO_LABEL"),value:"NA"},{title:n("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL"),value:"NA"},{title:n("WS_ADDN_DETAILS_PLUMBER_MOB_NO_LABEL"),value:"NA"}]},{title:n("WS_ROAD_CUTTING_CHARGE"),values:[{title:n("WS_ADDN_DETAIL_ROAD_TYPE"),value:"NA"},{title:n("WS_ADDN_DETAILS_AREA_LABEL"),value:"NA"}]},{title:n("WS_ACTIVATION_DETAILS"),values:[{title:n("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),value:"NA"},{title:n("WS_SERV_DETAIL_METER_ID"),value:"NA"},{title:n("WS_ADDN_DETAIL_METER_INSTALL_DATE"),value:"NA"},{title:n("WS_ADDN_DETAILS_INITIAL_METER_READING"),value:"NA"}]}]}})(0,e);Digit.Utils.pdf.generate(n)}},"Print"))},s=function(e,n,t){if(void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),""==n)return e;for(;e&&e.includes(n);)e=e.replace(n,t);return e},c=function(e,n){try{return Promise.resolve(Digit.MDMSService.getMultipleTypes(e,"tenant",["tenants","citymodule"])).then(function(t){var l,o,i,a,r;const u=null==t?void 0:t.tenant.tenants.filter(n=>n.code===e),d=Digit.Utils.locale.getTransformedLocale(e),s=null==u||null===(l=u[0])||void 0===l||null===(o=l.city)||void 0===o?void 0:o.ulbGrade.replaceAll(" ","_");return{header:n("TENANT_TENANTS_"+d)+" "+n("ULBGRADE_"+s),subHeader:null==u?void 0:u[0].address,description:(null==u||null===(i=u[0])||void 0===i?void 0:i.contactNumber)+" | "+(null==u||null===(a=u[0])||void 0===a?void 0:a.domainUrl)+" | "+(null==u||null===(r=u[0])||void 0===r?void 0:r.emailId)}})}catch(e){return Promise.reject(e)}},v=function(e,n){if(void 0===n&&(n=!1),null==e||null==e||""==e)return"NA";const t=new Date(e);let l=t.getMonth()+1,o=t.getDate(),i=t.getFullYear();return l=(l>9?"":"0")+l,o=(o>9?"":"0")+o,n?i+"-"+l+"-"+o:o+"-"+l+"-"+i},p=e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()},m=e=>e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((e,n)=>{let[t,l]=n.split("=");return e[t]=l?decodeURIComponent(l.replace(/\+/g," ")):"",e},{}):{},E=(e,n)=>{var t,l,o;return(null!=e&&e.doorNo?(null==e?void 0:e.doorNo)+", ":"")+(null!=e&&e.street?(null==e?void 0:e.street)+", ":"")+(null!=e&&e.landmark?(null==e?void 0:e.landmark)+", ":"")+(null!=e&&null!==(t=e.locality)&&void 0!==t&&t.code?n("TENANTS_MOHALLA_"+(null==e||null===(l=e.locality)||void 0===l?void 0:l.code)):"")+(null!=e&&null!==(o=e.city)&&void 0!==o&&o.code||null!=e&&e.city?", "+n((null==e?void 0:e.city.code)||(null==e?void 0:e.city)):"")+(null!=e&&e.pincode?", "+e.pincode:" ")},S=function(e,n){void 0===n&&(n="dayend");try{const t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[2]-1,t[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}},f=e=>{if(e){const n=new Date(e);let t=n.getMonth()+1,l=n.getDate(),o=n.getFullYear();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,t+"/"+l+"/"+o}return null},C=e=>{switch(e){case"WSOnlyNumbers":return/^[0-9]*$/i;case"Name":return/^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i;case"MobileNo":return/^[6789][0-9]{9}$/i;case"MobileNoWithPrivacy":return/^[6789][*]{7}[0-9]{2}|[6789][0-9]{9}$/i;case"Amount":return/^[0-9]{0,8}$/i;case"NonZeroAmount":return/^[1-9][0-9]{0,7}$/i;case"DecimalNumber":return/^\d{0,8}(\.\d{1,2})?$/i;case"Email":return/[A-Za-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/i;case"Address":return/^[^\$\"<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,500}$/i;case"PAN":return/^[A-Za-z]{5}\d{4}[A-Za-z]{1}$/i;case"TradeName":return/^[-@.\/#&+\w\s]*$/;case"Date":return/^[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/i;case"UOMValue":return/^(0)*[1-9][0-9]{0,5}$/i;case"OperationalArea":case"NoOfEmp":return/^(0)*[1-9][0-9]{0,6}$/i;case"GSTNo":return/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}\d[Z]{1}[A-Z\d]{1}$/i;case"DoorHouseNo":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,50}$/i;case"BuildingStreet":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,64}$/i;case"Pincode":return/^[1-9][0-9]{5}$/i;case"Landline":return/^[0-9]{11}$/i;case"PropertyID":return/^[a-zA-z0-9\s\\/\-]$/i;case"ElectricityConnNo":return/^.{1,15}$/i;case"DocumentNo":return/^[0-9]{1,15}$/i;case"eventName":return/^[^\$\"<>?\\\\~`!@#$%^()+={}\[\]*,.:;“”]{1,65}$/i;case"eventDescription":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,500}$/i;case"cancelChallan":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,100}$/i;case"FireNOCNo":return/^[a-zA-Z0-9-]*$/i;case"consumerNo":return/^[a-zA-Z0-9/-]*$/i;case"AadharNo":return/^([0-9]){12}$/;case"ChequeNo":return/^(?!0{6})[0-9]{6}$/;case"Comments":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,50}$/i;case"OldLicenceNo":return/^[a-zA-Z0-9-/]{0,64}$/}},g=function(e,n){try{return Promise.resolve(Digit.UploadServices.Filefetch(e,n)).then(function(e){var n,t,l,o,i,a;null!=e&&null!==(n=e.data)&&void 0!==n&&null!==(t=n.fileStoreIds)&&void 0!==t&&null!==(l=t[0])&&void 0!==l&&l.url&&window.open(null==e||null===(o=e.data)||void 0===o||null===(i=o.fileStoreIds)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.url)})}catch(e){return Promise.reject(e)}},N=function(e,n){try{var t,l,o,i,a,r;let u={...e,processInstance:{...null==e?void 0:e.processInstance,action:"SUBMIT_APPLICATION"},documents:JSON.parse(sessionStorage.getItem("WS_DOCUMENTS_INOF")),property:JSON.parse(sessionStorage.getItem("WS_PROPERTY_INOF")),connectionType:"WATER"===n?null==e?void 0:e.connectionType:"Non Metered"};return u=null!==(t=Digit)&&void 0!==t&&null!==(l=t.Customizations)&&void 0!==l&&null!==(o=l.WS)&&void 0!==o&&o.customiseUpdatePayloadOfWS?null===(i=Digit)||void 0===i||null===(a=i.Customizations)||void 0===a||null===(r=a.WS)||void 0===r?void 0:r.customiseUpdatePayloadOfWS(e,u,n):u,Promise.resolve(u)}catch(e){return Promise.reject(e)}},y=function(e,n,t){try{var l,o,i,a,r,u,d,s,c,v,p,m,E,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae;const Re=Digit.UserService.getType();let we=[];if((null==n||null===(l=n.applicationData)||void 0===l||null===(o=l.plumberInfo)||void 0===o?void 0:o.length)>0){var re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le;let e={};null!=n&&null!==(re=n.applicationData)&&void 0!==re&&null!==(ue=re.plumberInfo)&&void 0!==ue&&null!==(de=ue[0])&&void 0!==de&&de.licenseNo&&(e.licenseNo=null==n||null===(se=n.applicationData)||void 0===se||null===(ce=se.plumberInfo)||void 0===ce||null===(ve=ce[0])||void 0===ve?void 0:ve.licenseNo),null!=n&&null!==(pe=n.applicationData)&&void 0!==pe&&null!==(me=pe.plumberInfo)&&void 0!==me&&null!==(Ee=me[0])&&void 0!==Ee&&Ee.mobileNumber&&(e.mobileNumber=null==n||null===(Se=n.applicationData)||void 0===Se||null===(_e=Se.plumberInfo)||void 0===_e||null===(fe=_e[0])||void 0===fe?void 0:fe.mobileNumber),null!=n&&null!==(Ce=n.applicationData)&&void 0!==Ce&&null!==(ge=Ce.plumberInfo)&&void 0!==ge&&null!==(Ne=ge[0])&&void 0!==Ne&&Ne.id&&(e.id=null==n||null===(ye=n.applicationData)||void 0===ye||null===(Te=ye.plumberInfo)||void 0===Te||null===(De=Te[0])||void 0===De?void 0:De.id),null!=n&&null!==(Ae=n.applicationData)&&void 0!==Ae&&null!==(Ie=Ae.plumberInfo)&&void 0!==Ie&&null!==(he=Ie[0])&&void 0!==he&&he.name&&(e.name=null==n||null===(Oe=n.applicationData)||void 0===Oe||null===(be=Oe.plumberInfo)||void 0===be||null===(Le=be[0])||void 0===Le?void 0:Le.name),we=[e]}let We={WaterConnection:{id:null==n||null===(i=n.applicationData)||void 0===i?void 0:i.id,applicationNo:null==n||null===(a=n.applicationData)||void 0===a?void 0:a.applicationNo,applicationStatus:null==n||null===(r=n.applicationData)||void 0===r?void 0:r.applicationStatus,status:null==n||null===(u=n.applicationData)||void 0===u?void 0:u.status,connectionNo:null==n||null===(d=n.applicationData)||void 0===d?void 0:d.connectionNo,connectionHolders:null==n||null===(s=n.applicationData)||void 0===s?void 0:s.connectionHolders,applicationType:"NEW_WATER_CONNECTION",dateEffectiveFrom:S(null==e?void 0:e.date),isdisconnection:!0,isDisconnectionTemporary:"Temporary"===(null==e||null===(c=e.type)||void 0===c||null===(v=c.value)||void 0===v?void 0:v.code)||"TEMPORARY"===(null==e||null===(p=e.type)||void 0===p||null===(m=p.value)||void 0===m?void 0:m.code),disconnectionReason:null==e||null===(E=e.reason.value)||void 0===E?void 0:E.code,documents:null==e?void 0:e.documents,water:!0,sewerage:!1,proposedTaps:(null==n||null===(_=n.applicationData)||void 0===_?void 0:_.proposedTaps)&&Number(null==n||null===(f=n.applicationData)||void 0===f?void 0:f.proposedTaps),proposedPipeSize:(null==n||null===(C=n.applicationData)||void 0===C||null===(g=C.proposedPipeSize)||void 0===g?void 0:g.size)&&Number(null==n||null===(N=n.applicationData)||void 0===N||null===(y=N.proposedPipeSize)||void 0===y?void 0:y.size),service:"Water",property:null==n||null===(T=n.applicationData)||void 0===T?void 0:T.property,propertyId:null==n||null===(D=n.applicationData)||void 0===D?void 0:D.propertyId,oldConnectionNo:null,plumberInfo:(null===(A=we)||void 0===A?void 0:A.length)>0?we:null,roadCuttingInfo:null==n||null===(I=n.applicationData)||void 0===I?void 0:I.roadCuttingInfo,roadCuttingArea:null,roadType:null,connectionExecutionDate:null==n||null===(h=n.applicationData)||void 0===h?void 0:h.connectionExecutionDate,noOfTaps:null==n||null===(O=n.applicationData)||void 0===O?void 0:O.noOfTaps,additionalDetails:null==n||null===(b=n.applicationData)||void 0===b?void 0:b.additionalDetails,tenantId:null==n||null===(L=n.applicationData)||void 0===L?void 0:L.tenantId,connectionType:n.applicationData.connectionType||null,waterSource:n.applicationData.waterSource||null,processInstance:{...null==n||null===(R=n.applicationData)||void 0===R?void 0:R.processInstance,action:"INITIATE"},channel:"citizen"===Re?"CITIZEN":"CFC_COUNTER"},disconnectRequest:!0};n.applicationData.connectionType&&(n.applicationData.meterInstallationDate&&(We.WaterConnection.meterInstallationDate=n.applicationData.meterInstallationDate),n.applicationData.meterId&&(We.WaterConnection.meterId=n.applicationData.meterId));let Pe={SewerageConnection:{id:null==n||null===(w=n.applicationData)||void 0===w?void 0:w.id,applicationNo:null==n||null===(W=n.applicationData)||void 0===W?void 0:W.applicationNo,applicationStatus:null==n||null===(P=n.applicationData)||void 0===P?void 0:P.applicationStatus,status:null==n||null===(M=n.applicationData)||void 0===M?void 0:M.status,connectionNo:null==n||null===(x=n.applicationData)||void 0===x?void 0:x.connectionNo,connectionHolders:null==n||null===(B=n.applicationData)||void 0===B?void 0:B.connectionHolders,applicationType:"NEW_WATER_CONNECTION",dateEffectiveFrom:S(null==e?void 0:e.date),isdisconnection:!0,isDisconnectionTemporary:"Temporary"===(null==e||null===(F=e.type)||void 0===F||null===(U=F.value)||void 0===U?void 0:U.code),disconnectionReason:null==e||null===(k=e.reason.value)||void 0===k?void 0:k.code,documents:null==e?void 0:e.documents,water:!1,sewerage:!0,proposedWaterClosets:(null==n||null===(H=n.applicationData)||void 0===H?void 0:H.proposedWaterClosets)&&Number(null==n||null===(j=n.applicationData)||void 0===j?void 0:j.proposedWaterClosets),proposedToilets:(null==n||null===(z=n.applicationData)||void 0===z?void 0:z.proposedToilets)&&Number(null==n||null===(V=n.applicationData)||void 0===V?void 0:V.proposedToilets),service:"Sewerage",property:null==n||null===(Y=n.applicationData)||void 0===Y?void 0:Y.property,propertyId:null==n||null===(G=n.applicationData)||void 0===G?void 0:G.propertyId,oldConnectionNo:null,plumberInfo:(null===(q=we)||void 0===q?void 0:q.length)>0?we:null,roadCuttingInfo:null==n||null===(K=n.applicationData)||void 0===K?void 0:K.roadCuttingInfo,roadCuttingArea:null,roadType:null,connectionExecutionDate:null==n||null===(X=n.applicationData)||void 0===X?void 0:X.connectionExecutionDate,noOfWaterClosets:null==n||null===($=n.applicationData)||void 0===$?void 0:$.noOfWaterClosets,noOfToilets:null==n||null===(Z=n.applicationData)||void 0===Z?void 0:Z.noOfToilets,additionalDetails:null==n||null===(J=n.applicationData)||void 0===J?void 0:J.additionalDetails,tenantId:null==n||null===(Q=n.applicationData)||void 0===Q?void 0:Q.tenantId,connectionType:"Non Metered",waterSource:n.applicationData.waterSource||null,processInstance:{...null==n||null===(ee=n.applicationData)||void 0===ee?void 0:ee.processInstance,action:"INITIATE"},channel:"citizen"===Re?"CITIZEN":"CFC_COUNTER"},disconnectRequest:!0},Me="WATER"===t?We:Pe;return Me=null!==(ne=Digit)&&void 0!==ne&&null!==(te=ne.Customizations)&&void 0!==te&&null!==(le=te.WS)&&void 0!==le&&le.customiseCreatePayloadOfWSDisconnection?null===(oe=Digit)||void 0===oe||null===(ie=oe.Customizations)||void 0===ie||null===(ae=ie.WS)||void 0===ae?void 0:ae.customiseCreatePayloadOfWSDisconnection(e,Me,t):Me,Promise.resolve(Me)}catch(e){return Promise.reject(e)}},T=function(e,n){try{var t,l,o,i,a,r,u,d;let s={...e,plumberInfo:null!=e&&null!==(t=e.plumberInfo)&&void 0!==t&&t[0]?[{...null==e||null===(l=e.plumberInfo)||void 0===l?void 0:l[0],id:null}]:null==e?void 0:e.plumberInfo,applicationType:"WATER"===n?"DISCONNECT_WATER_CONNECTION":"DISCONNECT_SEWERAGE_CONNECTION",processInstance:{...null==e?void 0:e.processInstance,businessService:"WATER"===n?"DisconnectWSConnection":"DisconnectSWConnection",action:"SUBMIT_APPLICATION"}};return s=null!==(o=Digit)&&void 0!==o&&null!==(i=o.Customizations)&&void 0!==i&&null!==(a=i.WS)&&void 0!==a&&a.customiseUpdatePayloadOfWSDisconnection?null===(r=Digit)||void 0===r||null===(u=r.Customizations)||void 0===u||null===(d=u.WS)||void 0===d?void 0:d.customiseUpdatePayloadOfWSDisconnection(e,s,n):s,Promise.resolve(s)}catch(e){return Promise.reject(e)}},D=function(e,n){try{var t,l;let o={...e,plumberInfo:null!=e&&null!==(t=e.plumberInfo)&&void 0!==t&&t[0]?[{...null==e||null===(l=e.plumberInfo)||void 0===l?void 0:l[0],id:null}]:null==e?void 0:e.plumberInfo,applicationType:"WATER"===n?"WATER_RECONNECTION":"SEWERAGE_RECONNECTION",processInstance:{...null==e?void 0:e.processInstance,businessService:"WATER"===n?"WSReconnection":"SWReconnection",action:"SUBMIT_APPLICATION"}};return Promise.resolve(o)}catch(e){return Promise.reject(e)}},A=e=>{var n;const t=Digit.ULBService.getCurrentTenantId(),l=Digit.UserService.getUser();let o=[];return null==l||null===(n=l.info)||void 0===n||n.roles.filter(n=>{for(let l=0;l<e.length;l++)n.code==e[l]&&n.tenantId===t&&o.push(!0)}),null==o?void 0:o.length},I=e=>"WATER"==(null==e?void 0:e.service)?"WS.ONE_TIME_FEE":"SW.ONE_TIME_FEE",h=function(e,n,t,l,o){var i,a,r,u,d,c,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re;void 0===t&&(t=!1),void 0===l&&(l=!1),null==e||null===(i=e.propertyDetails)||void 0===i||null===(a=i.owners)||void 0===a||a.forEach(e=>{null!=e&&e.permanentAddress&&(e.correspondenceAddress=null==e?void 0:e.permanentAddress)});let we=[{water:"WATER"===n,sewerage:"WATER"!==n,applicationNo:null==e||null===(r=e.applicationData)||void 0===r?void 0:r.applicationNo,serviceName:n,proposedTaps:Number(null==e||null===(u=e.applicationData)||void 0===u?void 0:u.proposedTaps)||"",proposedPipeSize:null!=e&&null!==(d=e.applicationData)&&void 0!==d&&d.proposedPipeSize?{i18nKey:null==e||null===(c=e.applicationData)||void 0===c?void 0:c.proposedPipeSize,code:null==e||null===(p=e.applicationData)||void 0===p?void 0:p.proposedPipeSize,size:null==e||null===(m=e.applicationData)||void 0===m?void 0:m.proposedPipeSize}:"",proposedToilets:(null==e||null===(E=e.applicationData)||void 0===E?void 0:E.proposedToilets)||"",proposedWaterClosets:(null==e||null===(S=e.applicationData)||void 0===S?void 0:S.proposedWaterClosets)||""}];const We=(null==e||null===(_=e.applicationData)||void 0===_||null===(f=_.connectionHolders)||void 0===f?void 0:f.length)>0?[{sameAsOwnerDetails:!1,uuid:null==e||null===(C=e.applicationData)||void 0===C||null===(g=C.connectionHolders)||void 0===g||null===(N=g[0])||void 0===N?void 0:N.uuid,name:(null==e||null===(y=e.applicationData)||void 0===y||null===(T=y.connectionHolders)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.name)||"",mobileNumber:(null==e||null===(A=e.applicationData)||void 0===A||null===(I=A.connectionHolders)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.mobileNumber)||"",emailId:(null==e||null===(O=e.applicationData)||void 0===O||null===(b=O.connectionHolders)||void 0===b||null===(L=b[0])||void 0===L?void 0:L.emailId)||"",guardian:(null==e||null===(R=e.applicationData)||void 0===R||null===(w=R.connectionHolders)||void 0===w||null===(W=w[0])||void 0===W?void 0:W.fatherOrHusbandName)||"",address:(null==e||null===(P=e.applicationData)||void 0===P||null===(M=P.connectionHolders)||void 0===M||null===(x=M[0])||void 0===x?void 0:x.correspondenceAddress)||"",gender:null!=e&&null!==(B=e.applicationData)&&void 0!==B&&null!==(F=B.connectionHolders)&&void 0!==F&&null!==(U=F[0])&&void 0!==U&&U.gender?{code:null==e||null===(k=e.applicationData)||void 0===k||null===(H=k.connectionHolders)||void 0===H||null===(j=H[0])||void 0===j?void 0:j.gender,i18nKey:null==e||null===(z=e.applicationData)||void 0===z||null===(V=z.connectionHolders)||void 0===V||null===(Y=V[0])||void 0===Y?void 0:Y.gender}:"",relationship:null!=e&&null!==(G=e.applicationData)&&void 0!==G&&null!==(q=G.connectionHolders)&&void 0!==q&&null!==(K=q[0])&&void 0!==K&&K.relationship?{code:null==e||null===(X=e.applicationData)||void 0===X||null===($=X.connectionHolders)||void 0===$||null===(Z=$[0])||void 0===Z?void 0:Z.relationship,i18nKey:null==e||null===(J=e.applicationData)||void 0===J||null===(Q=J.connectionHolders)||void 0===Q||null===(ee=Q[0])||void 0===ee?void 0:ee.relationship}:"",ownerType:null!=e&&null!==(ne=e.applicationData)&&void 0!==ne&&null!==(te=ne.connectionHolders)&&void 0!==te&&null!==(le=te[0])&&void 0!==le&&le.ownerType?{code:null==e||null===(oe=e.applicationData)||void 0===oe||null===(ie=oe.connectionHolders)||void 0===ie||null===(ae=ie[0])||void 0===ae?void 0:ae.ownerType,i18nKey:null==e||null===(re=e.applicationData)||void 0===re||null===(ue=re.connectionHolders)||void 0===ue||null===(de=ue[0])||void 0===de?void 0:de.ownerType}:"",documentId:"",documentType:"",file:""}]:[{sameAsOwnerDetails:!0,name:"",gender:"",mobileNumber:"",guardian:"",relationship:"",address:"",ownerType:"",documentId:"",documentType:"",file:""}];let Pe=[];null!=e&&null!==(se=e.applicationData)&&void 0!==se&&se.documents&&e.applicationData.documents.forEach(e=>{var n;Pe.push({active:!0,code:null==e?void 0:e.documentType,i18nKey:null==e||null===(n=e.documentType)||void 0===n?void 0:n.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,id:e.id,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId})});let Me={documents:Pe}||[],xe={};xe.details=(null==e?void 0:e.propertyDetails)||{};let Be={};const Fe=null!=e&&null!==(ce=e.applicationData)&&void 0!==ce&&ce.waterSource?s(null==e||null===(ve=e.applicationData)||void 0===ve||null===(pe=ve.waterSource)||void 0===pe?void 0:pe.toUpperCase()," ","_"):"",Ue=Fe?s(null==Fe?void 0:Fe.toUpperCase(),".","_"):"",ke="WATER"===n?{connectionType:null!=e&&null!==(me=e.applicationData)&&void 0!==me&&me.connectionType?{code:null==e||null===(Ee=e.applicationData)||void 0===Ee?void 0:Ee.connectionType,i18nKey:o("WS_CONNECTIONTYPE_"+s(null==e||null===(Se=e.applicationData)||void 0===Se||null===(_e=Se.connectionType)||void 0===_e?void 0:_e.toUpperCase()," ","_"))}:"",waterSource:null!=e&&null!==(fe=e.applicationData)&&void 0!==fe&&fe.waterSource?{code:null==e||null===(Ce=e.applicationData)||void 0===Ce?void 0:Ce.waterSource,i18nKey:o("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(ge=e.applicationData)||void 0===ge||null===(Ne=ge.waterSource)||void 0===Ne||null===(ye=Ne.split(".")[0])||void 0===ye?void 0:ye.toUpperCase()," ","_"))}:"",sourceSubData:null!=e&&null!==(Te=e.applicationData)&&void 0!==Te&&Te.waterSource?{code:null==e||null===(De=e.applicationData)||void 0===De?void 0:De.waterSource,i18nKey:o("WS_SERVICES_MASTERS_WATERSOURCE_"+Ue)}:"",pipeSize:null!=e&&null!==(Ae=e.applicationData)&&void 0!==Ae&&Ae.pipeSize?{code:null==e||null===(Ie=e.applicationData)||void 0===Ie?void 0:Ie.pipeSize,i18nKey:null==e||null===(he=e.applicationData)||void 0===he?void 0:he.pipeSize,size:null==e||null===(Oe=e.applicationData)||void 0===Oe?void 0:Oe.pipeSize}:"",noOfTaps:(null==e||null===(be=e.applicationData)||void 0===be?void 0:be.noOfTaps)||""}:{noOfWaterClosets:(null==e||null===(Le=e.applicationData)||void 0===Le?void 0:Le.noOfWaterClosets)||"",noOfToilets:(null==e||null===(Re=e.applicationData)||void 0===Re?void 0:Re.noOfToilets)||""};if(t){var He,je,ze,Ve,Ye,Ge,qe,Ke,Xe,$e,Ze,Je,Qe,en,nn,tn,ln,on,an,rn,un,dn,sn,cn,vn,pn,mn,En,Sn,_n,fn,Cn;const t=[{meterId:null!=e&&null!==(He=e.applicationData)&&void 0!==He&&He.meterId?Number(null==e||null===(je=e.applicationData)||void 0===je?void 0:je.meterId):"",meterInstallationDate:null!=e&&null!==(ze=e.applicationData)&&void 0!==ze&&ze.meterInstallationDate?v(null==e||null===(Ve=e.applicationData)||void 0===Ve?void 0:Ve.meterInstallationDate,!0):null,meterInitialReading:null!=e&&null!==(Ye=e.applicationData)&&void 0!==Ye&&null!==(Ge=Ye.additionalDetails)&&void 0!==Ge&&Ge.initialMeterReading?Number(null==e||null===(qe=e.applicationData)||void 0===qe||null===(Ke=qe.additionalDetails)||void 0===Ke?void 0:Ke.initialMeterReading):"",connectionExecutionDate:null!=e&&null!==(Xe=e.applicationData)&&void 0!==Xe&&Xe.connectionExecutionDate?v(null==e||null===($e=e.applicationData)||void 0===$e?void 0:$e.connectionExecutionDate,!0):null}];window.location.href.includes("modify-application-edit")&&(t[0].dateEffectiveFrom=null!=e&&null!==(Ze=e.applicationData)&&void 0!==Ze&&Ze.dateEffectiveFrom?v(null==e||null===(Je=e.applicationData)||void 0===Je?void 0:Je.dateEffectiveFrom,!0):null);const l=null!=e&&null!==(Qe=e.applicationData)&&void 0!==Qe&&Qe.waterSource?s(null==e||null===(en=e.applicationData)||void 0===en||null===(nn=en.waterSource)||void 0===nn?void 0:nn.toUpperCase()," ","_"):"",i=l?s(null==l?void 0:l.toUpperCase(),".","_"):"",a="WATER"===n?{connectionType:null!=e&&null!==(tn=e.applicationData)&&void 0!==tn&&tn.connectionType?{code:null==e||null===(ln=e.applicationData)||void 0===ln?void 0:ln.connectionType,i18nKey:o("WS_CONNECTIONTYPE_"+s(null==e||null===(on=e.applicationData)||void 0===on||null===(an=on.connectionType)||void 0===an?void 0:an.toUpperCase()," ","_"))}:"",waterSource:null!=e&&null!==(rn=e.applicationData)&&void 0!==rn&&rn.waterSource?{code:null==e||null===(un=e.applicationData)||void 0===un?void 0:un.waterSource,i18nKey:o("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(dn=e.applicationData)||void 0===dn||null===(sn=dn.waterSource)||void 0===sn||null===(cn=sn.split(".")[0])||void 0===cn?void 0:cn.toUpperCase()," ","_"))}:"",sourceSubData:null!=e&&null!==(vn=e.applicationData)&&void 0!==vn&&vn.waterSource?{code:null==e||null===(pn=e.applicationData)||void 0===pn?void 0:pn.waterSource,i18nKey:o("WS_SERVICES_MASTERS_WATERSOURCE_"+i)}:"",pipeSize:null!=e&&null!==(mn=e.applicationData)&&void 0!==mn&&mn.pipeSize?{code:null==e||null===(En=e.applicationData)||void 0===En?void 0:En.pipeSize,i18nKey:null==e||null===(Sn=e.applicationData)||void 0===Sn?void 0:Sn.pipeSize}:"",noOfTaps:(null==e||null===(_n=e.applicationData)||void 0===_n?void 0:_n.noOfTaps)||""}:{noOfWaterClosets:(null==e||null===(fn=e.applicationData)||void 0===fn?void 0:fn.noOfWaterClosets)||"",noOfToilets:(null==e||null===(Cn=e.applicationData)||void 0===Cn?void 0:Cn.noOfToilets)||""};Me=window.location.href.includes("modify-application-edit")?{documents:Pe}:{documents:[]},Be={ConnectionDetails:we,connectionDetails:[a],ConnectionHolderDetails:We,activationDetails:t,DocumentsRequired:Me,cpt:xe,InfoLabel:"InfoLabel"}}else{var gn,Nn,yn,Tn,Dn,An,In,hn,On,bn,Ln,Rn,wn,Wn,Pn,Mn,xn;Be={ConnectionDetails:we,ConnectionHolderDetails:We,DocumentsRequired:Me,cpt:xe,InfoLabel:"InfoLabel"};let n=[{detailsProvidedBy:null!=e&&null!==(gn=e.applicationData)&&void 0!==gn&&null!==(Nn=gn.additionalDetails)&&void 0!==Nn&&Nn.detailsProvidedBy?{i18nKey:null==e||null===(yn=e.applicationData)||void 0===yn||null===(Tn=yn.additionalDetails)||void 0===Tn?void 0:Tn.detailsProvidedBy,code:null==e||null===(Dn=e.applicationData)||void 0===Dn||null===(An=Dn.additionalDetails)||void 0===An?void 0:An.detailsProvidedBy,size:null==e||null===(In=e.applicationData)||void 0===In||null===(hn=In.additionalDetails)||void 0===hn?void 0:hn.detailsProvidedBy}:"",plumberName:null==e||null===(On=e.applicationData)||void 0===On||null===(bn=On.plumberInfo)||void 0===bn?void 0:bn[0].name,plumberMobileNo:null==e||null===(Ln=e.applicationData)||void 0===Ln||null===(Rn=Ln.plumberInfo)||void 0===Rn?void 0:Rn[0].mobileNumber,plumberLicenseNo:null==e||null===(wn=e.applicationData)||void 0===wn||null===(Wn=wn.plumberInfo)||void 0===Wn?void 0:Wn[0].licenseNo}],t=null!=e&&null!==(Pn=e.applicationData)&&void 0!==Pn&&Pn.roadCuttingInfo?null==e||null===(Mn=e.applicationData)||void 0===Mn||null===(xn=Mn.roadCuttingInfo)||void 0===xn?void 0:xn.map((e,n)=>e.id?{key:n+"_"+Date.now(),id:null==e?void 0:e.id,roadType:{i18nKey:"WS_ROADTYPE_"+(null==e?void 0:e.roadType),code:null==e?void 0:e.roadType},area:null==e?void 0:e.roadCuttingArea,status:null==e?void 0:e.status}:{key:n+"_"+Date.now(),roadType:{i18nKey:"WS_ROADTYPE_"+(null==e?void 0:e.roadType),code:null==e?void 0:e.roadType},area:null==e?void 0:e.roadCuttingArea,status:null==e?void 0:e.status}):[{key:"99999_"+Date.now(),id:null,roadType:{i18nKey:"",code:""},area:"",status:""}];l&&(Be.connectionDetails=[ke],Be.plumberDetails=n,Be.roadCuttingDetails=t)}return sessionStorage.setItem("Digit.PT_CREATE_EMP_WS_NEW_FORM",JSON.stringify(Be)),sessionStorage.setItem("WS_EDIT_APPLICATION_DETAILS",JSON.stringify(e)),Be},O=function(e,n,t,l){var o,i,a,r,u,d;void 0===t&&(t=!1);let s=[{consumerNumber:null==e||null===(o=e.applicationData)||void 0===o?void 0:o.applicationNo,disConnectionType:null!=e&&null!==(i=e.applicationData)&&void 0!==i&&i.isDisconnectionTemporary?"TEMPORARY":"PERMANENT",disConnectionReason:(null==e||null===(a=e.applicationData)||void 0===a?void 0:a.disconnectionReason)||"",disConnectionProposeDate:null!=e&&null!==(r=e.applicationData)&&void 0!==r&&r.dateEffectiveFrom?v(null==e||null===(u=e.applicationData)||void 0===u?void 0:u.dateEffectiveFrom,!0):null}],c=[];null!=e&&null!==(d=e.applicationData)&&void 0!==d&&d.documents&&e.applicationData.documents.forEach(e=>{var n;c.push({active:!0,code:null==e?void 0:e.documentType,i18nKey:null==e||null===(n=e.documentType)||void 0===n?void 0:n.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,id:e.id,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId})});let p={documents:c},m={};if(m.disConnectionDetails=s,m.DocumentsRequired=p,t){var E,S,_,f,C,g,N,y,T,D,A,I,h,O,b;let n=[{detailsProvidedBy:null!=e&&null!==(E=e.applicationData)&&void 0!==E&&null!==(S=E.additionalDetails)&&void 0!==S&&S.detailsProvidedBy?{i18nKey:null==e||null===(_=e.applicationData)||void 0===_||null===(f=_.additionalDetails)||void 0===f?void 0:f.detailsProvidedBy,code:null==e||null===(C=e.applicationData)||void 0===C||null===(g=C.additionalDetails)||void 0===g?void 0:g.detailsProvidedBy,size:null==e||null===(N=e.applicationData)||void 0===N||null===(y=N.additionalDetails)||void 0===y?void 0:y.detailsProvidedBy}:"",plumberName:null==e||null===(T=e.applicationData)||void 0===T||null===(D=T.plumberInfo)||void 0===D?void 0:D[0].name,plumberMobileNo:null==e||null===(A=e.applicationData)||void 0===A||null===(I=A.plumberInfo)||void 0===I?void 0:I[0].mobileNumber,plumberLicenseNo:null==e||null===(h=e.applicationData)||void 0===h||null===(O=h.plumberInfo)||void 0===O?void 0:O[0].licenseNo,applicationNo:null==e||null===(b=e.applicationData)||void 0===b?void 0:b.applicationNo}];m.plumberDetails=n}return sessionStorage.setItem("Digit.PT_CREATE_EMP_WS_NEW_FORM",JSON.stringify(m)),sessionStorage.setItem("WS_EDIT_APPLICATION_DETAILS",JSON.stringify(e)),m},b=function(e,n,t){try{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f;const C=sessionStorage.getItem("DISCONNECTION_EDIT_DOCS"),g=C?JSON.parse(C):"",N=[];null==g||g.map(e=>{var t,l,o,i;const a=null==n||null===(t=n.applicationData)||void 0===t||null===(l=t.documents)||void 0===l?void 0:l.filter(n=>{var t,l,o,i,a,r,u,d;return(null==n||null===(t=n.documentType)||void 0===t||null===(l=t.split("."))||void 0===l?void 0:l[0])+"."+(null==n||null===(o=n.documentType)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i[1])==(null==e||null===(a=e.documentType)||void 0===a||null===(r=a.split("."))||void 0===r?void 0:r[0])+"."+(null==e||null===(u=e.documentType)||void 0===u||null===(d=u.split("."))||void 0===d?void 0:d[1])});let r=(null==a?void 0:a.length)>0?{auditDetails:null,documentType:null==e?void 0:e.documentType,documentUid:null==a||null===(o=a[0])||void 0===o?void 0:o.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==a||null===(i=a[0])||void 0===i?void 0:i.id,status:"ACTIVE"}:e;N.push(r)});const y=[{licenseNo:null==e||null===(l=e.plumberDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.plumberLicenseNo,mobileNumber:null==e||null===(i=e.plumberDetails)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.plumberMobileNo,name:null==e||null===(r=e.plumberDetails)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.plumberName,id:null==n||null===(d=n.applicationData)||void 0===d||null===(s=d.plumberInfo)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.id}],T=(null==e||null===(v=e.disConnectionDetails)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.disConnectionReason)||"",D="TEMPORARY"==(null==e||null===(m=e.disConnectionDetails)||void 0===m||null===(E=m[0])||void 0===E?void 0:E.disConnectionType),A=(null==N?void 0:N.length)>0?N:null==e||null===(S=e.DocumentsRequired)||void 0===S?void 0:S.documents;return Promise.resolve(L(null==e||null===(_=e.disConnectionDetails)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.disConnectionProposeDate)).then(function(l){var o,i,a;let r={...n.applicationData,documents:A,isDisconnectionTemporary:D,disconnectionReason:T,dateEffectiveFrom:l,processInstance:{action:t||"RESUBMIT_APPLICATION"},action:t||"RESUBMIT_APPLICATION"};var u,d,s,c,v,p;return null!=e&&null!==(o=e.plumberDetails)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&null!==(a=i.detailsProvidedBy)&&void 0!==a&&a.code&&(r.additionalDetails.detailsProvidedBy=null==e||null===(u=e.plumberDetails)||void 0===u||null===(d=u[0])||void 0===d||null===(s=d.detailsProvidedBy)||void 0===s?void 0:s.code,"ULB"==(null==e||null===(c=e.plumberDetails)||void 0===c||null===(v=c[0])||void 0===v||null===(p=v.detailsProvidedBy)||void 0===p?void 0:p.code)&&(r.plumberInfo=y)),r})}catch(e){return Promise.reject(e)}},L=function(e){try{const n=null==e?void 0:e.split("-"),t=null==n?void 0:n.reverse(),l=null==t?void 0:t.join("-");let o=s(l,"/","-"),i="";return i=o.split("-")[2]>1900?o.split("-")[2]+"-"+o.split("-")[1]+"-"+o.split("-")[0]:o.split("-")[0]+"-"+o.split("-")[2]+"-"+o.split("-")[1],Promise.resolve(S(i))}catch(e){return Promise.reject(e)}},R=function(e,n,t){void 0===t&&(t="INITIATE");try{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,R,w,W,P,M,x,B,F,U,k,H,j,z,V;function Y(){var l,o,i,a;function r(){function l(){var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w;return G.documents=null!=e&&null!==(l=e.DocumentsRequired)&&void 0!==l&&null!==(o=l.documents)&&void 0!==o&&o.length?null==e||null===(i=e.DocumentsRequired)||void 0===i?void 0:i.documents:null,null!=e&&null!==(a=e.ConnectionHolderDetails)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.sameAsOwnerDetails||(G.connectionHolders=[{...null==n||null===(s=n.applicationData)||void 0===s||null===(c=s.connectionHolders)||void 0===c?void 0:c[0],correspondenceAddress:(null==e||null===(v=e.ConnectionHolderDetails)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.address)||"",fatherOrHusbandName:(null==e||null===(m=e.ConnectionHolderDetails)||void 0===m||null===(E=m[0])||void 0===E?void 0:E.guardian)||"",gender:(null==e||null===(S=e.ConnectionHolderDetails)||void 0===S||null===(_=S[0])||void 0===_||null===(f=_.gender)||void 0===f?void 0:f.code)||"",mobileNumber:(null==e||null===(C=e.ConnectionHolderDetails)||void 0===C||null===(g=C[0])||void 0===g?void 0:g.mobileNumber)||"",name:(null==e||null===(N=e.ConnectionHolderDetails)||void 0===N||null===(y=N[0])||void 0===y?void 0:y.name)||"",emailId:(null==e||null===(T=e.ConnectionHolderDetails)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.emailId)||"",ownerType:(null==e||null===(A=e.ConnectionHolderDetails)||void 0===A||null===(I=A[0])||void 0===I||null===(h=I.ownerType)||void 0===h?void 0:h.code)||"",relationship:(null==e||null===(O=e.ConnectionHolderDetails)||void 0===O||null===(b=O[0])||void 0===b||null===(L=b.relationship)||void 0===L?void 0:L.code)||"",sameAsPropertyAddress:null==e||null===(R=e.ConnectionHolderDetails)||void 0===R||null===(w=R[0])||void 0===w?void 0:w.sameAsOwnerDetails}]),G.processInstance={action:t},G.action=t,G.channel="CFC_COUNTER",sessionStorage.setItem("WS_DOCUMENTS_INOF",JSON.stringify((null==e||null===(u=e.DocumentsRequired)||void 0===u?void 0:u.documents)||[])),sessionStorage.setItem("WS_PROPERTY_INOF",JSON.stringify(null==e||null===(d=e.cpt)||void 0===d?void 0:d.details)),G}const o=function(n,t,l,o){if(null!=e&&null!==(n=e.activationDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.dateEffectiveFrom)return Promise.resolve(L(null==e||null===(l=e.activationDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.dateEffectiveFrom)).then(function(e){G.dateEffectiveFrom=e})}();return o&&o.then?o.then(l):l()}null!=e&&null!==(l=e.activationDetails)&&void 0!==l&&null!==(o=l[0])&&void 0!==o&&o.meterInitialReading&&(G.additionalDetails.initialMeterReading=null==e||null===(i=e.activationDetails)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.meterInitialReading);const u=function(n,t,l,o){if(null!=e&&null!==(n=e.activationDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.connectionExecutionDate)return Promise.resolve(L(null==e||null===(l=e.activationDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.connectionExecutionDate)).then(function(e){G.connectionExecutionDate=e})}();return u&&u.then?u.then(r):r()}null==e||null===(l=e.cpt)||void 0===l||null===(o=l.details)||void 0===o||null===(i=o.owners)||void 0===i||i.forEach(e=>{null!=e&&e.permanentAddress&&(e.correspondenceAddress=null==e?void 0:e.permanentAddress)});let G={...n.applicationData};null!=e&&null!==(a=e.cpt)&&void 0!==a&&null!==(r=a.details)&&void 0!==r&&r.propertyId&&(G.propertyId=null==e||null===(u=e.cpt)||void 0===u||null===(d=u.details)||void 0===d?void 0:d.propertyId),null!=e&&null!==(s=e.connectionDetails)&&void 0!==s&&null!==(c=s[0])&&void 0!==c&&null!==(v=c.connectionType)&&void 0!==v&&v.code&&(G.connectionType=null==e||null===(p=e.connectionDetails)||void 0===p||null===(m=p[0])||void 0===m||null===(E=m.connectionType)||void 0===E?void 0:E.code),null!=e&&null!==(S=e.connectionDetails)&&void 0!==S&&null!==(_=S[0])&&void 0!==_&&null!==(f=_.waterSource)&&void 0!==f&&f.code&&(G.waterSource=null==e||null===(C=e.connectionDetails)||void 0===C||null===(g=C[0])||void 0===g||null===(N=g.waterSource)||void 0===N?void 0:N.code),null!=e&&null!==(y=e.connectionDetails)&&void 0!==y&&null!==(T=y[0])&&void 0!==T&&null!==(D=T.pipeSize)&&void 0!==D&&D.size&&(G.pipeSize=null==e||null===(A=e.connectionDetails)||void 0===A||null===(I=A[0])||void 0===I||null===(h=I.pipeSize)||void 0===h?void 0:h.size),null!=e&&null!==(O=e.connectionDetails)&&void 0!==O&&null!==(b=O[0])&&void 0!==b&&b.noOfTaps&&(G.noOfTaps=null==e||null===(R=e.connectionDetails)||void 0===R||null===(w=R[0])||void 0===w?void 0:w.noOfTaps),null!=e&&null!==(W=e.connectionDetails)&&void 0!==W&&null!==(P=W[0])&&void 0!==P&&P.noOfWaterClosets&&(G.noOfWaterClosets=null==e||null===(M=e.connectionDetails)||void 0===M||null===(x=M[0])||void 0===x?void 0:x.noOfWaterClosets),null!=e&&null!==(B=e.connectionDetails)&&void 0!==B&&null!==(F=B[0])&&void 0!==F&&F.noOfToilets&&(G.noOfToilets=null==e||null===(U=e.connectionDetails)||void 0===U||null===(k=U[0])||void 0===k?void 0:k.noOfToilets),null!=e&&null!==(H=e.activationDetails)&&void 0!==H&&null!==(j=H[0])&&void 0!==j&&j.meterId&&(G.meterId=null==e||null===(z=e.activationDetails)||void 0===z||null===(V=z[0])||void 0===V?void 0:V.meterId);const q=function(n,t,l,o){if(null!=e&&null!==(n=e.activationDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.meterInstallationDate)return Promise.resolve(L(null==e||null===(l=e.activationDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.meterInstallationDate)).then(function(e){G.meterInstallationDate=e})}();return Promise.resolve(q&&q.then?q.then(Y):Y())}catch(e){return Promise.reject(e)}},w=e=>{var n,t;const l=Digit.UserService.getUser();return(null!=l&&null!==(n=l.info)&&void 0!==n&&n.roles?null==l||null===(t=l.info)||void 0===t?void 0:t.roles.map(e=>e.code):[]).indexOf(e)>-1};var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(e,n){return e(n={exports:{}},n.exports),n.exports}var M=P(function(e,n){(function(){var t="Expected a function",l="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",a="[object Array]",r="[object Boolean]",u="[object Date]",d="[object Error]",s="[object Function]",c="[object GeneratorFunction]",v="[object Map]",p="[object Number]",m="[object Object]",E="[object RegExp]",S="[object Set]",_="[object String]",f="[object Symbol]",C="[object WeakMap]",g="[object ArrayBuffer]",N="[object DataView]",y="[object Float32Array]",T="[object Float64Array]",D="[object Int8Array]",A="[object Int16Array]",I="[object Int32Array]",h="[object Uint8Array]",O="[object Uint16Array]",b="[object Uint32Array]",L=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,w=/(__e\(.*?\)|\b__t\)) \+\n'';/g,P=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,x=RegExp(P.source),B=RegExp(M.source),F=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,k=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(V.source),G=/^\s+/,q=/\s/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/[()=,{}\[\]\/\s]/,Q=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,ie=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,de=/['\n\r\u2028\u2029\\]/g,se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="["+ce+"]",pe="["+se+"]",me="\\d+",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",Se="[^\\ud800-\\udfff"+ce+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",fe="[^\\ud800-\\udfff]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ye="(?:"+Ee+"|"+Se+")",Te="(?:"+Ne+"|"+Se+")",De="(?:"+pe+"|"+_e+")?",Ae="[\\ufe0e\\ufe0f]?"+De+"(?:\\u200d(?:"+[fe,Ce,ge].join("|")+")[\\ufe0e\\ufe0f]?"+De+")*",Ie="(?:"+["[\\u2700-\\u27bf]",Ce,ge].join("|")+")"+Ae,he="(?:"+[fe+pe+"?",pe,Ce,ge,"[\\ud800-\\udfff]"].join("|")+")",Oe=RegExp("['’]","g"),be=RegExp(pe,"g"),Le=RegExp(_e+"(?="+_e+")|"+he+Ae,"g"),Re=RegExp([Ne+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ve,Ne,"$"].join("|")+")",Te+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ve,Ne+ye,"$"].join("|")+")",Ne+"?"+ye+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ne+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Ie].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+se+"\\ufe0e\\ufe0f]"),We=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,xe={};xe[y]=xe[T]=xe[D]=xe[A]=xe[I]=xe[h]=xe["[object Uint8ClampedArray]"]=xe[O]=xe[b]=!0,xe[i]=xe[a]=xe[g]=xe[r]=xe[N]=xe[u]=xe[d]=xe[s]=xe[v]=xe[p]=xe[m]=xe[E]=xe[S]=xe[_]=xe[C]=!1;var Be={};Be[i]=Be[a]=Be[g]=Be[N]=Be[r]=Be[u]=Be[y]=Be[T]=Be[D]=Be[A]=Be[I]=Be[v]=Be[p]=Be[m]=Be[E]=Be[S]=Be[_]=Be[f]=Be[h]=Be["[object Uint8ClampedArray]"]=Be[O]=Be[b]=!0,Be[d]=Be[s]=Be[C]=!1;var Fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ue=parseFloat,ke=parseInt,He="object"==typeof W&&W&&W.Object===Object&&W,je="object"==typeof self&&self&&self.Object===Object&&self,ze=He||je||Function("return this")(),Ve=n&&!n.nodeType&&n,Ye=Ve&&e&&!e.nodeType&&e,Ge=Ye&&Ye.exports===Ve,qe=Ge&&He.process,Ke=function(){try{return Ye&&Ye.require&&Ye.require("util").types||qe&&qe.binding&&qe.binding("util")}catch(e){}}(),Xe=Ke&&Ke.isArrayBuffer,$e=Ke&&Ke.isDate,Ze=Ke&&Ke.isMap,Je=Ke&&Ke.isRegExp,Qe=Ke&&Ke.isSet,en=Ke&&Ke.isTypedArray;function nn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function tn(e,n,t,l){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];n(l,a,t(a),e)}return l}function ln(e,n){for(var t=-1,l=null==e?0:e.length;++t<l&&!1!==n(e[t],t,e););return e}function on(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function an(e,n){for(var t=-1,l=null==e?0:e.length;++t<l;)if(!n(e[t],t,e))return!1;return!0}function rn(e,n){for(var t=-1,l=null==e?0:e.length,o=0,i=[];++t<l;){var a=e[t];n(a,t,e)&&(i[o++]=a)}return i}function un(e,n){return!(null==e||!e.length)&&fn(e,n,0)>-1}function dn(e,n,t){for(var l=-1,o=null==e?0:e.length;++l<o;)if(t(n,e[l]))return!0;return!1}function sn(e,n){for(var t=-1,l=null==e?0:e.length,o=Array(l);++t<l;)o[t]=n(e[t],t,e);return o}function cn(e,n){for(var t=-1,l=n.length,o=e.length;++t<l;)e[o+t]=n[t];return e}function vn(e,n,t,l){var o=-1,i=null==e?0:e.length;for(l&&i&&(t=e[++o]);++o<i;)t=n(t,e[o],o,e);return t}function pn(e,n,t,l){var o=null==e?0:e.length;for(l&&o&&(t=e[--o]);o--;)t=n(t,e[o],o,e);return t}function mn(e,n){for(var t=-1,l=null==e?0:e.length;++t<l;)if(n(e[t],t,e))return!0;return!1}var En=yn("length");function Sn(e,n,t){var l;return t(e,function(e,t,o){if(n(e,t,o))return l=t,!1}),l}function _n(e,n,t,l){for(var o=e.length,i=t+(l?1:-1);l?i--:++i<o;)if(n(e[i],i,e))return i;return-1}function fn(e,n,t){return n==n?function(e,n,t){for(var l=t-1,o=e.length;++l<o;)if(e[l]===n)return l;return-1}(e,n,t):_n(e,gn,t)}function Cn(e,n,t,l){for(var o=t-1,i=e.length;++o<i;)if(l(e[o],n))return o;return-1}function gn(e){return e!=e}function Nn(e,n){var t=null==e?0:e.length;return t?An(e,n)/t:NaN}function yn(e){return function(n){return null==n?void 0:n[e]}}function Tn(e){return function(n){return null==e?void 0:e[n]}}function Dn(e,n,t,l,o){return o(e,function(e,o,i){t=l?(l=!1,e):n(t,e,o,i)}),t}function An(e,n){for(var t,l=-1,o=e.length;++l<o;){var i=n(e[l]);void 0!==i&&(t=void 0===t?i:t+i)}return t}function In(e,n){for(var t=-1,l=Array(e);++t<e;)l[t]=n(t);return l}function hn(e){return e?e.slice(0,Yn(e)+1).replace(G,""):e}function On(e){return function(n){return e(n)}}function bn(e,n){return sn(n,function(n){return e[n]})}function Ln(e,n){return e.has(n)}function Rn(e,n){for(var t=-1,l=e.length;++t<l&&fn(n,e[t],0)>-1;);return t}function wn(e,n){for(var t=e.length;t--&&fn(n,e[t],0)>-1;);return t}function Wn(e,n){for(var t=e.length,l=0;t--;)e[t]===n&&++l;return l}var Pn=Tn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Mn=Tn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xn(e){return"\\"+Fe[e]}function Bn(e){return we.test(e)}function Fn(e){var n=-1,t=Array(e.size);return e.forEach(function(e,l){t[++n]=[l,e]}),t}function Un(e,n){return function(t){return e(n(t))}}function kn(e,n){for(var t=-1,o=e.length,i=0,a=[];++t<o;){var r=e[t];r!==n&&r!==l||(e[t]=l,a[i++]=t)}return a}function Hn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function jn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function zn(e){return Bn(e)?function(e){for(var n=Le.lastIndex=0;Le.test(e);)++n;return n}(e):En(e)}function Vn(e){return Bn(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}function Yn(e){for(var n=e.length;n--&&q.test(e.charAt(n)););return n}var Gn=Tn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qn=function e(n){var W,q=(n=null==n?ze:qn.defaults(ze.Object(),n,qn.pick(ze,Pe))).Array,se=n.Date,ce=n.Error,ve=n.Function,pe=n.Math,me=n.Object,Ee=n.RegExp,Se=n.String,_e=n.TypeError,fe=q.prototype,Ce=me.prototype,ge=n["__core-js_shared__"],Ne=ve.prototype.toString,ye=Ce.hasOwnProperty,Te=0,De=(W=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Ae=Ce.toString,Ie=Ne.call(me),he=ze._,Le=Ee("^"+Ne.call(ye).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),we=Ge?n.Buffer:void 0,Fe=n.Symbol,He=n.Uint8Array,je=we?we.allocUnsafe:void 0,Ve=Un(me.getPrototypeOf,me),Ye=me.create,qe=Ce.propertyIsEnumerable,Ke=fe.splice,En=Fe?Fe.isConcatSpreadable:void 0,Tn=Fe?Fe.iterator:void 0,Kn=Fe?Fe.toStringTag:void 0,Xn=function(){try{var e=Qo(me,"defineProperty");return e({},"",{}),e}catch(e){}}(),$n=n.clearTimeout!==ze.clearTimeout&&n.clearTimeout,Zn=se&&se.now!==ze.Date.now&&se.now,Jn=n.setTimeout!==ze.setTimeout&&n.setTimeout,Qn=pe.ceil,et=pe.floor,nt=me.getOwnPropertySymbols,tt=we?we.isBuffer:void 0,lt=n.isFinite,ot=fe.join,it=Un(me.keys,me),at=pe.max,rt=pe.min,ut=se.now,dt=n.parseInt,st=pe.random,ct=fe.reverse,vt=Qo(n,"DataView"),pt=Qo(n,"Map"),mt=Qo(n,"Promise"),Et=Qo(n,"Set"),St=Qo(n,"WeakMap"),_t=Qo(me,"create"),ft=St&&new St,Ct={},gt=Oi(vt),Nt=Oi(pt),yt=Oi(mt),Tt=Oi(Et),Dt=Oi(St),At=Fe?Fe.prototype:void 0,It=At?At.valueOf:void 0,ht=At?At.toString:void 0;function Ot(e){if(Ya(e)&&!Pa(e)&&!(e instanceof wt)){if(e instanceof Rt)return e;if(ye.call(e,"__wrapped__"))return bi(e)}return new Rt(e)}var bt=function(){function e(){}return function(n){if(!Va(n))return{};if(Ye)return Ye(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function Lt(){}function Rt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=void 0}function wt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Wt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function Pt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function Mt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function xt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new Mt;++n<t;)this.add(e[n])}function Bt(e){var n=this.__data__=new Pt(e);this.size=n.size}function Ft(e,n){var t=Pa(e),l=!t&&Wa(e),o=!t&&!l&&Fa(e),i=!t&&!l&&!o&&Qa(e),a=t||l||o||i,r=a?In(e.length,Se):[],u=r.length;for(var d in e)!n&&!ye.call(e,d)||a&&("length"==d||o&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ai(d,u))||r.push(d);return r}function Ut(e){var n=e.length;return n?e[Ml(0,n-1)]:void 0}function kt(e,n){return Ti(_o(e),Xt(n,0,e.length))}function Ht(e){return Ti(_o(e))}function jt(e,n,t){(void 0!==t&&!La(e[n],t)||void 0===t&&!(n in e))&&qt(e,n,t)}function zt(e,n,t){var l=e[n];ye.call(e,n)&&La(l,t)&&(void 0!==t||n in e)||qt(e,n,t)}function Vt(e,n){for(var t=e.length;t--;)if(La(e[t][0],n))return t;return-1}function Yt(e,n,t,l){return el(e,function(e,o,i){n(l,e,t(e),i)}),l}function Gt(e,n){return e&&fo(n,Nr(n),e)}function qt(e,n,t){"__proto__"==n&&Xn?Xn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Kt(e,n){for(var t=-1,l=n.length,o=q(l),i=null==e;++t<l;)o[t]=i?void 0:Sr(e,n[t]);return o}function Xt(e,n,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==n&&(e=e>=n?e:n)),e}function $t(e,n,t,l,o,a){var d,C=1&n,L=2&n,R=4&n;if(t&&(d=o?t(e,l,o,a):t(e)),void 0!==d)return d;if(!Va(e))return e;var w=Pa(e);if(w){if(d=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&ye.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(e),!C)return _o(e,d)}else{var W=ti(e),P=W==s||W==c;if(Fa(e))return co(e,C);if(W==m||W==i||P&&!o){if(d=L||P?{}:oi(e),!C)return L?function(e,n){return fo(e,ni(e),n)}(e,function(e,n){return e&&fo(n,yr(n),e)}(d,e)):function(e,n){return fo(e,ei(e),n)}(e,Gt(d,e))}else{if(!Be[W])return o?e:{};d=function(e,n,t){var l=e.constructor;switch(n){case g:return vo(e);case r:case u:return new l(+e);case N:return function(e,n){var t=n?vo(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case y:case T:case D:case A:case I:case h:case"[object Uint8ClampedArray]":case O:case b:return po(e,t);case v:return new l;case p:case _:return new l(e);case E:return function(e){var n=new e.constructor(e.source,ne.exec(e));return n.lastIndex=e.lastIndex,n}(e);case S:return new l;case f:return It?me(It.call(e)):{}}}(e,W,C)}}a||(a=new Bt);var M=a.get(e);if(M)return M;a.set(e,d),$a(e)?e.forEach(function(l){d.add($t(l,n,t,l,e,a))}):Ga(e)&&e.forEach(function(l,o){d.set(o,$t(l,n,t,o,e,a))});var x=w?void 0:(R?L?Go:Yo:L?yr:Nr)(e);return ln(x||e,function(l,o){x&&(l=e[o=l]),zt(d,o,$t(l,n,t,o,e,a))}),d}function Zt(e,n,t){var l=t.length;if(null==e)return!l;for(e=me(e);l--;){var o=t[l],i=e[o];if(void 0===i&&!(o in e)||!(0,n[o])(i))return!1}return!0}function Jt(e,n,l){if("function"!=typeof e)throw new _e(t);return Ci(function(){e.apply(void 0,l)},n)}function Qt(e,n,t,l){var o=-1,i=un,a=!0,r=e.length,u=[],d=n.length;if(!r)return u;t&&(n=sn(n,On(t))),l?(i=dn,a=!1):n.length>=200&&(i=Ln,a=!1,n=new xt(n));e:for(;++o<r;){var s=e[o],c=null==t?s:t(s);if(s=l||0!==s?s:0,a&&c==c){for(var v=d;v--;)if(n[v]===c)continue e;u.push(s)}else i(n,c,l)||u.push(s)}return u}Ot.templateSettings={escape:F,evaluate:U,interpolate:k,variable:"",imports:{_:Ot}},(Ot.prototype=Lt.prototype).constructor=Ot,(Rt.prototype=bt(Lt.prototype)).constructor=Rt,(wt.prototype=bt(Lt.prototype)).constructor=wt,Wt.prototype.clear=function(){this.__data__=_t?_t(null):{},this.size=0},Wt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Wt.prototype.get=function(e){var n=this.__data__;if(_t){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return ye.call(n,e)?n[e]:void 0},Wt.prototype.has=function(e){var n=this.__data__;return _t?void 0!==n[e]:ye.call(n,e)},Wt.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=_t&&void 0===n?"__lodash_hash_undefined__":n,this},Pt.prototype.clear=function(){this.__data__=[],this.size=0},Pt.prototype.delete=function(e){var n=this.__data__,t=Vt(n,e);return!(t<0||(t==n.length-1?n.pop():Ke.call(n,t,1),--this.size,0))},Pt.prototype.get=function(e){var n=this.__data__,t=Vt(n,e);return t<0?void 0:n[t][1]},Pt.prototype.has=function(e){return Vt(this.__data__,e)>-1},Pt.prototype.set=function(e,n){var t=this.__data__,l=Vt(t,e);return l<0?(++this.size,t.push([e,n])):t[l][1]=n,this},Mt.prototype.clear=function(){this.size=0,this.__data__={hash:new Wt,map:new(pt||Pt),string:new Wt}},Mt.prototype.delete=function(e){var n=Zo(this,e).delete(e);return this.size-=n?1:0,n},Mt.prototype.get=function(e){return Zo(this,e).get(e)},Mt.prototype.has=function(e){return Zo(this,e).has(e)},Mt.prototype.set=function(e,n){var t=Zo(this,e),l=t.size;return t.set(e,n),this.size+=t.size==l?0:1,this},xt.prototype.add=xt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.clear=function(){this.__data__=new Pt,this.size=0},Bt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Bt.prototype.get=function(e){return this.__data__.get(e)},Bt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Pt){var l=t.__data__;if(!pt||l.length<199)return l.push([e,n]),this.size=++t.size,this;t=this.__data__=new Mt(l)}return t.set(e,n),this.size=t.size,this};var el=No(ul),nl=No(dl,!0);function tl(e,n){var t=!0;return el(e,function(e,l,o){return t=!!n(e,l,o)}),t}function ll(e,n,t){for(var l=-1,o=e.length;++l<o;){var i=e[l],a=n(i);if(null!=a&&(void 0===r?a==a&&!Ja(a):t(a,r)))var r=a,u=i}return u}function ol(e,n){var t=[];return el(e,function(e,l,o){n(e,l,o)&&t.push(e)}),t}function il(e,n,t,l,o){var i=-1,a=e.length;for(t||(t=ii),o||(o=[]);++i<a;){var r=e[i];n>0&&t(r)?n>1?il(r,n-1,t,l,o):cn(o,r):l||(o[o.length]=r)}return o}var al=yo(),rl=yo(!0);function ul(e,n){return e&&al(e,n,Nr)}function dl(e,n){return e&&rl(e,n,Nr)}function sl(e,n){return rn(n,function(n){return Ha(e[n])})}function cl(e,n){for(var t=0,l=(n=ao(n,e)).length;null!=e&&t<l;)e=e[hi(n[t++])];return t&&t==l?e:void 0}function vl(e,n,t){var l=n(e);return Pa(e)?l:cn(l,t(e))}function pl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Kn&&Kn in me(e)?function(e){var n=ye.call(e,Kn),t=e[Kn];try{e[Kn]=void 0;var l=!0}catch(e){}var o=Ae.call(e);return l&&(n?e[Kn]=t:delete e[Kn]),o}(e):function(e){return Ae.call(e)}(e)}function ml(e,n){return e>n}function El(e,n){return null!=e&&ye.call(e,n)}function Sl(e,n){return null!=e&&n in me(e)}function _l(e,n,t){for(var l=t?dn:un,o=e[0].length,i=e.length,a=i,r=q(i),u=Infinity,d=[];a--;){var s=e[a];a&&n&&(s=sn(s,On(n))),u=rt(s.length,u),r[a]=!t&&(n||o>=120&&s.length>=120)?new xt(a&&s):void 0}s=e[0];var c=-1,v=r[0];e:for(;++c<o&&d.length<u;){var p=s[c],m=n?n(p):p;if(p=t||0!==p?p:0,!(v?Ln(v,m):l(d,m,t))){for(a=i;--a;){var E=r[a];if(!(E?Ln(E,m):l(e[a],m,t)))continue e}v&&v.push(m),d.push(p)}}return d}function fl(e,n,t){var l=null==(e=Ei(e,n=ao(n,e)))?e:e[hi(ki(n))];return null==l?void 0:nn(l,e,t)}function Cl(e){return Ya(e)&&pl(e)==i}function gl(e,n,t,l,o){return e===n||(null==e||null==n||!Ya(e)&&!Ya(n)?e!=e&&n!=n:function(e,n,t,l,o,s){var c=Pa(e),C=Pa(n),y=c?a:ti(e),T=C?a:ti(n),D=(y=y==i?m:y)==m,A=(T=T==i?m:T)==m,I=y==T;if(I&&Fa(e)){if(!Fa(n))return!1;c=!0,D=!1}if(I&&!D)return s||(s=new Bt),c||Qa(e)?zo(e,n,t,l,o,s):function(e,n,t,l,o,i,a){switch(t){case N:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case g:return!(e.byteLength!=n.byteLength||!i(new He(e),new He(n)));case r:case u:case p:return La(+e,+n);case d:return e.name==n.name&&e.message==n.message;case E:case _:return e==n+"";case v:var s=Fn;case S:if(s||(s=Hn),e.size!=n.size&&!(1&l))return!1;var c=a.get(e);if(c)return c==n;l|=2,a.set(e,n);var m=zo(s(e),s(n),l,o,i,a);return a.delete(e),m;case f:if(It)return It.call(e)==It.call(n)}return!1}(e,n,y,t,l,o,s);if(!(1&t)){var h=D&&ye.call(e,"__wrapped__"),O=A&&ye.call(n,"__wrapped__");if(h||O){var b=h?e.value():e,L=O?n.value():n;return s||(s=new Bt),o(b,L,t,l,s)}}return!!I&&(s||(s=new Bt),function(e,n,t,l,o,i){var a=1&t,r=Yo(e),u=r.length;if(u!=Yo(n).length&&!a)return!1;for(var d=u;d--;){var s=r[d];if(!(a?s in n:ye.call(n,s)))return!1}var c=i.get(e),v=i.get(n);if(c&&v)return c==n&&v==e;var p=!0;i.set(e,n),i.set(n,e);for(var m=a;++d<u;){var E=e[s=r[d]],S=n[s];if(l)var _=a?l(S,E,s,n,e,i):l(E,S,s,e,n,i);if(!(void 0===_?E===S||o(E,S,t,l,i):_)){p=!1;break}m||(m="constructor"==s)}if(p&&!m){var f=e.constructor,C=n.constructor;f==C||!("constructor"in e)||!("constructor"in n)||"function"==typeof f&&f instanceof f&&"function"==typeof C&&C instanceof C||(p=!1)}return i.delete(e),i.delete(n),p}(e,n,t,l,o,s))}(e,n,t,l,gl,o))}function Nl(e,n,t,l){var o=t.length,i=o,a=!l;if(null==e)return!i;for(e=me(e);o--;){var r=t[o];if(a&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++o<i;){var u=(r=t[o])[0],d=e[u],s=r[1];if(a&&r[2]){if(void 0===d&&!(u in e))return!1}else{var c=new Bt;if(l)var v=l(d,s,u,e,n,c);if(!(void 0===v?gl(s,d,3,l,c):v))return!1}}return!0}function yl(e){return!(!Va(e)||(n=e,De&&De in n))&&(Ha(e)?Le:oe).test(Oi(e));var n}function Tl(e){return"function"==typeof e?e:null==e?qr:"object"==typeof e?Pa(e)?Ol(e[0],e[1]):hl(e):tu(e)}function Dl(e){if(!ci(e))return it(e);var n=[];for(var t in me(e))ye.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Al(e,n){return e<n}function Il(e,n){var t=-1,l=xa(e)?q(e.length):[];return el(e,function(e,o,i){l[++t]=n(e,o,i)}),l}function hl(e){var n=Jo(e);return 1==n.length&&n[0][2]?pi(n[0][0],n[0][1]):function(t){return t===e||Nl(t,e,n)}}function Ol(e,n){return ui(e)&&vi(n)?pi(hi(e),n):function(t){var l=Sr(t,e);return void 0===l&&l===n?_r(t,e):gl(n,l,3)}}function bl(e,n,t,l,o){e!==n&&al(n,function(i,a){if(o||(o=new Bt),Va(i))!function(e,n,t,l,o,i,a){var r=_i(e,t),u=_i(n,t),d=a.get(u);if(d)jt(e,t,d);else{var s=i?i(r,u,t+"",e,n,a):void 0,c=void 0===s;if(c){var v=Pa(u),p=!v&&Fa(u),m=!v&&!p&&Qa(u);s=u,v||p||m?Pa(r)?s=r:Ba(r)?s=_o(r):p?(c=!1,s=co(u,!0)):m?(c=!1,s=po(u,!0)):s=[]:Ka(u)||Wa(u)?(s=r,Wa(r)?s=rr(r):Va(r)&&!Ha(r)||(s=oi(u))):c=!1}c&&(a.set(u,s),o(s,u,l,i,a),a.delete(u)),jt(e,t,s)}}(e,n,a,t,bl,l,o);else{var r=l?l(_i(e,a),i,a+"",e,n,o):void 0;void 0===r&&(r=i),jt(e,a,r)}},yr)}function Ll(e,n){var t=e.length;if(t)return ai(n+=n<0?t:0,t)?e[n]:void 0}function Rl(e,n,t){n=n.length?sn(n,function(e){return Pa(e)?function(n){return cl(n,1===e.length?e[0]:e)}:e}):[qr];var l=-1;return n=sn(n,On($o())),function(e,n){var l=e.length;for(e.sort(function(e,n){return function(e,n,t){for(var l=-1,o=e.criteria,i=n.criteria,a=o.length,r=t.length;++l<a;){var u=mo(o[l],i[l]);if(u)return l>=r?u:u*("desc"==t[l]?-1:1)}return e.index-n.index}(e,n,t)});l--;)e[l]=e[l].value;return e}(Il(e,function(e,t,o){return{criteria:sn(n,function(n){return n(e)}),index:++l,value:e}}))}function wl(e,n,t){for(var l=-1,o=n.length,i={};++l<o;){var a=n[l],r=cl(e,a);t(r,a)&&kl(i,ao(a,e),r)}return i}function Wl(e,n,t,l){var o=l?Cn:fn,i=-1,a=n.length,r=e;for(e===n&&(n=_o(n)),t&&(r=sn(e,On(t)));++i<a;)for(var u=0,d=n[i],s=t?t(d):d;(u=o(r,s,u,l))>-1;)r!==e&&Ke.call(r,u,1),Ke.call(e,u,1);return e}function Pl(e,n){for(var t=e?n.length:0,l=t-1;t--;){var o=n[t];if(t==l||o!==i){var i=o;ai(o)?Ke.call(e,o,1):Jl(e,o)}}return e}function Ml(e,n){return e+et(st()*(n-e+1))}function xl(e,n){var t="";if(!e||n<1||n>9007199254740991)return t;do{n%2&&(t+=e),(n=et(n/2))&&(e+=e)}while(n);return t}function Bl(e,n){return gi(mi(e,n,qr),e+"")}function Fl(e){return Ut(Lr(e))}function Ul(e,n){var t=Lr(e);return Ti(t,Xt(n,0,t.length))}function kl(e,n,t,l){if(!Va(e))return e;for(var o=-1,i=(n=ao(n,e)).length,a=i-1,r=e;null!=r&&++o<i;){var u=hi(n[o]),d=t;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var s=r[u];void 0===(d=l?l(s,u,r):void 0)&&(d=Va(s)?s:ai(n[o+1])?[]:{})}zt(r,u,d),r=r[u]}return e}var Hl=ft?function(e,n){return ft.set(e,n),e}:qr,jl=Xn?function(e,n){return Xn(e,"toString",{configurable:!0,enumerable:!1,value:Vr(n),writable:!0})}:qr;function zl(e){return Ti(Lr(e))}function Vl(e,n,t){var l=-1,o=e.length;n<0&&(n=-n>o?0:o+n),(t=t>o?o:t)<0&&(t+=o),o=n>t?0:t-n>>>0,n>>>=0;for(var i=q(o);++l<o;)i[l]=e[l+n];return i}function Yl(e,n){var t;return el(e,function(e,l,o){return!(t=n(e,l,o))}),!!t}function Gl(e,n,t){var l=0,o=null==e?l:e.length;if("number"==typeof n&&n==n&&o<=2147483647){for(;l<o;){var i=l+o>>>1,a=e[i];null!==a&&!Ja(a)&&(t?a<=n:a<n)?l=i+1:o=i}return o}return ql(e,n,qr,t)}function ql(e,n,t,l){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(n=t(n))!=n,r=null===n,u=Ja(n),d=void 0===n;o<i;){var s=et((o+i)/2),c=t(e[s]),v=void 0!==c,p=null===c,m=c==c,E=Ja(c);if(a)var S=l||m;else S=d?m&&(l||v):r?m&&v&&(l||!p):u?m&&v&&!p&&(l||!E):!p&&!E&&(l?c<=n:c<n);S?o=s+1:i=s}return rt(i,4294967294)}function Kl(e,n){for(var t=-1,l=e.length,o=0,i=[];++t<l;){var a=e[t],r=n?n(a):a;if(!t||!La(r,u)){var u=r;i[o++]=0===a?0:a}}return i}function Xl(e){return"number"==typeof e?e:Ja(e)?NaN:+e}function $l(e){if("string"==typeof e)return e;if(Pa(e))return sn(e,$l)+"";if(Ja(e))return ht?ht.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Zl(e,n,t){var l=-1,o=un,i=e.length,a=!0,r=[],u=r;if(t)a=!1,o=dn;else if(i>=200){var d=n?null:Bo(e);if(d)return Hn(d);a=!1,o=Ln,u=new xt}else u=n?[]:r;e:for(;++l<i;){var s=e[l],c=n?n(s):s;if(s=t||0!==s?s:0,a&&c==c){for(var v=u.length;v--;)if(u[v]===c)continue e;n&&u.push(c),r.push(s)}else o(u,c,t)||(u!==r&&u.push(c),r.push(s))}return r}function Jl(e,n){return null==(e=Ei(e,n=ao(n,e)))||delete e[hi(ki(n))]}function Ql(e,n,t,l){return kl(e,n,t(cl(e,n)),l)}function eo(e,n,t,l){for(var o=e.length,i=l?o:-1;(l?i--:++i<o)&&n(e[i],i,e););return t?Vl(e,l?0:i,l?i+1:o):Vl(e,l?i+1:0,l?o:i)}function no(e,n){var t=e;return t instanceof wt&&(t=t.value()),vn(n,function(e,n){return n.func.apply(n.thisArg,cn([e],n.args))},t)}function to(e,n,t){var l=e.length;if(l<2)return l?Zl(e[0]):[];for(var o=-1,i=q(l);++o<l;)for(var a=e[o],r=-1;++r<l;)r!=o&&(i[o]=Qt(i[o]||a,e[r],n,t));return Zl(il(i,1),n,t)}function lo(e,n,t){for(var l=-1,o=e.length,i=n.length,a={};++l<o;)t(a,e[l],l<i?n[l]:void 0);return a}function oo(e){return Ba(e)?e:[]}function io(e){return"function"==typeof e?e:qr}function ao(e,n){return Pa(e)?e:ui(e,n)?[e]:Ii(ur(e))}var ro=Bl;function uo(e,n,t){var l=e.length;return t=void 0===t?l:t,!n&&t>=l?e:Vl(e,n,t)}var so=$n||function(e){return ze.clearTimeout(e)};function co(e,n){if(n)return e.slice();var t=e.length,l=je?je(t):new e.constructor(t);return e.copy(l),l}function vo(e){var n=new e.constructor(e.byteLength);return new He(n).set(new He(e)),n}function po(e,n){var t=n?vo(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function mo(e,n){if(e!==n){var t=void 0!==e,l=null===e,o=e==e,i=Ja(e),a=void 0!==n,r=null===n,u=n==n,d=Ja(n);if(!r&&!d&&!i&&e>n||i&&a&&u&&!r&&!d||l&&a&&u||!t&&u||!o)return 1;if(!l&&!i&&!d&&e<n||d&&t&&o&&!l&&!i||r&&t&&o||!a&&o||!u)return-1}return 0}function Eo(e,n,t,l){for(var o=-1,i=e.length,a=t.length,r=-1,u=n.length,d=at(i-a,0),s=q(u+d),c=!l;++r<u;)s[r]=n[r];for(;++o<a;)(c||o<i)&&(s[t[o]]=e[o]);for(;d--;)s[r++]=e[o++];return s}function So(e,n,t,l){for(var o=-1,i=e.length,a=-1,r=t.length,u=-1,d=n.length,s=at(i-r,0),c=q(s+d),v=!l;++o<s;)c[o]=e[o];for(var p=o;++u<d;)c[p+u]=n[u];for(;++a<r;)(v||o<i)&&(c[p+t[a]]=e[o++]);return c}function _o(e,n){var t=-1,l=e.length;for(n||(n=q(l));++t<l;)n[t]=e[t];return n}function fo(e,n,t,l){var o=!t;t||(t={});for(var i=-1,a=n.length;++i<a;){var r=n[i],u=l?l(t[r],e[r],r,t,e):void 0;void 0===u&&(u=e[r]),o?qt(t,r,u):zt(t,r,u)}return t}function Co(e,n){return function(t,l){var o=Pa(t)?tn:Yt,i=n?n():{};return o(t,e,$o(l,2),i)}}function go(e){return Bl(function(n,t){var l=-1,o=t.length,i=o>1?t[o-1]:void 0,a=o>2?t[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&ri(t[0],t[1],a)&&(i=o<3?void 0:i,o=1),n=me(n);++l<o;){var r=t[l];r&&e(n,r,l,i)}return n})}function No(e,n){return function(t,l){if(null==t)return t;if(!xa(t))return e(t,l);for(var o=t.length,i=n?o:-1,a=me(t);(n?i--:++i<o)&&!1!==l(a[i],i,a););return t}}function yo(e){return function(n,t,l){for(var o=-1,i=me(n),a=l(n),r=a.length;r--;){var u=a[e?r:++o];if(!1===t(i[u],u,i))break}return n}}function To(e){return function(n){var t=Bn(n=ur(n))?Vn(n):void 0,l=t?t[0]:n.charAt(0),o=t?uo(t,1).join(""):n.slice(1);return l[e]()+o}}function Do(e){return function(n){return vn(Hr(Wr(n).replace(Oe,"")),e,"")}}function Ao(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=bt(e.prototype),l=e.apply(t,n);return Va(l)?l:t}}function Io(e){return function(n,t,l){var o=me(n);if(!xa(n)){var i=$o(t,3);n=Nr(n),t=function(e){return i(o[e],e,o)}}var a=e(n,t,l);return a>-1?o[i?n[a]:a]:void 0}}function ho(e){return Vo(function(n){var l=n.length,o=l,i=Rt.prototype.thru;for(e&&n.reverse();o--;){var a=n[o];if("function"!=typeof a)throw new _e(t);if(i&&!r&&"wrapper"==Ko(a))var r=new Rt([],!0)}for(o=r?o:l;++o<l;){var u=Ko(a=n[o]),d="wrapper"==u?qo(a):void 0;r=d&&di(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?r[Ko(d[0])].apply(r,d[3]):1==a.length&&di(a)?r[u]():r.thru(a)}return function(){var e=arguments,t=e[0];if(r&&1==e.length&&Pa(t))return r.plant(t).value();for(var o=0,i=l?n[o].apply(this,e):t;++o<l;)i=n[o].call(this,i);return i}})}function Oo(e,n,t,l,o,i,a,r,u,d){var s=128&n,c=1&n,v=2&n,p=24&n,m=512&n,E=v?void 0:Ao(e);return function S(){for(var _=arguments.length,f=q(_),C=_;C--;)f[C]=arguments[C];if(p)var g=Xo(S),N=Wn(f,g);if(l&&(f=Eo(f,l,o,p)),i&&(f=So(f,i,a,p)),_-=N,p&&_<d){var y=kn(f,g);return Mo(e,n,Oo,S.placeholder,t,f,y,r,u,d-_)}var T=c?t:this,D=v?T[e]:e;return _=f.length,r?f=Si(f,r):m&&_>1&&f.reverse(),s&&u<_&&(f.length=u),this&&this!==ze&&this instanceof S&&(D=E||Ao(D)),D.apply(T,f)}}function bo(e,n){return function(t,l){return function(e,n,t,l){return ul(e,function(e,o,i){n(l,t(e),o,i)}),l}(t,e,n(l),{})}}function Lo(e,n){return function(t,l){var o;if(void 0===t&&void 0===l)return n;if(void 0!==t&&(o=t),void 0!==l){if(void 0===o)return l;"string"==typeof t||"string"==typeof l?(t=$l(t),l=$l(l)):(t=Xl(t),l=Xl(l)),o=e(t,l)}return o}}function Ro(e){return Vo(function(n){return n=sn(n,On($o())),Bl(function(t){var l=this;return e(n,function(e){return nn(e,l,t)})})})}function wo(e,n){var t=(n=void 0===n?" ":$l(n)).length;if(t<2)return t?xl(n,e):n;var l=xl(n,Qn(e/zn(n)));return Bn(n)?uo(Vn(l),0,e).join(""):l.slice(0,e)}function Wo(e){return function(n,t,l){return l&&"number"!=typeof l&&ri(n,t,l)&&(t=l=void 0),n=lr(n),void 0===t?(t=n,n=0):t=lr(t),function(e,n,t,l){for(var o=-1,i=at(Qn((n-e)/(t||1)),0),a=q(i);i--;)a[l?i:++o]=e,e+=t;return a}(n,t,l=void 0===l?n<t?1:-1:lr(l),e)}}function Po(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=ar(n),t=ar(t)),e(n,t)}}function Mo(e,n,t,l,o,i,a,r,u,d){var s=8&n;n|=s?32:64,4&(n&=~(s?64:32))||(n&=-4);var c=[e,n,o,s?i:void 0,s?a:void 0,s?void 0:i,s?void 0:a,r,u,d],v=t.apply(void 0,c);return di(e)&&fi(v,c),v.placeholder=l,Ni(v,e,n)}function xo(e){var n=pe[e];return function(e,t){if(e=ar(e),(t=null==t?0:rt(or(t),292))&&lt(e)){var l=(ur(e)+"e").split("e");return+((l=(ur(n(l[0]+"e"+(+l[1]+t)))+"e").split("e"))[0]+"e"+(+l[1]-t))}return n(e)}}var Bo=Et&&1/Hn(new Et([,-0]))[1]==1/0?function(e){return new Et(e)}:Jr;function Fo(e){return function(n){var t=ti(n);return t==v?Fn(n):t==S?jn(n):function(e,n){return sn(n,function(n){return[n,e[n]]})}(n,e(n))}}function Uo(e,n,o,i,a,r,u,d){var s=2&n;if(!s&&"function"!=typeof e)throw new _e(t);var c=i?i.length:0;if(c||(n&=-97,i=a=void 0),u=void 0===u?u:at(or(u),0),d=void 0===d?d:or(d),c-=a?a.length:0,64&n){var v=i,p=a;i=a=void 0}var m=s?void 0:qo(e),E=[e,n,o,i,a,v,p,r,u,d];if(m&&function(e,n){var t=e[1],o=n[1],i=t|o;if(!(i<131||128==o&&8==t||128==o&&256==t&&e[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==t))return e;1&o&&(e[2]=n[2],i|=1&t?0:4);var a=n[3];if(a){var r=e[3];e[3]=r?Eo(r,a,n[4]):a,e[4]=r?kn(e[3],l):n[4]}(a=n[5])&&(e[5]=(r=e[5])?So(r,a,n[6]):a,e[6]=r?kn(e[5],l):n[6]),(a=n[7])&&(e[7]=a),128&o&&(e[8]=null==e[8]?n[8]:rt(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=i}(E,m),e=E[0],n=E[1],o=E[2],i=E[3],a=E[4],!(d=E[9]=void 0===E[9]?s?0:e.length:at(E[9]-c,0))&&24&n&&(n&=-25),n&&1!=n)S=8==n||16==n?function(e,n,t){var l=Ao(e);return function o(){for(var i=arguments.length,a=q(i),r=i,u=Xo(o);r--;)a[r]=arguments[r];var d=i<3&&a[0]!==u&&a[i-1]!==u?[]:kn(a,u);if((i-=d.length)<t)return Mo(e,n,Oo,o.placeholder,void 0,a,d,void 0,void 0,t-i);var s=this&&this!==ze&&this instanceof o?l:e;return nn(s,this,a)}}(e,n,d):32!=n&&33!=n||a.length?Oo.apply(void 0,E):function(e,n,t,l){var o=1&n,i=Ao(e);return function n(){for(var a=-1,r=arguments.length,u=-1,d=l.length,s=q(d+r),c=this&&this!==ze&&this instanceof n?i:e;++u<d;)s[u]=l[u];for(;r--;)s[u++]=arguments[++a];return nn(c,o?t:this,s)}}(e,n,o,i);else var S=function(e,n,t){var l=1&n,o=Ao(e);return function n(){var i=this&&this!==ze&&this instanceof n?o:e;return i.apply(l?t:this,arguments)}}(e,n,o);return Ni((m?Hl:fi)(S,E),e,n)}function ko(e,n,t,l){return void 0===e||La(e,Ce[t])&&!ye.call(l,t)?n:e}function Ho(e,n,t,l,o,i){return Va(e)&&Va(n)&&(i.set(n,e),bl(e,n,void 0,Ho,i),i.delete(n)),e}function jo(e){return Ka(e)?void 0:e}function zo(e,n,t,l,o,i){var a=1&t,r=e.length,u=n.length;if(r!=u&&!(a&&u>r))return!1;var d=i.get(e),s=i.get(n);if(d&&s)return d==n&&s==e;var c=-1,v=!0,p=2&t?new xt:void 0;for(i.set(e,n),i.set(n,e);++c<r;){var m=e[c],E=n[c];if(l)var S=a?l(E,m,c,n,e,i):l(m,E,c,e,n,i);if(void 0!==S){if(S)continue;v=!1;break}if(p){if(!mn(n,function(e,n){if(!Ln(p,n)&&(m===e||o(m,e,t,l,i)))return p.push(n)})){v=!1;break}}else if(m!==E&&!o(m,E,t,l,i)){v=!1;break}}return i.delete(e),i.delete(n),v}function Vo(e){return gi(mi(e,void 0,Mi),e+"")}function Yo(e){return vl(e,Nr,ei)}function Go(e){return vl(e,yr,ni)}var qo=ft?function(e){return ft.get(e)}:Jr;function Ko(e){for(var n=e.name+"",t=Ct[n],l=ye.call(Ct,n)?t.length:0;l--;){var o=t[l],i=o.func;if(null==i||i==e)return o.name}return n}function Xo(e){return(ye.call(Ot,"placeholder")?Ot:e).placeholder}function $o(){var e=Ot.iteratee||Kr;return e=e===Kr?Tl:e,arguments.length?e(arguments[0],arguments[1]):e}function Zo(e,n){var t,l,o=e.__data__;return("string"==(l=typeof(t=n))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function Jo(e){for(var n=Nr(e),t=n.length;t--;){var l=n[t],o=e[l];n[t]=[l,o,vi(o)]}return n}function Qo(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return yl(t)?t:void 0}var ei=nt?function(e){return null==e?[]:(e=me(e),rn(nt(e),function(n){return qe.call(e,n)}))}:iu,ni=nt?function(e){for(var n=[];e;)cn(n,ei(e)),e=Ve(e);return n}:iu,ti=pl;function li(e,n,t){for(var l=-1,o=(n=ao(n,e)).length,i=!1;++l<o;){var a=hi(n[l]);if(!(i=null!=e&&t(e,a)))break;e=e[a]}return i||++l!=o?i:!!(o=null==e?0:e.length)&&za(o)&&ai(a,o)&&(Pa(e)||Wa(e))}function oi(e){return"function"!=typeof e.constructor||ci(e)?{}:bt(Ve(e))}function ii(e){return Pa(e)||Wa(e)||!!(En&&e&&e[En])}function ai(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&ae.test(e))&&e>-1&&e%1==0&&e<n}function ri(e,n,t){if(!Va(t))return!1;var l=typeof n;return!!("number"==l?xa(t)&&ai(n,t.length):"string"==l&&n in t)&&La(t[n],e)}function ui(e,n){if(Pa(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Ja(e))||j.test(e)||!H.test(e)||null!=n&&e in me(n)}function di(e){var n=Ko(e),t=Ot[n];if("function"!=typeof t||!(n in wt.prototype))return!1;if(e===t)return!0;var l=qo(t);return!!l&&e===l[0]}(vt&&ti(new vt(new ArrayBuffer(1)))!=N||pt&&ti(new pt)!=v||mt&&"[object Promise]"!=ti(mt.resolve())||Et&&ti(new Et)!=S||St&&ti(new St)!=C)&&(ti=function(e){var n=pl(e),t=n==m?e.constructor:void 0,l=t?Oi(t):"";if(l)switch(l){case gt:return N;case Nt:return v;case yt:return"[object Promise]";case Tt:return S;case Dt:return C}return n});var si=ge?Ha:au;function ci(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Ce)}function vi(e){return e==e&&!Va(e)}function pi(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in me(t))}}function mi(e,n,t){return n=at(void 0===n?e.length-1:n,0),function(){for(var l=arguments,o=-1,i=at(l.length-n,0),a=q(i);++o<i;)a[o]=l[n+o];o=-1;for(var r=q(n+1);++o<n;)r[o]=l[o];return r[n]=t(a),nn(e,this,r)}}function Ei(e,n){return n.length<2?e:cl(e,Vl(n,0,-1))}function Si(e,n){for(var t=e.length,l=rt(n.length,t),o=_o(e);l--;){var i=n[l];e[l]=ai(i,t)?o[i]:void 0}return e}function _i(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var fi=yi(Hl),Ci=Jn||function(e,n){return ze.setTimeout(e,n)},gi=yi(jl);function Ni(e,n,t){var l=n+"";return gi(e,function(e,n){var t=n.length;if(!t)return e;var l=t-1;return n[l]=(t>1?"& ":"")+n[l],n=n.join(t>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+n+"] */\n")}(l,function(e,n){return ln(o,function(t){var l="_."+t[0];n&t[1]&&!un(e,l)&&e.push(l)}),e.sort()}(function(e){var n=e.match(X);return n?n[1].split($):[]}(l),t)))}function yi(e){var n=0,t=0;return function(){var l=ut(),o=16-(l-t);if(t=l,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function Ti(e,n){var t=-1,l=e.length,o=l-1;for(n=void 0===n?l:n;++t<n;){var i=Ml(t,o),a=e[i];e[i]=e[t],e[t]=a}return e.length=n,e}var Di,Ai,Ii=(Di=Da(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(z,function(e,t,l,o){n.push(l?o.replace(Q,"$1"):t||e)}),n},function(e){return 500===Ai.size&&Ai.clear(),e}),Ai=Di.cache,Di);function hi(e){if("string"==typeof e||Ja(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Oi(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function bi(e){if(e instanceof wt)return e.clone();var n=new Rt(e.__wrapped__,e.__chain__);return n.__actions__=_o(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Li=Bl(function(e,n){return Ba(e)?Qt(e,il(n,1,Ba,!0)):[]}),Ri=Bl(function(e,n){var t=ki(n);return Ba(t)&&(t=void 0),Ba(e)?Qt(e,il(n,1,Ba,!0),$o(t,2)):[]}),wi=Bl(function(e,n){var t=ki(n);return Ba(t)&&(t=void 0),Ba(e)?Qt(e,il(n,1,Ba,!0),void 0,t):[]});function Wi(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var o=null==t?0:or(t);return o<0&&(o=at(l+o,0)),_n(e,$o(n,3),o)}function Pi(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var o=l-1;return void 0!==t&&(o=or(t),o=t<0?at(l+o,0):rt(o,l-1)),_n(e,$o(n,3),o,!0)}function Mi(e){return null!=e&&e.length?il(e,1):[]}function xi(e){return e&&e.length?e[0]:void 0}var Bi=Bl(function(e){var n=sn(e,oo);return n.length&&n[0]===e[0]?_l(n):[]}),Fi=Bl(function(e){var n=ki(e),t=sn(e,oo);return n===ki(t)?n=void 0:t.pop(),t.length&&t[0]===e[0]?_l(t,$o(n,2)):[]}),Ui=Bl(function(e){var n=ki(e),t=sn(e,oo);return(n="function"==typeof n?n:void 0)&&t.pop(),t.length&&t[0]===e[0]?_l(t,void 0,n):[]});function ki(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}var Hi=Bl(ji);function ji(e,n){return e&&e.length&&n&&n.length?Wl(e,n):e}var zi=Vo(function(e,n){var t=null==e?0:e.length,l=Kt(e,n);return Pl(e,sn(n,function(e){return ai(e,t)?+e:e}).sort(mo)),l});function Vi(e){return null==e?e:ct.call(e)}var Yi=Bl(function(e){return Zl(il(e,1,Ba,!0))}),Gi=Bl(function(e){var n=ki(e);return Ba(n)&&(n=void 0),Zl(il(e,1,Ba,!0),$o(n,2))}),qi=Bl(function(e){var n=ki(e);return n="function"==typeof n?n:void 0,Zl(il(e,1,Ba,!0),void 0,n)});function Ki(e){if(!e||!e.length)return[];var n=0;return e=rn(e,function(e){if(Ba(e))return n=at(e.length,n),!0}),In(n,function(n){return sn(e,yn(n))})}function Xi(e,n){if(!e||!e.length)return[];var t=Ki(e);return null==n?t:sn(t,function(e){return nn(n,void 0,e)})}var $i=Bl(function(e,n){return Ba(e)?Qt(e,n):[]}),Zi=Bl(function(e){return to(rn(e,Ba))}),Ji=Bl(function(e){var n=ki(e);return Ba(n)&&(n=void 0),to(rn(e,Ba),$o(n,2))}),Qi=Bl(function(e){var n=ki(e);return n="function"==typeof n?n:void 0,to(rn(e,Ba),void 0,n)}),ea=Bl(Ki),na=Bl(function(e){var n=e.length,t=n>1?e[n-1]:void 0;return t="function"==typeof t?(e.pop(),t):void 0,Xi(e,t)});function ta(e){var n=Ot(e);return n.__chain__=!0,n}function la(e,n){return n(e)}var oa=Vo(function(e){var n=e.length,t=n?e[0]:0,l=this.__wrapped__,o=function(n){return Kt(n,e)};return!(n>1||this.__actions__.length)&&l instanceof wt&&ai(t)?((l=l.slice(t,+t+(n?1:0))).__actions__.push({func:la,args:[o],thisArg:void 0}),new Rt(l,this.__chain__).thru(function(e){return n&&!e.length&&e.push(void 0),e})):this.thru(o)}),ia=Co(function(e,n,t){ye.call(e,t)?++e[t]:qt(e,t,1)}),aa=Io(Wi),ra=Io(Pi);function ua(e,n){return(Pa(e)?ln:el)(e,$o(n,3))}function da(e,n){return(Pa(e)?on:nl)(e,$o(n,3))}var sa=Co(function(e,n,t){ye.call(e,t)?e[t].push(n):qt(e,t,[n])}),ca=Bl(function(e,n,t){var l=-1,o="function"==typeof n,i=xa(e)?q(e.length):[];return el(e,function(e){i[++l]=o?nn(n,e,t):fl(e,n,t)}),i}),va=Co(function(e,n,t){qt(e,t,n)});function pa(e,n){return(Pa(e)?sn:Il)(e,$o(n,3))}var ma=Co(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),Ea=Bl(function(e,n){if(null==e)return[];var t=n.length;return t>1&&ri(e,n[0],n[1])?n=[]:t>2&&ri(n[0],n[1],n[2])&&(n=[n[0]]),Rl(e,il(n,1),[])}),Sa=Zn||function(){return ze.Date.now()};function _a(e,n,t){return n=t?void 0:n,Uo(e,128,void 0,void 0,void 0,void 0,n=e&&null==n?e.length:n)}function fa(e,n){var l;if("function"!=typeof n)throw new _e(t);return e=or(e),function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=void 0),l}}var Ca=Bl(function(e,n,t){var l=1;if(t.length){var o=kn(t,Xo(Ca));l|=32}return Uo(e,l,n,t,o)}),ga=Bl(function(e,n,t){var l=3;if(t.length){var o=kn(t,Xo(ga));l|=32}return Uo(n,l,e,t,o)});function Na(e,n,l){var o,i,a,r,u,d,s=0,c=!1,v=!1,p=!0;if("function"!=typeof e)throw new _e(t);function m(n){var t=o,l=i;return o=i=void 0,s=n,r=e.apply(l,t)}function E(e){return s=e,u=Ci(_,n),c?m(e):r}function S(e){var t=e-d;return void 0===d||t>=n||t<0||v&&e-s>=a}function _(){var e=Sa();if(S(e))return f(e);u=Ci(_,function(e){var t=n-(e-d);return v?rt(t,a-(e-s)):t}(e))}function f(e){return u=void 0,p&&o?m(e):(o=i=void 0,r)}function C(){var e=Sa(),t=S(e);if(o=arguments,i=this,d=e,t){if(void 0===u)return E(d);if(v)return so(u),u=Ci(_,n),m(d)}return void 0===u&&(u=Ci(_,n)),r}return n=ar(n)||0,Va(l)&&(c=!!l.leading,a=(v="maxWait"in l)?at(ar(l.maxWait)||0,n):a,p="trailing"in l?!!l.trailing:p),C.cancel=function(){void 0!==u&&so(u),s=0,o=d=i=u=void 0},C.flush=function(){return void 0===u?r:f(Sa())},C}var ya=Bl(function(e,n){return Jt(e,1,n)}),Ta=Bl(function(e,n,t){return Jt(e,ar(n)||0,t)});function Da(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new _e(t);var l=function(){var t=arguments,o=n?n.apply(this,t):t[0],i=l.cache;if(i.has(o))return i.get(o);var a=e.apply(this,t);return l.cache=i.set(o,a)||i,a};return l.cache=new(Da.Cache||Mt),l}function Aa(e){if("function"!=typeof e)throw new _e(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Da.Cache=Mt;var Ia=ro(function(e,n){var t=(n=1==n.length&&Pa(n[0])?sn(n[0],On($o())):sn(il(n,1),On($o()))).length;return Bl(function(l){for(var o=-1,i=rt(l.length,t);++o<i;)l[o]=n[o].call(this,l[o]);return nn(e,this,l)})}),ha=Bl(function(e,n){return Uo(e,32,void 0,n,kn(n,Xo(ha)))}),Oa=Bl(function(e,n){return Uo(e,64,void 0,n,kn(n,Xo(Oa)))}),ba=Vo(function(e,n){return Uo(e,256,void 0,void 0,void 0,n)});function La(e,n){return e===n||e!=e&&n!=n}var Ra=Po(ml),wa=Po(function(e,n){return e>=n}),Wa=Cl(function(){return arguments}())?Cl:function(e){return Ya(e)&&ye.call(e,"callee")&&!qe.call(e,"callee")},Pa=q.isArray,Ma=Xe?On(Xe):function(e){return Ya(e)&&pl(e)==g};function xa(e){return null!=e&&za(e.length)&&!Ha(e)}function Ba(e){return Ya(e)&&xa(e)}var Fa=tt||au,Ua=$e?On($e):function(e){return Ya(e)&&pl(e)==u};function ka(e){if(!Ya(e))return!1;var n=pl(e);return n==d||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Ka(e)}function Ha(e){if(!Va(e))return!1;var n=pl(e);return n==s||n==c||"[object AsyncFunction]"==n||"[object Proxy]"==n}function ja(e){return"number"==typeof e&&e==or(e)}function za(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Va(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Ya(e){return null!=e&&"object"==typeof e}var Ga=Ze?On(Ze):function(e){return Ya(e)&&ti(e)==v};function qa(e){return"number"==typeof e||Ya(e)&&pl(e)==p}function Ka(e){if(!Ya(e)||pl(e)!=m)return!1;var n=Ve(e);if(null===n)return!0;var t=ye.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Ne.call(t)==Ie}var Xa=Je?On(Je):function(e){return Ya(e)&&pl(e)==E},$a=Qe?On(Qe):function(e){return Ya(e)&&ti(e)==S};function Za(e){return"string"==typeof e||!Pa(e)&&Ya(e)&&pl(e)==_}function Ja(e){return"symbol"==typeof e||Ya(e)&&pl(e)==f}var Qa=en?On(en):function(e){return Ya(e)&&za(e.length)&&!!xe[pl(e)]},er=Po(Al),nr=Po(function(e,n){return e<=n});function tr(e){if(!e)return[];if(xa(e))return Za(e)?Vn(e):_o(e);if(Tn&&e[Tn])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[Tn]());var n=ti(e);return(n==v?Fn:n==S?Hn:Lr)(e)}function lr(e){return e?(e=ar(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function or(e){var n=lr(e),t=n%1;return n==n?t?n-t:n:0}function ir(e){return e?Xt(or(e),0,4294967295):0}function ar(e){if("number"==typeof e)return e;if(Ja(e))return NaN;if(Va(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=Va(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=hn(e);var t=le.test(e);return t||ie.test(e)?ke(e.slice(2),t?2:8):te.test(e)?NaN:+e}function rr(e){return fo(e,yr(e))}function ur(e){return null==e?"":$l(e)}var dr=go(function(e,n){if(ci(n)||xa(n))fo(n,Nr(n),e);else for(var t in n)ye.call(n,t)&&zt(e,t,n[t])}),sr=go(function(e,n){fo(n,yr(n),e)}),cr=go(function(e,n,t,l){fo(n,yr(n),e,l)}),vr=go(function(e,n,t,l){fo(n,Nr(n),e,l)}),pr=Vo(Kt),mr=Bl(function(e,n){e=me(e);var t=-1,l=n.length,o=l>2?n[2]:void 0;for(o&&ri(n[0],n[1],o)&&(l=1);++t<l;)for(var i=n[t],a=yr(i),r=-1,u=a.length;++r<u;){var d=a[r],s=e[d];(void 0===s||La(s,Ce[d])&&!ye.call(e,d))&&(e[d]=i[d])}return e}),Er=Bl(function(e){return e.push(void 0,Ho),nn(Dr,void 0,e)});function Sr(e,n,t){var l=null==e?void 0:cl(e,n);return void 0===l?t:l}function _r(e,n){return null!=e&&li(e,n,Sl)}var fr=bo(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Ae.call(n)),e[n]=t},Vr(qr)),Cr=bo(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Ae.call(n)),ye.call(e,n)?e[n].push(t):e[n]=[t]},$o),gr=Bl(fl);function Nr(e){return xa(e)?Ft(e):Dl(e)}function yr(e){return xa(e)?Ft(e,!0):function(e){if(!Va(e))return function(e){var n=[];if(null!=e)for(var t in me(e))n.push(t);return n}(e);var n=ci(e),t=[];for(var l in e)("constructor"!=l||!n&&ye.call(e,l))&&t.push(l);return t}(e)}var Tr=go(function(e,n,t){bl(e,n,t)}),Dr=go(function(e,n,t,l){bl(e,n,t,l)}),Ar=Vo(function(e,n){var t={};if(null==e)return t;var l=!1;n=sn(n,function(n){return n=ao(n,e),l||(l=n.length>1),n}),fo(e,Go(e),t),l&&(t=$t(t,7,jo));for(var o=n.length;o--;)Jl(t,n[o]);return t}),Ir=Vo(function(e,n){return null==e?{}:function(e,n){return wl(e,n,function(n,t){return _r(e,t)})}(e,n)});function hr(e,n){if(null==e)return{};var t=sn(Go(e),function(e){return[e]});return n=$o(n),wl(e,t,function(e,t){return n(e,t[0])})}var Or=Fo(Nr),br=Fo(yr);function Lr(e){return null==e?[]:bn(e,Nr(e))}var Rr=Do(function(e,n,t){return n=n.toLowerCase(),e+(t?wr(n):n)});function wr(e){return kr(ur(e).toLowerCase())}function Wr(e){return(e=ur(e))&&e.replace(re,Pn).replace(be,"")}var Pr=Do(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),Mr=Do(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),xr=To("toLowerCase"),Br=Do(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),Fr=Do(function(e,n,t){return e+(t?" ":"")+kr(n)}),Ur=Do(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),kr=To("toUpperCase");function Hr(e,n,t){return e=ur(e),void 0===(n=t?void 0:n)?function(e){return We.test(e)}(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(n)||[]}var jr=Bl(function(e,n){try{return nn(e,void 0,n)}catch(e){return ka(e)?e:new ce(e)}}),zr=Vo(function(e,n){return ln(n,function(n){n=hi(n),qt(e,n,Ca(e[n],e))}),e});function Vr(e){return function(){return e}}var Yr=ho(),Gr=ho(!0);function qr(e){return e}function Kr(e){return Tl("function"==typeof e?e:$t(e,1))}var Xr=Bl(function(e,n){return function(t){return fl(t,e,n)}}),$r=Bl(function(e,n){return function(t){return fl(e,t,n)}});function Zr(e,n,t){var l=Nr(n),o=sl(n,l);null!=t||Va(n)&&(o.length||!l.length)||(t=n,n=e,e=this,o=sl(n,Nr(n)));var i=!(Va(t)&&"chain"in t&&!t.chain),a=Ha(e);return ln(o,function(t){var l=n[t];e[t]=l,a&&(e.prototype[t]=function(){var n=this.__chain__;if(i||n){var t=e(this.__wrapped__),o=t.__actions__=_o(this.__actions__);return o.push({func:l,args:arguments,thisArg:e}),t.__chain__=n,t}return l.apply(e,cn([this.value()],arguments))})}),e}function Jr(){}var Qr=Ro(sn),eu=Ro(an),nu=Ro(mn);function tu(e){return ui(e)?yn(hi(e)):function(e){return function(n){return cl(n,e)}}(e)}var lu=Wo(),ou=Wo(!0);function iu(){return[]}function au(){return!1}var ru,uu=Lo(function(e,n){return e+n},0),du=xo("ceil"),su=Lo(function(e,n){return e/n},1),cu=xo("floor"),vu=Lo(function(e,n){return e*n},1),pu=xo("round"),mu=Lo(function(e,n){return e-n},0);return Ot.after=function(e,n){if("function"!=typeof n)throw new _e(t);return e=or(e),function(){if(--e<1)return n.apply(this,arguments)}},Ot.ary=_a,Ot.assign=dr,Ot.assignIn=sr,Ot.assignInWith=cr,Ot.assignWith=vr,Ot.at=pr,Ot.before=fa,Ot.bind=Ca,Ot.bindAll=zr,Ot.bindKey=ga,Ot.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Pa(e)?e:[e]},Ot.chain=ta,Ot.chunk=function(e,n,t){n=(t?ri(e,n,t):void 0===n)?1:at(or(n),0);var l=null==e?0:e.length;if(!l||n<1)return[];for(var o=0,i=0,a=q(Qn(l/n));o<l;)a[i++]=Vl(e,o,o+=n);return a},Ot.compact=function(e){for(var n=-1,t=null==e?0:e.length,l=0,o=[];++n<t;){var i=e[n];i&&(o[l++]=i)}return o},Ot.concat=function(){var e=arguments.length;if(!e)return[];for(var n=q(e-1),t=arguments[0],l=e;l--;)n[l-1]=arguments[l];return cn(Pa(t)?_o(t):[t],il(n,1))},Ot.cond=function(e){var n=null==e?0:e.length,l=$o();return e=n?sn(e,function(e){if("function"!=typeof e[1])throw new _e(t);return[l(e[0]),e[1]]}):[],Bl(function(t){for(var l=-1;++l<n;){var o=e[l];if(nn(o[0],this,t))return nn(o[1],this,t)}})},Ot.conforms=function(e){return function(e){var n=Nr(e);return function(t){return Zt(t,e,n)}}($t(e,1))},Ot.constant=Vr,Ot.countBy=ia,Ot.create=function(e,n){var t=bt(e);return null==n?t:Gt(t,n)},Ot.curry=function e(n,t,l){var o=Uo(n,8,void 0,void 0,void 0,void 0,void 0,t=l?void 0:t);return o.placeholder=e.placeholder,o},Ot.curryRight=function e(n,t,l){var o=Uo(n,16,void 0,void 0,void 0,void 0,void 0,t=l?void 0:t);return o.placeholder=e.placeholder,o},Ot.debounce=Na,Ot.defaults=mr,Ot.defaultsDeep=Er,Ot.defer=ya,Ot.delay=Ta,Ot.difference=Li,Ot.differenceBy=Ri,Ot.differenceWith=wi,Ot.drop=function(e,n,t){var l=null==e?0:e.length;return l?Vl(e,(n=t||void 0===n?1:or(n))<0?0:n,l):[]},Ot.dropRight=function(e,n,t){var l=null==e?0:e.length;return l?Vl(e,0,(n=l-(n=t||void 0===n?1:or(n)))<0?0:n):[]},Ot.dropRightWhile=function(e,n){return e&&e.length?eo(e,$o(n,3),!0,!0):[]},Ot.dropWhile=function(e,n){return e&&e.length?eo(e,$o(n,3),!0):[]},Ot.fill=function(e,n,t,l){var o=null==e?0:e.length;return o?(t&&"number"!=typeof t&&ri(e,n,t)&&(t=0,l=o),function(e,n,t,l){var o=e.length;for((t=or(t))<0&&(t=-t>o?0:o+t),(l=void 0===l||l>o?o:or(l))<0&&(l+=o),l=t>l?0:ir(l);t<l;)e[t++]=n;return e}(e,n,t,l)):[]},Ot.filter=function(e,n){return(Pa(e)?rn:ol)(e,$o(n,3))},Ot.flatMap=function(e,n){return il(pa(e,n),1)},Ot.flatMapDeep=function(e,n){return il(pa(e,n),1/0)},Ot.flatMapDepth=function(e,n,t){return t=void 0===t?1:or(t),il(pa(e,n),t)},Ot.flatten=Mi,Ot.flattenDeep=function(e){return null!=e&&e.length?il(e,1/0):[]},Ot.flattenDepth=function(e,n){return null!=e&&e.length?il(e,n=void 0===n?1:or(n)):[]},Ot.flip=function(e){return Uo(e,512)},Ot.flow=Yr,Ot.flowRight=Gr,Ot.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,l={};++n<t;){var o=e[n];l[o[0]]=o[1]}return l},Ot.functions=function(e){return null==e?[]:sl(e,Nr(e))},Ot.functionsIn=function(e){return null==e?[]:sl(e,yr(e))},Ot.groupBy=sa,Ot.initial=function(e){return null!=e&&e.length?Vl(e,0,-1):[]},Ot.intersection=Bi,Ot.intersectionBy=Fi,Ot.intersectionWith=Ui,Ot.invert=fr,Ot.invertBy=Cr,Ot.invokeMap=ca,Ot.iteratee=Kr,Ot.keyBy=va,Ot.keys=Nr,Ot.keysIn=yr,Ot.map=pa,Ot.mapKeys=function(e,n){var t={};return n=$o(n,3),ul(e,function(e,l,o){qt(t,n(e,l,o),e)}),t},Ot.mapValues=function(e,n){var t={};return n=$o(n,3),ul(e,function(e,l,o){qt(t,l,n(e,l,o))}),t},Ot.matches=function(e){return hl($t(e,1))},Ot.matchesProperty=function(e,n){return Ol(e,$t(n,1))},Ot.memoize=Da,Ot.merge=Tr,Ot.mergeWith=Dr,Ot.method=Xr,Ot.methodOf=$r,Ot.mixin=Zr,Ot.negate=Aa,Ot.nthArg=function(e){return e=or(e),Bl(function(n){return Ll(n,e)})},Ot.omit=Ar,Ot.omitBy=function(e,n){return hr(e,Aa($o(n)))},Ot.once=function(e){return fa(2,e)},Ot.orderBy=function(e,n,t,l){return null==e?[]:(Pa(n)||(n=null==n?[]:[n]),Pa(t=l?void 0:t)||(t=null==t?[]:[t]),Rl(e,n,t))},Ot.over=Qr,Ot.overArgs=Ia,Ot.overEvery=eu,Ot.overSome=nu,Ot.partial=ha,Ot.partialRight=Oa,Ot.partition=ma,Ot.pick=Ir,Ot.pickBy=hr,Ot.property=tu,Ot.propertyOf=function(e){return function(n){return null==e?void 0:cl(e,n)}},Ot.pull=Hi,Ot.pullAll=ji,Ot.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Wl(e,n,$o(t,2)):e},Ot.pullAllWith=function(e,n,t){return e&&e.length&&n&&n.length?Wl(e,n,void 0,t):e},Ot.pullAt=zi,Ot.range=lu,Ot.rangeRight=ou,Ot.rearg=ba,Ot.reject=function(e,n){return(Pa(e)?rn:ol)(e,Aa($o(n,3)))},Ot.remove=function(e,n){var t=[];if(!e||!e.length)return t;var l=-1,o=[],i=e.length;for(n=$o(n,3);++l<i;){var a=e[l];n(a,l,e)&&(t.push(a),o.push(l))}return Pl(e,o),t},Ot.rest=function(e,n){if("function"!=typeof e)throw new _e(t);return Bl(e,n=void 0===n?n:or(n))},Ot.reverse=Vi,Ot.sampleSize=function(e,n,t){return n=(t?ri(e,n,t):void 0===n)?1:or(n),(Pa(e)?kt:Ul)(e,n)},Ot.set=function(e,n,t){return null==e?e:kl(e,n,t)},Ot.setWith=function(e,n,t,l){return l="function"==typeof l?l:void 0,null==e?e:kl(e,n,t,l)},Ot.shuffle=function(e){return(Pa(e)?Ht:zl)(e)},Ot.slice=function(e,n,t){var l=null==e?0:e.length;return l?(t&&"number"!=typeof t&&ri(e,n,t)?(n=0,t=l):(n=null==n?0:or(n),t=void 0===t?l:or(t)),Vl(e,n,t)):[]},Ot.sortBy=Ea,Ot.sortedUniq=function(e){return e&&e.length?Kl(e):[]},Ot.sortedUniqBy=function(e,n){return e&&e.length?Kl(e,$o(n,2)):[]},Ot.split=function(e,n,t){return t&&"number"!=typeof t&&ri(e,n,t)&&(n=t=void 0),(t=void 0===t?4294967295:t>>>0)?(e=ur(e))&&("string"==typeof n||null!=n&&!Xa(n))&&!(n=$l(n))&&Bn(e)?uo(Vn(e),0,t):e.split(n,t):[]},Ot.spread=function(e,n){if("function"!=typeof e)throw new _e(t);return n=null==n?0:at(or(n),0),Bl(function(t){var l=t[n],o=uo(t,0,n);return l&&cn(o,l),nn(e,this,o)})},Ot.tail=function(e){var n=null==e?0:e.length;return n?Vl(e,1,n):[]},Ot.take=function(e,n,t){return e&&e.length?Vl(e,0,(n=t||void 0===n?1:or(n))<0?0:n):[]},Ot.takeRight=function(e,n,t){var l=null==e?0:e.length;return l?Vl(e,(n=l-(n=t||void 0===n?1:or(n)))<0?0:n,l):[]},Ot.takeRightWhile=function(e,n){return e&&e.length?eo(e,$o(n,3),!1,!0):[]},Ot.takeWhile=function(e,n){return e&&e.length?eo(e,$o(n,3)):[]},Ot.tap=function(e,n){return n(e),e},Ot.throttle=function(e,n,l){var o=!0,i=!0;if("function"!=typeof e)throw new _e(t);return Va(l)&&(o="leading"in l?!!l.leading:o,i="trailing"in l?!!l.trailing:i),Na(e,n,{leading:o,maxWait:n,trailing:i})},Ot.thru=la,Ot.toArray=tr,Ot.toPairs=Or,Ot.toPairsIn=br,Ot.toPath=function(e){return Pa(e)?sn(e,hi):Ja(e)?[e]:_o(Ii(ur(e)))},Ot.toPlainObject=rr,Ot.transform=function(e,n,t){var l=Pa(e),o=l||Fa(e)||Qa(e);if(n=$o(n,4),null==t){var i=e&&e.constructor;t=o?l?new i:[]:Va(e)&&Ha(i)?bt(Ve(e)):{}}return(o?ln:ul)(e,function(e,l,o){return n(t,e,l,o)}),t},Ot.unary=function(e){return _a(e,1)},Ot.union=Yi,Ot.unionBy=Gi,Ot.unionWith=qi,Ot.uniq=function(e){return e&&e.length?Zl(e):[]},Ot.uniqBy=function(e,n){return e&&e.length?Zl(e,$o(n,2)):[]},Ot.uniqWith=function(e,n){return n="function"==typeof n?n:void 0,e&&e.length?Zl(e,void 0,n):[]},Ot.unset=function(e,n){return null==e||Jl(e,n)},Ot.unzip=Ki,Ot.unzipWith=Xi,Ot.update=function(e,n,t){return null==e?e:Ql(e,n,io(t))},Ot.updateWith=function(e,n,t,l){return l="function"==typeof l?l:void 0,null==e?e:Ql(e,n,io(t),l)},Ot.values=Lr,Ot.valuesIn=function(e){return null==e?[]:bn(e,yr(e))},Ot.without=$i,Ot.words=Hr,Ot.wrap=function(e,n){return ha(io(n),e)},Ot.xor=Zi,Ot.xorBy=Ji,Ot.xorWith=Qi,Ot.zip=ea,Ot.zipObject=function(e,n){return lo(e||[],n||[],zt)},Ot.zipObjectDeep=function(e,n){return lo(e||[],n||[],kl)},Ot.zipWith=na,Ot.entries=Or,Ot.entriesIn=br,Ot.extend=sr,Ot.extendWith=cr,Zr(Ot,Ot),Ot.add=uu,Ot.attempt=jr,Ot.camelCase=Rr,Ot.capitalize=wr,Ot.ceil=du,Ot.clamp=function(e,n,t){return void 0===t&&(t=n,n=void 0),void 0!==t&&(t=(t=ar(t))==t?t:0),void 0!==n&&(n=(n=ar(n))==n?n:0),Xt(ar(e),n,t)},Ot.clone=function(e){return $t(e,4)},Ot.cloneDeep=function(e){return $t(e,5)},Ot.cloneDeepWith=function(e,n){return $t(e,5,n="function"==typeof n?n:void 0)},Ot.cloneWith=function(e,n){return $t(e,4,n="function"==typeof n?n:void 0)},Ot.conformsTo=function(e,n){return null==n||Zt(e,n,Nr(n))},Ot.deburr=Wr,Ot.defaultTo=function(e,n){return null==e||e!=e?n:e},Ot.divide=su,Ot.endsWith=function(e,n,t){e=ur(e),n=$l(n);var l=e.length,o=t=void 0===t?l:Xt(or(t),0,l);return(t-=n.length)>=0&&e.slice(t,o)==n},Ot.eq=La,Ot.escape=function(e){return(e=ur(e))&&B.test(e)?e.replace(M,Mn):e},Ot.escapeRegExp=function(e){return(e=ur(e))&&Y.test(e)?e.replace(V,"\\$&"):e},Ot.every=function(e,n,t){var l=Pa(e)?an:tl;return t&&ri(e,n,t)&&(n=void 0),l(e,$o(n,3))},Ot.find=aa,Ot.findIndex=Wi,Ot.findKey=function(e,n){return Sn(e,$o(n,3),ul)},Ot.findLast=ra,Ot.findLastIndex=Pi,Ot.findLastKey=function(e,n){return Sn(e,$o(n,3),dl)},Ot.floor=cu,Ot.forEach=ua,Ot.forEachRight=da,Ot.forIn=function(e,n){return null==e?e:al(e,$o(n,3),yr)},Ot.forInRight=function(e,n){return null==e?e:rl(e,$o(n,3),yr)},Ot.forOwn=function(e,n){return e&&ul(e,$o(n,3))},Ot.forOwnRight=function(e,n){return e&&dl(e,$o(n,3))},Ot.get=Sr,Ot.gt=Ra,Ot.gte=wa,Ot.has=function(e,n){return null!=e&&li(e,n,El)},Ot.hasIn=_r,Ot.head=xi,Ot.identity=qr,Ot.includes=function(e,n,t,l){e=xa(e)?e:Lr(e),t=t&&!l?or(t):0;var o=e.length;return t<0&&(t=at(o+t,0)),Za(e)?t<=o&&e.indexOf(n,t)>-1:!!o&&fn(e,n,t)>-1},Ot.indexOf=function(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var o=null==t?0:or(t);return o<0&&(o=at(l+o,0)),fn(e,n,o)},Ot.inRange=function(e,n,t){return n=lr(n),void 0===t?(t=n,n=0):t=lr(t),function(e,n,t){return e>=rt(n,t)&&e<at(n,t)}(e=ar(e),n,t)},Ot.invoke=gr,Ot.isArguments=Wa,Ot.isArray=Pa,Ot.isArrayBuffer=Ma,Ot.isArrayLike=xa,Ot.isArrayLikeObject=Ba,Ot.isBoolean=function(e){return!0===e||!1===e||Ya(e)&&pl(e)==r},Ot.isBuffer=Fa,Ot.isDate=Ua,Ot.isElement=function(e){return Ya(e)&&1===e.nodeType&&!Ka(e)},Ot.isEmpty=function(e){if(null==e)return!0;if(xa(e)&&(Pa(e)||"string"==typeof e||"function"==typeof e.splice||Fa(e)||Qa(e)||Wa(e)))return!e.length;var n=ti(e);if(n==v||n==S)return!e.size;if(ci(e))return!Dl(e).length;for(var t in e)if(ye.call(e,t))return!1;return!0},Ot.isEqual=function(e,n){return gl(e,n)},Ot.isEqualWith=function(e,n,t){var l=(t="function"==typeof t?t:void 0)?t(e,n):void 0;return void 0===l?gl(e,n,void 0,t):!!l},Ot.isError=ka,Ot.isFinite=function(e){return"number"==typeof e&&lt(e)},Ot.isFunction=Ha,Ot.isInteger=ja,Ot.isLength=za,Ot.isMap=Ga,Ot.isMatch=function(e,n){return e===n||Nl(e,n,Jo(n))},Ot.isMatchWith=function(e,n,t){return t="function"==typeof t?t:void 0,Nl(e,n,Jo(n),t)},Ot.isNaN=function(e){return qa(e)&&e!=+e},Ot.isNative=function(e){if(si(e))throw new ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yl(e)},Ot.isNil=function(e){return null==e},Ot.isNull=function(e){return null===e},Ot.isNumber=qa,Ot.isObject=Va,Ot.isObjectLike=Ya,Ot.isPlainObject=Ka,Ot.isRegExp=Xa,Ot.isSafeInteger=function(e){return ja(e)&&e>=-9007199254740991&&e<=9007199254740991},Ot.isSet=$a,Ot.isString=Za,Ot.isSymbol=Ja,Ot.isTypedArray=Qa,Ot.isUndefined=function(e){return void 0===e},Ot.isWeakMap=function(e){return Ya(e)&&ti(e)==C},Ot.isWeakSet=function(e){return Ya(e)&&"[object WeakSet]"==pl(e)},Ot.join=function(e,n){return null==e?"":ot.call(e,n)},Ot.kebabCase=Pr,Ot.last=ki,Ot.lastIndexOf=function(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var o=l;return void 0!==t&&(o=(o=or(t))<0?at(l+o,0):rt(o,l-1)),n==n?function(e,n,t){for(var l=t+1;l--;)if(e[l]===n)return l;return l}(e,n,o):_n(e,gn,o,!0)},Ot.lowerCase=Mr,Ot.lowerFirst=xr,Ot.lt=er,Ot.lte=nr,Ot.max=function(e){return e&&e.length?ll(e,qr,ml):void 0},Ot.maxBy=function(e,n){return e&&e.length?ll(e,$o(n,2),ml):void 0},Ot.mean=function(e){return Nn(e,qr)},Ot.meanBy=function(e,n){return Nn(e,$o(n,2))},Ot.min=function(e){return e&&e.length?ll(e,qr,Al):void 0},Ot.minBy=function(e,n){return e&&e.length?ll(e,$o(n,2),Al):void 0},Ot.stubArray=iu,Ot.stubFalse=au,Ot.stubObject=function(){return{}},Ot.stubString=function(){return""},Ot.stubTrue=function(){return!0},Ot.multiply=vu,Ot.nth=function(e,n){return e&&e.length?Ll(e,or(n)):void 0},Ot.noConflict=function(){return ze._===this&&(ze._=he),this},Ot.noop=Jr,Ot.now=Sa,Ot.pad=function(e,n,t){e=ur(e);var l=(n=or(n))?zn(e):0;if(!n||l>=n)return e;var o=(n-l)/2;return wo(et(o),t)+e+wo(Qn(o),t)},Ot.padEnd=function(e,n,t){e=ur(e);var l=(n=or(n))?zn(e):0;return n&&l<n?e+wo(n-l,t):e},Ot.padStart=function(e,n,t){e=ur(e);var l=(n=or(n))?zn(e):0;return n&&l<n?wo(n-l,t)+e:e},Ot.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),dt(ur(e).replace(G,""),n||0)},Ot.random=function(e,n,t){if(t&&"boolean"!=typeof t&&ri(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=lr(e),void 0===n?(n=e,e=0):n=lr(n)),e>n){var l=e;e=n,n=l}if(t||e%1||n%1){var o=st();return rt(e+o*(n-e+Ue("1e-"+((o+"").length-1))),n)}return Ml(e,n)},Ot.reduce=function(e,n,t){var l=Pa(e)?vn:Dn,o=arguments.length<3;return l(e,$o(n,4),t,o,el)},Ot.reduceRight=function(e,n,t){var l=Pa(e)?pn:Dn,o=arguments.length<3;return l(e,$o(n,4),t,o,nl)},Ot.repeat=function(e,n,t){return n=(t?ri(e,n,t):void 0===n)?1:or(n),xl(ur(e),n)},Ot.replace=function(){var e=arguments,n=ur(e[0]);return e.length<3?n:n.replace(e[1],e[2])},Ot.result=function(e,n,t){var l=-1,o=(n=ao(n,e)).length;for(o||(o=1,e=void 0);++l<o;){var i=null==e?void 0:e[hi(n[l])];void 0===i&&(l=o,i=t),e=Ha(i)?i.call(e):i}return e},Ot.round=pu,Ot.runInContext=e,Ot.sample=function(e){return(Pa(e)?Ut:Fl)(e)},Ot.size=function(e){if(null==e)return 0;if(xa(e))return Za(e)?zn(e):e.length;var n=ti(e);return n==v||n==S?e.size:Dl(e).length},Ot.snakeCase=Br,Ot.some=function(e,n,t){var l=Pa(e)?mn:Yl;return t&&ri(e,n,t)&&(n=void 0),l(e,$o(n,3))},Ot.sortedIndex=function(e,n){return Gl(e,n)},Ot.sortedIndexBy=function(e,n,t){return ql(e,n,$o(t,2))},Ot.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var l=Gl(e,n);if(l<t&&La(e[l],n))return l}return-1},Ot.sortedLastIndex=function(e,n){return Gl(e,n,!0)},Ot.sortedLastIndexBy=function(e,n,t){return ql(e,n,$o(t,2),!0)},Ot.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=Gl(e,n,!0)-1;if(La(e[t],n))return t}return-1},Ot.startCase=Fr,Ot.startsWith=function(e,n,t){return e=ur(e),t=null==t?0:Xt(or(t),0,e.length),n=$l(n),e.slice(t,t+n.length)==n},Ot.subtract=mu,Ot.sum=function(e){return e&&e.length?An(e,qr):0},Ot.sumBy=function(e,n){return e&&e.length?An(e,$o(n,2)):0},Ot.template=function(e,n,t){var l=Ot.templateSettings;t&&ri(e,n,t)&&(n=void 0),e=ur(e),n=cr({},n,l,ko);var o,i,a=cr({},n.imports,l.imports,ko),r=Nr(a),u=bn(a,r),d=0,s=n.interpolate||ue,c="__p += '",v=Ee((n.escape||ue).source+"|"+s.source+"|"+(s===k?ee:ue).source+"|"+(n.evaluate||ue).source+"|$","g"),p="//# sourceURL="+(ye.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(v,function(n,t,l,a,r,u){return l||(l=a),c+=e.slice(d,u).replace(de,xn),t&&(o=!0,c+="' +\n__e("+t+") +\n'"),r&&(i=!0,c+="';\n"+r+";\n__p += '"),l&&(c+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),d=u+n.length,n}),c+="';\n";var m=ye.call(n,"variable")&&n.variable;if(m){if(J.test(m))throw new ce("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(i?c.replace(L,""):c).replace(R,"$1").replace(w,"$1;"),c="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var E=jr(function(){return ve(r,p+"return "+c).apply(void 0,u)});if(E.source=c,ka(E))throw E;return E},Ot.times=function(e,n){if((e=or(e))<1||e>9007199254740991)return[];var t=4294967295,l=rt(e,4294967295);e-=4294967295;for(var o=In(l,n=$o(n));++t<e;)n(t);return o},Ot.toFinite=lr,Ot.toInteger=or,Ot.toLength=ir,Ot.toLower=function(e){return ur(e).toLowerCase()},Ot.toNumber=ar,Ot.toSafeInteger=function(e){return e?Xt(or(e),-9007199254740991,9007199254740991):0===e?e:0},Ot.toString=ur,Ot.toUpper=function(e){return ur(e).toUpperCase()},Ot.trim=function(e,n,t){if((e=ur(e))&&(t||void 0===n))return hn(e);if(!e||!(n=$l(n)))return e;var l=Vn(e),o=Vn(n);return uo(l,Rn(l,o),wn(l,o)+1).join("")},Ot.trimEnd=function(e,n,t){if((e=ur(e))&&(t||void 0===n))return e.slice(0,Yn(e)+1);if(!e||!(n=$l(n)))return e;var l=Vn(e);return uo(l,0,wn(l,Vn(n))+1).join("")},Ot.trimStart=function(e,n,t){if((e=ur(e))&&(t||void 0===n))return e.replace(G,"");if(!e||!(n=$l(n)))return e;var l=Vn(e);return uo(l,Rn(l,Vn(n))).join("")},Ot.truncate=function(e,n){var t=30,l="...";if(Va(n)){var o="separator"in n?n.separator:o;t="length"in n?or(n.length):t,l="omission"in n?$l(n.omission):l}var i=(e=ur(e)).length;if(Bn(e)){var a=Vn(e);i=a.length}if(t>=i)return e;var r=t-zn(l);if(r<1)return l;var u=a?uo(a,0,r).join(""):e.slice(0,r);if(void 0===o)return u+l;if(a&&(r+=u.length-r),Xa(o)){if(e.slice(r).search(o)){var d,s=u;for(o.global||(o=Ee(o.source,ur(ne.exec(o))+"g")),o.lastIndex=0;d=o.exec(s);)var c=d.index;u=u.slice(0,void 0===c?r:c)}}else if(e.indexOf($l(o),r)!=r){var v=u.lastIndexOf(o);v>-1&&(u=u.slice(0,v))}return u+l},Ot.unescape=function(e){return(e=ur(e))&&x.test(e)?e.replace(P,Gn):e},Ot.uniqueId=function(e){var n=++Te;return ur(e)+n},Ot.upperCase=Ur,Ot.upperFirst=kr,Ot.each=ua,Ot.eachRight=da,Ot.first=xi,Zr(Ot,(ru={},ul(Ot,function(e,n){ye.call(Ot.prototype,n)||(ru[n]=e)}),ru),{chain:!1}),Ot.VERSION="4.17.21",ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Ot[e].placeholder=Ot}),ln(["drop","take"],function(e,n){wt.prototype[e]=function(t){t=void 0===t?1:at(or(t),0);var l=this.__filtered__&&!n?new wt(this):this.clone();return l.__filtered__?l.__takeCount__=rt(t,l.__takeCount__):l.__views__.push({size:rt(t,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},wt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),ln(["filter","map","takeWhile"],function(e,n){var t=n+1,l=1==t||3==t;wt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:$o(e,3),type:t}),n.__filtered__=n.__filtered__||l,n}}),ln(["head","last"],function(e,n){var t="take"+(n?"Right":"");wt.prototype[e]=function(){return this[t](1).value()[0]}}),ln(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");wt.prototype[e]=function(){return this.__filtered__?new wt(this):this[t](1)}}),wt.prototype.compact=function(){return this.filter(qr)},wt.prototype.find=function(e){return this.filter(e).head()},wt.prototype.findLast=function(e){return this.reverse().find(e)},wt.prototype.invokeMap=Bl(function(e,n){return"function"==typeof e?new wt(this):this.map(function(t){return fl(t,e,n)})}),wt.prototype.reject=function(e){return this.filter(Aa($o(e)))},wt.prototype.slice=function(e,n){e=or(e);var t=this;return t.__filtered__&&(e>0||n<0)?new wt(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),void 0!==n&&(t=(n=or(n))<0?t.dropRight(-n):t.take(n-e)),t)},wt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},wt.prototype.toArray=function(){return this.take(4294967295)},ul(wt.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),o=Ot[l?"take"+("last"==n?"Right":""):n],i=l||/^find/.test(n);o&&(Ot.prototype[n]=function(){var n=this.__wrapped__,a=l?[1]:arguments,r=n instanceof wt,u=a[0],d=r||Pa(n),s=function(e){var n=o.apply(Ot,cn([e],a));return l&&c?n[0]:n};d&&t&&"function"==typeof u&&1!=u.length&&(r=d=!1);var c=this.__chain__,v=!!this.__actions__.length,p=i&&!c,m=r&&!v;if(!i&&d){n=m?n:new wt(this);var E=e.apply(n,a);return E.__actions__.push({func:la,args:[s],thisArg:void 0}),new Rt(E,c)}return p&&m?e.apply(this,a):(E=this.thru(s),p?l?E.value()[0]:E.value():E)})}),ln(["pop","push","shift","sort","splice","unshift"],function(e){var n=fe[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);Ot.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var o=this.value();return n.apply(Pa(o)?o:[],e)}return this[t](function(t){return n.apply(Pa(t)?t:[],e)})}}),ul(wt.prototype,function(e,n){var t=Ot[n];if(t){var l=t.name+"";ye.call(Ct,l)||(Ct[l]=[]),Ct[l].push({name:n,func:t})}}),Ct[Oo(void 0,2).name]=[{name:"wrapper",func:void 0}],wt.prototype.clone=function(){var e=new wt(this.__wrapped__);return e.__actions__=_o(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=_o(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=_o(this.__views__),e},wt.prototype.reverse=function(){if(this.__filtered__){var e=new wt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},wt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Pa(e),l=n<0,o=t?e.length:0,i=function(e,n,t){for(var l=-1,o=t.length;++l<o;){var i=t[l],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":n-=a;break;case"take":n=rt(n,e+a);break;case"takeRight":e=at(e,n-a)}}return{start:e,end:n}}(0,o,this.__views__),a=i.start,r=i.end,u=r-a,d=l?r:a-1,s=this.__iteratees__,c=s.length,v=0,p=rt(u,this.__takeCount__);if(!t||!l&&o==u&&p==u)return no(e,this.__actions__);var m=[];e:for(;u--&&v<p;){for(var E=-1,S=e[d+=n];++E<c;){var _=s[E],f=_.type,C=(0,_.iteratee)(S);if(2==f)S=C;else if(!C){if(1==f)continue e;break e}}m[v++]=S}return m},Ot.prototype.at=oa,Ot.prototype.chain=function(){return ta(this)},Ot.prototype.commit=function(){return new Rt(this.value(),this.__chain__)},Ot.prototype.next=function(){void 0===this.__values__&&(this.__values__=tr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Ot.prototype.plant=function(e){for(var n,t=this;t instanceof Lt;){var l=bi(t);l.__index__=0,l.__values__=void 0,n?o.__wrapped__=l:n=l;var o=l;t=t.__wrapped__}return o.__wrapped__=e,n},Ot.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof wt){var n=e;return this.__actions__.length&&(n=new wt(this)),(n=n.reverse()).__actions__.push({func:la,args:[Vi],thisArg:void 0}),new Rt(n,this.__chain__)}return this.thru(Vi)},Ot.prototype.toJSON=Ot.prototype.valueOf=Ot.prototype.value=function(){return no(this.__wrapped__,this.__actions__)},Ot.prototype.first=Ot.prototype.head,Tn&&(Ot.prototype[Tn]=function(){return this}),Ot}();Ye?((Ye.exports=qn)._=qn,Ve._=qn):ze._=qn}).call(W)});const x=e=>{var n,a,r,u,d,c,v,p,m,S,_,f,C,g,N,y,T,D,A;let{application:I}=e;const{t:h}=l.useTranslation();let O=encodeURI(I.applicationNo),b={tenantId:I.tenantId,applicationNumber:I.applicationNo};const{isLoading:L}=Digit.Hooks.ws.useMyApplicationSearch({filters:b,BusinessService:null!==(n=I.applicationNo)&&void 0!==n&&n.includes("SW")?"SW":"WS"},{filters:b,privacy:Digit.Utils.getPrivacyObject()}),{data:R}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:null==I?void 0:I.propertyId}},{filters:{propertyIds:null==I?void 0:I.propertyId},privacy:Digit.Utils.getPrivacyObject()}),w=null!=I&&null!==(a=I.applicationNo)&&void 0!==a&&a.includes("SW")?null!=I&&null!==(r=I.applicationNo)&&void 0!==r&&r.includes("DC")?"SW":"SW.ONE_TIME_FEE":null!=I&&null!==(u=I.applicationNo)&&void 0!==u&&u.includes("DC")?"WS":"WS.ONE_TIME_FEE";return null!=I&&null!==(d=I.applicationNo)&&void 0!==d&&d.includes("DC"),L?t.createElement(i.Loader,null):t.createElement(i.Card,null,t.createElement(i.KeyNote,{keyValue:h("WS_MYCONNECTIONS_APPLICATION_NO"),note:null==I?void 0:I.applicationNo}),t.createElement(i.KeyNote,{keyValue:h("WS_SERVICE_NAME"),note:h("WS_APPLICATION_TYPE_"+(null==I?void 0:I.applicationType))}),t.createElement(i.KeyNote,{keyValue:h("WS_CONSUMER_NAME"),note:(null==I||null===(c=I.connectionHolders)||void 0===c?void 0:c.map(e=>e.name).join(","))||(null==I||null===(v=I.property)||void 0===v||null===(p=v.owners)||void 0===p?void 0:p.sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map(e=>e.name).join(","))||h("CS_NA")}),t.createElement(i.KeyNote,{keyValue:h("WS_PROPERTY_ID"),note:(null==I?void 0:I.propertyId)||h("CS_NA")}),t.createElement(i.KeyNote,{keyValue:h("WS_STATUS"),note:h("CS_"+(null==I?void 0:I.applicationStatus))||h("CS_NA")}),t.createElement(i.KeyNote,{keyValue:h("WS_SLA"),note:Math.round((null==I?void 0:I.sla)/864e5)?Math.round((null==I?void 0:I.sla)/864e5)+" Days":h("CS_NA")}),t.createElement(i.KeyNote,{keyValue:h("WS_PROPERTY_ADDRESS"),note:E(null==I||null===(m=I.property)||void 0===m?void 0:m.address,h),privacy:{uuid:null==I||null===(S=I.property)||void 0===S||null===(_=S.owners)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.uuid,fieldName:["doorNo","street","landmark"],model:"Property",showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==I?void 0:I.tenantId,propertyIds:null==I?void 0:I.propertyId},jsonPath:"Properties[0].address.street",isArray:!1,d:e=>(M.get(e,"Properties[0].address.doorNo")?M.get(e,"Properties[0].address.doorNo")+", ":"")+(M.get(e,"Properties[0].address.street")?M.get(e,"Properties[0].address.street")+", ":"")+(M.get(e,"Properties[0].address.landmark")?""+M.get(e,"Properties[0].address.landmark"):"")}}}),t.createElement(o.Link,{to:"/digit-ui/citizen/ws/connection/application/"+O},t.createElement(i.SubmitBar,{label:h("WS_VIEW_DETAILS_LABEL")})),"PENDING_FOR_PAYMENT"===(null==I?void 0:I.applicationStatus)?t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+w+"/"+(null!=I&&null!==(C=I.applicationNo)&&void 0!==C&&C.includes("DC")?s(null==I?void 0:I.connectionNo,"/","+")||s(null==I?void 0:I.connectionNo,"/","+"):s(null==I?void 0:I.applicationNo,"/","+")||s(null==I?void 0:I.applicationNo,"/","+"))+"?workflow=WNS&tenantId="+(null==I?void 0:I.tenantId)+"&ConsumerName="+((null==I||null===(g=I.connectionHolders)||void 0===g?void 0:g.map(e=>e.name).join(","))||(null==I||null===(N=I.connectionHolders)||void 0===N?void 0:N.map(e=>e.name).join(","))||(null==R||null===(y=R.Properties)||void 0===y||null===(T=y[0])||void 0===T||null===(D=T.owners)||void 0===D?void 0:D.map(e=>e.name).join(",")))+"&isDisoconnectFlow="+!(null==I||null===(A=I.applicationNo)||void 0===A||!A.includes("DC")),state:{}}},t.createElement("div",{style:{marginTop:"10px"}},t.createElement(i.SubmitBar,{label:h("MAKE_PAYMENT")}))):null)},B=e=>{let{style:n}=e;return t.createElement("span",null,t.createElement("svg",{style:{...n},display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},F=e=>{let{t:n,userType:l}=e;l=l||Digit.SessionStorage.get("userType");const o=window.Digit.Utils.browser.isMobile();let a=sessionStorage.getItem("isPrivacyEnabled");return t.createElement(t.Fragment,null,"true"===a&&t.createElement("div",{style:"citizen"===l?{maxWidth:"970px"}:o?{}:{width:"80%"}},t.createElement("div",{className:"info-banner-wrap",style:window.location.href.includes("/connection-details")?{color:"#3498DB",margin:"0px"}:{color:"#3498DB"}},t.createElement("div",null,t.createElement(i.InfoBannerIcon,null),t.createElement("h2",{style:{color:"#3498DB"}},n("CS_FILE_APPLICATION_INFO_LABEL"))),n("WS_CLICK_ON_LABEL")+" ",t.createElement(B,{style:{display:"inline",marginBottom:"5px"}})," "+n("WS_CLICK_ON_INFO_LABEL"))))},U=()=>{var e,n,o,a,r,u,d,s,c,v,p,m,E,S;const{t:_}=l.useTranslation(),f=Digit.UserService.getUser(),C=(null===(e=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===e?void 0:e.code)||(null==f||null===(n=f.info)||void 0===n?void 0:n.permanentCity)||Digit.ULBService.getCurrentTenantId();let g=window.location.href.split("/").pop(),N=isNaN(parseInt(g))?{tenantId:C,mobileNumber:null==f||null===(a=f.info)||void 0===a?void 0:a.mobileNumber}:{tenantId:C,mobileNumber:null==f||null===(o=f.info)||void 0===o?void 0:o.mobileNumber};const{isLoading:y,data:T}=Digit.Hooks.ws.useMyApplicationSearch({filters:N},{filters:N}),{isLoading:D,data:A}=Digit.Hooks.ws.useMyApplicationSearch({filters:N,BusinessService:"SW"},{filters:N});let I=T&&(null==T||null===(r=T.WaterConnection)||void 0===r?void 0:r.map(e=>e.applicationNo).join(","))||"",h=A&&(null==A||null===(u=A.SewerageConnections)||void 0===u?void 0:u.map(e=>e.applicationNo).join(","))||"",O=I.concat(h),b=Digit.Hooks.useWorkflowDetails({tenantId:C,id:O,moduleCode:"WS,SW",config:{enabled:!!O}}),L=T&&(null==T||null===(d=T.WaterConnection)||void 0===d?void 0:d.map(e=>null==e?void 0:e.propertyId).join(","))||"",R=A&&(null==A||null===(s=A.SewerageConnections)||void 0===s?void 0:s.map(e=>null==e?void 0:e.propertyId).join(","))||"",w=L.concat(R);const{isLoading:W,data:P}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:w}},{filters:{propertyIds:w},enabled:!!w});if(y||D||W)return t.createElement(i.Loader,null);let{WaterConnection:M}=T||{},{SewerageConnections:B}=A||{};M=null===(c=M)||void 0===c?void 0:c.map(e=>{var n,t,l;return{...e,sla:null==b||null===(n=b.data)||void 0===n||null===(t=n.processInstances)||void 0===t||null===(l=t.filter(n=>n.businessId==e.applicationNo)[0])||void 0===l?void 0:l.businesssServiceSla}}),B=null===(v=B)||void 0===v?void 0:v.map(e=>{var n,t,l;return{...e,sla:null==b||null===(n=b.data)||void 0===n||null===(t=n.processInstances)||void 0===t||null===(l=t.filter(n=>n.businessId==e.applicationNo)[0])||void 0===l?void 0:l.businesssServiceSla}}),M=null===(p=M)||void 0===p?void 0:p.filter(e=>"MODIFY_WATER_CONNECTION"!==(null==e?void 0:e.applicationType)),B=null===(m=B)||void 0===m?void 0:m.filter(e=>"MODIFY_SEWERAGE_CONNECTION"!==(null==e?void 0:e.applicationType));let U=M.concat(B);return U=U&&U.map(e=>{var n;return{...e,property:null==P||null===(n=P.Properties)||void 0===n?void 0:n.filter(n=>(null==n?void 0:n.propertyId)===(null==e?void 0:e.propertyId))[0]}}),t.createElement(t.Fragment,null,t.createElement(i.Header,null,_("CS_HOME_MY_APPLICATIONS")+" "+(U?"("+U.length+")":"")),t.createElement(F,{t:_}),t.createElement("div",null,(null===(E=U)||void 0===E?void 0:E.length)>0&&U.sort((e,n)=>{var t,l;return(null===(t=n.auditDetails)||void 0===t?void 0:t.lastModifiedTime)-(null===(l=e.auditDetails)||void 0===l?void 0:l.lastModifiedTime)}).map((e,n)=>t.createElement("div",{key:n},t.createElement(x,{application:e}))),!(null!==(S=U)&&void 0!==S&&S.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},_("WS_NO_APPLICATION_FOUND_MSG"))))},k=e=>{var n,a,r,u,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B;let{path:F}=e;o.useLocation();const{t:k}=l.useTranslation();let H=window.location.href.includes("/ws/create-application/property-details"),j=window.location.href.includes("/acknowledgement")||window.location.href.includes("/disconnect-acknowledge");const z=null===(n=Digit)||void 0===n||null===(a=n.ComponentRegistryService)||void 0===a?void 0:a.getComponent("WSDisconnectAcknowledgement"),V=null===(r=Digit)||void 0===r||null===(u=r.ComponentRegistryService)||void 0===u?void 0:u.getComponent("WSRestorationAcknowledgement"),Y=null===(s=Digit)||void 0===s||null===(c=s.ComponentRegistryService)||void 0===c?void 0:c.getComponent("WSCreate"),G=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("WSDisconnection"),q=null===(m=Digit)||void 0===m||null===(E=m.ComponentRegistryService)||void 0===E?void 0:E.getComponent("WSRestoration"),K=null===(S=Digit)||void 0===S||null===(_=S.ComponentRegistryService)||void 0===_?void 0:_.getComponent("WSSearchConnectionComponent"),X=null===(f=Digit)||void 0===f||null===(C=f.ComponentRegistryService)||void 0===C?void 0:C.getComponent("WSSearchResultsComponent"),$=null===(g=Digit)||void 0===g||null===(N=g.ComponentRegistryService)||void 0===N?void 0:N.getComponent("WSCitizenApplicationDetails"),Z=null===(y=Digit)||void 0===y||null===(T=y.ComponentRegistryService)||void 0===T?void 0:T.getComponent("WSAdditionalDetails"),J=null===(D=Digit)||void 0===D||null===(A=D.ComponentRegistryService)||void 0===A?void 0:A.getComponent("WSCitizenConnectionDetails"),Q=null===(I=Digit)||void 0===I||null===(h=I.ComponentRegistryService)||void 0===h?void 0:h.getComponent("WSCitizenConsumptionDetails"),ee=null===(O=Digit)||void 0===O||null===(b=O.ComponentRegistryService)||void 0===b?void 0:b.getComponent("WSMyPayments"),ne=null===(L=Digit)||void 0===L||null===(R=L.ComponentRegistryService)||void 0===R?void 0:R.getComponent("WSCitizenEditApplication"),te=null===(w=Digit)||void 0===w||null===(W=w.ComponentRegistryService)||void 0===W?void 0:W.getComponent("WSReSubmitDisconnectionApplication"),le=null===(P=Digit)||void 0===P||null===(M=P.ComponentRegistryService)||void 0===M?void 0:M.getComponent("WSMyConnections"),oe=null===(x=Digit)||void 0===x||null===(B=x.ComponentRegistryService)||void 0===B?void 0:B.getComponent("WNSMyBillsComponent");return t.createElement(t.Fragment,null,t.createElement("div",{className:"ws-citizen-wrapper"},!j&&t.createElement(i.BackButton,{style:{border:"none"},getBackPageNumber:()=>{let e=-1;return"true"===sessionStorage.getItem("VisitedCommonPTSearch")&&H?(e=-4,e):e}},k("CS_COMMON_BACK")),t.createElement(o.Switch,null,t.createElement(i.PrivateRoute,{path:F+"/create-application",component:Y}),t.createElement(i.PrivateRoute,{path:F+"/disconnect-application",component:G}),t.createElement(i.PrivateRoute,{path:F+"/restore-application",component:q}),t.createElement(i.PrivateRoute,{path:F+"/disconnect-acknowledge",component:z}),t.createElement(i.PrivateRoute,{path:F+"/restoration-acknowledge",component:V}),t.createElement(i.PrivateRoute,{path:F+"/resubmit-disconnect-application",component:te}),t.createElement(o.Route,{path:F+"/search",component:K}),t.createElement(i.PrivateRoute,{path:F+"/my-bills",component:oe}),t.createElement(o.Route,{path:F+"/search-results",component:X}),t.createElement(o.Route,{path:F+"/test-acknowledgment",component:d}),t.createElement(i.PrivateRoute,{path:F+"/my-payments",component:ee}),t.createElement(i.PrivateRoute,{path:F+"/my-applications",component:U}),t.createElement(i.PrivateRoute,{path:F+"/my-connections",component:le}),t.createElement(i.PrivateRoute,{path:F+"/connection/application/:acknowledgementIds",component:$}),t.createElement(i.PrivateRoute,{path:F+"/connection/additional/:acknowledgementIds",component:Z}),t.createElement(i.PrivateRoute,{path:F+"/connection/details/:acknowledgementIds",component:J}),t.createElement(i.PrivateRoute,{path:F+"/consumption/details",component:Q}),t.createElement(i.PrivateRoute,{path:F+"/edit-application/:tenantId",component:ne}),t.createElement(i.PrivateRoute,{path:F+"/modify-connection/:tenantId",component:ne}))))};function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)({}).hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(null,arguments)}const j=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},z=(e,n)=>{var t,l,o;const i=null===(l=((null==e||null===(t=e.owners)||void 0===t?void 0:t.filter(e=>1==e.active))||[]).sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===l||null===(o=l.map(e=>e.name))||void 0===o?void 0:o.join(",");return{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:n(""+(null==e?void 0:e.propertyId))||n("CS_NA")},{title:n("WS_OWN_DETAIL_NAME"),value:i||n("CS_NA")},{title:n("WS_PROPERTY_ADDRESS_LABEL"),value:j(null==e?void 0:e.address)||n("CS_NA")}]}},V=(e,n)=>({title:n("WS_COMMON_CONNECTION_DETAILS"),values:"NEW_WATER_CONNECTION"==(null==e?void 0:e.applicationType)?[{title:n("WS_APPLY_FOR"),value:n(null==e?void 0:e.applicationType)||n("CS_NA")},{title:n("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),value:(null==e?void 0:e.proposedTaps)||n("CS_NA")},{title:n("WS_TASK_DETAILS_CONN_DETAIL_PIPE_SIZE_PROPOSED"),value:(null==e?void 0:e.proposedPipeSize)||n("CS_NA")}]:[{title:n("WS_APPLY_FOR"),value:n(null==e?void 0:e.applicationType)||n("CS_NA")},{title:n("WS_NO_WATER_CLOSETS_LABEL"),value:(null==e?void 0:e.proposedWaterClosets)||n("CS_NA")},{title:n("WS_SERV_DETAIL_NO_OF_TOILETS"),value:(null==e?void 0:e.proposedToilets)||n("CS_NA")}]}),Y=(e,n)=>{var t,l,o,i,a,r,u,d,s,c,v;return{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:(null==e||null===(t=e.connectionHolders)||void 0===t?void 0:t.length)>0?[{title:n("WS_OWN_DETAIL_NAME"),value:(null==e||null===(l=e.connectionHolders)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)||n("CS_NA")},{title:n("CORE_COMMON_MOBILE_NUMBER"),value:(null==e||null===(i=e.connectionHolders)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.mobileNumber)||n("CS_NA")},{title:n("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),value:(null==e||null===(r=e.connectionHolders)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fatherOrHusbandName)||n("CS_NA")},{title:n("WS_CORRESPONDANCE_ADDRESS_LABEL"),value:(null==e||null===(d=e.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.correspondenceAddress)||n("CS_NA")},{title:n("WS_EMAIL_ID"),value:(null==e||null===(c=e.connectionHolders)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.emailId)||n("CS_NA")}]:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:n("SCORE_YES")||n("CS_NA")}]}},G=(e,n)=>{const t=null==e?void 0:e.documents;return{title:n("WS_COMMON_DOCUMENTS_DETAILS"),isAttachments:!0,values:null==t?void 0:t.map(e=>n(null==e?void 0:e.documentType))}},q=function(e,n,t,l){try{var o,i;function a(){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a;let r=[];return null!=e&&e.applicationNo&&r.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.applicationNo}),null!=e&&e.connectionNo&&r.push({title:n("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL")+":",value:null==e?void 0:e.connectionNo}),{title:"",email:"",phoneNumber:"",isHeader:!0,typeOfApplication:null!=e&&null!==(l=e.applicationNo)&&void 0!==l&&l.includes("SW")?n("WS_NEW_SEWERAGE_CONNECTION"):n("WS_COMMON_INBOX_NEWWS1"),date:(null!=e&&null!==(o=e.auditDetails)&&void 0!==o&&o.createdTime?Digit.DateUtils.ConvertEpochToDate(null==e||null===(i=e.auditDetails)||void 0===i?void 0:i.createdTime):Digit.DateUtils.ConvertEpochToDate(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.appCreatedDate))||"NA",values:r,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(o){return{t:l,tenantId:t,title:"PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",name:""+l("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),email:"",phoneNumber:"",headerDetails:[o],details:[z(n,l),Y(e,l),V(e,l),G(e,l)]}})}const r=null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(i=o.applicationDocuments)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let u;const d=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){u=e})}();return Promise.resolve(d&&d.then?d.then(a):a())}catch(e){return Promise.reject(e)}},K=(e,n,t)=>n===e?t("WS_NO_CHANGE"):n,X=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},$=(e,n,t)=>{var l,o,i,a;const r=(null==e||null===(l=e.owners)||void 0===l?void 0:l.filter(e=>1==e.active))||[],u=null==r||null===(o=r.map(e=>e.name))||void 0===o?void 0:o.join(","),d=(null==n||null===(i=n.owners)||void 0===i?void 0:i.filter(e=>1==e.active))||[],s=null==d||null===(a=d.map(e=>e.name))||void 0===a?void 0:a.join(","),c=!(s===u);return{title:[t("WS_COMMON_PROPERTY_DETAILS"),t("WS_CURRENT_VALUE"),t("WS_OLD_VALUE")],values:[{val1:t("WS_PROPERTY_ID_LABEL"),val2:t(""+(null==e?void 0:e.propertyId))||t("CS_NA"),val3:K(null==e?void 0:e.propertyId,null==n?void 0:n.propertyId,t)},{val1:t("WS_OWN_DETAIL_NAME"),val2:u||t("CS_NA"),val3:c?s:t("WS_NO_CHANGE")},{val1:t("WS_PROPERTY_ADDRESS_LABEL"),val2:X(null==e?void 0:e.address)||t("CS_NA"),val3:c?X(null==n?void 0:n.address):t("WS_NO_CHANGE")}]}},Z=(e,n,t)=>{var l,o,i;return{title:[t("WS_COMMON_CONNECTION_DETAILS"),t(""),t("")],values:"MODIFY_WATER_CONNECTION"==(null==e?void 0:e.applicationType)?[{val1:t("WS_SERV_DETAIL_CONN_TYPE"),val2:null==e?void 0:e.connectionType,val3:K(null==e?void 0:e.connectionType,null==n?void 0:n.connectionType,t)},{val1:t("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),val2:(null==e?void 0:e.noOfTaps)||t("CS_NA"),val3:K(null==e?void 0:e.noOfTaps,null==n?void 0:n.noOfTaps,t)},{val1:t("WS_TASK_DETAILS_CONN_DETAIL_PIPE_SIZE_PROPOSED"),val2:(null==e?void 0:e.pipeSize)||t("CS_NA"),val3:K(null==e?void 0:e.pipeSize,null==n?void 0:n.pipeSize,t)},{val1:t("WS_SERV_DETAIL_WATER_SOURCE"),val2:t("WS_SERVICES_MASTERS_WATERSOURCE_"+(null==e?void 0:e.waterSource.split(".")[0])),val3:K(t("WS_SERVICES_MASTERS_WATERSOURCE_"+(null==e?void 0:e.waterSource.split(".")[0])),t("WS_SERVICES_MASTERS_WATERSOURCE_"+(null==n?void 0:n.waterSource.split(".")[0])),t)},{val1:t("WS_SERV_DETAIL_WATER_SUB_SOURCE"),val2:t("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e?void 0:e.waterSource,".","_")),val3:K(t("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e?void 0:e.waterSource,".","_")),t("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==n?void 0:n.waterSource,".","_")),t)},{val1:t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),val2:v(null==e?void 0:e.connectionExecutionDate),val3:K(null==e?void 0:e.connectionExecutionDate,null==n?void 0:n.connectionExecutionDate,t)!==t("WS_NO_CHANGE")?v(K(null==e?void 0:e.connectionExecutionDate,null==n?void 0:n.connectionExecutionDate,t)):t("WS_NO_CHANGE")},{val1:t("WS_SERV_DETAIL_METER_ID"),val2:null==e?void 0:e.meterId,val3:K(null==e?void 0:e.meterId,null==n?void 0:n.meterId,t)},{val1:t("WS_ADDN_DETAIL_METER_INSTALL_DATE"),val2:v(null==e?void 0:e.meterInstallationDate),val3:K(v(null==e?void 0:e.meterInstallationDate),v(null==n?void 0:n.meterInstallationDate),t)},{val1:t("WS_INITIAL_METER_READING_LABEL"),val2:(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.initialMeterReading)||t("CS_NA"),val3:K(null==e||null===(o=e.additionalDetails)||void 0===o?void 0:o.initialMeterReading,null==n||null===(i=n.additionalDetails)||void 0===i?void 0:i.initialMeterReading,t)},{val1:t("WS_MODIFICATIONS_EFFECTIVE_DATE"),val2:v(null==e?void 0:e.dateEffectiveFrom),val3:K(v(null==e?void 0:e.dateEffectiveFrom),v(null==n?void 0:n.dateEffectiveFrom),t)}]:[{val1:t("WS_SERV_DETAIL_CONN_TYPE"),val2:null==e?void 0:e.connectionType,val3:K(null==e?void 0:e.connectionType,null==n?void 0:n.connectionType,t)},{val1:t("WS_NO_WATER_CLOSETS_LABEL"),val2:(null==e?void 0:e.noOfWaterClosets)||t("CS_NA"),val3:K(null==e?void 0:e.noOfWaterClosets,null==n?void 0:n.noOfWaterClosets,t)},{val1:t("WS_SERV_DETAIL_NO_OF_TOILETS"),val2:(null==e?void 0:e.noOfToilets)||t("CS_NA"),val3:K(null==e?void 0:e.noOfToilets,null==n?void 0:n.noOfToilets,t)},{val1:t("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),val2:v(null==e?void 0:e.connectionExecutionDate),val3:K(null==e?void 0:e.connectionExecutionDate,null==n?void 0:n.connectionExecutionDate,t)},{val1:t("WS_MODIFICATIONS_EFFECTIVE_DATE"),val2:v(null==e?void 0:e.dateEffectiveFrom),val3:K(v(null==e?void 0:e.dateEffectiveFrom),v(null==n?void 0:n.dateEffectiveFrom),t)}]}},J=(e,n,t)=>{var l,o;const i=(null==n||null===(l=n.connectionHolders)||void 0===l?void 0:l.length)>0,a=(null==e||null===(o=e.connectionHolders)||void 0===o?void 0:o.length)>0;var r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,X,$,Z,J,Q,ee,ne,te,le;return i&&a?{title:[t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),t(""),t("")],values:[{val1:t("WS_OWN_DETAIL_NAME"),val2:(null==e||null===(r=e.connectionHolders)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.name)||t("CS_NA"),val3:K(null==e||null===(d=e.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.name,null==n||null===(c=n.connectionHolders)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.name,t)},{val1:t("CORE_COMMON_MOBILE_NUMBER"),val2:(null==e||null===(p=e.connectionHolders)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.mobileNumber)||t("CS_NA"),val3:K(null==e||null===(E=e.connectionHolders)||void 0===E||null===(S=E[0])||void 0===S?void 0:S.mobileNumber,null==n||null===(_=n.connectionHolders)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.mobileNumber,t)},{val1:t("CORE_COMMON_EMAIL_ID"),val2:(null==e||null===(C=e.connectionHolders)||void 0===C||null===(g=C[0])||void 0===g?void 0:g.emailId)||t("CS_NA"),val3:K(null==e||null===(N=e.connectionHolders)||void 0===N||null===(y=N[0])||void 0===y?void 0:y.emailId,null==n||null===(T=n.connectionHolders)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.emailId,t)},{val1:t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),val2:(null==e||null===(A=e.connectionHolders)||void 0===A||null===(I=A[0])||void 0===I?void 0:I.fatherOrHusbandName)||t("CS_NA"),val3:K(null==e||null===(h=e.connectionHolders)||void 0===h||null===(O=h[0])||void 0===O?void 0:O.fatherOrHusbandName,null==n||null===(b=n.connectionHolders)||void 0===b||null===(L=b[0])||void 0===L?void 0:L.fatherOrHusbandName,t)},{val1:t("WS_CORRESPONDANCE_ADDRESS_LABEL"),val2:(null==e||null===(R=e.connectionHolders)||void 0===R||null===(w=R[0])||void 0===w?void 0:w.correspondenceAddress)||t("CS_NA"),val3:K(null==e||null===(W=e.connectionHolders)||void 0===W||null===(P=W[0])||void 0===P?void 0:P.correspondenceAddress,null==n||null===(M=n.connectionHolders)||void 0===M||null===(x=M[0])||void 0===x?void 0:x.correspondenceAddress,t)}]}:a&&!i?{title:[t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),t(""),t("")],values:[{val1:t("WS_OWN_DETAIL_NAME"),val2:(null==e||null===(B=e.connectionHolders)||void 0===B||null===(F=B[0])||void 0===F?void 0:F.name)||t("CS_NA"),val3:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("CORE_COMMON_MOBILE_NUMBER"),val2:(null==e||null===(U=e.connectionHolders)||void 0===U||null===(k=U[0])||void 0===k?void 0:k.mobileNumber)||t("CS_NA"),val3:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("CORE_COMMON_EMAIL_ID"),val2:(null==e||null===(H=e.connectionHolders)||void 0===H||null===(j=H[0])||void 0===j?void 0:j.emailId)||t("CS_NA"),val3:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),val2:(null==e||null===(z=e.connectionHolders)||void 0===z||null===(V=z[0])||void 0===V?void 0:V.fatherOrHusbandName)||t("CS_NA"),val3:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("WS_CORRESPONDANCE_ADDRESS_LABEL"),val2:(null==e||null===(Y=e.connectionHolders)||void 0===Y||null===(G=Y[0])||void 0===G?void 0:G.correspondenceAddress)||t("CS_NA"),val3:t("WS_SAME_AS_PROPERTY_OWNERS")}]}:!a&&i?{title:[t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),t(""),t("")],values:[{val1:t("WS_OWN_DETAIL_NAME"),val3:(null==n||null===(q=n.connectionHolders)||void 0===q||null===(X=q[0])||void 0===X?void 0:X.name)||t("CS_NA"),val2:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("CORE_COMMON_MOBILE_NUMBER"),val3:(null==n||null===($=n.connectionHolders)||void 0===$||null===(Z=$[0])||void 0===Z?void 0:Z.mobileNumber)||t("CS_NA"),val2:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("CORE_COMMON_EMAIL_ID"),val3:(null==n||null===(J=n.connectionHolders)||void 0===J||null===(Q=J[0])||void 0===Q?void 0:Q.emailId)||t("CS_NA"),val2:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),val3:(null==n||null===(ee=n.connectionHolders)||void 0===ee||null===(ne=ee[0])||void 0===ne?void 0:ne.fatherOrHusbandName)||t("CS_NA"),val2:t("WS_SAME_AS_PROPERTY_OWNERS")},{val1:t("WS_CORRESPONDANCE_ADDRESS_LABEL"),val3:(null==n||null===(te=n.connectionHolders)||void 0===te||null===(le=te[0])||void 0===le?void 0:le.correspondenceAddress)||t("CS_NA"),val2:t("WS_SAME_AS_PROPERTY_OWNERS")}]}:{title:[t("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),t(""),t("")],values:[{val1:t("WS_SAME_AS_PROPERTY_OWNERS"),val2:t("SCORE_YES")||t("CS_NA"),val3:t("SCORE_YES")}]}},Q=(e,n)=>{const t=null==e?void 0:e.documents;return{title:n("WS_COMMON_DOCUMENTS_DETAILS"),isAttachments:!0,values:(null==t?void 0:t.length)>0?null==t?void 0:t.map(e=>n(null==e?void 0:e.documentType)):[n("BPA_NO_DOCUMENTS_UPLOADED_LABEL")]}},ee=function(e,n,t,l,o){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a,r,u,d,s;let c=[];return null!=e&&e.applicationNo&&c.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.applicationNo}),null!=e&&e.connectionNo&&c.push({title:n("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL")+":",value:null==e?void 0:e.connectionNo}),{title:"",isHeader:!0,header:n((null==e||null===(l=e.tenantId)||void 0===l||null===(o=l.replace(".","_"))||void 0===o?void 0:o.toUpperCase())+"_HEADER_LABEL"),subHeader:n((null==e||null===(i=e.tenantId)||void 0===i||null===(a=i.replace(".","_"))||void 0===a?void 0:a.toUpperCase())+"_SUB_HEADER_LABEL"),description:n((null==e||null===(r=e.tenantId)||void 0===r||null===(u=r.replace(".","_"))||void 0===u?void 0:u.toUpperCase())+"_DES_HEADER_LABEL"),typeOfApplication:null!=e&&null!==(d=e.applicationNo)&&void 0!==d&&d.includes("SW")?n("CS_COMMON_INBOX_MODIFYSWCONNECTION"):n("WS_COMMON_INBOX_MODIFYWSCONNECTION"),date:Digit.DateUtils.ConvertEpochToDate(null==e||null===(s=e.auditDetails)||void 0===s?void 0:s.createdTime)||"NA",values:c,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(i){return Promise.resolve(Digit.PTService.search({tenantId:t,filters:{propertyIds:null==o?void 0:o.propertyId}})).then(function(a){var r;const u=null==a||null===(r=a.Properties)||void 0===r?void 0:r[0];return{tenantId:t,headerDetails:[i],bodyDetails:[$(n,u,l),J(e,o,l),Z(e,o,l),Q(e,l)]}})})},ne=e=>{var a,r,u,d,s,c,v,p,E,S;const{t:_}=l.useTranslation(),f=Digit.ULBService.getCurrentTenantId(),C=o.useHistory();let g=m(location.search);const[N,y]=n.useState({}),[T,D]=n.useState({}),{data:A}=Digit.Hooks.ws.useWSDetailsPage(_,f,null==g?void 0:g.applicationNumber,"WATER",{enabled:!(null==g||!g.applicationNumber)}),{data:I}=Digit.Hooks.ws.useWSDetailsPage(_,f,null==g?void 0:g.applicationNumber1,"SEWERAGE",{enabled:!(null==g||!g.applicationNumber1)});n.useEffect(function(){try{return y(A),D(I),Promise.resolve()}catch(e){return Promise.reject(e)}},[A,I]);const{data:h}=Digit.Hooks.ws.useOldValue({tenantId:f,filters:{connectionNumber:null==N||null===(a=N.applicationData)||void 0===a?void 0:a.connectionNo,isConnectionSearch:!0},businessService:"WATER"},{enabled:!(null==N||null===(r=N.applicationData)||void 0===r||null===(u=r.applicationType)||void 0===u||!u.includes("MODIFY_"))}),{data:O}=Digit.Hooks.ws.useOldValue({tenantId:f,filters:{connectionNumber:null==T||null===(d=T.applicationData)||void 0===d?void 0:d.connectionNo,isConnectionSearch:!0},businessService:"SEWERAGE"},{enabled:!(null==T||null===(s=T.applicationData)||void 0===s||null===(c=s.applicationType)||void 0===c||!c.includes("MODIFY_"))}),b=null==h||null===(v=h.WaterConnection)||void 0===v?void 0:v[(null==h||null===(p=h.WaterConnection)||void 0===p?void 0:p.length)-1],L=null==O||null===(E=O.SewerageConnections)||void 0===E?void 0:E[(null==O||null===(S=O.SewerageConnections)||void 0===S?void 0:S.length)-1];return t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.Banner,{message:_("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"),applicationNumber:null==g?void 0:g.applicationNumber,applicationNumberOne:null==g?void 0:g.applicationNumber1,info:null!=g&&g.applicationNumber?_("WS_WATER_APPLICATION_NUMBER_LABEL"):"",infoOne:null!=g&&g.applicationNumber1?_("WS_SEWERAGE_APPLICATION_NUMBER_LABEL"):"",successful:!0,style:{padding:"10px"},headerStyles:{fontSize:"32px"},infoOneStyles:{paddingTop:"20px"}}),t.createElement(i.CardText,{style:{paddingBottom:"10px",marginBottom:"10px"}},_("WS_MESSAGE_SUB_DESCRIPTION_LABEL")),t.createElement("div",{style:{display:"flex"}},(null==g?void 0:g.applicationNumber)&&t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:function(){try{var e,n,t;const o=null==N||null===(e=N.applicationData)||void 0===e?void 0:e.tenantId;let i=null==N?void 0:N.applicationData;var l;return null!=N&&null!==(n=N.applicationData)&&void 0!==n&&null!==(t=n.applicationType)&&void 0!==t&&t.includes("MODIFY_")?(ee({...null==h||null===(l=h.WaterConnection)||void 0===l?void 0:l[0]},{...null==N?void 0:N.propertyDetails},o,_,b).then(e=>Digit.Utils.pdf.generateModifyPdf(e)),Promise.resolve()):(q({...i},{...null==N?void 0:N.propertyDetails},o,_).then(e=>Digit.Utils.pdf.generatev1(e)),Promise.resolve())}catch(e){return Promise.reject(e)}}},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),_("WS_PRINT_WATER_APPLICATION_LABEL")),(null==g?void 0:g.applicationNumber1)&&t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:function(){try{var e,n,t;const o=null==T||null===(e=T.applicationData)||void 0===e?void 0:e.tenantId;let i=null==T?void 0:T.applicationData;var l;return null!=T&&null!==(n=T.applicationData)&&void 0!==n&&null!==(t=n.applicationType)&&void 0!==t&&t.includes("MODIFY_")?(ee({...null==O||null===(l=O.SewerageConnections)||void 0===l?void 0:l[0]},{...null==T?void 0:T.propertyDetails},o,_,L).then(e=>Digit.Utils.pdf.generateModifyPdf(e)),Promise.resolve()):(q({...i},{...null==T?void 0:T.propertyDetails},o,_).then(e=>Digit.Utils.pdf.generatev1(e)),Promise.resolve())}catch(e){return Promise.reject(e)}}},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),_("WS_PRINT_SEWERAGE_APPLICATION_LABEL"))),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:_("CORE_COMMON_GO_TO_HOME"),onSubmit:()=>{C.push("/digit-ui/employee")},style:{margin:"10px 10px 0px 0px"}}))))},te=function(e,n,t,l,o){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a,r,u,d;let s=[];null!=e&&e.amendmentId&&s.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.amendmentId}),null!=e&&e.consumerCode&&s.push({title:n("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL")+":",value:null==e?void 0:e.consumerCode});const c={title:n("WS_DEMAND_REVISION_BASIS_DETAILS"),values:[{title:n("WS_DEMAND_REVISION_BASIS"),value:n(null==e?void 0:e.amendmentReason)||n("CS_NA")},{title:n((p=null==e?void 0:e.amendmentReason,"COURT_CASE_SETTLEMENT"===p?"WS_COURT_ORDER_NO":"ARREAR_WRITE_OFF"===p||"ONE_TIME_SETTLEMENT"===p?"WS_GOVERNMENT_NOTIFICATION_NUMBER":"WS_DOCUMENT_NO")),value:(null==e?void 0:e.reasonDocumentNumber)||n("CS_NA")},{title:n("WS_COMMON_FROM_DATE_LABEL"),value:v(null==e?void 0:e.effectiveFrom)},{..."COURT_CASE_SETTLEMENT"!==(null==e?void 0:e.amendmentReason)&&{title:n("WS_COMMON_TO_DATE_LABEL"),value:v(null==e?void 0:e.effectiveTill)}}]};var p;const m=null==e?void 0:e.documents,E={title:n("WS_COMMON_DOCUMENTS_DETAILS"),isAttachments:!0,values:null==m?void 0:m.map(e=>n(null==e?void 0:e.documentType))};return{title:"",isHeader:!0,header:n((null==e||null===(l=e.tenantId)||void 0===l||null===(o=l.replace(".","_"))||void 0===o?void 0:o.toUpperCase())+"_HEADER_LABEL"),subHeader:n((null==e||null===(i=e.tenantId)||void 0===i||null===(a=i.replace(".","_"))||void 0===a?void 0:a.toUpperCase())+"_SUB_HEADER_LABEL"),description:n((null==e||null===(r=e.tenantId)||void 0===r||null===(u=r.replace(".","_"))||void 0===u?void 0:u.toUpperCase())+"_DES_HEADER_LABEL"),typeOfApplication:n("WS_BILL_AMEND_APP"),date:Digit.DateUtils.ConvertEpochToDate(null==e||null===(d=e.auditDetails)||void 0===d?void 0:d.createdTime)||"NA",values:s,DemandRevision:c,Attachments:E,...t}})}catch(e){return Promise.reject(e)}}(e,t,n)).then(function(e){return{tenantId:n,headerDetails:e,bodyDetails:l[1],t:t}})},le=()=>{var e,a,r,u,d,s,c;const v=Digit.ULBService.getCurrentTenantId(),{state:p}=o.useLocation(),{t:m}=l.useTranslation();let E="WATER";(null==p||null===(e=p.Amendment)||void 0===e?void 0:e.consumerCode).includes("SW")&&(E="SEWERAGE");const{mutate:S,isSuccess:_,isError:f,isLoading:C,data:g}=Digit.Hooks.ws.useCreateBillAmendment(),{isLoading:N,data:y}=Digit.Hooks.ws.useWSApplicationDetailsBillAmendment(m,v,null==g||null===(a=g.Amendments)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.amendmentId,E,{enabled:_});return n.useEffect(()=>{null!=p&&p.Amendment&&S(p)},[]),t.createElement("div",null,C||N?t.createElement(i.Loader,null):t.createElement(i.Card,null,t.createElement(i.Banner,{message:m(_?"WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL":"CS_WATER_UPDATE_APPLICATION_FAILED"),applicationNumber:null==g||null===(u=g.Amendments)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.amendmentId,info:_?m("WS_MYCONNECTIONS_APPLICATION_NO"):"",successful:!!_}),f?null:t.createElement(i.CardText,null,m("WS_MESSAGE_SUB_DESCRIPTION_LABEL")),(_||!(null==g||null===(s=g.Amendments)||void 0===s||null===(c=s[0])||void 0===c||!c.amendmentId))&&!f&&t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:()=>{!function(e,n,t,l,o){try{te(e,n,t,l).then(e=>Digit.Utils.pdf.generateBillAmendPDF(e)),Promise.resolve()}catch(e){return Promise.reject(e)}}(null==y?void 0:y.amendment,v,m,null==y?void 0:y.applicationDetails)}},t.createElement("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"3px"}},t.createElement("path",{d:"M17 5H3C1.34 5 0 6.34 0 8V14H4V18H16V14H20V8C20 6.34 18.66 5 17 5ZM14 16H6V11H14V16ZM17 9C16.45 9 16 8.55 16 8C16 7.45 16.45 7 17 7C17.55 7 18 7.45 18 8C18 8.55 17.55 9 17 9ZM16 0H4V4H16V0Z",fill:"#a82227"})),m("WS_PRINT_APPLICATION_LABEL")),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(o.Link,{to:"/digit-ui/employee",style:{marginRight:"1rem"}},t.createElement(i.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")})))))},oe=()=>{var e,n,a;const{state:r}=o.useLocation(),{t:u}=l.useTranslation();return t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.Banner,{message:u(r?"WS_BILL_AMENDMENT_BANNER":"WS_BILL_AMENDMENT_FAILURE"),applicationNumber:null==r||null===(e=r.state)||void 0===e||null===(n=e.Amendments)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.amendmentId,info:"",successful:!(null==r||!r.status)}),r.status?t.createElement(i.CardText,null,u("WS_BILL_AMENDMENT_MESSAGE")):null,t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(o.Link,{to:"/digit-ui/employee",style:{marginRight:"1rem"}},t.createElement(i.SubmitBar,{label:u("CORE_COMMON_GO_TO_HOME")})))))},ie=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},ae=(e,n)=>{var t,l,o;const i=null===(l=((null==e||null===(t=e.owners)||void 0===t?void 0:t.filter(e=>1==e.active))||[]).sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===l||null===(o=l.map(e=>e.name))||void 0===o?void 0:o.join(",");return{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:n(""+(null==e?void 0:e.propertyId))||n("CS_NA")},{title:n("WS_OWN_DETAIL_NAME"),value:i||n("CS_NA")},{title:n("WS_PROPERTY_ADDRESS_LABEL"),value:ie(null==e?void 0:e.address)||n("CS_NA")}]}},re=(e,n)=>{var t,l,o,i,a,r,u,d,s,c;return{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:null!==(null==e?void 0:e.connectionHolders)?[{title:n("WS_OWN_DETAIL_NAME"),value:(null==e||null===(t=e.connectionHolders)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.name)||n("CS_NA")},{title:n("CORE_COMMON_MOBILE_NUMBER"),value:(null==e||null===(o=e.connectionHolders)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.mobileNumber)||n("CS_NA")},{title:n("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),value:(null==e||null===(a=e.connectionHolders)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.fatherOrHusbandName)||n("CS_NA")},{title:n("WS_CORRESPONDANCE_ADDRESS_LABEL"),value:(null==e||null===(u=e.connectionHolders)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.correspondenceAddress)||n("CS_NA")},{title:n("CORE_COMMON_EMAIL_ID"),value:(null==e||null===(s=e.connectionHolders)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.emailId)||n("CS_NA")}]:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:n("SCORE_YES")||n("CS_NA")}]}},ue=(e,n)=>({title:n("WS_DISCONNECTION_DETAILS"),values:[{title:n("WS_DISCONNECTION_TYPE"),value:!0===(null==e?void 0:e.isDisconnectionTemporary)?n("WS_DISCONNECTIONTYPE_TEMPORARY"):n("WS_DISCONNECTIONTYPE_PERMANENT")||n("CS_NA")},{title:n("WS_DISCONNECTION_PROPOSED_DATE"),value:Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.dateEffectiveFrom)||n("CS_NA")},{title:n("WS_DISCONNECTION_REASON"),value:(null==e?void 0:e.disconnectionReason)||n("CS_NA")}]}),de=(e,n)=>{const t=null==e?void 0:e.documents;return{title:n("WS_COMMON_DOCUMENTS_DETAILS"),isAttachments:!0,values:null==t?void 0:t.map(e=>n(null==e?void 0:e.documentType))}},se=function(e,n,t,l){try{var o,i;function a(){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a,r,u,d,s;let c=[];return null!=e&&e.applicationNo&&c.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.applicationNo}),null!=e&&e.applicationType&&c.push({title:n("WS_SERVICE_NAME")+":",value:n("WS_APPLICATION_TYPE_"+(null==e?void 0:e.applicationType))}),{title:"",email:"",phoneNumber:"",isHeader:!0,header:n((null==e||null===(l=e.tenantId)||void 0===l||null===(o=l.replace(".","_"))||void 0===o?void 0:o.toUpperCase())+"_HEADER_LABEL"),subHeader:n((null==e||null===(i=e.tenantId)||void 0===i||null===(a=i.replace(".","_"))||void 0===a?void 0:a.toUpperCase())+"_SUB_HEADER_LABEL"),description:n((null==e||null===(r=e.tenantId)||void 0===r||null===(u=r.replace(".","_"))||void 0===u?void 0:u.toUpperCase())+"_DES_HEADER_LABEL"),typeOfApplication:null!=e&&null!==(d=e.applicationNo)&&void 0!==d&&d.includes("SW")?n("WS_SEWERAGE_DISCONNECTION"):n("WS_WATER_DISCONNECTION"),date:Digit.DateUtils.ConvertEpochToDate(null==e||null===(s=e.additionalDetails)||void 0===s?void 0:s.appCreatedDate)||"NA",values:c,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(o){return{t:l,tenantId:t,email:"",phoneNumber:"",headerDetails:[o],details:[ae(n,l),re(e,l),ue(e,l),de(e,l)]}})}const r=null==e||null===(o=e.DisconnectionResponse)||void 0===o||null===(i=o.documents)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let u;const d=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){u=e})}();return Promise.resolve(d&&d.then?d.then(a):a())}catch(e){return Promise.reject(e)}},ce=e=>{var n;const{t:a}=l.useTranslation(),r=(Digit.ULBService.getCurrentTenantId(),o.useHistory());let u=m(location.search);const d=Digit.SessionStorage.get("WS_DISCONNECTION");return t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.Banner,{message:a("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"),applicationNumber:null==u?void 0:u.applicationNumber,info:null!=u&&null!==(n=u.applicationNumber)&&void 0!==n&&n.includes("WS")?a("WS_WATER_APPLICATION_NUMBER_LABEL"):a("WS_SEWERAGE_APPLICATION_NUMBER_LABEL"),successful:!0,style:{padding:"10px"},headerStyles:{fontSize:"32px"},infoOneStyles:{paddingTop:"20px"}}),t.createElement(i.CardText,{style:{paddingBottom:"10px",marginBottom:"10px"}},a("WS_MESSAGE_SUB_DESCRIPTION_LABEL")),t.createElement("div",{style:{display:"flex"}},t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:()=>{const e=null==d?void 0:d.DisconnectionResponse;se(e,null==d?void 0:d.propertyDetails,null==e?void 0:e.tenantId,a).then(e=>Digit.Utils.pdf.generatev1(e))}},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),a("WS_PRINT_APPLICATION_LABEL"))),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:a("CORE_COMMON_GO_TO_HOME"),onSubmit:()=>{r.push("/digit-ui/employee")},style:{margin:"10px 10px 0px 0px"}}))))},ve=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},pe=(e,n)=>{var t,l,o;const i=null===(l=((null==e||null===(t=e.owners)||void 0===t?void 0:t.filter(e=>1==e.active))||[]).sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===l||null===(o=l.map(e=>e.name))||void 0===o?void 0:o.join(",");return{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:n(""+(null==e?void 0:e.propertyId))||n("CS_NA")},{title:n("WS_OWN_DETAIL_NAME"),value:i||n("CS_NA")},{title:n("WS_PROPERTY_ADDRESS_LABEL"),value:ve(null==e?void 0:e.address)||n("CS_NA")}]}},me=(e,n)=>{var t,l,o,i,a,r,u,d,s,c;return{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:null!==(null==e?void 0:e.connectionHolders)?[{title:n("WS_OWN_DETAIL_NAME"),value:(null==e||null===(t=e.connectionHolders)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.name)||n("CS_NA")},{title:n("CORE_COMMON_MOBILE_NUMBER"),value:(null==e||null===(o=e.connectionHolders)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.mobileNumber)||n("CS_NA")},{title:n("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),value:(null==e||null===(a=e.connectionHolders)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.fatherOrHusbandName)||n("CS_NA")},{title:n("WS_CORRESPONDANCE_ADDRESS_LABEL"),value:(null==e||null===(u=e.connectionHolders)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.correspondenceAddress)||n("CS_NA")},{title:n("CORE_COMMON_EMAIL_ID"),value:(null==e||null===(s=e.connectionHolders)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.emailId)||n("CS_NA")}]:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:n("SCORE_YES")||n("CS_NA")}]}},Ee=(e,n)=>({title:n("WS_RESTORATION_DETAILS"),values:[{title:n("WS_RESTORATION_PROPOSED_DATE"),value:Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.dateEffectiveFrom)||n("CS_NA")},{title:n("WS_RESTORATION_REASON"),value:(null==e?void 0:e.reconnectionReason)||n("CS_NA")}]}),Se=function(e,n,t,l){try{var o,i;function a(){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a,r,u,d,s;let c=[];return null!=e&&e.applicationNo&&c.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.applicationNo}),null!=e&&e.applicationType&&c.push({title:n("WS_SERVICE_NAME")+":",value:n("WS_APPLICATION_TYPE_"+(null==e?void 0:e.applicationType))}),{title:"",email:"",phoneNumber:"",isHeader:!0,header:n((null==e||null===(l=e.tenantId)||void 0===l||null===(o=l.replace(".","_"))||void 0===o?void 0:o.toUpperCase())+"_HEADER_LABEL"),subHeader:n((null==e||null===(i=e.tenantId)||void 0===i||null===(a=i.replace(".","_"))||void 0===a?void 0:a.toUpperCase())+"_SUB_HEADER_LABEL"),description:n((null==e||null===(r=e.tenantId)||void 0===r||null===(u=r.replace(".","_"))||void 0===u?void 0:u.toUpperCase())+"_DES_HEADER_LABEL"),typeOfApplication:null!=e&&null!==(d=e.applicationNo)&&void 0!==d&&d.includes("SW")?n("WS_SEWERAGE_RESTORATION"):n("WS_WATER_RESORATION"),date:Digit.DateUtils.ConvertEpochToDate(null==e||null===(s=e.additionalDetails)||void 0===s?void 0:s.appCreatedDate)||"NA",values:c,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(o){return{t:l,tenantId:t,email:"",phoneNumber:"",headerDetails:[o],details:[pe(n,l),me(e,l),Ee(e,l)]}})}const r=null==e||null===(o=e.DisconnectionResponse)||void 0===o||null===(i=o.documents)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let u;const d=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){u=e})}();return Promise.resolve(d&&d.then?d.then(a):a())}catch(e){return Promise.reject(e)}},_e=e=>{var n;const{t:a}=l.useTranslation(),r=(Digit.ULBService.getCurrentTenantId(),o.useHistory());let u=m(location.search);const d=Digit.SessionStorage.get("WS_DISCONNECTION");return t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.Banner,{message:a("WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"),applicationNumber:null==u?void 0:u.applicationNumber,info:null!=u&&null!==(n=u.applicationNumber)&&void 0!==n&&n.includes("WS")?a("WS_WATER_APPLICATION_NUMBER_LABEL"):a("WS_SEWERAGE_APPLICATION_NUMBER_LABEL"),successful:!0,style:{padding:"10px"},headerStyles:{fontSize:"32px"},infoOneStyles:{paddingTop:"20px"}}),t.createElement(i.CardText,{style:{paddingBottom:"10px",marginBottom:"10px"}},a("WS_MESSAGE_SUB_DESCRIPTION_LABEL")),t.createElement("div",{style:{display:"flex"}},t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:()=>{const e=null==d?void 0:d.DisconnectionResponse;Se(e,null==d?void 0:d.propertyDetails,null==e?void 0:e.tenantId,a).then(e=>Digit.Utils.pdf.generatev1(e))}},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),a("WS_PRINT_APPLICATION_LABEL"))),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:a("CORE_COMMON_GO_TO_HOME"),onSubmit:()=>{r.push("/digit-ui/employee")},style:{margin:"10px 10px 0px 0px"}}))))},fe=e=>{var n,a;let{location:r}=e;const{t:u}=l.useTranslation(),d=o.useLocation().search,s=new URLSearchParams(d).get("from")||null,c=new URLSearchParams(d).get("isEdit")||null,v=new URLSearchParams(d).get("applicationNumber")||null;let p=window.Digit.Utils.browser.isMobile(),m=window.location.href.split("?")[1],E=[{path:"/digit-ui/employee",content:u("ES_COMMON_HOME"),show:!0,style:p?{width:"20%"}:{}},{path:"/digit-ui/employee/ws/create-application",content:u("ES_COMMON_WS_DOCUMENTS_REQUIRED"),show:!!r.pathname.includes("/create-application")},{path:"/digit-ui/employee/water/inbox",content:u("ES_COMMON_BILLS_WATER_INBOX_LABEL"),show:!!r.pathname.includes("/water/inbox")},{path:"/digit-ui/employee/ws/water/bill-amendment/inbox",content:u("ES_COMMON_BILL_AMEND_WATER_INBOX_LABEL"),show:!!r.pathname.includes("/water/bill-amendment/inbox")},{path:"/digit-ui/employee/ws/sewerage/bill-amendment/inbox",content:u("ES_COMMON_BILL_AMEND_SEWERAGE_INBOX_LABEL"),show:!!r.pathname.includes("/sewerage/bill-amendment/inbox")},{path:"/digit-ui/employee/ws/water/search-application",content:s?u(s)+" / "+u("WS_SEARCH_APPLICATIONS"):u("WS_SEARCH_APPLICATIONS"),show:!!r.pathname.includes("/water/search-application"),isBack:s&&!0},{path:"/digit-ui/employee/ws/water/search-connection",content:s?u(s)+" / "+u("WS_SEARCH_CONNECTION"):u("WS_SEARCH_CONNECTION"),show:!!r.pathname.includes("/water/search-connection"),isBack:s&&!0},{path:"/digit-ui/employee/ws/water/wns-search",content:s?u(s)+" / "+u("WS_SEARCH_INTEGRATED_BILL"):u("WS_SEARCH_INTEGRATED_BILL"),show:!!r.pathname.includes("/water/wns-search"),isBack:s&&!0},{path:"/digit-ui/employee/ws/sewerage/search-application",content:s?u(s)+" / "+u("WS_SEARCH_APPLICATIONS"):u("WS_SEARCH_APPLICATIONS"),show:!!r.pathname.includes("/sewerage/search-application"),isBack:s&&!0},{path:"/digit-ui/employee/ws/sewerage/search-connection",content:s?u(s)+" / "+u("WS_SEARCH_CONNECTION"):u("WS_SEARCH_CONNECTION"),show:!!r.pathname.includes("/sewerage/search-connection"),isBack:s&&!0},{path:"/digit-ui/employee/sewerage/inbox",content:u("ES_COMMON_BILLS_SEWERAGE_INBOX_LABEL"),show:!!r.pathname.includes("/sewerage/inbox")},{path:"/digit-ui/employee/ws/new-application",content:u("ES_COMMON_WS_NEW_CONNECTION"),show:!!r.pathname.includes("/new-application")},{path:""+(null==r?void 0:r.pathname)+r.search,content:u("ACTION_TEST_RESPONSE"),show:!!r.pathname.includes("/ws-response")},{path:"/digit-ui/employee/ws/consumption-details",content:s?u(s)+" / "+u("WS_VIEW_CONSUMPTION_DETAIL"):u("WS_VIEW_CONSUMPTION_DETAIL"),show:!!r.pathname.includes("/consumption-details"),isBack:s&&!0},{path:"true"===sessionStorage.getItem("redirectedfromEDIT")?null!=v&&v.includes("SW_AP")?"/digit-ui/employee/ws/sewerage/search-application":"/digit-ui/employee/ws/water/search-application":"/digit-ui/employee/ws/application-details",content:s?u(s)+" / "+u("WS_APPLICATION_DETAILS_HEADER"):u("WS_APPLICATION_DETAILS_HEADER"),show:!!r.pathname.includes("/application-details"),isBack:"true"!==sessionStorage.getItem("redirectedfromEDIT")&&s&&!0},{path:"true"===sessionStorage.getItem("redirectedfromEDIT")?null!=v&&v.includes("SW_AP")?"/digit-ui/employee/ws/sewerage/search-application":"/digit-ui/employee/ws/water/search-application":"/digit-ui/employee/ws/modify-details",content:s?u(s)+" / "+u("WS_APPLICATION_DETAILS_HEADER"):u("WS_APPLICATION_DETAILS_HEADER"),show:!!r.pathname.includes("/modify-details"),isBack:"true"!==sessionStorage.getItem("redirectedfromEDIT")&&s&&!0},{path:"/digit-ui/employee/ws/disconnection-details",content:s?u(s)+" / "+u("WS_APPLICATION_DETAILS_HEADER"):u("WS_APPLICATION_DETAILS_HEADER"),show:!!r.pathname.includes("/disconnection-details"),isBack:s&&!0},{path:"/digit-ui/employee/ws/connection-details",content:s?u(s)+" / "+u("WS_COMMON_CONNECTION_DETAIL"):u("WS_COMMON_CONNECTION_DETAIL"),show:!!r.pathname.includes("/connection-details"),isBack:s&&!0},{path:"/digit-ui/employee/ws/edit-application",content:u("WS_APPLICATION_DETAILS_HEADER")+" / "+u("WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL"),show:!!r.pathname.includes("/edit-application"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:u("WS_APPLICATION_DETAILS_HEADER")+" / "+u("WF_EMPLOYEE_NEWSW1_ACTIVATE_CONNECTION"),show:!!r.pathname.includes("/activate-connection"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:u("WS_APPLICATION_DETAILS_HEADER")+" / "+u("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),show:!!r.pathname.includes("edit-disconnection-application"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:u("WS_APPLICATION_DETAILS_HEADER")+" / "+u("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),show:!!r.pathname.includes("config-by-disconnection-application"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:u("WS_APPLICATION_DETAILS_HEADER")+" / "+u("WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL"),show:!!r.pathname.includes("resubmit-disconnection-application"),isBack:!0},{path:"/digit-ui/employee/ws/new-disconnection/docsrequired",content:u("WS_NEW_DISCONNECTION_DOCS_REQUIRED"),show:!!r.pathname.includes("/new-disconnection/docsrequired")},{path:"/digit-ui/employee/ws/new-disconnection/application-form",content:u("WS_NEW_DISCONNECTION_DOCS_REQUIRED")+" / "+u("WS_NEW_DISCONNECTION_APPLICATION"),show:!!r.pathname.includes("/new-disconnection/application-form"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:""+u("WS_NEW_DISCONNECTION_RESPONSE"),show:!!r.pathname.includes("/ws-disconnection-response"),isBack:!0},{path:""+(null==r?void 0:r.pathname)+r.search,content:s?u(s)+" / "+u("WS_MODIFY_CONNECTION_BUTTON"):u("WS_MODIFY_CONNECTION_BUTTON"),show:!!r.pathname.includes("ws/modify-application"),isBack:!0},{path:"/digit-ui/employee/ws/required-documents",content:u("ES_COMMON_WS_DOCUMENTS_REQUIRED"),show:!!r.pathname.includes("/required-documents")},{path:m?"/digit-ui/employee/ws/bill-amendment?"+m:"/digit-ui/employee/ws/bill-amendment",content:u("WS_BILL_AMEND_APP"),show:!(!r.pathname.includes("ws/bill-amendment")||c)},{path:"/digit-ui/employee/ws/bill-amendment",content:u("WS_BILL_AMEND_EDIT_APP"),show:!(!r.pathname.includes("ws/bill-amendment")||!c)},{path:"/digit-ui/employee/ws/response",content:u("WS_ACK_SCREEN"),show:!!r.pathname.includes("/employee/ws/response"),isclickable:!1},{path:"/digit-ui/employee/ws/generate-note-bill-amendment",content:u("CS_TITLE_GENERATE_NOTE"),show:!!r.pathname.includes("/generate-note-bill-amendment")}],S=(f=(_=E).slice().reverse().findIndex(e=>!0===e.show))>=0?_.length-1-f:f;var _,f;return E[S]={...E[S],isclickable:!1},t.createElement("div",{style:null!==(n=window)&&void 0!==n&&n.location.href.includes("/employee/ws/bill-amendment")||null!==(a=window)&&void 0!==a&&a.location.href.includes("/employee/ws/response")?{marginLeft:"20px"}:{}},t.createElement(i.BreadCrumb,{crumbs:E,spanStyle:{maxWidth:"min-content"}}))},Ce=e=>{var n,l,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,te,ie,ae,re;let{path:ue}=e;const de=o.useLocation(),se=null===(n=Digit)||void 0===n||null===(l=n.ComponentRegistryService)||void 0===l?void 0:l.getComponent("WSDocsRequired"),ve=null===(a=Digit)||void 0===a||null===(r=a.ComponentRegistryService)||void 0===r?void 0:r.getComponent("WSInbox"),pe=null===(u=Digit)||void 0===u||null===(d=u.ComponentRegistryService)||void 0===d?void 0:d.getComponent("WSDisconnectionDocsRequired"),me=null===(s=Digit)||void 0===s||null===(c=s.ComponentRegistryService)||void 0===c?void 0:c.getComponent("WSApplicationBillAmendment"),Ee=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("WSRequiredDocuments"),Se=null===(m=Digit)||void 0===m||null===(E=m.ComponentRegistryService)||void 0===E?void 0:E.getComponent("WSNewApplication"),Ce=null===(S=Digit)||void 0===S||null===(_=S.ComponentRegistryService)||void 0===_?void 0:_.getComponent("WSApplicationDetails"),ge=null===(f=Digit)||void 0===f||null===(C=f.ComponentRegistryService)||void 0===C?void 0:C.getComponent("WSGetConnectionDetails"),Ne=null===(g=Digit)||void 0===g||null===(N=g.ComponentRegistryService)||void 0===N?void 0:N.getComponent("WSActivateConnection"),ye=null===(y=Digit)||void 0===y||null===(T=y.ComponentRegistryService)||void 0===T?void 0:T.getComponent("WSApplicationDetailsBillAmendment"),Te=null===(D=Digit)||void 0===D||null===(A=D.ComponentRegistryService)||void 0===A?void 0:A.getComponent("WSSearch"),De=null===(I=Digit)||void 0===I||null===(h=I.ComponentRegistryService)||void 0===h?void 0:h.getComponent("WSSearchWater"),Ae=null===(O=Digit)||void 0===O||null===(b=O.ComponentRegistryService)||void 0===b?void 0:b.getComponent("WSEditApplication"),Ie=null===(L=Digit)||void 0===L||null===(R=L.ComponentRegistryService)||void 0===R?void 0:R.getComponent("WSConsumptionDetails"),he=null===(w=Digit)||void 0===w||null===(W=w.ComponentRegistryService)||void 0===W?void 0:W.getComponent("WSModifyApplication"),Oe=null===(P=Digit)||void 0===P||null===(M=P.ComponentRegistryService)||void 0===M?void 0:M.getComponent("WSEditModifyApplication"),be=null===(x=Digit)||void 0===x||null===(B=x.ComponentRegistryService)||void 0===B?void 0:B.getComponent("WSDisconnectionApplication"),Le=null===(F=Digit)||void 0===F||null===(U=F.ComponentRegistryService)||void 0===U?void 0:U.getComponent("WSRestorationApplication"),Re=null===(k=Digit)||void 0===k||null===(j=k.ComponentRegistryService)||void 0===j?void 0:j.getComponent("WSEditApplicationByConfig"),we=null===(z=Digit)||void 0===z||null===(V=z.ComponentRegistryService)||void 0===V?void 0:V.getComponent("WSBillIAmendMentInbox"),We=null===(Y=Digit)||void 0===Y||null===(G=Y.ComponentRegistryService)||void 0===G?void 0:G.getComponent("WSGetDisconnectionDetails"),Pe=null===(q=Digit)||void 0===q||null===(K=q.ComponentRegistryService)||void 0===K?void 0:K.getComponent("WSModifyApplicationDetails"),Me=null===(X=Digit)||void 0===X||null===($=X.ComponentRegistryService)||void 0===$?void 0:$.getComponent("WSEditDisconnectionApplication"),xe=null===(Z=Digit)||void 0===Z||null===(J=Z.ComponentRegistryService)||void 0===J?void 0:J.getComponent("WSEditDisconnectionByConfig"),Be=null===(Q=Digit)||void 0===Q||null===(ee=Q.ComponentRegistryService)||void 0===ee?void 0:ee.getComponent("WSResubmitDisconnection"),Fe=null===(te=Digit)||void 0===te||null===(ie=te.ComponentRegistryService)||void 0===ie?void 0:ie.getComponent("WSSearchIntegrated"),Ue=null===(ae=Digit)||void 0===ae||null===(re=ae.ComponentRegistryService)||void 0===re?void 0:re.getComponent("WSBulkBillGeneration"),ke=window.location.href.includes("/employee/ws/new-application")||window.location.href.includes("/employee/ws/modify-application")||window.location.href.includes("/employee/ws/edit-application")||window.location.href.includes("/employee/ws/activate-connection")||window.location.href.includes("/employee/ws/application-details")||window.location.href.includes("/employee/ws/modify-details")||window.location.href.includes("/employee/ws/ws-response")||window.location.href.includes("/employee/ws/new-disconnection/application-form")||window.location.href.includes("/employee/ws/ws-disconnection-response")||window.location.href.includes("/employee/ws/consumption-details")||window.location.href.includes("/employee/ws/edit-disconnection-application")||window.location.href.includes("/employee/ws/config-by-disconnection-application")||window.location.href.includes("/employee/ws/resubmit-disconnection-application"),He=window.location.href.includes("/employee/ws/create-application")||window.location.href.includes("/employee/ws/new-disconnection/docsrequired");return t.createElement(o.Switch,null,t.createElement(t.Fragment,null,t.createElement("div",{className:"ground-container"},t.createElement("div",{style:ke?{marginLeft:"12px"}:He?{marginLeft:"25px"}:{marginLeft:"-4px"}},t.createElement(fe,{location:de})),t.createElement(i.PrivateRoute,{path:ue+"/create-application",component:se}),t.createElement(i.PrivateRoute,{path:ue+"/new-application",component:Se}),t.createElement(i.PrivateRoute,{path:ue+"/edit-application",component:Ae}),t.createElement(i.PrivateRoute,{path:ue+"/edit-disconnection-application",component:Me}),t.createElement(i.PrivateRoute,{path:ue+"/resubmit-disconnection-application",component:Be}),t.createElement(i.PrivateRoute,{path:ue+"/config-by-disconnection-application",component:xe}),t.createElement(i.PrivateRoute,{path:ue+"/application-details",component:Ce}),t.createElement(i.PrivateRoute,{path:ue+"/modify-details",component:Pe}),t.createElement(i.PrivateRoute,{path:ue+"/connection-details",component:ge}),t.createElement(i.PrivateRoute,{path:ue+"/bill-amendment",component:()=>t.createElement(me,{path:ue})}),t.createElement(i.PrivateRoute,{path:ue+"/generate-note-bill-amendment",component:()=>t.createElement(ye,{path:ue})}),t.createElement(i.PrivateRoute,{path:ue+"/response",component:()=>t.createElement(le,{path:ue})}),t.createElement(i.PrivateRoute,{path:ue+"/response-bill-amend",component:()=>t.createElement(oe,{path:ue})}),t.createElement(i.PrivateRoute,{path:ue+"/required-documents",component:()=>t.createElement(Ee,{path:ue})}),t.createElement(i.PrivateRoute,{path:ue+"/activate-connection",component:Ne}),t.createElement(i.PrivateRoute,{path:ue+"/water/search-application",component:e=>t.createElement(Te,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/sewerage/search-application",component:e=>t.createElement(Te,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/ws-response",component:ne}),t.createElement(i.PrivateRoute,{path:ue+"/ws-disconnection-response",component:ce}),t.createElement(i.PrivateRoute,{path:ue+"/ws-restoration-response",component:_e}),t.createElement(i.PrivateRoute,{path:ue+"/water/search-connection",component:e=>t.createElement(De,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/sewerage/search-connection",component:e=>t.createElement(De,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/water/search-demand",component:e=>t.createElement(De,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/sewerage/search-demand",component:e=>t.createElement(De,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/consumption-details",component:Ie}),t.createElement(i.PrivateRoute,{path:ue+"/modify-application",component:he}),t.createElement(i.PrivateRoute,{path:ue+"/modify-application-edit",component:Oe}),t.createElement(i.PrivateRoute,{path:ue+"/disconnection-application",component:pe}),t.createElement(i.PrivateRoute,{path:ue+"/new-disconnection",component:be}),t.createElement(i.PrivateRoute,{path:ue+"/new-restoration",component:Le}),t.createElement(i.PrivateRoute,{path:ue+"/bill-amend/inbox",component:e=>t.createElement(we,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/water/inbox",component:e=>t.createElement(ve,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/sewerage/inbox",component:e=>t.createElement(ve,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/edit-application-by-config",component:Re}),t.createElement(i.PrivateRoute,{path:ue+"/disconnection-details",component:We}),t.createElement(i.PrivateRoute,{path:ue+"/water/bill-amendment/inbox",component:e=>t.createElement(we,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/sewerage/bill-amendment/inbox",component:e=>t.createElement(we,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/water/wns-search",component:e=>t.createElement(Fe,H({},e,{parentRoute:ue}))}),t.createElement(i.PrivateRoute,{path:ue+"/water/bulk-bill",component:e=>t.createElement(Ue,H({},e,{parentRoute:ue}))}))))};let ge=[];const Ne=e=>{let{currentStep:n=1,flow:o=""}=e;const{t:a}=l.useTranslation(),r=window.Digit.Utils.browser.isMobile();return ge=["WS_COMMON_PROPERTY_DETAILS","WS_COMMON_CONNECTION_DETAIL","WS_COMMON_DOCUMENT_DETAILS","WS_COMMON_SUMMARY"],t.createElement("div",{className:"timeline-container",style:r?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},ge.map((e,l,o)=>t.createElement("div",{className:"timeline-checkpoint",key:l},t.createElement("div",{className:"timeline-content"},t.createElement("span",{className:"circle "+(l<=n-1&&"active")},l<n-1?t.createElement(i.TickMark,null):l+1),t.createElement("span",{className:"secondary-color"},a(e))),l<o.length-1&&t.createElement("span",{className:"line "+(l<n-1&&"active")}))))};function ye(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}function Te(e){var l;let{t:o,key:a,document:r,setDocuments:u,error:d,setError:s,documents:c,setCheckRequiredFields:v}=e;const p=null==c?void 0:c.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],m=Digit.ULBService.getCurrentTenantId(),[E,S]=n.useState(p?{...p,active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}:1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{}),[_,f]=n.useState(null),[C,g]=n.useState(()=>(null==p?void 0:p.fileStoreId)||null);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==C?void 0:C.length)||null===C?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==C),{documentType:null==E?void 0:E.code,fileStoreId:C,documentUid:(null==E?void 0:E.documentUid)||null,id:(null==E?void 0:E.id)||null,fileName:(null==_?void 0:_.name)||"",status:"ACTIVE"}]})},[C,E]),n.useEffect(()=>{!function(){try{s(null);const e=function(){if(_){const e=function(){if(_.size>=5242880)s(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return g(null),Promise.resolve(Digit.UploadServices.Filestorage("WS",_,null==m?void 0:m.split(".")[0])).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?g(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):s(o("CS_FILE_UPLOAD_ERROR"))})},function(){s(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[_]),t.createElement("div",{style:{marginBottom:"24px"}},t.createElement(i.CardLabel,null,null!=r&&r.required?o(null==r?void 0:r.i18nKey)+" *":""+o(null==r?void 0:r.i18nKey)),t.createElement(i.Dropdown,{t:o,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>S(e)}),t.createElement(i.UploadFile,{id:"noc-doc-"+a,extraStyleName:"propertyCreate",accept:"image/*, .pdf, .png, .jpeg, .jpg",onUpload:function(e){f(e.target.files[0])},onDelete:()=>{g(null),v(!0)},message:C?"1 "+o("CS_ACTION_FILEUPLOADED"):o("ES_NO_FILE_SELECTED_LABEL"),error:d}))}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));const De=e=>{var l,o,r,u,d;const{connectionDetail:s,focusIndex:c,setFocusIndex:v,t:p,config:m,setError:E,clearErrors:S,formState:_,setIsErrors:f,isErrors:g,setConnectionDetails:N,pipeSizeList:y,connectionDetails:T,waterSewarageSelection:D,formData:A}=e,{control:I,formState:h,watch:O,trigger:b,getValues:L}=a.useForm(),R=O(),{errors:w}=h;n.useEffect(()=>{b()},[]),n.useEffect(()=>{if(Object.entries(R).length>0){const e=Object.keys(R),n={};if(e.forEach(e=>n[e]=s[e]),!M.isEqual(R,n)){let e=!0;Object.keys(R).map(n=>{!R[n]&&e&&(e=!1,f(!1))}),e&&f(!0);let n=[{...R}];N(n),b()}}},[R,T]),n.useEffect(()=>{var e,n,t,l;let o=!0;null===(e=Object.keys(null==T?void 0:T[0]))||void 0===e||e.map(e=>{!T[0][e]&&0!=T[0][e]&&o&&(o=!1)}),o&&(null===(n=Object.keys(null==T?void 0:T[0]))||void 0===n?void 0:n.length)>1&&S("ConnectionDetails"),null!=T&&null!==(t=T[0])&&void 0!==t&&t.sewerage||(S(m.key,{type:"proposedToilets"}),S(m.key,{type:"proposedWaterClosets"})),null!=T&&null!==(l=T[0])&&void 0!==l&&l.water||(S(m.key,{type:"proposedPipeSize"}),S(m.key,{type:"proposedTaps"})),b()},[T,D,null==A||null===(l=A.DocumentsRequired)||void 0===l?void 0:l.documents]),n.useEffect(()=>{var e;Object.keys(w).length&&!M.isEqual((null===(e=_.errors[m.key])||void 0===e?void 0:e.type)||{},w)?E(m.key,{type:w}):!Object.keys(w).length&&_.errors[m.key]&&g&&S(m.key)},[w]);const W={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"},P=window.Digit.Utils.browser.isMobile(),x=window.location.href.includes("/employee");return t.createElement("div",null,t.createElement("div",{style:{marginBottom:"16px"}},t.createElement(i.CardLabel,{style:{fontWeight:"700"}},p("WS_APPLY_FOR")+"*"),t.createElement("div",{style:{display:"flex",gap:"0 3rem"}},t.createElement(a.Controller,{control:I,name:"water",defaultValue:null==s?void 0:s.water,isMandatory:!0,render:e=>{var n;return t.createElement(i.CheckBox,{label:p("WATER_CONNECTION"),name:"water",autoFocus:c.index===(null==s?void 0:s.key)&&"water"===c.type,errorStyle:!(!h.touched.water||null==w||null===(n=w.water)||void 0===n||!n.message),onChange:n=>{(n.target.checked||null!=s&&s.sewerage)&&(e.onChange(n.target.checked),v({index:null==s?void 0:s.key,type:"water"}))},checked:null==s?void 0:s.water,style:{paddingBottom:"10px",paddingTop:"3px"},onBlur:e.onBlur})}}),t.createElement(a.Controller,{control:I,name:"sewerage",defaultValue:null==s?void 0:s.sewerage,type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.CheckBox,{label:p("SEWERAGE_CONNECTION"),name:"sewerage",autoFocus:c.index===(null==s?void 0:s.key)&&"sewerage"===c.type,errorStyle:!(!h.touched.sewerage||null==w||null===(n=w.sewerage)||void 0===n||!n.message),onChange:n=>{(n.target.checked||null!=s&&s.water)&&(e.onChange(n.target.checked),v({index:null==s?void 0:s.key,type:"sewerage"}))},checked:null==s?void 0:s.sewerage,style:{paddingBottom:"10px",paddingTop:"3px"},onBlur:e.onBlur})}})),(null==s?void 0:s.water)&&t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},p("WS_NO_OF_PROPOSED_TAPS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:I,name:"proposedTaps",defaultValue:null==s?void 0:s.proposedTaps,rules:{validate:e=>!(!(parseInt(e)>0&&e&&C("WSOnlyNumbers").test(e))&&e)||p("ERR_DEFAULT_INPUT_FIELD_MSG"),required:p("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:c.index===(null==s?void 0:s.key)&&"proposedTaps"===c.type,errorStyle:!(!h.touched.proposedTaps||null==w||null===(n=w.proposedTaps)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),v({index:null==s?void 0:s.key,type:"proposedTaps"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:W},h.touched.proposedTaps?null==w||null===(o=w.proposedTaps)||void 0===o?void 0:o.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%",paddingTop:"10px"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},p("WS_PROPOSED_PIPE_SIZE_IN_INCHES_LABEL")+"*"),t.createElement(a.Controller,{control:I,name:"proposedPipeSize",defaultValue:null==s?void 0:s.proposedPipeSize,rules:{required:p("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:L("proposedPipeSize"),disable:!1,option:y,errorStyle:!(!h.touched.proposedPipeSize||null==w||null===(n=w.proposedPipeSize)||void 0===n||!n.message),select:n=>{e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:p})}})),t.createElement(i.CardLabelError,{style:W},h.touched.proposedPipeSize?null==w||null===(r=w.proposedPipeSize)||void 0===r?void 0:r.message:"")),(null==s?void 0:s.sewerage)&&t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},p("WS_PROPOSED_WATER_CLOSETS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:I,name:"proposedWaterClosets",defaultValue:null==s?void 0:s.proposedWaterClosets,rules:{validate:e=>!(!(parseInt(e)>0&&e&&C("WSOnlyNumbers").test(e))&&e)||p("ERR_DEFAULT_INPUT_FIELD_MSG"),required:p("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:c.index===(null==s?void 0:s.key)&&"proposedWaterClosets"===c.type,errorStyle:!(!h.touched.proposedWaterClosets||null==w||null===(n=w.proposedWaterClosets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),v({index:null==s?void 0:s.key,type:"proposedWaterClosets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:W},h.touched.proposedWaterClosets?null==w||null===(u=w.proposedWaterClosets)||void 0===u?void 0:u.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},p("WS_PROPOSED_WATER_TOILETS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:I,name:"proposedToilets",defaultValue:null==s?void 0:s.proposedToilets,rules:{validate:e=>!(!(parseInt(e)>0&&e&&C("WSOnlyNumbers").test(e))&&e)||p("ERR_DEFAULT_INPUT_FIELD_MSG"),required:p("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:c.index===(null==s?void 0:s.key)&&"proposedToilets"===c.type,errorStyle:!(!h.touched.proposedToilets||null==w||null===(n=w.proposedToilets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),v({index:null==s?void 0:s.key,type:"proposedToilets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:W},h.touched.proposedToilets?null==w||null===(d=w.proposedToilets)||void 0===d?void 0:d.message:""))))},Ae=()=>({roadType:{code:"",value:"",i18nKey:""},area:"",status:"",id:null,key:Date.now()}),Ie=e=>{var l,o,r,u;const{roadCutt:d,index:c,focusIndex:v,allRoadCuttingDetails:p,setFocusIndex:m,removeroadCutt:E,formData:S,formState:_,setRoadCuttingDetails:f,mdmsData:C,t:g,setError:N,clearErrors:y,config:T,isEditScreen:D}=e,{control:A,formState:I,watch:h,trigger:O,getValues:b}=a.useForm(),L=h(),{errors:R}=I,w=n.useMemo(()=>{var e;const n=(null==C||null===(e=C["sw-services-calculation"])||void 0===e?void 0:e.RoadType)||[];return null==n||n.forEach(e=>{var n;return e.i18nKey="WS_ROADTYPE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase()," ","_")}),n},[C]);n.useEffect(()=>{O()},[]),n.useEffect(()=>{O()},[p,null==S?void 0:S.connectionDetails,null==S?void 0:S.plumberDetails]);const[W,P]=t.useState({});n.useEffect(()=>{M.isEqual(W,L)||(P({...L}),f(e=>e.map(e=>e.key&&e.key===d.key?{...e,...L}:{...e})),O())},[L]),n.useEffect(()=>{var e;Object.keys(R).length&&!M.isEqual((null===(e=_.errors[T.key])||void 0===e?void 0:e.type)||{},R)?N(T.key,{type:R}):!Object.keys(R).length&&_.errors[T.key]&&y(T.key)},[R]);const x={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"16px"}},t.createElement("div",{className:"label-field-pair"},t.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},g("WS_COMMON_ROAD_CUTTING_DETAILS")," ",(null==p?void 0:p.filter(e=>"INACTIVE"!==e.status).length)>1?c+1:null)),t.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},(null==p?void 0:p.filter(e=>"INACTIVE"!==e.status).length)>1?t.createElement(i.LinkButton,{label:t.createElement(i.DeleteIcon,{style:{float:"right",position:"relative",bottom:"-6px"},fill:1!=(null==p?void 0:p.length)?"#494848":"#FAFAFA"}),style:{width:"100px",display:"inline",background:"black"},onClick:e=>E(d)}):null,t.createElement("div",{style:1==(null==p?void 0:p.filter(e=>"INACTIVE"!==e.status).length)?{}:{marginTop:"40px"}},t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},g("WS_ROAD_TYPE")+" *"),t.createElement(a.Controller,{control:A,name:"roadType",defaultValue:null==d?void 0:d.roadType,rules:{required:g("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:b("roadType"),errorStyle:!(!I.touched.roadType||null==R||null===(n=R.roadType)||void 0===n||!n.message),select:n=>{e.onChange(n)},option:w,onBlur:e.onBlur,optionKey:"i18nKey",disable:!1,t:g})}})),t.createElement(i.CardLabelError,{style:x},null!==(l=I.touched)&&void 0!==l&&l.roadType?null==R||null===(o=R.roadType)||void 0===o?void 0:o.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},g("WS_AREA_SQ_FT")+" *"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"area",defaultValue:null==d?void 0:d.area,rules:{required:g("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[0-9]{1,10}$/i.test(e)||g("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>t.createElement(i.TextInput,{value:e.value,disable:D,autoFocus:v.index===d.key&&"area"===v.type,onChange:n=>{e.onChange(n.target.value),m({index:d.key,type:"area"})},onBlur:n=>{m({index:-1}),e.onBlur(n)}})}))),t.createElement(i.CardLabelError,{style:x},null!==(r=I.touched)&&void 0!==r&&r.area?null==R||null===(u=R.area)||void 0===u?void 0:u.message:"")))))},he=e=>{var l,o,r,u,d,s,c;const{connectionHolderDetail:v,focusIndex:p,setFocusIndex:m,t:E,formData:S,config:_,setError:f,clearErrors:g,formState:N,connectionHolderDetails:y,setIsErrors:T,isErrors:D,setConnectionHolderDetails:A,menu:I,GuardianOptions:h,Menu:O}=e,{control:b,formState:L,trigger:R,getValues:w}=a.useForm(),[W,P]=n.useState(null==v?void 0:v.name),[x,B]=n.useState(null==v?void 0:v.gender),[F,U]=n.useState(null==v?void 0:v.mobileNumber),[k,H]=n.useState(null==v?void 0:v.guardian),[j,z]=n.useState(null==v?void 0:v.relationship),[V,Y]=n.useState(null==v?void 0:v.address),[G,q]=n.useState(null==v?void 0:v.ownerType),[K,X]=n.useState(null==v?void 0:v.sameAsOwnerDetails),[$,Z]=n.useState(null==v?void 0:v.uuid),[J,Q]=n.useState(null==v?void 0:v.emailId),ee={name:W,gender:x,mobileNumber:F,guardian:k,relationship:j,ownerType:G,sameAsOwnerDetails:K,address:V,uuid:$,emailId:J},{errors:ne}=L,te=window.Digit.Utils.browser.isMobile(),le=window.location.href.includes("/employee"),{data:oe}=Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(),"DataSecurity",[{name:"SecurityPolicy"}],{select:e=>{var n,t;return(null==e||null===(n=e.DataSecurity)||void 0===n||null===(t=n.SecurityPolicy)||void 0===t?void 0:t.find(e=>"User"==(null==e?void 0:e.model)))||{}}});n.useEffect(()=>{R()},[]),n.useEffect(()=>{if(Object.entries(ee).length>0&&null!=ee&&ee.name||null!=ee&&ee.uuid){const e=Object.keys(ee),n={};if(e.forEach(e=>n[e]=v[e]),!M.isEqual(ee,n)){let e=!0;Object.keys(ee).map(n=>{!ee[n]&&e&&(e=!1,T(!1))}),e&&T(!0);let n=[{...ee}];A(n),R()}}},[ee]),n.useEffect(()=>{var e,n,t;let l=!0;null===(e=Object.keys(null==y?void 0:y[0]))||void 0===e||e.map(e=>{!y[0][e]&&0!=y[0][e]&&l&&(l=!1)}),null!=y&&null!==(n=y[0])&&void 0!==n&&n.sameAsOwnerDetails||l&&(null===(t=Object.keys(null==y?void 0:y[0]))||void 0===t?void 0:t.length)>1?g("ConnectionHolderDetails"):R()},[y]),n.useEffect(()=>{K?g("ConnectionHolderDetails"):R()},[K]),n.useEffect(()=>{var e;Object.keys(ne).length&&!M.isEqual((null===(e=N.errors[_.key])||void 0===e?void 0:e.type)||{},ne)?f(_.key,{type:ne}):!Object.keys(ne).length&&N.errors[_.key]&&D&&g(_.key)},[ne]);const ie=()=>!(!window.location.href.includes("edit")&&!window.location.href.includes("modify")),ae={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement("div",null,t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"sameAsOwnerDetails",defaultValue:K,isMandatory:!0,render:e=>{var n;return t.createElement(i.CheckBox,{label:E("WS_SAME_AS_PROPERTY_OWNERS"),name:"sameAsOwnerDetails",autoFocus:p.index===(null==v?void 0:v.key)&&"sameAsOwnerDetails"===p.type,errorStyle:!(!L.touched.sameAsOwnerDetails||null==ne||null===(n=ne.sameAsOwnerDetails)||void 0===n||!n.message),onChange:n=>{X(n.target.checked),e.onChange(n.target.checked),m({index:null==v?void 0:v.key,type:"sameAsOwnerDetails"})},checked:K,style:{paddingBottom:"10px",paddingTop:"3px"},onBlur:e.onBlur})}})),K?null:t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_OWN_DETAIL_NAME")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"name",defaultValue:null==v?void 0:v.name,rules:{validate:e=>!!(e&&C("Name").test(e)||!e)||E("ERR_DEFAULT_INPUT_FIELD_MSG"),required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,E,_;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:te&&le?"":(ie(),"-4%")}},t.createElement(i.TextInput,{value:w("name"),autoFocus:p.index===(null==v?void 0:v.key)&&"name"===p.type,errorStyle:!(!L.touched.name||null==ne||null===(n=ne.name)||void 0===n||!n.message),onChange:n=>{P(n.target.value),e.onChange(n.target.value),m({index:null==v?void 0:v.key,type:"name"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:!ie()||null!==(l=w("name"))&&void 0!==l&&l.includes("*")?{}:(Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"name",model:"User"})||Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"mobileNumber",model:"User"}),te&&le?{}:{width:"96%"})}),ie()&&t.createElement("div",{style:te&&le?{}:{marginRight:"-10px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{P(n),e.onChange(n)},iseyevisible:!(null===(o=w("name"))||void 0===o||!o.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"name",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(a=S.ConnectionDetails)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(u=S.cpt)||void 0===u||null===(d=u.details)||void 0===d?void 0:d.tenantId,applicationNumber:null==S||null===(s=S.ConnectionDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.applicationNo},jsonPath:null!=S&&null!==(E=S.ConnectionDetails)&&void 0!==E&&null!==(_=E[0])&&void 0!==_&&_.water?"WaterConnection[0].connectionHolders[0].name":"SewerageConnections[0].connectionHolders[0].name",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.name?null==ne||null===(l=ne.name)||void 0===l?void 0:l.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_CONN_HOLDER_OWN_DETAIL_GENDER_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"gender",defaultValue:null==v?void 0:v.gender,rules:{required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,p;return t.createElement("div",{style:{display:"flex",marginRight:!ie()||te&&le?"unset":"-20px",width:te&&le?"":ie()?"197%":"208%"}},t.createElement(i.Dropdown,{className:"form-field",selected:w("gender"),disable:!1,option:I,errorStyle:!(!L.touched.gender||null==ne||null===(n=ne.gender)||void 0===n||!n.message),select:n=>{B(n),e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:E}),ie()&&t.createElement("div",{style:{marginRight:"-10px",marginLeft:te&&le?"":"8px",marginTop:"15px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{const t={code:n,i18nKey:"COMMON_GENDER_"+n,name:n};B(t),e.onChange(t)},iseyevisible:!(null===(l=x.i18nKey)||void 0===l||!l.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"gender",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(o=S.ConnectionDetails)&&void 0!==o&&null!==(a=o[0])&&void 0!==a&&a.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(r=S.cpt)||void 0===r||null===(u=r.details)||void 0===u?void 0:u.tenantId,applicationNumber:null==S||null===(d=S.ConnectionDetails)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.applicationNo},jsonPath:null!=S&&null!==(c=S.ConnectionDetails)&&void 0!==c&&null!==(p=c[0])&&void 0!==p&&p.water?"WaterConnection[0].connectionHolders[0].gender":"SewerageConnections[0].connectionHolders[0].gender",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.gender?null==ne||null===(o=ne.gender)||void 0===o?void 0:o.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("CORE_COMMON_MOBILE_NUMBER")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"mobileNumber",defaultValue:null==v?void 0:v.mobileNumber,rules:{validate:e=>!!(e&&C("MobileNoWithPrivacy").test(e)||!e||e.includes("*"))||E("ERR_DEFAULT_INPUT_FIELD_MSG"),required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,E,_,f;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:le&&te?"":null===(n=w("mobileNumber"))||void 0===n||!n.includes("*")||te&&le?"-4%":"-20px"}},t.createElement("div",{className:"employee-card-input employee-card-input--front",style:{position:"relative",marginTop:"4px"}},"+91"),t.createElement(i.TextInput,{value:w("mobileNumber"),autoFocus:p.index===(null==v?void 0:v.key)&&"mobileNumber"===p.type,errorStyle:!(!L.touched.mobileNumber||null==ne||null===(l=ne.mobileNumber)||void 0===l||!l.message),onChange:n=>{U(n.target.value),e.onChange(n.target.value),m({index:null==v?void 0:v.key,type:"mobileNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:!ie()||null!==(o=w("mobileNumber"))&&void 0!==o&&o.includes("*")?{background:"#FAFAFA"}:Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner"})||Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"mobileNumber",model:"User"})?te&&le?{}:{width:"96%",background:"#FAFAFA"}:te&&le?{}:{width:"96%"}}),ie()&&t.createElement("div",{style:te&&le?{}:{marginRight:"-10px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{U(n),e.onChange(n)},iseyevisible:!(null===(a=w("mobileNumber"))||void 0===a||!a.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(r=S.ConnectionDetails)&&void 0!==r&&null!==(u=r[0])&&void 0!==u&&u.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(d=S.cpt)||void 0===d||null===(s=d.details)||void 0===s?void 0:s.tenantId,applicationNumber:null==S||null===(c=S.ConnectionDetails)||void 0===c||null===(E=c[0])||void 0===E?void 0:E.applicationNo},jsonPath:null!=S&&null!==(_=S.ConnectionDetails)&&void 0!==_&&null!==(f=_[0])&&void 0!==f&&f.water?"WaterConnection[0].connectionHolders[0].mobileNumber":"SewerageConnections[0].connectionHolders[0].mobileNumber",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.mobileNumber?null==ne||null===(r=ne.mobileNumber)||void 0===r?void 0:r.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_OWN_DETAIL_GUARDIAN_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"guardian",defaultValue:null==v?void 0:v.guardian,rules:{validate:e=>!!(e&&C("Name").test(e)||!e||e.includes("*"))||E("ERR_DEFAULT_INPUT_FIELD_MSG"),required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,E,_,f;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:le&&te?"":null===(n=w("guardian"))||void 0===n||!n.includes("*")||te&&le?"-4%":"-20px"}},t.createElement(i.TextInput,{value:w("guardian"),autoFocus:p.index===(null==v?void 0:v.key)&&"guardian"===p.type,errorStyle:!(!L.touched.guardian||null==ne||null===(l=ne.guardian)||void 0===l||!l.message),onChange:n=>{H(n.target.value),e.onChange(n.target.value),m({index:null==v?void 0:v.key,type:"guardian"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:!ie()||null!==(o=w("guardian"))&&void 0!==o&&o.includes("*")?{}:Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"fatherOrHusbandName",model:"WnSConnectionOwner"})||Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"mobileNumber",model:"User"})?te&&le?{}:{width:"96.2%"}:te&&le?{}:{width:"96%"}}),ie()&&t.createElement("div",{style:te&&le?{}:{marginRight:"-10px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{H(n),e.onChange(n)},iseyevisible:!(null===(a=w("guardian"))||void 0===a||!a.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"fatherOrHusbandName",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(r=S.ConnectionDetails)&&void 0!==r&&null!==(u=r[0])&&void 0!==u&&u.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(d=S.cpt)||void 0===d||null===(s=d.details)||void 0===s?void 0:s.tenantId,applicationNumber:null==S||null===(c=S.ConnectionDetails)||void 0===c||null===(E=c[0])||void 0===E?void 0:E.applicationNo},jsonPath:null!=S&&null!==(_=S.ConnectionDetails)&&void 0!==_&&null!==(f=_[0])&&void 0!==f&&f.water?"WaterConnection[0].connectionHolders[0].fatherOrHusbandName":"SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.guardian?null==ne||null===(u=ne.guardian)||void 0===u?void 0:u.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_CONN_HOLDER_OWN_DETAIL_RELATION_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"relationship",defaultValue:null==v?void 0:v.relationship,rules:{required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,p;return t.createElement("div",{style:{display:"flex",marginRight:!ie()||te&&le?"unset":"-20px",width:te&&le?"":ie()?"197%":"208%"}},t.createElement(i.Dropdown,{className:"form-field",selected:w("relationship"),disable:!1,option:h,errorStyle:!(!L.touched.relationship||null==ne||null===(n=ne.relationship)||void 0===n||!n.message),select:n=>{z(n),e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:E}),ie()&&t.createElement("div",{style:{marginRight:"-10px",marginLeft:te&&le?"":"8px",marginTop:"15px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{const t={code:n,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+n,name:n};z(t),e.onChange(t)},iseyevisible:!(null==j||null===(l=j.i18nKey)||void 0===l||!l.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"relationship",model:"WnSConnection",loadData:{serviceName:null!=S&&null!==(o=S.ConnectionDetails)&&void 0!==o&&null!==(a=o[0])&&void 0!==a&&a.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(r=S.cpt)||void 0===r||null===(u=r.details)||void 0===u?void 0:u.tenantId,applicationNumber:null==S||null===(d=S.ConnectionDetails)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.applicationNo},jsonPath:null!=S&&null!==(c=S.ConnectionDetails)&&void 0!==c&&null!==(p=c[0])&&void 0!==p&&p.water?"WaterConnection[0].connectionHolders[0].relationship":"SewerageConnections[0].connectionHolders[0].relationship",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.relationship?null==ne||null===(d=ne.relationship)||void 0===d?void 0:d.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_CORRESPONDANCE_ADDRESS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"address",defaultValue:null==v?void 0:v.address,rules:{validate:e=>!!(e&&C("Address").test(e)||!e||e.includes("*"))||E("ERR_DEFAULT_INPUT_FIELD_MSG"),required:E("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,E,_,f;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:le&&te?"":null===(n=w("address"))||void 0===n||!n.includes("*")||te&&le?"-4%":"-20px"}},t.createElement(i.TextInput,{value:w("address"),autoFocus:p.index===(null==v?void 0:v.key)&&"address"===p.type,errorStyle:!(!L.touched.address||null==ne||null===(l=ne.address)||void 0===l||!l.message),onChange:n=>{Y(n.target.value),e.onChange(n.target.value),m({index:null==v?void 0:v.key,type:"address"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:!ie()||null!==(o=w("address"))&&void 0!==o&&o.includes("*")?{}:Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"correspondenceAddress",model:"WnSConnectionOwner"})||Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"mobileNumber",model:"User"})?te&&le?{}:{width:"96.2%"}:te&&le?{}:{width:"96%"}}),ie()&&t.createElement("div",{style:te&&le?{}:{marginRight:"-10px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{Y(n),e.onChange(n)},iseyevisible:!(null===(a=w("address"))||void 0===a||!a.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"correspondenceAddress",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(r=S.ConnectionDetails)&&void 0!==r&&null!==(u=r[0])&&void 0!==u&&u.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(d=S.cpt)||void 0===d||null===(s=d.details)||void 0===s?void 0:s.tenantId,applicationNumber:null==S||null===(c=S.ConnectionDetails)||void 0===c||null===(E=c[0])||void 0===E?void 0:E.applicationNo},jsonPath:null!=S&&null!==(_=S.ConnectionDetails)&&void 0!==_&&null!==(f=_[0])&&void 0!==f&&f.water?"WaterConnection[0].connectionHolders[0].correspondenceAddress":"SewerageConnections[0].connectionHolders[0].correspondenceAddress",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.address?null==ne||null===(s=ne.address)||void 0===s?void 0:s.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},E("WS_OWNER_SPECIAL_CATEGORY")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"ownerType",defaultValue:null==v?void 0:v.ownerType,rules:{required:E("REQUIRED_FIELD")},render:e=>{var n,l,o,a,r,u,d,s,c,p;return t.createElement("div",{style:{display:"flex",marginRight:!ie()||te&&le?"unset":"-20px",width:te&&le?"":ie()?"197%":"208%"}},t.createElement(i.Dropdown,{className:"form-field",selected:w("ownerType"),disable:!1,option:O,errorStyle:!(!L.touched.ownerType||null==ne||null===(n=ne.ownerType)||void 0===n||!n.message),select:n=>{q(n),e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:E}),ie()&&t.createElement("div",{style:{marginRight:"-10px",marginLeft:te&&le?"":"8px",marginTop:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{const t={code:n,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+n,name:n};q(t),e.onChange(t)},iseyevisible:!(null==G||null===(l=G.i18nKey)||void 0===l||!l.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"ownerType",model:"WnSConnection",loadData:{serviceName:null!=S&&null!==(o=S.ConnectionDetails)&&void 0!==o&&null!==(a=o[0])&&void 0!==a&&a.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(r=S.cpt)||void 0===r||null===(u=r.details)||void 0===u?void 0:u.tenantId,applicationNumber:null==S||null===(d=S.ConnectionDetails)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.applicationNo},jsonPath:null!=S&&null!==(c=S.ConnectionDetails)&&void 0!==c&&null!==(p=c[0])&&void 0!==p&&p.water?"WaterConnection[0].connectionHolders[0].ownerType":"SewerageConnections[0].connectionHolders[0].ownerType",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:ae},L.touched.ownerType?null==ne||null===(c=ne.ownerType)||void 0===c?void 0:c.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:te&&le?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},""+E("WS_EMAIL_ID")),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:b,name:"emailId",defaultValue:null==v?void 0:v.emailId,rules:{validate:e=>!!(e&&C("Email").test(e)||!e)||E("ERR_DEFAULT_INPUT_FIELD_MSG")},isMandatory:!1,render:e=>{var n,l,o,a,r,u,d,s,c,E,_;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:te&&le?"":(ie(),"-4%")}},t.createElement(i.TextInput,{value:w("emailId"),autoFocus:p.index===(null==v?void 0:v.key)&&"emailId"===p.type,errorStyle:!(!L.touched.emailId||null==ne||null===(n=ne.emailId)||void 0===n||!n.message),onChange:n=>{Q(n.target.value),e.onChange(n.target.value),m({index:null==v?void 0:v.key,type:"emailId"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:!ie()||null!==(l=w("emailId"))&&void 0!==l&&l.includes("*")?{}:(Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"name",model:"User"})||Digit.Utils.checkPrivacy(oe,{uuid:null==v?void 0:v.uuid,fieldName:"mobileNumber",model:"User"}),te&&le?{}:{width:"96%"})}),ie()&&t.createElement("div",{style:te&&le?{}:{marginRight:"-10px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{Q(n),e.onChange(n)},iseyevisible:!(null===(o=w("emailId"))||void 0===o||!o.includes("*")),privacy:{uuid:null==v?void 0:v.uuid,fieldName:"emailId",model:"WnSConnectionOwner",loadData:{serviceName:null!=S&&null!==(a=S.ConnectionDetails)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.water?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==S||null===(u=S.cpt)||void 0===u||null===(d=u.details)||void 0===d?void 0:d.tenantId,applicationNumber:null==S||null===(s=S.ConnectionDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.applicationNo},jsonPath:null!=S&&null!==(E=S.ConnectionDetails)&&void 0!==E&&null!==(_=E[0])&&void 0!==_&&_.water?"WaterConnection[0].connectionHolders[0].emailId":"SewerageConnections[0].connectionHolders[0].emailId",isArray:!1}}})))}})))))};var Oe=function(e,n){return e===n||e!=e&&n!=n},be=function(e,n){for(var t=e.length;t--;)if(Oe(e[t][0],n))return t;return-1},Le=Array.prototype.splice;function Re(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}Re.prototype.clear=function(){this.__data__=[],this.size=0},Re.prototype.delete=function(e){var n=this.__data__,t=be(n,e);return!(t<0||(t==n.length-1?n.pop():Le.call(n,t,1),--this.size,0))},Re.prototype.get=function(e){var n=this.__data__,t=be(n,e);return t<0?void 0:n[t][1]},Re.prototype.has=function(e){return be(this.__data__,e)>-1},Re.prototype.set=function(e,n){var t=this.__data__,l=be(t,e);return l<0?(++this.size,t.push([e,n])):t[l][1]=n,this};var we,We=Re,Pe="object"==typeof W&&W&&W.Object===Object&&W,Me="object"==typeof self&&self&&self.Object===Object&&self,xe=Pe||Me||Function("return this")(),Be=xe.Symbol,Fe=Object.prototype,Ue=Fe.hasOwnProperty,ke=Fe.toString,He=Be?Be.toStringTag:void 0,je=Object.prototype.toString,ze=Be?Be.toStringTag:void 0,Ve=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ze&&ze in Object(e)?function(e){var n=Ue.call(e,He),t=e[He];try{e[He]=void 0;var l=!0}catch(e){}var o=ke.call(e);return l&&(n?e[He]=t:delete e[He]),o}(e):function(e){return je.call(e)}(e)},Ye=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)},Ge=function(e){if(!Ye(e))return!1;var n=Ve(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},qe=xe["__core-js_shared__"],Ke=(we=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||""))?"Symbol(src)_1."+we:"",Xe=Function.prototype.toString,$e=function(e){if(null!=e){try{return Xe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ze=/^\[object .+?Constructor\]$/,Je=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=function(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return function(e){return!(!Ye(e)||(n=e,Ke&&Ke in n))&&(Ge(e)?Je:Ze).test($e(e));var n}(t)?t:void 0},en=Qe(xe,"Map"),nn=Qe(Object,"create"),tn=Object.prototype.hasOwnProperty,ln=Object.prototype.hasOwnProperty;function on(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}on.prototype.clear=function(){this.__data__=nn?nn(null):{},this.size=0},on.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},on.prototype.get=function(e){var n=this.__data__;if(nn){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return tn.call(n,e)?n[e]:void 0},on.prototype.has=function(e){var n=this.__data__;return nn?void 0!==n[e]:ln.call(n,e)},on.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=nn&&void 0===n?"__lodash_hash_undefined__":n,this};var an=on,rn=function(e,n){var t,l,o=e.__data__;return("string"==(l=typeof(t=n))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map};function un(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}un.prototype.clear=function(){this.size=0,this.__data__={hash:new an,map:new(en||We),string:new an}},un.prototype.delete=function(e){var n=rn(this,e).delete(e);return this.size-=n?1:0,n},un.prototype.get=function(e){return rn(this,e).get(e)},un.prototype.has=function(e){return rn(this,e).has(e)},un.prototype.set=function(e,n){var t=rn(this,e),l=t.size;return t.set(e,n),this.size+=t.size==l?0:1,this};var dn=un;function sn(e){var n=this.__data__=new We(e);this.size=n.size}sn.prototype.clear=function(){this.__data__=new We,this.size=0},sn.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},sn.prototype.get=function(e){return this.__data__.get(e)},sn.prototype.has=function(e){return this.__data__.has(e)},sn.prototype.set=function(e,n){var t=this.__data__;if(t instanceof We){var l=t.__data__;if(!en||l.length<199)return l.push([e,n]),this.size=++t.size,this;t=this.__data__=new dn(l)}return t.set(e,n),this.size=t.size,this};var cn=sn,vn=function(){try{var e=Qe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),pn=function(e,n,t){"__proto__"==n&&vn?vn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},mn=Object.prototype.hasOwnProperty,En=function(e,n,t){var l=e[n];mn.call(e,n)&&Oe(l,t)&&(void 0!==t||n in e)||pn(e,n,t)},Sn=function(e,n,t,l){var o=!t;t||(t={});for(var i=-1,a=n.length;++i<a;){var r=n[i],u=l?l(t[r],e[r],r,t,e):void 0;void 0===u&&(u=e[r]),o?pn(t,r,u):En(t,r,u)}return t},_n=function(e){return null!=e&&"object"==typeof e},fn=function(e){return _n(e)&&"[object Arguments]"==Ve(e)},Cn=Object.prototype,gn=Cn.hasOwnProperty,Nn=Cn.propertyIsEnumerable,yn=fn(function(){return arguments}())?fn:function(e){return _n(e)&&gn.call(e,"callee")&&!Nn.call(e,"callee")},Tn=Array.isArray,Dn=function(){return!1},An=P(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,o=l&&l.exports===t?xe.Buffer:void 0;e.exports=(o?o.isBuffer:void 0)||Dn}),In=/^(?:0|[1-9]\d*)$/,hn=function(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&In.test(e))&&e>-1&&e%1==0&&e<n},On=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},bn={};bn["[object Float32Array]"]=bn["[object Float64Array]"]=bn["[object Int8Array]"]=bn["[object Int16Array]"]=bn["[object Int32Array]"]=bn["[object Uint8Array]"]=bn["[object Uint8ClampedArray]"]=bn["[object Uint16Array]"]=bn["[object Uint32Array]"]=!0,bn["[object Arguments]"]=bn["[object Array]"]=bn["[object ArrayBuffer]"]=bn["[object Boolean]"]=bn["[object DataView]"]=bn["[object Date]"]=bn["[object Error]"]=bn["[object Function]"]=bn["[object Map]"]=bn["[object Number]"]=bn["[object Object]"]=bn["[object RegExp]"]=bn["[object Set]"]=bn["[object String]"]=bn["[object WeakMap]"]=!1;var Ln=function(e){return function(n){return e(n)}},Rn=P(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,o=l&&l.exports===t&&Pe.process,i=function(){try{return l&&l.require&&l.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),wn=Rn&&Rn.isTypedArray,Wn=wn?Ln(wn):function(e){return _n(e)&&On(e.length)&&!!bn[Ve(e)]},Pn=Object.prototype.hasOwnProperty,Mn=function(e,n){var t=Tn(e),l=!t&&yn(e),o=!t&&!l&&An(e),i=!t&&!l&&!o&&Wn(e),a=t||l||o||i,r=a?function(e,n){for(var t=-1,l=Array(e);++t<e;)l[t]=n(t);return l}(e.length,String):[],u=r.length;for(var d in e)!n&&!Pn.call(e,d)||a&&("length"==d||o&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||hn(d,u))||r.push(d);return r},xn=Object.prototype,Bn=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||xn)},Fn=function(e,n){return function(t){return e(n(t))}},Un=Fn(Object.keys,Object),kn=Object.prototype.hasOwnProperty,Hn=function(e){return null!=e&&On(e.length)&&!Ge(e)},jn=function(e){return Hn(e)?Mn(e):function(e){if(!Bn(e))return Un(e);var n=[];for(var t in Object(e))kn.call(e,t)&&"constructor"!=t&&n.push(t);return n}(e)},zn=Object.prototype.hasOwnProperty,Vn=function(e){return Hn(e)?Mn(e,!0):function(e){if(!Ye(e))return function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=Bn(e),t=[];for(var l in e)("constructor"!=l||!n&&zn.call(e,l))&&t.push(l);return t}(e)},Yn=P(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,o=l&&l.exports===t?xe.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,n){if(n)return e.slice();var t=e.length,l=i?i(t):new e.constructor(t);return e.copy(l),l}}),Gn=function(){return[]},qn=Object.prototype.propertyIsEnumerable,Kn=Object.getOwnPropertySymbols,Xn=Kn?function(e){return null==e?[]:(e=Object(e),function(n,t){for(var l=-1,o=null==n?0:n.length,i=0,a=[];++l<o;){var r=n[l];qn.call(e,r)&&(a[i++]=r)}return a}(Kn(e)))}:Gn,$n=function(e,n){for(var t=-1,l=n.length,o=e.length;++t<l;)e[o+t]=n[t];return e},Zn=Fn(Object.getPrototypeOf,Object),Jn=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)$n(n,Xn(e)),e=Zn(e);return n}:Gn,Qn=function(e,n,t){var l=n(e);return Tn(e)?l:$n(l,t(e))},et=function(e){return Qn(e,jn,Xn)},nt=function(e){return Qn(e,Vn,Jn)},tt=Qe(xe,"DataView"),lt=Qe(xe,"Promise"),ot=Qe(xe,"Set"),it=Qe(xe,"WeakMap"),at=$e(tt),rt=$e(en),ut=$e(lt),dt=$e(ot),st=$e(it),ct=Ve;(tt&&"[object DataView]"!=ct(new tt(new ArrayBuffer(1)))||en&&"[object Map]"!=ct(new en)||lt&&"[object Promise]"!=ct(lt.resolve())||ot&&"[object Set]"!=ct(new ot)||it&&"[object WeakMap]"!=ct(new it))&&(ct=function(e){var n=Ve(e),t="[object Object]"==n?e.constructor:void 0,l=t?$e(t):"";if(l)switch(l){case at:return"[object DataView]";case rt:return"[object Map]";case ut:return"[object Promise]";case dt:return"[object Set]";case st:return"[object WeakMap]"}return n});var vt=ct,pt=Object.prototype.hasOwnProperty,mt=xe.Uint8Array,Et=function(e){var n=new e.constructor(e.byteLength);return new mt(n).set(new mt(e)),n},St=/\w*$/,_t=Be?Be.prototype:void 0,ft=_t?_t.valueOf:void 0,Ct=Object.create,gt=function(){function e(){}return function(n){if(!Ye(n))return{};if(Ct)return Ct(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}(),Nt=Rn&&Rn.isMap,yt=Nt?Ln(Nt):function(e){return _n(e)&&"[object Map]"==vt(e)},Tt=Rn&&Rn.isSet,Dt=Tt?Ln(Tt):function(e){return _n(e)&&"[object Set]"==vt(e)},At={};At["[object Arguments]"]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At["[object Function]"]=At["[object WeakMap]"]=!1;var It=function e(n,t,l,o,i,a){var r,u=1&t,d=2&t,s=4&t;if(l&&(r=i?l(n,o,i,a):l(n)),void 0!==r)return r;if(!Ye(n))return n;var c=Tn(n);if(c){if(r=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&pt.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(n),!u)return function(e,n){var t=-1,l=e.length;for(n||(n=Array(l));++t<l;)n[t]=e[t];return n}(n,r)}else{var v=vt(n),p="[object Function]"==v||"[object GeneratorFunction]"==v;if(An(n))return Yn(n,u);if("[object Object]"==v||"[object Arguments]"==v||p&&!i){if(r=d||p?{}:function(e){return"function"!=typeof e.constructor||Bn(e)?{}:gt(Zn(e))}(n),!u)return d?function(e,n){return Sn(e,Jn(e),n)}(n,function(e,n){return e&&Sn(n,Vn(n),e)}(r,n)):function(e,n){return Sn(e,Xn(e),n)}(n,function(e,n){return e&&Sn(n,jn(n),e)}(r,n))}else{if(!At[v])return i?n:{};r=function(e,n,t){var l,o,i=e.constructor;switch(n){case"[object ArrayBuffer]":return Et(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,n){var t=n?Et(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,n){var t=n?Et(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,t);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(o=new(l=e).constructor(l.source,St.exec(l))).lastIndex=l.lastIndex,o;case"[object Set]":return new i;case"[object Symbol]":return ft?Object(ft.call(e)):{}}}(n,v,u)}}a||(a=new cn);var m=a.get(n);if(m)return m;a.set(n,r),Dt(n)?n.forEach(function(o){r.add(e(o,t,l,o,n,a))}):yt(n)&&n.forEach(function(o,i){r.set(i,e(o,t,l,i,n,a))});var E=c?void 0:(s?d?nt:et:d?Vn:jn)(n);return function(e,n){for(var t=-1,l=null==e?0:e.length;++t<l&&!1!==n(e[t],t););}(E||n,function(o,i){E&&(o=n[i=o]),En(r,i,e(o,t,l,i,n,a))}),r},ht=function(e){return It(e,5)};const Ot=e=>"WATER"==e?{connectionType:"",noOfTaps:"",waterSource:"",pipeSize:"",waterSubSource:"",sourceSubData:""}:{noOfWaterClosets:"",noOfToilets:""},bt=e=>{var l,o,r,u,d,c,v;const{connectionDetail:p,focusIndex:m,setFocusIndex:E,t:S,config:_,setError:f,clearErrors:g,formState:N,connectionDetails:y,setIsErrors:T,isErrors:D,connectionTypeList:A,waterSourceList:I,waterSubSourceList:h,pipeSizeList:O,setConnectionDetails:b,filters:L,setWaterSubSourceList:R,mdmsData:w}=e,{control:W,formState:P,watch:x,trigger:B,getValues:F}=a.useForm(),U=x(),{errors:k}=P,H=window.Digit.Utils.browser.isMobile();let j=window.location.href.includes("/employee");n.useEffect(()=>{B()},[]),n.useEffect(()=>{window.location.href.includes("modify")&&B()},[y]),n.useEffect(()=>{if(Object.entries(U).length>0){const e=Object.keys(U),n={};if(e.forEach(e=>n[e]=p[e]),!M.isEqual(U,n)){let e=!0;Object.keys(U).map(n=>{!U[n]&&e&&(e=!1,T(!1))}),e&&T(!0);let n=[{...U}];b(n),B()}}},[U]),n.useEffect(()=>{var e;Object.keys(k).length&&!M.isEqual((null===(e=N.errors[_.key])||void 0===e?void 0:e.type)||{},k)?f(_.key,{type:k}):!Object.keys(k).length&&N.errors[_.key]&&D&&g(_.key)},[k]);const z={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement("div",null,t.createElement("div",{style:{marginBottom:"16px"}},t.createElement("div",null,window.location.href.includes("by-config")||window.location.href.includes("ws/modify-application")?null:t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_ACK_COMMON_APP_NO_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{disabled:!0,value:null==L?void 0:L.applicationNumber}))),"WATER"===(null==L?void 0:L.service)?t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_SERV_DETAIL_CONN_TYPE")+"*"),t.createElement(a.Controller,{control:W,name:"connectionType",defaultValue:null==p?void 0:p.connectionType,rules:{required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:F("connectionType"),disable:!1,option:A,errorStyle:!(!P.touched.connectionType||null==k||null===(n=k.connectionType)||void 0===n||!n.message),select:n=>{e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:S})}})),t.createElement(i.CardLabelError,{style:z},P.touched.connectionType?null==k||null===(l=k.connectionType)||void 0===l?void 0:l.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_SERV_DETAIL_WATER_SOURCE")+"*"),t.createElement(a.Controller,{control:W,name:"waterSource",defaultValue:null==p?void 0:p.waterSource,rules:{required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:F("waterSource"),disable:!1,option:I,errorStyle:!(!P.touched.waterSource||null==k||null===(n=k.waterSource)||void 0===n||!n.message),select:n=>{var t,l;let o={...null==y?void 0:y[0],waterSource:null==n?void 0:n.code,waterSubSource:""};b([o]);const i=(null==w||null===(t=w["ws-services-masters"])||void 0===t?void 0:t.waterSource)&&ht(null==w||null===(l=w["ws-services-masters"])||void 0===l?void 0:l.waterSource)||[];null==i||i.forEach(e=>{var n;return e.i18nKey="WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),".","_")});const a=null==i?void 0:i.filter(e=>{var t,l;return(null==n||null===(t=n.code)||void 0===t?void 0:t.split(".")[0])==(null==e||null===(l=e.code)||void 0===l?void 0:l.split(".")[0])});R(a),e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:S})}})),t.createElement(i.CardLabelError,{style:z},P.touched.waterSource?null==k||null===(o=k.waterSource)||void 0===o?void 0:o.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_SERV_DETAIL_WATER_SUB_SOURCE")+"*"),t.createElement(a.Controller,{control:W,name:"sourceSubData",defaultValue:null==p?void 0:p.sourceSubData,rules:{required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:F("sourceSubData"),disable:!1,option:h,errorStyle:!(!P.touched.sourceSubData||null==k||null===(n=k.sourceSubData)||void 0===n||!n.message),select:n=>{e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:S})}})),t.createElement(i.CardLabelError,{style:z},P.touched.sourceSubData?null==k||null===(r=k.sourceSubData)||void 0===r?void 0:r.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_PIPE_SIZE_IN_INCHES_LABEL")+"*"),t.createElement(a.Controller,{control:W,name:"pipeSize",defaultValue:null==p?void 0:p.pipeSize,rules:{required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:F("pipeSize"),disable:!1,option:O,errorStyle:!(!P.touched.pipeSize||null==k||null===(n=k.pipeSize)||void 0===n||!n.message),select:n=>{e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:S})}})),t.createElement(i.CardLabelError,{style:z},P.touched.pipeSize?null==k||null===(u=k.pipeSize)||void 0===u?void 0:u.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_SERV_DETAIL_NO_OF_TAPS")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:W,name:"noOfTaps",defaultValue:null==p?void 0:p.noOfTaps,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:m.index===(null==p?void 0:p.key)&&"noOfTaps"===m.type,errorStyle:!(!P.touched.noOfTaps||null==k||null===(n=k.noOfTaps)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"noOfTaps"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:z},P.touched.noOfTaps?null==k||null===(d=k.noOfTaps)||void 0===d?void 0:d.message:"")):t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_NUMBER_WATER_CLOSETS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:W,name:"noOfWaterClosets",defaultValue:null==p?void 0:p.noOfWaterClosets,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,type:"number",autoFocus:m.index===(null==p?void 0:p.key)&&"noOfWaterClosets"===m.type,errorStyle:!(!P.touched.noOfWaterClosets||null==k||null===(n=k.noOfWaterClosets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"noOfWaterClosets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:z},P.touched.noOfWaterClosets?null==k||null===(c=k.noOfWaterClosets)||void 0===c?void 0:c.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:H&&j?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_SERV_DETAIL_NO_OF_TOILETS")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:W,name:"noOfToilets",defaultValue:null==p?void 0:p.noOfToilets,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,type:"number",autoFocus:m.index===(null==p?void 0:p.key)&&"noOfToilets"===m.type,errorStyle:!(!P.touched.noOfToilets||null==k||null===(n=k.noOfToilets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"noOfToilets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:z},P.touched.noOfToilets?null==k||null===(v=k.noOfToilets)||void 0===v?void 0:v.message:"")))))},Lt=e=>{var l,o,r,u,d,s,c,v;const{plumberDetail:p,focusIndex:m,setFocusIndex:E,t:S,formData:_,config:f,setError:g,clearErrors:N,formState:y,plumberDetails:T,setIsErrors:D,options:A,setPlumberDetails:I}=e,{control:h,formState:O,watch:b,trigger:L,getValues:R}=a.useForm(),w=b(),{errors:W}=O,P=window.Digit.Utils.browser.isMobile();let x=window.location.href.includes("/employee");n.useEffect(()=>{L()},[]),n.useEffect(()=>{L()},[null==T||null===(l=T[0])||void 0===l?void 0:l.detailsProvidedBy,null==_||null===(o=_.disConnectionDetails)||void 0===o?void 0:o[0]]),n.useEffect(()=>{if(Object.entries(w).length>0){const e=Object.keys(w),n={};e.forEach(e=>n[e]=p[e]);let t=!window.location.href.includes("ws/config-by-disconnection-application")||void 0!==(null==w?void 0:w.plumberMobileNo)&&(null==n?void 0:n.plumberMobileNo);if(!M.isEqual(w,n)&&t){let e=!0;Object.keys(w).map(n=>{!w[n]&&e&&(e=!1,D(!1))}),e&&D(!0);let n=[{...w}];I(n),L()}}},[w,T]),n.useEffect(()=>{var e;Object.keys(W).length&&!M.isEqual((null===(e=y.errors[f.key])||void 0===e?void 0:e.type)||{},W)?g(f.key,{type:W}):!Object.keys(W).length&&y.errors[f.key]&&N(f.key)},[W]);const B={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement("div",null,t.createElement("div",{style:{marginBottom:"16px"}},t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY")+"*"),t.createElement(a.Controller,{control:h,name:"detailsProvidedBy",defaultValue:null==p?void 0:p.detailsProvidedBy,rules:{required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:R("detailsProvidedBy"),disable:!1,option:A,errorStyle:!(!O.touched.detailsProvidedBy||null==W||null===(n=W.detailsProvidedBy)||void 0===n||!n.message),select:n=>{if("ULB"==n.code){let e={...null==T?void 0:T[0],detailsProvidedBy:n,plumberName:"",plumberMobileNo:"",plumberLicenseNo:""};I([e])}else I([{detailsProvidedBy:n}]);e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:S})}})),t.createElement(i.CardLabelError,{style:B},O.touched.detailsProvidedBy?null==W||null===(r=W.detailsProvidedBy)||void 0===r?void 0:r.message:""),null!=p&&null!==(u=p.detailsProvidedBy)&&void 0!==u&&u.code&&"ULB"!=(null==p||null===(d=p.detailsProvidedBy)||void 0===d?void 0:d.code)?null:t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_PLIMBER_LICENSE_NO_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:h,name:"plumberLicenseNo",defaultValue:null==p?void 0:p.plumberLicenseNo,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,autoFocus:m.index===(null==p?void 0:p.key)&&"plumberLicenseNo"===m.type,errorStyle:!(!O.touched.plumberLicenseNo||null==W||null===(n=W.plumberLicenseNo)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"plumberLicenseNo"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:B},O.touched.plumberLicenseNo?null==W||null===(s=W.plumberLicenseNo)||void 0===s?void 0:s.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:h,name:"plumberName",defaultValue:null==p?void 0:p.plumberName,rules:{validate:e=>!!(e&&C("Name").test(e)||!e)||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,autoFocus:m.index===(null==p?void 0:p.key)&&"plumberName"===m.type,errorStyle:!(!O.touched.plumberName||null==W||null===(n=W.plumberName)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"plumberName"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:B},O.touched.plumberName?null==W||null===(c=W.plumberName)||void 0===c?void 0:c.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:P&&x?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},S("WS_PLUMBER_MOBILE_NO_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:h,name:"plumberMobileNo",defaultValue:null==p?void 0:p.plumberMobileNo,rules:{validate:e=>!!(e&&C("MobileNoWithPrivacy").test(e)||!e||e.includes("*"))||S("ERR_DEFAULT_INPUT_FIELD_MSG"),required:S("REQUIRED_FIELD")},type:"mobileNumber",isMandatory:!0,render:e=>{var n,l,o,a,r,u,d,s,c,v,S,f,C,g,N,y,T,D,A;return t.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:"unset"}},t.createElement("div",{style:{position:"relative",zIndex:"1",left:"35px",marginTop:"-24.5px",marginLeft:"-26px"}},"+91"),t.createElement(i.TextInput,{style:{background:"#FAFAFA",padding:"0px 35px"},type:"mobileNumber",value:e.value,autoFocus:m.index===(null==p?void 0:p.key)&&"plumberMobileNo"===m.type,errorStyle:!(!O.touched.plumberMobileNo||null==W||null===(n=W.plumberMobileNo)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),E({index:null==p?void 0:p.key,type:"plumberMobileNo"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur}),t.createElement("div",{style:P&&x?{}:{marginRight:"-50px",marginLeft:"10px"}},t.createElement(i.WrapUnMaskComponent,{unmaskField:n=>{e.onChange(n)},iseyevisible:!(null===(l=e.value)||void 0===l||!l.includes("*")),privacy:{uuid:null==p?void 0:p.applicationNo,fieldName:"plumberInfoMobileNumber",model:"WnSConnectionPlumber",loadData:{serviceName:"WATER"===(null==_||null===(o=_.connectionDetails)||void 0===o||null===(a=o[0])||void 0===a||null===(r=a.formDetails)||void 0===r||null===(u=r.applicationData)||void 0===u?void 0:u.serviceType)||null!=_&&null!==(d=_.disConnectionDetails)&&void 0!==d&&null!==(s=d[0])&&void 0!==s&&null!==(c=s.consumerNumber)&&void 0!==c&&c.includes("WS")?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:null==_||null===(v=_.connectionDetails)||void 0===v||null===(S=v[0])||void 0===S||null===(f=S.formDetails)||void 0===f?void 0:f.tenantId,applicationNumber:null==p?void 0:p.applicationNo},jsonPath:"WATER"===(null==_||null===(C=_.connectionDetails)||void 0===C||null===(g=C[0])||void 0===g||null===(N=g.formDetails)||void 0===N||null===(y=N.applicationData)||void 0===y?void 0:y.serviceType)||null!=_&&null!==(T=_.disConnectionDetails)&&void 0!==T&&null!==(D=T[0])&&void 0!==D&&null!==(A=D.consumerNumber)&&void 0!==A&&A.includes("WS")?"WaterConnection[0].plumberInfo[0].mobileNumber":"SewerageConnections[0].plumberInfo[0].mobileNumber",isArray:!1}}})))}}))),t.createElement(i.CardLabelError,{style:B},O.touched.plumberMobileNo?null==W||null===(v=W.plumberMobileNo)||void 0===v?void 0:v.message:"")))))},Rt=e=>{var l,o,r,u,d,s,c,v,p,m,E,S,_,f,g;const{activationDetail:N,focusIndex:y,setFocusIndex:T,t:D,formData:A,formData2:I,config:h,setError:O,clearErrors:b,formState:L,activationDetails:R,setIsErrors:w,isErrors:W,filters:P,setActivationDetails:x}=e,{control:B,formState:F,watch:U,trigger:k}=a.useForm(),H=U(),{errors:j}=F,z=window.Digit.Utils.browser.isMobile();let V=window.location.href.includes("/employee");n.useEffect(()=>{k()},[]),n.useEffect(()=>{if(Object.entries(H).length>0){const e=Object.keys(H),n={};if(e.forEach(e=>n[e]=N[e]),!M.isEqual(H,n)){let e=!0;Object.keys(H).map(n=>{!H[n]&&e&&(e=!1,w(!1))}),e&&w(!0);let n=[{...H}];x(n),k()}}},[H]),n.useEffect(()=>{k()},[null==A||null===(l=A.connectionDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.connectionType]),n.useEffect(()=>{window.location.href.includes("modify")&&k()},[R,null==A?void 0:A.ConnectionDetails,null==A?void 0:A.ConnectionHolderDetails,null==A?void 0:A.DocumentsRequired,null==A?void 0:A.connectionDetails,null==A?void 0:A.cpt]),n.useEffect(()=>{var e;Object.keys(j).length&&!M.isEqual((null===(e=L.errors[h.key])||void 0===e?void 0:e.type)||{},j)?O(h.key,{type:j}):!Object.keys(j).length&&L.errors[h.key]&&W&&b(h.key)},[j]);const Y={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement("div",null,t.createElement("div",{style:{marginBottom:"16px"}},"WATER"===(null==P?void 0:P.service)&&"METERED"===(null==A||null===(r=A.connectionDetails)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.connectionType)||void 0===d||null===(s=d.code)||void 0===s?void 0:s.toUpperCase())&&"WATER_RECONNECTION"!==(null==I||null===(c=I.connectionDetails)||void 0===c||null===(v=c[0])||void 0===v||null===(p=v.formDetails)||void 0===p||null===(m=p.applicationData)||void 0===m?void 0:m.applicationType)?t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:z&&V?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},D("WS_SERV_DETAIL_METER_ID")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:B,name:"meterId",defaultValue:null==N?void 0:N.meterId,type:"number",rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||D("ERR_DEFAULT_INPUT_FIELD_MSG"),required:D("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:y.index===(null==N?void 0:N.key)&&"meterId"===y.type,errorStyle:!(!F.touched.meterId||null==j||null===(n=j.meterId)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),T({index:null==N?void 0:N.key,type:"meterId"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:Y},F.touched.meterId?null==j||null===(E=j.meterId)||void 0===E?void 0:E.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:z&&V?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},D("WS_ADDN_DETAIL_METER_INSTALL_DATE")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{name:"meterInstallationDate",rules:{required:D("REQUIRED_FIELD")},defaultValue:null==N?void 0:N.meterInstallationDate,control:B,render:e=>t.createElement(i.DatePicker,{date:e.value,name:"meterInstallationDate",onChange:e.onChange})}))),t.createElement(i.CardLabelError,{style:Y},F.touched.meterInstallationDate?null==j||null===(S=j.meterInstallationDate)||void 0===S?void 0:S.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:z&&V?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},D("WS_INITIAL_METER_READING_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{type:"number",control:B,name:"meterInitialReading",rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||D("ERR_DEFAULT_INPUT_FIELD_MSG"),required:D("REQUIRED_FIELD")},defaultValue:null==N?void 0:N.meterInitialReading,isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:y.index===(null==N?void 0:N.key)&&"meterInitialReading"===y.type,errorStyle:!(!F.touched.meterInitialReading||null==j||null===(n=j.meterInitialReading)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),T({index:null==N?void 0:N.key,type:"meterInitialReading"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:Y},F.touched.meterInitialReading?null==j||null===(_=j.meterInitialReading)||void 0===_?void 0:_.message:"")):null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:z&&V?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},D("WS_SERV_DETAIL_CONN_EXECUTION_DATE")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{name:"connectionExecutionDate",rules:{required:D("REQUIRED_FIELD")},defaultValue:null==N?void 0:N.connectionExecutionDate,control:B,render:e=>{var n;return t.createElement(i.DatePicker,{date:e.value,name:"connectionExecutionDate",onChange:e.onChange,autoFocus:y.index===(null==N?void 0:N.key)&&"connectionExecutionDate"===y.type,errorStyle:!(!F.touched.connectionExecutionDate||null==j||null===(n=j.connectionExecutionDate)||void 0===n||!n.message)})}}))),t.createElement(i.CardLabelError,{style:Y},F.touched.connectionExecutionDate?null==j||null===(f=j.connectionExecutionDate)||void 0===f?void 0:f.message:""),window.location.href.includes("modify")?t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:z&&V?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},D("WS_MODIFICATIONS_EFFECTIVE_FROM")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{name:"dateEffectiveFrom",rules:{required:D("REQUIRED_FIELD")},isMandatory:!0,defaultValue:null==N?void 0:N.dateEffectiveFrom,control:B,render:e=>{var n;return t.createElement(i.DatePicker,{date:e.value,name:"dateEffectiveFrom",onChange:e.onChange,autoFocus:y.index===(null==N?void 0:N.key)&&"dateEffectiveFrom"===y.type,errorStyle:!(!F.touched.dateEffectiveFrom||null==j||null===(n=j.dateEffectiveFrom)||void 0===n||!n.message)})}}))),t.createElement(i.CardLabelError,{style:Y},F.touched.dateEffectiveFrom?null==j||null===(g=j.dateEffectiveFrom)||void 0===g?void 0:g.message:"")):null))};function wt(e){var l,o;let{t:a,document:r,setDocuments:u,setError:d,documents:s,formData:c,setFormError:v,clearFormErrors:p,config:m,formState:E,id:S}=e;const _=null==s?void 0:s.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],[f,C]=(Digit.ULBService.getCurrentTenantId(),n.useState(_?{..._,code:null==_?void 0:_.documentType}:1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{})),[g,N]=n.useState(null),[y,T]=n.useState(()=>(null==_?void 0:_.fileStoreId)||null);n.useEffect(()=>{var e;_&&C(_?{..._,code:null==_?void 0:_.documentType}:1===(null==r||null===(e=r.dropdownData)||void 0===e?void 0:e.length)?null==r?void 0:r.dropdownData[0]:{})},[]);const{dropdownData:D}=r;var A=D;const[I,h]=n.useState(!1),O=()=>{var e,n;let t=null===(e=E.errors)||void 0===e||null===(n=e[m.key])||void 0===n?void 0:n.type;Array.isArray(t)||(t=[]),t.includes(null==r?void 0:r.code)&&(t=t.filter(e=>e!=(null==r?void 0:r.code)),t.length?v(m.key,{type:t}):p(m.key))};return n.useEffect(()=>{null!=f&&f.code&&u(e=>{const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==f?void 0:f.code));if(0===(null==y?void 0:y.length)||null===y)return n;const t=[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==y),{documentType:null==f?void 0:f.code,fileStoreId:y,i18nKey:null==f?void 0:f.code,id:null==f?void 0:f.id,status:"ACTIVE"}];return sessionStorage.setItem("DISCONNECTION_EDIT_DOCS",JSON.stringify(t)),t}),I?I&&O():y&&null!=f&&f.code||null==r||!r.required?y&&null!=f&&f.code&&O():(()=>{var e,n;let t=null===(e=E.errors)||void 0===e||null===(n=e[m.key])||void 0===n?void 0:n.type;Array.isArray(t)||(t=[]),t.includes(r.code)||(t.push(r.code),v(m.key,{type:t}))})()},[y,f,I,null==c||null===(o=c.ConnectionDetails)||void 0===o?void 0:o[0]]),n.useEffect(()=>{!function(){try{d(null);const e=function(){if(g){const e=function(){if(g.size>=5242880)d(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return T(null),Promise.resolve(Digit.UploadServices.Filestorage("WS",g,Digit.ULBService.getStateId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?T(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):d(a("CS_FILE_UPLOAD_ERROR"))})},function(){d(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[g]),n.useEffect(()=>{I&&T(null)},[I]),t.createElement("div",{style:{marginBottom:"24px"}},null!=r&&r.hasDropdown?t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"700"}},null!=r&&r.required?a(null==r?void 0:r.i18nKey)+"*":""+a(null==r?void 0:r.i18nKey)),t.createElement(i.Dropdown,{id:"doc-"+(null==r?void 0:r.code),key:"doc-"+(null==r?void 0:r.code),className:"form-field",selected:f||_||f,option:A.map(e=>{var n;return{...e,i18nKey:null===(n=e.code)||void 0===n?void 0:n.replaceAll(".","_")}}),select:e=>C(e),optionKey:"i18nKey",t:a})):null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"}),t.createElement("div",{className:"field"},t.createElement(i.UploadFile,{onUpload:function(e){N(e.target.files[0])},onDelete:()=>{T(null)},id:S,message:y?"1 "+a("CS_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),textStyles:{width:"100%"},inputStyles:{width:"280px"},buttonType:"button",error:!y,accept:"image/*, .pdf, .png, .jpeg, .jpg"}))))}const Wt=e=>{var l,o,r,u;const{connectionDetail:d,focusIndex:s,setFocusIndex:c,t:v,config:p,setError:m,clearErrors:E,formState:S,setIsErrors:_,isErrors:f,setConnectionDetails:g,pipeSizeList:N,connectionDetails:y,waterSewarageSelection:T,applicationNumber:D}=e,{control:A,formState:I,watch:h,trigger:O,getValues:b}=a.useForm(),L=h(),{errors:R}=I;n.useEffect(()=>{O()},[]),n.useEffect(()=>{if(Object.entries(L).length>0){const e=Object.keys(L),n={};if(e.forEach(e=>n[e]=d[e]),!M.isEqual(L,n)){let e=!0;Object.keys(L).map(n=>{!L[n]&&e&&(e=!1,_(!1))}),e&&_(!0);let n=[{...L}];g(n),O()}}},[L,y]),n.useEffect(()=>{var e,n,t,l;let o=!0;null===(e=Object.keys(null==y?void 0:y[0]))||void 0===e||e.map(e=>{!y[0][e]&&0!=y[0][e]&&o&&(o=!1)}),o&&(null===(n=Object.keys(null==y?void 0:y[0]))||void 0===n?void 0:n.length)>1&&E("ConnectionDetails"),null!=y&&null!==(t=y[0])&&void 0!==t&&t.sewerage||(E(p.key,{type:"proposedToilets"}),E(p.key,{type:"proposedWaterClosets"})),null!=y&&null!==(l=y[0])&&void 0!==l&&l.water||(E(p.key,{type:"proposedPipeSize"}),E(p.key,{type:"proposedTaps"})),O()},[y,T]),n.useEffect(()=>{var e;Object.keys(R).length&&!M.isEqual((null===(e=S.errors[p.key])||void 0===e?void 0:e.type)||{},R)?m(p.key,{type:R}):!Object.keys(R).length&&S.errors[p.key]&&f&&E(p.key)},[R]);const w={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"},W=window.Digit.Utils.browser.isMobile(),P=window.location.href.includes("/employee");return t.createElement("div",null,window.location.href.includes("modify-application")?t.createElement("div",null,t.createElement(i.CardSubHeader,null,v("WS_COMMON_SERV_DETAIL")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",key:"WS_MYCONNECTIONS_CONSUMER_NO",label:""+v("WS_MYCONNECTIONS_CONSUMER_NO"),text:D}),t.createElement(i.Row,{className:"border-none",key:"WS_SERVICE_NAME_LABEL",label:""+v("WS_SERVICE_NAME_LABEL"),text:null==d?void 0:d.serviceName}))):t.createElement("div",{style:{marginBottom:"16px"}},t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},""+v("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"applicationNo",defaultValue:null==d?void 0:d.applicationNo,isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,autoFocus:s.index===(null==d?void 0:d.key)&&"applicationNo"===s.type,errorStyle:!(!I.touched.applicationNo||null==R||null===(n=R.applicationNo)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),c({index:null==d?void 0:d.key,type:"applicationNo"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,disabled:!0,disable:!0})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},""+v("WS_SERVICE_NAME_LABEL")),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"serviceName",defaultValue:null==d?void 0:d.serviceName,isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,autoFocus:s.index===(null==d?void 0:d.key)&&"serviceName"===s.type,errorStyle:!(!I.touched.serviceName||null==R||null===(n=R.serviceName)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),c({index:null==d?void 0:d.key,type:"serviceName"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,disabled:!0,disable:!0})}}))),"WATER"==(null==d?void 0:d.serviceName)&&t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},v("WS_NO_OF_PROPOSED_TAPS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"proposedTaps",defaultValue:null==d?void 0:d.proposedTaps,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||v("ERR_DEFAULT_INPUT_FIELD_MSG"),required:v("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:s.index===(null==d?void 0:d.key)&&"proposedTaps"===s.type,errorStyle:!(!I.touched.proposedTaps||null==R||null===(n=R.proposedTaps)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),c({index:null==d?void 0:d.key,type:"proposedTaps"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:w},I.touched.proposedTaps?null==R||null===(l=R.proposedTaps)||void 0===l?void 0:l.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},v("WS_PROPOSED_PIPE_SIZE_IN_INCHES_LABEL")+"*"),t.createElement(a.Controller,{control:A,name:"proposedPipeSize",defaultValue:null==d?void 0:d.proposedPipeSize,rules:{required:v("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.Dropdown,{className:"form-field",selected:b("proposedPipeSize"),disable:!1,option:N,errorStyle:!(!I.touched.proposedPipeSize||null==R||null===(n=R.proposedPipeSize)||void 0===n||!n.message),select:n=>{e.onChange(n)},optionKey:"i18nKey",onBlur:e.onBlur,t:v})}})),t.createElement(i.CardLabelError,{style:w},I.touched.proposedPipeSize?null==R||null===(o=R.proposedPipeSize)||void 0===o?void 0:o.message:"")),"WATER"!==(null==d?void 0:d.serviceName)&&t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},v("WS_PROPOSED_WATER_CLOSETS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"proposedWaterClosets",defaultValue:null==d?void 0:d.proposedWaterClosets,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||v("ERR_DEFAULT_INPUT_FIELD_MSG"),required:v("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:s.index===(null==d?void 0:d.key)&&"proposedWaterClosets"===s.type,errorStyle:!(!I.touched.proposedWaterClosets||null==R||null===(n=R.proposedWaterClosets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),c({index:null==d?void 0:d.key,type:"proposedWaterClosets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:w},I.touched.proposedWaterClosets?null==R||null===(r=R.proposedWaterClosets)||void 0===r?void 0:r.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:W&&P?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},v("WS_PROPOSED_WATER_TOILETS_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:A,name:"proposedToilets",defaultValue:null==d?void 0:d.proposedToilets,rules:{validate:e=>!!(e&&C("WSOnlyNumbers").test(e)||!e)||v("ERR_DEFAULT_INPUT_FIELD_MSG"),required:v("REQUIRED_FIELD")},type:"number",isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{type:"number",value:e.value,autoFocus:s.index===(null==d?void 0:d.key)&&"proposedToilets"===s.type,errorStyle:!(!I.touched.proposedToilets||null==R||null===(n=R.proposedToilets)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),c({index:null==d?void 0:d.key,type:"proposedToilets"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:w},I.touched.proposedToilets?null==R||null===(u=R.proposedToilets)||void 0===u?void 0:u.message:""))))};let Pt=[];const Mt=e=>{let{currentStep:n=1,flow:o=""}=e;const{t:a}=l.useTranslation(),r=window.Digit.Utils.browser.isMobile();return Pt=["WS_COMMON_DISCONNECTION_DETAIL","WS_COMMON_DOCUMENT_DETAILS","WS_COMMON_SUMMARY"],t.createElement("div",{className:"timeline-container",style:r?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},Pt.map((e,l,o)=>t.createElement("div",{className:"timeline-checkpoint",key:l},t.createElement("div",{className:"timeline-content"},t.createElement("span",{className:"circle "+(l<=n-1&&"active")},l<n-1?t.createElement(i.TickMark,null):l+1),t.createElement("span",{className:"secondary-color"},a(e))),l<o.length-1&&t.createElement("span",{className:"line "+(l<n-1&&"active")}))))};function xt(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Bt(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function Ft(e){Bt(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Ut(e,n){Bt(2,arguments);var t=Ft(e),l=xt(n);return isNaN(l)?new Date(NaN):l?(t.setDate(t.getDate()+l),t):t}function kt(e,n){Bt(2,arguments);var t=Ft(e).getTime(),l=xt(n);return new Date(t+l)}function Ht(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}function jt(e){return Bt(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function zt(e){if(Bt(1,arguments),!jt(e)&&"number"!=typeof e)return!1;var n=Ft(e);return!isNaN(Number(n))}var Vt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Yt(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth,l=e.formats[t]||e.formats[e.defaultWidth];return l}}var Gt={date:Yt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Yt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Yt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},qt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Kt(e){return function(n,t){var l,o=t||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=o.width?String(o.width):i;l=e.formattingValues[a]||e.formattingValues[i]}else{var r=e.defaultWidth,u=o.width?String(o.width):e.defaultWidth;l=e.values[u]||e.values[r]}return l[e.argumentCallback?e.argumentCallback(n):n]}}function Xt(e){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=t.width,o=l&&e.matchPatterns[l]||e.matchPatterns[e.defaultMatchWidth],i=n.match(o);if(!i)return null;var a,r=i[0],u=l&&e.parsePatterns[l]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?Zt(u,function(e){return e.test(r)}):$t(u,function(e){return e.test(r)});a=e.valueCallback?e.valueCallback(d):d,a=t.valueCallback?t.valueCallback(a):a;var s=n.slice(r.length);return{value:a,rest:s}}}function $t(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}function Zt(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t}var Jt,Qt={code:"en-US",formatDistance:function(e,n,t){var l,o=Vt[e];return l="string"==typeof o?o:1===n?o.one:o.other.replace("{{count}}",n.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+l:l+" ago":l},formatLong:Gt,formatRelative:function(e,n,t,l){return qt[e]},localize:{ordinalNumber:function(e,n){var t=Number(e),l=t%100;if(l>20||l<10)switch(l%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Kt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Kt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Kt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Kt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Kt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Jt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.match(Jt.matchPattern);if(!t)return null;var l=t[0],o=e.match(Jt.parsePattern);if(!o)return null;var i=Jt.valueCallback?Jt.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;var a=e.slice(l.length);return{value:i,rest:a}}),era:Xt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Xt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Xt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Xt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Xt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function el(e,n){Bt(2,arguments);var t=xt(n);return kt(e,-t)}function nl(e){Bt(1,arguments);var n=1,t=Ft(e),l=t.getUTCDay(),o=(l<n?7:0)+l-n;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t}function tl(e){Bt(1,arguments);var n=Ft(e),t=n.getUTCFullYear(),l=new Date(0);l.setUTCFullYear(t+1,0,4),l.setUTCHours(0,0,0,0);var o=nl(l),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var a=nl(i);return n.getTime()>=o.getTime()?t+1:n.getTime()>=a.getTime()?t:t-1}function ll(e){Bt(1,arguments);var n=tl(e),t=new Date(0);t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0);var l=nl(t);return l}function ol(e,n){Bt(1,arguments);var t=n||{},l=t.locale,o=l&&l.options&&l.options.weekStartsOn,i=null==o?0:xt(o),a=null==t.weekStartsOn?i:xt(t.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var r=Ft(e),u=r.getUTCDay(),d=(u<a?7:0)+u-a;return r.setUTCDate(r.getUTCDate()-d),r.setUTCHours(0,0,0,0),r}function il(e,n){Bt(1,arguments);var t=Ft(e),l=t.getUTCFullYear(),o=n||{},i=o.locale,a=i&&i.options&&i.options.firstWeekContainsDate,r=null==a?1:xt(a),u=null==o.firstWeekContainsDate?r:xt(o.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(l+1,0,u),d.setUTCHours(0,0,0,0);var s=ol(d,n),c=new Date(0);c.setUTCFullYear(l,0,u),c.setUTCHours(0,0,0,0);var v=ol(c,n);return t.getTime()>=s.getTime()?l+1:t.getTime()>=v.getTime()?l:l-1}function al(e,n){Bt(1,arguments);var t=n||{},l=t.locale,o=l&&l.options&&l.options.firstWeekContainsDate,i=null==o?1:xt(o),a=null==t.firstWeekContainsDate?i:xt(t.firstWeekContainsDate),r=il(e,n),u=new Date(0);u.setUTCFullYear(r,0,a),u.setUTCHours(0,0,0,0);var d=ol(u,n);return d}function rl(e,n){for(var t=e<0?"-":"",l=Math.abs(e).toString();l.length<n;)l="0"+l;return t+l}var ul={G:function(e,n,t){var l=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(l,{width:"abbreviated"});case"GGGGG":return t.era(l,{width:"narrow"});case"GGGG":default:return t.era(l,{width:"wide"})}},y:function(e,n,t){if("yo"===n){var l=e.getUTCFullYear();return t.ordinalNumber(l>0?l:1-l,{unit:"year"})}return function(e,n){var t=e.getUTCFullYear(),l=t>0?t:1-t;return rl("yy"===n?l%100:l,n.length)}(e,n)},Y:function(e,n,t,l){var o=il(e,l),i=o>0?o:1-o;return"YY"===n?rl(i%100,2):"Yo"===n?t.ordinalNumber(i,{unit:"year"}):rl(i,n.length)},R:function(e,n){return rl(tl(e),n.length)},u:function(e,n){return rl(e.getUTCFullYear(),n.length)},Q:function(e,n,t){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(l);case"QQ":return rl(l,2);case"Qo":return t.ordinalNumber(l,{unit:"quarter"});case"QQQ":return t.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(l,{width:"wide",context:"formatting"})}},q:function(e,n,t){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(l);case"qq":return rl(l,2);case"qo":return t.ordinalNumber(l,{unit:"quarter"});case"qqq":return t.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(l,{width:"wide",context:"standalone"})}},M:function(e,n,t){var l=e.getUTCMonth();switch(n){case"M":case"MM":return function(e,n){var t=e.getUTCMonth();return"M"===n?String(t+1):rl(t+1,2)}(e,n);case"Mo":return t.ordinalNumber(l+1,{unit:"month"});case"MMM":return t.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(l,{width:"wide",context:"formatting"})}},L:function(e,n,t){var l=e.getUTCMonth();switch(n){case"L":return String(l+1);case"LL":return rl(l+1,2);case"Lo":return t.ordinalNumber(l+1,{unit:"month"});case"LLL":return t.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(l,{width:"wide",context:"standalone"})}},w:function(e,n,t,l){var o=function(e,n){Bt(1,arguments);var t=Ft(e),l=ol(t,n).getTime()-al(t,n).getTime();return Math.round(l/6048e5)+1}(e,l);return"wo"===n?t.ordinalNumber(o,{unit:"week"}):rl(o,n.length)},I:function(e,n,t){var l=function(e){Bt(1,arguments);var n=Ft(e),t=nl(n).getTime()-ll(n).getTime();return Math.round(t/6048e5)+1}(e);return"Io"===n?t.ordinalNumber(l,{unit:"week"}):rl(l,n.length)},d:function(e,n,t){return"do"===n?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,n){return rl(e.getUTCDate(),n.length)}(e,n)},D:function(e,n,t){var l=function(e){Bt(1,arguments);var n=Ft(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var l=n.getTime(),o=t-l;return Math.floor(o/864e5)+1}(e);return"Do"===n?t.ordinalNumber(l,{unit:"dayOfYear"}):rl(l,n.length)},E:function(e,n,t){var l=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return t.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(l,{width:"short",context:"formatting"});case"EEEE":default:return t.day(l,{width:"wide",context:"formatting"})}},e:function(e,n,t,l){var o=e.getUTCDay(),i=(o-l.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return rl(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,t,l){var o=e.getUTCDay(),i=(o-l.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return rl(i,n.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,t){var l=e.getUTCDay(),o=0===l?7:l;switch(n){case"i":return String(o);case"ii":return rl(o,n.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(l,{width:"short",context:"formatting"});case"iiii":default:return t.day(l,{width:"wide",context:"formatting"})}},a:function(e,n,t){var l=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,n,t){var l,o=e.getUTCHours();switch(l=12===o?"noon":0===o?"midnight":o/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,n,t){var l,o=e.getUTCHours();switch(l=o>=17?"evening":o>=12?"afternoon":o>=4?"morning":"night",n){case"B":case"BB":case"BBB":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,n,t){if("ho"===n){var l=e.getUTCHours()%12;return 0===l&&(l=12),t.ordinalNumber(l,{unit:"hour"})}return function(e,n){return rl(e.getUTCHours()%12||12,n.length)}(e,n)},H:function(e,n,t){return"Ho"===n?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,n){return rl(e.getUTCHours(),n.length)}(e,n)},K:function(e,n,t){var l=e.getUTCHours()%12;return"Ko"===n?t.ordinalNumber(l,{unit:"hour"}):rl(l,n.length)},k:function(e,n,t){var l=e.getUTCHours();return 0===l&&(l=24),"ko"===n?t.ordinalNumber(l,{unit:"hour"}):rl(l,n.length)},m:function(e,n,t){return"mo"===n?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,n){return rl(e.getUTCMinutes(),n.length)}(e,n)},s:function(e,n,t){return"so"===n?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,n){return rl(e.getUTCSeconds(),n.length)}(e,n)},S:function(e,n){return function(e,n){var t=n.length,l=e.getUTCMilliseconds();return rl(Math.floor(l*Math.pow(10,t-3)),n.length)}(e,n)},X:function(e,n,t,l){var o=(l._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(n){case"X":return sl(o);case"XXXX":case"XX":return cl(o);case"XXXXX":case"XXX":default:return cl(o,":")}},x:function(e,n,t,l){var o=(l._originalDate||e).getTimezoneOffset();switch(n){case"x":return sl(o);case"xxxx":case"xx":return cl(o);case"xxxxx":case"xxx":default:return cl(o,":")}},O:function(e,n,t,l){var o=(l._originalDate||e).getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+dl(o,":");case"OOOO":default:return"GMT"+cl(o,":")}},z:function(e,n,t,l){var o=(l._originalDate||e).getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+dl(o,":");case"zzzz":default:return"GMT"+cl(o,":")}},t:function(e,n,t,l){return rl(Math.floor((l._originalDate||e).getTime()/1e3),n.length)},T:function(e,n,t,l){return rl((l._originalDate||e).getTime(),n.length)}};function dl(e,n){var t=e>0?"-":"+",l=Math.abs(e),o=Math.floor(l/60),i=l%60;if(0===i)return t+String(o);var a=n||"";return t+String(o)+a+rl(i,2)}function sl(e,n){return e%60==0?(e>0?"-":"+")+rl(Math.abs(e)/60,2):cl(e,n)}function cl(e,n){var t=n||"",l=e>0?"-":"+",o=Math.abs(e);return l+rl(Math.floor(o/60),2)+t+rl(o%60,2)}function vl(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function pl(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}var ml={p:pl,P:function(e,n){var t,l=e.match(/(P+)(p+)?/)||[],o=l[1],i=l[2];if(!i)return vl(e,n);switch(o){case"P":t=n.dateTime({width:"short"});break;case"PP":t=n.dateTime({width:"medium"});break;case"PPP":t=n.dateTime({width:"long"});break;case"PPPP":default:t=n.dateTime({width:"full"})}return t.replace("{{date}}",vl(o,n)).replace("{{time}}",pl(i,n))}},El=["D","DD"],Sl=["YY","YYYY"];function _l(e){return-1!==El.indexOf(e)}function fl(e){return-1!==Sl.indexOf(e)}function Cl(e,n,t){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}var gl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yl=/^'([^]*?)'?$/,Tl=/''/g,Dl=/[a-zA-Z]/;function Al(e,n,t){Bt(2,arguments);var l=String(n),o=t||{},i=o.locale||Qt,a=i.options&&i.options.firstWeekContainsDate,r=null==a?1:xt(a),u=null==o.firstWeekContainsDate?r:xt(o.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=i.options&&i.options.weekStartsOn,s=null==d?0:xt(d),c=null==o.weekStartsOn?s:xt(o.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var v=Ft(e);if(!zt(v))throw new RangeError("Invalid time value");var p=Ht(v),m=el(v,p),E={firstWeekContainsDate:u,weekStartsOn:c,locale:i,_originalDate:v},S=l.match(Nl).map(function(e){var n=e[0];return"p"===n||"P"===n?(0,ml[n])(e,i.formatLong,E):e}).join("").match(gl).map(function(t){if("''"===t)return"'";var l=t[0];if("'"===l)return Il(t);var a=ul[l];if(a)return!o.useAdditionalWeekYearTokens&&fl(t)&&Cl(t,n,e),!o.useAdditionalDayOfYearTokens&&_l(t)&&Cl(t,n,e),a(m,t,i.localize,E);if(l.match(Dl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return t}).join("");return S}function Il(e){return e.match(yl)[1].replace(Tl,"'")}function hl(e){var l;let{t:o,key:a,document:r,setDocuments:u,error:d,setError:s,documents:c,setCheckRequiredFields:v}=e;const p=null==c?void 0:c.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],m=Digit.ULBService.getCurrentTenantId(),[E,S]=n.useState(p?{...p,active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}:1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{}),[_,f]=n.useState(null),[C,g]=n.useState(()=>(null==p?void 0:p.fileStoreId)||null);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==C?void 0:C.length)||null===C?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==C),{documentType:null==E?void 0:E.code,fileStoreId:C,documentUid:C,fileName:(null==_?void 0:_.name)||""}]})},[C,E]),n.useEffect(()=>{!function(){try{s(null);const e=function(){if(_){const e=function(){if(_.size>=5242880)s({key:"error",message:"CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"});else{const e=ye(function(){return g(null),Promise.resolve(Digit.UploadServices.Filestorage("WS",_,null==m?void 0:m.split(".")[0])).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?g(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):s({key:"error",message:"CS_FILE_UPLOAD_ERROR"})})},function(){s({key:"error",message:"CS_FILE_UPLOAD_ERROR"})});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[_]),t.createElement("div",{style:{marginBottom:"24px"}},t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},o(null==r?void 0:r.i18nKey)+"*"),t.createElement("div",{className:"field"},t.createElement(i.Dropdown,{t:o,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>S(e)}),t.createElement(i.UploadFile,{id:"noc-doc-1-"+a,extraStyleName:"propertyCreate",accept:"image/*, .pdf, .png, .jpeg, .jpg",onUpload:function(e){f(e.target.files[0])},onDelete:()=>{g(null),v(!0)},message:C?"1 "+o("CS_ACTION_FILEUPLOADED"):o("ES_NO_FILE_SELECTED_LABEL"),error:d}))))}function Ol(e){var l;let{t:o,key:a,document:r,setDocuments:u,error:d,setError:s,documents:c,setCheckRequiredFields:v}=e;const p=null==c?void 0:c.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],m=Digit.ULBService.getCurrentTenantId(),[E,S]=n.useState(p?{...p,active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}:1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{}),[_,f]=n.useState(null),[C,g]=n.useState(()=>(null==p?void 0:p.fileStoreId)||null);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==C?void 0:C.length)||null===C?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==C),{documentType:null==E?void 0:E.code,fileStoreId:C,id:null==E?void 0:E.id,i18nKey:null==E?void 0:E.code,documentUid:null!=E&&E.documentUid?null==E?void 0:E.documentUid:C,fileName:(null==_?void 0:_.name)||"",status:"ACTIVE"}]})},[C,E]),n.useEffect(()=>{!function(){try{s(null);const e=function(){if(_){const e=function(){if(_.size>=5242880)s({key:"error",message:"CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"});else{const e=ye(function(){return g(null),Promise.resolve(Digit.UploadServices.Filestorage("WS",_,null==m?void 0:m.split(".")[0])).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?g(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):s({key:"error",message:"CS_FILE_UPLOAD_ERROR"})})},function(){s({key:"error",message:"CS_FILE_UPLOAD_ERROR"})});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[_]),t.createElement("div",{style:{marginBottom:"24px"}},t.createElement(i.CardLabel,null,o(null==r?void 0:r.i18nKey)+"*"),t.createElement(i.Dropdown,{t:o,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>S(e)}),t.createElement(i.UploadFile,{id:"noc-doc-"+a,extraStyleName:"propertyCreate",accept:"image/*, .pdf, .png, .jpeg, .jpg",onUpload:function(e){f(e.target.files[0])},onDelete:()=>{g(null),v(!0)},message:C?"1 "+o("CS_ACTION_FILEUPLOADED"):o("ES_NO_FILE_SELECTED_LABEL"),error:d}))}const bl=e=>t.createElement(i.Banner,{message:e.message,applicationNumber:null==e?void 0:e.applicationNumber,successful:e.isSuccess,style:{padding:"10px"},headerStyles:{fontSize:"32px"},infoOneStyles:{paddingTop:"20px"}}),Ll=e=>t.createElement(i.Banner,{message:e.message,applicationNumber:null==e?void 0:e.applicationNumber,successful:e.isSuccess,style:{padding:"10px"},headerStyles:{fontSize:"32px"},infoOneStyles:{paddingTop:"20px"}}),Rl=e=>{var l,o;const{disConnectionDetail:r,focusIndex:u,setFocusIndex:d,t:c,config:v,setError:p,clearErrors:m,formState:E,disConnectionDetails:S,setIsErrors:f,setDisConnectionDetails:C,disconnectionTypeList:g}=e,{control:N,formState:y,watch:T,trigger:D}=a.useForm(),A=T(),{errors:I}=y,h=window.Digit.Utils.browser.isMobile(),O=window.location.href.includes("/employee");n.useEffect(()=>{D()},[]),n.useEffect(()=>{if(Object.entries(A).length>0){const e=Object.keys(A),n={};if(e.forEach(e=>n[e]=r[e]),!_.isEqual(A,n)){let e=!0;Object.keys(A).map(n=>{!A[n]&&e&&(e=!1,f(!1))}),e&&f(!0);let n=[{...A}];C(n),D()}}},[A,S]),n.useEffect(()=>{var e;Object.keys(I).length&&!_.isEqual((null===(e=E.errors[v.key])||void 0===e?void 0:e.type)||{},I)?p(v.key,{type:I}):!Object.keys(I).length&&E.errors[v.key]&&m(v.key)},[I]);const b={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return t.createElement("div",null,t.createElement("div",{style:{marginBottom:"16px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"40px",fontSize:"24px",lineHeight:"32px"}},c("WS_APPLICATION_DETAILS")),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:h&&O?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},c("WS_ACK_COMMON_APP_NO_LABEL")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:N,name:"consumerNumber",defaultValue:null==r?void 0:r.consumerNumber,rules:{required:c("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.TextInput,{value:e.value,autoFocus:u.index===(null==r?void 0:r.key)&&"consumerNumber"===u.type,errorStyle:!(!y.touched.consumerNumber||null==I||null===(n=I.consumerNumber)||void 0===n||!n.message),onChange:n=>{e.onChange(n.target.value),d({index:null==r?void 0:r.key,type:"consumerNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,style:{border:"none",color:"#0b0c0c !important",pointerEvents:"none"}})}}))),t.createElement(i.CardLabel,{style:h&&O?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},""+c("WS_DISCONNECTION_TYPE")),t.createElement(a.Controller,{control:N,name:"disConnectionType",defaultValue:null==r?void 0:r.disConnectionType,rules:{required:c("REQUIRED_FIELD")},isMandatory:!0,render:e=>{var n;return t.createElement(i.RadioButtons,{t:c,options:g,optionsKey:"i18nKey",value:{name:null==r?void 0:r.disConnectionType,value:null==r?void 0:r.disConnectionType,code:null==r?void 0:r.disConnectionType,i18nKey:"WS_DISCONNECTIONTYPE_"+s(null==r?void 0:r.disConnectionType," ","_")},selectedOption:{name:null==r?void 0:r.disConnectionType,value:null==r?void 0:r.disConnectionType,code:null==r?void 0:r.disConnectionType,i18nKey:"WS_DISCONNECTIONTYPE_"+s(null==r?void 0:r.disConnectionType," ","_")},onSelect:n=>{e.onChange(n.code)},labelKey:"WS_DISCONNECTIONTYPE",errorStyle:!(!y.touched.disConnectionType||null==I||null===(n=I.disConnectionType)||void 0===n||!n.message),autoFocus:u.index===(null==r?void 0:r.key)&&"disConnectionType"===u.type,style:{display:"flex",gap:"0px 3rem"},isDependent:!0})}}),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:h&&O?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},c("WS_DISCONNECTION_PROPOSED_DATE")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{name:"disConnectionProposeDate",rules:{required:c("REQUIRED_FIELD")},defaultValue:null==r?void 0:r.disConnectionProposeDate,control:N,render:e=>t.createElement(i.DatePicker,{date:e.value,name:"disConnectionProposeDate",onChange:e.onChange})}))),t.createElement(i.CardLabelError,{style:b},y.touched.disConnectionProposeDate?null==I||null===(l=I.disConnectionProposeDate)||void 0===l?void 0:l.message:""),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:h&&O?{fontWeight:"700",width:"100%"}:{marginTop:"-5px",fontWeight:"700"},className:"card-label-smaller"},c("WS_DISCONNECTION_REASON")+"*"),t.createElement("div",{className:"field"},t.createElement(a.Controller,{control:N,defaultValue:null==r?void 0:r.disConnectionReason,name:"disConnectionReason",rules:{required:c("REQUIRED_FIELD")},render:e=>{var n;return t.createElement(i.TextArea,{t:c,type:"text",isMandatory:!1,name:"disConnectionReason",value:e.value,errorStyle:!(!y.touched.disConnectionReason||null==I||null===(n=I.disConnectionReason)||void 0===n||!n.message),autoFocus:u.index===(null==r?void 0:r.key)&&"disConnectionReason"===u.type,onChange:n=>{e.onChange(n),d({index:r.key,type:"disConnectionReason"})},onBlur:e.onBlur})}}))),t.createElement(i.CardLabelError,{style:b},y.touched.disConnectionReason?null==I||null===(o=I.disConnectionReason)||void 0===o?void 0:o.message:"")))},wl=e=>{var o,a,r,u;let{registerRef:d,searchFormState:s}=e;const{t:c}=l.useTranslation(),v={maxlength:10,pattern:"[6-9][0-9]{9}",title:c("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"};let p={};return t.createElement(n.Fragment,null,t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("WS_ACK_COMMON_APP_NO_LABEL")),t.createElement(i.TextInput,H({name:"applicationNumber",inputRef:d({})},p={isRequired:!1,pattern:"^[a-zA-Z0-9-_/]*$",type:"text",title:c("ERR_INVALID_APPLICATION_NO")}))),t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("WS_MYCONNECTIONS_CONSUMER_NO")),t.createElement(i.TextInput,H({name:"consumerNo",inputRef:d({})},p={isRequired:!1,pattern:"^[a-zA-Z0-9/-]*$",type:"text",title:c("ERR_INVALID_CONSUMER_NO")}))),t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("CORE_COMMON_MOBILE_NUMBER")),t.createElement(i.MobileNumber,H({name:"mobileNumber",type:"number",inputRef:d({})},v)),null!=s&&null!==(o=s.errors)&&void 0!==o&&null!==(a=o.mobileNumber)&&void 0!==a&&a.message?t.createElement(i.CardLabelError,null,null==s||null===(r=s.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message):null))},Wl=e=>{var o,r,u,d,s,c;let{statuses:v,isInboxLoading:p,controlFilterForm:m,filterFormState:E,localitiesForEmployeesCurrentTenant:S,loadingLocalitiesForEmployeesCurrentTenant:_,checkPathName:f}=e;const{t:C}=l.useTranslation(),g=[{code:"ASSIGNED_TO_ME",name:""+C("ES_INBOX_ASSIGNED_TO_ME")},{code:"ASSIGNED_TO_ALL",name:""+C("ES_INBOX_ASSIGNED_TO_ALL")}],N=a.useWatch({control:m,name:"applicationType",defaultValue:(null==E?void 0:E.applicationType)||null});let y=0,T=0,D=0,A=0,I=0,h=0;null==v||null===(o=v.filter(e=>"NewWS1"===e.businessservice))||void 0===o||o.forEach(e=>y+=null==e?void 0:e.count),null==v||null===(r=v.filter(e=>"ModifyWSConnection"===e.businessservice))||void 0===r||r.forEach(e=>T+=null==e?void 0:e.count),null==v||null===(u=v.filter(e=>"DisconnectWSConnection"===e.businessservice))||void 0===u||u.forEach(e=>D+=null==e?void 0:e.count),null==v||null===(d=v.filter(e=>"NewSW1"===e.businessservice))||void 0===d||d.forEach(e=>A+=null==e?void 0:e.count),null==v||null===(s=v.filter(e=>"ModifySWConnection"===e.businessservice))||void 0===s||s.forEach(e=>I+=null==e?void 0:e.count),null==v||null===(c=v.filter(e=>"DisconnectSWConnection"===e.businessservice))||void 0===c||c.forEach(e=>h+=null==e?void 0:e.count);const O=f?[{code:"NewWS1",name:C("CS_COMMON_INBOX_NEWWS1")+" ("+y+")"},{code:"ModifyWSConnection",name:C("CS_COMMON_INBOX_MODIFYWSCONNECTION")+" ("+T+")"},{code:"DisconnectWSConnection",name:C("CS_COMMON_INBOX_DISCONNECTIONWS")+" ("+D+")"}]:[{code:"NewSW1",name:C("CS_COMMON_INBOX_NEWSW1")+" ("+A+")"},{code:"ModifySWConnection",name:C("CS_COMMON_INBOX_MODIFYSWCONNECTION")+" ("+I+")"},{code:"DisconnectSWConnection",name:C("CS_COMMON_INBOX_DISCONNECTIONSW")+" ("+h+")"}],b=(e,n)=>{const t=e.map(e=>e[1]);return n.onChange(t)};return t.createElement(n.Fragment,null,t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"assignee",control:m,render:e=>t.createElement(i.RadioButtons,{onSelect:n=>{e.onChange(n.code)},selectedOption:g.filter(n=>n.code===e.value)[0],optionsKey:"name",name:"assignee",options:g})})),t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"locality",control:m,render:e=>{const l=n.useMemo(()=>{var n;return null==e||null===(n=e.value)||void 0===n?void 0:n.map((n,l)=>t.createElement(i.RemoveableTag,{key:l,text:n.i18nkey,onClick:()=>{var t;e.onChange(null==e||null===(t=e.value)||void 0===t?void 0:t.filter(e=>e.code!==n.code))}}))},[null==e?void 0:e.value]);return _?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label"},C("ES_INBOX_LOCALITY")),t.createElement(i.MultiSelectDropdown,{options:S||[],optionsKey:"i18nkey",props:e,isPropsNeeded:!0,onSelect:b,selected:null==e?void 0:e.value,defaultLabel:C("ES_WS_ALL_SELECTED"),defaultUnit:C("WS_SELECTED_TEXT")}),t.createElement("div",{className:"tag-container"},l))}})),t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"applicationType",control:m,render:e=>{const l=n.useMemo(()=>null==O?void 0:O.map((n,l)=>{var o;return t.createElement(i.CheckBox,{onChange:t=>{var l,o;return o=t.target.checked?[...e.value,null==n?void 0:n.code]:null===(l=e.value)||void 0===l?void 0:l.filter(e=>e!==(null==n?void 0:n.code)),void e.onChange(o)},checked:null===(o=e.value)||void 0===o?void 0:o.includes(null==n?void 0:n.code),label:null==n?void 0:n.name,value:n.name,key:l+1})}),[e.value,v]);return t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label"},C("WS_COMMON_TABLE_COL_APP_TYPE_LABEL")),p?t.createElement(i.Loader,null):t.createElement(n.Fragment,null," ",l))}})),(null==N?void 0:N.length)>0?t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"applicationStatus",control:m,render:e=>{const l=n.useMemo(()=>{var n;return null==v||null===(n=v.filter(e=>N.includes(e.businessservice)))||void 0===n?void 0:n.map((n,l)=>{var o;return t.createElement(i.CheckBox,{key:l+1,onChange:t=>{var l,o;return o=t.target.checked?[...e.value,null==n?void 0:n.statusid]:null===(l=e.value)||void 0===l?void 0:l.filter(e=>e!==(null==n?void 0:n.statusid)),void e.onChange(o)},checked:null===(o=e.value)||void 0===o?void 0:o.includes(null==n?void 0:n.statusid),label:C("WF_"+n.businessservice.toUpperCase()+"_"+n.applicationstatus.split("_").pop())+" ("+n.count+")"})})},[e.value,v,N]);return t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label"},C("WS_MYCONNECTIONS_STATUS")),p?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,l))}})):null)},Pl=e=>{var l,o;let{register:r,control:u,reset:d,tenantId:s,t:c,businessService:v}=e;const{isLoading:p,data:m}=Digit.Hooks.ws.useWSMDMSWS.applicationTypes(Digit.ULBService.getStateId()),E="WS"===v?"WATER":"SEWERAGE",S=null==m?void 0:m.filter(e=>{var n;return null==e||null===(n=e.code)||void 0===n?void 0:n.includes(E)}),_=a.useWatch({control:u,name:"applicationType"});let f=[],C="";f=["NewWS1","NewSW1","ModifyWSConnection","ModifySWConnection","DisconnectWSConnection","DisconnectSWConnection"],_&&"NEW_WATER_CONNECTION"===(null==_?void 0:_.code)?C="NewWS1":_&&"NEW_SEWERAGE_CONNECTION"===(null==_?void 0:_.code)?C="NewSW1":_&&"MODIFY_WATER_CONNECTION"===(null==_?void 0:_.code)?C="ModifyWSConnection":_&&"MODIFY_SEWERAGE_CONNECTION"===(null==_?void 0:_.code)?C="ModifySWConnection":_&&"DISCONNECT_WATER_CONNECTION"===(null==_?void 0:_.code)?C="DisconnectWSConnection":_&&"DISCONNECT_SEWERAGE_CONNECTION"===(null==_?void 0:_.code)&&(C="DisconnectSWConnection");const{data:g,isLoading:N}=Digit.Hooks.useApplicationStatusGeneral({businessServices:f,tenantId:s},{});let y=[];g&&(null==g||null===(l=g.otherRoleStates)||void 0===l||l.map(e=>{""===C?y.length>0&&(null==y?void 0:y.some(n=>(null==n?void 0:n.code)===e.applicationStatus))||y.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWWS1_"+(null==e?void 0:e.applicationStatus)}):(null==e?void 0:e.stateBusinessService)===C&&y.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWWS1_"+(null==e?void 0:e.applicationStatus)})})),g&&(null==g||null===(o=g.userRoleStates)||void 0===o||o.map(e=>{""===C?y.length>0&&(null==y?void 0:y.some(n=>(null==n?void 0:n.code)===e.applicationStatus))||y.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWWS1_"+(null==e?void 0:e.applicationStatus)}):(null==e?void 0:e.stateBusinessService)===C&&y.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWWS1_"+(null==e?void 0:e.applicationStatus)})})),null==y||y.sort((e,n)=>c(e.i18nKey)>c(n.i18nKey)?1:c(n.i18nKey)>c(e.i18nKey)?-1:0);const T={maxlength:10,pattern:"[6-9][0-9]{9}",title:c("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"};let D={};return t.createElement(n.Fragment,null,t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_ACK_COMMON_APP_NO_LABEL")),t.createElement(i.TextInput,H({name:"applicationNumber",inputRef:r()},D={isRequired:!1,pattern:"^[a-zA-Z0-9-_/]*$",type:"text",title:c("ERR_INVALID_APPLICATION_NO")}))),t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_MYCONNECTIONS_CONSUMER_NO")),t.createElement(i.TextInput,H({name:"connectionNumber",inputRef:r()},D={isRequired:!1,pattern:"^[a-zA-Z0-9/-]*$",type:"text",title:c("ERR_INVALID_CONSUMER_NO")}))),t.createElement(i.SearchField,null,t.createElement("label",null,c("CONSUMER_MOBILE_NUMBER")),t.createElement(i.MobileNumber,H({name:"mobileNumber",type:"number",inputRef:r({})},T))),p?t.createElement(i.Loader,null):t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_APPLICATION_TYPE_LABEL")),t.createElement(a.Controller,{control:u,name:"applicationType",render:e=>t.createElement(i.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:S,optionKey:"i18nKey",t:c})})),N?t.createElement(i.Loader,null):t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL")),t.createElement(a.Controller,{control:u,name:"applicationStatus",render:e=>t.createElement(i.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:y,optionKey:"i18nKey",t:c})})),t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_COMMON_FROM_DATE_LABEL")),t.createElement(a.Controller,{render:e=>t.createElement(i.DatePicker,{date:e.value,onChange:e.onChange}),name:"fromDate",control:u})),t.createElement(i.SearchField,null,t.createElement("label",null,c("WS_COMMON_TO_DATE_LABEL")),t.createElement(a.Controller,{render:e=>t.createElement(i.DatePicker,{date:e.value,onChange:e.onChange}),name:"toDate",control:u})),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:c("ES_COMMON_SEARCH"),submit:!0}),t.createElement("p",{onClick:()=>{d({applicationType:"",fromDate:"",toDate:"",connectionNumber:"",applicationStatus:"",applicationNumber:"",tradeName:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"})}},c("CS_COMMON_CLEAR_SEARCH"))))},Ml=e=>{let{Controller:l,register:a,control:r,t:u,reset:d,previousPage:s,handleSubmit:c,tenantId:v,data:p,onSubmit:m,businessService:E}=e;const[S,_]=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),f=()=>{_({type:"remove"})},C=()=>t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:f},t.createElement(i.CloseSvg,null)),g={Controller:l,register:a,control:r,t:u,reset:d,previousPage:s,businessService:E},N=n.useCallback(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a}=e;return(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a}=e;const{closeMobilePopupModal:r}=a;switch(n){case"SearchFormComponent":return t.createElement(i.SearchForm,a,t.createElement(C,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,u("ES_COMMON_SEARCH"),":")),t.createElement(Pl,H({},l,{closeMobilePopupModal:r,tenantId:o,t:u})));default:return t.createElement("span",null)}})({currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a})},[S]),y=n.useMemo(()=>{if(null!=p&&p.display)return[];const e=e=>"NEW_WATER_CONNECTION"==(null==e?void 0:e.applicationType)||"MODIFY_WATER_CONNECTION"==(null==e?void 0:e.applicationType)||"DISCONNECT_WATER_CONNECTION"==(null==e?void 0:e.applicationType)?"WATER":"NEW_SEWERAGE_CONNECTION"==(null==e?void 0:e.applicationType)||"MODIFY_SEWERAGE_CONNECTION"==(null==e?void 0:e.applicationType)||"DISCONNECT_SEWERAGE_CONNECTION"==(null==e?void 0:e.applicationType)?"SEWERAGE":void 0,n=e=>{var n,t;let l="application";return null!=e&&null!==(n=e.toUpperCase())&&void 0!==n&&n.includes("DISCONNECT")?l="disconnection":null!=e&&null!==(t=e.toUpperCase())&&void 0!==t&&t.includes("MODIFY")&&(l="modify"),l};return null==p?void 0:p.map(l=>{return{[u("WS_MYCONNECTIONS_CONSUMER_NO")]:null!=l&&l.connectionNo?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+(null==l?void 0:l.connectionNo)+"&tenantId="+v+"&service="+e(l)},null==l?void 0:l.connectionNo))):u("CS_NA"),[u("WS_ACK_COMMON_APP_NO_LABEL")]:t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/"+n(null==l?void 0:l.applicationType)+"-details?applicationNumber="+(null==l?void 0:l.applicationNo)+"&tenantId="+v+"&service="+e(l)},null==l?void 0:l.applicationNo))),[u("WS_APPLICATION_TYPE_LABEL")]:null!=l&&l.applicationType?(i=l.applicationType,i=i.replace(/_/g," ")):"-",[u("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]:(null==l?void 0:l.ownerNames)||"-",[u("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL")]:u((null==l?void 0:l.applicationStatus)||"NA"),[u("WS_COMMON_TABLE_COL_ADDRESS")]:(null==l?void 0:l.address)||"-"};var i})},[p]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},t.createElement(i.SearchAction,{text:u("ES_COMMON_SEARCH"),handleActionClick:()=>_({type:"set",payload:"SearchFormComponent"}),tenantId:v,t:u})),S?t.createElement(i.PopUp,null,t.createElement(N,{onSubmit:e=>{_({type:"remove"}),m(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:g,currentlyActiveMobileModal:S,closeMobilePopupModal:f,tenantId:v})):null,null!=p&&p.display?t.createElement(i.Card,{style:{marginTop:20}},u(null==p?void 0:p.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):t.createElement(i.DetailsCard,{data:y,serviceRequestIdKey:u("WS_COMMON_TABLE_COL_APP_NO")}))},xl=e=>{let{register:l,reset:o,t:a}=e;const r={maxlength:10,pattern:"[6-9][0-9]{9}",title:a("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"},u={pattern:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}|[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",title:a("ERR_DEFAULT_INPUT_FIELD_MSG")};let d={};return t.createElement(n.Fragment,null,t.createElement(i.SearchField,null,t.createElement("label",null,a("WS_MYCONNECTIONS_CONSUMER_NO")),t.createElement(i.TextInput,H({name:"connectionNumber",inputRef:l({})},d={isRequired:!1,pattern:"^[a-zA-Z0-9/-]*$",type:"text",title:a("ERR_INVALID_CONSUMER_NO")}))),t.createElement(i.SearchField,null,t.createElement("label",null,a("WS_SEARCH_CONNNECTION_OLD_CONSUMER_LABEL")),t.createElement(i.TextInput,H({name:"oldConnectionNumber",inputRef:l({})},u))),t.createElement(i.SearchField,null,t.createElement("label",null,a("WS_PROPERTY_ID_LABEL")),t.createElement(i.TextInput,H({name:"propertyId",inputRef:l({})},u))),t.createElement(i.SearchField,null,t.createElement("label",null,a("WS_HOME_SEARCH_RESULTS_OWN_MOB_LABEL")),t.createElement(i.MobileNumber,H({name:"mobileNumber",inputRef:l({})},r))),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:a("WS_SEARCH_CONNECTION_SEARCH_BUTTON"),submit:!0}),t.createElement("p",{onClick:()=>{o({searchType:"CONNECTION",mobileNumber:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",propertyId:"",connectionNumber:"",oldConnectionNumber:""})}},a("WS_SEARCH_CONNECTION_RESET_BUTTON"))))},Bl=e=>{let{Controller:l,register:a,control:r,t:u,reset:d,previousPage:s,handleSubmit:c,tenantId:v,data:p,onSubmit:m}=e;const[E,S]=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),_=()=>{S({type:"remove"})},f=()=>t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:_},t.createElement(i.CloseSvg,null)),C={Controller:l,register:a,control:r,t:u,reset:d,previousPage:s},g=e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()},N=n.useCallback(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a}=e;return(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a}=e;const{closeMobilePopupModal:r}=a;switch(n){case"SearchFormComponent":return t.createElement(i.SearchForm,a,t.createElement(f,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,u("ES_COMMON_SEARCH"),":")),t.createElement(xl,H({},l,{closeMobilePopupModal:r,tenantId:o,t:u})));default:return t.createElement("span",null)}})({currentlyActiveMobileModal:n,searchFormFieldsComponentProps:l,tenantId:o,...a})},[E]),y=(e,n)=>{switch(e){case"Active":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+("WATER"==(null==n?void 0:n.service)?"WS":"SW")+"/"+encodeURIComponent(null==n?void 0:n.connectionNo)+"/"+(null==n?void 0:n.tenantId)+"?tenantId="+(null==n?void 0:n.tenantId)+"&ISWSCON"}},u("WS_COMMON_COLLECT_LABEL")," ")))}},T=n.useMemo(()=>null!=p&&p.display?[]:null==p?void 0:p.map(e=>{var n,l,i;return{[u("WS_MYCONNECTIONS_CONSUMER_NO")]:(i=e,t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+(null==i?void 0:i.connectionNo)+"&tenantId="+(null==i?void 0:i.tenantId)+"&service="+(null==i?void 0:i.service)+"&connectionType="+(null==i?void 0:i.connectionType)+"&due="+((null==i?void 0:i.due)||0)},(null==i?void 0:i.connectionNo)||"NA")))||u("WS_NA")),[u("WS_COMMON_TABLE_COL_SERVICE_LABEL")]:u("WS_"+(null==e?void 0:e.service)),[u("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]:(null==e?void 0:e.owner)||u("WS_NA"),[u("WS_COMMON_TABLE_COL_STATUS_LABEL")]:u("WS_"+(null==e||null===(n=e.status)||void 0===n?void 0:n.toUpperCase())),[u("WS_COMMON_TABLE_COL_AMT_DUE_LABEL")]:(null==e?void 0:e.due)||u("WS_NA"),[u("WS_COMMON_TABLE_COL_ADDRESS")]:(null==e?void 0:e.address)||u("WS_NA"),[u("WS_COMMON_TABLE_COL_DUE_DATE_LABEL")]:"INACTIVE"===(null==e||null===(l=e.status)||void 0===l?void 0:l.toUpperCase())?u("WS_NA"):null!=e&&e.dueDate?g(null==e?void 0:e.dueDate):u("WS_NA"),[u("WS_COMMON_TABLE_COL_ACTION_LABEL")]:null!=e&&e.due?y(null==e?void 0:e.status,e):u("WS_NA")}}),[p]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},t.createElement(i.SearchAction,{text:u("ES_COMMON_SEARCH"),handleActionClick:()=>S({type:"set",payload:"SearchFormComponent"}),tenantId:v,t:u})),E?t.createElement(i.PopUp,null,t.createElement(N,{onSubmit:e=>{S({type:"remove"}),m(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:C,currentlyActiveMobileModal:E,closeMobilePopupModal:_,tenantId:v})):null,null!=p&&p.display?t.createElement(i.Card,{style:{marginTop:20}},u(null==p?void 0:p.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):t.createElement(i.DetailsCard,{data:T,serviceRequestIdKey:u("WS_COMMON_TABLE_COL_APP_NO")}))},Fl=e=>{let{register:l,control:o,t:r,setValue:u}=e;const[d,s]=n.useState(""),c=Digit.ULBService.getCurrentTenantId();function v(e){console.log("register, control",l,c),u("locality",e),u("tenantId",c),s(e)}return t.createElement(n.Fragment,null,t.createElement(i.SearchField,null,t.createElement("label",null,r("WS_SEARCH_CONNNECTION_CITY")),t.createElement(i.TextInput,{name:"city",disable:!0,value:r(c),inputRef:l({})})),t.createElement(i.SearchField,null,t.createElement("label",null,r("WS_SEARCH_LOCALITY_LABEL")),t.createElement(a.Controller,{name:"locality",defaultValue:null,control:o,inputRef:l({}),render:e=>t.createElement(i.Localities,{selectLocality:v,tenantId:c,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},selected:d,disableLoader:!1})})),t.createElement(i.SearchField,{style:{marginTop:"16px !important"}},t.createElement(i.SubmitBar,{label:r("WS_SEARCH_CONNECTION_SEARCH_BUTTON"),submit:!0})))},Ul=e=>{var o,a,r,u;let{registerRef:d,searchFormState:s}=e;const{t:c}=l.useTranslation(),v={maxlength:10,pattern:"[6-9][0-9]{9}",title:c("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"};let p={};return t.createElement(n.Fragment,null,t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("BILLAMEND_APPLICATIONNO")),t.createElement(i.TextInput,H({name:"applicationNumber",inputRef:d({})},p={isRequired:!1,pattern:"^[a-zA-Z0-9-_/]*$",type:"text",title:c("ERR_INVALID_APPLICATION_NO")}))),t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("BILLAMEND_CONSUMER_NO")),t.createElement(i.TextInput,H({name:"consumerCode",inputRef:d({})},p={isRequired:!1,pattern:"^[a-zA-Z0-9/-]*$",type:"text",title:c("ERR_INVALID_CONSUMER_NO")}))),t.createElement(i.SearchField,{className:"wns-search-field"},t.createElement("label",null,c("CORE_COMMON_MOBILE_NUMBER")),t.createElement(i.MobileNumber,H({name:"mobileNumber",type:"number",inputRef:d({})},v)),null!=s&&null!==(o=s.errors)&&void 0!==o&&null!==(a=o.mobileNumber)&&void 0!==a&&a.message?t.createElement(i.CardLabelError,null,null==s||null===(r=s.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message):null))},kl=e=>{let{controlFilterForm:o,localitiesForEmployeesCurrentTenant:r,loadingLocalitiesForEmployeesCurrentTenant:u,isInboxLoading:d,filterFormState:s,statuses:c}=e;const{t:v}=l.useTranslation(),p=[{code:"ASSIGNED_TO_ME",name:""+v("ES_INBOX_ASSIGNED_TO_ME")},{code:"ASSIGNED_TO_ALL",name:""+v("ES_INBOX_ASSIGNED_TO_ALL")}],m=(a.useWatch({control:o,name:"status",defaultValue:(null==s?void 0:s.applicationStatus)||null}),null==c||c.filter(e=>"BS.AMENDMENT"===e.businessservice),v("INWORKFLOW"),v("CONSUMED"),(e,n)=>{const t=e.map(e=>e[1]);return n.onChange(t)});return t.createElement(n.Fragment,null,t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"assignee",control:o,render:e=>t.createElement(i.RadioButtons,{onSelect:n=>{e.onChange(n.code)},selectedOption:p.filter(n=>n.code===e.value)[0],optionsKey:"name",name:"assignee",options:p})})),t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"locality",control:o,render:e=>{const l=n.useMemo(()=>{var n;return null==e||null===(n=e.value)||void 0===n?void 0:n.map((n,l)=>t.createElement(i.RemoveableTag,{key:l,text:n.i18nkey,onClick:()=>{var t;e.onChange(null==e||null===(t=e.value)||void 0===t?void 0:t.filter(e=>e.code!==n.code))}}))},[null==e?void 0:e.value]);return u?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label"},v("ES_INBOX_LOCALITY")),t.createElement(i.MultiSelectDropdown,{options:r||[],optionsKey:"i18nkey",props:e,isPropsNeeded:!0,onSelect:m,selected:null==e?void 0:e.value,defaultLabel:v("ES_BPA_ALL_SELECTED"),defaultUnit:v("BPA_SELECTED_TEXT"),ServerStyle:{overflowX:"hidden",width:"100%"}}),t.createElement("div",{className:"tag-container"},l))}})),t.createElement(i.FilterFormField,null,t.createElement(a.Controller,{name:"applicationStatus",control:o,render:e=>{const l=n.useMemo(()=>null==c?void 0:c.map((n,l)=>{var o;return t.createElement(i.CheckBox,{onChange:t=>{var l,o;return o=t.target.checked?[...e.value,null==n?void 0:n.statusid]:null===(l=e.value)||void 0===l?void 0:l.filter(e=>e!==(null==n?void 0:n.statusid)),void e.onChange(o)},checked:null===(o=e.value)||void 0===o?void 0:o.includes(null==n?void 0:n.statusid),label:""+v(n.applicationstatus+" ("+n.count+")"),value:n.applicationStatus,key:l+1})}),[e.value,c]);return t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label"},v("CS_INBOX_STATUS_FILTER")),d?t.createElement(i.Loader,null):t.createElement(n.Fragment,null," ",l))}})))},Hl=[{head:"",body:[{type:"component",route:"know-your-property",isMandatory:!0,component:"CPTKnowYourProperty",texts:{header:"PT_DO_YOU_KNOW_YOUR_PROPERTY",submitBarLabel:"CS_COMMON_NEXT"},key:"knowyourproperty",withoutLabel:!0,nextStep:{TL_COMMON_YES:"search-property",TL_COMMON_NO:"create-property"},hideInEmployee:!0},{type:"component",route:"search-property",isMandatory:!0,component:"CPTSearchProperty",key:"cptsearchproperty",withoutLabel:!0,nextStep:"search-results",hideInEmployee:!0},{type:"component",route:"search-results",isMandatory:!0,component:"CPTSearchResults",key:"cptsearchresults",withoutLabel:!0,nextStep:"docsrequired",hideInEmployee:!0},{type:"component",route:"create-property",isMandatory:!0,component:"CPTCreateProperty",key:"cptcreateproperty",withoutLabel:!0,nextStep:"acknowledge-create-property",hideInEmployee:!0},{type:"component",route:"acknowledge-create-property",isMandatory:!0,component:"CPTAcknowledgement",key:"cptacknowledgement",withoutLabel:!0,nextStep:"docsrequired",hideInEmployee:!0},{type:"component",route:"property-details",isMandatory:!0,component:"CPTPropertyDetails",key:"propertydetails",withoutLabel:!0,nextStep:"connection-holder",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"docsrequired",component:"WSDocsRequired",key:"data",nextStep:"property-details"},{route:"connection-holder",component:"WSConnectionHolder",key:"ConnectionHolderDetails",nextStep:"service-name",texts:{headerCaption:"WS_COMMON_CONNECTION_DETAIL",header:"WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",cardText:"WS_CONNECTION_HOLDER_TEXT",submitBarLabel:"CS_COMMON_NEXT"}},{route:"service-name",component:"WSServiceName",key:"serviceName",nextStep:"water-connection-details",WATER:"water-connection-details",SEWERAGE:"sewerage-connection-details",texts:{headerCaption:"WS_COMMON_CONNECTION_DETAIL",header:"WS_SERVICE_NAME",cardText:"",submitBarLabel:"CS_COMMON_NEXT"}},{route:"water-connection-details",component:"WSWaterConnectionDetails",key:"waterConectionDetails",nextStep:"sewerage-connection-details",WATER:"document-details",texts:{headerCaption:"WS_COMMON_CONNECTION_DETAIL",header:"WS_WATER_CONNECTION_DETAILS",cardText:"WS_PROVIDE_PROPOSED_NO_OF_TAPS_SELECT_PIPE_SIZE",submitBarLabel:"CS_COMMON_NEXT"}},{route:"sewerage-connection-details",component:"WSSewerageConnectionDetails",key:"sewerageConnectionDetails",nextStep:"document-details",SEWERAGE:"document-details",texts:{headerCaption:"WS_COMMON_CONNECTION_DETAIL",header:"PDF_STATIC_LABEL_SW_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",cardText:"WS_PROVIDE_NO_WATER_CLOSETS_TOILETS",submitBarLabel:"CS_COMMON_NEXT"}},{route:"document-details",component:"WSDocumentDetails",key:"documents",nextStep:null,texts:{headerCaption:"CE_DOCUMENT_DETAILS",header:"WS_DOCUMENT_DETAILS_HEADER",submitBarLabel:"CS_COMMON_NEXT"}}]},{head:"WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",isCreate:!0,hideInCitizen:!0,body:[{head:"",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"InfoLabel",component:"WSInfoLabel",withoutLabel:!0}]},{head:"",isEditConnection:!0,isCreateConnection:!1,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"WSEditConnectionDetails",withoutLabel:!0,key:"ConnectionDetails",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_PROPERTY_DETAILS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"CPTPropertySearchNSummary",withoutLabel:!0,key:"cpt",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"ConnectionHolderDetails",component:"WSConnectionHolderDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_ACTIVATION_DETAILS",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"activationDetails",component:"WSActivationPageDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",subHead:"WS_CONNECTION_DETAILS_HEADER_SUB_TEXT_LABEL",isEditConnection:!1,isCreateConnection:!0,body:[{type:"component",key:"ConnectionDetails",component:"WSConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditByConfigConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_PLUMBER_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"plumberDetails",component:"WSActivationPlumberDetails",withoutLabel:!0}]},{head:"WS_COMMON_ROAD_CUTTING_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"roadCuttingDetails",component:"WSRoadCuttingDetails",withoutLabel:!0}]},{head:"WS_COMMON_DOCS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"DocumentsRequired",component:"WSDocumentsEmployee",withoutLabel:!0}]}]},{head:"WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",isModify:!0,hideInCitizen:!0,body:[{head:"",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"InfoLabel",component:"WSInfoLabel",withoutLabel:!0}]},{head:"",isEditConnection:!0,isCreateConnection:!1,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"WSEditConnectionDetails",withoutLabel:!0,key:"ConnectionDetails",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_PROPERTY_DETAILS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"CPTPropertySearchNSummary",withoutLabel:!0,key:"cpt",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"ConnectionHolderDetails",component:"WSConnectionHolderDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_ACTIVATION_DETAILS",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"activationDetails",component:"WSActivationPageDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!0,body:[{type:"component",key:"ConnectionDetails",component:"WSConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditByConfigConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_PLUMBER_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"plumberDetails",component:"WSActivationPlumberDetails",withoutLabel:!0}]},{head:"WS_COMMON_ROAD_CUTTING_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"roadCuttingDetails",component:"WSRoadCuttingDetails",withoutLabel:!0}]},{head:"WS_COMMON_DOCS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"DocumentsRequired",component:"WSDocumentsEmployee",withoutLabel:!0}]}]},{head:"WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",isEdit:!0,hideInCitizen:!0,body:[{head:"",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"InfoLabel",component:"WSInfoLabel",withoutLabel:!0}]},{head:"",isEditConnection:!0,isCreateConnection:!1,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"WSEditConnectionDetails",withoutLabel:!0,key:"ConnectionDetails",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_PROPERTY_DETAILS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"CPTPropertySearchNSummary",withoutLabel:!0,key:"cpt",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"ConnectionHolderDetails",component:"WSConnectionHolderDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_ACTIVATION_DETAILS",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"activationDetails",component:"WSActivationPageDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!0,body:[{type:"component",key:"ConnectionDetails",component:"WSConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditByConfigConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_PLUMBER_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"plumberDetails",component:"WSActivationPlumberDetails",withoutLabel:!0}]},{head:"WS_COMMON_ROAD_CUTTING_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"roadCuttingDetails",component:"WSRoadCuttingDetails",withoutLabel:!0}]},{head:"WS_COMMON_DOCS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"DocumentsRequired",component:"WSDocumentsEmployee",withoutLabel:!0}]}]},{head:"WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",isEditByConfig:!0,hideInCitizen:!0,body:[{head:"",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"InfoLabel",component:"WSInfoLabel",withoutLabel:!0}]},{head:"",isEditConnection:!0,isCreateConnection:!1,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"WSEditConnectionDetails",withoutLabel:!0,key:"ConnectionDetails",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_PROPERTY_DETAILS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{component:"CPTPropertySearchNSummary",withoutLabel:!0,key:"cpt",type:"component",hideInCitizen:!0}]},{head:"WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"ConnectionHolderDetails",component:"WSConnectionHolderDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_ACTIVATION_DETAILS",isEditConnection:!1,isCreateConnection:!1,isModifyConnection:!0,body:[{type:"component",key:"activationDetails",component:"WSActivationPageDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditConnection:!1,isCreateConnection:!0,body:[{type:"component",key:"ConnectionDetails",component:"WSConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_CONNECTION_DETAIL",isEditByConfigConnection:!0,body:[{type:"component",key:"connectionDetails",component:"WSActivationConnectionDetails",withoutLabel:!0}]},{head:"WS_COMMON_PLUMBER_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"plumberDetails",component:"WSActivationPlumberDetails",withoutLabel:!0}]},{head:"WS_COMMON_ROAD_CUTTING_DETAILS",isEditByConfigConnection:!0,body:[{type:"component",key:"roadCuttingDetails",component:"WSRoadCuttingDetails",withoutLabel:!0}]},{head:"WS_COMMON_DOCS",isEditConnection:!0,isCreateConnection:!0,isModifyConnection:!0,isEditByConfigConnection:!0,body:[{type:"component",key:"DocumentsRequired",component:"WSDocumentsEmployee",withoutLabel:!0}]}]}],jl=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),zl=[{head:"NEW_DISCONNECTION",body:[{route:"docsrequired",component:"WSDisconnectionDocsRequired",key:"data",type:"component",withoutLabel:!0,nextStep:"application-form"},{route:"application-form",component:"WSDisconnectionForm",key:"WSDisconnectionForm",type:"component",withoutLabel:!0,nextStep:"documents-upload"},{route:"documents-upload",component:"WSDisconnectionDocumentsForm",key:"WSDisconnectionDocumentsForm",type:"component",isMandatory:!0,withoutLabel:!0,nextStep:"check",hideInEmployee:!0},{route:"check",component:"WSDisconnectionCheckPage",key:"WSDisconnectionCheckPage",type:"component",isMandatory:!0,withoutLabel:!0,nextStep:"disconnect-acknowledge",hideInEmployee:!0},{route:"disconnect-acknowledge",component:"WSDisconnectAcknowledgement",key:"WSDisconnectAcknowledgement",type:"component",isMandatory:!0,withoutLabel:!0,hideInEmployee:!0}]},{head:"WS_APP_FOR_WATER_AND_SEWERAGE_LABEL",isEditByConfig:!0,hideInCitizen:!0,isDisonnectionEdit:!0,isDisonnectionEditByConfig:!0,body:[{head:"",isDisonnectionEdit:!0,isDisonnectionEditByConfig:!0,body:[{type:"component",key:"disConnectionDetails",component:"WSDisconnectionAppDetails",isDisonnectionEdit:!0,withoutLabel:!0}]},{head:"WS_COMMON_PLUMBER_DETAILS",isDisonnectionEditByConfig:!0,body:[{type:"component",key:"plumberDetails",component:"WSActivationPlumberDetails",withoutLabel:!0}]},{head:"WS_COMMON_DOCS",isDisonnectionEdit:!0,isDisonnectionEditByConfig:!0,body:[{type:"component",key:"DocumentsRequired",component:"WSDocumentsEmployee",withoutLabel:!0}]}]},{head:"RE_SUBMIT_DISCONNECTION_APPLICATION",body:[{route:"application-form",component:"WSDisconnectionForm",key:"WSDisconnectionForm",type:"component",withoutLabel:!0,nextStep:"documents-upload"},{route:"documents-upload",component:"WSDisconnectionDocumentsForm",key:"WSDisconnectionDocumentsForm",type:"component",isMandatory:!0,withoutLabel:!0,nextStep:"resubmit-check",hideInEmployee:!0},{route:"check",component:"WSReSubmitDisconnectionCheckPage",key:"WSReSubmitDisconnectionCheckPage",type:"component",isMandatory:!0,withoutLabel:!0,nextStep:"disconnect-acknowledge",hideInEmployee:!0},{route:"disconnect-acknowledge",component:"WSDisconnectAcknowledgement",key:"WSDisconnectAcknowledgement",type:"component",isMandatory:!0,withoutLabel:!0,hideInEmployee:!0}]}],Vl=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),Yl=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),Gl=[{texts:{header:"WS_SEARCH_CONNECTION",submitBarLabel:"WS_SEARCH_LABEL",cardText:""},inputs:[{label:"CORE_COMMON_MOBILE_NUMBER",type:"mobileNumber",name:"mobileNumber",error:"CORE_COMMON_PHONENO_INVALIDMSG"},{label:"WS_PROP_DETAIL_CITY",name:"city",error:"WS_WRONG_CITY"},{label:"WS_PROP_DETAIL_LOCALITY_LABEL",type:"any",name:"locality",error:"UC_INVALID_LOCALITY"}]}];var ql="function"==typeof Symbol&&Symbol.for,Kl=ql?Symbol.for("react.element"):60103,Xl=ql?Symbol.for("react.portal"):60106,$l=ql?Symbol.for("react.fragment"):60107,Zl=ql?Symbol.for("react.strict_mode"):60108,Jl=ql?Symbol.for("react.profiler"):60114,Ql=ql?Symbol.for("react.provider"):60109,eo=ql?Symbol.for("react.context"):60110,no=ql?Symbol.for("react.async_mode"):60111,to=ql?Symbol.for("react.concurrent_mode"):60111,lo=ql?Symbol.for("react.forward_ref"):60112,oo=ql?Symbol.for("react.suspense"):60113,io=ql?Symbol.for("react.suspense_list"):60120,ao=ql?Symbol.for("react.memo"):60115,ro=ql?Symbol.for("react.lazy"):60116,uo=ql?Symbol.for("react.block"):60121,so=ql?Symbol.for("react.fundamental"):60117,co=ql?Symbol.for("react.responder"):60118,vo=ql?Symbol.for("react.scope"):60119;function po(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case Kl:switch(e=e.type){case no:case to:case $l:case Jl:case Zl:case oo:return e;default:switch(e=e&&e.$$typeof){case eo:case lo:case ro:case ao:case Ql:return e;default:return n}}case Xl:return n}}}function mo(e){return po(e)===to}var Eo={AsyncMode:no,ConcurrentMode:to,ContextConsumer:eo,ContextProvider:Ql,Element:Kl,ForwardRef:lo,Fragment:$l,Lazy:ro,Memo:ao,Portal:Xl,Profiler:Jl,StrictMode:Zl,Suspense:oo,isAsyncMode:function(e){return mo(e)||po(e)===no},isConcurrentMode:mo,isContextConsumer:function(e){return po(e)===eo},isContextProvider:function(e){return po(e)===Ql},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Kl},isForwardRef:function(e){return po(e)===lo},isFragment:function(e){return po(e)===$l},isLazy:function(e){return po(e)===ro},isMemo:function(e){return po(e)===ao},isPortal:function(e){return po(e)===Xl},isProfiler:function(e){return po(e)===Jl},isStrictMode:function(e){return po(e)===Zl},isSuspense:function(e){return po(e)===oo},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===$l||e===to||e===Jl||e===Zl||e===oo||e===io||"object"==typeof e&&null!==e&&(e.$$typeof===ro||e.$$typeof===ao||e.$$typeof===Ql||e.$$typeof===eo||e.$$typeof===lo||e.$$typeof===so||e.$$typeof===co||e.$$typeof===vo||e.$$typeof===uo)},typeOf:po},So=P(function(e,n){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,E=e?Symbol.for("react.lazy"):60116,S=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,f=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function g(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:var p=e.type;switch(p){case d:case s:case o:case a:case i:case v:return p;default:var S=p&&p.$$typeof;switch(S){case u:case c:case E:case m:case r:return S;default:return n}}case l:return n}}}var N=s,y=u,T=r,D=t,A=c,I=o,h=E,O=m,b=l,L=a,R=i,w=v,W=!1;function P(e){return g(e)===s}n.AsyncMode=d,n.ConcurrentMode=N,n.ContextConsumer=y,n.ContextProvider=T,n.Element=D,n.ForwardRef=A,n.Fragment=I,n.Lazy=h,n.Memo=O,n.Portal=b,n.Profiler=L,n.StrictMode=R,n.Suspense=w,n.isAsyncMode=function(e){return W||(W=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),P(e)||g(e)===d},n.isConcurrentMode=P,n.isContextConsumer=function(e){return g(e)===u},n.isContextProvider=function(e){return g(e)===r},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},n.isForwardRef=function(e){return g(e)===c},n.isFragment=function(e){return g(e)===o},n.isLazy=function(e){return g(e)===E},n.isMemo=function(e){return g(e)===m},n.isPortal=function(e){return g(e)===l},n.isProfiler=function(e){return g(e)===a},n.isStrictMode=function(e){return g(e)===i},n.isSuspense=function(e){return g(e)===v},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===s||e===a||e===i||e===v||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===E||e.$$typeof===m||e.$$typeof===r||e.$$typeof===u||e.$$typeof===c||e.$$typeof===_||e.$$typeof===f||e.$$typeof===C||e.$$typeof===S)},n.typeOf=g}()}),_o=P(function(e){e.exports="production"===process.env.NODE_ENV?Eo:So}),fo=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable;function No(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var yo=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var t,l,o=No(e),i=1;i<arguments.length;i++){for(var a in t=Object(arguments[i]))Co.call(t,a)&&(o[a]=t[a]);if(fo){l=fo(t);for(var r=0;r<l.length;r++)go.call(t,l[r])&&(o[l[r]]=t[l[r]])}}return o},To="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Do=Function.call.bind(Object.prototype.hasOwnProperty),Ao=function(){};if("production"!==process.env.NODE_ENV){var Io=To,ho={},Oo=Do;Ao=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}}}function bo(e,n,t,l,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(Oo(e,i)){var a;try{if("function"!=typeof e[i]){var r=Error((l||"React class")+": "+t+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw r.name="Invariant Violation",r}a=e[i](n,i,l,t,null,Io)}catch(e){a=e}if(!a||a instanceof Error||Ao((l||"React class")+": type specification of "+t+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in ho)){ho[a.message]=!0;var u=o?o():"";Ao("Failed "+t+" type: "+a.message+(null!=u?u:""))}}}bo.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(ho={})};var Lo=bo,Ro=function(){};function wo(){return null}function Wo(){}function Po(){}"production"!==process.env.NODE_ENV&&(Ro=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}}),Po.resetWarningCache=Wo;var Mo=P(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,n){var t="function"==typeof Symbol&&Symbol.iterator,l={array:r("array"),bigint:r("bigint"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),symbol:r("symbol"),any:a(wo),arrayOf:function(e){return a(function(n,t,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside arrayOf.");var r=n[t];if(!Array.isArray(r))return new i("Invalid "+o+" `"+a+"` of type `"+s(r)+"` supplied to `"+l+"`, expected an array.");for(var u=0;u<r.length;u++){var d=e(r,u,l,o,a+"["+u+"]",To);if(d instanceof Error)return d}return null})},element:a(function(n,t,l,o,a){var r=n[t];return e(r)?null:new i("Invalid "+o+" `"+a+"` of type `"+s(r)+"` supplied to `"+l+"`, expected a single ReactElement.")}),elementType:a(function(e,n,t,l,o){var a=e[n];return _o.isValidElementType(a)?null:new i("Invalid "+l+" `"+o+"` of type `"+s(a)+"` supplied to `"+t+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(n,t,l,o,a){var r;return n[t]instanceof e?null:new i("Invalid "+o+" `"+a+"` of type `"+((r=n[t]).constructor&&r.constructor.name?r.constructor.name:"<<anonymous>>")+"` supplied to `"+l+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:a(function(e,n,t,l,o){return d(e[n])?null:new i("Invalid "+l+" `"+o+"` supplied to `"+t+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(n,t,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside objectOf.");var r=n[t],u=s(r);if("object"!==u)return new i("Invalid "+o+" `"+a+"` of type `"+u+"` supplied to `"+l+"`, expected an object.");for(var d in r)if(Do(r,d)){var c=e(r,d,l,o,a+"."+d,To);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ro(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),wo;function n(n,t,l,a,r){for(var u=n[t],d=0;d<e.length;d++)if(o(u,e[d]))return null;var s=JSON.stringify(e,function(e,n){return"symbol"===c(n)?String(n):n});return new i("Invalid "+a+" `"+r+"` of value `"+String(u)+"` supplied to `"+l+"`, expected one of "+s+".")}return a(n)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ro("Invalid argument supplied to oneOfType, expected an instance of array."),wo;for(var n=0;n<e.length;n++){var t=e[n];if("function"!=typeof t)return Ro("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+v(t)+" at index "+n+"."),wo}return a(function(n,t,l,o,a){for(var r=[],u=0;u<e.length;u++){var d=(0,e[u])(n,t,l,o,a,To);if(null==d)return null;d.data&&Do(d.data,"expectedType")&&r.push(d.data.expectedType)}return new i("Invalid "+o+" `"+a+"` supplied to `"+l+"`"+(r.length>0?", expected one of type ["+r.join(", ")+"]":"")+".")})},shape:function(e){return a(function(n,t,l,o,a){var r=n[t],d=s(r);if("object"!==d)return new i("Invalid "+o+" `"+a+"` of type `"+d+"` supplied to `"+l+"`, expected `object`.");for(var v in e){var p=e[v];if("function"!=typeof p)return u(l,o,a,v,c(p));var m=p(r,v,l,o,a+"."+v,To);if(m)return m}return null})},exact:function(e){return a(function(n,t,l,o,a){var r=n[t],d=s(r);if("object"!==d)return new i("Invalid "+o+" `"+a+"` of type `"+d+"` supplied to `"+l+"`, expected `object`.");var v=yo({},n[t],e);for(var p in v){var m=e[p];if(Do(e,p)&&"function"!=typeof m)return u(l,o,a,p,c(m));if(!m)return new i("Invalid "+o+" `"+a+"` key `"+p+"` supplied to `"+l+"`.\nBad object: "+JSON.stringify(n[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var E=m(r,p,l,o,a+"."+p,To);if(E)return E}return null})}};function o(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function i(e,n){this.message=e,this.data=n&&"object"==typeof n?n:{},this.stack=""}function a(e){function n(n,t,l,o,a,r,u){if(o=o||"<<anonymous>>",r=r||l,u!==To){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}return null==t[l]?n?new i(null===t[l]?"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(t,l,o,a,r)}process;var t=n.bind(null,!1);return t.isRequired=n.bind(null,!0),t}function r(e){return a(function(n,t,l,o,a,r){var u=n[t];return s(u)!==e?new i("Invalid "+o+" `"+a+"` of type `"+c(u)+"` supplied to `"+l+"`, expected `"+e+"`.",{expectedType:e}):null})}function u(e,n,t,l,o){return new i((e||"React class")+": "+n+" type `"+t+"."+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function d(n){switch(typeof n){case"number":case"string":case"undefined":return!0;case"boolean":return!n;case"object":if(Array.isArray(n))return n.every(d);if(null===n||e(n))return!0;var l=function(e){var n=e&&(t&&e[t]||e["@@iterator"]);if("function"==typeof n)return n}(n);if(!l)return!1;var o,i=l.call(n);if(l!==n.entries){for(;!(o=i.next()).done;)if(!d(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!d(a[1]))return!1}return!0;default:return!1}}function s(e){var n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,n){return"symbol"===e||!!n&&("Symbol"===n["@@toStringTag"]||"function"==typeof Symbol&&n instanceof Symbol)}(n,e)?"symbol":n}function c(e){if(null==e)return""+e;var n=s(e);if("object"===n){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return n}function v(e){var n=c(e);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}return i.prototype=Error.prototype,l.checkPropTypes=Lo,l.resetWarningCache=Lo.resetWarningCache,l.PropTypes=l,l}(_o.isElement):function(){function e(e,n,t,l,o,i){if(i!==To){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Po,resetWarningCache:Wo};return t.PropTypes=t,t}()});const xo=e=>{var a;let{config:r,formData:u}=e;const{t:d}=l.useTranslation();let s={};const c=o.useHistory(),v=Digit.ULBService.getCurrentTenantId(),p=Digit.UserService.getUser(),[m,E]=n.useState((null==u?void 0:u.mobileNumber)||""),[S,_]=n.useState((null==u?void 0:u.consumerNumber)||""),[f,C]=n.useState((null==u?void 0:u.oldconsumerNumber)||""),[g,N]=n.useState((null==u?void 0:u.doorNumber)||""),[y,T]=n.useState((null==u?void 0:u.propertyId)||""),[D,A]=n.useState((null==u?void 0:u.consumerName)||""),[I,h]=n.useState((null==u?void 0:u.Servicecateogry)||""),[O,b]=n.useState((null==u?void 0:u.city)||""),[L,R]=n.useState(null),[w,W]=n.useState((null==u?void 0:u.locality)||""),[P,M]=n.useState((null==u?void 0:u.searchType)||{code:"CONSUMER_NUMBER",i18nKey:"WS_CONSUMER_NUMBER_SEARCH"}),x=null===(a=Digit.Hooks.ws.usewsTenants())||void 0===a?void 0:a.sort((e,n)=>{var t,l;return null==e||null===(t=e.i18nKey)||void 0===t||null===(l=t.localeCompare)||void 0===l?void 0:l.call(t,null==n?void 0:n.i18nKey)}),[B,F]=n.useState(null);let U={};const{isLoading:k}=Digit.Hooks.mcollect.useMCollectMDMS(v,"BillingService","BusinessService"),{data:j}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:e=>{var n,t,l;return null==e||null===(n=e["DIGIT-UI"])||void 0===n||null===(t=n.HelpText)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.PT}});return k?t.createElement(i.Loader,null):t.createElement("div",{style:{marginTop:"16px"}},t.createElement(i.FormStep,{config:r,label:r.texts.submitButtonLabel,heading:r.texts.header,text:r.texts.text,cardStyle:{margin:"auto",maxWidth:"960px"},headingStyle:{fontSize:"32px",marginBottom:"16px"},onSelect:function(e){try{const e=function(){if("CONSUMER_NUMBER"===P.code)O.code?m||S||f||y?c.push("/digit-ui/citizen/ws/search-results?mobileNumber="+m+"&consumerNumber="+S+"&oldconsumerNumber="+f+"&propertyId="+y+"&tenantId="+O.code+"&locality="+void 0):R({key:!0,label:"WS_HOME_SEARCH_CONN_RESULTS_DESC"}):R({key:!0,label:"WS_PLEASE_PROVIDE_CITY"});else{const e=function(){if(O.code){const e=function(){if(null!=p||w){const e=function(){if(g||D)return"undefined"!==w&&(U.locality=null==w?void 0:w.code),g&&(U.doorNo=g),D&&(U.ownerName=D),U={...U,searchType:"CONNECTION"},Promise.resolve(Digit.WSService.search({tenantId:null==O?void 0:O.code,filters:{...U},businessService:"WS"})).then(function(e){return Promise.resolve(Digit.WSService.search({tenantId:null==O?void 0:O.code,filters:{...U},businessService:"SW"})).then(function(n){null!=j&&j.maxResultValidation&&(null==e?void 0:e.TotalCount)+(null==n?void 0:n.TotalCount)>(null==j?void 0:j.maxPropertyResult)?R({key:!0,label:"Refine your search"}):c.push("/digit-ui/citizen/ws/search-results?doorNumber="+g+"&consumerName="+D+"&tenantId="+O.code+"&locality="+w.code)})});R({key:!0,label:"WS_HOME_SEARCH_CONN_RESULTS_DESC"})}();if(e&&e.then)return e.then(function(){})}else R({key:!0,label:"WS_PLEASE_PROVIDE_LOCALITY"})}();if(e&&e.then)return e.then(function(){})}else R({key:!0,label:"WS_PLEASE_PROVIDE_CITY"})}();if(e&&e.then)return e.then(function(){})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},componentInFront:t.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91"),isDisabled:!1,forcedError:d(B),t:d},t.createElement(i.RadioOrSelect,H({className:"form-field",isMandatory:!0,t:d,optionKey:"code",name:"SearchType",options:[{code:"CONSUMER_NUMBER",i18nKey:"WS_CONSUMER_NUMBER_SEARCH"},{code:"CONNECTION_DETAILS",i18nKey:"WS_CONNECTION_DETAILS_SEARCH"}],value:P,selectedOption:P,onSelect:function(e){M(e)}},s={isRequired:!0,title:d("WS_SEARCH_TYPE_MANDATORY")})),t.createElement(i.CardLabel,null,d("WS_PROP_DETAIL_CITY")+"*"),t.createElement(i.RadioOrSelect,H({className:"form-field",isMandatory:!0,t:d,optionKey:"code",name:"City",options:x,value:O,selectedOption:O,onSelect:function(e){b(e),W("")}},s={isRequired:!0,title:d("UC_CITY_MANDATORY")})),O&&P&&"CONNECTION_DETAILS"==(null==P?void 0:P.code)&&t.createElement(i.CardLabel,null,d("WS_PROP_DETAIL_LOCALITY_LABEL")+"*"),O&&P&&"CONNECTION_DETAILS"==(null==P?void 0:P.code)&&t.createElement(i.Localities,{selectLocality:function(e){W(e)},tenantId:null==O?void 0:O.code,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},selected:w,disableLoader:!1}),P&&"CONSUMER_NUMBER"==(null==P?void 0:P.code)&&t.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA",marginBottom:"20px"}},t.createElement(i.CardText,null,d("WS_SEARCH_TEXT")),t.createElement(i.CardLabel,null,""+d("WS_CONSUMER_NUMBER_LABEL")),t.createElement("div",{className:"field-container"},t.createElement("span",{className:"employee-card-input employee-card-input--front",style:{marginTop:"-1px"}},"+91"),t.createElement(i.TextInput,H({type:"mobileNumber",style:{background:"#FAFAFA",maxWidth:"500px"},t:d,isMandatory:!1,optionKey:"i18nKey",name:"mobileNumber",value:m,onChange:function(e){F(null),e.target.value.match("^\\d{10}$")||F("CORE_COMMON_PHONENO_INVALIDMSG"),E(e.target.value)}},s={isRequired:!1,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:d("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}))),t.createElement(i.CardLabel,{style:{textAlign:"center",color:"#505A5F"}},""+d("(or)")),t.createElement("div",{className:"tooltip"},t.createElement("div",{style:{display:"flex",gap:"0 4px"}},t.createElement(i.CardLabel,null,""+d("WS_MYCONNECTIONS_CONSUMER_NO")),t.createElement(i.InfoBannerIcon,{fill:"#0b0c0c"}),t.createElement("span",{className:"tooltiptext",style:{position:"absolute",width:"70%",marginLeft:"50%",fontSize:"medium"}},d("WS_CONSUMER_NO_DESCRIPTION")+" "+d("WS_CONSUMER_NO_FORMAT")))),t.createElement(i.TextInput,H({t:d,type:"any",isMandatory:!1,style:{background:"#FAFAFA"},name:"consumerNumber",value:S,onChange:function(e){_(e.target.value)}},s={isRequired:!1,pattern:"[A-Za-z]{2}/[0-9]{3,4}/[0-9]{4}-[0-9]{2}/[0-9]{6}",type:"text",title:d("ERR_INVALID_CONSUMER_NO")})),t.createElement(i.CardLabel,{style:{textAlign:"center",color:"#505A5F"}},""+d("(or)")),t.createElement("div",{className:"tooltip"},t.createElement("div",{style:{display:"flex",gap:"0 4px"}},t.createElement(i.CardLabel,null,""+d("WS_SEARCH_CONNNECTION_OLD_CONSUMER_LABEL")),t.createElement(i.InfoBannerIcon,{fill:"#0b0c0c"}),t.createElement("span",{className:"tooltiptext",style:{position:"absolute",width:"55%",marginLeft:"50%",fontSize:"medium"}},d("WS_CONSUMER_NO_DESCRIPTION")+" "+d("WS_CONSUMER_NO_FORMAT")))),t.createElement(i.TextInput,H({t:d,type:"any",isMandatory:!1,style:{background:"#FAFAFA"},name:"oldconsumerNumber",value:f,onChange:function(e){C(e.target.value)}},s={isRequired:!1,pattern:"[A-Za-z]{2}/[0-9]{3}/[0-9]{4}-[0-9]{2}/[0-9]{6}",type:"text",title:d("ERR_INVALID_CONSUMER_NO")})),t.createElement(i.CardLabel,{style:{textAlign:"center",color:"#505A5F"}},""+d("(or)")),t.createElement(i.CardLabel,null,""+d("WS_PROPERTY_ID_LABEL")),t.createElement(i.TextInput,H({t:d,type:"any",isMandatory:!1,style:{background:"#FAFAFA"},name:"propertyId",value:y,onChange:function(e){T(e.target.value)}},s={isRequired:!1,pattern:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}|[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",type:"text",title:d("ERR_INVALID_PROPERTY_ID")}))),P&&"CONNECTION_DETAILS"==(null==P?void 0:P.code)&&t.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA",marginBottom:"20px"}},t.createElement(i.CardText,null,d("WS_SEARCH_TEXT")),t.createElement(i.CardLabel,null,""+d("WS_DOOR_NO_LABEL")),t.createElement(i.TextInput,H({t:d,type:"any",isMandatory:!1,style:{background:"#FAFAFA"},name:"doorNumber",value:g,onChange:function(e){N(e.target.value)}},s={isRequired:!1,pattern:"^([1-9][0-9]*)$",type:"text",title:d("ERR_INVALID_DOOR_NO")})),t.createElement(i.CardLabel,null,""+d("WS_CONSUMER_NAME_LABEL")),t.createElement(i.TextInput,{t:d,type:"any",isMandatory:!1,style:{background:"#FAFAFA"},name:"consumerName",value:D,onChange:function(e){A(e.target.value)}}))),L&&t.createElement(i.Toast,{isDleteBtn:!0,error:L.key,label:d(L.label),onClose:()=>{R(null)}}))};xo.propTypes={loginParams:Mo.any},xo.defaultProps={loginParams:null};const Bo=[{texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"WS_VIEW_DETAILS_AND_PAY"},labels:[{label:"WS_COMMON_TABLE_COL_AMT_DUE_LABEL",key:"AmountDue",noteStyle:{fontSize:"24px",fontWeight:"bold"},notePrefix:"₹ "},{label:"WS_MYCONNECTIONS_CONSUMER_NO",key:"ConsumerNumber"},{label:"WS_CONSUMER_NAME_LABEL",key:"ConsumerName"},{label:"WS_MYCONNECTION_ADDRESS",key:"Address"},{label:"WS_VIEW_BILL_DUE_DATE_LABEL",key:"DueDate"}]}];var Fo=function(e,n){return function(){for(var t=new Array(arguments.length),l=0;l<t.length;l++)t[l]=arguments[l];return e.apply(n,t)}},Uo=Object.prototype.toString;function ko(e){return"[object Array]"===Uo.call(e)}function Ho(e){return void 0===e}function jo(e){return null!==e&&"object"==typeof e}function zo(e){if("[object Object]"!==Uo.call(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function Vo(e){return"[object Function]"===Uo.call(e)}function Yo(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),ko(e))for(var t=0,l=e.length;t<l;t++)n.call(null,e[t],t,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(null,e[o],o,e)}var Go={isArray:ko,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Uo.call(e)},isBuffer:function(e){return null!==e&&!Ho(e)&&null!==e.constructor&&!Ho(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:jo,isPlainObject:zo,isUndefined:Ho,isDate:function(e){return"[object Date]"===Uo.call(e)},isFile:function(e){return"[object File]"===Uo.call(e)},isBlob:function(e){return"[object Blob]"===Uo.call(e)},isFunction:Vo,isStream:function(e){return jo(e)&&Vo(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Yo,merge:function e(){var n={};function t(t,l){n[l]=zo(n[l])&&zo(t)?e(n[l],t):zo(t)?e({},t):ko(t)?t.slice():t}for(var l=0,o=arguments.length;l<o;l++)Yo(arguments[l],t);return n},extend:function(e,n,t){return Yo(n,function(n,l){e[l]=t&&"function"==typeof n?Fo(n,t):n}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function qo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ko=function(e,n,t){if(!n)return e;var l;if(t)l=t(n);else if(Go.isURLSearchParams(n))l=n.toString();else{var o=[];Go.forEach(n,function(e,n){null!=e&&(Go.isArray(e)?n+="[]":e=[e],Go.forEach(e,function(e){Go.isDate(e)?e=e.toISOString():Go.isObject(e)&&(e=JSON.stringify(e)),o.push(qo(n)+"="+qo(e))}))}),l=o.join("&")}if(l){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e};function Xo(){this.handlers=[]}Xo.prototype.use=function(e,n){return this.handlers.push({fulfilled:e,rejected:n}),this.handlers.length-1},Xo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Xo.prototype.forEach=function(e){Go.forEach(this.handlers,function(n){null!==n&&e(n)})};var $o=Xo,Zo=function(e,n,t){return Go.forEach(t,function(t){e=t(e,n)}),e},Jo=function(e){return!(!e||!e.__CANCEL__)},Qo=function(e,n){Go.forEach(e,function(t,l){l!==n&&l.toUpperCase()===n.toUpperCase()&&(e[n]=t,delete e[l])})},ei=function(e,n,t,l,o){return function(e,n,t,l,o){return e.config=n,t&&(e.code=t),e.request=l,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),n,t,l,o)},ni=Go.isStandardBrowserEnv()?{write:function(e,n,t,l,o,i){var a=[];a.push(e+"="+encodeURIComponent(n)),Go.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),Go.isString(l)&&a.push("path="+l),Go.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ti=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],li=Go.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function l(e){var l=e;return n&&(t.setAttribute("href",l),l=t.href),t.setAttribute("href",l),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=l(window.location.href),function(n){var t=Go.isString(n)?l(n):n;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0},oi={"Content-Type":"application/x-www-form-urlencoded"};function ii(e,n){!Go.isUndefined(e)&&Go.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var ai,ri={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(ai=function(e){return new Promise(function(n,t){var l=e.data,o=e.headers;Go.isFormData(l)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(a+":"+r)}var u,d,s=(d=e.url,(u=e.baseURL)&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(d)?function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}(u,d):d);if(i.open(e.method.toUpperCase(),Ko(s,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var l,o,a,r,u,d="getAllResponseHeaders"in i?(l=i.getAllResponseHeaders(),u={},l?(Go.forEach(l.split("\n"),function(e){if(r=e.indexOf(":"),o=Go.trim(e.substr(0,r)).toLowerCase(),a=Go.trim(e.substr(r+1)),o){if(u[o]&&ti.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([a]):u[o]?u[o]+", "+a:a}}),u):u):null;!function(e,n,t){var l=t.config.validateStatus;t.status&&l&&!l(t.status)?n(ei("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t)}(n,t,{data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:d,config:e,request:i}),i=null}},i.onabort=function(){i&&(t(ei("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){t(ei("Network Error",e,null,i)),i=null},i.ontimeout=function(){var n="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(ei(n,e,"ECONNABORTED",i)),i=null},Go.isStandardBrowserEnv()){var c=(e.withCredentials||li(s))&&e.xsrfCookieName?ni.read(e.xsrfCookieName):void 0;c&&(o[e.xsrfHeaderName]=c)}if("setRequestHeader"in i&&Go.forEach(o,function(e,n){void 0===l&&"content-type"===n.toLowerCase()?delete o[n]:i.setRequestHeader(n,e)}),Go.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(n){if("json"!==e.responseType)throw n}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),t(e),i=null)}),l||(l=null),i.send(l)})}),ai),transformRequest:[function(e,n){return Qo(n,"Accept"),Qo(n,"Content-Type"),Go.isFormData(e)||Go.isArrayBuffer(e)||Go.isBuffer(e)||Go.isStream(e)||Go.isFile(e)||Go.isBlob(e)?e:Go.isArrayBufferView(e)?e.buffer:Go.isURLSearchParams(e)?(ii(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Go.isObject(e)?(ii(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Go.forEach(["delete","get","head"],function(e){ri.headers[e]={}}),Go.forEach(["post","put","patch"],function(e){ri.headers[e]=Go.merge(oi)});var ui=ri;function di(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var si=function(e){return di(e),e.headers=e.headers||{},e.data=Zo(e.data,e.headers,e.transformRequest),e.headers=Go.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Go.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]}),(e.adapter||ui.adapter)(e).then(function(n){return di(e),n.data=Zo(n.data,n.headers,e.transformResponse),n},function(n){return Jo(n)||(di(e),n&&n.response&&(n.response.data=Zo(n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},ci=function(e,n){n=n||{};var t={},l=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function r(e,n){return Go.isPlainObject(e)&&Go.isPlainObject(n)?Go.merge(e,n):Go.isPlainObject(n)?Go.merge({},n):Go.isArray(n)?n.slice():n}function u(l){Go.isUndefined(n[l])?Go.isUndefined(e[l])||(t[l]=r(void 0,e[l])):t[l]=r(e[l],n[l])}Go.forEach(l,function(e){Go.isUndefined(n[e])||(t[e]=r(void 0,n[e]))}),Go.forEach(o,u),Go.forEach(i,function(l){Go.isUndefined(n[l])?Go.isUndefined(e[l])||(t[l]=r(void 0,e[l])):t[l]=r(void 0,n[l])}),Go.forEach(a,function(l){l in n?t[l]=r(e[l],n[l]):l in e&&(t[l]=r(void 0,e[l]))});var d=l.concat(o).concat(i).concat(a),s=Object.keys(e).concat(Object.keys(n)).filter(function(e){return-1===d.indexOf(e)});return Go.forEach(s,u),t};function vi(e){this.defaults=e,this.interceptors={request:new $o,response:new $o}}vi.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=ci(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var n=[si,void 0],t=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)t=t.then(n.shift(),n.shift());return t},vi.prototype.getUri=function(e){return e=ci(this.defaults,e),Ko(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Go.forEach(["delete","get","head","options"],function(e){vi.prototype[e]=function(n,t){return this.request(ci(t||{},{method:e,url:n,data:(t||{}).data}))}}),Go.forEach(["post","put","patch"],function(e){vi.prototype[e]=function(n,t,l){return this.request(ci(l||{},{method:e,url:n,data:t}))}});var pi=vi;function mi(e){this.message=e}mi.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},mi.prototype.__CANCEL__=!0;var Ei=mi;function Si(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var t=this;e(function(e){t.reason||(t.reason=new Ei(e),n(t.reason))})}Si.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Si.source=function(){var e;return{token:new Si(function(n){e=n}),cancel:e}};var _i=Si;function fi(e){var n=new pi(e),t=Fo(pi.prototype.request,n);return Go.extend(t,pi.prototype,n),Go.extend(t,n),t}var Ci=fi(ui);Ci.Axios=pi,Ci.create=function(e){return fi(ci(Ci.defaults,e))},Ci.Cancel=Ei,Ci.CancelToken=_i,Ci.isCancel=Jo,Ci.all=function(e){return Promise.all(e)},Ci.spread=function(e){return function(n){return e.apply(null,n)}},Ci.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},Ci.default=Ci;const gi=e=>{let{template:n,header:a,actionButtonLabel:r}=e;const{t:u}=l.useTranslation(),d=o.useHistory(),{mobileNumber:c,consumerNumber:v,oldconsumerNumber:p,tenantId:m,propertyId:E,locality:S,doorNumber:_,consumerName:f,PToffset:C}=Digit.Hooks.useQueryParams();let g,N,y={},T=C;isNaN(parseInt(T))?g=5:(N=T,g=parseInt(T)+5);let D=isNaN(parseInt(T))?{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:"0"}:{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:N};c&&(y.mobileNumber=c),v&&(y.connectionNumber=v),p&&(y.oldConnectionNumber=p),E&&(y.propertyId=E),"undefined"!==S&&(y.locality=S),_&&(y.doorNo=_),f&&(y.ownerName=f),(S||searchQuery&&searchQuery.locality)&&(y.limit=D.limit,y.sortOrder=D.sortOrder,y.sortBy=D.sortBy,y.offset=D.offset),y={...y,searchType:"CONNECTION"};const{isLoading:A,data:I}=Digit.Hooks.ws.useWaterSearch({tenantId:m,filters:{...y},BusinessService:"WS",t:u},{privacy:Digit.Utils.getPrivacyObject()}),{isLoading:h,data:O}=Digit.Hooks.ws.useSewarageSearch({tenantId:m,filters:{...y},BusinessService:"SW",t:u},{privacy:Digit.Utils.getPrivacyObject()});if(A||h)return t.createElement(i.Loader,null);const b=I&&O?I.concat(O):I||O||[];return t.createElement("div",{style:{marginTop:"16px"}},t.createElement("div",null,a&&t.createElement(i.Header,{style:{marginLeft:"8px"}},u(a)," (",null==b?void 0:b.length,")"),t.createElement(i.ResponseComposer,{data:b,template:n,actionButtonLabel:r,onSubmit:e=>{d.push("/digit-ui/citizen/payment/my-bills/"+(null==e?void 0:e.ConsumerNumber.split("/")[0])+"/"+s(null==e?void 0:e.ConsumerNumber,"/","+")+"?workflow=WNS&tenantId="+m+"&ConsumerName="+(null==e?void 0:e.ConsumerName))}}),!(null!=b&&b.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},u("WS_NO_APP_FOUND_MSG")),0!==(null==b?void 0:b.length)&&(5==(null==b?void 0:b.length)||50==(null==b?void 0:b.length))&&(S||searchQuery&&searchQuery.locality)&&t.createElement("div",null,t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},u("WS_LOAD_MORE_MSG")," ",t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/citizen/ws/search-results?doorNumber="+_+"&consumerName="+f+"&tenantId="+(null==m?void 0:m.split(".")[0])+"&locality="+S.code+"&PToffset="+g},u("PT_COMMON_CLICK_HERE"))))),t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},u("WS_WANT_TO_ADD_NEW_CONNECTION")," ",t.createElement("span",{className:"link",style:{display:"block"}},t.createElement(o.Link,{to:"/digit-ui/citizen/ws/create-application/search-property"},u("WS_CLICK_HERE_TO_APPLY"))))))};gi.propTypes={template:Mo.any,header:Mo.string,actionButtonLabel:Mo.string},gi.defaultProps={template:[],header:null,actionButtonLabel:null};const Ni=e=>{var n,o,a;let{data:r,OpenImage:u}=e;const{t:d}=l.useTranslation();return t.createElement("div",null,r.date&&t.createElement("p",null,r.date),t.createElement("p",null,r.name),r.mobileNumber&&t.createElement(i.TelePhone,{mobile:r.mobileNumber}),r.source&&t.createElement("p",null,d("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&t.createElement(Reason,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?t.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>t.createElement("div",{className:"TLComments"},t.createElement("h3",null,d("WF_COMMON_COMMENTS")),t.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==r||null===(o=r.thumbnailsToShow)||void 0===o||null===(a=o.thumbs)||void 0===a?void 0:a.length)>0?t.createElement("div",{className:"TLComments"},t.createElement("h3",null,d("CS_COMMON_ATTACHMENTS")),t.createElement(i.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,n)=>{u(e,n,null==r?void 0:r.thumbnailsToShow)}})):null)},yi=e=>{var a,r,u,d,s,c;const{t:v}=l.useTranslation(),p=null===(a=e.application)||void 0===a?void 0:a.applicationNo.split("_")[0],{isLoading:m,data:E}=Digit.Hooks.useWorkflowDetails({tenantId:null===(r=e.application)||void 0===r?void 0:r.tenantId,id:e.id,moduleCode:p}),[S,_]=n.useState(!1);function f(e,n,t){var l;window.open(null==t||null===(l=t.fullImage)||void 0===l?void 0:l[0],"_blank")}const C=n=>{if("OPEN"===n.state){var l,a,r;const n={date:Digit.DateUtils.ConvertTimestampToDate(null===(l=e.application)||void 0===l||null===(a=l.auditDetails)||void 0===a?void 0:a.createdTime),source:(null===(r=e.application)||void 0===r?void 0:r.channel)||""};return t.createElement(Ni,{data:n})}var u,d;if("ACTIVE"===n.status)return t.createElement("div",null,t.createElement(o.Link,{to:"/digit-ui/citizen/commonpt/view-property?propertyId="+(null==e||null===(u=e.application)||void 0===u?void 0:u.propertyId)+"&tenantId="+(null==e||null===(d=e.application)||void 0===d?void 0:d.tenantId)},t.createElement(i.ActionLinks,null,v("PT_VIEW_PROPERTY_DETAILS"))));{var s,c,p,m,E,S;const l={source:(null===(s=e.application)||void 0===s?void 0:s.channel)||"",date:null==n||null===(c=n.auditDetails)||void 0===c?void 0:c.lastModified,name:null==n||null===(p=n.assignes)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.name,mobileNumber:null==n||null===(E=n.assignes)||void 0===E||null===(S=E[0])||void 0===S?void 0:S.mobileNumber,comment:v(null==n?void 0:n.comment),wfComment:n.wfComment,thumbnailsToShow:null==n?void 0:n.thumbnailsToShow};return t.createElement(Ni,{data:l,OpenImage:f})}};return m?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,!m&&t.createElement(n.Fragment,null,(null==E||null===(u=E.timeline)||void 0===u?void 0:u.length)>0&&t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px"}},v("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=E&&E.timeline&&1===(null==E||null===(d=E.timeline)||void 0===d?void 0:d.length)?t.createElement(i.CheckPoint,{isCompleted:!0,label:v((null==E||null===(s=E.timeline[0])||void 0===s?void 0:s.state)&&"CS_"+E.timeline[0].state||"NA"),customChild:C(null==E?void 0:E.timeline[0])}):t.createElement(i.ConnectingCheckPoints,null,(null==E?void 0:E.timeline)&&(null==E?void 0:E.timeline.slice(0,S?E.timeline.length:2).map((e,n,l)=>t.createElement(t.Fragment,{key:n},t.createElement(i.CheckPoint,{keyValue:n,isCompleted:0===n,label:e.state?v("CS_"+e.state):"NA",customChild:C(e)}))))),(null==E||null===(c=E.timeline)||void 0===c?void 0:c.length)>2&&t.createElement(i.LinkButton,{label:v(S?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{_(e=>!e)}})),E&&(n=>{var l;let a=n[0];const r=n.map(e=>e.action);if(r.includes("PAY")||r.includes("EDIT")){let e=r.indexOf("EDIT")||r.indexOf("PAY");e=-1!=e?e:r.indexOf("PAY"),a=n[e]}switch(null===(l=a)||void 0===l?void 0:l.action){case"PAY":if(!1!==(null==e?void 0:e.paymentbuttonenabled))return t.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+p+"/"+e.id+"?consumerCode="+e.id+"&&workflow=WNS",state:{tenantId:e.application.tenantId}}},t.createElement(i.SubmitBar,{label:v("CS_APPLICATION_DETAILS_MAKE_PAYMENT")})));break;case"EDIT":return t.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},"PT.MUTATION"!=p&&t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/pt/property/edit-application/action=edit-"+p+"/"+e.id,state:{tenantId:e.application.tenantId}}},t.createElement(i.SubmitBar,{label:v("CS_APPLICATION_DETAILS_EDIT")})));case"SUBMIT_FEEDBACK":return t.createElement("div",{style:{marginTop:"24px"}},t.createElement(o.Link,{to:"/digit-ui/citizen/fsm/rate/"+e.id},t.createElement(i.SubmitBar,{label:v("CS_APPLICATION_DETAILS_RATE")})))}})(null==E?void 0:E.nextActions))};function Ti(e){var n;let{value:o={},Code:a,index:r,showFileName:u=!1}=e;const{t:d}=l.useTranslation(),{isLoading:s,data:c}=Digit.Hooks.ws.useWSDocumentSearch({value:o},{value:o},a,r),v=[];return null!=o&&o.documents?null==o||null===(n=o.documents)||void 0===n||n.documents.filter(e=>(null==e?void 0:e.documentType)===a).map(e=>{v.push(e)}):o.filter(e=>(null==e?void 0:e.documentType)===a).map(e=>{v.push(e)}),s?t.createElement(i.Loader,null):t.createElement("div",{style:{marginTop:"19px"}},t.createElement(t.Fragment,null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},null==v?void 0:v.map((e,n)=>{let l=function(e,n,t){void 0===e&&(e={}),void 0===n&&(n="");let l=e[n]||"",o=(null==l?void 0:l.split(","))||[],i="";return o.length>0&&o.map(e=>{e.includes("large")||e.includes("medium")||e.includes("small")||(i=e)}),i}(c.pdfFiles,null==e?void 0:e.fileStoreId);return t.createElement("a",{target:"_",href:l,style:{minWidth:"160px"},key:n},t.createElement(i.PDFSvg,null),u?t.createElement("p",{style:{marginTop:"8px"}},d(null==a?void 0:a.split(".").slice(0,3).join("_"))):null)}))))}const Di=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},Ai=(e,n)=>{var t,l,o;const i=null===(l=((null==e||null===(t=e.owners)||void 0===t?void 0:t.filter(e=>1==e.active))||[]).sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===l||null===(o=l.map(e=>e.name))||void 0===o?void 0:o.join(",");return{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:n(""+(null==e?void 0:e.propertyId))||n("CS_NA")},{title:n("WS_OWN_DETAIL_NAME"),value:i||n("CS_NA")},{title:n("WS_PROPERTY_ADDRESS_LABEL"),value:Di(null==e?void 0:e.address)||n("CS_NA")}]}},Ii=(e,n)=>({title:n("WS_COMMON_CONNECTION_DETAILS"),values:[{title:n("WS_DISCONNECTION_TYPE"),value:!0===(null==e?void 0:e.isDisconnectionTemporary)?n("WS_DISCONNECTIONTYPE_TEMPORARY"):n("WS_DISCONNECTIONTYPE_PERMANENT")||n("CS_NA")},{title:n("WS_DISCONNECTION_PROPOSED_DATE"),value:null!=e&&e.dateEffectiveFrom?Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.dateEffectiveFrom):n("CS_NA")},{title:n("WS_DISCONNECTION_REASON"),value:(null==e?void 0:e.disconnectionReason)||n("CS_NA")}]}),hi=(e,n)=>{var t,l,o,i,a,r,u,d,s,c,v;return{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:(null==e||null===(t=e.connectionHolders)||void 0===t?void 0:t.length)>0?[{title:n("WS_OWN_DETAIL_NAME"),value:(null==e||null===(l=e.connectionHolders)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)||n("CS_NA")},{title:n("CORE_COMMON_MOBILE_NUMBER"),value:(null==e||null===(i=e.connectionHolders)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.mobileNumber)||n("CS_NA")},{title:n("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),value:(null==e||null===(r=e.connectionHolders)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fatherOrHusbandName)||n("CS_NA")},{title:n("WS_CORRESPONDANCE_ADDRESS_LABEL"),value:(null==e||null===(d=e.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.correspondenceAddress)||n("CS_NA")},{title:n("CORE_COMMON_EMAIL_ID"),value:(null==e||null===(c=e.connectionHolders)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.emailId)||n("CS_NA")}]:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:n("SCORE_YES")||n("CS_NA")}]}},Oi=(e,n)=>{const t=null==e?void 0:e.documents;return{title:n("WS_COMMON_DOCUMENTS_DETAILS"),isAttachments:!0,values:null==t?void 0:t.map(e=>n(null==e?void 0:e.documentType))}},bi=function(e,n,t,l){try{var o,i;function a(){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o;let i=[];return null!=e&&e.applicationNo&&i.push({title:n("PDF_STATIC_LABEL_APPLICATION_NUMBER_LABEL")+":",value:null==e?void 0:e.applicationNo}),null!=e&&e.applicationType&&i.push({title:n("WS_SERVICE_NAME")+":",value:n("WS_APPLICATION_TYPE_"+(null==e?void 0:e.applicationType))}),{title:"",isHeader:!0,typeOfApplication:null!=e&&null!==(l=e.applicationNo)&&void 0!==l&&l.includes("SW")?n("WS_NEW_SEWERAGE_DISCONNECTION"):n("WS_NEW_WATER_DISCONNECTION"),date:Digit.DateUtils.ConvertEpochToDate(null==e||null===(o=e.auditDetails)||void 0===o?void 0:o.createdTime)||"NA",values:i,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(o){return{t:l,tenantId:t,title:"PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",name:""+l("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),email:"",phoneNumber:"",headerDetails:[o],details:[Ai(n,l),hi(e,l),Ii(e,l),Oi(e,l)]}})}const r=null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(i=o.applicationDocuments)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let u;const d=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){u=e})}();return Promise.resolve(d&&d.then?d.then(a):a())}catch(e){return Promise.reject(e)}},Li=e=>{var n;const t=null==e?void 0:e.doorNo,l=null==e?void 0:e.street,o=null==e?void 0:e.landmark,i=null==e||null===(n=e.locality)||void 0===n?void 0:n.name,a=null==e?void 0:e.pincode;return(t?t+", ":"")+(l?l+", ":"")+(o?o+", ":"")+(i?i+", ":"")+((null==e?void 0:e.city)||"")+(a?", "+a:"")},Ri=(e,n)=>{var t,l,o;const i=null===(l=((null==e||null===(t=e.owners)||void 0===t?void 0:t.filter(e=>1==e.active))||[]).sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===l||null===(o=l.map(e=>e.name))||void 0===o?void 0:o.join(",");return{title:n("WS_COMMON_PROPERTY_DETAILS"),values:[{title:n("WS_PROPERTY_ID_LABEL"),value:n(""+(null==e?void 0:e.propertyId))||n("CS_NA")},{title:n("WS_OWN_DETAIL_NAME"),value:i||n("CS_NA")},{title:n("WS_PROPERTY_ADDRESS_LABEL"),value:Li(null==e?void 0:e.address)||n("CS_NA")}]}},wi=(e,n)=>{var t,l,o,i,a,r,u,d,c,p,m,E,S,_;return{title:n("WS_COMMON_CONNECTION_DETAILS"),values:null!=e&&null!==(t=e.applicationNo)&&void 0!==t&&t.includes("WS")&&"Metered"==(null==e?void 0:e.connectionType)?[{title:n("WS_SERV_DETAIL_CONN_TYPE"),value:n(null!=e&&e.connectionType?"WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(l=e.connectionType)||void 0===l?void 0:l.toUpperCase()," ","_"):"CS_NA")},{title:n("WS_SERV_DETAIL_NO_OF_TAPS"),value:(null==e?void 0:e.noOfTaps)||n("CS_NA")},{title:n("WS_PIPE_SIZE_IN_INCHES_LABEL"),value:(null==e?void 0:e.pipeSize)||n("CS_NA")},{title:n("WS_SERV_DETAIL_WATER_SOURCE"),value:n(null!=e&&e.waterSource?"WS_SERVICES_MASTERS_WATERSOURCE_"+(null==e||null===(o=e.waterSource)||void 0===o||null===(i=o.toUpperCase())||void 0===i?void 0:i.split(".")[0]):"CS_NA")},{title:n("WS_SERV_DETAIL_WATER_SUB_SOURCE"),value:n(null!=e&&e.waterSource?""+(null==e||null===(a=e.waterSource)||void 0===a||null===(r=a.toUpperCase())||void 0===r?void 0:r.split(".")[1]):"CS_NA")},{title:n("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),value:null!=e&&e.connectionExecutionDate?v(null==e?void 0:e.connectionExecutionDate):n("CS_NA")},{title:n("WS_SERV_DETAIL_METER_ID"),value:(null==e?void 0:e.meterId)||n("CS_NA")},{title:n("WS_INITIAL_METER_READING_LABEL"),value:(null==e||null===(u=e.additionalDetails)||void 0===u?void 0:u.initialMeterReading)||n("CS_NA")},{title:n("WS_INSTALLATION_DATE_LABEL"),value:null!=e&&e.meterInstallationDate?v(null==e?void 0:e.meterInstallationDate):n("CS_NA")}]:null!=e&&null!==(d=e.applicationNo)&&void 0!==d&&d.includes("WS")&&"Metered"!==(null==e?void 0:e.connectionType)?[{title:n("WS_SERV_DETAIL_CONN_TYPE"),value:n(null!=e&&e.connectionType?"WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(c=e.connectionType)||void 0===c?void 0:c.toUpperCase()," ","_"):"CS_NA")},{title:n("WS_SERV_DETAIL_NO_OF_TAPS"),value:(null==e?void 0:e.noOfTaps)||n("CS_NA")},{title:n("WS_PIPE_SIZE_IN_INCHES_LABEL"),value:(null==e?void 0:e.pipeSize)||n("CS_NA")},{title:n("WS_SERV_DETAIL_WATER_SOURCE"),value:n(null!=e&&e.waterSource?"WS_SERVICES_MASTERS_WATERSOURCE_"+(null==e||null===(p=e.waterSource)||void 0===p||null===(m=p.toUpperCase())||void 0===m?void 0:m.split(".")[0]):"CS_NA")},{title:n("WS_SERV_DETAIL_WATER_SUB_SOURCE"),value:n(null!=e&&e.waterSource?""+(null==e||null===(E=e.waterSource)||void 0===E||null===(S=E.toUpperCase())||void 0===S?void 0:S.split(".")[1]):"CS_NA")},{title:n("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),value:null!=e&&e.connectionExecutionDate?v(null==e?void 0:e.connectionExecutionDate):n("CS_NA")}]:[{title:n("WS_SERV_DETAIL_CONN_TYPE"),value:n(null!=e&&e.connectionType?"WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(_=e.connectionType)||void 0===_?void 0:_.toUpperCase()," ","_"):"CS_NA")},{title:n("WS_NUMBER_WATER_CLOSETS_LABEL"),value:(null==e?void 0:e.noOfWaterClosets)||n("CS_NA")},{title:n("WS_SERV_DETAIL_NO_OF_TOILETS"),value:(null==e?void 0:e.noOfToilets)||n("CS_NA")},{title:n("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),value:null!=e&&e.connectionExecutionDate?v(null==e?void 0:e.connectionExecutionDate):n("CS_NA")}]}},Wi=(e,n)=>{var t,l,o,i,a,r,u,d,s,c,v;return{title:n("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER"),values:(null==e||null===(t=e.connectionHolders)||void 0===t?void 0:t.length)>0?[{title:n("WS_OWN_DETAIL_NAME"),value:(null==e||null===(l=e.connectionHolders)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)||n("CS_NA")},{title:n("CORE_COMMON_MOBILE_NUMBER"),value:(null==e||null===(i=e.connectionHolders)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.mobileNumber)||n("CS_NA")},{title:n("WS_CONN_HOLDER_COMMON_FATHER_OR_HUSBAND_NAME"),value:(null==e||null===(r=e.connectionHolders)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fatherOrHusbandName)||n("CS_NA")},{title:n("WS_CORRESPONDANCE_ADDRESS_LABEL"),value:(null==e||null===(d=e.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.correspondenceAddress)||n("CS_NA")},{title:n("CORE_COMMON_EMAIL_ID"),value:(null==e||null===(c=e.connectionHolders)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.emailId)||n("CS_NA")}]:[{title:n("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),value:n("SCORE_YES")||n("CS_NA")}]}},Pi=function(e,n,t,l){try{var o,i;function a(){return Promise.resolve(function(e,n,t){try{return Promise.resolve(c(t,n)).then(function(t){var l,o,i,a;let r=[];return null!=e&&e.connectionNo&&r.push({title:n("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL")+":",value:null==e?void 0:e.connectionNo}),{title:"",isHeader:!0,typeOfApplication:null!=e&&null!==(l=e.connectionNo)&&void 0!==l&&l.includes("SW")?n("PDF_STATIC_LABEL_SW_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"):n("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_WATER_CONNECTIONDETAIL"),date:(null!=e&&null!==(o=e.auditDetails)&&void 0!==o&&o.createdTime?Digit.DateUtils.ConvertEpochToDate(null==e||null===(i=e.auditDetails)||void 0===i?void 0:i.createdTime):Digit.DateUtils.ConvertEpochToDate(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.appCreatedDate))||"NA",values:r,...t}})}catch(e){return Promise.reject(e)}}(e,l,t)).then(function(o){return{t:l,tenantId:t,title:"PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER",name:""+l("PDF_STATIC_LABEL_WS_CONSOLIDATED_ACKNOWELDGMENT_LOGO_SUB_HEADER"),email:"",phoneNumber:"",headerDetails:[o],details:[wi(e,l),Ri(n,l),Wi(e,l)]}})}const r=null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(i=o.applicationDocuments)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let u;const d=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){u=e})}();return Promise.resolve(d&&d.then?d.then(a):a())}catch(e){return Promise.reject(e)}},Mi=e=>{var n,o,a,r,u,d,s,c,v,m,E,S,_,f,C;let{application:g}=e;const{t:N}=l.useTranslation();return t.createElement(i.Card,null,t.createElement(i.KeyNote,{noteStyle:{fontSize:"24px",fontWeight:"700"},keyValue:N("CS_PAYMENT_AMOUNT_DUE_WITHOUT_SYMBOL"),note:"₹ "+(null==g||null===(n=g.paymentDetails)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.totalAmountPaid)}),t.createElement(i.KeyNote,{keyValue:N("WS_SERVICE_NAME_LABEL"),note:N("WS_SERVICE_TYPE_"+(null==g||null===(a=g.paymentDetails)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.businessService))}),t.createElement(i.KeyNote,{keyValue:N("WS_CONSUMER_CODE"),note:N(null==g||null===(u=g.paymentDetails)||void 0===u||null===(d=u[0])||void 0===d||null===(s=d.bill)||void 0===s?void 0:s.consumerCode)}),t.createElement(i.KeyNote,{keyValue:N("WS_CONSUMER_NAME"),note:(null==g||null===(c=g.property)||void 0===c||null===(v=c.connectionHolders)||void 0===v?void 0:v.map(e=>null==e?void 0:e.name).join(","))||(null==g||null===(m=g.property)||void 0===m||null===(E=m.owners)||void 0===E?void 0:E.map(e=>null==e?void 0:e.name).join(","))||(null==g?void 0:g.payerName)}),t.createElement(i.KeyNote,{keyValue:N("WS_RECEIPT_NO_LABEL"),note:N(null==g||null===(S=g.paymentDetails)||void 0===S||null===(_=S[0])||void 0===_?void 0:_.receiptNumber)}),t.createElement(i.KeyNote,{keyValue:N("WS_RECEIPT_DATE_LABEL"),note:p(null==g||null===(f=g.paymentDetails)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.receiptDate)||N("CS_NA")}),t.createElement(i.KeyNote,{keyValue:N("WS_PAYMENT_STATUS"),note:N(null==g?void 0:g.paymentStatus)}),t.createElement(i.SubmitBar,{label:N("WS_DOWNLOAD_RECEIPT"),onSubmit:e=>{var n,t,l,o;return function(e,n,t,l){try{function o(){return Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:n.filestoreIds[0]})).then(function(e){var t;window.open(e[null===(t=n)||void 0===t?void 0:t.filestoreIds[0]],"_blank")})}let n=null;const l=function(){if(null==e||!e.fileStoreId)return Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...e}]},"ws-onetime-receipt")).then(function(e){n=e});n={filestoreIds:[null==e?void 0:e.fileStoreId]}}();return Promise.resolve(l&&l.then?l.then(o):o())}catch(e){return Promise.reject(e)}}(g,0,null==g?void 0:g.tenantId,null!=g&&null!==(n=g.paymentDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&null!==(l=t.bill)&&void 0!==l&&null!==(o=l.consumerCode)&&void 0!==o&&o.includes("SW"))}}))},xi=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),Bi=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),Fi=e=>{var n,a,r,u,d,s,c,v;let{application:p}=e;const{t:m}=l.useTranslation();let S=encodeURI(p.applicationNo);return t.createElement(i.Card,null,t.createElement(i.KeyNote,{keyValue:m("WS_MYCONNECTIONS_CONSUMER_NO"),note:null==p?void 0:p.connectionNo}),t.createElement(i.KeyNote,{keyValue:m("WS_SERVICE_NAME_LABEL"),note:m("WS_APPLICATION_TYPE_"+(null==p?void 0:p.applicationType))}),t.createElement(i.KeyNote,{keyValue:m("WS_CONSUMER_NAME"),note:(null==p||null===(n=p.connectionHolders)||void 0===n?void 0:n.map(e=>e.name).join(","))||(null==p||null===(a=p.property)||void 0===a||null===(r=a.owners.sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===r?void 0:r.map(e=>e.name).join(","))}),t.createElement(i.KeyNote,{keyValue:m("WS_MYCONNECTION_ADDRESS"),note:E(null==p||null===(u=p.property)||void 0===u?void 0:u.address,m),privacy:{uuid:null==p||null===(d=p.property)||void 0===d||null===(s=d.owners)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.uuid,fieldName:["doorNo","street","landmark"],model:"Property",showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==p?void 0:p.tenantId,propertyIds:null==p||null===(v=p.property)||void 0===v?void 0:v.propertyId},jsonPath:"Properties[0].address.street",isArray:!1,d:e=>(M.get(e,"Properties[0].address.doorNo")?M.get(e,"Properties[0].address.doorNo")+", ":"")+(M.get(e,"Properties[0].address.street")?M.get(e,"Properties[0].address.street")+", ":"")+(M.get(e,"Properties[0].address.landmark")?""+M.get(e,"Properties[0].address.landmark"):"")}}}),t.createElement(i.KeyNote,{keyValue:m("WS_MYCONNECTIONS_STATUS"),note:m(null==p?void 0:p.status)}),t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/ws/connection/details/"+S,state:{...p}}},t.createElement(i.SubmitBar,{label:m("WS_VIEW_DETAILS_LABEL")})))},Ui=e=>{const{t:n}=l.useTranslation();return e.isSuccess?n("CS_WATER_UPDATE_APPLICATION_SUCCESS"):e.isLoading?n("CS_WATER_UPDATE_APPLICATION_PENDING"):e.isSuccess?void 0:n("CS_WATER_UPDATE_APPLICATION_FAILED")},ki=e=>{var n,l,o,a,r,u;return t.createElement(i.Banner,{message:Ui(e),info:e.isSuccess&&null!=e&&e.Waterdata?e.t("WS_ACKNO_APP_NO_LABEL"):"",applicationNumber:null!=e&&e.Waterdata?null==e||null===(n=e.Waterdata)||void 0===n||null===(l=n.WaterConnection)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo:"",infoOne:e.isSuccess&&null!=e&&e.Seweragedata?e.t("WS_ACKNO_SEW_APP_NO_LABEL"):"",applicationNumberOne:null!=e&&e.Seweragedata?null==e||null===(a=e.Seweragedata)||void 0===a||null===(r=a.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.applicationNo:"",successful:e.isSuccess})},Hi=[{texts:{header:"CS_TITLE_MY_BILLS",actionButtonLabel:"WS_VIEW_DETAILS_AND_PAY"},labels:[{label:"WNS_COMMON_TABLE_COL_AMT_DUE_LABEL",key:"AmountDue",noteStyle:{fontSize:"24px",fontWeight:"bold"},notePrefix:"₹ "},{label:"WNS_MYCONNECTIONS_SERVICE",key:"ServiceName"},{label:"WNS_MYCONNECTIONS_CONSUMER_NO",key:"ConsumerNumber"},{label:"WNS_BILLING_PERIOD",key:"BillingPeriod"},{label:"WNS_CONSUMER_NAME_LABEL",key:"ConsumerName"},{label:"WNS_MYCONNECTION_ADDRESS",key:"Address"},{label:"WNS_VIEW_BILL_DUE_DATE_LABEL",key:"DueDate"}]}],ji=e=>{var n,a,r,u,d,c,v,p,m;let{template:E,header:S,actionButtonLabel:_}=e;const{t:f}=l.useTranslation(),C=o.useHistory(),g=o.useLocation(),{tenantId:N}=Digit.Hooks.useQueryParams();let{tenantId:y}=(null===(n=Digit.UserService.getUser())||void 0===n?void 0:n.info)||(null==g?void 0:g.state)||{tenantId:N}||{};y=(null===(a=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===a?void 0:a.code)||(null===(r=Digit.UserService.getUser())||void 0===r||null===(u=r.info)||void 0===u?void 0:u.permanentCity)||y,y||null!=g&&null!==(d=g.state)&&void 0!==d&&d.fromSearchResults||C.replace("/digit-ui/citizen/login",{from:url});let T={};const{mobileNumber:D}=(null===(c=Digit.UserService.getUser())||void 0===c?void 0:c.info)||{};T={...T,searchType:"CONNECTION"};const A={mobileNumber:D,...T},I=Digit.Hooks.ws.useMyBillsWaterSearch({tenantId:y,filters:{...A},BusinessService:"WS",t:f},{privacy:Digit.Utils.getPrivacyObject()}),h=Digit.Hooks.ws.useMyBillsSewarageSearch({tenantId:y,filters:{...A},BusinessService:"SW",t:f},{privacy:Digit.Utils.getPrivacyObject()});if(null!=I&&I.isLoading||null!=h&&h.isLoading||null==I||null==h)return t.createElement(i.Loader,null);let O=I&&h?I.concat(h):[];return O=null===(v=O)||void 0===v?void 0:v.filter(e=>(null==e?void 0:e.AmountDue)&&"0"!==(null==e?void 0:e.AmountDue)),t.createElement("div",{style:{marginTop:"16px"}},t.createElement("div",null,S&&t.createElement(i.Header,{style:{marginLeft:10,marginTop:10}},f(S)," (",null===(p=O)||void 0===p?void 0:p.length,")"),t.createElement(F,{t:f}),t.createElement(i.ResponseComposer,{data:O,template:E,actionButtonLabel:_,onSubmit:e=>{C.push("/digit-ui/citizen/payment/my-bills/"+(null==e?void 0:e.ConsumerNumber.split("/")[0])+"/"+s(null==e?void 0:e.ConsumerNumber,"/","+")+"?workflow=WNS&tenantId="+y+"&ConsumerName="+(null==e?void 0:e.ConsumerName))}})),!(null!==(m=O)&&void 0!==m&&m.length)>0&&t.createElement("p",{style:{paddingLeft:"16px"}},f("CS_BILLS_TEXT_NO_BILLS_FOUND")))};ji.propTypes={template:Mo.any,header:Mo.string,actionButtonLabel:Mo.string},ji.defaultProps={template:[],header:null,actionButtonLabel:null};const zi=e=>t.createElement("h1",{className:"heading-m"},e.label),Vi=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Yi=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Vi,null)),Gi=e=>{var l,o;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v,moduleCode:p}=e;const{data:m,isLoading:E}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:S,data:_}=Digit.Hooks.pt.useMDMS(u,v,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),[f,C]=n.useState({}),[g,N]=n.useState({}),[y,T]=n.useState([]),[D,A]=n.useState(null),[I,h]=n.useState(null),[O,b]=n.useState(null),[L,R]=n.useState(null),[w,W]=n.useState([]),[P,M]=n.useState(null),[x,B]=n.useState(!1);function F(e){h(e.target.files[0])}return n.useEffect(()=>{var e;_&&_["egf-master"]&&W(null===(e=_["egf-master"])||void 0===e?void 0:e.FinancialYear)},[_]),n.useEffect(()=>{var e;T(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[m]),n.useEffect(()=>{!function(){try{R(null);const e=function(){if(I){const e=function(){if(I.size>=5242880)R(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",I,Digit.ULBService.getStateId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?b(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):R(a("CS_FILE_UPLOAD_ERROR"))})},function(){R(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(()=>{r&&C(null!=r&&r.showFinancialYearsModal?(e=>{let{t:n,action:l,financialYears:o,selectedFinancialYear:a,setSelectedFinancialYear:r}=e;return{label:{heading:"WF_"+l.action+"_APPLICATION",submit:"WF_PT.CREATE_"+l.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:n("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:t.createElement(i.RadioButtons,{options:o,optionsKey:"name",onSelect:r,selectedOption:a})}]}]}})({t:a,action:r,financialYears:w,selectedFinancialYear:P,setSelectedFinancialYear:M}):(e=>{var n;let{t:l,action:o,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p}=e;return{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:l(v||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:t.createElement(i.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("ES_PT_ATTACH_FILE")+(o.docUploadRequired?" *":""),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,hintText:l("PT_ATTACH_RESTRICTIONS_SIZE"),message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:y,selectedApprover:D,setSelectedApprover:A,selectFile:F,uploadedFile:O,setUploadedFile:b,businessService:v}))},[r,y,w,P,O]),r&&f.form?t.createElement(i.Modal,{headerBarMain:t.createElement(zi,{label:a(f.label.heading)}),headerBarEnd:t.createElement(Yi,{onClick:d}),actionCancelLabel:a(f.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(f.label.submit),actionSaveOnSubmit:()=>{},isDisabled:r.showFinancialYearsModal?!P:E||(null==r?void 0:r.docUploadRequired)&&!O,formId:"modal-action"},S?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:f.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if("INACTIVE_PROPERTY"==(null==r?void 0:r.action)){let n={action:"OPEN",comment:null==e?void 0:e.comments,businessService:"PT.CREATE",moduleName:"PT"};c.creationReason="STATUS",s({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Property:{...c,workflow:n}})}else if(null!=r&&r.showFinancialYearsModal)s({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Assessment:{financialYear:null==P?void 0:P.name,propertyId:null==c?void 0:c.propertyId,tenantId:u,source:null==c?void 0:c.source,channel:null==c?void 0:c.channel,assessmentDate:Date.now()}});else{let n={action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,businessService:v,moduleName:p};n.assignes=null!=r&&r.isTerminateState||!D?[]:[D],O&&(n.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]),s({Property:{...c,workflow:n}})}},defaultValues:g,formId:"modal-action"})):t.createElement(i.Loader,null)},qi=e=>t.createElement("h1",{className:"heading-m"},e.label),Ki=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Xi=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Ki,null)),$i=e=>{var l,o;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:m,data:E}=Digit.Hooks.pt.useMDMS(u,v,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),[S,_]=n.useState({}),[f,C]=n.useState({}),[g,N]=n.useState([]),[y,T]=n.useState({}),[D,A]=n.useState(null),[I,h]=n.useState(null),[O,b]=n.useState(null),[L,R]=n.useState([]),[w,W]=n.useState(null);function P(e){A(e.target.files[0])}return n.useEffect(()=>{var e;E&&E["egf-master"]&&R(null===(e=E["egf-master"])||void 0===e?void 0:e.FinancialYear)},[E]),n.useEffect(()=>{var e;N(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[p]),n.useEffect(()=>{!function(){try{b(null);const e=function(){if(D){const e=function(){if(D.size>=5242880)b(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",D,Digit.ULBService.getStateId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?h(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):b(a("CS_FILE_UPLOAD_ERROR"))})},function(){b(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[D]),n.useEffect(()=>{r&&_((e=>{let{t:n,action:l,approvers:o,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c}=e,v=!0;return"SENDBACKTOCITIZEN"!=(null==l?void 0:l.action)&&"APPROVE"!=(null==l?void 0:l.action)||(v=!1),l.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:v?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?t.createElement(i.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:g,selectedApprover:y,setSelectedApprover:T,selectFile:P,uploadedFile:I,setUploadedFile:h,businessService:v}))},[r,g,L,w,I]),r&&S.form?t.createElement(i.Modal,{headerBarMain:t.createElement(qi,{label:a(S.label.heading)}),headerBarEnd:t.createElement(Xi,{onClick:d}),actionCancelLabel:a(S.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(S.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},m?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:S.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=y&&y.uuid?[null==y?void 0:y.uuid]:null,wfDocuments:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==D?void 0:D.name,fileStoreId:I}]:null},s({Licenses:[c]})},defaultValues:f,formId:"modal-action"})):t.createElement(i.Loader,null)},Zi=e=>t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Ji=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Qi=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Ji,null)),ea=e=>{var l,o;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p,isLoading:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[E,S]=n.useState({}),[_,f]=n.useState({}),[C,g]=n.useState([]),[N,y]=n.useState({}),[T,D]=n.useState(null),[A,I]=n.useState(null),[h,O]=n.useState(null),b=!!Digit.Utils.browser.isMobile();function L(e){D(e.target.files[0])}return n.useEffect(()=>{var e;g(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[p]),n.useEffect(()=>{!function(){try{O(null);const e=function(){if(T){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(T.size>=5242880)O(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=T&&T.type&&!e.test(null==T?void 0:T.type))O(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",T,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):O(a("CS_FILE_UPLOAD_ERROR"))})},function(){O(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.useEffect(()=>{r&&S((e=>{let{t:n,action:l,approvers:o,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c,error:v}=e,p=!0;return"SENDBACKTOCITIZEN"==(null==l?void 0:l.action)&&(p=!1),l.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:p?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?t.createElement(i.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:a,action:r,approvers:C,selectedApprover:N,setSelectedApprover:y,selectFile:L,uploadedFile:A,setUploadedFile:I,businessService:v,error:h}))},[r,C,A,h]),r&&E.form?t.createElement(i.Modal,{headerBarMain:t.createElement(Zi,{label:a(E.label.heading)}),headerBarEnd:t.createElement(Qi,{onClick:d}),actionCancelLabel:a(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:b?{width:"720px"}:{},style:b?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:b?{paddingLeft:"5px"}:{}},m?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:E.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:null,wfDocuments:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:null},s({Licenses:[c]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:_,formId:"modal-action"})):t.createElement(i.Loader,null)},na=e=>t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),ta=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),la=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(ta,null)),oa=e=>{var l,o,a,r,d,s,c,v,p,m,E,S;let{t:_,action:f,tenantId:C,closeModal:g,submitAction:N,applicationDetails:y,applicationData:T,businessService:D,workflowDetails:A}=e;Digit.Hooks.obps.useObpsAPI(null!==(l=T)&&void 0!==l&&null!==(o=l.landInfo)&&void 0!==o&&null!==(a=o.address)&&void 0!==a&&a.city?null===(r=T)||void 0===r||null===(d=r.landInfo)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.city:C,!1);const{data:I,isLoading:h}=Digit.Hooks.useEmployeeSearch(C,{roles:null==A||null===(c=A.data)||void 0===c||null===(v=c.initialActionState)||void 0===v||null===(p=v.nextActions)||void 0===p||null===(m=p.filter(e=>(null==e?void 0:e.action)==(null==f?void 0:f.action)))||void 0===m||null===(E=m[0])||void 0===E||null===(S=E.assigneeRoles)||void 0===S?void 0:S.map(e=>({code:e})),isActive:!0},{enabled:!(null!=f&&f.isTerminateState)}),[O,b]=(u.useQueryClient(),n.useState({})),[L,R]=n.useState({}),[w,W]=n.useState([]),[P,M]=n.useState({}),[x,B]=n.useState(null),[F,U]=n.useState(null),[k,H]=n.useState(null),[j,z]=n.useState(null),V=!!Digit.Utils.browser.isMobile();function Y(e){B(e.target.files[0])}n.useEffect(()=>{var e;W(null==I||null===(e=I.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[I]),n.useEffect(()=>{!function(){try{H(null);const e=function(){if(x){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(x.size>=5242880)H(_("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=x&&x.type&&!e.test(null==x?void 0:x.type))H(_("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",x,Digit.ULBService.getStateId()||(null==C?void 0:C.split(".")[0]))).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?U(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):H(_("CS_FILE_UPLOAD_ERROR"))})},function(){H(_("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[x]);const G=e=>{let n=[];return e&&e.map((e,t)=>{n.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),n},q=e=>{let n=[];var t;for(t=0;t<(null==e?void 0:e.questionLength);t++){var l;n.push({remarks:e["Remarks_"+t],question:null==e?void 0:e.questionList[t].question,value:null==e||null===(l=e["question_"+t])||void 0===l?void 0:l.code})}return n},K=e=>{var n,t;let l=[],o=[];var i,a;return(null==e||null===(n=e.additionalDetails)||void 0===n||null===(t=n.fieldinspection_pending)||void 0===t?void 0:t.length)>0&&(o=null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?(l=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")),(null===(a=l)||void 0===a?void 0:a.length)>0&&l.map((e,n)=>{o.push({docs:G(e.Documents),date:e.InspectionDate,questions:q(e),time:null==e?void 0:e.InspectionTime})}),o=o.filter(e=>e.docs&&e.docs.length>0)):sessionStorage.removeItem("INSPECTION_DATA"),[...o]},X=e=>{let n=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),t=[];return n.map(e=>{var n,l,o,i,a,r;(null==e||null===(n=e.uploadedDocuments)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.values)||void 0===o?void 0:o.length)>0&&(t=[...t,...null==e||null===(i=e.uploadedDocuments)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.values]),(null==e||null===(r=e.newUploadedDocs)||void 0===r?void 0:r.length)>0&&(t=[...t,...null==e?void 0:e.newUploadedDocs])}),t},$=()=>{var e;const n=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),t=Digit.SessionStorage.get("OBPS_NEW_APPROVALS");let l=null==n?void 0:n.reduce((e,n)=>null!=n&&n.checked?e.push(null==n?void 0:n.label)&&e:e,[]);return l=null===(e=l)||void 0===e?void 0:e.concat(null!==t?t.filter(e=>""!==e.label).map(e=>null==e?void 0:e.label):[]),l};return n.useEffect(()=>{f&&b((e=>{var n;let{t:l,action:o,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p,error:m}=e,E=!1;return"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"SKIP_PAYMENT"!=o.action&&"SEND_BACK_TO_CITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(E=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:o.isTerminateState||E?null:l(v||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||E?null:t.createElement(i.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:!0,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}})({t:_,action:f,approvers:w,selectedApprover:P,setSelectedApprover:M,selectFile:Y,uploadedFile:F,setUploadedFile:U,businessService:D,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:k}))},[f,w,j,F,k]),f&&O.form?t.createElement(i.Modal,{headerBarMain:t.createElement(na,{label:_(O.label.heading)}),headerBarEnd:t.createElement(la,{onClick:g}),actionCancelLabel:_(O.label.cancel),actionCancelOnSubmit:g,actionSaveLabel:_(O.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:V?{width:"720px"}:{},style:V?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:V?{paddingLeft:"5px"}:{}},h?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:O.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var n,t,l,o,i,a;T={...T,documents:X(),additionalDetails:{...null===(n=T)||void 0===n?void 0:n.additionalDetails,fieldinspection_pending:K(T),pendingapproval:$()},workflow:{action:null==f?void 0:f.action,comment:(null==e||null===(t=e.comments)||void 0===t?void 0:t.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,assignes:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,varificationDocuments:F?[{documentType:(null==f?void 0:f.action)+" DOC",fileName:null==x?void 0:x.name,fileStoreId:F}]:null},action:null==f?void 0:f.action,comment:null==e?void 0:e.comments,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,wfDocuments:F?[{documentType:(null==f?void 0:f.action)+" DOC",fileName:null==x?void 0:x.name,fileStoreId:F}]:null};const r=null==y||null===(o=y.nocData)||void 0===o?void 0:o.map(e=>{const n=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:{...e,documents:[...null!=e&&e.documents?null==e?void 0:e.documents:[],...n||[]]}}});let u={sourceRefId:null==r||null===(i=r[0])||void 0===i||null===(a=i.Noc)||void 0===a?void 0:a.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(C,u)).then(function(e){var n;let t=!0,l=!0;null==e||null===(n=e.Noc)||void 0===n||n.map(e=>{var n,o,i,a,r;"APPROVED"!==(null==e||null===(n=e.applicationStatus)||void 0===n?void 0:n.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"REJECTED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"VOIDED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())||1!=t&&1!=l||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?t=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(l=!1))});let o=[];r&&r.map(e=>{var n,i,a,r,u,d,s,c,v,p,m,E;("APPROVED"!=(null==e||null===(n=e.Noc)||void 0===n||null===(i=n.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(a=e.Noc)||void 0===a||null===(r=a.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(d=u.applicationStatus)||void 0===d?void 0:d.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(s=e.Noc)||void 0===s||null===(c=s.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"VOIDED"!=(null==e||null===(v=e.Noc)||void 0===v||null===(p=v.applicationStatus)||void 0===p?void 0:p.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(m=e.Noc)||void 0===m?void 0:m.nocType)&&t||"FIRE_NOC"===(null==e||null===(E=e.Noc)||void 0===E?void 0:E.nocType)&&l)&&o.push(e)}),N({BPA:T},(null==o?void 0:o.length)>0&&o,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}},defaultValues:L,formId:"modal-action"})):t.createElement(i.Loader,null)},ia=e=>t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),aa=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ra=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(aa,null)),ua=e=>{var l,a;let{t:r,action:d,tenantId:s,closeModal:c,submitAction:v,applicationData:p,businessService:m}=e;const{data:E,isLoading:S}=Digit.Hooks.useEmployeeSearch(s,{roles:null==d||null===(l=d.assigneeRoles)||void 0===l||null===(a=l.map)||void 0===a?void 0:a.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=d&&d.isTerminateState)}),[_,f]=(u.useQueryClient(),n.useState({})),[C,g]=n.useState({}),[N,y]=n.useState([]),[T,D]=n.useState({}),[A,I]=n.useState(null),[h,O]=n.useState(null),[b,L]=n.useState(null),R=!!Digit.Utils.browser.isMobile();function w(e){I(e.target.files[0])}return o.useHistory(),n.useEffect(()=>{var e;y(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[E]),n.useEffect(()=>{!function(){try{L(null);const e=function(){if(A){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(A.size>=5242880)L(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=A&&A.type&&!e.test(null==A?void 0:A.type))L(r("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",A,Digit.ULBService.getStateId()||(null==s?void 0:s.split(".")[0]))).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?O(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):L(r("CS_FILE_UPLOAD_ERROR"))})},function(){L(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]),n.useEffect(()=>{d&&f((e=>{var n;let{t:l,action:o,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p,error:m}=e,E=!1;"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)||(E=!0);let S=!1;return"APPROVE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"AUTO_APPROVE"!=o.action&&"AUTO_REJECT"!=o.action||(S=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:o.isTerminateState||S?null:l(v||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||S?null:t.createElement(i.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:E,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}})({t:r,action:d,approvers:N,selectedApprover:T,setSelectedApprover:D,selectFile:w,uploadedFile:h,setUploadedFile:O,businessService:m,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:b}))},[d,N,h,b]),d&&_.form?t.createElement(i.Modal,{headerBarMain:t.createElement(ia,{label:r(_.label.heading)}),headerBarEnd:t.createElement(ra,{onClick:c}),actionCancelLabel:r(_.label.cancel),actionCancelOnSubmit:c,actionSaveLabel:r(_.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:R?{width:"720px"}:{},style:R?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:R?{paddingLeft:"5px"}:{}},S?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:_.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n,t,l;let o=JSON.parse(sessionStorage.getItem("NewNOCDocs")),i=(null===(n=p)||void 0===n||null===(t=n.documents)||void 0===t?void 0:t.length)>0?[...null===(l=p)||void 0===l?void 0:l.documents]:[];o.map((e,n)=>{i.push(e)}),p={...p,workflow:{action:null==d?void 0:d.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=T&&T.uuid?[null==T?void 0:T.uuid]:null,documents:h?[{documentType:(null==d?void 0:d.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:h}]:null},documents:i},v({Noc:p},!1,{isNoc:!0})},defaultValues:C,formId:"modal-action"})):t.createElement(i.Loader,null)},da=e=>t.createElement("h1",{className:"heading-m"},e.label),sa=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ca=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(sa,null)),va=function(e,n){void 0===n&&(n="dayend");try{const t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[2]-1,t[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}},pa=e=>{var l,o;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p,isLoading:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[E,S]=n.useState({}),[_,f]=n.useState({}),[C,g]=n.useState([]),[N,y]=n.useState({}),[T,D]=n.useState(null),[A,I]=n.useState(null),[h,O]=n.useState(null),b=window.Digit.Utils.browser.isMobile(),L=window.location.href.includes("/employee");function R(e){D(e.target.files[0])}return n.useEffect(()=>{var e;g(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[p]),n.useEffect(()=>{!function(){try{O(null);const e=function(){if(T){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(T.size>=5242880)O(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=T&&T.type&&!e.test(null==T?void 0:T.type))O(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",T,Digit.ULBService.getCurrentTenantId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):O(a("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),O(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.useEffect(()=>{var e,n,l,o;"DisconnectWSConnection"==(null===(e=c)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(l=c)||void 0===l||null===(o=l.processInstance)||void 0===o?void 0:o.businessService)?r&&S((e=>{var n;let{t:l,action:o,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,businessService:v,error:p}=e,m=!0,E=!1;return(null!=o&&null!==(n=o.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==o?void 0:o.action)||"RESUBMIT_APPLICATION"==(null==o?void 0:o.action))&&(m=!1),o.isTerminateState&&(m=!1),"EXECUTE_DISCONNECTION"!=(null==o?void 0:o.action)&&"DISCONNECTION_EXECUTED"!=(null==o?void 0:o.action)||(E=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?t.createElement(i.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},E&&{label:l("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!E,type:"custom",populators:E?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:(e,n)=>t.createElement(i.DatePicker,H({onChange:e.onChange,date:e.value},n))}:null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:C,selectedApprover:N,setSelectedApprover:y,selectFile:R,uploadedFile:A,setUploadedFile:I,businessService:v,error:h})):r&&S((e=>{var n;let{t:l,action:o,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,businessService:v,error:p}=e,m=!0;return(null!=o&&null!==(n=o.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==o?void 0:o.action))&&(m=!1),o.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?t.createElement(i.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(i.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:C,selectedApprover:N,setSelectedApprover:y,selectFile:R,uploadedFile:A,setUploadedFile:I,businessService:v,error:h}))},[r,C,A,h]),r&&E.form?t.createElement(i.Modal,{headerBarMain:t.createElement(da,{label:a(E.label.heading)}),headerBarEnd:t.createElement(ca,{onClick:d}),actionCancelLabel:a(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",style:b&&L?{width:"100%",height:"auto"}:{}},m?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n,t,l,o,i,a,d,v,p,m;if(null!==(n=c)&&void 0!==n&&n.isBillAmend){var E,S,_,f,C,g,y,D,I;const n={...null===(E=c)||void 0===E||null===(S=E.billAmendmentDetails)||void 0===S?void 0:S.additionalDetails,comments:null!=e&&e.comments?e.comments:null},t={...null===(_=c)||void 0===_?void 0:_.billAmendmentDetails,workflow:{businessId:null===(f=c)||void 0===f||null===(C=f.billAmendmentDetails)||void 0===C?void 0:C.amendmentId,action:null==r?void 0:r.action,tenantId:u,businessService:null!==(g=c)&&void 0!==g&&null!==(y=g.applicationType)&&void 0!==y&&y.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(D=c)&&void 0!==D&&null!==(I=D.applicationType)&&void 0!==I&&I.includes("WATER")?"WS":"SW",assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:[]},additionalDetails:n,comment:(null==e?void 0:e.comments)||"",wfDocuments:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:null,processInstance:{action:null==r?void 0:r.action,assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:[]}};s({AmendmentUpdate:t})}else{if(c={...c,action:null==r?void 0:r.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:[],assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],wfDocuments:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:null,processInstance:{...null===(t=c)||void 0===t?void 0:t.processInstance,action:null==r?void 0:r.action,assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:A?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,fileStoreId:A}]:[]}},null!=e&&e.date&&null!==(l=c)&&void 0!==l&&null!==(o=l.applicationType)&&void 0!==o&&o.includes("DISCONNECT")){const n=ht(null==e?void 0:e.date);c.disconnectionExecutionDate=va(n)}else if(null!=e&&e.date){const n=ht(null==e?void 0:e.date);c.connectionExecutionDate=va(n)}var h;if("DisconnectWSConnection"==(null===(i=c)||void 0===i||null===(a=i.processInstance)||void 0===a?void 0:a.businessService)||"DisconnectSWConnection"==(null===(d=c)||void 0===d||null===(v=d.processInstance)||void 0===v?void 0:v.businessService)||window.location.href.includes("disconnection"))"WATER"==(null===(h=c)||void 0===h?void 0:h.serviceType)?s({WaterConnection:c,disconnectRequest:!0}):s({SewerageConnection:c,disconnectRequest:!0});else if("SEWERAGE_RECONNECTION"==(null===(p=c)||void 0===p?void 0:p.applicationType))s({SewerageConnection:c,disconnectRequest:!1,reconnectRequest:!0});else if("WATER_RECONNECTION"==(null===(m=c)||void 0===m?void 0:m.applicationType))s({WaterConnection:c,disconnectRequest:!1,reconnectRequest:!0});else{var O,b,L,R,w,W,P,M,x,B,F,U,k;const e=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),n=e?JSON.parse(e):"";null!=n&&null!==(O=n.value)&&void 0!==O&&O.adhocPenalty&&(c.additionalDetails.adhocPenalty=parseInt(null==n||null===(b=n.value)||void 0===b?void 0:b.adhocPenalty)||""),null!=n&&null!==(L=n.value)&&void 0!==L&&L.adhocPenaltyComment&&(c.additionalDetails.adhocPenaltyComment=(null==n||null===(R=n.value)||void 0===R?void 0:R.adhocPenaltyComment)||""),null!=n&&null!==(w=n.value)&&void 0!==w&&w.adhocPenaltyReason&&(c.additionalDetails.adhocPenaltyReason=(null==n||null===(W=n.value)||void 0===W?void 0:W.adhocPenaltyReason)||""),null!=n&&null!==(P=n.value)&&void 0!==P&&P.adhocRebate&&(c.additionalDetails.adhocRebate=parseInt(null==n||null===(M=n.value)||void 0===M?void 0:M.adhocRebate)||""),null!=n&&null!==(x=n.value)&&void 0!==x&&x.adhocRebateComment&&(c.additionalDetails.adhocRebateComment=(null==n||null===(B=n.value)||void 0===B?void 0:B.adhocRebateComment)||""),null!=n&&null!==(F=n.value)&&void 0!==F&&F.adhocRebateReason&&(c.additionalDetails.adhocRebateReason=(null==n||null===(U=n.value)||void 0===U?void 0:U.adhocRebateReason)||""),"WATER"==(null===(k=c)||void 0===k?void 0:k.serviceType)?s({WaterConnection:c,disconnectRequest:!1,reconnectRequest:!1}):s({SewerageConnection:c,disconnectRequest:!1,reconnectRequest:!1})}}},defaultValues:_,formId:"modal-action"})):t.createElement(i.Loader,null)},ma=e=>t.createElement("h1",{className:"heading-m"},e.label),Ea=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Sa=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Ea,null)),_a=e=>{var l,o;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v,moduleCode:p}=e;console.log("applicationData",c);const{data:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[E,S]=n.useState({}),[_,f]=n.useState({}),[C,g]=n.useState([]),[N,y]=n.useState(null),[T,D]=n.useState(null),[A,I]=n.useState(null),[h,O]=n.useState(null),[b,L]=n.useState(!1);function R(e){D(e.target.files[0])}return n.useEffect(()=>{var e;g(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[m]),n.useEffect(()=>{!function(){try{O(null);const e=function(){if(T){const e=function(){if(T.size>=5242880)O(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PTR",T,Digit.ULBService.getStateId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):O(a("CS_FILE_UPLOAD_ERROR"))})},function(){O(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.useEffect(()=>{r&&S((e=>{let{t:n,action:l,selectFile:o,uploadedFile:a,setUploadedFile:r,businessService:u}=e;return{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+u+"_"+(null==l?void 0:l.action),cancel:"ES_PTR_COMMON_CANCEL"},form:[{body:[{label:n("ES_PTR_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("ES_PTR_ATTACH_FILE")+(l.docUploadRequired?" *":""),populators:t.createElement(i.UploadFile,{id:"workflow-doc",onUpload:o,onDelete:()=>{r(null)},showHint:!0,hintText:n("PTR_ATTACH_RESTRICTIONS_SIZE"),message:a?"1 "+n("ES_PTR_ACTION_FILEUPLOADED"):n("ES_PTR_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:C,selectedApprover:N,setSelectedApprover:y,selectFile:R,uploadedFile:A,setUploadedFile:I,businessService:v}))},[r,C,A]),r&&E.form?t.createElement(i.Modal,{headerBarMain:t.createElement(ma,{label:a(E.label.heading)}),headerBarEnd:t.createElement(Sa,{onClick:d}),actionCancelLabel:a(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},t.createElement(i.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){let n={action:null==r?void 0:r.action,comments:null==e?void 0:e.comments,businessService:v,moduleName:p};A&&(n.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==T?void 0:T.name,filestoreId:A}]),s({PetRegistrationApplications:[{...c,workflow:n}]})},defaultValues:_,formId:"modal-action"})):t.createElement(i.Loader,null)},fa=e=>null!=e&&e.businessService.includes("PT")?t.createElement(Gi,e):null!=e&&e.businessService.includes("ptr")?t.createElement(_a,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?t.createElement($i,e):null!=e&&e.moduleCode.includes("BPAREG")?t.createElement(ea,e):null!=e&&e.moduleCode.includes("BPA")?t.createElement(oa,e):null!=e&&e.moduleCode.includes("NOC")?t.createElement(ua,e):null!=e&&e.moduleCode.includes("WS")?t.createElement(pa,e):void 0;function Ca(e){let{documents:n,svgStyles:o={},isSendBackFlow:a=!1,isHrLine:r=!1,titleStyles:u}=e;const{t:d}=l.useTranslation(),s=window.location.href.includes("stakeholder");return t.createElement("div",{style:{marginTop:"19px"}},!s&&(null==n?void 0:n.map((e,l)=>{var o;return t.createElement(t.Fragment,{key:l},null!=e&&e.title?t.createElement(i.CardSubHeader,{style:u||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var l;return t.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto",minWidth:"100px"},key:n},t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(i.PDFSvg,null)),t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},d(null==e?void 0:e.title)),a?null!=e&&null!==(l=e.documentType)&&void 0!==l&&l.includes("NOC")?t.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType.split(".")[1])):t.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),r&&(null==n?void 0:n.length)!=l+1?t.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),s&&(null==n?void 0:n.map((e,n)=>{var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(i.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,t.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>t.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=o&&o.minWidth?null==o?void 0:o.minWidth:"160px",marginRight:"20px"},key:n},t.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},d(null==e?void 0:e.title)),null!=e&&e.docInfo?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+d(null==e?void 0:e.docInfo)):null,t.createElement(i.PDFSvg,null),t.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center",color:"#505A5F"}},""+d(null==e?void 0:e.title))))):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}const ga=e=>{var l,o;let{t:i,formData:a,applicationData:r,docs:u,bpaActionsDetails:d}=e;const s=(null==r?void 0:r.status)||"",c=(null==d||null===(l=d.data)||void 0===l?void 0:l.nextActions)||[],v=Digit.ULBService.getStateId(),[p,m]=n.useState((null==a||null===(o=a.documents)||void 0===o?void 0:o.documents)||[]),[E,S]=n.useState(null),[_,f]=n.useState([]),[C,g]=n.useState(!0),[N,y]=n.useState(!1),[T,D]=n.useState(!1),{isLoading:A,data:I}=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"]),{isLoading:h,data:O}=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]);return n.useEffect(()=>{var e,n,t,l;let o=[];var i,a;null!=I&&null!==(e=I.BPA)&&void 0!==e&&e.DocTypeMapping&&(o=null==I||null===(i=I.BPA)||void 0===i||null===(a=i.DocTypeMapping)||void 0===a?void 0:a.filter(e=>{var n,t;return e.WFState==(null==r?void 0:r.status)?null==r?void 0:r.status:e.RiskType==(null==r?void 0:r.riskType)&&e.ServiceType==(null==r||null===(n=r.additionalDetails)||void 0===n?void 0:n.serviceType)&&e.applicationType==(null==r||null===(t=r.additionalDetails)||void 0===t?void 0:t.applicationType)}));let d=[];null===(n=o)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.docTypes)||void 0===l||l.forEach(e=>{var n,t,l,o;let i=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==O||null===(n=O["common-masters"])||void 0===n||null===(t=n.DocumentType)||void 0===t||t.forEach(n=>{let t=n.code.slice(0,i.length);i===t&&(e.hasDropdown=!0,n.i18nKey=n.code,e.dropdownData.push(n))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(o=l.values)||void 0===o||o.map(n=>{var t,l;i===(null==n||null===(t=n.documentType)||void 0===t?void 0:t.split(".")[0])+"."+(null==n||null===(l=n.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(n)}),d.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(d)),f(d)},[!A,!h]),n.useEffect(()=>{let e=0;_.map(n=>{let t=!1;p.map(e=>{n.required&&n.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(t=!0)}),!t&&n.required&&(e+=1)}),g("0"!=e&&0!=e||!(p.length>0))},[p,N]),n.useEffect(()=>{D("DOC_VERIFICATION_INPROGRESS"===s&&(null==c?void 0:c.length)>0)},[r,d]),t.createElement("div",null,null==_?void 0:_.map((e,n)=>t.createElement("div",null,t.createElement(Na,{key:n,index:n,document:e,t:i,error:E,setError:S,setDocuments:m,documents:p,setCheckRequiredFields:y,applicationStatus:s,actions:c,bpaTaxDocuments:_,checkEnablingDocs:T}))))};function Na(e){var l,o;let{t:a,document:r,setDocuments:u,documents:d,index:s,bpaTaxDocuments:c,checkEnablingDocs:v}=e;const p=null==d?void 0:d.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],m=Digit.ULBService.getStateId(),[E,S]=n.useState(p?{...p,active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}:1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{}),[_,f]=n.useState(null),[C,g]=n.useState(()=>(null==p?void 0:p.fileStoreId)||null),[N,y]=n.useState([]);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{var n;const t=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==C?void 0:C.length)||null===C?t:[...null==t?void 0:t.filter(e=>(null==e?void 0:e.fileStoreId)!==C),{documentType:null==E?void 0:E.code,fileStoreId:C,documentUid:C,fileName:(null==_?void 0:_.name)||"",id:d?null===(n=d.find(e=>e.documentType===(null==E?void 0:E.code)))||void 0===n?void 0:n.id:void 0}]})},[C,E]),n.useEffect(()=>{try{N.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),r.newUploadedDocs=[],N.map(e=>{var n,t,l;null!=E&&E.code&&r.newUploadedDocs.push({documentType:null==E?void 0:E.code,fileStoreId:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,documentUid:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),c[s]=r,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)))}catch(e){Promise.reject(e)}},[N,E]),n.useEffect(()=>{},[_]),t.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+a(null==r?void 0:r.code)),(null==r||null===(o=r.uploadedDocuments)||void 0===o?void 0:o.length)&&t.createElement(Ca,{documents:null==r?void 0:r.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),v?t.createElement("div",{style:{marginTop:"20px"}},t.createElement(i.LabelFieldPair,{style:{width:"100%"}},t.createElement(i.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=r&&r.required?a(null==r?void 0:r.code)+"* ":""+a(null==r?void 0:r.code)),t.createElement(i.Dropdown,{className:"form-field",t:a,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>S(e),style:{width:"100%"}})),t.createElement(i.LabelFieldPair,{style:{width:"100%"}},t.createElement(i.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(i.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:e=>((e,n)=>{let t=Object.fromEntries(n),l=Object.values(t);0!==Object.keys(t).length&&y(l),function(e){e&&f(e.file)}(l[l.length-1])})(0,e),t:a,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function ya(e){let{fiReport:n,isCitizen:o=!1}=e;const{t:a}=l.useTranslation();return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginTop:"10px"}},t.createElement(o?i.CardHeader:i.CardSectionHeader,{style:{fontSize:"24px"}},""+a("BPA_FI_REPORT")),n.map((e,l)=>{var o,r,u,d,s,c;return t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},t.createElement(i.StatusTable,null,t.createElement(i.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+a("BPA_FI_REPORT"):a("BPA_FI_REPORT")+" - "+(l+1)),t.createElement(i.Row,{className:"border-none",label:""+a("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(o=e.date)||void 0===o?void 0:o.split("-")[2])+"/"+(null===(r=e.date)||void 0===r?void 0:r.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),t.createElement(i.Row,{className:"border-none",label:""+a("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(d=e.questions)||void 0===d?void 0:d.length)&&(null==e||null===(s=e.questions)||void 0===s?void 0:s.map(e=>t.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},t.createElement(i.Row,{className:"border-none",label:""+a(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),t.createElement(i.Row,{className:"border-none",label:""+a("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"})))),t.createElement(Ca,{documents:(c=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==c?void 0:c.map(e=>{var n;return{title:null==e||null===(n=e.documentType)||void 0===n?void 0:n.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function Ta(e){let{t:l,document:o,setNocDocuments:a,setError:r,nocDocuments:u}=e;const d=null==u?void 0:u.filter(e=>{var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==o?void 0:o.code)})[0],s=Digit.ULBService.getStateId(),[c,v]=n.useState(),[p,m]=n.useState(null),[E,S]=n.useState(()=>(null==d?void 0:d.fileStoreId)||null);return n.useEffect(()=>{var e,n;null!=o&&null!==(e=o.dropdownData)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.code&&a(e=>{var n;const t=null==e?void 0:e.filter(e=>{var n,t;return(null==e?void 0:e.documentType)!==(null==o||null===(n=o.dropdownData)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.code)});return 0===(null==E?void 0:E.length)||null===E?t:[...null==t?void 0:t.filter(e=>(null==e?void 0:e.fileStoreId)!==E),{documentType:null==o||null===(n=o.dropdownData)||void 0===n?void 0:n[0].code,fileStoreId:E,documentUid:E,fileName:(null==p?void 0:p.name)||""}]})},[E]),n.useEffect(()=>{!function(){try{r(null);const e=function(){if(p){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(p.size>=5242880)r(l("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=p&&p.type&&!e.test(null==p?void 0:p.type))r(l("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return S(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",p,Digit.ULBService.getStateId())).then(function(e){var n,t,o,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?S(null==e||null===(o=e.data)||void 0===o||null===(i=o.files[0])||void 0===i?void 0:i.fileStoreId):r(l("CS_FILE_UPLOAD_ERROR"))})},function(){r(l("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[p]),t.createElement("div",{style:{}},t.createElement(i.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},t.createElement(i.CardLabel,{style:{width:"100%"}},null!=o&&o.required?l("TL_BUTTON_UPLOAD FILE")+"*":""+l("TL_BUTTON_UPLOAD FILE")),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(i.MultiUploadWrapper,{module:"NOC",tenantId:s,getFormState:e=>(e=>{let n=Object.fromEntries(e),t=Object.values(n);!function(e){e&&m(e.file)}(t[t.length-1])})(e),t:l,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}const Da=e=>{var l;let{t:o,noc:a,docs:r,isNoc:u,applicationData:d,NOCdata:s,bpaActionsDetails:c}=e;Digit.ULBService.getStateId();const v=Digit.ULBService.getStateId(),p=(null==d?void 0:d.status)||"",m=(null==c||null===(l=c.data)||void 0===l?void 0:l.nextActions)||[],{data:E}=Digit.Hooks.obps.useMDMS(v,"NOC",["DocumentTypeMapping"],{enabled:u}),{data:S}=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"],{enabled:!u}),{data:_}=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]),[f,C]=n.useState([]),[g,N]=n.useState([]),[y,T]=n.useState(!1),[D,A]=Digit.Hooks.useSessionStorage(null==a?void 0:a.nocType,[]),[I,h]=n.useState(null),O=window.location.href.includes("/employee/");return n.useEffect(()=>{var e;C(null==_||null===(e=_["common-masters"])||void 0===e?void 0:e.DocumentType)},[_]),n.useEffect(()=>{var e,n,t;let l,o=[];var i,r,s,c;l=u?null==E||null===(i=E.NOC)||void 0===i||null===(r=i.DocumentTypeMapping)||void 0===r?void 0:r.filter(e=>(null==e?void 0:e.applicationType)===(null==a?void 0:a.applicationType)&&(null==e?void 0:e.nocType)===(null==a?void 0:a.nocType)):null==S||null===(s=S.BPA)||void 0===s||null===(c=s.DocTypeMapping)||void 0===c?void 0:c.filter(e=>{var n,t;return e.WFState==(null==d?void 0:d.status)&&e.RiskType==(null==d?void 0:d.riskType)&&e.ServiceType==(null==d||null===(n=d.additionalDetails)||void 0===n?void 0:n.serviceType)&&e.applicationType==(null==d||null===(t=d.additionalDetails)||void 0===t?void 0:t.applicationType)}),null!==(e=l)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&null!==(t=n.docTypes)&&void 0!==t&&t[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==a?void 0:a.additionalDetails,applicationStatus:null==a?void 0:a.applicationStatus,appNumberLink:null==a?void 0:a.applicationNo,nocNo:null==a?void 0:a.nocNo},o.push(l[0].docTypes[0]));let v=[];o&&o.length>0&&(o.map(e=>{let n=e.documentType;e.dropdownData=[],null==f||f.forEach(t=>{let l=t.code.slice(0,null==n?void 0:n.length);n===l&&(e.hasDropdown=!0,e.dropdownData.push(t))}),v.push(e)}),N(v))},[E,f]),n.useEffect(()=>{T("NOC_VERIFICATION_INPROGRESS"===p&&(null==m?void 0:m.length)>0)},[d,c]),t.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},t.createElement(i.StatusTable,null,t.createElement(i.Row,{label:O?""+o("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"):o("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),s&&s.map((e,n)=>{if(null!=e&&e.value)return t.createElement(i.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:O?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:O?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),t.createElement(Ca,{documents:r,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),y&&(null==g?void 0:g.map((e,n)=>t.createElement(Ta,{key:n,document:e,t:o,error:I,setError:h,setNocDocuments:A,nocDocuments:D,checkEnablingDocs:y}))))},Aa=e=>{let{permissions:l,t:o}=e;const[a,r,u]=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==l?void 0:l.map(e=>({label:e,checked:!1}))),[d,s,c]=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]);n.useEffect(()=>()=>{Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")},[]);const v=window.Digit.Utils.browser.isMobile();return t.createElement("div",null,t.createElement(i.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},o("BPA_PERMIT_CONDITIONS")),null==a?void 0:a.map((e,n)=>t.createElement(i.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:v?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:e=>((e,n,t)=>{const l=e.target.checked;r(()=>null==a?void 0:a.map((e,n)=>t===n?{...e,checked:l}:e))})(e,0,n),isLabelFirst:!0,index:n})),null==d?void 0:d.map((e,n)=>t.createElement("div",null,t.createElement(i.TextInput,{key:n,value:null==e?void 0:e.label,onChange:e=>((e,n)=>{s(()=>null==d?void 0:d.map((t,l)=>{var o;return n===l?{label:null==e||null===(o=e.target)||void 0===o?void 0:o.value}:t}))})(e,n),textInputStyle:{maxWidth:v?"96%":"830px",width:v?"96%":"830px"},style:v?{paddingRight:"10%"}:{},placeholder:o("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),t.createElement(i.LinkButton,{label:t.createElement("div",null,t.createElement("span",null,t.createElement(i.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:v?"5%":"35%"}}))),style:{},onClick:e=>(e=>{const n=[...d];n.splice(e,1),s([...n])})(n)}))),t.createElement(i.LinkButton,{style:{color:"#a82227",maxWidth:v?"fit-content":"10%",marginRight:"3%"},label:o("BPA_ADD_MORE"),onClick:()=>{s([...d,{label:""}])}}))};function Ia(e){let{documents:o,svgStyles:a={},isSendBackFlow:r=!1}=e;const{t:u}=l.useTranslation(),[d,s]=n.useState(()=>[]),[c,v]=(Digit.ULBService.getCurrentTenantId(),n.useState({}));n.useEffect(()=>{var e;let n=[];null==o||o.forEach((e,t,l)=>{n=[...n,...e.values?e.values:[]]}),s(null===(e=n)||void 0===e?void 0:e.map(e=>null==e?void 0:e.fileStoreId))},[o]),n.useEffect(()=>{var e;null!=d&&d.length&&"BillAmend"===(null==o||null===(e=o[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(d,Digit.ULBService.getCurrentTenantId()).then(e=>{v(null==e?void 0:e.data)}):null!=d&&d.length&&Digit.UploadServices.Filefetch(d,Digit.ULBService.getStateId()).then(e=>{v(null==e?void 0:e.data)})},[d]);const p=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),m=window.location.href.includes("stakeholder");return t.createElement("div",{style:{marginTop:"19px"}},!m&&(null==o?void 0:o.map((e,n)=>{var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(i.CardSubHeader,{style:p?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l,o;return t.createElement("a",{target:"_",href:null===(l=c[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(i.PDFSvg,null)),t.createElement("p",{style:p?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},u(null==e?void 0:e.title)),r?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?t.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType.split(".")[1])):t.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),m&&(null==o?void 0:o.map((e,n)=>{var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(i.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,t.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l;return t.createElement("a",{target:"_",href:null===(l=c[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},t.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},u(null==e?void 0:e.title)),null!=e&&e.docInfo?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+u(null==e?void 0:e.docInfo)):null,t.createElement(i.PDFSvg,null),t.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+u(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function ha(e){let{taxHeadEstimatesCalculation:n}=e;const{taxHeadEstimates:o}=n,{t:a}=l.useTranslation();return t.createElement("div",{style:{marginTop:"40px"}},t.createElement(i.StatusTable,null,t.createElement(i.Row,{label:a("ES_PT_TITLE_TAX_HEADS"),text:a("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),t.createElement(i.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==o?void 0:o.map((e,n)=>t.createElement(i.Row,{key:a(e.taxHeadCode),label:a(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==o?void 0:o.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})),t.createElement(i.BreakLine,{style:{margin:"16px 0",width:"40%"}}),t.createElement(i.Row,{label:a("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function Oa(e){let{floors:n}=e;const{t:o}=l.useTranslation();return t.createElement(t.Fragment,null,n.map(e=>{var n;return t.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},o(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map((e,n)=>{var l;return t.createElement(t.Fragment,{key:n},t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},o(e.title)),t.createElement(i.StatusTable,{style:{position:"relative",padding:"8px"}},t.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l;return t.createElement(i.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:t.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title),text:o(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function ba(e){let{owners:n}=e,o={};o=window.location.href.includes("/employee/pt/")?n.slice().reverse():n;const{t:a}=l.useTranslation(),r=(null==n?void 0:n.length)||1;let u={marginTop:"19px"},d={position:"relative",padding:"8px"},s={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(r)>1?u={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(r)>1||(u={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},d={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(u={...u,maxWidth:"950px"},u={...u,maxWidth:"950px"},s={}),n.sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}),t.createElement(t.Fragment,null,t.createElement("div",{className:"owner-details"},o.map((e,n)=>{var l;return t.createElement("div",{key:a(null==e?void 0:e.title),style:u,className:"owner-details-child"},t.createElement(i.CardSubHeader,{style:Number(r)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(r)>1?a(null==e?void 0:e.title)+" "+(n+1):a(null==e?void 0:e.title)),t.createElement(t.Fragment,{key:n},t.createElement(i.StatusTable,{style:d},t.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l;return!0===e.map&&"N/A"!==e.value?t.createElement(i.Row,{key:a(e.title),label:a(e.title),text:t.createElement("img",{src:a(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):t.createElement("span",null,t.createElement(i.Row,{key:a(e.title),label:""+a(e.title),text:a(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:s}))}))))})))}const La=e=>{var o,a,r;let{scrutinyDetails:u,paymentsList:d=[]}=e;const{t:s}=l.useTranslation(),c=e=>null!=e&&e.value&&null!=e&&e.isTransLate?t.createElement("span",{style:{color:"#00703C"}},s(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?s(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void s("NA");return t.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},t.createElement(i.StatusTable,null,t.createElement("div",null,null==u||null===(o=u.values)||void 0===o?void 0:o.map((e,n)=>null!=e&&e.isUnit?t.createElement(i.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?c(e)+" "+s(null==e?void 0:e.isUnit):s("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?t.createElement(i.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+s(""+e.title),text:c(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):t.createElement(i.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},s(null==e?void 0:e.title)):t.createElement(i.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},s(null==e?void 0:e.title))),null==u||null===(a=u.permit)||void 0===a?void 0:a.map((e,n)=>t.createElement(i.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title))),t.createElement("div",null,null==u||null===(r=u.scruntinyDetails)||void 0===r?void 0:r.map((e,l)=>t.createElement(n.Fragment,null,t.createElement(i.Row,{className:"border-none",label:""+s(null==e?void 0:e.title),labelStyle:{width:"150%"}}),t.createElement("a",{href:null==e?void 0:e.value}," ",t.createElement(i.PDFSvg,null)," "),t.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},s(null==e?void 0:e.text))))))))},Ra=e=>{var o,a,r,u,d;let{edcrDetails:s,applicationData:c}=e;const{t:v}=l.useTranslation(),p=window.Digit.Utils.browser.isMobile(),m=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],E=e=>{const n=e;return(e,t,l)=>e[n]},S=n.useMemo(()=>m.map(e=>({Header:v(""+e.name),accessor:E(e.id),id:e.id})));function _(e){var n;let t=[];return null==e||null===(n=e.building)||void 0===n||n.floors.map(e=>{var n,l,o,i,a,r,u,d;t.push({Floor:v("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:v(""+(null===(n=e.occupancies)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.type)),BuildupArea:null===(o=e.occupancies)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:v("BPA_FLOOR_NAME_"+e.number)})}),t}function f(e){var n;let t=null==c||null===(n=c.landInfo)||void 0===n?void 0:n.unit,l="";if((null==t?void 0:t.length)>0){var o,i;let n=null===(o=t[e])||void 0===o||null===(i=o.usageCategory)||void 0===i?void 0:i.split(",");null!=n&&n.length&&(l=n.map(e=>e?""+v("BPA_SUBOCCUPANCYTYPE_"+function(e,n,t){if(void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),""==n)return e;for(;e.includes(n);)e=e.replace(n,t);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA").join(", "))}return l||"NA"}return t.createElement(n.Fragment,null,t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},t.createElement(i.StatusTable,null,null==s||null===(o=s.values)||void 0===o?void 0:o.map((e,n)=>null!=e&&e.isHeader?t.createElement(i.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},v(null==e?void 0:e.title)):t.createElement(i.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+v(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),null==s||null===(a=s.subOccupancyTableDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.value)||void 0===u||null===(d=u.planDetail)||void 0===d?void 0:d.blocks.map((e,n)=>{var l,o,a,r,u;return t.createElement("div",{key:n,style:(null==s||null===(l=s.subOccupancyTableDetails)||void 0===l||null===(o=l[0])||void 0===o||null===(a=o.value)||void 0===a||null===(r=a.planDetail)||void 0===r||null===(u=r.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},v("BPA_BLOCK_SUBHEADER")," ",n+1),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+v("BPA_SUB_OCCUPANCY_LABEL"),text:f(n)})),t.createElement("div",{style:window.location.href.includes("citizen")||p?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},t.createElement(i.Table,{className:"customTable table-fixed-first-column table-border-style",t:v,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:_(e),columns:S,getCellProps:e=>({style:{}})})))})))},wa=e=>{let{headComment:n,otherComment:l}=e;return t.createElement("div",{className:"checkpoint-comments-wrap"},t.createElement("h4",null,n),t.createElement("p",null,l))},Wa=e=>{var n,o,a;let{data:r,OpenImage:u,privacy:d={}}=e;const{t:s}=l.useTranslation();return t.createElement("div",null,r.date&&t.createElement("p",null,r.date),t.createElement("p",null,r.name),r.mobileNumber&&t.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},t.createElement(i.TelePhone,{mobile:r.mobileNumber,privacy:d}),t.createElement("p",null,"    ")),r.source&&t.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&t.createElement(wa,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?t.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>t.createElement("div",{className:"TLComments"},t.createElement("h3",null,s("WF_COMMON_COMMENTS")),t.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==r||null===(o=r.thumbnailsToShow)||void 0===o||null===(a=o.thumbs)||void 0===a?void 0:a.length)>0?t.createElement("div",{className:"TLComments"},t.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),t.createElement(i.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,n)=>{u(e,n,null==r?void 0:r.thumbnailsToShow)}})):null)};function Pa(e){let{units:n}=e;const{t:o}=l.useTranslation();return t.createElement(t.Fragment,null,n.map((e,n)=>{var l;return t.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},o(null==e?void 0:e.title)+" "+(n+1)),t.createElement(t.Fragment,{key:n},t.createElement(i.StatusTable,{style:{position:"relative",marginTop:"19px"}},t.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l;return t.createElement(i.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:t.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title)+":",text:o(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function Ma(e){let{units:n}=e;const{t:o}=l.useTranslation();return t.createElement(t.Fragment,null,n.map((e,n)=>{var l;return t.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},t.createElement(i.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},o(null==e?void 0:e.title)+" "+(n+1)),t.createElement(t.Fragment,{key:n},t.createElement(i.StatusTable,{style:{position:"relative",marginTop:"19px"}},t.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,n)=>{var l;return t.createElement(i.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:t.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title)+":",text:o(e.value)||"NA",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}const xa=e=>{var o,a,r,u;let{wsAdditionalDetails:d}=e;const{t:s}=l.useTranslation();let c=m(location.search);const v=null==c?void 0:c.mode;var{connectionDetails:p,plumberDetails:E,roadCuttingDetails:S,activationDetails:_}=(null==d?void 0:d.additionalDetails)||{connectionDetails:[],plumberDetails:[]};return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==d||null===(o=d.additionalDetails)||void 0===o?void 0:o.connectionDetails)&&t.createElement(i.StatusTable,null,t.createElement(i.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),t.createElement("div",null,t.createElement("div",{className:"connection-details-new-value-wrapper"},null==p?void 0:p.map((e,n)=>t.createElement("div",null,t.createElement(i.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))),(null==d||null===(a=d.additionalDetails)||void 0===a?void 0:a.plumberDetails)&&"MODIFY"!=v&&t.createElement(i.StatusTable,null,t.createElement(i.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map((e,n)=>t.createElement(i.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy}))))),(null==d||null===(r=d.additionalDetails)||void 0===r?void 0:r.roadCuttingDetails)&&"MODIFY"!=v&&t.createElement(i.StatusTable,null,t.createElement(i.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==S?void 0:S.map(e=>{var n;return t.createElement("div",{style:(null==S?void 0:S.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(e=>t.createElement(i.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))})))),(null==d||null===(u=d.additionalDetails)||void 0===u?void 0:u.activationDetails)&&t.createElement(i.StatusTable,null,t.createElement(i.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map((e,n)=>t.createElement(i.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))))},Ba=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],Fa=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],Ua=e=>{var o,a,r,u;let{wsAdditionalDetails:d}=e;const{t:s}=l.useTranslation(),[c,v,p]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[m,E,S]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),f=!(null==d||null===(o=d.additionalDetails)||void 0===o||!o.isPaid),[C,g]=n.useState(!1),[N,y]=n.useState(c||{}),[T,D]=n.useState(null),[A,I]=n.useState(d.additionalDetails.data?d.additionalDetails.data:{}),[h,O]=n.useState(d.additionalDetails.values?d.additionalDetails.values:[]),b=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(b,"BillingService",["TaxHeadMaster"]),n.useEffect(()=>{var e,n,l;const o={...null==d||null===(e=d.additionalDetails)||void 0===e||null===(n=e.appDetails)||void 0===n?void 0:n.additionalDetails};if((null==c||null===(l=c.billDetails)||void 0===l?void 0:l.length)>0){var i,a,r,u,s,p,m;const e=[{title:"WS_APPLICATION_FEE_HEADER",value:t.createElement("span",null,"₹",null==c||null===(i=c.billDetails)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.fee)},{title:"WS_SERVICE_FEE_HEADER",value:t.createElement("span",null,"₹",null==c||null===(r=c.billDetails)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.charge)},{title:"WS_TAX_HEADER",value:t.createElement("span",null,"₹",null==c||null===(s=c.billDetails)||void 0===s||null===(p=s[0])||void 0===p?void 0:p.taxAmount)}];O(e),I(null==c||null===(m=c.billDetails)||void 0===m?void 0:m[0])}else v(o),y(o)},[]);let L={};const R=e=>t.createElement("h1",{className:"heading-m"},e.label),w=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),W=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(w,null)),P=function(e,n,t){void 0===n&&(n=!1);let l={...N};if("adhocPenalty"!=e&&"adhocRebate"!=e||!t.target.value)n?(l[e+"_data"]=t,l[e]=t.title,"PT_OTHERS"==t.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==t.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=t.target.value;else{var o,i;const n=0==(null==t||null===(o=t.target)||void 0===o?void 0:o.value)?1:Math.sign(null==t||null===(i=t.target)||void 0===i?void 0:i.value)||-1;l[e]=1==n?t.target.value:""}y(l)};return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},h&&t.createElement(i.StatusTable,null,t.createElement("div",null,null==h?void 0:h.map((e,n)=>t.createElement(i.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),t.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),t.createElement("div",null,t.createElement(i.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+s("WS_COMMON_TOTAL_AMT"),text:t.createElement("span",null,"₹",(null==A?void 0:A.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),t.createElement(i.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+s("CS_INBOX_STATUS_FILTER"),text:s(f?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:f?{color:"#00703C"}:{color:"#D4351C"}}))),null!=d&&null!==(a=d.additionalDetails)&&void 0!==a&&a.isAdhocRebate?t.createElement("div",{onClick:e=>{g(!0)}},t.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},s("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,C&&t.createElement(i.Modal,{headerBarMain:t.createElement(R,{label:s("PT_ADD_REBATE_PENALITY")}),headerBarEnd:t.createElement(W,{onClick:()=>{y(c),g(!1)}}),actionCancelLabel:s("PT_CANCEL"),actionCancelOnSubmit:()=>{y(c),g(!1)},actionSaveLabel:s("PT_ADD"),actionSaveOnSubmit:e=>(e=>{const n=null!=N&&N.adhocPenalty?Number(null==N?void 0:N.adhocPenalty):0,t=null!=N&&N.adhocRebate?Number(null==N?void 0:N.adhocRebate):0;var l,o;if(n||t)if(t>(null==d||null===(l=d.additionalDetails)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.totalAmount))D({isError:!1,isWarning:!0,key:"error",message:s("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var i,a,r,u,c,p,m,S,f,C;const e=null==d||null===(i=d.additionalDetails)||void 0===i||null===(a=i.appDetails)||void 0===a?void 0:a.applicationNo,n=null==d||null===(r=d.additionalDetails)||void 0===r||null===(u=r.appDetails)||void 0===u?void 0:u.tenantId,t={...null==d||null===(c=d.additionalDetails)||void 0===c||null===(p=c.appDetails)||void 0===p?void 0:p.additionalDetails,...N};d.additionalDetails.appDetails.additionalDetails=t;const l={CalculationCriteria:"WATER"==(null==d||null===(m=d.additionalDetails)||void 0===m||null===(S=m.appDetails)||void 0===S?void 0:S.service)?[{applicationNo:e,tenantId:n,waterConnection:d.additionalDetails.appDetails}]:[{applicationNo:e,tenantId:n,sewerageConnection:d.additionalDetails.appDetails}],isconnectionCalculation:!1};let o="WATER"==(null==d||null===(f=d.additionalDetails)||void 0===f||null===(C=f.appDetails)||void 0===C?void 0:C.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(l,o).then((e,n)=>{var t,l,o,i,a,r,u,d,s,c,p,m,S,f,C;(null==e||null===(t=e.Calculation)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.taxHeadEstimates)||void 0===o?void 0:o.length)>0&&(null==e||null===(S=e.Calculation)||void 0===S||null===(f=S[0])||void 0===f||null===(C=f.taxHeadEstimates)||void 0===C||C.forEach(e=>e.amount=e.estimateAmount)),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(i=e.Calculation)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.taxHeadEstimates,"category");const y=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(r=e.Calculation)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(d=e.Calculation)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.charge},{title:"WS_TAX_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.taxAmount}];E(ht(e.Calculation[0])),I(null==e||null===(m=e.Calculation)||void 0===m?void 0:m[0]),O(y),N.billDetails=null==e?void 0:e.Calculation,v(N),g(!1)}).catch(e=>{var n,t,l,o,i,a;D({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&null!==(l=t.Errors[0])&&void 0!==l&&l.message?s(""+(null==e||null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i||null===(a=i.Errors[0])||void 0===a?void 0:a.code)):s("PT_COMMON_ADD_REBATE_PENALITY")})})}else D({isError:!1,isWarning:!0,key:"warning",message:s("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})})(),hideSubmit:!1,popupStyles:{overflowY:"auto"}},t.createElement("div",null,t.createElement(i.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},t.createElement(i.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_PENALTY")),t.createElement(i.CardLabel,null,s("PT_TX_HEADS")),t.createElement("div",{className:"field"},t.createElement(i.Dropdown,{isMandatory:!0,option:Ba,optionKey:"title",select:e=>P("adhocPenaltyReason",!0,e),selected:(null==N?void 0:N.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:s})),"PT_OTHERS"===(null==N||null===(r=N.adhocPenaltyReason_data)||void 0===r?void 0:r.title)&&t.createElement("div",{className:"field"},t.createElement(i.CardLabel,null,s("PT_REASON")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,H({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==N?void 0:N.adhocPenaltyComment)||"",onChange:e=>P("adhocPenaltyComment",!1,e)},L={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")})))),t.createElement(i.CardLabel,null,s("PT_HEAD_AMT")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,H({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==N?void 0:N.adhocPenalty)||"",onChange:e=>P("adhocPenalty",!1,e)},L={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))),t.createElement(i.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},t.createElement(i.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_REBATE")),t.createElement(i.CardLabel,null,s("PT_TX_HEADS")),t.createElement("div",{className:"field"},t.createElement(i.Dropdown,{isMandatory:!0,option:Fa,optionKey:"title",select:e=>P("adhocRebateReason",!0,e),selected:(null==N?void 0:N.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:s})),"PT_OTHERS"===(null==N||null===(u=N.adhocRebateReason_data)||void 0===u?void 0:u.title)&&t.createElement("div",{className:"field"},t.createElement(i.CardLabel,null,s("PT_REASON")),t.createElement(i.TextInput,H({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==N?void 0:N.adhocRebateComment)||"",onChange:e=>P("adhocRebateComment",!1,e)},L={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")}))),t.createElement(i.CardLabel,null,s("PT_HEAD_AMT")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,H({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==N?void 0:N.adhocRebate)||"",onChange:e=>P("adhocRebate",!1,e)},L={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),T&&t.createElement(i.Toast,{style:{zIndex:"10000"},warning:null==T?void 0:T.isWarning,error:null==T||!T.isWarning,label:s(null==T?void 0:T.message),onClose:()=>{D(!1)},isDleteBtn:!0})))},ka=e=>{let{style:n}=e;return t.createElement("span",null,t.createElement("svg",{style:{...n},display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},Ha=e=>{let{t:n,userType:l=!1,infoBannerLabel:o="",infoClickLable:a="",infoClickInfoLabel:r="",infoClickInfoLabel1:u=""}=e;l=l||Digit.SessionStorage.get("userType");const d=window.Digit.Utils.browser.isMobile();return t.createElement(t.Fragment,null,t.createElement("div",{style:d?{}:{width:"80%"}},t.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},t.createElement("div",null,t.createElement(i.InfoBannerIcon,null),t.createElement("h2",{style:{color:"#3498DB"}},n(o))),n(a)+" ",t.createElement(ka,{style:{display:"inline",marginBottom:"5px"}})," "+n(r),t.createElement("div",null," "+n(u)))))},ja=e=>{var o,a,r,u,d,s,c;let{wsAdditionalDetails:v}=e;const{t:p}=l.useTranslation(),[m,E]=n.useState(!1),[S,_]=n.useState({}),f=e=>t.createElement("h1",{className:"heading-m"},e.label),C=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),g=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(C,null));return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=v&&null!==(o=v.additionalDetails)&&void 0!==o&&o.isViewBreakup?t.createElement("div",{onClick:e=>(()=>{var e;let n=v.additionalDetails.data||{};const t=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"),l=t?JSON.parse(t):{};null!=l&&null!==(e=l.value)&&void 0!==e&&e.totalAmount&&(n=null==l?void 0:l.value),_(n),E(!0)})(),style:{marginTop:"12px"}},t.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},p("WS_PAYMENT_VIEW_BREAKUP"))):null,m&&t.createElement(i.Modal,{headerBarMain:t.createElement(f,{label:p("WS_CALCULATION_BREAKUP")}),headerBarEnd:t.createElement(g,{onClick:()=>{E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},t.createElement(i.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},t.createElement(i.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_APPLICATION_FEE_HEADER")),null==S||null===(a=S.billSlabData)||void 0===a||null===(r=a.FEE)||void 0===r?void 0:r.map(e=>t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==S?void 0:S.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),t.createElement(i.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_SERVICE_FEE_HEADER")),null==S||null===(u=S.billSlabData)||void 0===u||null===(d=u.CHARGES)||void 0===d?void 0:d.map(e=>t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==S?void 0:S.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==S||null===(s=S.billSlabData)||void 0===s||null===(c=s.TAX)||void 0===c?void 0:c.map(e=>t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(i.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==S?void 0:S.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))},za={root:{width:"100%",marginTop:"2px",overflowX:"auto",boxShadow:"none"},table:{minWidth:700,backgroundColor:"rgba(250, 250, 250, var(--bg-opacity))"},cell:{maxWidth:"7em",minWidth:"1em",border:"1px solid #e8e7e6",padding:"4px 5px",fontSize:"0.8em",textAlign:"left",lineHeight:"1.5em"},cellHeader:{overflow:"hidden",textOverflow:"ellipsis"},cellLeft:{},cellRight:{}},Va=e=>{let{className:n="table",headers:o=[],values:i=[],arrears:a=0}=e;const{t:r}=l.useTranslation();return t.createElement(t.Fragment,null,t.createElement("div",{style:za.root},t.createElement("table",{className:"table-fixed-column-common-pay",style:za.table},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{...za.cell,...za.cellLeft,...za.cellHeader}},r("CS_BILL_PERIOD")),o.map((e,n)=>t.createElement("th",{style:{...za.cell,...o.length==n+1?za.cellRight:{},...za.cellHeader},key:n},r(e))))),t.createElement("tbody",null,Object.values(i).map((e,n)=>t.createElement("tr",{key:n},t.createElement("td",{style:{...za.cell,...za.cellLeft},component:"th",scope:"row"},Object.keys(i)[n]),o.map((n,l)=>t.createElement("td",{style:{...za.cell,textAlign:"left",...o.length==l+1?za.cellRight:{},whiteSpace:"pre"},key:l,numeric:!0},l>1&&"₹",e[n]&&e[n].value||"0")))),t.createElement("tr",null,t.createElement("td",{style:{...za.cell,...za.cellLeft}}),o.map((e,n)=>n==o.length-1?t.createElement("td",{style:{...za.cell,...za.cellRight,textAlign:"left",fontWeight:"700",whiteSpace:"pre"},key:n,numeric:!0},a):n==o.length-2?t.createElement("td",{style:{...za.cell,textAlign:"left"},key:n,numeric:!0},r("COMMON_ARREARS_TOTAL")):t.createElement("td",{style:za.cell,key:n,numeric:!0})))))))},Ya={buttonStyle:{display:"flex",justifyContent:"flex-end",color:"#a82227"},headerStyle:{marginTop:"10px",fontSize:"16px",fontWeight:"700",lineHeight:"24px",color:" rgba(11, 12, 12, var(--text-opacity))"}},Ga=e=>{var o,i,a;let{bill:r={}}=e;const{t:u}=l.useTranslation();let d={},s=(null==r||null===(o=r.billDetails)||void 0===o?void 0:o.sort((e,n)=>n.fromPeriod-e.fromPeriod))||[];s=[...s];const c=(null===(i=s)||void 0===i?void 0:i.reduce((e,n,t)=>0===t?e:e+n.amount,0))||0;let v="₹ "+((null==c||null===(a=c.toFixed)||void 0===a?void 0:a.call(c,0))||Number(0).toFixed(0));s.shift(),s.map(e=>{let n=function(e){var n,t,l;void 0===e&&(e={});let o={};const{billAccountDetails:i=[]}=e;return i.map(e=>{o[e.taxHeadCode]={value:e.amount,order:e.order}}),o.CS_BILL_NO={value:(null===(n=e)||void 0===n?void 0:n.billNumber)||"NA",order:-2},o.CS_BILL_DUEDATE={value:(null===(t=e)||void 0===t?void 0:t.expiryDate)&&new Date(null===(l=e)||void 0===l?void 0:l.expiryDate).toLocaleDateString()||"NA",order:-1},o.TL_COMMON_TOTAL_AMT={value:e.amount,order:10},o}(e);d[((e,n)=>{const t=new Date(e),l=new Date(n);return l.getYear()-t.getYear()!=0?"FY"+(t.getYear()+1900)+"-"+(l.getYear()-100):t.toLocaleDateString()+"-"+l.toLocaleDateString()})(e.fromPeriod,e.toPeriod)]=n});let p={};!d||Object.keys(d).map((e,n)=>{Object.keys(d[e]).map(n=>{p[n]=d[e]&&d[e][n]&&d[e][n].order||0})});let m=[];m=Object.keys(p),m.sort((e,n)=>p[e]-p[n]);const[E,S]=n.useState(!1);return 0==c||c<0?t.createElement("span",null):t.createElement(t.Fragment,null,t.createElement("div",{style:Ya.headerStyle},u("CS_ARREARS_DETAILS")),E&&t.createElement(Va,{headers:[...m],values:d,arrears:v}),!E&&t.createElement("div",{style:Ya.buttonStyle},t.createElement("button",{type:"button",onClick:()=>{S(!0)}},u("CS_SHOW_CARD"))),E&&t.createElement("div",{style:Ya.buttonStyle},t.createElement("button",{type:"button",onClick:()=>{S(!1)}},u("CS_HIDE_CARD"))))};function qa(e){var a,r,u,d,s,c,v,p,m,E,S,f,C;let{applicationDetails:g,workflowDetails:N,isDataLoading:y,applicationData:T,timelineStatusPrefix:D,showTimeLine:A=!0,statusAttribute:I="status",paymentsList:h,oldValue:O,isInfoLabel:b=!1}=e;const{t:L}=l.useTranslation();function R(e,n,t){var l;window.open(null==t||null===(l=t.fullImage)||void 0===l?void 0:l[0],"_blank")}console.log("appl",g);const[w,W]=n.useState({}),[P,M]=n.useState({loading:!1,loaded:!1,canLoad:!1});"ACTIVE"!=(null==T?void 0:T.status)||P.loading||P.loaded||P.canLoad||M({loading:!1,loaded:!1,canLoad:!0}),null==P||!P.canLoad||P.loading||P.loaded||(M({loading:!0,loaded:!1,canLoad:!0}),function(e,n,t,l){try{Promise.resolve(Digit.PTService.assessmentSearch({tenantId:e,filters:{propertyIds:n}})).then(function(o){function i(){t(a),l({loading:!1,loaded:!0,canLoad:!0})}let a={};const r=function(t){if((null==o||null===(t=o.Assessments)||void 0===t?void 0:t.length)>0)return Promise.resolve(Digit.PaymentService.fetchBill(e,{businessService:"PT",consumerCode:n})).then(function(e){a=e})}();return r&&r.then?r.then(i):i()})}catch(e){return Promise.reject(e)}}((null==T?void 0:T.tenantId)||tenantId,null==T?void 0:T.propertyId,W,M));const x=e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()},B=function(e,n){if(void 0===n&&(n=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var l;const e={date:x(null==T||null===(l=T.auditDetails)||void 0===l?void 0:l.createdTime),source:(null==T?void 0:T.channel)||""};return t.createElement(Wa,{data:e})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var o,i,a,r,u,d,s,c,v,p,m,E,S,f,C,N,y,D;const l={uuid:null==e||null===(o=e.assignes)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==g?void 0:g.tenantId,businessIds:null==g?void 0:g.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:e=>{let t="";return t="+91 "+_.get(e,"ProcessInstances["+n+"].assignes[0].mobileNumber"),t}}},A={date:null==e||null===(a=e.auditDetails)||void 0===a?void 0:a.lastModified,name:null==e||null===(r=e.assignes)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.name,mobileNumber:(null==T||null===(d=T.processInstance)||void 0===d||null===(s=d.assignes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.uuid)===(null==e||null===(v=e.assignes)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.uuid)&&null!=T&&null!==(m=T.processInstance)&&void 0!==m&&null!==(E=m.assignes)&&void 0!==E&&null!==(S=E[0])&&void 0!==S&&S.mobileNumber?null==T||null===(f=T.processInstance)||void 0===f||null===(C=f.assignes)||void 0===C||null===(N=C[0])||void 0===N?void 0:N.mobileNumber:null==e||null===(y=e.assignes)||void 0===y||null===(D=y[0])||void 0===D?void 0:D.mobileNumber,comment:L(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return t.createElement(Wa,{data:A,OpenImage:R,privacy:l})}{var A,I,h,O,b;const n={date:null==e||null===(A=e.auditDetails)||void 0===A?void 0:A.lastModified,name:null==e||null===(I=e.assignes)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(O=e.assignes)||void 0===O||null===(b=O[0])||void 0===b?void 0:b.mobileNumber};return t.createElement(Wa,{data:n})}},F=(e,n)=>e?n?e:L(e):L("NA"),U=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),k=window.location.href.includes("employee/noc"),H=window.location.href.includes("employee/obps"),j=(window.location.href.includes("employee/ws"),()=>window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||U?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}),z=e=>null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?F(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+L(null==e?void 0:e.isUnit):L("N/A"):null!=e&&e.value?F(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):L("N/A"),[V,Y]=n.useState(!1);return t.createElement(i.Card,{style:{position:"relative"},className:"employeeCard-override"},b?t.createElement(Ha,{t:L,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==g||null===(a=g.applicationDetails)||void 0===a?void 0:a.map((e,l)=>{var a,r,u,d,s,c,v,p,m,E,S,_,f,C,y,T,D,A,I,b,R,W,P,M,x,B,F,V,Y,G,q,K,X,$,Z,J,Q,ee,ne;return t.createElement(t.Fragment,{key:l},t.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:U?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==l||e.asSectionHeader?t.createElement(t.Fragment,null,t.createElement(i.CardSectionHeader,{style:0==l&&U?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},k?""+L(e.title):L(e.title),null!=e&&e.Component?t.createElement(e.Component,null):null)):t.createElement(i.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},L(e.title)),(null==e?void 0:e.isTable)&&t.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},t.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(e=>t.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},L(e)))),null==e?void 0:e.tableRows.map((l,o)=>o===(null==e?void 0:e.tableRows.length)-1?t.createElement(n.Fragment,null,t.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),t.createElement("tr",null,l.map(e=>t.createElement("td",{style:{textAlign:"left"}},L(e))))):t.createElement("tr",null,l.map(e=>t.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},L(e)))))),t.createElement(i.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||U?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(a=e.values)||void 0===a?void 0:a.map((n,l)=>{var a,r,u;return!0===n.map&&"N/A"!==n.value?t.createElement(i.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:L(n.title),label:L(n.title),text:t.createElement("img",{src:L(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?t.createElement(i.Row,{key:L(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?t.createElement("div",{style:{width:"200%"}},t.createElement(o.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#a82227"}},L(null==n?void 0:n.title)))):k||H?""+L(n.title):L(n.title),text:t.createElement("div",null,t.createElement(o.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:l===(null==e||null===(u=e.values)||void 0===u?void 0:u.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:j(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):t.createElement("div",null,window.location.href.includes("modify")?t.createElement(i.Row,{className:"border-none",key:""+n.title,label:""+L(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):t.createElement(i.Row,{key:L(n.title),label:L(n.title),text:z(n),last:l===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:j(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}),"PT_TOTAL_DUES"===n.title?t.createElement(Ga,{bill:null===(r=w.Bill)||void 0===r?void 0:r[0]}):"")})))),(null==e?void 0:e.belowComponent)&&t.createElement(e.belowComponent,null),(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.inspectionReport)&&t.createElement(La,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:h}),(null==g||null===(u=g.applicationData)||void 0===u||null===(d=u.additionalDetails)||void 0===d||null===(s=d.fieldinspection_pending)||void 0===s?void 0:s.length)>0&&(null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.fiReport)&&t.createElement(ya,{fiReport:null==g||null===(v=g.applicationData)||void 0===v||null===(p=v.additionalDetails)||void 0===p?void 0:p.fieldinspection_pending}),(null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.floors)&&t.createElement(Oa,{floors:null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.floors}),(null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.owners)&&t.createElement(ba,{owners:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners}),(null==e||null===(f=e.additionalDetails)||void 0===f?void 0:f.units)&&t.createElement(Ma,{units:null==e||null===(C=e.additionalDetails)||void 0===C?void 0:C.units}),(null==e||null===(y=e.additionalDetails)||void 0===y?void 0:y.accessories)&&t.createElement(Pa,{units:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.accessories}),(null==e||null===(D=e.additionalDetails)||void 0===D?void 0:D.permissions)&&(null==N||null===(A=N.data)||void 0===A||null===(I=A.nextActions)||void 0===I?void 0:I.length)>0&&t.createElement(Aa,{applicationData:null==g?void 0:g.applicationData,t:L,permissions:null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.permissions}),(null==e||null===(R=e.additionalDetails)||void 0===R?void 0:R.obpsDocuments)&&t.createElement(ga,{t:L,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:N}),(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.noc)&&t.createElement(Da,{t:L,isNoc:!0,NOCdata:e.values,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.noc,noc:null===(P=e.additionalDetails)||void 0===P?void 0:P.data,bpaActionsDetails:N}),(null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.scruntinyDetails)&&t.createElement(La,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.buildingExtractionDetails)&&t.createElement(La,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(B=e.additionalDetails)||void 0===B?void 0:B.subOccupancyTableDetails)&&t.createElement(Ra,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==g?void 0:g.applicationData}),(null==e||null===(F=e.additionalDetails)||void 0===F?void 0:F.documentsWithUrl)&&t.createElement(Ca,{documents:null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.documentsWithUrl}),(null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.documents)&&t.createElement(Ia,{documents:null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.documents}),(null==e||null===(q=e.additionalDetails)||void 0===q?void 0:q.taxHeadEstimatesCalculation)&&t.createElement(ha,{taxHeadEstimatesCalculation:null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&t.createElement(xa,{wsAdditionalDetails:e,oldValue:O}),(null==e||null===(X=e.additionalDetails)||void 0===X?void 0:X.redirectUrl)&&t.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},t.createElement(o.Link,{to:null==e||null===($=e.additionalDetails)||void 0===$||null===(Z=$.redirectUrl)||void 0===Z?void 0:Z.url},t.createElement("span",{className:"link",style:{color:"#a82227"}},null==e||null===(J=e.additionalDetails)||void 0===J||null===(Q=J.redirectUrl)||void 0===Q?void 0:Q.title))),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&t.createElement(Ua,{wsAdditionalDetails:e,workflowDetails:N}),(null==e||null===(ne=e.additionalDetails)||void 0===ne?void 0:ne.estimationDetails)&&t.createElement(ja,{wsAdditionalDetails:e,workflowDetails:N}))}),A&&(null==N||null===(r=N.data)||void 0===r||null===(u=r.timeline)||void 0===u?void 0:u.length)>0&&t.createElement(t.Fragment,null,t.createElement(i.BreakLine,null),((null==N?void 0:N.isLoading)||y)&&t.createElement(i.Loader,null),!(null!=N&&N.isLoading)&&!y&&t.createElement(n.Fragment,null,t.createElement("div",{id:"timeline"},t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},L("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=N&&null!==(d=N.data)&&void 0!==d&&d.timeline&&1===(null==N||null===(s=N.data)||void 0===s||null===(c=s.timeline)||void 0===c?void 0:c.length)?t.createElement(i.CheckPoint,{isCompleted:!0,label:L(""+D+(null==N||null===(v=N.data)||void 0===v||null===(p=v.timeline[0])||void 0===p?void 0:p.state)),customChild:B(null==N||null===(m=N.data)||void 0===m?void 0:m.timeline[0])}):t.createElement(i.ConnectingCheckPoints,null,(null==N||null===(E=N.data)||void 0===E?void 0:E.timeline)&&(null==N||null===(S=N.data)||void 0===S?void 0:S.timeline.slice(0,V?null==N?void 0:N.data.timeline.length:2).map((e,n,l)=>{let o="";var a,r,u,d,s,c;return window.location.href.includes("/obps/")&&(o=null!=N&&null!==(a=N.data)&&void 0!==a&&null!==(r=a.timeline[n-1])&&void 0!==r&&null!==(u=r.state)&&void 0!==u&&u.includes("BACK_FROM")||null!=N&&null!==(d=N.data)&&void 0!==d&&null!==(s=d.timeline[n-1])&&void 0!==s&&null!==(c=s.state)&&void 0!==c&&c.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),t.createElement(t.Fragment,{key:n},t.createElement(i.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:L(""+D+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[I])+o),customChild:B(e,n)}))}))),(null==N||null===(f=N.data)||void 0===f||null===(C=f.timeline)||void 0===C?void 0:C.length)>2&&t.createElement(i.LinkButton,{label:L(V?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{Y(e=>!e)}})))))}function Ka(e){var n,l,o,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g;let{t:N,showToast:y,closeToast:T,businessService:D}=e;if(null!=D&&D.includes("NewTL")||null!=D&&D.includes("TL")||null!=D&&D.includes("EDITRENEWAL")){var A;let e="";switch(null==y||null===(A=y.action)||void 0===A?void 0:A.action){case"SENDBACK":e="error"===(null==y?void 0:y.key)?null==y||null===(n=y.error)||void 0===n?void 0:n.message:N("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":e="error"===(null==y?void 0:y.key)?null==y||null===(l=y.error)||void 0===l?void 0:l.message:N("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":e="error"===(null==y?void 0:y.key)?null==y||null===(o=y.error)||void 0===o?void 0:o.message:N("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":e="error"===(null==y?void 0:y.key)?null==y||null===(a=y.error)||void 0===a?void 0:a.message:N("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":e="error"===(null==y?void 0:y.key)?null==y||null===(r=y.error)||void 0===r?void 0:r.message:N("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":e="error"===(null==y?void 0:y.key)?null==y||null===(u=y.error)||void 0===u?void 0:u.message:N("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":e="error"===(null==y?void 0:y.key)?null==y||null===(d=y.error)||void 0===d?void 0:d.message:N("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:e="error"===(null==y?void 0:y.key)?null==y||null===(s=y.error)||void 0===s?void 0:s.message:N("ES_"+D+"_"+(null==y||null===(c=y.action)||void 0===c?void 0:c.action)+"_UPDATE_SUCCESS")}return t.createElement(t.Fragment,null,y&&t.createElement(i.Toast,{error:"error"===y.key,label:e,onClose:T}))}if(null!=D&&D.includes("BPA")||null!=D&&D.includes("BPA_LOW")||null!=D&&D.includes("BPA_OC")){var I;const e=function(e){var n;void 0===e&&(e=[]);let t=e[0];return t=2==(null===(n=e)||void 0===n?void 0:n.length)&&null!=D&&D.includes("BPA_OC")?N(e[1]):N(e[0]),t};let n="";switch(null==y||null===(I=y.action)||void 0===I?void 0:I.action){case"REVOCATE":n="error"===(null==y?void 0:y.key)?null==y||null===(v=y.error)||void 0===v?void 0:v.message:e(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":n="error"===(null==y?void 0:y.key)?null==y||null===(p=y.error)||void 0===p?void 0:p.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":n="error"===(null==y?void 0:y.key)?null==y||null===(m=y.error)||void 0===m?void 0:m.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":n="error"===(null==y?void 0:y.key)?null==y||null===(E=y.error)||void 0===E?void 0:E.message:e(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":n="error"===(null==y?void 0:y.key)?null==y||null===(S=y.error)||void 0===S?void 0:S.message:e(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":n="error"===(null==y?void 0:y.key)?null==y||null===(_=y.error)||void 0===_?void 0:_.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":n="error"===(null==y?void 0:y.key)?null==y||null===(f=y.error)||void 0===f?void 0:f.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:n="error"===(null==y?void 0:y.key)?null==y||null===(C=y.error)||void 0===C?void 0:C.message:N("ES_"+D+"_"+(null==y||null===(g=y.action)||void 0===g?void 0:g.action)+"_UPDATE_SUCCESS")}return t.createElement(t.Fragment,null,y&&t.createElement(i.Toast,{error:"error"===y.key,label:n,onClose:T}))}{var h,O;const e="error"===(null==y?void 0:y.key)?null==y||null===(h=y.error)||void 0===h?void 0:h.message:"ES_"+D+"_"+(null==y||null===(O=y.action)||void 0===O?void 0:O.action)+"_UPDATE_SUCCESS";return t.createElement(t.Fragment,null,y&&t.createElement(i.Toast,{error:"error"===y.key,label:N(e),onClose:T}))}}function Xa(e){var o,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g;let{workflowDetails:N,displayMenu:y,onActionSelect:T,setDisplayMenu:D,businessService:A,forcedActionPrefix:I,ActionBarStyle:h={},MenuStyle:O={}}=e;const{t:b}=l.useTranslation();let L=Digit.UserService.getUser();const R=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){const e=sessionStorage.getItem("Digit.citizen.userRequestObject"),n=e?JSON.parse(e):{};L=null==n?void 0:n.value}const w=null===(o=L)||void 0===o||null===(a=o.info)||void 0===a||null===(r=a.roles)||void 0===r?void 0:r.map(e=>e.code);let W=!1,P=!1,M=(null==N||null===(u=N.data)||void 0===u||null===(d=u.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s?void 0:s.filter(e=>(null==w?void 0:w.some(n=>{var t;return null===(t=e.roles)||void 0===t?void 0:t.includes(n)}))||!e.roles))||(null==N||null===(c=N.data)||void 0===c||null===(v=c.nextActions)||void 0===v?void 0:v.filter(e=>(null==w?void 0:w.some(n=>{var t;return null===(t=e.roles)||void 0===t?void 0:t.includes(n)}))||!e.roles));return Digit.Hooks.useClickOutside(R,()=>{D(!1)},y),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==M?void 0:M.length)||null!=M&&null!==(p=M[0])&&void 0!==p&&null!==(m=p.redirectionUrl)&&void 0!==m&&m.pathname.includes("/pt/property-details/")&&1==(null==M?void 0:M.length)?(P=!1,W=!0):(null==M?void 0:M.length)>0&&(P=!0,W=!1),t.createElement(t.Fragment,null,!(null!=N&&N.isLoading)&&P&&!W&&t.createElement(i.ActionBar,{style:{...h}},y&&(null!=N&&null!==(E=N.data)&&void 0!==E&&null!==(S=E.actionState)&&void 0!==S&&S.nextActions||null!=N&&null!==(_=N.data)&&void 0!==_&&_.nextActions)?t.createElement(i.Menu,{localeKeyPrefix:I||"WF_EMPLOYEE_"+(null==A?void 0:A.toUpperCase()),options:M,optionKey:"action",t:b,onSelect:T,style:O}):null,t.createElement(i.SubmitBar,{ref:R,label:b("WF_TAKE_ACTION"),onSubmit:()=>D(!y)})),!(null!=N&&N.isLoading)&&!P&&W&&t.createElement(i.ActionBar,{style:{...h}},t.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==M||null===(f=M[0])||void 0===f?void 0:f.action,value:null==M||null===(C=M[0])||void 0===C?void 0:C.action,onClick:e=>{T((null==M?void 0:M[0])||{})}},b((I||"WF_EMPLOYEE_"+(null==A?void 0:A.toUpperCase()))+"_"+(null==M||null===(g=M[0])||void 0===g?void 0:g.action)))))}const $a=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Za=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement($a,null));function Ja(e){let{action:n,closeWarningPopup:o}=e;const{t:a}=l.useTranslation(),r=window.Digit.Utils.browser.isMobile();return t.createElement(t.Fragment,null,t.createElement(i.Modal,{headerBarMain:t.createElement("h1",{className:"heading-m"},a("PT_DUES_ARE_PENDING")),headerBarEnd:t.createElement(Za,{onClick:()=>{o()}}),hideSubmit:!0,isDisabled:!1,popupStyles:r?{}:{width:"29%",marginTop:"auto"}},t.createElement(i.Card,null,t.createElement("div",{style:{marginBottom:"30px"}},t.createElement("h1",null,a("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",a("PT_DUE_WARNING_MSG2"))),t.createElement(i.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+a("PT_AMOUNT_DUE"),text:"₹"+a(null==n?void 0:n.AmountDueForPay)}),t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(i.ButtonSelector,{theme:"border",label:a("ES_PT_COMMON_CANCEL"),onSubmit:o,style:{marginLeft:"10px"}}),t.createElement(i.ButtonSelector,{label:a("PT_COLLECT"),onSubmit:()=>{var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}const Qa=e=>{var a;const r=Digit.ULBService.getCurrentTenantId(),d=Digit.ULBService.getStateId(),{t:s}=l.useTranslation(),c=o.useHistory();let{id:v}=o.useParams();const[p,m]=n.useState(!1),[E,S]=n.useState(null),[_,f]=n.useState(!1),[C,g]=n.useState(!1),[N,y]=n.useState(!1),{applicationDetails:T,showToast:D,setShowToast:A,isLoading:I,isDataLoading:h,applicationData:O,mutate:b,nocMutation:L,workflowDetails:R,id:w,businessService:W,closeToast:P,moduleCode:M,timelineStatusPrefix:x,forcedActionPrefix:B,statusAttribute:F,ActionBarStyle:U,MenuStyle:k,paymentsList:H,showTimeLine:j=!0,oldValue:z,isInfoLabel:V=!1,clearDataDetails:Y}=e;n.useEffect(()=>{D&&R.revalidate()},[D]);const G=u.useQueryClient(),q=()=>{S(null),f(!1)};return I||C?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,I?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(qa,{applicationDetails:T,id:w,workflowDetails:R,isDataLoading:h,applicationData:O,businessService:W,timelineStatusPrefix:x,statusAttribute:F,paymentsList:H,showTimeLine:j,oldValue:z,isInfoLabel:V}),_?t.createElement(fa,{t:s,action:E,tenantId:r,state:d,id:v,applicationDetails:T,applicationData:null==T?void 0:T.applicationData,closeModal:q,submitAction:function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t={});try{let l=!1;const o=function(o,i,a,r,u,d,v,p,m,S,_,f){if(0!=(null==e||null===(o=e.Property)||void 0===o||null===(i=o.workflow)||void 0===i||null===(a=i.comment)||void 0===a?void 0:a.length)&&0!=(null==e||null===(r=e.Licenses)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.comment)||void 0===d?void 0:d.length)&&0!=(null==e||null===(v=e.WaterConnection)||void 0===v||null===(p=v.comment)||void 0===p?void 0:p.length)&&0!=(null==e||null===(m=e.SewerageConnection)||void 0===m||null===(S=m.comment)||void 0===S?void 0:S.length)&&0!=(null==e||null===(_=e.BPA)||void 0===_||null===(f=_.comment)||void 0===f?void 0:f.length)){function C(n){if(l)return n;b&&(g(!0),b(e,{onError:(e,n)=>{g(!1),A({key:"error",error:e}),setTimeout(P,5e3)},onSuccess:(e,n)=>{var l,o,i,a,r,u,d,v,p,m,S,_;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),g(!1),null!==(l=t)&&void 0!==l&&l.bpa&&(e.selectedAction=E,c.replace("/digit-ui/employee/obps/response",{data:e})),null!==(o=t)&&void 0!==o&&o.isStakeholder&&(e.selectedAction=E,c.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!==(i=t)&&void 0!==i&&i.isNoc&&c.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(a=e.Amendments)||void 0===a?void 0:a.length)>0?null!=n&&null!==(r=n.AmendmentUpdate)&&void 0!==r&&null!==(u=r.workflow)&&void 0!==u&&u.action.includes("SEND_BACK")?A({key:"success",label:s("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=n&&null!==(d=n.AmendmentUpdate)&&void 0!==d&&null!==(v=d.workflow)&&void 0!==v&&v.action.includes("RE-SUBMIT")?A({key:"success",label:s("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=n&&null!==(p=n.AmendmentUpdate)&&void 0!==p&&null!==(m=p.workflow)&&void 0!==m&&m.action.includes("APPROVE")?A({key:"success",label:s("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=n&&null!==(S=n.AmendmentUpdate)&&void 0!==S&&null!==(_=S.workflow)&&void 0!==_&&_.action.includes("REJECT")&&A({key:"success",label:s("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(A({key:"success",action:E}),Y&&setTimeout(Y,3e3),setTimeout(P,5e3),G.clear(),G.refetchQueries("APPLICATION_SEARCH"))}})),q()}g(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const o=function(){if(!1!==n&&L){var e;const t=null===(e=n)||void 0===e?void 0:e.map(e=>null==L?void 0:L.mutateAsync(e)),o=ye(function(){return g(!0),Promise.resolve(Promise.all(t)).then(function(e){e&&e.map(e=>{var n,t;Digit.SessionStorage.del(null==e||null===(n=e.Noc)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.nocType)})})},function(e){var n,t,o,i,a,r,u,d,c,v,p,m;g(!1);let E=null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&null!==(o=t.Errors)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.code?s(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(c=e.response)||void 0===c||null===(v=c.data)||void 0===v||null===(p=v.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;q(),A({key:"error",error:{message:E}}),setTimeout(P,5e3),l=!0});if(o&&o.then)return o.then(function(){})}}();return o&&o.then?o.then(C):C(o)}alert("Please fill in the comments before submitting")}();return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},actionData:null==R||null===(a=R.data)||void 0===a?void 0:a.timeline,businessService:W,workflowDetails:R,moduleCode:M}):null,N?t.createElement(Ja,{action:E,workflowDetails:R,businessService:W,isWarningPop:N,closeWarningPopup:()=>{y(!1)}}):null,t.createElement(Ka,{t:s,showToast:D,closeToast:P,businessService:W}),t.createElement(Xa,{workflowDetails:R,displayMenu:p,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)A({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(P,5e3);else if(null!=e&&e.isWarningPopUp)y(!0);else if(null!=e&&e.redirectionUrll){var n,t,l,o,i;if("ACTIVATE_CONNECTION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action))c.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),JSON.stringify({data:null==e||null===(o=e.redirectionUrll)||void 0===o?void 0:o.state,url:""+(null===(i=location)||void 0===i?void 0:i.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action)){var a,r;c.push(""+(null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.pathname),{data:null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.state})}else{var u;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(u=e.redirectionUrll)||void 0===u?void 0:u.pathname))}}else if(null!=e&&e.redirectionUrl){var d,s;c.push({pathname:null===(d=e.redirectionUrl)||void 0===d?void 0:d.pathname,state:{...null===(s=e.redirectionUrl)||void 0===s?void 0:s.state}})}else f(!0);S(e),m(!1)},setDisplayMenu:m,businessService:W,forcedActionPrefix:B,ActionBarStyle:U,MenuStyle:k})))};function er(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var l=arguments,o=n?n.apply(this,l):l[0],i=t.cache;if(i.has(o))return i.get(o);var a=e.apply(this,l);return t.cache=i.set(o,a)||i,a};return t.cache=new(er.Cache||dn),t}er.Cache=dn;var nr,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lr=/\\(\\)?/g;nr=er(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(tr,function(e,t,l,o){n.push(l?o.replace(lr,"$1"):t||e)}),n},function(e){return 500===nr.size&&nr.clear(),e}).cache;const or=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),ir=(e,n)=>(n&&Object.keys(n).map(t=>{e=e.replace(":"+t,n[t])}),e),ar=e=>{let{register:l,reset:o,t:a}=e;return a("ES_SEARCH_APPLICATION_MOBILE_INVALID"),a("ERR_DEFAULT_INPUT_FIELD_MSG"),t.createElement(n.Fragment,null,t.createElement(i.SearchField,{style:{width:"100%"}},t.createElement("label",null,a("WS_PROPERTY_ID_LABEL")),t.createElement(i.TextInput,{name:"propertyId",inputRef:l({})})),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:a("WS_SEARCH_CONNECTION_SEARCH_INTEGRATED_BUTTON"),submit:!0}),t.createElement("p",{onClick:()=>{o({searchType:"CONNECTION",mobileNumber:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",propertyId:"",connectionNumber:"",oldConnectionNumber:""})}},a("WS_SEARCH_CONNECTION_RESET_BUTTON"))))},rr=e=>{let{tenantId:r,onSubmit:u,data:d,count:s,resultOk:c,isLoading:v}=e;console.log("dafff",d);const{t:p}=l.useTranslation(),{register:m,control:E,handleSubmit:S,setValue:_,getValues:f,reset:C}=a.useForm({defaultValues:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",searchType:"CONNECTION"}});n.useEffect(()=>{m("offset",0),m("limit",10),m("sortBy","commencementDate"),m("searchType","CONNECTION"),m("sortOrder","DESC"),m("propertyId","")},[m]);const g=n.useCallback(e=>{0!==e.length&&(_("sortBy",e.id),_("sortOrder",e.desc?"DESC":"ASC"))},[]),N=e=>t.createElement("span",{className:"cell-text"},e),y=n.useMemo(()=>[{Header:p("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{var n,l,i;let{row:a}=e;return t.createElement("div",null,a.original.connectionNo?t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+a.original.connectionNo+"&tenantId="+r+"&service="+(null===(n=a.original)||void 0===n?void 0:n.service)+"&connectionType="+(null===(l=a.original)||void 0===l?void 0:l.connectionType)+"&due="+((null===(i=a.original)||void 0===i?void 0:i.due)||0)+"&from=WS_SEWERAGE_CONNECTION_SEARCH_LABEL"},a.original.connectionNo||"NA")):t.createElement("span",null,p("NA")))}},{Header:p("WS_COMMON_TABLE_COL_SERVICE_LABEL"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return N(null!=t&&null!==(n=t.original)&&void 0!==n&&n.applicationNo.includes("WS")?"Water Service":"Sewerage Service")}},{Header:p("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),disableSortBy:!0,Cell:e=>{var n,t,l,o,i;let{row:a}=e;return N(null!=a&&null!==(n=a.original)&&void 0!==n&&null!==(t=n.connectionHolders)&&void 0!==t&&t.map(e=>null==e?void 0:e.name).join(",")?null==a||null===(l=a.original)||void 0===l||null===(o=l.connectionHolders)||void 0===o?void 0:o.map(e=>null==e?void 0:e.name).join(","):""+((null===(i=a.original)||void 0===i?void 0:i.owner)||"NA"))}},{Header:p("WS_COMMON_TABLE_COL_STATUS_LABEL"),disableSortBy:!0,Cell:e=>{var n,t;let{row:l}=e;return N(p("WS_"+(null===(n=l.original)||void 0===n||null===(t=n.status)||void 0===t?void 0:t.toUpperCase())))}},{Header:p("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return N(""+((null===(n=t.original)||void 0===n?void 0:n.due)||"NA"))}},{Header:p("WS_COMMON_TABLE_COL_ADDRESS"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return N(""+((null===(n=t.original)||void 0===n?void 0:n.address)||"NA"))}},{Header:p("WS_COMMON_TABLE_COL_DUE_DATE_LABEL"),disableSortBy:!0,Cell:e=>{var n,t,l,o;let{row:i}=e;const a=(null===(n=i.original)||void 0===n||null===(t=n.status)||void 0===t?void 0:t.toUpperCase())||"",r="NA"===(null===(l=i.original)||void 0===l?void 0:l.dueDate)?p("WS_NA"):(e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()})(null===(o=i.original)||void 0===o?void 0:o.dueDate);return N(p("INACTIVE"===a?"WS_NA":""+r))}}],[]);return t.createElement(n.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},p("WS_WATER_SEWERAGE_INTEGRATED_BILL_SUB_HEADER")),t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:u,handleSubmit:S},t.createElement(ar,{register:m,control:E,reset:C,tenantId:r,t:p})),v?t.createElement(i.Loader,null):null,null!=d&&d.display&&!c?t.createElement(i.Card,{style:{marginTop:20}},p(null==d?void 0:d.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):c?t.createElement("div",null,t.createElement(i.Table,{t:p,data:d,totalRecords:s,columns:y,getCellProps:e=>({style:{minWidth:e.column.Header===p("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){_("limit",Number(e.target.value)),S(u)()},currentPage:f("offset")/f("limit"),onNextPage:function(){_("offset",f("offset")+f("limit")),S(u)()},onPrevPage:function(){_("offset",f("offset")-f("limit")),S(u)()},pageSizeLimit:f("limit"),onSort:g,disableSort:!1,sortParams:[{id:f("sortBy"),desc:"DESC"===f("sortOrder")}]}),t.createElement("button",{className:"submit-bar",type:"button",onClick:function(){try{console.log("integrated",d);const e=function(){if((null==d?void 0:d.length)>0){const e=ye(function(){return Promise.resolve(Digit.WSService.wnsGroupBill({propertyId:d[0].propertyId,tenantId:r})).then(function(e){((e,n)=>{if(window.mSewaApp&&window.mSewaApp.isMsewaApp()&&window.mSewaApp.downloadBase64File){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){window.mSewaApp.downloadBase64File(t.result,"IntegratedBill.pdf")}}else{const n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="IntegratedBill.pdf",document.body.append(n),n.click(),n.remove(),setTimeout(()=>URL.revokeObjectURL(n.href),7e3)}})(new Blob([e.data],{type:"application/pdf"}))})},function(e){console.log("errorrrrrr",e)});if(e&&e.then)return e.then(function(){})}else alert("NO Pdf")}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},style:{fontFamily:"sans-serif",color:"white",fontSize:"19px",marginTop:"10px",float:"right"}},p("WS_DOWNLOAD_BILL"))):null)},ur={WSModule:e=>{var n;let{stateCode:l,userType:a,tenants:r}=e;const u=["ws","pt","common",(null===(n=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===n?void 0:n.code)||Digit.ULBService.getCurrentTenantId(),"bill-amend","abg"],{path:d}=o.useRouteMatch(),s=Digit.StoreData.getCurrentLanguage(),{isLoading:c}=Digit.Services.useStore({stateCode:l,moduleCode:u,language:s});return Digit.SessionStorage.set("WS_TENANTS",r),Digit.SessionStorage.set("PT_TENANTS",r),c?t.createElement(i.Loader,null):t.createElement("citizen"===a?k:Ce,{path:d,stateCode:l})},WSLinks:e=>{let{matchPath:n}=e;const{t:o}=l.useTranslation(),a=[{link:n+"/my-bills",i18nKey:o("ACTION_TEST_WNS_MY_BILLS")},{link:n+"/my-payments",i18nKey:o("ACTION_TEST_MY_PAYMENTS")},{link:n+"/create-application",i18nKey:o("ACTION_TEST_APPLY_NEW_CONNECTION")},{link:n+"/search",i18nKey:o("ACTION_TEXT_WS_SEARCH_AND_PAY")},{link:n+"/my-applications",i18nKey:o("ACTION_TEXT_WS_MY_APPLICATION")},{link:n+"/my-connections",i18nKey:o("ACTION_TEXT_WS_MY_CONNECTION")}];return t.createElement(i.CitizenHomeCard,{header:o("ACTION_TEST_WATER_AND_SEWERAGE"),links:a,Icon:()=>t.createElement(i.WSICon,null)})},WSServiceName:e=>{let{t:l,config:o,onSelect:a,userType:r,formData:u}=e;const[d,s]=n.useState((null==u?void 0:u.serviceName)||""),[c,v]=n.useState(u||{}),p=window.location.href.includes("/ws/edit-application/");return t.createElement("div",null,"citizen"===r&&t.createElement(Ne,{currentStep:2}),t.createElement(i.FormStep,{t:l,config:o,onSelect:()=>{var e;if("WATER"==(null==d?void 0:d.code)?sessionStorage.setItem("serviceName","WATER"):"SEWERAGE"==(null==d?void 0:d.code)?sessionStorage.setItem("serviceName","SEWERAGE"):sessionStorage.setItem("serviceName",""),"BOTH"!=(null==d?void 0:d.code)&&(null==c||null===(e=c.serviceName)||void 0===e?void 0:e.code)!=(null==d?void 0:d.code)){let e=c;e.waterConectionDetails={},e.sewerageConnectionDetails={},e.serviceName=d,a("",e)}else a(o.key,d)},onSkip:()=>a(),isDisabled:!d,onAdd:function(){}},t.createElement(i.CardLabel,null,l("WS_SELECT_SERVICE_TYPE_WANT_TO_APPLY")),t.createElement(i.RadioOrSelect,{name:"gender",options:[{i18nKey:"WS_WATER_CONNECTION_ONLY",code:"WATER"},{i18nKey:"WS_SEWERAGE_CONNECTION_ONLY",code:"SEWERAGE"},{i18nKey:"WS_BOTH_WATER_AND_SEWERAGE",code:"BOTH"}],selectedOption:d,optionKey:"i18nKey",onSelect:function(e){s(e)},t:l,disabled:p})))},WSWaterConnectionDetails:e=>{var l,o;let{t:a,config:r,userType:u,onSelect:d,formData:s}=e;const c=Digit.ULBService.getStateId(),[v,p]=n.useState((null==s||null===(l=s.waterConectionDetails)||void 0===l?void 0:l.proposedTaps)||""),[m,E]=n.useState((null==s||null===(o=s.waterConectionDetails)||void 0===o?void 0:o.proposedPipeSize)||""),[S,_]=n.useState(!1),[f,C]=n.useState(null),[g,N]=n.useState(null),[y,T]=n.useState([]),{isLoading:D,data:A}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesCalculation(c);return n.useEffect(()=>{var e;if((null==A||null===(e=A.PipeSize)||void 0===e?void 0:e.length)>0){var n;let e=[];null==A||null===(n=A.PipeSize)||void 0===n||n.forEach(n=>{e.push({i18nKey:n.size+" "+a("WS_INCHES_LABEL"),code:n.size,id:n.id,size:n.size})}),T(e)}},[A]),t.createElement("div",null,"citizen"===u&&t.createElement(Ne,{currentStep:2}),D?t.createElement(i.Loader,null):t.createElement(i.FormStep,{t:a,config:r,onSelect:()=>{var e,n,t,l;if((null==s||!s.WaterConnectionResult||null==s||null===(e=s.WaterConnectionResult)||void 0===e||null===(n=e.WaterConnection)||void 0===n||null===(t=n[0])||void 0===t||!t.id)&&"WATER"===(null==s||null===(l=s.serviceName)||void 0===l?void 0:l.code)||null!=s&&s.isModifyConnection){_(!0);let e={};var o,i,a,u,c,p,E,S,f,g,y,T,D,A,I,h,O,b,L,R,w,W,P,M;e=null!=s&&s.isModifyConnection?{WaterConnection:{...null==s||null===(o=s.WaterConnectionResult)||void 0===o||null===(i=o.WaterConnection)||void 0===i?void 0:i[0],processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1}:{WaterConnection:{water:!0,sewerage:!1,property:{...null==s||null===(a=s.cpt)||void 0===a?void 0:a.details},proposedTaps:v,proposedPipeSize:null==m?void 0:m.code,proposedWaterClosets:null,proposedToilets:null,connectionHolders:null!=s&&null!==(u=s.ConnectionHolderDetails)&&void 0!==u&&u.isOwnerSame?null:[{correspondenceAddress:null==s||null===(c=s.ConnectionHolderDetails)||void 0===c?void 0:c.address,fatherOrHusbandName:null==s||null===(p=s.ConnectionHolderDetails)||void 0===p?void 0:p.guardian,gender:null==s||null===(E=s.ConnectionHolderDetails)||void 0===E||null===(S=E.gender)||void 0===S?void 0:S.code,mobileNumber:null==s||null===(f=s.ConnectionHolderDetails)||void 0===f?void 0:f.mobileNumber,name:null==s||null===(g=s.ConnectionHolderDetails)||void 0===g?void 0:g.name,emailId:null==s||null===(y=s.ConnectionHolderDetails)||void 0===y?void 0:y.emailId,ownerType:(null==s||null===(T=s.ConnectionHolderDetails)||void 0===T||null===(D=T.specialCategoryType)||void 0===D?void 0:D.code)||"NONE",relationship:null==s||null===(A=s.ConnectionHolderDetails)||void 0===A||null===(I=A.relationship)||void 0===I?void 0:I.code,sameAsPropertyAddress:!1}],service:"Water",roadCuttingArea:null,noOfTaps:null,noOfWaterClosets:null,noOfToilets:null,propertyId:(null==s||null===(h=s.cptId)||void 0===h?void 0:h.id)||(null==s||null===(O=s.cpt)||void 0===O||null===(b=O.details)||void 0===b?void 0:b.propertyId),additionalDetails:{initialMeterReading:null,detailsProvidedBy:"",locality:null==s||null===(L=s.cpt)||void 0===L||null===(R=L.details)||void 0===R||null===(w=R.address)||void 0===w||null===(W=w.locality)||void 0===W?void 0:W.code},tenantId:null==s||null===(P=s.cpt)||void 0===P||null===(M=P.details)||void 0===M?void 0:M.tenantId,processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1},Digit.WSService.create(e,"WATER").then((e,n)=>{_(!1);let t={...s,WaterConnectionResult:e,waterConectionDetails:{proposedTaps:v,proposedPipeSize:m}};d("",t,"",!0)}).catch(e=>{var n,t,l;_(!1),C({key:"error"}),N((null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null)})}else{let e={};e.proposedTaps=v,e.proposedPipeSize=m,d(r.key,e)}},onSkip:()=>d(),isDisabled:!v||!m||S,onAdd:function(){}},t.createElement(i.CardLabel,null,a("WS_NO_OF_TAPS_PROPOSED"),"*"),t.createElement(i.TextInput,H({isMandatory:!1,optionKey:"i18nKey",t:a,name:"proposedTaps",onChange:function(e){p(e.target.value)},value:v},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:a("ERR_DEFAULT_INPUT_FIELD_MSG"),type:"text"})),t.createElement(i.CardLabel,null,a("WS_PROPOSED_PIPE_SIZE"),"*"),t.createElement(i.RadioOrSelect,{name:"proposedPipeSize",options:y,selectedOption:m,optionKey:"i18nKey",onSelect:function(e){E(e)},t:a})),f&&t.createElement(i.Toast,{error:"error"===(null==f?void 0:f.key),label:g,isDleteBtn:!0,onClose:()=>{C(null),N(null)}}))},WSDocsRequired:e=>{var a;let{onSelect:r,userType:u}=e;const{t:d}=l.useTranslation(),s=o.useHistory(),c=o.useRouteMatch(),v=Digit.ULBService.getStateId();sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists"),sessionStorage.removeItem("FORMSTATE_ERRORS");const{isLoading:p,data:m}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(v);var E;return"citizen"===u?t.createElement(n.Fragment,null,t.createElement(i.Card,null,t.createElement(i.CardHeader,null,d("WS_COMMON_APPL_NEW_CONNECTION")),t.createElement(i.CitizenInfoLabel,{style:{margin:"0px",textAlign:"center"},textStyle:{color:"#0B0C0C"},text:d("WS_DOCS_REQUIRED_TIME"),showInfo:!1}),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},d("WS_NEW_CONNECTION_TEST_1")),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},d("WS_NEW_CONNECTION_TEST_2")),t.createElement(i.CardSubHeader,null,d("WS_DOC_REQ_SCREEN_LABEL")),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},d("WS_NEW_CONNECTION_TEST_3")),p?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,null==m||null===(E=m.Documents)||void 0===E?void 0:E.map((e,n)=>{var l;return t.createElement("div",null,t.createElement("div",{style:{fontWeight:700,marginBottom:"8px"},key:n},t.createElement("div",{style:{display:"flex"}},t.createElement("div",null,n+1+"."," "),t.createElement("div",null," "+d(null==e?void 0:e.code.replace(".","_"))))),t.createElement("div",{style:{marginBottom:"16px",marginLeft:"18px"}},null==e||null===(l=e.dropdownData)||void 0===l?void 0:l.map((n,l)=>{var o;return(null==e||null===(o=e.dropdownData)||void 0===o?void 0:o.length)!==l+1?t.createElement("span",null,d(null==n?void 0:n.i18nKey)+", "):t.createElement("span",null,""+d(null==n?void 0:n.i18nKey))})))})),t.createElement(i.SubmitBar,{label:d("CS_COMMON_NEXT"),onSubmit:()=>{r("DocsReq","")}}))):t.createElement("div",{style:{margin:"16px"}},t.createElement("div",null,t.createElement(i.Header,{styles:{fontSize:"32px",marginLeft:"18px",display:"flex",justifyContent:"space-between",marginRight:"12px"}},t.createElement("div",null,d("WS_WATER_AND_SEWERAGE_NEW_CONNECTION_LABEL")),t.createElement("div",{onClick:()=>{let e=document.getElementById("documents-div").innerHTML;if(window.mSewaApp&&window.mSewaApp.isMsewaApp())window.mSewaApp.downloadBase64File(window.btoa(e),d("WS_REQ_DOCS"));else{let n=window.open("","");n.document.write("<html><body>"+e+"</body></html>"),n.document.close(),n.focus(),n.print()}},style:{cursor:"pointer",display:"flex"}},t.createElement(i.PrintBtnCommon,null),t.createElement("div",{style:{fontSize:"24px",fontWeight:"400",color:"#0B0C0C"}},"Print")))),t.createElement(i.Card,null,p?t.createElement(i.Loader,null):t.createElement("div",{id:"documents-div"},null==m||null===(a=m.Documents)||void 0===a?void 0:a.map((e,n)=>{var l;return t.createElement("div",{key:n,style:{marginTop:"16px"}},t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px",lineHeight:"28px",fontSize:"24px"}},d(null==e?void 0:e.code.replace(".","_"))),e.dropdownData&&e.dropdownData.length>1&&t.createElement("p",{style:{lineHeight:"24px",fontSize:"16px"}},d((null==e?void 0:e.code.replace(".","_"))+"_DESCRIPTION")),t.createElement("div",{style:{margin:"16px 0",lineHeight:"18px",fontSize:"16px"}},null==e||null===(l=e.dropdownData)||void 0===l?void 0:l.map((e,n)=>t.createElement("p",{style:{fontWeight:"bold",lineHeight:"32px"}},n+1+". "+d(null==e?void 0:e.i18nKey)))),t.createElement("p",{style:{fontSize:"16px"}},d((null==e?void 0:e.code.replace(".","_"))+"_BELOW_DESCRIPTION")))})),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:d("ACTION_TEST_APPLY"),onSubmit:()=>{s.push(c.path.replace("create-application","new-application"))},style:{margin:"10px 10px 0px 0px"},disabled:!!p}))))},WSDocumentDetails:e=>{var l,o;let{t:a,config:r,onSelect:u,userType:d,formData:s}=e;const c=Digit.ULBService.getStateId(),[v,p]=n.useState((null==s||null===(l=s.documents)||void 0===l?void 0:l.documents)||[]),[m,E]=n.useState(null),[S,_]=n.useState(!0),[f,C]=n.useState(!1),{isLoading:g,data:N}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(c);return n.useEffect(()=>{let e=0;null==N||N.Documents.map(n=>{let t=!1;v.map(e=>{n.required&&null!=e&&e.documentType.includes(n.code)&&(t=!0)}),!t&&n.required&&(e+=1)}),_("0"!=e&&0!=e||!(v.length>0))},[v,f]),t.createElement("div",null,"citizen"===d&&t.createElement(Ne,{currentStep:3}),g?t.createElement(i.Loader,null):t.createElement(i.FormStep,{t:a,config:r,onSelect:()=>{let e;e={...s.documents,documents:v},u(r.key,e)},onSkip:()=>u(),isDisabled:S,onAdd:function(){}},null==N||null===(o=N.Documents)||void 0===o?void 0:o.map((e,n)=>t.createElement(Te,{key:n,document:e,t:a,error:m,setError:E,setDocuments:p,documents:v,setCheckRequiredFields:C})),m&&t.createElement(i.Toast,{label:m,onClose:()=>E(null),error:!0})))},WSSewerageConnectionDetails:e=>{var l,o;let{t:a,config:r,userType:u,onSelect:d,formData:s}=e;const[c,v]=n.useState((null==s||null===(l=s.sewerageConnectionDetails)||void 0===l?void 0:l.proposedWaterClosets)||""),[p,m]=n.useState((null==s||null===(o=s.sewerageConnectionDetails)||void 0===o?void 0:o.proposedToilets)||""),[E,S]=n.useState(!1),[_,f]=n.useState(null),[C,g]=n.useState(null);let N={};return t.createElement("div",null,"citizen"===u&&t.createElement(Ne,{currentStep:2}),t.createElement(i.FormStep,{t:a,config:r,onSelect:()=>{var e,n,t,l,o,i,a,u,v;if(null!=s&&s.SewerageConnectionResult&&null!=s&&null!==(e=s.SewerageConnectionResult)&&void 0!==e&&null!==(n=e.SewerageConnections)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.id&&(null==s||!s.isModifyConnection)||"SEWERAGE"!==(null==s||null===(l=s.serviceName)||void 0===l?void 0:l.code))if((null!=s&&s.SewerageConnectionResult&&null!=s&&null!==(o=s.SewerageConnectionResult)&&void 0!==o&&null!==(i=o.SewerageConnection)&&void 0!==i&&i.id||null!=s&&s.WaterConnectionResult&&null!=s&&null!==(a=s.WaterConnectionResult)&&void 0!==a&&null!==(u=a.WaterConnection)&&void 0!==u&&u.id)&&(null==s||!s.isModifyConnection)||"BOTH"!==(null==s||null===(v=s.serviceName)||void 0===v?void 0:v.code)){let e={};e.proposedWaterClosets=c,e.proposedToilets=p,d(r.key,e)}else{S(!0);let e={};var m,E,_,C,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z;null!=s&&s.isModifyConnection?payload={WaterConnection:{...null==s||null===(m=s.WaterConnectionResult)||void 0===m||null===(E=m.WaterConnection)||void 0===E?void 0:E[0],processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1}:e={WaterConnection:{water:!0,sewerage:!0,property:{...null==s||null===(_=s.cpt)||void 0===_?void 0:_.details},proposedTaps:null==s||null===(C=s.waterConectionDetails)||void 0===C?void 0:C.proposedTaps,proposedPipeSize:null==s||null===(N=s.waterConectionDetails)||void 0===N||null===(y=N.proposedPipeSize)||void 0===y?void 0:y.code,proposedWaterClosets:parseInt(c),proposedToilets:parseInt(p),connectionHolders:null!=s&&null!==(T=s.ConnectionHolderDetails)&&void 0!==T&&T.isOwnerSame?null:[{correspondenceAddress:null==s||null===(D=s.ConnectionHolderDetails)||void 0===D?void 0:D.address,fatherOrHusbandName:null==s||null===(A=s.ConnectionHolderDetails)||void 0===A?void 0:A.guardian,gender:null==s||null===(I=s.ConnectionHolderDetails)||void 0===I||null===(h=I.gender)||void 0===h?void 0:h.code,mobileNumber:null==s||null===(O=s.ConnectionHolderDetails)||void 0===O?void 0:O.mobileNumber,name:null==s||null===(b=s.ConnectionHolderDetails)||void 0===b?void 0:b.name,emailId:null==s||null===(L=s.ConnectionHolderDetails)||void 0===L?void 0:L.emailId,ownerType:(null==s||null===(R=s.ConnectionHolderDetails)||void 0===R||null===(w=R.specialCategoryType)||void 0===w?void 0:w.code)||"NONE",relationship:null==s||null===(W=s.ConnectionHolderDetails)||void 0===W||null===(P=W.relationship)||void 0===P?void 0:P.code,sameAsPropertyAddress:!1}],service:"Water and Sewerage",roadCuttingArea:null,noOfTaps:null,noOfWaterClosets:null,noOfToilets:null,propertyId:(null==s||null===(M=s.cptId)||void 0===M?void 0:M.id)||(null==s||null===(x=s.cpt)||void 0===x||null===(B=x.details)||void 0===B?void 0:B.propertyId),additionalDetails:{initialMeterReading:null,detailsProvidedBy:"",locality:null==s||null===(F=s.cpt)||void 0===F||null===(U=F.details)||void 0===U||null===(k=U.address)||void 0===k||null===(H=k.locality)||void 0===H?void 0:H.code},tenantId:null==s||null===(j=s.cpt)||void 0===j||null===(z=j.details)||void 0===z?void 0:z.tenantId,processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1};let n={};var V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se;n=null!=s&&s.isModifyConnection?{SewerageConnection:{...null==s||null===(V=s.SewerageConnectionResult)||void 0===V||null===(Y=V.SewerageConnections)||void 0===Y?void 0:Y[0],processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1}:{SewerageConnection:{water:!0,sewerage:!0,property:{...null==s||null===(G=s.cpt)||void 0===G?void 0:G.details},proposedTaps:null==s||null===(q=s.waterConectionDetails)||void 0===q?void 0:q.proposedTaps,proposedPipeSize:null==s||null===(K=s.waterConectionDetails)||void 0===K||null===(X=K.proposedPipeSize)||void 0===X?void 0:X.code,proposedWaterClosets:parseInt(c),proposedToilets:parseInt(p),connectionHolders:null!=s&&null!==($=s.ConnectionHolderDetails)&&void 0!==$&&$.isOwnerSame?null:[{correspondenceAddress:null==s||null===(Z=s.ConnectionHolderDetails)||void 0===Z?void 0:Z.address,fatherOrHusbandName:null==s||null===(J=s.ConnectionHolderDetails)||void 0===J?void 0:J.guardian,gender:null==s||null===(Q=s.ConnectionHolderDetails)||void 0===Q||null===(ee=Q.gender)||void 0===ee?void 0:ee.code,mobileNumber:null==s||null===(ne=s.ConnectionHolderDetails)||void 0===ne?void 0:ne.mobileNumber,name:null==s||null===(te=s.ConnectionHolderDetails)||void 0===te?void 0:te.name,emailId:null==s||null===(le=s.ConnectionHolderDetails)||void 0===le?void 0:le.emailId,ownerType:(null==s||null===(oe=s.ConnectionHolderDetails)||void 0===oe||null===(ie=oe.specialCategoryType)||void 0===ie?void 0:ie.code)||"NONE",relationship:null==s||null===(ae=s.ConnectionHolderDetails)||void 0===ae||null===(re=ae.relationship)||void 0===re?void 0:re.code,sameAsPropertyAddress:!1}],service:"Water and Sewerage",roadCuttingArea:null,noOfTaps:null,noOfWaterClosets:null,noOfToilets:null,propertyId:(null==s||null===(ue=s.cptId)||void 0===ue?void 0:ue.id)||(null==s||null===(de=s.cpt)||void 0===de||null===(se=de.details)||void 0===se?void 0:se.propertyId),additionalDetails:{initialMeterReading:null,detailsProvidedBy:"",locality:null==s||null===(ce=s.cpt)||void 0===ce||null===(ve=ce.details)||void 0===ve||null===(pe=ve.address)||void 0===pe||null===(me=pe.locality)||void 0===me?void 0:me.code},tenantId:null==s||null===(Ee=s.cpt)||void 0===Ee||null===(Se=Ee.details)||void 0===Se?void 0:Se.tenantId,processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1},Digit.WSService.create(e,"WATER").then((e,t)=>{Digit.WSService.create(n,"SEWERAGE").then((n,t)=>{S(!1);let l={...s,WaterConnectionResult:e,SewerageConnectionResult:n,sewerageConnectionDetails:{proposedWaterClosets:c,proposedToilets:p}};d("",l,"",!0)}).catch(e=>{var n,t,l;S(!1),f({key:"error"}),g((null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null)})}).catch(e=>{var n,t,l;S(!1),f({key:"error"}),g((null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null)})}else{S(!0);let e={};var _e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be,Fe,Ue,ke;e=null!=s&&s.isModifyConnection?{SewerageConnection:{...null==s||null===(_e=s.SewerageConnectionResult)||void 0===_e||null===(fe=_e.SewerageConnections)||void 0===fe?void 0:fe[0],processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1}:{SewerageConnection:{water:!1,sewerage:!0,property:{...null==s||null===(Ce=s.cpt)||void 0===Ce?void 0:Ce.details},proposedTaps:null,proposedPipeSize:null,proposedWaterClosets:parseInt(c),proposedToilets:parseInt(p),connectionHolders:null!=s&&null!==(ge=s.ConnectionHolderDetails)&&void 0!==ge&&ge.isOwnerSame?null:[{correspondenceAddress:null==s||null===(Ne=s.ConnectionHolderDetails)||void 0===Ne?void 0:Ne.address,fatherOrHusbandName:null==s||null===(ye=s.ConnectionHolderDetails)||void 0===ye?void 0:ye.guardian,gender:null==s||null===(Te=s.ConnectionHolderDetails)||void 0===Te||null===(De=Te.gender)||void 0===De?void 0:De.code,mobileNumber:null==s||null===(Ae=s.ConnectionHolderDetails)||void 0===Ae?void 0:Ae.mobileNumber,name:null==s||null===(Ie=s.ConnectionHolderDetails)||void 0===Ie?void 0:Ie.name,emailId:null==s||null===(he=s.ConnectionHolderDetails)||void 0===he?void 0:he.emailId,ownerType:(null==s||null===(Oe=s.ConnectionHolderDetails)||void 0===Oe||null===(be=Oe.specialCategoryType)||void 0===be?void 0:be.code)||"NONE",relationship:null==s||null===(Le=s.ConnectionHolderDetails)||void 0===Le||null===(Re=Le.relationship)||void 0===Re?void 0:Re.code,sameAsPropertyAddress:!1}],service:"Sewerage",roadCuttingArea:null,noOfTaps:null,noOfWaterClosets:null,noOfToilets:null,propertyId:(null==s||null===(we=s.cptId)||void 0===we?void 0:we.id)||(null==s||null===(We=s.cpt)||void 0===We||null===(Pe=We.details)||void 0===Pe?void 0:Pe.propertyId),additionalDetails:{initialMeterReading:null,detailsProvidedBy:"",locality:null==s||null===(Me=s.cpt)||void 0===Me||null===(xe=Me.details)||void 0===xe||null===(Be=xe.address)||void 0===Be||null===(Fe=Be.locality)||void 0===Fe?void 0:Fe.code},tenantId:null==s||null===(Ue=s.cpt)||void 0===Ue||null===(ke=Ue.details)||void 0===ke?void 0:ke.tenantId,processInstance:{action:"INITIATE"},channel:"CITIZEN"},reconnectRequest:!1,disconnectRequest:!1},Digit.WSService.create(e,"SEWERAGE").then((e,n)=>{S(!1);let t={...s,SewerageConnectionResult:e,sewerageConnectionDetails:{proposedWaterClosets:c,proposedToilets:p}};d("",t,"",!0)}).catch(e=>{var n,t,l;S(!1),f({key:"error"}),g((null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null)})}},onSkip:()=>d(),isDisabled:!c||!p||E,onAdd:function(){}},t.createElement(i.CardLabel,null,a("WS_NO_OF_WATER_CLOSETS"),"*"),t.createElement(i.TextInput,H({type:"number",isMandatory:!1,optionKey:"i18nKey",t:a,name:"proposedWaterClosets",onChange:function(e){v(e.target.value)},value:c},N={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:a("ERR_DEFAULT_INPUT_FIELD_MSG")})),t.createElement(i.CardLabel,null,a("WS_SERV_DETAIL_NO_OF_TOILETS"),"*"),t.createElement(i.TextInput,H({type:"number",isMandatory:!1,optionKey:"i18nKey",t:a,name:"proposedToilets",onChange:function(e){m(e.target.value)},value:p},N={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:a("ERR_DEFAULT_INPUT_FIELD_MSG")}))),_&&t.createElement(i.Toast,{error:"error"===(null==_?void 0:_.key),label:C,isDleteBtn:!0,onClose:()=>{f(null),g(null)}}))},WSPlumberPreference:e=>{var l;let{t:o,config:a,onSelect:r,userType:u,formData:d}=e;const[s,c]=n.useState((null==d||null===(l=d.plumberPreference)||void 0===l?void 0:l.plumberPreference)||{i18nKey:"WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE",code:"ULB"});return t.createElement("div",null,"citizen"===u&&t.createElement(Ne,{currentStep:2}),t.createElement(i.FormStep,{t:o,config:a,onSelect:()=>{r(a.key,{plumberPreference:s})},onSkip:()=>r(),isDisabled:!s,onAdd:function(){}},t.createElement(i.RadioOrSelect,{name:"plumberPreference",options:[{i18nKey:"WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE",code:"ULB"},{i18nKey:"WS_I_WILL_ARRAGE_THE_PLUMBER_MYSELF",code:"Self"}],selectedOption:s,optionKey:"i18nKey",onSelect:function(e){c(e)},t:o,innerStyles:{display:"flex"},inputStyle:{marginTop:"10px"}})))},WSConnectionHolder:e=>{var l,o,a,r,u,d,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U;let{t:k,config:j,onSelect:z,userType:V,formData:Y}=e,G={};const[q,K]=n.useState((null==Y||null===(l=Y.ConnectionHolderDetails)||void 0===l?void 0:l.name)||(null==Y||null===(o=Y.formData)||void 0===o||null===(a=o.ConnectionHolderDetails)||void 0===a?void 0:a.name)||""),[X,$]=n.useState((null==Y||null===(r=Y.ConnectionHolderDetails)||void 0===r?void 0:r.guardian)||(null==Y||null===(u=Y.formData)||void 0===u||null===(d=u.ConnectionHolderDetails)||void 0===d?void 0:d.guardian)||""),[Z,J]=n.useState((null==Y||null===(c=Y.ConnectionHolderDetails)||void 0===c?void 0:c.gender)||(null==Y||null===(v=Y.formData)||void 0===v||null===(p=v.ConnectionHolderDetails)||void 0===p?void 0:p.gender)),[Q,ee]=n.useState((null==Y||null===(m=Y.ConnectionHolderDetails)||void 0===m?void 0:m.relationship)||(null==Y||null===(E=Y.formData)||void 0===E||null===(S=E.ConnectionHolderDetails)||void 0===S?void 0:S.relationship)),[ne,te]=n.useState((null==Y||null===(_=Y.ConnectionHolderDetails)||void 0===_?void 0:_.mobileNumber)||(null==Y||null===(f=Y.formData)||void 0===f||null===(C=f.ConnectionHolderDetails)||void 0===C?void 0:C.mobileNumber)||""),[le,oe]=n.useState((null==Y||null===(g=Y.ConnectionHolderDetails)||void 0===g?void 0:g.address)||(null==Y||null===(N=Y.formData)||void 0===N||null===(y=N.ConnectionHolderDetails)||void 0===y?void 0:y.address)||""),[ie,ae]=n.useState((null==Y||null===(T=Y.ConnectionHolderDetails)||void 0===T?void 0:T.documentId)||(null==Y||null===(D=Y.formData)||void 0===D||null===(A=D.ConnectionHolderDetails)||void 0===A?void 0:A.documentId)||""),[re,ue]=n.useState(0!=(null==Y||null===(I=Y.ConnectionHolderDetails)||void 0===I?void 0:I.isOwnerSame)&&0!=(null==Y||null===(h=Y.formData)||void 0===h||null===(O=h.ConnectionHolderDetails)||void 0===O?void 0:O.isOwnerSame)),[de,se]=n.useState((null==Y||null===(b=Y[j.key])||void 0===b?void 0:b.fileStoreId)||null),[ce,ve]=n.useState(null),[pe,me]=n.useState(null),[Ee,Se]=n.useState((null==Y||null===(L=Y.ConnectionHolderDetails)||void 0===L?void 0:L.documentType)||""),[_e,fe]=n.useState((null==Y||null===(R=Y.ConnectionHolderDetails)||void 0===R?void 0:R.specialCategoryType)||{});let Ce=window.Digit.Utils.browser.isMobile();const[ge,Te]=n.useState((null==Y||null===(w=Y.ConnectionHolderDetails)||void 0===w?void 0:w.emailId)||(null==Y||null===(W=Y.formData)||void 0===W||null===(P=W.ConnectionHolderDetails)||void 0===P?void 0:P.emailId)||""),De=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId());let Ae=[];const{data:Ie={}}=Digit.Hooks.pt.usePropertyMDMS(De,"PropertyTax","Documents"),he=null==Ie||null===(M=Ie.PropertyTax)||void 0===M?void 0:M.Documents,Oe=Array.isArray(he)&&he.filter(e=>e.code.includes("SPECIALCATEGORYPROOF"));var be,Le;Oe.length>0&&(Ae=null===(be=Oe[0])||void 0===be?void 0:be.dropdownData,Ae.forEach(e=>{e.i18nKey=s(e.code,".","_")}),Ae=null===(Le=Ae)||void 0===Le?void 0:Le.filter(e=>e.parentValue.includes(null==_e?void 0:_e.code)),1==Ae.length&&Ee!=Ae[0]&&function(e){Se(e)}(Ae[0]));const{isLoading:Re,data:we}=Digit.Hooks.obps.useMDMS(De,"common-masters",["GenderType"]),{data:We}=Digit.Hooks.pt.usePropertyMDMS(De,"PropertyTax","OwnerType");We&&We.sort((e,n)=>e.name.localeCompare(n.name));let Pe=[];we&&we["common-masters"].GenderType.filter(e=>e.active).map(e=>{Pe.push({i18nKey:"COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})}),n.useEffect(()=>{!function(){try{me(null);const e=function(){if(ce){const e=function(){if(ce.size>=2e6)me(k("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",ce,Digit.ULBService.getStateId())).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?se(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):me(k("PT_FILE_UPLOAD_ERROR"))})},function(){me(k("PT_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[ce]);const Me=Array.isArray(null==Y||null===(x=Y.cpt)||void 0===x||null===(B=x.details)||void 0===B?void 0:B.owners)?null==Y||null===(F=Y.cpt)||void 0===F||null===(U=F.details)||void 0===U?void 0:U.owners.slice().reverse():[];return t.createElement("div",null,"citizen"===V&&t.createElement(Ne,{currentStep:2}),Re?t.createElement(i.Loader,null):t.createElement(i.FormStep,{config:j,onSelect:()=>{if(1==re){var e,n,t,l,o,i,a,r,u,d,s;let c={isOwnerSame:re,name:null==Me||null===(e=Me[0])||void 0===e?void 0:e.name,mobileNumber:null==Me||null===(n=Me[0])||void 0===n?void 0:n.mobileNumber,gender:null!=Me&&null!==(t=Me[0])&&void 0!==t&&t.gender?{code:null==Me||null===(l=Me[0])||void 0===l?void 0:l.gender,i18nKey:"COMMON_GENDER_"+(null==Me||null===(o=Me[0])||void 0===o?void 0:o.gender)}:null,guardian:null==Me||null===(i=Me[0])||void 0===i?void 0:i.fatherOrHusbandName,address:null==Me||null===(a=Me[0])||void 0===a?void 0:a.permanentAddress,emailId:null==Me||null===(r=Me[0])||void 0===r?void 0:r.emailId,relationship:null!=Me&&null!==(u=Me[0])&&void 0!==u&&u.relationship?{code:null==Me||null===(d=Me[0])||void 0===d?void 0:d.relationship,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+(null==Me||null===(s=Me[0])||void 0===s?void 0:s.relationship)}:null,specialCategoryType:_e,documentId:ie,fileStoreId:de,documentType:Ee};z(j.key,c)}else z(j.key,{isOwnerSame:re,name:q,mobileNumber:ne,gender:Z,guardian:X,address:le,relationship:Q,specialCategoryType:_e,emailId:ge,documentId:ie,fileStoreId:de,documentType:Ee})},onSkip:()=>z(),t:k,isDisabled:!(re||q&&ne&&Z&&X&&Q&&null!=_e&&_e.code&&le)},t.createElement("div",null,t.createElement(i.CheckBox,{label:k("WS_CONN_HOLDER_SAME_AS_OWNER_DETAILS"),onChange:e=>{ue(!re)},checked:re,style:{paddingBottom:"10px",paddingTop:"3px"}})),!re&&t.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},t.createElement(i.CardLabel,null,k("WS_OWN_DETAIL_NAME")+"*"),t.createElement(i.TextInput,H({t:k,type:"text",style:{background:"#FAFAFA"},isMandatory:!1,optionKey:"i18nKey",name:"name",value:q,onChange:function(e){K(e.target.value)}},G={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:k("WS_NAME_ERROR_MESSAGE")})),t.createElement(i.CardLabel,null,k("WS_OWN_DETAIL_GENDER_LABEL")+"*"),t.createElement(i.RadioButtons,{t:k,options:Pe,optionsKey:"code",name:"gender",value:Z,selectedOption:Z,onSelect:function(e){J(e)},isDependent:!0,labelKey:"COMMON_GENDER"}),t.createElement(i.CardLabel,null,k("WS_OWN_MOBILE_NO")+"*"),t.createElement(i.MobileNumber,{value:ne,name:"mobileNumber",onChange:e=>function(e){te(e.target.value)}({target:{value:e}}),style:{background:"#FAFAFA"},required:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:k("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}),t.createElement(i.CardLabel,null,k("WS_OWN_DETAIL_GUARDIAN_LABEL")+"*"),t.createElement(i.TextInput,H({t:k,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"guardian",value:X,style:{background:"#FAFAFA"},onChange:function(e){$(e.target.value)}},G={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:k("WS_NAME_ERROR_MESSAGE")})),t.createElement(i.CardLabel,null,k("WS_OWN_DETAIL_RELATIONSHIP_LABEL")+"*"),t.createElement(i.RadioButtons,{t:k,optionsKey:"i18nKey",name:"relationship",options:[{name:"Father",code:"FATHER",i18nKey:"COMMON_MASTERS_OWNERTYPE_FATHER"},{name:"HUSBAND",code:"HUSBAND",i18nKey:"COMMON_MASTERS_OWNERTYPE_HUSBAND"}],value:Q,selectedOption:Q,onSelect:function(e){ee(e)},isDependent:!0,labelKey:"COMMON_MASTERS_OWNERTYPE"}),t.createElement(i.CardLabel,null,k("WS_COMMON_TABLE_COL_ADDRESS")+"*"),t.createElement(i.TextInput,H({t:k,type:"text",style:{background:"#FAFAFA"},isMandatory:!1,optionKey:"i18nKey",name:"address",value:le,onChange:function(e){oe(e.target.value)}},G={isRequired:!0,title:k("WS_ADDR_ERROR_MESSAGE")})),t.createElement(i.CardLabel,null,k("WS_OWN_SPECIAL_CAT_LABEL")+"*"),t.createElement(i.Dropdown,{className:"form-field",selected:_e,style:Ce?{}:{width:"540px"},isMandatory:!0,option:We,select:function(e){fe(e)},optionKey:"i18nKey",t:k}),t.createElement(i.CardLabel,null,""+k("WS_EMAIL_ID")),t.createElement(i.TextInput,H({t:k,isMandatory:!1,name:"emailId",value:ge,onChange:function(e){Te(e.target.value)}},G={pattern:"[A-Za-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",type:"Email",title:k("CORE_COMMON_APPLICANT_EMAILI_ID_INVALID")})))))},WSInfoLabel:F,WSActivationDetails:e=>{let{t:n}=e;const[l,o]=t.useState({meterId:"",meterInstallationDate:"",meterInitialReading:"",connectionExecutionDate:""});return t.useEffect(()=>{}),t.createElement(t.Fragment,null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700"}},""+n("WS_METER_ID")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{t:n,type:"text",optionKey:"i18nKey",name:"meterId",value:l.meterId,onChange:e=>{o({...l,meterId:e.target.value})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700"}},""+n("WS_METER_INSTALLATION_DATE")),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:l.meterInstallationDate,onChange:e=>{o({...l,meterInstallationDate:e})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700"}},""+n("WS_INIT_METER_READING")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{value:l.meterInitialReading,onChange:e=>{o({...l,meterInitialReading:e.target.value})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700"}},""+n("WS_CONN_EXEC_DATE")),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:l.connectionExecutionDate,onChange:e=>{o({...l,connectionExecutionDate:e})}}))))},WSConnectionDetails:e=>{var a;let{config:r,onSelect:u,userType:d,formData:s,setError:c,formState:v,clearErrors:p}=e;const{t:m}=l.useTranslation(),[E,S]=(o.useLocation(),n.useState(null!=s&&s.ConnectionDetails?[null==s||null===(a=s.ConnectionDetails)||void 0===a?void 0:a[0]]:[{water:!0,sewerage:!1,proposedPipeSize:"",proposedTaps:"",proposedToilets:"",proposedWaterClosets:""}])),[_,f]=n.useState({index:-1,type:""}),C=Digit.ULBService.getStateId(),[g,N]=n.useState(!1),[y,T]=n.useState({water:!0,sewerage:!1}),[D,A]=n.useState([]),{isWSServicesCalculationLoading:I,data:h}=Digit.Hooks.ws.useMDMS(C,"ws-services-calculation",["PipeSize"]);if(n.useEffect(()=>{const e=E.map(e=>e);u(null==r?void 0:r.key,e)},[E]),n.useEffect(()=>{var e;const n=(null==h||null===(e=h["ws-services-calculation"])||void 0===e?void 0:e.PipeSize)||[];null==n||n.forEach(e=>e.i18nKey=e.size),A(n)},[h]),n.useEffect(()=>{var e,n;"employee"===d&&u(r.key,{...s[r.key],...E}),null!=E&&null!==(e=E[0])&&void 0!==e&&e.water&&T({water:!0,sewerage:!1}),null!=E&&null!==(n=E[0])&&void 0!==n&&n.sewerage&&T({water:!1,sewerage:!0})},[E]),n.useEffect(()=>{null!=s&&s.ConnectionDetails||S([{water:!0,sewerage:!1,proposedPipeSize:"",proposedTaps:"",proposedToilets:"",proposedWaterClosets:""}])},[null==s?void 0:s.ConnectionDetails]),I)return t.createElement(i.Loader,null);const O={focusIndex:_,connectionDetails:E,setFocusIndex:f,formData:s,formState:v,t:m,setError:c,clearErrors:p,config:r,setConnectionDetails:S,setIsErrors:N,isErrors:g,pipeSizeList:D,wsServicesCalculationData:h,waterSewarageSelection:y,formData:s};return t.createElement(t.Fragment,null,E.map((e,n)=>t.createElement(De,H({key:e.key,index:n,connectionDetail:e},O))))},WSDocumentsRequired:()=>t.createElement("div",null,"WSDocumentsRequired"),WSPlumberDetails:e=>{let{t:n,config:l}=e;const[o,a]=t.useState({plumberName:"",plumberMobileNo:"",plumberLicenseNo:"",plumberProvideBy:{code:"",value:"",i18nKey:""}});return t.useEffect(()=>{}),t.createElement(t.Fragment,null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},n("WS_PLUMBER_PROVIDED_BY")),t.createElement("div",{className:"field"},t.createElement(i.Dropdown,{t:n,key:null==l?void 0:l.key,selected:o.plumberProvideBy,select:e=>{a({...o,plumberProvideBy:e})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},n("WS_PLUMBER_LICENSE_NUMBER")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{key:l.key,value:o.plumberLicenseNo,onChange:e=>{a({...o,plumberLicenseNo:e.target.value})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},n("WS_PLUMBER_NAME")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{key:l.key,value:o.plumberName,onChange:e=>{a({...o,plumberName:e.target.value})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},n("WS_PLUMBER_MOB_NUMBER")),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{key:l.key,value:o.plumberMobileNo,onChange:e=>{a({...o,plumberMobileNo:e.target.value})}}))))},WSRoadCuttingDetails:e=>{let{config:a,onSelect:r,formData:u,setError:d,formState:s,clearErrors:c}=e;const{t:v}=l.useTranslation(),{pathname:p}=o.useLocation(),m=p.includes("/modify-application/"),E=Digit.ULBService.getStateId(),{isMdmsLoading:S,data:_}=Digit.Hooks.ws.useMDMS(E,"sw-services-calculation",["RoadType"]),[f,C]=n.useState((null==u?void 0:u.roadCuttingDetails)||[Ae()]),[g,N]=n.useState({index:-1,type:""});n.useEffect(()=>{r(null==a?void 0:a.key,f)},[f]);const y={focusIndex:g,allRoadCuttingDetails:f,setFocusIndex:N,removeroadCutt:e=>{C(null!==(null==e?void 0:e.id)?n=>n.map(n=>n.key==e.key&&null!==n.id?{...e,id:n.id,status:"INACTIVE"}:{...n}):n=>n.filter(n=>n.key!=e.key))},formData:u,formState:s,setRoadCuttingDetails:C,mdmsData:_,t:v,setError:d,clearErrors:c,config:a,isEditScreen:m};return S?t.createElement(Loader,null):t.createElement(t.Fragment,null,f.filter(e=>"INACTIVE"!==e.status).map((e,n)=>t.createElement(Ie,H({key:e.key,index:n,roadCutt:e},y))),t.createElement(i.LinkButton,{label:v("WS_ADD_ROAD_TYPE"),onClick:()=>{const e=Ae();C(n=>[...n,e])},style:{color:"orange",display:"inline-block"}}))},WSPropertyDetails:e=>{var n,l,a,r,u,d;let{t:s,config:c,onSelect:v,formData:p}=e;const[m,E]=t.useState(""),S=null===(n=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===n?void 0:n.code,{isLoading:_,data:f}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:null==p||null===(l=p.cptId)||void 0===l?void 0:l.id},tenantId:S},{filters:{propertyIds:null==p||null===(a=p.cptId)||void 0===a?void 0:a.id},tenantId:S});return _?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},""+s("PROPERTY_ID")),t.createElement("div",{className:"field",style:{marginTop:"20px"}},t.createElement(i.TextInput,{key:c.key,value:m,onChange:e=>{E(e.target.value),v(c.key,{id:e.target.value})},style:{width:"65%",float:"left",marginRight:"20px"}}),t.createElement("button",{className:"submit-bar",type:"button",onClick:()=>E(m)},""+s("PT_SEARCH")))),t.createElement(o.Link,{to:"/digit-ui/employee/pt/search"},t.createElement(i.LinkButton,{label:s("CPT_SEARCH_PROPERTY"),style:{color:"#a82227",display:"inline-block"}})),"  |  ",t.createElement(o.Link,{to:"/digit-ui/employee/pt/new-application"},t.createElement(i.LinkButton,{label:s("CPT_CREATE_PROPERTY"),style:{color:"#a82227",display:"inline-block"}})),f&&(null==f?void 0:f.Properties.length)&&t.createElement(t.Fragment,null,t.createElement("header",{className:"card-section-header",style:{marginBottom:0,marginTop:"20px"}},s("PT_DETAILS")),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},""+s("PROPERTY_ID")),t.createElement("div",{className:"field"},t.createElement("p",null,null==f||null===(r=f.Properties[0])||void 0===r?void 0:r.propertyId))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},""+s("OWNER_NAME")),t.createElement("div",{className:"field"},t.createElement("p",null,null==f||null===(u=f.Properties[0])||void 0===u||null===(d=u.owners[0])||void 0===d?void 0:d.name))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller"},""+s("PROPERTY_ADDRESS")),t.createElement("div",{className:"field"},t.createElement("p",null,(()=>{var e,n,t,l,o,i,a;const r=null==f||null===(e=f.Properties)||void 0===e?void 0:e.at(0),u=null==r?void 0:r.doorNo,d=null==r||null===(n=r.address)||void 0===n?void 0:n.street,s=null==r||null===(t=r.address)||void 0===t?void 0:t.landmark,c=null==r||null===(l=r.address)||void 0===l||null===(o=l.locality)||void 0===o?void 0:o.name,v=null==r||null===(i=r.address)||void 0===i?void 0:i.city,p=null==r||null===(a=r.address)||void 0===a?void 0:a.pincode;return(u?u+", ":"")+"\n      "+(d?d+", ":"")+"\n      "+(s?s+", ":"")+"\n      "+(c?c+", ":"")+"\n      "+(v||"")+"\n      "+(p?", "+p:"")})()))),t.createElement(o.Link,{to:"/digit-ui/employee/commonpt/view-property?propertyId="+m+"&tenantId="+S},t.createElement(i.LinkButton,{label:s("CPT_COMPLETE_PROPERTY_DETAILS"),style:{color:"#a82227"}}))))},WSConnectionHolderDetails:e=>{var i,a,r,u;let{config:d,onSelect:c,userType:v,formData:p,setError:E,formState:S,clearErrors:_}=e;const{t:f}=l.useTranslation(),C=(o.useLocation(),m(location.search)),[g,N]=n.useState(null!=p&&p.ConnectionHolderDetails?[{...null==p||null===(i=p.ConnectionHolderDetails)||void 0===i?void 0:i[0]}]:[{sameAsOwnerDetails:!0,name:"",gender:"",mobileNumber:"",guardian:"",relationship:"",address:"",ownerType:"",documentId:"",documentType:"",file:"",emailId:""}]),[y,T]=n.useState({index:-1,type:""}),D=Digit.ULBService.getStateId(),[A,I]=n.useState(!1),[h,O]=n.useState((null==p||null===(a=p[d.key])||void 0===a?void 0:a.fileStoreId)||null),[b,L]=n.useState(null),{data:R}=Digit.Hooks.obps.useMDMS(D,"common-masters",["GenderType"]);let w=[];R&&R["common-masters"].GenderType.filter(e=>e.active).map(e=>{w.push({i18nKey:"COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})});let W=[];const{data:P={}}=Digit.Hooks.pt.usePropertyMDMS(D,"PropertyTax","Documents"),M=null==P||null===(r=P.PropertyTax)||void 0===r?void 0:r.Documents,x=Array.isArray(M)&&M.filter(e=>e.code.includes("SPECIALCATEGORYPROOF"));var B,F;x.length>0&&(W=null===(B=x[0])||void 0===B?void 0:B.dropdownData,W.forEach(e=>{e.i18nKey=s(e.code,".","_")}),W=null===(F=W)||void 0===F?void 0:F.filter(e=>{var n;return e.parentValue.includes(null==g||null===(n=g[0])||void 0===n?void 0:n.ownerType)}),1==W.length&&dropdownValue!=W[0]&&setTypeOfDropdownValue(W[0]));const{data:U}=Digit.Hooks.pt.usePropertyMDMS(D,"PropertyTax","OwnerType");U&&U.sort((e,n)=>e.name.localeCompare(n.name)),n.useEffect(()=>{const e=g.map(e=>e);c(null==d?void 0:d.key,e)},[g]),n.useEffect(()=>{var e;"employee"===v&&c(d.key,[{...null===(e=p[d.key])||void 0===e?void 0:e[0],...null==g?void 0:g[0]}])},[g]),n.useEffect(()=>{var e,n,t,l,o,i,a,r,u,d,s,c,v,m,E,S,_,f,C,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B;e=sessionStorage.getItem("eyeIconClicked"),(window.location.href.includes("edit")||window.location.href.includes("modify"))&&null!=p&&p.ConnectionHolderDetails&&(null===(n=Object.values(null==p||null===(t=p.ConnectionHolderDetails)||void 0===t?void 0:t[0]))||void 0===n?void 0:n.length)>1&&("gender"===e&&null!=g&&null!==(l=g[0])&&void 0!==l&&null!==(o=l.gender)&&void 0!==o&&o.code&&(null==p||null===(i=p.ConnectionHolderDetails)||void 0===i||null===(a=i[0])||void 0===a||null===(r=a.gender)||void 0===r?void 0:r.code)!==(null==g||null===(u=g[0])||void 0===u||null===(d=u.gender)||void 0===d?void 0:d.code)||"connectionHoldersMobileNumber"===e&&null!=g&&null!==(s=g[0])&&void 0!==s&&s.mobileNumber&&(null==p||null===(c=p.ConnectionHolderDetails)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.mobileNumber)!==(null==g||null===(m=g[0])||void 0===m?void 0:m.mobileNumber)||"fatherOrHusbandName"===e&&null!=g&&null!==(E=g[0])&&void 0!==E&&E.guardian&&(null==p||null===(S=p.ConnectionHolderDetails)||void 0===S||null===(_=S[0])||void 0===_?void 0:_.guardian)!==(null==g||null===(f=g[0])||void 0===f?void 0:f.guardian)||"relationship"===e&&null!=g&&null!==(C=g[0])&&void 0!==C&&null!==(N=C.relationship)&&void 0!==N&&N.code&&(null==p||null===(y=p.ConnectionHolderDetails)||void 0===y||null===(T=y[0])||void 0===T||null===(D=T.relationship)||void 0===D?void 0:D.code)!==(null==g||null===(A=g[0])||void 0===A||null===(I=A.relationship)||void 0===I?void 0:I.code)||"correspondenceAddress"===e&&null!=g&&null!==(h=g[0])&&void 0!==h&&h.address&&(null==p||null===(O=p.ConnectionHolderDetails)||void 0===O||null===(b=O[0])||void 0===b?void 0:b.address)!==(null==g||null===(L=g[0])||void 0===L?void 0:L.address)||"ownerType"===e&&null!=g&&null!==(R=g[0])&&void 0!==R&&null!==(w=R.ownerType)&&void 0!==w&&w.code&&(null==p||null===(W=p.ConnectionHolderDetails)||void 0===W||null===(P=W[0])||void 0===P||null===(M=P.ownerType)||void 0===M?void 0:M.code)!==(null==g||null===(x=g[0])||void 0===x||null===(B=x.ownerType)||void 0===B?void 0:B.code))&&(sessionStorage.removeItem("eyeIconClicked"),window.location.reload())},[null==p||null===(u=p.ConnectionHolderDetails)||void 0===u?void 0:u[0],g,p]),n.useEffect(()=>{null!=p&&p.ConnectionHolderDetails||N([{sameAsOwnerDetails:!0,name:"",gender:"",mobileNumber:"",guardian:"",relationship:"",address:"",ownerType:"",documentId:"",documentType:"",file:"",emailId:""}])},[null==p?void 0:p.ConnectionHolderDetails]);const k={focusIndex:y,connectionHolderDetails:g,setFocusIndex:T,formData:p,formState:S,t:f,setError:E,clearErrors:_,config:d,setConnectionHolderDetails:N,setIsErrors:I,isErrors:A,connectionHolderDetails:g,filters:C,menu:w,uploadedFile:h,setUploadedFile:O,file:b,setFile:L,dropdownData:W,GuardianOptions:[{name:"HUSBAND",code:"HUSBAND",i18nKey:"COMMON_MASTERS_OWNERTYPE_HUSBAND"},{name:"Father",code:"FATHER",i18nKey:"COMMON_MASTERS_OWNERTYPE_FATHER"}],Menu:U};return t.createElement(t.Fragment,null,g.map((e,n)=>t.createElement(he,H({key:e.key,index:n,connectionHolderDetail:e},k))))},WSActivationConnectionDetails:e=>{var a,r,u;let{config:d,onSelect:c,userType:v,formData:p,setError:E,formState:S,clearErrors:_}=e;const{t:f}=l.useTranslation(),C=(o.useLocation(),m(location.search)),[g,N]=window.location.href.includes("modify")?n.useState(null!=p&&p.connectionDetails?[null==p||null===(a=p.connectionDetails)||void 0===a?void 0:a[0]]:[Ot(null==C||null===(r=C.service)||void 0===r?void 0:r.toUpperCase())]):n.useState((null==p?void 0:p.connectionDetails)||[Ot(null==C||null===(u=C.service)||void 0===u?void 0:u.toUpperCase())]),[y,T]=n.useState({index:-1,type:""}),D=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),[A,I]=n.useState(!1),[h,O]=n.useState([]),[b,L]=n.useState([]),[R,w]=n.useState([]),[W,P]=n.useState([]),{isMdmsLoading:M,data:x}=Digit.Hooks.ws.useMDMS(D,"ws-services-masters",["connectionType","waterSource"]),{isWSServicesCalculationLoading:B,data:F}=Digit.Hooks.ws.useMDMS(D,"ws-services-calculation",["PipeSize"]);if(n.useEffect(()=>{const e=g.map(e=>e);c(null==d?void 0:d.key,e)},[g]),n.useEffect(()=>{var e,n,t,l,o,i;const a=(null==F||null===(e=F["ws-services-calculation"])||void 0===e?void 0:e.PipeSize)||[];null==a||a.forEach(e=>e.i18nKey=e.size);const r=(null==x||null===(n=x["ws-services-masters"])||void 0===n?void 0:n.connectionType)||[];null==r||r.forEach(e=>{var n;return e.i18nKey="WS_CONNECTIONTYPE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase()," ","_")});const u=(null==x||null===(t=x["ws-services-masters"])||void 0===t?void 0:t.waterSource)&&ht(null==x||null===(l=x["ws-services-masters"])||void 0===l?void 0:l.waterSource)||[];null==u||u.forEach(e=>{var n,t;return e.i18nKey="WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(n=e.code)||void 0===n||null===(t=n.split(".")[0])||void 0===t?void 0:t.toUpperCase()," ","_")});var d,c=[],v=[],p=u.length;for(d=0;d<p;d++){var m,E;c[u[d].i18nKey]||(c[u[d].i18nKey]=!0,v.push({i18nKey:null==u||null===(m=u[d])||void 0===m?void 0:m.i18nKey,code:null==u||null===(E=u[d])||void 0===E?void 0:E.code}))}if(O(a),L(r),w(v),null!=g&&null!==(o=g[0])&&void 0!==o&&null!==(i=o.waterSource)&&void 0!==i&&i.code){var S,_;const e=(null==x||null===(S=x["ws-services-masters"])||void 0===S?void 0:S.waterSource)&&ht(null==x||null===(_=x["ws-services-masters"])||void 0===_?void 0:_.waterSource)||[];null==e||e.forEach(e=>{var n;return e.i18nKey="WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),".","_")});const n=null==e?void 0:e.filter(e=>{var n,t,l,o;return(null==g||null===(n=g[0])||void 0===n||null===(t=n.waterSource)||void 0===t||null===(l=t.code)||void 0===l?void 0:l.split(".")[0])==(null==e||null===(o=e.code)||void 0===o?void 0:o.split(".")[0])});P(n)}},[x,F]),n.useEffect(()=>{"employee"===v&&c(d.key,{...p[d.key],...g})},[g]),M||B)return t.createElement(i.Loader,null);const U={focusIndex:y,allOwners:g,setFocusIndex:T,formData:p,formState:S,t:f,setError:E,clearErrors:_,config:d,setConnectionDetails:N,setIsErrors:I,isErrors:A,connectionDetails:g,connectionTypeList:b,waterSourceList:R,waterSubSourceList:W,pipeSizeList:h,filters:C,setWaterSubSourceList:P,mdmsData:x};return t.createElement(t.Fragment,null,g.map((e,n)=>t.createElement(bt,H({key:e.key,index:n,connectionDetail:e},U))))},WSActivationPlumberDetails:e=>{var o,i;let{config:a,onSelect:r,formData:u,setError:d,formState:s,clearErrors:c}=e;const{t:v}=l.useTranslation(),p=m(location.search),[E,S]=n.useState((null==u?void 0:u.plumberDetails)||[[{plumberName:"",plumberMobileNo:"",plumberLicenseNo:"",detailsProvidedBy:""}]]),[_,f]=n.useState({index:-1,type:""}),[C,g]=n.useState(!1);n.useEffect(()=>{const e=E.map(e=>e);r(null==a?void 0:a.key,e)},[E,null==u||null===(o=u.connectionDetails)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.connectionType]);const N={focusIndex:_,allOwners:E,setFocusIndex:f,formData:u,formState:s,t:v,setError:d,clearErrors:c,config:a,setPlumberDetails:S,setIsErrors:g,isErrors:C,plumberDetails:E,filters:p,options:[{i18nKey:"WS_PLUMBER_ULB",code:"ULB"},{i18nKey:"WS_PLUMBER_SELF",code:"Self"}],setPlumberDetails:S};return t.createElement(t.Fragment,null,E.map((e,n)=>t.createElement(Lt,H({key:e.key,index:n,plumberDetail:e},N))))},WSActivationPageDetails:e=>{var o;let{config:i,onSelect:a,userType:r,formData:u,setError:d,formState:s,clearErrors:c}=e;const{t:v}=l.useTranslation(),p=m(location.search),[E,S]=window.location.href.includes("modify")?n.useState(null!=u&&u.activationDetails?[null==u||null===(o=u.activationDetails)||void 0===o?void 0:o[0]]:[{meterId:"",meterInstallationDate:null,meterInitialReading:"",connectionExecutionDate:null}]):n.useState((null==u?void 0:u.activationDetails)||[{meterId:"",meterInstallationDate:null,meterInitialReading:"",connectionExecutionDate:null}]),[_,f]=n.useState({index:-1,type:""}),[C,g]=n.useState(!1);n.useEffect(()=>{const e=E.map(e=>e);a(null==i?void 0:i.key,e)},[E]),n.useEffect(()=>{"employee"===r&&a(i.key,{...u[i.key],...E})},[E]);const N={focusIndex:_,allOwners:E,setFocusIndex:f,formData:u,formData2:u,formState:s,t:v,setError:d,clearErrors:c,config:i,setActivationDetails:S,setIsErrors:g,isErrors:C,activationDetails:E,filters:p};return t.createElement(t.Fragment,null,E.map((e,n)=>t.createElement(Rt,H({key:e.key,index:n,activationDetail:e},N))))},WSActivationCommentsDetails:e=>{var l;let{t:o,config:a,userType:r,formData:u,onSelect:d}=e;const[s,c]=n.useState({comments:(null==u||null===(l=u.comments)||void 0===l?void 0:l.comments)||""});return n.useEffect(()=>{}),n.useEffect(()=>{"employee"===r&&d(a.key,{...u[a.key],...s})},[s]),t.createElement(t.Fragment,null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"700"},className:"card-label-smaller"},o("WF_COMMON_COMMENTS"),":"),t.createElement("div",{className:"field"},t.createElement(i.TextInput,{key:a.key,value:s.comments,onChange:e=>{c({...s,comments:e.target.value})}}))))},WSActivationSupportingDocuments:e=>{var l,o;let{t:a,config:r,userType:u,formData:d,onSelect:s}=e;Digit.ULBService.getStateId();const c=Digit.ULBService.getCurrentTenantId(),[v,p]=n.useState(null!=d&&null!==(l=d.supportingDocuments)&&void 0!==l&&l[0]?[null==d||null===(o=d.supportingDocuments)||void 0===o?void 0:o[0]]:[]),[m,E]=n.useState(null),[S,_]=n.useState(null),[f,C]=n.useState(null);return n.useEffect(()=>{s(r.key,{documents:v})},[v]),n.useEffect(()=>{"employee"===u&&s(r.key,{...d[r.key],...v})},[v]),n.useEffect(()=>{!function(){try{E(null);const e=function(){if(f){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(f.size>=5242880)E(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const n=function(){if(null!=f&&f.type&&!e.test(null==f?void 0:f.type))E(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=ye(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",f,c)).then(function(e){var n,t,l,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?_(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):E(a("CS_FILE_UPLOAD_ERROR"))})},function(){E(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[f]),n.useEffect(()=>{S&&p(e=>[{fileStoreId:S,documentUid:S}])},[S]),t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700"}},a("WF_APPROVAL_UPLOAD_HEAD"),":"),t.createElement("div",{className:"field"},t.createElement(i.UploadFile,{onUpload:e=>{!function(e){C(e.target.files[0])}(e)},onDelete:()=>{_(null)},message:S?"1 "+a("CS_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),textStyles:{width:"100%"},inputStyles:{width:"280px"},buttonType:"button",accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m}))))},WSDocumentsEmployee:e=>{var l,a,r,u;let{t:d,config:s,onSelect:c,formData:v,setError:p,clearErrors:m,formState:E}=e;Digit.ULBService.getCurrentTenantId();const S=Digit.ULBService.getStateId(),[_,f]=n.useState((null==v||null===(l=v.DocumentsRequired)||void 0===l?void 0:l.documents)||[]),[C,g]=n.useState(null),N=window.location.href.includes("modify")?"ModifyConnectionDocuments":window.location.href.includes("disconnection")?"DisconnectionDocuments":"Documents";let y="create";const{pathname:T}=o.useLocation(),D=T.includes("/modify-application/");T.includes("/property-mutate/"),D&&(y="update");const{isLoading:A,data:I}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(S,N);if(n.useEffect(()=>{c(s.key,{documents:_})},[_]),A)return t.createElement(i.Loader,null);const h=JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));if(window.location.href.includes("edit")&&(null==h||null===(a=h.applicationData)||void 0===a||null===(r=a.documents)||void 0===r?void 0:r.length)>0){var O;const e=(null==h||null===(O=h.applicationData)||void 0===O?void 0:O.documents)||[];null==e||e.map(e=>{var n;null==I||null===(n=I[N])||void 0===n||n.forEach(n=>{var t,l,o,i,a,r,u,d;(null!=n&&null!==(t=n.code)&&void 0!==t&&t.split(".")[1]?(null==n||null===(l=n.code)||void 0===l?void 0:l.split(".")[0])+"."+(null==n||null===(o=n.code)||void 0===o?void 0:o.split(".")[1]):null==n||null===(i=n.code)||void 0===i?void 0:i.split(".")[0])==(null!=e&&null!==(a=e.documentType)&&void 0!==a&&a.split(".")[1]?(null==e||null===(r=e.documentType)||void 0===r?void 0:r.split(".")[0])+"."+(null==e||null===(u=e.documentType)||void 0===u?void 0:u.split(".")[1]):null==e||null===(d=e.documentType)||void 0===d?void 0:d.split(".")[0])&&(n.auditDetails=e.auditDetails,n.documentType=n.documentType,n.documentUid=e.documentUid,n.fileStoreId=e.fileStoreId,n.id=e.id,n.status="ACTIVE")})})}return t.createElement("div",null,null==I||null===(u=I[N])||void 0===u?void 0:u.map((e,n)=>t.createElement(wt,{key:n,document:e,action:y,t:d,id:"pt-document-"+n,error:C,setError:g,setDocuments:f,documents:_,formData:v,setFormError:p,clearFormErrors:m,config:s,formState:E})),C&&t.createElement(i.Toast,{label:C,onClose:()=>g(null),error:!0}))},WSEditConnectionDetails:e=>{var a;let{config:r,onSelect:u,userType:d,formData:s,setError:c,formState:v,clearErrors:p}=e,E=m(location.search);const S=null==E?void 0:E.applicationNumber,{t:_}=l.useTranslation(),[f,C]=(o.useLocation(),n.useState(null!=s&&s.ConnectionDetails?[null==s||null===(a=s.ConnectionDetails)||void 0===a?void 0:a[0]]:[{water:!0,sewerage:!1,applicationNo:"",serviceName:"",proposedPipeSize:"",proposedTaps:"",proposedToilets:"",proposedWaterClosets:""}])),[g,N]=n.useState({index:-1,type:""}),y=Digit.ULBService.getStateId(),[T,D]=n.useState(!1),[A,I]=n.useState({water:!0,sewerage:!1}),[h,O]=n.useState([]),{isWSServicesCalculationLoading:b,data:L}=Digit.Hooks.ws.useMDMS(y,"ws-services-calculation",["PipeSize"]);if(n.useEffect(()=>{const e=f.map(e=>e);u(null==r?void 0:r.key,e)},[f]),n.useEffect(()=>{var e;const n=(null==L||null===(e=L["ws-services-calculation"])||void 0===e?void 0:e.PipeSize)||[];null==n||n.forEach(e=>e.i18nKey=e.size),O(n)},[L]),n.useEffect(()=>{var e,n;"employee"===d&&u(r.key,{...s[r.key],...f}),null!=f&&null!==(e=f[0])&&void 0!==e&&e.water&&I({water:!0,sewerage:!1}),null!=f&&null!==(n=f[0])&&void 0!==n&&n.sewerage&&I({water:!1,sewerage:!0})},[f]),n.useEffect(()=>{null!=s&&s.ConnectionDetails||C([{water:!0,sewerage:!1,applicationNo:"",serviceName:"",proposedPipeSize:"",proposedTaps:"",proposedToilets:"",proposedWaterClosets:""}])},[null==s?void 0:s.ConnectionDetails]),b)return t.createElement(i.Loader,null);const R={focusIndex:g,connectionDetails:f,setFocusIndex:N,formData:s,formState:v,t:_,setError:c,clearErrors:p,config:r,setConnectionDetails:C,setIsErrors:D,isErrors:T,pipeSizeList:h,wsServicesCalculationData:L,waterSewarageSelection:A,applicationNumber:S};return t.createElement(t.Fragment,null,f.map((e,n)=>t.createElement(Wt,H({key:e.key,index:n,connectionDetail:e},R))))},WSDisconnectionDocsRequired:e=>{var a;let{userType:r}=e;const{t:u}=l.useTranslation(),d=o.useHistory(),s=o.useRouteMatch(),c=Digit.ULBService.getStateId(),{isLoading:v,data:p}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(c,"DisconnectionDocuments");var m;return"citizen"===r?t.createElement(n.Fragment,null,t.createElement(i.Card,null,t.createElement(i.CardHeader,null,u("WS_COMMON_APPLICATION_DISCONNECTION")),t.createElement(i.CitizenInfoLabel,{style:{margin:"0px"},textStyle:{color:"#0B0C0C",paddingLeft:"40px",paddingRight:"40px"},text:u("WS_DOCS_REQUIRED_TIME"),showInfo:!1}),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},u("WS_NEW_CONNECTION_TEST_1")),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},u("WS_NEW_CONNECTION_TEST_2")),t.createElement(i.CardSubHeader,null,u("WS_DOC_REQ_SCREEN_LABEL")),t.createElement(i.CardText,{style:{color:"#0B0C0C",marginTop:"12px"}},u("WS_NEW_CONNECTION_TEST_3")),v?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,null==p||null===(m=p.DisconnectionDocuments)||void 0===m?void 0:m.map((e,n)=>{var l;return t.createElement("div",null,t.createElement("div",{style:{fontWeight:700,marginBottom:"8px"},key:n},t.createElement("div",{style:{display:"flex"}},t.createElement("div",null,n+1+"."," "),t.createElement("div",null," "+u(null==e?void 0:e.code.replace(".","_"))))),t.createElement("div",{style:{marginBottom:"16px",marginLeft:"18px",color:"gray"}},null==e||null===(l=e.dropdownData)||void 0===l?void 0:l.map((n,l)=>{var o;return(null==e||null===(o=e.dropdownData)||void 0===o?void 0:o.length)!==l+1?t.createElement("span",{style:{color:"gray"}},u(null==n?void 0:n.i18nKey)+", "):t.createElement("span",{style:{color:"gray"}},""+u(null==n?void 0:n.i18nKey))})))})),t.createElement(i.SubmitBar,{label:u("CS_COMMON_NEXT"),onSubmit:()=>{d.push(s.path.replace("docsrequired","application-form"))}}))):t.createElement("div",{style:{margin:"16px"}},t.createElement(i.Header,{styles:{fontSize:"32px",marginLeft:"18px"}},u("WS_WATER_AND_SEWERAGE_DISCONNECTION")),t.createElement(i.Card,null,v?t.createElement(i.Loader,null):t.createElement("div",{id:"documents-div"},null==p||null===(a=p.DisconnectionDocuments)||void 0===a?void 0:a.map((e,n)=>{var l;return t.createElement("div",{key:n,style:{marginTop:"16px"}},t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px",lineHeight:"28px",fontSize:"24px"}},u(null==e?void 0:e.code.replace(".","_"))),e.dropdownData&&e.dropdownData.length>1&&t.createElement("p",{style:{lineHeight:"24px",fontSize:"16px"}},u((null==e?void 0:e.code.replace(".","_"))+"_DESCRIPTION")),t.createElement("div",{style:{margin:"16px 0",lineHeight:"18px",fontSize:"16px"}},null==e||null===(l=e.dropdownData)||void 0===l?void 0:l.map((e,n)=>t.createElement("p",{style:{fontWeight:"bold",lineHeight:"32px"}},n+1+". "+u(null==e?void 0:e.i18nKey)))),t.createElement("p",{style:{fontSize:"16px"}},u((null==e?void 0:e.code.replace(".","_"))+"_BELOW_DESCRIPTION")))})),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:u("ACTION_TEST_APPLY"),onSubmit:()=>{d.push(s.path.replace("docsrequired","application-form"))},style:{margin:"10px 10px 0px 0px"},disabled:!!v}))))},WSDisconnectionForm:e=>{var l,a,r,u,d,c,v,p,m,E,_;let{t:f,config:C,onSelect:g,userType:N}=e;const D=Digit.ULBService.getStateId(),A=Digit.ULBService.getCurrentTenantId(),I=window.Digit.Utils.browser.isMobile(),h=Digit.SessionStorage.get("WS_DISCONNECTION"),O=o.useHistory(),b=o.useRouteMatch(),[L,R]=n.useState({type:h.WSDisconnectionForm?h.WSDisconnectionForm.type:"",date:h.WSDisconnectionForm?h.WSDisconnectionForm.date:"",endDate:h.WSDisconnectionForm&&(null==h||null===(l=h.WSDisconnectionForm)||void 0===l?void 0:l.endDate)||"",reason:h.WSDisconnectionForm?h.WSDisconnectionForm.reason:"",documents:h.WSDisconnectionForm?h.WSDisconnectionForm.documents:[]}),[w,W]=n.useState(h.WSDisconnectionForm?h.WSDisconnectionForm.documents:[]),[P,M]=n.useState(null),[x,B]=n.useState([]),[F,U]=n.useState([]),[k,H]=n.useState(!1),[j,z]=n.useState(!1),{isMdmsLoading:V,data:Y}=Digit.Hooks.ws.useMDMS(D,"ws-services-masters",["disconnectionType"]),{data:G}=Digit.Hooks.ws.useMDMS(D,"ws-services-masters",["DisconnectionReason"]),{isLoading:q,data:K}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(D,"DisconnectionDocuments"),{isLoading:X,data:$}=Digit.Hooks.ws.useDisconnectionWorkflow({tenantId:A}),Z=window.location.href.includes("resubmit"),{mutate:J}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:Q}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:ee}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:ne}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),te=()=>{M(null)};n.useEffect(()=>{const e={...L};e.documents=w,R(e)},[w]),n.useEffect(()=>{var e;const n=(null==Y||null===(e=Y["ws-services-masters"])||void 0===e?void 0:e.disconnectionType)||[];null==n||n.forEach(e=>{var n;return e.i18nKey="WS_DISCONNECTIONTYPE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase()," ","_")}),B(n)},[Y]),n.useEffect(()=>{var e;const n=(null==G||null===(e=G["ws-services-masters"])||void 0===e?void 0:e.DisconnectionReason)||[];null==n||n.forEach(e=>{var n;return e.i18nKey="WS_DISCONNECTIONTYPE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase()," ","_")}),U(n)},[G]),n.useEffect(()=>{Digit.SessionStorage.set("WS_DISCONNECTION",{...h,WSDisconnectionForm:L})},[L]);const le=()=>g(),oe=e=>{const n={...L};n[e.code]=e,R(n)};return V||q||j||X?t.createElement(i.Loader,null):"citizen"===N?t.createElement("div",null,"citizen"===N&&t.createElement(Mt,{currentStep:1}),t.createElement(i.FormStep,{config:C,onSelect:()=>g(C.key,{WSDisConnectionForm:L}),onSkip:le,t:f},t.createElement("div",{style:{padding:"0px 10px 10px 10px"}},t.createElement(i.CardHeader,null,f(Z?"RESUBMIT_DISCONNECTION_FORM":"WS_APPLICATION_FORM")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:f("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),label:""+f("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),text:null==h?void 0:h.connectionNo,className:"border-none"})),t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},f("WS_DISCONNECTION_TYPE")+"*"),t.createElement(i.RadioButtons,{t:f,options:x,optionsKey:"i18nKey",value:null===(ie=L.type)||void 0===ie||null===(ae=ie.value)||void 0===ae?void 0:ae.code,selectedOption:null===(re=L.type)||void 0===re?void 0:re.value,isMandatory:!1,onSelect:e=>oe({code:"type",value:e}),labelKey:"WS_DISCONNECTION_TYPE",inputStyle:I?{marginLeft:"unset"}:{}}),t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},f("WS_DISCONNECTION_PROPOSED_DATE")+"*",t.createElement("div",{className:"tooltip",style:{position:"absolute"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium",width:Digit.Utils.browser.isMobile()?"150px":"unset"}},f("SHOULD_BE_DATE")+" "+(null==$?void 0:$.slaDays)+" "+f("DAYS_OF_APPLICATION_DATE")))),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==L?void 0:L.date,onChange:e=>{R({...L,date:e})}})),"Temporary"===(null===(ue=L.type)||void 0===ue||null===(de=ue.value)||void 0===de?void 0:de.code)?t.createElement("div",null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},f("WS_DISCONNECTION_PROPOSED_END_DATE")+"*",t.createElement("div",{className:"tooltip",style:{position:"absolute"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium",width:Digit.Utils.browser.isMobile()?"150px":"unset"}},f("SHOULD_BE_DATE")+"  "+f("DAYS_OF_PROPOSED_DATE")))),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==L?void 0:L.endDate,onChange:e=>{R({...L,endDate:e})}}))):"",t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},f("WS_DISCONNECTION_REASON")+"*"),t.createElement(i.Dropdown,{option:F,isMandatory:!1,optionKey:"i18nKey",t:f,name:"reason",value:null===(se=L.reason)||void 0===se||null===(ce=se.value)||void 0===ce?void 0:ce.code,selectedOption:null===(ve=L.reason)||void 0===ve?void 0:ve.value,labelKey:"WS_DISCONNECTION_REASON",select:e=>oe({code:"reason",value:e})})),t.createElement(i.SubmitBar,{label:f("CS_COMMON_NEXT"),onSubmit:()=>{var e,n;const t=Al(Ut(new Date,null==$?void 0:$.slaDays),"yyyy-MM-dd").toString();S(null==L?void 0:L.date)<=S(t)?(M({key:"error",message:"PROPOSED_DISCONNECTION_INVALID_DATE"}),setTimeout(()=>{M(!1)},3e3)):"Temporary"==(null==L||null===(e=L.type)||void 0===e||null===(n=e.value)||void 0===n?void 0:n.code)&&parseInt(S(L.endDate))<=parseInt(S(null==L?void 0:L.date))?(console.log("Temporary connection"),M({key:"error",message:"PROPOSED_DISCONNECTION_INVALID_END_DATE"}),setTimeout(()=>{M(!1)},3e3)):O.push(b.path.replace("application-form","documents-upload"))},disabled:""===(null==L||null===(pe=L.reason)||void 0===pe?void 0:pe.value)||""===(null==L?void 0:L.reason)||""===(null==L?void 0:L.date)||""===(null==L?void 0:L.type)}),P&&t.createElement(i.Toast,{error:"error"===(null==P?void 0:P.key),label:f(null==P?void 0:P.message),onClose:()=>M(null)}))),t.createElement(i.CitizenInfoLabel,{style:{margin:"0px"},textStyle:{color:"#0B0C0C"},text:f("WS_DISONNECT_APPL_INFO"),info:f("CS_COMMON_INFO")})):t.createElement("div",{style:{margin:"16px"}},t.createElement(i.Header,{styles:{fontSize:"32px",marginLeft:"18px"}},f("WS_WATER_AND_SEWERAGE_DISCONNECTION")),t.createElement(i.FormStep,{config:C,onSelect:()=>{g(C.key,{WSDisConnectionForm:{...L,documents:w}})},onSkip:le,t:f},t.createElement("div",{style:{padding:"10px",paddingTop:"20px",marginTop:"10px"}},t.createElement(i.CardSectionHeader,null,f("CS_TITLE_APPLICATION_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:f("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),label:""+f("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),text:null==h||null===(a=h.applicationData)||void 0===a?void 0:a.connectionNo,className:"border-none"})),t.createElement(i.CardSectionHeader,null,f("WS_DISCONNECTION_TYPE")+"*",t.createElement("div",{className:"tooltip",style:{marginLeft:"8px"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium",width:Digit.Utils.browser.isMobile()&&window.location.href.includes("/employee")?"200px":""}},""+f("WS_DISCONNECTION_PERMANENT_TOOLTIP"),t.createElement("br",null),t.createElement("br",null),""+f("WS_DISCONNECTION_TEMPORARY_TOOLTIP")))),t.createElement(i.RadioButtons,{t:f,options:x,optionsKey:"i18nKey",value:null===(r=L.type)||void 0===r||null===(u=r.value)||void 0===u?void 0:u.code,selectedOption:null===(d=L.type)||void 0===d?void 0:d.value,isMandatory:!1,onSelect:e=>oe({code:"type",value:e}),labelKey:"WS_DISCONNECTION_TYPE",style:{display:"flex",gap:"0px 3rem"},inputStyle:I?{marginLeft:"unset"}:{}}),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},f("WS_DISCONNECTION_PROPOSED_DATE")+"*",t.createElement("div",{className:"tooltip",style:{position:"absolute",marginLeft:"4px"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium"}},f("SHOULD_BE_DATE")+" "+(null==$?void 0:$.slaDays)+" "+f("DAYS_OF_APPLICATION_DATE")))),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==L?void 0:L.date,onChange:e=>{R({...L,date:e})}}))),"Temporary"===(null===(c=L.type)||void 0===c||null===(v=c.value)||void 0===v?void 0:v.code)?t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},f("WS_DISCONNECTION_PROPOSED_END_DATE")+"*",t.createElement("div",{className:"tooltip",style:{position:"absolute",marginLeft:"4px"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium"}},f("SHOULD_BE_DATE")+"  "+f("DAYS_OF_APPLICATION_END_DATE")))),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==L?void 0:L.endDate,onChange:e=>{R({...L,endDate:e})}}))):"",t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},f("WS_DISCONNECTION_REASON")+"*"),t.createElement("div",{className:"field"},t.createElement(i.Dropdown,{option:F,isMandatory:!1,optionKey:"i18nKey",t:f,name:"reason",value:null===(p=L.reason)||void 0===p||null===(m=p.value)||void 0===m?void 0:m.code,selectedOption:null===(E=L.reason)||void 0===E?void 0:E.value,select:e=>oe({code:"reason",value:e}),labelKey:"WS_DISCONNECTION_REASON"}))),t.createElement(i.CardSectionHeader,{style:{marginBottom:"8px"}},f("WS_DISCONNECTION_DOCUMENTS")+"*"),null==K||null===(_=K.DisconnectionDocuments)||void 0===_?void 0:_.map((e,n)=>t.createElement(hl,{key:n,document:e,t:f,error:P,setError:M,setDocuments:W,documents:w,setCheckRequiredFields:H})),P&&t.createElement(i.Toast,{error:"error"===(null==P?void 0:P.key),label:f(null==P?void 0:P.message),warning:null==P?void 0:P.warning,onClose:()=>M(null)}))),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:f("ACTION_TEST_SUBMIT"),onSubmit:()=>function(e){try{const n=Al(Ut(new Date,null==$?void 0:$.slaDays),"yyyy-MM-dd").toString(),t=function(){if(S(null==e?void 0:e.date)<=S(n))M({key:"error",message:"PROPOSED_DISCONNECTION_INVALID_DATE"}),setTimeout(()=>{M(!1)},3e3);else{const n=function(n,t){if("Temporary"==(null==e||null===(n=e.type)||void 0===n||null===(t=n.value)||void 0===t?void 0:t.name)&&S(null==e?void 0:e.endDate)<=S(null==e?void 0:e.date))M({key:"error",message:"PROPOSED_DISCONNECTION_INVALID_END_DATE"}),setTimeout(()=>{M(!1)},3e3);else{const n=function(n){var t;if(!(q||w.length<2||""===(null==L||null===(n=L.reason)||void 0===n?void 0:n.value)||""===(null==L?void 0:L.reason)||""===(null==L?void 0:L.date)||""===(null==L?void 0:L.type)))return Promise.resolve(y(e,h,null==h||null===(t=h.applicationData)||void 0===t?void 0:t.serviceType)).then(function(e){const n=function(n){if(null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n.water){const n=function(){if(J)return z(!0),Promise.resolve(J(e,{onError:(e,n)=>{var t,l,o,i,a,r;z(!1),M({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(te,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(T(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){let n={WaterConnection:e};return n={...n,disconnectRequest:!0},Promise.resolve(Q(n,{onError:(e,n)=>{var t,l,o,i,a,r;z(!1),M({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(te,5e3)},onSuccess:(e,n)=>{var t,l,o;Digit.SessionStorage.set("WS_DISCONNECTION",{...h,DisconnectionResponse:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),O.push("/digit-ui/employee/ws/ws-disconnection-response?applicationNumber="+(null==e||null===(l=e.WaterConnection)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}else{const n=function(n){if(null!=e&&null!==(n=e.SewerageConnection)&&void 0!==n&&n.sewerage){const n=function(){if(ee)return z(!0),Promise.resolve(ee(e,{onError:(e,n)=>{var t,l,o,i,a,r;z(!1),M({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(te,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(T(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){let n={SewerageConnection:e};return n={...n,disconnectRequest:!0},Promise.resolve(ne(n,{onError:(e,n)=>{var t,l,o,i,a,r;z(!1),M({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(te,5e3)},onSuccess:(e,n)=>{var t,l,o;Digit.SessionStorage.set("WS_DISCONNECTION",{...h,DisconnectionResponse:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),O.push("/digit-ui/employee/ws/ws-disconnection-response?applicationNumber="+(null==e||null===(l=e.SewerageConnections)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})});M({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{M(!1)},3e3)}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}(L),style:{margin:"10px 10px 0px 0px"}})));var ie,ae,re,ue,de,se,ce,ve,pe},WSRestorationForm:e=>{var l,a,r,u;let{t:d,config:c,onSelect:v,userType:p}=e;const m=Digit.ULBService.getStateId(),E=Digit.ULBService.getCurrentTenantId(),_=(window.Digit.Utils.browser.isMobile(),Digit.SessionStorage.get("WS_DISCONNECTION")),f=o.useHistory(),C=o.useRouteMatch(),[g,N]=n.useState({type:_.WSDisconnectionForm?_.WSDisconnectionForm.type:"",date:_.WSDisconnectionForm?_.WSDisconnectionForm.date:"",reason:_.WSDisconnectionForm?_.WSDisconnectionForm.reason:"",documents:_.WSDisconnectionForm?_.WSDisconnectionForm.documents:[]}),[y,T]=n.useState(_.WSDisconnectionForm?_.WSDisconnectionForm.documents:[]),[A,I]=n.useState(null),[h,O]=n.useState([]),[b,L]=n.useState(!1),[R,w]=n.useState(!1),{isMdmsLoading:W,data:P}=Digit.Hooks.ws.useMDMS(m,"ws-services-masters",["disconnectionType"]),{isLoading:M}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(m,"DisconnectionDocuments"),{isLoading:x,data:B}=Digit.Hooks.ws.useDisconnectionWorkflow({tenantId:E}),F=window.location.href.includes("resubmit"),{mutate:U}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:k}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:H}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:j}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),z=()=>{I(null)};n.useEffect(()=>{const e={...g};e.documents=y,N(e)},[y]),n.useEffect(()=>{var e;const n=(null==P||null===(e=P["ws-services-masters"])||void 0===e?void 0:e.disconnectionType)||[];null==n||n.forEach(e=>{var n;return e.i18nKey="WS_DISCONNECTIONTYPE_"+s(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase()," ","_")}),console.log("disconnectionTypes",n),O(n)},[P]),n.useEffect(()=>{Digit.SessionStorage.set("WS_DISCONNECTION",{..._,WSDisconnectionForm:g})},[g]);const V=()=>v(),Y=e=>{const n={...g};n[e.code]=e,N(n)};return W||M||R||x?t.createElement(i.Loader,null):"citizen"===p?t.createElement("div",null,"citizen"===p&&t.createElement(Mt,{currentStep:1}),t.createElement(i.FormStep,{config:c,onSelect:()=>v(c.key,{WSDisConnectionForm:g}),onSkip:V,t:d},t.createElement("div",{style:{padding:"0px 10px 10px 10px"}},t.createElement(i.CardHeader,null,d(F?"RESUBMIT_RESTORATION_FORM":"WS_APPLICATION_FORM")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:d("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),label:""+d("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),text:null==_?void 0:_.connectionNo,className:"border-none"})),t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},d("WS_RESTORATION_PROPOSED_DATE")+"*"),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==g?void 0:g.date,onChange:e=>{N({...g,date:e})}})),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{display:"inline"}},d("WS_DISCONNECTION_REASON")+"*"),t.createElement(i.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:d,name:"reason",value:null===(G=g.reason)||void 0===G?void 0:G.value,onChange:e=>Y({code:"reason",value:e.target.value})})),t.createElement(i.SubmitBar,{label:d("CS_COMMON_NEXT"),onSubmit:()=>{Al(Ut(new Date,null==B?void 0:B.slaDays),"yyyy-MM-dd").toString(),f.push(C.path.replace("restoration-application","check"))},disabled:""===(null==g||null===(q=g.reason)||void 0===q?void 0:q.value)||""===(null==g?void 0:g.reason)||""===(null==g?void 0:g.date)}),A&&t.createElement(i.Toast,{error:"error"===(null==A?void 0:A.key),label:d(null==A?void 0:A.message),onClose:()=>I(null)}))),t.createElement(i.CitizenInfoLabel,{style:{margin:"0px"},textStyle:{color:"#0B0C0C"},text:d("WS_DISONNECT_APPL_INFO"),info:d("CS_COMMON_INFO")})):(console.log("applicationData",_),t.createElement("div",{style:{margin:"16px"}},t.createElement(i.Header,{styles:{fontSize:"32px",marginLeft:"18px"}},d("WS_WATER_AND_SEWERAGE_RESTORATION")),t.createElement(i.FormStep,{config:c,onSelect:()=>{v(c.key,{WSDisConnectionForm:{...g,documents:y}})},onSkip:V,t:d},t.createElement("div",{style:{padding:"10px",paddingTop:"20px",marginTop:"10px"}},t.createElement(i.CardSectionHeader,null,d("CS_TITLE_APPLICATION_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:d("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),label:""+d("PDF_STATIC_LABEL_CONSUMER_NUMBER_LABEL"),text:null==_||null===(l=_.applicationData)||void 0===l?void 0:l.connectionNo,className:"border-none"}),t.createElement(i.Row,{key:d("PDF_STATIC_LABEL_TYPE_OF_SERVICE_LABEL"),label:""+d("PDF_STATIC_LABEL_TYPE_OF_SERVICE_LABEL"),text:null==_||null===(a=_.applicationData)||void 0===a?void 0:a.serviceType,className:"border-none"}),t.createElement(i.Row,{key:d("PDF_STATIC_LABEL_PROPERTY_ID_LABEL"),label:""+d("PDF_STATIC_LABEL_PROPERTY_ID_LABEL"),text:null==_||null===(r=_.applicationData)||void 0===r?void 0:r.propertyId,className:"border-none"})),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},d("WS_RESTORATION_PROPOSED_DATE")+"*",t.createElement("div",{className:"tooltip",style:{position:"absolute",marginLeft:"4px"}},t.createElement(i.InfoIcon,null),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:Digit.Utils.browser.isMobile()?"unset":"nowrap",fontSize:"medium"}},d("SHOULD_BE_DATE")+" "+(null==B?void 0:B.slaDays)+" "+d("DAYS_OF_APPLICATION_DATE")))),t.createElement("div",{className:"field"},t.createElement(i.DatePicker,{date:null==g?void 0:g.date,onChange:e=>{N({...g,date:e})}}))),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{marginTop:"-5px",fontWeight:"700",display:"inline"},className:"card-label-smaller"},d("WS_RESTORATION_REASON")+"*"),t.createElement("div",{className:"field"},t.createElement(i.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:d,name:"reason",value:null===(u=g.reason)||void 0===u?void 0:u.value,onChange:e=>Y({code:"reason",value:e.target.value})}))),A&&t.createElement(i.Toast,{error:"error"===(null==A?void 0:A.key),label:d(null==A?void 0:A.message),warning:null==A?void 0:A.warning,onClose:()=>I(null)}))),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:d("ACTION_TEST_SUBMIT"),onSubmit:()=>function(e){try{const n=Al(Ut(new Date,null==B?void 0:B.slaDays),"yyyy-MM-dd").toString(),t=function(){if(S(null==e?void 0:e.date)<=S(n))I({key:"error",message:"PROPOSED_DISCONNECTION_INVALID_DATE"}),setTimeout(()=>{I(!1)},3e3);else{const n=function(n){var t;if(""!==(null==g||null===(n=g.reason)||void 0===n?void 0:n.value)&&""!==(null==g?void 0:g.reason)&&""!==(null==g?void 0:g.date))return Promise.resolve(function(e,n,t){try{var l,o,i,a,r,u,d,s,c,v,p,m,E,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee;const Ae=Digit.UserService.getType();let Ie=[];if((null==n||null===(l=n.applicationData)||void 0===l||null===(o=l.plumberInfo)||void 0===o?void 0:o.length)>0){var ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De;let e={};null!=n&&null!==(ne=n.applicationData)&&void 0!==ne&&null!==(te=ne.plumberInfo)&&void 0!==te&&null!==(le=te[0])&&void 0!==le&&le.licenseNo&&(e.licenseNo=null==n||null===(oe=n.applicationData)||void 0===oe||null===(ie=oe.plumberInfo)||void 0===ie||null===(ae=ie[0])||void 0===ae?void 0:ae.licenseNo),null!=n&&null!==(re=n.applicationData)&&void 0!==re&&null!==(ue=re.plumberInfo)&&void 0!==ue&&null!==(de=ue[0])&&void 0!==de&&de.mobileNumber&&(e.mobileNumber=null==n||null===(se=n.applicationData)||void 0===se||null===(ce=se.plumberInfo)||void 0===ce||null===(ve=ce[0])||void 0===ve?void 0:ve.mobileNumber),null!=n&&null!==(pe=n.applicationData)&&void 0!==pe&&null!==(me=pe.plumberInfo)&&void 0!==me&&null!==(Ee=me[0])&&void 0!==Ee&&Ee.id&&(e.id=null==n||null===(Se=n.applicationData)||void 0===Se||null===(_e=Se.plumberInfo)||void 0===_e||null===(fe=_e[0])||void 0===fe?void 0:fe.id),null!=n&&null!==(Ce=n.applicationData)&&void 0!==Ce&&null!==(ge=Ce.plumberInfo)&&void 0!==ge&&null!==(Ne=ge[0])&&void 0!==Ne&&Ne.name&&(e.name=null==n||null===(ye=n.applicationData)||void 0===ye||null===(Te=ye.plumberInfo)||void 0===Te||null===(De=Te[0])||void 0===De?void 0:De.name),Ie=[e]}let he={WaterConnection:{id:null==n||null===(i=n.applicationData)||void 0===i?void 0:i.id,applicationNo:null==n||null===(a=n.applicationData)||void 0===a?void 0:a.applicationNo,applicationStatus:null==n||null===(r=n.applicationData)||void 0===r?void 0:r.applicationStatus,status:null==n||null===(u=n.applicationData)||void 0===u?void 0:u.status,connectionNo:null==n||null===(d=n.applicationData)||void 0===d?void 0:d.connectionNo,connectionHolders:null==n||null===(s=n.applicationData)||void 0===s?void 0:s.connectionHolders,applicationType:"WATER_RECONNECTION",dateEffectiveFrom:S(null==e?void 0:e.date),isdisconnection:!0,isDisconnectionTemporary:"Temporary"===(null==e||null===(c=e.type)||void 0===c||null===(v=c.value)||void 0===v?void 0:v.code)||"TEMPORARY"===(null==e||null===(p=e.type)||void 0===p||null===(m=p.value)||void 0===m?void 0:m.code),disconnectionReason:null==e||null===(E=e.reason.value)||void 0===E?void 0:E.code,documents:null==e?void 0:e.documents,water:!0,sewerage:!1,proposedTaps:(null==n||null===(_=n.applicationData)||void 0===_?void 0:_.proposedTaps)&&Number(null==n||null===(f=n.applicationData)||void 0===f?void 0:f.proposedTaps),proposedPipeSize:(null==n||null===(C=n.applicationData)||void 0===C||null===(g=C.proposedPipeSize)||void 0===g?void 0:g.size)&&Number(null==n||null===(N=n.applicationData)||void 0===N||null===(y=N.proposedPipeSize)||void 0===y?void 0:y.size),service:"Water",property:null==n||null===(T=n.applicationData)||void 0===T?void 0:T.property,propertyId:null==n||null===(D=n.applicationData)||void 0===D?void 0:D.propertyId,oldConnectionNo:null,plumberInfo:(null===(A=Ie)||void 0===A?void 0:A.length)>0?Ie:null,roadCuttingInfo:null==n||null===(I=n.applicationData)||void 0===I?void 0:I.roadCuttingInfo,roadCuttingArea:null,roadType:null,connectionExecutionDate:null==n||null===(h=n.applicationData)||void 0===h?void 0:h.connectionExecutionDate,noOfTaps:null==n||null===(O=n.applicationData)||void 0===O?void 0:O.noOfTaps,additionalDetails:null==n||null===(b=n.applicationData)||void 0===b?void 0:b.additionalDetails,tenantId:null==n||null===(L=n.applicationData)||void 0===L?void 0:L.tenantId,connectionType:n.applicationData.connectionType||null,waterSource:n.applicationData.waterSource||null,processInstance:{...null==n||null===(R=n.applicationData)||void 0===R?void 0:R.processInstance,action:"INITIATE",businessService:"WSReconnection"},channel:"citizen"===Ae?"CITIZEN":"CFC_COUNTER"},disconnectRequest:!1};n.applicationData.connectionType&&(n.applicationData.meterInstallationDate&&(he.WaterConnection.meterInstallationDate=n.applicationData.meterInstallationDate),n.applicationData.meterId&&(he.WaterConnection.meterId=n.applicationData.meterId));let Oe={SewerageConnection:{id:null==n||null===(w=n.applicationData)||void 0===w?void 0:w.id,applicationNo:null==n||null===(W=n.applicationData)||void 0===W?void 0:W.applicationNo,applicationStatus:null==n||null===(P=n.applicationData)||void 0===P?void 0:P.applicationStatus,status:null==n||null===(M=n.applicationData)||void 0===M?void 0:M.status,connectionNo:null==n||null===(x=n.applicationData)||void 0===x?void 0:x.connectionNo,connectionHolders:null==n||null===(B=n.applicationData)||void 0===B?void 0:B.connectionHolders,applicationType:"WATER_RECONNECTION",dateEffectiveFrom:S(null==e?void 0:e.date),isdisconnection:!0,isDisconnectionTemporary:"Temporary"===(null==e||null===(F=e.type)||void 0===F||null===(U=F.value)||void 0===U?void 0:U.code),disconnectionReason:null==e||null===(k=e.reason.value)||void 0===k?void 0:k.code,documents:null==e?void 0:e.documents,water:!1,sewerage:!0,proposedWaterClosets:(null==n||null===(H=n.applicationData)||void 0===H?void 0:H.proposedWaterClosets)&&Number(null==n||null===(j=n.applicationData)||void 0===j?void 0:j.proposedWaterClosets),proposedToilets:(null==n||null===(z=n.applicationData)||void 0===z?void 0:z.proposedToilets)&&Number(null==n||null===(V=n.applicationData)||void 0===V?void 0:V.proposedToilets),service:"Sewerage",property:null==n||null===(Y=n.applicationData)||void 0===Y?void 0:Y.property,propertyId:null==n||null===(G=n.applicationData)||void 0===G?void 0:G.propertyId,oldConnectionNo:null,plumberInfo:(null===(q=Ie)||void 0===q?void 0:q.length)>0?Ie:null,roadCuttingInfo:null==n||null===(K=n.applicationData)||void 0===K?void 0:K.roadCuttingInfo,roadCuttingArea:null,roadType:null,connectionExecutionDate:null==n||null===(X=n.applicationData)||void 0===X?void 0:X.connectionExecutionDate,noOfWaterClosets:null==n||null===($=n.applicationData)||void 0===$?void 0:$.noOfWaterClosets,noOfToilets:null==n||null===(Z=n.applicationData)||void 0===Z?void 0:Z.noOfToilets,additionalDetails:null==n||null===(J=n.applicationData)||void 0===J?void 0:J.additionalDetails,tenantId:null==n||null===(Q=n.applicationData)||void 0===Q?void 0:Q.tenantId,connectionType:"Non Metered",waterSource:n.applicationData.waterSource||null,processInstance:{...null==n||null===(ee=n.applicationData)||void 0===ee?void 0:ee.processInstance,action:"INITIATE",businessService:"SWReconnection"},channel:"citizen"===Ae?"CITIZEN":"CFC_COUNTER"},disconnectRequest:!1};return Promise.resolve("WATER"===t?he:Oe)}catch(e){return Promise.reject(e)}}(e,_,null==_||null===(t=_.applicationData)||void 0===t?void 0:t.serviceType)).then(function(e){const n=function(n){if(null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n.water){e.WaterConnection.isdisconnection=!1,e.WaterConnection.isDisconnectionTemporary=!0,e.WaterConnection.reconnectionReason=e.WaterConnection.disconnectionReason,e.WaterConnection.disconnectionReason="",e.reconnectRequest=!0,e.disconnectRequest=!1;const n=function(){if(U)return w(!0),Promise.resolve(U(e,{onError:(e,n)=>{var t,l,o,i,a,r;w(!1),I({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(z,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(D(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){let n={WaterConnection:e};return n={...n,disconnectRequest:!1,reconnectRequest:!0},console.log("response"),Promise.resolve(k(n,{onError:(e,n)=>{var t,l,o,i,a,r;w(!1),I({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(z,5e3)},onSuccess:(e,n)=>{var t,l,o;Digit.SessionStorage.set("WS_DISCONNECTION",{..._,DisconnectionResponse:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),f.push("/digit-ui/employee/ws/ws-restoration-response?applicationNumber="+(null==e||null===(l=e.WaterConnection)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}else{const n=function(n){if(null!=e&&null!==(n=e.SewerageConnection)&&void 0!==n&&n.sewerage){e.SewerageConnection.isdisconnection=!1,e.SewerageConnection.reconnectionReason=e.SewerageConnection.disconnectionReason,e.SewerageConnection.disconnectionReason="",e.SewerageConnection.isDisconnectionTemporary=!0,e.reconnectRequest=!0,e.disconnectRequest=!1;const n=function(){if(H)return w(!0),Promise.resolve(H(e,{onError:(e,n)=>{var t,l,o,i,a,r;w(!1),I({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(z,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(D(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){let n={SewerageConnection:e};return n={...n,disconnectRequest:!1,reconnectRequest:!0},Promise.resolve(j(n,{onError:(e,n)=>{var t,l,o,i,a,r;w(!1),I({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(z,5e3)},onSuccess:(e,n)=>{var t,l,o;Digit.SessionStorage.set("WS_DISCONNECTION",{..._,DisconnectionResponse:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),f.push("/digit-ui/employee/ws/ws-restoration-response?applicationNumber="+(null==e||null===(l=e.SewerageConnections)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})});I({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{I(!1)},3e3)}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}(g),style:{margin:"10px 10px 0px 0px"}}))));var G,q},WSDisconnectionDocumentsForm:function(e){var l;let{t:a,config:r,onSelect:u,userType:d}=e;const s=Digit.ULBService.getStateId(),c=Digit.SessionStorage.get("WS_DISCONNECTION"),[v,p]=n.useState(c.WSDisconnectionForm.documents?c.WSDisconnectionForm.documents:[]),[m,E]=n.useState(null),[S,_]=n.useState(!1),f=o.useHistory(),C=o.useRouteMatch();n.useEffect(()=>{Digit.SessionStorage.set("WS_DISCONNECTION",{...c,WSDisconnectionForm:{...c.WSDisconnectionForm,documents:v}})},[v]);const{isLoading:g,data:N}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSServicesMasters(s,"DisconnectionDocuments");return g?t.createElement(i.Loader,null):t.createElement("div",{style:{marginTop:"19px"}},"citizen"===d&&t.createElement(Mt,{currentStep:2}),t.createElement(i.FormStep,{t:a,config:r,onSelect:()=>{u(r.key,{WSDisconnectionDocumentsForm:v})}},t.createElement(i.CardHeader,null,a("WS_DISCONNECTION_UPLOAD_DOCUMENTS")),null==N||null===(l=N.DisconnectionDocuments)||void 0===l?void 0:l.map((e,n)=>t.createElement(Ol,{key:n,document:e,t:a,error:m,setError:E,setDocuments:p,documents:v,setCheckRequiredFields:_})),t.createElement(i.SubmitBar,{label:a("CS_COMMON_NEXT"),onSubmit:()=>{f.push(C.path.replace("documents-upload","check"))},disabled:v.length<2}),m&&t.createElement(i.Toast,{error:"error"===(null==m?void 0:m.key),label:a(null==m?void 0:m.message),onClose:()=>E(null)})))},WSDisconnectAcknowledgement:()=>{var e;const{t:n}=l.useTranslation(),a=Digit.SessionStorage.get("WS_DISCONNECTION");return t.createElement(i.Card,{style:{padding:"10px"}},t.createElement(i.CardSectionHeader,null,t.createElement(bl,{isSuccess:!0,message:n("WS_APPLICATION_COMPLETED_SUCCESSFULLY_LABEL"),applicationNumber:null==a||null===(e=a.DisconnectionResponse)||void 0===e?void 0:e.applicationNo})," ",t.createElement("successSvg",null)),t.createElement(i.CardText,null,n("WS_DISCONNECTION_APPLICATION_SUCC_MSG")),t.createElement(i.SubmitBar,{label:n("WS_DOWNLOAD_ACK_FORM"),onSubmit:()=>{const e=null==a?void 0:a.DisconnectionResponse;se(e,null==a?void 0:a.property,null==e?void 0:e.tenantId,n).then(e=>Digit.Utils.pdf.generatev1(e))}}),t.createElement(o.Link,{to:"/digit-ui/citizen"},t.createElement(i.LinkButton,{label:n("CORE_COMMON_GO_TO_HOME"),onClick:()=>Digit.SessionStorage.del("WS_DISCONNECTION")})))},WSRestorationAcknowledgement:()=>{var e;const{t:n}=l.useTranslation(),a=Digit.SessionStorage.get("WS_DISCONNECTION");return t.createElement(i.Card,{style:{padding:"10px"}},t.createElement(i.CardSectionHeader,null,t.createElement(Ll,{isSuccess:!0,message:n("WS_APPLICATION_COMPLETED_SUCCESSFULLY_LABEL"),applicationNumber:null==a||null===(e=a.DisconnectionResponse)||void 0===e?void 0:e.applicationNo})," ",t.createElement("successSvg",null)),t.createElement(i.CardText,null,n("WS_RESTORATION_APPLICATION_SUCC_MSG")),t.createElement(i.SubmitBar,{label:n("WS_DOWNLOAD_ACK_FORM"),onSubmit:()=>{const e=null==a?void 0:a.DisconnectionResponse;Se(e,null==a?void 0:a.property,null==e?void 0:e.tenantId,n).then(e=>Digit.Utils.pdf.generatev1(e))}}),t.createElement(o.Link,{to:"/digit-ui/citizen"},t.createElement(i.LinkButton,{label:n("CORE_COMMON_GO_TO_HOME"),onClick:()=>Digit.SessionStorage.del("WS_DISCONNECTION")})))},WSDisconnectionAppDetails:e=>{let{config:o,onSelect:i,formData:a,setError:r,formState:u,clearErrors:d}=e;const{t:s}=l.useTranslation(),[c,v]=n.useState((null==a?void 0:a.disConnectionDetails)||[[{consumerNumber:"",disConnectionType:"",disConnectionProposeDate:"",disConnectionReason:""}]]),[p,m]=n.useState({index:-1,type:""}),[E,S]=n.useState(!1),[_,f]=n.useState([]),C=Digit.ULBService.getStateId(),g=Digit.ULBService.getCurrentTenantId(),{data:N}=Digit.Hooks.ws.useMDMS(C,"ws-services-masters",["disconnectionType"]);Digit.Hooks.ws.useDisconnectionWorkflow({tenantId:g}),n.useEffect(()=>{var e;const n=(null==N||null===(e=N["ws-services-masters"])||void 0===e?void 0:e.disconnectionType)||[];null==n||n.forEach(e=>{var n,t,l,o;e.code=null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),e.i18nKey="WS_DISCONNECTIONTYPE_"+(null==e||null===(t=e.code)||void 0===t?void 0:t.toUpperCase()),e.value=null==e||null===(l=e.code)||void 0===l?void 0:l.toUpperCase(),e.name=null==e||null===(o=e.code)||void 0===o?void 0:o.toUpperCase()}),f(n)},[N]),n.useEffect(()=>{const e=c.map(e=>e);i(null==o?void 0:o.key,e)},[c]);const y={focusIndex:p,setFocusIndex:m,t:s,config:o,setError:r,clearErrors:d,formState:u,disConnectionDetails:c,setIsErrors:S,setDisConnectionDetails:v,disconnectionTypeList:_};return t.createElement(t.Fragment,null,c.map((e,n)=>t.createElement(Rl,H({key:e.key,index:n,disConnectionDetail:e},y))))},WSInbox:e=>{let{parentRoute:r}=e;const{t:u}=l.useTranslation(),d=Digit.ULBService.getCurrentTenantId(),s=window.location.pathname.includes("water/inbox"),c={mobileNumber:"",applicationNumber:"",consumerNo:""},v={businessService:s?["NewWS1","ModifyWSConnection","DisconnectWSConnection"]:["NewSW1","ModifySWConnection","DisconnectSWConnection"],moduleName:s?"ws-services":"sw-services",locality:[],assignee:"ASSIGNED_TO_ALL",applicationStatus:[],applicationType:[]},p={sortBy:"createdTime",limit:window.Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"ASC"};sessionStorage.removeItem("Digit.BILL.INBOX"),sessionStorage.removeItem("Digit.SW.INBOX");const m=Digit.SessionStorage.get("BILL.INBOX"),E=n.useMemo(()=>m||{filterForm:v,searchForm:c,tableForm:p},[Object.values((null==m?void 0:m.filterForm)||{}),Object.values((null==m?void 0:m.searchForm)||{}),Object.values((null==m?void 0:m.tableForm)||{})]),[S,_]=n.useReducer(function(e,n){if(s)switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("BILL.INBOX",{...e,searchForm:n.data}),{...e,searchForm:n.data};case"mutateFilterForm":return Digit.SessionStorage.set("BILL.INBOX",{...e,filterForm:n.data}),{...e,filterForm:n.data};case"mutateTableForm":return Digit.SessionStorage.set("BILL.INBOX",{...e,tableForm:n.data}),{...e,tableForm:n.data}}else switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("BILL.SW.INBOX",{...e,searchForm:n.data}),{...e,searchForm:n.data};case"mutateFilterForm":return Digit.SessionStorage.set("BILL.SW.INBOX",{...e,filterForm:n.data}),{...e,filterForm:n.data};case"mutateTableForm":return Digit.SessionStorage.set("BILL.SW.INBOX",{...e,tableForm:n.data}),{...e,tableForm:n.data}}},E),{data:f,isLoading:C}=Digit.Hooks.useBoundaryLocalities(d,"revenue",{},u),{isLoading:g,data:{table:N,statuses:y,totalCount:T}={}}=Digit.Hooks.ws.useInbox({tenantId:d,filters:{...S}});let D=[{text:u("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),link:"/digit-ui/employee/ws/create-application",roles:["WS_CEMP","SW_CEMP"]}];D=D.filter(e=>!e.roles||A(e.roles));const I={logoIcon:t.createElement(i.DropIcon,null),headerText:s?"MODULE_WATER":"MODULE_SW",links:[...D,{text:u("WS_SEWERAGE_CONNECTION_SEARCH_LABEL"),link:s?"/digit-ui/employee/ws/water/search-connection?from=WS_SEWERAGE_INBOX":"/digit-ui/employee/ws/sewerage/search-connection?from=WS_SEWERAGE_INBOX",roles:s?["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]:["SW_CEMP","SW_APPROVER","SW_FIELD_INSPECTOR","SW_DOC_VERIFIER","SW_CLERK"]},{text:u("WS_SEWERAGE_APPLICATION_SEARCH"),link:s?"/digit-ui/employee/ws/water/search-application?from=WS_SEWERAGE_INBOX":"/digit-ui/employee/ws/sewerage/search-application?from=WS_SEWERAGE_INBOX",roles:s?["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]:["SW_CEMP","SW_APPROVER","SW_FIELD_INSPECTOR","SW_DOC_VERIFIER","SW_CLERK"]}]},h=n.useCallback(e=>{let{registerRef:n,searchFormState:l}=e;return t.createElement(wl,{registerRef:n,searchFormState:l,className:"search"})},[]),O=n.useCallback(e=>{let{registerRef:n,controlFilterForm:l,setFilterFormValue:o,getFilterFormValue:i}=e;return t.createElement(Wl,{statuses:y,isInboxLoading:g,registerRef:n,controlFilterForm:l,setFilterFormValue:o,filterFormState:null==S?void 0:S.filterForm,getFilterFormValue:i,localitiesForEmployeesCurrentTenant:f,loadingLocalitiesForEmployeesCurrentTenant:C,checkPathName:s})},[y,g,f,C]),b={SearchFormFields:h,onSearchFormSubmit:e=>{e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:{...p}}),_({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==S?void 0:S.searchForm,resetSearchFormDefaultValues:c,onSearchFormReset:e=>{e("mobileNumber",null),e("applicationNumber",null),e("consumerNo",null),_({action:"mutateSearchForm",data:c})},className:"search-form-wns-inbox"},L={FilterFormFields:O,onFilterFormSubmit:e=>{e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:{...p}}),_({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==S?void 0:S.filterForm,resetFilterFormDefaultValues:v,onFilterFormReset:e=>{e("moduleName",s?"ws-services":"sw-services"),e("applicationStatus",[]),e("applicationType",[]),e("locality",[]),e("assignee","ASSIGNED_TO_ALL"),_({action:"mutateFilterForm",data:v})}},R=(e=>{var i,a,r,u;let{onPageSizeChange:d,formState:s,totalCount:c,table:v,dispatch:p,onSortingByData:m,tenantId:E,inboxStyles:S={},tableStyle:_={}}=e;const{t:f}=l.useTranslation(),C=e=>t.createElement("span",{className:"cell-text styled-cell"},e),g=n.useMemo(()=>[{Header:f("WS_ACK_COMMON_APP_NO_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:e=>{var n,l,i,a,r,u;let{row:d}=e,s="WATER";d.original.applicationNo.includes("SW")&&(s="SEWERAGE");let c="application";return null!=d&&null!==(n=d.original)&&void 0!==n&&null!==(l=n.applicationType)&&void 0!==l&&null!==(i=l.toUpperCase())&&void 0!==i&&i.includes("DISCONNECT")?c="disconnection":null!=d&&null!==(a=d.original)&&void 0!==a&&null!==(r=a.applicationType)&&void 0!==r&&null!==(u=r.toUpperCase())&&void 0!==u&&u.includes("MODIFY")&&(c="modify"),t.createElement("div",null,t.createElement(o.Link,{to:"/digit-ui/employee/ws/"+c+"-details?applicationNumber="+d.original.applicationNo+"&tenantId="+E+"&service="+s+"&from=WS_SEWERAGE_INBOX"}," ",t.createElement("span",{className:"link"},d.original.applicationNo)))}},{Header:f("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),accessor:"connectionNo",disableSortBy:!0},{Header:f("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),accessor:"owner",disableSortBy:!0},{Header:f("WS_COMMON_TABLE_COL_APP_TYPE_LABEL"),accessor:e=>{var n;return C(f("CS_COMMON_INBOX_"+(null==e||null===(n=e.applicationType)||void 0===n?void 0:n.toUpperCase())))},disableSortBy:!0},{Header:f("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),accessor:e=>C(f("CS_"+(null==e?void 0:e.status))),disableSortBy:!0},{Header:f("ES_INBOX_SLA_DAYS_REMAINING"),accessor:e=>{return t.createElement("span","Active"===(n=null==e?void 0:e.sla)||n>0?{className:"sla-cell-success"}:{className:"sla-cell-error"},n);var n}}]);return{getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),disableSort:!1,autoSort:!1,manualPagination:!0,initSortId:"applicationDate",onPageSizeChange:d,currentPage:(null===(i=s.tableForm)||void 0===i?void 0:i.offset)/(null===(a=s.tableForm)||void 0===a?void 0:a.limit),onNextPage:()=>{var e,n;return p({action:"mutateTableForm",data:{...s.tableForm,offset:parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(n=s.tableForm)||void 0===n?void 0:n.limit)}})},onPrevPage:()=>{var e,n;return p({action:"mutateTableForm",data:{...s.tableForm,offset:parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(n=s.tableForm)||void 0===n?void 0:n.limit)}})},pageSizeLimit:null===(r=s.tableForm)||void 0===r?void 0:r.limit,onSort:m,totalRecords:c,onSearch:null==s||null===(u=s.searchForm)||void 0===u?void 0:u.message,onLastPage:()=>{var e;return p({action:"mutateTableForm",data:{...s.tableForm,offset:10*Math.ceil(c/10)-parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.limit)}})},onFirstPage:()=>p({action:"mutateTableForm",data:{...s.tableForm,offset:0}}),data:v,columns:g,inboxStyles:{...S},tableStyle:{..._}}})({parentRoute:r,onPageSizeChange:e=>{_({action:"mutateTableForm",data:{...S.tableForm,limit:e.target.value}})},formState:S,totalCount:T,table:N,dispatch:_,onSortingByData:e=>{if(e.length>0){const[{id:n,desc:t}]=e,l=t?"DESC":"ASC";S.tableForm.sortBy===n&&S.tableForm.sortOrder===l||_({action:"mutateTableForm",data:{...S.tableForm,sortBy:n,sortOrder:t?"DESC":"ASC"}})}},tenantId:d,inboxStyles:{overflowX:"scroll",overflowY:"hidden"},tableStyle:{width:"70%"}}),w=(e=>{let{table:n}=e;const{t:r}=l.useTranslation(),u=(e,n,l)=>{var i,a;let r=null!=e&&e.includes("WS")?"WATER":"SEWERAGE",u="application";return null!=l&&null!==(i=l.toUpperCase())&&void 0!==i&&i.includes("DISCONNECT")?u="disconnection":null!=l&&null!==(a=l.toUpperCase())&&void 0!==a&&a.includes("MODIFY")&&(u="modify"),t.createElement("div",null,t.createElement(o.Link,{to:"/digit-ui/employee/ws/"+u+"-details?applicationNumber="+e+"&tenantId="+n+"&service="+r}," ",t.createElement("span",{className:"link"},e)))};return{data:null==n?void 0:n.map(e=>{let{applicationNo:n,status:l,owner:o,sla:i,businessService:a,connectionNo:d,applicationType:s,tenantId:c}=e;return{[r("WS_ACK_COMMON_APP_NO_LABEL")]:u(n,c,s),[r("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL")]:d,[r("WS_COMMON_TABLE_COL_OWN_NAME_LABEL")]:o,[r("WS_COMMON_TABLE_COL_APP_TYPE_LABEL")]:r("WS_"+(null==s?void 0:s.toUpperCase())),[r("WS_COMMON_TABLE_COL_SERVICE_LABEL")]:a?r("WS_COMMON_INBOX_"+(null==a?void 0:a.toUpperCase())):"NA",[r("WS_COMMON_TABLE_COL_APPLICATION_STATUS")]:r("CS_"+l),[r("ES_INBOX_SLA_DAYS_REMAINING")]:(v=i,t.createElement("span","Active"===v||v>0?{className:"sla-cell-success"}:{className:"sla-cell-error"},v))};var v}),serviceRequestIdKey:r("NOC_APP_NO_LABEL"),MobileSortFormValues:()=>{const e=[{code:"DESC",i18nKey:"ES_COMMON_SORT_BY_DESC"},{code:"ASC",i18nKey:"ES_COMMON_SORT_BY_ASC"}],{control:n}=a.useFormContext();return t.createElement(i.SearchField,null,t.createElement(a.Controller,{name:"sortOrder",control:n,render:n=>{let{onChange:l,value:o}=n;return t.createElement(i.RadioButtons,{onSelect:e=>{l(e.code)},selectedOption:e.filter(e=>e.code===o)[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}})({parentRoute:r,table:N}),W={onMobileSortOrderData:e=>{const{sortOrder:n}=e;_({action:"mutateTableForm",data:{...S.tableForm,sortOrder:n}})},sortFormDefaultValues:null==S?void 0:S.tableForm,onSortFormReset:e=>{e("sortOrder","DESC"),_({action:"mutateTableForm",data:p})}};return t.createElement(n.Fragment,null,t.createElement(i.Header,null,u("ES_COMMON_INBOX"),T?t.createElement("p",{className:"inbox-count"},T):null),t.createElement(i.InboxComposer,H({isInboxLoading:g,PropsForInboxLinks:I},b,L,W,{propsForInboxTable:R,propsForInboxMobileCards:w,formState:S})))},BillAmendmentCard:()=>{if(!Digit.Utils.wsAccess())return null;const{t:e}=l.useTranslation(),o=Digit.ULBService.getCurrentTenantId(),[a,r]=n.useState(0);sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists");const u={sortBy:"",limit:10,offset:0,sortOrder:"DESC"},d={},s={applicationStatus:[],businessService:["WS.AMENDMENT"],moduleName:"bsWs-service",locality:[],assignee:"ASSIGNED_TO_ALL"},c={filterForm:s,searchForm:d,tableForm:u},v={filterForm:{...s,businessService:["SW.AMENDMENT"],moduleName:"bsSw-service"},searchForm:d,tableForm:u},{isLoading:p,data:m}=Digit.Hooks.useBillAmendmentInbox({tenantId:o,filters:{...c}}),{isLoading:E,data:S}=Digit.Hooks.useBillAmendmentInbox({tenantId:o,filters:{...v}});n.useEffect(()=>{p&&E||r(null!=m&&m.totalCount&&null!=S&&S.totalCount?(null==m?void 0:m.totalCount)+(null==S?void 0:S.totalCount):null!=m&&m.totalCount?null==m?void 0:m.totalCount:null!=S&&S.totalCount?null==S?void 0:S.totalCount:0)},[m,S]);const _=n.useMemo(()=>({Icon:t.createElement(i.WSICon,null),moduleName:e("WS_BILL_AMENDMENT_BUTTON"),kpis:[{count:p?"-":a,label:e("TOTAL_WS"),link:"/digit-ui/employee/ws/water/bill-amendment/inbox"},{count:p?"-":null==m?void 0:m.slaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/ws/water/bill-amendment/inbox"}],links:[{count:p?"-":null==m?void 0:m.totalCount,label:e("WS_WATER_INBOX"),link:"/digit-ui/employee/ws/water/bill-amendment/inbox",roles:["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]},{count:p?"-":null==S?void 0:S.totalCount,label:e("SW_WATER_INBOX"),link:"/digit-ui/employee/ws/sewerage/bill-amendment/inbox",roles:["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]}]}),[p,m,a]);return t.createElement(i.EmployeeModuleCard,_)},WSSearchApplication:e=>{let{tenantId:r,onSubmit:u,data:d,count:s,resultOk:c,businessService:v,isLoading:p}=e;const[m,E,S]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[_,f,C]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),{t:g}=l.useTranslation(),{register:N,control:y,handleSubmit:T,setValue:D,getValues:A,reset:I}=a.useForm({defaultValues:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",isConnectionSearch:!0}});n.useEffect(()=>{N("offset",0),N("limit",10),N("sortBy","commencementDate"),N("sortOrder","DESC"),N("sortOrder","DESC"),N("isConnectionSearch",!0)},[N]),n.useEffect(()=>{S(),E({}),f({}),C()},[]);const h=n.useCallback(e=>{0!==e.length&&(D("sortBy",e.id),D("sortOrder",e.desc?"DESC":"ASC"))},[]);function O(){D("offset",A("offset")-A("limit")),T(u)()}if(window.Digit.Utils.browser.isMobile())return t.createElement(Ml,{Controller:a.Controller,register:N,control:y,t:g,reset:I,previousPage:O,handleSubmit:T,tenantId:r,data:d,onSubmit:u,businessService:v});const b=e=>t.createElement("span",{className:"cell-text"},e),L=n.useMemo(()=>[{Header:g("WS_MYCONNECTIONS_CONSUMER_NO"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{var n,l,i,a,u,d,s,c,v;let{row:p}=e,m="WATER";return"NEW_WATER_CONNECTION"==(null==p||null===(n=p.original)||void 0===n?void 0:n.applicationType)||"MODIFY_WATER_CONNECTION"==(null==p||null===(l=p.original)||void 0===l?void 0:l.applicationType)||"DISCONNECT_WATER_CONNECTION"==(null==p||null===(i=p.original)||void 0===i?void 0:i.applicationType)||"WATER_RECONNECTION"==(null==p||null===(a=p.original)||void 0===a?void 0:a.applicationType)?m="WATER":"NEW_SEWERAGE_CONNECTION"!=(null==p||null===(u=p.original)||void 0===u?void 0:u.applicationType)&&"MODIFY_SEWERAGE_CONNECTION"!=(null==p||null===(d=p.original)||void 0===d?void 0:d.applicationType)&&"DISCONNECT_SEWERAGE_CONNECTION"!=(null==p||null===(s=p.original)||void 0===s?void 0:s.applicationType)&&"SEWERAGE_RECONNECTION"!=(null==p||null===(c=p.original)||void 0===c?void 0:c.applicationType)||(m="SEWERAGE"),t.createElement("div",null,p.original.connectionNo?t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+p.original.connectionNo+"&tenantId="+r+"&service="+m+"&due="+((null===(v=p.original)||void 0===v?void 0:v.due)||0)+"&from=WS_SEWERAGE_APPLICATION_SEARCH"},p.original.connectionNo||"NA")):t.createElement("span",null,g("NA")))}},{Header:g("WS_ACK_COMMON_APP_NO_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:e=>{var n,l,i,a,u,d,s,c;let{row:v}=e,p="WATER";if("NEW_WATER_CONNECTION"==(null==v||null===(n=v.original)||void 0===n?void 0:n.applicationType)||"MODIFY_WATER_CONNECTION"==(null==v||null===(l=v.original)||void 0===l?void 0:l.applicationType)||"DISCONNECT_WATER_CONNECTION"==(null==v||null===(i=v.original)||void 0===i?void 0:i.applicationType)||"WATER_RECONNECTION"==(null==v||null===(a=v.original)||void 0===a?void 0:a.applicationType)?p="WATER":"NEW_SEWERAGE_CONNECTION"!=(null==v||null===(u=v.original)||void 0===u?void 0:u.applicationType)&&"MODIFY_SEWERAGE_CONNECTION"!=(null==v||null===(d=v.original)||void 0===d?void 0:d.applicationType)&&"DISCONNECT_SEWERAGE_CONNECTION"!=(null==v||null===(s=v.original)||void 0===s?void 0:s.applicationType)&&"SEWERAGE_RECONNECTION"!=(null==v||null===(c=v.original)||void 0===c?void 0:c.applicationType)||(p="SEWERAGE"),"MODIFY_SEWERAGE_CONNECTION"===v.original.applicationType||"MODIFY_WATER_CONNECTION"===v.original.applicationType){var m,E,S,_,f,C;let e="application";return null!=v&&null!==(m=v.original)&&void 0!==m&&null!==(E=m.applicationType)&&void 0!==E&&null!==(S=E.toUpperCase())&&void 0!==S&&S.includes("DISCONNECT")?e="disconnection":null!=v&&null!==(_=v.original)&&void 0!==_&&null!==(f=_.applicationType)&&void 0!==f&&null!==(C=f.toUpperCase())&&void 0!==C&&C.includes("MODIFY")&&(e="modify"),t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/"+e+"-details?applicationNumber="+v.original.applicationNo+"&tenantId="+r+"&service="+p+"&mode=MODIFY&from=WS_SEWERAGE_APPLICATION_SEARCH"},v.original.applicationNo)))}{var g,N,y,T;let e="application";return null!=v&&null!==(g=v.original)&&void 0!==g&&null!==(N=g.applicationType)&&void 0!==N&&N.includes("DISCONNECT")?e="disconnection":null!=v&&null!==(y=v.original)&&void 0!==y&&null!==(T=y.applicationType)&&void 0!==T&&T.includes("MODIFY")&&(e="modify"),t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/"+e+"-details?applicationNumber="+v.original.applicationNo+"&tenantId="+r+"&service="+p+"&from=WS_SEWERAGE_APPLICATION_SEARCH"},v.original.applicationNo)))}}},{Header:g("WS_APPLICATION_TYPE_LABEL"),disableSortBy:!0,accessor:e=>b(g("WS_"+e.applicationType))},{Header:g("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),disableSortBy:!0,accessor:e=>{var n,t,l,o;return b(null!=e&&null!==(n=e.connectionHolders)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.name?null==e||null===(l=e.connectionHolders)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name:(null==e?void 0:e.ownerNames)||"-")}},{Header:g("WS_COMMON_TABLE_COL_APPLICATION_STATUS_LABEL"),accessor:e=>b(g((null==e?void 0:e.applicationStatus)||"NA")),disableSortBy:!0},{Header:g("WS_COMMON_TABLE_COL_ADDRESS"),disableSortBy:!0,accessor:e=>b((null==e?void 0:e.address)||"-")}],[]);return t.createElement(n.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},g("WS"===v?"WS_WATER_SEARCH_APPLICATION_SUB_HEADER":"WS_SEWERAGE_SEARCH_APPLICATION_SUB_HEADER")),t.createElement(i.Card,{className:"card-search-heading"},t.createElement("span",{style:{color:"#505A5F"}},g("WS_INFO_VALIDATION"))),t.createElement(i.SearchForm,{onSubmit:u,handleSubmit:T},t.createElement(Pl,{register:N,control:y,reset:I,tenantId:r,t:g,businessService:v})),p?t.createElement(i.Loader,null):null,null!=d&&d.display&&!c?t.createElement(i.Card,{style:{marginTop:20}},g(null==d?void 0:d.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):c?t.createElement(i.Table,{t:g,data:d,totalRecords:s,columns:L,getCellProps:e=>({style:{minWidth:e.column.Header===g("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){D("limit",Number(e.target.value)),T(u)()},currentPage:A("offset")/A("limit"),onNextPage:function(){D("offset",A("offset")+A("limit")),T(u)()},onPrevPage:O,pageSizeLimit:A("limit"),onSort:h,disableSort:!1,sortParams:[{id:A("sortBy"),desc:"DESC"===A("sortOrder")}]}):null)},WSSearchWaterConnection:e=>{let{tenantId:r,onSubmit:u,data:d,count:s,resultOk:c,isLoading:v}=e;const p=o.useHistory(),[m,E]=n.useState([]),[S,_]=n.useState(null);n.useEffect(function(){try{return Promise.resolve(Digit.WSService.WSSewsearchDemand({BulkBillCriteria:{tenantId:"pg.citya"}},window.location.href.includes("ws/sewerage/search-demand")?"sw":"ws")).then(function(e){E(e.connection)})}catch(e){return Promise.reject(e)}},[]);const{t:f}=l.useTranslation(),{register:C,control:g,handleSubmit:N,setValue:y,getValues:T,reset:D}=a.useForm({defaultValues:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",searchType:"CONNECTION"}});n.useEffect(()=>{C("offset",0),C("limit",10),C("sortBy","commencementDate"),C("searchType","CONNECTION"),C("sortOrder","DESC"),C("propertyId","")},[C]);const A=n.useCallback(e=>{0!==e.length&&(y("sortBy",e.id),y("sortOrder",e.desc?"DESC":"ASC"))},[]);function I(e){y("limit",Number(e.target.value)),N(u)()}function h(){y("offset",T("offset")+T("limit")),N(u)()}function O(){y("offset",T("offset")-T("limit")),N(u)()}if(window.Digit.Utils.browser.isMobile())return t.createElement(Bl,{Controller:a.Controller,register:C,control:g,t:f,reset:D,previousPage:O,handleSubmit:N,tenantId:r,data:d,onSubmit:u});const b=e=>t.createElement("span",{className:"cell-text"},e),L=n.useMemo(()=>[{Header:f("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{var n,l,i;let{row:a}=e;return t.createElement("div",null,a.original.connectionNo?t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+a.original.connectionNo+"&tenantId="+r+"&service="+(null===(n=a.original)||void 0===n?void 0:n.service)+"&connectionType="+(null===(l=a.original)||void 0===l?void 0:l.connectionType)+"&due="+((null===(i=a.original)||void 0===i?void 0:i.due)||0)+"&from=WS_SEWERAGE_CONNECTION_SEARCH_LABEL"},a.original.connectionNo||"NA")):t.createElement("span",null,f("NA")))}},{Header:f("WS_COMMON_TABLE_COL_SERVICE_LABEL"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return b(f("WS_"+(null===(n=t.original)||void 0===n?void 0:n.service)))}},{Header:f("WS_COMMON_TABLE_COL_OWN_NAME_LABEL"),disableSortBy:!0,Cell:e=>{var n,t,l,o,i;let{row:a}=e;return b(null!=a&&null!==(n=a.original)&&void 0!==n&&null!==(t=n.connectionHolders)&&void 0!==t&&t.map(e=>null==e?void 0:e.name).join(",")?null==a||null===(l=a.original)||void 0===l||null===(o=l.connectionHolders)||void 0===o?void 0:o.map(e=>null==e?void 0:e.name).join(","):""+((null===(i=a.original)||void 0===i?void 0:i.ownerNames)||"NA"))}},{Header:f("WS_COMMON_TABLE_COL_STATUS_LABEL"),disableSortBy:!0,Cell:e=>{var n,t;let{row:l}=e;return b(f("WS_"+(null===(n=l.original)||void 0===n||null===(t=n.status)||void 0===t?void 0:t.toUpperCase())))}},{Header:f("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;var l,o;return(null==t||null===(n=t.original)||void 0===n?void 0:n.due)<=0?b(""+(null===(l=t.original)||void 0===l?void 0:l.due)):b(""+((null===(o=t.original)||void 0===o?void 0:o.due)||"NA"))}},{Header:f("WS_COMMON_TABLE_COL_ADDRESS"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return b(""+((null===(n=t.original)||void 0===n?void 0:n.address)||"NA"))}},{Header:f("WS_COMMON_TABLE_COL_DUE_DATE_LABEL"),disableSortBy:!0,Cell:e=>{var n,t,l,o;let{row:i}=e;const a=(null===(n=i.original)||void 0===n||null===(t=n.status)||void 0===t?void 0:t.toUpperCase())||"",r="NA"===(null===(l=i.original)||void 0===l?void 0:l.dueDate)?f("WS_NA"):(e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()})(null===(o=i.original)||void 0===o?void 0:o.dueDate);return b(f("INACTIVE"===a?"WS_NA":""+r))}},{Header:f("WS_COMMON_TABLE_COL_ACTION_LABEL"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;const l=null===(n=t.original)||void 0===n?void 0:n.due;var o;return b(l||0==l?P(null===(o=t.original)||void 0===o?void 0:o.status,t):f("WS_NA"))}}],[]),R=n.useMemo(()=>[{Header:f("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{var n,l,i;let{row:a}=e;return t.createElement("div",null,a.original.connectionNo?t.createElement("span",{className:"link"},t.createElement(o.Link,{to:"/digit-ui/employee/ws/connection-details?applicationNumber="+a.original.connectionNo+"&tenantId="+r+"&service="+(null===(n=a.original)||void 0===n?void 0:n.service)+"&connectionType="+(null===(l=a.original)||void 0===l?void 0:l.connectionType)+"&due="+((null===(i=a.original)||void 0===i?void 0:i.due)||0)+"&from=WS_SEWERAGE_CONNECTION_SEARCH_LABEL"},a.original.connectionNo||"NA")):t.createElement("span",null,f("NA")))}},{Header:f("WS_COMMON_TABLE_COL_applicationNo_LABEL"),disableSortBy:!0,Cell:e=>{let{row:n}=e;return t.createElement("div",null,n.original.applicationNo)}},{Header:f("WS_COMMON_TABLE_COL_propertyId_LABEL"),disableSortBy:!0,Cell:e=>{var n,t;let{row:l}=e;return b(f("WS_"+(null===(n=l.original)||void 0===n||null===(t=n.propertyId)||void 0===t?void 0:t.toUpperCase())))}},{Header:f("WS_COMMON_TABLE_COL_ACTION_LABEL"),disableSortBy:!0,Cell:e=>{let{row:n}=e;return b(w(n))}}],[]),w=e=>t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:()=>{W(e)}},f("WS_COMMON_COLLECT_DEMAND")," "))),W=function(e){try{return Promise.resolve(Digit.WSService.WSSewsearchDemandGen({BulkBillCriteria:{tenantId:"pg.citya",consumerCode:e.original.connectionNo}},window.location.href.includes("ws/sewerage/search-demand")?"sw":"ws")).then(function(n){var t,l,o;_({label:""+n}),p.push("/digit-ui/employee/payment/collect/SW/"+encodeURIComponent(null===(t=e.original)||void 0===t?void 0:t.connectionNo)+"/"+(null===(l=e.original)||void 0===l?void 0:l.tenantId)+"?tenantId="+(null===(o=e.original)||void 0===o?void 0:o.tenantId)+"?workflow=WS&ISWSCON")})}catch(e){return Promise.reject(e)}},P=(e,n)=>{var l,i,a,r,u,d,s,c,v;if(!(Digit.UserService.getUser().info.roles.map(e=>e.code).filter(e=>"WS_CEMP"===e||"SW_CEMP"===e).length>0))return null;switch(e){case"Active":return t.createElement("div",null,t.createElement("span",{className:"link"},"WATER"===(null===(l=n.original)||void 0===l?void 0:l.service)?t.createElement(o.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+("WATER"===(null===(i=n.original)||void 0===i?void 0:i.service)?"WS":"SW")+"/"+encodeURIComponent(null===(a=n.original)||void 0===a?void 0:a.connectionNo)+"/"+(null===(r=n.original)||void 0===r?void 0:r.tenantId)+"?tenantId="+(null===(u=n.original)||void 0===u?void 0:u.tenantId)+"?workflow=WS&ISWSCON"}},f("WS_COMMON_COLLECT_LABEL")," "):t.createElement(o.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+("WATER"===(null===(d=n.original)||void 0===d?void 0:d.service)?"WS":"SW")+"/"+encodeURIComponent(null===(s=n.original)||void 0===s?void 0:s.connectionNo)+"/"+(null===(c=n.original)||void 0===c?void 0:c.tenantId)+"?tenantId="+(null===(v=n.original)||void 0===v?void 0:v.tenantId)+"?workflow=SW&ISWSCON"}},f("WS_COMMON_COLLECT_LABEL")," ")))}};return t.createElement(n.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},window.location.href.includes("water")?f("WS_WATER_SEARCH_CONNECTION_SUB_HEADER"):f("WS_SEWERAGE_SEARCH_CONNECTION_SUB_HEADER")),window.location.href.includes("search-demand")?"":t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:u,handleSubmit:N},t.createElement(xl,{register:C,control:g,reset:D,tenantId:r,t:f})),v?t.createElement(i.Loader,null):null,null!=d&&d.display&&!c?t.createElement(i.Card,{style:{marginTop:20}},f(null==d?void 0:d.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):c?t.createElement(i.Table,{t:f,data:d,totalRecords:s,columns:L,getCellProps:e=>({style:{minWidth:e.column.Header===f("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:I,currentPage:T("offset")/T("limit"),onNextPage:h,onPrevPage:O,pageSizeLimit:T("limit"),onSort:A,disableSort:!1,sortParams:[{id:T("sortBy"),desc:"DESC"===T("sortOrder")}]}):null,window.location.href.includes("search-demand")?(null==m?void 0:m.length)>0?t.createElement(i.Table,{t:f,data:m,totalRecords:s,columns:R,getCellProps:e=>({style:{minWidth:e.column.Header===f("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:I,currentPage:T("offset")/T("limit"),onNextPage:h,onPrevPage:O,pageSizeLimit:T("limit"),onSort:A,disableSort:!1,sortParams:[{id:T("sortBy"),desc:"DESC"===T("sortOrder")}]}):t.createElement(i.Card,{style:{marginTop:20}},t.createElement("p",{style:{textAlign:"center"}},"No Data Found")):"",(null==S?void 0:S.label)&&t.createElement(i.Toast,{label:null==S?void 0:S.label,onClose:e=>{_(e=>null)}}))},WSBulkBillSearch:e=>{let{tenantId:o,onSubmit:u,data:d,count:s,resultOk:c,businessService:v,isLoading:p}=e;const[m,E]=n.useState(null),[S,_]=n.useState(null),[f,C]=n.useState(null),[g,N]=n.useState(()=>null),[y,T]=n.useState(""),[D,A]=n.useState([]),[I,h]=n.useState([]),[O,b]=n.useState([]),[L,R]=n.useState(!1),{mutate:w}=Digit.Hooks.ws.useBulkMeterReadingCreateAPI(v),W=e=>{if(null==e||null==e||""==e)return"NA";const n=new Date(e);let t=n.getMonth()+1,l=n.getDate();return t=(t>9?"":"0")+t,l=(l>9?"":"0")+l,l+"/"+t+"/"+n.getFullYear()},P=()=>{_(!1)},M=e=>t.createElement("h1",{className:"heading-m"},e.label),x=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),B=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(x,null)),{t:F}=l.useTranslation(),{register:U,control:k,handleSubmit:H,setValue:j,getValues:z,reset:V}=a.useForm({defaultValues:{offset:0,limit:10,sortBy:"consumerNo",sortOrder:"DESC",searchType:"CONNECTION",locality:"",tenantId:""}}),Y=e=>t.createElement("div",{onClick:e.onClick},t.createElement(i.DownloadBtnCommon,null));n.useEffect(()=>{U("offset",0),U("limit",10),U("sortBy","commencementDate"),U("searchType","CONNECTION"),U("sortOrder","DESC"),U("locality",""),U("tenantId","")},[U]);const G=n.useCallback(e=>{0!==e.length&&(j("sortBy",e.id),j("sortOrder",e.desc?"DESC":"ASC"))},[]);function q(e){j("limit",Number(e.target.value)),H(u)()}function K(){j("offset",z("offset")+z("limit")),H(u)()}function X(){j("offset",z("offset")-z("limit")),H(u)()}const $=()=>{E(null)};if(window.Digit.Utils.browser.isMobile())return t.createElement(Bl,{Controller:a.Controller,register:U,control:k,t:F,reset:V,previousPage:X,handleSubmit:H,tenantId:o,data:d,onSubmit:u,setValue:j});const Z=e=>t.createElement("span",{className:"cell-text"},e),J=(e,n)=>{if(e.preventDefault(),void 0!==(null==n?void 0:n[0]))return Digit.Download.Excel(n,"Bulk-Bill")},Q=n.useMemo(()=>[{Header:F("BILLING_CYCLE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.billingPeriod)}},{Header:F("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{let{row:n}=e;return t.createElement("div",null,t.createElement("span",null,n.original.connectionNo?n.original.connectionNo||"NA":F("NA")))}},{Header:F("LAST_READING"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.lastReading)}},{Header:F("METER_READING_DATE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(W(null===(n=t.original)||void 0===n?void 0:n.lastReadingDate))}},{Header:F("METER_STATUS"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.meterStatus)}},{Header:F("CURRECT_READING"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.currentReading)}},{Header:F("CURRECT_READING_DATE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(W(null===(n=t.original)||void 0===n?void 0:n.currentReadingDate))}}]),ee=n.useMemo(()=>[{Header:F("BILLING_CYCLE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.billingPeriod)}},{Header:F("WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL"),disableSortBy:!0,accessor:"connectionNo",Cell:e=>{let{row:n}=e;return t.createElement("div",null,t.createElement("span",null,n.original.connectionNo?n.original.connectionNo||"NA":F("NA")))}},{Header:F("LAST_READING"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.lastReading)}},{Header:F("METER_READING_DATE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(W(null===(n=t.original)||void 0===n?void 0:n.lastReadingDate))}},{Header:F("METER_STATUS"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.meterStatus)}},{Header:F("CURRECT_READING"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.currentReading)}},{Header:F("CURRECT_READING_DATE"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(W(null===(n=t.original)||void 0===n?void 0:n.currentReadingDate))}},{Header:F("CURRECT_STATUS"),disableSortBy:!0,Cell:e=>{var n;let{row:t}=e;return Z(null===(n=t.original)||void 0===n?void 0:n.status)}}]);return t.createElement(n.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},F("WS_WATER_SEARCH_BULK_CONNECTION_SUB_HEADER")),t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:u,handleSubmit:H},t.createElement(Fl,{register:U,control:k,reset:V,tenantId:o,t:F,setValue:j})),p?t.createElement(i.Loader,null):null,L&&t.createElement(i.Loader,null),null!=d&&d.display&&!c?t.createElement(i.Card,{style:{marginTop:20}},F(null==d?void 0:d.display).split("\\n").map((e,n)=>t.createElement("p",{key:n,style:{textAlign:"center"}},e))):c?t.createElement("div",{style:{backgroundColor:"white"}},t.createElement("div",{className:"sideContent",style:{float:"right",padding:"10px 30px"}},t.createElement("span",{className:"table-search-wrapper",style:{cursor:"pointer"}},t.createElement(Y,{className:"mrlg cursorPointer",onClick:e=>J(e,d)}))),t.createElement("div",{style:{display:"flex"}},t.createElement("div",{style:{width:"70%"}},t.createElement(i.UploadFile,{id:"Bulk-Bill",extraStyleName:"propertyCreate",message:g?"1 "+F("CS_WS_ACTION_FILEUPLOADED"):F("CS_WS_ACTION_NO_FILEUPLOADED"),accept:".xlsx",onUpload:e=>function(e){e.preventDefault(),T(e.target.files[0]),function(e){try{new Promise((n,t)=>{const l=new FileReader;l.readAsArrayBuffer(e),l.onload=e=>{const t=r.read(e.target.result,{type:"buffer"}),l=r.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]).map(e=>({billingPeriod:e.billingPeriod,currentReading:e.currentReading,currentReadingDate:e.currentReadingDate,lastReading:e.lastReading,lastReadingDate:e.lastReadingDate,connectionNo:e.connectionNo,meterStatus:e.meterStatus,tenantId:"pg.citya"})),o=l.filter(e=>e.currentReading>=e.lastReading&&(e=>{var n;const t=new Date(0).getTimezoneOffset(),l=new Date(0,0,e-1,0,-t,0);return Digit.Utils.pt.convertDateToEpoch(null==l||null===(n=l.toJSON())||void 0===n?void 0:n.split("T")[0])})(null==e?void 0:e.currentReadingDate)>e.lastReadingDate),i=l.filter(e=>!o.includes(e));console.log("reading list",o,i),h(i),n(o,i)},l.onerror=e=>{t(e)}}).then(function(e,n){try{return A(e),Promise.resolve()}catch(e){return Promise.reject(e)}}),Promise.resolve()}catch(e){return Promise.reject(e)}}(e.target.files[0]),N("bulk")}(e),onDelete:e=>{N(null),A([])}})),(null==D?void 0:D.length)>0?t.createElement("div",{style:{top:"5px",left:"10px",position:"relative"}},t.createElement("span",null,t.createElement(i.SubmitBar,{label:F("WS_COMMON_SUBMIT_READING"),onSubmit:()=>{(null==I?void 0:I.length)>0&&_(!0)}}))):""),t.createElement(i.Table,{t:F,data:d,totalRecords:s,columns:Q,getCellProps:e=>({style:{minWidth:e.column.Header===F("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onSort:G,disableSort:!1,sortParams:[{id:z("sortBy"),desc:"DESC"===z("sortOrder")}]})):null,t.createElement("div",null,S&&t.createElement(i.Modal,{headerBarMain:t.createElement(M,{label:F("WS_BULK_READING_REJECT")}),headerBarEnd:t.createElement(B,{onClick:P}),actionCancelLabel:"Cancel",actionCancelOnSubmit:P,actionSaveLabel:"Proceed",actionSaveOnSubmit:()=>{_(!1),function(){try{const e=function(){if(w)return R(!0),Promise.resolve(w({meterReadingList:D},{onError:(e,n)=>{R(!1),E({error:!0,label:null!=e&&e.message?e.message:e}),setTimeout($,5e3)},onSuccess:function(e,n){try{return R(!1),console.log("data",e),C(!0),b(e.meterReadings),E({key:"success",label:"WS_METER_READING_ADDED_SUCCESFULLY"}),setTimeout($,3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})).then(function(){})}();Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()},formId:"modal-action",popupStyles:{width:"auto"}},"  ",t.createElement("div",{style:{width:"100%"}},t.createElement(i.Card,null,t.createElement("div",null,t.createElement(i.CardText,null,F("WS_REASON_FOR_REJECT"))),t.createElement("div",null,t.createElement(i.CardText,null,F("WS_SUCCESS_DATA_COUNT")," - ",null==D?void 0:D.length)),t.createElement("div",null,t.createElement(i.CardText,null,F("WS_REJECT_DATA_COUNT")," - ",null==I?void 0:I.length)),t.createElement(i.Table,{t:F,data:I,totalRecords:null==I?void 0:I.length,columns:Q,getCellProps:e=>({style:{minWidth:e.column.Header===F("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:q,currentPage:z("offset")/z("limit"),onNextPage:K,onPrevPage:X,pageSizeLimit:z("limit"),onSort:G,disableSort:!0,sortParams:[{id:z("sortBy"),desc:"DESC"===z("sortOrder")}]})))),f&&t.createElement(i.Modal,{headerBarMain:t.createElement(M,{label:F("WS_BULK_READING_STATUS")}),headerBarEnd:t.createElement(B,{onClick:()=>{C(!1)}}),formId:"modal-action",popupStyles:{width:"auto"}},"  ",t.createElement("div",{style:{width:"100%"}},t.createElement(i.Card,null,t.createElement("div",null,t.createElement(i.CardText,null,F("Bulk Meter Reading Status"))),t.createElement("div",{className:"sideContent",style:{float:"right",padding:"10px 30px"}},t.createElement("span",{className:"table-search-wrapper",style:{cursor:"pointer"}},t.createElement(Y,{className:"mrlg cursorPointer",onClick:e=>J(e,O)}))),t.createElement(i.Table,{t:F,data:O,totalRecords:null==O?void 0:O.length,columns:ee,getCellProps:e=>({style:{minWidth:e.column.Header===F("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:q,currentPage:z("offset")/z("limit"),onNextPage:K,onPrevPage:X,pageSizeLimit:z("limit"),onSort:G,disableSort:!0,sortParams:[{id:z("sortBy"),desc:"DESC"===z("sortOrder")}]}))))),(null==m?void 0:m.label)&&t.createElement(i.Toast,{label:null==m?void 0:m.label,onClose:e=>{E(e=>null)}}))},WSCard:()=>{if(!Digit.Utils.wsAccess())return null;const{t:e}=l.useTranslation(),o=Digit.ULBService.getCurrentTenantId(),[a,r]=n.useState(0);sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists");const{isLoading:u,data:d}=Digit.Hooks.ws.useInbox({tenantId:o,filters:{filterForm:{businessService:["NewWS1","ModifyWSConnection","DisconnectWSConnection"],moduleName:"ws-services",locality:[],applicationStatus:[],applicationType:[]},searchForm:{},tableForm:{sortBy:"auditDetails.lastModifiedTime",sortOrder:"DESC"}}});n.useEffect(()=>{u||r(null!=d&&d.totalCount?null==d?void 0:d.totalCount:0)},[d]);let s=[{label:e("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),link:"/digit-ui/employee/ws/create-application",roles:["WS_CEMP","SW_CEMP"]}];s=s.filter(e=>!e.roles||A(e.roles));const c={Icon:t.createElement(i.WSICon,null),moduleName:e("ACTION_TEST_WATER"),kpis:[{count:u?"-":a,label:e("TOTAL_WS"),link:"/digit-ui/employee/ws/water/inbox"},{count:u?"-":null==d?void 0:d.slaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/ws/water/inbox"}],links:[{count:u?"-":null==d?void 0:d.totalCount,label:e("WS_INBOX_HEADER"),link:"/digit-ui/employee/ws/water/inbox",roles:["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]},...s,{label:e("WS_WATER_CONNECTION_SEARCH_LABEL"),link:"/digit-ui/employee/ws/water/search-connection",roles:["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]},{label:e("WS_WATER_APPLICATION_SEARCH"),link:"/digit-ui/employee/ws/water/search-application",roles:["WS_CEMP","WS_APPROVER","WS_FIELD_INSPECTOR","WS_DOC_VERIFIER","WS_CLERK"]}]};return t.createElement(i.EmployeeModuleCard,c)},SWCard:()=>{if(!Digit.Utils.swAccess())return null;const{t:e}=l.useTranslation(),o=Digit.ULBService.getCurrentTenantId(),[a,r]=n.useState(0);sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists");const{isLoading:u,data:d}=Digit.Hooks.ws.useInbox({tenantId:o,filters:{filterForm:{businessService:["NewSW1","ModifySWConnection","DisconnectSWConnection"],moduleName:"sw-services",locality:[],applicationStatus:[],applicationType:[]},searchForm:{},tableForm:{sortBy:"auditDetails.lastModifiedTime",sortOrder:"DESC"}}});n.useEffect(()=>{u||r(null!=d&&d.totalCount?null==d?void 0:d.totalCount:0)},[d]);let s=[{label:e("WS_APPLY_NEW_CONNECTION_HOME_CARD_LABEL"),link:"/digit-ui/employee/ws/create-application",roles:["WS_CEMP","SW_CEMP"]}];s=s.filter(e=>!e.roles||A(e.roles));const c={Icon:t.createElement(i.WSICon,null),moduleName:e("ACTION_TEST_SEWERAGE"),kpis:[{count:u?"-":a,label:e("TOTAL_SW"),link:"/digit-ui/employee/ws/sewerage/inbox"},{count:u?"-":null==d?void 0:d.slaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/ws/sewerage/inbox"}],links:[{count:u?"-":null==d?void 0:d.totalCount,label:e("WS_SEWERAGE_INBOX"),link:"/digit-ui/employee/ws/sewerage/inbox",roles:["SW_CEMP","SW_APPROVER","SW_FIELD_INSPECTOR","SW_DOC_VERIFIER","SW_CLERK"]},...s,{label:e("WS_SEWERAGE_CONNECTION_SEARCH_LABEL"),link:"/digit-ui/employee/ws/sewerage/search-connection",roles:["SW_CEMP","SW_APPROVER","SW_FIELD_INSPECTOR","SW_DOC_VERIFIER","SW_CLERK"]},{label:e("WS_SEWERAGE_APPLICATION_SEARCH"),link:"/digit-ui/employee/ws/sewerage/search-application",roles:["SW_CEMP","SW_APPROVER","SW_FIELD_INSPECTOR","SW_DOC_VERIFIER","SW_CLERK"]}]};return t.createElement(i.EmployeeModuleCard,c)},WSBillIAmendMentInbox:e=>{let{parentRoute:r}=e;const{t:u}=l.useTranslation(),d=Digit.ULBService.getCurrentTenantId(),s=window.location.href.includes("/ws/water/bill-amendment/inbox"),c={mobileNumber:"",applicationNumber:"",consumerCode:""},v={applicationStatus:[],businessService:s?["WS.AMENDMENT"]:["SW.AMENDMENT"],moduleName:s?"bsWs-service":"bsSw-service",locality:[],assignee:"ASSIGNED_TO_ALL"},p={sortBy:"createdTime",limit:window.Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"ASC"};sessionStorage.removeItem("Digit.BILL.AMENDMENT.INBOX");const m=Digit.SessionStorage.get("BILL.AMENDMENT.INBOX"),E=n.useMemo(()=>m||{filterForm:v,searchForm:c,tableForm:p},[Object.values((null==m?void 0:m.filterForm)||{}),Object.values((null==m?void 0:m.searchForm)||{}),Object.values((null==m?void 0:m.tableForm)||{})]),[S,_]=n.useReducer(function(e,n){switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("BILL.AMENDMENT.INBOX",{...e,searchForm:n.data}),{...e,searchForm:n.data};case"mutateFilterForm":return Digit.SessionStorage.set("BILL.AMENDMENT.INBOX",{...e,filterForm:n.data}),{...e,filterForm:n.data};case"mutateTableForm":return Digit.SessionStorage.set("BILL.AMENDMENT.INBOX",{...e,tableForm:n.data}),{...e,tableForm:n.data}}},E),{data:f,isLoading:C}=Digit.Hooks.useBoundaryLocalities(d,"revenue",{},u),{isLoading:g,data:{table:N,statuses:y,totalCount:T}={}}=Digit.Hooks.useBillAmendmentInbox({tenantId:d,filters:{...S},config:{cacheTime:0}}),{data:D}=Digit.Hooks.useApplicationStatusGeneral({businessServices:["WS.AMENDMENT","SW.AMENDMENT"],tenantId:d},{enabled:(null==y?void 0:y.length)>0});null==y||y.map(e=>{var n,t;null==D||null===(n=D.otherRoleStates)||void 0===n||n.map(n=>{(null==n?void 0:n.uuid)===(null==e?void 0:e.statusid)&&(e.applicationstatus=u(null==n?void 0:n.state))}),null==D||null===(t=D.userRoleStates)||void 0===t||t.map(n=>{(null==n?void 0:n.uuid)===(null==e?void 0:e.statusid)&&(e.applicationstatus=u(null==n?void 0:n.state))})});const A={logoIcon:t.createElement(i.CollectionIcon,null),headerText:"ACTION_TEST_BILLAMENDMENT",links:[]},I=n.useCallback(e=>{let{registerRef:n,searchFormState:l}=e;return t.createElement(Ul,{registerRef:n,searchFormState:l,className:"search"})},[]),h=n.useCallback(e=>{let{registerRef:n,controlFilterForm:l,setFilterFormValue:o,getFilterFormValue:i}=e;return t.createElement(kl,{statuses:y,isInboxLoading:g,registerRef:n,controlFilterForm:l,setFilterFormValue:o,filterFormState:null==S?void 0:S.filterForm,getFilterFormValue:i,localitiesForEmployeesCurrentTenant:f,loadingLocalitiesForEmployeesCurrentTenant:C})},[y,g,f,C,D]),O={SearchFormFields:I,onSearchFormSubmit:e=>{e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:{...p}}),_({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==S?void 0:S.searchForm,resetSearchFormDefaultValues:c,onSearchFormReset:e=>{e("mobileNumber",null),e("applicationNo",null),e("consumerCode",null),_({action:"mutateSearchForm",data:c})},className:"search-form-wns-inbox"},b={FilterFormFields:h,onFilterFormSubmit:e=>{e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:{...p}}),_({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==S?void 0:S.filterForm,resetFilterFormDefaultValues:v,onFilterFormReset:e=>{e("moduleName",s?"bsWs-service":"bsSw-service"),e("locality",[]),e("assignee","ASSIGNED_TO_ALL"),e("applicationStatus",[]),_({action:"mutateFilterForm",data:v})}},L=(e=>{var i,a,r,u;let{onPageSizeChange:d,formState:s,totalCount:c,table:v,dispatch:p,onSortingByData:m,inboxStyles:E={},tableStyle:S={}}=e;const{t:_}=l.useTranslation(),f=Digit.ULBService.getCurrentTenantId(),C=e=>t.createElement("span",{className:"cell-text styled-cell"},e),g=n.useMemo(()=>[{Header:_("WS_COMMON_TABLE_COL_SERVICE_LABEL"),disableSortBy:!0,Cell:e=>{var n,t;let{row:l}=e;return C(_("ACTION_TEST_"+(null!=l&&null!==(n=l.original)&&void 0!==n&&null!==(t=n.service)&&void 0!==t&&t.includes("WS")?"WATER":"SEWERAGE")))}},{Header:_("WS_MYCONNECTIONS_APPLICATION_NO"),disableSortBy:!0,Cell:e=>{var n;let{row:l}=e;return t.createElement("div",{style:{display:"flex",flexDirection:"column"}},t.createElement(o.Link,{to:"/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber="+l.original.applicationNo},t.createElement("span",{className:"link"},l.original.applicationNo)),C(_("BILLAMENDMENT_"+(null==l||null===(n=l.original)||void 0===n?void 0:n.amendmentReason)+"_HEADING")))}},,{Header:_("CORE_COMMON_NAME"),disableSortBy:!0,accessor:"owner"},{Header:_("WS_COMMON_TABLE_COL_ADDRESS"),disableSortBy:!0,accessor:e=>C(_(Digit.Utils.locale.getRevenueLocalityCode(e.address,f)))},{Header:_("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),disableSortBy:!0,accessor:e=>{return"Approved"===(n=_(null==e?void 0:e.status))?t.createElement("span",{style:{color:"#00703C"}},n):"Rejected"===n?t.createElement("span",{style:{color:"#0B0C0C"}},n):"Inworkflow"===n?t.createElement("span",{style:{color:"#E50000"}},n):void 0;var n}},{Header:_("WS_COMMON_TABLE_COL_TASK_OWNER"),disableSortBy:!0,accessor:"taskOwner"}]);return{getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),disableSort:!1,autoSort:!1,manualPagination:!0,initSortId:"applicationDate",onPageSizeChange:d,currentPage:(null===(i=s.tableForm)||void 0===i?void 0:i.offset)/(null===(a=s.tableForm)||void 0===a?void 0:a.limit),onNextPage:()=>{var e,n;return p({action:"mutateTableForm",data:{...s.tableForm,offset:parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(n=s.tableForm)||void 0===n?void 0:n.limit)}})},onPrevPage:()=>{var e,n;return p({action:"mutateTableForm",data:{...s.tableForm,offset:parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(n=s.tableForm)||void 0===n?void 0:n.limit)}})},pageSizeLimit:null===(r=s.tableForm)||void 0===r?void 0:r.limit,onSort:m,totalRecords:c,onSearch:null==s||null===(u=s.searchForm)||void 0===u?void 0:u.message,onLastPage:()=>{var e;return p({action:"mutateTableForm",data:{...s.tableForm,offset:10*Math.ceil(c/10)-parseInt(null===(e=s.tableForm)||void 0===e?void 0:e.limit)}})},onFirstPage:()=>p({action:"mutateTableForm",data:{...s.tableForm,offset:0}}),data:v,columns:g,inboxStyles:{...E},tableStyle:{...S}}})({parentRoute:r,onPageSizeChange:e=>{_({action:"mutateTableForm",data:{...S.tableForm,limit:e.target.value}})},formState:S,totalCount:T,table:N,dispatch:_,onSortingByData:e=>{if(e.length>0){const[{id:n,desc:t}]=e,l=t?"DESC":"ASC";S.tableForm.sortBy===n&&S.tableForm.sortOrder===l||_({action:"mutateTableForm",data:{...S.tableForm,sortBy:n,sortOrder:t?"DESC":"ASC"}})}},inboxStyles:{overflowX:"scroll",overflowY:"hidden"},tableStyle:{width:"70%"}}),R=(e=>{let{table:n}=e;const{t:r}=l.useTranslation(),u=(e,n)=>t.createElement("div",{style:{display:"flex",flexDirection:"column"}},t.createElement(o.Link,{to:"/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber="+e},t.createElement("span",{className:"link"},e)),(e=>t.createElement("span",{className:"cell-text styled-cell"},e))(r("BILLAMENDMENT_"+n+"_HEADING")));return{data:null==n?void 0:n.map(e=>{let{applicationNo:n,address:t,status:l,owner:o,service:i,tenantId:a,amendmentReason:d,taskOwner:s}=e;return{[r("WS_COMMON_TABLE_COL_SERVICE_LABEL")]:r("ACTION_TEST_"+i),[r("WS_MYCONNECTIONS_APPLICATION_NO")]:u(n,d),[r("CORE_COMMON_NAME")]:o,[r("WS_COMMON_TABLE_COL_ADDRESS")]:r(Digit.Utils.locale.getRevenueLocalityCode(t,a)),[r("WS_COMMON_TABLE_COL_APPLICATION_STATUS")]:r(l),[r("WS_COMMON_TABLE_COL_TASK_OWNER")]:s}}),serviceRequestIdKey:r("NOC_APP_NO_LABEL"),MobileSortFormValues:()=>{const e=[{code:"DESC",i18nKey:"ES_COMMON_SORT_BY_DESC"},{code:"ASC",i18nKey:"ES_COMMON_SORT_BY_ASC"}],{control:n}=a.useFormContext();return t.createElement(i.SearchField,null,t.createElement(a.Controller,{name:"sortOrder",control:n,render:n=>{let{onChange:l,value:o}=n;return t.createElement(i.RadioButtons,{onSelect:e=>{l(e.code)},selectedOption:e.filter(e=>e.code===o)[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}})({parentRoute:r,table:N}),w={onMobileSortOrderData:e=>{const{sortOrder:n}=e;_({action:"mutateTableForm",data:{...S.tableForm,sortOrder:n}})},sortFormDefaultValues:null==S?void 0:S.tableForm,onSortFormReset:e=>{e("sortOrder","DESC"),_({action:"mutateTableForm",data:p})}};return t.createElement(n.Fragment,null,t.createElement(i.Header,null,u("ES_COMMON_INBOX"),T?t.createElement("p",{className:"inbox-count"},T):null),t.createElement(i.InboxComposer,H({isInboxLoading:g,PropsForInboxLinks:A},O,b,w,{propsForInboxTable:L,propsForInboxMobileCards:R,formState:S})))},WSCreate:()=>{var e,n,i,a,r,d;const s=u.useQueryClient(),{t:c}=l.useTranslation(),{pathname:v,state:p}=(o.useRouteMatch(),o.useLocation()),m=o.useRouteMatch(),E=o.useHistory(),[S,_,f]=(o.useLocation(),Digit.ULBService.getCurrentTenantId(),Digit.Hooks.useSessionStorage("WS_CREATE",null!=p&&p.edcrNumber?{data:{scrutinyNumber:{edcrNumber:null==p?void 0:p.edcrNumber}}}:{})),C=null===(e=Digit)||void 0===e||null===(n=e.ComponentRegistryService)||void 0===n?void 0:n.getComponent("WSCheckPage"),g=null===(i=Digit)||void 0===i||null===(a=i.ComponentRegistryService)||void 0===a?void 0:a.getComponent("WSAcknowledgement"),N=Digit.ULBService.getStateId();let{data:y}=Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(N,[]),T=window.location.href.includes("/modify-connection/")||window.location.href.includes("/edit-application/");S&&Object.keys(S).length>0&&window.location.href.includes("/citizen/ws/create-application/search-property")&&(f(),s.invalidateQueries("WS_CREATE"));const D=(e,n,t,l)=>{_(l?n:""===e?{...n}:{...S,[e]:{...S[e],...n}}),(e=>{var n,t,l,o,i;const a=v.split("/").pop();let{nextStep:r}=I.find(e=>e.route===a),u=I.find(e=>e.route===a&&e);"object"==typeof r&&null!=r&&(!r[sessionStorage.getItem("KnowProperty")]||"search-property"!==r[sessionStorage.getItem("KnowProperty")]&&"create-property"!==r[sessionStorage.getItem("KnowProperty")]||(r=""+r[sessionStorage.getItem("KnowProperty")])),u[sessionStorage.getItem("serviceName")]&&(r=u[sessionStorage.getItem("serviceName")]),(null!=S&&null!==(n=S.cptId)&&void 0!==n&&n.id||null!=S&&null!==(t=S.cpt)&&void 0!==t&&null!==(l=t.details)&&void 0!==l&&l.propertyId||T&&null!=S&&null!==(o=S.cpt)&&void 0!==o&&null!==(i=o.details)&&void 0!==i&&i.propertyId)&&"know-your-property"===r&&(r="property-details"),"docsrequired"===r&&"yes"===sessionStorage.getItem("changePropertySelected")&&(r="property-details");let d=E.push;if(null===r)return d(jl(m.path,m.params)+"/check");d(jl(m.path,m.params)+"/"+r)})()},A=()=>{};let I=[];return y=null!==(r=y)&&void 0!==r&&r.WSCreateConfig?null===(d=y)||void 0===d?void 0:d.WSCreateConfig:Hl,y.forEach(e=>{I=I.concat(e.body.filter(e=>!e.hideInCitizen))}),I.indexRoute="search-property",t.createElement(o.Switch,null,I.map((e,n)=>{const{component:l,texts:i,inputs:a,key:r,isSkipEnabled:u}=e,d="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(o.Route,{path:jl(m.path,m.params)+"/"+e.route,key:n},t.createElement(d,{config:{texts:i,inputs:a,key:r,isSkipEnabled:u},onSelect:D,onSkip:A,t:c,formData:S,userType:"citizen"}))}),t.createElement(o.Route,{path:jl(m.path,m.params)+"/check"},t.createElement(C,{onSubmit:function(){try{return sessionStorage.setItem("isCreateEnabled","true"),E.push(jl(m.path,m.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:S})),t.createElement(o.Route,{path:jl(m.path,m.params)+"/acknowledgement"},t.createElement(g,{data:S,onSuccess:()=>{s.invalidateQueries("WS_CREATE")},clearParams:f})),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:jl(m.path,m.params)+"/"+I.indexRoute})))},WSDisconnection:()=>{var e,n,i;u.useQueryClient();const{t:a}=l.useTranslation(),r=o.useRouteMatch(),d=Digit.ULBService.getStateId();let s=[],{data:c}=Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(d,{});return c=null!==(e=c)&&void 0!==e&&e.WSDisconnectionConfig?null===(n=c)||void 0===n?void 0:n.WSDisconnectionConfig:zl,c=zl,null===(i=c.filter(e=>"NEW_DISCONNECTION"===e.head))||void 0===i||i.forEach(e=>{s=s.concat(e.body.filter(e=>!e.hideInCitizen))}),s.indexRoute="docsrequired",t.createElement(o.Switch,null,s.map((e,n)=>{const{component:l,texts:i,inputs:u,key:d,isSkipEnabled:s}=e,c="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(o.Route,{path:Vl(r.path,r.params)+"/"+e.route,key:n},t.createElement(c,{config:{texts:i,inputs:u,key:d,isSkipEnabled:s},t:a,userType:"citizen"}))}),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:Vl(r.path,r.params)+"/"+s.indexRoute})))},WSRestoration:()=>{var e,n,i;u.useQueryClient();const{t:a}=l.useTranslation(),r=o.useRouteMatch(),d=Digit.ULBService.getStateId();let s=[],{data:c}=Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(d,{});c=null!==(e=c)&&void 0!==e&&e.WSDisconnectionConfig?null===(n=c)||void 0===n?void 0:n.WSDisconnectionConfig:zl,c=zl,null===(i=c.filter(e=>"NEW_DISCONNECTION"===e.head))||void 0===i||i.forEach(e=>{s=s.concat(e.body.filter(e=>!e.hideInCitizen))}),s.indexRoute="restoration-application";let v=[{route:"restoration-application",component:"WSRestorationForm",key:"WSRestorationForm",type:"component",withoutLabel:!0,nextStep:"check"},{route:"check",component:"WSRestorationCheckPage",key:"WSRestorationCheckPage",type:"component",isMandatory:!0,withoutLabel:!0,nextStep:"restoration-acknowledge",hideInEmployee:!0},{route:"restoration-acknowledge",component:"WSRestorationAcknowledgement",key:"WSRestorationAcknowledgement",type:"component",isMandatory:!0,withoutLabel:!0,hideInEmployee:!0}];return console.log(v,s),t.createElement(o.Switch,null,v.map((e,n)=>{const{component:l,texts:i,inputs:u,key:d,isSkipEnabled:s}=e,c="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(o.Route,{path:Yl(r.path,r.params)+"/"+e.route,key:n},t.createElement(c,{config:{texts:i,inputs:u,key:d,isSkipEnabled:s},t:a,userType:"citizen"}))}),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:Yl(r.path,r.params)+"/"+s.indexRoute})))},WSSearchConnectionComponent:()=>{const{t:e}=l.useTranslation(),{path:i}=o.useRouteMatch(),a=n.useMemo(()=>Gl.map(n=>{const t={};for(const l in n.texts)t[l]=e(n.texts[l]);return{...n,texts:t}},[Gl]));return t.createElement(o.Switch,null,t.createElement(o.Route,{path:""+i,exact:!0},t.createElement(xo,{config:a[0]})))},WSSearchResultsComponent:()=>{const{t:e}=l.useTranslation(),{path:i}=o.useRouteMatch(),a=n.useMemo(()=>Bo.map(n=>{const t={};for(const l in n.texts)t[l]=e(n.texts[l]);return{...n,texts:t}},[Bo]));return t.createElement(o.Switch,null,t.createElement(o.Route,{path:""+i,exact:!0},t.createElement(gi,{template:a[0].labels,header:a[0].texts.header,actionButtonLabel:a[0].texts.actionButtonLabel,t:e})))},WSCitizenApplicationDetails:()=>{var e,a,r,u,d,c,m,S,_,f,C,N,y,T,D,A,I,h,O,b,L,R,w,W,P,x,B,U,k,H,j,z,V,Y,G,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be,Fe,Ue,ke,He,je,ze,Ve,Ye,Ge,qe,Ke,Xe,$e,Ze,Je,Qe,en,nn,tn,ln,on,an,rn,un,dn,sn,cn,vn,pn,mn,En,Sn,_n,fn,Cn,gn,Nn,yn,Tn,Dn,An,In,hn,On,bn,Ln,Rn,wn,Wn,Pn,Mn,xn,Bn,Fn,Un,kn,Hn,jn,zn,Vn,Yn,Gn,qn,Kn,Xn,$n,Zn,Jn,Qn,et,nt,tt,lt,ot,it,at,rt,ut,dt,st,ct,vt,pt,mt,Et,St,_t,ft,Ct,gt,Nt,yt,Tt,Dt,At,It,ht,Ot,bt,Lt,Rt,wt,Wt,Pt,Mt,xt,Bt,Ft,Ut,kt,Ht,jt,zt,Vt,Yt,Gt,qt,Kt,Xt,$t,Zt,Jt,Qt,el,nl,tl,ll,ol,il,al,rl,ul,dl,sl,cl,vl,pl,ml,El,Sl,_l,fl,Cl,gl,Nl,yl,Tl,Dl,Al,Il,hl,Ol,bl,Ll,Rl,wl,Wl,Pl,Ml,xl,Bl,Fl,Ul,kl,Hl,jl,zl,Vl,Yl,Gl,ql,Kl,Xl,$l,Zl,Jl,Ql,eo,no,to,lo,oo,io,ao,ro,uo,so,co,vo,po,mo,Eo,So,_o,fo,Co,go,No,yo,To,Do,Ao,Io,ho,Oo,bo,Lo,Ro,wo,Wo,Po,Mo,xo,Bo,Fo,Uo,ko,Ho,jo,zo,Vo,Yo,Go,qo,Ko,Xo,$o,Zo,Jo,Qo,ei,ni,ti,li,oi,ii,ai,ri,ui,di,si,ci,vi,pi,mi,Ei,Si,_i,fi,Ci,gi,Ni,Di,Ai,Ii,hi,Oi,Li,Ri,wi,Wi,Pi,Mi,xi,Bi,Fi,Ui,ki,Hi,ji,zi,Vi,Yi,Gi,qi,Ki,Xi,$i,Zi,Ji,Qi,ea,na,ta,la,oa,ia,aa,ra,ua,da,sa,ca,va,pa,ma,Ea,Sa,_a,fa,Ca,ga,Na,ya,Ta,Da,Aa,Ia,ha,Oa,ba,La,Ra,wa,Wa,Pa,Ma,xa,Ba,Fa,Ua,ka,Ha,ja,za;const{t:Va}=l.useTranslation(),Ya=n.useRef(),Ga=Digit.UserService.getUser(),qa=(null===(e=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===e?void 0:e.code)||(null==Ga||null===(a=Ga.info)||void 0===a?void 0:a.permanentCity)||Digit.ULBService.getCurrentTenantId(),Ka=Digit.ULBService.getStateId(),[Xa,$a]=n.useState(!1),[Za,Ja]=n.useState(!1),Qa=window.location.href.includes("SW_")?window.location.href.substring(window.location.href.indexOf("SW_")):window.location.href.substring(window.location.href.indexOf("WS_"));let er={tenantId:qa,applicationNumber:Qa};const{isLoading:nr,data:tr}=Digit.Hooks.ws.useMyApplicationSearch({filters:er,BusinessService:null!=Qa&&Qa.includes("SW")?"SW":"WS"},{filters:er,privacy:Digit.Utils.getPrivacyObject()});Digit.Hooks.useClickOutside(Ya,()=>{$a(!1)},Xa);const lr={consumerCode:null!=Qa&&Qa.includes("DC")?(null==tr||null===(r=tr.WaterConnection)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.connectionNo)||(null==tr||null===(d=tr.SewerageConnections)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.connectionNo):(null==tr||null===(m=tr.WaterConnection)||void 0===m||null===(S=m[0])||void 0===S?void 0:S.applicationNo)||(null==tr||null===(_=tr.SewerageConnections)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.applicationNo)},{data:or}=Digit.Hooks.useCommonMDMS(qa,"common-masters","ReceiptKey",{select:e=>{var n,t,l;return(null===(n=e["common-masters"])||void 0===n||null===(t=n.uiCommonPay)||void 0===t||null===(l=t.filter(e=>{let{code:n}=e;return"WS.ONE_TIME_FEE".includes(n)})[0])||void 0===l?void 0:l.receiptKey)||"consolidatedreceipt"}}),ir=Digit.Hooks.useFetchBillsForBuissnessService({businessService:null!=Qa&&Qa.includes("SW")?null!=Qa&&Qa.includes("DC")?"SW":"SW.ONE_TIME_FEE":null!=Qa&&Qa.includes("DC")?"WS":"WS.ONE_TIME_FEE",...lr,tenantId:qa},{enabled:!!(null!=tr&&null!==(C=tr.WaterConnection)&&void 0!==C&&null!==(N=C[0])&&void 0!==N&&N.applicationNo||null!=tr&&null!==(y=tr.SewerageConnections)&&void 0!==y&&null!==(T=y[0])&&void 0!==T&&T.applicationNo),retry:!1}),{data:ar}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:null==tr||null===(D=tr.WaterConnection)||void 0===D||null===(A=D[0])||void 0===A?void 0:A.propertyId}},{filters:{propertyIds:null==tr||null===(I=tr.WaterConnection)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.propertyId},privacy:Digit.Utils.getPrivacyObject()}),rr=Digit.Hooks.ws.useToCheckPrivacyEnablement({privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(O=tr.WaterConnection)||void 0===O||null===(b=O[0])||void 0===b||null===(L=b.connectionHolders)||void 0===L||null===(R=L[0])||void 0===R?void 0:R.uuid:null==tr||null===(w=tr.SewerageConnections)||void 0===w||null===(W=w[0])||void 0===W||null===(P=W.connectionHolders)||void 0===P||null===(x=P[0])||void 0===x?void 0:x.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner"}})||!1,ur="CONNECTION_ACTIVATED"===(null==tr||null===(B=tr.WaterConnection)||void 0===B||null===(U=B[0])||void 0===U?void 0:U.applicationStatus)||"PENDING_FOR_CONNECTION_ACTIVATION"===(null==tr||null===(k=tr.WaterConnection)||void 0===k||null===(H=k[0])||void 0===H?void 0:H.applicationStatus)||"CONNECTION_ACTIVATED"===(null==tr||null===(j=tr.SewerageConnections)||void 0===j||null===(z=j[0])||void 0===z?void 0:z.applicationStatus)||"PENDING_FOR_CONNECTION_ACTIVATION"===(null==tr||null===(V=tr.SewerageConnections)||void 0===V||null===(Y=V[0])||void 0===Y?void 0:Y.applicationStatus);if(nr)return t.createElement(i.Loader,null);let dr=[];const sr={order:1,label:Va("WS_ESTIMATION_NOTICE"),onClick:()=>{var e,n,t,l,o,i,a;return null!=tr&&null!==(e=tr.WaterConnection)&&void 0!==e&&e[0]?g([null==tr||null===(n=tr.WaterConnection)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.additionalDetails)||void 0===l?void 0:l.estimationFileStoreId],Ka):g([null==tr||null===(o=tr.SewerageConnections)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.additionalDetails)||void 0===a?void 0:a.estimationFileStoreId],Ka)}},cr={order:2,label:Va("WS_SANCTION_LETTER"),onClick:()=>{var e,n,t,l,o,i,a;return null!=tr&&null!==(e=tr.WaterConnection)&&void 0!==e&&e[0]?g([null==tr||null===(n=tr.WaterConnection)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.additionalDetails)||void 0===l?void 0:l.sanctionFileStoreId],Ka):g([null==tr||null===(o=tr.SewerageConnections)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.additionalDetails)||void 0===a?void 0:a.sanctionFileStoreId],Ka)}},vr={order:3,label:Va("WS_APPLICATION"),onClick:function(){try{var e,n,t,l,o,i,a;const r=(null==tr||null===(e=tr.WaterConnection)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.tenantId)||(null==tr||null===(t=tr.SewerageConnections)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.tenantId);let u=(null==tr||null===(o=tr.WaterConnection)||void 0===o?void 0:o[0])||(null==tr||null===(i=tr.SewerageConnections)||void 0===i?void 0:i[0]);return q({...u},{...null==ar||null===(a=ar.Properties)||void 0===a?void 0:a[0]},r,Va).then(e=>Digit.Utils.pdf.generatev1(e)),$a(!1),Promise.resolve()}catch(e){return Promise.reject(e)}}},pr={order:4,label:Va("DOWNLOAD_RECEIPT_HEADER"),onClick:function(){try{var e,n,t,l,o,i;const a=Digit.ULBService.getCurrentTenantId(),r=Digit.ULBService.getStateId();let u=null!=tr&&null!==(e=tr.WaterConnection)&&void 0!==e&&e[0]?"WS.ONE_TIME_FEE":"SW.ONE_TIME_FEE";return Promise.resolve(Digit.PaymentService.getReciept(a,u,{consumerCodes:null!=tr&&null!==(n=tr.WaterConnection)&&void 0!==n&&n[0]?null==tr||null===(t=tr.WaterConnection)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo:null==tr||null===(o=tr.SewerageConnections)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationNo})).then(function(e){var n;function t(){return Promise.resolve(Digit.PaymentService.printReciept(r,{fileStoreIds:l.filestoreIds[0]})).then(function(e){window.open(e[l.filestoreIds[0]],"_blank")})}let l={filestoreIds:[null===(n=e.Payments[0])||void 0===n?void 0:n.fileStoreId]};const o=function(n){if(null===(n=e.Payments[0])||void 0===n||!n.fileStoreId)return Promise.resolve(Digit.PaymentService.generatePdf(r,{Payments:e.Payments},or)).then(function(e){l=e})}();return o&&o.then?o.then(t):t()})}catch(e){return Promise.reject(e)}}},mr=[{order:1,label:Va("WS_APPLICATION"),onClick:function(){try{var e,n,t,l,o,i,a;const r=(null==tr||null===(e=tr.WaterConnection)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.tenantId)||(null==tr||null===(t=tr.SewerageConnections)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.tenantId);let u=(null==tr||null===(o=tr.WaterConnection)||void 0===o?void 0:o[0])||(null==tr||null===(i=tr.SewerageConnections)||void 0===i?void 0:i[0]);return bi({...u},{...null==ar||null===(a=ar.Properties)||void 0===a?void 0:a[0]},r,Va).then(e=>Digit.Utils.pdf.generatev1(e)),$a(!1),Promise.resolve()}catch(e){return Promise.reject(e)}}},{order:2,label:Va("WS_DISCONNECTION_NOTICE_LABEL"),onClick:()=>function(){try{var e,n,t,l;let u="ws-waterdisconnectionnotice",d={};var o,i,a,r;return null!=Qa&&Qa.includes("WS")?d={WaterConnection:[{...null==tr||null===(o=tr.WaterConnection)||void 0===o?void 0:o[0],property:null==ar||null===(i=ar.Properties)||void 0===i?void 0:i[0]}]}:(u="ws-seweragedisconnectionnotice",d={SewerageConnection:[{...null==tr||null===(a=tr.SewerageConnections)||void 0===a?void 0:a[0],property:null==ar||null===(r=ar.Properties)||void 0===r?void 0:r[0]}]}),Promise.resolve(Digit.WSService.WSDisconnectionNotice((null==tr||null===(e=tr.WaterConnection)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.tenantId)||(null==tr||null===(t=tr.SewerageConnections)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.tenantId),d,u)).then(function(e){var n,t,l,o;return Promise.resolve(Digit.PaymentService.printReciept((null==tr||null===(n=tr.WaterConnection)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.tenantId)||(null==tr||null===(l=tr.SewerageConnections)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.tenantId),{fileStoreIds:e.filestoreIds[0]})).then(function(n){window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()}],Er=(null==tr||null===(G=tr.WaterConnection)||void 0===G||null===(K=G[0].applicationType)||void 0===K?void 0:K.includes("DISCONNECT"))||(null==tr||null===(X=tr.SewerageConnections)||void 0===X||null===($=X[0].applicationType)||void 0===$?void 0:$.includes("DISCONNECT"));switch((null==tr||null===(Z=tr.WaterConnection)||void 0===Z||null===(J=Z[0])||void 0===J?void 0:J.applicationStatus)||(null==tr||null===(Q=tr.SewerageConnections)||void 0===Q||null===(ee=Q[0])||void 0===ee?void 0:ee.applicationStatus)){case"PENDING_FOR_DOCUMENT_VERIFICATION":dr=null!=tr&&null!==(ne=tr.WaterConnection)&&void 0!==ne&&null!==(te=ne[0].applicationType)&&void 0!==te&&te.includes("DISCONNECT")||null!=tr&&null!==(le=tr.SewerageConnections)&&void 0!==le&&null!==(oe=le[0].applicationType)&&void 0!==oe&&oe.includes("DISCONNECT")?mr:dr.concat(vr);break;case"PENDING_FOR_CITIZEN_ACTION":case"PENDING_FOR_FIELD_INSPECTION":dr=dr.concat(vr);break;case"PENDING_APPROVAL_FOR_CONNECTION":case"PENDING_FOR_PAYMENT":dr=dr.concat(vr,sr);break;case"PENDING_FOR_CONNECTION_ACTIVATION":case"CONNECTION_ACTIVATED":dr=dr.concat(cr,sr,vr,pr);break;case"REJECTED":dr=dr.concat(vr);break;case"PENDING_FOR_DISCONNECTION_EXECUTION":case"DISCONNECTION_EXECUTED":case"PENDING_FOR_PAYMENT":dr=null!=tr&&null!==(ie=tr.WaterConnection)&&void 0!==ie&&null!==(ae=ie[0].applicationType)&&void 0!==ae&&ae.includes("DISCONNECT")||null!=tr&&null!==(re=tr.SewerageConnections)&&void 0!==re&&null!==(ue=re[0].applicationType)&&void 0!==ue&&ue.includes("DISCONNECT")?mr:dr.concat(vr);break;default:dr=dr.concat(vr)}dr.sort(function(e,n){return e.order-n.order});let Sr=tr&&null!=tr&&null!==(de=tr.WaterConnection)&&void 0!==de&&de[0]?"WATER":"SEWERAGE";return sessionStorage.setItem("ApplicationNoState",Qa),t.createElement(t.Fragment,null,dr&&dr.length>0&&t.createElement("div",{ref:Ya},t.createElement(i.MultiLink,{className:"multilinkWrapper",onHeadClick:()=>$a(!Xa),displayOptions:Xa,options:dr})),t.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto",maxWidth:"960px"}},t.createElement(i.Header,null,Va("WS_APPLICATION_DETAILS_HEADER")),t.createElement("div",{style:{display:"flex",alignItems:"center",color:"#A52A2A"}},t.createElement(i.LinkButton,{label:Va("VIEW_TIMELINE"),onClick:()=>{const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"}),Ja(!0)}}))),rr&&t.createElement(F,{t:Va}),t.createElement("div",{className:"hide-seperator"},t.createElement(i.Card,null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:Va("WS_MYCONNECTIONS_APPLICATION_NO"),text:(null==tr||null===(se=tr.WaterConnection)||void 0===se||null===(ce=se[0])||void 0===ce?void 0:ce.applicationNo)||(null==tr||null===(ve=tr.SewerageConnections)||void 0===ve||null===(pe=ve[0])||void 0===pe?void 0:pe.applicationNo),textStyle:{}}),((null==tr||null===(me=tr.WaterConnection)||void 0===me||null===(Ee=me[0].applicationType)||void 0===Ee?void 0:Ee.includes("DISCONNECT"))||(null==tr||null===(Se=tr.SewerageConnections)||void 0===Se||null===(_e=Se[0].applicationType)||void 0===_e?void 0:_e.includes("DISCONNECT")))&&t.createElement(i.Row,{className:"border-none",label:Va("WS_MYCONNECTIONS_CONSUMER_NO"),text:(null==tr||null===(fe=tr.WaterConnection)||void 0===fe||null===(Ce=fe[0])||void 0===Ce?void 0:Ce.connectionNo)||(null==tr||null===(ge=tr.SewerageConnections)||void 0===ge||null===(Ne=ge[0])||void 0===Ne?void 0:Ne.connectionNo),textStyle:{wordBreak:"break-word"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_SERVICE_NAME_LABEL"),text:Va("WS_APPLICATION_TYPE_"+((null==tr||null===(ye=tr.WaterConnection)||void 0===ye||null===(Te=ye[0])||void 0===Te?void 0:Te.applicationType)||(null==tr||null===(De=tr.SewerageConnections)||void 0===De||null===(Ae=De[0])||void 0===Ae?void 0:Ae.applicationType))),textStyle:{wordBreak:"break-word"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),text:null!=ir&&null!==(Ie=ir.data)&&void 0!==Ie&&null!==(he=Ie.Bill)&&void 0!==he&&null!==(Oe=he[0])&&void 0!==Oe&&null!==(be=Oe.billDetails)&&void 0!==be&&null!==(Le=be[0])&&void 0!==Le&&Le.amount?"₹ "+Number(null==ir||null===(Re=ir.data)||void 0===Re||null===(we=Re.Bill)||void 0===we||null===(We=we[0])||void 0===We||null===(Pe=We.billDetails)||void 0===Pe||null===(Me=Pe[0])||void 0===Me?void 0:Me.amount).toFixed(2):Va("₹0"),textStyle:{whiteSpace:"pre"}}),((null==tr||null===(xe=tr.WaterConnection)||void 0===xe||null===(Be=xe[0].applicationType)||void 0===Be?void 0:Be.includes("DISCONNECT"))||(null==tr||null===(Fe=tr.SewerageConnections)||void 0===Fe||null===(Ue=Fe[0].applicationType)||void 0===Ue?void 0:Ue.includes("DISCONNECT")))&&t.createElement(i.Row,{className:"border-none",label:Va("WS_DISCONNECTION_PROPOSED_DATE"),text:null!=Qa&&Qa.includes("WS")?p(null==tr||null===(ke=tr.WaterConnection)||void 0===ke||null===(He=ke[0])||void 0===He?void 0:He.dateEffectiveFrom):p(null==tr||null===(je=tr.SewerageConnections)||void 0===je||null===(ze=je[0])||void 0===ze?void 0:ze.dateEffectiveFrom),textStyle:{wordBreak:"break-word"}}),((null==tr||null===(Ve=tr.WaterConnection)||void 0===Ve||null===(Ye=Ve[0].applicationType)||void 0===Ye?void 0:Ye.includes("DISCONNECT"))||(null==tr||null===(Ge=tr.SewerageConnections)||void 0===Ge||null===(qe=Ge[0].applicationType)||void 0===qe?void 0:qe.includes("DISCONNECT")))&&t.createElement(i.Row,{className:"border-none",label:Va("WS_DISCONNECTION_EXECUTED_DATE"),text:null!=Qa&&Qa.includes("WS")?p(null==tr||null===(Ke=tr.WaterConnection)||void 0===Ke||null===(Xe=Ke[0])||void 0===Xe?void 0:Xe.disconnectionExecutionDate):p(null==tr||null===($e=tr.SewerageConnections)||void 0===$e||null===(Ze=$e[0])||void 0===Ze?void 0:Ze.disconnectionExecutionDate),textStyle:{wordBreak:"break-word"}}),((null==tr||null===(Je=tr.WaterConnection)||void 0===Je||null===(Qe=Je[0].applicationType)||void 0===Qe?void 0:Qe.includes("DISCONNECT"))||(null==tr||null===(en=tr.SewerageConnections)||void 0===en||null===(nn=en[0].applicationType)||void 0===nn?void 0:nn.includes("DISCONNECT")))&&t.createElement(i.Row,{className:"border-none",label:Va("WS_DISCONNECTION_REASON"),text:null!=(null==tr||null===(tn=tr.WaterConnection)||void 0===tn||null===(ln=tn[0])||void 0===ln?void 0:ln.disconnectionReason)?null==tr||null===(on=tr.WaterConnection)||void 0===on||null===(an=on[0])||void 0===an?void 0:an.disconnectionReason:null!=(null==tr||null===(rn=tr.SewerageConnections)||void 0===rn||null===(un=rn[0])||void 0===un?void 0:un.disconnectionReason)?null==tr||null===(dn=tr.SewerageConnections)||void 0===dn||null===(sn=dn[0])||void 0===sn?void 0:sn.disconnectionReason:Va("NA"),textStyle:{wordBreak:"break-word"}}))),(null==ir||null===(cn=ir.data)||void 0===cn||null===(vn=cn.Bill)||void 0===vn||null===(pn=vn[0])||void 0===pn||null===(mn=pn.billDetails)||void 0===mn||null===(En=mn[0])||void 0===En?void 0:En.billAccountDetails.length)>0&&t.createElement(i.Card,null,t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},Va("WS_FEE_DEATAILS_HEADER")),t.createElement(i.StatusTable,null,null==ir||null===(Sn=ir.data)||void 0===Sn||null===(_n=Sn.Bill)||void 0===_n||null===(fn=_n[0])||void 0===fn||null===(Cn=fn.billDetails)||void 0===Cn||null===(gn=Cn[0])||void 0===gn?void 0:gn.billAccountDetails.map(e=>t.createElement(i.Row,{className:"border-none",label:Va(null==e?void 0:e.taxHeadCode),text:"₹"+Number(null==e?void 0:e.amount).toFixed(2),textStyle:{textAlign:"right"}})),t.createElement(i.Row,{className:"border-none",label:Va("WS_TOTAL_AMOUNT_DUE"),text:"₹"+Number(ur?0:null==ir||null===(Nn=ir.data)||void 0===Nn||null===(yn=Nn.Bill)||void 0===yn||null===(Tn=yn[0])||void 0===Tn||null===(Dn=Tn.billDetails)||void 0===Dn||null===(An=Dn[0])||void 0===An?void 0:An.amount).toFixed(2),textStyle:{textAlign:"right",fontSize:"18px",fontWeight:"700"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_COMMON_TABLE_COL_APPLICATION_STATUS"),text:ur||0==Number(null==ir||null===(In=ir.data)||void 0===In||null===(hn=In.Bill)||void 0===hn||null===(On=hn[0])||void 0===On||null===(bn=On.billDetails)||void 0===bn||null===(Ln=bn[0])||void 0===Ln?void 0:Ln.amount).toFixed(2)?Va("WS_COMMON_PAID_LABEL"):Va("WS_COMMON_NOT_PAID"),textStyle:ur||0==Number(null==ir||null===(Rn=ir.data)||void 0===Rn||null===(wn=Rn.Bill)||void 0===wn||null===(Wn=wn[0])||void 0===Wn||null===(Pn=Wn.billDetails)||void 0===Pn||null===(Mn=Pn[0])||void 0===Mn?void 0:Mn.amount).toFixed(2)?{textAlign:"right",color:"darkgreen"}:{textAlign:"right",color:"red"}}))),t.createElement(i.Card,null,t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},Va("WS_COMMON_PROPERTY_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:Va("WS_PROPERTY_ID_LABEL"),text:(null==tr||null===(xn=tr.WaterConnection)||void 0===xn||null===(Bn=xn[0])||void 0===Bn?void 0:Bn.propertyId)||(null==tr||null===(Fn=tr.SewerageConnections)||void 0===Fn||null===(Un=Fn[0])||void 0===Un?void 0:Un.propertyId),textStyle:{wordBreak:"break-word"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_OWN_NAME_LABEL"),text:null==ar||null===(kn=ar.Properties)||void 0===kn||null===(Hn=kn[0])||void 0===Hn||null===(jn=Hn.owners.sort((e,n)=>{var t,l;return(null==e||null===(t=e.additionalDetails)||void 0===t?void 0:t.ownerSequence)-(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===jn||null===(zn=jn[0])||void 0===zn?void 0:zn.name,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_PROPERTY_ADDRESS"),text:E(null==ar||null===(Vn=ar.Properties)||void 0===Vn||null===(Yn=Vn[0])||void 0===Yn?void 0:Yn.address,Va)||Va("CS_NA"),textStyle:{wordBreak:"break-word"},privacy:{uuid:null==ar||null===(Gn=ar.Properties)||void 0===Gn||null===(qn=Gn[0])||void 0===qn||null===(Kn=qn.owners)||void 0===Kn||null===(Xn=Kn[0])||void 0===Xn?void 0:Xn.uuid,fieldName:["doorNo","street","landmark"],model:"Property",hide:!(null!=ar&&null!==($n=ar.Properties)&&void 0!==$n&&null!==(Zn=$n[0])&&void 0!==Zn&&Zn.address),showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:qa,propertyIds:(null==tr||null===(Jn=tr.WaterConnection)||void 0===Jn||null===(Qn=Jn[0])||void 0===Qn?void 0:Qn.propertyId)||(null==tr||null===(et=tr.SewerageConnections)||void 0===et||null===(nt=et[0])||void 0===nt?void 0:nt.propertyId)},jsonPath:"Properties[0].address.street",isArray:!1,d:e=>(M.get(e,"Properties[0].address.doorNo")?M.get(e,"Properties[0].address.doorNo")+", ":"")+(M.get(e,"Properties[0].address.street")?M.get(e,"Properties[0].address.street")+", ":"")+(M.get(e,"Properties[0].address.landmark")?""+M.get(e,"Properties[0].address.landmark"):"")}}}),t.createElement(o.Link,{to:"/digit-ui/citizen/commonpt/view-property?propertyId="+((null==tr||null===(tt=tr.WaterConnection)||void 0===tt||null===(lt=tt[0])||void 0===lt?void 0:lt.propertyId)||(null==tr||null===(ot=tr.SewerageConnections)||void 0===ot||null===(it=ot[0])||void 0===it?void 0:it.propertyId))+"&tenantId="+((null==tr||null===(at=tr.WaterConnection)||void 0===at||null===(rt=at[0])||void 0===rt?void 0:rt.tenantId)||(null==tr||null===(ut=tr.SewerageConnections)||void 0===ut||null===(dt=ut[0])||void 0===dt?void 0:dt.tenantId))},t.createElement(i.LinkButton,{style:{textAlign:"left"},label:Va("WS_VIEW_PROPERTY")})))),(null==tr||null===(st=tr.WaterConnection)||void 0===st||null===(ct=st[0])||void 0===ct||null===(vt=ct.connectionHolders)||void 0===vt?void 0:vt.length)>0||(null==tr||null===(pt=tr.SewerageConnections)||void 0===pt||null===(mt=pt[0])||void 0===mt||null===(Et=mt.connectionHolders)||void 0===Et?void 0:Et.length)>0?t.createElement(i.Card,null,t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},Va("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_MOBILE_NO_LABEL"),text:(null==tr||null===(St=tr.WaterConnection)||void 0===St||null===(_t=St[0])||void 0===_t||null===(ft=_t.connectionHolders)||void 0===ft||null===(Ct=ft[0])||void 0===Ct?void 0:Ct.mobileNumber)||(null==tr||null===(gt=tr.SewerageConnections)||void 0===gt||null===(Nt=gt[0])||void 0===Nt||null===(yt=Nt.connectionHolders)||void 0===yt||null===(Tt=yt[0])||void 0===Tt?void 0:Tt.mobileNumber),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(Dt=tr.WaterConnection)||void 0===Dt||null===(At=Dt[0])||void 0===At||null===(It=At.connectionHolders)||void 0===It||null===(ht=It[0])||void 0===ht?void 0:ht.uuid:null==tr||null===(Ot=tr.SewerageConnections)||void 0===Ot||null===(bt=Ot[0])||void 0===bt||null===(Lt=bt.connectionHolders)||void 0===Lt||null===(Rt=Lt[0])||void 0===Rt?void 0:Rt.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].mobileNumber":"SewerageConnections[0].connectionHolders[0].mobileNumber",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_OWN_NAME_LABEL"),text:(null==tr||null===(wt=tr.WaterConnection)||void 0===wt||null===(Wt=wt[0])||void 0===Wt||null===(Pt=Wt.connectionHolders)||void 0===Pt||null===(Mt=Pt[0])||void 0===Mt?void 0:Mt.name)||(null==tr||null===(xt=tr.SewerageConnections)||void 0===xt||null===(Bt=xt[0])||void 0===Bt||null===(Ft=Bt.connectionHolders)||void 0===Ft||null===(Ut=Ft[0])||void 0===Ut?void 0:Ut.name),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_GENDER_LABEL"),text:Va((null==tr||null===(kt=tr.WaterConnection)||void 0===kt||null===(Ht=kt[0])||void 0===Ht||null===(jt=Ht.connectionHolders)||void 0===jt||null===(zt=jt[0])||void 0===zt?void 0:zt.gender)||(null==tr||null===(Vt=tr.SewerageConnections)||void 0===Vt||null===(Yt=Vt[0])||void 0===Yt||null===(Gt=Yt.connectionHolders)||void 0===Gt||null===(qt=Gt[0])||void 0===qt?void 0:qt.gender)),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(Kt=tr.WaterConnection)||void 0===Kt||null===(Xt=Kt[0])||void 0===Xt||null===($t=Xt.connectionHolders)||void 0===$t||null===(Zt=$t[0])||void 0===Zt?void 0:Zt.uuid:null==tr||null===(Jt=tr.SewerageConnections)||void 0===Jt||null===(Qt=Jt[0])||void 0===Qt||null===(el=Qt.connectionHolders)||void 0===el||null===(nl=el[0])||void 0===nl?void 0:nl.uuid,fieldName:"gender",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].gender":"SewerageConnections[0].connectionHolders[0].gender",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),text:(null==tr||null===(tl=tr.WaterConnection)||void 0===tl||null===(ll=tl[0])||void 0===ll||null===(ol=ll.connectionHolders)||void 0===ol||null===(il=ol[0])||void 0===il?void 0:il.fatherOrHusbandName)||(null==tr||null===(al=tr.SewerageConnections)||void 0===al||null===(rl=al[0])||void 0===rl||null===(ul=rl.connectionHolders)||void 0===ul||null===(dl=ul[0])||void 0===dl?void 0:dl.fatherOrHusbandName)||Va("CS_NA"),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(sl=tr.WaterConnection)||void 0===sl||null===(cl=sl[0])||void 0===cl||null===(vl=cl.connectionHolders)||void 0===vl||null===(pl=vl[0])||void 0===pl?void 0:pl.uuid:null==tr||null===(ml=tr.SewerageConnections)||void 0===ml||null===(El=ml[0])||void 0===El||null===(Sl=El.connectionHolders)||void 0===Sl||null===(_l=Sl[0])||void 0===_l?void 0:_l.uuid,fieldName:"fatherOrHusbandName",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].fatherOrHusbandName":"SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_RELATION_LABEL"),text:(null==tr||null===(fl=tr.WaterConnection)||void 0===fl||null===(Cl=fl[0])||void 0===Cl||null===(gl=Cl.connectionHolders)||void 0===gl||null===(Nl=gl[0])||void 0===Nl?void 0:Nl.relationship)||(null==tr||null===(yl=tr.SewerageConnections)||void 0===yl||null===(Tl=yl[0])||void 0===Tl||null===(Dl=Tl.connectionHolders)||void 0===Dl||null===(Al=Dl[0])||void 0===Al?void 0:Al.relationship)||Va("CS_NA"),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(Il=tr.WaterConnection)||void 0===Il||null===(hl=Il[0])||void 0===hl||null===(Ol=hl.connectionHolders)||void 0===Ol||null===(bl=Ol[0])||void 0===bl?void 0:bl.uuid:null==tr||null===(Ll=tr.SewerageConnections)||void 0===Ll||null===(Rl=Ll[0])||void 0===Rl||null===(wl=Rl.connectionHolders)||void 0===wl||null===(Wl=wl[0])||void 0===Wl?void 0:Wl.uuid,fieldName:"relationship",model:"WnSConnection",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].relationship":"SewerageConnections[0].connectionHolders[0].relationship",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_CROSADD"),text:(null==tr||null===(Pl=tr.WaterConnection)||void 0===Pl||null===(Ml=Pl[0])||void 0===Ml||null===(xl=Ml.connectionHolders)||void 0===xl||null===(Bl=xl[0])||void 0===Bl?void 0:Bl.correspondenceAddress)||(null==tr||null===(Fl=tr.SewerageConnections)||void 0===Fl||null===(Ul=Fl[0])||void 0===Ul||null===(kl=Ul.connectionHolders)||void 0===kl||null===(Hl=kl[0])||void 0===Hl?void 0:Hl.correspondenceAddress)||Va("CS_NA"),privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(jl=tr.WaterConnection)||void 0===jl||null===(zl=jl[0])||void 0===zl||null===(Vl=zl.connectionHolders)||void 0===Vl||null===(Yl=Vl[0])||void 0===Yl?void 0:Yl.uuid:null==tr||null===(Gl=tr.SewerageConnections)||void 0===Gl||null===(ql=Gl[0])||void 0===ql||null===(Kl=ql.connectionHolders)||void 0===Kl||null===(Xl=Kl[0])||void 0===Xl?void 0:Xl.uuid,fieldName:"correspondenceAddress",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].correspondenceAddress":"SewerageConnections[0].connectionHolders[0].correspondenceAddress",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),text:(null!=Qa&&Qa.includes("WS")?null!=tr&&null!==($l=tr.WaterConnection)&&void 0!==$l&&null!==(Zl=$l[0])&&void 0!==Zl&&null!==(Jl=Zl.connectionHolders)&&void 0!==Jl&&null!==(Ql=Jl[0])&&void 0!==Ql&&null!==(eo=Ql.ownerType)&&void 0!==eo&&eo.includes("*"):null!=tr&&null!==(no=tr.SewerageConnections)&&void 0!==no&&null!==(to=no[0])&&void 0!==to&&null!==(lo=to.connectionHolders)&&void 0!==lo&&null!==(oo=lo[0])&&void 0!==oo&&null!==(io=oo.ownerType)&&void 0!==io&&io.includes("*"))?null!=Qa&&Qa.includes("WS")?null==tr||null===(Eo=tr.WaterConnection)||void 0===Eo||null===(So=Eo[0])||void 0===So||null===(_o=So.connectionHolders)||void 0===_o||null===(fo=_o[0])||void 0===fo?void 0:fo.ownerType:null==tr||null===(Co=tr.SewerageConnections)||void 0===Co||null===(go=Co[0])||void 0===go||null===(No=go.connectionHolders)||void 0===No||null===(yo=No[0])||void 0===yo?void 0:yo.ownerType:Va("COMMON_MASTERS_OWNERTYPE_"+(null!=Qa&&Qa.includes("WS")?null==tr||null===(ao=tr.WaterConnection)||void 0===ao||null===(ro=ao[0])||void 0===ro||null===(uo=ro.connectionHolders)||void 0===uo||null===(so=uo[0])||void 0===so?void 0:so.ownerType:null==tr||null===(co=tr.SewerageConnections)||void 0===co||null===(vo=co[0])||void 0===vo||null===(po=vo.connectionHolders)||void 0===po||null===(mo=po[0])||void 0===mo?void 0:mo.ownerType)),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(To=tr.WaterConnection)||void 0===To||null===(Do=To[0])||void 0===Do||null===(Ao=Do.connectionHolders)||void 0===Ao||null===(Io=Ao[0])||void 0===Io?void 0:Io.uuid:null==tr||null===(ho=tr.SewerageConnections)||void 0===ho||null===(Oo=ho[0])||void 0===Oo||null===(bo=Oo.connectionHolders)||void 0===bo||null===(Lo=bo[0])||void 0===Lo?void 0:Lo.uuid,fieldName:"ownerType",model:"WnSConnection",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].ownerType":"SewerageConnections[0].connectionHolders[0].ownerType",isArray:!1,d:e=>{var n,t,l,o,i,a,r,u,d,s,c;return null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n[0]?Va("PROPERTYTAX_OWNERTYPE_"+(null==e||null===(t=e.WaterConnection)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.connectionHolders)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.ownerType)||void 0===a?void 0:a.toUpperCase())):Va("PROPERTYTAX_OWNERTYPE_"+(null==e||null===(r=e.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s||null===(c=s.ownerType)||void 0===c?void 0:c.toUpperCase()))}}}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_OWN_DETAIL_EMAIL_ID_LABEL"),text:(null==tr||null===(Ro=tr.WaterConnection)||void 0===Ro||null===(wo=Ro[0])||void 0===wo||null===(Wo=wo.connectionHolders)||void 0===Wo||null===(Po=Wo[0])||void 0===Po?void 0:Po.emailId)||(null==tr||null===(Mo=tr.SewerageConnections)||void 0===Mo||null===(xo=Mo[0])||void 0===xo||null===(Bo=xo.connectionHolders)||void 0===Bo||null===(Fo=Bo[0])||void 0===Fo?void 0:Fo.emailId)||"NA",textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=Qa&&Qa.includes("WS")?null==tr||null===(Uo=tr.WaterConnection)||void 0===Uo||null===(ko=Uo[0])||void 0===ko||null===(Ho=ko.connectionHolders)||void 0===Ho||null===(jo=Ho[0])||void 0===jo?void 0:jo.uuid:null==tr||null===(zo=tr.SewerageConnections)||void 0===zo||null===(Vo=zo[0])||void 0===Vo||null===(Yo=Vo.connectionHolders)||void 0===Yo||null===(Go=Yo[0])||void 0===Go?void 0:Go.uuid,fieldName:"connectionHoldersEmailId",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===Sr?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:qa,applicationNumber:Qa},jsonPath:"WATER"===Sr?"WaterConnection[0].connectionHolders[0].emailId":"SewerageConnections[0].connectionHolders[0].emailId",isArray:!1}}}))):t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.CardSubHeader,null,Va("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")),t.createElement(i.CardText,null,Va("WS_SAME_AS_PROPERTY_OWNERS")))),Er?null:t.createElement(i.Card,null,t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},Va("WS_COMMON_CONNECTION_DETAIL")),(null==tr?void 0:tr.WaterConnection)&&(null==tr||null===(qo=tr.WaterConnection)||void 0===qo?void 0:qo.length)>0&&t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:Va("WS_TASK_DETAILS_CONN_DETAIL_NO_OF_TAPS_PROPOSED"),text:(null==tr||null===(Ko=tr.WaterConnection)||void 0===Ko||null===(Xo=Ko[0])||void 0===Xo?void 0:Xo.proposedTaps)||Va("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_SERV_DETAIL_PIPE_SIZE"),text:(null==tr||null===($o=tr.WaterConnection)||void 0===$o||null===(Zo=$o[0])||void 0===Zo?void 0:Zo.proposedPipeSize)+" "+Va("WS_INCHES_LABEL")||Va("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(o.Link,{to:"/digit-ui/citizen/ws/connection/additional/"+(null==tr||null===(Jo=tr.WaterConnection)||void 0===Jo||null===(Qo=Jo[0])||void 0===Qo?void 0:Qo.applicationNo)},t.createElement(i.LinkButton,{style:{textAlign:"left"},label:Va("WS_ADDITIONAL_DETAILS")}))),(null==tr?void 0:tr.SewerageConnections)&&(null==tr||null===(ei=tr.SewerageConnections)||void 0===ei?void 0:ei.length)>0&&t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:Va("WS_NO_OF_WATER_CLOSETS_LABEL"),text:null==tr||null===(ni=tr.SewerageConnections)||void 0===ni||null===(ti=ni[0])||void 0===ti?void 0:ti.proposedWaterClosets,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:Va("WS_SERV_DETAIL_NO_OF_TOILETS"),text:(null==tr||null===(li=tr.SewerageConnections)||void 0===li||null===(oi=li[0])||void 0===oi?void 0:oi.proposedToilets)||Va("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(o.Link,{to:"/digit-ui/citizen/ws/connection/additional/"+(null==tr||null===(ii=tr.SewerageConnections)||void 0===ii||null===(ai=ii[0])||void 0===ai?void 0:ai.applicationNo)},t.createElement(i.LinkButton,{style:{textAlign:"left"},label:Va("WS_ADDITIONAL_DETAILS")})))),t.createElement(i.Card,null,t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},Va("WS_COMMON_DOCUMENT_DETAILS")),(null==tr||null===(ri=tr.WaterConnection)||void 0===ri||null===(ui=ri[0])||void 0===ui?void 0:ui.documents)&&(null==tr||null===(di=tr.WaterConnection)||void 0===di||null===(si=di[0])||void 0===si?void 0:si.documents.map((e,n)=>{var l,o,a,r,u;return t.createElement("div",{key:"doc-"+n},t.createElement("div",null,t.createElement(i.CardSectionHeader,null,Va(null==e||null===(l=e.documentType)||void 0===l?void 0:l.split(".").slice(0,2).join("_"))),t.createElement(i.StatusTable,null,t.createElement(Ti,{value:null==tr||null===(o=tr.WaterConnection)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.documents,Code:null==e?void 0:e.documentType,index:n}),(null==tr||null===(r=tr.WaterConnection)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.documents.length)!=n+1?t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)))})),(null==tr||null===(ci=tr.SewerageConnections)||void 0===ci||null===(vi=ci[0])||void 0===vi?void 0:vi.documents)&&(null==tr||null===(pi=tr.SewerageConnections)||void 0===pi||null===(mi=pi[0])||void 0===mi?void 0:mi.documents.map((e,n)=>{var l,o,a,r,u;return t.createElement("div",{key:"doc-"+n},t.createElement("div",null,t.createElement(i.CardSectionHeader,null,Va(null==e||null===(l=e.documentType)||void 0===l?void 0:l.split(".").slice(0,2).join("_"))),t.createElement(i.StatusTable,null,t.createElement(Ti,{value:null==tr||null===(o=tr.SewerageConnections)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.documents,Code:null==e?void 0:e.documentType,index:n}),(null==tr||null===(r=tr.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.documents.length)!=n+1?t.createElement("hr",{style:{color:"white",backgroundColor:"white",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)))}))),t.createElement(i.Card,null,t.createElement("div",{id:"timeline"},t.createElement(yi,{application:(null==tr||null===(Ei=tr.WaterConnection)||void 0===Ei?void 0:Ei[0])||(null==tr||null===(Si=tr.SewerageConnections)||void 0===Si?void 0:Si[0]),id:(null==tr||null===(_i=tr.WaterConnection)||void 0===_i||null===(fi=_i[0])||void 0===fi?void 0:fi.applicationNo)||(null==tr||null===(Ci=tr.SewerageConnections)||void 0===Ci||null===(gi=Ci[0])||void 0===gi?void 0:gi.applicationNo),paymentbuttonenabled:!1})),"PENDING_FOR_PAYMENT"===(null==tr||null===(Ni=tr.WaterConnection)||void 0===Ni||null===(Di=Ni[0])||void 0===Di?void 0:Di.applicationStatus)||"PENDING_FOR_PAYMENT"===(null==tr||null===(Ai=tr.SewerageConnections)||void 0===Ai||null===(Ii=Ai[0])||void 0===Ii?void 0:Ii.applicationStatus)?t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+(null==ir||null===(hi=ir.data)||void 0===hi||null===(Oi=hi.Bill)||void 0===Oi||null===(Li=Oi[0])||void 0===Li?void 0:Li.businessService)+"/"+(null!=Qa&&Qa.includes("DC")?s(null==tr||null===(Ri=tr.WaterConnection)||void 0===Ri||null===(wi=Ri[0])||void 0===wi?void 0:wi.connectionNo,"/","+")||s(null==tr||null===(Wi=tr.SewerageConnections)||void 0===Wi||null===(Pi=Wi[0])||void 0===Pi?void 0:Pi.connectionNo,"/","+"):s(null==tr||null===(Mi=tr.WaterConnection)||void 0===Mi||null===(xi=Mi[0])||void 0===xi?void 0:xi.applicationNo,"/","+")||s(null==tr||null===(Bi=tr.SewerageConnections)||void 0===Bi||null===(Fi=Bi[0])||void 0===Fi?void 0:Fi.applicationNo,"/","+"))+"?workflow=WNS&tenantId="+((null==tr||null===(Ui=tr.WaterConnection)||void 0===Ui||null===(ki=Ui[0])||void 0===ki?void 0:ki.tenantId)||(null==tr||null===(Hi=tr.SewerageConnections)||void 0===Hi||null===(ji=Hi[0])||void 0===ji?void 0:ji.tenantId))+"&ConsumerName="+((null==tr||null===(zi=tr.WaterConnection)||void 0===zi||null===(Vi=zi[0])||void 0===Vi||null===(Yi=Vi.connectionHolders)||void 0===Yi?void 0:Yi.map(e=>e.name).join(","))||(null==tr||null===(Gi=tr.SewerageConnections)||void 0===Gi||null===(qi=Gi[0])||void 0===qi||null===(Ki=qi.connectionHolders)||void 0===Ki?void 0:Ki.map(e=>e.name).join(","))||(null==ar||null===(Xi=ar.Properties)||void 0===Xi||null===($i=Xi[0])||void 0===$i||null===(Zi=$i.owners)||void 0===Zi?void 0:Zi.map(e=>e.name).join(",")))+"&isDisoconnectFlow="+!(null==Qa||!Qa.includes("DC")),state:{}}},t.createElement(i.SubmitBar,{label:Va("MAKE_PAYMENT")})):null,(null==tr||null===(Ji=tr.WaterConnection)||void 0===Ji||null===(Qi=Ji[0])||void 0===Qi||!Qi.applicationType.includes("DISCONNECT"))&&null!=tr&&null!==(ea=tr.WaterConnection)&&void 0!==ea&&null!==(na=ea[0])&&void 0!==na&&na.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION")||(null==tr||null===(ta=tr.SewerageConnections)||void 0===ta||null===(la=ta[0])||void 0===la||!la.applicationType.includes("DISCONNECT"))&&null!=tr&&null!==(oa=tr.SewerageConnections)&&void 0!==oa&&null!==(ia=oa[0])&&void 0!==ia&&ia.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION")?t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/ws/edit-application/"+((null==tr||null===(aa=tr.WaterConnection)||void 0===aa||null===(ra=aa[0])||void 0===ra?void 0:ra.tenantId)||(null==tr||null===(ua=tr.SewerageConnections)||void 0===ua||null===(da=ua[0])||void 0===da?void 0:da.tenantId)),state:{id:""+((null==tr||null===(sa=tr.WaterConnection)||void 0===sa||null===(ca=sa[0])||void 0===ca?void 0:ca.applicationNo)||(null==tr||null===(va=tr.SewerageConnections)||void 0===va||null===(pa=va[0])||void 0===pa?void 0:pa.applicationNo))}}},t.createElement(i.SubmitBar,{label:Va("COMMON_EDIT")})):null,null!=tr&&null!==(ma=tr.WaterConnection)&&void 0!==ma&&null!==(Ea=ma[0])&&void 0!==Ea&&Ea.applicationType.includes("DISCONNECT")&&null!=tr&&null!==(Sa=tr.WaterConnection)&&void 0!==Sa&&null!==(_a=Sa[0])&&void 0!==_a&&_a.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION")||null!=tr&&null!==(fa=tr.SewerageConnections)&&void 0!==fa&&null!==(Ca=fa[0])&&void 0!==Ca&&Ca.applicationType.includes("DISCONNECT")&&null!=tr&&null!==(ga=tr.SewerageConnections)&&void 0!==ga&&null!==(Na=ga[0])&&void 0!==Na&&Na.applicationStatus.includes("PENDING_FOR_CITIZEN_ACTION")?t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/ws/resubmit-disconnect-application",state:{id:""+((null==tr||null===(ya=tr.WaterConnection)||void 0===ya||null===(Ta=ya[0])||void 0===Ta?void 0:Ta.applicationNo)||(null==tr||null===(Da=tr.SewerageConnections)||void 0===Da||null===(Aa=Da[0])||void 0===Aa?void 0:Aa.applicationNo))}}},t.createElement(i.SubmitBar,{label:Va("RESUBMIT_APPLICATION"),onSubmit:Digit.SessionStorage.set("WS_DISCONNECTION",null!=Qa&&Qa.includes("SW")?{applicationData:null==tr||null===(Ia=tr.SewerageConnections)||void 0===Ia?void 0:Ia[0],serviceType:"SEWERAGE",WSDisconnectionForm:{type:null!=tr&&null!==(ha=tr.SewerageConnections)&&void 0!==ha&&null!==(Oa=ha[0])&&void 0!==Oa&&Oa.isDisconnectionTemporary?{code:"type",value:{name:"Temporary",i18nKey:"WS_DISCONNECTIONTYPE_TEMPORARY",active:!0,code:"Temporary"}}:{code:"type",value:{name:"Permanent",i18nKey:"WS_DISCONNECTIONTYPE_PERMANENT",active:!0,code:"Permanent"}},date:v(null==tr||null===(ba=tr.SewerageConnections)||void 0===ba||null===(La=ba[0])||void 0===La?void 0:La.dateEffectiveFrom,!0),reason:{code:"reason",value:null==tr||null===(Ra=tr.SewerageConnections)||void 0===Ra||null===(wa=Ra[0])||void 0===wa?void 0:wa.disconnectionReason},documents:null==tr||null===(Wa=tr.SewerageConnections)||void 0===Wa||null===(Pa=Wa[0])||void 0===Pa?void 0:Pa.documents}}:{applicationData:null==tr||null===(Ma=tr.WaterConnection)||void 0===Ma?void 0:Ma[0],serviceType:"WATER",WSDisconnectionForm:{type:null!=tr&&null!==(xa=tr.WaterConnection)&&void 0!==xa&&null!==(Ba=xa[0])&&void 0!==Ba&&Ba.isDisconnectionTemporary?{code:"type",value:{name:"Temporary",i18nKey:"WS_DISCONNECTIONTYPE_TEMPORARY",active:!0,code:"Temporary"}}:{code:"type",value:{name:"Permanent",i18nKey:"WS_DISCONNECTIONTYPE_PERMANENT",active:!0,code:"Permanent"}},date:v(null==tr||null===(Fa=tr.WaterConnection)||void 0===Fa||null===(Ua=Fa[0])||void 0===Ua?void 0:Ua.dateEffectiveFrom,!0),reason:{code:"reason",value:null==tr||null===(ka=tr.WaterConnection)||void 0===ka||null===(Ha=ka[0])||void 0===Ha?void 0:Ha.disconnectionReason},documents:null==tr||null===(ja=tr.WaterConnection)||void 0===ja||null===(za=ja[0])||void 0===za?void 0:za.documents}})})):null)))},WSAdditionalDetails:()=>{var e,n,o,a,r,u,d,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be,Fe,Ue,ke,He,je,ze,Ve,Ye,Ge,qe,Ke,Xe,$e,Ze,Je,Qe,en,nn,tn,ln,on,an,rn,un,dn;const{t:sn}=l.useTranslation(),cn=Digit.UserService.getUser(),vn=Digit.ULBService.getCurrentTenantId()||(null==cn||null===(e=cn.info)||void 0===e?void 0:e.permanentCity),pn=window.location.href.includes("SW_")?window.location.href.substring(window.location.href.indexOf("SW_")):window.location.href.substring(window.location.href.indexOf("WS_"));let mn={tenantId:vn,applicationNumber:pn};const{isLoading:En,data:Sn}=Digit.Hooks.ws.useMyApplicationSearch({filters:mn,BusinessService:null!=pn&&pn.includes("SW")?"SW":"WS"},{filters:mn});return En?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.Header,null,sn("WS_COMMON_ADDN_DETAILS")),t.createElement("div",{className:"hide-seperator"},t.createElement(i.Card,null,t.createElement(i.CardSubHeader,null,sn("WS_COMMON_CONNECTION_DETAIL")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:sn("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),text:(null==Sn||null===(n=Sn.WaterConnection)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.connectionType)||(null==Sn||null===(a=Sn.SewerageConnections)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.connectionType)||sn("NA"),textStyle:{whiteSpace:"pre"}}),(null==Sn?void 0:Sn.WaterConnection)&&(null==Sn||null===(u=Sn.WaterConnection)||void 0===u?void 0:u.length)>0&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_NO_OF_TAPS"),text:(null==Sn||null===(d=Sn.WaterConnection)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.noOfTaps)||(null==Sn||null===(v=Sn.SewerageConnections)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.noOfTaps)||sn("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_PIPE_SIZE_IN_INCHES_LABEL"),text:(null==Sn||null===(m=Sn.WaterConnection)||void 0===m||null===(E=m[0])||void 0===E?void 0:E.pipeSize)||(null==Sn||null===(S=Sn.SewerageConnections)||void 0===S||null===(_=S[0])||void 0===_?void 0:_.pipeSize)||sn("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_WATER_SOURCE"),text:sn("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==Sn||null===(f=Sn.WaterConnection)||void 0===f||null===(C=f[0])||void 0===C||null===(g=C.waterSource)||void 0===g||null===(N=g.split("."))||void 0===N?void 0:N[0],".","_"))||sn("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null==Sn||null===(y=Sn.SewerageConnections)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.waterSource,".","_"))||sn("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_WATER_SUB_SOURCE"),text:sn(null==Sn||null===(D=Sn.WaterConnection)||void 0===D||null===(A=D[0])||void 0===A||null===(I=A.waterSource)||void 0===I||null===(h=I.split("."))||void 0===h?void 0:h[1])||sn("CS_NA"),textStyle:{whiteSpace:"pre"}}))),(null==Sn?void 0:Sn.SewerageConnections)&&(null==Sn||null===(O=Sn.SewerageConnections)||void 0===O?void 0:O.length)>0&&t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:sn("WS_NUMBER_WATER_CLOSETS_LABEL"),text:null==Sn||null===(b=Sn.SewerageConnections)||void 0===b||null===(L=b[0])||void 0===L?void 0:L.proposedWaterClosets,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_NO_OF_TOILETS"),text:(null==Sn||null===(R=Sn.SewerageConnections)||void 0===R||null===(w=R[0])||void 0===w?void 0:w.proposedToilets)||sn("CS_NA"),textStyle:{whiteSpace:"pre"}}))),t.createElement(i.Card,null,t.createElement(i.CardSubHeader,null,sn("WS_COMMON_PLUMBER_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAILS_PLUMBER_PROVIDED_BY"),text:("ULB"===(null==Sn||null===(W=Sn.WaterConnection)||void 0===W||null===(P=W[0])||void 0===P||null===(M=P.additionalDetails)||void 0===M?void 0:M.detailsProvidedBy)?sn("WS_PLUMBER_ULB"):sn("WS_PLUMBER_SELF"))||("ULB"===(null==Sn||null===(x=Sn.SewerageConnections)||void 0===x||null===(B=x[0])||void 0===B||null===(F=B.additionalDetails)||void 0===F?void 0:F.detailsProvidedBy)?sn("WS_PLUMBER_ULB"):sn("WS_PLUMBER_SELF"))||sn("NA"),textStyle:{whiteSpace:"pre"}}),("ULB"===(null==Sn||null===(U=Sn.WaterConnection)||void 0===U||null===(k=U[0])||void 0===k||null===(H=k.additionalDetails)||void 0===H?void 0:H.detailsProvidedBy)||"ULB"===(null==Sn||null===(j=Sn.SewerageConnections)||void 0===j||null===(z=j[0])||void 0===z||null===(V=z.additionalDetails)||void 0===V?void 0:V.detailsProvidedBy))&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:sn("WS_PLUMBER_LIC_NO"),text:(null==Sn||null===(Y=Sn.WaterConnection)||void 0===Y||null===(G=Y[0])||void 0===G||null===(q=G.plumberInfo)||void 0===q||null===(K=q[0])||void 0===K?void 0:K.licenseNo)||(null==Sn||null===(X=Sn.SewerageConnections)||void 0===X||null===($=X[0])||void 0===$||null===(Z=$.plumberInfo)||void 0===Z?void 0:Z.licenseNo)||sn("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAILS_PLUMBER_NAME_LABEL"),text:(null==Sn||null===(J=Sn.WaterConnection)||void 0===J||null===(Q=J[0])||void 0===Q||null===(ee=Q.plumberInfo)||void 0===ee||null===(ne=ee[0])||void 0===ne?void 0:ne.name)||(null==Sn||null===(te=Sn.SewerageConnections)||void 0===te||null===(le=te[0])||void 0===le||null===(oe=le.plumberInfo)||void 0===oe?void 0:oe.name)||"NA",textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_PLUMBER_MOB_NO"),text:(null==Sn||null===(ie=Sn.WaterConnection)||void 0===ie||null===(ae=ie[0])||void 0===ae||null===(re=ae.plumberInfo)||void 0===re||null===(ue=re[0])||void 0===ue?void 0:ue.mobileNumber)||(null==Sn||null===(de=Sn.SewerageConnections)||void 0===de||null===(se=de[0])||void 0===se||null===(ce=se.plumberInfo)||void 0===ce?void 0:ce.mobileNumber)||"NA",textStyle:{whiteSpace:"pre"},privacy:{uuid:pn,fieldName:["plumberInfoMobileNumber"],model:"WnSConnectionPlumber",showValue:!1,loadData:{serviceName:null!=pn&&pn.includes("WS")?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:vn,applicationNumber:pn},jsonPath:null!=pn&&pn.includes("WS")?"WaterConnection[0].plumberInfo[0].mobileNumber":"SewerageConnections[0].plumberInfo[0].mobileNumber",isArray:!1}}})))),t.createElement(i.Card,null,t.createElement(i.CardSubHeader,null,sn("WS_ROAD_CUTTING_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAIL_ROAD_TYPE"),text:null!=Sn&&null!==(ve=Sn.WaterConnection)&&void 0!==ve&&null!==(pe=ve[0])&&void 0!==pe&&null!==(me=pe.roadCuttingInfo)&&void 0!==me&&null!==(Ee=me[0])&&void 0!==Ee&&Ee.roadType||null!=Sn&&null!==(Se=Sn.SewerageConnections)&&void 0!==Se&&null!==(_e=Se[0])&&void 0!==_e&&null!==(fe=_e.roadCuttingInfo)&&void 0!==fe&&null!==(Ce=fe[0])&&void 0!==Ce&&Ce.roadType?sn("WS_ROADTYPE_"+((null==Sn||null===(ge=Sn.WaterConnection)||void 0===ge||null===(Ne=ge[0])||void 0===Ne||null===(ye=Ne.roadCuttingInfo)||void 0===ye||null===(Te=ye[0])||void 0===Te?void 0:Te.roadType)||(null==Sn||null===(De=Sn.SewerageConnections)||void 0===De||null===(Ae=De[0])||void 0===Ae||null===(Ie=Ae.roadCuttingInfo)||void 0===Ie||null===(he=Ie[0])||void 0===he?void 0:he.roadType))):sn("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAILS_AREA_LABEL"),text:(null==Sn||null===(Oe=Sn.WaterConnection)||void 0===Oe||null===(be=Oe[0])||void 0===be||null===(Le=be.roadCuttingInfo)||void 0===Le||null===(Re=Le[0])||void 0===Re?void 0:Re.roadCuttingArea)||(null==Sn||null===(we=Sn.SewerageConnections)||void 0===we||null===(We=we[0])||void 0===We||null===(Pe=We.roadCuttingInfo)||void 0===Pe||null===(Me=Pe[0])||void 0===Me?void 0:Me.roadCuttingArea)||sn("NA"),textStyle:{whiteSpace:"pre"}}))),t.createElement(i.Card,null,t.createElement(i.CardSubHeader,null,sn("WS_ACTIVATION_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),text:null!=Sn&&null!==(xe=Sn.WaterConnection)&&void 0!==xe&&null!==(Be=xe[0])&&void 0!==Be&&Be.connectionExecutionDate||null!=Sn&&null!==(Fe=Sn.SewerageConnections)&&void 0!==Fe&&null!==(Ue=Fe[0])&&void 0!==Ue&&Ue.connectionExecutionDate?Digit.DateUtils.ConvertEpochToDate((null==Sn||null===(ke=Sn.WaterConnection)||void 0===ke||null===(He=ke[0])||void 0===He?void 0:He.connectionExecutionDate)||(null==Sn||null===(je=Sn.SewerageConnections)||void 0===je||null===(ze=je[0])||void 0===ze?void 0:ze.connectionExecutionDate)):sn("NA"),textStyle:{whiteSpace:"pre"}}),(null==Sn?void 0:Sn.WaterConnection)&&(null==Sn||null===(Ve=Sn.WaterConnection)||void 0===Ve?void 0:Ve.length)>0&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:sn("WS_SERV_DETAIL_METER_ID"),text:(null==Sn||null===(Ye=Sn.WaterConnection)||void 0===Ye||null===(Ge=Ye[0])||void 0===Ge?void 0:Ge.meterId)||(null==Sn||null===(qe=Sn.SewerageConnections)||void 0===qe||null===(Ke=qe[0])||void 0===Ke?void 0:Ke.meterId)||sn("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAIL_METER_INSTALL_DATE"),text:null!=Sn&&null!==(Xe=Sn.WaterConnection)&&void 0!==Xe&&null!==($e=Xe[0])&&void 0!==$e&&$e.meterInstallationDate||null!=Sn&&null!==(Ze=Sn.SewerageConnections)&&void 0!==Ze&&null!==(Je=Ze[0])&&void 0!==Je&&Je.meterInstallationDate?Digit.DateUtils.ConvertEpochToDate((null==Sn||null===(Qe=Sn.WaterConnection)||void 0===Qe||null===(en=Qe[0])||void 0===en?void 0:en.meterInstallationDate)||(null==Sn||null===(nn=Sn.SewerageConnections)||void 0===nn||null===(tn=nn[0])||void 0===tn?void 0:tn.meterInstallationDate)):sn("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:sn("WS_ADDN_DETAILS_INITIAL_METER_READING"),text:(null==Sn||null===(ln=Sn.WaterConnection)||void 0===ln||null===(on=ln[0])||void 0===on||null===(an=on.additionalDetails)||void 0===an?void 0:an.initialMeterReading)||(null==Sn||null===(rn=Sn.SewerageConnections)||void 0===rn||null===(un=rn[0])||void 0===un||null===(dn=un.additionalDetails)||void 0===dn?void 0:dn.initialMeterReading)||"NA",textStyle:{whiteSpace:"pre"}}))))))},WSMyConnections:e=>{var n,o,a,r,u,d,s,c;const{t:v}=l.useTranslation(),p=Digit.UserService.getUser(),m=(null===(n=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===n?void 0:n.code)||(null==p||null===(o=p.info)||void 0===o?void 0:o.permanentCity)||Digit.ULBService.getCurrentTenantId();let E=window.location.href.split("/").pop(),S=isNaN(parseInt(E))?{tenantId:m,mobileNumber:null==p||null===(r=p.info)||void 0===r?void 0:r.mobileNumber,searchType:"CONNECTION"}:{tenantId:m,mobileNumber:null==p||null===(a=p.info)||void 0===a?void 0:a.mobileNumber,searchType:"CONNECTION"};const{isLoading:_,data:f}=Digit.Hooks.ws.useMyApplicationSearch({filters:S},{filters:S}),{isLoading:C,data:g}=Digit.Hooks.ws.useMyApplicationSearch({filters:S,BusinessService:"SW"},{filters:S});let N=null==f?void 0:f.WaterConnection.concat(null==g?void 0:g.SewerageConnections),y=f&&(null==f||null===(u=f.WaterConnection)||void 0===u?void 0:u.map(e=>null==e?void 0:e.propertyId).join(","))||"",T=g&&(null==g||null===(d=g.SewerageConnections)||void 0===d?void 0:d.map(e=>null==e?void 0:e.propertyId).join(","))||"",D=y.concat(T);const{isLoading:A,data:I}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:D}},{filters:{propertyIds:D},enabled:!!D});return N=N&&N.map(e=>{var n;return{...e,property:null==I||null===(n=I.Properties)||void 0===n?void 0:n.filter(n=>(null==n?void 0:n.propertyId)===(null==e?void 0:e.propertyId))[0]}}),_||A||C?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.Header,null,v("WS_MYCONNECTIONS_HEADER")+" "+(N?"("+N.length+")":"")),t.createElement(F,{t:v}),t.createElement("div",null,(null===(s=N)||void 0===s?void 0:s.length)>0&&N.map((e,n)=>t.createElement("div",{key:n},t.createElement(Fi,{application:e}))),!(null!==(c=N)&&void 0!==c&&c.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},v("PT_NO_APPLICATION_FOUND_MSG"))))},WSCitizenConnectionDetails:()=>{var e,a,r,u,d,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,x,B,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be,Fe,Ue,ke,He,je,ze,Ve,Ye,Ge,qe,Ke,Xe,$e,Ze,Je,Qe,en,nn,tn,ln,on,an,rn,un,dn,sn,cn,vn,pn,mn,En,Sn,_n,fn,Cn,gn,Nn,yn,Tn,Dn,An,In,hn,On,bn,Ln,Rn,wn,Wn,Pn,Mn,xn,Bn,Fn,Un,kn,Hn,jn,zn,Vn,Yn,Gn,qn,Kn,Xn,$n,Zn,Jn,Qn,et,nt,tt,lt,ot,it,at,rt,ut,dt,st,ct,vt,pt,mt,Et,St,_t,ft,Ct,gt,Nt,yt,Tt,Dt,At,It,ht,Ot,bt,Lt,Rt,wt,Wt,Pt,Mt,xt,Bt,Ft,Ut,kt,Ht,jt,zt,Vt,Yt,Gt,qt,Kt,Xt,$t,Zt,Jt,Qt,el,nl,tl,ll,ol,il,al,rl,ul,dl,sl;const{t:cl}=l.useTranslation(),vl=n.useRef(),pl=Digit.UserService.getUser(),ml=o.useHistory(),El=(null===(e=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===e?void 0:e.code)||(null==pl||null===(a=pl.info)||void 0===a?void 0:a.permanentCity)||Digit.ULBService.getCurrentTenantId(),[Sl,_l]=n.useState(!1),fl=window.location.href.includes("SW_")?window.location.href.substring(window.location.href.indexOf("SW_")):window.location.href.substring(window.location.href.indexOf("WS_"));let{state:Cl={}}=o.useLocation();const[gl,Nl]=n.useState(!1),[yl,Tl]=n.useState(null),Dl=Digit.Utils.browser.isMobile();let Al={tenantId:El,applicationNumber:fl};var{isLoading:Il,data:hl}=Digit.Hooks.ws.useMyApplicationSearch({filters:Al,BusinessService:null!=fl&&fl.includes("SW")?"SW":"WS"},{filters:Al,privacy:Digit.Utils.getPrivacyObject()},!0);let Ol={tenantId:El,connectionNumber:null!=fl&&fl.includes("SW")?null==hl||null===(r=hl.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.connectionNo:null==hl||null===(d=hl.WaterConnection)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.connectionNo};var{data:bl}=Digit.Hooks.ws.useMyApplicationSearch({filters:Ol,BusinessService:null!=fl&&fl.includes("SW")?"SW":"WS"},{filters:Ol,privacy:Digit.Utils.getPrivacyObject(),enabled:!(null==Ol||!Ol.connectionNumber)},!0);Cl=(null===(v=Object.keys(Cl))||void 0===v?void 0:v.length)>0?Cl:null!=fl&&fl.includes("WS")?null==bl||null===(p=bl.WaterConnection)||void 0===p?void 0:p[0]:null==bl||null===(m=bl.SewerageConnections)||void 0===m?void 0:m[0],Digit.Hooks.useClickOutside(vl,()=>{_l(!1)},Sl);const{isLoading:Ll,data:Rl}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:null==hl||null===(E=hl.WaterConnection)||void 0===E||null===(S=E[0])||void 0===S?void 0:S.propertyId}},{filters:{propertyIds:null==hl||null===(_=hl.WaterConnection)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.propertyId},privacy:Digit.Utils.getPrivacyObject()}),wl=Digit.Hooks.ws.useToCheckPrivacyEnablement({privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(C=hl.WaterConnection)||void 0===C||null===(g=C[0])||void 0===g||null===(N=g.connectionHolders)||void 0===N||null===(y=N[0])||void 0===y?void 0:y.uuid:null==hl||null===(T=hl.SewerageConnections)||void 0===T||null===(D=T[0])||void 0===D||null===(A=D.connectionHolders)||void 0===A||null===(I=A[0])||void 0===I?void 0:I.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner"}})||!1,Wl=()=>{Tl(null)};let Pl=null!=fl&&fl.includes("WS")?null==bl?void 0:bl.WaterConnection:null==bl?void 0:bl.SewerageConnections,Ml=!1;if((null==Pl?void 0:Pl.length)>0){const e=null==Pl?void 0:Pl.filter(e=>"DISCONNECTION_EXECUTED"==(null==e?void 0:e.applicationStatus)&&(null==e?void 0:e.applicationType.includes("DISCONNECT")));null!=e&&e.length&&(Ml=!0)}Digit.Hooks.useCommonMDMS(El,"common-masters","ReceiptKey",{select:e=>{var n,t,l;return(null===(n=e["common-masters"])||void 0===n||null===(t=n.uiCommonPay)||void 0===t||null===(l=t.filter(e=>{let{code:n}=e;return"WS".includes(n)})[0])||void 0===l?void 0:l.receiptKey)||"consolidatedreceipt"}});let xl=[];xl.push({order:1,label:cl("WS_CONNECTION_DETAILS"),onClick:()=>function(){try{var e,n,t,l,o,i,a;const r=(null==hl||null===(e=hl.WaterConnection)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.tenantId)||(null==hl||null===(t=hl.SewerageConnections)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.tenantId);let u=(null==hl||null===(o=hl.WaterConnection)||void 0===o?void 0:o[0])||(null==hl||null===(i=hl.SewerageConnections)||void 0===i?void 0:i[0]);return Pi({...u},{...null==Rl||null===(a=Rl.Properties)||void 0===a?void 0:a[0]},r,cl).then(e=>Digit.Utils.pdf.generatev1(e)),_l(!1),Promise.resolve()}catch(e){return Promise.reject(e)}}()}),cl("WS_APPLICATION"),cl("WS_RECEIPT_APPLICATION_FEE"),xl.sort(function(e,n){return e.order-n.order});const Bl=null===(h=Cl)||void 0===h||null===(O=h.applicationNo)||void 0===O?void 0:O.includes("SW"),Fl={consumerCode:null===(b=Cl)||void 0===b?void 0:b.connectionNo},Ul=Digit.Hooks.useFetchBillsForBuissnessService({businessService:Bl?"SW":"WS",...Fl,tenantId:El},{retry:!1}),kl=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Hl=e=>t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),jl=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(kl,null));if(Il||Ll)return t.createElement(i.Loader,null);sessionStorage.setItem("ApplicationNoState",null===(L=Cl)||void 0===L?void 0:L.applicationNo);let zl=null!==(R=Cl)&&void 0!==R&&null!==(w=R.applicationType)&&void 0!==w&&w.includes("WATER")?"WATER":"SEWERAGE";return t.createElement(t.Fragment,null,t.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto",maxWidth:"960px"}},t.createElement(i.Header,null,cl("WS_COMMON_CONNECTION_DETAIL")),xl&&xl.length>0&&t.createElement("div",{ref:vl},t.createElement(i.MultiLink,{className:"multilinkWrapper",onHeadClick:()=>_l(!Sl),displayOptions:Sl,options:xl,optionsStyle:{margin:"0px"}}))),wl&&t.createElement(F,{t:cl}),t.createElement("div",{className:"hide-seperator"},t.createElement(i.Card,null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:cl("WS_MYCONNECTIONS_CONSUMER_NO"),text:null===(W=Cl)||void 0===W?void 0:W.connectionNo}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERVICE_NAME_LABEL"),text:cl("WS_APPLICATION_TYPE_"+(null===(P=Cl)||void 0===P?void 0:P.applicationType)),textStyle:{wordBreak:"break-word"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_STATUS"),text:(null===(x=Cl)||void 0===x?void 0:x.status)||"NA",textStyle:{whiteSpace:"pre"}})),t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},cl("WS_COMMON_CONNECTION_DETAIL")),t.createElement(i.StatusTable,null,(null===(B=Cl)||void 0===B||null===(U=B.applicationType)||void 0===U?void 0:U.includes("WATER"))&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:cl("WS_COMMON_TABLE_COL_CONNECTIONTYPE_LABEL"),text:(null===(k=Cl)||void 0===k?void 0:k.connectionType)||cl("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_NO_OF_TAPS"),text:null===(H=Cl)||void 0===H?void 0:H.noOfTaps,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_PIPE_SIZE_IN_INCHES_LABEL"),text:(null===(j=Cl)||void 0===j?void 0:j.pipeSize)||"NA",textStyle:{whiteSpace:"pre"}})),(null===(z=Cl)||void 0===z||null===(V=z.applicationType)||void 0===V?void 0:V.includes("SEWERAGE"))&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:cl("WS_CONN_DETAIL_WATER_CLOSETS"),text:null===(Y=Cl)||void 0===Y?void 0:Y.proposedWaterClosets,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_NO_OF_TOILETS"),text:(null===(G=Cl)||void 0===G?void 0:G.proposedToilets)||cl("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),text:null!==(q=Cl)&&void 0!==q&&q.connectionExecutionDate?Digit.DateUtils.ConvertEpochToDate(null===(K=Cl)||void 0===K?void 0:K.connectionExecutionDate):cl("CS_NA"),textStyle:{whiteSpace:"pre"}})),(null===(X=Cl)||void 0===X||null===($=X.applicationType)||void 0===$?void 0:$.includes("WATER"))&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_WATER_SOURCE"),text:cl("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null===(Z=Cl)||void 0===Z||null===(J=Z.waterSource)||void 0===J||null===(Q=J.split("."))||void 0===Q?void 0:Q[0],".","_"))||cl("WS_SERVICES_MASTERS_WATERSOURCE_"+s(null===(ee=Cl)||void 0===ee?void 0:ee.waterSource,".","_"))||cl("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_WATER_SUB_SOURCE"),text:cl(null===(ne=Cl)||void 0===ne||null===(te=ne.waterSource)||void 0===te||null===(le=te.split("."))||void 0===le?void 0:le[1])||cl("CS_NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_CONN_EXECUTION_DATE"),text:Digit.DateUtils.ConvertEpochToDate(null===(oe=Cl)||void 0===oe?void 0:oe.connectionExecutionDate)||cl("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_SERV_DETAIL_METER_ID"),text:null===(ie=Cl)||void 0===ie?void 0:ie.meterId,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_ADDN_DETAIL_METER_INSTALL_DATE"),text:Digit.DateUtils.ConvertEpochToDate(null===(ae=Cl)||void 0===ae?void 0:ae.meterInstallationDate)||"NA",textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_ADDN_DETAILS_INITIAL_METER_READING"),text:(null===(re=Cl)||void 0===re||null===(ue=re.additionalDetails)||void 0===ue?void 0:ue.initialMeterReading)||"NA",textStyle:{whiteSpace:"pre"}})),"Metered"===(null===(de=Cl)||void 0===de?void 0:de.connectionType)&&t.createElement(o.Link,{to:"/digit-ui/citizen/ws/consumption/details?applicationNo="+(null===(se=Cl)||void 0===se?void 0:se.connectionNo)},t.createElement(i.LinkButton,{style:{textAlign:"left",marginBottom:"10px",marginTop:"5px"},label:cl("WS_CONNECTION_DETAILS_VIEW_CONSUMPTION_LABEL")}))),t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},cl("WS_COMMON_PROPERTY_DETAILS")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:cl("WS_PROPERTY_ID_LABEL"),text:null===(ce=Cl)||void 0===ce?void 0:ce.propertyId}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_OWN_NAME_LABEL"),text:null===(ve=Cl)||void 0===ve||null===(pe=ve.property)||void 0===pe||null===(me=pe.owners)||void 0===me?void 0:me.map(e=>e.name).join(","),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_PROPADD"),text:(Vl=null==Rl||null===(Ee=Rl.Properties)||void 0===Ee||null===(Se=Ee[0])||void 0===Se?void 0:Se.address,(null!=Vl&&Vl.doorNo?(null==Vl?void 0:Vl.doorNo)+", ":"")+(null!=Vl&&Vl.street?(null==Vl?void 0:Vl.street)+", ":"")+(null!=Vl&&Vl.landmark?(null==Vl?void 0:Vl.landmark)+", ":"")+(null!=Vl&&null!==(Yl=Vl.locality)&&void 0!==Yl&&Yl.code?cl("TENANTS_MOHALLA_"+(null==Vl||null===(Gl=Vl.locality)||void 0===Gl?void 0:Gl.code)):"")+(null!=Vl&&null!==(ql=Vl.city)&&void 0!==ql&&ql.code||null!=Vl&&Vl.city?", "+cl((null==Vl?void 0:Vl.city.code)||(null==Vl?void 0:Vl.city)):"")+(null!=Vl&&Vl.pincode?", "+Vl.pincode:" ")||cl("CS_NA")),textStyle:{wordBreak:"break-word"},privacy:{uuid:null==Rl||null===(_e=Rl.Properties)||void 0===_e||null===(fe=_e[0])||void 0===fe||null===(Ce=fe.owners)||void 0===Ce||null===(ge=Ce[0])||void 0===ge?void 0:ge.uuid,fieldName:["doorNo","street","landmark"],model:"Property",hide:!(null!=Rl&&null!==(Ne=Rl.Properties)&&void 0!==Ne&&null!==(ye=Ne[0])&&void 0!==ye&&ye.address),showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:El,propertyIds:null===(Te=Cl)||void 0===Te?void 0:Te.propertyId},jsonPath:"Properties[0].address.street",isArray:!1,d:e=>(M.get(e,"Properties[0].address.doorNo")?M.get(e,"Properties[0].address.doorNo")+", ":"")+(M.get(e,"Properties[0].address.street")?M.get(e,"Properties[0].address.street")+", ":"")+(M.get(e,"Properties[0].address.landmark")?""+M.get(e,"Properties[0].address.landmark"):"")}}}),t.createElement(o.Link,{to:"/digit-ui/citizen/commonpt/view-property?propertyId="+(null===(De=Cl)||void 0===De?void 0:De.propertyId)+"&tenantId="+(null===(Ae=Cl)||void 0===Ae?void 0:Ae.tenantId)},t.createElement(i.LinkButton,{style:{textAlign:"left",marginBottom:"10px",marginTop:"5px"},label:cl("WS_VIEW_PROPERTY")}))),t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},cl("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")),null!==(Ie=Cl)&&void 0!==Ie&&Ie.connectionHolders?t.createElement("div",null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_OWN_NAME_LABEL"),text:null===(he=Cl)||void 0===he||null===(Oe=he.connectionHolders)||void 0===Oe||null===(be=Oe[0])||void 0===be?void 0:be.name,textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_GENDER_LABEL"),text:null!=fl&&fl.includes("WS")?null==hl||null===(Le=hl.WaterConnection)||void 0===Le||null===(Re=Le[0])||void 0===Re||null===(we=Re.connectionHolders)||void 0===we||null===(We=we[0])||void 0===We?void 0:We.gender:null==hl||null===(Pe=hl.SewerageConnections)||void 0===Pe||null===(Me=Pe[0])||void 0===Me||null===(xe=Me.connectionHolders)||void 0===xe||null===(Be=xe[0])||void 0===Be?void 0:Be.gender,textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(Fe=hl.WaterConnection)||void 0===Fe||null===(Ue=Fe[0])||void 0===Ue||null===(ke=Ue.connectionHolders)||void 0===ke||null===(He=ke[0])||void 0===He?void 0:He.uuid:null==hl||null===(je=hl.SewerageConnections)||void 0===je||null===(ze=je[0])||void 0===ze||null===(Ve=ze.connectionHolders)||void 0===Ve||null===(Ye=Ve[0])||void 0===Ye?void 0:Ye.uuid,fieldName:"gender",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].gender":"SewerageConnections[0].connectionHolders[0].gender",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_MOBILE_NO_LABEL"),text:null!=fl&&fl.includes("WS")?null==hl||null===(Ge=hl.WaterConnection)||void 0===Ge||null===(qe=Ge[0])||void 0===qe||null===(Ke=qe.connectionHolders)||void 0===Ke||null===(Xe=Ke[0])||void 0===Xe?void 0:Xe.mobileNumber:null==hl||null===($e=hl.SewerageConnections)||void 0===$e||null===(Ze=$e[0])||void 0===Ze||null===(Je=Ze.connectionHolders)||void 0===Je||null===(Qe=Je[0])||void 0===Qe?void 0:Qe.mobileNumber,textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(en=hl.WaterConnection)||void 0===en||null===(nn=en[0])||void 0===nn||null===(tn=nn.connectionHolders)||void 0===tn||null===(ln=tn[0])||void 0===ln?void 0:ln.uuid:null==hl||null===(on=hl.SewerageConnections)||void 0===on||null===(an=on[0])||void 0===an||null===(rn=an.connectionHolders)||void 0===rn||null===(un=rn[0])||void 0===un?void 0:un.uuid,fieldName:"connectionHoldersMobileNumber",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].mobileNumber":"SewerageConnections[0].connectionHolders[0].mobileNumber",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_FATHER_OR_HUSBAND_NAME"),text:null!=fl&&fl.includes("WS")?null==hl||null===(dn=hl.WaterConnection)||void 0===dn||null===(sn=dn[0])||void 0===sn||null===(cn=sn.connectionHolders)||void 0===cn||null===(vn=cn[0])||void 0===vn?void 0:vn.fatherOrHusbandName:null==hl||null===(pn=hl.SewerageConnections)||void 0===pn||null===(mn=pn[0])||void 0===mn||null===(En=mn.connectionHolders)||void 0===En||null===(Sn=En[0])||void 0===Sn?void 0:Sn.fatherOrHusbandName,textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(_n=hl.WaterConnection)||void 0===_n||null===(fn=_n[0])||void 0===fn||null===(Cn=fn.connectionHolders)||void 0===Cn||null===(gn=Cn[0])||void 0===gn?void 0:gn.uuid:null==hl||null===(Nn=hl.SewerageConnections)||void 0===Nn||null===(yn=Nn[0])||void 0===yn||null===(Tn=yn.connectionHolders)||void 0===Tn||null===(Dn=Tn[0])||void 0===Dn?void 0:Dn.uuid,fieldName:"fatherOrHusbandName",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].fatherOrHusbandName":"SewerageConnections[0].connectionHolders[0].fatherOrHusbandName",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_RELATION_LABEL"),text:null!=fl&&fl.includes("WS")?null==hl||null===(An=hl.WaterConnection)||void 0===An||null===(In=An[0])||void 0===In||null===(hn=In.connectionHolders)||void 0===hn||null===(On=hn[0])||void 0===On?void 0:On.relationship:null==hl||null===(bn=hl.SewerageConnections)||void 0===bn||null===(Ln=bn[0])||void 0===Ln||null===(Rn=Ln.connectionHolders)||void 0===Rn||null===(wn=Rn[0])||void 0===wn?void 0:wn.relationship,textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(Wn=hl.WaterConnection)||void 0===Wn||null===(Pn=Wn[0])||void 0===Pn||null===(Mn=Pn.connectionHolders)||void 0===Mn||null===(xn=Mn[0])||void 0===xn?void 0:xn.uuid:null==hl||null===(Bn=hl.SewerageConnections)||void 0===Bn||null===(Fn=Bn[0])||void 0===Fn||null===(Un=Fn.connectionHolders)||void 0===Un||null===(kn=Un[0])||void 0===kn?void 0:kn.uuid,fieldName:"relationship",model:"WnSConnection",showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].relationship":"SewerageConnections[0].connectionHolders[0].relationship",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_CROSADD"),text:null!=fl&&fl.includes("WS")?null==hl||null===(Hn=hl.WaterConnection)||void 0===Hn||null===(jn=Hn[0])||void 0===jn||null===(zn=jn.connectionHolders)||void 0===zn||null===(Vn=zn[0])||void 0===Vn?void 0:Vn.correspondenceAddress:null==hl||null===(Yn=hl.SewerageConnections)||void 0===Yn||null===(Gn=Yn[0])||void 0===Gn||null===(qn=Gn.connectionHolders)||void 0===qn||null===(Kn=qn[0])||void 0===Kn?void 0:Kn.correspondenceAddress,privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(Xn=hl.WaterConnection)||void 0===Xn||null===($n=Xn[0])||void 0===$n||null===(Zn=$n.connectionHolders)||void 0===Zn||null===(Jn=Zn[0])||void 0===Jn?void 0:Jn.uuid:null==hl||null===(Qn=hl.SewerageConnections)||void 0===Qn||null===(et=Qn[0])||void 0===et||null===(nt=et.connectionHolders)||void 0===nt||null===(tt=nt[0])||void 0===tt?void 0:tt.uuid,fieldName:"correspondenceAddress",model:"WnSConnectionOwner",hide:!(null!==(lt=Cl)&&void 0!==lt&&lt.connectionHolders),showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].correspondenceAddress":"SewerageConnections[0].connectionHolders[0].correspondenceAddress",isArray:!1}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),text:(null!=fl&&fl.includes("WS")?null!=hl&&null!==(ot=hl.WaterConnection)&&void 0!==ot&&null!==(it=ot[0])&&void 0!==it&&null!==(at=it.connectionHolders)&&void 0!==at&&null!==(rt=at[0])&&void 0!==rt&&null!==(ut=rt.ownerType)&&void 0!==ut&&ut.includes("*"):null!=hl&&null!==(dt=hl.SewerageConnections)&&void 0!==dt&&null!==(st=dt[0])&&void 0!==st&&null!==(ct=st.connectionHolders)&&void 0!==ct&&null!==(vt=ct[0])&&void 0!==vt&&null!==(pt=vt.ownerType)&&void 0!==pt&&pt.includes("*"))?null!=fl&&fl.includes("WS")?null==hl||null===(yt=hl.WaterConnection)||void 0===yt||null===(Tt=yt[0])||void 0===Tt||null===(Dt=Tt.connectionHolders)||void 0===Dt||null===(At=Dt[0])||void 0===At?void 0:At.ownerType:null==hl||null===(It=hl.SewerageConnections)||void 0===It||null===(ht=It[0])||void 0===ht||null===(Ot=ht.connectionHolders)||void 0===Ot||null===(bt=Ot[0])||void 0===bt?void 0:bt.ownerType:cl("COMMON_MASTERS_OWNERTYPE_"+(null!=fl&&fl.includes("WS")?null==hl||null===(mt=hl.WaterConnection)||void 0===mt||null===(Et=mt[0])||void 0===Et||null===(St=Et.connectionHolders)||void 0===St||null===(_t=St[0])||void 0===_t?void 0:_t.ownerType:null==hl||null===(ft=hl.SewerageConnections)||void 0===ft||null===(Ct=ft[0])||void 0===Ct||null===(gt=Ct.connectionHolders)||void 0===gt||null===(Nt=gt[0])||void 0===Nt?void 0:Nt.ownerType)),textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(Lt=hl.WaterConnection)||void 0===Lt||null===(Rt=Lt[0])||void 0===Rt||null===(wt=Rt.connectionHolders)||void 0===wt||null===(Wt=wt[0])||void 0===Wt?void 0:Wt.uuid:null==hl||null===(Pt=hl.SewerageConnections)||void 0===Pt||null===(Mt=Pt[0])||void 0===Mt||null===(xt=Mt.connectionHolders)||void 0===xt||null===(Bt=xt[0])||void 0===Bt?void 0:Bt.uuid,fieldName:"ownerType",model:"WnSConnection",hide:!(null!==(Ft=Cl)&&void 0!==Ft&&null!==(Ut=Ft.connectionHolders)&&void 0!==Ut&&null!==(kt=Ut[0])&&void 0!==kt&&kt.ownerType),showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].ownerType":"SewerageConnections[0].connectionHolders[0].ownerType",isArray:!1,d:e=>{var n,t,l,o,i,a,r,u,d,s,c;return null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n[0]?cl("PROPERTYTAX_OWNERTYPE_"+(null==e||null===(t=e.WaterConnection)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.connectionHolders)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.ownerType)||void 0===a?void 0:a.toUpperCase())):cl("PROPERTYTAX_OWNERTYPE_"+(null==e||null===(r=e.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.connectionHolders)||void 0===d||null===(s=d[0])||void 0===s||null===(c=s.ownerType)||void 0===c?void 0:c.toUpperCase()))}}}}),t.createElement(i.Row,{className:"border-none",label:cl("WS_OWN_EMAIL_IDNO_LABEL"),text:null!=fl&&fl.includes("WS")?null==hl||null===(Ht=hl.WaterConnection)||void 0===Ht||null===(jt=Ht[0])||void 0===jt||null===(zt=jt.connectionHolders)||void 0===zt||null===(Vt=zt[0])||void 0===Vt?void 0:Vt.emailId:null==hl||null===(Yt=hl.SewerageConnections)||void 0===Yt||null===(Gt=Yt[0])||void 0===Gt||null===(qt=Gt.connectionHolders)||void 0===qt||null===(Kt=qt[0])||void 0===Kt?void 0:Kt.emailId,textStyle:{whiteSpace:"pre"},privacy:{uuid:null!=fl&&fl.includes("WS")?null==hl||null===(Xt=hl.WaterConnection)||void 0===Xt||null===($t=Xt[0])||void 0===$t||null===(Zt=$t.connectionHolders)||void 0===Zt||null===(Jt=Zt[0])||void 0===Jt?void 0:Jt.uuid:null==hl||null===(Qt=hl.SewerageConnections)||void 0===Qt||null===(el=Qt[0])||void 0===el||null===(nl=el.connectionHolders)||void 0===nl||null===(tl=nl[0])||void 0===tl?void 0:tl.uuid,fieldName:"connectionHoldersEmailId",model:"WnSConnectionOwner",showValue:!1,loadData:{serviceName:"WATER"===zl?"/ws-services/wc/_search":"/sw-services/swc/_search",requestBody:{},requestParam:{tenantId:El,applicationNumber:fl},jsonPath:"WATER"===zl?"WaterConnection[0].connectionHolders[0].emailId":"SewerageConnections[0].connectionHolders[0].emailId",isArray:!1}}}))):t.createElement(i.CardText,null,cl("WS_PROPERTY_OWNER_SAME_AS_CONN_HOLDERS")),"inactive"===(null===(ll=Cl)||void 0===ll?void 0:ll.status)&&"Inactive"===(null===(ol=Cl)||void 0===ol?void 0:ol.applicationStatus)&&"INACTIVE"===(null===(il=Cl)||void 0===il?void 0:il.applicationStatus)||Ml?"DISCONNECTION_EXECUTED"==(null===(al=Cl)||void 0===al?void 0:al.applicationStatus)&&"Inactive"==(null===(rl=Cl)||void 0===rl?void 0:rl.status)&&(null===(ul=Cl)||void 0===ul?void 0:ul.isDisconnectionTemporary)&&t.createElement(i.ActionBar,{style:{position:"relative",boxShadow:"none",minWidth:"240px",maxWidth:"310px",padding:"0px",marginTop:"15px"}},t.createElement("div",{style:{width:"100%"}},t.createElement(i.SubmitBar,{style:{width:"100%"},label:cl("WS_RECONNECTION_BUTTON"),onSubmit:function(){(()=>{var e,n,t,l,o,i,a,r,u,d,s;if(console.log("getRestorationButton",hl,!(null!=hl&&hl.checkWorkFlow)),console.log("Payment",Ul),null!=hl&&hl.checkWorkFlow){if(0===(null==Ul||null===(e=Ul.data)||void 0===e||null===(n=e.Bill)||void 0===n?void 0:n.length)){console.log("Payment",Ul);let e="/digit-ui/citizen/ws/restoration-application";Digit.SessionStorage.set("WS_DISCONNECTION",{...Cl,serviceType:Bl?"SEWERAGE":"WATER"}),ml.push(""+e)}else if((null==Ul||null===(t=Ul.data)||void 0===t||null===(l=t.Bill)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.totalAmount)<0){let e="/digit-ui/citizen/ws/restore-application/restoration-application";Digit.SessionStorage.set("WS_DISCONNECTION",{...Cl,serviceType:Bl?"SEWERAGE":"WATER"}),ml.push(""+e)}else if(0!==(null==Ul||null===(i=Ul.data)||void 0===i||null===(a=i.Bill)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.totalAmount))Nl(!0);else if(0==(null==Ul||null===(u=Ul.data)||void 0===u||null===(d=u.Bill)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.totalAmount)){let e="/digit-ui/citizen/ws/restore-application/restoration-application";Digit.SessionStorage.set("WS_DISCONNECTION",{...Cl,serviceType:Bl?"SEWERAGE":"WATER"}),ml.push(""+e)}}else Tl({key:"error",label:"CONNECTION_INPROGRESS_LABEL"}),setTimeout(()=>{Wl()},5e3)})()}}))):t.createElement(i.ActionBar,{style:{position:"relative",boxShadow:"none",minWidth:"240px",maxWidth:"310px",padding:"0px",marginTop:"15px"}},t.createElement("div",{style:{width:"100%"}},t.createElement(i.SubmitBar,{style:{width:"100%"},label:cl("WS_DISCONNECTION_BUTTON"),onSubmit:function(){(()=>{var e,n,t,l,o,i,a,r;if(null!=hl&&hl.checkWorkFlow)if(0===(null==Ul||null===(e=Ul.data)||void 0===e||null===(n=e.Bill)||void 0===n?void 0:n.length)){let e="/digit-ui/citizen/ws/disconnect-application";Digit.SessionStorage.set("WS_DISCONNECTION",{...Cl,serviceType:Bl?"SEWERAGE":"WATER"}),ml.push(""+e)}else if((null==Ul||null===(t=Ul.data)||void 0===t||null===(l=t.Bill)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.totalAmount)<0){let e="/digit-ui/citizen/ws/disconnect-application";Digit.SessionStorage.set("WS_DISCONNECTION",{...Cl,serviceType:Bl?"SEWERAGE":"WATER"}),ml.push(""+e)}else 0!==(null==Ul||null===(i=Ul.data)||void 0===i||null===(a=i.Bill)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.totalAmount)&&Nl(!0);else Tl({key:"error",label:"CONNECTION_INPROGRESS_LABEL"}),setTimeout(()=>{Wl()},5e3)})()}}))),gl?t.createElement(i.Modal,{open:gl,headerBarMain:t.createElement(Hl,{label:cl("WS_PENDING_DUES_LABEL")}),headerBarEnd:t.createElement(jl,{onClick:()=>Nl(!1)}),center:!0,formId:"modal-action",actionSingleLabel:cl("COMMON_MAKE_PAYMENT"),hideSubmit:!0,actionSingleSubmit:()=>{var e,n;ml.push("/digit-ui/citizen/payment/collect/"+(Bl?"SW":"WS")+"/"+encodeURIComponent(null===(e=Cl)||void 0===e?void 0:e.connectionNo)+"/"+El+"?consumerCode="+(null===(n=Cl)||void 0===n?void 0:n.connectionNo)+"&&tenantId="+El+"&&workflow=WNS"),Nl(!1)},popupStyles:Dl?{width:"720px"}:{},style:Dl?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:Dl?{paddingLeft:"5px"}:{}},t.createElement("div",{className:"modal-header-ws"},cl("WS_CLEAR_DUES_DISCONNECTION_SUB_HEADER_LABEL")," "),t.createElement("div",{className:"modal-body-ws"},t.createElement("span",null,cl("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),": ₹",Number(null==Ul||null===(dl=Ul.data)||void 0===dl||null===(sl=dl.Bill[0])||void 0===sl?void 0:sl.totalAmount).toFixed(2))," ")):null),yl&&t.createElement(i.Toast,{style:{bottom:"150px"},error:yl.key,label:cl(""+yl.label),onClose:Wl})));var Vl,Yl,Gl,ql},WSCitizenConsumptionDetails:e=>{var n,o;const{t:a}=l.useTranslation(),r=Digit.UserService.getUser(),u=(null===(n=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===n?void 0:n.code)||(null==r||null===(o=r.info)||void 0===o?void 0:o.permanentCity)||Digit.ULBService.getCurrentTenantId(),{applicationNo:d}=Digit.Hooks.useQueryParams();let s={tenantId:u,connectionNos:d};const{isLoading:c,data:v}=Digit.Hooks.ws.useWSConsumptionSearch({filters:s},{filters:s});if(c)return t.createElement(i.Loader,null);let{meterReadings:p}=v||{};return t.createElement(t.Fragment,null,t.createElement(i.Header,null,""+a("WS_VIEW_CONSUMPTION")),t.createElement("div",null,(null==p?void 0:p.length)>0&&p.map((e,n)=>{return t.createElement("div",{key:n},t.createElement(i.Card,null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:a("WS_MYCONNECTIONS_CONSUMER_NO"),text:(null==e?void 0:e.connectionNo)||a("NA"),textStyle:{}}),t.createElement(i.Row,{className:"border-none",label:a("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),text:(null==e?void 0:e.billingPeriod)||a("NA"),textStyle:{wordBreak:"break-word"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),text:(null==e?void 0:e.meterStatus)||a("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),text:(null==e?void 0:e.lastReading)||a("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),text:Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.lastReadingDate)||a("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_CURRENT_READING_LABEL"),text:(null==e?void 0:e.currentReading)||a("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),text:Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.currentReadingDate)||a("NA"),textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{className:"border-none",label:a("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),text:(l=null==e?void 0:e.currentReading,o=null==e?void 0:e.lastReading,l&&o?Number(l-o):a("NA")),textStyle:{whiteSpace:"pre"}}))));var l,o}),!(null!=p&&p.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},a("WS_NO_CONSUMPTION_FOUND"))))},WSMyPayments:()=>{var e,n,o,a,r,u,d,s,c,v,p,m,E,S,_,f,C;const{t:g}=l.useTranslation(),N=Digit.UserService.getUser(),y=(null===(e=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===e?void 0:e.code)||(null==N||null===(n=N.info)||void 0===n?void 0:n.permanentCity)||Digit.ULBService.getCurrentTenantId();let T=window.location.href.split("/").pop(),D=isNaN(parseInt(T))?{tenantId:y,mobileNumber:null==N||null===(a=N.info)||void 0===a?void 0:a.mobileNumber,searchType:"CONNECTION"}:{tenantId:y,mobileNumber:null==N||null===(o=N.info)||void 0===o?void 0:o.mobileNumber,searchType:"CONNECTION"};const{isLoading:A,data:I}=Digit.Hooks.ws.useMyApplicationSearch({filters:D},{filters:D}),{isLoading:h,data:O}=Digit.Hooks.ws.useMyApplicationSearch({filters:D,BusinessService:"SW"},{filters:D});let b=null==I||null===(r=I.WaterConnection)||void 0===r?void 0:r.concat(null==O?void 0:O.SewerageConnections),L=I&&(null==I||null===(u=I.WaterConnection)||void 0===u?void 0:u.length)>0?null==I||null===(d=I.WaterConnection)||void 0===d?void 0:d.map(e=>e.connectionNo).join(","):null,R=O&&(null==O||null===(s=O.SewerageConnections)||void 0===s?void 0:s.length)>0?null==O||null===(c=O.SewerageConnections)||void 0===c?void 0:c.map(e=>e.connectionNo).join(","):null,w=I&&(null==I||null===(v=I.WaterConnection)||void 0===v?void 0:v.length)>0?null==I||null===(p=I.WaterConnection)||void 0===p?void 0:p.map(e=>e.propertyId).join(","):null,W=O&&(null==O||null===(m=O.SewerageConnections)||void 0===m?void 0:m.length)>0?null==O||null===(E=O.SewerageConnections)||void 0===E?void 0:E.map(e=>e.propertyId).join(","):null,P=w?null==w?void 0:w.concat(",",W):null==W?void 0:W.concat(",",w);const{data:M,isLoading:x}=Digit.Hooks.ws.useMypaymentWS({tenantId:y,filters:{consumerCodes:L},BusinessService:"WS"},{enabled:null!==L}),{data:B,isLoading:U}=Digit.Hooks.ws.useMypaymentWS({tenantId:y,filters:{consumerCodes:R},BusinessService:"SW"},{enabled:null!==R}),{data:k,isLoading:H}=Digit.Hooks.ws.useWaterPropertySearch({tenantId:y,filters:{propertyids:P}},{enabled:null!==R});if(A||x||U||h||H)return t.createElement(i.Loader,null);let j=(M&&(null==M?void 0:M.Payments)||[]).concat(B&&(null==B?void 0:B.Payments)||[]);return j=null===(S=j)||void 0===S?void 0:S.map(e=>{var n;return{...e,details:null==b||null===(n=b.filter(n=>{var t,l,o;return(null==n?void 0:n.connectionNo)===(null==e||null===(t=e.paymentDetails)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.bill)||void 0===o?void 0:o.consumerCode)}))||void 0===n?void 0:n[0]}}),j=null===(_=j)||void 0===_?void 0:_.map(e=>{var n,t;return{...e,property:null==k||null===(n=k.Properties)||void 0===n||null===(t=n.filter(n=>{var t;return(null==n?void 0:n.propertyId)===(null==e||null===(t=e.details)||void 0===t?void 0:t.propertyId)}))||void 0===t?void 0:t[0]}}),t.createElement(t.Fragment,null,t.createElement(i.Header,null,g("WS_MY_PAYMENTS_HEADER")+" "+(j?"("+j.length+")":"")),t.createElement(F,{t:g}),t.createElement("div",null,(null===(f=j)||void 0===f?void 0:f.length)>0&&j.map((e,n)=>t.createElement("div",{key:n},t.createElement(Mi,{application:e}))),!(null!==(C=j)&&void 0!==C&&C.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},g("PT_NO_APPLICATION_FOUND_MSG"))))},WSCitizenEditApplication:e=>{var a,r,d,s,c,v,p;const m=u.useQueryClient();let E=o.useRouteMatch();const{t:S}=l.useTranslation();let{tenantId:_}=o.useParams();const{pathname:f,state:C}=o.useLocation(),g=o.useHistory();let N=(null==C?void 0:C.id)||sessionStorage.getItem("ApplicationNoState"),y=[],T={},D={};const[A,I,h]=Digit.Hooks.useSessionStorage("WS_EDIT_APPLICATION",{}),O=Digit.ULBService.getStateId();let{data:b,isLoading:L}=Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(O,{}),R={};N&&(R.applicationNumber=N),_&&(R.tenantId=_);const{data:w}=Digit.Hooks.ws.useWaterSearch({tenantId:_,filters:{...R,isInternalCall:!0},BusinessService:"WS",t:S},{enabled:!(!N||!N.includes("WS"))}),{data:W}=Digit.Hooks.ws.useSewarageSearch({tenantId:_,filters:{...R,isInternalCall:!0},BusinessService:"SW",t:S},{enabled:!(!N||!N.includes("SW"))});let P=window.location.href.includes("/modify-connection/")||window.location.href.includes("/edit-application/");n.useEffect(()=>{var e,n;if(T=w,D=W,(w&&T||W&&D)&&(!(Object.keys(A).length>0)||T&&(null==A?void 0:A.applicationNo)!==(null===(e=T)||void 0===e?void 0:e.applicationNo)||D&&(null==A?void 0:A.applicationNo)!==(null===(n=D)||void 0===n?void 0:n.applicationNo))){T=w,D=W,window.location.href.includes("edit-application")?(T&&(T.isEditApplication=!0,T.isModifyConnection=!1),D&&(D.isEditApplication=!0,D.isModifyConnection=!1)):window.location.href.includes("modify-connection")&&(T&&(T.isModifyConnection=!0,T.isEditApplication=!1),D&&(D.isModifyConnection=!0,D.isEditApplication=!1)),sessionStorage.setItem("WaterInitialObject",JSON.stringify({...T})),sessionStorage.setItem("SewerageInitialObject",JSON.stringify({...D}));let e=((e,n,t)=>{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe;if(e)e.ConnectionHolderDetails=null!=e&&e.connectionHolders?{...null==e||null===(l=e.connectionHolders)||void 0===l?void 0:l[0],address:null==e||null===(o=e.connectionHolders)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.correspondenceAddress,documentId:"",documentType:"",filestoreId:null,gender:null!=e&&null!==(a=e.connectionHolders)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.gender?{code:null==e||null===(u=e.connectionHolders)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.gender,i18nKey:"COMMON_GENDER_"+(null==e||null===(s=e.connectionHolders)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.gender)}:null,guardian:null==e||null===(v=e.connectionHolders)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.fatherOrHusbandName,isOwnerSame:!((null==e||null===(m=e.connectionHolders)||void 0===m?void 0:m.length)>0),mobileNumber:null==e||null===(E=e.connectionHolders)||void 0===E||null===(S=E[0])||void 0===S?void 0:S.mobileNumber,name:null==e||null===(_=e.connectionHolders)||void 0===_||null===(f=_[0])||void 0===f?void 0:f.name,relationship:null!=e&&null!==(C=e.connectionHolders)&&void 0!==C&&null!==(g=C[0])&&void 0!==g&&g.relationship?{code:null==e||null===(N=e.connectionHolders)||void 0===N||null===(y=N[0])||void 0===y?void 0:y.relationship,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+(null==e||null===(T=e.connectionHolders)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.relationship)}:null,specialCategoryType:null!=e&&null!==(A=e.connectionHolders)&&void 0!==A&&null!==(I=A[0])&&void 0!==I&&I.ownerType?{code:null==e||null===(h=e.connectionHolders)||void 0===h||null===(O=h[0])||void 0===O?void 0:O.ownerType,i18nKey:"PROPERTYTAX_OWNERTYPE_"+(null==e||null===(b=e.connectionHolders)||void 0===b||null===(L=b[0])||void 0===L?void 0:L.ownerType)}:""}:{address:null==e||null===(R=e.property)||void 0===R||null===(w=R.owners)||void 0===w||null===(W=w[0])||void 0===W?void 0:W.correspondenceAddress,documentId:"",documentType:"",filestoreId:null,gender:null!=e&&null!==(P=e.property)&&void 0!==P&&null!==(M=P.owners)&&void 0!==M&&null!==(x=M[0])&&void 0!==x&&x.gender?{code:null==e||null===(B=e.property)||void 0===B||null===(F=B.owners)||void 0===F||null===(U=F[0])||void 0===U?void 0:U.gender,i18nKey:"COMMON_GENDER_"+(null==e||null===(k=e.property)||void 0===k||null===(H=k.owners)||void 0===H||null===(j=H[0])||void 0===j?void 0:j.gender)}:null,guardian:null==e||null===(z=e.property)||void 0===z||null===(V=z.owners)||void 0===V||null===(Y=V[0])||void 0===Y?void 0:Y.fatherOrHusbandName,isOwnerSame:null==e||!e.connectionHolders,mobileNumber:null==e||null===(G=e.property)||void 0===G||null===(q=G.owners)||void 0===q||null===(K=q[0])||void 0===K?void 0:K.mobileNumber,name:null==e||null===(X=e.property)||void 0===X||null===($=X.owners)||void 0===$||null===(Z=$[0])||void 0===Z?void 0:Z.name,relationship:null!=e&&null!==(J=e.property)&&void 0!==J&&null!==(Q=J.owners)&&void 0!==Q&&null!==(ee=Q[0])&&void 0!==ee&&ee.relationship?{code:null==e||null===(ne=e.property)||void 0===ne||null===(te=ne.owners)||void 0===te||null===(le=te[0])||void 0===le?void 0:le.relationship,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+(null==e||null===(oe=e.property)||void 0===oe||null===(ie=oe.owners)||void 0===ie||null===(ae=ie[0])||void 0===ae?void 0:ae.relationship)}:null,specialCategoryType:null!=e&&null!==(re=e.connectionHolders)&&void 0!==re&&null!==(ue=re[0])&&void 0!==ue&&ue.ownerType?{code:null==e||null===(de=e.connectionHolders)||void 0===de||null===(se=de[0])||void 0===se?void 0:se.ownerType,i18nKey:"PROPERTYTAX_OWNERTYPE_"+(null==e||null===(ce=e.connectionHolders)||void 0===ce||null===(ve=ce[0])||void 0===ve?void 0:ve.ownerType)}:""},e.WaterConnectionResult={WaterConnection:[{...e}]},e.cpt={details:{...null==e?void 0:e.property}},e.cptId={id:null==e?void 0:e.propertyId},e.documents={documents:null==e?void 0:e.documents},e.plumberPreference={plumberPreference:{code:"ULB",i18nKey:"WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE"}},e.serviceName=null!=e&&null!==(pe=e.applicationType)&&void 0!==pe&&pe.includes("WATER")?{code:"WATER",i18nKey:"WS_WATER_CONNECTION_ONLY"}:{code:"SEWERAGE",i18nKey:"WS_SEWERAGE_CONNECTION_ONLY"},e.waterConectionDetails={proposedPipeSize:{code:null==e?void 0:e.proposedPipeSize,i18nKey:(null==e?void 0:e.proposedPipeSize)+" "+t("WS_INCHES_LABEL"),size:null==e?void 0:e.proposedPipeSize},proposedTaps:null==e?void 0:e.proposedTaps};else if(n){var me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be,Fe,Ue,ke,He,je,ze,Ve,Ye,Ge,qe,Ke,Xe,$e,Ze,Je,Qe,en,nn,tn,ln,on,an,rn,un,dn,sn,cn,vn,pn,mn,En,Sn,_n,fn,Cn,gn,Nn,yn,Tn,Dn;n.ConnectionHolderDetails=null!=n&&n.connectionHolders?{...null==n||null===(me=n.connectionHolders)||void 0===me?void 0:me[0],address:null==n||null===(Ee=n.connectionHolders)||void 0===Ee||null===(Se=Ee[0])||void 0===Se?void 0:Se.correspondenceAddress,documentId:"",documentType:"",filestoreId:null,gender:null!=n&&null!==(_e=n.connectionHolders)&&void 0!==_e&&null!==(fe=_e[0])&&void 0!==fe&&fe.gender?{code:null==n||null===(Ce=n.connectionHolders)||void 0===Ce||null===(ge=Ce[0])||void 0===ge?void 0:ge.gender,i18nKey:"COMMON_GENDER_"+(null==n||null===(Ne=n.connectionHolders)||void 0===Ne||null===(ye=Ne[0])||void 0===ye?void 0:ye.gender)}:null,guardian:null==n||null===(Te=n.connectionHolders)||void 0===Te||null===(De=Te[0])||void 0===De?void 0:De.fatherOrHusbandName,isOwnerSame:!((null==n||null===(Ae=n.connectionHolders)||void 0===Ae?void 0:Ae.length)>0),mobileNumber:null==n||null===(Ie=n.connectionHolders)||void 0===Ie||null===(he=Ie[0])||void 0===he?void 0:he.mobileNumber,name:null==n||null===(Oe=n.connectionHolders)||void 0===Oe||null===(be=Oe[0])||void 0===be?void 0:be.name,relationship:null!=n&&null!==(Le=n.connectionHolders)&&void 0!==Le&&null!==(Re=Le[0])&&void 0!==Re&&Re.relationship?{code:null==n||null===(we=n.connectionHolders)||void 0===we||null===(We=we[0])||void 0===We?void 0:We.relationship,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+(null==n||null===(Pe=n.connectionHolders)||void 0===Pe||null===(Me=Pe[0])||void 0===Me?void 0:Me.relationship)}:null,specialCategoryType:null!=n&&null!==(xe=n.connectionHolders)&&void 0!==xe&&null!==(Be=xe[0])&&void 0!==Be&&Be.ownerType?{code:null==n||null===(Fe=n.connectionHolders)||void 0===Fe||null===(Ue=Fe[0])||void 0===Ue?void 0:Ue.ownerType,i18nKey:"PROPERTYTAX_OWNERTYPE_"+(null==n||null===(ke=n.connectionHolders)||void 0===ke||null===(He=ke[0])||void 0===He?void 0:He.ownerType)}:""}:{address:null==n||null===(je=n.property)||void 0===je||null===(ze=je.owners)||void 0===ze||null===(Ve=ze[0])||void 0===Ve?void 0:Ve.correspondenceAddress,documentId:"",documentType:"",filestoreId:null,gender:null!=n&&null!==(Ye=n.property)&&void 0!==Ye&&null!==(Ge=Ye.owners)&&void 0!==Ge&&null!==(qe=Ge[0])&&void 0!==qe&&qe.gender?{code:null==n||null===(Ke=n.property)||void 0===Ke||null===(Xe=Ke.owners)||void 0===Xe||null===($e=Xe[0])||void 0===$e?void 0:$e.gender,i18nKey:"COMMON_GENDER_"+(null==n||null===(Ze=n.property)||void 0===Ze||null===(Je=Ze.owners)||void 0===Je||null===(Qe=Je[0])||void 0===Qe?void 0:Qe.gender)}:null,guardian:null==n||null===(en=n.property)||void 0===en||null===(nn=en.owners)||void 0===nn||null===(tn=nn[0])||void 0===tn?void 0:tn.fatherOrHusbandName,isOwnerSame:null==n||!n.connectionHolders,mobileNumber:null==n||null===(ln=n.property)||void 0===ln||null===(on=ln.owners)||void 0===on||null===(an=on[0])||void 0===an?void 0:an.mobileNumber,name:null==n||null===(rn=n.property)||void 0===rn||null===(un=rn.owners)||void 0===un||null===(dn=un[0])||void 0===dn?void 0:dn.name,relationship:null!=n&&null!==(sn=n.property)&&void 0!==sn&&null!==(cn=sn.owners)&&void 0!==cn&&null!==(vn=cn[0])&&void 0!==vn&&vn.relationship?{code:null==n||null===(pn=n.property)||void 0===pn||null===(mn=pn.owners)||void 0===mn||null===(En=mn[0])||void 0===En?void 0:En.relationship,i18nKey:"COMMON_MASTERS_OWNERTYPE_"+(null==n||null===(Sn=n.property)||void 0===Sn||null===(_n=Sn.owners)||void 0===_n||null===(fn=_n[0])||void 0===fn?void 0:fn.relationship)}:null,specialCategoryType:null!=n&&null!==(Cn=n.connectionHolders)&&void 0!==Cn&&null!==(gn=Cn[0])&&void 0!==gn&&gn.ownerType?{code:null==n||null===(Nn=n.connectionHolders)||void 0===Nn||null===(yn=Nn[0])||void 0===yn?void 0:yn.ownerType,i18nKey:"PROPERTYTAX_OWNERTYPE_"+(null==n||null===(Tn=n.connectionHolders)||void 0===Tn||null===(Dn=Tn[0])||void 0===Dn?void 0:Dn.ownerType)}:""},n.SewerageConnectionResult={SewerageConnections:[{...n}]},n.cpt={details:{...null==n?void 0:n.property}},n.cptId={id:null==n?void 0:n.propertyId},n.documents={documents:[...null==n?void 0:n.documents]},n.plumberPreference={plumberPreference:{code:"ULB",i18nKey:"WS_I_WOULD_PREFER_FROM_MUNICIPAL_OFFICE"}},n.serviceName=null!=n&&n.applicationType.includes("WATER")?{code:"WATER",i18nKey:"WS_WATER_CONNECTION_ONLY"}:{code:"SEWERAGE",i18nKey:"WS_SEWERAGE_CONNECTION_ONLY"},n.sewerageConnectionDetails={proposedToilets:null==n?void 0:n.proposedToilets,proposedWaterClosets:null==n?void 0:n.proposedWaterClosets}}return e?{...e}:{...n}})(T,D,S);I({...A,...e})}},[w,W]);const M=(e,n,t,l)=>{I(l?n:""===e?{...n}:{...A,[e]:{...A[e],...n}}),(e=>{var n,t,l,o,i;const a=f.split("/").pop();let{nextStep:r}=y.find(e=>e.route===a),u=y.find(e=>e.route===a&&e);"object"==typeof r&&null!=r&&(!r[sessionStorage.getItem("KnowProperty")]||"search-property"!==r[sessionStorage.getItem("KnowProperty")]&&"create-property"!==r[sessionStorage.getItem("KnowProperty")]||(r=""+r[sessionStorage.getItem("KnowProperty")])),u[sessionStorage.getItem("serviceName")]&&(r=u[sessionStorage.getItem("serviceName")]),(null!=A&&null!==(n=A.cptId)&&void 0!==n&&n.id||null!=A&&null!==(t=A.cpt)&&void 0!==t&&null!==(l=t.details)&&void 0!==l&&l.propertyId||P&&null!=A&&null!==(o=A.cpt)&&void 0!==o&&null!==(i=o.details)&&void 0!==i&&i.propertyId)&&"know-your-property"===r&&(r="property-details"),"docsrequired"===r&&"yes"===sessionStorage.getItem("changePropertySelected")&&(r="property-details");let d=g.push;if(null===r)return d(xi(E.path,E.params)+"/check");d(xi(E.path,E.params)+"/"+r)})()},x=()=>{};if(b=null!==(a=b)&&void 0!==a&&a.WSCreateConfig?null===(r=b)||void 0===r?void 0:r.WSCreateConfig:Hl,null===(d=b)||void 0===d||d.forEach(e=>{y=y.concat(e.body.filter(e=>!e.hideInCitizen))}),y.indexRoute="property-details",(w&&Object.keys(w).length>0||!W)&&null!=w&&w.isLoading||null!=W&&W.isLoading||L)return t.createElement(i.Loader,null);const B=null===(s=Digit)||void 0===s||null===(c=s.ComponentRegistryService)||void 0===c?void 0:c.getComponent("WSCheckPage"),F=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("WSAcknowledgement");return t.createElement(o.Switch,null,y.map((e,n)=>{const{component:l,texts:i,inputs:a,key:r,isSkipEnabled:u}=e,d="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(o.Route,{path:xi(E.path,E.params)+"/"+e.route,key:n},t.createElement(d,{config:{texts:i,inputs:a,key:r,isSkipEnabled:u},onSelect:M,onSkip:x,t:S,formData:A,userType:"citizen"}))}),t.createElement(o.Route,{path:xi(E.path,E.params)+"/check"},t.createElement(B,{onSubmit:function(){try{return g.push(xi(E.path,E.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:A})),t.createElement(o.Route,{path:xi(E.path,E.params)+"/acknowledgement"},t.createElement(F,{data:A,onSuccess:()=>{m.invalidateQueries("WS_CREATE")},clearParams:h})),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:xi(E.path,E.params)+"/"+y.indexRoute})))},WSReSubmitDisconnectionApplication:()=>{var e,n,i;u.useQueryClient();const{t:a}=l.useTranslation(),r=o.useRouteMatch(),d=Digit.ULBService.getStateId();let s=[],{data:c}=Digit.Hooks.ws.useWSConfigMDMS.getFormConfig(d,{});return c=null!==(e=c)&&void 0!==e&&e.WSDisconnectionConfig?null===(n=c)||void 0===n?void 0:n.WSDisconnectionConfig:zl,null===(i=c.filter(e=>"RE_SUBMIT_DISCONNECTION_APPLICATION"===e.head))||void 0===i||i.forEach(e=>{s=s.concat(e.body.filter(e=>!e.hideInCitizen))}),s.indexRoute="application-form",t.createElement(o.Switch,null,s.map((e,n)=>{const{component:l,texts:i,inputs:u,key:d,isSkipEnabled:s}=e,c="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(o.Route,{path:Bi(r.path,r.params)+"/"+e.route,key:n},t.createElement(c,{config:{texts:i,inputs:u,key:d,isSkipEnabled:s},t:a,userType:"citizen"}))}),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:Bi(r.path,r.params)+"/"+s.indexRoute})))},WNSMyBillsComponent:()=>{const{t:e}=l.useTranslation(),{path:i}=o.useRouteMatch(),a=n.useMemo(()=>Hi.map(n=>{const t={};for(const l in n.texts)t[l]=e(n.texts[l]);return{...n,texts:t}},[Hi]));return t.createElement(o.Switch,null,t.createElement(o.Route,{path:""+i,exact:!0},t.createElement(ji,{template:a[0].labels,header:a[0].texts.header,actionButtonLabel:a[0].texts.actionButtonLabel,t:e})))},WSCheckPage:e=>{var n,a,r,u,d,s,c,v,p,m,E,S,_;let{onSubmit:f,value:C}=e;const{t:g}=l.useTranslation();o.useHistory(),o.useRouteMatch();let N=window.Digit.Utils.browser.isMobile();const{ConnectionHolderDetails:y,serviceName:T,waterConectionDetails:D,sewerageConnectionDetails:A,documents:I,cpt:h}=C;let O="/digit-ui/citizen/ws/create-application";function b(e){location.href=e}window.location.href.includes("/edit-application/")&&(O="/digit-ui/citizen/ws/edit-application/"+(null==C?void 0:C.tenantId));let L=[];var R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne;h&&null!=h&&h.details&&Object.keys(null==h?void 0:h.details).length>0&&(null!=h&&null!==(R=h.details)&&void 0!==R&&null!==(w=R.address)&&void 0!==w&&w.doorNo&&L.push(null==h||null===(z=h.details)||void 0===z||null===(V=z.address)||void 0===V?void 0:V.doorNo),null!=h&&null!==(W=h.details)&&void 0!==W&&null!==(P=W.address)&&void 0!==P&&P.street&&L.push(null==h||null===(Y=h.details)||void 0===Y||null===(G=Y.address)||void 0===G?void 0:G.street),null!=h&&null!==(M=h.details)&&void 0!==M&&null!==(x=M.address)&&void 0!==x&&x.landmark&&L.push(null==h||null===(q=h.details)||void 0===q||null===(K=q.address)||void 0===K?void 0:K.landmark),null!=h&&null!==(B=h.details)&&void 0!==B&&null!==(F=B.address)&&void 0!==F&&null!==(U=F.locality)&&void 0!==U&&U.code&&L.push(g(Digit.Utils.pt.getMohallaLocale(null==h||null===(X=h.details)||void 0===X||null===($=X.address)||void 0===$||null===(Z=$.locality)||void 0===Z?void 0:Z.code,null==h||null===(J=h.details)||void 0===J?void 0:J.tenantId))),null!=h&&null!==(k=h.details)&&void 0!==k&&k.tenantId&&L.push(g(Digit.Utils.pt.getCityLocale(null==h||null===(Q=h.details)||void 0===Q?void 0:Q.tenantId))),null!=h&&null!==(H=h.details)&&void 0!==H&&null!==(j=H.address)&&void 0!==j&&j.pincode&&L.push(null==h||null===(ee=h.details)||void 0===ee||null===(ne=ee.address)||void 0===ne?void 0:ne.pincode));const te=Array.isArray(null==h||null===(n=h.details)||void 0===n?void 0:n.owners)?null==h||null===(a=h.details)||void 0===a?void 0:a.owners.slice().reverse():[];return t.createElement(t.Fragment,null,t.createElement(Ne,{currentStep:4}),t.createElement(i.Header,{styles:{fontSize:"32px"}},g("WS_COMMON_SUMMARY")),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},g("WS_BASIC_DETAILS_HEADER")),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:g("WS_PROPERTY_ID_LABEL"),text:null==h||null===(r=h.details)||void 0===r?void 0:r.propertyId}),t.createElement(i.Row,{className:"border-none",label:g("WS_OWNERS_NAME_LABEL"),text:g(null===(u=te[0])||void 0===u?void 0:u.name)}),t.createElement(i.Row,{className:"border-none",label:g("WS_COMMON_TABLE_COL_ADDRESS"),text:L.join(", ")}),t.createElement(i.Row,{className:"border-none",label:g("WS_CONNECTION_DETAILS_STATUS_LABEL"),text:g(null==h||null===(d=h.details)||void 0===d?void 0:d.status)})),t.createElement("div",{style:{textAlign:"left"}},t.createElement(o.Link,{to:"/digit-ui/citizen/commonpt/view-property?propertyId="+(null==h||null===(s=h.details)||void 0===s?void 0:s.propertyId)+"&tenantId="+(null==h||null===(c=h.details)||void 0===c?void 0:c.tenantId)},t.createElement(i.LinkButton,{style:{textAlign:"left"},label:g("PT_VIEW_PROPERTY")})))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{position:"relative"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},g("WS_COMMON_CONNECTION_HOLDER_DETAILS_HEADER")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px",marginRight:"-10px"}}),style:{width:"100px",display:"inline"},onClick:()=>b(O+"/connection-holder")})),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",textStyle:N?{marginRight:"-5px"}:{},label:g("WS_OWN_MOBILE_NO"),text:null==y?void 0:y.mobileNumber}),t.createElement(i.Row,{className:"border-none",label:g("WS_OWN_DETAIL_NAME"),text:null==y?void 0:y.name}),t.createElement(i.Row,{className:"border-none",label:g("WS_OWN_DETAIL_GENDER_LABEL"),text:g(null==y||null===(v=y.gender)||void 0===v?void 0:v.i18nKey)||g("CS_NA")}),t.createElement(i.Row,{className:"border-none",label:g("WS_FATHERS_HUSBAND_NAME"),text:(null==y?void 0:y.guardian)||g("CS_NA")}),t.createElement(i.Row,{className:"border-none",label:g("WS_CONN_HOLDER_OWN_DETAIL_RELATION_LABEL"),text:g(null==y||null===(p=y.relationship)||void 0===p?void 0:p.i18nKey)||g("CS_NA")}),t.createElement(i.Row,{className:"border-none",label:g("WS_OWN_DETAIL_CROSADD"),text:(null==y?void 0:y.address)||g("CS_NA")}),t.createElement(i.Row,{className:"border-none",label:g("WS_OWN_DETAIL_SPECIAL_APPLICANT_LABEL"),text:g(null==y||null===(m=y.specialCategoryType)||void 0===m?void 0:m.i18nKey)||g("CS_NA")}),t.createElement(i.Row,{className:"border-none",label:g("WS_EMAIL_ID"),text:(null==y?void 0:y.emailId)||g("CS_NA")}))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{position:"relative"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},g("WS_COMMON_CONNECTION_DETAIL")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>b(O+"/service-name")})),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",textStyle:N?{marginRight:"-10px"}:{},label:g("WS_SERVICE_NAME_LABEL"),text:g(null==T?void 0:T.i18nKey)}),D&&(null===(E=Object.keys(D))||void 0===E?void 0:E.length)>0&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:g("WS_NO_OF_TAPS_PROPOSED"),text:null==D?void 0:D.proposedTaps}),t.createElement(i.Row,{className:"border-none",label:g("WS_SERV_DETAIL_PIPE_SIZE"),text:g(null==D||null===(S=D.proposedPipeSize)||void 0===S?void 0:S.i18nKey)})),A&&(null===(_=Object.keys(A))||void 0===_?void 0:_.length)>0&&t.createElement("div",null,t.createElement(i.Row,{className:"border-none",label:g("WS_NO_OF_WATER_CLOSETS"),text:null==A?void 0:A.proposedWaterClosets}),t.createElement(i.Row,{className:"border-none",label:g("WS_SERV_DETAIL_NO_OF_TOILETS"),text:null==A?void 0:A.proposedToilets})))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{position:"relative"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},g("WS_COMMON_DOCUMENT_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>b(O+"/document-details")})),I&&(null==I?void 0:I.documents.map((e,n)=>{var l;return t.createElement("div",{key:"doc-"+n},t.createElement("div",null,t.createElement(i.CardSectionHeader,null,g(null==e||null===(l=e.documentType)||void 0===l?void 0:l.split(".").slice(0,2).join("_"))),t.createElement(i.StatusTable,null,t.createElement(Ti,{value:C,Code:null==e?void 0:e.documentType,index:n}),(null==I?void 0:I.documents.length)!=n+1?t.createElement("hr",{style:{color:"white",backgroundColor:"white",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)))}))),t.createElement(i.SubmitBar,{label:g("CS_COMMON_SUBMIT"),onSubmit:f,style:{marginLeft:"10px",maxWidth:"95%"}}))},WSAcknowledgement:e=>{var a,r,u,d,s,c,v,p,m,E;let{data:_,onSuccess:f,clearParams:C}=e;const{t:g}=l.useTranslation(),[N,y,T]=Digit.Hooks.useSessionStorage("CITIZEN_TL_MUTATION_HAPPENED",!1),D=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.ws.useWSUpdateAPI("WATER")),A=Digit.Hooks.ws.useWSUpdateAPI("SEWERAGE");let I=window.location.href.includes("/edit-application/")||window.location.href.includes("/modify-connection/");const{data:h}=Digit.Hooks.useStore.getInitData(),{tenants:O}=h||{};return Digit.ULBService.getStateId(),n.useEffect(()=>{"true"!==sessionStorage.getItem("isCreateEnabled")?window.history.forward():sessionStorage.removeItem("isCreateEnabled")}),n.useEffect(()=>{try{var e,n;let o;if("WATER"===(null==_||null===(e=_.serviceName)||void 0===e?void 0:e.code)||"BOTH"===(null==_||null===(n=_.serviceName)||void 0===n?void 0:n.code)){var t,l;o=(null==_||null===(t=_.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.tenantId)||o;const e={...I?(e=>{var n,t,l,o,i,a,r,u,d,s,c,v,p,m,E,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W;let P=null==e||null===(n=e.WaterConnectionResult)||void 0===n||null===(t=n.WaterConnection)||void 0===t?void 0:t[0],M={WaterConnection:{id:null!=e&&e.isEditApplication?null==e?void 0:e.id:null==P?void 0:P.id,tenantId:null!=e&&e.isEditApplication?null==e?void 0:e.tenantId:null==P?void 0:P.tenantId,propertyId:null!=e&&e.isEditApplication?null==e?void 0:e.propertyId:null==P?void 0:P.propertyId,applicationNo:null!=e&&e.isEditApplication?null==e?void 0:e.applicationNo:null==P?void 0:P.applicationNo,applicationStatus:null!=e&&e.isEditApplication?null==e?void 0:e.applicationStatus:null==P?void 0:P.applicationStatus,status:null!=e&&e.isEditApplication?null==e?void 0:e.status:null==P?void 0:P.status,connectionNo:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionNo:null==P?void 0:P.connectionNo)||null,oldConnectionNo:null,documents:[...null==e||null===(l=e.documents)||void 0===l?void 0:l.documents],plumberInfo:null!=e&&e.isEditApplication?null==e?void 0:e.plumberInfo:(null==P?void 0:P.plumberInfo)||[],roadType:null,roadCuttingArea:null,roadCuttingInfo:[],connectionExecutionDate:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionExecutionDate:null==P?void 0:P.connectionExecutionDate)||null,connectionCategory:null,connectionType:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionType:null==P?void 0:P.connectionType)||null,additionalDetails:null!=e&&e.isEditApplication?{...null==e?void 0:e.additionalDetails}:{...null==P?void 0:P.additionalDetails},auditDetails:null!=e&&e.isEditApplication?null==e?void 0:e.auditDetails:null==P?void 0:P.auditDetails,processInstance:null!=e&&e.isEditApplication?{...null==e?void 0:e.processInstance,action:"RESUBMIT_APPLICATION"}:{...null==P?void 0:P.processInstance,action:"SUBMIT_APPLICATION"},applicationType:null!=e&&e.isEditApplication?null==e?void 0:e.applicationType:"MODIFY_WATER_CONNECTION",dateEffectiveFrom:S(Date.now()+864e5),connectionHolders:null!=e&&e.isEditApplication?null!=e&&null!==(o=e.ConnectionHolderDetails)&&void 0!==o&&o.isOwnerSame?null:[{correspondenceAddress:(null==e||null===(i=e.ConnectionHolderDetails)||void 0===i?void 0:i.address)||"",fatherOrHusbandName:(null==e||null===(a=e.ConnectionHolderDetails)||void 0===a?void 0:a.guardian)||"",gender:(null==e||null===(r=e.ConnectionHolderDetails)||void 0===r||null===(u=r.gender)||void 0===u?void 0:u.code)||"",mobileNumber:(null==e||null===(d=e.ConnectionHolderDetails)||void 0===d?void 0:d.mobileNumber)||"",name:(null==e||null===(s=e.ConnectionHolderDetails)||void 0===s?void 0:s.name)||"",emailId:(null==e||null===(c=e.ConnectionHolderDetails)||void 0===c?void 0:c.emailId)||"",ownerType:(null==e||null===(v=e.ConnectionHolderDetails)||void 0===v||null===(p=v.specialCategoryType)||void 0===p?void 0:p.code)||"",relationship:(null==e||null===(m=e.ConnectionHolderDetails)||void 0===m||null===(E=m.relationship)||void 0===E?void 0:E.code)||"",sameAsPropertyAddress:null==e||null===(_=e.ConnectionHolderDetails)||void 0===_?void 0:_.sameAsOwnerDetails}]:null==P?void 0:P.connectionHolders,oldApplication:!1,channel:"CITIZEN",waterSource:(null!=e&&e.isEditApplication?null==e?void 0:e.waterSource:null==P?void 0:P.waterSource)||null,meterId:(null!=e&&e.isEditApplication?null==e?void 0:e.meterId:null==P?void 0:P.meterId)||null,meterInstallationDate:(null!=e&&e.isEditApplication?null==e?void 0:e.meterInstallationDate:null==P?void 0:P.meterInstallationDate)||null,proposedPipeSize:null==e||null===(f=e.waterConectionDetails)||void 0===f||null===(C=f.proposedPipeSize)||void 0===C?void 0:C.code,proposedTaps:null==e||null===(g=e.waterConectionDetails)||void 0===g?void 0:g.proposedTaps,pipeSize:(null!=e&&e.isEditApplication?null==e?void 0:e.pipeSize:null==P?void 0:P.pipeSize)||null,noOfTaps:(null!=e&&e.isEditApplication?null==e?void 0:e.noOfTaps:null==P?void 0:P.noOfTaps)||null,waterSourceSubSource:null,waterSubSource:(null!=e&&e.isEditApplication?null==e?void 0:e.waterSubSource:null==P?void 0:P.waterSubSource)||null,property:null!=e&&e.isEditApplication?{...null==e?void 0:e.property}:{...null==P?void 0:P.property},water:!(null==e||null===(N=e.applicationType)||void 0===N||!N.includes("WATER")),sewerage:!(null==e||null===(y=e.applicationType)||void 0===y||!y.includes("WATER")),service:null!=e&&e.isEditApplication?null==e||null===(T=e.serviceName)||void 0===T?void 0:T.code:null==P||null===(D=P.serviceName)||void 0===D?void 0:D.code,reviewDocData:[...null==e||null===(A=e.documents)||void 0===A?void 0:A.documents],proposedWaterClosets:null==e||null===(I=e.sewerageConnectionDetails)||void 0===I?void 0:I.proposedWaterClosets,proposedToilets:null==e||null===(h=e.sewerageConnectionDetails)||void 0===h?void 0:h.proposedToilets,comment:"",wfDocuments:[],assignee:[],action:null!=e&&e.isEditApplication?"RESUBMIT_APPLICATION":"SUBMIT_APPLICATION",assignes:[]}};return M=null!==(O=Digit)&&void 0!==O&&null!==(b=O.Customizations)&&void 0!==b&&null!==(L=b.WS)&&void 0!==L&&L.customiseEditWSUpdate?null===(R=Digit)||void 0===R||null===(w=R.Customizations)||void 0===w||null===(W=w.WS)||void 0===W?void 0:W.customiseEditWSUpdate(e,M):M,M})(_):(e=>{var n,t,l,o,i,a,r,u,d;let s={WaterConnection:{...null==e||null===(n=e.WaterConnectionResult)||void 0===n||null===(t=n.WaterConnection)||void 0===t?void 0:t[0],documents:[...null==e||null===(l=e.documents)||void 0===l?void 0:l.documents],processInstance:{action:"SUBMIT_APPLICATION"}}};return s=null!==(o=Digit)&&void 0!==o&&null!==(i=o.Customizations)&&void 0!==i&&null!==(a=i.WS)&&void 0!==a&&a.customiseWSUpdate?null===(r=Digit)||void 0===r||null===(u=r.Customizations)||void 0===u||null===(d=u.WS)||void 0===d?void 0:d.customiseWSUpdate(e,s):s,s})(_),disconnectRequest:!1,reconnectRequest:!1};D.mutate(e,{onSuccess:f})}}catch(e){}},[_]),n.useEffect(()=>{var e,n;if("SEWERAGE"===(null==_||null===(e=_.serviceName)||void 0===e?void 0:e.code)||"BOTH"===(null==_||null===(n=_.serviceName)||void 0===n?void 0:n.code)&&D.isSuccess){const e={...I?(e=>{var n,t,l,o,i,a,r,u,d,s,c,v,p,m,E,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W;let P=null==e||null===(n=e.SewerageConnectionResult)||void 0===n||null===(t=n.SewerageConnections)||void 0===t?void 0:t[0],M={SewerageConnection:{id:null!=e&&e.isEditApplication?null==e?void 0:e.id:null==P?void 0:P.id,tenantId:null!=e&&e.isEditApplication?null==e?void 0:e.tenantId:null==P?void 0:P.tenantId,propertyId:null!=e&&e.isEditApplication?null==e?void 0:e.propertyId:null==P?void 0:P.propertyId,applicationNo:null!=e&&e.isEditApplication?null==e?void 0:e.applicationNo:null==P?void 0:P.applicationNo,applicationStatus:null!=e&&e.isEditApplication?null==e?void 0:e.applicationStatus:null==P?void 0:P.applicationStatus,status:null!=e&&e.isEditApplication?null==e?void 0:e.status:null==P?void 0:P.status,connectionNo:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionNo:null==P?void 0:P.connectionNo)||null,oldConnectionNo:null,documents:[...null==e||null===(l=e.documents)||void 0===l?void 0:l.documents],plumberInfo:null!=e&&e.isEditApplication?null==e?void 0:e.plumberInfo:(null==P?void 0:P.plumberInfo)||[],roadType:null,roadCuttingArea:null,roadCuttingInfo:[],connectionExecutionDate:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionExecutionDate:null==P?void 0:P.connectionExecutionDate)||null,connectionCategory:null,connectionType:(null!=e&&e.isEditApplication?null==e?void 0:e.connectionType:null==P?void 0:P.connectionType)||null,additionalDetails:null!=e&&e.isEditApplication?{...null==e?void 0:e.additionalDetails}:{...null==P?void 0:P.additionalDetails},auditDetails:null!=e&&e.isEditApplication?null==e?void 0:e.auditDetails:null==P?void 0:P.auditDetails,processInstance:null!=e&&e.isEditApplication?{...null==e?void 0:e.processInstance,action:"RESUBMIT_APPLICATION"}:{...null==P?void 0:P.processInstance,action:"SUBMIT_APPLICATION"},applicationType:null!=e&&e.isEditApplication?null==e?void 0:e.applicationType:"MODIFY_WATER_CONNECTION",dateEffectiveFrom:S(Date.now()+864e5),connectionHolders:null!=e&&e.isEditApplication?null!=e&&null!==(o=e.ConnectionHolderDetails)&&void 0!==o&&o.isOwnerSame?null:[{correspondenceAddress:(null==e||null===(i=e.ConnectionHolderDetails)||void 0===i?void 0:i.address)||"",fatherOrHusbandName:(null==e||null===(a=e.ConnectionHolderDetails)||void 0===a?void 0:a.guardian)||"",gender:(null==e||null===(r=e.ConnectionHolderDetails)||void 0===r||null===(u=r.gender)||void 0===u?void 0:u.code)||"",mobileNumber:(null==e||null===(d=e.ConnectionHolderDetails)||void 0===d?void 0:d.mobileNumber)||"",name:(null==e||null===(s=e.ConnectionHolderDetails)||void 0===s?void 0:s.name)||"",emailId:(null==e||null===(c=e.ConnectionHolderDetails)||void 0===c?void 0:c.emailId)||"",ownerType:(null==e||null===(v=e.ConnectionHolderDetails)||void 0===v||null===(p=v.specialCategoryType)||void 0===p?void 0:p.code)||"",relationship:(null==e||null===(m=e.ConnectionHolderDetails)||void 0===m||null===(E=m.relationship)||void 0===E?void 0:E.code)||"",sameAsPropertyAddress:null==e||null===(_=e.ConnectionHolderDetails)||void 0===_?void 0:_.sameAsOwnerDetails}]:null==P?void 0:P.connectionHolders,oldApplication:!1,channel:"CITIZEN",waterSource:(null!=e&&e.isEditApplication?null==e?void 0:e.waterSource:null==P?void 0:P.waterSource)||null,meterId:(null!=e&&e.isEditApplication?null==e?void 0:e.meterId:null==P?void 0:P.meterId)||null,meterInstallationDate:(null!=e&&e.isEditApplication?null==e?void 0:e.meterInstallationDate:null==P?void 0:P.meterInstallationDate)||null,proposedPipeSize:null==e||null===(f=e.waterConectionDetails)||void 0===f||null===(C=f.proposedPipeSize)||void 0===C?void 0:C.code,proposedTaps:null==e||null===(g=e.waterConectionDetails)||void 0===g?void 0:g.proposedTaps,pipeSize:(null!=e&&e.isEditApplication?null==e?void 0:e.pipeSize:null==P?void 0:P.pipeSize)||null,noOfTaps:(null!=e&&e.isEditApplication?null==e?void 0:e.noOfTaps:null==P?void 0:P.noOfTaps)||null,waterSourceSubSource:null,waterSubSource:(null!=e&&e.isEditApplication?null==e?void 0:e.waterSubSource:null==P?void 0:P.waterSubSource)||null,property:null!=e&&e.isEditApplication?{...null==e?void 0:e.property}:{...null==P?void 0:P.property},water:!(null==e||null===(N=e.applicationType)||void 0===N||!N.includes("WATER")),sewerage:!(null==e||null===(y=e.applicationType)||void 0===y||!y.includes("WATER")),service:null!=e&&e.isEditApplication?null==e||null===(T=e.serviceName)||void 0===T?void 0:T.code:null==P||null===(D=P.serviceName)||void 0===D?void 0:D.code,reviewDocData:[...null==e||null===(A=e.documents)||void 0===A?void 0:A.documents],proposedWaterClosets:null==e||null===(I=e.sewerageConnectionDetails)||void 0===I?void 0:I.proposedWaterClosets,proposedToilets:null==e||null===(h=e.sewerageConnectionDetails)||void 0===h?void 0:h.proposedToilets,comment:"",wfDocuments:[],assignee:[],action:null!=e&&e.isEditApplication?"RESUBMIT_APPLICATION":"SUBMIT_APPLICATION",assignes:[]}};return M=null!==(O=Digit)&&void 0!==O&&null!==(b=O.Customizations)&&void 0!==b&&null!==(L=b.WS)&&void 0!==L&&L.customiseEditSWUpdate?null===(R=Digit)||void 0===R||null===(w=R.Customizations)||void 0===w||null===(W=w.WS)||void 0===W?void 0:W.customiseEditSWUpdate(e,M):M,M})(_):(e=>{var n,t,l,o,i,a,r,u,d;let s={SewerageConnection:{...null==e||null===(n=e.SewerageConnectionResult)||void 0===n||null===(t=n.SewerageConnections)||void 0===t?void 0:t[0],connectionType:"Non Metered",documents:[...null==e||null===(l=e.documents)||void 0===l?void 0:l.documents],processInstance:{action:"SUBMIT_APPLICATION"}}};return s=null!==(o=Digit)&&void 0!==o&&null!==(i=o.Customizations)&&void 0!==i&&null!==(a=i.WS)&&void 0!==a&&a.customiseSWUpdate?null===(r=Digit)||void 0===r||null===(u=r.Customizations)||void 0===u||null===(d=u.WS)||void 0===d?void 0:d.customiseSWUpdate(e,s):s,s})(_),disconnectRequest:!1,reconnectRequest:!1};A.mutate(e,{onSuccess:f})}},[_,D.isSuccess]),("WATER"===(null==_||null===(a=_.serviceName)||void 0===a?void 0:a.code)?D.isLoading||D.isIdle:"SEWERAGE"===(null==_||null===(r=_.serviceName)||void 0===r?void 0:r.code)?A.isLoading||A.isIdle:D.isLoading||D.isIdle||A.isLoading||A.isIdle)?t.createElement(i.Loader,null):t.createElement(i.Card,null,t.createElement(ki,{t:g,clearParams:C,Waterdata:D.data,Seweragedata:A.data,isSuccess:"WATER"===(null==_||null===(u=_.serviceName)||void 0===u?void 0:u.code)?D.isSuccess:A.isSuccess,isLoading:"WATER"===(null==_||null===(d=_.serviceName)||void 0===d?void 0:d.code)?D.isLoading||D.isIdle:"SEWERAGE"===(null==_||null===(s=_.serviceName)||void 0===s?void 0:s.code)?A.isLoading||A.isIdle:D.isLoading||D.isIdle||A.isLoading||A.isIdle}),("WATER"===(null==_||null===(c=_.serviceName)||void 0===c?void 0:c.code)?D.isSuccess:A.isSuccess)&&t.createElement(i.CardText,null,g("WS_FILE_RESPONSE")),("WATER"===(null==_||null===(v=_.serviceName)||void 0===v?void 0:v.code)||"BOTH"===(null==_||null===(p=_.serviceName)||void 0===p?void 0:p.code))&&D.isSuccess&&t.createElement(i.LinkButton,{label:t.createElement("div",{className:"response-download-button"},t.createElement("span",null,t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#a82227"},t.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),t.createElement("span",{className:"download-button"},g("WS_PRINT_WATER_APPLICATION_LABEL"))),onClick:()=>{var e,n,t;const l=null==D||null===(e=D.data)||void 0===e||null===(n=e.WaterConnection)||void 0===n?void 0:n[0],o=O.find(e=>{var n,t;return e.code===(null==_||null===(n=_.cpt)||void 0===n||null===(t=n.details)||void 0===t?void 0:t.tenantId)});q({...l},{...null==_||null===(t=_.cpt)||void 0===t?void 0:t.details},null==o?void 0:o.code,g).then(e=>Digit.Utils.pdf.generatev1(e))}}),("SEWERAGE"===(null==_||null===(m=_.serviceName)||void 0===m?void 0:m.code)||"BOTH"===(null==_||null===(E=_.serviceName)||void 0===E?void 0:E.code))&&A.isSuccess&&t.createElement(i.LinkButton,{label:t.createElement("div",{className:"response-download-button"},t.createElement("span",null,t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#a82227"},t.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),t.createElement("span",{className:"download-button"},g("WS_PRINT_SEWERAGE_APPLICATION_LABEL"))),onClick:()=>{var e,n,t;const l=null==A||null===(e=A.data)||void 0===e||null===(n=e.SewerageConnections)||void 0===n?void 0:n[0],o=O.find(e=>{var n,t;return e.code===(null==_||null===(n=_.cpt)||void 0===n||null===(t=n.details)||void 0===t?void 0:t.tenantId)});q({...l},{...null==_||null===(t=_.cpt)||void 0===t?void 0:t.details},null==o?void 0:o.code,g).then(e=>Digit.Utils.pdf.generatev1(e))}}),t.createElement(o.Link,{to:{pathname:"/digit-ui/citizen"}},t.createElement(i.SubmitBar,{label:g("CORE_COMMON_GO_TO_HOME")})))},WSDisconnectionCheckPage:()=>{const{t:e}=l.useTranslation(),a=o.useHistory(),r=(o.useRouteMatch(),Digit.SessionStorage.get("WS_DISCONNECTION")),[u,d]=n.useState(r.WSDisconnectionForm.documents||[]);let s="/digit-ui/citizen/ws/disconnect-application";function c(e){location.href=e}window.location.href.includes("/edit-application/")&&(s="/digit-ui/citizen/ws/edit-disconnect-application");const[v,m]=n.useState(!1),{mutate:E}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:_}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:f}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:C}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),g=()=>{setShowToast(null)};return v?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},e("WS_COMMON_SUMMARY")),t.createElement(Mt,{currentStep:3}),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{display:"inline"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},e("WS_DISCONNECTION_APPLICATION_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-20px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>c(s+"/application-form")})),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:e("WS_DISCONNECTION_CONSUMER_NUMBER"),text:r.connectionNo}),t.createElement(i.Row,{className:"border-none",label:e("WS_DISCONNECTION_TYPE"),text:e(r.WSDisconnectionForm.type.value.i18nKey)}),t.createElement(i.Row,{className:"border-none",label:e("WS_DISCONNECTION_PROPOSED_DATE"),text:p(S(r.WSDisconnectionForm.date))}),"Temporary"==r.WSDisconnectionForm.type.value.code?t.createElement(i.Row,{className:"border-none",label:e("WS_DISCONNECTION_PROPOSED_END_DATE"),text:p(S(r.WSDisconnectionForm.endDate))}):"",t.createElement(i.Row,{className:"border-none",label:e("WS_DISCONNECTION_REASON"),text:e(r.WSDisconnectionForm.reason.value.i18nKey)}))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{display:"inline"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},e("WS_COMMON_DOCUMENT_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-20px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>c(s+"/documents-upload")})),u&&(null==u?void 0:u.map((n,l)=>{var o;return t.createElement("div",{key:"doc-"+l},t.createElement("div",null,t.createElement(i.CardSectionHeader,null,e(null==n||null===(o=n.documentType)||void 0===o?void 0:o.split(".").slice(0,2).join("_"))),t.createElement(i.StatusTable,null,t.createElement(Ti,{value:{documents:r.WSDisconnectionForm},Code:null==n?void 0:n.documentType,index:l,showFileName:!0}),(null==u?void 0:u.length)!=l+1?t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)))})),t.createElement(i.SubmitBar,{label:e("CS_COMMON_SUBMIT"),onSubmit:()=>function(e){try{return Promise.resolve(y(e,{applicationData:r},r.serviceType)).then(function(e){const n=function(n){if(null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n.water){var t;null!==(t=e.WaterConnection)&&void 0!==t&&t.isDisconnectionTemporary&&(e.WaterConnection.endDate=S(r.WSDisconnectionForm.endDate)||"");const n=function(){if(E)return m(!0),Promise.resolve(E(e,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(T(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){let n={WaterConnection:e};return n={...n,disconnectRequest:!0},Promise.resolve(_(n,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:(e,n)=>{var t;Digit.SessionStorage.set("WS_DISCONNECTION",{...r,DisconnectionResponse:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),a.push("/digit-ui/citizen/ws/disconnect-acknowledge")}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}else{const n=function(n){if(null!=e&&null!==(n=e.SewerageConnection)&&void 0!==n&&n.sewerage){e.SewerageConnection.isDisconnectionTemporary&&(e.SewerageConnection.endDate=S(r.WSDisconnectionForm.endDate)||"");const n=function(){if(f)return m(!0),Promise.resolve(f(e,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(T(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){let n={SewerageConnection:e};return n={...n,disconnectRequest:!0},Promise.resolve(C(n,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:(e,n)=>{var t;Digit.SessionStorage.set("WS_DISCONNECTION",{...r,DisconnectionResponse:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),a.push("/digit-ui/citizen/ws/disconnect-acknowledge")}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})})}catch(e){return Promise.reject(e)}}(null==r?void 0:r.WSDisconnectionForm)})))},WSRestorationCheckPage:()=>{const{t:e}=l.useTranslation(),a=o.useHistory(),r=(o.useRouteMatch(),Digit.SessionStorage.get("WS_DISCONNECTION")),[u,d]=n.useState(r.WSDisconnectionForm.documents||[]),[s,c]=n.useState(null),[v,m]=n.useState(!1),{mutate:E}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:_}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:f}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:C}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),g=()=>{setShowToast(null)};return v?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},e("WS_COMMON_SUMMARY")),t.createElement(Mt,{currentStep:3}),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{display:"inline"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},e("WS_RESTORATION_APPLICATION_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-20px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>{location.href="/digit-ui/citizen/ws/restoration-application/application-form"}})),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:e("WS_RESTORATION_CONSUMER_NUMBER"),text:r.connectionNo}),t.createElement(i.Row,{className:"border-none",label:e("WS_RESTORATION_PROPOSED_DATE"),text:p(S(r.WSDisconnectionForm.date))}),t.createElement(i.Row,{className:"border-none",label:e("WS_RESTORATION_REASON"),text:r.WSDisconnectionForm.reason.value}))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement(i.SubmitBar,{label:e("CS_COMMON_SUBMIT"),onSubmit:()=>function(e){try{return Promise.resolve(y(e,{applicationData:r},r.serviceType)).then(function(e){const n=function(n){if(null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n.water){e.WaterConnection.isdisconnection=!1,e.WaterConnection.reconnectionReason=e.WaterConnection.disconnectionReason,e.WaterConnection.disconnectionReason="",e.WaterConnection.isDisconnectionTemporary=!0,e.reconnectRequest=!0,e.disconnectRequest=!1;const n=function(){if(E)return m(!0),Promise.resolve(E(e,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),c({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(D(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){let n={WaterConnection:e};return n={...n,disconnectRequest:!1,reconnectRequest:!0},Promise.resolve(_(n,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),c({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:(e,n)=>{var t;Digit.SessionStorage.set("WS_DISCONNECTION",{...r,DisconnectionResponse:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),a.push("/digit-ui/citizen/ws/restoration-acknowledge")}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}else{const n=function(n){if(null!=e&&null!==(n=e.SewerageConnection)&&void 0!==n&&n.sewerage){e.SewerageConnection.isdisconnection=!1,e.SewerageConnection.reconnectionReason=e.SewerageConnection.disconnectionReason,e.SewerageConnection.disconnectionReason="",e.SewerageConnection.isDisconnectionTemporary=!0,e.reconnectRequest=!0,e.disconnectRequest=!1;const n=function(){if(f)return m(!0),Promise.resolve(f(e,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),c({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(D(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){let n={SewerageConnection:e};return n={...n,disconnectRequest:!1,reconnectRequest:!0},Promise.resolve(C(n,{onError:(e,n)=>{var t,l,o,i,a,r;m(!1),c({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(g,5e3)},onSuccess:(e,n)=>{var t;Digit.SessionStorage.set("WS_DISCONNECTION",{...r,DisconnectionResponse:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),a.push("/digit-ui/citizen/ws/restoration-acknowledge")}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})})}catch(e){return Promise.reject(e)}}(null==r?void 0:r.WSDisconnectionForm)})),s&&t.createElement(i.Toast,{error:"error"===(null==s?void 0:s.key),label:e(null==s?void 0:s.message),onClose:()=>c(null)}))},WSReSubmitDisconnectionCheckPage:()=>{var e;const{t:a}=l.useTranslation(),r=o.useHistory(),u=(o.useRouteMatch(),Digit.SessionStorage.get("WS_DISCONNECTION")),[d,s]=n.useState(u.WSDisconnectionForm.documents||[]);let c="/digit-ui/citizen/ws/resubmit-disconnect-application";function v(e){location.href=e}window.location.href.includes("/resubmit")&&(c="/digit-ui/citizen/ws/resubmit-disconnect-application");const[m,E]=n.useState(!1),{mutate:_}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:f}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),C=()=>{setShowToast(null)};return m?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},a("WS_COMMON_SUMMARY")),t.createElement(Mt,{currentStep:3}),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{display:"inline"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},a("WS_DISCONNECTION_APPLICATION_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-20px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>v(c+"/application-form")})),t.createElement(i.StatusTable,null,t.createElement(i.Row,{className:"border-none",label:a("WS_DISCONNECTION_CONSUMER_NUMBER"),text:u.connectionNo||(null==u||null===(e=u.applicationData)||void 0===e?void 0:e.connectionNo)}),t.createElement(i.Row,{className:"border-none",label:a("WS_DISCONNECTION_TYPE"),text:a(u.WSDisconnectionForm.type.value.i18nKey)}),t.createElement(i.Row,{className:"border-none",label:a("WS_DISCONNECTION_PROPOSED_DATE"),text:p(S(u.WSDisconnectionForm.date))}),t.createElement(i.Row,{className:"border-none",label:a("WS_DISCONNECTION_REASON"),text:u.WSDisconnectionForm.reason.value}))),t.createElement(i.Card,{style:{paddingRight:"16px"}},t.createElement("div",{style:{display:"inline"}},t.createElement(i.CardHeader,{styles:{fontSize:"28px"}},a("WS_COMMON_DOCUMENT_DETAILS")),t.createElement(i.LinkButton,{label:t.createElement(i.EditIcon,{style:{marginTop:"-20px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>v(c+"/documents-upload")})),d&&(null==d?void 0:d.map((e,n)=>{var l;return t.createElement("div",{key:"doc-"+n},t.createElement("div",null,t.createElement(i.CardSectionHeader,null,a(null==e||null===(l=e.documentType)||void 0===l?void 0:l.split(".").slice(0,2).join("_"))),t.createElement(i.StatusTable,null,t.createElement(Ti,{value:{documents:u.WSDisconnectionForm},Code:null==e?void 0:e.documentType,index:n,showFileName:!0}),(null==d?void 0:d.length)!=n+1?t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)))})),t.createElement(i.SubmitBar,{label:a("CS_COMMON_SUBMIT"),onSubmit:()=>function(e){try{return Promise.resolve(function(e,n,t){try{var l,o,i,a,r,u,d,s,c,v,p,m,E,_;Digit.UserService.getType();let f={WaterConnection:{...null==n?void 0:n.applicationData,dateEffectiveFrom:S(null==e?void 0:e.date),isDisconnectionTemporary:"Temporary"===(null==e||null===(l=e.type)||void 0===l||null===(o=l.value)||void 0===o?void 0:o.code),disconnectionReason:null==e||null===(i=e.reason.value)||void 0===i?void 0:i.code,documents:null==e?void 0:e.documents,water:!0,sewerage:!1,service:"Water",processInstance:{...null==n||null===(a=n.applicationData)||void 0===a?void 0:a.processInstance,action:"RESUBMIT_APPLICATION"},channel:"CITIZEN"},disconnectRequest:!0};n.applicationData.connectionType&&(n.applicationData.meterInstallationDate&&(f.WaterConnection.meterInstallationDate=n.applicationData.meterInstallationDate),n.applicationData.meterId&&(f.WaterConnection.meterId=n.applicationData.meterId));let C={SewerageConnection:{...null==n?void 0:n.applicationData,dateEffectiveFrom:S(null==e?void 0:e.date),isdisconnection:!0,isDisconnectionTemporary:"Temporary"===(null==e||null===(r=e.type)||void 0===r||null===(u=r.value)||void 0===u?void 0:u.code),disconnectionReason:null==e||null===(d=e.reason.value)||void 0===d?void 0:d.code,documents:null==e?void 0:e.documents,water:!1,sewerage:!0,service:"Sewerage",processInstance:{...null==n||null===(s=n.applicationData)||void 0===s?void 0:s.processInstance,action:"RESUBMIT_APPLICATION"},channel:"CITIZEN"},disconnectRequest:!0},g="WATER"===t?f:C;return g=null!==(c=Digit)&&void 0!==c&&null!==(v=c.Customizations)&&void 0!==v&&null!==(p=v.WS)&&void 0!==p&&p.customiseCreatePayloadOfWSReSubmitDisconnection?null===(m=Digit)||void 0===m||null===(E=m.Customizations)||void 0===E||null===(_=E.WS)||void 0===_?void 0:_.customiseCreatePayloadOfWSReSubmitDisconnection(e,g,t):g,Promise.resolve(g)}catch(e){return Promise.reject(e)}}(e,u,u.serviceType)).then(function(e){const n=function(n){if(null!=e&&null!==(n=e.WaterConnection)&&void 0!==n&&n.water){const n=function(){if(_)return E(!0),Promise.resolve(_(e,{onError:(e,n)=>{var t,l,o,i,a,r;E(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(C,5e3)},onSuccess:function(e,n){try{var t,l,o;return Digit.SessionStorage.set("WS_DISCONNECTION",{...null==u?void 0:u.applicationData,...null==u?void 0:u.WSDisconnectionForm,DisconnectionResponse:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),r.push("/digit-ui/citizen/ws/disconnect-acknowledge?applicationNumber="+(null==e||null===(l=e.WaterConnection)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo)),Promise.resolve()}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}else{const n=function(n){if(null!=e&&null!==(n=e.SewerageConnection)&&void 0!==n&&n.sewerage){const n=function(){if(f)return E(!0),Promise.resolve(f(e,{onError:(e,n)=>{var t,l,o,i,a,r;E(!1),setError({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(C,5e3)},onSuccess:function(e,n){try{var t,l,o;return Digit.SessionStorage.set("WS_DISCONNECTION",{...null==u?void 0:u.applicationData,...null==u?void 0:u.WSDisconnectionForm,DisconnectionResponse:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),r.push("/digit-ui/citizen/ws/disconnect-acknowledge?applicationNumber="+(null==e||null===(l=e.SewerageConnections)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo)),Promise.resolve()}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})})}catch(e){return Promise.reject(e)}}(null==u?void 0:u.WSDisconnectionForm)})))},WSApplicationBillAmendment:()=>{var e,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I;const[h,O]=n.useState(null),{t:b}=l.useTranslation(),{connectionNumber:L,tenantId:R,isEdit:w}=Digit.Hooks.useQueryParams(),W=Digit.ULBService.getStateId();let{state:P}=o.useLocation();P=P?"string"==typeof P?JSON.parse(P):P:{};const[M,x]=n.useState(""),[B,F]=n.useState(!1),[U,k]=n.useState(!1);let H=window.Digit.Utils.browser.isMobile(),j=window.location.href.includes("/employee");const{isLoading:z,data:V}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSMDMSBillAmendment({tenantId:W}),Y=L.includes("WS")?"WS":"SW",G={tenantId:R,consumerCode:L,service:Y},{data:q,isLoading:K}=Digit.Hooks.usePaymentSearch(R,G),{data:X}=Digit.Hooks.fsm.useMDMS(W,"DIGIT-UI","WSTaxHeadMaster"),$=null==X||null===(e=X.BillingService)||void 0===e||null===(r=e.TaxHeadMaster)||void 0===r?void 0:r.filter(e=>e.IsBillamend);let Z=null==q?void 0:q.filter(e=>null==$?void 0:$.find(n=>n.code===e.taxHeadCode));null==X||null===(u=X.BillingService)||void 0===u||null===(d=u.TaxHeadMaster)||void 0===d||d.filter(e=>e.code.includes("ADHOC")&&e.IsBillamend&&e.service===Y);const{register:J,control:Q,watch:ee,setValue:ne,handleSubmit:te,formState:{errors:le,...oe},getValues:ie,...ae}=a.useForm({defaultValues:{...null===(s=P)||void 0===s||null===(c=s.data)||void 0===c||null===(v=c.applicationDetails)||void 0===v||null===(p=v.amendment)||void 0===p||null===(m=p.additionalDetails)||void 0===m?void 0:m.editForm}}),{mutate:re}=Digit.Hooks.ws.useApplicationActionsBillAmendUpdate(),[ue,de]=n.useState(!1),se=ee("effectivefrom"),ce=ee("amendmentReason"),ve=ee("WS_REDUCED_AMOUNT"),pe=ee("WS_ADDITIONAL_AMOUNT"),me=ee("SW_REDUCED_AMOUNT"),Ee=ee("SW_ADDITIONAL_AMOUNT"),Se=o.useHistory();n.useEffect(()=>fe({type:"updateAmendmentReason",payload:ce}),[ce]);const[_e,fe]=n.useReducer(function(e,n){var t,l;switch(n.type){case"upload":return e.map(e=>e.documentType===n.payload.id?{...e,url:n.payload.url}:e);case"remove":return e.map(e=>{let t=e;return e.documentType===n.payload.id&&(delete t.url,delete t.loader),t});case"addLoader":return e.map(e=>e.documentType===n.payload.id?{...e,loader:!0}:e);case"removeLoader":return e.map(e=>e.documentType===n.payload.id?{...e,loader:!1}:e);case"updateAmendmentReason":return null===(t=n.payload)||void 0===t||null===(l=t.allowedDocuments)||void 0===l?void 0:l.allowedDocs;default:return e}},[]),Ce=e=>{ne(e,{VALUE:!1})},ge=e=>{var n,t,l,o,i,a,r,u;let d;const s=void 0!==(null==e||null===(n=e[Y+"_REDUCED_AMOUNT"])||void 0===n?void 0:n.VALUE)&&null!=e&&null!==(t=e[Y+"_REDUCED_AMOUNT"])&&void 0!==t&&t.VALUE||void 0!==(null==e||null===(l=e[Y+"_ADDITIONAL_AMOUNT"])||void 0===l?void 0:l.VALUE)&&(null==e||null===(o=e[Y+"_ADDITIONAL_AMOUNT"])||void 0===o||!o.VALUE)?"rebate":"penalty";d="WS"===Y?JSON.parse(JSON.stringify(null!=e&&null!==(i=e.WS_REDUCED_AMOUNT)&&void 0!==i&&i.VALUE?null==e?void 0:e.WS_REDUCED_AMOUNT:null==e?void 0:e.WS_ADDITIONAL_AMOUNT)):JSON.parse(JSON.stringify(null!=e&&null!==(a=e.SW_REDUCED_AMOUNT)&&void 0!==a&&a.VALUE?null==e?void 0:e.SW_REDUCED_AMOUNT:null==e?void 0:e.SW_ADDITIONAL_AMOUNT)),null===(r=d)||void 0===r||delete r.VALUE;const c=Object.entries(d);return null!=e&&e[Y+"_REBATE"]?c.push([Y+"_TIME_ADHOC_REBATE",null==e?void 0:e[Y+"_REBATE"]]):null!=e&&e[Y+"_PENALTY"]&&c.push([Y+"_TIME_ADHOC_PENALTY",null==e?void 0:e[Y+"_PENALTY"]]),null===(u=c.filter(e=>""!==(null==e?void 0:e[1])))||void 0===u?void 0:u.map(e=>(Z.find(n=>n.taxHeadCode===e[0]),{taxHeadMasterCode:e[0],taxAmount:e[1]?"penalty"!==s?-parseInt(e[1]):parseInt(e[1]):0}))},Ne=e=>{var n,t,l,o;const i=null!=e&&null!==(n=e[Y+"_REDUCED_AMOUNT"])&&void 0!==n&&n.VALUE?"REBATE":"PENALTY",a={};let r;return Z.map(e=>{a[e.taxHeadCode]=e.amount}),r="WS"===Y?JSON.parse(JSON.stringify(null!=e&&null!==(t=e.WS_REDUCED_AMOUNT)&&void 0!==t&&t.VALUE?null==e?void 0:e.WS_REDUCED_AMOUNT:null==e?void 0:e.WS_ADDITIONAL_AMOUNT)):JSON.parse(JSON.stringify(null!=e&&null!==(l=e.SW_REDUCED_AMOUNT)&&void 0!==l&&l.VALUE?null==e?void 0:e.SW_REDUCED_AMOUNT:null==e?void 0:e.SW_ADDITIONAL_AMOUNT)),null===(o=r)||void 0===o||delete o.VALUE,r[Y+"_"+i]=null!=e&&e[Y+"_"+i]?null==e?void 0:e[Y+"_"+i]:0,{...r,actionPerformed:r,TOTAL:Object.values(r).reduce((e,n)=>parseInt(e)+parseInt(n),0),originalDemand:a,action:i}},Te=()=>{O(null)};n.useEffect(()=>{const e=setTimeout(()=>{var e;ue&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/generate-note-bill-amendment?applicationNumber="+(null===(e=P)||void 0===e?void 0:e.data.applicationDetails.amendment.amendmentId))},5e3);return()=>clearTimeout(e)},[ue]);let De=0;return null===(E=Z)||void 0===E||null===(S=E.filter(e=>{var n;return null==e||null===(n=e.taxHeadCode)||void 0===n?void 0:n.includes("ADHOC")}))||void 0===S||S.map(e=>{De+=null==e?void 0:e.amount}),Z=null===(_=Z)||void 0===_?void 0:_.filter(e=>{var n;return!(null!=e&&null!==(n=e.taxHeadCode)&&void 0!==n&&n.includes("ADHOC"))}),t.createElement("form",{onSubmit:te(e=>{var n,t;const l={Amendment:{consumerCode:L,tenantId:R,businessService:Y,amendmentReason:null==ce?void 0:ce.code,reasonDocumentNumber:null==e?void 0:e.reasonDocumentNumber,effectiveFrom:new Date(null==e?void 0:e.effectiveFrom).getTime(),effectiveTill:new Date(null==e?void 0:e.effectiveTill).getTime(),documents:Object.values(null==e?void 0:e.DOCUMENTS).map(e=>{const n={...e,documentType:null==e?void 0:e.id,fileUrl:null==e?void 0:e.url};return delete n.id,delete n.url,n}),demandDetails:ge(e),additionalDetails:{searchBillDetails:Ne(e),editForm:e}}};if("RE-SUBMIT-APPLICATION"!==(null===(n=P)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.action))Se.push("/digit-ui/employee/ws/response",l);else{var o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C;const e={businessId:null===(o=P)||void 0===o||null===(i=o.data)||void 0===i||null===(a=i.applicationDetails)||void 0===a||null===(r=a.amendment)||void 0===r?void 0:r.amendmentId,action:"RE-SUBMIT",tenantId:R,businessService:"WATER"===(null===(u=P)||void 0===u||null===(d=u.data)||void 0===d||null===(s=d.applicationDetails)||void 0===s||null===(c=s.applicationData)||void 0===c?void 0:c.serviceType)?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:"WATER"===(null===(v=P)||void 0===v||null===(p=v.data)||void 0===p||null===(m=p.applicationDetails)||void 0===m||null===(E=m.applicationData)||void 0===E?void 0:E.serviceType)?"WS":"SW"},n={...null===(S=P)||void 0===S||null===(_=S.data)||void 0===_||null===(f=_.applicationDetails)||void 0===f||null===(C=f.applicationData)||void 0===C?void 0:C.billAmendmentDetails,workflow:e,...null==l?void 0:l.Amendment};re({AmendmentUpdate:n},{onError:(e,n)=>{O({key:"error",error:e,label:b("CS_WATER_UPDATE_APPLICATION_FAILED")}),setTimeout(Te,5e3)},onSuccess:(e,n)=>{var t,l,o;if((null==e||null===(t=e.Amendments)||void 0===t?void 0:t.length)>0)return null!=n&&null!==(l=n.AmendmentUpdate)&&void 0!==l&&null!==(o=l.workflow)&&void 0!==o&&o.action.includes("RE-SUBMIT")&&O({key:"success",label:b("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}),void de(!0)}})}})},t.createElement("div",{style:{marginLeft:"20px"}},t.createElement(i.Header,null,null!==(f=P)&&void 0!==f&&null!==(C=f.data)&&void 0!==C&&C.action?b("WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL"):b("WS_BILL_AMENDMENT_BUTTON"))),t.createElement(i.Card,null,t.createElement(i.LabelFieldPair,{style:{marginBottom:"20px"}},t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b("WS_ACKNO_CONNECTION_NO_LABEL")),t.createElement(i.CardText,{style:{marginBottom:"0px"}},L)),t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px"}},b("WS_ADJUSTMENT_AMOUNT")),t.createElement(i.CardSectionSubText,{style:{marginBottom:"16px"}},b("WS_ADJUSTMENT_AMOUNT_ADDITION_TEXT")),K?t.createElement(i.Loader,null):t.createElement("table",{cellPadding:"8px",cellSpacing:"10px"},t.createElement("div",{style:H&&j?{overflow:"scroll",maxWidth:"50%"}:{}},t.createElement("tbody",null,t.createElement("tr",{style:{textAlign:"left"}},t.createElement("th",null,b("WS_TAX_HEADS")),t.createElement("th",{style:{textAlign:"right"}},b("WS_CURRENT_AMOUNT")),t.createElement("th",{style:{paddingLeft:"150px"}},t.createElement(n.Fragment,null,t.createElement(a.Controller,{name:Y+"_REDUCED_AMOUNT.VALUE",key:Y+"_REDUCED_AMOUNT.VALUE",control:Q,rules:{validate:e=>!(!e&&("WS"===Y?null==pe||!pe.VALUE:null==Ee||!Ee.VALUE))},render:e=>{var n,l,o,a,r,u,d,s,c,v,p,m,E,S;return t.createElement("div",{style:{paddingTop:"20px"}},t.createElement(i.CheckBox,{style:{marginLeft:"35px"},label:b(Y+"_REDUCED_AMOUNT"),onChange:n=>{n.target.checked?(e.onChange(!0),F(!0),k(!1),Ce(Y+"_ADDITIONAL_AMOUNT")):(F(!1),e.onChange(!1))},disable:!(!w||0!=(null===(n=P)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.applicationDetails)||void 0===o||null===(a=o.amendment)||void 0===a||null===(r=a.additionalDetails)||void 0===r||null===(u=r.editForm)||void 0===u||null===(d=u.WS_REDUCED_AMOUNT)||void 0===d?void 0:d.VALUE)&&0!=(null===(s=P)||void 0===s||null===(c=s.data)||void 0===c||null===(v=c.applicationDetails)||void 0===v||null===(p=v.amendment)||void 0===p||null===(m=p.additionalDetails)||void 0===m||null===(E=m.editForm)||void 0===E||null===(S=E.SW_REDUCED_AMOUNT)||void 0===S?void 0:S.VALUE)),checked:null==e?void 0:e.value}))}}),null!=le&&null!==(g=le.WS_REDUCED_AMOUNT)&&void 0!==g&&g.VALUE&&1==B?t.createElement(i.CardLabelError,null,b("WS_REQUIRED_FIELD")):null)),t.createElement("th",null,t.createElement(n.Fragment,null,t.createElement(a.Controller,{name:Y+"_ADDITIONAL_AMOUNT.VALUE",key:Y+"_ADDITIONAL_AMOUNT.VALUE",control:Q,rules:{validate:e=>!(!e&&("WS"===Y?null==ve||!ve.VALUE:null==me||!me.VALUE))},render:e=>{var n,l,o,a,r,u,d,s,c,v,p,m,E,S;return t.createElement("div",{style:{paddingTop:"17px"}},t.createElement(i.CheckBox,{style:{marginLeft:"35px"},label:b(Y+"_ADDITIONAL_AMOUNT"),onChange:n=>{n.target.checked?(e.onChange(!0),k(!0),F(!1),Ce(Y+"_REDUCED_AMOUNT")):(k(!1),e.onChange(!1))},disable:!(!w||0!=(null===(n=P)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.applicationDetails)||void 0===o||null===(a=o.amendment)||void 0===a||null===(r=a.additionalDetails)||void 0===r||null===(u=r.editForm)||void 0===u||null===(d=u.WS_ADDITIONAL_AMOUNT)||void 0===d?void 0:d.VALUE)&&0!=(null===(s=P)||void 0===s||null===(c=s.data)||void 0===c||null===(v=c.applicationDetails)||void 0===v||null===(p=v.amendment)||void 0===p||null===(m=p.additionalDetails)||void 0===m||null===(E=m.editForm)||void 0===E||null===(S=E.WS_ADDITIONAL_AMOUNT)||void 0===S?void 0:S.VALUE)),checked:null==e?void 0:e.value}))}}),null!=le&&null!==(N=le.WS_ADDITIONAL_AMOUNT)&&void 0!==N&&N.VALUE&&1==U?t.createElement(i.CardLabelError,null,b("WS_REQUIRED_FIELD")):null))),null===(y=Z)||void 0===y?void 0:y.map(e=>{var l,o,a,r,u,d,s,c,v,p,m;return t.createElement("tr",null,t.createElement("td",{style:{paddingRight:"60px",fontWeight:"700"}},b(""+e.taxHeadCode)),t.createElement("td",{style:{textAlign:"end"}},"₹ ",e.amount),t.createElement("div",null,t.createElement("td",{style:{paddingRight:"60px",paddingLeft:"150px"}},t.createElement(n.Fragment,null,t.createElement(i.TextInput,{disabled:"WS"===Y?!(null!=ve&&ve.VALUE):!(null!=me&&me.VALUE),type:"number",name:Y+"_REDUCED_AMOUNT."+e.taxHeadCode,inputRef:J({max:{value:e.amount,message:b(Y+"_ERROR_ENTER_LESS_THAN_MAX_VALUE")},pattern:{value:/^[+]?[1-9]\d*$/,message:b("CS_INVALID_INPUT")}})}))),"WS"===Y?(null==le||null===(l=le.WS_REDUCED_AMOUNT)||void 0===l?void 0:l[e.taxHeadCode])&&t.createElement(i.CardLabelError,{style:{marginBottom:"-20px",marginTop:"-30px",marginLeft:"150px"}},null==le||null===(o=le.WS_REDUCED_AMOUNT)||void 0===o||null===(a=o[e.taxHeadCode])||void 0===a?void 0:a.message):(null==le||null===(r=le.SW_REDUCED_AMOUNT)||void 0===r?void 0:r[e.taxHeadCode])&&t.createElement(i.CardLabelError,{style:{marginBottom:"-20px",marginTop:"-30px",marginLeft:"150px"}},null==le||null===(u=le.SW_REDUCED_AMOUNT)||void 0===u?void 0:u[e.taxHeadCode].message)),t.createElement("td",{style:{paddingRight:"60px"}},t.createElement(n.Fragment,null,t.createElement(i.TextInput,{disabled:"WS"===Y?!(null!=pe&&pe.VALUE):!(null!=Ee&&Ee.VALUE),type:"number",name:Y+"_ADDITIONAL_AMOUNT."+e.taxHeadCode,inputRef:J({pattern:{value:/^[+]?[1-9]\d*$/,message:b("CS_INVALID_INPUT")}})})),"WS"===Y?(null==le||null===(d=le.WS_ADDITIONAL_AMOUNT)||void 0===d?void 0:d[e.taxHeadCode])&&t.createElement(i.CardLabelError,{style:{marginTop:"-19px"}},null==le||null===(s=le.WS_ADDITIONAL_AMOUNT)||void 0===s||null===(c=s[e.taxHeadCode])||void 0===c?void 0:c.message):(null==le||null===(v=le.SW_ADDITIONAL_AMOUNT)||void 0===v?void 0:v[e.taxHeadCode])&&t.createElement(i.CardLabelError,{style:{marginTop:"-19px"}},null==le||null===(p=le.SW_ADDITIONAL_AMOUNT)||void 0===p||null===(m=p[e.taxHeadCode])||void 0===m?void 0:m.message)))}),t.createElement("tr",null,t.createElement("td",{style:{paddingRight:"60px",fontWeight:"700"}},b("WS_REBATE_PENALTY"),t.createElement("div",{className:"tooltip",style:{marginLeft:"10px",marginBottom:"-4px"}},t.createElement(i.InfoBannerIcon,{fill:"#0b0c0c",style:!0}),t.createElement("span",{className:"tooltiptext",style:{whiteSpace:"nowrap",fontSize:"medium"}},"1. "+b("WS_ADHOC_REBATE_TOOLTIP"),t.createElement("br",null),t.createElement("br",null),"2. "+b("WS_ADHOC_PENALTY_TOOLTIP")))),t.createElement("td",{style:{textAlign:"end"}},"₹ ",De||0),t.createElement("td",{style:{paddingRight:"60px",paddingLeft:"150px"}},t.createElement(n.Fragment,null,t.createElement(i.TextInput,{disabled:"WS"===Y?!(null!=ve&&ve.VALUE):!(null!=me&&me.VALUE),name:Y+"_REBATE",inputRef:J()}))),t.createElement("td",{style:{paddingRight:"60px"}},t.createElement(n.Fragment,null,t.createElement(i.TextInput,{disabled:"WS"===Y?!(null!=pe&&pe.VALUE):!(null!=Ee&&Ee.VALUE),name:Y+"_PENALTY",inputRef:J()}))))))),z?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px"}},b("WS_ADD_DEMAND_REVISION_BASIS")),t.createElement(i.CardSectionSubText,{style:{marginBottom:"16px"}},b("WS_SELECT_DEMAND_REVISION")),t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b("WS_DEMAND_REVISION_BASIS")+" *"),t.createElement(a.Controller,{name:"amendmentReason",control:Q,rules:{required:!0},render:e=>t.createElement(i.Dropdown,{style:H&&j?{}:{width:"640px"},option:V,selected:null==e?void 0:e.value,optionKey:"code",t:b,select:null==e?void 0:e.onChange})})),null!=le&&le.amendmentReason?t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},b("WS_REQUIRED_FIELD")):null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b("COURT_CASE_SETTLEMENT"===(null==ce?void 0:ce.code)?"WS_COURT_ORDER_NO":"ARREAR_WRITE_OFF"===(null==ce?void 0:ce.code)||"ONE_TIME_SETTLEMENT"===(null==ce?void 0:ce.code)?"WS_GOVERNMENT_NOTIFICATION_NUMBER":"WS_DOCUMENT_NO")+" *"),t.createElement("div",{className:"reasonDocumentNumber"},t.createElement(i.TextInput,{style:H&&j?{}:{width:"640px"},name:"reasonDocumentNumber",inputRef:J({required:!0})}))),null!=le&&le.reasonDocumentNumber?t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},b("WS_REQUIRED_FIELD")):null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b("WS_BILL_AMEND_EFFECTIVE_FROM")+" *"),t.createElement(a.Controller,{render:e=>t.createElement(i.DatePicker,{style:H&&j?{}:{width:"640px"},date:e.value,disabled:!1,onChange:e.onChange}),name:"effectiveFrom",rules:{required:!0},control:Q})),null!=le&&le.effectiveFrom?t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},b("WS_REQUIRED_FIELD")):null,"COURT_CASE_SETTLEMENT"!==(null==ce?void 0:ce.code)&&t.createElement("div",null,t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b("WS_BILL_AMEND_EFFECTIVE_TILL")+" *"),t.createElement(a.Controller,{render:e=>t.createElement(i.DatePicker,{style:H&&j?{}:{width:"640px"},date:e.value,disabled:!1,onChange:e.onChange}),name:"effectiveTill",rules:{required:!0,validate:{isValidToDate:e=>new Date(e).getTime()>(se?new Date(se).getTime():(new Date).getTime())||"Invalid format"}},control:Q})),"required"===(null==le||null===(T=le.effectiveTill)||void 0===T?void 0:T.type)&&t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},b("WS_REQUIRED_FIELD")),"Invalid format"===(null==le||null===(D=le.effectiveTill)||void 0===D?void 0:D.message)&&t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},b("ERR_DEFAULT_INPUT_FIELD_MSG")))),ce?t.createElement(i.CardSectionHeader,{style:{marginBottom:"16px"}},b("WS_DOCUMENT_REQUIRED")):null,null==_e?void 0:_e.map(e=>{var n;return t.createElement("div",{style:{marginBottom:"25px"}},t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{style:{fontWeight:"500"}},b(""+(null==e?void 0:e.documentType)),null!=e&&e.required?"*":null),t.createElement("div",{className:"field"},t.createElement(a.Controller,{name:"DOCUMENTS."+(null==e?void 0:e.documentType),control:Q,rules:null!=e&&e.required?{required:!0}:{},render:n=>t.createElement(i.UploadFile,{id:"ws-doc-"+e.documentType,onUpload:t=>function(e,n,t){return Promise.resolve(function(e,n,t){try{return x(""),Promise.resolve(function(l,o){try{var i=ye(function(){const l=function(l,o,i,a,r,u){var d,s,c,v;if((null==e||null===(l=e.target)||void 0===l||null===(o=l.files)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.size)<5242880&&/(.*?)(jpg|jpeg|png|pdf)$/i.test(null==e||null===(a=e.target)||void 0===a||null===(r=a.files)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.type))return fe({type:"addLoader",payload:{id:n}}),Promise.resolve(Digit.UploadServices.Filestorage("WS",null==e||null===(d=e.target)||void 0===d?void 0:d.files[0],R)).then(function(l){var o,i,a;const r=null==l||null===(o=l.data)||void 0===o||null===(i=o.files)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.fileStoreId,u=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch([r],R)).then(function(l){var o,i,a,u;let{data:d}=l;const s=null==d||null===(o=d.fileStoreIds)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.url;fe({type:"upload",payload:{id:n,url:s}}),t.onChange({id:n,url:s,fileName:null==e||null===(a=e.target)||void 0===a||null===(u=a.files[0])||void 0===u?void 0:u.name,fileStoreId:r,fileStore:r})});alert(b("CS_FILE_UPLOAD_ERROR"))}();if(u&&u.then)return u.then(function(){})});(null==e||null===(s=e.target)||void 0===s||null===(c=s.files)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.size)>5242880?x({message:"FILE_SIZE_EXCEEDED",documentType:n}):x({message:"FILE_TYPE_MISMATCHED",documentType:n})}();if(l&&l.then)return l.then(function(){})},function(){})}catch(e){return o(!0,e)}return i&&i.then?i.then(o.bind(null,!1),o.bind(null,!0)):o(!1,i)}(0,function(e,t){if(fe({type:"removeLoader",payload:{id:n}}),e)throw t;return t}))}catch(e){return Promise.reject(e)}}(e,n,t)).then(function(){})}(t,null==e?void 0:e.documentType,n),onDelete:()=>fe({type:"remove",payload:{id:null==e?void 0:e.documentType}}),style:H&&j?{}:{width:"640px"},message:null!=e&&e.url?"1 "+b("CS_ACTION_FILEUPLOADED"):b("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",textStyles:{width:"100%"},inputStyles:{width:"280px"},error:null==M?void 0:M.message})}))),null!=le&&null!==(n=le.DOCUMENTS)&&void 0!==n&&n[null==e?void 0:e.documentType]||M&&(null==M?void 0:M.documentType)===e.documentType?t.createElement(i.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px"}},b(M&&(null==M?void 0:M.documentType)===e.documentType?null==M?void 0:M.message:"WS_NO_FILE_SELECTED")):null)})),h?t.createElement(i.Toast,{isDleteBtn:!0,error:null==h?void 0:h.error,label:null==h?void 0:h.label,onClose:Te}):null,t.createElement(i.ActionBar,null,t.createElement(i.SubmitBar,{submit:!0,label:null!==(A=P)&&void 0!==A&&null!==(I=A.data)&&void 0!==I&&I.action?b("WF_CITIZEN_NEWSW1_RESUBMIT_APPLICATION"):b("WS_COMMON_BUTTON_SUBMIT"),disabled:"WS"==Y&&B&&(""==ie().WS_REDUCED_AMOUNT.WS_CHARGE||null==ie().WS_REDUCED_AMOUNT.WS_CHARGE)&&(""==ie().WS_REDUCED_AMOUNT.WS_TIME_PENALTY||null==ie().WS_REDUCED_AMOUNT.WS_TIME_PENALTY)&&(""==ie().WS_REDUCED_AMOUNT.WS_TIME_INTEREST||null==ie().WS_REDUCED_AMOUNT.WS_TIME_INTEREST)&&(""==ie().WS_REDUCED_AMOUNT.WS_WATER_CESS||null==ie().WS_REDUCED_AMOUNT.WS_WATER_CESS)||"SW"==Y&&B&&(""==ie().SW_REDUCED_AMOUNT.SW_CHARGE||null==ie().SW_REDUCED_AMOUNT.SW_CHARGE)&&(""==ie().SW_REDUCED_AMOUNT.SW_TIME_PENALTY||null==ie().SW_REDUCED_AMOUNT.SW_TIME_PENALTY)&&(""==ie().SW_REDUCED_AMOUNT.SW_TIME_INTEREST||null==ie().SW_REDUCED_AMOUNT.SW_TIME_INTEREST)&&(""==ie().SW_REDUCED_AMOUNT.SW_SEWERAGE_CESS||null==ie().SW_REDUCED_AMOUNT.SW_SEWERAGE_CESS)||"WS"==Y&&U&&(""==ie().WS_ADDITIONAL_AMOUNT.WS_CHARGE||null==ie().WS_ADDITIONAL_AMOUNT.WS_CHARGE)&&(""==ie().WS_ADDITIONAL_AMOUNT.WS_TIME_PENALTY||null==ie().WS_ADDITIONAL_AMOUNT.WS_TIME_PENALTY)&&(""==ie().WS_ADDITIONAL_AMOUNT.WS_TIME_INTEREST||null==ie().WS_ADDITIONAL_AMOUNT.WS_TIME_INTEREST)&&(""==ie().WS_ADDITIONAL_AMOUNT.WS_WATER_CESS||null==ie().WS_ADDITIONAL_AMOUNT.WS_WATER_CESS)||"SW"==Y&&U&&(""==ie().SW_ADDITIONAL_AMOUNT.SW_CHARGE||null==ie().SW_ADDITIONAL_AMOUNT.SW_CHARGE)&&(""==ie().SW_ADDITIONAL_AMOUNT.SW_TIME_PENALTY||null==ie().SW_ADDITIONAL_AMOUNT.SW_TIME_PENALTY)&&(""==ie().SW_ADDITIONAL_AMOUNT.SW_TIME_INTEREST||null==ie().SW_ADDITIONAL_AMOUNT.SW_TIME_INTEREST)&&(""==ie().SW_ADDITIONAL_AMOUNT.SW_SEWERAGE_CESS||null==ie().SW_ADDITIONAL_AMOUNT.SW_SEWERAGE_CESS)})))},WSRequiredDocuments:e=>{let{path:a}=e;const{search:r}=o.useLocation();let{state:u}=o.useLocation();u=u?"string"==typeof u?JSON.parse(u):u:{};const d=o.useHistory(),{t:s}=l.useTranslation(),c=Digit.ULBService.getStateId(),v=n.useRef(),{isLoading:p,data:m}=Digit.Hooks.ws.WSSearchMdmsTypes.useWSMDMSBillAmendment({tenantId:c});return t.createElement(n.Fragment,null,t.createElement("div",{ref:v},t.createElement("div",{className:"options"},t.createElement(i.Header,null,s("ES_COMMON_WS_DOCUMENTS_REQUIRED")),t.createElement("div",{className:"mrsm",style:{marginRight:"35px"},onClick:()=>Digit.Download.PDF(v,s("ES_COMMON_WS_DOCUMENTS_REQUIRED"))},t.createElement(i.DownloadIcon,{className:"mrsm"}),s("ES_WS_REQUIRED_DOCS_DOWNLOAD"))),t.createElement(i.Card,{style:{position:"relative"},className:"employeeCard-override"},p?t.createElement(i.Loader,null):null==m?void 0:m.map(e=>t.createElement(n.Fragment,null,t.createElement(i.CardHeader,null,s(e.code).replaceAll("_"," ")),t.createElement(i.CardLabel,null,s("WS_DOCS_REQ_INFO")),e.allowedDocuments.allowedDocs.map((e,n)=>t.createElement(i.CardLabelDesc,null,n+1,". ",s(""+e.documentType))))))),t.createElement(i.ActionBar,null,t.createElement(i.SubmitBar,{label:s("WS_COMMON_BUTTON_APPLY"),onSubmit:()=>{var e;d.push(a+"/bill-amendment"+r,JSON.stringify({data:null===(e=u)||void 0===e?void 0:e.data}))}})))},WSNewApplication:()=>{const{t:e}=l.useTranslation(),a=(o.useLocation(),o.useHistory());m(location.search);const[r,u]=n.useState(!1),[d,s]=n.useState(!1),[c,v]=n.useState(null),[p,E]=n.useState({}),[S,_]=n.useState(null),[f,C]=n.useState({head:"",body:[]});let g=Digit.ULBService.getCurrentTenantId();g||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY");const y=Digit.ULBService.getStateId();let{data:T,isLoading:D}=Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(y,{});const[A,I]=n.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),[h,O,b]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),{data:L}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:A},tenantId:g},{filters:{propertyIds:A},tenantId:g,enabled:!(!A||""==A)});n.useEffect(()=>{if(!D){var e;const n=T.find(e=>e.hideInCitizen&&e.isCreate);n.head="WS_APP_FOR_WATER_AND_SEWERAGE_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isCreateConnection&&t.push(e)}),n.body=t,C(n)}},[T]),n.useEffect(()=>{var e,n,t,l;!A&&(null==h||null===(e=h.cpt)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.propertyId)&&I(null==h||null===(t=h.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.propertyId)},[null==h?void 0:h.cpt]),n.useEffect(()=>{var e;O({...h,cpt:{details:null==L||null===(e=L.Properties)||void 0===e?void 0:e[0]}})},[L]);const{mutate:R}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:w}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:W}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:P}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE"),x=()=>{v(null)};return d||D?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,e(f.head))),t.createElement(i.FormComposer,{config:f.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o,i,a,r;M.isEqual(h,n)||(O({...h,...n}),sessionStorage.setItem("FORMSTATE_ERRORS",JSON.stringify(null==t?void 0:t.errors))),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&null!=t&&null!==(l=t.errors)&&void 0!==l&&null!==(o=l.ConnectionHolderDetails)&&void 0!==o&&o.type&&1==(null===(i=Object.keys(null==t||null===(a=t.errors)||void 0===a||null===(r=a.ConnectionHolderDetails)||void 0===r?void 0:r.type))||void 0===i?void 0:i.length)&&t.errors.ConnectionHolderDetails&&Object.values(t.errors.ConnectionHolderDetails.type).filter(e=>{var n;return"required"===e.type&&""!==(null==e||null===(n=e.ref)||void 0===n?void 0:n.value)}).length>0?u(!0):u(!Object.keys(t.errors).length)},label:e("CS_COMMON_SUBMIT"),onSubmit:function(e){try{var n,t,l;if(!(null!=e&&null!==(n=e.cpt)&&void 0!==n&&n.id||null!=L&&null!==(t=L.Properties)&&void 0!==t&&t[0]||null!=e&&null!==(l=e.cpt)&&void 0!==l&&l.details&&L))return v({key:"error",message:"ERR_INVALID_PROPERTY_ID"}),Promise.resolve();const o=sessionStorage.getItem("FORMSTATE_ERRORS"),i="string"==typeof o?JSON.parse(o):{};return Promise.resolve(function(n,t,l){var o,r;if(!(Object.keys(i).length>0)||1==Object.keys(i).length&&null!=i&&null!==(n=i.ConnectionHolderDetails)&&void 0!==n&&n.type&&1==(null===(t=Object.keys(null==i||null===(l=i.ConnectionHolderDetails)||void 0===l?void 0:l.type))||void 0===t?void 0:t.length)&&i.ConnectionHolderDetails&&Object.values(i.ConnectionHolderDetails.type).filter(e=>{var n;return"required"===e.type&&""!==(null==e||null===(n=e.ref)||void 0===n?void 0:n.value)}).length>0)return null!=e&&null!==(o=e.cpt)&&void 0!==o&&o.details||(e.cpt={details:null==L||null===(r=L.Properties)||void 0===r?void 0:r[0]}),ht(e),Promise.resolve(function(e){try{var n,t,l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce;null==e||null===(n=e.cpt)||void 0===n||null===(t=n.details)||void 0===t||null===(l=t.owners)||void 0===l||l.forEach(e=>{null!=e&&e.permanentAddress&&(e.correspondenceAddress=null==e?void 0:e.permanentAddress)});let ge={water:null==e||null===(o=e.ConnectionDetails)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.water,sewerage:null==e||null===(a=e.ConnectionDetails)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.sewerage,proposedTaps:(null==e||null===(u=e.ConnectionDetails)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.proposedTaps)&&Number(null==e||null===(s=e.ConnectionDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.proposedTaps),proposedPipeSize:(null==e||null===(v=e.ConnectionDetails)||void 0===v||null===(p=v[0])||void 0===p||null===(m=p.proposedPipeSize)||void 0===m?void 0:m.size)&&Number(null==e||null===(E=e.ConnectionDetails)||void 0===E||null===(S=E[0])||void 0===S||null===(_=S.proposedPipeSize)||void 0===_?void 0:_.size),proposedWaterClosets:(null==e||null===(f=e.ConnectionDetails)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.proposedWaterClosets)&&Number(null==e||null===(g=e.ConnectionDetails)||void 0===g||null===(N=g[0])||void 0===N?void 0:N.proposedWaterClosets),proposedToilets:(null==e||null===(y=e.ConnectionDetails)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.proposedToilets)&&Number(null==e||null===(D=e.ConnectionDetails)||void 0===D||null===(A=D[0])||void 0===A?void 0:A.proposedToilets),connectionHolders:null!=e&&null!==(I=e.ConnectionHolderDetails)&&void 0!==I&&null!==(h=I[0])&&void 0!==h&&h.sameAsOwnerDetails?null:[{correspondenceAddress:(null==e||null===(O=e.ConnectionHolderDetails)||void 0===O||null===(b=O[0])||void 0===b?void 0:b.address)||"",fatherOrHusbandName:(null==e||null===(L=e.ConnectionHolderDetails)||void 0===L||null===(R=L[0])||void 0===R?void 0:R.guardian)||"",gender:(null==e||null===(w=e.ConnectionHolderDetails)||void 0===w||null===(W=w[0])||void 0===W||null===(P=W.gender)||void 0===P?void 0:P.code)||"",mobileNumber:(null==e||null===(M=e.ConnectionHolderDetails)||void 0===M||null===(x=M[0])||void 0===x?void 0:x.mobileNumber)||"",name:(null==e||null===(B=e.ConnectionHolderDetails)||void 0===B||null===(F=B[0])||void 0===F?void 0:F.name)||"",ownerType:(null==e||null===(U=e.ConnectionHolderDetails)||void 0===U||null===(k=U[0])||void 0===k||null===(H=k.ownerType)||void 0===H?void 0:H.code)||"",relationship:(null==e||null===(j=e.ConnectionHolderDetails)||void 0===j||null===(z=j[0])||void 0===z||null===(V=z.relationship)||void 0===V?void 0:V.code)||"",sameAsPropertyAddress:null==e||null===(Y=e.ConnectionHolderDetails)||void 0===Y||null===(G=Y[0])||void 0===G?void 0:G.sameAsOwnerDetails,emailId:(null==e||null===(q=e.ConnectionHolderDetails)||void 0===q?void 0:q[0].emailId)||""}],service:null==e||null===(K=e.ConnectionDetails)||void 0===K||null===(X=K[0])||void 0===X||!X.water||null!=e&&null!==($=e.ConnectionDetails)&&void 0!==$&&null!==(Z=$[0])&&void 0!==Z&&Z.sewerage?null!=e&&null!==(J=e.ConnectionDetails)&&void 0!==J&&null!==(Q=J[0])&&void 0!==Q&&Q.water||null==e||null===(ee=e.ConnectionDetails)||void 0===ee||null===(ne=ee[0])||void 0===ne||!ne.sewerage?"Water And Sewerage":"Sewerage":"Water",property:null==e||null===(te=e.cpt)||void 0===te?void 0:te.details,propertyId:null==e||null===(le=e.cpt)||void 0===le||null===(oe=le.details)||void 0===oe?void 0:oe.propertyId,roadCuttingArea:null,noOfTaps:null,noOfWaterClosets:null,noOfToilets:null,additionalDetails:{initialMeterReading:null,detailsProvidedBy:"",locality:null==e||null===(ie=e.cpt)||void 0===ie||null===(ae=ie.details)||void 0===ae||null===(re=ae.address)||void 0===re||null===(ue=re.locality)||void 0===ue?void 0:ue.code},tenantId:null==e||null===(de=e.cpt)||void 0===de||null===(se=de.details)||void 0===se||null===(ce=se.address)||void 0===ce?void 0:ce.tenantId,processInstance:{action:"INITIATE"},channel:"CFC_COUNTER"};return sessionStorage.setItem("WS_DOCUMENTS_INOF",JSON.stringify(null==e||null===(ve=e.DocumentsRequired)||void 0===ve?void 0:ve.documents)),sessionStorage.setItem("WS_PROPERTY_INOF",JSON.stringify(null==e||null===(pe=e.cpt)||void 0===pe?void 0:pe.details)),ge=null!==(me=Digit)&&void 0!==me&&null!==(Ee=me.Customizations)&&void 0!==Ee&&null!==(Se=Ee.WS)&&void 0!==Se&&Se.customiseCreatePayloadOfWS?null===(_e=Digit)||void 0===_e||null===(fe=_e.Customizations)||void 0===fe||null===(Ce=fe.WS)||void 0===Ce?void 0:Ce.customiseCreatePayloadOfWS(e,ge):ge,Promise.resolve(ge)}catch(e){return Promise.reject(e)}}(e)).then(function(e){let n=!1;null!=e&&e.water&&null!=e&&e.sewerage&&(n=!0);let t={WaterConnection:e,disconnectRequest:!1,reconnectRequest:!1},l={SewerageConnection:e,disconnectRequest:!1,reconnectRequest:!1};n?(_(!0),sessionStorage.setItem("setWaterAndSewerageBoth",JSON.stringify(!0))):sessionStorage.setItem("setWaterAndSewerageBoth",JSON.stringify(!1));const o=function(){if(null!=e&&e.water&&null!=e&&e.sewerage){const e=function(){if(R&&W)return s(!0),Promise.resolve(R(t,{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(N(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){w({WaterConnection:e,disconnectRequest:!1,reconnectRequest:!1},{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(e,n){try{var t;return E({...p,waterConnection:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),Promise.resolve(W(l,{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(n,t){try{var l;return Promise.resolve(N(null==n||null===(l=n.SewerageConnections)||void 0===l?void 0:l[0],"SEWERAGE")).then(function(n){return Promise.resolve(P({SewerageConnection:n,disconnectRequest:!1,reconnectRequest:!1},{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(n,t){try{var l,o,i,r,u;return E({...p,sewerageConnection:null==n||null===(l=n.SewerageConnections)||void 0===l?void 0:l[0]}),b(),a.push("/digit-ui/employee/ws/ws-response?applicationNumber="+(null==e||null===(o=e.WaterConnection)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationNo)+"&applicationNumber1="+(null==n||null===(r=n.SewerageConnections)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.applicationNo)),Promise.resolve()}catch(e){return Promise.reject(e)}}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}catch(e){return Promise.reject(e)}}})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(e&&e.then)return e.then(function(){})}else{const n=function(){if(null==e||!e.water||null!=e&&e.sewerage){const n=function(){if(null!=e&&e.sewerage&&(null==e||!e.water)){const e=function(){if(W)return s(!0),Promise.resolve(W(l,{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(N(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){return Promise.resolve(P({SewerageConnection:e},{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:(e,n)=>{var t,l,o;E({...p,sewerageConnection:null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0]}),b(),a.push("/digit-ui/employee/ws/ws-response?applicationNumber1="+(null==e||null===(l=e.SewerageConnections)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}else{const e=function(){if(R)return s(!0),Promise.resolve(R(t,{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(N(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){w({WaterConnection:e},{onError:(e,n)=>{var t,l,o,i,a,r;s(!1),v({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(x,5e3)},onSuccess:(e,n)=>{var t,l,o;E({...p,waterConnection:null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]}),b(),a.push("/digit-ui/employee/ws/ws-response?applicationNumber="+(null==e||null===(l=e.WaterConnection)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.applicationNo))}})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(o&&o.then)return o.then(function(){})});v({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"})}())}catch(e){return Promise.reject(e)}},defaultValues:h}),c&&t.createElement(i.Toast,{isDleteBtn:!0,error:"error"===(null==c?void 0:c.key),warning:null==c?void 0:c.warning,label:e(null==c?void 0:c.message),onClose:()=>{v(null)},isWarning:null==c?void 0:c.isWarning}))},WSApplicationDetails:()=>{var e,a,r,u,d,s,c,v,p,E,S,_,f,C,N,y,T,D,A,h,O,b,L,R,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,K,X,$,Z,J,Q,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se;o.useParams();const{t:_e}=l.useTranslation(),fe=Digit.UserService.getUser(),Ce=Digit.ULBService.getCurrentTenantId(),ge=Digit.ULBService.getStateId(),[Ne,ye]=n.useState(null),[Te,De]=n.useState(null),[Ae,Ie]=n.useState(!1),[he,Oe]=(o.useHistory(),Digit.ULBService.getStateId(),window.Digit.Utils.browser.isMobile(),n.useState(!1)),[be,Le]=n.useState(!1);let Re=m(location.search);const we=null==Re?void 0:Re.applicationNumber,We=null==Re?void 0:Re.service,Pe=n.useRef();sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists");const[Me,xe,Be]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[Fe,Ue,ke]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),{isBillingServiceLoading:He}=Digit.Hooks.obps.useMDMS(ge,"BillingService",["BusinessService"]),{isCommonmastersLoading:je,data:ze}=Digit.Hooks.obps.useMDMS(ge,"common-masters",["uiCommonPay"]),{isServicesMasterLoading:Ve,data:Ye}=Digit.Hooks.ws.useMDMS(ge,"ws-services-masters",["WSEditApplicationByConfigUser"]),Ge=(null==ze||null===(e=ze["common-masters"])||void 0===e?void 0:e.uiCommonPay)||[],qe=Ge&&Ge.findIndex(e=>"WS.ONE_TIME_FEE"==e.code);let Ke="";Ke=qe>-1?Ge[qe]:Ge&&Ge.filter(e=>"DEFAULT"===e.code);const Xe=(null===(a=Ke)||void 0===a?void 0:a.receiptKey)||"consolidatedreceipt",{data:$e}=Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(),"DataSecurity",[{name:"SecurityPolicy"}],{select:e=>{var n,t;return(null==e||null===(n=e.DataSecurity)||void 0===n||null===(t=n.SecurityPolicy)||void 0===t?void 0:t.find(e=>"User"==(null==e?void 0:e.model)))||{}}});let{isLoading:Ze,data:Je}=Digit.Hooks.ws.useWSDetailsPage(_e,Ce,we,We,fe,{privacy:Digit.Utils.getPrivacyObject()}),Qe=Digit.Hooks.useWorkflowDetails({tenantId:Ce,id:we,moduleCode:null==Je||null===(r=Je.processInstancesDetails)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.businessService,config:{enabled:!(null==Je||null===(d=Je.processInstancesDetails)||void 0===d||null===(s=d[0])||void 0===s||!s.businessService),privacy:Digit.Utils.getPrivacyObject()}});const{data:en}=Digit.Hooks.useRecieptSearch({tenantId:Ce,businessService:"WATER"==We?"WS.ONE_TIME_FEE":"SW.ONE_TIME_FEE",consumerCodes:null==Je||null===(c=Je.applicationData)||void 0===c?void 0:c.applicationNo},{enabled:!(null==Je||null===(v=Je.applicationData)||void 0===v||null===(p=v.applicationType)||void 0===p||!p.includes("NEW_")),privacy:Digit.Utils.getPrivacyObject()}),{data:nn}=Digit.Hooks.ws.useOldValue({tenantId:Ce,filters:{connectionNumber:null==Je||null===(E=Je.applicationData)||void 0===E?void 0:E.connectionNo,isConnectionSearch:!0},businessService:We},{enabled:!(null==Je||null===(S=Je.applicationData)||void 0===S||null===(_=S.applicationType)||void 0===_||!_.includes("MODIFY_")),privacy:Digit.Utils.getPrivacyObject()});sessionStorage.removeItem("eyeIconClicked");const tn=[null==nn?void 0:nn.WaterConnection,null==nn?void 0:nn.SewerageConnections],ln=null==tn?void 0:tn.filter(e=>e),on=null==Je?void 0:Je.applicationData,an=null===(f=ln[0])||void 0===f?void 0:f.flatMap(e=>{const n=Object.entries(e).filter(e=>{let[n,t]=e;return(null==on?void 0:on[n])!==t});return null!=n&&n.length?Object.fromEntries(n):[]}),{mutate:rn}=Digit.Hooks.ws.useWSApplicationActions(We),un=()=>{var e,n,t,l;if("WSReconnection"==(null==Je||null===(e=Je.processInstancesDetails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.businessService)||"SWReconnection"==(null==Je||null===(t=Je.processInstancesDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.businessService))return!0;{var o,i,a,r,u,d,s,c,v,p,m,E,S;const e=null==Je||null===(o=Je.applicationData)||void 0===o?void 0:o.connectionType,n=0===(null==Je||null===(i=Je.applicationData)||void 0===i?void 0:i.noOfTaps)?null:null==Je||null===(a=Je.applicationData)||void 0===a?void 0:a.noOfTaps,t=0===(null==Je||null===(r=Je.applicationData)||void 0===r?void 0:r.pipeSize)?null:null==Je||null===(u=Je.applicationData)||void 0===u?void 0:u.pipeSize,l=null==Je||null===(d=Je.applicationData)||void 0===d?void 0:d.waterSource,_=0===(null==Je||null===(s=Je.applicationData)||void 0===s?void 0:s.noOfWaterClosets)?null:null==Je||null===(c=Je.applicationData)||void 0===c?void 0:c.noOfWaterClosets,f=0===(null==Je||null===(v=Je.applicationData)||void 0===v?void 0:v.noOfToilets)?null:null==Je||null===(p=Je.applicationData)||void 0===p?void 0:p.noOfToilets,C=null==Je||null===(m=Je.applicationData)||void 0===m||null===(E=m.additionalDetails)||void 0===E?void 0:E.detailsProvidedBy,g=null==Je||null===(S=Je.applicationData)||void 0===S?void 0:S.roadCuttingInfo;return!!(e&&(n&&t&&l||_&&f)&&C&&g)}};let dn=[],sn=(null==Je||null===(C=Je.applicationData)||void 0===C?void 0:C.applicationStatus)||"";var cn,vn;null==Qe||null===(N=Qe.data)||void 0===N||null===(y=N.actionState)||void 0===y||null===(T=y.nextActions)||void 0===T||T.forEach(e=>{if("ACTIVATE_CONNECTION"===(null==e?void 0:e.action)&&(e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:"/digit-ui/employee/ws/activate-connection?applicationNumber="+we+"&service="+We+"&action=ACTIVATE_CONNECTION",state:null==Je?void 0:Je.applicationData}),"RESUBMIT_APPLICATION"===(null==e?void 0:e.action)){var n,t,l,o;let a="/digit-ui/employee/ws/edit-application?applicationNumber="+we+"&service="+We+"&propertyId="+(null==Je||null===(n=Je.propertyDetails)||void 0===n?void 0:n.propertyId);const r=(null==Ye||null===(t=Ye["ws-services-masters"])||void 0===t?void 0:t.WSEditApplicationByConfigUser)||[],u=(null==r||null===(l=r[0])||void 0===l?void 0:l.roles)||[],d=null==r||null===(o=r[0])||void 0===o?void 0:o.status;let s=!1;var i;u.every((e,n)=>(s=w(e),!s)),s&&sn===d&&(a="/digit-ui/employee/ws/edit-application-by-config?applicationNumber="+we+"&service="+We+"&propertyId="+(null==Je||null===(i=Je.propertyDetails)||void 0===i?void 0:i.propertyId)),e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:a,state:{applicationDetails:Je,action:"RESUBMIT_APPLICATION"}}}var a;"SUBMIT_APPLICATION"===(null==e?void 0:e.action)&&(e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:"/digit-ui/employee/ws/modify-application-edit?applicationNumber="+we+"&service="+We+"&propertyId="+(null==Je||null===(a=Je.propertyDetails)||void 0===a?void 0:a.propertyId),state:Je})}),!((null==Qe||null===(D=Qe.data)||void 0===D||null===(A=D.nextActions)||void 0===A?void 0:A.length)>0&&(null==Qe||null===(h=Qe.data)||void 0===h||null===(O=h.actionState)||void 0===O||null===(b=O.nextActions)||void 0===b?void 0:b.length)>0)||null!=Qe&&null!==(L=Qe.data)&&void 0!==L&&null!==(R=L.actionState)&&void 0!==R&&null!==(W=R.nextActions)&&void 0!==W&&W.find(e=>"EDIT"===e.action)||null!=Qe&&null!==(P=Qe.data)&&void 0!==P&&null!==(M=P.actionState)&&void 0!==M&&null!==(x=M.nextActions)&&void 0!==x&&x.find(e=>"RESUBMIT_APPLICATION"===e.action)||null!=Qe&&null!==(B=Qe.data)&&void 0!==B&&null!==(F=B.actionState)&&void 0!==F&&null!==(U=F.nextActions)&&void 0!==U&&U.find(e=>"ACTIVATE_CONNECTION"===e.action)||null!=Qe&&null!==(k=Qe.data)&&void 0!==k&&null!==(H=k.actionState)&&void 0!==H&&null!==(j=H.nextActions)&&void 0!==j&&j.find(e=>"SUBMIT_APPLICATION"===e.action)||null==Qe||null===(cn=Qe.data)||void 0===cn||null===(vn=cn.nextActions)||void 0===vn||vn.forEach(e=>{"EDIT"==e.action&&Qe.data.actionState.nextActions.push(e)}),null==Qe||null===(z=Qe.data)||void 0===z||null===(V=z.actionState)||void 0===V||null===(Y=V.nextActions)||void 0===Y||Y.forEach(e=>{if("EDIT"===(null==e?void 0:e.action)){var n,t,l,o;let a="/digit-ui/employee/ws/edit-application?applicationNumber="+we+"&service="+We+"&propertyId="+(null==Je||null===(n=Je.propertyDetails)||void 0===n?void 0:n.propertyId);const r=(null==Ye||null===(t=Ye["ws-services-masters"])||void 0===t?void 0:t.WSEditApplicationByConfigUser)||[],u=(null==r||null===(l=r[0])||void 0===l?void 0:l.roles)||[],d=null==r||null===(o=r[0])||void 0===o?void 0:o.status;let s=!1;var i;u.every((e,n)=>(s=w(e),!s)),s&&sn===d&&(a="/digit-ui/employee/ws/edit-application-by-config?applicationNumber="+we+"&service="+We+"&propertyId="+(null==Je||null===(i=Je.propertyDetails)||void 0===i?void 0:i.propertyId)),e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:a,state:{applicationDetails:Je,action:"VERIFY_AND_FORWARD"}}}}),null==Qe||null===(G=Qe.data)||void 0===G||null===(K=G.nextActions)||void 0===K||K.forEach(e=>{"VERIFY_AND_FORWARD"!==(null==e?void 0:e.action)||"PENDING_FOR_FIELD_INSPECTION"!==sn||un()||(e.isToast=!0,e.toastMessage="MISSING_ADDITIONAL_DETAILS")}),null==Qe||null===(X=Qe.data)||void 0===X||null===($=X.actionState)||void 0===$||null===(Z=$.nextActions)||void 0===Z||Z.forEach(e=>{"VERIFY_AND_FORWARD"!==(null==e?void 0:e.action)||"PENDING_FOR_FIELD_INSPECTION"!==sn||un()||(e.isToast=!0,e.toastMessage="MISSING_ADDITIONAL_DETAILS")}),null==Qe||null===(J=Qe.data)||void 0===J||null===(Q=J.nextActions)||void 0===Q||Q.forEach(e=>{var n,t,l,o,i,a;"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll="WSReconnection"==(null==Qe||null===(n=Qe.data)||void 0===n||null===(t=n.processInstances)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.businessService)?{pathname:"WSReconnection/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId}:"SWReconnection"==(null==Qe||null===(o=Qe.data)||void 0===o||null===(i=o.processInstances)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.businessService)?{pathname:"SWReconnection/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId}:{pathname:I(Re)+"/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId})}),null==Qe||null===(ne=Qe.data)||void 0===ne||null===(te=ne.actionState)||void 0===te||null===(le=te.nextActions)||void 0===le||le.forEach(e=>{var n,t,l,o,i,a;console.log("workflowDetails",Qe),"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll="WSReconnection"==(null==Qe||null===(n=Qe.data)||void 0===n||null===(t=n.processInstances)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.businessService)?{pathname:"WSReconnection/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId}:"SWReconnection"==(null==Qe||null===(o=Qe.data)||void 0===o||null===(i=o.processInstances)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.businessService)?{pathname:"SWReconnection/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId}:{pathname:I(Re)+"/"+(null==Je?void 0:Je.applicationNo)+"/"+(null==Je?void 0:Je.tenantId)+"?tenantId="+(null==Je?void 0:Je.tenantId)+"&ISWSAPP&applicationNumber="+(null==Je?void 0:Je.applicationNo),state:null==Je?void 0:Je.tenantId})});const pn="WATER"===We?null==nn||null===(oe=nn.WaterConnection)||void 0===oe?void 0:oe[(null==nn||null===(ie=nn.WaterConnection)||void 0===ie?void 0:ie.length)-1]:null==nn||null===(ae=nn.SewerageConnections)||void 0===ae?void 0:ae[(null==nn||null===(re=nn.SewerageConnections)||void 0===re?void 0:re.length)-1],mn={order:1,label:_e("WS_ESTIMATION_NOTICE"),onClick:function(){try{const e=function(e,n){if(null!=Je&&null!==(e=Je.applicationData)&&void 0!==e&&null!==(n=e.additionalDetails)&&void 0!==n&&n.estimationFileStoreId){var t,l;g([null==Je||null===(t=Je.applicationData)||void 0===t||null===(l=t.additionalDetails)||void 0===l?void 0:l.estimationFileStoreId],null==Je?void 0:Je.tenantId)}else{const e=sessionStorage.getItem("WARINIG_COUNT")||"0",n=JSON.parse(e),t=function(){if(0==n){const e={applicationNumber:we};return console.log(e,"filters"),Promise.resolve(Digit.WSService.search({tenantId:null==Je?void 0:Je.tenantId,filters:{...e},businessService:"WATER"==We?"WS":"SW"})).then(function(e){var t,l,o;let i="WATER"==We?null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0]:null==e||null===(l=e.SewerageConnections)||void 0===l?void 0:l[0];var a;null!=i&&null!==(o=i.additionalDetails)&&void 0!==o&&o.estimationFileStoreId?g([null==i||null===(a=i.additionalDetails)||void 0===a?void 0:a.estimationFileStoreId],ge):(sessionStorage.setItem("WARINIG_COUNT",n?n+1:1),setTimeout(()=>{sessionStorage.setItem("WARINIG_COUNT","0")},6e4),De({isError:!1,isWarning:!0,key:"warning",message:_e("WS_WARNING_FILESTOREID_PLEASE_TRY_AGAIN_SOMETIME_LABEL")}))})}Te||De({isError:!1,isWarning:!0,key:"warning",message:_e("WS_WARNING_FILESTOREID_PLEASE_TRY_AGAIN_SOMETIME_LABEL")})}();if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}},En={order:2,label:_e("WS_SANCTION_LETTER"),onClick:()=>{var e,n;return g([null==Je||null===(e=Je.applicationData)||void 0===e||null===(n=e.additionalDetails)||void 0===n?void 0:n.sanctionFileStoreId],null==Je?void 0:Je.tenantId)}},Sn={order:3,label:_e("WS_APPLICATION"),onClick:function(){try{var e,n,t;const l=null==Je||null===(e=Je.applicationData)||void 0===e?void 0:e.tenantId;let o=null==Je?void 0:Je.applicationData;return null!=Je&&null!==(n=Je.applicationData)&&void 0!==n&&null!==(t=n.applicationType)&&void 0!==t&&t.includes("MODIFY_")?(ee({...o},{...null==Je?void 0:Je.propertyDetails},l,_e,pn).then(e=>Digit.Utils.pdf.generateModifyPdf(e)),Promise.resolve()):(q({...o},{...null==Je?void 0:Je.propertyDetails},l,_e).then(e=>Digit.Utils.pdf.generatev1(e)),Promise.resolve())}catch(e){return Promise.reject(e)}}},_n={order:4,label:_e("DOWNLOAD_RECEIPT_HEADER"),onClick:()=>{var e,n,t;return function(e,n,t,l){try{let t=null;const o=null!=n&&n.fileStoreId?(t={filestoreIds:[null==n?void 0:n.fileStoreId]},Promise.resolve(Digit.PaymentService.printReciept(e,{fileStoreIds:t.filestoreIds[0]})).then(function(e){window.open(e[t.filestoreIds[0]],"_blank")})):Promise.resolve(Digit.PaymentService.generatePdf(e,{Payments:[{...n}]},l)).then(function(n){return t=n,Promise.resolve(Digit.PaymentService.printReciept(e,{fileStoreIds:t.filestoreIds[0]})).then(function(e){var n;window.open(e[null===(n=t)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})});return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}(null!=Je&&null!==(e=Je.applicationData)&&void 0!==e&&e.tenantId?null==Je||null===(n=Je.applicationData)||void 0===n?void 0:n.tenantId:Digit.ULBService.getCurrentTenantId(),null==en||null===(t=en.Payments)||void 0===t?void 0:t[0],0,Xe)}};switch(_e("WS_APLICATION_RECEIPT"),sn){case"PENDING_FOR_DOCUMENT_VERIFICATION":case"PENDING_FOR_CITIZEN_ACTION":case"PENDING_FOR_FIELD_INSPECTION":dn=[Sn];break;case"PENDING_APPROVAL_FOR_CONNECTION":case"PENDING_FOR_PAYMENT":dn=[Sn,mn];break;case"PENDING_FOR_CONNECTION_ACTIVATION":case"CONNECTION_ACTIVATED":dn=null!=Je&&null!==(ue=Je.applicationData)&&void 0!==ue&&null!==(de=ue.applicationType)&&void 0!==de&&de.includes("NEW_")&&(null==en||null===(se=en.Payments)||void 0===se?void 0:se.length)>0?[En,mn,Sn,_n]:[En,mn,Sn];break;case"REJECTED":default:dn=[Sn]}return Digit.Hooks.useClickOutside(Pe,()=>{Oe(!1)},he),dn.sort(function(e,n){return e.order-n.order}),t.createElement(n.Fragment,null,t.createElement("div",{className:"employee-main-application-details"},t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},_e("CS_TITLE_APPLICATION_DETAILS")),t.createElement("div",{style:{display:"flex",alignItems:"center",color:"#A52A2A"}},t.createElement(i.LinkButton,{label:_e("VIEW_TIMELINE"),onClick:()=>{Le(!0);const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"})}})),dn&&dn.length>0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>Oe(!he),displayOptions:he,options:dn,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",ref:Pe})),t.createElement(Qa,{applicationDetails:Je,isLoading:Ze||He||je||Ve,isDataLoading:Ze||He||je||Ve,applicationData:null==Je?void 0:Je.applicationData,mutate:rn,id:"timeline",workflowDetails:Qe,businessService:null==Je||null===(ce=Je.processInstancesDetails)||void 0===ce||null===(ve=ce[0])||void 0===ve||null===(pe=ve.businessService)||void 0===pe?void 0:pe.toUpperCase(),moduleCode:"WS",showToast:Ne,setShowToast:ye,closeToast:()=>{ye(null)},timelineStatusPrefix:"WF_"+(null==Je||null===(me=Je.processInstancesDetails)||void 0===me||null===(Ee=me[0])||void 0===Ee||null===(Se=Ee.businessService)||void 0===Se?void 0:Se.toUpperCase())+"_",oldValue:an,isInfoLabel:!(Ze||!Digit.Utils.checkPrivacy($e,{uuid:(null==Je||null===(fn=Je.applicationData)||void 0===fn||null===(Cn=fn.connectionHolders)||void 0===Cn?void 0:Cn.uuid)||(null==Je||null===(gn=Je.propertyDetails)||void 0===gn||null===(Nn=gn.owners)||void 0===Nn||null===(yn=Nn[0])||void 0===yn?void 0:yn.uuid),fieldName:"mobileNumber",model:"User"})),clearDataDetails:()=>{Be(),xe({}),Ue({}),ke()}}),Te&&t.createElement(i.Toast,{style:{zIndex:"10000"},warning:null==Te?void 0:Te.isWarning,error:null==Te||!Te.isWarning,label:_e(null==Te?void 0:Te.message),onClose:()=>{De(null)},isDleteBtn:!0})));var fn,Cn,gn,Nn,yn},WSGetConnectionDetails:()=>{var e,a,r,u,d,s,c,v,p,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L;const{t:R}=l.useTranslation(),W=Digit.ULBService.getCurrentTenantId(),P=o.useHistory(),[M,x]=n.useState(!1),[B,U]=n.useState(null);let k=m(location.search);const H=null==k?void 0:k.applicationNumber,j=null==k?void 0:k.service,z=null==k?void 0:k.due,V=null==k?void 0:k.tenantId,[Y,G]=n.useState(!1),q=Digit.ULBService.getStateId(),K=["MODIFY_CONNECTION_BUTTON","BILL_AMENDMENT_BUTTON","DISCONNECTION_BUTTON"],{isLoading:X,data:$}=Digit.Hooks.ws.useConnectionDetail(R,W,H,j,{privacy:Digit.Utils.getPrivacyObject()}),Z=n.useRef(),J=n.useRef();sessionStorage.removeItem("IsDetailsExists"),Digit.SessionStorage.del("PT_CREATE_EMP_WS_NEW_FORM");const{data:Q}=Digit.Hooks.useDemandSearch({consumerCode:null==$||null===(e=$.applicationData)||void 0===e?void 0:e.connectionNo,businessService:"WATER"===j?"WS":"SW",tenantId:W},{enabled:!(null==$||null===(a=$.applicationData)||void 0===a||!a.applicationNo)}),[ee,ne]=n.useState(!1),[te,le]=n.useState([]),[oe,ie]=n.useState(null),ae=Digit.Hooks.ws.useToCheckPrivacyEnablement({privacy:{uuid:null!=$&&null!==(r=$.applicationData)&&void 0!==r&&null!==(u=r.applicationNo)&&void 0!==u&&u.includes("WS")?null==$||null===(d=$.applicationData)||void 0===d||null===(s=d.WaterConnection)||void 0===s||null===(c=s[0])||void 0===c||null===(v=c.connectionHolders)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.uuid:null==$||null===(E=$.applicationData)||void 0===E||null===(S=E.SewerageConnections)||void 0===S||null===(_=S[0])||void 0===_||null===(f=_.connectionHolders)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.uuid,fieldName:["connectionHoldersMobileNumber"],model:"WnSConnectionOwner"}})||!1,{mutate:re}=Digit.Hooks.ws.useWSApplicationActions(j),ue=Digit.Utils.browser.isMobile(),{data:de}=Digit.Hooks.obps.useMDMS(q,"common-masters",["uiCommonPay"]),se=(null==de||null===(g=de["common-masters"])||void 0===g?void 0:g.uiCommonPay)||[],ce=se&&se.findIndex(e=>"WS.ONE_TIME_FEE"==e.code);let ve="";ve=ce>-1?se[ce]:se&&se.filter(e=>"DEFAULT"===e.code),n.useEffect(function(){try{return Promise.resolve(Digit.PaymentService.searchAmendment(W,{consumerCode:H,businessService:"WATER"===j?"WS":"SW"})).then(function(e){le(e.Amendments)})}catch(e){return Promise.reject(e)}},[]);const pe=()=>{ie(null)};setTimeout(()=>{pe()},1e4);const me="Active"===(null==$||null===(N=$.applicationData)||void 0===N?void 0:N.status),Ee=null==$?void 0:$.isApplicationApproved;function Se(e){var n,t,l,o;"MODIFY_CONNECTION_BUTTON"===e?(()=>{var e,n,t;if(!me)return void ie({key:"error",label:"CONN_NOT_ACTIVE"});if((null==$||null===(e=$.fetchBillsData[0])||void 0===e?void 0:e.totalAmount)>0)return void ie({key:"error",label:"WS_DUE_AMOUNT_SHOULD_BE_ZERO"});let l="/digit-ui/employee/ws/modify-application?applicationNumber="+(null==$||null===(n=$.applicationData)||void 0===n?void 0:n.connectionNo)+"&service="+j+"&propertyId="+(null==$||null===(t=$.propertyDetails)||void 0===t?void 0:t.propertyId)+"&from=WS_COMMON_CONNECTION_DETAIL";P.push(""+l,JSON.stringify({data:$}))})():"BILL_AMENDMENT_BUTTON"===e?(()=>{var e,n;let t=!1;null==te||te.map(e=>{"INWORKFLOW"!==(null==e?void 0:e.status)||(t=!0)}),0!==(null==Q||null===(e=Q.Demands)||void 0===e?void 0:e.length)?t?ie({key:"error",label:"WORKFLOW_IN_PROGRESS"}):P.push("/digit-ui/employee/ws/required-documents?connectionNumber="+(null==$||null===(n=$.applicationData)||void 0===n?void 0:n.connectionNo)+"&tenantId="+V+"&service="+j,JSON.stringify({data:$})):ie({key:"error",label:"No_Bills_Found"})})():"DISCONNECTION_BUTTON"===e?Ee?(console.log("due",z,$),"ACTIVE"===(null===(l=te[0])||void 0===l?void 0:l.status)||(null==$||null===(o=$.fetchBillsData)||void 0===o?void 0:o.length)<=0||"0"==z||z<0?(Digit.SessionStorage.set("WS_DISCONNECTION",$),P.push("/digit-ui/employee/ws/new-disconnection")):ne(!0)):ie({key:"error",label:"WORKFLOW_IN_PROGRESS"}):"RESTORATION_BUTTON"===e&&(Ee?"ACTIVE"===(null===(n=te[0])||void 0===n?void 0:n.status)||(null==$||null===(t=$.fetchBillsData)||void 0===t?void 0:t.length)<=0||"0"===z?(Digit.SessionStorage.set("WS_DISCONNECTION",$),P.push("/digit-ui/employee/ws/new-restoration")):ne(!0):ie({key:"error",label:"WORKFLOW_IN_PROGRESS"}))}Digit.Hooks.useClickOutside(Z,()=>{G(!1)},Y),Digit.Hooks.useClickOutside(J,()=>{x(!1)},M);const _e="Active"===(null==$||null===(y=$.applicationData)||void 0===y?void 0:y.status)?K:K.filter(e=>"DISCONNECTION_BUTTON"!==e);let fe=[];const Ce={order:1,label:R("WS_COMMON_DOWNLOAD_BILL"),onClick:()=>function(){try{const e=function(e){if((null==$||null===(e=$.fetchBillsData)||void 0===e?void 0:e.length)>0){var n;const e="WATER"===j?"WS":"SW";let t={isConnectionSearch:!0,connectionNumber:null==$||null===(n=$.applicationData)||void 0===n?void 0:n.connectionNo};return Promise.resolve(Digit.WSService.search({tenantId:W,filters:t,businessService:e})).then(function(n){var t,l,o,i,a,r;let u={applicationNumber:"WATER"===j?null==n||null===(t=n.WaterConnection)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo:null==n||null===(o=n.SewerageConnections)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationNo,bussinessService:e};var d;((null==n||null===(a=n.WaterConnection)||void 0===a?void 0:a.length)>0||(null==n||null===(r=n.SewerageConnections)||void 0===r?void 0:r.length)>0)&&function(e,n){try{const t=Digit.ULBService.getCurrentTenantId();Promise.resolve(Digit.WSService.generateBillPdf({tenantId:t,filters:n})).then(function(n){const t=parseInt(n.status,10);201!==t&&200!==t||((e,n)=>{if(window.mSewaApp&&window.mSewaApp.isMsewaApp()&&window.mSewaApp.downloadBase64File){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){window.mSewaApp.downloadBase64File(t.result,n)}}else{const t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=n,document.body.append(t),t.click(),t.remove(),setTimeout(()=>URL.revokeObjectURL(t.href),7e3)}})(new Blob([n.data],{type:"application/pdf"}),"BILL-"+e+".pdf")})}catch(e){return Promise.reject(e)}}(null==$||null===(d=$.applicationData)||void 0===d?void 0:d.connectionNo,u)})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()},ge={order:2,label:R("WS_CONNECTION_DETAILS"),onClick:()=>function(){try{var e;const n=null==$||null===(e=$.applicationData)||void 0===e?void 0:e.tenantId;return Pi({...null==$?void 0:$.applicationData},{...null==$?void 0:$.propertyDetails},n,R).then(e=>Digit.Utils.pdf.generatev1(e)),Promise.resolve()}catch(e){return Promise.reject(e)}}()};fe=(null==$||null===(T=$.fetchBillsData)||void 0===T?void 0:T.length)>0?[Ce,ge]:[ge];const Ne=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ye=e=>t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Te=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Ne,null));return t.createElement(n.Fragment,null,t.createElement("div",null,t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},R("WS_CONNECTION_DETAILS")),fe&&fe.length>0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>G(!Y),displayOptions:Y,options:fe,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",ref:Z})),t.createElement(Qa,{applicationDetails:$,isLoading:X,isDataLoading:X,applicationData:null==$?void 0:$.applicationData,mutate:re,businessService:null==$||null===(D=$.processInstancesDetails)||void 0===D||null===(A=D[0])||void 0===A?void 0:A.businessService,moduleCode:"WS",showToast:B,setShowToast:U,closeToast:()=>{U(null)},isInfoLabel:ae,labelComponent:t.createElement(F,{t:R})}),(!w("WS_CEMP")||!me||null!=$&&$.isDisconnectionDone)&&null!=$&&null!==(I=$.applicationData)&&void 0!==I&&I.isDisconnectionTemporary&&"Active"!==(null==$||null===(h=$.applicationData)||void 0===h?void 0:h.status)&&"DISCONNECTION_EXECUTED"==(null==$||null===(O=$.applicationData)||void 0===O?void 0:O.applicationStatus)?t.createElement(i.ActionBar,null,M?t.createElement(i.Menu,{options:["RESTORATION_BUTTON"],localeKeyPrefix:"WS",t:R,onSelect:Se}):null,t.createElement(i.SubmitBar,{ref:J,label:R("WF_TAKE_ACTION"),onSubmit:()=>x(!M)})):t.createElement(i.ActionBar,null,M?t.createElement(i.Menu,{options:_e,localeKeyPrefix:"WS",t:R,onSelect:Se}):null,t.createElement(i.SubmitBar,{ref:J,label:R("WF_TAKE_ACTION"),onSubmit:()=>x(!M)})),ee?t.createElement(i.Modal,{open:ee,headerBarMain:t.createElement(ye,{label:R("WS_PENDING_DUES_LABEL")}),headerBarEnd:t.createElement(Te,{onClick:()=>ne(!1)}),center:!0,formId:"modal-action",actionCancelOnSubmit:()=>ne(!1),actionCancelLabel:R("CS_COMMON_CANCEL"),actionSaveLabel:R("WS_COMMON_COLLECT_LABEL"),actionSaveOnSubmit:()=>{P.push("/digit-ui/employee/payment/collect/"+("WATER"===j?"WS":"SW")+"/"+encodeURIComponent(H)+"/"+V+"?tenantId="+V+"&ISWSCON"),ne(!1)},popupStyles:ue?{width:"720px"}:{},style:ue?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:ue?{paddingLeft:"5px"}:{}},t.createElement("div",{className:"modal-header-ws"},R("WS_CLEAR_DUES_DISCONNECTION_SUB_HEADER_LABEL")," "),t.createElement("div",{className:"modal-body-ws"},t.createElement("span",null,R("WS_COMMON_TABLE_COL_AMT_DUE_LABEL"),": ₹",z||(null==$||null===(b=$.fetchBillsData)||void 0===b||null===(L=b[0])||void 0===L?void 0:L.totalAmount)))):null,oe&&t.createElement(i.Toast,{error:oe.key,label:R(""+oe.label),onClose:pe})))},WSActivateConnection:()=>{var e,a,r,u,d,c,v,p,E,S,_,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We,Pe,Me,xe,Be;const{t:Fe}=l.useTranslation();let{state:Ue}=o.useLocation();Ue=Ue?JSON.parse(Ue):{},o.useHistory();let ke=m(location.search);const[He,je]=n.useState(!1),[ze,Ve]=n.useState(!1),[Ye,Ge]=n.useState(null),[qe,Ke]=n.useState({}),[Xe,$e]=n.useState(!1),[Ze,Je]=t.useState({head:"",body:[]}),Qe=Digit.ULBService.getStateId();let en=Digit.ULBService.getCurrentTenantId();en||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY");let{data:nn,isLoading:tn}=Digit.Hooks.ws.useWSConfigMDMS.WSActivationConfig(Qe,{}),ln=ht(null===(e=Ue)||void 0===e?void 0:e.data),{isLoading:on,data:an}=Digit.Hooks.ws.useWSDetailsPage(Fe,en,null===(a=ln)||void 0===a?void 0:a.applicationNo,null===(r=ln)||void 0===r?void 0:r.serviceType,{privacy:Digit.Utils.getPrivacyObject()});ln=ht(an),Ue={data:{...null==an?void 0:an.applicationData}};const{mutate:rn}=Digit.Hooks.ws.useWSApplicationActions(null==ke?void 0:ke.service),un=null!==(u=Ue)&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.waterSource?ht(null===(c=Ue)||void 0===c||null===(v=c.data)||void 0===v?void 0:v.waterSource):"",dn=un?s(null==un?void 0:un.toUpperCase()," ","_"):"",sn=dn?s(null==dn?void 0:dn.toUpperCase(),".","_"):"",cn="WATER"===(null==ke?void 0:ke.service)?{connectionType:null!==(p=Ue)&&void 0!==p&&null!==(E=p.data)&&void 0!==E&&E.connectionType?{code:null===(S=Ue)||void 0===S||null===(_=S.data)||void 0===_?void 0:_.connectionType,i18nKey:"WS_CONNECTIONTYPE_"+s(null===(C=Ue)||void 0===C||null===(g=C.data)||void 0===g||null===(N=g.connectionType)||void 0===N?void 0:N.toUpperCase()," ","_")}:"",waterSource:null!==(y=Ue)&&void 0!==y&&null!==(T=y.data)&&void 0!==T&&T.waterSource?{code:null===(D=Ue)||void 0===D||null===(A=D.data)||void 0===A?void 0:A.waterSource,i18nKey:"WS_SERVICES_MASTERS_WATERSOURCE_"+s(null===(I=Ue)||void 0===I||null===(h=I.data)||void 0===h||null===(O=h.waterSource)||void 0===O||null===(b=O.split(".")[0])||void 0===b?void 0:b.toUpperCase()," ","_")}:"",sourceSubData:null!==(L=Ue)&&void 0!==L&&null!==(R=L.data)&&void 0!==R&&R.waterSource?{code:null===(w=Ue)||void 0===w||null===(W=w.data)||void 0===W?void 0:W.waterSource,i18nKey:"WS_SERVICES_MASTERS_WATERSOURCE_"+sn}:"",pipeSize:null!==(P=Ue)&&void 0!==P&&null!==(M=P.data)&&void 0!==M&&M.pipeSize?{code:null===(x=Ue)||void 0===x||null===(B=x.data)||void 0===B?void 0:B.pipeSize,i18nKey:null===(F=Ue)||void 0===F||null===(U=F.data)||void 0===U?void 0:U.pipeSize}:"",noOfTaps:(null===(k=Ue)||void 0===k||null===(H=k.data)||void 0===H?void 0:H.noOfTaps)||"",formDetails:ln}:{noOfWaterClosets:(null===(j=Ue)||void 0===j||null===(z=j.data)||void 0===z?void 0:z.noOfWaterClosets)||"",noOfToilets:(null===(V=Ue)||void 0===V||null===(Y=V.data)||void 0===Y?void 0:Y.noOfToilets)||"",formDetails:ln},vn=[{plumberName:(null===(G=Ue)||void 0===G||null===(q=G.data)||void 0===q||null===(K=q.plumberInfo)||void 0===K||null===(X=K[0])||void 0===X?void 0:X.name)||"",plumberMobileNo:(null===($=Ue)||void 0===$||null===(Z=$.data)||void 0===Z||null===(J=Z.plumberInfo)||void 0===J||null===(Q=J[0])||void 0===Q?void 0:Q.mobileNumber)||"",plumberLicenseNo:(null===(ee=Ue)||void 0===ee||null===(ne=ee.data)||void 0===ne||null===(te=ne.plumberInfo)||void 0===te||null===(le=te[0])||void 0===le?void 0:le.licenseNo)||"",detailsProvidedBy:null!==(oe=Ue)&&void 0!==oe&&null!==(ie=oe.data)&&void 0!==ie&&null!==(ae=ie.additionalDetails)&&void 0!==ae&&ae.detailsProvidedBy?{i18nKey:"WS_PLUMBER_"+(null===(re=Ue)||void 0===re||null===(ue=re.data)||void 0===ue||null===(de=ue.additionalDetails)||void 0===de||null===(se=de.detailsProvidedBy)||void 0===se?void 0:se.toUpperCase()),code:null===(ce=Ue)||void 0===ce||null===(ve=ce.data)||void 0===ve||null===(pe=ve.additionalDetails)||void 0===pe?void 0:pe.detailsProvidedBy}:"",applicationNo:null===(me=Ue)||void 0===me||null===(Ee=me.data)||void 0===Ee?void 0:Ee.applicationNo,key:Date.now()}],pn="METERED"===(null===(Se=Ue)||void 0===Se||null===(_e=Se.data)||void 0===_e||null===(fe=_e.connectionType)||void 0===fe?void 0:fe.toUpperCase())&&"WATER_RECONNECTION"!==(null===(Ce=Ue)||void 0===Ce||null===(ge=Ce.data)||void 0===ge?void 0:ge.applicationType)?[{meterId:(null===(Ne=Ue)||void 0===Ne||null===(ye=Ne.data)||void 0===ye?void 0:ye.meterId)||"",meterInstallationDate:null!==(Te=Ue)&&void 0!==Te&&null!==(De=Te.data)&&void 0!==De&&De.meterInstallationDate?f(null===(Ae=Ue)||void 0===Ae||null===(Ie=Ae.data)||void 0===Ie?void 0:Ie.meterInstallationDate):null,meterInitialReading:(null===(he=Ue)||void 0===he||null===(Oe=he.data)||void 0===Oe||null===(be=Oe.additionalDetails)||void 0===be?void 0:be.initialMeterReading)||"",connectionExecutionDate:null!==(Le=Ue)&&void 0!==Le&&null!==(Re=Le.data)&&void 0!==Re&&Re.connectionExecutionDate?f(null===(we=Ue)||void 0===we||null===(We=we.data)||void 0===We?void 0:We.connectionExecutionDate):null}]:[{connectionExecutionDate:null!==(Pe=Ue)&&void 0!==Pe&&null!==(Me=Pe.data)&&void 0!==Me&&Me.connectionExecutionDate?f(null===(xe=Ue)||void 0===xe||null===(Be=xe.data)||void 0===Be?void 0:Be.connectionExecutionDate):null}],mn={formDetails:ln,connectionDetails:[cn],plumberDetails:vn,activationDetails:pn};n.useEffect(()=>{on||Ke(ln)},[]),n.useEffect(()=>{if(!tn){const e=nn.find(e=>e.hideInCitizen);Je(e)}},[nn]),n.useEffect(()=>{const e=setTimeout(()=>{Xe&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/application-details?applicationNumber="+(null==ke?void 0:ke.applicationNumber)+"&service="+(null==ke?void 0:ke.service))},3e3);return()=>clearTimeout(e)},[Xe]);const En=function(e){try{let n=s(e,"/","-"),t="";return t=n.split("-")[2]>1900?n.split("-")[2]+"-"+n.split("-")[1]+"-"+n.split("-")[0]:n.split("-")[0]+"-"+n.split("-")[2]+"-"+n.split("-")[1],Promise.resolve(function(e,n){void 0===n&&(n="dayend");try{const t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[3]-1,t[2]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}}(t))}catch(e){return Promise.reject(e)}},Sn=()=>{Ge(null)};return ze||tn||on?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,Fe(Ze.head))),t.createElement(i.FormComposer,{config:Ze.body,userType:"employee",defaultValues:mn,onSubmit:function(e){try{const n=function(){if(He){var n,t,l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le;function oe(){var n,t,l,o;function i(){var n,t,l,o,i,a,r,u,d,s;ae.comment=(null==ie||null===(n=ie.comments)||void 0===n?void 0:n.comments)||"",ae.action=null==ke?void 0:ke.action,ae.wfDocuments=null!=e&&null!==(t=e.supportingDocuments)&&void 0!==t&&null!==(l=t[0])&&void 0!==l&&l.fileStoreId?[{documentType:"Document - 1",fileStoreId:null==e||null===(o=e.supportingDocuments)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.fileStoreId}]:[],ae.processInstance={action:null==ke?void 0:ke.action,comment:(null==ie||null===(a=ie.comments)||void 0===a?void 0:a.comments)||"",documents:null!=e&&null!==(r=e.supportingDocuments)&&void 0!==r&&null!==(u=r[0])&&void 0!==u&&u.fileStoreId?[{documentType:"Document - 1",fileStoreId:null==e||null===(d=e.supportingDocuments)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.fileStoreId}]:[]},rn&&rn("WATER"==(null==ke?void 0:ke.service)?"WATER_RECONNECTION"===(null==ae?void 0:ae.applicationType)?{WaterConnection:ae,reconnectRequest:!0,disconnectRequest:!1}:{WaterConnection:ae}:"SEWERAGE_RECONNECTION"===(null==ae?void 0:ae.applicationType)?{SewerageConnection:ae,reconnectRequest:!0,disconnectRequest:!1}:{SewerageConnection:ae},{onError:(e,n)=>{Ge({key:"error",message:null!=e&&e.message?e.message:e}),setTimeout(Sn,5e3)},onSuccess:(e,n)=>{Ge({key:!1,message:"WS_ACTIVATE_SUCCESS_MESSAGE_MAIN"}),$e(!0)}})}null!=ie&&null!==(n=ie.activationDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.meterInitialReading&&(ae.additionalDetails.initialMeterReading=null==ie||null===(l=ie.activationDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.meterInitialReading);const a=function(e,n,t,l){if(null!=ie&&null!==(e=ie.activationDetails)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.connectionExecutionDate)return Promise.resolve(En(null==ie||null===(t=ie.activationDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.connectionExecutionDate)).then(function(e){ae.connectionExecutionDate=e})}();return a&&a.then?a.then(i):i()}const ie=ht(e),ae=(null===(n=Object.keys(qe))||void 0===n?void 0:n.length)>0?{...qe}:{...null===(t=ln)||void 0===t?void 0:t.applicationData};null!=ie&&null!==(l=ie.connectionDetails)&&void 0!==l&&null!==(o=l[0])&&void 0!==o&&null!==(i=o.connectionType)&&void 0!==i&&i.code&&(ae.connectionType=null==ie||null===(a=ie.connectionDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.connectionType)||void 0===u?void 0:u.code),null!=ie&&null!==(d=ie.connectionDetails)&&void 0!==d&&null!==(s=d[0])&&void 0!==s&&null!==(c=s.waterSource)&&void 0!==c&&c.code&&(ae.waterSource=null==ie||null===(v=ie.connectionDetails)||void 0===v||null===(p=v[0])||void 0===p||null===(m=p.sourceSubData)||void 0===m?void 0:m.code),null!=ie&&null!==(E=ie.connectionDetails)&&void 0!==E&&null!==(S=E[0])&&void 0!==S&&null!==(_=S.pipeSize)&&void 0!==_&&_.size&&(ae.pipeSize=null==ie||null===(f=ie.connectionDetails)||void 0===f||null===(C=f[0])||void 0===C||null===(g=C.pipeSize)||void 0===g?void 0:g.size),null!=ie&&null!==(N=ie.connectionDetails)&&void 0!==N&&null!==(y=N[0])&&void 0!==y&&y.noOfTaps&&(ae.noOfTaps=null==ie||null===(T=ie.connectionDetails)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.noOfTaps),null!=ie&&null!==(A=ie.connectionDetails)&&void 0!==A&&null!==(I=A[0])&&void 0!==I&&I.noOfWaterClosets&&(ae.noOfWaterClosets=null==ie||null===(h=ie.connectionDetails)||void 0===h||null===(O=h[0])||void 0===O?void 0:O.noOfWaterClosets),null!=ie&&null!==(b=ie.connectionDetails)&&void 0!==b&&null!==(L=b[0])&&void 0!==L&&L.noOfToilets&&(ae.noOfToilets=null==ie||null===(R=ie.connectionDetails)||void 0===R||null===(w=R[0])||void 0===w?void 0:w.noOfToilets),null!=ie&&null!==(W=ie.plumberDetails)&&void 0!==W&&null!==(P=W[0])&&void 0!==P&&null!==(M=P.detailsProvidedBy)&&void 0!==M&&M.code&&(ae.additionalDetails.detailsProvidedBy=null==ie||null===(x=ie.plumberDetails)||void 0===x||null===(B=x[0])||void 0===B||null===(F=B.detailsProvidedBy)||void 0===F?void 0:F.code),null!=ae&&null!==(U=ae.plumberInfo)&&void 0!==U&&U[0]||"ULB"!=(null==ie||null===(k=ie.plumberDetails)||void 0===k||null===(H=k.detailsProvidedBy)||void 0===H?void 0:H.code)||(ae.plumberInfo=[{}]),null!=ie&&null!==(j=ie.plumberDetails)&&void 0!==j&&null!==(z=j[0])&&void 0!==z&&z.plumberName&&(ae.plumberInfo[0].name=null==ie||null===(V=ie.plumberDetails)||void 0===V||null===(Y=V[0])||void 0===Y?void 0:Y.plumberName),null!=ie&&null!==(G=ie.plumberDetails)&&void 0!==G&&null!==(q=G[0])&&void 0!==q&&q.plumberLicenseNo&&(ae.plumberInfo[0].licenseNo=null==ie||null===(K=ie.plumberDetails)||void 0===K||null===(X=K[0])||void 0===X?void 0:X.plumberLicenseNo),null!=ie&&null!==($=ie.plumberDetails)&&void 0!==$&&null!==(Z=$[0])&&void 0!==Z&&Z.plumberMobileNo&&(ae.plumberInfo[0].mobileNumber=null==ie||null===(J=ie.plumberDetails)||void 0===J||null===(Q=J[0])||void 0===Q?void 0:Q.plumberMobileNo),null!=ie&&null!==(ee=ie.activationDetails)&&void 0!==ee&&null!==(ne=ee[0])&&void 0!==ne&&ne.meterId&&(ae.meterId=null==ie||null===(te=ie.activationDetails)||void 0===te||null===(le=te[0])||void 0===le?void 0:le.meterId);const re=function(e,n,t,l){if(null!=ie&&null!==(e=ie.activationDetails)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.meterInstallationDate)return Promise.resolve(En(null==ie||null===(t=ie.activationDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.meterInstallationDate)).then(function(e){ae.meterInstallationDate=e})}();return re&&re.then?re.then(oe):oe()}Ge({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{Ge(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},label:Fe("WF_EMPLOYEE_NEWSW1_ACTIVATE_CONNECTION"),onFormValueChange:(e,n,t)=>{Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&Object.getPrototypeOf(t.errors)===Object.prototype?je(!0):je(!Object.keys(t.errors).length)}}),Ye&&t.createElement(i.Toast,{error:Ye.key,label:Fe(null==Ye?void 0:Ye.message),warning:null==Ye?void 0:Ye.warning,onClose:()=>{Ge(null)}}))},WSApplicationDetailsBillAmendment:()=>{var e,o,a,r,u,d,s,c,v,p,m,E;const{applicationNumber:S}=Digit.Hooks.useQueryParams(),_=Digit.ULBService.getCurrentTenantId(),{t:f}=l.useTranslation();let C="WATER";S.includes("SW")&&(C="SEWERAGE");const[g,N]=n.useState(!1),{isLoading:y,data:T}=Digit.Hooks.ws.useWSApplicationDetailsBillAmendment(f,_,S,C),D=Digit.Hooks.useWorkflowDetails({tenantId:_,id:S,moduleCode:null==T||null===(e=T.processInstancesDetails)||void 0===e||null===(o=e[0])||void 0===o?void 0:o.businessService,config:{enabled:!(null==T||null===(a=T.processInstancesDetails)||void 0===a||null===(r=a[0])||void 0===r||!r.businessService)}});null==D||null===(u=D.data)||void 0===u||null===(d=u.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s||s.forEach(e=>{if("RE-SUBMIT"===(null==e?void 0:e.action)){var n;let t="/digit-ui/employee/ws/bill-amendment?connectionNumber="+(null==T||null===(n=T.applicationData)||void 0===n?void 0:n.connectionNo)+"&tenantId="+_+"&isEdit=true";e.redirectionUrll={action:"RE-SUBMIT-APPLICATION",pathname:t,state:{applicationDetails:T,action:"RE-SUBMIT-APPLICATION"}}}});const{isError:A,error:I,isSuccess:h,mutate:O}=Digit.Hooks.ws.useApplicationActionsBillAmendUpdate();n.useEffect(()=>{g&&setTimeout(()=>N(!1),5e3)},[g]);const[b,L]=n.useState(!1),R=[{order:1,label:f("WS_ACK_PDF"),onClick:()=>function(e,n,t,l,o){try{return te(e,n,t,l).then(e=>Digit.Utils.pdf.generateBillAmendPDF(e)),Promise.resolve()}catch(e){return Promise.reject(e)}}(null==T?void 0:T.amendment,_,f,null==T?void 0:T.applicationDetails)}];return t.createElement(n.Fragment,null,t.createElement("div",{className:"employee-main-application-details"},t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},f("CS_TITLE_GENERATE_NOTE")),R&&R.length>0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>L(!b),displayOptions:b,options:R,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className"})),t.createElement(Qa,{applicationDetails:T,isLoading:y,isDataLoading:y,applicationData:null==T?void 0:T.applicationData,mutate:O,workflowDetails:D,businessService:null==T||null===(c=T.processInstancesDetails)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.businessService,moduleCode:"WS",showToast:g,setShowToast:N,closeToast:()=>N(null),timelineStatusPrefix:"WF_"+(null==T||null===(p=T.processInstancesDetails)||void 0===p||null===(m=p[0])||void 0===m||null===(E=m.businessService)||void 0===E?void 0:E.toUpperCase())+"_"})),g?t.createElement(i.Toast,{isDleteBtn:!0,error:A?"WS_APPLICATION_UPDATE_ERROR":null,label:h?null==g?void 0:g.label:null==I?void 0:I.Error}):null)},WSSearch:e=>{const[o,a]=n.useState(!0),{t:r}=l.useTranslation(),u=Digit.ULBService.getCurrentTenantId(),[d,s]=n.useState({}),c=Digit.ComponentRegistryService.getComponent("WSSearchApplication"),v=window.location.pathname.includes("water/search-application")?"WS":"SW",[p,m]=n.useState(null),E={enabled:!!(d&&Object.keys(d).length>0)},S=Digit.Hooks.ws.useSearchWS({tenantId:u,filters:d,config:E,bussinessService:v,t:r,shortAddress:!0}),_=window.Digit.Utils.browser.isMobile();return null!=S&&S.isLoading&&_?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,t.createElement(c,{t:r,tenantId:u,onSubmit:function(e){if(!(""!==e.applicationNumber||""!==e.connectionNumber||""!==e.mobileNumber||e.applicationType||e.applicationStatus||e.fromDate||e.toDate))return m({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),void setTimeout(()=>{m(!1)},3e3);var n=new Date(null==e?void 0:e.fromDate);null==n||n.setSeconds((null==n?void 0:n.getSeconds())-19800);var t=new Date(null==e?void 0:e.toDate);null==t||t.setSeconds((null==t?void 0:t.getSeconds())+86399-19800);const l={...e,...e.toDate?{toDate:null==t?void 0:t.getTime()}:{},...e.fromDate?{fromDate:null==n?void 0:n.getTime()}:{}};s(Object.keys(l).filter(e=>l[e]).reduce((e,n)=>({...e,[n]:"object"==typeof l[n]?l[n].code:l[n]}),{}))},data:0==(null==S||null===(C=S.data)||void 0===C?void 0:C.length)?{display:"ES_COMMON_NO_DATA"}:(null==S||null===(g=S.data)||void 0===g?void 0:g.length)>0?null==S?void 0:S.data:[],count:null==S?void 0:S.count,resultOk:(null==S||null===(f=S.data)||void 0===f?void 0:f.length)>0,businessService:v,isLoading:null==S?void 0:S.isLoading}),p&&t.createElement(i.Toast,{error:p.error,warning:p.warning,label:r(p.label),onClose:()=>{m(null)}}));var f,C,g},WSSearchWater:e=>{var o;const[a,r]=n.useState(!0),{t:u}=l.useTranslation(),d=Digit.ULBService.getCurrentTenantId(),[s,c]=n.useState({}),[v,p]=n.useState(!1),m=Digit.ComponentRegistryService.getComponent("WSSearchWaterConnection"),E=window.location.pathname.includes("water/search-connection")?"WS":"SW",[S,_]=n.useState(null),f=n.useCallback(e=>{const{connectionNumber:n,oldConnectionNumber:t,mobileNumber:l,propertyId:o}=e;n||t||l||o?c(Object.keys(e).filter(n=>e[n]).reduce((n,t)=>({...n,[t]:"object"==typeof e[t]?e[t].code:e[t]}),{})):(_({error:!0,label:"WS_HOME_SEARCH_CONN_RESULTS_DESC"}),setTimeout(()=>{_(!1)},3e3))}),C={enabled:!!(s&&Object.keys(s).length>0)};let g=Digit.Hooks.ws.useSearchWS({tenantId:d,filters:s,config:C,bussinessService:E,t:u,shortAddress:!0});const N=window.Digit.Utils.browser.isMobile();return null!=g&&g.isLoading&&N?t.createElement(i.Loader,null):(null!=g&&g.isLoading||(g.data=null==g||null===(o=g.data)||void 0===o?void 0:o.map(e=>{var n,t;return null!=e&&null!==(n=e.connectionNo)&&void 0!==n&&n.includes("WS")?e.service="WATER":null!=e&&null!==(t=e.connectionNo)&&void 0!==t&&t.includes("SW")&&(e.service="SEWERAGE"),e})),t.createElement(n.Fragment,null,t.createElement(m,{t:u,tenantId:d,onSubmit:f,data:0==(null==g||null===(T=g.data)||void 0===T?void 0:T.length)?{display:"ES_COMMON_NO_DATA"}:(null==g||null===(D=g.data)||void 0===D?void 0:D.length)>0?null==g?void 0:g.data:[],count:null==g?void 0:g.count,resultOk:(null==g||null===(y=g.data)||void 0===y?void 0:y.length)>0,businessService:E,isLoading:null==g?void 0:g.isLoading}),S&&t.createElement(i.Toast,{error:S.error,warning:S.warning,label:u(S.label),onClose:()=>{_(null)}})));var y,T,D},WSEditApplication:()=>{var e,a,r,u,d,s,c,v;const{t:p}=l.useTranslation();let{state:E}=o.useLocation();E=E?"string"==typeof E?JSON.parse(E):E:{},o.useHistory();let S=m(location.search);const[_,f]=n.useState(!1),[C,g]=n.useState(null),[N,y]=n.useState({}),[T,D]=n.useState({head:"",body:[]}),[A,I]=n.useState(!0),[O,b]=n.useState(!1);let L=Digit.ULBService.getCurrentTenantId();L||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY");const R=JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")),w=(null==S?void 0:S.service)||(null==R||null===(e=R.applicationData)||void 0===e?void 0:e.serviceType);let W=ht(null===(a=E)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.applicationDetails);const P=ht(null===(u=E)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.action),x=Digit.ULBService.getStateId();let{data:B,isLoading:F}=Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(x,{}),{isLoading:U,data:k}=Digit.Hooks.ws.useWSDetailsPage(p,L,null===(s=W)||void 0===s?void 0:s.applicationNo,null===(c=W)||void 0===c||null===(v=c.applicationData)||void 0===v?void 0:v.serviceType,{privacy:Digit.Utils.getPrivacyObject()});W=k;const[H,j]=n.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),[z,V,Y]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),{data:G}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:H},tenantId:L},{filters:{propertyIds:H},tenantId:L,enabled:!(!H||""==H),privacy:Digit.Utils.getPrivacyObject()});n.useEffect(()=>{if(!F){var e;const n=B.find(e=>e.hideInCitizen&&e.isEdit);n.head="WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isEditConnection&&t.push(e)}),n.body=t,D(n)}},[B]),n.useEffect(()=>{var e,n,t,l;!H&&(null==z||null===(e=z.cpt)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.propertyId)&&j(null==z||null===(t=z.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.propertyId)},[null==z?void 0:z.cpt]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n,t){if(null!==(n=W)&&void 0!==n&&null!==(t=n.applicationData)&&void 0!==t&&t.id&&!e)return sessionStorage.setItem("appData",JSON.stringify(N)),Promise.resolve(h(W,w,!1,!1,p)).then(function(e){V({...z,...e}),y({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[W,k,null==z?void 0:z.cpt,z,G]),n.useEffect(()=>{var e;V({...z,cpt:{details:null==G||null===(e=G.Properties)||void 0===e?void 0:e[0]}})},[G]),n.useEffect(()=>{var e,n,t,l,o,i,a;((null==z||null===(e=z.DocumentsRequired)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.length)>0||null!=z&&null!==(t=z.ConnectionDetails)&&void 0!==t&&null!==(l=t[0])&&void 0!==l&&l.water||null!=z&&null!==(o=z.ConnectionDetails)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.sewerage||null!=z&&null!==(a=z.cpt)&&void 0!==a&&a.details&&!U)&&I(!1)},[G,z,null==z?void 0:z.cpt]),n.useEffect(()=>{const e=setTimeout(()=>{var e,n,t,l,o;O&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/application-details?applicationNumber="+(null==z||null===(e=z.ConnectionDetails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.applicationNo)+"&service="+(null==z||null===(t=z.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.serviceName)||void 0===o?void 0:o.toUpperCase()))},5e3);return()=>clearTimeout(e)},[O]);const{mutate:q}=Digit.Hooks.ws.useWSApplicationActions(w);return A||F?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,p(T.head))),t.createElement(i.FormComposer,{config:T.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(z,n)||V({...z,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?f(!0):f(!Object.keys(t.errors).length)},label:p("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(_){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(function(e,n,t){try{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J;null==e||null===(l=e.cpt)||void 0===l||null===(o=l.details)||void 0===o||null===(i=o.owners)||void 0===i||i.forEach(e=>{null!=e&&e.permanentAddress&&(e.correspondenceAddress=null==e?void 0:e.permanentAddress)});let Q={...n.applicationData,propertyId:null==e||null===(a=e.cpt)||void 0===a||null===(r=a.details)||void 0===r?void 0:r.propertyId,proposedTaps:(null==e||null===(u=e.ConnectionDetails)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.proposedTaps)&&Number(null==e||null===(s=e.ConnectionDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.proposedTaps),proposedPipeSize:(null==e||null===(v=e.ConnectionDetails)||void 0===v||null===(p=v[0])||void 0===p||null===(m=p.proposedPipeSize)||void 0===m?void 0:m.size)&&Number(null==e||null===(E=e.ConnectionDetails)||void 0===E||null===(S=E[0])||void 0===S||null===(_=S.proposedPipeSize)||void 0===_?void 0:_.size),proposedWaterClosets:(null==e||null===(f=e.ConnectionDetails)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.proposedWaterClosets)&&Number(null==e||null===(g=e.ConnectionDetails)||void 0===g||null===(N=g[0])||void 0===N?void 0:N.proposedWaterClosets),proposedToilets:(null==e||null===(y=e.ConnectionDetails)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.proposedToilets)&&Number(null==e||null===(D=e.ConnectionDetails)||void 0===D||null===(A=D[0])||void 0===A?void 0:A.proposedToilets),connectionHolders:null!=e&&null!==(I=e.ConnectionHolderDetails)&&void 0!==I&&null!==(h=I[0])&&void 0!==h&&h.sameAsOwnerDetails?null:[{...null==n||null===(O=n.applicationData)||void 0===O||null===(b=O.connectionHolders)||void 0===b?void 0:b[0],correspondenceAddress:(null==e||null===(L=e.ConnectionHolderDetails)||void 0===L||null===(R=L[0])||void 0===R?void 0:R.address)||"",fatherOrHusbandName:(null==e||null===(w=e.ConnectionHolderDetails)||void 0===w||null===(W=w[0])||void 0===W?void 0:W.guardian)||"",gender:(null==e||null===(P=e.ConnectionHolderDetails)||void 0===P||null===(M=P[0])||void 0===M||null===(x=M.gender)||void 0===x?void 0:x.code)||"",mobileNumber:(null==e||null===(B=e.ConnectionHolderDetails)||void 0===B||null===(F=B[0])||void 0===F?void 0:F.mobileNumber)||"",name:(null==e||null===(U=e.ConnectionHolderDetails)||void 0===U||null===(k=U[0])||void 0===k?void 0:k.name)||"",emailId:(null==e||null===(H=e.ConnectionHolderDetails)||void 0===H||null===(j=H[0])||void 0===j?void 0:j.emailId)||"",ownerType:(null==e||null===(z=e.ConnectionHolderDetails)||void 0===z||null===(V=z[0])||void 0===V||null===(Y=V.ownerType)||void 0===Y?void 0:Y.code)||"",relationship:(null==e||null===(G=e.ConnectionHolderDetails)||void 0===G||null===(q=G[0])||void 0===q||null===(K=q.relationship)||void 0===K?void 0:K.code)||"",sameAsPropertyAddress:null==e||null===(X=e.ConnectionHolderDetails)||void 0===X||null===($=X[0])||void 0===$?void 0:$.sameAsOwnerDetails}],property:null==e||null===(Z=e.cpt)||void 0===Z?void 0:Z.details,processInstance:{action:t||"RESUBMIT_APPLICATION"},action:t||"RESUBMIT_APPLICATION",documents:null==e||null===(J=e.DocumentsRequired)||void 0===J?void 0:J.documents};return Promise.resolve(Q)}catch(e){return Promise.reject(e)}}(e,n,P)).then(function(t){var l,o,i,a,r,u;const d="WATER"==(null==e||null===(l=e.ConnectionDetails)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.serviceName)?{WaterConnection:t}:{SewerageConnection:t};var s;f(!1),null!=n&&null!==(i=n.processInstancesDetails)&&void 0!==i&&null!==(a=i[0])&&void 0!==a&&null!==(r=a.state)&&void 0!==r&&null!==(u=r.applicationStatus)&&void 0!==u&&u.includes("CITIZEN_ACTION")?q&&q(d,{onError:(e,n)=>{g({key:"error",message:null!=e&&e.message?e.message:e}),setTimeout(closeToastOfError,5e3),f(!0)},onSuccess:(e,n)=>{g({key:!1,message:"WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"}),b(!0)}}):(sessionStorage.setItem("redirectedfromEDIT",!0),sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS",JSON.stringify(t)),window.location.assign(""+window.location.origin+(null===(s=E)||void 0===s?void 0:s.url)))})}g({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{g(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:z,appData:N}),C&&t.createElement(i.Toast,{error:C.key,label:p(null==C?void 0:C.message),warning:null==C?void 0:C.warning,onClose:()=>{g(null)}}))},WSConsumptionDetails:e=>{var o,a,r,u,d,s,c;const{t:v}=l.useTranslation(),p=Digit.UserService.getUser(),E=(null==p||null===(o=p.info)||void 0===o?void 0:o.tenantId)||Digit.ULBService.getCurrentTenantId();let S=m(location.search);const{applicationNo:_}=Digit.Hooks.useQueryParams(),f=null==S?void 0:S.service;let C={tenantId:E,connectionNos:_};const[g,N]=n.useState(!1),[y,T]=n.useState({}),[D,A]=n.useState({}),I="WATER"===f?"WS":"SW",h=!!Digit.Utils.browser.isMobile(),[O,b]=n.useState(""),[L,R]=n.useState(null),[w,W]=n.useState(null),[P,M]=n.useState(!1),[x,B]=n.useState(""),[F,U]=n.useState(""),[k,j]=n.useState(""),[z,V]=n.useState(!1),Y=Digit.UserService.getUser().info.roles.map(e=>e.code).filter(e=>"WS_CEMP"===e||"SW_CEMP"===e).length>0,{isLoading:G,data:q}=Digit.Hooks.ws.useWSConsumptionSearch({filters:C},{filters:C}),{isLoading:K,data:X}=Digit.Hooks.ws.useGetMeterStatusList(E),{isLoading:$,data:Z}=Digit.Hooks.ws.useGetBillingPeriodValidation(E);let J={connectionNumber:_};const{isLoading:Q,data:ee}=Digit.Hooks.ws.useOldValue({tenantId:E,filters:{...J},businessService:"WS"===I?"WATER":"SEWERAGE"}),{mutate:ne}=Digit.Hooks.ws.useMeterReadingCreateAPI(I);n.useEffect(()=>{if(!Q){let e="WS"==I?null==ee?void 0:ee.WaterConnection:null==ee?void 0:ee.SewerageConnections,n=null==e?void 0:e.filter(e=>{var n;return null==e||null===(n=e.applicationType)||void 0===n?void 0:n.includes("DISCONNECT")});0==(null==n?void 0:n.length)&&V(!0),null==n||n.map(e=>{V("DISCONNECTION_EXECUTED"!==(null==e?void 0:e.applicationStatus)&&"PENDING_FOR_DISCONNECTION_EXECUTION"!==(null==e?void 0:e.applicationStatus))})}},[ee]);const te=function(e,n){void 0===n&&(n="dayend");try{const t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[2]-1,t[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}},le=(null==Z||null===(a=Z.MdmsRes)||void 0===a||null===(r=a["ws-services-masters"])||void 0===r||r.billingPeriod.filter(e=>"Metered"===e.connectionType),()=>{N(!1)}),oe=()=>{R(!1),W(null)};let ie=null==X||null===(u=X.MdmsRes)||void 0===u||null===(d=u["ws-services-calculation"])||void 0===d?void 0:d.MeterStatus.map(e=>({code:e,i18nKey:"WS_SERVICES_CALCULATION_METERSTATUS_"+Digit.Utils.locale.getTransformedLocale(e)})),ae={},re={};const ue=e=>e?new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear().toString():"NA",de=null==q?void 0:q.meterReadings,se={label:{heading:"WS_CONSUMPTION_BUTTON_METER_READING_LABEL",submit:"CORE_COMMON_SAVE",cancel:"CORE_CHANGE_TENANT_CANCEL"},form:[{body:[{populators:t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:v("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),label:""+v("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),text:k,className:"border-none"}))},{label:""+v("WS_SERV_DETAIL_METER_STAT"),isMandatory:!0,type:"dropdown",populators:t.createElement(i.Dropdown,{option:ie,autoComplete:"off",optionKey:"i18nKey",id:"meterStatus",select:e=>{b(e),U("")},selected:O,t:v})},{populators:t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),text:null==de||null===(s=de[0])||void 0===s?void 0:s.currentReading,className:"border-none"}))},{populators:t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),text:ue(null==de||null===(c=de[0])||void 0===c?void 0:c.currentReadingDate),className:"border-none"}))},{label:v("WS_CONSUMPTION_DETAILS_CURRENT_READING_LABEL"),isMandatory:"Working"===O.code,disable:"Working"!==O.code,type:"number",populators:{name:"currentReading",...ae="Working"===O.code?{}:{value:""}}},{label:v("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),isMandatory:"Working"===O.code,disable:"Working"!==O.code,type:"custom",populators:{name:"currentReadingDate",validation:{required:"Working"===O.code},customProps:{},defaultValue:Digit.Utils.date.getDate(),component:(e,n)=>t.createElement(i.DatePicker,H({onChange:e.onChange,date:e.value},n,{disabled:"Working"!==O.code}))}},{label:v("WS_SERV_DETAIL_CONSUMP"),isMandatory:!1,type:"number",disable:"Working"===O.code,populators:{...re="Working"===O.code?{name:"consumption",value:F}:{name:"consumption"}}}]}]},ce=e=>t.createElement("h1",{className:"heading-m"},e.label),ve=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),pe=e=>t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(ve,null));if(G||Q)return t.createElement(i.Loader,null);let{meterReadings:me}=q||{};return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement(i.Header,{styles:{marginLeft:"15px"}},""+v("WS_VIEW_CONSUMPTION")),t.createElement("div",null,(null==me?void 0:me.length)>0&&me.map((e,n)=>{return t.createElement("div",{key:n},t.createElement(i.Card,null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{key:v("WS_MYCONNECTIONS_CONSUMER_NO"),label:""+v("WS_MYCONNECTIONS_CONSUMER_NO"),text:(null==e?void 0:e.connectionNo)||v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),label:""+v("WS_VIEW_BILL_BILLING_PERIOD_LABEL"),text:(null==e?void 0:e.billingPeriod)||v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_METER_STATUS_LABEL"),text:(null==e?void 0:e.meterStatus)||v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_LAST_READING_LABEL"),text:(null==e?void 0:e.lastReading)||v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_LAST_READING_DATE_LABEL"),text:null!=e&&e.lastReadingDate?Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.lastReadingDate):v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_SERV_DETAIL_CUR_METER_READ"),label:""+v("WS_SERV_DETAIL_CUR_METER_READ"),text:(null==e?void 0:e.currentReading)||v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_CURRENT_READING_DATE_LABEL"),text:null!=e&&e.currentReadingDate?Digit.DateUtils.ConvertEpochToDate(null==e?void 0:e.currentReadingDate):v("NA"),className:"border-none"}),t.createElement(i.Row,{key:v("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),label:""+v("WS_CONSUMPTION_DETAILS_CONSUMPTION_LABEL"),text:(l=null==e?void 0:e.currentReading,o=null==e?void 0:e.lastReading,l&&o?Number(l-o):v("NA")),className:"border-none"}))));var l,o}),!(null!=me&&me.length)>0&&t.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},v("WS_NO_CONSUMPTION_FOUND"))),G||K||$||!Y?null:t.createElement("div",null,z&&t.createElement(i.ActionBar,null,t.createElement(i.SubmitBar,{label:v("WS_CONSUMPTION_BUTTON_METER_READING_LABEL"),onSubmit:()=>{var e,n;N(!0),T(null==q?void 0:q.meterReadings[0]),b({code:null==q||null===(e=q.meterReadings[0])||void 0===e?void 0:e.meterStatus,i18nKey:"WS_SERVICES_CALCULATION_METERSTATUS_"+Digit.Utils.locale.getTransformedLocale(null==q||null===(n=q.meterReadings[0])||void 0===n?void 0:n.meterStatus)}),j(ue(null==y?void 0:y.currentReadingDate)+" - "+ue(te(Digit.Utils.date.getDate())))}})))),g&&t.createElement(i.Modal,{headerBarMain:t.createElement(ce,{label:v(se.label.heading)}),headerBarEnd:t.createElement(pe,{onClick:le}),actionCancelLabel:v(se.label.cancel),actionCancelOnSubmit:le,actionSaveLabel:v(se.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",popupStyles:h?{width:"720px"}:{},popupModuleMianStyles:h?{paddingLeft:"5px"}:{}},P?t.createElement(i.Loader,null):t.createElement(i.FormComposer,{config:se.form,onFormValueChange:(e,n,t)=>{var l,o;"Working"===(null==O?void 0:O.code)?(B(null==n?void 0:n.currentReading),j(ue(null==y?void 0:y.currentReadingDate)+" - "+ue(null==n?void 0:n.currentReadingDate)),parseInt(x)<parseInt(null==de||null===(l=de[0])||void 0===l?void 0:l.lastReading)?(n.consumption="0",U("0")):(n.consumption=""+(parseInt(x)-parseInt(null==de||null===(o=de[0])||void 0===o?void 0:o.currentReading)),U(n.consumption))):U(n.consumption)},cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{let t=parseInt(null==y?void 0:y.currentReadingDate),l=parseInt(te(null==e?void 0:e.currentReadingDate)),o=parseInt(te(Digit.Utils.date.getDate()));if("Working"===(null==O?void 0:O.code)){var n;if(null==e||!e.currentReading||null==(null==e?void 0:e.currentReading)||""===(null==e?void 0:e.currentReading))return R({key:"error",message:v("ERR_CURRENT_READING_REQUIRED")}),W(v("ERR_CURRENT_READING_REQUIRED")),setTimeout(oe,5e3),Promise.resolve();if(l<t||l>o)return R({key:"error",message:v("ERR_CURRENT_READING_DATE_SHOULD_NOT_BE_LESS_THAN_FROM_DATE_AND_NOT_GREATER_THAN_TO_DATE")}),W(v("ERR_CURRENT_READING_DATE_SHOULD_NOT_BE_LESS_THAN_FROM_DATE_AND_NOT_GREATER_THAN_TO_DATE")),setTimeout(oe,5e3),Promise.resolve();if((null==e?void 0:e.currentReading)<=(null==de||null===(n=de[0])||void 0===n?void 0:n.currentReading))return R({key:"error",message:v("CURRENT_READING_ERROR")}),W(v("CURRENT_READING_ERROR")),setTimeout(oe,5e3),Promise.resolve()}else e.currentReading=parseInt(null==y?void 0:y.currentReading)+parseInt(null==e?void 0:e.consumption);let i={meterReadings:{billingPeriod:ue(null==y?void 0:y.currentReadingDate)+" - "+ue(null==e?void 0:e.currentReadingDate),connectionNo:null==y?void 0:y.connectionNo,currentReading:null==e?void 0:e.currentReading,currentReadingDate:te(null==e?void 0:e.currentReadingDate),lastReading:null==y?void 0:y.currentReading,lastReadingDate:null==y?void 0:y.currentReadingDate,meterStatus:null==O?void 0:O.code,tenantId:null==y?void 0:y.tenantId}};const a=function(){if(ne)return M(!0),Promise.resolve(ne(i,{onError:(e,n)=>{M(!1),N(!1),R({key:"error",message:null!=e&&e.message?e.message:e}),setTimeout(oe,5e3)},onSuccess:function(e,n){try{return M(!1),N(!1),R({key:"success",message:"WS_METER_READING_ADDED_SUCCESFULLY"}),setTimeout(oe,3e3),setTimeout(()=>{window.location.reload()},4e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})).then(function(){})}();return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:D,formId:"modal-action"})),L&&t.createElement(i.Toast,{style:{zIndex:"10000"},error:"error"===(null==L?void 0:L.key),label:v(null==L?void 0:L.message),onClose:oe}))},WSModifyApplication:()=>{var e,a,r,u;const{t:d}=l.useTranslation();let{state:s}=o.useLocation();s=s?"string"==typeof s?JSON.parse(s):s:{};const c=o.useHistory();let v=m(location.search);const[p,E]=n.useState(!1),[S,_]=n.useState(null),[f,C]=n.useState({}),[g,y]=n.useState({head:"",body:[]}),[T,D]=n.useState(!0),[A,I]=n.useState(!1),[O,b]=n.useState(!1);let L=Digit.ULBService.getCurrentTenantId();const w=null==v?void 0:v.service,W=Digit.ULBService.getStateId();let{data:P,isLoading:x}=Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(W,{}),B=ht(null===(e=s)||void 0===e?void 0:e.data),{data:F}=Digit.Hooks.ws.useWSDetailsPage(d,L,null===(a=B)||void 0===a?void 0:a.applicationNo,null===(r=B)||void 0===r||null===(u=r.applicationData)||void 0===u?void 0:u.serviceType,{privacy:Digit.Utils.getPrivacyObject()});B=F;const[U,k]=n.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),[H,j,z]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),{data:V}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:U},tenantId:L},{filters:{propertyIds:U},tenantId:L,enabled:!(!U||""==U),privacy:Digit.Utils.getPrivacyObject()});n.useEffect(()=>{if(!x){var e;const n=P.find(e=>e.hideInCitizen&&e.isModify);n.head="WS_WATER_AND_SEWERAGE_MODIFY_CONNECTION_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isModifyConnection&&t.push(e)}),t.forEach(e=>{"WS_COMMON_PROPERTY_DETAILS"==(null==e?void 0:e.head)&&(e.head="")}),n.body=t,y(n)}},[P]),n.useEffect(()=>{var e,n,t,l;!U&&(null==H||null===(e=H.cpt)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.propertyId)&&k(null==H||null===(t=H.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.propertyId)},[null==H?void 0:H.cpt]),n.useEffect(function(){try{sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists"));const e=function(e,n){if(null!==(e=B)&&void 0!==e&&null!==(n=e.applicationData)&&void 0!==n&&n.id)return Promise.resolve(h(B,w,!0,void 0,d)).then(function(e){j({...H,...e}),C({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[B,F]),n.useEffect(()=>{var e;j({...H,cpt:{details:null==V||null===(e=V.Properties)||void 0===e?void 0:e[0]}})},[V]),n.useEffect(()=>{var e,n;null!=H&&null!==(e=H.ConnectionDetails)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.applicationNo&&D(!1)},[V,H,null==H?void 0:H.cpt]),n.useEffect(()=>{const e=setTimeout(()=>{var e,n,t,l,o;A&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/application-details?applicationNumber="+(null==H||null===(e=H.ConnectionDetails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.applicationNo)+"&service="+(null==H||null===(t=H.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.serviceName)||void 0===o?void 0:o.toUpperCase()))},3e3);return()=>clearTimeout(e)},[A]);const{mutate:Y}=Digit.Hooks.ws.useWaterCreateAPI("WATER"),{mutate:G}=Digit.Hooks.ws.useWSApplicationActions("WATER"),{mutate:q}=Digit.Hooks.ws.useWaterCreateAPI("SEWERAGE"),{mutate:K}=Digit.Hooks.ws.useWSApplicationActions("SEWERAGE");return T||O||x?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,d(g.head))),t.createElement(i.FormComposer,{config:g.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(H,n)||j({...H,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?E(!0):E(!Object.keys(t.errors).length)},label:d("CS_COMMON_SUBMIT"),onSubmit:function(e){try{var n,t,l;if(!(null!=e&&null!==(n=e.cpt)&&void 0!==n&&n.id||null!=V&&null!==(t=V.Properties)&&void 0!==t&&t[0]||null!=e&&null!==(l=e.cpt)&&void 0!==l&&l.details&&V))return _({key:"error",message:"ERR_INVALID_PROPERTY_ID"}),Promise.resolve();const o=function(){if(p){var n,t;null!=e&&null!==(n=e.cpt)&&void 0!==n&&n.details||(e.cpt={details:null==V||null===(t=V.Properties)||void 0===t?void 0:t[0]});const l=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(R(e,l)).then(function(n){var t,l,o,i,a;function r(){const e=function(){if("WATER"!==w){const e=function(){if(q)return b(!0),Promise.resolve(q(u,{onError:(e,n)=>{var t,l,o,i,a,r,u,d;b(!1),_({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.message?null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.message:e}),setTimeout(closeToastOfError,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(N(null==e||null===(t=e.SewerageConnections)||void 0===t?void 0:t[0],"SEWERAGE")).then(function(e){return Promise.resolve(K({SewerageConnection:e,reconnectRequest:!1,disconnectRequest:!1},{onError:(e,n)=>{b(!1),_({key:"error",message:null!=e&&e.message?e.message:e}),setTimeout(closeToastOfError,5e3)},onSuccess:(e,n)=>{var t,l;z(),c.push("/digit-ui/employee/ws/ws-response?applicationNumber1="+(null==e||null===(t=e.SewerageConnections)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo))}})).then(function(){})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}const u="WATER"==(null==e||null===(t=e.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.serviceName)?"WATER_RECONNECTION"===(null==e||null===(o=e.ConnectionDetails)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationType)?{WaterConnection:n,reconnectRequest:!0,disconnectRequest:!1}:{WaterConnection:n,reconnectRequest:!1,disconnectRequest:!1}:"SEWERAGE_RECONNECTION"===(null===(a=formData)||void 0===a?void 0:a.applicationType)?{SewerageConnection:n,reconnectRequest:!0,disconnectRequest:!1}:{SewerageConnection:n,reconnectRequest:!1,disconnectRequest:!1},d=function(){if("WATER"==w){const e=function(){if(Y)return b(!0),Promise.resolve(Y(u,{onError:(e,n)=>{var t,l,o,i,a,r;b(!1),_({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(closeToastOfError,5e3)},onSuccess:function(e,n){try{var t;return Promise.resolve(N(null==e||null===(t=e.WaterConnection)||void 0===t?void 0:t[0],"WATER")).then(function(e){G({WaterConnection:e,reconnectRequest:!1,disconnectRequest:!1},{onError:(e,n)=>{var t,l,o,i,a,r;b(!1),_({key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&o[0].message?null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors)||void 0===r?void 0:r[0].message:e}),setTimeout(closeToastOfError,5e3)},onSuccess:(e,n)=>{var t,l;z(),c.push("/digit-ui/employee/ws/ws-response?applicationNumber="+(null==e||null===(t=e.WaterConnection)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo))}})})}catch(e){return Promise.reject(e)}}})).then(function(){})}();if(e&&e.then)return e.then(function(){})}}();return d&&d.then?d.then(r):r()})}_({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{_(!1)},3e3)}();return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:H,appData:f}),S&&t.createElement(i.Toast,{isDleteBtn:!0,error:"error"===(null==S?void 0:S.key),label:d(null==S?void 0:S.message),onClose:()=>{_(null)}}))},WSEditModifyApplication:()=>{var e;const{t:a}=l.useTranslation();let{state:r}=o.useLocation();r=r?"string"==typeof r?JSON.parse(r):r:{},o.useHistory();let u=m(location.search);const[d,s]=n.useState(!1),[c,v]=n.useState(null),[p,E]=n.useState({}),[S,_]=n.useState({head:"",body:[]}),[f,C]=n.useState(!0),[g,N]=n.useState(!1),y=Digit.ULBService.getCurrentTenantId(),T=null==u?void 0:u.service,D=ht(null===(e=r)||void 0===e?void 0:e.data),A=Digit.ULBService.getStateId();let{data:I,isLoading:O}=Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(A,{});const[b,L]=n.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),[w,W,P]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),{data:x}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:b},tenantId:y},{filters:{propertyIds:b},tenantId:y,enabled:!(!b||""==b)});n.useEffect(()=>{if(!O){var e;const n=I.find(e=>e.hideInCitizen&&e.isModify);n.head="WS_WATER_AND_SEWERAGE_MODIFY_CONNECTION_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isModifyConnection&&t.push(e)}),t.forEach(e=>{"WS_COMMON_PROPERTY_DETAILS"==(null==e?void 0:e.head)&&(e.head="")}),n.body=t,_(n)}},[I]),n.useEffect(()=>{var e,n,t,l;!b&&(null==w||null===(e=w.cpt)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.propertyId)&&L(null==w||null===(t=w.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.propertyId)},[null==w?void 0:w.cpt]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n){if(null!=D&&null!==(n=D.applicationData)&&void 0!==n&&n.id&&!e)return Promise.resolve(h(D,T,!0,!1,a)).then(function(e){W({...w,...e}),E({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[x,w,null==w?void 0:w.cpt]),n.useEffect(()=>{var e;W({...w,cpt:{details:null==x||null===(e=x.Properties)||void 0===e?void 0:e[0]}})},[x]),n.useEffect(()=>{var e,n;null!=w&&null!==(e=w.ConnectionDetails)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.applicationNo&&C(!1)},[x,w,null==w?void 0:w.cpt]),n.useEffect(()=>{const e=setTimeout(()=>{var e,n,t,l,o;g&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/application-details?applicationNumber="+(null==w||null===(e=w.ConnectionDetails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.applicationNo)+"&service="+(null==w||null===(t=w.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.serviceName)||void 0===o?void 0:o.toUpperCase())+"&mode=MODIFY")},3e3);return()=>clearTimeout(e)},[g]);const{mutate:B}=Digit.Hooks.ws.useWSApplicationActions(null==u?void 0:u.service);return f||O?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,a(S.head))),t.createElement(i.FormComposer,{config:S.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(w,n)||W({...w,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?s(!0):s(!Object.keys(t.errors).length)},label:a("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(d){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(R(e,n,"SUBMIT_APPLICATION")).then(function(n){var t,l;const o="WATER"==(null==e||null===(t=e.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.serviceName)?{WaterConnection:n}:{SewerageConnection:n};B&&B(o,{onError:(e,n)=>{v({key:"error",message:null!=e&&e.message?e.message:e}),setTimeout(closeToastOfError,5e3)},onSuccess:(e,n)=>{v({key:!1,message:"WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"}),N(!0)}})})}v({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{v(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:w}),c&&t.createElement(i.Toast,{error:c.key,label:a(null==c?void 0:c.message),onClose:()=>{v(null)},isDleteBtn:!0}))},WSDisconnectionApplication:()=>{const{t:e}=l.useTranslation(),n=o.useRouteMatch(),a=Digit.ULBService.getStateId();let{data:r,isLoading:u}=Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(a,{}),d=[];return!u&&r.length>0?(r.forEach(e=>{d=d.concat(e.body.filter(e=>!e.hideInCitizen))}),d.indexRoute="docsrequired",t.createElement(o.Switch,null,d.map((l,i)=>{const{component:a,texts:r,inputs:u,key:d,isSkipEnabled:s}=l,c="string"==typeof a?Digit.ComponentRegistryService.getComponent(a):a;return t.createElement(o.Route,{path:or(n.path,n.params)+"/"+l.route,key:i},t.createElement(c,{config:{texts:r,inputs:u,key:d,isSkipEnabled:s},t:e,userType:"employee"}))}),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:or(n.path,n.params)+"/"+d.indexRoute})))):t.createElement(i.Loader,null)},WSRestorationApplication:()=>{const{t:e}=l.useTranslation(),n=o.useRouteMatch(),a=Digit.ULBService.getStateId();let{data:r,isLoading:u}=Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(a,{}),d=[];return u?t.createElement(i.Loader,null):(r.forEach(e=>{d=d.concat(e.body.filter(e=>!e.hideInCitizen))}),d.indexRoute="new-restoration",console.log("configconfig",d),t.createElement(o.Switch,null,d.map((l,i)=>{const{texts:a,inputs:r,key:u,isSkipEnabled:d}=l,s=Digit.ComponentRegistryService.getComponent("WSRestorationForm");return t.createElement(o.Route,{path:ir(n.path,n.params)+"/new-restoration",key:i},t.createElement(s,{config:{texts:a,inputs:r,key:u,isSkipEnabled:d},t:e,userType:"employee"}))}),t.createElement(o.Route,null,t.createElement(o.Redirect,{to:ir(n.path,n.params)+"/"+d.indexRoute}))))},WSEditApplicationByConfig:()=>{var e,a,r,u,d,s,c,v;const{t:p}=l.useTranslation();let{state:E}=o.useLocation();E=E?"string"==typeof E?JSON.parse(E):E:{},o.useHistory();let S=m(location.search);const[_,f]=n.useState(!1),[C,g]=n.useState(null),[N,y]=n.useState({}),[T,D]=n.useState({head:"",body:[]}),[A,I]=n.useState(!0),[O,b]=n.useState(!1);let L=Digit.ULBService.getCurrentTenantId();L||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY");const R=JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")),w=(null==S?void 0:S.service)||(null==R||null===(e=R.applicationData)||void 0===e?void 0:e.serviceType),W=Digit.ULBService.getStateId();let{data:P,isLoading:x}=Digit.Hooks.ws.useWSConfigMDMS.WSCreateConfig(W,{}),B=ht(null===(a=E)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.applicationDetails);ht(null===(u=E)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.action);let{isLoading:F,data:U}=Digit.Hooks.ws.useWSDetailsPage(p,L,null===(s=B)||void 0===s?void 0:s.applicationNo,null===(c=B)||void 0===c||null===(v=c.applicationData)||void 0===v?void 0:v.serviceType,{privacy:Digit.Utils.getPrivacyObject()});B=U;const[k,H]=n.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),[j,z,V]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),[Y,G,q]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),{data:K}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:k},tenantId:L},{filters:{propertyIds:k},tenantId:L,enabled:!(!k||""==k),privacy:Digit.Utils.getPrivacyObject()});return n.useEffect(()=>{if(!x){var e;const n=P.find(e=>e.hideInCitizen&&e.isEditByConfig);n.head="WS_APP_FOR_WATER_AND_SEWERAGE_EDIT_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isEditByConfigConnection&&t.push(e)}),n.body=t,D(n)}},[P]),n.useEffect(()=>{var e,n,t,l;!k&&(null==j||null===(e=j.cpt)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.propertyId)&&H(null==j||null===(t=j.cpt)||void 0===t||null===(l=t.details)||void 0===l?void 0:l.propertyId)},[null==j?void 0:j.cpt]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n,t){if(null!==(n=B)&&void 0!==n&&null!==(t=n.applicationData)&&void 0!==t&&t.id&&!e)return sessionStorage.setItem("appData",JSON.stringify(N)),Promise.resolve(h(B,w,!1,!1,p)).then(function(e){z({...j,...e}),y({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[B,U,null==j?void 0:j.cpt,j,K]),n.useEffect(()=>{var e;z({...j,cpt:{details:null==K||null===(e=K.Properties)||void 0===e?void 0:e[0]}})},[K]),n.useEffect(()=>{var e,n,t,l,o,i,a;((null==j||null===(e=j.DocumentsRequired)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.length)>0||null!=j&&null!==(t=j.ConnectionDetails)&&void 0!==t&&null!==(l=t[0])&&void 0!==l&&l.water||null!=j&&null!==(o=j.ConnectionDetails)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.sewerage||null!=j&&null!==(a=j.cpt)&&void 0!==a&&a.details&&!F)&&I(!1)},[K,j,null==j?void 0:j.cpt]),n.useEffect(()=>{const e=setTimeout(()=>{var e,n,t,l,o;O&&(window.location.href=window.location.origin+"/digit-ui/employee/ws/application-details?applicationNumber="+(null==j||null===(e=j.ConnectionDetails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.applicationNo)+"&service="+(null==j||null===(t=j.ConnectionDetails)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.serviceName)||void 0===o?void 0:o.toUpperCase()))},5e3);return()=>clearTimeout(e)},[O]),Digit.Hooks.ws.useWSApplicationActions(w),A||x?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,p(T.head))),t.createElement(i.FormComposer,{config:T.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W;M.isEqual(j,n)||z({...j,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?f(!0):null!==(i=n.ConnectionDetails)&&void 0!==i&&null!==(a=i[0])&&void 0!==a&&a.water&&(""==(null===(r=n.roadCuttingDetails)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.roadType)||void 0===d?void 0:d.code)||""==(null===(s=n.roadCuttingDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.area)||""==(null===(v=n.plumberDetails)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.detailsProvidedBy)||""==(null===(m=n.connectionDetails)||void 0===m||null===(E=m[0])||void 0===E?void 0:E.connectionType)||""==(null===(S=n.connectionDetails)||void 0===S||null===(_=S[0])||void 0===_?void 0:_.waterSource)||""==(null===(C=n.connectionDetails)||void 0===C||null===(g=C[0])||void 0===g?void 0:g.sourceSubData))||null!==(N=n.ConnectionDetails)&&void 0!==N&&null!==(y=N[0])&&void 0!==y&&y.sewerage&&(""==(null===(T=n.roadCuttingDetails)||void 0===T||null===(D=T[0])||void 0===D||null===(A=D.roadType)||void 0===A?void 0:A.code)||""==(null===(I=n.roadCuttingDetails)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.area)||""==(null===(O=n.plumberDetails)||void 0===O||null===(b=O[0])||void 0===b?void 0:b.detailsProvidedBy)||""==(null===(L=n.connectionDetails)||void 0===L||null===(R=L[0])||void 0===R?void 0:R.noOfWaterClosets)||""==(null===(w=n.connectionDetails)||void 0===w||null===(W=w[0])||void 0===W?void 0:W.noOfToilets))?f(!1):f(!Object.keys(t.errors).length)},label:p("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(_){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(((e,n,t)=>{var l,o,i,a,r,u,d,s,c,v,p,m,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,w,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$,Z,J,Q,ee,ne,te,le,oe,ie,ae,re,ue,de,se,ce,ve,pe,me,Ee,Se,_e,fe,Ce,ge,Ne,ye,Te,De,Ae,Ie,he,Oe,be,Le,Re,we,We;null==e||null===(l=e.cpt)||void 0===l||null===(o=l.details)||void 0===o||null===(i=o.owners)||void 0===i||i.forEach(e=>{null!=e&&e.permanentAddress&&(e.correspondenceAddress=null==e?void 0:e.permanentAddress)});let Pe={...n.applicationData,proposedTaps:(null==e||null===(a=e.ConnectionDetails)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.proposedTaps)&&Number(null==e||null===(u=e.ConnectionDetails)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.proposedTaps),proposedPipeSize:(null==e||null===(s=e.ConnectionDetails)||void 0===s||null===(c=s[0])||void 0===c||null===(v=c.proposedPipeSize)||void 0===v?void 0:v.size)&&Number(null==e||null===(p=e.ConnectionDetails)||void 0===p||null===(m=p[0])||void 0===m||null===(E=m.proposedPipeSize)||void 0===E?void 0:E.size),proposedWaterClosets:(null==e||null===(S=e.ConnectionDetails)||void 0===S||null===(_=S[0])||void 0===_?void 0:_.proposedWaterClosets)&&Number(null==e||null===(f=e.ConnectionDetails)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.proposedWaterClosets),proposedToilets:(null==e||null===(g=e.ConnectionDetails)||void 0===g||null===(N=g[0])||void 0===N?void 0:N.proposedToilets)&&Number(null==e||null===(y=e.ConnectionDetails)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.proposedToilets),connectionHolders:null!=e&&null!==(D=e.ConnectionHolderDetails)&&void 0!==D&&null!==(A=D[0])&&void 0!==A&&A.sameAsOwnerDetails?null:[{...null==n||null===(I=n.applicationData)||void 0===I||null===(h=I.connectionHolders)||void 0===h?void 0:h[0],correspondenceAddress:(null==e||null===(O=e.ConnectionHolderDetails)||void 0===O||null===(b=O[0])||void 0===b?void 0:b.address)||"",fatherOrHusbandName:(null==e||null===(L=e.ConnectionHolderDetails)||void 0===L||null===(R=L[0])||void 0===R?void 0:R.guardian)||"",gender:(null==e||null===(w=e.ConnectionHolderDetails)||void 0===w||null===(W=w[0])||void 0===W||null===(P=W.gender)||void 0===P?void 0:P.code)||"",mobileNumber:(null==e||null===(M=e.ConnectionHolderDetails)||void 0===M||null===(x=M[0])||void 0===x?void 0:x.mobileNumber)||"",name:(null==e||null===(B=e.ConnectionHolderDetails)||void 0===B||null===(F=B[0])||void 0===F?void 0:F.name)||"",ownerType:(null==e||null===(U=e.ConnectionHolderDetails)||void 0===U||null===(k=U[0])||void 0===k||null===(H=k.ownerType)||void 0===H?void 0:H.code)||"",relationship:(null==e||null===(j=e.ConnectionHolderDetails)||void 0===j||null===(z=j[0])||void 0===z||null===(V=z.relationship)||void 0===V?void 0:V.code)||"",sameAsPropertyAddress:null==e||null===(Y=e.ConnectionHolderDetails)||void 0===Y||null===(G=Y[0])||void 0===G?void 0:G.sameAsOwnerDetails}],property:null==e||null===(q=e.cpt)||void 0===q?void 0:q.details,propertyId:null==e||null===(K=e.cpt)||void 0===K||null===(X=K.details)||void 0===X?void 0:X.propertyId,processInstance:{...null==n?void 0:n.processInstance,action:"VERIFY_AND_FORWARD"},action:"VERIFY_AND_FORWARD",documents:null==e||null===($=e.DocumentsRequired)||void 0===$?void 0:$.documents,plumberInfo:[{licenseNo:(null==e||null===(Z=e.plumberDetails)||void 0===Z||null===(J=Z[0])||void 0===J?void 0:J.plumberLicenseNo)||(null==n?void 0:n.plumberLicenseNo),name:(null==e||null===(Q=e.plumberDetails)||void 0===Q||null===(ee=Q[0])||void 0===ee?void 0:ee.plumberName)||(null==n?void 0:n.plumberName),mobileNumber:(null==e||null===(ne=e.plumberDetails)||void 0===ne||null===(te=ne[0])||void 0===te?void 0:te.plumberMobileNo)||(null==n?void 0:n.plumberMobileNo)}],roadCuttingInfo:null==e||null===(le=e.roadCuttingDetails)||void 0===le?void 0:le.filter(e=>""!=e.roadType.code).map(e=>{var n,t;return null!=e&&e.id&&null!==(null==e?void 0:e.id)?{id:null==e?void 0:e.id,roadType:null==e||null===(n=e.roadType)||void 0===n?void 0:n.code,roadCuttingArea:null==e?void 0:e.area,status:null==e?void 0:e.status}:{roadType:null==e||null===(t=e.roadType)||void 0===t?void 0:t.code,roadCuttingArea:null==e?void 0:e.area}}),connectionNo:null,..."WATER"===t?{connectionType:(null==e||null===(oe=e.connectionDetails)||void 0===oe||null===(ie=oe[0])||void 0===ie||null===(ae=ie.connectionType)||void 0===ae?void 0:ae.code)||(null==n?void 0:n.connectionType),waterSource:(null==e||null===(re=e.connectionDetails)||void 0===re||null===(ue=re[0])||void 0===ue||null===(de=ue.sourceSubData)||void 0===de?void 0:de.code)||(null==n?void 0:n.waterSource),pipeSize:(null==e||null===(se=e.connectionDetails)||void 0===se||null===(ce=se[0])||void 0===ce||null===(ve=ce.pipeSize)||void 0===ve?void 0:ve.size)||(null==n?void 0:n.pipeSize),noOfTaps:(null==e||null===(pe=e.connectionDetails)||void 0===pe||null===(me=pe[0])||void 0===me?void 0:me.noOfTaps)||(null==n?void 0:n.noOfTaps),sourceSubData:(null==e||null===(Ee=e.connectionDetails)||void 0===Ee||null===(Se=Ee[0])||void 0===Se||null===(_e=Se.sourceSubData)||void 0===_e?void 0:_e.code)||(null==n?void 0:n.sourceSubData)}:{connectionType:"Non Metered",noOfWaterClosets:(null==e||null===(fe=e.connectionDetails)||void 0===fe||null===(Ce=fe[0])||void 0===Ce?void 0:Ce.noOfWaterClosets)||(null==n?void 0:n.noOfWaterClosets)||"",noOfToilets:(null==e||null===(ge=e.connectionDetails)||void 0===ge||null===(Ne=ge[0])||void 0===Ne?void 0:Ne.noOfToilets)||(null==n?void 0:n.noOfToilets)||""},tenantId:null==e||null===(ye=e.cpt)||void 0===ye||null===(Te=ye.details)||void 0===Te?void 0:Te.tenantId};var Me,xe,Be,Fe,Ue,ke,He,je,ze,Ve,Ye,Ge,qe;return(null!=e&&null!==(De=e.plumberDetails)&&void 0!==De&&null!==(Ae=De[0])&&void 0!==Ae&&null!==(Ie=Ae.detailsProvidedBy)&&void 0!==Ie&&Ie.code||null!=n&&n.detailsProvidedBy)&&(Pe.additionalDetails.detailsProvidedBy=(null==e||null===(Me=e.plumberDetails)||void 0===Me||null===(xe=Me[0])||void 0===xe||null===(Be=xe.detailsProvidedBy)||void 0===Be?void 0:Be.code)||(null==n?void 0:n.detailsProvidedBy),Pe.additionalDetails.initialMeterReading=null),null!=e&&null!==(he=e.cpt)&&void 0!==he&&null!==(Oe=he.details)&&void 0!==Oe&&null!==(be=Oe.address)&&void 0!==be&&null!==(Le=be.locality)&&void 0!==Le&&Le.code&&(Pe.additionalDetails.locality=null==e||null===(Fe=e.cpt)||void 0===Fe||null===(Ue=Fe.details)||void 0===Ue||null===(ke=Ue.address)||void 0===ke||null===(He=ke.locality)||void 0===He?void 0:He.code),"ULB"==(null==e||null===(Re=e.plumberDetails)||void 0===Re||null===(we=Re[0])||void 0===we||null===(We=we.detailsProvidedBy)||void 0===We?void 0:We.code)&&(Pe.plumberInfo=[{licenseNo:(null==e||null===(je=e.plumberDetails)||void 0===je||null===(ze=je[0])||void 0===ze?void 0:ze.plumberLicenseNo)||(null==n?void 0:n.plumberLicenseNo),name:(null==e||null===(Ve=e.plumberDetails)||void 0===Ve||null===(Ye=Ve[0])||void 0===Ye?void 0:Ye.plumberName)||(null==n?void 0:n.plumberName),mobileNumber:(null==e||null===(Ge=e.plumberDetails)||void 0===Ge||null===(qe=Ge[0])||void 0===qe?void 0:qe.plumberMobileNo)||(null==n?void 0:n.plumberMobileNo)}]),Pe})(e,n,w)).then(function(e){var n;null!=Y&&Y.adhocPenalty&&(e.additionalDetails.adhocPenalty=parseInt(null==Y?void 0:Y.adhocPenalty)),null!=Y&&Y.adhocPenaltyComment&&(e.additionalDetails.adhocPenaltyComment=(null==Y?void 0:Y.adhocPenaltyComment)||""),null!=Y&&Y.adhocPenaltyReason&&(e.additionalDetails.adhocPenaltyReason=(null==Y?void 0:Y.adhocPenaltyReason)||""),null!=Y&&Y.adhocRebate&&(e.additionalDetails.adhocRebate=parseInt(null==Y?void 0:Y.adhocRebate)),null!=Y&&Y.adhocRebateComment&&(e.additionalDetails.adhocRebateComment=(null==Y?void 0:Y.adhocRebateComment)||""),null!=Y&&Y.adhocRebateReason&&(e.additionalDetails.adhocRebateReason=(null==Y?void 0:Y.adhocRebateReason)||""),f(!1),sessionStorage.setItem("redirectedfromEDIT",!0),sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS",JSON.stringify(e)),window.location.assign(""+window.location.origin+(null===(n=E)||void 0===n?void 0:n.url))})}g({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{g(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:j,appData:N}),C&&t.createElement(i.Toast,{error:C.key,label:p(null==C?void 0:C.message),warning:null==C?void 0:C.warning,onClose:()=>{g(null)}}))},WSGetDisconnectionDetails:()=>{var e,o,a,r,u,d,s,c,v,p,E,S,_,f,C,g,N,y,T,D,A,I,h,O,b,L,R,W,P,M,x,B,F,U,k,H,j,z,V,Y,G;const{t:q}=l.useTranslation(),K=n.useRef();let X=m(location.search);const[$,Z]=n.useState(!1),[J,Q]=n.useState(null),ee=Digit.ULBService.getCurrentTenantId(),ne=null==X?void 0:X.applicationNumber,te=null==X?void 0:X.service,le=Digit.ULBService.getStateId();sessionStorage.removeItem("Digit.PT_CREATE_EMP_WS_NEW_FORM"),sessionStorage.removeItem("IsDetailsExists"),sessionStorage.setItem("disconnectionURL",JSON.stringify({url:""+(null===(e=location)||void 0===e?void 0:e.pathname)+location.search}));let{isLoading:oe,data:ie}=Digit.Hooks.ws.useDisConnectionDetails(q,ee,ne,te,{privacy:Digit.Utils.getPrivacyObject()});const{isServicesMasterLoading:ae,data:re}=Digit.Hooks.ws.useMDMS(le,"ws-services-masters",["WSEditApplicationByConfigUser"]),ue=(null==ie||null===(o=ie.applicationData)||void 0===o?void 0:o.applicationStatus)||"";let de=Digit.Hooks.useWorkflowDetails({tenantId:ee,id:ne,moduleCode:null==ie||null===(a=ie.processInstancesDetails)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.businessService},{enabled:!(null==ie||null===(u=ie.processInstancesDetails)||void 0===u||null===(d=u[0])||void 0===d||!d.businessService)});const{mutate:se}=Digit.Hooks.ws.useWSApplicationActions(te);var ce,ve,pe,me,Ee;Digit.Hooks.useClickOutside(K,()=>{Z(!1)},$),Digit.Utils.browser.isMobile(),!((null==de||null===(s=de.data)||void 0===s||null===(c=s.nextActions)||void 0===c?void 0:c.length)>0&&(null==de||null===(v=de.data)||void 0===v||null===(p=v.actionState)||void 0===p||null===(E=p.nextActions)||void 0===E?void 0:E.length)>0)||null!=de&&null!==(S=de.data)&&void 0!==S&&null!==(_=S.actionState)&&void 0!==_&&null!==(f=_.nextActions)&&void 0!==f&&f.find(e=>"EDIT"===e.action)||null!=de&&null!==(C=de.data)&&void 0!==C&&null!==(g=C.actionState)&&void 0!==g&&null!==(N=g.nextActions)&&void 0!==N&&N.find(e=>"RESUBMIT_APPLICATION"===e.action)||null!=de&&null!==(y=de.data)&&void 0!==y&&null!==(T=y.actionState)&&void 0!==T&&null!==(D=T.nextActions)&&void 0!==D&&D.find(e=>"EXECUTE_DISCONNECTION"===e.action)||null!=de&&null!==(A=de.data)&&void 0!==A&&null!==(I=A.actionState)&&void 0!==I&&null!==(h=I.nextActions)&&void 0!==h&&h.find(e=>"SUBMIT_APPLICATION"===e.action)||null!=de&&null!==(O=de.data)&&void 0!==O&&null!==(b=O.actionState)&&void 0!==b&&null!==(L=b.nextActions)&&void 0!==L&&L.find(e=>"DISCONNECTION_EXECUTED"===e.action)||null==de||null===(ce=de.data)||void 0===ce||null===(ve=ce.nextActions)||void 0===ve||ve.forEach(e=>{"EDIT"==e.action&&de.data.actionState.nextActions.push(e)}),"DISCONNECTION_EXECUTED"==(null==ie||null===(R=ie.applicationData)||void 0===R?void 0:R.applicationStatus)&&(null!=de&&null!==(pe=de.data)&&void 0!==pe&&null!==(me=pe.actionState)&&void 0!==me&&me.nextActions&&(de.data.actionState.nextActions=[]),null!=de&&null!==(Ee=de.data)&&void 0!==Ee&&Ee.nextActions&&(de.data.nextActions=[])),null==de||null===(W=de.data)||void 0===W||null===(P=W.nextActions)||void 0===P||P.forEach(e=>{var n,t;"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:("WATER"==te?"WS":"SW")+"/"+(null==ie||null===(n=ie.applicationData)||void 0===n?void 0:n.connectionNo)+"/"+(null==ie?void 0:ie.tenantId)+"?tenantId="+(null==ie?void 0:ie.tenantId)+"&ISWSAPP&applicationNumber="+(null==ie||null===(t=ie.applicationData)||void 0===t?void 0:t.connectionNo)+"&IsDisconnectionFlow="+!0,state:null==ie?void 0:ie.tenantId})}),null==de||null===(M=de.data)||void 0===M||null===(x=M.actionState)||void 0===x||null===(B=x.nextActions)||void 0===B||B.forEach(e=>{var n,t;"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:("WATER"==te?"WS":"SW")+"/"+(null==ie||null===(n=ie.applicationData)||void 0===n?void 0:n.connectionNo)+"/"+(null==ie?void 0:ie.tenantId)+"?tenantId="+(null==ie?void 0:ie.tenantId)+"&ISWSAPP&applicationNumber="+(null==ie||null===(t=ie.applicationData)||void 0===t?void 0:t.connectionNo)+"&IsDisconnectionFlow="+!0,state:null==ie?void 0:ie.tenantId})}),null==de||null===(F=de.data)||void 0===F||null===(U=F.actionState)||void 0===U||null===(k=U.nextActions)||void 0===k||k.forEach(e=>{if("EDIT"===(null==e?void 0:e.action)){var n,t,l;let o="/digit-ui/employee/ws/edit-disconnection-application?applicationNumber="+ne+"&service="+te;const i=(null==re||null===(n=re["ws-services-masters"])||void 0===n?void 0:n.WSEditApplicationByConfigUser)||[],a=(null==i||null===(t=i[0])||void 0===t?void 0:t.roles)||[],r=null==i||null===(l=i[0])||void 0===l?void 0:l.status;let u=!1;a.every((e,n)=>(u=w(e),!u)),u&&ue===r&&(o="/digit-ui/employee/ws/config-by-disconnection-application?applicationNumber="+ne+"&service="+te),e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:o,state:{applicationDetails:ie,action:"VERIFY_AND_FORWARD"}}}"RESUBMIT_APPLICATION"===(null==e?void 0:e.action)&&(e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:"/digit-ui/employee/ws/resubmit-disconnection-application?applicationNumber="+ne+"&service="+te,state:{applicationDetails:ie,action:"VERIFY_AND_FORWARD"}})});const Se={order:1,label:q("WS_APPLICATION"),onClick:function(){try{var e;const n=null==ie||null===(e=ie.applicationData)||void 0===e?void 0:e.tenantId;return bi({...null==ie?void 0:ie.applicationData},{...null==ie?void 0:ie.propertyDetails},n,q).then(e=>Digit.Utils.pdf.generatev1(e)),Promise.resolve()}catch(e){return Promise.reject(e)}}},_e={order:2,label:q("WS_DISCONNECTION_NOTICE_LABEL"),onClick:()=>function(){try{var e,n,t;let l="ws-waterdisconnectionnotice",o={WaterConnection:[{...null==ie?void 0:ie.applicationData,property:ie.propertyDetails}]};return null!=ie&&null!==(e=ie.applicationData)&&void 0!==e&&null!==(n=e.applicationType)&&void 0!==n&&n.includes("WATER")||(l="ws-seweragedisconnectionnotice",o={SewerageConnection:[{...null==ie?void 0:ie.applicationData,property:ie.propertyDetails}]}),Promise.resolve(Digit.WSService.WSDisconnectionNotice(null==ie||null===(t=ie.applicationData)||void 0===t?void 0:t.tenantId,o,l)).then(function(e){var n;return Promise.resolve(Digit.PaymentService.printReciept(null==ie||null===(n=ie.applicationData)||void 0===n?void 0:n.tenantId,{fileStoreIds:e.filestoreIds[0]})).then(function(n){window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()};let fe=[];switch(ue){case"DISCONNECTION_EXECUTED":case"PENDING_FOR_PAYMENT":case"PENDING_FOR_DISCONNECTION_EXECUTION":fe=[Se,_e];break;default:fe=[Se]}return fe.sort(function(e,n){return e.order-n.order}),t.createElement(n.Fragment,null,t.createElement("div",null,t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,null,q("WS_APPLICATION_DETAILS")," "),t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>Z(!$),displayOptions:$,options:fe,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",ref:K})),t.createElement(Qa,{applicationDetails:ie,isLoading:oe||ae,isDataLoading:oe||ae,applicationData:null==ie?void 0:ie.applicationData,mutate:se,workflowDetails:de,businessService:null==ie||null===(H=ie.processInstancesDetails)||void 0===H||null===(j=H[0])||void 0===j||null===(z=j.businessService)||void 0===z?void 0:z.toUpperCase(),moduleCode:"WS",showToast:J,setShowToast:Q,closeToast:()=>{Q(null)},timelineStatusPrefix:"WF_"+(null==ie||null===(V=ie.processInstancesDetails)||void 0===V||null===(Y=V[0])||void 0===Y||null===(G=Y.businessService)||void 0===G?void 0:G.toUpperCase())+"_",isInfoLabel:"true"===sessionStorage.getItem("isPrivacyEnabled")})))},WSModifyApplicationDetails:()=>{var e,o,a,r,u,d,s,c,v,p,E,S,_,f,C,g,N,y,T,D,A,h,O,b,L,R,W,P,M,x,B,F,U,k,H,j,z,V,Y,G,q,K,X,$;const{t:Z}=l.useTranslation(),J=Digit.UserService.getUser(),Q=Digit.ULBService.getCurrentTenantId(),[ne,te]=n.useState(null),[le,oe]=n.useState(!1);let ie=m(location.search);const ae=null==ie?void 0:ie.applicationNumber,re=null==ie?void 0:ie.service,ue=Digit.ULBService.getStateId(),de=n.useRef();let{isLoading:se,data:ce}=Digit.Hooks.ws.useWSModifyDetailsPage(Z,Q,ae,re,J,{privacy:Digit.Utils.getPrivacyObject()});const{isServicesMasterLoading:ve,data:pe}=Digit.Hooks.ws.useMDMS(ue,"ws-services-masters",["WSEditApplicationByConfigUser"]);let me=Digit.Hooks.useWorkflowDetails({tenantId:Q,id:ae,moduleCode:null==ce||null===(e=ce.processInstancesDetails)||void 0===e||null===(o=e[0])||void 0===o?void 0:o.businessService,config:{enabled:!(null==ce||null===(a=ce.processInstancesDetails)||void 0===a||null===(r=a[0])||void 0===r||!r.businessService),privacy:Digit.Utils.getPrivacyObject()}});const{mutate:Ee}=Digit.Hooks.ws.useWSApplicationActions(re),Se=()=>{var e,n,t,l,o,i,a,r,u,d,s,c,v;const p=null==ce||null===(e=ce.applicationData)||void 0===e?void 0:e.connectionType,m=0===(null==ce||null===(n=ce.applicationData)||void 0===n?void 0:n.noOfTaps)?null:null==ce||null===(t=ce.applicationData)||void 0===t?void 0:t.noOfTaps,E=0===(null==ce||null===(l=ce.applicationData)||void 0===l?void 0:l.pipeSize)?null:null==ce||null===(o=ce.applicationData)||void 0===o?void 0:o.pipeSize,S=null==ce||null===(i=ce.applicationData)||void 0===i?void 0:i.waterSource,_=0===(null==ce||null===(a=ce.applicationData)||void 0===a?void 0:a.noOfWaterClosets)?null:null==ce||null===(r=ce.applicationData)||void 0===r?void 0:r.noOfWaterClosets,f=0===(null==ce||null===(u=ce.applicationData)||void 0===u?void 0:u.noOfToilets)?null:null==ce||null===(d=ce.applicationData)||void 0===d?void 0:d.noOfToilets,C=null==ce||null===(s=ce.applicationData)||void 0===s||null===(c=s.additionalDetails)||void 0===c?void 0:c.detailsProvidedBy,g=null==ce||null===(v=ce.applicationData)||void 0===v?void 0:v.roadCuttingInfo;return!!(p&&(m&&E&&S||_&&f)&&C&&g)};let _e=[],fe=(null==ce||null===(u=ce.applicationData)||void 0===u?void 0:u.applicationStatus)||"";var Ce,ge;null==me||null===(d=me.data)||void 0===d||null===(s=d.actionState)||void 0===s||null===(c=s.nextActions)||void 0===c||c.forEach(e=>{if("ACTIVATE_CONNECTION"===(null==e?void 0:e.action)&&(e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:"/digit-ui/employee/ws/activate-connection?applicationNumber="+ae+"&service="+re+"&action=ACTIVATE_CONNECTION",state:null==ce?void 0:ce.applicationData}),"RESUBMIT_APPLICATION"===(null==e?void 0:e.action)){var n,t,l,o;let a="/digit-ui/employee/ws/edit-application?applicationNumber="+ae+"&service="+re+"&propertyId="+(null==ce||null===(n=ce.propertyDetails)||void 0===n?void 0:n.propertyId);const r=(null==pe||null===(t=pe["ws-services-masters"])||void 0===t?void 0:t.WSEditApplicationByConfigUser)||[],u=(null==r||null===(l=r[0])||void 0===l?void 0:l.roles)||[],d=null==r||null===(o=r[0])||void 0===o?void 0:o.status;let s=!1;var i;u.every((e,n)=>(s=w(e),!s)),s&&fe===d&&(a="/digit-ui/employee/ws/edit-application-by-config?applicationNumber="+ae+"&service="+re+"&propertyId="+(null==ce||null===(i=ce.propertyDetails)||void 0===i?void 0:i.propertyId)),e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:a,state:{applicationDetails:ce,action:"RESUBMIT_APPLICATION"}}}var a;"SUBMIT_APPLICATION"===(null==e?void 0:e.action)&&(e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:"/digit-ui/employee/ws/modify-application-edit?applicationNumber="+ae+"&service="+re+"&propertyId="+(null==ce||null===(a=ce.propertyDetails)||void 0===a?void 0:a.propertyId),state:ce})}),!((null==me||null===(v=me.data)||void 0===v||null===(p=v.nextActions)||void 0===p?void 0:p.length)>0&&(null==me||null===(E=me.data)||void 0===E||null===(S=E.actionState)||void 0===S||null===(_=S.nextActions)||void 0===_?void 0:_.length)>0)||null!=me&&null!==(f=me.data)&&void 0!==f&&null!==(C=f.actionState)&&void 0!==C&&null!==(g=C.nextActions)&&void 0!==g&&g.find(e=>"EDIT"===e.action)||null!=me&&null!==(N=me.data)&&void 0!==N&&null!==(y=N.actionState)&&void 0!==y&&null!==(T=y.nextActions)&&void 0!==T&&T.find(e=>"RESUBMIT_APPLICATION"===e.action)||null!=me&&null!==(D=me.data)&&void 0!==D&&null!==(A=D.actionState)&&void 0!==A&&null!==(h=A.nextActions)&&void 0!==h&&h.find(e=>"ACTIVATE_CONNECTION"===e.action)||null!=me&&null!==(O=me.data)&&void 0!==O&&null!==(b=O.actionState)&&void 0!==b&&null!==(L=b.nextActions)&&void 0!==L&&L.find(e=>"SUBMIT_APPLICATION"===e.action)||null==me||null===(Ce=me.data)||void 0===Ce||null===(ge=Ce.nextActions)||void 0===ge||ge.forEach(e=>{"EDIT"==e.action&&me.data.actionState.nextActions.push(e)}),null==me||null===(R=me.data)||void 0===R||null===(W=R.actionState)||void 0===W||null===(P=W.nextActions)||void 0===P||P.forEach(e=>{if("EDIT"===(null==e?void 0:e.action)){var n,t,l,o;let a="/digit-ui/employee/ws/edit-application?applicationNumber="+ae+"&service="+re+"&propertyId="+(null==ce||null===(n=ce.propertyDetails)||void 0===n?void 0:n.propertyId);const r=(null==pe||null===(t=pe["ws-services-masters"])||void 0===t?void 0:t.WSEditApplicationByConfigUser)||[],u=(null==r||null===(l=r[0])||void 0===l?void 0:l.roles)||[],d=null==r||null===(o=r[0])||void 0===o?void 0:o.status;let s=!1;var i;u.every((e,n)=>(s=w(e),!s)),s&&fe===d&&(a="/digit-ui/employee/ws/edit-application-by-config?applicationNumber="+ae+"&service="+re+"&propertyId="+(null==ce||null===(i=ce.propertyDetails)||void 0===i?void 0:i.propertyId)),e.redirectionUrll={action:"ACTIVATE_CONNECTION",pathname:a,state:{applicationDetails:ce,action:"VERIFY_AND_FORWARD"}}}}),null==me||null===(M=me.data)||void 0===M||null===(x=M.nextActions)||void 0===x||x.forEach(e=>{"VERIFY_AND_FORWARD"!==(null==e?void 0:e.action)||"PENDING_FOR_FIELD_INSPECTION"!==fe||Se()||(e.isToast=!0,e.toastMessage="MISSING_ADDITIONAL_DETAILS")}),null==me||null===(B=me.data)||void 0===B||null===(F=B.actionState)||void 0===F||null===(U=F.nextActions)||void 0===U||U.forEach(e=>{"VERIFY_AND_FORWARD"!==(null==e?void 0:e.action)||"PENDING_FOR_FIELD_INSPECTION"!==fe||Se()||(e.isToast=!0,e.toastMessage="MISSING_ADDITIONAL_DETAILS")}),null==me||null===(k=me.data)||void 0===k||null===(H=k.nextActions)||void 0===H||H.forEach(e=>{"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:I(ie)+"/"+(null==ce?void 0:ce.applicationNo)+"/"+(null==ce?void 0:ce.tenantId)+"?tenantId="+(null==ce?void 0:ce.tenantId)+"&ISWSAPP&applicationNumber="+(null==ce?void 0:ce.applicationNo),state:null==ce?void 0:ce.tenantId})}),null==me||null===(j=me.data)||void 0===j||null===(z=j.actionState)||void 0===z||null===(V=z.nextActions)||void 0===V||V.forEach(e=>{"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:I(ie)+"/"+(null==ce?void 0:ce.applicationNo)+"/"+(null==ce?void 0:ce.tenantId)+"?tenantId="+(null==ce?void 0:ce.tenantId)+"&ISWSAPP&applicationNumber="+(null==ce?void 0:ce.applicationNo),state:null==ce?void 0:ce.tenantId})});const Ne={order:3,label:Z("WS_APPLICATION"),onClick:function(){try{var e;const n=null==ce||null===(e=ce.applicationData)||void 0===e?void 0:e.tenantId;return ee({...null==ce?void 0:ce.applicationData},{...null==ce?void 0:ce.propertyDetails},n,Z,null==ce?void 0:ce.oldApplication).then(e=>Digit.Utils.pdf.generateModifyPdf(e)),Promise.resolve()}catch(e){return Promise.reject(e)}}};switch(fe){case"REJECTED":default:_e=[Ne]}return Digit.Hooks.useClickOutside(de,()=>{oe(!1)},le),_e.sort(function(e,n){return e.order-n.order}),t.createElement(n.Fragment,null,t.createElement("div",{className:"employee-main-application-details"},t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},Z("CS_TITLE_APPLICATION_DETAILS")),_e&&_e.length>0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>oe(!le),displayOptions:le,options:_e,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",ref:de})),t.createElement(Qa,{applicationDetails:ce,isLoading:se||ve,isDataLoading:se||ve,applicationData:null==ce?void 0:ce.applicationData,mutate:Ee,workflowDetails:me,businessService:null==ce||null===(Y=ce.processInstancesDetails)||void 0===Y||null===(G=Y[0])||void 0===G||null===(q=G.businessService)||void 0===q?void 0:q.toUpperCase(),moduleCode:"WS",showToast:ne,setShowToast:te,closeToast:()=>{te(null)},timelineStatusPrefix:"WF_"+(null==ce||null===(K=ce.processInstancesDetails)||void 0===K||null===(X=K[0])||void 0===X||null===($=X.businessService)||void 0===$?void 0:$.toUpperCase())+"_",isInfoLabel:"true"===sessionStorage.getItem("isPrivacyEnabled")})))},WSEditDisconnectionApplication:()=>{var e,a,r,u,d,s,c;const{t:v}=l.useTranslation();let{state:p}=o.useLocation();p=p?"string"==typeof p?JSON.parse(p):p:{},m(location.search);const[E,S]=n.useState(!1),[_,f]=n.useState(null),[C,g]=n.useState({}),[N,y]=n.useState({head:"",body:[]});let T=Digit.ULBService.getCurrentTenantId();T||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"),JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));const D=Digit.ULBService.getStateId();let{data:A,isLoading:I}=Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(D,{}),h=ht(null===(e=p)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.applicationDetails);const L=ht(null===(r=p)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.action);let{isLoading:R,data:w}=Digit.Hooks.ws.useDisConnectionDetails(v,T,null===(d=h)||void 0===d?void 0:d.applicationNo,null===(s=h)||void 0===s||null===(c=s.applicationData)||void 0===c?void 0:c.serviceType,{privacy:Digit.Utils.getPrivacyObject()});h=w;const[W,P,x]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{});n.useEffect(()=>{if(!R&&!I){var e;const n=A.find(e=>e.isDisonnectionEdit);n.head="WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isDisonnectionEdit&&t.push(e)}),n.body=t,y(n)}},[w,R,A]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n,t){if(null!==(n=h)&&void 0!==n&&null!==(t=n.applicationData)&&void 0!==t&&t.id&&!e)return Promise.resolve(O(h,0,!1)).then(function(e){P({...W,...e}),g({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[h,w,W]);const B=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists"));return R||!B||I?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,v(N.head))),t.createElement(i.FormComposer,{config:N.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(W,n)||P({...W,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?S(!0):S(!Object.keys(t.errors).length)},label:v("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(E){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(b(e,n,L)).then(function(e){var n;S(!1),sessionStorage.setItem("redirectedfromEDIT",!0),sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS",JSON.stringify(e)),window.location.assign(""+window.location.origin+(null===(n=p)||void 0===n?void 0:n.url))})}f({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{f(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:W,appData:C,noBreakLine:!0}),_&&t.createElement(i.Toast,{error:_.key,label:v(null==_?void 0:_.message),warning:null==_?void 0:_.warning,onClose:()=>{f(null)}}))},WSEditDisconnectionByConfig:()=>{var e,a,r,u,d,s,c;const{t:v}=l.useTranslation();let{state:p}=o.useLocation();p=p?"string"==typeof p?JSON.parse(p):p:{},m(location.search);const[E,S]=n.useState(!1),[_,f]=n.useState(null),[C,g]=n.useState({}),[N,y]=n.useState({head:"",body:[]});let T=Digit.ULBService.getCurrentTenantId();T||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"),JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS"));const D=Digit.ULBService.getStateId();let{data:A,isLoading:I}=Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(D,{}),h=ht(null===(e=p)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.applicationDetails);const L=ht(null===(r=p)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.action);let{isLoading:R,data:w}=Digit.Hooks.ws.useDisConnectionDetails(v,T,null===(d=h)||void 0===d?void 0:d.applicationNo,null===(s=h)||void 0===s||null===(c=s.applicationData)||void 0===c?void 0:c.serviceType,{privacy:Digit.Utils.getPrivacyObject()});h=w;const[W,P,x]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{});n.useEffect(()=>{if(!R&&!I){var e;const n=A.find(e=>e.isDisonnectionEdit);n.head="WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isDisonnectionEditByConfig&&t.push(e)}),n.body=t,y(n)}},[w,R,A]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n,t){if(null!==(n=h)&&void 0!==n&&null!==(t=n.applicationData)&&void 0!==t&&t.id&&!e)return Promise.resolve(O(h,0,!0)).then(function(e){P({...W,...e}),g({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[h,w,W]);const B=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists"));return R||!B||I?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,v(N.head))),t.createElement(i.FormComposer,{config:N.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(W,n)||P({...W,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?S(!0):S(!Object.keys(t.errors).length)},label:v("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(E){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(b(e,n,L)).then(function(e){var n;S(!1),sessionStorage.setItem("redirectedfromEDIT",!0),sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS",JSON.stringify(e)),window.location.assign(""+window.location.origin+(null===(n=p)||void 0===n?void 0:n.url))})}f({warning:!0,message:"Please fill mandatory details"}),setTimeout(()=>{f(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:W,appData:C,noBreakLine:!0}),_&&t.createElement(i.Toast,{error:_.key,label:v(null==_?void 0:_.message),warning:null==_?void 0:_.warning,onClose:()=>{f(null)}}))},WSResubmitDisconnection:()=>{var e,a,r,u,d,s,c,v;const{t:p}=l.useTranslation();let{state:E}=o.useLocation();E=E?"string"==typeof E?JSON.parse(E):E:{};let S=m(location.search);const[_,f]=n.useState(!1),[C,g]=n.useState(null),[N,y]=n.useState({}),[T,D]=n.useState({head:"",body:[]}),[A,I]=n.useState(!1);let h=Digit.ULBService.getCurrentTenantId();h||Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY");const L=Digit.ULBService.getStateId();let{data:R,isLoading:w}=Digit.Hooks.ws.useWSConfigMDMS.WSDisconnectionConfig(L,{});const W=JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")),P=(null==S?void 0:S.service)||(null==W||null===(e=W.applicationData)||void 0===e?void 0:e.serviceType);let x=ht(null===(a=E)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.applicationDetails);const B=ht(null===(u=E)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.action);let{isLoading:F,data:U}=Digit.Hooks.ws.useDisConnectionDetails(p,h,null===(s=x)||void 0===s?void 0:s.applicationNo,null===(c=x)||void 0===c||null===(v=c.applicationData)||void 0===v?void 0:v.serviceType,{privacy:Digit.Utils.getPrivacyObject()});x=U;const[k,H,j]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_WS_NEW_FORM",{}),{mutate:z}=Digit.Hooks.ws.useWSApplicationActions(P);n.useEffect(()=>{if(!F&&!w){var e;const n=R.find(e=>e.isDisonnectionEdit);n.head="WS_WATER_SEWERAGE_DISCONNECTION_EDIT_LABEL";let t=[];null==n||null===(e=n.body)||void 0===e||e.forEach(e=>{null!=e&&e.isDisonnectionEdit&&t.push(e)}),n.body=t,D(n)}},[U,F,R]),n.useEffect(function(){try{const e=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists")),n=function(n,t){if(null!==(n=x)&&void 0!==n&&null!==(t=n.applicationData)&&void 0!==t&&t.id&&!e)return Promise.resolve(O(x,0,!1)).then(function(e){H({...k,...e}),y({...e}),sessionStorage.setItem("IsDetailsExists",JSON.stringify(!0))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[x,U,k]),n.useEffect(()=>{const e=setTimeout(()=>{const e=sessionStorage.getItem("disconnectionURL"),n=e?JSON.parse(e):{};A&&window.location.assign(""+window.location.origin+(null==n?void 0:n.url))},5e3);return()=>clearTimeout(e)},[A]);const V=!!sessionStorage.getItem("IsDetailsExists")&&JSON.parse(sessionStorage.getItem("IsDetailsExists"));return F||!V||w?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{style:{marginLeft:"15px"}},t.createElement(i.Header,null,p(T.head))),t.createElement(i.FormComposer,{config:T.body,userType:"employee",onFormValueChange:(e,n,t)=>{var l,o;M.isEqual(k,n)||H({...k,...n}),Object.keys(t.errors).length>0&&1==Object.keys(t.errors).length&&t.errors.owners&&0==Object.values(t.errors.owners.type).filter(e=>"required"===e.type).length&&(null==n||null===(l=n.cpt)||void 0===l||null===(o=l.details)||void 0===o||!o.propertyId)?f(!0):f(!Object.keys(t.errors).length)},label:p("CS_COMMON_SUBMIT"),onSubmit:function(e){try{const n=function(){if(_){const n=sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")?JSON.parse(sessionStorage.getItem("WS_EDIT_APPLICATION_DETAILS")):{};return Promise.resolve(b(e,n,B)).then(function(e){f(!1),sessionStorage.setItem("redirectedfromEDIT",!0),sessionStorage.setItem("WS_SESSION_APPLICATION_DETAILS",JSON.stringify(e)),e.processInstance.action="RESUBMIT_APPLICATION";let n="WATER"==e.serviceType?{WaterConnection:e}:{SewerageConnection:e};n.disconnectRequest=!0,z&&z(n,{onError:(e,n)=>{g({key:"error",message:null!=e&&e.message?e.message:e}),f(!0)},onSuccess:(e,n)=>{g({key:!1,message:"WS_APPLICATION_SUBMITTED_SUCCESSFULLY_LABEL"}),I(!0)}})})}g({warning:!0,message:"PLEASE_FILL_MANDATORY_DETAILS"}),setTimeout(()=>{g(!1)},3e3)}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},defaultValues:k,appData:N,noBreakLine:!0}),C&&t.createElement(i.Toast,{error:C.key,label:p(null==C?void 0:C.message),warning:null==C?void 0:C.warning,onClose:()=>{g(null)}}))},WSSearchWaterConnectionIntegrated:rr,WSSearchIntegrated:e=>{const[o,a]=n.useState(!0),{t:r}=l.useTranslation(),u=Digit.ULBService.getCurrentTenantId(),[d,s]=n.useState({}),[c,v]=n.useState(!1),p=Digit.ComponentRegistryService.getComponent("WSSearchWaterConnectionIntegrated"),m=window.location.pathname.includes("water/search")?"WS":"SW",[E,S]=n.useState(null),_=n.useCallback(e=>{const{connectionNumber:n,oldConnectionNumber:t,mobileNumber:l,propertyId:o}=e;n||t||l||o?s(Object.keys(e).filter(n=>e[n]).reduce((n,t)=>({...n,[t]:"object"==typeof e[t]?e[t].code:e[t]}),{})):(S({error:!0,label:"WS_HOME_SEARCH_CONN_RESULTS_DESC"}),setTimeout(()=>{S(!1)},3e3))}),f={enabled:!!(d&&Object.keys(d).length>0)};let C=Digit.Hooks.ws.useSearchWS({tenantId:u,filters:d,config:f,bussinessService:"WS",t:r,shortAddress:!0}),g=Digit.Hooks.ws.useSearchWS({tenantId:u,filters:d,config:f,bussinessService:"SW",t:r,shortAddress:!0});return window.Digit.Utils.browser.isMobile(),t.createElement(n.Fragment,null,t.createElement(p,{t:r,tenantId:u,onSubmit:_,data:0==(null==g||null===(T=g.data)||void 0===T?void 0:T.length)&&0==(null==C||null===(D=C.data)||void 0===D?void 0:D.length)?{display:"ES_COMMON_NO_CONNECTION"}:(null==C||null===(A=C.data)||void 0===A?void 0:A.length)>0&&0==(null==g||null===(I=g.data)||void 0===I?void 0:I.length)?null==C?void 0:C.data:(null==g||null===(h=g.data)||void 0===h?void 0:h.length)>0&&0==(null==C||null===(O=C.data)||void 0===O?void 0:O.length)?null==g?void 0:g.data:(null==g||null===(b=g.data)||void 0===b?void 0:b.length)>0&&(null==C||null===(L=C.data)||void 0===L?void 0:L.length)>0?[...g.data,...C.data]:[],count:10,resultOk:(null==C||null===(N=C.data)||void 0===N?void 0:N.length)>0||(null==g||null===(y=g.data)||void 0===y?void 0:y.length)>0,businessService:m}),E&&t.createElement(i.Toast,{error:E.error,warning:E.warning,label:r(E.label),onClose:()=>{S(null)}}));var N,y,T,D,A,I,h,O,b,L},WSSearchWaterConnectionViewIntegrated:e=>{let{data:l,onSubmit:o,count:i,resultOk:a}=e;return t.createElement(n.Fragment,null,t.createElement(rr,{onSubmit:o,data:l,count:i,resultOk:a}))},WSBulkBillGeneration:e=>{const[o,a]=n.useState(!0),{t:r}=l.useTranslation(),[u,d]=n.useState({}),[s,c]=n.useState(!1),v=Digit.ComponentRegistryService.getComponent("WSBulkBillSearch"),p=Digit.ULBService.getCurrentTenantId(),m=window.location.pathname.includes("water/search-connection")?"WS":"SW",[E,S]=n.useState(null),_={enabled:!!(u&&Object.keys(u).length>0)};let f=Digit.Hooks.ws.useBulkSearchWS({tenantId:p,filters:u,config:_});const C=window.Digit.Utils.browser.isMobile();return null!=f&&f.isLoading&&C?t.createElement(i.Loader,null):t.createElement(n.Fragment,null,t.createElement(v,{t:r,tenantId:p,onSubmit:e=>{var n;d({locality:null==e||null===(n=e.locality)||void 0===n?void 0:n.code})},data:(console.log("result",f),0==(null==f?void 0:f.meterReadings.length)?{display:"ES_COMMON_NO_DATA"}:(null==f?void 0:f.meterReadings.length)>0?null==f?void 0:f.meterReadings.map(e=>({billingPeriod:e.billingPeriod,connectionNo:e.connectionNo,lastReading:e.lastReading,lastReadingDate:e.lastReadingDate,meterStatus:e.meterStatus,currentReadingDate:"",currentReading:""})):[]),count:null==f?void 0:f.count,resultOk:(null==f||null===(g=f.meterReadings)||void 0===g?void 0:g.length)>0,businessService:m,isLoading:null==f?void 0:f.isLoading}),E&&t.createElement(i.Toast,{error:E.error,warning:E.warning,label:r(E.label),onClose:()=>{S(null)}}));var g}};exports.initWSComponents=()=>{Object.entries(ur).forEach(e=>{let[n,t]=e;Digit.ComponentRegistryService.setComponent(n,t)})};
