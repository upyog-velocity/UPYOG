function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("@egovernments/digit-ui-react-components"),n=require("react"),l=e(n),o=require("react-i18next"),i=require("react-router-dom"),a=require("react-hook-form"),r=require("react-query"),u=e(require("axios"));function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}let s=[];const c=e=>{let{currentStep:n=1,flow:i=""}=e;const{t:a}=o.useTranslation(),r=window.Digit.Utils.browser.isMobile();return(e=>{switch(e){case"STAKEHOLDER":s=[];break;case"PT_MUTATE":s=["PT_OWNERSHIP_INFO_SUB_HEADER","PT_MUTATION_DETAILS","CE_DOCUMENT_DETAILS","PT_COMMON_SUMMARY"];break;default:s=["ES_NEW_APPLICATION_PROPERTY_DETAILS","PT_OWNERSHIP_INFO_SUB_HEADER","CE_DOCUMENT_DETAILS","PT_COMMON_SUMMARY"]}})(i),l.createElement("div",{className:"timeline-container",style:r?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},s.map((e,o,i)=>l.createElement("div",{className:"timeline-checkpoint",key:o},l.createElement("div",{className:"timeline-content"},l.createElement("span",{className:"circle "+(o<=n-1&&"active")},o<n-1?l.createElement(t.TickMark,null):o+1),l.createElement("span",{className:"secondary-color"},a(e))),o<i.length-1&&l.createElement("span",{className:"line "+(o<n-1&&"active")}))))};var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e,t){return e(t={exports:{}},t.exports),t.exports}var v="function"==typeof Symbol&&Symbol.for,E=v?Symbol.for("react.element"):60103,T=v?Symbol.for("react.portal"):60106,y=v?Symbol.for("react.fragment"):60107,S=v?Symbol.for("react.strict_mode"):60108,f=v?Symbol.for("react.profiler"):60114,P=v?Symbol.for("react.provider"):60109,g=v?Symbol.for("react.context"):60110,N=v?Symbol.for("react.async_mode"):60111,A=v?Symbol.for("react.concurrent_mode"):60111,O=v?Symbol.for("react.forward_ref"):60112,I=v?Symbol.for("react.suspense"):60113,h=v?Symbol.for("react.suspense_list"):60120,C=v?Symbol.for("react.memo"):60115,R=v?Symbol.for("react.lazy"):60116,b=v?Symbol.for("react.block"):60121,D=v?Symbol.for("react.fundamental"):60117,L=v?Symbol.for("react.responder"):60118,M=v?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case N:case A:case y:case f:case S:case I:return e;default:switch(e=e&&e.$$typeof){case g:case O:case R:case C:case P:return e;default:return t}}case T:return t}}}function x(e){return w(e)===A}var U={AsyncMode:N,ConcurrentMode:A,ContextConsumer:g,ContextProvider:P,Element:E,ForwardRef:O,Fragment:y,Lazy:R,Memo:C,Portal:T,Profiler:f,StrictMode:S,Suspense:I,isAsyncMode:function(e){return x(e)||w(e)===N},isConcurrentMode:x,isContextConsumer:function(e){return w(e)===g},isContextProvider:function(e){return w(e)===P},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},isForwardRef:function(e){return w(e)===O},isFragment:function(e){return w(e)===y},isLazy:function(e){return w(e)===R},isMemo:function(e){return w(e)===C},isPortal:function(e){return w(e)===T},isProfiler:function(e){return w(e)===f},isStrictMode:function(e){return w(e)===S},isSuspense:function(e){return w(e)===I},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===y||e===A||e===f||e===S||e===I||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===R||e.$$typeof===C||e.$$typeof===P||e.$$typeof===g||e.$$typeof===O||e.$$typeof===D||e.$$typeof===L||e.$$typeof===M||e.$$typeof===b)},typeOf:w},F=m(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,E=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,T=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function f(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var m=e.type;switch(m){case d:case s:case o:case a:case i:case p:return m;default:var _=m&&m.$$typeof;switch(_){case u:case c:case E:case v:case r:return _;default:return t}}case l:return t}}}var P=s,g=u,N=r,A=n,O=c,I=o,h=E,C=v,R=l,b=a,D=i,L=p,M=!1;function w(e){return f(e)===s}t.AsyncMode=d,t.ConcurrentMode=P,t.ContextConsumer=g,t.ContextProvider=N,t.Element=A,t.ForwardRef=O,t.Fragment=I,t.Lazy=h,t.Memo=C,t.Portal=R,t.Profiler=b,t.StrictMode=D,t.Suspense=L,t.isAsyncMode=function(e){return M||(M=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),w(e)||f(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return f(e)===u},t.isContextProvider=function(e){return f(e)===r},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return f(e)===c},t.isFragment=function(e){return f(e)===o},t.isLazy=function(e){return f(e)===E},t.isMemo=function(e){return f(e)===v},t.isPortal=function(e){return f(e)===l},t.isProfiler=function(e){return f(e)===a},t.isStrictMode=function(e){return f(e)===i},t.isSuspense=function(e){return f(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===s||e===a||e===i||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===E||e.$$typeof===v||e.$$typeof===r||e.$$typeof===u||e.$$typeof===c||e.$$typeof===T||e.$$typeof===y||e.$$typeof===S||e.$$typeof===_)},t.typeOf=f}()}),B=m(function(e){e.exports="production"===process.env.NODE_ENV?U:F}),k=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;function W(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var j=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,o=W(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))H.call(n,a)&&(o[a]=n[a]);if(k){l=k(n);for(var r=0;r<l.length;r++)Y.call(n,l[r])&&(o[l[r]]=n[l[r]])}}return o},K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V=Function.call.bind(Object.prototype.hasOwnProperty),G=function(){};if("production"!==process.env.NODE_ENV){var z=K,X={},q=V;G=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function $(e,t,n,l,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(q(e,i)){var a;try{if("function"!=typeof e[i]){var r=Error((l||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw r.name="Invariant Violation",r}a=e[i](t,i,l,n,null,z)}catch(e){a=e}if(!a||a instanceof Error||G((l||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in X)){X[a.message]=!0;var u=o?o():"";G("Failed "+n+" type: "+a.message+(null!=u?u:""))}}}$.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(X={})};var Z=$,Q=function(){};function J(){return null}function ee(){}function te(){}"production"!==process.env.NODE_ENV&&(Q=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),te.resetWarningCache=ee;var ne=m(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,l={array:r("array"),bigint:r("bigint"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),symbol:r("symbol"),any:a(J),arrayOf:function(e){return a(function(t,n,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside arrayOf.");var r=t[n];if(!Array.isArray(r))return new i("Invalid "+o+" `"+a+"` of type `"+s(r)+"` supplied to `"+l+"`, expected an array.");for(var u=0;u<r.length;u++){var d=e(r,u,l,o,a+"["+u+"]",K);if(d instanceof Error)return d}return null})},element:a(function(t,n,l,o,a){var r=t[n];return e(r)?null:new i("Invalid "+o+" `"+a+"` of type `"+s(r)+"` supplied to `"+l+"`, expected a single ReactElement.")}),elementType:a(function(e,t,n,l,o){var a=e[t];return B.isValidElementType(a)?null:new i("Invalid "+l+" `"+o+"` of type `"+s(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(t,n,l,o,a){var r;return t[n]instanceof e?null:new i("Invalid "+o+" `"+a+"` of type `"+((r=t[n]).constructor&&r.constructor.name?r.constructor.name:"<<anonymous>>")+"` supplied to `"+l+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:a(function(e,t,n,l,o){return d(e[t])?null:new i("Invalid "+l+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(t,n,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside objectOf.");var r=t[n],u=s(r);if("object"!==u)return new i("Invalid "+o+" `"+a+"` of type `"+u+"` supplied to `"+l+"`, expected an object.");for(var d in r)if(V(r,d)){var c=e(r,d,l,o,a+"."+d,K);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Q(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),J;function t(t,n,l,a,r){for(var u=t[n],d=0;d<e.length;d++)if(o(u,e[d]))return null;var s=JSON.stringify(e,function(e,t){return"symbol"===c(t)?String(t):t});return new i("Invalid "+a+" `"+r+"` of value `"+String(u)+"` supplied to `"+l+"`, expected one of "+s+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Q("Invalid argument supplied to oneOfType, expected an instance of array."),J;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Q("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+t+"."),J}return a(function(t,n,l,o,a){for(var r=[],u=0;u<e.length;u++){var d=(0,e[u])(t,n,l,o,a,K);if(null==d)return null;d.data&&V(d.data,"expectedType")&&r.push(d.data.expectedType)}return new i("Invalid "+o+" `"+a+"` supplied to `"+l+"`"+(r.length>0?", expected one of type ["+r.join(", ")+"]":"")+".")})},shape:function(e){return a(function(t,n,l,o,a){var r=t[n],d=s(r);if("object"!==d)return new i("Invalid "+o+" `"+a+"` of type `"+d+"` supplied to `"+l+"`, expected `object`.");for(var p in e){var m=e[p];if("function"!=typeof m)return u(l,o,a,p,c(m));var v=m(r,p,l,o,a+"."+p,K);if(v)return v}return null})},exact:function(e){return a(function(t,n,l,o,a){var r=t[n],d=s(r);if("object"!==d)return new i("Invalid "+o+" `"+a+"` of type `"+d+"` supplied to `"+l+"`, expected `object`.");var p=j({},t[n],e);for(var m in p){var v=e[m];if(V(e,m)&&"function"!=typeof v)return u(l,o,a,m,c(v));if(!v)return new i("Invalid "+o+" `"+a+"` key `"+m+"` supplied to `"+l+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var E=v(r,m,l,o,a+"."+m,K);if(E)return E}return null})}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function i(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function a(e){function t(t,n,l,o,a,r,u){if(o=o||"<<anonymous>>",r=r||l,u!==K){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}return null==n[l]?t?new i(null===n[l]?"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,l,o,a,r)}process;var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){return a(function(t,n,l,o,a,r){var u=t[n];return s(u)!==e?new i("Invalid "+o+" `"+a+"` of type `"+c(u)+"` supplied to `"+l+"`, expected `"+e+"`.",{expectedType:e}):null})}function u(e,t,n,l,o){return new i((e||"React class")+": "+t+" type `"+n+"."+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function d(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var l=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!l)return!1;var o,i=l.call(t);if(l!==t.entries){for(;!(o=i.next()).done;)if(!d(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!d(a[1]))return!1}return!0;default:return!1}}function s(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function c(e){if(null==e)return""+e;var t=s(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=c(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return i.prototype=Error.prototype,l.checkPropTypes=Z,l.resetWarningCache=Z.resetWarningCache,l.PropTypes=l,l}(B.isElement):function(){function e(e,t,n,l,o,i){if(i!==K){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:te,resetWarningCache:ee};return n.PropTypes=n,n}()});const le=e=>{const t=Digit.SessionStorage.get("userType");return l.createElement(l.Fragment,null,l.createElement("textarea",{placeholder:e.placeholder,name:e.name,ref:e.inputRef,style:e.style,id:e.id,value:e.value,onChange:e.onChange,className:("citizen"!==t?"employee-card-textarea":"card-textarea")+" "+(e.disable&&"disabled")+" "+(null!=e&&e.className?null==e?void 0:e.className:""),minLength:e.minLength,maxLength:e.maxLength,autoComplete:"off",disabled:e.disabled}),l.createElement("p",{className:"cell-text"},e.hintText))};le.propTypes={userType:ne.string,name:ne.string.isRequired,ref:ne.func,value:ne.string,onChange:ne.func,id:ne.string},le.defaultProps={ref:void 0,onChange:void 0};const oe=e=>l.createElement("h2",{className:"card-label "+e.className,style:e.style},e.children),ie=e=>l.createElement("h2",{className:"card-label-error "+(null!=e&&e.className?null==e?void 0:e.className:""),style:e.style},e.children),ae=e=>{var t,o,i,a,r,u,d;const s=Digit.SessionStorage.get("userType"),[c,p]=n.useState(),m=null!=e&&e.watch?{fromDate:null==e?void 0:e.watch("fromDate"),toDate:null==e?void 0:e.watch("toDate")}:{},v=e=>{const{value:t}=e.target;p(function(e){return e?new Date(e).toLocaleString("en-In").split(",")[0]:""}(t))};return l.createElement(l.Fragment,null,l.createElement("div",{className:"text-input "+("employee"===s?"":"text-input-width")+" "+e.className,style:null!=e&&e.textInputStyle?{...e.textInputStyle}:{}},l.createElement("input",e.isMandatory?{type:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(t=e.validation)||void 0===t?void 0:t.type:e.type||"text",name:e.name,id:e.id,className:(s?"employee-card-input-error":"card-input-error")+" "+(e.disable&&"disabled"),placeholder:e.placeholder,onChange:t=>{null!=e&&e.onChange&&(null==e||e.onChange(t)),"date"===e.type&&v(t)},ref:e.inputRef,value:e.value,style:{...e.style},defaultValue:e.defaultValue,minLength:e.minlength,maxLength:e.maxlength,max:e.max,pattern:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(o=e.validation)||void 0===o?void 0:o.pattern:e.pattern,min:e.min,readOnly:e.disable,title:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(i=e.validation)||void 0===i?void 0:i.title:e.title,step:e.step,autoFocus:e.autoFocus,onBlur:e.onBlur,autoComplete:"off",disabled:e.disabled}:{type:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(a=e.validation)||void 0===a?void 0:a.type:e.type||"text",name:e.name,id:e.id,className:(s?"employee-card-input":"citizen-card-input")+" "+(e.disable&&"disabled")+" focus-visible "+(e.errorStyle&&"employee-card-input-error"),placeholder:e.placeholder,onChange:t=>{null!=e&&e.onChange&&(null==e||e.onChange(t)),"date"===e.type&&v(t)},ref:e.inputRef,value:e.value,style:{...e.style},defaultValue:e.defaultValue,minLength:e.minlength,maxLength:e.maxlength,max:e.max,required:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(r=e.validation)||void 0===r?void 0:r.isRequired:e.isRequired||"date"===e.type&&("fromDate"===e.name?m.toDate:m.fromDate),pattern:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(u=e.validation)||void 0===u?void 0:u.pattern:e.pattern,min:e.min,readOnly:e.disable,title:null!=e&&e.validation&&e.ValidationRequired?null==e||null===(d=e.validation)||void 0===d?void 0:d.title:e.title,step:e.step,autoFocus:e.autoFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress,autoComplete:"off",disabled:e.disabled}),e.signature?e.signatureImg:null))};ae.propTypes={userType:ne.string,isMandatory:ne.bool,name:ne.string,placeholder:ne.string,onChange:ne.func,ref:ne.func,value:ne.any},ae.defaultProps={isMandatory:!1};const re=e=>{var t;let{onClick:n,style:o,children:a,className:r,ReactRef:u,...s}=e;const{pathname:c}=i.useLocation(),p=Digit.Hooks.fsm.useRouteSubscription(c),m=null===(t=Digit.UserService.getUser())||void 0===t?void 0:t.info;return l.createElement("div",d({className:("employee"===p||"EMPLOYEE"===(null==m?void 0:m.type)?"employeeCard":"card")+" "+(r||""),onClick:n,style:o},s,{ref:u}),a)},ue=e=>l.createElement("header",{className:"card-header",style:e.styles?e.styles:{}},e.children),de=e=>l.createElement("p",{className:"card-text "+(e.disable&&"disabled")+" "+(null!=e&&e.className?null==e?void 0:e.className:""),style:e.style},e.children),se=n.forwardRef((e,t)=>l.createElement("button",d({ref:t,disabled:!!e.disabled,className:(e.disabled?"submit-bar-disabled":"submit-bar")+" "+(e.className?e.className:""),type:e.submit?"submit":"button",style:{...e.style},onClick:e.onSubmit},e.form?{form:e.form}:{}),l.createElement("header",null,e.label)));se.propTypes={submit:ne.any,style:ne.object,label:ne.string,onSubmit:ne.func},se.defaultProps={};const ce=e=>l.createElement("span",{className:"card-link cp "+e.className,onClick:e.onClick,style:e.style},e.label);ce.propTypes={label:ne.any,onClick:ne.func},ce.defaultProps={};const pe=e=>l.createElement("label",{style:e.style,className:"card-caption"},e.children),me=e=>{let{t:t,children:n,texts:o={},submit:i=!1,inputs:a=[],onNext:r,onSkip:u,isDisable:d,onAdd:s,isMultipleAllow:c=!1,cardStyle:p={}}=e;const m=window.Digit.Utils.browser.isMobile();return l.createElement(re,{style:p},o.headerCaption&&l.createElement(pe,null,t(o.headerCaption)),(null==o?void 0:o.header)&&l.createElement(ue,null,t(o.header)),(null==o?void 0:o.cardText)&&l.createElement(de,null,t(o.cardText)),n,o.submitBarLabel?l.createElement(se,{disabled:d,submit:i,label:t(o.submitBarLabel),onSubmit:r}):null,o.skipLabel?l.createElement(de,{style:{marginTop:"10px",textAlign:m?"center":"left"}}," ",t(o.skipLabel)," "):null,o.skipText?l.createElement(ce,{label:t(o.skipText),onClick:u}):null,c&&o.addMultipleText?l.createElement(ce,{label:t(o.addMultipleText),onClick:s}):null)};me.propTypes={text:ne.object,submit:ne.bool,onNext:ne.func,onSkip:ne.func,onAdd:ne.func,t:ne.func},me.defaultProps={texts:{},submit:!1,onNext:void 0,onSkip:void 0,onAdd:void 0,t:e=>e};const ve=e=>{var t;let{t:n,children:o,config:i,onSelect:r,onSkip:u,value:s,onChange:c,isDisabled:p,_defaultValues:m={},forcedError:v,componentInFront:E,onAdd:_,cardStyle:T={},isMultipleAllow:y=!1,showErrorBelowChildren:S=!1,childrenAtTheBottom:f=!0,textInputStyle:P}=e;const{register:g,errors:N,handleSubmit:A}=a.useForm({defaultValues:m});var O=!!p||i.canDisable&&Object.keys(N).filter(e=>N[e]).length;const I=null===(t=i.inputs)||void 0===t?void 0:t.map((e,t)=>{var o,i,a,r;return"text"===e.type?l.createElement(l.Fragment,{key:t},l.createElement(oe,null,n(e.label)),N[e.name]&&l.createElement(ie,null,n(e.error)),l.createElement("div",{className:"field-container",style:{justifyContent:"left"}},E?l.createElement("span",{className:"citizen-card-input citizen-card-input--front"},E):null,l.createElement(ae,{key:t,name:e.name,value:s,onChange:c,minlength:e.validation.minlength,maxlength:e.validation.maxlength,pattern:null===(o=e.validation)||void 0===o?void 0:o.pattern,title:null===(i=e.validation)||void 0===i?void 0:i.title,placeholder:e.placeholder,inputRef:g(e.validation),isMandatory:N[e.name],disable:!!e.disable&&e.disable,textInputStyle:P}))):"textarea"===e.type?l.createElement(l.Fragment,{key:t},l.createElement(oe,null,n(e.label)),l.createElement(le,{key:t,name:e.name,value:s,onChange:c,inputRef:g(e.validation),maxLength:"1024"})):"date"===e.type?(console.log("datedatedate"),l.createElement(l.Fragment,{key:t},l.createElement(oe,null,n(e.label)," ",e.labelChildren&&e.labelChildren),N[e.name]&&l.createElement(ie,null,n(e.error)),l.createElement("div",{className:"field-container",style:{justifyContent:"left"}},l.createElement(ae,{key:t,name:e.name,value:s,onChange:c,pattern:null===(a=e.validation)||void 0===a?void 0:a.pattern,title:null===(r=e.validation)||void 0===r?void 0:r.title,inputRef:g(e.validation),isMandatory:N[e.name],disable:!!e.disable&&e.disable,textInputStyle:P,type:e.type})))):void 0});return l.createElement("form",{onSubmit:A(e=>{r(e)})},l.createElement(me,d({isDisable:O,isMultipleAllow:y},i,{cardStyle:T,submit:!0,onSkip:u,onAdd:_,t:n}),!f&&o,I,v&&!S&&l.createElement(ie,null,n(v)),f&&o,v&&S&&l.createElement(ie,null,n(v))))};function Ee(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}ve.propTypes={config:ne.shape({}),onSelect:ne.func,onSkip:ne.func,onAdd:ne.func,t:ne.func},ve.defaultProps={config:{},onSelect:void 0,onSkip:void 0,onAdd:void 0,t:e=>e},"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));const _e=function(e){return void 0===e&&(e=""),!(!e||null==e||null==e||""==e)},Te=function(e){return void 0===e&&(e=""),_e(e)&&(e.replaceAll&&e.replaceAll(".","_")||e.replace&&Fe(e,".","_"))||"NA"},ye=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");let n=Te(e);return"NA"==n?"PT_NA":t+"_"+n},Se=function(e){return void 0===e&&(e=""),ye(e,"COMMON_PROPTYPE")},fe=function(e){return void 0===e&&(e=""),ye(e,"PROPERTYTAX_OCCUPANCYTYPE")},Pe=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");let n=Te(t);return"NA"!=n&&_e(e)?(n=n.toUpperCase(),ye(e,n+"_REVENUE")):"PT_NA"},ge=function(e){void 0===e&&(e="");let t=Te(e);return"NA"!=t&&_e(e)?(t=t.toUpperCase(),ye(t,"TENANT_TENANTS")):"PT_NA"},Ne=function(e){return void 0===e&&(e=""),ye(e,"PROPERTYTAX_OWNERTYPE")},Ae=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=5),e.length<=t?e:e.substr(0,t)+"..."},Oe={},Ie=e=>{var t,n,l;let{address:o}=e,i={...o,pincode:null==o?void 0:o.pincode,landmark:null==o?void 0:o.landmark,city:null==o||null===(t=o.city)||void 0===t?void 0:t.name,doorNo:null==o?void 0:o.doorNo,street:null==o?void 0:o.street,locality:{code:(null==o||null===(n=o.locality)||void 0===n?void 0:n.code)||"NA",area:null==o||null===(l=o.locality)||void 0===l?void 0:l.name}};return e.address=i,e},he=e=>{var t,n,l;return"RESIDENTIAL"==(null==e||null===(t=e.isResdential)||void 0===t?void 0:t.code)?null==e||null===(n=e.isResdential)||void 0===n?void 0:n.code:null==e||null===(l=e.usageCategoryMajor)||void 0===l?void 0:l.code},Ce=e=>{let t=0;return null==e||e.units.map(e=>{var n;t+=null==e||null===(n=e.constructionDetail)||void 0===n?void 0:n.builtUpArea}),t},Re=e=>{var t,n,l,o,i,a;let r={};var u,d,s,c;if(null!=e&&null!==(t=e.PropertyType)&&void 0!==t&&null!==(n=t.code)&&void 0!==n&&n.includes("VACANT"))r={units:[],landArea:parseInt(null==e||null===(u=e.landarea)||void 0===u?void 0:u.floorarea),propertyType:null==e||null===(d=e.PropertyType)||void 0===d?void 0:d.code,noOfFloors:0,usageCategory:null==e||null===(s=e.propertyStructureDetails)||void 0===s||null===(c=s.usageCategory)||void 0===c?void 0:c.code};else if(null!=e&&null!==(l=e.PropertyType)&&void 0!==l&&null!==(o=l.code)&&void 0!==o&&o.includes("SHAREDPROPERTY")){var p,m,v,E,_;r={units:null==e?void 0:e.units,landArea:null==e||null===(p=e.units)||void 0===p?void 0:p.reduce((e,t)=>{var n;return Number(null==t||null===(n=t.constructionDetail)||void 0===n?void 0:n.builtUpArea)+e},0),propertyType:null==e||null===(m=e.PropertyType)||void 0===m?void 0:m.code,noOfFloors:1,superBuiltUpArea:null==e||null===(v=e.units)||void 0===v?void 0:v.reduce((e,t)=>{var n;return Number(null==t||null===(n=t.constructionDetail)||void 0===n?void 0:n.builtUpArea)+e},0),usageCategory:null==e||null===(E=e.units)||void 0===E||null===(_=E[0])||void 0===_?void 0:_.usageCategory}}else if(null!=e&&null!==(i=e.PropertyType)&&void 0!==i&&null!==(a=i.code)&&void 0!==a&&a.includes("INDEPENDENTPROPERTY")){var T,y,S,f,P;r={units:null==e?void 0:e.units,landArea:null==e||null===(T=e.landArea)||void 0===T?void 0:T.floorarea,propertyType:null==e||null===(y=e.PropertyType)||void 0===y?void 0:y.code,noOfFloors:(null==e||null===(S=e.noOfFloors)||void 0===S?void 0:S.code)+1,superBuiltUpArea:null,usageCategory:null==e||null===(f=e.units)||void 0===f||null===(P=f[0])||void 0===P?void 0:P.usageCategory}}else{var g;r={units:[{occupancyType:"SELFOCCUPIED",floorNo:"0",constructionDetail:{builtUpArea:16.67},tenantId:e.tenantId,usageCategory:"RESIDENTIAL"}],landArea:"2000",propertyType:null==e||null===(g=e.PropertyType)||void 0===g?void 0:g.code,noOfFloors:1,superBuiltUpArea:16.67,usageCategory:he(e)}}return e.propertyDetails=r,e},be=function(e){return void 0===e&&(e=""),_e(e)?e:"PT_NA"},De=function(e){return void 0===e&&(e=""),!(!_e(e)||!e.includes("INDEPENDENT"))},Le=function(e){return void 0===e&&(e=""),!(!_e(e)||!e.includes("SELFOCCUPIED"))},Me=function(e){return void 0===e&&(e=""),!(!_e(e)||!e.includes("YES"))},we=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t="");let l=e[t]||"",o=(null==l?void 0:l.split(","))||[],i="";return o.length>0&&o.map(e=>{e.includes("large")||e.includes("medium")||e.includes("small")||(i=e)}),i},xe=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=0),decodeURIComponent(e.split("?")[0].split("/").pop().slice(13))||"Document - "+(t+1)},Ue=(e,t)=>{if(e){const n=new Date(e);let l=n.getMonth()+1,o=n.getDate(),i=n.getFullYear();return l=(l>9?"":"0")+l,o=(o>9?"":"0")+o,"PT"==t?o+"-"+l+"-"+i:o+"/"+l+"/"+i}return null},Fe=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e},Be=function(e){return void 0===e&&(e=[]),!(!e||!Array.isArray(e))},ke=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),!!(Be(e)&&e.length>t)},He=function(e){var t;return void 0===e&&(e={}),{action:null!==(t=e)&&void 0!==t&&t.isEditProperty?"REOPEN":"OPEN",businessService:"PT."+Ye(e),moduleName:"PT"}},Ye=function(e){var t;return void 0===e&&(e={}),null!==(t=e)&&void 0!==t&&t.isUpdateProperty?"UPDATE":"CREATE"},We=e=>{let t="selector-button-primary";switch(e.theme){case"border":t="selector-button-border";break;default:t="selector-button-primary"}return l.createElement("button",{className:e.isDisabled?"selector-button-primary-disabled":t,type:e.type||"submit",form:e.formId,onClick:e.onSubmit,disabled:e.isDisabled,style:e.style?e.style:null},l.createElement("h2",{style:{...null==e?void 0:e.textStyles,width:"100%"}},e.label))};We.propTypes={label:ne.string.isRequired,theme:ne.string,onSubmit:ne.func},We.defaultProps={label:"",theme:"",onSubmit:void 0};const je=e=>{let{className:t,style:n}=e;return l.createElement("svg",{style:{...n},focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",width:"24",height:"24",fill:"#9E9E9E",className:t},l.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))},Ke=e=>{let{text:t,onClick:n,extraStyles:o,disabled:i=!1}=e;return l.createElement("div",{className:"tag",style:o?null==o?void 0:o.tagStyles:{}},l.createElement("span",{className:"text",style:o?null==o?void 0:o.textStyles:{}},t),l.createElement("span",{onClick:i?null:n},l.createElement(je,{className:"close",style:o?null==o?void 0:o.closeIconStyles:{}})))},Ve=e=>{var t,i,a,r,u,d,s,c,p,m,v,E,_,T;const{t:y}=o.useTranslation(),S=n.useRef(),[f,P]=n.useState(!1),[g,N]=n.useState(null),[A,O]=n.useState(!1),I=Digit.SessionStorage.get("userType");Digit.Hooks.createTokenAPI("document");let h={};h=(e=>{let t={};return t={containerStyles:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap",margin:"0px",padding:"0px"},tagContainerStyles:{margin:"0px",padding:"0px",width:"46%"},tagStyles:{height:"auto",padding:"5px",margin:0,width:"100%",margin:"5px"},textStyles:{wordBreak:"break-word",height:"auto",lineHeight:"16px",overflow:"hidden",maxHeight:"34px"},inputStyles:{width:"43%",minHeight:"42px",maxHeight:"42px",top:"5px",left:"5px"},buttonStyles:{height:"auto",minHeight:"40px",width:"43%",maxHeight:"40px",margin:"5px",padding:"0px"},closeIconStyles:{width:"20px"},uploadFile:{minHeight:"50px"}},t})();const C=()=>{S.current.value="",e.onDelete()};e.uploadMessage&&S.current.value&&(C(),P(!1)),n.useEffect(()=>{S.current.files.length<=0&&null!==g&&(S.current.value="",e.onDelete())},[null==S||null===(t=S.current)||void 0===t?void 0:t.files]),n.useEffect(()=>{S.current.files[0]?(P(!0),N(S.current.files[0])):P(!1)},[e.message]);const R=()=>l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"#0B0C0C"}));return l.createElement(n.Fragment,null,!!(null==e?void 0:e.showHint)&&l.createElement("p",{className:"cell-text"},y(null==e?void 0:e.hintText)),l.createElement("div",{className:"upload-file "+("employee"===I?"":"upload-file-max-width")+" "+(e.disabled?" disabled":""),style:null!==(i=h)&&void 0!==i&&i.uploadFile?null===(a=h)||void 0===a?void 0:a.uploadFile:{}},l.createElement("div",{style:h?null===(r=h)||void 0===r?void 0:r.containerStyles:null},l.createElement(We,{theme:"border",label:y("CS_COMMON_CHOOSE_FILE"),style:{...h?null===(u=h)||void 0===u?void 0:u.buttonStyles:{},...e.disabled?{display:"none"}:{}},textStyles:null==e?void 0:e.textStyles,type:e.buttonType}),l.createElement("span",{style:{fontWeight:"bold"}},"OR"),l.createElement("div",{className:"col col-md-4  text-md-center p-0",style:{width:"40%",marginTop:"5px"}},l.createElement("button",{className:"digilocker-btn",type:"submit",onClick:t=>function(t){try{t.preventDefault();const n=sessionStorage.getItem("DigiLocker.token1");return Promise.resolve(Digit.DigiLockerService.issueDoc({TokenReq:{authToken:n}})).then(function(l){var o;console.log("res1res1res1res1res1",l);let i=l.IssuedDoc.filter(e=>"DRVLC"==e.doctype),a={authToken:n,id:null==i||null===(o=i[0])||void 0===o?void 0:o.uri};console.log("url",i);const r=function(){if((null==i?void 0:i.length)>0)return Promise.resolve(Digit.DigiLockerService.uri({TokenReq:a})).then(function(n){let l=new Blob([n]);((t,n)=>{var l=new FileReader;l.readAsDataURL(n),l.onloadend=function(){var n=(e=>{for(var t=atob(e.split(",")[1]),n=[],l=0;l<t.length;l++)n.push(t.charCodeAt(l));return new Blob([new Uint8Array(n)],{type:"application/pdf"})})(l.result);let o=new File([n],"drivingL.pdf",{type:"application/pdf"});e.onUpload(t,o)}})(t,l)})}();if(r&&r.then)return r.then(function(){})})}catch(t){return Promise.reject(t)}}(t)},l.createElement("img",{src:"https://meripehchaan.gov.in/assets/img/icon/digi.png",class:"mr-2",style:{width:"12%"}}),"Fetch from DigiLocker")),null==e||null===(d=e.uploadedFiles)||void 0===d?void 0:d.map((t,n)=>{var o;const i=t[1];return l.createElement("div",{className:"tag-container",style:h?null===(o=h)||void 0===o?void 0:o.tagContainerStyles:null},l.createElement(Ke,{extraStyles:h,key:n,text:t[0],onClick:t=>null==e?void 0:e.removeTargetedFile(i,t)}))}),!f||e.error?l.createElement("h2",{className:"file-upload-status"},e.message):l.createElement("div",{className:"tag-container",style:h?null===(s=h)||void 0===s?void 0:s.tagContainerStyles:null},l.createElement("div",{className:"tag",style:h?null===(c=h)||void 0===c?void 0:c.tagStyles:null},l.createElement("span",{className:"text",style:h?null===(p=h)||void 0===p?void 0:p.textStyles:null},void 0===(null===(m=S.current.files[0])||void 0===m?void 0:m.name)||null!=e&&e.file?null===(E=e.file)||void 0===E?void 0:E.name:null===(v=S.current.files[0])||void 0===v?void 0:v.name),l.createElement("span",{onClick:()=>C(),style:h?null===(_=h)||void 0===_?void 0:_.closeIconStyles:null},l.createElement(R,{style:e.Multistyle,className:"close"}))))),l.createElement("input",{className:e.disabled?"disabled":"input-mirror-selector-button",style:h?{...null===(T=h)||void 0===T?void 0:T.inputStyles,...null==e?void 0:e.inputStyles}:{...null==e?void 0:e.inputStyles},ref:S,type:"file",id:e.id||"document-"+Math.floor(139*(Math.random()||1)),name:"file",multiple:e.multiple,accept:e.accept,disabled:e.disabled,onChange:t=>e.onUpload(t),onClick:e=>{const{target:t={}}=e||{};t.value=""}})),e.iserror&&l.createElement("p",{style:{color:"red"}},e.iserror),(null==e?void 0:e.showHintBelow)&&l.createElement("p",{className:"cell-text"},y(null==e?void 0:e.hintText)))},Ge=e=>{var n,i,a;let{data:r,OpenImage:u}=e;const{t:d}=o.useTranslation();return l.createElement("div",null,r.date&&l.createElement("p",null,r.date),l.createElement("p",null,r.name),r.mobileNumber&&l.createElement(t.TelePhone,{mobile:r.mobileNumber}),r.source&&l.createElement("p",null,d("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&l.createElement(Reason,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?l.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("WF_COMMON_COMMENTS")),l.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,t)=>{u(e,t,null==r?void 0:r.thumbnailsToShow)}})):null)},ze=e=>{var a,r,u,d,s,c;const{t:p}=o.useTranslation(),m=(null===(a=e.application)||void 0===a?void 0:a.creationReason)&&"PT."+e.application.creationReason||"PT.CREATE",{isLoading:v,data:E}=Digit.Hooks.useWorkflowDetails({tenantId:null===(r=e.application)||void 0===r?void 0:r.tenantId,id:e.id,moduleCode:m}),[_,T]=n.useState(!1);function y(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}const S=n=>{if("OPEN"===n.state){var o,a;const t={date:null==n||null===(o=n.auditDetails)||void 0===o?void 0:o.lastModified,source:(null===(a=e.application)||void 0===a?void 0:a.channel)||""};return l.createElement(Ge,{data:t})}if(n.state){var r,u,d,s,c;const e={date:null==n||null===(r=n.auditDetails)||void 0===r?void 0:r.lastModified,name:null==n||null===(u=n.assignes)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.name,mobileNumber:null==n||null===(s=n.assignes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.mobileNumber,comment:p(null==n?void 0:n.comment),wfComment:n.wfComment,thumbnailsToShow:null==n?void 0:n.thumbnailsToShow};return l.createElement(Ge,{data:e,OpenImage:y})}var m;if("ACTIVE"===n.status&&"citizen"===(null==e?void 0:e.userType))return l.createElement("div",null,l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/properties/"+(null==e||null===(m=e.application)||void 0===m?void 0:m.propertyId)},l.createElement(t.ActionLinks,null,p("PT_VIEW_PROPERTY_DETAILS"))));{var v,E;const t={date:Digit.DateUtils.ConvertTimestampToDate(null===(v=e.application)||void 0===v?void 0:v.auditDetails.lastModified),name:null==n||null===(E=n.assigner)||void 0===E?void 0:E.name,comment:p(null==n?void 0:n.comment)};return l.createElement(Ge,{data:t})}};return v?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,!v&&l.createElement(n.Fragment,null,(null==E||null===(u=E.timeline)||void 0===u?void 0:u.length)>0&&l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},p("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=E&&E.timeline&&1===(null==E||null===(d=E.timeline)||void 0===d?void 0:d.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:p((null==E||null===(s=E.timeline[0])||void 0===s?void 0:s.state)&&"WF_"+m+"_"+E.timeline[0].state||"NA"),customChild:S(null==E?void 0:E.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==E?void 0:E.timeline)&&(null==E?void 0:E.timeline.slice(0,_?E.timeline.length:2).map((e,n,o)=>{var i;let a="";var r,u,d,s,c,m,v,_;return window.location.href.includes("/obps/")&&(a=null!==(r=workflowDetails)&&void 0!==r&&null!==(u=r.data)&&void 0!==u&&null!==(d=u.timeline[n-1])&&void 0!==d&&null!==(s=d.state)&&void 0!==s&&s.includes("BACK_FROM")||null!==(c=workflowDetails)&&void 0!==c&&null!==(m=c.data)&&void 0!==m&&null!==(v=m.timeline[n-1])&&void 0!==v&&null!==(_=v.state)&&void 0!==_&&_.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,label:p("ES_PT_COMMON_STATUS_"+(null==E||null===(i=E.processInstances[n].state)||void 0===i?void 0:i.state)+a),customChild:S(e)}))}))),(null==E||null===(c=E.timeline)||void 0===c?void 0:c.length)>2&&l.createElement(t.LinkButton,{label:p(_?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{T(e=>!e)}})),E&&(n=>{var o,a;let r=n[0];const u=n.map(e=>e.action);if(u.includes("PAY")||u.includes("EDIT")){let e=u.indexOf("EDIT")||u.indexOf("PAY");e=-1!=e?e:u.indexOf("PAY"),r=n[e]}switch(null===(o=r)||void 0===o?void 0:o.action){case"PAY":return"citizen"===(null==e?void 0:e.userType)?l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+m+"/"+e.id,state:{tenantId:e.application.tenantId,propertyId:null==e||null===(a=e.application)||void 0===a?void 0:a.propertyId}}},l.createElement(t.SubmitBar,{label:p("CS_APPLICATION_DETAILS_MAKE_PAYMENT")}))):null;case"EDIT":return l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},"PT.MUTATION"!=m&&l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/pt/property/edit-application/action=edit-"+m+"/"+e.id,state:{tenantId:e.application.tenantId}}},l.createElement(t.SubmitBar,{label:p("CS_APPLICATION_DETAILS_EDIT")})));case"SUBMIT_FEEDBACK":return l.createElement("div",{style:{marginTop:"24px"}},l.createElement(i.Link,{to:"/digit-ui/citizen/fsm/rate/"+e.id},l.createElement(t.SubmitBar,{label:p("CS_APPLICATION_DETAILS_RATE")})));default:return null}})(null==E?void 0:E.nextActions))};var Xe=m(function(e,t){(function(){var n="Expected a function",l="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",a="[object Array]",r="[object Boolean]",u="[object Date]",d="[object Error]",s="[object Function]",c="[object GeneratorFunction]",m="[object Map]",v="[object Number]",E="[object Object]",_="[object RegExp]",T="[object Set]",y="[object String]",S="[object Symbol]",f="[object WeakMap]",P="[object ArrayBuffer]",g="[object DataView]",N="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",I="[object Int16Array]",h="[object Int32Array]",C="[object Uint8Array]",R="[object Uint16Array]",b="[object Uint32Array]",D=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,w=/&(?:amp|lt|gt|quot|#39);/g,x=/[&<>"']/g,U=RegExp(w.source),F=RegExp(x.source),B=/<%-([\s\S]+?)%>/g,k=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,V=RegExp(K.source),G=/^\s+/,z=/\s/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,q=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,ie=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,de=/['\n\r\u2028\u2029\\]/g,se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+ce+"]",me="["+se+"]",ve="\\d+",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",_e="[^\\ud800-\\udfff"+ce+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Te="\\ud83c[\\udffb-\\udfff]",ye="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ge="(?:"+Ee+"|"+_e+")",Ne="(?:"+Pe+"|"+_e+")",Ae="(?:"+me+"|"+Te+")?",Oe="[\\ufe0e\\ufe0f]?"+Ae+"(?:\\u200d(?:"+[ye,Se,fe].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*",Ie="(?:"+["[\\u2700-\\u27bf]",Se,fe].join("|")+")"+Oe,he="(?:"+[ye+me+"?",me,Se,fe,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['’]","g"),Re=RegExp(me,"g"),be=RegExp(Te+"(?="+Te+")|"+he+Oe,"g"),De=RegExp([Pe+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[pe,Pe,"$"].join("|")+")",Ne+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[pe,Pe+ge,"$"].join("|")+")",Pe+"?"+ge+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Ie].join("|"),"g"),Le=RegExp("[\\u200d\\ud800-\\udfff"+se+"\\ufe0e\\ufe0f]"),Me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,we=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xe=-1,Ue={};Ue[N]=Ue[A]=Ue[O]=Ue[I]=Ue[h]=Ue[C]=Ue["[object Uint8ClampedArray]"]=Ue[R]=Ue[b]=!0,Ue[i]=Ue[a]=Ue[P]=Ue[r]=Ue[g]=Ue[u]=Ue[d]=Ue[s]=Ue[m]=Ue[v]=Ue[E]=Ue[_]=Ue[T]=Ue[y]=Ue[f]=!1;var Fe={};Fe[i]=Fe[a]=Fe[P]=Fe[g]=Fe[r]=Fe[u]=Fe[N]=Fe[A]=Fe[O]=Fe[I]=Fe[h]=Fe[m]=Fe[v]=Fe[E]=Fe[_]=Fe[T]=Fe[y]=Fe[S]=Fe[C]=Fe["[object Uint8ClampedArray]"]=Fe[R]=Fe[b]=!0,Fe[d]=Fe[s]=Fe[f]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ke=parseFloat,He=parseInt,Ye="object"==typeof p&&p&&p.Object===Object&&p,We="object"==typeof self&&self&&self.Object===Object&&self,je=Ye||We||Function("return this")(),Ke=t&&!t.nodeType&&t,Ve=Ke&&e&&!e.nodeType&&e,Ge=Ve&&Ve.exports===Ke,ze=Ge&&Ye.process,Xe=function(){try{return Ve&&Ve.require&&Ve.require("util").types||ze&&ze.binding&&ze.binding("util")}catch(e){}}(),qe=Xe&&Xe.isArrayBuffer,$e=Xe&&Xe.isDate,Ze=Xe&&Xe.isMap,Qe=Xe&&Xe.isRegExp,Je=Xe&&Xe.isSet,et=Xe&&Xe.isTypedArray;function tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function nt(e,t,n,l){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(l,a,n(a),e)}return l}function lt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function it(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(!t(e[n],n,e))return!1;return!0}function at(e,t){for(var n=-1,l=null==e?0:e.length,o=0,i=[];++n<l;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function rt(e,t){return!(null==e||!e.length)&&Tt(e,t,0)>-1}function ut(e,t,n){for(var l=-1,o=null==e?0:e.length;++l<o;)if(n(t,e[l]))return!0;return!1}function dt(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}function st(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e}function ct(e,t,n,l){var o=-1,i=null==e?0:e.length;for(l&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function pt(e,t,n,l){var o=null==e?0:e.length;for(l&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function mt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(t(e[n],n,e))return!0;return!1}var vt=Pt("length");function Et(e,t,n){var l;return n(e,function(e,n,o){if(t(e,n,o))return l=n,!1}),l}function _t(e,t,n,l){for(var o=e.length,i=n+(l?1:-1);l?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Tt(e,t,n){return t==t?function(e,t,n){for(var l=n-1,o=e.length;++l<o;)if(e[l]===t)return l;return-1}(e,t,n):_t(e,St,n)}function yt(e,t,n,l){for(var o=n-1,i=e.length;++o<i;)if(l(e[o],t))return o;return-1}function St(e){return e!=e}function ft(e,t){var n=null==e?0:e.length;return n?At(e,t)/n:NaN}function Pt(e){return function(t){return null==t?void 0:t[e]}}function gt(e){return function(t){return null==e?void 0:e[t]}}function Nt(e,t,n,l,o){return o(e,function(e,o,i){n=l?(l=!1,e):t(n,e,o,i)}),n}function At(e,t){for(var n,l=-1,o=e.length;++l<o;){var i=t(e[l]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Ot(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}function It(e){return e?e.slice(0,Kt(e)+1).replace(G,""):e}function ht(e){return function(t){return e(t)}}function Ct(e,t){return dt(t,function(t){return e[t]})}function Rt(e,t){return e.has(t)}function bt(e,t){for(var n=-1,l=e.length;++n<l&&Tt(t,e[n],0)>-1;);return n}function Dt(e,t){for(var n=e.length;n--&&Tt(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length,l=0;n--;)e[n]===t&&++l;return l}var Mt=gt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wt=gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xt(e){return"\\"+Be[e]}function Ut(e){return Le.test(e)}function Ft(e){var t=-1,n=Array(e.size);return e.forEach(function(e,l){n[++t]=[l,e]}),n}function Bt(e,t){return function(n){return e(t(n))}}function kt(e,t){for(var n=-1,o=e.length,i=0,a=[];++n<o;){var r=e[n];r!==t&&r!==l||(e[n]=l,a[i++]=n)}return a}function Ht(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Yt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Wt(e){return Ut(e)?function(e){for(var t=be.lastIndex=0;be.test(e);)++t;return t}(e):vt(e)}function jt(e){return Ut(e)?function(e){return e.match(be)||[]}(e):function(e){return e.split("")}(e)}function Kt(e){for(var t=e.length;t--&&z.test(e.charAt(t)););return t}var Vt=gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Gt=function e(t){var p,z=(t=null==t?je:Gt.defaults(je.Object(),t,Gt.pick(je,we))).Array,se=t.Date,ce=t.Error,pe=t.Function,me=t.Math,ve=t.Object,Ee=t.RegExp,_e=t.String,Te=t.TypeError,ye=z.prototype,Se=ve.prototype,fe=t["__core-js_shared__"],Pe=pe.prototype.toString,ge=Se.hasOwnProperty,Ne=0,Ae=(p=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",Oe=Se.toString,Ie=Pe.call(ve),he=je._,be=Ee("^"+Pe.call(ge).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=Ge?t.Buffer:void 0,Be=t.Symbol,Ye=t.Uint8Array,We=Le?Le.allocUnsafe:void 0,Ke=Bt(ve.getPrototypeOf,ve),Ve=ve.create,ze=Se.propertyIsEnumerable,Xe=ye.splice,vt=Be?Be.isConcatSpreadable:void 0,gt=Be?Be.iterator:void 0,zt=Be?Be.toStringTag:void 0,Xt=function(){try{var e=Jo(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),qt=t.clearTimeout!==je.clearTimeout&&t.clearTimeout,$t=se&&se.now!==je.Date.now&&se.now,Zt=t.setTimeout!==je.setTimeout&&t.setTimeout,Qt=me.ceil,Jt=me.floor,en=ve.getOwnPropertySymbols,tn=Le?Le.isBuffer:void 0,nn=t.isFinite,ln=ye.join,on=Bt(ve.keys,ve),an=me.max,rn=me.min,un=se.now,dn=t.parseInt,sn=me.random,cn=ye.reverse,pn=Jo(t,"DataView"),mn=Jo(t,"Map"),vn=Jo(t,"Promise"),En=Jo(t,"Set"),_n=Jo(t,"WeakMap"),Tn=Jo(ve,"create"),yn=_n&&new _n,Sn={},fn=Ci(pn),Pn=Ci(mn),gn=Ci(vn),Nn=Ci(En),An=Ci(_n),On=Be?Be.prototype:void 0,In=On?On.valueOf:void 0,hn=On?On.toString:void 0;function Cn(e){if(Va(e)&&!wa(e)&&!(e instanceof Ln)){if(e instanceof Dn)return e;if(ge.call(e,"__wrapped__"))return Ri(e)}return new Dn(e)}var Rn=function(){function e(){}return function(t){if(!Ka(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function bn(){}function Dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ln(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new wn(e);this.size=t.size}function Bn(e,t){var n=wa(e),l=!n&&Ma(e),o=!n&&!l&&Ba(e),i=!n&&!l&&!o&&Ja(e),a=n||l||o||i,r=a?Ot(e.length,_e):[],u=r.length;for(var d in e)!t&&!ge.call(e,d)||a&&("length"==d||o&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ai(d,u))||r.push(d);return r}function kn(e){var t=e.length;return t?e[xl(0,t-1)]:void 0}function Hn(e,t){return Ni(To(e),qn(t,0,e.length))}function Yn(e){return Ni(To(e))}function Wn(e,t,n){(void 0!==n&&!ba(e[t],n)||void 0===n&&!(t in e))&&zn(e,t,n)}function jn(e,t,n){var l=e[t];ge.call(e,t)&&ba(l,n)&&(void 0!==n||t in e)||zn(e,t,n)}function Kn(e,t){for(var n=e.length;n--;)if(ba(e[n][0],t))return n;return-1}function Vn(e,t,n,l){return el(e,function(e,o,i){t(l,e,n(e),i)}),l}function Gn(e,t){return e&&yo(t,Pr(t),e)}function zn(e,t,n){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xn(e,t){for(var n=-1,l=t.length,o=z(l),i=null==e;++n<l;)o[n]=i?void 0:_r(e,t[n]);return o}function qn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function $n(e,t,n,l,o,a){var d,p=1&t,f=2&t,D=4&t;if(n&&(d=o?n(e,l,o,a):n(e)),void 0!==d)return d;if(!Ka(e))return e;var L=wa(e);if(L){if(d=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ge.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!p)return To(e,d)}else{var M=ni(e),w=M==s||M==c;if(Ba(e))return co(e,p);if(M==E||M==i||w&&!o){if(d=f||w?{}:oi(e),!p)return f?function(e,t){return yo(e,ti(e),t)}(e,function(e,t){return e&&yo(t,gr(t),e)}(d,e)):function(e,t){return yo(e,ei(e),t)}(e,Gn(d,e))}else{if(!Fe[M])return o?e:{};d=function(e,t,n){var l=e.constructor;switch(t){case P:return po(e);case r:case u:return new l(+e);case g:return function(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case A:case O:case I:case h:case C:case"[object Uint8ClampedArray]":case R:case b:return mo(e,n);case m:return new l;case v:case y:return new l(e);case _:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new l;case S:return In?ve(In.call(e)):{}}}(e,M,p)}}a||(a=new Fn);var x=a.get(e);if(x)return x;a.set(e,d),$a(e)?e.forEach(function(l){d.add($n(l,t,n,l,e,a))}):Ga(e)&&e.forEach(function(l,o){d.set(o,$n(l,t,n,o,e,a))});var U=L?void 0:(D?f?Go:Vo:f?gr:Pr)(e);return lt(U||e,function(l,o){U&&(l=e[o=l]),jn(d,o,$n(l,t,n,o,e,a))}),d}function Zn(e,t,n){var l=n.length;if(null==e)return!l;for(e=ve(e);l--;){var o=n[l],i=e[o];if(void 0===i&&!(o in e)||!(0,t[o])(i))return!1}return!0}function Qn(e,t,l){if("function"!=typeof e)throw new Te(n);return Si(function(){e.apply(void 0,l)},t)}function Jn(e,t,n,l){var o=-1,i=rt,a=!0,r=e.length,u=[],d=t.length;if(!r)return u;n&&(t=dt(t,ht(n))),l?(i=ut,a=!1):t.length>=200&&(i=Rt,a=!1,t=new Un(t));e:for(;++o<r;){var s=e[o],c=null==n?s:n(s);if(s=l||0!==s?s:0,a&&c==c){for(var p=d;p--;)if(t[p]===c)continue e;u.push(s)}else i(t,c,l)||u.push(s)}return u}Cn.templateSettings={escape:B,evaluate:k,interpolate:H,variable:"",imports:{_:Cn}},(Cn.prototype=bn.prototype).constructor=Cn,(Dn.prototype=Rn(bn.prototype)).constructor=Dn,(Ln.prototype=Rn(bn.prototype)).constructor=Ln,Mn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Mn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ge.call(t,e)?t[e]:void 0},Mn.prototype.has=function(e){var t=this.__data__;return Tn?void 0!==t[e]:ge.call(t,e)},Mn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&void 0===t?"__lodash_hash_undefined__":t,this},wn.prototype.clear=function(){this.__data__=[],this.size=0},wn.prototype.delete=function(e){var t=this.__data__,n=Kn(t,e);return!(n<0||(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,0))},wn.prototype.get=function(e){var t=this.__data__,n=Kn(t,e);return n<0?void 0:t[n][1]},wn.prototype.has=function(e){return Kn(this.__data__,e)>-1},wn.prototype.set=function(e,t){var n=this.__data__,l=Kn(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this},xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(mn||wn),string:new Mn}},xn.prototype.delete=function(e){var t=Zo(this,e).delete(e);return this.size-=t?1:0,t},xn.prototype.get=function(e){return Zo(this,e).get(e)},xn.prototype.has=function(e){return Zo(this,e).has(e)},xn.prototype.set=function(e,t){var n=Zo(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this},Un.prototype.add=Un.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Un.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new wn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof wn){var l=n.__data__;if(!mn||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new xn(l)}return n.set(e,t),this.size=n.size,this};var el=Po(ul),tl=Po(dl,!0);function nl(e,t){var n=!0;return el(e,function(e,l,o){return n=!!t(e,l,o)}),n}function ll(e,t,n){for(var l=-1,o=e.length;++l<o;){var i=e[l],a=t(i);if(null!=a&&(void 0===r?a==a&&!Qa(a):n(a,r)))var r=a,u=i}return u}function ol(e,t){var n=[];return el(e,function(e,l,o){t(e,l,o)&&n.push(e)}),n}function il(e,t,n,l,o){var i=-1,a=e.length;for(n||(n=ii),o||(o=[]);++i<a;){var r=e[i];t>0&&n(r)?t>1?il(r,t-1,n,l,o):st(o,r):l||(o[o.length]=r)}return o}var al=go(),rl=go(!0);function ul(e,t){return e&&al(e,t,Pr)}function dl(e,t){return e&&rl(e,t,Pr)}function sl(e,t){return at(t,function(t){return Ya(e[t])})}function cl(e,t){for(var n=0,l=(t=ao(t,e)).length;null!=e&&n<l;)e=e[hi(t[n++])];return n&&n==l?e:void 0}function pl(e,t,n){var l=t(e);return wa(e)?l:st(l,n(e))}function ml(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":zt&&zt in ve(e)?function(e){var t=ge.call(e,zt),n=e[zt];try{e[zt]=void 0;var l=!0}catch(e){}var o=Oe.call(e);return l&&(t?e[zt]=n:delete e[zt]),o}(e):function(e){return Oe.call(e)}(e)}function vl(e,t){return e>t}function El(e,t){return null!=e&&ge.call(e,t)}function _l(e,t){return null!=e&&t in ve(e)}function Tl(e,t,n){for(var l=n?ut:rt,o=e[0].length,i=e.length,a=i,r=z(i),u=Infinity,d=[];a--;){var s=e[a];a&&t&&(s=dt(s,ht(t))),u=rn(s.length,u),r[a]=!n&&(t||o>=120&&s.length>=120)?new Un(a&&s):void 0}s=e[0];var c=-1,p=r[0];e:for(;++c<o&&d.length<u;){var m=s[c],v=t?t(m):m;if(m=n||0!==m?m:0,!(p?Rt(p,v):l(d,v,n))){for(a=i;--a;){var E=r[a];if(!(E?Rt(E,v):l(e[a],v,n)))continue e}p&&p.push(v),d.push(m)}}return d}function yl(e,t,n){var l=null==(e=Ei(e,t=ao(t,e)))?e:e[hi(Hi(t))];return null==l?void 0:tt(l,e,n)}function Sl(e){return Va(e)&&ml(e)==i}function fl(e,t,n,l,o){return e===t||(null==e||null==t||!Va(e)&&!Va(t)?e!=e&&t!=t:function(e,t,n,l,o,s){var c=wa(e),p=wa(t),f=c?a:ni(e),N=p?a:ni(t),A=(f=f==i?E:f)==E,O=(N=N==i?E:N)==E,I=f==N;if(I&&Ba(e)){if(!Ba(t))return!1;c=!0,A=!1}if(I&&!A)return s||(s=new Fn),c||Ja(e)?jo(e,t,n,l,o,s):function(e,t,n,l,o,i,a){switch(n){case g:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!i(new Ye(e),new Ye(t)));case r:case u:case v:return ba(+e,+t);case d:return e.name==t.name&&e.message==t.message;case _:case y:return e==t+"";case m:var s=Ft;case T:if(s||(s=Ht),e.size!=t.size&&!(1&l))return!1;var c=a.get(e);if(c)return c==t;l|=2,a.set(e,t);var p=jo(s(e),s(t),l,o,i,a);return a.delete(e),p;case S:if(In)return In.call(e)==In.call(t)}return!1}(e,t,f,n,l,o,s);if(!(1&n)){var h=A&&ge.call(e,"__wrapped__"),C=O&&ge.call(t,"__wrapped__");if(h||C){var R=h?e.value():e,b=C?t.value():t;return s||(s=new Fn),o(R,b,n,l,s)}}return!!I&&(s||(s=new Fn),function(e,t,n,l,o,i){var a=1&n,r=Vo(e),u=r.length;if(u!=Vo(t).length&&!a)return!1;for(var d=u;d--;){var s=r[d];if(!(a?s in t:ge.call(t,s)))return!1}var c=i.get(e),p=i.get(t);if(c&&p)return c==t&&p==e;var m=!0;i.set(e,t),i.set(t,e);for(var v=a;++d<u;){var E=e[s=r[d]],_=t[s];if(l)var T=a?l(_,E,s,t,e,i):l(E,_,s,e,t,i);if(!(void 0===T?E===_||o(E,_,n,l,i):T)){m=!1;break}v||(v="constructor"==s)}if(m&&!v){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(m=!1)}return i.delete(e),i.delete(t),m}(e,t,n,l,o,s))}(e,t,n,l,fl,o))}function Pl(e,t,n,l){var o=n.length,i=o,a=!l;if(null==e)return!i;for(e=ve(e);o--;){var r=n[o];if(a&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++o<i;){var u=(r=n[o])[0],d=e[u],s=r[1];if(a&&r[2]){if(void 0===d&&!(u in e))return!1}else{var c=new Fn;if(l)var p=l(d,s,u,e,t,c);if(!(void 0===p?fl(s,d,3,l,c):p))return!1}}return!0}function gl(e){return!(!Ka(e)||(t=e,Ae&&Ae in t))&&(Ya(e)?be:oe).test(Ci(e));var t}function Nl(e){return"function"==typeof e?e:null==e?zr:"object"==typeof e?wa(e)?Cl(e[0],e[1]):hl(e):nu(e)}function Al(e){if(!ci(e))return on(e);var t=[];for(var n in ve(e))ge.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ol(e,t){return e<t}function Il(e,t){var n=-1,l=Ua(e)?z(e.length):[];return el(e,function(e,o,i){l[++n]=t(e,o,i)}),l}function hl(e){var t=Qo(e);return 1==t.length&&t[0][2]?mi(t[0][0],t[0][1]):function(n){return n===e||Pl(n,e,t)}}function Cl(e,t){return ui(e)&&pi(t)?mi(hi(e),t):function(n){var l=_r(n,e);return void 0===l&&l===t?Tr(n,e):fl(t,l,3)}}function Rl(e,t,n,l,o){e!==t&&al(t,function(i,a){if(o||(o=new Fn),Ka(i))!function(e,t,n,l,o,i,a){var r=Ti(e,n),u=Ti(t,n),d=a.get(u);if(d)Wn(e,n,d);else{var s=i?i(r,u,n+"",e,t,a):void 0,c=void 0===s;if(c){var p=wa(u),m=!p&&Ba(u),v=!p&&!m&&Ja(u);s=u,p||m||v?wa(r)?s=r:Fa(r)?s=To(r):m?(c=!1,s=co(u,!0)):v?(c=!1,s=mo(u,!0)):s=[]:Xa(u)||Ma(u)?(s=r,Ma(r)?s=rr(r):Ka(r)&&!Ya(r)||(s=oi(u))):c=!1}c&&(a.set(u,s),o(s,u,l,i,a),a.delete(u)),Wn(e,n,s)}}(e,t,a,n,Rl,l,o);else{var r=l?l(Ti(e,a),i,a+"",e,t,o):void 0;void 0===r&&(r=i),Wn(e,a,r)}},gr)}function bl(e,t){var n=e.length;if(n)return ai(t+=t<0?n:0,n)?e[t]:void 0}function Dl(e,t,n){t=t.length?dt(t,function(e){return wa(e)?function(t){return cl(t,1===e.length?e[0]:e)}:e}):[zr];var l=-1;return t=dt(t,ht($o())),function(e,t){var l=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var l=-1,o=e.criteria,i=t.criteria,a=o.length,r=n.length;++l<a;){var u=vo(o[l],i[l]);if(u)return l>=r?u:u*("desc"==n[l]?-1:1)}return e.index-t.index}(e,t,n)});l--;)e[l]=e[l].value;return e}(Il(e,function(e,n,o){return{criteria:dt(t,function(t){return t(e)}),index:++l,value:e}}))}function Ll(e,t,n){for(var l=-1,o=t.length,i={};++l<o;){var a=t[l],r=cl(e,a);n(r,a)&&Hl(i,ao(a,e),r)}return i}function Ml(e,t,n,l){var o=l?yt:Tt,i=-1,a=t.length,r=e;for(e===t&&(t=To(t)),n&&(r=dt(e,ht(n)));++i<a;)for(var u=0,d=t[i],s=n?n(d):d;(u=o(r,s,u,l))>-1;)r!==e&&Xe.call(r,u,1),Xe.call(e,u,1);return e}function wl(e,t){for(var n=e?t.length:0,l=n-1;n--;){var o=t[n];if(n==l||o!==i){var i=o;ai(o)?Xe.call(e,o,1):Ql(e,o)}}return e}function xl(e,t){return e+Jt(sn()*(t-e+1))}function Ul(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Fl(e,t){return fi(vi(e,t,zr),e+"")}function Bl(e){return kn(br(e))}function kl(e,t){var n=br(e);return Ni(n,qn(t,0,n.length))}function Hl(e,t,n,l){if(!Ka(e))return e;for(var o=-1,i=(t=ao(t,e)).length,a=i-1,r=e;null!=r&&++o<i;){var u=hi(t[o]),d=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var s=r[u];void 0===(d=l?l(s,u,r):void 0)&&(d=Ka(s)?s:ai(t[o+1])?[]:{})}jn(r,u,d),r=r[u]}return e}var Yl=yn?function(e,t){return yn.set(e,t),e}:zr,Wl=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:Kr(t),writable:!0})}:zr;function jl(e){return Ni(br(e))}function Kl(e,t,n){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=z(o);++l<o;)i[l]=e[l+t];return i}function Vl(e,t){var n;return el(e,function(e,l,o){return!(n=t(e,l,o))}),!!n}function Gl(e,t,n){var l=0,o=null==e?l:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;l<o;){var i=l+o>>>1,a=e[i];null!==a&&!Qa(a)&&(n?a<=t:a<t)?l=i+1:o=i}return o}return zl(e,t,zr,n)}function zl(e,t,n,l){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,r=null===t,u=Qa(t),d=void 0===t;o<i;){var s=Jt((o+i)/2),c=n(e[s]),p=void 0!==c,m=null===c,v=c==c,E=Qa(c);if(a)var _=l||v;else _=d?v&&(l||p):r?v&&p&&(l||!m):u?v&&p&&!m&&(l||!E):!m&&!E&&(l?c<=t:c<t);_?o=s+1:i=s}return rn(i,4294967294)}function Xl(e,t){for(var n=-1,l=e.length,o=0,i=[];++n<l;){var a=e[n],r=t?t(a):a;if(!n||!ba(r,u)){var u=r;i[o++]=0===a?0:a}}return i}function ql(e){return"number"==typeof e?e:Qa(e)?NaN:+e}function $l(e){if("string"==typeof e)return e;if(wa(e))return dt(e,$l)+"";if(Qa(e))return hn?hn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Zl(e,t,n){var l=-1,o=rt,i=e.length,a=!0,r=[],u=r;if(n)a=!1,o=ut;else if(i>=200){var d=t?null:Fo(e);if(d)return Ht(d);a=!1,o=Rt,u=new Un}else u=t?[]:r;e:for(;++l<i;){var s=e[l],c=t?t(s):s;if(s=n||0!==s?s:0,a&&c==c){for(var p=u.length;p--;)if(u[p]===c)continue e;t&&u.push(c),r.push(s)}else o(u,c,n)||(u!==r&&u.push(c),r.push(s))}return r}function Ql(e,t){return null==(e=Ei(e,t=ao(t,e)))||delete e[hi(Hi(t))]}function Jl(e,t,n,l){return Hl(e,t,n(cl(e,t)),l)}function eo(e,t,n,l){for(var o=e.length,i=l?o:-1;(l?i--:++i<o)&&t(e[i],i,e););return n?Kl(e,l?0:i,l?i+1:o):Kl(e,l?i+1:0,l?o:i)}function to(e,t){var n=e;return n instanceof Ln&&(n=n.value()),ct(t,function(e,t){return t.func.apply(t.thisArg,st([e],t.args))},n)}function no(e,t,n){var l=e.length;if(l<2)return l?Zl(e[0]):[];for(var o=-1,i=z(l);++o<l;)for(var a=e[o],r=-1;++r<l;)r!=o&&(i[o]=Jn(i[o]||a,e[r],t,n));return Zl(il(i,1),t,n)}function lo(e,t,n){for(var l=-1,o=e.length,i=t.length,a={};++l<o;)n(a,e[l],l<i?t[l]:void 0);return a}function oo(e){return Fa(e)?e:[]}function io(e){return"function"==typeof e?e:zr}function ao(e,t){return wa(e)?e:ui(e,t)?[e]:Ii(ur(e))}var ro=Fl;function uo(e,t,n){var l=e.length;return n=void 0===n?l:n,!t&&n>=l?e:Kl(e,t,n)}var so=qt||function(e){return je.clearTimeout(e)};function co(e,t){if(t)return e.slice();var n=e.length,l=We?We(n):new e.constructor(n);return e.copy(l),l}function po(e){var t=new e.constructor(e.byteLength);return new Ye(t).set(new Ye(e)),t}function mo(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vo(e,t){if(e!==t){var n=void 0!==e,l=null===e,o=e==e,i=Qa(e),a=void 0!==t,r=null===t,u=t==t,d=Qa(t);if(!r&&!d&&!i&&e>t||i&&a&&u&&!r&&!d||l&&a&&u||!n&&u||!o)return 1;if(!l&&!i&&!d&&e<t||d&&n&&o&&!l&&!i||r&&n&&o||!a&&o||!u)return-1}return 0}function Eo(e,t,n,l){for(var o=-1,i=e.length,a=n.length,r=-1,u=t.length,d=an(i-a,0),s=z(u+d),c=!l;++r<u;)s[r]=t[r];for(;++o<a;)(c||o<i)&&(s[n[o]]=e[o]);for(;d--;)s[r++]=e[o++];return s}function _o(e,t,n,l){for(var o=-1,i=e.length,a=-1,r=n.length,u=-1,d=t.length,s=an(i-r,0),c=z(s+d),p=!l;++o<s;)c[o]=e[o];for(var m=o;++u<d;)c[m+u]=t[u];for(;++a<r;)(p||o<i)&&(c[m+n[a]]=e[o++]);return c}function To(e,t){var n=-1,l=e.length;for(t||(t=z(l));++n<l;)t[n]=e[n];return t}function yo(e,t,n,l){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),o?zn(n,r,u):jn(n,r,u)}return n}function So(e,t){return function(n,l){var o=wa(n)?nt:Vn,i=t?t():{};return o(n,e,$o(l,2),i)}}function fo(e){return Fl(function(t,n){var l=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&ri(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=ve(t);++l<o;){var r=n[l];r&&e(t,r,l,i)}return t})}function Po(e,t){return function(n,l){if(null==n)return n;if(!Ua(n))return e(n,l);for(var o=n.length,i=t?o:-1,a=ve(n);(t?i--:++i<o)&&!1!==l(a[i],i,a););return n}}function go(e){return function(t,n,l){for(var o=-1,i=ve(t),a=l(t),r=a.length;r--;){var u=a[e?r:++o];if(!1===n(i[u],u,i))break}return t}}function No(e){return function(t){var n=Ut(t=ur(t))?jt(t):void 0,l=n?n[0]:t.charAt(0),o=n?uo(n,1).join(""):t.slice(1);return l[e]()+o}}function Ao(e){return function(t){return ct(Yr(Mr(t).replace(Ce,"")),e,"")}}function Oo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rn(e.prototype),l=e.apply(n,t);return Ka(l)?l:n}}function Io(e){return function(t,n,l){var o=ve(t);if(!Ua(t)){var i=$o(n,3);t=Pr(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,l);return a>-1?o[i?t[a]:a]:void 0}}function ho(e){return Ko(function(t){var l=t.length,o=l,i=Dn.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new Te(n);if(i&&!r&&"wrapper"==Xo(a))var r=new Dn([],!0)}for(o=r?o:l;++o<l;){var u=Xo(a=t[o]),d="wrapper"==u?zo(a):void 0;r=d&&di(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?r[Xo(d[0])].apply(r,d[3]):1==a.length&&di(a)?r[u]():r.thru(a)}return function(){var e=arguments,n=e[0];if(r&&1==e.length&&wa(n))return r.plant(n).value();for(var o=0,i=l?t[o].apply(this,e):n;++o<l;)i=t[o].call(this,i);return i}})}function Co(e,t,n,l,o,i,a,r,u,d){var s=128&t,c=1&t,p=2&t,m=24&t,v=512&t,E=p?void 0:Oo(e);return function _(){for(var T=arguments.length,y=z(T),S=T;S--;)y[S]=arguments[S];if(m)var f=qo(_),P=Lt(y,f);if(l&&(y=Eo(y,l,o,m)),i&&(y=_o(y,i,a,m)),T-=P,m&&T<d){var g=kt(y,f);return xo(e,t,Co,_.placeholder,n,y,g,r,u,d-T)}var N=c?n:this,A=p?N[e]:e;return T=y.length,r?y=_i(y,r):v&&T>1&&y.reverse(),s&&u<T&&(y.length=u),this&&this!==je&&this instanceof _&&(A=E||Oo(A)),A.apply(N,y)}}function Ro(e,t){return function(n,l){return function(e,t,n,l){return ul(e,function(e,o,i){t(l,n(e),o,i)}),l}(n,e,t(l),{})}}function bo(e,t){return function(n,l){var o;if(void 0===n&&void 0===l)return t;if(void 0!==n&&(o=n),void 0!==l){if(void 0===o)return l;"string"==typeof n||"string"==typeof l?(n=$l(n),l=$l(l)):(n=ql(n),l=ql(l)),o=e(n,l)}return o}}function Do(e){return Ko(function(t){return t=dt(t,ht($o())),Fl(function(n){var l=this;return e(t,function(e){return tt(e,l,n)})})})}function Lo(e,t){var n=(t=void 0===t?" ":$l(t)).length;if(n<2)return n?Ul(t,e):t;var l=Ul(t,Qt(e/Wt(t)));return Ut(t)?uo(jt(l),0,e).join(""):l.slice(0,e)}function Mo(e){return function(t,n,l){return l&&"number"!=typeof l&&ri(t,n,l)&&(n=l=void 0),t=lr(t),void 0===n?(n=t,t=0):n=lr(n),function(e,t,n,l){for(var o=-1,i=an(Qt((t-e)/(n||1)),0),a=z(i);i--;)a[l?i:++o]=e,e+=n;return a}(t,n,l=void 0===l?t<n?1:-1:lr(l),e)}}function wo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ar(t),n=ar(n)),e(t,n)}}function xo(e,t,n,l,o,i,a,r,u,d){var s=8&t;t|=s?32:64,4&(t&=~(s?64:32))||(t&=-4);var c=[e,t,o,s?i:void 0,s?a:void 0,s?void 0:i,s?void 0:a,r,u,d],p=n.apply(void 0,c);return di(e)&&yi(p,c),p.placeholder=l,Pi(p,e,t)}function Uo(e){var t=me[e];return function(e,n){if(e=ar(e),(n=null==n?0:rn(or(n),292))&&nn(e)){var l=(ur(e)+"e").split("e");return+((l=(ur(t(l[0]+"e"+(+l[1]+n)))+"e").split("e"))[0]+"e"+(+l[1]-n))}return t(e)}}var Fo=En&&1/Ht(new En([,-0]))[1]==1/0?function(e){return new En(e)}:Qr;function Bo(e){return function(t){var n=ni(t);return n==m?Ft(t):n==T?Yt(t):function(e,t){return dt(t,function(t){return[t,e[t]]})}(t,e(t))}}function ko(e,t,o,i,a,r,u,d){var s=2&t;if(!s&&"function"!=typeof e)throw new Te(n);var c=i?i.length:0;if(c||(t&=-97,i=a=void 0),u=void 0===u?u:an(or(u),0),d=void 0===d?d:or(d),c-=a?a.length:0,64&t){var p=i,m=a;i=a=void 0}var v=s?void 0:zo(e),E=[e,t,o,i,a,p,m,r,u,d];if(v&&function(e,t){var n=e[1],o=t[1],i=n|o;if(!(i<131||128==o&&8==n||128==o&&256==n&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==n))return e;1&o&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var r=e[3];e[3]=r?Eo(r,a,t[4]):a,e[4]=r?kt(e[3],l):t[4]}(a=t[5])&&(e[5]=(r=e[5])?_o(r,a,t[6]):a,e[6]=r?kt(e[5],l):t[6]),(a=t[7])&&(e[7]=a),128&o&&(e[8]=null==e[8]?t[8]:rn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(E,v),e=E[0],t=E[1],o=E[2],i=E[3],a=E[4],!(d=E[9]=void 0===E[9]?s?0:e.length:an(E[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,n){var l=Oo(e);return function o(){for(var i=arguments.length,a=z(i),r=i,u=qo(o);r--;)a[r]=arguments[r];var d=i<3&&a[0]!==u&&a[i-1]!==u?[]:kt(a,u);if((i-=d.length)<n)return xo(e,t,Co,o.placeholder,void 0,a,d,void 0,void 0,n-i);var s=this&&this!==je&&this instanceof o?l:e;return tt(s,this,a)}}(e,t,d):32!=t&&33!=t||a.length?Co.apply(void 0,E):function(e,t,n,l){var o=1&t,i=Oo(e);return function t(){for(var a=-1,r=arguments.length,u=-1,d=l.length,s=z(d+r),c=this&&this!==je&&this instanceof t?i:e;++u<d;)s[u]=l[u];for(;r--;)s[u++]=arguments[++a];return tt(c,o?n:this,s)}}(e,t,o,i);else var _=function(e,t,n){var l=1&t,o=Oo(e);return function t(){var i=this&&this!==je&&this instanceof t?o:e;return i.apply(l?n:this,arguments)}}(e,t,o);return Pi((v?Yl:yi)(_,E),e,t)}function Ho(e,t,n,l){return void 0===e||ba(e,Se[n])&&!ge.call(l,n)?t:e}function Yo(e,t,n,l,o,i){return Ka(e)&&Ka(t)&&(i.set(t,e),Rl(e,t,void 0,Yo,i),i.delete(t)),e}function Wo(e){return Xa(e)?void 0:e}function jo(e,t,n,l,o,i){var a=1&n,r=e.length,u=t.length;if(r!=u&&!(a&&u>r))return!1;var d=i.get(e),s=i.get(t);if(d&&s)return d==t&&s==e;var c=-1,p=!0,m=2&n?new Un:void 0;for(i.set(e,t),i.set(t,e);++c<r;){var v=e[c],E=t[c];if(l)var _=a?l(E,v,c,t,e,i):l(v,E,c,e,t,i);if(void 0!==_){if(_)continue;p=!1;break}if(m){if(!mt(t,function(e,t){if(!Rt(m,t)&&(v===e||o(v,e,n,l,i)))return m.push(t)})){p=!1;break}}else if(v!==E&&!o(v,E,n,l,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ko(e){return fi(vi(e,void 0,xi),e+"")}function Vo(e){return pl(e,Pr,ei)}function Go(e){return pl(e,gr,ti)}var zo=yn?function(e){return yn.get(e)}:Qr;function Xo(e){for(var t=e.name+"",n=Sn[t],l=ge.call(Sn,t)?n.length:0;l--;){var o=n[l],i=o.func;if(null==i||i==e)return o.name}return t}function qo(e){return(ge.call(Cn,"placeholder")?Cn:e).placeholder}function $o(){var e=Cn.iteratee||Xr;return e=e===Xr?Nl:e,arguments.length?e(arguments[0],arguments[1]):e}function Zo(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Qo(e){for(var t=Pr(e),n=t.length;n--;){var l=t[n],o=e[l];t[n]=[l,o,pi(o)]}return t}function Jo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return gl(n)?n:void 0}var ei=en?function(e){return null==e?[]:(e=ve(e),at(en(e),function(t){return ze.call(e,t)}))}:iu,ti=en?function(e){for(var t=[];e;)st(t,ei(e)),e=Ke(e);return t}:iu,ni=ml;function li(e,t,n){for(var l=-1,o=(t=ao(t,e)).length,i=!1;++l<o;){var a=hi(t[l]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++l!=o?i:!!(o=null==e?0:e.length)&&ja(o)&&ai(a,o)&&(wa(e)||Ma(e))}function oi(e){return"function"!=typeof e.constructor||ci(e)?{}:Rn(Ke(e))}function ii(e){return wa(e)||Ma(e)||!!(vt&&e&&e[vt])}function ai(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ri(e,t,n){if(!Ka(n))return!1;var l=typeof t;return!!("number"==l?Ua(n)&&ai(t,n.length):"string"==l&&t in n)&&ba(n[t],e)}function ui(e,t){if(wa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qa(e))||W.test(e)||!Y.test(e)||null!=t&&e in ve(t)}function di(e){var t=Xo(e),n=Cn[t];if("function"!=typeof n||!(t in Ln.prototype))return!1;if(e===n)return!0;var l=zo(n);return!!l&&e===l[0]}(pn&&ni(new pn(new ArrayBuffer(1)))!=g||mn&&ni(new mn)!=m||vn&&"[object Promise]"!=ni(vn.resolve())||En&&ni(new En)!=T||_n&&ni(new _n)!=f)&&(ni=function(e){var t=ml(e),n=t==E?e.constructor:void 0,l=n?Ci(n):"";if(l)switch(l){case fn:return g;case Pn:return m;case gn:return"[object Promise]";case Nn:return T;case An:return f}return t});var si=fe?Ya:au;function ci(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Se)}function pi(e){return e==e&&!Ka(e)}function mi(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in ve(n))}}function vi(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var l=arguments,o=-1,i=an(l.length-t,0),a=z(i);++o<i;)a[o]=l[t+o];o=-1;for(var r=z(t+1);++o<t;)r[o]=l[o];return r[t]=n(a),tt(e,this,r)}}function Ei(e,t){return t.length<2?e:cl(e,Kl(t,0,-1))}function _i(e,t){for(var n=e.length,l=rn(t.length,n),o=To(e);l--;){var i=t[l];e[l]=ai(i,n)?o[i]:void 0}return e}function Ti(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var yi=gi(Yl),Si=Zt||function(e,t){return je.setTimeout(e,t)},fi=gi(Wl);function Pi(e,t,n){var l=t+"";return fi(e,function(e,t){var n=t.length;if(!n)return e;var l=n-1;return t[l]=(n>1?"& ":"")+t[l],t=t.join(n>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+t+"] */\n")}(l,function(e,t){return lt(o,function(n){var l="_."+n[0];t&n[1]&&!rt(e,l)&&e.push(l)}),e.sort()}(function(e){var t=e.match(q);return t?t[1].split($):[]}(l),n)))}function gi(e){var t=0,n=0;return function(){var l=un(),o=16-(l-n);if(n=l,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ni(e,t){var n=-1,l=e.length,o=l-1;for(t=void 0===t?l:t;++n<t;){var i=xl(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}var Ai,Oi,Ii=(Ai=Aa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(j,function(e,n,l,o){t.push(l?o.replace(J,"$1"):n||e)}),t},function(e){return 500===Oi.size&&Oi.clear(),e}),Oi=Ai.cache,Ai);function hi(e){if("string"==typeof e||Qa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ci(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ri(e){if(e instanceof Ln)return e.clone();var t=new Dn(e.__wrapped__,e.__chain__);return t.__actions__=To(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var bi=Fl(function(e,t){return Fa(e)?Jn(e,il(t,1,Fa,!0)):[]}),Di=Fl(function(e,t){var n=Hi(t);return Fa(n)&&(n=void 0),Fa(e)?Jn(e,il(t,1,Fa,!0),$o(n,2)):[]}),Li=Fl(function(e,t){var n=Hi(t);return Fa(n)&&(n=void 0),Fa(e)?Jn(e,il(t,1,Fa,!0),void 0,n):[]});function Mi(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:or(n);return o<0&&(o=an(l+o,0)),_t(e,$o(t,3),o)}function wi(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l-1;return void 0!==n&&(o=or(n),o=n<0?an(l+o,0):rn(o,l-1)),_t(e,$o(t,3),o,!0)}function xi(e){return null!=e&&e.length?il(e,1):[]}function Ui(e){return e&&e.length?e[0]:void 0}var Fi=Fl(function(e){var t=dt(e,oo);return t.length&&t[0]===e[0]?Tl(t):[]}),Bi=Fl(function(e){var t=Hi(e),n=dt(e,oo);return t===Hi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Tl(n,$o(t,2)):[]}),ki=Fl(function(e){var t=Hi(e),n=dt(e,oo);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?Tl(n,void 0,t):[]});function Hi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Yi=Fl(Wi);function Wi(e,t){return e&&e.length&&t&&t.length?Ml(e,t):e}var ji=Ko(function(e,t){var n=null==e?0:e.length,l=Xn(e,t);return wl(e,dt(t,function(e){return ai(e,n)?+e:e}).sort(vo)),l});function Ki(e){return null==e?e:cn.call(e)}var Vi=Fl(function(e){return Zl(il(e,1,Fa,!0))}),Gi=Fl(function(e){var t=Hi(e);return Fa(t)&&(t=void 0),Zl(il(e,1,Fa,!0),$o(t,2))}),zi=Fl(function(e){var t=Hi(e);return t="function"==typeof t?t:void 0,Zl(il(e,1,Fa,!0),void 0,t)});function Xi(e){if(!e||!e.length)return[];var t=0;return e=at(e,function(e){if(Fa(e))return t=an(e.length,t),!0}),Ot(t,function(t){return dt(e,Pt(t))})}function qi(e,t){if(!e||!e.length)return[];var n=Xi(e);return null==t?n:dt(n,function(e){return tt(t,void 0,e)})}var $i=Fl(function(e,t){return Fa(e)?Jn(e,t):[]}),Zi=Fl(function(e){return no(at(e,Fa))}),Qi=Fl(function(e){var t=Hi(e);return Fa(t)&&(t=void 0),no(at(e,Fa),$o(t,2))}),Ji=Fl(function(e){var t=Hi(e);return t="function"==typeof t?t:void 0,no(at(e,Fa),void 0,t)}),ea=Fl(Xi),ta=Fl(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,qi(e,n)});function na(e){var t=Cn(e);return t.__chain__=!0,t}function la(e,t){return t(e)}var oa=Ko(function(e){var t=e.length,n=t?e[0]:0,l=this.__wrapped__,o=function(t){return Xn(t,e)};return!(t>1||this.__actions__.length)&&l instanceof Ln&&ai(n)?((l=l.slice(n,+n+(t?1:0))).__actions__.push({func:la,args:[o],thisArg:void 0}),new Dn(l,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(o)}),ia=So(function(e,t,n){ge.call(e,n)?++e[n]:zn(e,n,1)}),aa=Io(Mi),ra=Io(wi);function ua(e,t){return(wa(e)?lt:el)(e,$o(t,3))}function da(e,t){return(wa(e)?ot:tl)(e,$o(t,3))}var sa=So(function(e,t,n){ge.call(e,n)?e[n].push(t):zn(e,n,[t])}),ca=Fl(function(e,t,n){var l=-1,o="function"==typeof t,i=Ua(e)?z(e.length):[];return el(e,function(e){i[++l]=o?tt(t,e,n):yl(e,t,n)}),i}),pa=So(function(e,t,n){zn(e,n,t)});function ma(e,t){return(wa(e)?dt:Il)(e,$o(t,3))}var va=So(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ea=Fl(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ri(e,t[0],t[1])?t=[]:n>2&&ri(t[0],t[1],t[2])&&(t=[t[0]]),Dl(e,il(t,1),[])}),_a=$t||function(){return je.Date.now()};function Ta(e,t,n){return t=n?void 0:t,ko(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ya(e,t){var l;if("function"!=typeof t)throw new Te(n);return e=or(e),function(){return--e>0&&(l=t.apply(this,arguments)),e<=1&&(t=void 0),l}}var Sa=Fl(function(e,t,n){var l=1;if(n.length){var o=kt(n,qo(Sa));l|=32}return ko(e,l,t,n,o)}),fa=Fl(function(e,t,n){var l=3;if(n.length){var o=kt(n,qo(fa));l|=32}return ko(t,l,e,n,o)});function Pa(e,t,l){var o,i,a,r,u,d,s=0,c=!1,p=!1,m=!0;if("function"!=typeof e)throw new Te(n);function v(t){var n=o,l=i;return o=i=void 0,s=t,r=e.apply(l,n)}function E(e){return s=e,u=Si(T,t),c?v(e):r}function _(e){var n=e-d;return void 0===d||n>=t||n<0||p&&e-s>=a}function T(){var e=_a();if(_(e))return y(e);u=Si(T,function(e){var n=t-(e-d);return p?rn(n,a-(e-s)):n}(e))}function y(e){return u=void 0,m&&o?v(e):(o=i=void 0,r)}function S(){var e=_a(),n=_(e);if(o=arguments,i=this,d=e,n){if(void 0===u)return E(d);if(p)return so(u),u=Si(T,t),v(d)}return void 0===u&&(u=Si(T,t)),r}return t=ar(t)||0,Ka(l)&&(c=!!l.leading,a=(p="maxWait"in l)?an(ar(l.maxWait)||0,t):a,m="trailing"in l?!!l.trailing:m),S.cancel=function(){void 0!==u&&so(u),s=0,o=d=i=u=void 0},S.flush=function(){return void 0===u?r:y(_a())},S}var ga=Fl(function(e,t){return Qn(e,1,t)}),Na=Fl(function(e,t,n){return Qn(e,ar(t)||0,n)});function Aa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(n);var l=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=l.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return l.cache=i.set(o,a)||i,a};return l.cache=new(Aa.Cache||xn),l}function Oa(e){if("function"!=typeof e)throw new Te(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Aa.Cache=xn;var Ia=ro(function(e,t){var n=(t=1==t.length&&wa(t[0])?dt(t[0],ht($o())):dt(il(t,1),ht($o()))).length;return Fl(function(l){for(var o=-1,i=rn(l.length,n);++o<i;)l[o]=t[o].call(this,l[o]);return tt(e,this,l)})}),ha=Fl(function(e,t){return ko(e,32,void 0,t,kt(t,qo(ha)))}),Ca=Fl(function(e,t){return ko(e,64,void 0,t,kt(t,qo(Ca)))}),Ra=Ko(function(e,t){return ko(e,256,void 0,void 0,void 0,t)});function ba(e,t){return e===t||e!=e&&t!=t}var Da=wo(vl),La=wo(function(e,t){return e>=t}),Ma=Sl(function(){return arguments}())?Sl:function(e){return Va(e)&&ge.call(e,"callee")&&!ze.call(e,"callee")},wa=z.isArray,xa=qe?ht(qe):function(e){return Va(e)&&ml(e)==P};function Ua(e){return null!=e&&ja(e.length)&&!Ya(e)}function Fa(e){return Va(e)&&Ua(e)}var Ba=tn||au,ka=$e?ht($e):function(e){return Va(e)&&ml(e)==u};function Ha(e){if(!Va(e))return!1;var t=ml(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xa(e)}function Ya(e){if(!Ka(e))return!1;var t=ml(e);return t==s||t==c||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Wa(e){return"number"==typeof e&&e==or(e)}function ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ka(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Va(e){return null!=e&&"object"==typeof e}var Ga=Ze?ht(Ze):function(e){return Va(e)&&ni(e)==m};function za(e){return"number"==typeof e||Va(e)&&ml(e)==v}function Xa(e){if(!Va(e)||ml(e)!=E)return!1;var t=Ke(e);if(null===t)return!0;var n=ge.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Ie}var qa=Qe?ht(Qe):function(e){return Va(e)&&ml(e)==_},$a=Je?ht(Je):function(e){return Va(e)&&ni(e)==T};function Za(e){return"string"==typeof e||!wa(e)&&Va(e)&&ml(e)==y}function Qa(e){return"symbol"==typeof e||Va(e)&&ml(e)==S}var Ja=et?ht(et):function(e){return Va(e)&&ja(e.length)&&!!Ue[ml(e)]},er=wo(Ol),tr=wo(function(e,t){return e<=t});function nr(e){if(!e)return[];if(Ua(e))return Za(e)?jt(e):To(e);if(gt&&e[gt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[gt]());var t=ni(e);return(t==m?Ft:t==T?Ht:br)(e)}function lr(e){return e?(e=ar(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function or(e){var t=lr(e),n=t%1;return t==t?n?t-n:t:0}function ir(e){return e?qn(or(e),0,4294967295):0}function ar(e){if("number"==typeof e)return e;if(Qa(e))return NaN;if(Ka(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ka(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=It(e);var n=le.test(e);return n||ie.test(e)?He(e.slice(2),n?2:8):ne.test(e)?NaN:+e}function rr(e){return yo(e,gr(e))}function ur(e){return null==e?"":$l(e)}var dr=fo(function(e,t){if(ci(t)||Ua(t))yo(t,Pr(t),e);else for(var n in t)ge.call(t,n)&&jn(e,n,t[n])}),sr=fo(function(e,t){yo(t,gr(t),e)}),cr=fo(function(e,t,n,l){yo(t,gr(t),e,l)}),pr=fo(function(e,t,n,l){yo(t,Pr(t),e,l)}),mr=Ko(Xn),vr=Fl(function(e,t){e=ve(e);var n=-1,l=t.length,o=l>2?t[2]:void 0;for(o&&ri(t[0],t[1],o)&&(l=1);++n<l;)for(var i=t[n],a=gr(i),r=-1,u=a.length;++r<u;){var d=a[r],s=e[d];(void 0===s||ba(s,Se[d])&&!ge.call(e,d))&&(e[d]=i[d])}return e}),Er=Fl(function(e){return e.push(void 0,Yo),tt(Ar,void 0,e)});function _r(e,t,n){var l=null==e?void 0:cl(e,t);return void 0===l?n:l}function Tr(e,t){return null!=e&&li(e,t,_l)}var yr=Ro(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Oe.call(t)),e[t]=n},Kr(zr)),Sr=Ro(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Oe.call(t)),ge.call(e,t)?e[t].push(n):e[t]=[n]},$o),fr=Fl(yl);function Pr(e){return Ua(e)?Bn(e):Al(e)}function gr(e){return Ua(e)?Bn(e,!0):function(e){if(!Ka(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=ci(e),n=[];for(var l in e)("constructor"!=l||!t&&ge.call(e,l))&&n.push(l);return n}(e)}var Nr=fo(function(e,t,n){Rl(e,t,n)}),Ar=fo(function(e,t,n,l){Rl(e,t,n,l)}),Or=Ko(function(e,t){var n={};if(null==e)return n;var l=!1;t=dt(t,function(t){return t=ao(t,e),l||(l=t.length>1),t}),yo(e,Go(e),n),l&&(n=$n(n,7,Wo));for(var o=t.length;o--;)Ql(n,t[o]);return n}),Ir=Ko(function(e,t){return null==e?{}:function(e,t){return Ll(e,t,function(t,n){return Tr(e,n)})}(e,t)});function hr(e,t){if(null==e)return{};var n=dt(Go(e),function(e){return[e]});return t=$o(t),Ll(e,n,function(e,n){return t(e,n[0])})}var Cr=Bo(Pr),Rr=Bo(gr);function br(e){return null==e?[]:Ct(e,Pr(e))}var Dr=Ao(function(e,t,n){return t=t.toLowerCase(),e+(n?Lr(t):t)});function Lr(e){return Hr(ur(e).toLowerCase())}function Mr(e){return(e=ur(e))&&e.replace(re,Mt).replace(Re,"")}var wr=Ao(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),xr=Ao(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ur=No("toLowerCase"),Fr=Ao(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Br=Ao(function(e,t,n){return e+(n?" ":"")+Hr(t)}),kr=Ao(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Hr=No("toUpperCase");function Yr(e,t,n){return e=ur(e),void 0===(t=n?void 0:t)?function(e){return Me.test(e)}(e)?function(e){return e.match(De)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Wr=Fl(function(e,t){try{return tt(e,void 0,t)}catch(e){return Ha(e)?e:new ce(e)}}),jr=Ko(function(e,t){return lt(t,function(t){t=hi(t),zn(e,t,Sa(e[t],e))}),e});function Kr(e){return function(){return e}}var Vr=ho(),Gr=ho(!0);function zr(e){return e}function Xr(e){return Nl("function"==typeof e?e:$n(e,1))}var qr=Fl(function(e,t){return function(n){return yl(n,e,t)}}),$r=Fl(function(e,t){return function(n){return yl(e,n,t)}});function Zr(e,t,n){var l=Pr(t),o=sl(t,l);null!=n||Ka(t)&&(o.length||!l.length)||(n=t,t=e,e=this,o=sl(t,Pr(t)));var i=!(Ka(n)&&"chain"in n&&!n.chain),a=Ya(e);return lt(o,function(n){var l=t[n];e[n]=l,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=To(this.__actions__);return o.push({func:l,args:arguments,thisArg:e}),n.__chain__=t,n}return l.apply(e,st([this.value()],arguments))})}),e}function Qr(){}var Jr=Do(dt),eu=Do(it),tu=Do(mt);function nu(e){return ui(e)?Pt(hi(e)):function(e){return function(t){return cl(t,e)}}(e)}var lu=Mo(),ou=Mo(!0);function iu(){return[]}function au(){return!1}var ru,uu=bo(function(e,t){return e+t},0),du=Uo("ceil"),su=bo(function(e,t){return e/t},1),cu=Uo("floor"),pu=bo(function(e,t){return e*t},1),mu=Uo("round"),vu=bo(function(e,t){return e-t},0);return Cn.after=function(e,t){if("function"!=typeof t)throw new Te(n);return e=or(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=Ta,Cn.assign=dr,Cn.assignIn=sr,Cn.assignInWith=cr,Cn.assignWith=pr,Cn.at=mr,Cn.before=ya,Cn.bind=Sa,Cn.bindAll=jr,Cn.bindKey=fa,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return wa(e)?e:[e]},Cn.chain=na,Cn.chunk=function(e,t,n){t=(n?ri(e,t,n):void 0===t)?1:an(or(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var o=0,i=0,a=z(Qt(l/t));o<l;)a[i++]=Kl(e,o,o+=t);return a},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,l=0,o=[];++t<n;){var i=e[t];i&&(o[l++]=i)}return o},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=z(e-1),n=arguments[0],l=e;l--;)t[l-1]=arguments[l];return st(wa(n)?To(n):[n],il(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,l=$o();return e=t?dt(e,function(e){if("function"!=typeof e[1])throw new Te(n);return[l(e[0]),e[1]]}):[],Fl(function(n){for(var l=-1;++l<t;){var o=e[l];if(tt(o[0],this,n))return tt(o[1],this,n)}})},Cn.conforms=function(e){return function(e){var t=Pr(e);return function(n){return Zn(n,e,t)}}($n(e,1))},Cn.constant=Kr,Cn.countBy=ia,Cn.create=function(e,t){var n=Rn(e);return null==t?n:Gn(n,t)},Cn.curry=function e(t,n,l){var o=ko(t,8,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Cn.curryRight=function e(t,n,l){var o=ko(t,16,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Cn.debounce=Pa,Cn.defaults=vr,Cn.defaultsDeep=Er,Cn.defer=ga,Cn.delay=Na,Cn.difference=bi,Cn.differenceBy=Di,Cn.differenceWith=Li,Cn.drop=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,(t=n||void 0===t?1:or(t))<0?0:t,l):[]},Cn.dropRight=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,0,(t=l-(t=n||void 0===t?1:or(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!0):[]},Cn.fill=function(e,t,n,l){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&ri(e,t,n)&&(n=0,l=o),function(e,t,n,l){var o=e.length;for((n=or(n))<0&&(n=-n>o?0:o+n),(l=void 0===l||l>o?o:or(l))<0&&(l+=o),l=n>l?0:ir(l);n<l;)e[n++]=t;return e}(e,t,n,l)):[]},Cn.filter=function(e,t){return(wa(e)?at:ol)(e,$o(t,3))},Cn.flatMap=function(e,t){return il(ma(e,t),1)},Cn.flatMapDeep=function(e,t){return il(ma(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:or(n),il(ma(e,t),n)},Cn.flatten=xi,Cn.flattenDeep=function(e){return null!=e&&e.length?il(e,1/0):[]},Cn.flattenDepth=function(e,t){return null!=e&&e.length?il(e,t=void 0===t?1:or(t)):[]},Cn.flip=function(e){return ko(e,512)},Cn.flow=Vr,Cn.flowRight=Gr,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,l={};++t<n;){var o=e[t];l[o[0]]=o[1]}return l},Cn.functions=function(e){return null==e?[]:sl(e,Pr(e))},Cn.functionsIn=function(e){return null==e?[]:sl(e,gr(e))},Cn.groupBy=sa,Cn.initial=function(e){return null!=e&&e.length?Kl(e,0,-1):[]},Cn.intersection=Fi,Cn.intersectionBy=Bi,Cn.intersectionWith=ki,Cn.invert=yr,Cn.invertBy=Sr,Cn.invokeMap=ca,Cn.iteratee=Xr,Cn.keyBy=pa,Cn.keys=Pr,Cn.keysIn=gr,Cn.map=ma,Cn.mapKeys=function(e,t){var n={};return t=$o(t,3),ul(e,function(e,l,o){zn(n,t(e,l,o),e)}),n},Cn.mapValues=function(e,t){var n={};return t=$o(t,3),ul(e,function(e,l,o){zn(n,l,t(e,l,o))}),n},Cn.matches=function(e){return hl($n(e,1))},Cn.matchesProperty=function(e,t){return Cl(e,$n(t,1))},Cn.memoize=Aa,Cn.merge=Nr,Cn.mergeWith=Ar,Cn.method=qr,Cn.methodOf=$r,Cn.mixin=Zr,Cn.negate=Oa,Cn.nthArg=function(e){return e=or(e),Fl(function(t){return bl(t,e)})},Cn.omit=Or,Cn.omitBy=function(e,t){return hr(e,Oa($o(t)))},Cn.once=function(e){return ya(2,e)},Cn.orderBy=function(e,t,n,l){return null==e?[]:(wa(t)||(t=null==t?[]:[t]),wa(n=l?void 0:n)||(n=null==n?[]:[n]),Dl(e,t,n))},Cn.over=Jr,Cn.overArgs=Ia,Cn.overEvery=eu,Cn.overSome=tu,Cn.partial=ha,Cn.partialRight=Ca,Cn.partition=va,Cn.pick=Ir,Cn.pickBy=hr,Cn.property=nu,Cn.propertyOf=function(e){return function(t){return null==e?void 0:cl(e,t)}},Cn.pull=Yi,Cn.pullAll=Wi,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ml(e,t,$o(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ml(e,t,void 0,n):e},Cn.pullAt=ji,Cn.range=lu,Cn.rangeRight=ou,Cn.rearg=Ra,Cn.reject=function(e,t){return(wa(e)?at:ol)(e,Oa($o(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var l=-1,o=[],i=e.length;for(t=$o(t,3);++l<i;){var a=e[l];t(a,l,e)&&(n.push(a),o.push(l))}return wl(e,o),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new Te(n);return Fl(e,t=void 0===t?t:or(t))},Cn.reverse=Ki,Cn.sampleSize=function(e,t,n){return t=(n?ri(e,t,n):void 0===t)?1:or(t),(wa(e)?Hn:kl)(e,t)},Cn.set=function(e,t,n){return null==e?e:Hl(e,t,n)},Cn.setWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Hl(e,t,n,l)},Cn.shuffle=function(e){return(wa(e)?Yn:jl)(e)},Cn.slice=function(e,t,n){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&ri(e,t,n)?(t=0,n=l):(t=null==t?0:or(t),n=void 0===n?l:or(n)),Kl(e,t,n)):[]},Cn.sortBy=Ea,Cn.sortedUniq=function(e){return e&&e.length?Xl(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Xl(e,$o(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&ri(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ur(e))&&("string"==typeof t||null!=t&&!qa(t))&&!(t=$l(t))&&Ut(e)?uo(jt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new Te(n);return t=null==t?0:an(or(t),0),Fl(function(n){var l=n[t],o=uo(n,0,t);return l&&st(o,l),tt(e,this,o)})},Cn.tail=function(e){var t=null==e?0:e.length;return t?Kl(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Kl(e,0,(t=n||void 0===t?1:or(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,(t=l-(t=n||void 0===t?1:or(t)))<0?0:t,l):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?eo(e,$o(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,l){var o=!0,i=!0;if("function"!=typeof e)throw new Te(n);return Ka(l)&&(o="leading"in l?!!l.leading:o,i="trailing"in l?!!l.trailing:i),Pa(e,t,{leading:o,maxWait:t,trailing:i})},Cn.thru=la,Cn.toArray=nr,Cn.toPairs=Cr,Cn.toPairsIn=Rr,Cn.toPath=function(e){return wa(e)?dt(e,hi):Qa(e)?[e]:To(Ii(ur(e)))},Cn.toPlainObject=rr,Cn.transform=function(e,t,n){var l=wa(e),o=l||Ba(e)||Ja(e);if(t=$o(t,4),null==n){var i=e&&e.constructor;n=o?l?new i:[]:Ka(e)&&Ya(i)?Rn(Ke(e)):{}}return(o?lt:ul)(e,function(e,l,o){return t(n,e,l,o)}),n},Cn.unary=function(e){return Ta(e,1)},Cn.union=Vi,Cn.unionBy=Gi,Cn.unionWith=zi,Cn.uniq=function(e){return e&&e.length?Zl(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Zl(e,$o(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Zl(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||Ql(e,t)},Cn.unzip=Xi,Cn.unzipWith=qi,Cn.update=function(e,t,n){return null==e?e:Jl(e,t,io(n))},Cn.updateWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Jl(e,t,io(n),l)},Cn.values=br,Cn.valuesIn=function(e){return null==e?[]:Ct(e,gr(e))},Cn.without=$i,Cn.words=Yr,Cn.wrap=function(e,t){return ha(io(t),e)},Cn.xor=Zi,Cn.xorBy=Qi,Cn.xorWith=Ji,Cn.zip=ea,Cn.zipObject=function(e,t){return lo(e||[],t||[],jn)},Cn.zipObjectDeep=function(e,t){return lo(e||[],t||[],Hl)},Cn.zipWith=ta,Cn.entries=Cr,Cn.entriesIn=Rr,Cn.extend=sr,Cn.extendWith=cr,Zr(Cn,Cn),Cn.add=uu,Cn.attempt=Wr,Cn.camelCase=Dr,Cn.capitalize=Lr,Cn.ceil=du,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ar(n))==n?n:0),void 0!==t&&(t=(t=ar(t))==t?t:0),qn(ar(e),t,n)},Cn.clone=function(e){return $n(e,4)},Cn.cloneDeep=function(e){return $n(e,5)},Cn.cloneDeepWith=function(e,t){return $n(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return $n(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Zn(e,t,Pr(t))},Cn.deburr=Mr,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=su,Cn.endsWith=function(e,t,n){e=ur(e),t=$l(t);var l=e.length,o=n=void 0===n?l:qn(or(n),0,l);return(n-=t.length)>=0&&e.slice(n,o)==t},Cn.eq=ba,Cn.escape=function(e){return(e=ur(e))&&F.test(e)?e.replace(x,wt):e},Cn.escapeRegExp=function(e){return(e=ur(e))&&V.test(e)?e.replace(K,"\\$&"):e},Cn.every=function(e,t,n){var l=wa(e)?it:nl;return n&&ri(e,t,n)&&(t=void 0),l(e,$o(t,3))},Cn.find=aa,Cn.findIndex=Mi,Cn.findKey=function(e,t){return Et(e,$o(t,3),ul)},Cn.findLast=ra,Cn.findLastIndex=wi,Cn.findLastKey=function(e,t){return Et(e,$o(t,3),dl)},Cn.floor=cu,Cn.forEach=ua,Cn.forEachRight=da,Cn.forIn=function(e,t){return null==e?e:al(e,$o(t,3),gr)},Cn.forInRight=function(e,t){return null==e?e:rl(e,$o(t,3),gr)},Cn.forOwn=function(e,t){return e&&ul(e,$o(t,3))},Cn.forOwnRight=function(e,t){return e&&dl(e,$o(t,3))},Cn.get=_r,Cn.gt=Da,Cn.gte=La,Cn.has=function(e,t){return null!=e&&li(e,t,El)},Cn.hasIn=Tr,Cn.head=Ui,Cn.identity=zr,Cn.includes=function(e,t,n,l){e=Ua(e)?e:br(e),n=n&&!l?or(n):0;var o=e.length;return n<0&&(n=an(o+n,0)),Za(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Tt(e,t,n)>-1},Cn.indexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:or(n);return o<0&&(o=an(l+o,0)),Tt(e,t,o)},Cn.inRange=function(e,t,n){return t=lr(t),void 0===n?(n=t,t=0):n=lr(n),function(e,t,n){return e>=rn(t,n)&&e<an(t,n)}(e=ar(e),t,n)},Cn.invoke=fr,Cn.isArguments=Ma,Cn.isArray=wa,Cn.isArrayBuffer=xa,Cn.isArrayLike=Ua,Cn.isArrayLikeObject=Fa,Cn.isBoolean=function(e){return!0===e||!1===e||Va(e)&&ml(e)==r},Cn.isBuffer=Ba,Cn.isDate=ka,Cn.isElement=function(e){return Va(e)&&1===e.nodeType&&!Xa(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Ua(e)&&(wa(e)||"string"==typeof e||"function"==typeof e.splice||Ba(e)||Ja(e)||Ma(e)))return!e.length;var t=ni(e);if(t==m||t==T)return!e.size;if(ci(e))return!Al(e).length;for(var n in e)if(ge.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return fl(e,t)},Cn.isEqualWith=function(e,t,n){var l=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===l?fl(e,t,void 0,n):!!l},Cn.isError=Ha,Cn.isFinite=function(e){return"number"==typeof e&&nn(e)},Cn.isFunction=Ya,Cn.isInteger=Wa,Cn.isLength=ja,Cn.isMap=Ga,Cn.isMatch=function(e,t){return e===t||Pl(e,t,Qo(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Pl(e,t,Qo(t),n)},Cn.isNaN=function(e){return za(e)&&e!=+e},Cn.isNative=function(e){if(si(e))throw new ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return gl(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=za,Cn.isObject=Ka,Cn.isObjectLike=Va,Cn.isPlainObject=Xa,Cn.isRegExp=qa,Cn.isSafeInteger=function(e){return Wa(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=$a,Cn.isString=Za,Cn.isSymbol=Qa,Cn.isTypedArray=Ja,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Va(e)&&ni(e)==f},Cn.isWeakSet=function(e){return Va(e)&&"[object WeakSet]"==ml(e)},Cn.join=function(e,t){return null==e?"":ln.call(e,t)},Cn.kebabCase=wr,Cn.last=Hi,Cn.lastIndexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l;return void 0!==n&&(o=(o=or(n))<0?an(l+o,0):rn(o,l-1)),t==t?function(e,t,n){for(var l=n+1;l--;)if(e[l]===t)return l;return l}(e,t,o):_t(e,St,o,!0)},Cn.lowerCase=xr,Cn.lowerFirst=Ur,Cn.lt=er,Cn.lte=tr,Cn.max=function(e){return e&&e.length?ll(e,zr,vl):void 0},Cn.maxBy=function(e,t){return e&&e.length?ll(e,$o(t,2),vl):void 0},Cn.mean=function(e){return ft(e,zr)},Cn.meanBy=function(e,t){return ft(e,$o(t,2))},Cn.min=function(e){return e&&e.length?ll(e,zr,Ol):void 0},Cn.minBy=function(e,t){return e&&e.length?ll(e,$o(t,2),Ol):void 0},Cn.stubArray=iu,Cn.stubFalse=au,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=pu,Cn.nth=function(e,t){return e&&e.length?bl(e,or(t)):void 0},Cn.noConflict=function(){return je._===this&&(je._=he),this},Cn.noop=Qr,Cn.now=_a,Cn.pad=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;if(!t||l>=t)return e;var o=(t-l)/2;return Lo(Jt(o),n)+e+Lo(Qt(o),n)},Cn.padEnd=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;return t&&l<t?e+Lo(t-l,n):e},Cn.padStart=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;return t&&l<t?Lo(t-l,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),dn(ur(e).replace(G,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ri(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=lr(e),void 0===t?(t=e,e=0):t=lr(t)),e>t){var l=e;e=t,t=l}if(n||e%1||t%1){var o=sn();return rn(e+o*(t-e+ke("1e-"+((o+"").length-1))),t)}return xl(e,t)},Cn.reduce=function(e,t,n){var l=wa(e)?ct:Nt,o=arguments.length<3;return l(e,$o(t,4),n,o,el)},Cn.reduceRight=function(e,t,n){var l=wa(e)?pt:Nt,o=arguments.length<3;return l(e,$o(t,4),n,o,tl)},Cn.repeat=function(e,t,n){return t=(n?ri(e,t,n):void 0===t)?1:or(t),Ul(ur(e),t)},Cn.replace=function(){var e=arguments,t=ur(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var l=-1,o=(t=ao(t,e)).length;for(o||(o=1,e=void 0);++l<o;){var i=null==e?void 0:e[hi(t[l])];void 0===i&&(l=o,i=n),e=Ya(i)?i.call(e):i}return e},Cn.round=mu,Cn.runInContext=e,Cn.sample=function(e){return(wa(e)?kn:Bl)(e)},Cn.size=function(e){if(null==e)return 0;if(Ua(e))return Za(e)?Wt(e):e.length;var t=ni(e);return t==m||t==T?e.size:Al(e).length},Cn.snakeCase=Fr,Cn.some=function(e,t,n){var l=wa(e)?mt:Vl;return n&&ri(e,t,n)&&(t=void 0),l(e,$o(t,3))},Cn.sortedIndex=function(e,t){return Gl(e,t)},Cn.sortedIndexBy=function(e,t,n){return zl(e,t,$o(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var l=Gl(e,t);if(l<n&&ba(e[l],t))return l}return-1},Cn.sortedLastIndex=function(e,t){return Gl(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return zl(e,t,$o(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Gl(e,t,!0)-1;if(ba(e[n],t))return n}return-1},Cn.startCase=Br,Cn.startsWith=function(e,t,n){return e=ur(e),n=null==n?0:qn(or(n),0,e.length),t=$l(t),e.slice(n,n+t.length)==t},Cn.subtract=vu,Cn.sum=function(e){return e&&e.length?At(e,zr):0},Cn.sumBy=function(e,t){return e&&e.length?At(e,$o(t,2)):0},Cn.template=function(e,t,n){var l=Cn.templateSettings;n&&ri(e,t,n)&&(t=void 0),e=ur(e),t=cr({},t,l,Ho);var o,i,a=cr({},t.imports,l.imports,Ho),r=Pr(a),u=Ct(a,r),d=0,s=t.interpolate||ue,c="__p += '",p=Ee((t.escape||ue).source+"|"+s.source+"|"+(s===H?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),m="//# sourceURL="+(ge.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xe+"]")+"\n";e.replace(p,function(t,n,l,a,r,u){return l||(l=a),c+=e.slice(d,u).replace(de,xt),n&&(o=!0,c+="' +\n__e("+n+") +\n'"),r&&(i=!0,c+="';\n"+r+";\n__p += '"),l&&(c+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),d=u+t.length,t}),c+="';\n";var v=ge.call(t,"variable")&&t.variable;if(v){if(Q.test(v))throw new ce("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(i?c.replace(D,""):c).replace(L,"$1").replace(M,"$1;"),c="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var E=Wr(function(){return pe(r,m+"return "+c).apply(void 0,u)});if(E.source=c,Ha(E))throw E;return E},Cn.times=function(e,t){if((e=or(e))<1||e>9007199254740991)return[];var n=4294967295,l=rn(e,4294967295);e-=4294967295;for(var o=Ot(l,t=$o(t));++n<e;)t(n);return o},Cn.toFinite=lr,Cn.toInteger=or,Cn.toLength=ir,Cn.toLower=function(e){return ur(e).toLowerCase()},Cn.toNumber=ar,Cn.toSafeInteger=function(e){return e?qn(or(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=ur,Cn.toUpper=function(e){return ur(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return It(e);if(!e||!(t=$l(t)))return e;var l=jt(e),o=jt(t);return uo(l,bt(l,o),Dt(l,o)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return e.slice(0,Kt(e)+1);if(!e||!(t=$l(t)))return e;var l=jt(e);return uo(l,0,Dt(l,jt(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=$l(t)))return e;var l=jt(e);return uo(l,bt(l,jt(t))).join("")},Cn.truncate=function(e,t){var n=30,l="...";if(Ka(t)){var o="separator"in t?t.separator:o;n="length"in t?or(t.length):n,l="omission"in t?$l(t.omission):l}var i=(e=ur(e)).length;if(Ut(e)){var a=jt(e);i=a.length}if(n>=i)return e;var r=n-Wt(l);if(r<1)return l;var u=a?uo(a,0,r).join(""):e.slice(0,r);if(void 0===o)return u+l;if(a&&(r+=u.length-r),qa(o)){if(e.slice(r).search(o)){var d,s=u;for(o.global||(o=Ee(o.source,ur(te.exec(o))+"g")),o.lastIndex=0;d=o.exec(s);)var c=d.index;u=u.slice(0,void 0===c?r:c)}}else if(e.indexOf($l(o),r)!=r){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+l},Cn.unescape=function(e){return(e=ur(e))&&U.test(e)?e.replace(w,Vt):e},Cn.uniqueId=function(e){var t=++Ne;return ur(e)+t},Cn.upperCase=kr,Cn.upperFirst=Hr,Cn.each=ua,Cn.eachRight=da,Cn.first=Ui,Zr(Cn,(ru={},ul(Cn,function(e,t){ge.call(Cn.prototype,t)||(ru[t]=e)}),ru),{chain:!1}),Cn.VERSION="4.17.21",lt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Cn[e].placeholder=Cn}),lt(["drop","take"],function(e,t){Ln.prototype[e]=function(n){n=void 0===n?1:an(or(n),0);var l=this.__filtered__&&!t?new Ln(this):this.clone();return l.__filtered__?l.__takeCount__=rn(n,l.__takeCount__):l.__views__.push({size:rn(n,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},Ln.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),lt(["filter","map","takeWhile"],function(e,t){var n=t+1,l=1==n||3==n;Ln.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:$o(e,3),type:n}),t.__filtered__=t.__filtered__||l,t}}),lt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ln.prototype[e]=function(){return this[n](1).value()[0]}}),lt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ln.prototype[e]=function(){return this.__filtered__?new Ln(this):this[n](1)}}),Ln.prototype.compact=function(){return this.filter(zr)},Ln.prototype.find=function(e){return this.filter(e).head()},Ln.prototype.findLast=function(e){return this.reverse().find(e)},Ln.prototype.invokeMap=Fl(function(e,t){return"function"==typeof e?new Ln(this):this.map(function(n){return yl(n,e,t)})}),Ln.prototype.reject=function(e){return this.filter(Oa($o(e)))},Ln.prototype.slice=function(e,t){e=or(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ln(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=or(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ln.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},ul(Ln.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),o=Cn[l?"take"+("last"==t?"Right":""):t],i=l||/^find/.test(t);o&&(Cn.prototype[t]=function(){var t=this.__wrapped__,a=l?[1]:arguments,r=t instanceof Ln,u=a[0],d=r||wa(t),s=function(e){var t=o.apply(Cn,st([e],a));return l&&c?t[0]:t};d&&n&&"function"==typeof u&&1!=u.length&&(r=d=!1);var c=this.__chain__,p=!!this.__actions__.length,m=i&&!c,v=r&&!p;if(!i&&d){t=v?t:new Ln(this);var E=e.apply(t,a);return E.__actions__.push({func:la,args:[s],thisArg:void 0}),new Dn(E,c)}return m&&v?e.apply(this,a):(E=this.thru(s),m?l?E.value()[0]:E.value():E)})}),lt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var o=this.value();return t.apply(wa(o)?o:[],e)}return this[n](function(n){return t.apply(wa(n)?n:[],e)})}}),ul(Ln.prototype,function(e,t){var n=Cn[t];if(n){var l=n.name+"";ge.call(Sn,l)||(Sn[l]=[]),Sn[l].push({name:t,func:n})}}),Sn[Co(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var e=new Ln(this.__wrapped__);return e.__actions__=To(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=To(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=To(this.__views__),e},Ln.prototype.reverse=function(){if(this.__filtered__){var e=new Ln(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ln.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=wa(e),l=t<0,o=n?e.length:0,i=function(e,t,n){for(var l=-1,o=n.length;++l<o;){var i=n[l],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=rn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,r=i.end,u=r-a,d=l?r:a-1,s=this.__iteratees__,c=s.length,p=0,m=rn(u,this.__takeCount__);if(!n||!l&&o==u&&m==u)return to(e,this.__actions__);var v=[];e:for(;u--&&p<m;){for(var E=-1,_=e[d+=t];++E<c;){var T=s[E],y=T.type,S=(0,T.iteratee)(_);if(2==y)_=S;else if(!S){if(1==y)continue e;break e}}v[p++]=_}return v},Cn.prototype.at=oa,Cn.prototype.chain=function(){return na(this)},Cn.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=nr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof bn;){var l=Ri(n);l.__index__=0,l.__values__=void 0,t?o.__wrapped__=l:t=l;var o=l;n=n.__wrapped__}return o.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ln){var t=e;return this.__actions__.length&&(t=new Ln(this)),(t=t.reverse()).__actions__.push({func:la,args:[Ki],thisArg:void 0}),new Dn(t,this.__chain__)}return this.thru(Ki)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return to(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,gt&&(Cn.prototype[gt]=function(){return this}),Cn}();Ve?((Ve.exports=Gt)._=Gt,Ke._=Gt):je._=Gt}).call(p)});function qe(e){var o,i,r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h;let{t:C,unit:R,allUnits:b,setUnits:D,index:L,focusIndex:M,setFocusIndex:w,getfloorlistdata:x,floorlist:U,occupencyOptions:F,rentedmonths:B,nonrentedusage:k,formData:H,handleRemoveUnit:Y,isMobile:W,stateId:j,formState:K,setError:V,clearErrors:G,usageCategoryMajorMenu:z,subUsageCategoryMenu:X}=e;const{data:q={}}=Digit.Hooks.pt.usePropertyMDMS(j,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]);let $=[];$=(null==q||null===(o=q.PropertyTax)||void 0===o||null===(i=o.UsageCategory)||void 0===i?void 0:i.filter(e=>"MIXED"!==(null==e?void 0:e.code)))||[];const[Z,Q]=n.useState(()=>{var e,t;const{existingUsageCategory:n}=R;if([n,null==H||null===(e=H.usageCategoryMajor)||void 0===e?void 0:e.code].includes("RESIDENTIAL"))return z($).filter(e=>"RESIDENTIAL"===(null==e?void 0:e.code))[0];if("MIXED"!==(null==H||null===(t=H.usageCategoryMajor)||void 0===t?void 0:t.code));else if(n){const e=null==n?void 0:n.split(".");return z($).filter(t=>(null==t?void 0:t.code)===e[0]+"."+e[1])[0]}}),{control:J,formState:ee,watch:te,setError:ne,clearErrors:le,setValue:oe}=a.useForm(),ie=te();n.useEffect(()=>{var e;const t=null==H||null===(e=H.usageCategoryMajor)||void 0===e?void 0:e.code;t!==(null==Z?void 0:Z.code)&&"MIXED"!==t&&Q(null==H?void 0:H.usageCategoryMajor)},[null==H||null===(r=H.usageCategoryMajor)||void 0===r?void 0:r.code]),n.useEffect(()=>{var e;"RESIDENTIAL"===(null==Z?void 0:Z.code)?oe("usageCategory",Z):"RESIDENTIAL"===(null===(e=ie.usageCategory)||void 0===e?void 0:e.code)&&oe("usageCategory",null)},[Z]),n.useEffect(()=>{var e,t,n;let l=Object.keys(ie);const o={};l.forEach(e=>o[e]=R[e]),Xe.isEqual(ie,o)||D(e=>e.map(e=>e.key===R.key?{...e,...ie}:e));for(let e in ie)ee.errors[e]?(["builtUpArea","arv"].includes(e)&&!isNaN(ie[e])&&ee.errors[e].type===e.toUpperCase()+"_INVALID"||ie[e]&&ee.errors[e].type===e.toUpperCase()+"_REQUIRED")&&le([e]):ie[e]?["builtUpArea","arv"].includes(e)&&isNaN(ie[e])&&ne(e,{type:e.toUpperCase()+"_INVALID",message:C("ERR_DEFAULT_INPUT_FIELD_MSG")}):ne(e,{type:e.toUpperCase()+"_REQUIRED",message:C("CORE_COMMON_REQUIRED_ERRMSG")});!Object.keys(ee.errors).length||null!=K&&null!==(e=K.errors)&&void 0!==e&&e.units?(null==K||null===(t=K.errors)||void 0===t||null===(n=t.units)||void 0===n?void 0:n.type)!==""+R.key||Object.keys(ee.errors).length||G("units"):V("units",{type:""+R.key,message:Object.keys(ee.errors).join()})},[ie]);const{errors:ae}=ee,re=W?{width:"70%",marginLeft:"4%",fontSize:"12px"}:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return l.createElement("div",{style:{marginBottom:"16px"}},l.createElement("div",{className:"label-field-pair"},l.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},"Unit ",null==R?void 0:R.order)),l.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},b.length>1?l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{float:"right",position:"relative",bottom:"5px"},fill:1!=b.length?"#494848":"#FAFAFA"}),style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"},onClick:e=>Y(R)}):null,l.createElement("div",{style:{marginTop:"30px"}},l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_SELECT_FLOOR")+" *"),l.createElement(a.Controller,{name:"floorNo",defaultValue:R.floorNo,control:J,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!1,option:x(U)||[],select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:C})})),l.createElement(t.CardLabelError,{style:re},ee.touched.floorNo?null==ae||null===(u=ae.floorNo)||void 0===u?void 0:u.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:Z,disable:"MIXED"!==(null==H||null===(d=H.usageCategoryMajor)||void 0===d?void 0:d.code),option:z($),select:Q,optionKey:"i18nKey",t:C})),l.createElement(t.LabelFieldPair,{style:["RESIDENTIAL"].includes(null==Z?void 0:Z.code)?{display:"none"}:{}},l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_USAGE_TYPE")+" *"),l.createElement(a.Controller,{name:"usageCategory",defaultValue:null===(s=X(Z))||void 0===s?void 0:s.filter(e=>(null==e?void 0:e.code)===R.existingUsageCategory)[0],control:J,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!(null!=Z&&Z.code),option:X(Z),select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:C})})),["RESIDENTIAL"].includes(null==Z?void 0:Z.code)?null:l.createElement(t.CardLabelError,{style:re},ee.touched.usageCategory?null==ae||null===(c=ae.usageCategory)||void 0===c?void 0:c.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_OCCUPANCY")+" *"),l.createElement(a.Controller,{name:"occupancyType",defaultValue:null==R?void 0:R.occupancyType,control:J,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:1===(null==F?void 0:F.length),option:F,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:C})})),l.createElement(t.CardLabelError,{style:re},ee.touched.occupancyType?null==ae||null===(p=ae.occupancyType)||void 0===p?void 0:p.message:""),"RENTED"===(null===(m=ie.occupancyType)||void 0===m?void 0:m.code)?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_TOTAL_ANNUAL_RENT")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{name:"arv",defaultValue:R.arv,control:J,render:e=>l.createElement(t.TextInput,{type:"text",name:"unit-area",onChange:t=>{e.onChange(t.target.value),w({index:L,type:"arv"})},value:e.value,autoFocus:M.index===L&&"arv"===M.type,onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:re},ee.touched.arv?null==ae||null===(v=ae.arv)||void 0===v?void 0:v.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_RENTED_MONTHS")+" *"),l.createElement(a.Controller,{name:"RentedMonths",defaultValue:R.RentedMonths,control:J,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:1===(null==B?void 0:B.length),option:B,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:C})})),l.createElement(t.CardLabelError,{style:re},ee.touched.Rentedmonths?null==ae||null===(E=ae.Rentedmonths)||void 0===E?void 0:E.message:""),"1"===(null==ie||null===(_=ie.RentedMonths)||void 0===_?void 0:_.code)||"2"===(null==ie||null===(T=ie.RentedMonths)||void 0===T?void 0:T.code)||"3"===(null==ie||null===(y=ie.RentedMonths)||void 0===y?void 0:y.code)||"4"===(null==ie||null===(S=ie.RentedMonths)||void 0===S?void 0:S.code)||"5"===(null==ie||null===(f=ie.RentedMonths)||void 0===f?void 0:f.code)||"6"===(null==ie||null===(P=ie.RentedMonths)||void 0===P?void 0:P.code)||"7"===(null==ie||null===(g=ie.RentedMonths)||void 0===g?void 0:g.code)||"8"===(null==ie||null===(N=ie.RentedMonths)||void 0===N?void 0:N.code)||"9"===(null==ie||null===(A=ie.RentedMonths)||void 0===A?void 0:A.code)||"10"===(null==ie||null===(O=ie.RentedMonths)||void 0===O?void 0:O.code)||"11"===(null==ie||null===(I=ie.RentedMonths)||void 0===I?void 0:I.code)?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_NONRENTED_MONTHS_USAGE")+" *"),l.createElement(a.Controller,{name:"NonRentedMonthsUsage",defaultValue:R.NonRentedMonthsUsage,control:J,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:1===(null==k?void 0:k.length),option:k,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:C})}))):null):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},C("PT_FORM2_BUILT_AREA")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{name:"builtUpArea",defaultValue:null==R?void 0:R.builtUpArea,control:J,render:e=>l.createElement(t.TextInput,{type:"text",name:"unit-area",onChange:t=>{e.onChange(t.target.value),w({index:L,type:"builtUpArea"})},value:e.value,autoFocus:M.index===L&&"builtUpArea"===M.type,onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:re},ee.touched.builtUpArea?null==ae||null===(h=ae.builtUpArea)||void 0===h?void 0:h.message:"")))}function $e(e){var o,i,a,r,u;let{t:d,document:s,setDocuments:c,setError:p,documents:m,action:v,formData:E,setFormError:_,clearFormErrors:T,config:y,formState:S,fromRawData:f,id:P,propertyInitialValues:g}=e;const N=null==m?void 0:m.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==s?void 0:s.code)})[0],[A,O]=(Digit.ULBService.getCurrentTenantId(),n.useState(N?{...N,active:"ACTIVE"===(null==N?void 0:N.status),code:null==N?void 0:N.documentType}:1===(null==s||null===(o=s.dropdownData)||void 0===o?void 0:o.length)?null==s?void 0:s.dropdownData[0]:{})),[I,h]=n.useState(null),[C,R]=n.useState(()=>(null==N?void 0:N.fileStoreId)||null),{dropdownData:b}=s,{dropdownFilter:D,enabledActions:L,filterCondition:M}=(null==s?void 0:s.additionalDetails)||{};var w=b;const[x,U]=n.useState(!1),F=()=>{var e,t;let n=null===(e=S.errors)||void 0===e||null===(t=e[y.key])||void 0===t?void 0:t.type;Array.isArray(n)||(n=[]),n.includes(null==s?void 0:s.code)&&(n=n.filter(e=>e!=(null==s?void 0:s.code)),n.length?_(y.key,{type:n}):T(y.key))};if(n.useEffect(()=>{null!=A&&A.code&&c(e=>{const t=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==A?void 0:A.code));return 0===(null==C?void 0:C.length)||null===C?t:[...null==t?void 0:t.filter(e=>(null==e?void 0:e.fileStoreId)!==C),{documentType:null==A?void 0:A.code,fileStoreId:C,documentUid:C}]}),x?x&&F():C&&null!=A&&A.code?C&&null!=A&&A.code&&F():(()=>{var e,t;let n=null===(e=S.errors)||void 0===e||null===(t=e[y.key])||void 0===t?void 0:t.type;Array.isArray(n)||(n=[]),n.includes(s.code)||(n.push(s.code),_(y.key,{type:n}))})()},[C,A,x]),n.useEffect(()=>{if("update"===v){var e,t;const n=null==E||null===(e=E.originalData)||void 0===e||null===(t=e.documents)||void 0===t?void 0:t.filter(e=>e.documentType.includes(null==s?void 0:s.code))[0],l=w.filter(e=>e.code===(null==n?void 0:n.documentType)).map(e=>{var t;return{...e,i18nKey:null==e||null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_")}})[0];l?(O(l),R(null==n?void 0:n.fileStoreId)):U(!0)}},[]),n.useEffect(()=>{!function(){try{p(null);const e=function(){if(I){const e=function(){if(I.size>=5242880)p(d("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return R(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",I,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):p(d("CS_FILE_UPLOAD_ERROR"))})},function(){p(d("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(()=>{x&&R(null)},[x]),n.useEffect(()=>{var e,t,n;"OWNER.TRANSFERREASONDOCUMENT"===s.code&&(null==A||null===(e=A.code)||void 0===e?void 0:e.split(".")[2])!==(null==E||null===(t=E.additionalDetails)||void 0===t||null===(n=t.reasonForTransfer)||void 0===n?void 0:n.code)&&(O(null),R(null))},[null==E||null===(i=E.additionalDetails)||void 0===i||null===(a=i.reasonForTransfer)||void 0===a?void 0:a.code]),M){const{filterValue:e,jsonPath:t,onArray:n,arrayAttribute:l,formDataPath:o,formArrayAttrPath:i}=M;if("create"===v){const t=null==o?void 0:o.reduce((e,t)=>t.charAt(0).toUpperCase()+t.slice(1)==="PropertyType"?e.PropertyType:null==e?void 0:e[t],E);let l;if(t){if(n){const n=null==t?void 0:t.map(e=>i.reduce((e,t)=>null==e?void 0:e[t],e)||e);l=null==n?void 0:n.every(t=>e.includes(t))}else l=null==e?void 0:e.includes(t);if(l!==x&&U(l),l)return null}}if("update"===v){var B;const a=f?t:null==t?void 0:t.split("Properties[0].propertyDetails[0].")[1],r=(null==a||null===(B=a.split("."))||void 0===B?void 0:B.map(e=>{var t;return e.includes("[")?null===(t=e.split("[")[1])||void 0===t?void 0:t.split("]")[0]:e})).reduce((e,t)=>e[t],null==E?void 0:E.originalData),u=null==o?void 0:o.reduce((e,t)=>t.charAt(0).toUpperCase()+t.slice(1)==="PropertyType"?e.PropertyType:null==e?void 0:e[t],E);let d;if(r){if(n)if(null!=L&&L[v].disableUpload)d=null==r?void 0:r.every(t=>null==e?void 0:e.includes(t[l]));else{const t=null==u?void 0:u.map(e=>i.reduce((e,t)=>null==e?void 0:e[t],e)||e);d=null==t?void 0:t.every(t=>null==e?void 0:e.includes(t))}else d=null==e?void 0:e.includes(r);if(d!==x&&U(d),d)return null}}}if(D){const{formDataPath:e,formArrayAttrPath:t,onArray:n,parentJsonpath:l,parentArrayJsonPath:o}=D;if(["create","update"].includes(v))if(null!=L&&L[v].disableUpload)if(n){const e=(null==o?void 0:o.split("Properties[0].propertyDetails[0].")[1].split(".")).reduce((e,t)=>e[t],null==E?void 0:E.originalData).map(e=>l.split(".").reduce((e,t)=>e[t],e));w=b.filter(t=>t.parentValue.some(t=>e.includes(t)))}else{const e=(null==l?void 0:l.split("Properties[0].propertyDetails[0].")[1].split(".")).reduce((e,t)=>e[t],null==E?void 0:E.originalData);w=b.filter(t=>t.parentValue.includes(e))}else{const l=e,o=null==l?void 0:l.reduce((e,t)=>null==e?void 0:e[t],E),i=t;if(o)if(n){const e=o.map(e=>(null==i?void 0:i.reduce((e,t)=>e[t],e))||e);w=b.filter(t=>t.parentValue.some(t=>e.includes(t)))}else w=b.filter(e=>e.parentValue.includes(o))}}return 0===(null===(r=w)||void 0===r?void 0:r.length)?(F(),null):("OWNER.TRANSFERREASONDOCUMENT"===s.code&&(w=w.filter(e=>{var t,n,l;return(null===(t=e.code)||void 0===t?void 0:t.split(".")[2])===(null==E||null===(n=E.additionalDetails)||void 0===n||null===(l=n.reasonForTransfer)||void 0===l?void 0:l.code)})),l.createElement("div",{style:{marginBottom:"24px"}},null!=s&&s.hasDropdown?l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},d(null==s?void 0:s.code.replaceAll(".","_"))+"  *"),l.createElement(t.Dropdown,{className:"form-field",selected:A,disable:0===(null===(u=w)||void 0===u?void 0:u.length)||!!(null!=g&&g.documents&&(null==g?void 0:g.documents.length)>0&&(null==g?void 0:g.documents.filter(e=>e.documentType.includes(null==s?void 0:s.code)).length)>0)&&(null==L?void 0:L[v].disableDropdown),option:w.map(e=>{var t;return{...e,i18nKey:null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_")}}),select:e=>O(e),optionKey:"i18nKey",t:d})):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"}),l.createElement("div",{className:"field"},l.createElement(t.UploadFile,{onUpload:function(e){h(e.target.files[0])},onDelete:()=>{R(null)},id:P,message:C?"1 "+d("CS_ACTION_FILEUPLOADED"):d("CS_ACTION_NO_FILEUPLOADED"),textStyles:{width:"100%"},inputStyles:{width:"280px"},disabled:!!(null!=g&&g.documents&&(null==g?void 0:g.documents.length)>0&&(null==g?void 0:g.documents.filter(e=>e.documentType.includes(null==s?void 0:s.code)).length)>0)&&(null==L?void 0:L[v].disableUpload)||!(null!=A&&A.code),buttonType:"button",error:!C})))))}const Ze=()=>({name:"",mobileNumber:"",fatherOrHusbandName:"",emailId:"",permanentAddress:"",relationship:"",ownerType:"",gender:"",isCorrespondenceAddress:!1,key:Date.now()}),Qe=e=>{var o,i,r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C,R,b,D,L,M,w,x,U,F,B,k,H,Y,W,j,K;const{owner:V,index:G,focusIndex:z,allOwners:X,setFocusIndex:q,removeOwner:$,setOwners:Z,t:Q,mdmsData:J,formData:ee,config:te,setError:ne,clearErrors:le,formState:oe,menu:ie,isEditScreen:ae}=e,{originalData:re={}}=ee,{institution:ue={}}=re,[de,se]=n.useState(null),[ce,pe]=n.useState(null),{control:me,formState:ve,watch:Ee,trigger:_e}=a.useForm(),Te=Ee(),{errors:ye}=ve,Se=Digit.ULBService.getCurrentTenantId();V.institution={name:null!=V&&null!==(o=V.institution)&&void 0!==o&&o.name?null==Te||null===(i=Te.institution)||void 0===i?void 0:i.name:null==ue?void 0:ue.name},V.institution.type={active:!0,code:(null==Te||null===(r=Te.institution)||void 0===r||null===(u=r.type)||void 0===u?void 0:u.code)||(null==ue||null===(d=ue.type)||void 0===d?void 0:d.code),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+Fe((null==Te||null===(s=Te.institution)||void 0===s||null===(c=s.type)||void 0===c?void 0:c.code)||(null==ue?void 0:ue.type)||""),name:Q("COMMON_MASTERS_OWNERSHIPCATEGORY_"+Fe((null==Te||null===(p=Te.institution)||void 0===p||null===(m=p.type)||void 0===m?void 0:m.code)||(null==ue?void 0:ue.type)||""))},V.designation=null!=V&&V.designation?null==Te?void 0:Te.designation:null==ue?void 0:ue.designation;const fe=n.useMemo(()=>{var e,t,n,l,o,i,a;return(null==J||null===(e=J.PropertyTax)||void 0===e||null===(t=e.Documents)||void 0===t||null===(n=t.filter(e=>"OWNER.SPECIALCATEGORYPROOF"===e.code))||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.dropdownData)||void 0===o||null===(i=o.filter(e=>{var t;return e.parentValue.includes(null==Te||null===(t=Te.ownerType)||void 0===t?void 0:t.code)}))||void 0===i||null===(a=i.map)||void 0===a?void 0:a.call(i,e=>{var t;return{i18nKey:null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_"),code:e.code}}))||[]},[J,Te]),Pe=n.useMemo(()=>{var e,t,n;return(null==J||null===(e=J.PropertyTax)||void 0===e||null===(t=e.OwnerType)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,e=>({i18nKey:""+e.code.replaceAll("PROPERTY","COMMON_MASTERS").replaceAll(".","_"),code:e.code})))||[]},[J]);(null==Pe?void 0:Pe.length)>0&&(Pe&&Pe.sort((e,t)=>e.code.localeCompare(t.code)),null==Pe||Pe.forEach((e,t)=>{e.order="NONE"==e.code?0:t+1}),Pe.sort(function(e,t){return e.order-t.order}));const ge=n.useMemo(()=>{var e;return null==ee||null===(e=ee.ownershipCategory)||void 0===e?void 0:e.code.includes("INDIVIDUAL")},[null==ee||null===(v=ee.ownershipCategory)||void 0===v?void 0:v.code]),Ne=n.useMemo(()=>{var e,t,n;const l=null==ee||null===(e=ee.ownershipCategory)||void 0===e?void 0:e.code,o=null==J||null===(t=J.PropertyTax)||void 0===t||null===(n=t.SubOwnerShipCategory)||void 0===n?void 0:n.filter(e=>{var t;return null==e||null===(t=e.ownerShipCategory)||void 0===t?void 0:t.includes(l)});return null==o?void 0:o.map(e=>{var t;return{...e,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_"))}})},[J,null==ee?void 0:ee.ownershipCategory]);n.useEffect(()=>{_e()},[]);const[Ae,Oe]=l.useState({});n.useEffect(()=>{let e=ge?{}:{ownerType:{code:"NONE"}};Xe.isEqual(Ae,Te)||(Oe({...Te}),Z(t=>t.map(t=>t.key&&t.key===V.key?{...t,...Te,...e}:{...t})),_e())},[Te]),n.useEffect(()=>{var e;Object.keys(ye).length&&!Xe.isEqual((null===(e=oe.errors[te.key])||void 0===e?void 0:e.type)||{},ye)?ne(te.key,{type:ye}):!Object.keys(ye).length&&oe.errors[te.key]&&le(te.key)},[ye]);const Ie={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return n.useEffect(()=>{const e=setTimeout(function(){try{return Promise.resolve(Digit.PTService.search({tenantId:Se,filters:{documentNumbers:de}})).then(function(e){pe((null==e?void 0:e.Properties.length)>0?{error:!0,label:"Please enter a valid document number"}:{label:"Valid document number"})})}catch(e){return Promise.reject(e)}},1e3);return()=>clearTimeout(e)},[de]),l.createElement(l.Fragment,null,l.createElement("div",{style:{marginBottom:"16px"}},l.createElement("div",{className:"label-field-pair"},l.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},ge?"Owner "+(null!=ee&&null!==(E=ee.ownershipCategory)&&void 0!==E&&null!==(_=E.code)&&void 0!==_&&_.includes("MULTIPLE")?G+1:""):"Authorised Person Details")),l.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},(null==X?void 0:X.length)>2?l.createElement("div",{onClick:()=>$(V),style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"}},"X"):null,ge?null:l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_INSTITUTION_NAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"institution.name",defaultValue:ae?null!=ue&&ue.name?ue.name:null==V?void 0:V.name:null,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[a-zA-Z_@./()#&+-\s]*$/.test(e)||Q("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,name:"institution.name",autoFocus:z.index===(null==V?void 0:V.key)&&"institution.name"===z.type,onChange:t=>{e.onChange(t.target.value),q({index:V.key,type:"institution.name"})},onBlur:t=>{q({index:-1}),e.onBlur(t)}})}))),l.createElement(t.CardLabelError,{style:Ie},null!==(T=ve.touched)&&void 0!==T&&null!==(y=T.institution)&&void 0!==y&&y.name?null==ye||null===(S=ye.institution)||void 0===S||null===(f=S.name)||void 0===f?void 0:f.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_INSTITUTION_TYPE")+" *"),l.createElement(a.Controller,{control:me,name:"institution.type",defaultValue:ae?{active:!0,code:null==ue?void 0:ue.type,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+Fe((null==ue?void 0:ue.type)||""),name:Q("COMMON_MASTERS_OWNERSHIPCATEGORY_"+Fe((null==ue?void 0:ue.type)||""))}:null,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,option:Ne,optionKey:"i18nKey",disable:ae,t:Q})})),l.createElement(t.CardLabelError,{style:Ie},null!==(P=ve.touched)&&void 0!==P&&null!==(g=P.institution)&&void 0!==g&&g.type?null==ye||null===(N=ye.institution)||void 0===N||null===(A=N.type)||void 0===A?void 0:A.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_OWNER_NAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"name",defaultValue:null==V?void 0:V.name,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"name"===z.type,onChange:t=>{e.onChange(t.target.value),q({index:V.key,type:"name"})},onBlur:t=>{q({index:-1}),e.onBlur(t)}})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.name?null==ye||null===(O=ye.name)||void 0===O?void 0:O.message:""),ge?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_FORM3_GENDER")+" *"),l.createElement(a.Controller,{control:me,name:"gender",defaultValue:null==V?void 0:V.gender,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,disable:ae,onBlur:e.onBlur,option:ie,optionKey:"i18nKey",t:Q})})),l.createElement(t.CardLabelError,{style:Ie},ve.touched.gender?null==ye||null===(I=ye.gender)||void 0===I?void 0:I.message:"")):l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_LANDLINE_NUMBER_FLOATING_LABEL")+(ge?"":" *")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"altContactNumber",defaultValue:null==V?void 0:V.altContactNumber,rules:ge?{}:{required:Q("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[0-9]{11}$/i.test(e)||Q("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.MobileNumber,{value:e.value,hideSpan:!0,disable:ae,maxLength:11,autoFocus:z.index===(null==V?void 0:V.key)&&"altContactNumber"===z.type,onChange:t=>{e.onChange(t),q({index:V.key,type:"altContactNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.altContactNumber?null==ye||null===(h=ye.altContactNumber)||void 0===h?void 0:h.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_FORM3_MOBILE_NUMBER")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"mobileNumber",defaultValue:null==V?void 0:V.mobileNumber,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG"),validate:e=>!!/^[6789]\d{9}$/.test(e)||Q("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>l.createElement(t.MobileNumber,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"mobileNumber"===z.type,onChange:t=>{e.onChange(t),q({index:V.key,type:"mobileNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.mobileNumber?null==ye||null===(C=ye.mobileNumber)||void 0===C?void 0:C.message:""),ge?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"fatherOrHusbandName",defaultValue:null==V?void 0:V.fatherOrHusbandName,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[a-zA-Z ]+$/.test(e)||Q("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"fatherOrHusbandName"===z.type,onChange:t=>{e.onChange(t.target.value),q({index:V.key,type:"fatherOrHusbandName"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.fatherOrHusbandName?null==ye||null===(R=ye.fatherOrHusbandName)||void 0===R?void 0:R.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_FORM3_RELATIONSHIP")+" *"),l.createElement(a.Controller,{control:me,name:"relationship",defaultValue:null==V?void 0:V.relationship,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,disable:ae,option:[{i18nKey:"PT_FORM3_FATHER",code:"FATHER"},{i18nKey:"PT_FORM3_HUSBAND",code:"HUSBAND"}],optionKey:"i18nKey",t:Q})})),l.createElement(t.CardLabelError,{style:Ie},ve.touched.relationship?null==ye||null===(b=ye.relationship)||void 0===b?void 0:b.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_FORM3_SPECIAL_CATEGORY")+" *"),l.createElement(a.Controller,{control:me,name:"ownerType",defaultValue:null==V?void 0:V.ownerType,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,option:Pe,disable:ae,optionKey:"i18nKey",t:Q})})),l.createElement(t.CardLabelError,{style:Ie},ve.touched.ownerType?null==ye||null===(D=ye.ownerType)||void 0===D?void 0:D.message:"")):l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("TL_NEW_DESIG_OWNER_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"designation",defaultValue:ae?(null==ue?void 0:ue.designation)||"":null,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"designation"===z.type,onChange:t=>{e.onChange(t.target.value),q({index:V.key,type:"designation"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.designation?null==ye||null===(L=ye.designation)||void 0===L?void 0:L.message:"")),null!==(M=Te.ownerType)&&void 0!==M&&M.code&&"NONE"!==(null===(w=Te.ownerType)||void 0===w?void 0:w.code)?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_OWNERSHIP_DOCUMENT_TYPE")+" *"),l.createElement(a.Controller,{control:me,name:"documents.documentType",defaultValue:null==V||null===(x=V.documents)||void 0===x?void 0:x.documentType,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,disable:ae,onBlur:e.onBlur,option:fe,optionKey:"i18nKey",t:Q})})),l.createElement(t.CardLabelError,{style:Ie},null!==(U=ve.touched.documents)&&void 0!==U&&U.documentType?null==ye||null===(F=ye.documents)||void 0===F||null===(B=F.documentType)||void 0===B?void 0:B.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_OWNERSHIP_DOCUMENT_ID")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"documents.documentUid",defaultValue:null==V||null===(k=V.documents)||void 0===k?void 0:k.documentUid,rules:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"documents.documentUid"===z.type,onChange:t=>{se(t.target.value),e.onChange(t),q({index:V.key,type:"documents.documentUid"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},null!==(H=ve.touched.documents)&&void 0!==H&&H.documentUid?null==ye||null===(Y=ye.documents)||void 0===Y||null===(W=Y.documentUid)||void 0===W?void 0:W.message:"")," "):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_OWNERSHIP_INFO_EMAIL_ID")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"emailId",defaultValue:null==V?void 0:V.emailId,rules:{validate:e=>!!(e&&/^[^\s@]+@[^\s@]+$/.test(e)||!e)||Q("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"emailId"===z.type,onChange:t=>{e.onChange(t),q({index:V.key,type:"emailId"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.emailId?null==ye||null===(j=ye.emailId)||void 0===j?void 0:j.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},Q("PT_OWNERSHIP_INFO_CORR_ADDR")+(ge?"":" *")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:me,name:"correspondenceAddress",defaultValue:null==V?void 0:V.correspondenceAddress,rules:ge?{}:{required:Q("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ae,autoFocus:z.index===(null==V?void 0:V.key)&&"correspondenceAddress"===z.type,onChange:t=>{e.onChange(t),q({index:V.key,type:"correspondenceAddress"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ie},ve.touched.correspondenceAddress?null==ye||null===(K=ye.correspondenceAddress)||void 0===K?void 0:K.message:""))),(null==ce?void 0:ce.label)&&l.createElement(t.Toast,{label:null==ce?void 0:ce.label,onClose:e=>{pe(e=>null)}}))},Je={searchId:{propertyIds:{type:"text",label:"PT_PROPERTY_UNIQUE_ID",placeHolder:"PT_PROPERTY_UNIQUE_ID_PLACEHOLDER",validation:{pattern:{value:"/[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}|[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}/,PG-PT-dddd-dddd-dd-dd-dddddd",message:"ERR_INVALID_PROPERTY_ID"}}},oldPropertyId:{type:"text",label:"PT_EXISTING_PROPERTY_ID",placeholder:"PT_EXISTING_PROPERTY_ID_PLACEHOLDER",validation:{pattern:{value:"/[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}|[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}/,PG-PT-dddd-dddd-dd-dd-dddddd",message:"ERR_INVALID_PROPERTY_ID"}}},mobileNumber:{type:"number",label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",placeHolder:"PT_HOME_SEARCH_RESULTS_OWN_MOB_PLACEHOLDER",validation:{minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}}},searchDetail:{locality:{type:"custom",label:"PT_SEARCH_LOCALITY",placeHolder:"PT_SEARCH_LOCALITY_PLACEHOLDER",validation:{required:"PTLOCALITYMANDATORY"},customComponent:t.Localities,customCompProps:{boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},disableLoader:!0}},doorNo:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",placeHolder:"PT_SEARCH_DOOR_NO_PLACEHOLDER",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}}},name:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",placeHolder:"PT_SEARCH_OWNER_NAME_PLACEHOLDER",validation:{minLength:{value:3,message:"PT_MIN_3CHAR"},pattern:{value:"^[a-zA-Z ]+$",message:"PAYMENT_INVALID_NAME"}}}},defaulterNotice:{locality:{type:"custom",label:"PT_SEARCH_LOCALITY",placeHolder:"PT_SEARCH_LOCALITY_PLACEHOLDER",validation:{required:"PTLOCALITYMANDATORY"},customComponent:t.Localities,customCompProps:{boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},disableLoader:!0}},propertyType:{type:"custom",label:"PT_SEARCH_PROPERTY_TYPE",placeHolder:"PT_SEARCH_PROPERTY_TYPE_PLACEHOLDER",validation:{required:"PTPROPERTYTYPEMANDATORY"},customComponent:e=>{var n,i;let{selectLocality:a,selected:r,optionCardStyles:u,style:d,disableLoader:s}=e;const{t:c}=o.useTranslation(),p=Digit.ULBService.getStateId(),{data:m={},isLoading:v}=Digit.Hooks.pt.usePropertyMDMS(p,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]);let E=[];return E=(null==m||null===(n=m.PropertyTax)||void 0===n||null===(i=n.UsageCategory)||void 0===i?void 0:i.filter(e=>"MIXED"!==(null==e?void 0:e.code)))||[],v&&!s?l.createElement(t.Loader,null):l.createElement(t.Dropdown,{selected:r,disable:!1,optionCardStyles:u,option:(e=>{var t;const n=null==e||null===(t=e.filter(e=>(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==(null==e?void 0:e.code)))||void 0===t?void 0:t.map(e=>{const t=null==e?void 0:e.code.split(".");return 2==t.length?{code:null==e?void 0:e.code,name:null==e?void 0:e.code,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],label:"PropertyType"}:{code:null==e?void 0:e.code,name:null==e?void 0:e.code,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),label:"PropertyType"}});return console.log("catMenu",n),n})(E),select:a,style:d,optionKey:"i18nKey",t:c})},customCompProps:{keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},disableLoader:!0}}}},et={propertyIds:"",mobileNumber:"",oldPropertyId:"",locality:"",name:"",doorNo:"",propertyType:""},tt=()=>{const{t:e}=o.useTranslation(),i=Digit.ULBService.getCurrentTenantId(),[a,r]=n.useState({}),[u,d]=n.useState(et),[s,c]=n.useState("searchId"),[p,m]=n.useState(null),v=n.memo(Digit.ComponentRegistryService.getComponent("PropertySearchForm")),E=n.memo(Digit.ComponentRegistryService.getComponent("PropertySearchResults")),_=n.memo(Digit.ComponentRegistryService.getComponent("SearchPTIDProp")),{data:T}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:e=>{var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),y=n.useCallback(()=>{d(et),r({}),m(null)});n.useEffect(()=>{1==sessionStorage.getItem("searchDetailValue")&&"searchId"===s&&c("searchDetail")},[s]);const S=n.useCallback(e=>{console.log("_data",e),Object.keys(e).includes("propertyType")?(d(e),console.log("_data2",a),r({locality:e.locality.code,propertyType:e.propertyType.code}),console.log("_data3",a)):(d(e),console.log("_data5",u),Object.keys(e).filter(t=>e[t]&&"object"!=typeof e[t])?(r(Object.keys(e).filter(t=>e[t]).reduce((t,n)=>({...t,[n]:"object"==typeof e[n]?e[n].code:e[n]}),{})),console.log("_data4",a),m(null)):m({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}))});return l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("SEARCH_PROPERTY")),l.createElement(v,{t:e,payload:u,searchBy:s,setSearchBy:c,PTSearchFields:Je,tenantId:i,onSubmit:S,onReset:y}),Object.keys(a).includes("propertyType")?l.createElement(_,{t:e,showToast:p,setShowToast:m,tenantId:i,payload:a,ptSearchConfig:{...T}}):Object.keys(a).length>0?l.createElement(E,{t:e,showToast:p,setShowToast:m,tenantId:i,payload:a,ptSearchConfig:{...T}}):"",p&&l.createElement(t.Toast,{error:p.error,warning:p.warning,label:e(p.label),onClose:()=>{m(null)}}))},nt=e=>{var n,i,a,r,u,d,s,c,p,m;let{application:v}=e;const{t:E}=o.useTranslation();return l.createElement(t.Card,null,l.createElement(t.KeyNote,{noteStyle:{fontSize:"24px",fontWeight:"700"},keyValue:E("CS_PAYMENT_AMOUNT_PAID_WITHOUT_SYMBOL"),note:"₹ "+(null==v||null===(n=v.paymentDetails)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.totalAmountPaid)}),l.createElement(t.KeyNote,{keyValue:E("PT_SEARCHPROPERTY_TABEL_PID"),note:E(null==v||null===(a=v.paymentDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.bill)||void 0===u?void 0:u.consumerCode)}),l.createElement(t.KeyNote,{keyValue:E("PT_OWNERS_NAME"),note:null==v||null===(d=v.owners)||void 0===d?void 0:d.map(e=>null==e?void 0:e.name).join(",")}),l.createElement(t.KeyNote,{keyValue:E("PT_RECEIPT_DATE_LABEL"),note:Ue(null==v||null===(s=v.paymentDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.receiptDate)||E("CS_NA")}),l.createElement(t.KeyNote,{keyValue:E("PT_RECEIPT_NO_LABEL"),note:E(null==v||null===(p=v.paymentDetails)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.receiptNumber)}),l.createElement(t.SubmitBar,{label:E("PT_DOWNLOAD_RECEIPT"),onSubmit:e=>function(e,t,n,l,o,i){try{function a(){return Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})}t=t||Digit.ULBService.getCurrentTenantId();let e={filestoreIds:[null==o?void 0:o.fileStoreId]};const n=function(){if(null==o||!o.fileStoreId){let n,l,i="",a="",r=0;if("PT"==o.paymentDetails[0].businessService){let e={},t=[],u={},d=[],s=0,c=0,p=0,m=0,v=0,E=0,_=0,T=0,y=0,S=0,f=0,P=0,g=0,N=0,A=0,O=0,I=0,h=0,C=0,R=0,b=0,D=0,L=0,M=0;if(o.paymentDetails[0].bill.billDetails.map(o=>{(o.amount>0||o.amountPaid>0)&&(r+=1,n=Ue(o.toPeriod).split("/")[2],l=Ue(o.fromPeriod).split("/")[2],i=""==i?l+"-"+n+"(Rs."+o.amountPaid+")":i+","+l+"-"+n+"(Rs."+o.amountPaid+")",a=l+"-"+n,o.billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,rebate:E,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:o.amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:o.amount},t.push(e),d.push(u))}),0==r){let n=Ue(o.paymentDetails[0].bill.billDetails[0].toPeriod).split("/")[2],l=Ue(o.paymentDetails[0].bill.billDetails[0].fromPeriod).split("/")[2];i=""==i?l+"-"+n:i+","+l+"-"+n,a=l+"-"+n,o.paymentDetails[0].bill.billDetails[0].billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),P+=e.adjustedAmount,M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:o.paymentDetails[0].bill.billDetails[0].amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:o.paymentDetails[0].bill.billDetails[0].amount},t.push(e),d.push(u)}o.paymentDetails[0].additionalDetails={assessmentYears:i,arrearArray:t,taxArray:d}}return Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...o}]},"property-receipt")).then(function(t){e=t})}}();return Promise.resolve(n&&n.then?n.then(a):a())}catch(e){return Promise.reject(e)}}(0,null==v?void 0:v.tenantId,0,0,v)}))},lt=()=>{var e,n,i,a;const{t:r}=o.useTranslation(),u=Digit.ULBService.getCurrentTenantId(),d=Digit.Hooks.pt.usePropertySearch({}),s=null==d||null===(e=d.data)||void 0===e||null===(n=e.Properties)||void 0===n?void 0:n.map(e=>e.propertyId).join(","),{data:c,isLoading:p}=Digit.Hooks.pt.useMyPropertyPayments({tenantId:u,filters:{consumerCodes:s}},{enabled:(null==d||null===(i=d.data)||void 0===i?void 0:i.Properties.length)>0,propertyData:null==d||null===(a=d.data)||void 0===a?void 0:a.Properties});if(p||null!=d&&d.isLoading)return l.createElement(t.Loader,null);const m=c&&(null==c?void 0:c.Payments)||[];return l.createElement(l.Fragment,null,l.createElement(t.Header,null,r("PT_MY_PAYMENTS_HEADER")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(nt,{application:e}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},r("PT_NO_APPLICATION_FOUND_MSG"))))},ot=e=>{if(e){const t=new Date(e);let n=t.getMonth()+1,l=t.getDate(),o=t.getFullYear();return n=(n>9?"":"0")+n,l=(l>9?"":"0")+l,l+"/"+n+"/"+o}return null},it=e=>{const t=new Date(e).toString().split(" ");return t.length>0?t[2]+"-"+t[1]+"-"+t[3]:"dd-mmm-yyyy"},at=function(e){void 0===e&&(e=[]);let t=e.sort((e,t)=>t.fromPeriod-e.fromPeriod);return it(t[t.length-1].fromPeriod)+" to "+it(t[0].toPeriod)},rt=()=>{const{t:e}=o.useTranslation(),a=Digit.ULBService.getCurrentTenantId();let{id:r}=i.useParams();const u=r.indexOf("?");-1!=u&&(r=r.slice(0,u));const[d,s]=n.useState([]),c=window.Digit.Utils.browser.isMobile(),{isLoading:p,data:m}=Digit.Hooks.receipts.useReceiptsSearch({businessServices:"PT",consumerCodes:r},a,[],!1);return n.useEffect(()=>{var e;m&&s(null==m||null===(e=m.Payments)||void 0===e?void 0:e.map(e=>({receiptNumber:e.paymentDetails[0].receiptNumber,billPeriod:at(e.paymentDetails[0].bill.billDetails),transactionDate:it(e.transactionDate),billNo:e.paymentDetails[0].bill.billNumber,paymentStatus:e.paymentStatus?"CS_"+e.paymentStatus:"PT_NA",amountPaid:0===e.totalAmountPaid?"0":e.totalAmountPaid,tenantId:e.tenantId,paymentDetails:e.paymentDetails,mobileNumber:e.mobileNumber,paidBy:e.paidBy,payerName:e.payerName,paymentMode:e.paymentMode,payerEmail:e.payerEmail,transactionNumber:e.transactionNumber,fileStoreId:e.fileStoreId})))},[m]),p?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("PT_PAYMENT_HISTORY")),l.createElement("div",{style:{display:"flex",paddingBottom:"8px",marginBottom:"8px"}},l.createElement("h2",{style:c?{marginLeft:"15px",fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}:{fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}},e("PT_PROPERTY_PTUID")),l.createElement("div",{style:{whiteSpace:"pre",width:"50%",fontSize:"16px",lineHeight:"24px"}},r)),d.length>0?null==d?void 0:d.map(n=>l.createElement("div",{style:c?{}:{marginLeft:"-16px"}},l.createElement(t.Card,{style:c?{marginBottom:"10px"}:{}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:e("PT_HISTORY_BILL_PERIOD"),text:null==n?void 0:n.billPeriod,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_BILL_NO"),text:null==n?void 0:n.billNo,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_RECEIPT_NO"),text:null==n?void 0:n.receiptNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_DATE"),text:null==n?void 0:n.transactionDate,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_AMOUNT_PAID"),text:null==n?void 0:n.amountPaid}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_STATUS"),text:e(null==n?void 0:n.paymentStatus),textStyle:{whiteSpace:"pre"}}),l.createElement(t.LinkLabel,{style:c?{marginLeft:"0px"}:{},onClick:()=>function(e,t){try{function n(){return Promise.resolve(Digit.PaymentService.printReciept(e,{fileStoreIds:l.filestoreIds[0]})).then(function(e){var t;window.open(e[null===(t=l)||void 0===t?void 0:t.filestoreIds[0]],"_blank")})}console.log("pay",t);let l={filestoreIds:[null==t?void 0:t.fileStoreId]};const o=function(){if(null==t||!t.fileStoreId){let n,o,i="",a="",r=0;if("PT"==t.paymentDetails[0].businessService){let e={},l=[],u={},d=[],s=0,c=0,p=0,m=0,v=0,E=0,_=0,T=0,y=0,S=0,f=0,P=0,g=0,N=0,A=0,O=0,I=0,h=0,C=0,R=0,b=0,D=0,L=0,M=0;if(t.paymentDetails[0].bill.billDetails.map(t=>{(t.amount>0||t.amountPaid>0)&&(r+=1,n=ot(t.toPeriod).split("/")[2],o=ot(t.fromPeriod).split("/")[2],i=""==i?o+"-"+n+"(Rs."+t.amountPaid+")":i+","+o+"-"+n+"(Rs."+t.amountPaid+")",a=o+"-"+n,t.billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,rebate:E,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:t.amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:t.amount},l.push(e),d.push(u))}),0==r){let n=ot(t.paymentDetails[0].bill.billDetails[0].toPeriod).split("/")[2],o=ot(t.paymentDetails[0].bill.billDetails[0].fromPeriod).split("/")[2];i=""==i?o+"-"+n:i+","+o+"-"+n,a=o+"-"+n,t.paymentDetails[0].bill.billDetails[0].billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),P+=e.adjustedAmount,M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:t.paymentDetails[0].bill.billDetails[0].amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:t.paymentDetails[0].bill.billDetails[0].amount},l.push(e),d.push(u)}t.paymentDetails[0].additionalDetails={assessmentYears:i,arrearArray:l,taxArray:d}}return Promise.resolve(Digit.PaymentService.generatePdf(e,{Payments:[{...t}]},"property-receipt")).then(function(e){l=e})}}();return Promise.resolve(o&&o.then?o.then(n):n())}catch(e){return Promise.reject(e)}}(null==n?void 0:n.tenantId,n)},e("PT_DOWNLOAD_RECEIPT")))))):l.createElement("div",null,l.createElement(t.CardText,null,e("PT_NO_PAYMENTS_HISTORY"))))},ut=[{screenPath:"property/new-application/acknowledgement"},{screenPath:"property/edit-application/acknowledgement"}],dt=()=>{var e,n,a,r,u,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I;const{path:h,...C}=i.useRouteMatch(),{t:R}=o.useTranslation(),b=null===(e=Digit)||void 0===e||null===(n=e.ComponentRegistryService)||void 0===n?void 0:n.getComponent("PTCreateProperty"),D=null===(a=Digit)||void 0===a||null===(r=a.ComponentRegistryService)||void 0===r?void 0:r.getComponent("PTEditProperty"),L=null===(u=Digit)||void 0===u||null===(s=u.ComponentRegistryService)||void 0===s?void 0:s.getComponent("PTSearchPropertyComponent"),M=null===(c=Digit)||void 0===c||null===(p=c.ComponentRegistryService)||void 0===p?void 0:p.getComponent("PTSearchResultsComponent"),w=null===(m=Digit)||void 0===m||null===(v=m.ComponentRegistryService)||void 0===v?void 0:v.getComponent("PTApplicationDetails"),x=null===(E=Digit)||void 0===E||null===(_=E.ComponentRegistryService)||void 0===_?void 0:_.getComponent("PTMyApplications"),U=null===(T=Digit)||void 0===T||null===(y=T.ComponentRegistryService)||void 0===y?void 0:y.getComponent("PTMyProperties"),F=null===(S=Digit)||void 0===S||null===(f=S.ComponentRegistryService)||void 0===f?void 0:f.getComponent("PTMutateProperty"),B=null===(P=Digit)||void 0===P||null===(g=P.ComponentRegistryService)||void 0===g?void 0:g.getComponent("PropertyInformation"),k=null===(N=Digit)||void 0===N||null===(A=N.ComponentRegistryService)||void 0===A?void 0:A.getComponent("PropertyOwnerHistory"),H=null===(O=Digit)||void 0===O||null===(I=O.ComponentRegistryService)||void 0===I?void 0:I.getComponent("PTAssessmentDetails");return l.createElement("span",{className:"pt-citizen",style:{width:"100%"}},l.createElement(i.Switch,null,l.createElement(t.AppContainer,null,function(e){return void 0===e&&(e=[]),e.filter(e=>window.location.href.includes(e.screenPath)).length>0}(ut)?"":l.createElement(t.BackButton,null,"Back"),l.createElement(t.PrivateRoute,{path:h+"/property/new-application",component:b}),l.createElement(t.PrivateRoute,{path:h+"/property/edit-application",component:D}),l.createElement(i.Route,{path:h+"/property/citizen-search",component:L}),l.createElement(i.Route,{path:h+"/property/search-results",component:M}),l.createElement(t.PrivateRoute,{path:h+"/property/application/:acknowledgementIds/:tenantId",component:w}),l.createElement(t.PrivateRoute,{path:h+"/property/my-applications",component:x}),l.createElement(t.PrivateRoute,{path:h+"/property/my-properties",component:U}),l.createElement(t.PrivateRoute,{path:h+"/property/my-payments",component:lt}),l.createElement(t.PrivateRoute,{path:h+"/property/property-mutation",component:F}),l.createElement(t.PrivateRoute,{path:h+"/property/properties/:propertyIds",component:B}),l.createElement(t.PrivateRoute,{path:h+"/payment-details/:id",component:()=>l.createElement(rt,{parentRoute:h})}),l.createElement(t.PrivateRoute,{path:h+"/property/owner-history/:tenantId/:propertyIds",component:k}),l.createElement(t.PrivateRoute,{path:h+"/assessment-details/:id",component:()=>l.createElement(H,{parentRoute:h})}),l.createElement(t.PrivateRoute,{path:h+"/property/search",component:e=>l.createElement(tt,d({},e,{t:R,parentRoute:h}))}))))},st={description:"PT_SEARCH_OR_DESC",descriptionStyles:{fontWeight:"300  ",color:"#505A5F",marginTop:"0px",textAlign:"center",marginBottom:"20px",maxWidth:"540px"}},ct=e=>{var a,r,u;let{config:s,onSelect:c}=e;const{t:p}=o.useTranslation(),m=i.useHistory(),{action:v=0}=Digit.Hooks.useQueryParams(),[E,_]=n.useState({}),[T,y]=n.useState(null),S=null===(a=Digit.Hooks.pt.useTenants())||void 0===a?void 0:a.sort((e,t)=>{var n,l;return null==e||null===(n=e.i18nKey)||void 0===n||null===(l=n.localeCompare)||void 0===l?void 0:l.call(n,null==t?void 0:t.i18nKey)}),[f,P]=n.useState(),[g,N]=n.useState(),[A,O]=n.useState(!1),{data:I,isLoading:h,error:C}=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:null==E?void 0:E.city,filters:null==E?void 0:E.filters,auth:!0,configs:{enabled:Object.keys(E).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),R=window.Digit.Utils.browser.isMobile();n.useEffect(()=>{var e,t;(null==E||null===(e=E.filters)||void 0===e||!e.mobileNumber||1!=(null===(t=Object.keys(null==E?void 0:E.filters))||void 0===t?void 0:t.length))&&(null==I?void 0:I.Properties.length)>0&&null!=b&&b.maxResultValidation&&(null==I?void 0:I.Properties.length)>(null==b?void 0:b.maxPropertyResult)&&!A&&y({error:!0,warning:!0,label:"ERR_PLEASE_REFINED_UR_SEARCH"})},[I]),n.useEffect(()=>{T&&"ERR_PLEASE_REFINED_UR_SEARCH"!==(null==T?void 0:T.label)&&y(null)},[v,h]),n.useLayoutEffect(()=>{const e=()=>{let t=document.querySelector("div.action-bar-wrap");t?(t.style.position="static",t.style.padding="8px 0",t.style.boxShadow="none",t.style.marginBottom="16px",t.style.textAlign="left"):setTimeout(()=>{e()},100)};e()},[]);const{data:b,isLoading:D}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:e=>{var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),[L,M,w,x,U]=s.inputs,F=[{body:[{type:"custom",populators:{name:"addParam",defaultValue:{code:0,name:"PT_KNOW_PT_ID"},customProps:{t:p,isMandatory:!0,optionsKey:"name",options:[{code:0,name:"PT_KNOW_PT_ID"},{code:1,name:"PT_KNOW_PT_DETAIL"}]},component:(e,n)=>l.createElement(t.RadioButtons,d({},n,{selectedOption:e.value,onSelect:t=>{null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNo",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),m.replace(m.location.pathname+"?action="+(0==v?1:0))}}))}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:p,isMandatory:!0,option:[...S],optionKey:"i18nKey"},component:(e,n)=>l.createElement(t.Dropdown,d({},n,{selected:e.value,select:t=>{var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==f&&e.setValue("locality",null),e.onChange(t)}}))}},{label:p("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},{label:L.label,type:L.type,populators:{defaultValue:"",name:L.name,validation:null==L?void 0:L.validation},...st,isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:M.label,labelChildren:l.createElement("div",{className:"tooltip",style:{paddingLeft:"10px",marginBottom:"-3px"}},"  ",l.createElement(t.InfoBannerIcon,{fill:"#0b0c0c"}),l.createElement("span",{className:"tooltiptext",style:{width:"150px",left:"230%",fontSize:"14px"}},p(M.description)+" "+(null==b?void 0:b.propertyIdFormat))),type:M.type,populators:{name:M.name,defaultValue:"",validation:null==M?void 0:M.validation},...st,isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:w.label,type:w.type,populators:{name:w.name,defaultValue:"",validation:null==w?void 0:w.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}],body1:[{type:"custom",populators:{name:"addParam1",defaultValue:{code:1,name:"PT_KNOW_PT_DETAIL"},customProps:{t:p,isMandatory:!0,optionsKey:"name",options:[{code:0,name:"PT_KNOW_PT_ID"},{code:1,name:"PT_KNOW_PT_DETAIL"}]},component:(e,n)=>l.createElement(t.RadioButtons,d({},n,{selectedOption:e.value,onSelect:t=>{null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNo",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),m.replace(m.location.pathname+"?action="+(0==v?1:0))}}))}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:p,isMandatory:!0,option:[...S],optionKey:"i18nKey"},component:(e,n)=>l.createElement(t.Dropdown,d({},n,{selected:e.value,select:t=>{var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==f&&e.setValue("locality",null),e.onChange(t)}}))}},{label:"PT_SELECT_LOCALITY",type:"custom",isMandatory:!0,populators:{name:"locality",defaultValue:"",rules:{required:!0},customProps:{},component:(e,n)=>l.createElement(t.Localities,{selectLocality:t=>{e.onChange(t)},tenantId:f,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},selected:null==g?void 0:g.locality,disable:!f,disableLoader:!0})}},{label:p("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},{label:U.label,type:U.type,populators:{defaultValue:"",name:U.name,validation:null==U?void 0:U.validation},isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:x.label,type:x.type,populators:{defaultValue:"",name:x.name,validation:null==x?void 0:x.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}]}];if(D)return l.createElement(t.Loader,null);let B=!(null!=b&&b.maxResultValidation&&(null==E||null===(r=E.filters)||void 0===r||!r.mobileNumber||1!=(null===(u=Object.keys(null==E?void 0:E.filters))||void 0===u?void 0:u.length)))||(null==I?void 0:I.Properties.length)<(null==b?void 0:b.maxPropertyResult)&&(null==T||null!==T&&!(null!=T&&T.error));if(I&&!h&&!C&&B){var k,H,Y,W;let e={};e={...E.filters,city:E.city},(null==E||null===(k=E.filters)||void 0===k||!k.mobileNumber||1!=(null===(H=Object.keys(null==E?void 0:E.filters))||void 0===H?void 0:H.length))&&null!=b&&b.ptSearchCount&&null!=E&&null!==(Y=E.filters)&&void 0!==Y&&Y.locality&&h&&null!=h&&null!==(W=h.Properties)&&void 0!==W&&W.length&&h.Properties.length>(null==b?void 0:b.ptSearchCount)?!T&&y({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"}):"MUTATION"===s.action?c(s.key,e,null,null,null,{queryParams:{...e}}):m.push("/digit-ui/citizen/pt/property/search-results?"+Object.keys(e).map(t=>t+"="+e[t]).join("&"))}var j,K,V,G;return C&&!T&&y({error:!0,label:(null==C||null===(j=C.response)||void 0===j||null===(K=j.data)||void 0===K||null===(V=K.Errors)||void 0===V||null===(G=V[0])||void 0===G?void 0:G.code)||C}),1==v&&(F[0].body=[...F[0].body1]),l.createElement("div",{style:{marginTop:"16px",marginBottom:"16px",backgroundColor:"white",maxWidth:"960px"}},l.createElement(t.FormComposer,{onSubmit:function(e){try{var t;if(null!=b&&b.maxResultValidation&&(null==I?void 0:I.Properties.length)>0&&(null==I?void 0:I.Properties.length)>(null==b?void 0:b.maxPropertyResult)&&A)return O(!0),Promise.resolve();if(null==e||null===(t=e.city)||void 0===t||!t.code)return y({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(0==v){var n,l,o,i,a,r,u,d,s,c,p,m,E,S,f;if(!(null!=e&&e.mobileNumber||null!=e&&e.propertyIds||null!=e&&e.oldPropertyId))return y({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.mobileNumber&&(null===(n=e.mobileNumber)||void 0===n||!n.match(null==L||null===(l=L.validation)||void 0===l||null===(o=l.pattern)||void 0===o?void 0:o.value)))return y({warning:!0,label:null==L||null===(c=L.validation)||void 0===c||null===(p=c.pattern)||void 0===p?void 0:p.message}),Promise.resolve();if(null!=e&&e.propertyIds&&(null===(i=e.propertyIds)||void 0===i||!i.match(null==M||null===(a=M.validation)||void 0===a||null===(r=a.pattern)||void 0===r?void 0:r.value)))return y({warning:!0,label:null==M||null===(m=M.validation)||void 0===m||null===(E=m.pattern)||void 0===E?void 0:E.message}),Promise.resolve();if(null!=e&&e.oldPropertyId&&(null===(u=e.oldPropertyId)||void 0===u||!u.match(null==w||null===(d=w.validation)||void 0===d||null===(s=d.pattern)||void 0===s?void 0:s.value)))return y({warning:!0,label:null==w||null===(S=w.validation)||void 0===S||null===(f=S.pattern)||void 0===f?void 0:f.message}),Promise.resolve()}else{var P,g,N,h,C,R,D,F,B,k,H;if(null==e||null===(P=e.locality)||void 0===P||!P.code)return y({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(!(null!=e&&e.doorNo||null!=e&&e.name))return y({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.name&&(null===(g=e.name)||void 0===g||!g.match(null==x||null===(N=x.validation)||void 0===N||null===(h=N.pattern)||void 0===h?void 0:h.value)))return y({warning:!0,label:null==x||null===(F=x.validation)||void 0===F||null===(B=F.pattern)||void 0===B?void 0:B.message}),Promise.resolve();if(null!=e&&e.doorNo&&(null===(C=e.doorNo)||void 0===C||!C.match(null==U||null===(R=U.validation)||void 0===R||null===(D=R.pattern)||void 0===D?void 0:D.value)))return y({warning:!0,label:null==U||null===(k=U.validation)||void 0===k||null===(H=k.pattern)||void 0===H?void 0:H.message}),Promise.resolve()}"ERR_PLEASE_REFINED_UR_SEARCH"!==(null==T?void 0:T.label)&&y(null),null!=e&&e.doorNo&&""!==(null==e?void 0:e.doorNo)&&""!==(null==e?void 0:e.propertyIds)&&(e.propertyIds="");let Y=Object.keys(e).filter(t=>e[t]).reduce((t,n)=>({...t,[n]:"object"==typeof e[n]?e[n].code:e[n]}),{}),W=Y.city;return delete Y.addParam,delete Y.addParam1,delete Y.city,_({city:W,filters:Y}),Promise.resolve()}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,config:F,label:s.texts.submitButtonLabel,heading:p(s.texts.header),text:p(s.texts.text),headingStyle:{fontSize:"32px",marginBottom:"16px",fontFamily:"Roboto Condensed,sans-serif"},onFormValueChange:(e,t,n)=>{null!=t&&t.doorNo&&""!==(null==t?void 0:t.doorNo)&&""!==(null==t?void 0:t.propertyIds)&&(t.propertyIds="");const l=null==t?void 0:t.city;(null==l?void 0:l.code)!==f&&P(null==l?void 0:l.code),Xe.isEqual(t,g)||N(t)},cardStyle:{marginBottom:"0"}}),l.createElement("span",{className:"link",style:{display:"flex",justifyContent:R?"center":"left",paddingBottom:"16px",paddingLeft:"24px",marginTop:"-24px"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application"},p("CPT_REG_NEW_PROPERTY"))),T&&l.createElement(t.Toast,{error:T.error,isDleteBtn:!0,warning:T.warning,label:p(T.label),onClose:()=>{y(null),O(!1)}}))};ct.propTypes={loginParams:ne.any},ct.defaultProps={loginParams:null};const pt=[{texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"CS_VIEW_DETAILS"},labels:[{label:"PT_TOTAL_DUES",key:"total_due",noteStyle:{fontSize:"24px",fontWeight:"bold"},notePrefix:"₹ "},{label:"PT_PROPERTY_PTUID",key:"property_id"},{label:"PT_OWNERSHIP_INFO_NAME",key:"owner_name"},{label:"PT_PROPERTY_ADDRESS_SUB_HEADER",key:"property_address"},{label:"PT_DUE_DATE",key:"bil_due__date"}]}],mt=e=>{var a,r,u,d,s,c,p,m;let{template:v,header:E,actionButtonLabel:_,isMutation:T,onSelect:y,config:S,clearParams:f=(()=>{})}=e;const{t:P}=o.useTranslation(),g=n.useRef(),{mobileNumber:N,propertyIds:A,oldPropertyIds:O,locality:I,city:h,doorNo:C,name:R,PToffset:b}=Digit.Hooks.useQueryParams();let D={};const[L,M]=n.useState(!1);let w,x,U=b;isNaN(parseInt(U))?w=5:(x=U,w=parseInt(U)+5);let F=isNaN(parseInt(U))?{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:"0",status:"ACTIVE"}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:x,status:"ACTIVE"};Digit.Hooks.useClickOutside(g,()=>{M(!1)},L),N&&(D.mobileNumber=N),A&&(D.propertyIds=A),O&&(D.oldPropertyIds=O),I&&(D.locality=I),C&&(D.doorNo=C),R&&(D.name=R),D.limit=F.limit,D.sortOrder=F.sortOrder,D.sortBy=F.sortBy,D.offset=F.offset,D.status=F.status;const[B,k,H]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS",null),[Y,W,j]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS_LAST_PATH",null);n.useEffect(()=>{k([]),f(),W("")},[]);const K=Digit.ULBService.getCurrentTenantId(),V=Digit.Hooks.pt.usePropertySearch(h?{tenantId:h,filters:D,auth:!0}:{filters:D,auth:!0}),G=null==V||null===(a=V.data)||void 0===a||null===(r=a.Properties)||void 0===r?void 0:r.map(e=>e.propertyId).join(",");let z=N?{mobileNumber:N,consumerCode:G}:{consumerCode:G};window.location.href.includes("/search-results")&&(z={consumerCode:G});const X=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",...z,tenantId:h},{enabled:!!G,retry:!1}),q=i.useHistory();if(X.isLoading||V.isLoading)return l.createElement(t.Loader,null);if(V.error||!G)return l.createElement("div",{style:{height:"150px"}},l.createElement(t.Card,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},P("CS_PT_NO_PROPERTIES_FOUND")));const $={};null==X||null===(u=X.data)||void 0===u||null===(d=u.Bill)||void 0===d||d.forEach(e=>{var t,n;null!=e&&e.consumerCode&&($[null==e?void 0:e.consumerCode]={total_due:null==e?void 0:e.totalAmount,bil_due__date:new Date(null==e||null===(t=e.billDetails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.expiryDate).toDateString()})});const Z=T?null==V||null===(s=V.data)||void 0===s||null===(c=s.Properties)||void 0===c?void 0:c.filter(e=>"ACTIVE"===e.status):null==V||null===(p=V.data)||void 0===p?void 0:p.Properties,Q=null==Z?void 0:Z.map(e=>{var t,n,l,o;let i=(null==e?void 0:e.address)||{};return{property_id:null==e?void 0:e.propertyId,owner_name:null===(t=(null==e?void 0:e.owners)||[])||void 0===t?void 0:t.map(e=>null==e?void 0:e.name).join(","),property_address:[i.doorNo||"",i.buildingName||"",i.street||"",(null===(n=i.locality)||void 0===n?void 0:n.name)||"",i.city||""].filter(e=>e).join(", "),total_due:(null===(l=$[null==e?void 0:e.propertyId])||void 0===l?void 0:l.total_due)||0,bil_due__date:(null===(o=$[null==e?void 0:e.propertyId])||void 0===o?void 0:o.bil_due__date)||P("N/A")}});return l.createElement("div",{className:"static",style:{marginTop:"16px"}},l.createElement("div",{className:"static-wrapper"},E&&l.createElement(t.Header,{style:{marginLeft:"8px"}},P(E)," (",null==Q?void 0:Q.length,")"),l.createElement(t.ResponseComposer,{data:Q,template:v,actionButtonLabel:_,onSubmit:e=>{if(T){var t,n,l;let o=null==V||null===(t=V.data)||void 0===t||null===(n=t.Properties)||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,t=>t.propertyId===e.property_id)[0];Number(e.total_due)>0?M(e):y(S.key,{data:e,property:o})}else q.push("/digit-ui/citizen/payment/my-bills/PT/"+e.property_id,{tenantId:K})}})),L?l.createElement(t.Modal,{hideSubmit:!0,isDisabled:!1,popupStyles:{width:"319px",height:"250px",margin:"auto"},formId:"modal-action"},l.createElement("div",{ref:g},l.createElement(t.KeyNote,{keyValue:P("PT_AMOUNT_DUE"),note:"₹ "+(null==L||null===(m=L.total_due)||void 0===m?void 0:m.toLocaleString("en-IN")),noteStyle:{fontSize:"24px",fontWeight:"bold"}}),l.createElement("p",null,P("PT_YOU_HAVE")+" ₹ "+(null==L?void 0:L.total_due.toLocaleString("en-IN"))+" "+P("PT_PENDING_AMOUNT")+" "+P("PT_INORDER_TO_TRANSFER")),l.createElement(t.SubmitBar,{submit:!1,onSubmit:()=>{q.push("/digit-ui/citizen/payment/my-bills/PT/"+L.property_id,{tenantId:K})},style:{marginTop:"14px",width:"100%"},label:P("PT_PROCEED_PAYMENT")}))):null,!(null!=Q&&Q.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},P("PT_NO_PROP_FOUND_MSG")),0!==(null==Q?void 0:Q.length)&&(5==(null==Q?void 0:Q.length)||50==(null==Q?void 0:Q.length))&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},P("PT_LOAD_MORE_MSG")," ",l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/search-results?mobileNumber="+(N||"")+"&propertyIds="+(A||"")+"&oldPropertyIds="+(O||"")+"&doorNo="+(C||"")+"&name="+(R||"")+"&city="+(h||"")+"&locality="+(I||"")+"&PToffset="+w},P("PT_COMMON_CLICK_HERE"))))),T&&0!==(null==Q?void 0:Q.length)?l.createElement(t.CitizenInfoLabel,{info:P("CS_FILE_APPLICATION_INFO_LABEL"),text:P("PT_CANNOT_TRANSFER_IF_AMOUNT_PENDING")}):null)};mt.propTypes={template:ne.any,header:ne.string,actionButtonLabel:ne.string},mt.defaultProps={template:[],header:null,actionButtonLabel:null};const vt=e=>{const{config:t,onSelect:a,clearParams:r}=e,{t:u}=o.useTranslation(),{path:d}=i.useRouteMatch();let s=t?[t]:pt;const c=n.useMemo(()=>{var e;return null==s||null===(e=s.map)||void 0===e?void 0:e.call(s,e=>{const t={};for(const n in e.texts)t[n]=u(e.texts[n]);return{...e,texts:t}})},[s]);return l.createElement(i.Switch,null,l.createElement(i.Route,{path:""+d,exact:!0},l.createElement(mt,{template:c[0].labels,header:c[0].texts.header,actionButtonLabel:c[0].texts.actionButtonLabel,t:u,isMutation:"MUTATION"===(null==t?void 0:t.action),onSelect:a,config:t,clearParams:r})))},Et=e=>{let{jumpTo:n}=e;const{t:a}=o.useTranslation(),r=i.useHistory();return l.createElement(t.LinkButton,{label:a("CS_COMMON_CHANGE"),className:"check-page-link-button",onClick:function(){r.push(n)}})},_t=e=>e.substr(0,1).toUpperCase()+e.substr(1),Tt=e=>e.toLowerCase().split(" ").map(_t).join(" "),yt=(e,t,n)=>{let l=[];var o,i,a,r,u,d,s,c,p,m,v,E,_,T,y,S;if(n&&n.includes("TRANSFEROR")?null!=e&&e.isTransferor&&null!=e&&e.transferorDetails?e.ownershipCategory=null==e||null===(o=e.transferorDetails)||void 0===o?void 0:o.ownershipCategory:l=null!=e&&e.ownersInit?[...(null==e?void 0:e.ownersInit)||[]]:[...(null==e?void 0:e.owners.filter(e=>"INACTIVE"==e.status))||[]]:l=[...(null==e?void 0:e.owners.filter(e=>"ACTIVE"==e.status))||[]],"INDIVIDUAL.SINGLEOWNER"==(null==e?void 0:e.ownershipCategory))return{title:t(n||"PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_OWNERSHIP_INFO_NAME"),value:(null===(i=l[0])||void 0===i?void 0:i.name)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_MOBILE_NO"),value:(null===(a=l[0])||void 0===a?void 0:a.mobileNumber)||t("CS_NA")},{title:t("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME"),value:(null===(r=l[0])||void 0===r?void 0:r.fatherOrHusbandName)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_GENDER"),value:t(null===(u=l[0])||void 0===u?void 0:u.gender)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_EMAIL_ID"),value:(null===(d=l[0])||void 0===d?void 0:d.emailId)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_USER_CATEGORY"),value:t(Ne(null===(s=l[0])||void 0===s?void 0:s.ownerType))||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null===(c=l[0])||void 0===c?void 0:c.permanentAddress)||t("CS_NA")}]};if(null!=e&&e.ownershipCategory.includes("INDIVIDUAL")){let o=[];return l.map(n=>{let l=[{title:t("PT_OWNERSHIP_INFO_NAME"),value:(null==n?void 0:n.name)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_MOBILE_NO"),value:(null==n?void 0:n.mobileNumber)||t("CS_NA")},{title:t("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME"),value:(null==n?void 0:n.fatherOrHusbandName)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_GENDER"),value:t(null==n?void 0:n.gender)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_EMAIL_ID"),value:(null==n?void 0:n.emailId)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_USER_CATEGORY"),value:t(Ne(null==n?void 0:n.ownerType))||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null==n?void 0:n.permanentAddress)||t("CS_NA")}];o.push(...l)}),{title:t(n||"PT_OWNERSHIP_INFO_SUB_HEADER"),values:o}}return null!=e&&e.ownershipCategory.includes("INSTITUTIONAL")?{title:t("PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_COMMON_INSTITUTION_NAME"),value:(null==e||null===(p=e.institution)||void 0===p?void 0:p.name)||t("CS_NA")},{title:t("PT_TYPE_OF_INSTITUTION"),value:(null==e||null===(m=e.institution)||void 0===m?void 0:m.type)||t("CS_NA")},{title:t("PT_OWNER_NAME"),value:(null==e||null===(v=e.institution)||void 0===v?void 0:v.nameOfAuthorizedPerson)||t("CS_NA")},{title:t("PT_COMMON_AUTHORISED_PERSON_DESIGNATION"),value:(null==e||null===(E=e.institution)||void 0===E?void 0:E.designation)||t("CS_NA")},{title:t("PT_FORM3_MOBILE_NUMBER"),value:(null===(_=l[0])||void 0===_?void 0:_.mobileNumber)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_TEL_PHONE_NO"),value:(null===(T=l[0])||void 0===T?void 0:T.altContactNumber)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null===(y=l[0])||void 0===y?void 0:y.correspondenceAddress)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_EMAIL_ID"),value:(null===(S=l[0])||void 0===S?void 0:S.emailId)||t("CS_NA")}]}:{title:t("PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_NO_OWNERS"),value:t("CS_NA")}]}},St=(e,t)=>{var n,l,o,i,a,r,u,d;let s=[{title:t("PT_ASSESMENT_INFO_USAGE_TYPE"),value:null!=e&&e.usageCategory?""+t(("RESIDENTIAL"!==(null==e?void 0:e.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPSUBUSGTYPE_")+(null!=e&&null!==(n=e.usageCategory)&&void 0!==n&&n.split(".")[1]?null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.split(".")[1]:null==e?void 0:e.usageCategory)):t("CS_NA")},{title:t("PT_ASSESMENT_INFO_TYPE_OF_BUILDING"),value:t(Se(null==e?void 0:e.propertyType))||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_PLOT_SIZE"),value:t(null==e?void 0:e.landArea)||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_NO_OF_FLOOR"),value:t(null==e?void 0:e.noOfFloors)||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_ELECTRICITY_ID"),value:t(null==e||null===(o=e.additionalDetails)||void 0===o?void 0:o.electricity)||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_ELECTRICITY_UID"),value:t(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.uid)||t("CS_NA")},{title:t("PT_FORM2_PROPERTY_TYPE"),value:t(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.structureType.i18nKey)||t("CS_NA")},{title:t("PT_FORM2_AGE_OF_PROPERTY"),value:t(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.ageOfProperty.code)||t("CS_NA")}];e.units=(null==e||null===(u=e.units)||void 0===u?void 0:u.filter(e=>1==e.active))||[];let c,p=0;return c=e.units&&(null===(d=e.units[0])||void 0===d?void 0:d.floorNo),e.units.map(n=>{var l,o,i,a,r,u,d;let m=[{title:(c!==(null==n?void 0:n.floorNo)?p=1:p+=1)&&1===p?t("PROPERTYTAX_FLOOR_"+(null==n?void 0:n.floorNo)):""},{title:t("")},{title:t("")},{title:t("")},{title:t("PT_UNIT")+" "+p},{title:t("")},{title:t("")},{title:t("")},{title:(c=null==n?void 0:n.floorNo)>-3?t("PT_ASSESSMENT_UNIT_USAGE_TYPE"):"",value:(c=null==n?void 0:n.floorNo)>-3?t((v=null==n?void 0:n.usageCategory,void 0===v&&(v=""),ye(v,"COMMON_PROPSUBUSGTYPE")))||t("CS_NA"):""},{title:(c=null==n?void 0:n.floorNo)>-3?t("PT_ASSESMENT_INFO_OCCUPLANCY"):"",value:(c=null==n?void 0:n.floorNo)>-3?t(fe(null==n?void 0:n.occupancyType))||t("CS_NA"):""},{title:(c=null==n?void 0:n.floorNo)>-3?t("PT_FORM2_BUILT_AREA"):"",value:(c=null==n?void 0:n.floorNo)>-3?t(null==n||null===(l=n.constructionDetail)||void 0===l?void 0:l.builtUpArea)||t("CS_NA"):""},{title:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?t("PT_FORM2_TOTAL_ANNUAL_RENT"):t(""):"",value:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?(null==n?void 0:n.arv)&&"₹"+t(null==n?void 0:n.arv)||"NA":t(""):""},{title:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?t("PT_FORM2_RENTED_MONTHS"):t(""):"",value:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?(null==e||null===(o=e.additionalDetails)||void 0===o||null===(i=o.unit)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.rentedMonths)||t("CS_NA"):t(""):""},{title:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?t("PT_FORM2_NONRENTED_MONTHS_USAGE"):t(""):"",value:(c=null==n?void 0:n.floorNo)>-3?"Rented"===t(fe(null==n?void 0:n.occupancyType))?(null==e||null===(r=e.additionalDetails)||void 0===r||null===(u=r.unit)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.nonRentedMonthsUsage)||t("CS_NA"):t(""):""}];var v;s.push(...m)}),{title:t("PT_ASSESMENT_INFO_SUB_HEADER"),values:s}},ft=(e,t)=>{var n,l,o,i,a;return{title:t("PT_MUTATION_DETAILS"),values:[{title:t("PT_MUTATION_COURT_PENDING_OR_NOT"),value:null!=e&&null!==(n=e.additionalDetails)&&void 0!==n&&n.isMutationInCourt?t("PT_MUTATION_PENDING_"+(null==e?void 0:e.additionalDetails.isMutationInCourt)):t("CS_NA")},{title:t("PT_MUTATION_COURT_CASE_DETAILS"),value:(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.caseDetails)||t("CS_NA")},{title:t("PT_MUTATION_STATE_ACQUISITION"),value:null!=e&&null!==(o=e.additionalDetails)&&void 0!==o&&o.isPropertyUnderGovtPossession?t("PT_MUTATION_STATE_ACQUISITION_"+(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.isPropertyUnderGovtPossession)):t("CS_NA")},{title:t("PT_MUTATION_GOVT_ACQUISITION_DETAILS"),value:(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.govtAcquisitionDetails)||t("CS_NA")}]}},Pt=(e,t)=>{var n,l,o,i,a,r,u;return{title:t("PT_MUTATION_REGISTRATION_DETAILS"),values:[{title:t("PT_MUTATION_TRANSFER_REASON"),value:t("PROPERTYTAX_REASONFORTRANSFER_"+(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.reasonForTransfer.replaceAll(".","_")))},{title:t("PT_MUTATION_MARKET_VALUE"),value:(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.marketValue)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_NO"),value:(null==e||null===(o=e.additionalDetails)||void 0===o?void 0:o.documentNumber)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_VALUE"),value:(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.documentValue)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_ISSUE_DATE"),value:null!=e&&null!==(a=e.additionalDetails)&&void 0!==a&&a.documentDate?new Date(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.documentDate).toDateString():t("CS_NA")},{title:t("")},{title:t("PT_MUTATION_REMARKS"),value:(null==e||null===(u=e.additionalDetails)||void 0===u?void 0:u.remarks)||t("CS_NA")}]}},gt=function(e,t,n){try{var l;function o(l){var o,i,a,r,u,d,s,c,p,m,v,E,_,T,y,S;return"MUTATION"===e.creationReason?{t:n,tenantId:null==t?void 0:t.code,name:n(null==t?void 0:t.i18nKey)+" "+Tt(n("ULBGRADE_"+(null==t||null===(o=t.city)||void 0===o?void 0:o.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),email:null==t?void 0:t.emailId,phoneNumber:null==t?void 0:t.contactNumber,heading:n("PT_ACKNOWLEDGEMENT"),details:[{title:n("CS_TITLE_APPLICATION_DETAILS"),values:[{title:n("PT_APPLICATION_NO"),value:null==e?void 0:e.acknowldgementNumber},{title:n("PT_PROPERRTYID"),value:null==e?void 0:e.propertyId},{title:n("CS_APPLICATION_DETAILS_APPLICATION_DATE"),value:Digit.DateUtils.ConvertTimestampToDate(null==e||null===(i=e.auditDetails)||void 0===i?void 0:i.createdTime,"dd/MM/yyyy")}]},{title:n("PT_PROPERTY_ADDRESS_SUB_HEADER"),values:[{title:n("PT_PROPERTY_ADDRESS_PINCODE"),value:(null==e||null===(a=e.address)||void 0===a?void 0:a.pincode)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_CITY"),value:n(ge(null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_MOHALLA"),value:n(""+Pe(null==e||null===(r=e.address)||void 0===r||null===(u=r.locality)||void 0===u?void 0:u.code,null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_STREET_NAME"),value:(null==e||null===(d=e.address)||void 0===d?void 0:d.street)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_HOUSE_NO"),value:(null==e||null===(s=e.address)||void 0===s?void 0:s.doorNo)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_LANDMARK"),value:(null==e||null===(c=e.address)||void 0===c?void 0:c.landmark)||n("CS_NA")}]},yt(e,n,"PT_MUTATION_TRANSFEROR_DETAILS"),yt(e,n,"PT_MUTATION_TRANSFEREE_DETAILS_HEADER"),ft(e,n),Pt(e,n)]}:{t:n,tenantId:null==t?void 0:t.code,name:n(null==t?void 0:t.i18nKey)+" "+Tt(n("ULBGRADE_"+(null==t||null===(p=t.city)||void 0===p?void 0:p.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),email:null==t?void 0:t.emailId,phoneNumber:null==t?void 0:t.contactNumber,heading:n("NEW_PROPERTY_REGISTRATION"),applicationNumber:null==e?void 0:e.acknowldgementNumber,details:[{title:n("CS_TITLE_APPLICATION_DETAILS"),values:[{title:n("PT_PROPERRTYID"),value:null==e?void 0:e.propertyId},{title:n("CS_APPLICATION_DETAILS_APPLICATION_DATE"),value:Digit.DateUtils.ConvertTimestampToDate(null==e||null===(m=e.auditDetails)||void 0===m?void 0:m.createdTime,"dd/MM/yyyy")}]},yt(e,n),St(e,n),{title:n("PT_PROPERTY_ADDRESS_SUB_HEADER"),values:[{title:n("PT_PROPERTY_ADDRESS_PINCODE"),value:(null==e||null===(v=e.address)||void 0===v?void 0:v.pincode)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_CITY"),value:n(ge(null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_MOHALLA"),value:n(""+Pe(null==e||null===(E=e.address)||void 0===E||null===(_=E.locality)||void 0===_?void 0:_.code,null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_STREET_NAME"),value:(null==e||null===(T=e.address)||void 0===T?void 0:T.street)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_HOUSE_NO"),value:(null==e||null===(y=e.address)||void 0===y?void 0:y.doorNo)||n("CS_NA")},"CITIZEN"===(null==e?void 0:e.channel)?{title:n("PT_PROPERTY_ADDRESS_LANDMARK"),value:(null==e||null===(S=e.address)||void 0===S?void 0:S.landmark)||n("CS_NA")}:{}]},{title:n("PT_COMMON_DOCS"),values:e.documents&&e.documents.length>0?e.documents.map((e,t)=>{let o=we(null==l?void 0:l.data,null==e?void 0:e.fileStoreId);return{title:n((null==e?void 0:e.documentType)||n("CS_NA")),value:xe(o,t)||n("CS_NA")}}):{title:n("PT_NO_DOCUMENTS"),value:" "}}]}}const i=null==e||null===(l=e.documents)||void 0===l?void 0:l.map(e=>null==e?void 0:e.fileStoreId),a=(null==i?void 0:i.length)>0;return Promise.resolve(a?Promise.resolve(Digit.UploadServices.Filefetch(i,Digit.ULBService.getStateId())).then(o):o(a))}catch(e){return Promise.reject(e)}},Nt=e=>{const{t:t}=o.useTranslation();return e.isSuccess?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_SUCCESS"):t("CS_PROPERTY_APPLICATION_SUCCESS"):e.isLoading?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_PENDING"):t("CS_PROPERTY_APPLICATION_PENDING"):e.isSuccess?void 0:window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_FAILED"):t("CS_PROPERTY_APPLICATION_FAILED")},At={padding:"4px 0px",justifyContent:"space-between"},Ot=e=>{var n;return l.createElement(t.Banner,{message:Nt(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.Properties[0].acknowldgementNumber,info:e.isSuccess?e.t("PT_APPLICATION_NO"):"",successful:e.isSuccess,style:{width:"100%"}})},It=e=>{let t=e.searchBy;return l.createElement("div",{className:"w-fullwidth PropertySearchFormSwitcher"},e.keys.map(n=>l.createElement("span",{key:n,className:t===n?"selected":"non-selected",onClick:()=>{"searchDetail"===n&&!sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",1),"searchId"===n&&1==sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",2),e.onSwitch(n),e.onReset()}},e.t("PT_SEARCH_BY_"+(null==n?void 0:n.toUpperCase())))))},ht=e=>{let{skipNContinue:n,updateMobileNumber:a}=e;const{t:r}=o.useTranslation();return i.useParams(),l.createElement(l.Fragment,null,l.createElement(t.Card,null,l.createElement("div",null,l.createElement("p",null,r("PT_INVALID_OWNERS_MOBILE_NO"))),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:r("PT_SKIP_N_CONTINUE"),onSubmit:n,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:r("PT_UPDATE_MOBILE_NO"),onSubmit:a,style:{marginLeft:"10px"}}))))},Ct=e=>l.createElement("span",{className:"cell-text"},e),Rt=function(e){var t;void 0===e&&(e="");let n=(null===(t=e)||void 0===t?void 0:t.split("."))||[],l={};return l.usageCategoryMajor=n&&n.length>0&&n[0],l.usageCategoryMinor=n&&n.length>1&&n[1],l.usageCategorySubMinor=n&&n.length>2&&n[2],l.usageCategoryDetail=n&&n.length>3&&n[3],l},bt=function(e,t,n){return void 0===e&&(e=[]),e&&0!=e.length?e.map(e=>{var t,n,l,o;let i=null==e||!e.usageCategory||null!=e&&null!==(t=e.usageCategory)&&void 0!==t&&t.includes("NONRESIDENTIAL")?null===(n=Rt(null==e?void 0:e.usageCategory))||void 0===n?void 0:n.usageCategoryMinor:"RESIDENTIAL";return{...e,builtUpArea:null==e||null===(l=e.constructionDetail)||void 0===l?void 0:l.builtUpArea,rentedMonths:null==e?void 0:e.rentedMonths,nonRentedMonthsUsage:null==e?void 0:e.nonRentedMonthsUsage,ageOfProperty:null==e?void 0:e.ageOfProperty,structureType:null==e?void 0:e.structureType,usageCategory:i?{code:i,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+i}:{},occupancyType:null!=e&&e.occupancyType?{code:e.occupancyType,i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType)}:"",floorNo:null!=e&&e.floorNo||Number.isInteger(null==e?void 0:e.floorNo)?{code:e.floorNo,i18nKey:"PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo)}:{},unitType:null!=e&&e.unitType?{code:e.unitType,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+((null==e||null===(o=e.unitType)||void 0===o?void 0:o.code)||(null==e?void 0:e.unitType))}:""}}):[{usageCategory:"",unitType:"",occupancyType:"",builtUpArea:null,arv:"",floorNo:n?{code:t,i18nKey:"PROPERTYTAX_FLOOR_"+t}:""}]},Dt=l.memo(e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e,d=window.location.pathname.split("/"),s=Number(d[d.length-1]),p=window.location.pathname.includes("new-application/units")||window.location.pathname.includes("/edit-application/units");const[m,v]=n.useState(bt(p?null==u||null===(o=u.units)||void 0===o?void 0:o.filter(e=>e.floorNo==s):null==u?void 0:u.units,s,p));n.useEffect(()=>(v(()=>{var e;return bt(p?null==u||null===(e=u.units)||void 0===e?void 0:e.filter(e=>e.floorNo==s):null==u?void 0:u.units,s,p)}),()=>{v(null)}),[s,u,p]);const{data:E,isLoading:_}=Digit.Hooks.useCommonMDMSV2(Digit.ULBService.getStateId(),"PropertyTax",["Floor","OccupancyType","UsageCategory"],{select:e=>{var t,n,l,o,i,a,r,u,d,s;let c=null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UsageCategory)||void 0===n?void 0:n.map(e=>Rt(e.code)).filter(e=>!1===e.usageCategoryDetail&&!1===e.usageCategorySubMinor&&!1!==e.usageCategoryMinor).map(e=>({code:e.usageCategoryMinor,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryMinor})),p=Digit.Utils.getUnique(null==e||null===(l=e.PropertyTax)||void 0===l?void 0:l.UsageCategory.map(e=>Rt(e.code)).filter(e=>e.usageCategoryDetail).map(e=>({code:e.usageCategoryDetail,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryDetail,usageCategorySubMinor:e.usageCategorySubMinor,usageCategoryMinor:e.usageCategoryMinor})));return{Floor:null==e||null===(o=e.PropertyTax)||void 0===o||null===(i=o.Floor)||void 0===i||null===(a=i.filter(e=>e.active))||void 0===a?void 0:a.map(e=>({i18nKey:"PROPERTYTAX_FLOOR_"+e.code,code:e.code})),OccupancyType:null==e||null===(r=e.PropertyTax)||void 0===r||null===(u=r.OccupancyType)||void 0===u||null===(d=u.filter(e=>e.active))||void 0===d?void 0:d.map(e=>({i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+e.code,code:e.code})),UsageCategory:c,UsageSubCategory:p,usageDetails:null==e||null===(s=e.PropertyTax)||void 0===s?void 0:s.UsageCategory}},retry:!1,enable:!1});let T=[{i18nKey:"PROPERTYTAX_MONTH1",name:"Month 1",code:"1",active:!0},{i18nKey:"PROPERTYTAX_MONTH2",name:"Month 2",code:"2",active:!0},{i18nKey:"PROPERTYTAX_MONTH3",name:"Month 3",code:"3",active:!0},{i18nKey:"PROPERTYTAX_MONTH4",name:"Month 4",code:"4",active:!0},{i18nKey:"PROPERTYTAX_MONTH5",name:"Month 5",code:"5",active:!0},{i18nKey:"PROPERTYTAX_MONTH6",name:"Month 6",code:"6",active:!0},{i18nKey:"PROPERTYTAX_MONTH7",name:"Month 7",code:"7",active:!0},{i18nKey:"PROPERTYTAX_MONTH8",name:"Month 8",code:"8",active:!0},{i18nKey:"PROPERTYTAX_MONTH9",name:"Month 9",code:"9",active:!0},{i18nKey:"PROPERTYTAX_MONTH10",name:"Month 10",code:"10",active:!0},{i18nKey:"PROPERTYTAX_MONTH11",name:"Month 11",code:"11",active:!0},{i18nKey:"PROPERTYTAX_MONTH12",name:"Month 12",code:"12",active:!0}],y=[{i18nKey:"NON_RENT_SELFOCCUPIED",name:"Non Rent Self occupied",code:"NonRentSelfOccupied",active:!0},{i18nKey:"NON_RENT_UNOCCUPIED",name:"Non rent Un occupied",code:"NonRentUnOccupied",active:!0}];return _?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:(a.texts.header="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==u||null===(S=u.PropertyType)||void 0===S?void 0:S.i18nKey)?"PT_FLAT_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+s+"_DETAILS",a),onSelect:()=>{var e;let t=(null==u?void 0:u.units)||[],n=m.map(e=>{var t,n,l,o,i;"object"==typeof(null==e||null===(t=e.unitType)||void 0===t?void 0:t.code)&&null!=e&&null!==(n=e.unitType)&&void 0!==n&&null!==(l=n.code)&&void 0!==l&&l.code&&(e.unitType.code=null==e||null===(o=e.unitType)||void 0===o||null===(i=o.code)||void 0===i?void 0:i.code);let a={};return Object.keys(e).filter(t=>e[t]).map(t=>{var n;if("object"==typeof e.unitType&&null==e.unitType.code&&(e.unitType=""),"usageCategory"===t)a.usageCategory=null==E||null===(n=E.usageDetails.find(n=>{var l,o;return n.code.includes(null===(l=e[t])||void 0===l?void 0:l.code)&&n.code.includes("object"==typeof e.unitType?null===(o=e.unitType)||void 0===o?void 0:o.code:e.unitType)}))||void 0===n?void 0:n.code;else if("builtUpArea"===t)a.constructionDetail={builtUpArea:e[t]};else{var l;a[t]="object"==typeof e[t]?null===(l=e[t])||void 0===l?void 0:l.code:e[t]}}),a});var l,o,i;p&&(t=null===(l=t)||void 0===l?void 0:l.filter(e=>e.floorNo!=s),n=[...t,...n]),s!==(null==u||null===(e=u.noOfFloors)||void 0===e?void 0:e.code)&&p?-1==s&&2==(null==u||null===(o=u.noOofBasements)||void 0===o?void 0:o.code)?r(a.key,n,!1,-2,!0):s<0?r(a.key,n):r(a.key,n,!1,s+1,!0):(null==u||null===(i=u.noOofBasements)||void 0===i?void 0:i.code)>0?r(a.key,n,!1,-1,!0):r(a.key,n)},onSkip:()=>r(),t:i,isDisabled:function(){let e=0;return m&&(null==m||m.map(t=>{var n,l;null!=t&&t.usageCategory&&0!=Object.keys(null==t?void 0:t.usageCategory)&&null!=t&&t.occupancyType&&null!=t&&t.builtUpArea&&("RESIDENTIAL"===(null==t||null===(n=t.usageCategory)||void 0===n?void 0:n.code)||null!=t&&t.unitType)&&("RENTED"!==(null==t||null===(l=t.occupancyType)||void 0===l?void 0:l.code)||null!=t&&t.arv)||(e=1)})),0!=e}()},m.map((e,o)=>{var r,d,s,c,_,S,f,P,g,N,A,O,I,h,C;return l.createElement("div",{key:e+"-"+o},l.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{float:"right",position:"relative"},fill:1!==m.length?"#494848":"#FAFAFA"}),style:{width:"100px",display:"inline"},onClick:e=>function(e){const t=[...m];1!=t.length&&(t.splice(e,1),v(t))}(o)}),l.createElement(t.CardLabel,null,i("PT_FORM2_USAGE_TYPE")+"*"),l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:[...null!=E&&E.UsageCategory?null==E?void 0:E.UsageCategory:[],{code:"RESIDENTIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_RESIDENTIAL"}],selected:null==e?void 0:e.usageCategory,select:e=>function(e,t){let n=[...m];n[e].usageCategory=t,n[e].unitType="",v(n)}(o,e)}),(null==e||null===(r=e.usageCategory)||void 0===r?void 0:r.code)&&!1===e.usageCategory.code.includes("RESIDENTIAL")&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_SUB_USAGE_TYPE")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E||null===(d=E.UsageSubCategory)||void 0===d?void 0:d.filter(t=>{var n;return t.usageCategoryMinor===(null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.code)}),selected:null==e?void 0:e.unitType,select:e=>function(e,t){let n=[...m];n[e].unitType=t,v(n)}(o,e)}))),l.createElement(t.CardLabel,null,i("PT_FORM2_OCCUPANCY")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E?void 0:E.OccupancyType,selected:null==e?void 0:e.occupancyType,select:e=>function(e,t){let n=[...m];n[e].occupancyType=t,v(n)}(o,e)})),(null==e||null===(s=e.occupancyType)||void 0===s?void 0:s.code)&&e.occupancyType.code.includes("RENTED")&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_TOTAL_ANNUAL_RENT")+"*"),l.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:i,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"arv",value:null==e?void 0:e.arv,onChange:e=>function(e,t){let n=[...m];n[e].arv=t.target.value,v(n)}(o,e),isRequired:!0,pattern:"[0-9]+",type:"text",title:i("CORE_COMMON_REQUIRED_ERRMSG")}),l.createElement(t.CardLabel,null,i("PT_FORM2_RENTED_MONTHS")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:T,selected:null==e?void 0:e.rentedMonths,select:e=>function(e,t){let n=[...m];n[e].rentedMonths=t,v(n)}(o,e)})),("1"===(null==e||null===(c=e.rentedMonths)||void 0===c?void 0:c.code)||"2"===(null==e||null===(_=e.rentedMonths)||void 0===_?void 0:_.code)||"3"===(null==e||null===(S=e.rentedMonths)||void 0===S?void 0:S.code)||"4"===(null==e||null===(f=e.rentedMonths)||void 0===f?void 0:f.code)||"5"===(null==e||null===(P=e.rentedMonths)||void 0===P?void 0:P.code)||"6"===(null==e||null===(g=e.rentedMonths)||void 0===g?void 0:g.code)||"7"===(null==e||null===(N=e.rentedMonths)||void 0===N?void 0:N.code)||"8"===(null==e||null===(A=e.rentedMonths)||void 0===A?void 0:A.code)||"9"===(null==e||null===(O=e.rentedMonths)||void 0===O?void 0:O.code)||"10"===(null==e||null===(I=e.rentedMonths)||void 0===I?void 0:I.code)||"11"===(null==e||null===(h=e.rentedMonths)||void 0===h?void 0:h.code))&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_NONRENTED_MONTHS_USAGE")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:y,selected:null==e?void 0:e.nonRentedMonthsUsage,select:e=>function(e,t){let n=[...m];n[e].nonRentedMonthsUsage=t,v(n)}(o,e)})))," "),l.createElement(t.CardLabel,null,"COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==u||null===(C=u.PropertyType)||void 0===C?void 0:C.i18nKey)?i("PT_FORM2_BUILT_UP_AREA")+"*":i("PT_BUILT_UP_AREA_HEADER")+"*"),l.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:i,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"builtUpArea",value:(null==e?void 0:e.builtUpArea)||"",onChange:e=>function(e,t){let n=[...m];n[e].builtUpArea=t.target.value,v(n)}(o,e),isRequired:!0,pattern:"[0-9]+",type:"text",title:i("CORE_COMMON_REQUIRED_ERRMSG")}),!p&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_SELECT_FLOOR")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E?void 0:E.Floor,selected:null==e?void 0:e.floorNo,select:e=>function(e,t){let n=[...m];n[e].floorNo=t,v(n)}(o,e)})))))}),l.createElement("div",{style:{justifyContent:"left",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},l.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>function(){const e=[...m];e.push({usageCategory:"",unitType:"",occupancyType:"",rentedMonths:"",nonRentedMonthsUsage:"",ageOfProperty:"",structureType:"",builtUpArea:null,arv:"",floorNo:p?{code:s,i18nKey:"PROPERTYTAX_FLOOR_"+s}:""}),v(e)}()},""+i("PT_ADD_UNIT")))));var S}),Lt=[{head:"ES_NEW_APPLICATION_LOCATION_DETAILS",body:[{route:"map",component:"PTSelectGeolocation",nextStep:"pincode",hideInEmployee:!0,key:"address",texts:{header:"PT_GEOLOCATON_HEADER",cardText:"PT_GEOLOCATION_TEXT",nextText:"PT_COMMON_NEXT",skipAndContinueText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"pincode",component:"PTSelectPincode",texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PINCODE_LABEL",cardText:"PT_PINCODE_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,key:"address",nextStep:"address",type:"component"},{route:"address",component:"PTSelectAddress",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_CITY_MOHALLA_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"address",nextStep:"street",isMandatory:!0,type:"component"},{type:"component",route:"street",component:"PTSelectStreet",key:"address",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"PT_STREET_TEXT",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"landmark"},{type:"component",route:"landmark",component:"PTSelectLandmark",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TITLE",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},key:"address",nextStep:"proof",hideInEmployee:!0},{type:"component",route:"proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PROOF_OF_ADDRESS_HEADER",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"address",nextStep:"owner-ship-details@0",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"info",component:"PropertyTax",nextStep:"property-type",hideInEmployee:!0,key:"Documents"},{type:"component",route:"isResidential",isMandatory:!0,component:"IsResidential",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_HEADER",cardText:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"isResdential",withoutLabel:!0,hideInEmployee:!0,nextStep:{PT_COMMON_YES:"property-type",PT_COMMON_NO:"property-usage-type"}},{type:"component",route:"property-usage-type",isMandatory:!0,component:"PropertyUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER",cardText:"PT_PROPERTY_DETAILS_USAGE_TYPE_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"property-type",key:"usageCategoryMajor",withoutLabel:!0},{type:"component",isMandatory:!0,component:"ProvideSubUsageType",key:"usageCategoryMinor",withoutLabel:!0},{type:"component",route:"provide-sub-usage-type",isMandatory:!0,component:"ProvideSubUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"is-any-part-of-this-floor-unoccupied",no:"provide-sub-usage-type-of-rented-area"},hideInEmployee:!0},{type:"component",route:"property-type",isMandatory:!0,component:"PropertyType",key:"PropertyType",texts:{headerCaption:"",header:"PT_ASSESMENT1_PROPERTY_TYPE",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"electricity-number",withoutLabel:!0},{type:"component",route:"electricity-number",isMandatory:!0,component:"Electricity",key:"electricity",withoutLabel:!0,texts:{headerCaption:"",header:"PT_ASSESMENT1_ELECTRICITY_NUMBER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"PropertyStructureDetails",withoutLabel:!0},{type:"component",route:"PropertyStructureDetails",isMandatory:!0,component:"PropertyStructureDetails",key:"propertyStructureDetails",withoutLabel:!0,texts:{headerCaption:"",header:"PT_STRUCTURE_DETAILS",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"uid"},{type:"component",route:"uid",isMandatory:!0,component:"UID",texts:{headerCaption:"",header:"PT_ASSESMENT1_ELECTRICITY_UID_NUMBER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"landarea",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"PtUnits",COMMON_PROPTYPE_VACANT:"area"},key:"uid",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Area",key:"landarea",withoutLabel:!0},{type:"component",route:"PtUnits",isMandatory:!0,component:"SelectPTUnits",texts:{headerCaption:"",header:"PT_FLAT_DETAILS",cardText:"PT_FLAT_DETAILS_DESC",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0},{type:"component",route:"landarea",isMandatory:!0,component:"PTLandArea",texts:{headerCaption:"",header:"PT_PLOT_SIZE_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"number-of-floors",hideInEmployee:!0},{type:"component",route:"area",isMandatory:!0,component:"Area",texts:{headerCaption:"",header:"PT_PLOT_SIZE_HEADER",cardText:"PT_FORM2_PLOT_SIZE_PLACEHOLDER",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0},{type:"component",route:"number-of-floors",isMandatory:!0,component:"PropertyBasementDetails",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_NO_OF_BASEMENTS_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"number-of-basements@0",key:"noOofBasements",withoutLabel:!0},{type:"component",component:"Units",key:"units",withoutLabel:!0},{type:"component",route:"provide-floor-no",isMandatory:!0,component:"ProvideFloorNo",texts:{headerCaption:"",header:"PT_FLOOR_NUMBER_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"units",key:"Floorno",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"is-this-floor-self-occupied",isMandatory:!0,component:"IsThisFloorSelfOccupied",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_FLOOR_OCC_HEADER",cardText:"PT_ASSESSMENT_FLOW_FLOOR_OCC_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_YES_IT_IS_SELFOCCUPIED:"provide-sub-usage-type",PT_YES_IT_IS_SELFOCCUPIED1:"is-any-part-of-this-floor-unoccupied",PT_PARTIALLY_RENTED_OUT:"area",PT_PARTIALLY_RENTED_OUT1:"area",PT_FULLY_RENTED_OUT:"provide-sub-usage-type-of-rented-area",PT_FULLY_RENTED_OUT1:"rental-details"},hideInEmployee:!0},{type:"component",route:"number-of-basements@0",isMandatory:!0,component:"PropertyFloorDetails",texts:{headerCaption:"",header:"BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL",cardText:"PT_PROPERTY_DETAILS_NO_OF_FLOORS_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{PT_NO_BASEMENT_OPTION:"units",PT_ONE_BASEMENT_OPTION:"units",PT_TWO_BASEMENT_OPTION:"units"},key:"noOfFloors",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"units",isMandatory:!0,component:"SelectPTUnits",texts:{headerCaption:"",header:"PT_FLAT_DETAILS",cardText:"PT_FLAT_DETAILS_DESC",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"map",key:"units",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"rental-details",isMandatory:!0,component:"RentalDetails",texts:{header:"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"is-any-part-of-this-floor-unoccupied",hideInEmployee:!0},{type:"component",route:"provide-sub-usage-type-of-rented-area",isMandatory:!0,component:"ProvideSubUsageTypeOfRentedArea",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_RENT_SUB_USAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"rental-details",hideInEmployee:!0},{type:"component",route:"is-any-part-of-this-floor-unoccupied",isMandatory:!0,component:"IsAnyPartOfThisFloorUnOccupied",texts:{header:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_HEADER",cardText:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_COMMON_NO:"map",PT_COMMON_YES:"un-occupied-area"},hideInEmployee:!0},{type:"component",route:"un-occupied-area",isMandatory:!0,component:"UnOccupiedArea",texts:{header:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_HEADER",cardText:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:""},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_PROPERTIES_OWNERSHIP",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"owner-details","INDIVIDUAL.MULTIPLEOWNERS":"owner-details"}},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_DOCUMENT_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"ES_NEW_APPLICATION_DOCUMENTS_REQUIRED",body:[{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}],Mt=e=>{let{application:n,buttonLabel:a}=e;const{t:r}=o.useTranslation();return l.createElement(t.Card,null,l.createElement(t.KeyNote,{keyValue:r("PT_APPLICATION_NO_LABEL"),note:null==n?void 0:n.acknowldgementNumber}),l.createElement(t.KeyNote,{keyValue:r("PT_APPLICATION_CATEGORY"),note:r("PROPERTY_TAX")}),l.createElement(t.KeyNote,{keyValue:r("PT_SEARCHPROPERTY_TABEL_PTUID"),note:null==n?void 0:n.propertyId}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_APP_TYPE"),note:(null==n?void 0:n.creationReason)&&r("PT."+n.creationReason)||r("CS_NA")}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_STATUS_LABEL"),note:r("PT_COMMON_"+(null==n?void 0:n.status))}),l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/application/"+(null==n?void 0:n.acknowldgementNumber)+"/"+(null==n?void 0:n.tenantId)},l.createElement(t.SubmitBar,{label:a})))},wt=e=>{let{application:a}=e;const{t:r}=o.useTranslation(),u=null==a?void 0:a.address,d=null==a?void 0:a.owners,[s,c]=n.useState(null),[p,m]=n.useState(!1);n.useEffect(()=>{!function(){try{m(!0),Promise.resolve(Digit.PaymentService.fetchBill(a.tenantId,{businessService:"PT",consumerCode:a.propertyId})).then(function(e){c(e),m(!1)})}catch(e){return Promise.reject(e)}}()},[a.tenantId,a.propertyId]),sessionStorage.removeItem("type"),sessionStorage.removeItem("pincode"),sessionStorage.removeItem("tenantId"),sessionStorage.removeItem("localityCode"),sessionStorage.removeItem("landmark"),sessionStorage.removeItem("propertyid");const v=null!==(null==d?void 0:d.additionalDetails)?d.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}):d;return l.createElement(t.Card,null,l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_PT_ID"),note:a.propertyId}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_OWNER_NAME"),note:v.map((e,t)=>l.createElement("div",{key:"index"},t==e.length-1?(null==e?void 0:e.name)+",":e.name))}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_COL_ADDRESS"),note:r(null==u?void 0:u.locality.name)+", "+r(null==u?void 0:u.city)+","+(r(null==u?void 0:u.pincode)?""+u.pincode:" ")||"CS_APPLICATION_TYPE_PT"}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_STATUS_LABEL"),note:r("PT_COMMON_"+a.status)}),l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/properties/"+a.propertyId},l.createElement(t.SubmitBar,{label:r("PT_VIEW_DETAILS")})),(null==s?void 0:s.Bill.length)>0?l.createElement(i.Link,{to:"/digit-ui/citizen/payment/my-bills/PT/"+(null==a?void 0:a.propertyId)},l.createElement("div",{style:{marginTop:"10px"}},l.createElement(t.SubmitBar,{label:r("COMMON_MAKE_PAYMENT")}))):null)},xt=e=>{let{width:t=20,height:n=20,style:o}=e;return l.createElement("svg",{style:o,xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:"0 0 20 20",fill:"gray"},l.createElement("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"}))};function Ut(e){let{property:n={}}=e;const{t:i}=o.useTranslation(),{isLoading:a,data:r}=Digit.Hooks.pt.usePropertyDocumentSearch({property:n}),u=(null==n?void 0:n.documents)||[];return a?l.createElement(t.Loader,null):l.createElement("div",{style:{marginTop:"19px"}},l.createElement(l.Fragment,null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},null==u?void 0:u.map((e,t)=>{let n=we(r.pdfFiles,null==e?void 0:e.fileStoreId);return l.createElement("a",{target:"_",href:n,style:{minWidth:"160px"},key:t},l.createElement(xt,{width:85,height:100,style:{background:"#f6f6f6",padding:"8px"}}),l.createElement("p",{style:{marginTop:"8px"}},i("PT_"+(null==e?void 0:e.documentType.replace(".","_")))))}))))}const Ft=e=>{var n,o;let{setpopup:i,setShowToast:a,data:r}=e;const u=null===(n=Digit)||void 0===n||null===(o=n.ComponentRegistryService)||void 0===o?void 0:o.getComponent("CitizenFeedback");return l.createElement(l.Fragment,null,l.createElement(t.PopUp,null,l.createElement("div",{style:{margin:"0 auto",top:"15%",position:"relative"}},l.createElement(u,{popup:!0,onClose:i,setShowToast:a,data:r}))))};var Bt,kt=Array.isArray,Ht="object"==typeof p&&p&&p.Object===Object&&p,Yt="object"==typeof self&&self&&self.Object===Object&&self,Wt=Ht||Yt||Function("return this")(),jt=Wt.Symbol,Kt=Object.prototype,Vt=Kt.hasOwnProperty,Gt=Kt.toString,zt=jt?jt.toStringTag:void 0,Xt=Object.prototype.toString,qt=jt?jt.toStringTag:void 0,$t=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qt&&qt in Object(e)?function(e){var t=Vt.call(e,zt),n=e[zt];try{e[zt]=void 0;var l=!0}catch(e){}var o=Gt.call(e);return l&&(t?e[zt]=n:delete e[zt]),o}(e):function(e){return Xt.call(e)}(e)},Zt=function(e){return null!=e&&"object"==typeof e},Qt=function(e){return"symbol"==typeof e||Zt(e)&&"[object Symbol]"==$t(e)},Jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/,tn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},nn=function(e){if(!tn(e))return!1;var t=$t(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ln=Wt["__core-js_shared__"],on=(Bt=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"",an=Function.prototype.toString,rn=function(e){if(null!=e){try{return an.call(e)}catch(e){}try{return e+""}catch(e){}}return""},un=/^\[object .+?Constructor\]$/,dn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sn=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!tn(e)||(t=e,on&&on in t))&&(nn(e)?dn:un).test(rn(e));var t}(n)?n:void 0},cn=sn(Object,"create"),pn=Object.prototype.hasOwnProperty,mn=Object.prototype.hasOwnProperty;function vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}vn.prototype.clear=function(){this.__data__=cn?cn(null):{},this.size=0},vn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},vn.prototype.get=function(e){var t=this.__data__;if(cn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return pn.call(t,e)?t[e]:void 0},vn.prototype.has=function(e){var t=this.__data__;return cn?void 0!==t[e]:mn.call(t,e)},vn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cn&&void 0===t?"__lodash_hash_undefined__":t,this};var En=vn,_n=function(e,t){return e===t||e!=e&&t!=t},Tn=function(e,t){for(var n=e.length;n--;)if(_n(e[n][0],t))return n;return-1},yn=Array.prototype.splice;function Sn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Sn.prototype.clear=function(){this.__data__=[],this.size=0},Sn.prototype.delete=function(e){var t=this.__data__,n=Tn(t,e);return!(n<0||(n==t.length-1?t.pop():yn.call(t,n,1),--this.size,0))},Sn.prototype.get=function(e){var t=this.__data__,n=Tn(t,e);return n<0?void 0:t[n][1]},Sn.prototype.has=function(e){return Tn(this.__data__,e)>-1},Sn.prototype.set=function(e,t){var n=this.__data__,l=Tn(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this};var fn=Sn,Pn=sn(Wt,"Map"),gn=function(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new En,map:new(Pn||fn),string:new En}},Nn.prototype.delete=function(e){var t=gn(this,e).delete(e);return this.size-=t?1:0,t},Nn.prototype.get=function(e){return gn(this,e).get(e)},Nn.prototype.has=function(e){return gn(this,e).has(e)},Nn.prototype.set=function(e,t){var n=gn(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this};var An=Nn;function On(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var l=arguments,o=t?t.apply(this,l):l[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,l);return n.cache=i.set(o,a)||i,a};return n.cache=new(On.Cache||An),n}On.Cache=An;var In,hn,Cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/\\(\\)?/g,bn=(In=On(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Cn,function(e,n,l,o){t.push(l?o.replace(Rn,"$1"):n||e)}),t},function(e){return 500===hn.size&&hn.clear(),e}),hn=In.cache,In),Dn=jt?jt.prototype:void 0,Ln=Dn?Dn.toString:void 0,Mn=function(e){if("string"==typeof e||Qt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},wn=function(e,t,n){var l=null==e?void 0:function(e,t){for(var n=0,l=(t=function(e,t){return kt(e)?e:function(e,t){if(kt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qt(e))||en.test(e)||!Jt.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:bn(function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(kt(t))return function(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}(t,e)+"";if(Qt(t))return Ln?Ln.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}(e))}(t,e)).length;null!=e&&n<l;)e=e[Mn(t[n++])];return n&&n==l?e:void 0}(e,t);return void 0===l?n:l};const xn=[{texts:{header:"SEARCH_PROPERTY",submitButtonLabel:"PT_HOME_SEARCH_RESULTS_BUTTON_SEARCH",text:"CS_PT_HOME_SEARCH_RESULTS_DESC"},inputs:[{label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",type:"mobileNumber",name:"mobileNumber",validation:{pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}},error:"CORE_COMMON_MOBILE_ERROR"},{label:"PT_PROPERTY_UNIQUE_ID",description:"CS_PROPERTY_ID_FORMAT_MUST_BE",type:"text",name:"propertyIds",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}||[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}||[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_EXISTING_PROPERTY_ID",type:"text",name:"oldPropertyId",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}|[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",type:"text",name:"name",validation:{pattern:{value:"^[a-zA-Z ]+$",message:"PAYMENT_INVALID_NAME"}},error:"PAYMENT_INVALID_NAME"},{label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",type:"text",name:"doorNo",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}},error:"ERR_INVALID_DOOR_NO"}]}],Un=[{head:"PT_MUTATION_TRANSFEROR_DETAILS",body:[{route:"info",component:"PropertyTax",nextStep:"transferer-details",hideInEmployee:!0,key:"_Documents",isMutation:!0,hideInEmployee:!0},{route:"search-property",component:"SearchPropertyCitizen",nextStep:"search-results",key:"searchParams",texts:{header:"SEARCH_PROPERTY",submitButtonLabel:"PT_HOME_SEARCH_RESULTS_BUTTON_SEARCH",text:"CS_PT_HOME_SEARCH_RESULTS_DESC"},inputs:[{label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",type:"mobileNumber",name:"mobileNumber",validation:{pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}},error:"CORE_COMMON_MOBILE_ERROR"},{label:"PT_PROPERTY_UNIQUE_ID",description:"CS_PROPERTY_ID_FORMAT_MUST_BE",type:"text",name:"propertyIds",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:/^[a-zA-Z0-9-]*$/i,message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_EXISTING_PROPERTY_ID",type:"text",name:"oldPropertyId",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:/^[a-zA-Z0-9-]*$/i,message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",type:"text",name:"name",validation:{pattern:{value:"^[a-zA-Z ]+$",message:"PAYMENT_INVALID_NAME"}},error:"PAYMENT_INVALID_NAME"},{label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",type:"text",name:"doorNo",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}},error:"ERR_INVALID_DOOR_NO"}],action:"MUTATION",hideInEmployee:!0},{route:"search-results",component:"SearchResultCitizen",key:"searchResult",nextStep:"transferer-details",nextStep:"info",action:"MUTATION",hideInEmployee:!0,texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"PT_OWNERSHIP_TRANSFER",nextText:"PT_COMMON_NEXT"},labels:[{label:"PT_TOTAL_DUES",key:"total_due",noteStyle:{fontSize:"24px",fontWeight:"bold"}},{label:"PT_PROPERTY_PTUID",key:"property_id"},{label:"PT_OWNERSHIP_INFO_NAME",key:"owner_name"},{label:"PT_PROPERTY_ADDRESS_SUB_HEADER",key:"property_address"},{label:"PT_DUE_DATE",key:"bil_due__date"}]},{route:"transferer-details",nextStep:"owner-ship-details@0",key:"transfererDetails",type:"component",withoutLabel:!0,component:"TransfererDetails",texts:{nextText:"PT_COMMON_NEXT",submitBarLabel:"PT_COMMON_NEXT"},labels:[{label:"PT_OWNERSHIP_INSTI_NAME",keyPath:["searchResult","property","institution","name"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_DESIGNATION",keyPath:["searchResult","property","institution","designation"],ownershipType:"INSTITUTIONAL"},{label:"PT_INSTI_OWNERSHIP_TYPE",keyPath:["searchResult","property","institution","type"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_NAME_OF_AUTH",keyPath:["searchResult","property","institution","nameOfAuthorizedPerson"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_TEL_NO",keyPath:["searchResult","property","owners","_index_","altContactNumber"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_NAME",keyPath:["searchResult","property","owners","_index_","name"],ownershipType:"INDIVIDUAL"},{label:"PT_GUARDIAN_NAME",keyPath:["searchResult","property","owners","_index_","fatherOrHusbandName"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_MOBILE_NO",keyPath:["searchResult","property","owners","_index_","mobileNumber"],ownershipType:"ALL"},{label:"PT_OWNERSHIP_INFO_EMAIL_ID",keyPath:["searchResult","property","owners","_index_","emailId"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_USER_CATEGORY",keyPath:["searchResult","property","owners","_index_","ownerType"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_CORR_ADDR",keyPath:["searchResult","property","owners","_index_","correspondenceAddress"],ownershipType:"ALL"}]}]},{head:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"multiple-owners","INDIVIDUAL.MULTIPLEOWNERS":"multiple-owners"}},{route:"multiple-owners",component:"OwnerMutate",withoutLabel:!0,nextStep:"is-mutatation-pending",key:"Owners",hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"is-mutatation-pending",hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"PT_MUTATION_DETAILS",body:[{key:"additionalDetails",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_COURT_PENDING_OR_NOT",cardText:"PT_MUTATION_PENDING_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},route:"is-mutatation-pending",withoutLabel:!0,component:"IsMutationPending",nextStep:"is-under-govt-aquisition",type:"component"},{key:"additionalDetails",route:"is-under-govt-aquisition",withoutLabel:!0,texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_STATE_ACQUISITION",cardText:"PT_STATE_AQUISTION_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},component:"UnderStateAquire",nextStep:"reason",type:"component"}]},{head:"PT_MUTATION_REGISTRATION_DETAILS",body:[{key:"additionalDetails",route:"reason",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_TRANSFER_REASON",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PTReasonForTransfer",nextStep:"market-value",type:"component"},{key:"additionalDetails",route:"market-value",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_MARKET_VALUE",cardText:"PT_MARKET_VALUE_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PropertyMarketValue",nextStep:"registration-doc",type:"component"},{key:"additionalDetails",route:"registration-doc",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_DOCUMENT_DETAILS",cardText:"PT_REGISTRATION_DOC_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PTRegistrationDocument",nextStep:"comments",type:"component"},{key:"additionalDetails",route:"comments",withoutLabel:!0,component:"PTComments",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_REMARKS",cardText:"PT_REMARKS_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"transfer-reason-doc",type:"component"},{type:"component",route:"transfer-reason-doc",component:"TransferProof",withoutLabel:!0,texts:{headerCaption:"PT_TRANSFER_DOC_CAPTION",header:"PT_TRANSFER_DOC_HEADER",cardText:"PT_TRANSFER_DOC_MESSAGE",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"transferReasonProof",hideInEmployee:!0,nextStep:"address-proof"},{type:"component",route:"address-proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"Proof of Address",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"addressProof",hideInEmployee:!0},{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}],Fn=e=>{var a,r,u,d,s,p,m,v,E,_;let{onSubmit:T,value:y={}}=e;const{t:S}=o.useTranslation(),f=(i.useHistory(),Digit.ULBService.getCurrentTenantId()),[P,g]=n.useState(null),[N,A]=n.useState(null),{ownershipCategory:O,IsAnyPartOfThisFloorUnOccupied:I,selfOccupied:h,Owners:C,owners:R,searchResult:b,additionalDetails:D}=y,{property:L}=b,{propertyType:M,units:w=[{}]}=L;n.useEffect(function(){try{return Promise.resolve(Digit.PaymentService.searchBill(f,{Service:"PT.MUTATION",consumerCode:null==L?void 0:L.acknowldgementNumber})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:{...L,additionalDetails:{...null==L?void 0:L.additionalDetails,...D,documentDate:new Date(null==D?void 0:D.documentDate).getTime()}}},f)).then(function(e){var t;g((null==e||null===(t=e[null==L?void 0:L.acknowldgementNumber])||void 0===t?void 0:t.totalAmount)||S("CS_NA")),A(S("PT_MUT_BILL_ACTIVE"))});var t,n,l;g((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||S("CS_NA")),A(S("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}catch(e){return Promise.reject(e)}},[]),Le(null==h?void 0:h.i18nKey),Me(null==I?void 0:I.i18nKey),De(M);let x=S("CS_NA");if(null!=D&&D.documentDate){const e=new Date(null==D?void 0:D.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];x=e.getDate()+" "+t+" "+e.getFullYear()}const U=e=>location.href=e,[F,B]=n.useState(!1);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:4}):null,l.createElement(t.Header,{styles:{fontSize:"32px",marginLeft:"8px"}},S("WS_COMMON_SUMMARY")),l.createElement(t.Card,{style:{paddingRight:"16px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_APPLICATION_NUMBER_LABEL"),text:null==L?void 0:L.acknowldgementNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:S("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==L?void 0:L.propertyId,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:S("PT_APPLICATION_CHANNEL_LABEL"),text:S("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==L?void 0:L.channel))}),l.createElement(t.Row,{className:"border-none",label:S("PT_FEE_AMOUNT"),text:P,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:S("PT_PAYMENT_STATUS"),text:N,textStyle:{whiteSpace:"pre"}})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==L||null===(a=L.address)||void 0===a?void 0:a.pincode)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_COMMON_CITY"),text:(null==L||null===(r=L.address)||void 0===r?void 0:r.city)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_COMMON_LOCALITY_OR_MOHALLA"),text:S(""+(null==L||null===(u=L.address)||void 0===u||null===(d=u.locality)||void 0===d?void 0:d.area))||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==L||null===(s=L.address)||void 0===s?void 0:s.street)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_DOOR_OR_HOUSE"),text:(null==L||null===(p=L.address)||void 0===p?void 0:p.doorNo)||S("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(null==L?void 0:L.owners)&&(null==L?void 0:L.owners.map((e,n)=>l.createElement("div",{key:n,style:{margin:"none"}},1!=(null==L?void 0:L.owners.length)&&l.createElement("span",null,S("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType.toLowerCase())||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||S("CS_NA")})))))),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>U("/digit-ui/citizen/pt/property/property-mutation/owner-ship-details@0")})),null!=O&&null!==(m=O.code)&&void 0!==m&&m.includes("INSTITUTIONAL")?l.createElement("div",null,Array.isArray(R)&&R.map((e,n)=>{var o;return l.createElement("div",{key:n},1!=R.length&&l.createElement("span",null,S("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_INSTITUTION_NAME"),text:(null==e?void 0:e.inistitutionName)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_TYPE_OF_INSTITUTION"),text:""+S(null==e||null===(o=e.inistitutetype)||void 0===o?void 0:o.value)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_NAME_AUTHORIZED_PERSON"),text:(null==e?void 0:e.name)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_INSTITUTION_DESIGNATION"),text:(null==e?void 0:e.designation)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||S("CS_NA")})))})):l.createElement("div",null,Array.isArray(C)&&C.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},1!=C.length&&l.createElement("span",null,S("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_COMMON_GENDER_LABEL"),text:S(null==e||null===(o=e.gender)||void 0===o?void 0:o.i18nKey)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_RELATIONSHIP"),text:S(null==e||null===(i=e.relationship)||void 0===i?void 0:i.i18nKey)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:S(null==e||null===(a=e.ownerType)||void 0===a?void 0:a.i18nKey)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_FORM3_OWNERSHIP_TYPE"),text:""+S(null!=L&&L.ownershipCategoryTemp?"PT_OWNERSHIP_"+(null==L?void 0:L.ownershipCategoryTemp):"CS_NA")})))})),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_MUTATION_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>U("/digit-ui/citizen/pt/property/property-mutation/is-mutatation-pending")})),l.createElement("div",null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_MUTATION_PENDING_COURT"),text:S(null==D||null===(v=D.isMutationInCourt)||void 0===v?void 0:v.code)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_DETAILS_COURT_CASE"),text:(null==D?void 0:D.caseDetails)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_PROP_UNDER_GOV_AQUISITION"),text:S(null==D||null===(E=D.isPropertyUnderGovtPossession)||void 0===E?void 0:E.code)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_DETAILS_GOV_AQUISITION"),text:(null==D?void 0:D.govtAcquisitionDetails)||S("CS_NA")}))),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_REGISTRATION_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>U("/digit-ui/citizen/pt/property/property-mutation/reason")})),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:S("PT_REASON_PROP_TRANSFER"),text:""+S(null==D||null===(_=D.reasonForTransfer)||void 0===_?void 0:_.i18nKey)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_PROP_MARKET_VALUE"),text:(null==D?void 0:D.marketValue)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_REG_NUMBER"),text:(null==D?void 0:D.documentNumber)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_DOC_ISSUE_DATE"),text:x}),l.createElement(t.Row,{className:"border-none",label:S("PT_REG_DOC_VALUE"),text:(null==D?void 0:D.documentValue)||S("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:S("PT_REMARKS"),text:(null==D?void 0:D.remarks)||S("CS_NA")})),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},S("PT_COMMON_DOCS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>U("/digit-ui/citizen/pt/property/property-mutation/transfer-reason-doc")})),l.createElement("div",{style:{marginTop:"0 important"}},Array.isArray(null==L?void 0:L.documents)?(null==L?void 0:L.documents.length)>0&&l.createElement(Ut,{property:L}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:S("PT_NO_DOCUMENTS_MSG")}))),l.createElement(t.CheckBox,{label:S("PT_MUTATION_FINAL_DECLARATION_MESSAGE"),onChange:()=>{B(!F)},styles:{height:"auto",margin:"2rem 0"}}),l.createElement(t.SubmitBar,{label:S("PT_COMMON_BUTTON_SUBMIT"),onSubmit:T,disabled:!F})))},Bn=e=>l.createElement("span",{className:"cell-text"},e),kn=e=>l.createElement("h1",{className:"heading-m"},e.label),Hn=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Yn=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Hn,null)),Wn=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:p,moduleCode:m}=e;const{data:v,isLoading:E}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:_,data:T}=Digit.Hooks.pt.useMDMS(u,p,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),[y,S]=n.useState({}),[f,P]=n.useState({}),[g,N]=n.useState([]),[A,O]=n.useState(null),[I,h]=n.useState(null),[C,R]=n.useState(null),[b,D]=n.useState(null),[L,M]=n.useState([]),[w,x]=n.useState(null),[U,F]=n.useState(!1);function B(e){h(e.target.files[0])}return n.useEffect(()=>{var e;T&&T["egf-master"]&&M(null===(e=T["egf-master"])||void 0===e?void 0:e.FinancialYear)},[T]),n.useEffect(()=>{var e;N(null==v||null===(e=v.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[v]),n.useEffect(()=>{!function(){try{D(null);const e=function(){if(I){const e=function(){if(I.size>=5242880)D(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",I,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):D(a("CS_FILE_UPLOAD_ERROR"))})},function(){D(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(()=>{r&&S(null!=r&&r.showFinancialYearsModal?(e=>{let{t:n,action:o,financialYears:i,selectedFinancialYear:a,setSelectedFinancialYear:r}=e;return{label:{heading:"WF_"+o.action+"_APPLICATION",submit:"WF_PT.CREATE_"+o.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:n("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:l.createElement(t.RadioButtons,{options:i,optionsKey:"name",onSelect:r,selectedOption:a})}]}]}})({t:a,action:r,financialYears:L,selectedFinancialYear:w,setSelectedFinancialYear:x}):(e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:p,businessService:m}=e;return{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("ES_PT_ATTACH_FILE")+(i.docUploadRequired?" *":""),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,hintText:o("PT_ATTACH_RESTRICTIONS_SIZE"),message:s?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:g,selectedApprover:A,setSelectedApprover:O,selectFile:B,uploadedFile:C,setUploadedFile:R,businessService:p}))},[r,g,L,w,C]),r&&y.form?l.createElement(t.Modal,{headerBarMain:l.createElement(kn,{label:a(y.label.heading)}),headerBarEnd:l.createElement(Yn,{onClick:d}),actionCancelLabel:a(y.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(y.label.submit),actionSaveOnSubmit:()=>{},isDisabled:r.showFinancialYearsModal?!w:E||(null==r?void 0:r.docUploadRequired)&&!C,formId:"modal-action"},_?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:y.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if("INACTIVE_PROPERTY"==(null==r?void 0:r.action)){let t={action:"OPEN",comment:null==e?void 0:e.comments,businessService:"PT.CREATE",moduleName:"PT"};c.creationReason="STATUS",s({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Property:{...c,workflow:t}})}else if(null!=r&&r.showFinancialYearsModal)s({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Assessment:{financialYear:null==w?void 0:w.name,propertyId:null==c?void 0:c.propertyId,tenantId:u,source:null==c?void 0:c.source,channel:null==c?void 0:c.channel,assessmentDate:Date.now()}});else{let t={action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,businessService:p,moduleName:m};t.assignes=null!=r&&r.isTerminateState||!A?[]:[A],C&&(t.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:C}]),s({Property:{...c,workflow:t}})}},defaultValues:f,formId:"modal-action"})):l.createElement(t.Loader,null)},jn=e=>l.createElement("h1",{className:"heading-m"},e.label),Kn=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Vn=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Kn,null)),Gn=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:p}=e;const{data:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:v,data:E}=Digit.Hooks.pt.useMDMS(u,p,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),[_,T]=n.useState({}),[y,S]=n.useState({}),[f,P]=n.useState([]),[g,N]=n.useState({}),[A,O]=n.useState(null),[I,h]=n.useState(null),[C,R]=n.useState(null),[b,D]=n.useState([]),[L,M]=n.useState(null);function w(e){O(e.target.files[0])}return n.useEffect(()=>{var e;E&&E["egf-master"]&&D(null===(e=E["egf-master"])||void 0===e?void 0:e.FinancialYear)},[E]),n.useEffect(()=>{var e;P(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(()=>{!function(){try{R(null);const e=function(){if(A){const e=function(){if(A.size>=5242880)R(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",A,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?h(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):R(a("CS_FILE_UPLOAD_ERROR"))})},function(){R(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]),n.useEffect(()=>{r&&T((e=>{let{t:n,action:o,approvers:i,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c}=e,p=!0;return"SENDBACKTOCITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(p=!1),o.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:p?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:f,selectedApprover:g,setSelectedApprover:N,selectFile:w,uploadedFile:I,setUploadedFile:h,businessService:p}))},[r,f,b,L,I]),r&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(jn,{label:a(_.label.heading)}),headerBarEnd:l.createElement(Vn,{onClick:d}),actionCancelLabel:a(_.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(_.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},v?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=g&&g.uuid?[null==g?void 0:g.uuid]:null,wfDocuments:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:null},s({Licenses:[c]})},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},zn=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Xn=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),qn=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Xn,null)),$n=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:p}=e;const{data:m,isLoading:v}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[E,_]=n.useState({}),[T,y]=n.useState({}),[S,f]=n.useState([]),[P,g]=n.useState({}),[N,A]=n.useState(null),[O,I]=n.useState(null),[h,C]=n.useState(null),R=!!Digit.Utils.browser.isMobile();function b(e){A(e.target.files[0])}return n.useEffect(()=>{var e;f(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(()=>{!function(){try{C(null);const e=function(){if(N){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(N.size>=5242880)C(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=N&&N.type&&!e.test(null==N?void 0:N.type))C(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",N,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):C(a("CS_FILE_UPLOAD_ERROR"))})},function(){C(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(()=>{r&&_((e=>{let{t:n,action:o,approvers:i,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c,error:p}=e,m=!0;return"SENDBACKTOCITIZEN"==(null==o?void 0:o.action)&&(m=!1),o.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:m?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:p})}]}]}})({t:a,action:r,approvers:S,selectedApprover:P,setSelectedApprover:g,selectFile:b,uploadedFile:O,setUploadedFile:I,businessService:p,error:h}))},[r,S,O,h]),r&&E.form?l.createElement(t.Modal,{headerBarMain:l.createElement(zn,{label:a(E.label.heading)}),headerBarEnd:l.createElement(qn,{onClick:d}),actionCancelLabel:a(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:R?{width:"720px"}:{},style:R?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:R?{paddingLeft:"5px"}:{}},v?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:E.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,wfDocuments:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:O}]:null},s({Licenses:[c]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:T,formId:"modal-action"})):l.createElement(t.Loader,null)},Zn=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Qn=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Jn=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Qn,null)),el=e=>{var o,i,a,u,d,s,c,p,m,v,E,_;let{t:T,action:y,tenantId:S,closeModal:f,submitAction:P,applicationDetails:g,applicationData:N,businessService:A,workflowDetails:O}=e;Digit.Hooks.obps.useObpsAPI(null!==(o=N)&&void 0!==o&&null!==(i=o.landInfo)&&void 0!==i&&null!==(a=i.address)&&void 0!==a&&a.city?null===(u=N)||void 0===u||null===(d=u.landInfo)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.city:S,!1);const{data:I,isLoading:h}=Digit.Hooks.useEmployeeSearch(S,{roles:null==O||null===(c=O.data)||void 0===c||null===(p=c.initialActionState)||void 0===p||null===(m=p.nextActions)||void 0===m||null===(v=m.filter(e=>(null==e?void 0:e.action)==(null==y?void 0:y.action)))||void 0===v||null===(E=v[0])||void 0===E||null===(_=E.assigneeRoles)||void 0===_?void 0:_.map(e=>({code:e})),isActive:!0},{enabled:!(null!=y&&y.isTerminateState)}),[C,R]=(r.useQueryClient(),n.useState({})),[b,D]=n.useState({}),[L,M]=n.useState([]),[w,x]=n.useState({}),[U,F]=n.useState(null),[B,k]=n.useState(null),[H,Y]=n.useState(null),[W,j]=n.useState(null),K=!!Digit.Utils.browser.isMobile();function V(e){F(e.target.files[0])}n.useEffect(()=>{var e;M(null==I||null===(e=I.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[I]),n.useEffect(()=>{!function(){try{Y(null);const e=function(){if(U){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(U.size>=5242880)Y(T("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=U&&U.type&&!e.test(null==U?void 0:U.type))Y(T("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",U,Digit.ULBService.getStateId()||(null==S?void 0:S.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?k(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):Y(T("CS_FILE_UPLOAD_ERROR"))})},function(){Y(T("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[U]);const G=e=>{let t=[];return e&&e.map((e,n)=>{t.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),t},z=e=>{let t=[];var n;for(n=0;n<(null==e?void 0:e.questionLength);n++){var l;t.push({remarks:e["Remarks_"+n],question:null==e?void 0:e.questionList[n].question,value:null==e||null===(l=e["question_"+n])||void 0===l?void 0:l.code})}return t},X=e=>{var t,n;let l=[],o=[];var i,a;return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(n=t.fieldinspection_pending)||void 0===n?void 0:n.length)>0&&(o=null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?(l=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")),(null===(a=l)||void 0===a?void 0:a.length)>0&&l.map((e,t)=>{o.push({docs:G(e.Documents),date:e.InspectionDate,questions:z(e),time:null==e?void 0:e.InspectionTime})}),o=o.filter(e=>e.docs&&e.docs.length>0)):sessionStorage.removeItem("INSPECTION_DATA"),[...o]},q=e=>{let t=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),n=[];return t.map(e=>{var t,l,o,i,a,r;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.values)||void 0===o?void 0:o.length)>0&&(n=[...n,...null==e||null===(i=e.uploadedDocuments)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.values]),(null==e||null===(r=e.newUploadedDocs)||void 0===r?void 0:r.length)>0&&(n=[...n,...null==e?void 0:e.newUploadedDocs])}),n},$=()=>{var e;const t=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),n=Digit.SessionStorage.get("OBPS_NEW_APPROVALS");let l=null==t?void 0:t.reduce((e,t)=>null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e,[]);return l=null===(e=l)||void 0===e?void 0:e.concat(null!==n?n.filter(e=>""!==e.label).map(e=>null==e?void 0:e.label):[]),l};return n.useEffect(()=>{y&&R((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:p,businessService:m,error:v}=e,E=!1;return"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"SKIP_PAYMENT"!=i.action&&"SEND_BACK_TO_CITIZEN"!=(null==i?void 0:i.action)&&"APPROVE"!=(null==i?void 0:i.action)||(E=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:i.isTerminateState||E?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||E?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:!0,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:T,action:y,approvers:L,selectedApprover:w,setSelectedApprover:x,selectFile:V,uploadedFile:B,setUploadedFile:k,businessService:A,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:H}))},[y,L,W,B,H]),y&&C.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Zn,{label:T(C.label.heading)}),headerBarEnd:l.createElement(Jn,{onClick:f}),actionCancelLabel:T(C.label.cancel),actionCancelOnSubmit:f,actionSaveLabel:T(C.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:K?{width:"720px"}:{},style:K?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:K?{paddingLeft:"5px"}:{}},h?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:C.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var t,n,l,o,i,a;N={...N,documents:q(),additionalDetails:{...null===(t=N)||void 0===t?void 0:t.additionalDetails,fieldinspection_pending:X(N),pendingapproval:$()},workflow:{action:null==y?void 0:y.action,comment:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=w&&w.uuid?[null==w?void 0:w.uuid]:null,assignes:null!=w&&w.uuid?[null==w?void 0:w.uuid]:null,varificationDocuments:B?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==U?void 0:U.name,fileStoreId:B}]:null},action:null==y?void 0:y.action,comment:null==e?void 0:e.comments,assignee:null!=w&&w.uuid?[null==w?void 0:w.uuid]:null,wfDocuments:B?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==U?void 0:U.name,fileStoreId:B}]:null};const r=null==g||null===(o=g.nocData)||void 0===o?void 0:o.map(e=>{const t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:{...e,documents:[...null!=e&&e.documents?null==e?void 0:e.documents:[],...t||[]]}}});let u={sourceRefId:null==r||null===(i=r[0])||void 0===i||null===(a=i.Noc)||void 0===a?void 0:a.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(S,u)).then(function(e){var t;let n=!0,l=!0;null==e||null===(t=e.Noc)||void 0===t||t.map(e=>{var t,o,i,a,r;"APPROVED"!==(null==e||null===(t=e.applicationStatus)||void 0===t?void 0:t.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"REJECTED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"VOIDED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())||1!=n&&1!=l||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?n=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(l=!1))});let o=[];r&&r.map(e=>{var t,i,a,r,u,d,s,c,p,m,v,E;("APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(i=t.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(a=e.Noc)||void 0===a||null===(r=a.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(d=u.applicationStatus)||void 0===d?void 0:d.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(s=e.Noc)||void 0===s||null===(c=s.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"VOIDED"!=(null==e||null===(p=e.Noc)||void 0===p||null===(m=p.applicationStatus)||void 0===m?void 0:m.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(v=e.Noc)||void 0===v?void 0:v.nocType)&&n||"FIRE_NOC"===(null==e||null===(E=e.Noc)||void 0===E?void 0:E.nocType)&&l)&&o.push(e)}),P({BPA:N},(null==o?void 0:o.length)>0&&o,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}},defaultValues:b,formId:"modal-action"})):l.createElement(t.Loader,null)},tl=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),nl=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ll=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(nl,null)),ol=e=>{var o,a;let{t:u,action:d,tenantId:s,closeModal:c,submitAction:p,applicationData:m,businessService:v}=e;const{data:E,isLoading:_}=Digit.Hooks.useEmployeeSearch(s,{roles:null==d||null===(o=d.assigneeRoles)||void 0===o||null===(a=o.map)||void 0===a?void 0:a.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=d&&d.isTerminateState)}),[T,y]=(r.useQueryClient(),n.useState({})),[S,f]=n.useState({}),[P,g]=n.useState([]),[N,A]=n.useState({}),[O,I]=n.useState(null),[h,C]=n.useState(null),[R,b]=n.useState(null),D=!!Digit.Utils.browser.isMobile();function L(e){I(e.target.files[0])}return i.useHistory(),n.useEffect(()=>{var e;g(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[E]),n.useEffect(()=>{!function(){try{b(null);const e=function(){if(O){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(O.size>=5242880)b(u("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=O&&O.type&&!e.test(null==O?void 0:O.type))b(u("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",O,Digit.ULBService.getStateId()||(null==s?void 0:s.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?C(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):b(u("CS_FILE_UPLOAD_ERROR"))})},function(){b(u("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]),n.useEffect(()=>{d&&y((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:p,businessService:m,error:v}=e,E=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(E=!0);let _=!1;return"APPROVE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"AUTO_APPROVE"!=i.action&&"AUTO_REJECT"!=i.action||(_=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:i.isTerminateState||_?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||_?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:E,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,message:s?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:u,action:d,approvers:P,selectedApprover:N,setSelectedApprover:A,selectFile:L,uploadedFile:h,setUploadedFile:C,businessService:v,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:R}))},[d,P,h,R]),d&&T.form?l.createElement(t.Modal,{headerBarMain:l.createElement(tl,{label:u(T.label.heading)}),headerBarEnd:l.createElement(ll,{onClick:c}),actionCancelLabel:u(T.label.cancel),actionCancelOnSubmit:c,actionSaveLabel:u(T.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:D?{width:"720px"}:{},style:D?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:D?{paddingLeft:"5px"}:{}},_?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:T.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l;let o=JSON.parse(sessionStorage.getItem("NewNOCDocs")),i=(null===(t=m)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0?[...null===(l=m)||void 0===l?void 0:l.documents]:[];o.map((e,t)=>{i.push(e)}),m={...m,workflow:{action:null==d?void 0:d.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:null,documents:h?[{documentType:(null==d?void 0:d.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:null},documents:i},p({Noc:m},!1,{isNoc:!0})},defaultValues:S,formId:"modal-action"})):l.createElement(t.Loader,null)};function il(e){var t=this.__data__=new fn(e);this.size=t.size}il.prototype.clear=function(){this.__data__=new fn,this.size=0},il.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},il.prototype.get=function(e){return this.__data__.get(e)},il.prototype.has=function(e){return this.__data__.has(e)},il.prototype.set=function(e,t){var n=this.__data__;if(n instanceof fn){var l=n.__data__;if(!Pn||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new An(l)}return n.set(e,t),this.size=n.size,this};var al=il,rl=function(){try{var e=sn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ul=function(e,t,n){"__proto__"==t&&rl?rl(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},dl=Object.prototype.hasOwnProperty,sl=function(e,t,n){var l=e[t];dl.call(e,t)&&_n(l,n)&&(void 0!==n||t in e)||ul(e,t,n)},cl=function(e,t,n,l){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),o?ul(n,r,u):sl(n,r,u)}return n},pl=function(e){return Zt(e)&&"[object Arguments]"==$t(e)},ml=Object.prototype,vl=ml.hasOwnProperty,El=ml.propertyIsEnumerable,_l=pl(function(){return arguments}())?pl:function(e){return Zt(e)&&vl.call(e,"callee")&&!El.call(e,"callee")},Tl=function(){return!1},yl=m(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?Wt.Buffer:void 0;e.exports=(o?o.isBuffer:void 0)||Tl}),Sl=/^(?:0|[1-9]\d*)$/,fl=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Sl.test(e))&&e>-1&&e%1==0&&e<t},Pl=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},gl={};gl["[object Float32Array]"]=gl["[object Float64Array]"]=gl["[object Int8Array]"]=gl["[object Int16Array]"]=gl["[object Int32Array]"]=gl["[object Uint8Array]"]=gl["[object Uint8ClampedArray]"]=gl["[object Uint16Array]"]=gl["[object Uint32Array]"]=!0,gl["[object Arguments]"]=gl["[object Array]"]=gl["[object ArrayBuffer]"]=gl["[object Boolean]"]=gl["[object DataView]"]=gl["[object Date]"]=gl["[object Error]"]=gl["[object Function]"]=gl["[object Map]"]=gl["[object Number]"]=gl["[object Object]"]=gl["[object RegExp]"]=gl["[object Set]"]=gl["[object String]"]=gl["[object WeakMap]"]=!1;var Nl=function(e){return function(t){return e(t)}},Al=m(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n&&Ht.process,i=function(){try{return l&&l.require&&l.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),Ol=Al&&Al.isTypedArray,Il=Ol?Nl(Ol):function(e){return Zt(e)&&Pl(e.length)&&!!gl[$t(e)]},hl=Object.prototype.hasOwnProperty,Cl=function(e,t){var n=kt(e),l=!n&&_l(e),o=!n&&!l&&yl(e),i=!n&&!l&&!o&&Il(e),a=n||l||o||i,r=a?function(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}(e.length,String):[],u=r.length;for(var d in e)!t&&!hl.call(e,d)||a&&("length"==d||o&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||fl(d,u))||r.push(d);return r},Rl=Object.prototype,bl=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rl)},Dl=function(e,t){return function(n){return e(t(n))}},Ll=Dl(Object.keys,Object),Ml=Object.prototype.hasOwnProperty,wl=function(e){return null!=e&&Pl(e.length)&&!nn(e)},xl=function(e){return wl(e)?Cl(e):function(e){if(!bl(e))return Ll(e);var t=[];for(var n in Object(e))Ml.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Ul=Object.prototype.hasOwnProperty,Fl=function(e){return wl(e)?Cl(e,!0):function(e){if(!tn(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=bl(e),n=[];for(var l in e)("constructor"!=l||!t&&Ul.call(e,l))&&n.push(l);return n}(e)},Bl=m(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?Wt.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,l=i?i(n):new e.constructor(n);return e.copy(l),l}}),kl=function(){return[]},Hl=Object.prototype.propertyIsEnumerable,Yl=Object.getOwnPropertySymbols,Wl=Yl?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var l=-1,o=null==t?0:t.length,i=0,a=[];++l<o;){var r=t[l];Hl.call(e,r)&&(a[i++]=r)}return a}(Yl(e)))}:kl,jl=function(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e},Kl=Dl(Object.getPrototypeOf,Object),Vl=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)jl(t,Wl(e)),e=Kl(e);return t}:kl,Gl=function(e,t,n){var l=t(e);return kt(e)?l:jl(l,n(e))},zl=function(e){return Gl(e,xl,Wl)},Xl=function(e){return Gl(e,Fl,Vl)},ql=sn(Wt,"DataView"),$l=sn(Wt,"Promise"),Zl=sn(Wt,"Set"),Ql=sn(Wt,"WeakMap"),Jl=rn(ql),eo=rn(Pn),to=rn($l),no=rn(Zl),lo=rn(Ql),oo=$t;(ql&&"[object DataView]"!=oo(new ql(new ArrayBuffer(1)))||Pn&&"[object Map]"!=oo(new Pn)||$l&&"[object Promise]"!=oo($l.resolve())||Zl&&"[object Set]"!=oo(new Zl)||Ql&&"[object WeakMap]"!=oo(new Ql))&&(oo=function(e){var t=$t(e),n="[object Object]"==t?e.constructor:void 0,l=n?rn(n):"";if(l)switch(l){case Jl:return"[object DataView]";case eo:return"[object Map]";case to:return"[object Promise]";case no:return"[object Set]";case lo:return"[object WeakMap]"}return t});var io=oo,ao=Object.prototype.hasOwnProperty,ro=Wt.Uint8Array,uo=function(e){var t=new e.constructor(e.byteLength);return new ro(t).set(new ro(e)),t},so=/\w*$/,co=jt?jt.prototype:void 0,po=co?co.valueOf:void 0,mo=Object.create,vo=function(){function e(){}return function(t){if(!tn(t))return{};if(mo)return mo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Eo=Al&&Al.isMap,_o=Eo?Nl(Eo):function(e){return Zt(e)&&"[object Map]"==io(e)},To=Al&&Al.isSet,yo=To?Nl(To):function(e){return Zt(e)&&"[object Set]"==io(e)},So={};So["[object Arguments]"]=So["[object Array]"]=So["[object ArrayBuffer]"]=So["[object DataView]"]=So["[object Boolean]"]=So["[object Date]"]=So["[object Float32Array]"]=So["[object Float64Array]"]=So["[object Int8Array]"]=So["[object Int16Array]"]=So["[object Int32Array]"]=So["[object Map]"]=So["[object Number]"]=So["[object Object]"]=So["[object RegExp]"]=So["[object Set]"]=So["[object String]"]=So["[object Symbol]"]=So["[object Uint8Array]"]=So["[object Uint8ClampedArray]"]=So["[object Uint16Array]"]=So["[object Uint32Array]"]=!0,So["[object Error]"]=So["[object Function]"]=So["[object WeakMap]"]=!1;var fo=function e(t,n,l,o,i,a){var r,u=1&n,d=2&n,s=4&n;if(l&&(r=i?l(t,o,i,a):l(t)),void 0!==r)return r;if(!tn(t))return t;var c=kt(t);if(c){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ao.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!u)return function(e,t){var n=-1,l=e.length;for(t||(t=Array(l));++n<l;)t[n]=e[n];return t}(t,r)}else{var p=io(t),m="[object Function]"==p||"[object GeneratorFunction]"==p;if(yl(t))return Bl(t,u);if("[object Object]"==p||"[object Arguments]"==p||m&&!i){if(r=d||m?{}:function(e){return"function"!=typeof e.constructor||bl(e)?{}:vo(Kl(e))}(t),!u)return d?function(e,t){return cl(e,Vl(e),t)}(t,function(e,t){return e&&cl(t,Fl(t),e)}(r,t)):function(e,t){return cl(e,Wl(e),t)}(t,function(e,t){return e&&cl(t,xl(t),e)}(r,t))}else{if(!So[p])return i?t:{};r=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return uo(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return function(e,t){var n=t?uo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?uo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,so.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new l;case"[object Symbol]":return po?Object(po.call(e)):{}}}(t,p,u)}}a||(a=new al);var v=a.get(t);if(v)return v;a.set(t,r),yo(t)?t.forEach(function(o){r.add(e(o,n,l,o,t,a))}):_o(t)&&t.forEach(function(o,i){r.set(i,e(o,n,l,i,t,a))});var E=c?void 0:(s?d?Xl:zl:d?Fl:xl)(t);return function(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n););}(E||t,function(o,i){E&&(o=t[i=o]),sl(r,i,e(o,n,l,i,t,a))}),r},Po=function(e){return fo(e,5)};const go=e=>l.createElement("h1",{className:"heading-m"},e.label),No=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Ao=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(No,null)),Oo=function(e,t){void 0===t&&(t="dayend");try{const n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(n[1],n[2]-1,n[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===t&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(t){return e}},Io=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:s,submitAction:c,applicationData:p,businessService:m}=e;const{data:v,isLoading:E}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[_,T]=n.useState({}),[y,S]=n.useState({}),[f,P]=n.useState([]),[g,N]=n.useState({}),[A,O]=n.useState(null),[I,h]=n.useState(null),[C,R]=n.useState(null),b=window.Digit.Utils.browser.isMobile(),D=window.location.href.includes("/employee");function L(e){O(e.target.files[0])}return n.useEffect(()=>{var e;P(null==v||null===(e=v.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[v]),n.useEffect(()=>{!function(){try{R(null);const e=function(){if(A){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(A.size>=5242880)R(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=A&&A.type&&!e.test(null==A?void 0:A.type))R(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",A,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?h(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):R(a("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),R(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]),n.useEffect(()=>{var e,n,o,i;"DisconnectWSConnection"==(null===(e=p)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(o=p)||void 0===o||null===(i=o.processInstance)||void 0===i?void 0:i.businessService)?r&&T((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:s,uploadedFile:c,setUploadedFile:p,businessService:m,error:v}=e,E=!0,_=!1;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==i?void 0:i.action)||"RESUBMIT_APPLICATION"==(null==i?void 0:i.action))&&(E=!1),i.isTerminateState&&(E=!1),"EXECUTE_DISCONNECTION"!=(null==i?void 0:i.action)&&"DISCONNECTION_EXECUTED"!=(null==i?void 0:i.action)||(_=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==m?void 0:m.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:E?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:E?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:E?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},_&&{label:o("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!_,type:"custom",populators:_?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:(e,n)=>l.createElement(t.DatePicker,d({onChange:e.onChange,date:e.value},n))}:null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:s,onDelete:()=>{p(null)},message:c?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:v,iserror:v,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:f,selectedApprover:g,setSelectedApprover:N,selectFile:L,uploadedFile:I,setUploadedFile:h,businessService:m,error:C})):r&&T((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,businessService:p,error:m}=e,v=!0;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==i?void 0:i.action))&&(v=!1),i.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==p?void 0:p.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:v?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:m,iserror:m,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:f,selectedApprover:g,setSelectedApprover:N,selectFile:L,uploadedFile:I,setUploadedFile:h,businessService:m,error:C}))},[r,f,I,C]),r&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(go,{label:a(_.label.heading)}),headerBarEnd:l.createElement(Ao,{onClick:s}),actionCancelLabel:a(_.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(_.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",style:b&&D?{width:"100%",height:"auto"}:{}},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,o,i,a,d,s,m,v;if(null!==(t=p)&&void 0!==t&&t.isBillAmend){var E,_,T,y,S,f,P,N,O;const t={...null===(E=p)||void 0===E||null===(_=E.billAmendmentDetails)||void 0===_?void 0:_.additionalDetails,comments:null!=e&&e.comments?e.comments:null},n={...null===(T=p)||void 0===T?void 0:T.billAmendmentDetails,workflow:{businessId:null===(y=p)||void 0===y||null===(S=y.billAmendmentDetails)||void 0===S?void 0:S.amendmentId,action:null==r?void 0:r.action,tenantId:u,businessService:null!==(f=p)&&void 0!==f&&null!==(P=f.applicationType)&&void 0!==P&&P.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(N=p)&&void 0!==N&&null!==(O=N.applicationType)&&void 0!==O&&O.includes("WATER")?"WS":"SW",assignes:null!=g&&g.uuid?[{uuid:null==g?void 0:g.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:[]},additionalDetails:t,comment:(null==e?void 0:e.comments)||"",wfDocuments:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:null,processInstance:{action:null==r?void 0:r.action,assignes:null!=g&&g.uuid?[{uuid:null==g?void 0:g.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:[]}};c({AmendmentUpdate:n})}else{if(p={...p,action:null==r?void 0:r.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=g&&g.uuid?[null==g?void 0:g.uuid]:[],assignes:null!=g&&g.uuid?[{uuid:null==g?void 0:g.uuid}]:[],wfDocuments:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:null,processInstance:{...null===(n=p)||void 0===n?void 0:n.processInstance,action:null==r?void 0:r.action,assignes:null!=g&&g.uuid?[{uuid:null==g?void 0:g.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:I}]:[]}},null!=e&&e.date&&null!==(l=p)&&void 0!==l&&null!==(o=l.applicationType)&&void 0!==o&&o.includes("DISCONNECT")){const t=Po(null==e?void 0:e.date);p.disconnectionExecutionDate=Oo(t)}else if(null!=e&&e.date){const t=Po(null==e?void 0:e.date);p.connectionExecutionDate=Oo(t)}var h;if("DisconnectWSConnection"==(null===(i=p)||void 0===i||null===(a=i.processInstance)||void 0===a?void 0:a.businessService)||"DisconnectSWConnection"==(null===(d=p)||void 0===d||null===(s=d.processInstance)||void 0===s?void 0:s.businessService)||window.location.href.includes("disconnection"))"WATER"==(null===(h=p)||void 0===h?void 0:h.serviceType)?c({WaterConnection:p,disconnectRequest:!0}):c({SewerageConnection:p,disconnectRequest:!0});else if("SEWERAGE_RECONNECTION"==(null===(m=p)||void 0===m?void 0:m.applicationType))c({SewerageConnection:p,disconnectRequest:!1,reconnectRequest:!0});else if("WATER_RECONNECTION"==(null===(v=p)||void 0===v?void 0:v.applicationType))c({WaterConnection:p,disconnectRequest:!1,reconnectRequest:!0});else{var C,R,b,D,L,M,w,x,U,F,B,k,H;const e=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),t=e?JSON.parse(e):"";null!=t&&null!==(C=t.value)&&void 0!==C&&C.adhocPenalty&&(p.additionalDetails.adhocPenalty=parseInt(null==t||null===(R=t.value)||void 0===R?void 0:R.adhocPenalty)||""),null!=t&&null!==(b=t.value)&&void 0!==b&&b.adhocPenaltyComment&&(p.additionalDetails.adhocPenaltyComment=(null==t||null===(D=t.value)||void 0===D?void 0:D.adhocPenaltyComment)||""),null!=t&&null!==(L=t.value)&&void 0!==L&&L.adhocPenaltyReason&&(p.additionalDetails.adhocPenaltyReason=(null==t||null===(M=t.value)||void 0===M?void 0:M.adhocPenaltyReason)||""),null!=t&&null!==(w=t.value)&&void 0!==w&&w.adhocRebate&&(p.additionalDetails.adhocRebate=parseInt(null==t||null===(x=t.value)||void 0===x?void 0:x.adhocRebate)||""),null!=t&&null!==(U=t.value)&&void 0!==U&&U.adhocRebateComment&&(p.additionalDetails.adhocRebateComment=(null==t||null===(F=t.value)||void 0===F?void 0:F.adhocRebateComment)||""),null!=t&&null!==(B=t.value)&&void 0!==B&&B.adhocRebateReason&&(p.additionalDetails.adhocRebateReason=(null==t||null===(k=t.value)||void 0===k?void 0:k.adhocRebateReason)||""),"WATER"==(null===(H=p)||void 0===H?void 0:H.serviceType)?c({WaterConnection:p,disconnectRequest:!1,reconnectRequest:!1}):c({SewerageConnection:p,disconnectRequest:!1,reconnectRequest:!1})}}},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},ho=e=>l.createElement("h1",{className:"heading-m"},e.label),Co=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Ro=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Co,null)),bo=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:p,moduleCode:m}=e;console.log("applicationData",c);const{data:v}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[E,_]=n.useState({}),[T,y]=n.useState({}),[S,f]=n.useState([]),[P,g]=n.useState(null),[N,A]=n.useState(null),[O,I]=n.useState(null),[h,C]=n.useState(null),[R,b]=n.useState(!1);function D(e){A(e.target.files[0])}return n.useEffect(()=>{var e;f(null==v||null===(e=v.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[v]),n.useEffect(()=>{!function(){try{C(null);const e=function(){if(N){const e=function(){if(N.size>=5242880)C(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PTR",N,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):C(a("CS_FILE_UPLOAD_ERROR"))})},function(){C(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(()=>{r&&_((e=>{let{t:n,action:o,selectFile:i,uploadedFile:a,setUploadedFile:r,businessService:u}=e;return{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+u+"_"+(null==o?void 0:o.action),cancel:"ES_PTR_COMMON_CANCEL"},form:[{body:[{label:n("ES_PTR_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("ES_PTR_ATTACH_FILE")+(o.docUploadRequired?" *":""),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:i,onDelete:()=>{r(null)},showHint:!0,hintText:n("PTR_ATTACH_RESTRICTIONS_SIZE"),message:a?"1 "+n("ES_PTR_ACTION_FILEUPLOADED"):n("ES_PTR_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:S,selectedApprover:P,setSelectedApprover:g,selectFile:D,uploadedFile:O,setUploadedFile:I,businessService:p}))},[r,S,O]),r&&E.form?l.createElement(t.Modal,{headerBarMain:l.createElement(ho,{label:a(E.label.heading)}),headerBarEnd:l.createElement(Ro,{onClick:d}),actionCancelLabel:a(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},l.createElement(t.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){let t={action:null==r?void 0:r.action,comments:null==e?void 0:e.comments,businessService:p,moduleName:m};O&&(t.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==N?void 0:N.name,filestoreId:O}]),s({PetRegistrationApplications:[{...c,workflow:t}]})},defaultValues:T,formId:"modal-action"})):l.createElement(t.Loader,null)},Do=e=>null!=e&&e.businessService.includes("PT")?l.createElement(Wn,e):null!=e&&e.businessService.includes("ptr")?l.createElement(bo,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?l.createElement(Gn,e):null!=e&&e.moduleCode.includes("BPAREG")?l.createElement($n,e):null!=e&&e.moduleCode.includes("BPA")?l.createElement(el,e):null!=e&&e.moduleCode.includes("NOC")?l.createElement(ol,e):null!=e&&e.moduleCode.includes("WS")?l.createElement(Io,e):void 0,Lo={root:{width:"100%",marginTop:"2px",overflowX:"auto",boxShadow:"none"},table:{minWidth:700,backgroundColor:"rgba(250, 250, 250, var(--bg-opacity))"},cell:{maxWidth:"7em",minWidth:"1em",border:"1px solid #e8e7e6",padding:"4px 5px",fontSize:"0.8em",textAlign:"left",lineHeight:"1.5em"},cellHeader:{overflow:"hidden",textOverflow:"ellipsis"},cellLeft:{},cellRight:{}},Mo=e=>{let{className:t="table",headers:n=[],values:i=[],arrears:a=0}=e;const{t:r}=o.useTranslation();return l.createElement(l.Fragment,null,l.createElement("div",{style:Lo.root},l.createElement("table",{className:"table-fixed-column-common-pay",style:Lo.table},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{style:{...Lo.cell,...Lo.cellLeft,...Lo.cellHeader}},r("CS_BILL_PERIOD")),n.map((e,t)=>l.createElement("th",{style:{...Lo.cell,...n.length==t+1?Lo.cellRight:{},...Lo.cellHeader},key:t},r(e))))),l.createElement("tbody",null,Object.values(i).map((e,t)=>l.createElement("tr",{key:t},l.createElement("td",{style:{...Lo.cell,...Lo.cellLeft},component:"th",scope:"row"},Object.keys(i)[t]),n.map((t,o)=>l.createElement("td",{style:{...Lo.cell,textAlign:"left",...n.length==o+1?Lo.cellRight:{},whiteSpace:"pre"},key:o,numeric:!0},o>1&&"₹",e[t]&&e[t].value||"0")))),l.createElement("tr",null,l.createElement("td",{style:{...Lo.cell,...Lo.cellLeft}}),n.map((e,t)=>t==n.length-1?l.createElement("td",{style:{...Lo.cell,...Lo.cellRight,textAlign:"left",fontWeight:"700",whiteSpace:"pre"},key:t,numeric:!0},a):t==n.length-2?l.createElement("td",{style:{...Lo.cell,textAlign:"left"},key:t,numeric:!0},r("COMMON_ARREARS_TOTAL")):l.createElement("td",{style:Lo.cell,key:t,numeric:!0})))))))},wo={buttonStyle:{display:"flex",justifyContent:"flex-end",color:"#a82227"},headerStyle:{marginTop:"10px",fontSize:"16px",fontWeight:"700",lineHeight:"24px",color:" rgba(11, 12, 12, var(--text-opacity))"}},xo=e=>{var t,i,a;let{bill:r={}}=e;const{t:u}=o.useTranslation();let d={},s=(null==r||null===(t=r.billDetails)||void 0===t?void 0:t.sort((e,t)=>t.fromPeriod-e.fromPeriod))||[];s=[...s];const c=(null===(i=s)||void 0===i?void 0:i.reduce((e,t,n)=>0===n?e:e+t.amount,0))||0;let p="₹ "+((null==c||null===(a=c.toFixed)||void 0===a?void 0:a.call(c,0))||Number(0).toFixed(0));s.shift(),s.map(e=>{let t=function(e){var t,n,l;void 0===e&&(e={});let o={};const{billAccountDetails:i=[]}=e;return i.map(e=>{o[e.taxHeadCode]={value:e.amount,order:e.order}}),o.CS_BILL_NO={value:(null===(t=e)||void 0===t?void 0:t.billNumber)||"NA",order:-2},o.CS_BILL_DUEDATE={value:(null===(n=e)||void 0===n?void 0:n.expiryDate)&&new Date(null===(l=e)||void 0===l?void 0:l.expiryDate).toLocaleDateString()||"NA",order:-1},o.TL_COMMON_TOTAL_AMT={value:e.amount,order:10},o}(e);d[((e,t)=>{const n=new Date(e),l=new Date(t);return l.getYear()-n.getYear()!=0?"FY"+(n.getYear()+1900)+"-"+(l.getYear()-100):n.toLocaleDateString()+"-"+l.toLocaleDateString()})(e.fromPeriod,e.toPeriod)]=t});let m={};!d||Object.keys(d).map((e,t)=>{Object.keys(d[e]).map(t=>{m[t]=d[e]&&d[e][t]&&d[e][t].order||0})});let v=[];v=Object.keys(m),v.sort((e,t)=>m[e]-m[t]);const[E,_]=n.useState(!1);return 0==c||c<0?l.createElement("span",null):l.createElement(l.Fragment,null,l.createElement("div",{style:wo.headerStyle},u("CS_ARREARS_DETAILS")),E&&l.createElement(Mo,{headers:[...v],values:d,arrears:p}),!E&&l.createElement("div",{style:wo.buttonStyle},l.createElement("button",{type:"button",onClick:()=>{_(!0)}},u("CS_SHOW_CARD"))),E&&l.createElement("div",{style:wo.buttonStyle},l.createElement("button",{type:"button",onClick:()=>{_(!1)}},u("CS_HIDE_CARD"))))},Uo=function(e){var t,n;return void 0===e&&(e=null),null==e?"CS_NA":e&&null!==(t=e)&&void 0!==t&&t.Bill&&e.Bill[0]?null===(n=e.Bill[0])||void 0===n?void 0:n.totalAmount:"0"},Fo=e=>{let{data:n,showHorizontalBar:i,wrapperStyles:a,tableStyles:r,containerStyles:u,rowContainerStyles:d}=e;return l.createElement("div",{className:a},n.map((e,n)=>l.createElement("div",{className:u},0!==n&&i&&l.createElement("div",{className:"historyHorizontalBar"}),l.createElement(t.StatusTable,{style:r},((e,n)=>{const{t:i}=o.useTranslation();return Object.keys(e).map(o=>l.createElement("div",null,l.createElement(t.Row,{rowContainerStyle:n,label:i(o),text:""+(e[o]||"NA")})))})(e,d)))))},Bo=e=>{let{userType:n,propertyId:a}=e;const{t:r}=o.useTranslation(),{propertyIds:u}=i.useParams(),d=Digit.ULBService.getCurrentTenantId(),{isLoading:s,data:c}=Digit.Hooks.pt.usePropertySearch({tenantId:d,filters:{propertyIds:"employee"===n?a:u,audit:!0}});let p=(null==c?void 0:c.Properties)||" ",m={};if(p&&Array.isArray(p)&&p.length>0){let e=p[0];p=p.filter(e=>"ACTIVE"==e.status),0===p.length&&p.push(e),p=function(e){void 0===e&&(e=[]);let t=[];return e.map(e=>{JSON.stringify(t).includes(JSON.stringify(e.acknowldgementNumber))||t.push(e)}),t&&Array.isArray(t)&&t.filter(e=>"UPDATE"!=e.creationReason)}(p),p&&p.length>0&&p.map(e=>{let t=e.auditDetails.lastModifiedTime;e.owners=e.owners.filter(e=>"ACTIVE"==e.status),m[t]||(m[t]=[]),m[t].push(...(e=>{const{owners:t,institution:n,ownershipCategory:l}=e;let o=[];return t.map(e=>{let t={};t=n?{PT_COMMON_INSTITUTION_NAME:(null==n?void 0:n.name)||r("CS_NA"),PT_TYPE_OF_INSTITUTION:r(n.type)||r("CS_NA"),PT_OWNER_NAME:n.nameOfAuthorizedPerson||r("CS_NA"),PT_COMMON_AUTHORISED_PERSON_DESIGNATION:r(n.designation)||r("CS_NA"),PT_FORM3_MOBILE_NUMBER:e.mobileNumber||r("CS_NA"),PT_OWNERSHIP_INFO_TEL_PHONE_NO:e.altContactNumber||r("CS_NA"),PT_FORM3_EMAIL_ID:e.emailId||r("CS_NA"),PT_OWNERSHIP_INFO_CORR_ADDR:(null==e?void 0:e.correspondenceAddress)||r("CS_NA"),PT_FORM3_OWNERSHIP_TYPE:r("PROPERTYTAX_BILLING_SLAB_"+l.split(".")[0])||r("CS_NA")}:{PT_OWNER_NAME:e.name||r("CS_NA"),PT_FORM3_GENDER:r(e.gender)||r("CS_NA"),PT_FORM3_MOBILE_NUMBER:e.mobileNumber||r("CS_NA"),PT_FORM3_GUARDIAN_NAME:e.fatherOrHusbandName||r("CS_NA"),PT_FORM3_RELATIONSHIP:r(e.relationship)||r("CS_NA"),PT_SPECIAL_OWNER_CATEGORY:r("NONE"===e.ownerType?"CS_NA":e.ownerType)||r("CS_NA"),PT_MUTATION_AUTHORISED_EMAIL:e.emailId||r("CS_NA"),PT_OWNERSHIP_INFO_CORR_ADDR:e.permanentAddress||r("CS_NA")},o.push(t)}),o})(e))})}return s?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,a?l.createElement(t.Card,null,l.createElement("div",null,Object.keys(m).map((e,n,o)=>{const i=Ue(Number(e));return l.createElement("div",{className:"historyContent"},l.createElement("div",{style:{display:"flex"}},l.createElement("div",{className:"historyCheckpoint zIndex"}),n!==Object.keys(m).length-1?l.createElement("div",{className:"rowContainerStyles"},l.createElement(t.CardSubHeader,{className:"historyTableDateLabel bottomMargin"}," ",r("PT_DATE_OF_TRANSFER")," "),l.createElement(t.CardSubHeader,{className:"historyTableDate bottomMargin"},i)):null),l.createElement(Fo,{data:m[e],wrapperStyles:"wrapperStyles",containerStyles:"containerStyles",rowContainerStyles:{display:"flex",flexDirection:"column"},tableStyles:{display:"grid",gridAutoRows:"min-content",gridTemplateColumns:"repeat(5, minmax(100px, 1fr))"}}),n!==o.length-1&&l.createElement("div",{className:"checkpoint-connect",style:{marginLeft:0,top:"4px"}}))}))):l.createElement(t.Card,null,l.createElement(t.Header,null,r("PT_OWNER_HISTORY")),l.createElement("div",null,Object.keys(m).map(e=>{const n=Ue(Number(e));return l.createElement("div",{style:{padding:"10px"}},l.createElement("div",{className:"historyCheckpoint"}),l.createElement(t.CardSubHeader,{className:"historyTableDateLabel smallText"}," ",r("PT_DATE_OF_TRANSFER")," "),l.createElement(t.CardSubHeader,{className:"historyTableDate smallText"}," - ",n),l.createElement(Fo,{data:m[e],wrapperStyles:"wrapperStyles leftBorder",showHorizontalBar:!0}))}))))},ko=e=>{var n,i,a;let{userType:r,formData:u,config:d,onSelect:s}=e;const{t:p}=o.useTranslation(),m="employee"===r?u.originalData:u.searchResult.property,v=null==m||null===(n=m.ownershipCategory)||void 0===n||null===(i=n.split)||void 0===i?void 0:i.call(n,".");var E;return"employee"===r?l.createElement(l.Fragment,null,l.createElement(t.StatusTable,null,null==m||null===(E=m.owners.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}))||void 0===E?void 0:E.filter(e=>"ACTIVE"===e.status).map((e,n,o)=>{var i,a;return l.createElement(l.Fragment,null,(null==m||null===(i=m.owners)||void 0===i?void 0:i.filter(e=>"ACTIVE"===e.status).length)>1?l.createElement(t.CardCaption,{style:{marginTop:"24px",marginBottom:"12px",display:"block"}},p("ES_OWNER")+"  "+(n+1)):null,null===(a=d.labels)||void 0===a?void 0:a.filter(e=>"ALL"===e.ownershipType||(null==v?void 0:v[0].includes(e.ownershipType))||e.ownershipType===(null==v?void 0:v[0])).map(e=>{var o,i;let a=null==e||null===(o=e.keyPath)||void 0===o||null===(i=o.filter(e=>!["searchResult","property"].includes(e)))||void 0===i?void 0:i.reduce((e,t)=>"_index_"===t?null==e?void 0:e[n]:null==e?void 0:e[t],m);return l.createElement(t.Row,{key:e.label,label:p(e.label),text:a||"N/A"})}))}))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:p,config:d,onSelect:s,onSkip:()=>{},isDisabled:!1},l.createElement(t.CardHeader,null,p("PT_MUTATION_TRANSFEROR_DETAILS")),null==m||null===(a=m.owners)||void 0===a?void 0:a.filter(e=>"ACTIVE"===e.status).map((e,n,o)=>{var i,a;return l.createElement(l.Fragment,{key:n},(null==m||null===(i=m.owners)||void 0===i?void 0:i.filter(e=>"ACTIVE"===e.status).length)>1?l.createElement(t.CardCaption,{style:{marginTop:"24px",marginBottom:"12px",display:"block"}},p("ES_OWNER")+"  "+(n+1)):null,null===(a=d.labels)||void 0===a?void 0:a.filter(e=>"ALL"===e.ownershipType||(null==v?void 0:v[0].includes(e.ownershipType))||e.ownershipType===(null==v?void 0:v[0])).map(e=>{var o;let i=null==e||null===(o=e.keyPath)||void 0===o?void 0:o.reduce((e,t)=>"_index_"===t?null==e?void 0:e[n]:null==e?void 0:e[t],u);return l.createElement(t.KeyNote,{key:e.label,keyValue:p(e.label),note:"string"==typeof i?p(i):"N/A",noteStyle:e.noteStyle})}))})))},Ho=()=>({name:"",mobileNumber:"",fatherOrHusbandName:"",emailId:"",permanentAddress:"",relationship:"",ownerType:"",gender:"",isCorrespondenceAddress:!1,documents:{},key:Date.now()}),Yo=[{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0}],Wo=e=>{let{owner:t,addNewOwner:n,setOwners:a,owners:r,ownerIndex:u,propsConfig:d,...s}=e;const{t:c}=o.useTranslation(),{path:p}=i.useRouteMatch(),{pathname:m}=i.useLocation(),v=i.useHistory(),E=e=>{a(n=>n.map((n,l)=>n.key===t.key?{...n,...e}:n)),n()},_=function(e,n,l,o,i,c,p){a(e=>e.map((e,l)=>e.key===t.key?{...e,...n}:e));let E=m.split("/"),_=E.pop(),T=Yo.filter(e=>e.route===_)[0],y=c?"?"+Object.keys(c).map(e=>e+"="+c[e]).join("&"):"";const S=l?v.replace:v.push;if(T.nextStep){if("string"==typeof T.nextStep)S(E.join("/")+"/"+T.nextStep+y);else if("object"==typeof T.nextStep&&T.nextStep){let e=T.nextStep[p.routeKey];S(E.join("/")+"/"+e+y)}}else u!==r.length-1?(E.pop(),E.push(u+1),S(E.join("/")+"/"+Yo[0].route)):s.onSelect(d.key,r,"","","",{nesting:2})};return l.createElement(i.Switch,null,Yo.map((e,t)=>{const{component:n}=e,o="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{key:t,path:p+"/"+e.route},l.createElement(o,{config:e,onSelect:_,onSkip:()=>{},t:c,formData:{...s.formData,owners:r},ownerIndex:u,addNewOwner:E}))}))},jo={type:"register"},Ko={type:"login"},Vo={otpSentTo:!1,isNewUser:!1,invalid:!1,showToast:null,error:!1,warning:!1,name:"",message:"",mobileNumber:"",previousAction:null,disable:!1},Go=(e,t)=>{switch(t.type){case"verifiedotp":return{...e,previousAction:t.type,message:"",disable:!1,showToast:!1,error:!0,warning:!1,invalid:!0};case"verifyotp":return{...e,previousAction:t.type,message:"",disable:!0,showToast:!1,error:!0,warning:!1,invalid:!1};case"otpsent":return{...e,previousAction:t.type,message:"PT_SEC_OTP_SENT_SUCEESS",otpSentTo:t.value,isNewUser:t.isNewUser,showToast:!0,error:!1,warning:!1};case"resettoast":return{...e,previousAction:t.type,message:"",showToast:!1,error:!1,warning:!1};case"success":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!1,error:!1};case"warning":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!0,error:!1};case"error":return{...e,previousAction:t.type,message:t.value,showToast:!0,error:!0};case"reset":default:return{...Vo}}},zo=function(e,t){return Promise.resolve(Ee(function(){return Promise.resolve(Digit.UserService.sendOtp(e,t)).then(function(e){return[e,null]})},function(e){return[null,e]}))},Xo={invalid:!1,showToast:null,error:!1,warning:!1,name:"",message:"",mobileNumber:"",previousAction:null,disable:!1},qo=(e,t)=>{switch(t.type){case"verifiedotp":return{...e,previousAction:t.type,message:"",disable:!1,showToast:!1,error:!0,warning:!1,invalid:!0};case"verifyotp":return{...e,previousAction:t.type,message:"",disable:!0,showToast:!1,error:!0,warning:!1,invalid:!1};case"otpsent":return{...e,previousAction:t.type,message:"PT_SEC_OTP_SENT_SUCEESS",showToast:!0,error:!1,warning:!1};case"resettoast":return{...e,previousAction:t.type,message:"",showToast:!1,error:!1,warning:!1};case"success":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!1,error:!1};case"warning":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!0,error:!1};case"error":return{...e,previousAction:t.type,message:t.value,showToast:!0,error:!0};case"reset":default:return{...Xo}}},$o=function(e){var t;void 0===e&&(e="");let n=(null===(t=e)||void 0===t?void 0:t.split("."))||[],l={};return l.usageCategoryMajor=n&&n.length>0&&n[0],l.usageCategoryMinor=n&&n.length>1&&n[1],l.usageCategorySubMinor=n&&n.length>2&&n[2],l.usageCategoryDetail=n&&n.length>3&&n[3],l},Zo=e=>{let{t:n,currentPage:o,columns:i,data:a,getCellProps:r,disableSort:u,onSort:d,onNextPage:s,onPrevPage:c,onPageSizeChange:p,pageSizeLimit:m,sortParams:v,totalRecords:E}=e;return l.createElement(t.Table,{t:n,data:a,currentPage:o,columns:i,getCellProps:r,onNextPage:s,onPrevPage:c,pageSizeLimit:m,disableSort:u,onPageSizeChange:p,onSort:d,sortParams:v,totalRecords:E})},Qo=e=>{let{businessService:a}=e;const{t:r}=o.useTranslation(),u=[{text:"ES_TITLE_NEW_REGISTRATION",link:"/digit-ui/employee/pt/new-application",businessService:"PT",roles:["PT_CEMP"]},{text:"PT_SEARCH_PROPERTY",link:"/digit-ui/employee/pt/search",businessService:"PT",roles:[]},{text:"ES_COMMON_APPLICATION_SEARCH",link:"/digit-ui/employee/pt/application-search",businessService:"PT",roles:[]}],[d,s]=n.useState([]),{roles:c}=Digit.UserService.getUser().info;return n.useEffect(()=>{let e=u.filter(e=>e.businessService===a).filter(e=>{let{roles:t}=e;return t.some(e=>c.map(e=>{let{code:t}=e;return t}).includes(e))||!(null!=t&&t.length)});s(e)},[]),l.createElement(t.Card,{className:"employeeCard filter inboxLinks"},l.createElement("div",{className:"complaint-links-container"},l.createElement("div",{className:"header"},l.createElement("span",{className:"logo"},l.createElement(t.PropertyHouse,null))," ",l.createElement("span",{className:"text"},r("ES_TITLE_PROPERTY_TAX"))),l.createElement("div",{className:"body"},d.map((e,t)=>{let{link:n,text:o,hyperlink:a=!1,roles:u=[]}=e;return l.createElement("span",{className:"link",key:t},a?l.createElement("a",{href:n},o):l.createElement(i.Link,{to:n},r(o)))}))))},Jo={date:t.DatePicker,mobileNumber:t.MobileNumber,Locality:e=>l.createElement(t.Localities,{tenantId:Digit.ULBService.getCurrentTenantId(),selectLocality:e.onChange,keepNull:!1,boundaryType:"revenue",selected:e.value,disableLoader:!0,sortFn:(e,t)=>e.i18nkey<t.i18nkey?-1:1})},ei=e=>{var i;let{onSearch:r,type:u,onClose:d,searchFields:s,searchParams:c,isInboxPage:p,clearSearch:m}=e;const{t:v}=o.useTranslation(),{handleSubmit:E,reset:_,watch:T,control:y,setError:S,clearErrors:f,formState:P,setValue:g}=a.useForm({defaultValues:p?c:{locality:null,city:null,...c}}),N=T(),A=innerWidth<=640;function O(){const e=s.reduce((e,t)=>({...e,[null==t?void 0:t.name]:""}),{});if(_(e),p){const e={...c};e.delete=[],s.forEach(t=>{e.delete.push(null==t?void 0:t.name)}),r({...e})}else m()}n.useEffect(()=>{s.forEach(e=>{let{pattern:t,name:n,maxLength:l,minLength:o,errorMessages:i,...a}=e;const r=N[n],u=P.errors[n];t&&(new RegExp(t).test(r)||u?new RegExp(t).test(r)&&"pattern"===(null==u?void 0:u.type)&&f([n]):S(n,{type:"pattern",message:v(null==i?void 0:i.pattern)||v("PATTERN_"+n.toUpperCase()+"_FAILED")})),o&&((null==r?void 0:r.length)<o&&!u?S(n,{type:"minLength",message:v((null==i?void 0:i.minLength)||"MINLENGTH_"+n.toUpperCase()+"_FAILED")}):(null==r?void 0:r.length)>=o&&"minLength"===(null==u?void 0:u.type)&&f([n])),l&&((null==r?void 0:r.length)>l&&!u?S(n,{type:"maxLength",message:v((null==i?void 0:i.maxLength)||"MAXLENGTH_"+n.toUpperCase()+"_FAILED")}):(null==r?void 0:r.length)<=l&&"maxLength"===(null==u?void 0:u.type)&&f([n]))})},[N,P,S,f]);const I=e=>l.createElement(t.LinkLabel,{style:{display:"inline",...e?{margin:0}:{}},onClick:O},v("ES_COMMON_CLEAR_SEARCH"));return l.createElement("form",{onSubmit:E(e=>{e.mobileNumber||delete e.mobileNumber,e.delete=[],s.forEach(t=>{e[t.name]||e.delete.push(t.name)}),r(e),"mobile"===u&&d()})},l.createElement(l.Fragment,null,l.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:p?"24px":"revert"}},l.createElement("div",{className:"search-complaint-container"},("mobile"===u||A)&&l.createElement("div",{className:"complaint-header"},l.createElement("h2",null,v("ES_COMMON_SEARCH_BY")),l.createElement("span",{onClick:d},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"complaint-input-container for-pt "+(p?"":"for-search"),style:{width:"100%",display:"grid"}},null==s||null===(i=s.filter(e=>!0))||void 0===i?void 0:i.map((e,n)=>{var o,i,r;return l.createElement("div",{key:e.name,className:"input-fields"},l.createElement("span",{className:"mobile-input"},l.createElement(t.Label,null,v(e.label)+" "+(e.isMendatory?"*":"")),l.createElement(a.Controller,e.type?{render:t=>l.createElement(null==Jo?void 0:Jo[e.type],{formValue:N,setValue:g,onChange:t.onChange,value:t.value}),name:e.name,control:y,defaultValue:""}:{render:e=>l.createElement(t.TextInput,{onChange:e.onChange,value:e.value}),name:e.name,control:y,defaultValue:""})),null!=P&&null!==(o=P.dirtyFields)&&void 0!==o&&o[e.name]?l.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==P||null===(i=P.errors)||void 0===i||null===(r=i[e.name])||void 0===r?void 0:r.message):null)}),p&&l.createElement("div",{style:{gridColumn:"2/3",textAlign:"right",paddingTop:"10px"},className:"input-fields"},l.createElement("div",null,I())),"desktop"===u&&!A&&l.createElement("div",{style:{maxWidth:"unset",marginLeft:"unset"},className:"search-submit-wrapper"},l.createElement(t.SubmitBar,{className:"submit-bar-search",label:v("ES_COMMON_SEARCH"),disabled:!!Object.keys(P.errors).length||(()=>{var e;let t=!0;return Object.keys(N).forEach(e=>{!["locality","city"].includes(e)&&N[e]&&(t=!1)}),null==s||!s.find(e=>"locality"===e.name)||null!=N&&null!==(e=N.locality)&&void 0!==e&&e.code||(t=!0),t})(),submit:!0}),!p&&l.createElement("div",null,I()))))),("mobile"===u||A)&&l.createElement(t.ActionBar,{className:"clear-search-container"},l.createElement("button",{className:"clear-search",style:{flex:1}},I(A)),l.createElement(t.SubmitBar,{disabled:!!Object.keys(P.errors).length,label:v("ES_COMMON_SEARCH"),style:{flex:1},submit:!0}))))},ti=e=>{let{tableConfig:i,filterComponent:a,...r}=e;const{data:u,useNewInboxAPI:d}=r,{t:s}=o.useTranslation(),[c,p]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(a)}),[m,v]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(r.EmptyResultInboxComp)}),[E,_]=n.useState(!1),T=l.useMemo(()=>r.isSearch?i.searchColumns(r):i.inboxColumns(r)||[],[]);let y;return r.isLoading?y=l.createElement(t.Loader,null):E?y=null:!u||0===(null==u?void 0:u.length)||d&&null!=u&&u[0].dataEmpty?y=m&&l.createElement(m,{data:u})||(0===(null==u?void 0:u.length)||d&&null!=u&&u[0].dataEmpty?l.createElement(t.Card,{style:{marginTop:20}},s("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):l.createElement(t.Loader,null)):(null==u?void 0:u.length)>0&&(y=l.createElement(Zo,{t:s,data:u,columns:T,getCellProps:e=>({style:{minWidth:e.column.Header===s("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:r.onPageSizeChange,currentPage:r.currentPage,onNextPage:r.onNextPage,onPrevPage:r.onPrevPage,pageSizeLimit:r.pageSizeLimit,onSort:r.onSort,disableSort:r.disableSort,sortParams:r.sortParams,totalRecords:r.totalRecords})),l.createElement("div",{className:"inbox-container"},!r.isSearch&&l.createElement("div",{className:"filters-container"},l.createElement(Qo,{parentRoute:r.parentRoute,businessService:r.moduleCode}),l.createElement("div",null,l.createElement(c,{defaultSearchParams:r.defaultSearchParams,onFilterChange:r.onFilterChange,searchParams:r.searchParams,type:"desktop",useNewInboxAPI:d,statusMap:d?null==u?void 0:u[0].statusMap:null,moduleCode:r.moduleCode}))),l.createElement("div",{style:{flex:1}},l.createElement(ei,{defaultSearchParams:r.defaultSearchParams,onSearch:e=>{r.onSearch(e),_(!1)},type:"desktop",searchFields:r.searchFields,isInboxPage:!(null!=r&&r.isSearch),searchParams:r.searchParams,clearSearch:()=>_(!0)}),l.createElement("div",{className:"result",style:{marginLeft:null!=r&&r.isSearch?"":"24px",flex:1}},y)))},ni=e=>{const{t:i}=o.useTranslation(),[a,r]=n.useState(()=>{var t,n;return null!==(t=e.sortParams)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&n.desc?{code:"DESC",name:i("ES_INBOX_DATE_LATEST_FIRST")}:{code:"ASC",name:i("ES_INBOX_DATE_LATEST_LAST")}});function u(){}return l.createElement(l.Fragment,null,l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"filter-label"},i("SORT_BY"),":"),l.createElement("div",{className:"clearAll",onClick:u},i("ES_COMMON_CLEAR_ALL")),"desktop"===e.type&&l.createElement("span",{className:"clear-search",onClick:u},i("ES_COMMON_CLEAR_ALL")),"mobile"===e.type&&l.createElement("span",{onClick:e.onClose},l.createElement(t.CloseSvg,null))),l.createElement("div",null,l.createElement(t.RadioButtons,{onSelect:function(t){e.onSort([{id:"createdTime",desc:"DESC"===t.code}]),e.onClose()},selectedOption:a,optionsKey:"name",options:[{code:"DESC",name:i("ES_INBOX_DATE_LATEST_FIRST")},{code:"ASC",name:i("ES_INBOX_DATE_LATEST_LAST")}]})))))},li=e=>{let{t:o,data:i,onFilterChange:a,onSearch:r,onSort:u,serviceRequestIdKey:d,isFstpOperator:s,isLoading:c,isSearch:p,searchParams:m,searchFields:v,sortParams:E,linkPrefix:_,filterComponent:T}=e;const[y,S]=n.useState(p?"SEARCH":""),[f,P]=n.useState(!!p),[g,N]=n.useState(E),[A]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(T)});n.useEffect(()=>{y&&P(!0)},[y]);const O=()=>{P(!1),S(""),N(E)};if(c)return l.createElement(t.Loader,null);let I;return i&&0!==(null==i?void 0:i.length)?i&&(null==i?void 0:i.length)>0&&(I=l.createElement(t.DetailsCard,{data:i,serviceRequestIdKey:d,linkPrefix:_||"/digit-ui/employee/pt/"})):I=l.createElement(t.Card,{style:{marginTop:20}},o("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))),l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},r&&l.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:()=>{S("SEARCH"),P(!0)}}),!p&&a&&l.createElement(t.FilterAction,{text:"FILTER",handleActionClick:()=>{S("FILTER"),P(!0)}}),l.createElement(t.FilterAction,{text:"SORT",handleActionClick:()=>{S("SORT"),P(!0)}})),I,f&&l.createElement(t.PopUp,null,"FILTER"===y&&l.createElement("div",{className:"popup-module"},l.createElement(A,{onFilterChange:e=>{a(e),P(!1)},Close:O,type:"mobile",searchParams:m})),"SORT"===y&&l.createElement("div",{className:"popup-module"},l.createElement(ni,{type:"mobile",sortParams:E,onClose:O,onSort:u})),"SEARCH"===y&&l.createElement("div",{className:"popup-module"},l.createElement(ei,{type:"mobile",onClose:O,onSearch:r,isFstpOperator:s,searchParams:m,searchFields:v}))))},oi=e=>{let{linkPrefix:a,classNameForMobileView:r=""}=e;const{t:u}=o.useTranslation(),d=[{text:u("ES_TITLE_NEW_REGISTRATION"),link:"/digit-ui/employee/pt/new-application"},{text:u("ES_TITILE_SEARCH_APPLICATION"),link:a+"/search"}],[s,c]=n.useState([]),{roles:p}=Digit.UserService.getUser().info;return n.useEffect(()=>{let e=[];d.forEach(t=>{var n;t.accessTo?(n=t.accessTo,p.filter(e=>n.includes(e.code)).length&&e.push(t)):e.push(t)}),c(e)},[]),l.createElement(t.Card,{className:"employeeCard filter"},l.createElement("div",{className:"complaint-links-container "+r},l.createElement("div",{className:"header"},l.createElement("span",{className:"logo"},l.createElement(t.ShippingTruck,null))," ",l.createElement("span",{className:"text"},u("ES_TITLE_PROPERTY_TAX"))),l.createElement("div",{className:"body"},s.map((e,t)=>{let{link:n,text:o}=e;return l.createElement("span",{className:"link",key:t},l.createElement(i.Link,{to:n},o))}))))},ii=e=>{let{data:t,isLoading:n,isSearch:i,searchFields:a,onFilterChange:r,onSearch:u,onSort:d,parentRoute:s,searchParams:c,sortParams:p,linkPrefix:m,tableConfig:v,filterComponent:E}=e;const{t:_}=o.useTranslation();return l.createElement("div",{style:{padding:0}},l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},!i&&l.createElement(oi,{classNameForMobileView:"linksWrapperForMobileInbox",linkPrefix:s,isMobile:!0}),l.createElement(li,{t:_,data:null==t?void 0:t.map(e=>{const t={};return(i?v.searchColumns():v.inboxColumns()).forEach(n=>{n.mobileCell&&(t[n.Header]=n.mobileCell(e))}),t}),onFilterChange:r,isLoading:n,isSearch:i,onSearch:u,onSort:d,searchParams:c,searchFields:a,linkPrefix:m,sortParams:p,serviceRequestIdKey:null==v?void 0:v.serviceRequestIdKey,filterComponent:E}))))},ai=e=>{var i,a,r,u,d;let{useNewInboxAPI:s,parentRoute:c,moduleCode:p="PT",initialStates:m={},filterComponent:v,isInbox:E,rawWfHandler:_,rawSearchHandler:T,combineResponse:y,wfConfig:S,searchConfig:f,middlewaresWf:P,middlewareSearch:g,EmptyResultInboxComp:N}=e;const A=Digit.ULBService.getCurrentTenantId(),{t:O}=o.useTranslation(),[I,h]=n.useState(()=>E?{}:{enabled:!1}),[C,R]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent("PTInboxTableConfig")}),[b,D]=n.useState(m.pageOffset||0),[L,M]=n.useState(m.pageSize||10),[w,x]=n.useState(m.sortParams||[{id:"createdTime",desc:!1}]),[U,F]=n.useState(m.searchParams||{});let B=window.Digit.Utils.browser.isMobile(),k=B?{limit:100,offset:0,sortBy:null==w||null===(i=w[0])||void 0===i?void 0:i.id,sortOrder:null!=w&&null!==(a=w[0])&&void 0!==a&&a.desc?"DESC":"ASC"}:{limit:L,offset:b,sortBy:null==w||null===(r=w[0])||void 0===r?void 0:r.id,sortOrder:null!=w&&null!==(u=w[0])&&void 0!==u&&u.desc?"DESC":"ASC"};const{isLoading:H,data:Y,searchFields:W,...j}=s?Digit.Hooks.useNewInboxGeneral({tenantId:A,ModuleCode:p,filters:{...U,...k,sortParams:w}}):Digit.Hooks.useInboxGeneral({tenantId:A,businessService:p,isInbox:E,filters:{...U,...k,sortParams:w},rawWfHandler:_,rawSearchHandler:T,combineResponse:y,wfConfig:S,searchConfig:{...I,...f},middlewaresWf:P,middlewareSearch:g});n.useEffect(()=>{D(0)},[U]);const K=e=>{let t=e.delete,n={...U,...e};t&&t.forEach(e=>delete n[e]),delete e.delete,F({...n}),h({enabled:!0})},V=n.useCallback(e=>{0!==e.length&&x(e)},[]);var G,z;if(null!==(null==j||null===(d=j.data)||void 0===d?void 0:d.length))return B?l.createElement(ii,{data:Y,isLoading:H,isSearch:!E,searchFields:W,onFilterChange:K,onSearch:K,onSort:V,parentRoute:c,searchParams:U,sortParams:w,linkPrefix:c+"/application-details/",tableConfig:null!=j&&j.tableConfig?null===(G=res)||void 0===G?void 0:G.tableConfig:C(O).PT,filterComponent:v,EmptyResultInboxComp:N,useNewInboxAPI:s}):l.createElement("div",null,E&&l.createElement(t.Header,null,O("ES_COMMON_INBOX")),!E&&l.createElement(t.Header,null,O("SEARCH_PROPERTY")),l.createElement(ti,{moduleCode:p,data:Y,tableConfig:C(O).PT,isLoading:H,defaultSearchParams:m.searchParams,isSearch:!E,onFilterChange:K,searchFields:W,onSearch:K,onSort:V,onNextPage:()=>{D(e=>e+L)},onPrevPage:()=>{D(e=>e-L)},currentPage:Math.floor(b/L),pageSizeLimit:L,disableSort:!1,onPageSizeChange:e=>{M(Number(e.target.value))},parentRoute:c,searchParams:U,sortParams:w,totalRecords:Number(null==Y||null===(z=Y[0])||void 0===z?void 0:z.totalCount),filterComponent:v,EmptyResultInboxComp:N,useNewInboxAPI:s}))},ri=e=>{if(e){const t=new Date(e);let n=t.getMonth()+1,l=t.getDate(),o=t.getFullYear();return n=(n>9?"":"0")+n,l=(l>9?"":"0")+l,l+"/"+n+"/"+o}return null},ui=e=>{const t=new Date(e).toString().split(" ");return t.length>0?t[2]+"-"+t[1]+"-"+t[3]:"dd-mmm-yyyy"},di=function(e){void 0===e&&(e=[]);let t=e.sort((e,t)=>t.fromPeriod-e.fromPeriod);return ui(t[t.length-1].fromPeriod)+" to "+ui(t[0].toPeriod)},si=()=>{const{t:e}=o.useTranslation(),a=Digit.ULBService.getCurrentTenantId();let{id:r}=i.useParams();const u=r.indexOf("?");-1!=u&&(r=r.slice(0,u));const[d,s]=n.useState([]),c=window.Digit.Utils.browser.isMobile(),{isLoading:p,data:m}=Digit.Hooks.receipts.useReceiptsSearch({businessServices:"PT",consumerCodes:r},a,[],!1);return n.useEffect(()=>{var e;console.log("data?.Payments",null==m?void 0:m.Payments),m&&s(null==m||null===(e=m.Payments)||void 0===e?void 0:e.map(e=>({receiptNumber:e.paymentDetails[0].receiptNumber,billPeriod:di(e.paymentDetails[0].bill.billDetails),transactionDate:ui(e.transactionDate),billNo:e.paymentDetails[0].bill.billNumber,paymentStatus:e.paymentStatus?"CS_"+e.paymentStatus:"PT_NA",amountPaid:0===e.totalAmountPaid?"0":e.totalAmountPaid,tenantId:e.tenantId,paymentDetails:e.paymentDetails,mobileNumber:e.mobileNumber,paidBy:e.paidBy,payerName:e.payerName,paymentMode:e.paymentMode,payerEmail:e.payerEmail,transactionNumber:e.transactionNumber,fileStoreId:e.fileStoreId})))},[m]),p?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("PT_PAYMENT_HISTORY")),l.createElement("div",{style:{display:"flex",paddingBottom:"8px",marginBottom:"8px"}},l.createElement("h2",{style:c?{marginLeft:"15px",fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}:{fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}},e("PT_PROPERTY_PTUID")),l.createElement("div",{style:{whiteSpace:"pre",width:"50%",fontSize:"16px",lineHeight:"24px"}},r)),d.length>0?null==d?void 0:d.map(n=>l.createElement("div",{style:c?{}:{marginLeft:"-16px"}},l.createElement(t.Card,{style:c?{marginBottom:"10px"}:{}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:e("PT_HISTORY_BILL_PERIOD"),text:null==n?void 0:n.billPeriod,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_BILL_NO"),text:null==n?void 0:n.billNo,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_RECEIPT_NO"),text:null==n?void 0:n.receiptNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_DATE"),text:null==n?void 0:n.transactionDate,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_AMOUNT_PAID"),text:null==n?void 0:n.amountPaid}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_STATUS"),text:e(null==n?void 0:n.paymentStatus),textStyle:{whiteSpace:"pre"}}),l.createElement(t.LinkLabel,{style:c?{marginLeft:"0px"}:{},onClick:()=>function(e,t){try{function n(){return Promise.resolve(Digit.PaymentService.printReciept(e,{fileStoreIds:l.filestoreIds[0]})).then(function(e){var t;window.open(e[null===(t=l)||void 0===t?void 0:t.filestoreIds[0]],"_blank")})}console.log("payments",t);let l={filestoreIds:[null==t?void 0:t.fileStoreId]};const o=function(){if(null==t||!t.fileStoreId){let n,o,i="",a="",r=0;if("PT"==t.paymentDetails[0].businessService){let e={},l=[],u={},d=[],s=0,c=0,p=0,m=0,v=0,E=0,_=0,T=0,y=0,S=0,f=0,P=0,g=0,N=0,A=0,O=0,I=0,h=0,C=0,R=0,b=0,D=0,L=0,M=0;if(t.paymentDetails[0].bill.billDetails.map(t=>{(t.amount>0||t.amountPaid>0)&&(r+=1,n=ri(t.toPeriod).split("/")[2],o=ri(t.fromPeriod).split("/")[2],i=""==i?o+"-"+n+"(Rs."+t.amountPaid+")":i+","+o+"-"+n+"(Rs."+t.amountPaid+")",a=o+"-"+n,t.billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,rebate:E,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:t.amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:t.amount},l.push(e),d.push(u))}),0==r){let n=ri(t.paymentDetails[0].bill.billDetails[0].toPeriod).split("/")[2],o=ri(t.paymentDetails[0].bill.billDetails[0].fromPeriod).split("/")[2];i=""==i?o+"-"+n:i+","+o+"-"+n,a=o+"-"+n,t.paymentDetails[0].bill.billDetails[0].billAccountDetails.map(e=>{"PT_TAX"==e.taxHeadCode?(c=e.adjustedAmount,N=e.amount):"PT_TIME_REBATE"==e.taxHeadCode?(E=e.adjustedAmount,h=e.amount):"PT_CANCER_CESS"==e.taxHeadCode?(m=e.adjustedAmount,O=e.amount):"PT_FIRE_CESS"==e.taxHeadCode?(p=e.adjustedAmount,A=e.amount):"PT_TIME_INTEREST"==e.taxHeadCode?(_=e.adjustedAmount,C=e.amount):"PT_TIME_PENALTY"==e.taxHeadCode?(v=e.adjustedAmount,I=e.amount):"PT_OWNER_EXEMPTION"==e.taxHeadCode?(y=e.adjustedAmount,b=e.amount):"PT_ROUNDOFF"==e.taxHeadCode?(s=e.adjustedAmount,g=e.amount):"PT_UNIT_USAGE_EXEMPTION"==e.taxHeadCode?(T=e.adjustedAmount,R=e.amount):"PT_ADHOC_PENALTY"==e.taxHeadCode?(S=e.adjustedAmount,D=e.amount):"PT_ADHOC_REBATE"==e.taxHeadCode&&(f=e.adjustedAmount,L=e.amount),P+=e.adjustedAmount,M+=e.amount}),e={year:a,tax:c,firecess:p,cancercess:m,penalty:v,interest:_,usage_exemption:T,special_category_exemption:y,adhoc_penalty:S,adhoc_rebate:f,roundoff:s,total:t.paymentDetails[0].bill.billDetails[0].amountPaid},u={year:a,tax:N,firecess:A,cancercess:O,penalty:I,rebate:h,interest:C,usage_exemption:R,special_category_exemption:b,adhoc_penalty:D,adhoc_rebate:L,roundoff:g,total:t.paymentDetails[0].bill.billDetails[0].amount},l.push(e),d.push(u)}t.paymentDetails[0].additionalDetails={assessmentYears:i,arrearArray:l,taxArray:d}}return Promise.resolve(Digit.PaymentService.generatePdf(e,{Payments:[{...t}]},"property-receipt")).then(function(e){l=e})}}();return Promise.resolve(o&&o.then?o.then(n):n())}catch(e){return Promise.reject(e)}}(null==n?void 0:n.tenantId,n)},e("PT_DOWNLOAD_RECEIPT")))))):l.createElement("div",null,l.createElement(t.CardText,null,e("PT_NO_PAYMENTS_HISTORY"))))},ci=e=>{var o,i;let{register:r,control:u,reset:d,t:s,formState:c,setShowToast:p,previousPage:m}=e;const v=[{code:"CREATE",i18nKey:"CREATE"},{code:"UPDATE",i18nKey:"UPDATE"},{code:"MUTATION",i18nKey:"MUTATION"}],E=[{code:"ACTIVE",i18nKey:"WF_PT_ACTIVE"},{code:"INACTIVE",i18nKey:"WF_PT_INACTIVE"},{code:"INWORKFLOW",i18nKey:"WF_PT_INWORKFLOW"}];return l.createElement(n.Fragment,null,l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_APPLICATION_NO_LABEL")),l.createElement(t.TextInput,{name:"acknowledgementIds",inputRef:r({})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_SEARCHPROPERTY_TABEL_PID")),l.createElement(t.TextInput,{name:"propertyIds",inputRef:r({})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_OWNER_MOBILE_NO")),l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:r({minLength:{value:10,message:s("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:s("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:s("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),l.createElement(t.CardLabelError,null,null==c||null===(o=c.errors)||void 0===o||null===(i=o.mobileNumber)||void 0===i?void 0:i.message)),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")),l.createElement(a.Controller,{control:u,name:"creationReason",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:v,optionKey:"i18nKey",t:s,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("ES_SEARCH_PROPERTY_STATUS")),l.createElement(a.Controller,{control:u,name:"status",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:E,optionKey:"i18nKey",t:s,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_FROM_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"fromDate",control:u})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_TO_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"toDate",control:u})),l.createElement(t.SearchField,{className:"submit"},l.createElement(t.SubmitBar,{label:s("ES_COMMON_SEARCH"),submit:!0}),l.createElement("p",{style:{marginTop:"10px"},onClick:()=>{d({acknowledgementIds:"",fromDate:"",toDate:"",propertyIds:"",mobileNumber:"",status:"",creationReason:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),p(null),m()}},s("ES_COMMON_CLEAR_ALL"))))},pi=e=>{let{Controller:o,register:i,control:a,t:r,reset:u,previousPage:s,handleSubmit:c,tenantId:p,data:m,onSubmit:v,formState:E,setShowToast:_}=e;const[T,y]=n.useReducer(function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}},!1),S=()=>{y({type:"remove"})},f=()=>l.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:S},l.createElement(t.CloseSvg,null)),P={Controller:o,register:i,control:a,t:r,reset:u,previousPage:s,formState:E,setShowToast:_},g=n.useCallback(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a}=e;return(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a}=e;const{closeMobilePopupModal:u}=a;switch(n){case"SearchFormComponent":return l.createElement(t.SearchForm,a,l.createElement(f,null),l.createElement("div",{className:"MobilePopupHeadingWrapper"},l.createElement("h2",null,r("ES_COMMON_SEARCH"),":")),l.createElement(ci,d({},o,{closeMobilePopupModal:u,tenantId:i,t:r})));default:return l.createElement("span",null)}})({currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a})},[T]),N=n.useMemo(()=>null!=m&&m.display||""===m?[]:null==m?void 0:m.map(e=>{var t,n,l,o,i,a,u,d,s,c;return{[r("PT_SEARCHPROPERTY_TABEL_PID")]:null==e?void 0:e.propertyId,[r("PT_APPLICATION_NO_LABEL")]:(null==e?void 0:e.acknowldgementNumber)||"-",[r("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")]:(null==e?void 0:e.creationReason)||"",[r("PT_COMMON_TABLE_COL_OWNER_NAME")]:(null==e||null===(t=e.owners)||void 0===t?void 0:t.map(e=>e.name).join(","))||"",[r("ES_SEARCH_PROPERTY_STATUS")]:r((null==e?void 0:e.status)&&"WF_PT_"+(null==e?void 0:e.status)||"NA")||"",[r("PT_ADDRESS_LABEL")]:(null!=e&&null!==(n=e.address)&&void 0!==n&&n.doorNo?(null==e||null===(l=e.address)||void 0===l?void 0:l.doorNo)+", ":"")+" "+(null!=e&&null!==(o=e.address)&&void 0!==o&&o.street?(null==e||null===(i=e.address)||void 0===i?void 0:i.street)+", ":"")+(null!=e&&null!==(a=e.address)&&void 0!==a&&a.landmark?(null==e||null===(u=e.address)||void 0===u?void 0:u.landmark)+", ":"")+r(null==e||null===(d=e.address)||void 0===d?void 0:d.locality.code)+", "+r(null==e||null===(s=e.address)||void 0===s?void 0:s.city.code)+" "+(r(null==e||null===(c=e.address)||void 0===c?void 0:c.pincode)?""+(null==e?void 0:e.address.pincode):" ")||"NA"}}),[m]);return l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},l.createElement(t.SearchAction,{text:r("ES_COMMON_SEARCH"),handleActionClick:()=>y({type:"set",payload:"SearchFormComponent"}),tenantId:p,t:r})),T?l.createElement(t.PopUp,null,l.createElement(g,{onSubmit:e=>{y({type:"remove"}),v(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:P,currentlyActiveMobileModal:T,closeMobilePopupModal:S,tenantId:p})):null,null!=m&&m.display?l.createElement(t.Card,{style:{marginTop:20}},r(null==m?void 0:m.display).split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):l.createElement(t.DetailsCard,{data:N,linkPrefix:"/digit-ui/employee/pt/applicationsearch/application-details/",serviceRequestIdKey:r("PT_SEARCHPROPERTY_TABEL_PID")}))},mi=e=>{var o,r;let{tenantId:u,isLoading:d,t:s,onSubmit:c,data:p,count:m,setShowToast:v}=e;const E=window.Digit.Utils.browser.isMobile(),{register:_,control:T,handleSubmit:y,setValue:S,getValues:f,reset:P,formState:g}=a.useForm({defaultValues:{offset:0,limit:!E&&10,sortBy:"commencementDate",sortOrder:"DESC"}});n.useEffect(()=>{_("offset",0),_("limit",10),_("sortBy","commencementDate"),_("sortOrder","DESC")},[_]);const N=[{code:"CREATE",i18nKey:"CREATE"},{code:"UPDATE",i18nKey:"UPDATE"},{code:"MUTATION",i18nKey:"MUTATION"}],A=[{code:"ACTIVE",i18nKey:"WF_PT_ACTIVE"},{code:"INACTIVE",i18nKey:"WF_PT_INACTIVE"},{code:"INWORKFLOW",i18nKey:"WF_PT_INWORKFLOW"}],O=e=>l.createElement("span",{className:"cell-text"},e),I=n.useMemo(()=>[{Header:s("PT_SEARCHPROPERTY_TABEL_PID"),disableSortBy:!0,accessor:e=>O(e.propertyId||"")},{Header:s("PT_APPLICATION_NO_LABEL"),accessor:"acknowldgementNumber",disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/applicationsearch/application-details/"+t.original.propertyId},t.original.acknowldgementNumber)))}},{Header:s("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE"),disableSortBy:!0,accessor:e=>O(e.creationReason||"")},{Header:s("PT_COMMON_TABLE_COL_OWNER_NAME"),accessor:e=>{var t,n,l;return O(null!==(t=e.owners)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&null!==(l=n.additionalDetails)&&void 0!==l&&l.ownerSequence?e.owners.sort((e,t)=>e.additionalDetails.ownerSequence-t.additionalDetails.ownerSequence).map(e=>e.name).join(",")||"":e.owners.map(e=>e.name).join(",")||"")},disableSortBy:!0},{Header:s("ES_SEARCH_PROPERTY_STATUS"),accessor:e=>O(s((null==e?void 0:e.status)&&"WF_PT_"+e.status||"NA")),disableSortBy:!0},{Header:s("PT_ADDRESS_LABEL"),disableSortBy:!0,accessor:e=>{return O((null!=(t=e.address)&&t.doorNo?(null==t?void 0:t.doorNo)+", ":"")+" "+(null!=t&&t.street?(null==t?void 0:t.street)+", ":"")+(null!=t&&t.landmark?(null==t?void 0:t.landmark)+", ":"")+s(null==t?void 0:t.locality.code)+", "+s(null==t?void 0:t.city)+","+(s(null==t?void 0:t.pincode)?""+t.pincode:" ")||"");var t}}],[]),h=n.useCallback(e=>{0!==e.length&&(S("sortBy",e.id),S("sortOrder",e.desc?"DESC":"ASC"))},[]);function C(){S("offset",f("offset")-f("limit")),y(c)()}return l.createElement(l.Fragment,null,E?l.createElement(pi,{Controller:a.Controller,register:_,control:T,t:s,reset:P,previousPage:C,handleSubmit:y,tenantId:u,data:p,onSubmit:c,formState:g,setShowToast:v}):l.createElement("div",null,l.createElement(t.Header,null,s("PT_SEARCH_PROP_APP")),l.createElement(t.Card,{className:"card-search-heading"},l.createElement("span",{style:{color:"#505A5F"}},s("Provide at least one parameter to search for an application"))),l.createElement(t.SearchForm,{onSubmit:c,handleSubmit:y},l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_APPLICATION_NO_LABEL")),l.createElement(t.TextInput,{name:"acknowledgementIds",inputRef:_({})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_SEARCHPROPERTY_TABEL_PID")),l.createElement(t.TextInput,{name:"propertyIds",inputRef:_({})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_OWNER_MOBILE_NO")),l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:_({minLength:{value:10,message:s("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:s("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:s("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),l.createElement(t.CardLabelError,null,null==g||null===(o=g.errors)||void 0===o||null===(r=o.mobileNumber)||void 0===r?void 0:r.message)),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")),l.createElement(a.Controller,{control:T,name:"creationReason",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:N,optionKey:"i18nKey",t:s,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("ES_SEARCH_PROPERTY_STATUS")),l.createElement(a.Controller,{control:T,name:"status",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:A,optionKey:"i18nKey",t:s,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_FROM_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"fromDate",control:T})),l.createElement(t.SearchField,null,l.createElement("label",null,s("PT_TO_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"toDate",control:T})),l.createElement(t.SearchField,{className:"submit"},l.createElement(t.SubmitBar,{label:s("ES_COMMON_SEARCH"),submit:!0}),l.createElement("p",{style:{marginTop:"10px"},onClick:()=>{P({acknowledgementIds:"",fromDate:"",toDate:"",propertyIds:"",mobileNumber:"",status:"",creationReason:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),v(null),C()}},s("ES_COMMON_CLEAR_ALL")))),!d&&null!=p&&p.display?l.createElement(t.Card,{style:{marginTop:20}},s(p.display).split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):d||""===p?""!==p||d&&l.createElement(t.Loader,null):l.createElement(t.Table,{t:s,data:p,totalRecords:m,columns:I,getCellProps:e=>({style:{minWidth:e.column.Header===s("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){S("limit",Number(e.target.value)),y(c)()},currentPage:f("offset")/f("limit"),onNextPage:function(){S("offset",f("offset")+f("limit")),y(c)()},onPrevPage:C,pageSizeLimit:f("limit"),onSort:h,disableSort:!1,sortParams:[{id:f("sortBy"),desc:"DESC"===f("sortOrder")}]})))},vi=e=>{i.useParams();const{t:a}=o.useTranslation(),r=Digit.ULBService.getCurrentTenantId(),[u,d]=n.useState({}),[s,c]=n.useState(null),p={enabled:!!(u&&Object.keys(u).length>0)},{isLoading:m,isSuccess:v,data:{Properties:E,Count:_}={}}=Digit.Hooks.pt.usePropertySearch({tenantId:r,filters:u},p);return l.createElement(l.Fragment,null,l.createElement(mi,{t:a,isLoading:m,tenantId:r,setShowToast:c,onSubmit:function(e){var t=new Date(null==e?void 0:e.fromDate);null==t||t.setSeconds((null==t?void 0:t.getSeconds())-19800);var n=new Date(null==e?void 0:e.toDate);null==n||n.setSeconds((null==n?void 0:n.getSeconds())+86399-19800);const l={...e,...e.toDate?{toDate:null==n?void 0:n.getTime()}:{},...e.fromDate?{fromDate:null==t?void 0:t.getTime()}:{}};let o=Object.keys(l).filter(e=>l[e]).reduce((e,t)=>({...e,[t]:"object"==typeof l[t]?l[t].code:l[t]}),{});!(Object.entries(o).length>0)||o.acknowledgementIds||o.creationReason||o.fromDate||o.mobileNumber||o.propertyIds||o.status||o.toDate?!(Object.entries(o).length>0&&(o.creationReason||o.status))||o.acknowledgementIds||o.fromDate||o.mobileNumber||o.propertyIds||o.toDate?Object.entries(o).length>0&&o.fromDate&&!o.toDate||!o.fromDate&&o.toDate?c({warning:!0,label:"ERR_PROVIDE_BOTH_FORM_TO_DATE"}):d(o):c({warning:!0,label:"ERR_PROVIDE_MORE_PARAM_WITH_TYPE_STATUS"}):c({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"})},data:v&&!m?E.length>0?E:{display:"ES_COMMON_NO_DATA"}:"",count:_}),s&&l.createElement(t.Toast,{error:s.error,warning:s.warning,label:a(s.label),isDleteBtn:!0,onClose:()=>{c(null)}}))},Ei=e=>{let{tenantId:o,isLoading:r,t:u,onSubmit:d,data:s,count:c,setShowToast:p,financialYearsData:m}=e;const v=window.Digit.Utils.browser.isMobile(),[E,_]=n.useState([]),{register:T,control:y,handleSubmit:S,setValue:f,getValues:P,reset:g,formState:N}=a.useForm({defaultValues:{offset:0,limit:!v&&10,sortBy:"commencementDate",sortOrder:"DESC"}});n.useEffect(()=>{T("offset",0),T("limit",10),T("sortBy","commencementDate"),T("sortOrder","DESC")},[T]),n.useEffect(()=>{var e;m&&m["egf-master"]&&_(null===(e=m["egf-master"])||void 0===e?void 0:e.FinancialYear)},[m]);const A=[{code:"pg.citya",i18nKey:"City A"},{code:"pg.cityb",i18nKey:"City B"},{code:"pg.cityc",i18nKey:"City C"}],O=null==E?void 0:E.map(e=>({code:e.code,i18nKey:e.name})),I=e=>l.createElement("span",{className:"cell-text"},e),h=n.useMemo(()=>[{Header:u("PT_SEARCHPROPERTY_TABEL_PID"),disableSortBy:!0,accessor:e=>I(e.propertyId||"")},{Header:u("PT_APPLICATION_NO_LABEL"),accessor:"acknowldgementNumber",disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/applicationsearch/application-details/"+t.original.propertyId},t.original.acknowldgementNumber)))}},{Header:u("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE"),disableSortBy:!0,accessor:e=>I(e.creationReason||"")},{Header:u("PT_COMMON_TABLE_COL_OWNER_NAME"),accessor:e=>I(e.owners.map(e=>e.name).join(",")||""),disableSortBy:!0},{Header:u("ES_SEARCH_PROPERTY_STATUS"),accessor:e=>I(u((null==e?void 0:e.status)&&"WF_PT_"+e.status||"NA")),disableSortBy:!0},{Header:u("PT_ADDRESS_LABEL"),disableSortBy:!0,accessor:e=>{return I((null!=(t=e.address)&&t.doorNo?(null==t?void 0:t.doorNo)+", ":"")+" "+(null!=t&&t.street?(null==t?void 0:t.street)+", ":"")+(null!=t&&t.landmark?(null==t?void 0:t.landmark)+", ":"")+u(null==t?void 0:t.locality.code)+", "+u(null==t?void 0:t.city)+","+(u(null==t?void 0:t.pincode)?""+t.pincode:" ")||"");var t}}],[]),C=n.useCallback(e=>{0!==e.length&&(f("sortBy",e.id),f("sortOrder",e.desc?"DESC":"ASC"))},[]);function R(){f("offset",P("offset")-P("limit")),S(d)()}return l.createElement(l.Fragment,null,v?l.createElement(pi,{Controller:a.Controller,register:T,control:y,t:u,reset:g,previousPage:R,handleSubmit:S,tenantId:o,data:s,onSubmit:d,formState:N,setShowToast:p}):l.createElement("div",null,l.createElement(t.Header,null,u("PT_CREATE_ULB_ASSESSMENT")),l.createElement(t.SearchForm,{onSubmit:d,handleSubmit:S},l.createElement(t.SearchField,null,l.createElement("label",null,u("PT_SEARCH_TENANT_ID")),l.createElement(a.Controller,{control:y,name:"creationReason",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:A,optionKey:"i18nKey",t:u,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,u("ES_SEARCH_FINANCIAL_YEAR")),l.createElement(a.Controller,{control:y,name:"status",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:O,optionKey:"i18nKey",t:u,disable:!1})})),l.createElement(t.SearchField,{className:"submit"},l.createElement(t.SubmitBar,{label:u("ES_COMMON_SEARCH"),submit:!0}),l.createElement("p",{style:{marginTop:"10px"},onClick:()=>{g({acknowledgementIds:"",fromDate:"",toDate:"",propertyIds:"",mobileNumber:"",status:"",creationReason:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),p(null),R()}},u("ES_COMMON_CLEAR_ALL")))),!r&&null!=s&&s.display?l.createElement(t.Card,{style:{marginTop:20}},u(s.display).split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):r||""===s?""!==s||r&&l.createElement(t.Loader,null):l.createElement(t.Table,{t:u,data:s,totalRecords:c,columns:h,getCellProps:e=>({style:{minWidth:e.column.Header===u("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){f("limit",Number(e.target.value)),S(d)()},currentPage:P("offset")/P("limit"),onNextPage:function(){f("offset",P("offset")+P("limit")),S(d)()},onPrevPage:R,pageSizeLimit:P("limit"),onSort:C,disableSort:!1,sortParams:[{id:P("sortBy"),desc:"DESC"===P("sortOrder")}]})))},_i=e=>{i.useParams();const{t:a}=o.useTranslation(),r=Digit.ULBService.getCurrentTenantId(),[u,d]=n.useState({}),[s,c]=n.useState(null),{isLoading:p,isSuccess:m,count:v,mutate:E}=Digit.Hooks.pt.UseAssessmentCreateUlb("pg.citya"),{data:_}=Digit.Hooks.pt.useMDMS(r,"pt","FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}});return console.log("mutate",E),l.createElement(l.Fragment,null,l.createElement(Ei,{t:a,isLoading:p,tenantId:r,setShowToast:c,onSubmit:function(e){var t,n,l,o;console.log("data",e);let i={tenantId:null==e||null===(t=e.creationReason)||void 0===t?void 0:t.code,assessmentYear:null==e||null===(n=e.status)||void 0===n?void 0:n.code};d(i),E({assessmentYear:null==e||null===(l=e.status)||void 0===l?void 0:l.code,tenantId:null==e||null===(o=e.creationReason)||void 0===o?void 0:o.code},{onError:(e,t)=>{var n,l,o,i,a,r;console.log("error:123 ",e),c({key:"error",action:(null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.message)||e.message,error:{message:(null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors[0])||void 0===r?void 0:r.code)||e.message}}),setTimeout(closeToast,5e3)},onSuccess:(e,t)=>{var n,l,o;sessionStorage.setItem("IsPTAccessDone",null==e||null===(n=e.Assessments)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.auditDetails)||void 0===o?void 0:o.lastModifiedTime),console.log("success",e)}})},data:m&&!p?searchReult.length>0?searchReult:{display:"ES_COMMON_NO_DATA"}:"",count:v,financialYearsData:_}),s&&l.createElement(t.Toast,{error:s.error,warning:s.warning,label:a(s.label),isDleteBtn:!0,onClose:()=>{c(null)}}))},Ti=e=>{var n,a,r,u,s,c,p,m,v,E,_,T,y,S,f,P;let{path:g,url:N,userType:A}=e;const{t:O}=o.useTranslation(),I=i.useLocation();sessionStorage.removeItem("revalidateddone");const h=window.Digit.Utils.browser.isMobile(),C={searchParams:{uuid:{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"},services:["PT.CREATE","PT.MUTATION","PT.UPDATE"],applicationStatus:[],locality:[]}},R=[{combineTaxDueInSearchData:function(e,t,n){try{function l(){return n(t)}let t;const o=Digit.ULBService.getCurrentTenantId();let i=["PT"].join(),a=e.map(e=>e.propertyId).join();const r=Ee(function(){return Promise.resolve(Digit.PaymentService.fetchBill(o,{consumerCode:a,businessService:i})).then(function(n){let l={};n.Bill.forEach(e=>{l[e.consumerCode]=e.totalAmount}),t=e.map(e=>({...e,due_tax:l[e.propertyId]||0}))})},function(n){var l,o;const i=null==n||null===(l=n.response)||void 0===l?void 0:l.data;["EG_BS_BILL_NO_DEMANDS_FOUND","EMPTY_DEMANDS"].includes(null==i||null===(o=i.Errors)||void 0===o?void 0:o[0].code)&&(t=e.map(e=>({...e,due_tax:0})))});return Promise.resolve(r&&r.then?r.then(l):l())}catch(e){return Promise.reject(e)}}}],b=e=>{let{location:n}=e;const{t:a}=o.useTranslation(),r=i.useLocation().search,u=new URLSearchParams(r).get("from")||null,{from:d}=Digit.Hooks.useQueryParams(),s=[{path:"/digit-ui/employee",content:a("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/pt/inbox",content:a("ES_TITLE_INBOX"),show:!!n.pathname.includes("pt/inbox")},{path:"/digit-ui/employee/pt/search",content:a("PT_COMMON_SEARCH_PROPERTY_SUB_HEADER"),show:!(!n.pathname.includes("/pt/search")&&!n.pathname.includes("/pt/ptsearch"))},{path:"digit-ui/employee/pt/property-mutate-docs-required",content:a("PT_REQIURED_DOC_TRANSFER_OWNERSHIP"),show:!!n.pathname.includes("pt/property-mutate-docs-required")},{path:"/digit-ui/employee/pt/property-mutate/",content:a("ES_TITLE_MUTATE_PROPERTY"),show:!!n.pathname.includes("pt/property-mutate/")},{path:"/digit-ui/employee/pt/modify-application/",content:a("PT_UPDATE_PROPERTY"),show:!!n.pathname.includes("pt/modify-application")},{path:"/digit-ui/employee/pt/application-search",content:a("ES_COMMON_APPLICATION_SEARCH"),show:!(!n.pathname.includes("/pt/application-search")&&!n.pathname.includes("/pt/applicationsearch/application-details/"))},{path:"/digit-ui/employee/pt/ulb-assesment",content:a("ES_COMMON_ULB_ASSESSMENT"),show:!(!n.pathname.includes("/pt/ulb-assesment")&&!n.pathname.includes("/pt/ulb-assesment"))},{path:"/digit-ui/employee/pt/ptsearch/property-details/"+sessionStorage.getItem("propertyIdinPropertyDetail"),content:u||d?a(u||d)+" / "+a("PT_PROPERTY_INFORMATION"):a("PT_PROPERTY_INFORMATION"),show:!!(n.pathname.includes("/pt/ptsearch/property-details/")||n.pathname.includes("/pt/ptsearch/payment-details/")||n.pathname.includes("/pt/ptsearch/assessment-details/")),isBack:u&&!0},{path:"/digit-ui/employee/pt/property-details/"+sessionStorage.getItem("propertyIdinPropertyDetail")+"?"+(d?"from="+d:""),content:u||d?a(u||d)+" / "+a("PT_PROPERTY_INFORMATION"):a("PT_PROPERTY_INFORMATION"),show:!(!n.pathname.includes("/pt/property-details/")&&!n.pathname.includes("/pt/payment-details/")),isBack:!0},{path:"/digit-ui/employee/pt/applicationsearch/application-details/"+sessionStorage.getItem("applicationNoinAppDetails"),content:a("PT_APPLICATION_TITLE"),show:!(!n.pathname.includes("/pt/application-details/")&&!n.pathname.includes("/pt/applicationsearch/application-details/"))},{path:"/digit-ui/employee/pt/payment-details/",content:u?a(u)+" / "+a("PT_PAYMENT_HISTORY")+" ":a("PT_PAYMENT_HISTORY"),show:!(!n.pathname.includes("/pt/ptsearch/payment-details")&&!n.pathname.includes("/pt/payment-details")),isBack:u&&!0},{path:"/digit-ui/employee/pt/assessment-details/",content:a("PT_ASSESS_PROPERTY"),show:!!n.pathname.includes("pt/ptsearch/assessment-details")}];return l.createElement(t.BreadCrumb,{style:h?{display:"flex"}:{},spanStyle:{maxWidth:"min-content"},crumbs:s})},D=null===(n=Digit)||void 0===n||null===(a=n.ComponentRegistryService)||void 0===a?void 0:a.getComponent("PTNewApplication"),L=null===(r=Digit)||void 0===r||null===(u=r.ComponentRegistryService)||void 0===u?void 0:u.getComponent("ApplicationDetails"),M=null===(s=Digit)||void 0===s||null===(c=s.ComponentRegistryService)||void 0===c?void 0:c.getComponent("PTPropertyDetails"),w=null===(p=Digit)||void 0===p||null===(m=p.ComponentRegistryService)||void 0===m?void 0:m.getComponent("PTAssessmentDetails"),x=null===(v=Digit)||void 0===v||null===(E=v.ComponentRegistryService)||void 0===E?void 0:E.getComponent("PTEditApplication"),U=null===(_=Digit)||void 0===_||null===(T=_.ComponentRegistryService)||void 0===T?void 0:T.getComponent("PTResponse"),F=null===(y=Digit)||void 0===y||null===(S=y.ComponentRegistryService)||void 0===S?void 0:S.getComponent("PTTransferOwnership"),B=null===(f=Digit)||void 0===f||null===(P=f.ComponentRegistryService)||void 0===P?void 0:P.getComponent("PTDocsRequired"),k=window.location.href.includes("pt/response"),H=(window.location.href.includes("pt")||window.location.href.includes("application"),window.location.href.includes("new-application")||window.location.href.includes("modify-application")||window.location.href.includes("pt/application-details"));return l.createElement(i.Switch,null,l.createElement(l.Fragment,null,l.createElement("div",{className:"ground-container"},k?null:l.createElement("div",{style:H?{marginLeft:"12px"}:{marginLeft:"-4px"}},l.createElement(b,{location:I})),l.createElement(t.PrivateRoute,{exact:!0,path:g+"/",component:()=>l.createElement(_a,{matchPath:g,userType:A})}),l.createElement(t.PrivateRoute,{path:g+"/inbox",component:()=>l.createElement(ai,{useNewInboxAPI:!0,parentRoute:g,businessService:"PT",filterComponent:"PT_INBOX_FILTER",initialStates:C,isInbox:!0})}),l.createElement(t.PrivateRoute,{path:g+"/new-application",component:()=>l.createElement(D,{parentUrl:N})}),l.createElement(t.PrivateRoute,{path:g+"/application-details/:id",component:()=>l.createElement(L,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/property-details/:id",component:()=>l.createElement(M,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/applicationsearch/application-details/:id",component:()=>l.createElement(L,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/ptsearch/property-details/:id",component:()=>l.createElement(M,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/payment-details/:id",component:()=>l.createElement(si,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/ptsearch/payment-details/:id",component:()=>l.createElement(si,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/assessment-details/:id",component:()=>l.createElement(w,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/ptsearch/assessment-details/:id",component:()=>l.createElement(w,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/modify-application/:id",component:()=>l.createElement(x,null)}),l.createElement(t.PrivateRoute,{path:g+"/response",component:e=>l.createElement(U,d({},e,{parentRoute:g}))}),l.createElement(t.PrivateRoute,{path:g+"/property-mutate/:id",component:()=>l.createElement(F,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/property-mutate-docs-required/:id",component:()=>l.createElement(B,{parentRoute:g})}),l.createElement(t.PrivateRoute,{path:g+"/search",component:e=>l.createElement(tt,d({},e,{t:O,parentRoute:g}))}),l.createElement(t.PrivateRoute,{path:g+"/searchold",component:()=>l.createElement(ai,{parentRoute:g,businessService:"PT",middlewareSearch:R,initialStates:C,isInbox:!1,EmptyResultInboxComp:"PTEmptyResultInbox"})}),l.createElement(t.PrivateRoute,{path:g+"/application-search",component:e=>l.createElement(vi,d({},e,{parentRoute:g}))}),l.createElement(t.PrivateRoute,{path:g+"/ulb-assesment",component:e=>l.createElement(_i,d({},e,{parentRoute:g}))}))))},yi=e=>{var n;let{status:i,searchParams:a,onAssignmentChange:r,statusMap:u}=e;return o.useTranslation(),l.createElement(t.CheckBox,{styles:{height:"unset"},onChange:e=>r({...e,state:i.state},i),checked:null==a?void 0:a.applicationStatus.some(e=>e.uuid===i.uuid),label:i.name+" ("+((null==u||null===(n=u.find(e=>e.statusid===i.uuid))||void 0===n?void 0:n.count)||"-")+")"})},Si=e=>{var i,a,r,u,d;let{onAssignmentChange:s,searchParams:c,businessServices:p,statusMap:m}=e;const{t:v}=o.useTranslation(),[E,_]=n.useState(!1),{data:T,isLoading:y}=Digit.Hooks.useApplicationStatusGeneral({businessServices:p},{}),{userRoleStates:S}=T||{},f={"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"},P=(e,t)=>t(f[e.stateBusinessService])+" - "+t("ES_PT_COMMON_STATUS_"+(e.state||"CREATED"));return y?l.createElement(t.Loader,null):null!=S&&S.filter(e=>!e.isTerminateState).length?l.createElement("div",{className:"status-container"},l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},v("ES_INBOX_STATUS")),null==S||null===(i=S.filter(e=>!e.isTerminateState))||void 0===i||null===(a=i.slice(0,4))||void 0===a?void 0:a.map((e,t)=>l.createElement(yi,{businessServices:p,key:t,onAssignmentChange:s,status:{name:P(e,v),code:e.applicationStatus,...e},searchParams:c,statusMap:m})),(null==S||null===(r=S.filter(e=>!e.isTerminateState))||void 0===r?void 0:r.slice(4).length)>0?l.createElement(l.Fragment,null,E&&(null==S||null===(u=S.filter(e=>!e.isTerminateState))||void 0===u||null===(d=u.slice(4))||void 0===d?void 0:d.map((e,t)=>l.createElement(yi,{businessServices:p,key:e.uuid,onAssignmentChange:s,status:{name:P(e,v),code:e.applicationStatus,...e},searchParams:c,statusMap:m}))),l.createElement("div",{className:"filter-button",onClick:()=>_(!E)}," ",v(E?"ES_COMMON_LESS":"ES_COMMON_MORE")," ")):null):null},fi=e=>{var i;let{searchParams:a,onFilterChange:u,defaultSearchParams:d,statusMap:s,moduleCode:c,...p}=e;const{t:m}=o.useTranslation(),v=r.useQueryClient(),[E,_]=n.useState(()=>({...a,services:[]})),T=[{label:"ES_PT_NEW_PROPERTY",value:"PT.CREATE"},{label:"ES_PT_TRANSFER_OWNERSHIP",value:"PT.MUTATION"},{label:"ES_PT_UPDATE_PROPERTY",value:"PT.UPDATE"}],y=e=>{let t=e.delete,n={...E,...e};t&&t.forEach(e=>delete n[e]),delete e.delete,_({...n})},S=()=>{_({...d,services:[]}),u({...d})},f=Digit.ULBService.getCurrentTenantId();return l.createElement(l.Fragment,null,l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading",style:{alignItems:"center"}},l.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},l.createElement("span",null,l.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),l.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},m("ES_COMMON_FILTER_BY"),":")),l.createElement("div",{className:"clearAll",onClick:S},m("ES_COMMON_CLEAR_ALL")),"desktop"===p.type&&l.createElement("span",{className:"clear-search",onClick:S,style:{border:"1px solid #e0e0e0",padding:"6px"}},l.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===p.type&&l.createElement("span",{onClick:p.onClose},l.createElement(t.CloseSvg,null))),l.createElement("div",null,l.createElement(t.RadioButtons,{onSelect:e=>y({uuid:e}),selectedOption:null==E?void 0:E.uuid,t:m,optionsKey:"name",options:[{code:"ASSIGNED_TO_ME",name:"ES_INBOX_ASSIGNED_TO_ME"},{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"}]}),l.createElement("div",null,l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},m("ES_INBOX_LOCALITY"),":"),l.createElement(t.Localities,{selectLocality:e=>{y({locality:[...(null==E?void 0:E.locality)||[],e]})},tenantId:f,boundaryType:"revenue"}),l.createElement("div",{className:"tag-container"},null==E||null===(i=E.locality)||void 0===i?void 0:i.map((e,n)=>l.createElement(t.RemoveableTag,{key:n,text:m(e.i18nkey),onClick:()=>{y({locality:null==E?void 0:E.locality.filter(t=>t.code!==e.code)})}})))),l.createElement("div",null,l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},m("ES_PT_APP_TYPE")),T.map((e,n)=>{var o;const i=null==E||null===(o=E.services)||void 0===o?void 0:o.includes(e.value);return l.createElement(t.CheckBox,{key:n+"service",label:m(e.label),value:e.label,checked:i,onChange:t=>((e,t)=>{var n;y(e.target.checked?{services:Array.isArray(E.services)?[...E.services,t]:[t]}:{services:E.services.filter(e=>e!==t),applicationStatus:null===(n=E.applicationStatus)||void 0===n?void 0:n.filter(e=>e.stateBusinessService!==t)})})(t,e.value)})})),l.createElement("div",null,l.createElement(Si,{searchParams:E,businessServices:E.services,statusMap:s||v.getQueryData("INBOX_STATUS_MAP_"+c),moduleCode:c,onAssignmentChange:(e,t)=>{if(e.target.checked)y({applicationStatus:[...null==E?void 0:E.applicationStatus,t]});else{let e=null==E?void 0:E.applicationStatus.filter(e=>e.state!==t.state);y({applicationStatus:e})}}})),l.createElement("div",null,l.createElement(t.SubmitBar,{onSubmit:()=>{u(0===E.services.length?{...E,services:T.map(e=>e.value)}:E)},label:m("ES_COMMON_APPLY")}))))))},Pi=e=>l.createElement("span",{className:"cell-text"},e),gi=e=>isNaN(e)?l.createElement("span",{className:"sla-cell-success"},"0"):l.createElement("span",e<0?{className:"sla-cell-error"}:{className:"sla-cell-success"},e),Ni=e=>l.createElement("span",{className:"sla-cell"},e);function Ai(e){let{documents:n,svgStyles:i={},isSendBackFlow:a=!1,isHrLine:r=!1,titleStyles:u}=e;const{t:d}=o.useTranslation(),s=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!s&&(null==n?void 0:n.map((e,o)=>{var i;return l.createElement(l.Fragment,{key:o},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:u||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,n)=>{var o;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto",minWidth:"100px"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},d(null==e?void 0:e.title)),a?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),r&&(null==n?void 0:n.length)!=o+1?l.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),s&&(null==n?void 0:n.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=i&&i.minWidth?null==i?void 0:i.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},d(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+d(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center",color:"#505A5F"}},""+d(null==e?void 0:e.title))))):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}const Oi=e=>{var t,o;let{t:i,formData:a,applicationData:r,docs:u,bpaActionsDetails:d}=e;const s=(null==r?void 0:r.status)||"",c=(null==d||null===(t=d.data)||void 0===t?void 0:t.nextActions)||[],p=Digit.ULBService.getStateId(),[m,v]=n.useState((null==a||null===(o=a.documents)||void 0===o?void 0:o.documents)||[]),[E,_]=n.useState(null),[T,y]=n.useState([]),[S,f]=n.useState(!0),[P,g]=n.useState(!1),[N,A]=n.useState(!1),{isLoading:O,data:I}=Digit.Hooks.obps.useMDMS(p,"BPA",["DocTypeMapping"]),{isLoading:h,data:C}=Digit.Hooks.obps.useMDMS(p,"common-masters",["DocumentType"]);return n.useEffect(()=>{var e,t,n,l;let o=[];var i,a;null!=I&&null!==(e=I.BPA)&&void 0!==e&&e.DocTypeMapping&&(o=null==I||null===(i=I.BPA)||void 0===i||null===(a=i.DocTypeMapping)||void 0===a?void 0:a.filter(e=>{var t,n;return e.WFState==(null==r?void 0:r.status)?null==r?void 0:r.status:e.RiskType==(null==r?void 0:r.riskType)&&e.ServiceType==(null==r||null===(t=r.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==r||null===(n=r.additionalDetails)||void 0===n?void 0:n.applicationType)}));let d=[];null===(t=o)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.docTypes)||void 0===l||l.forEach(e=>{var t,n,l,o;let i=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==C||null===(t=C["common-masters"])||void 0===t||null===(n=t.DocumentType)||void 0===n||n.forEach(t=>{let n=t.code.slice(0,i.length);i===n&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(o=l.values)||void 0===o||o.map(t=>{var n,l;i===(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==t||null===(l=t.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),d.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(d)),y(d)},[!O,!h]),n.useEffect(()=>{let e=0;T.map(t=>{let n=!1;m.map(e=>{t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(n=!0)}),!n&&t.required&&(e+=1)}),f("0"!=e&&0!=e||!(m.length>0))},[m,P]),n.useEffect(()=>{A("DOC_VERIFICATION_INPROGRESS"===s&&(null==c?void 0:c.length)>0)},[r,d]),l.createElement("div",null,null==T?void 0:T.map((e,t)=>l.createElement("div",null,l.createElement(Ii,{key:t,index:t,document:e,t:i,error:E,setError:_,setDocuments:v,documents:m,setCheckRequiredFields:g,applicationStatus:s,actions:c,bpaTaxDocuments:T,checkEnablingDocs:N}))))};function Ii(e){var o,i;let{t:a,document:r,setDocuments:u,documents:d,index:s,bpaTaxDocuments:c,checkEnablingDocs:p}=e;const m=null==d?void 0:d.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==r?void 0:r.code)})[0],v=Digit.ULBService.getStateId(),[E,_]=n.useState(m?{...m,active:!0,code:null==m?void 0:m.documentType,i18nKey:null==m?void 0:m.documentType}:1===(null==r||null===(o=r.dropdownData)||void 0===o?void 0:o.length)?null==r?void 0:r.dropdownData[0]:{}),[T,y]=n.useState(null),[S,f]=n.useState(()=>(null==m?void 0:m.fileStoreId)||null),[P,g]=n.useState([]);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{var t;const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==S?void 0:S.length)||null===S?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==S),{documentType:null==E?void 0:E.code,fileStoreId:S,documentUid:S,fileName:(null==T?void 0:T.name)||"",id:d?null===(t=d.find(e=>e.documentType===(null==E?void 0:E.code)))||void 0===t?void 0:t.id:void 0}]})},[S,E]),n.useEffect(()=>{try{P.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),r.newUploadedDocs=[],P.map(e=>{var t,n,l;null!=E&&E.code&&r.newUploadedDocs.push({documentType:null==E?void 0:E.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),c[s]=r,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)))}catch(e){Promise.reject(e)}},[P,E]),n.useEffect(()=>{},[T]),l.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+a(null==r?void 0:r.code)),(null==r||null===(i=r.uploadedDocuments)||void 0===i?void 0:i.length)&&l.createElement(Ai,{documents:null==r?void 0:r.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),p?l.createElement("div",{style:{marginTop:"20px"}},l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=r&&r.required?a(null==r?void 0:r.code)+"* ":""+a(null==r?void 0:r.code)),l.createElement(t.Dropdown,{className:"form-field",t:a,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>_(e),style:{width:"100%"}})),l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:v,getFormState:e=>((e,t)=>{let n=Object.fromEntries(t),l=Object.values(n);0!==Object.keys(n).length&&g(l),function(e){e&&y(e.file)}(l[l.length-1])})(0,e),t:a,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function hi(e){let{fiReport:n,isCitizen:i=!1}=e;const{t:a}=o.useTranslation();return l.createElement(l.Fragment,null,l.createElement("div",{style:{marginTop:"10px"}},l.createElement(i?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+a("BPA_FI_REPORT")),n.map((e,o)=>{var i,r,u,d,s,c;return l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},l.createElement(t.StatusTable,null,l.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+a("BPA_FI_REPORT"):a("BPA_FI_REPORT")+" - "+(o+1)),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(i=e.date)||void 0===i?void 0:i.split("-")[2])+"/"+(null===(r=e.date)||void 0===r?void 0:r.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(d=e.questions)||void 0===d?void 0:d.length)&&(null==e||null===(s=e.questions)||void 0===s?void 0:s.map(e=>l.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},l.createElement(t.Row,{className:"border-none",label:""+a(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"})))),l.createElement(Ai,{documents:(c=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==c?void 0:c.map(e=>{var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function Ci(e){let{t:o,document:i,setNocDocuments:a,setError:r,nocDocuments:u}=e;const d=null==u?void 0:u.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==i?void 0:i.code)})[0],s=Digit.ULBService.getStateId(),[c,p]=n.useState(),[m,v]=n.useState(null),[E,_]=n.useState(()=>(null==d?void 0:d.fileStoreId)||null);return n.useEffect(()=>{var e,t;null!=i&&null!==(e=i.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&a(e=>{var t;const n=null==e?void 0:e.filter(e=>{var t,n;return(null==e?void 0:e.documentType)!==(null==i||null===(t=i.dropdownData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.code)});return 0===(null==E?void 0:E.length)||null===E?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==E),{documentType:null==i||null===(t=i.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:E,documentUid:E,fileName:(null==m?void 0:m.name)||""}]})},[E]),n.useEffect(()=>{!function(){try{r(null);const e=function(){if(m){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(m.size>=5242880)r(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=m&&m.type&&!e.test(null==m?void 0:m.type))r(o("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ee(function(){return _(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",m,Digit.ULBService.getStateId())).then(function(e){var t,n,l,i;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?_(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):r(o("CS_FILE_UPLOAD_ERROR"))})},function(){r(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[m]),l.createElement("div",{style:{}},l.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},l.createElement(t.CardLabel,{style:{width:"100%"}},null!=i&&i.required?o("TL_BUTTON_UPLOAD FILE")+"*":""+o("TL_BUTTON_UPLOAD FILE")),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:s,getFormState:e=>(e=>{let t=Object.fromEntries(e),n=Object.values(t);!function(e){e&&v(e.file)}(n[n.length-1])})(e),t:o,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}const Ri=e=>{var o;let{t:i,noc:a,docs:r,isNoc:u,applicationData:d,NOCdata:s,bpaActionsDetails:c}=e;Digit.ULBService.getStateId();const p=Digit.ULBService.getStateId(),m=(null==d?void 0:d.status)||"",v=(null==c||null===(o=c.data)||void 0===o?void 0:o.nextActions)||[],{data:E}=Digit.Hooks.obps.useMDMS(p,"NOC",["DocumentTypeMapping"],{enabled:u}),{data:_}=Digit.Hooks.obps.useMDMS(p,"BPA",["DocTypeMapping"],{enabled:!u}),{data:T}=Digit.Hooks.obps.useMDMS(p,"common-masters",["DocumentType"]),[y,S]=n.useState([]),[f,P]=n.useState([]),[g,N]=n.useState(!1),[A,O]=Digit.Hooks.useSessionStorage(null==a?void 0:a.nocType,[]),[I,h]=n.useState(null),C=window.location.href.includes("/employee/");return n.useEffect(()=>{var e;S(null==T||null===(e=T["common-masters"])||void 0===e?void 0:e.DocumentType)},[T]),n.useEffect(()=>{var e,t,n;let l,o=[];var i,r,s,c;l=u?null==E||null===(i=E.NOC)||void 0===i||null===(r=i.DocumentTypeMapping)||void 0===r?void 0:r.filter(e=>(null==e?void 0:e.applicationType)===(null==a?void 0:a.applicationType)&&(null==e?void 0:e.nocType)===(null==a?void 0:a.nocType)):null==_||null===(s=_.BPA)||void 0===s||null===(c=s.DocTypeMapping)||void 0===c?void 0:c.filter(e=>{var t,n;return e.WFState==(null==d?void 0:d.status)&&e.RiskType==(null==d?void 0:d.riskType)&&e.ServiceType==(null==d||null===(t=d.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==d||null===(n=d.additionalDetails)||void 0===n?void 0:n.applicationType)}),null!==(e=l)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(n=t.docTypes)&&void 0!==n&&n[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==a?void 0:a.additionalDetails,applicationStatus:null==a?void 0:a.applicationStatus,appNumberLink:null==a?void 0:a.applicationNo,nocNo:null==a?void 0:a.nocNo},o.push(l[0].docTypes[0]));let p=[];o&&o.length>0&&(o.map(e=>{let t=e.documentType;e.dropdownData=[],null==y||y.forEach(n=>{let l=n.code.slice(0,null==t?void 0:t.length);t===l&&(e.hasDropdown=!0,e.dropdownData.push(n))}),p.push(e)}),P(p))},[E,y]),n.useEffect(()=>{N("NOC_VERIFICATION_INPROGRESS"===m&&(null==v?void 0:v.length)>0)},[d,c]),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:C?""+i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"):i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),s&&s.map((e,n)=>{if(null!=e&&e.value)return l.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:C?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:C?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),l.createElement(Ai,{documents:r,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),g&&(null==f?void 0:f.map((e,t)=>l.createElement(Ci,{key:t,document:e,t:i,error:I,setError:h,setNocDocuments:O,nocDocuments:A,checkEnablingDocs:g}))))},bi=e=>{let{permissions:o,t:i}=e;const[a,r,u]=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==o?void 0:o.map(e=>({label:e,checked:!1}))),[d,s,c]=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]);n.useEffect(()=>()=>{Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")},[]);const p=window.Digit.Utils.browser.isMobile();return l.createElement("div",null,l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},i("BPA_PERMIT_CONDITIONS")),null==a?void 0:a.map((e,n)=>l.createElement(t.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:p?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:e=>((e,t,n)=>{const l=e.target.checked;r(()=>null==a?void 0:a.map((e,t)=>n===t?{...e,checked:l}:e))})(e,0,n),isLabelFirst:!0,index:n})),null==d?void 0:d.map((e,n)=>l.createElement("div",null,l.createElement(t.TextInput,{key:n,value:null==e?void 0:e.label,onChange:e=>((e,t)=>{s(()=>null==d?void 0:d.map((n,l)=>{var o;return t===l?{label:null==e||null===(o=e.target)||void 0===o?void 0:o.value}:n}))})(e,n),textInputStyle:{maxWidth:p?"96%":"830px",width:p?"96%":"830px"},style:p?{paddingRight:"10%"}:{},placeholder:i("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),l.createElement(t.LinkButton,{label:l.createElement("div",null,l.createElement("span",null,l.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:p?"5%":"35%"}}))),style:{},onClick:e=>(e=>{const t=[...d];t.splice(e,1),s([...t])})(n)}))),l.createElement(t.LinkButton,{style:{color:"#a82227",maxWidth:p?"fit-content":"10%",marginRight:"3%"},label:i("BPA_ADD_MORE"),onClick:()=>{s([...d,{label:""}])}}))};function Di(e){let{documents:i,svgStyles:a={},isSendBackFlow:r=!1}=e;const{t:u}=o.useTranslation(),[d,s]=n.useState(()=>[]),[c,p]=(Digit.ULBService.getCurrentTenantId(),n.useState({}));n.useEffect(()=>{var e;let t=[];null==i||i.forEach((e,n,l)=>{t=[...t,...e.values?e.values:[]]}),s(null===(e=t)||void 0===e?void 0:e.map(e=>null==e?void 0:e.fileStoreId))},[i]),n.useEffect(()=>{var e;null!=d&&d.length&&"BillAmend"===(null==i||null===(e=i[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(d,Digit.ULBService.getCurrentTenantId()).then(e=>{p(null==e?void 0:e.data)}):null!=d&&d.length&&Digit.UploadServices.Filefetch(d,Digit.ULBService.getStateId()).then(e=>{p(null==e?void 0:e.data)})},[d]);const m=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),v=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!v&&(null==i?void 0:i.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:m?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o,i;return l.createElement("a",{target:"_",href:null===(o=c[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:m?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},u(null==e?void 0:e.title)),r?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),v&&(null==i?void 0:i.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement("a",{target:"_",href:null===(o=c[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},u(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+u(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+u(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function Li(e){let{taxHeadEstimatesCalculation:n}=e;const{taxHeadEstimates:i}=n,{t:a}=o.useTranslation();return l.createElement("div",{style:{marginTop:"40px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:a("ES_PT_TITLE_TAX_HEADS"),text:a("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==i?void 0:i.map((e,n)=>l.createElement(t.Row,{key:a(e.taxHeadCode),label:a(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==i?void 0:i.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),l.createElement(t.Row,{label:a("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function Mi(e){let{floors:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map(e=>{var n;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},i(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},i(e.title)),l.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function wi(e){let{owners:n}=e,i={};i=window.location.href.includes("/employee/pt/")?n.slice().reverse():n;const{t:a}=o.useTranslation(),r=(null==n?void 0:n.length)||1;let u={marginTop:"19px"},d={position:"relative",padding:"8px"},s={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(r)>1?u={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(r)>1||(u={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},d={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(u={...u,maxWidth:"950px"},u={...u,maxWidth:"950px"},s={}),n.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}),l.createElement(l.Fragment,null,l.createElement("div",{className:"owner-details"},i.map((e,n)=>{var o;return l.createElement("div",{key:a(null==e?void 0:e.title),style:u,className:"owner-details-child"},l.createElement(t.CardSubHeader,{style:Number(r)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(r)>1?a(null==e?void 0:e.title)+" "+(n+1):a(null==e?void 0:e.title)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:d},l.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return!0===e.map&&"N/A"!==e.value?l.createElement(t.Row,{key:a(e.title),label:a(e.title),text:l.createElement("img",{src:a(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):l.createElement("span",null,l.createElement(t.Row,{key:a(e.title),label:""+a(e.title),text:a(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:s}))}))))})))}const xi=e=>{var i,a,r;let{scrutinyDetails:u,paymentsList:d=[]}=e;const{t:s}=o.useTranslation(),c=e=>null!=e&&e.value&&null!=e&&e.isTransLate?l.createElement("span",{style:{color:"#00703C"}},s(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?s(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void s("NA");return l.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement("div",null,null==u||null===(i=u.values)||void 0===i?void 0:i.map((e,n)=>null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?c(e)+" "+s(null==e?void 0:e.isUnit):s("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+s(""+e.title),text:c(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},s(null==e?void 0:e.title)):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},s(null==e?void 0:e.title))),null==u||null===(a=u.permit)||void 0===a?void 0:a.map((e,n)=>l.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title))),l.createElement("div",null,null==u||null===(r=u.scruntinyDetails)||void 0===r?void 0:r.map((e,o)=>l.createElement(n.Fragment,null,l.createElement(t.Row,{className:"border-none",label:""+s(null==e?void 0:e.title),labelStyle:{width:"150%"}}),l.createElement("a",{href:null==e?void 0:e.value}," ",l.createElement(t.PDFSvg,null)," "),l.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},s(null==e?void 0:e.text))))))))},Ui=e=>{var i,a,r,u,d;let{edcrDetails:s,applicationData:c}=e;const{t:p}=o.useTranslation(),m=window.Digit.Utils.browser.isMobile(),v=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],E=e=>{const t=e;return(e,n,l)=>e[t]},_=n.useMemo(()=>v.map(e=>({Header:p(""+e.name),accessor:E(e.id),id:e.id})));function T(e){var t;let n=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(e=>{var t,l,o,i,a,r,u,d;n.push({Floor:p("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:p(""+(null===(t=e.occupancies)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.type)),BuildupArea:null===(o=e.occupancies)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:p("BPA_FLOOR_NAME_"+e.number)})}),n}function y(e){var t;let n=null==c||null===(t=c.landInfo)||void 0===t?void 0:t.unit,l="";if((null==n?void 0:n.length)>0){var o,i;let t=null===(o=n[e])||void 0===o||null===(i=o.usageCategory)||void 0===i?void 0:i.split(",");null!=t&&t.length&&(l=t.map(e=>e?""+p("BPA_SUBOCCUPANCYTYPE_"+function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA").join(", "))}return l||"NA"}return l.createElement(n.Fragment,null,l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},l.createElement(t.StatusTable,null,null==s||null===(i=s.values)||void 0===i?void 0:i.map((e,n)=>null!=e&&e.isHeader?l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},p(null==e?void 0:e.title)):l.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+p(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),null==s||null===(a=s.subOccupancyTableDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.value)||void 0===u||null===(d=u.planDetail)||void 0===d?void 0:d.blocks.map((e,n)=>{var o,i,a,r,u;return l.createElement("div",{key:n,style:(null==s||null===(o=s.subOccupancyTableDetails)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.value)||void 0===a||null===(r=a.planDetail)||void 0===r||null===(u=r.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},p("BPA_BLOCK_SUBHEADER")," ",n+1),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+p("BPA_SUB_OCCUPANCY_LABEL"),text:y(n)})),l.createElement("div",{style:window.location.href.includes("citizen")||m?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},l.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:p,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:T(e),columns:_,getCellProps:e=>({style:{}})})))})))},Fi=e=>{let{headComment:t,otherComment:n}=e;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,t),l.createElement("p",null,n))},Bi=e=>{var n,i,a;let{data:r,OpenImage:u,privacy:d={}}=e;const{t:s}=o.useTranslation();return l.createElement("div",null,r.date&&l.createElement("p",null,r.date),l.createElement("p",null,r.name),r.mobileNumber&&l.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},l.createElement(t.TelePhone,{mobile:r.mobileNumber,privacy:d}),l.createElement("p",null,"    ")),r.source&&l.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&l.createElement(Fi,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?l.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("WF_COMMON_COMMENTS")),l.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,t)=>{u(e,t,null==r?void 0:r.thumbnailsToShow)}})):null)};function ki(e){let{units:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map((e,n)=>{var o;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function Hi(e){let{units:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map((e,n)=>{var o;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"NA",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}const Yi=e=>{var i,a,r,u;let{wsAdditionalDetails:d}=e;const{t:s}=o.useTranslation();let c=(p=location.search)?(/^[?#]/.test(p)?p.slice(1):p).split("&").reduce((e,t)=>{let[n,l]=t.split("=");return e[n]=l?decodeURIComponent(l.replace(/\+/g," ")):"",e},{}):{};var p;const m=null==c?void 0:c.mode;var{connectionDetails:v,plumberDetails:E,roadCuttingDetails:_,activationDetails:T}=(null==d?void 0:d.additionalDetails)||{connectionDetails:[],plumberDetails:[]};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==d||null===(i=d.additionalDetails)||void 0===i?void 0:i.connectionDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),l.createElement("div",null,l.createElement("div",{className:"connection-details-new-value-wrapper"},null==v?void 0:v.map((e,n)=>l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))),(null==d||null===(a=d.additionalDetails)||void 0===a?void 0:a.plumberDetails)&&"MODIFY"!=m&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy}))))),(null==d||null===(r=d.additionalDetails)||void 0===r?void 0:r.roadCuttingDetails)&&"MODIFY"!=m&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map(e=>{var n;return l.createElement("div",{style:(null==_?void 0:_.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(e=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))})))),(null==d||null===(u=d.additionalDetails)||void 0===u?void 0:u.activationDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==T?void 0:T.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))))},Wi=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],ji=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],Ki=e=>{var i,a,r,u;let{wsAdditionalDetails:s}=e;const{t:c}=o.useTranslation(),[p,m,v]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[E,T,y]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),S=!(null==s||null===(i=s.additionalDetails)||void 0===i||!i.isPaid),[f,P]=n.useState(!1),[g,N]=n.useState(p||{}),[A,O]=n.useState(null),[I,h]=n.useState(s.additionalDetails.data?s.additionalDetails.data:{}),[C,R]=n.useState(s.additionalDetails.values?s.additionalDetails.values:[]),b=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(b,"BillingService",["TaxHeadMaster"]),n.useEffect(()=>{var e,t,n;const o={...null==s||null===(e=s.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails};if((null==p||null===(n=p.billDetails)||void 0===n?void 0:n.length)>0){var i,a,r,u,d,c,v;const e=[{title:"WS_APPLICATION_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(i=p.billDetails)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.fee)},{title:"WS_SERVICE_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(r=p.billDetails)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.charge)},{title:"WS_TAX_HEADER",value:l.createElement("span",null,"₹",null==p||null===(d=p.billDetails)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.taxAmount)}];R(e),h(null==p||null===(v=p.billDetails)||void 0===v?void 0:v[0])}else m(o),N(o)},[]);let D={};const L=e=>l.createElement("h1",{className:"heading-m"},e.label),M=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),w=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(M,null)),x=function(e,t,n){void 0===t&&(t=!1);let l={...g};if("adhocPenalty"!=e&&"adhocRebate"!=e||!n.target.value)t?(l[e+"_data"]=n,l[e]=n.title,"PT_OTHERS"==n.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==n.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=n.target.value;else{var o,i;const t=0==(null==n||null===(o=n.target)||void 0===o?void 0:o.value)?1:Math.sign(null==n||null===(i=n.target)||void 0===i?void 0:i.value)||-1;l[e]=1==t?n.target.value:""}N(l)};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},C&&l.createElement(t.StatusTable,null,l.createElement("div",null,null==C?void 0:C.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+c(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),l.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+c("WS_COMMON_TOTAL_AMT"),text:l.createElement("span",null,"₹",(null==I?void 0:I.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),l.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+c("CS_INBOX_STATUS_FILTER"),text:c(S?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:S?{color:"#00703C"}:{color:"#D4351C"}}))),null!=s&&null!==(a=s.additionalDetails)&&void 0!==a&&a.isAdhocRebate?l.createElement("div",{onClick:e=>{P(!0)}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},c("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,f&&l.createElement(t.Modal,{headerBarMain:l.createElement(L,{label:c("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(w,{onClick:()=>{N(p),P(!1)}}),actionCancelLabel:c("PT_CANCEL"),actionCancelOnSubmit:()=>{N(p),P(!1)},actionSaveLabel:c("PT_ADD"),actionSaveOnSubmit:e=>(e=>{const t=null!=g&&g.adhocPenalty?Number(null==g?void 0:g.adhocPenalty):0,n=null!=g&&g.adhocRebate?Number(null==g?void 0:g.adhocRebate):0;var l,o;if(t||n)if(n>(null==s||null===(l=s.additionalDetails)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.totalAmount))O({isError:!1,isWarning:!0,key:"error",message:c("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var i,a,r,u,d,p,v,E,y,S;const e=null==s||null===(i=s.additionalDetails)||void 0===i||null===(a=i.appDetails)||void 0===a?void 0:a.applicationNo,t=null==s||null===(r=s.additionalDetails)||void 0===r||null===(u=r.appDetails)||void 0===u?void 0:u.tenantId,n={...null==s||null===(d=s.additionalDetails)||void 0===d||null===(p=d.appDetails)||void 0===p?void 0:p.additionalDetails,...g};s.additionalDetails.appDetails.additionalDetails=n;const l={CalculationCriteria:"WATER"==(null==s||null===(v=s.additionalDetails)||void 0===v||null===(E=v.appDetails)||void 0===E?void 0:E.service)?[{applicationNo:e,tenantId:t,waterConnection:s.additionalDetails.appDetails}]:[{applicationNo:e,tenantId:t,sewerageConnection:s.additionalDetails.appDetails}],isconnectionCalculation:!1};let o="WATER"==(null==s||null===(y=s.additionalDetails)||void 0===y||null===(S=y.appDetails)||void 0===S?void 0:S.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(l,o).then((e,t)=>{var n,l,o,i,a,r,u,d,s,c,p,v,E,y,S;(null==e||null===(n=e.Calculation)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.taxHeadEstimates)||void 0===o?void 0:o.length)>0&&(null==e||null===(E=e.Calculation)||void 0===E||null===(y=E[0])||void 0===y||null===(S=y.taxHeadEstimates)||void 0===S||S.forEach(e=>e.amount=e.estimateAmount)),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(i=e.Calculation)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.taxHeadEstimates,"category");const f=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(r=e.Calculation)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(d=e.Calculation)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.charge},{title:"WS_TAX_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.taxAmount}];T(Po(e.Calculation[0])),h(null==e||null===(v=e.Calculation)||void 0===v?void 0:v[0]),R(f),g.billDetails=null==e?void 0:e.Calculation,m(g),P(!1)}).catch(e=>{var t,n,l,o,i,a;O({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors[0])&&void 0!==l&&l.message?c(""+(null==e||null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i||null===(a=i.Errors[0])||void 0===a?void 0:a.code)):c("PT_COMMON_ADD_REBATE_PENALITY")})})}else O({isError:!1,isWarning:!0,key:"warning",message:c("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})})(),hideSubmit:!1,popupStyles:{overflowY:"auto"}},l.createElement("div",null,l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},c("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,c("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:Wi,optionKey:"title",select:e=>x("adhocPenaltyReason",!0,e),selected:(null==g?void 0:g.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:c})),"PT_OTHERS"===(null==g||null===(r=g.adhocPenaltyReason_data)||void 0===r?void 0:r.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,c("PT_REASON")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({style:{background:"#FAFAFA"},t:c,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==g?void 0:g.adhocPenaltyComment)||"",onChange:e=>x("adhocPenaltyComment",!1,e)},D={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:c("TL_NAME_ERROR_MESSAGE")})))),l.createElement(t.CardLabel,null,c("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({style:{background:"#FAFAFA"},t:c,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==g?void 0:g.adhocPenalty)||"",onChange:e=>x("adhocPenalty",!1,e)},D={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:c("ERR_DEFAULT_INPUT_FIELD_MSG")})))),l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},c("PT_AD_REBATE")),l.createElement(t.CardLabel,null,c("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:ji,optionKey:"title",select:e=>x("adhocRebateReason",!0,e),selected:(null==g?void 0:g.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:c})),"PT_OTHERS"===(null==g||null===(u=g.adhocRebateReason_data)||void 0===u?void 0:u.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,c("PT_REASON")),l.createElement(t.TextInput,d({style:{background:"#FAFAFA"},t:c,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==g?void 0:g.adhocRebateComment)||"",onChange:e=>x("adhocRebateComment",!1,e)},D={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:c("TL_NAME_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,c("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({style:{background:"#FAFAFA"},t:c,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==g?void 0:g.adhocRebate)||"",onChange:e=>x("adhocRebate",!1,e)},D={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:c("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),A&&l.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==A?void 0:A.isWarning,error:null==A||!A.isWarning,label:c(null==A?void 0:A.message),onClose:()=>{O(!1)},isDleteBtn:!0})))},Vi=e=>{let{style:t}=e;return l.createElement("span",null,l.createElement("svg",{style:{...t},display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},Gi=e=>{let{t:n,userType:o=!1,infoBannerLabel:i="",infoClickLable:a="",infoClickInfoLabel:r="",infoClickInfoLabel1:u=""}=e;o=o||Digit.SessionStorage.get("userType");const d=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement("div",{style:d?{}:{width:"80%"}},l.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},l.createElement("div",null,l.createElement(t.InfoBannerIcon,null),l.createElement("h2",{style:{color:"#3498DB"}},n(i))),n(a)+" ",l.createElement(Vi,{style:{display:"inline",marginBottom:"5px"}})," "+n(r),l.createElement("div",null," "+n(u)))))},zi=e=>{var i,a,r,u,d,s,c;let{wsAdditionalDetails:p}=e;const{t:m}=o.useTranslation(),[v,E]=n.useState(!1),[_,T]=n.useState({}),y=e=>l.createElement("h1",{className:"heading-m"},e.label),S=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),f=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(S,null));return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=p&&null!==(i=p.additionalDetails)&&void 0!==i&&i.isViewBreakup?l.createElement("div",{onClick:e=>(()=>{var e;let t=p.additionalDetails.data||{};const n=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"),l=n?JSON.parse(n):{};null!=l&&null!==(e=l.value)&&void 0!==e&&e.totalAmount&&(t=null==l?void 0:l.value),T(t),E(!0)})(),style:{marginTop:"12px"}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},m("WS_PAYMENT_VIEW_BREAKUP"))):null,v&&l.createElement(t.Modal,{headerBarMain:l.createElement(y,{label:m("WS_CALCULATION_BREAKUP")}),headerBarEnd:l.createElement(f,{onClick:()=>{E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},l.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},m("WS_APPLICATION_FEE_HEADER")),null==_||null===(a=_.billSlabData)||void 0===a||null===(r=a.FEE)||void 0===r?void 0:r.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},m("WS_SERVICE_FEE_HEADER")),null==_||null===(u=_.billSlabData)||void 0===u||null===(d=u.CHARGES)||void 0===d?void 0:d.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==_||null===(s=_.billSlabData)||void 0===s||null===(c=s.TAX)||void 0===c?void 0:c.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))};function Xi(e){var a,r,u,d,s,c,p,m,v,E,T,y,S;let{applicationDetails:f,workflowDetails:P,isDataLoading:g,applicationData:N,timelineStatusPrefix:A,showTimeLine:O=!0,statusAttribute:I="status",paymentsList:h,oldValue:C,isInfoLabel:R=!1}=e;const{t:b}=o.useTranslation();function D(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}console.log("appl",f);const[L,M]=n.useState({}),[w,x]=n.useState({loading:!1,loaded:!1,canLoad:!1});"ACTIVE"!=(null==N?void 0:N.status)||w.loading||w.loaded||w.canLoad||x({loading:!1,loaded:!1,canLoad:!0}),null==w||!w.canLoad||w.loading||w.loaded||(x({loading:!0,loaded:!1,canLoad:!0}),function(e,t,n,l){try{Promise.resolve(Digit.PTService.assessmentSearch({tenantId:e,filters:{propertyIds:t}})).then(function(o){function i(){n(a),l({loading:!1,loaded:!0,canLoad:!0})}let a={};const r=function(n){if((null==o||null===(n=o.Assessments)||void 0===n?void 0:n.length)>0)return Promise.resolve(Digit.PaymentService.fetchBill(e,{businessService:"PT",consumerCode:t})).then(function(e){a=e})}();return r&&r.then?r.then(i):i()})}catch(e){return Promise.reject(e)}}((null==N?void 0:N.tenantId)||tenantId,null==N?void 0:N.propertyId,M,x));const U=e=>{if(null==e||null==e||""==e)return"NA";const t=new Date(e);let n=t.getMonth()+1,l=t.getDate();return n=(n>9?"":"0")+n,l=(l>9?"":"0")+l,l+"/"+n+"/"+t.getFullYear()},F=function(e,t){if(void 0===t&&(t=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var n;const e={date:U(null==N||null===(n=N.auditDetails)||void 0===n?void 0:n.createdTime),source:(null==N?void 0:N.channel)||""};return l.createElement(Bi,{data:e})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var o,i,a,r,u,d,s,c,p,m,v,E,T,y,S,P,g,A;const n={uuid:null==e||null===(o=e.assignes)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==f?void 0:f.tenantId,businessIds:null==f?void 0:f.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:e=>{let n="";return n="+91 "+_.get(e,"ProcessInstances["+t+"].assignes[0].mobileNumber"),n}}},O={date:null==e||null===(a=e.auditDetails)||void 0===a?void 0:a.lastModified,name:null==e||null===(r=e.assignes)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.name,mobileNumber:(null==N||null===(d=N.processInstance)||void 0===d||null===(s=d.assignes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.uuid)===(null==e||null===(p=e.assignes)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.uuid)&&null!=N&&null!==(v=N.processInstance)&&void 0!==v&&null!==(E=v.assignes)&&void 0!==E&&null!==(T=E[0])&&void 0!==T&&T.mobileNumber?null==N||null===(y=N.processInstance)||void 0===y||null===(S=y.assignes)||void 0===S||null===(P=S[0])||void 0===P?void 0:P.mobileNumber:null==e||null===(g=e.assignes)||void 0===g||null===(A=g[0])||void 0===A?void 0:A.mobileNumber,comment:b(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return l.createElement(Bi,{data:O,OpenImage:D,privacy:n})}{var O,I,h,C,R;const t={date:null==e||null===(O=e.auditDetails)||void 0===O?void 0:O.lastModified,name:null==e||null===(I=e.assignes)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(C=e.assignes)||void 0===C||null===(R=C[0])||void 0===R?void 0:R.mobileNumber};return l.createElement(Bi,{data:t})}},B=(e,t)=>e?t?e:b(e):b("NA"),k=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),H=window.location.href.includes("employee/noc"),Y=window.location.href.includes("employee/obps"),W=(window.location.href.includes("employee/ws"),()=>window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||k?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}),j=e=>null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?B(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+b(null==e?void 0:e.isUnit):b("N/A"):null!=e&&e.value?B(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):b("N/A"),[K,V]=n.useState(!1);return l.createElement(t.Card,{style:{position:"relative"},className:"employeeCard-override"},R?l.createElement(Gi,{t:b,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==f||null===(a=f.applicationDetails)||void 0===a?void 0:a.map((e,o)=>{var a,r,u,d,s,c,p,m,v,E,_,T,y,S,g,N,A,O,I,R,D,M,w,x,U,F,B,K,V,G,z,X,q,$,Z,Q,J,ee,te;return l.createElement(l.Fragment,{key:o},l.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:k?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==o||e.asSectionHeader?l.createElement(l.Fragment,null,l.createElement(t.CardSectionHeader,{style:0==o&&k?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},H?""+b(e.title):b(e.title),null!=e&&e.Component?l.createElement(e.Component,null):null)):l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},b(e.title)),(null==e?void 0:e.isTable)&&l.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},l.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(e=>l.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},b(e)))),null==e?void 0:e.tableRows.map((t,o)=>o===(null==e?void 0:e.tableRows.length)-1?l.createElement(n.Fragment,null,l.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),l.createElement("tr",null,t.map(e=>l.createElement("td",{style:{textAlign:"left"}},b(e))))):l.createElement("tr",null,t.map(e=>l.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},b(e)))))),l.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||k?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(a=e.values)||void 0===a?void 0:a.map((n,o)=>{var a,r,u;return!0===n.map&&"N/A"!==n.value?l.createElement(t.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:b(n.title),label:b(n.title),text:l.createElement("img",{src:b(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?l.createElement(t.Row,{key:b(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?l.createElement("div",{style:{width:"200%"}},l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},b(null==n?void 0:n.title)))):H||Y?""+b(n.title):b(n.title),text:l.createElement("div",null,l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:o===(null==e||null===(u=e.values)||void 0===u?void 0:u.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:W(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement("div",null,window.location.href.includes("modify")?l.createElement(t.Row,{className:"border-none",key:""+n.title,label:""+b(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement(t.Row,{key:b(n.title),label:b(n.title),text:j(n),last:o===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:W(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}),"PT_TOTAL_DUES"===n.title?l.createElement(xo,{bill:null===(r=L.Bill)||void 0===r?void 0:r[0]}):"")})))),(null==e?void 0:e.belowComponent)&&l.createElement(e.belowComponent,null),(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.inspectionReport)&&l.createElement(xi,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:h}),(null==f||null===(u=f.applicationData)||void 0===u||null===(d=u.additionalDetails)||void 0===d||null===(s=d.fieldinspection_pending)||void 0===s?void 0:s.length)>0&&(null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.fiReport)&&l.createElement(hi,{fiReport:null==f||null===(p=f.applicationData)||void 0===p||null===(m=p.additionalDetails)||void 0===m?void 0:m.fieldinspection_pending}),(null==e||null===(v=e.additionalDetails)||void 0===v?void 0:v.floors)&&l.createElement(Mi,{floors:null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.floors}),(null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners)&&l.createElement(wi,{owners:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.owners}),(null==e||null===(y=e.additionalDetails)||void 0===y?void 0:y.units)&&l.createElement(Hi,{units:null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.units}),(null==e||null===(g=e.additionalDetails)||void 0===g?void 0:g.accessories)&&l.createElement(ki,{units:null==e||null===(N=e.additionalDetails)||void 0===N?void 0:N.accessories}),(null==e||null===(A=e.additionalDetails)||void 0===A?void 0:A.permissions)&&(null==P||null===(O=P.data)||void 0===O||null===(I=O.nextActions)||void 0===I?void 0:I.length)>0&&l.createElement(bi,{applicationData:null==f?void 0:f.applicationData,t:b,permissions:null==e||null===(R=e.additionalDetails)||void 0===R?void 0:R.permissions}),(null==e||null===(D=e.additionalDetails)||void 0===D?void 0:D.obpsDocuments)&&l.createElement(Oi,{t:b,applicationData:null==f?void 0:f.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:P}),(null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.noc)&&l.createElement(Ri,{t:b,isNoc:!0,NOCdata:e.values,applicationData:null==f?void 0:f.applicationData,docs:e.additionalDetails.noc,noc:null===(w=e.additionalDetails)||void 0===w?void 0:w.data,bpaActionsDetails:P}),(null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.scruntinyDetails)&&l.createElement(xi,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(U=e.additionalDetails)||void 0===U?void 0:U.buildingExtractionDetails)&&l.createElement(xi,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(F=e.additionalDetails)||void 0===F?void 0:F.subOccupancyTableDetails)&&l.createElement(Ui,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==f?void 0:f.applicationData}),(null==e||null===(B=e.additionalDetails)||void 0===B?void 0:B.documentsWithUrl)&&l.createElement(Ai,{documents:null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.documentsWithUrl}),(null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.documents)&&l.createElement(Di,{documents:null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.documents}),(null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.taxHeadEstimatesCalculation)&&l.createElement(Li,{taxHeadEstimatesCalculation:null==e||null===(X=e.additionalDetails)||void 0===X?void 0:X.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&l.createElement(Yi,{wsAdditionalDetails:e,oldValue:C}),(null==e||null===(q=e.additionalDetails)||void 0===q?void 0:q.redirectUrl)&&l.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},l.createElement(i.Link,{to:null==e||null===($=e.additionalDetails)||void 0===$||null===(Z=$.redirectUrl)||void 0===Z?void 0:Z.url},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==e||null===(Q=e.additionalDetails)||void 0===Q||null===(J=Q.redirectUrl)||void 0===J?void 0:J.title))),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&l.createElement(Ki,{wsAdditionalDetails:e,workflowDetails:P}),(null==e||null===(te=e.additionalDetails)||void 0===te?void 0:te.estimationDetails)&&l.createElement(zi,{wsAdditionalDetails:e,workflowDetails:P}))}),O&&(null==P||null===(r=P.data)||void 0===r||null===(u=r.timeline)||void 0===u?void 0:u.length)>0&&l.createElement(l.Fragment,null,l.createElement(t.BreakLine,null),((null==P?void 0:P.isLoading)||g)&&l.createElement(t.Loader,null),!(null!=P&&P.isLoading)&&!g&&l.createElement(n.Fragment,null,l.createElement("div",{id:"timeline"},l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},b("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=P&&null!==(d=P.data)&&void 0!==d&&d.timeline&&1===(null==P||null===(s=P.data)||void 0===s||null===(c=s.timeline)||void 0===c?void 0:c.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:b(""+A+(null==P||null===(p=P.data)||void 0===p||null===(m=p.timeline[0])||void 0===m?void 0:m.state)),customChild:F(null==P||null===(v=P.data)||void 0===v?void 0:v.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==P||null===(E=P.data)||void 0===E?void 0:E.timeline)&&(null==P||null===(T=P.data)||void 0===T?void 0:T.timeline.slice(0,K?null==P?void 0:P.data.timeline.length:2).map((e,n,o)=>{let i="";var a,r,u,d,s,c;return window.location.href.includes("/obps/")&&(i=null!=P&&null!==(a=P.data)&&void 0!==a&&null!==(r=a.timeline[n-1])&&void 0!==r&&null!==(u=r.state)&&void 0!==u&&u.includes("BACK_FROM")||null!=P&&null!==(d=P.data)&&void 0!==d&&null!==(s=d.timeline[n-1])&&void 0!==s&&null!==(c=s.state)&&void 0!==c&&c.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:b(""+A+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[I])+i),customChild:F(e,n)}))}))),(null==P||null===(y=P.data)||void 0===y||null===(S=y.timeline)||void 0===S?void 0:S.length)>2&&l.createElement(t.LinkButton,{label:b(K?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{V(e=>!e)}})))))}function qi(e){var n,o,i,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f;let{t:P,showToast:g,closeToast:N,businessService:A}=e;if(null!=A&&A.includes("NewTL")||null!=A&&A.includes("TL")||null!=A&&A.includes("EDITRENEWAL")){var O;let e="";switch(null==g||null===(O=g.action)||void 0===O?void 0:O.action){case"SENDBACK":e="error"===(null==g?void 0:g.key)?null==g||null===(n=g.error)||void 0===n?void 0:n.message:P("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":e="error"===(null==g?void 0:g.key)?null==g||null===(o=g.error)||void 0===o?void 0:o.message:P("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":e="error"===(null==g?void 0:g.key)?null==g||null===(i=g.error)||void 0===i?void 0:i.message:P("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":e="error"===(null==g?void 0:g.key)?null==g||null===(a=g.error)||void 0===a?void 0:a.message:P("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":e="error"===(null==g?void 0:g.key)?null==g||null===(r=g.error)||void 0===r?void 0:r.message:P("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":e="error"===(null==g?void 0:g.key)?null==g||null===(u=g.error)||void 0===u?void 0:u.message:P("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":e="error"===(null==g?void 0:g.key)?null==g||null===(d=g.error)||void 0===d?void 0:d.message:P("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:e="error"===(null==g?void 0:g.key)?null==g||null===(s=g.error)||void 0===s?void 0:s.message:P("ES_"+A+"_"+(null==g||null===(c=g.action)||void 0===c?void 0:c.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,g&&l.createElement(t.Toast,{error:"error"===g.key,label:e,onClose:N}))}if(null!=A&&A.includes("BPA")||null!=A&&A.includes("BPA_LOW")||null!=A&&A.includes("BPA_OC")){var I;const e=function(e){var t;void 0===e&&(e=[]);let n=e[0];return n=2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=A&&A.includes("BPA_OC")?P(e[1]):P(e[0]),n};let n="";switch(null==g||null===(I=g.action)||void 0===I?void 0:I.action){case"REVOCATE":n="error"===(null==g?void 0:g.key)?null==g||null===(p=g.error)||void 0===p?void 0:p.message:e(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":n="error"===(null==g?void 0:g.key)?null==g||null===(m=g.error)||void 0===m?void 0:m.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":n="error"===(null==g?void 0:g.key)?null==g||null===(v=g.error)||void 0===v?void 0:v.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":n="error"===(null==g?void 0:g.key)?null==g||null===(E=g.error)||void 0===E?void 0:E.message:e(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":n="error"===(null==g?void 0:g.key)?null==g||null===(_=g.error)||void 0===_?void 0:_.message:e(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":n="error"===(null==g?void 0:g.key)?null==g||null===(T=g.error)||void 0===T?void 0:T.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":n="error"===(null==g?void 0:g.key)?null==g||null===(y=g.error)||void 0===y?void 0:y.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:n="error"===(null==g?void 0:g.key)?null==g||null===(S=g.error)||void 0===S?void 0:S.message:P("ES_"+A+"_"+(null==g||null===(f=g.action)||void 0===f?void 0:f.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,g&&l.createElement(t.Toast,{error:"error"===g.key,label:n,onClose:N}))}{var h,C;const e="error"===(null==g?void 0:g.key)?null==g||null===(h=g.error)||void 0===h?void 0:h.message:"ES_"+A+"_"+(null==g||null===(C=g.action)||void 0===C?void 0:C.action)+"_UPDATE_SUCCESS";return l.createElement(l.Fragment,null,g&&l.createElement(t.Toast,{error:"error"===g.key,label:P(e),onClose:N}))}}function $i(e){var i,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f;let{workflowDetails:P,displayMenu:g,onActionSelect:N,setDisplayMenu:A,businessService:O,forcedActionPrefix:I,ActionBarStyle:h={},MenuStyle:C={}}=e;const{t:R}=o.useTranslation();let b=Digit.UserService.getUser();const D=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){const e=sessionStorage.getItem("Digit.citizen.userRequestObject"),t=e?JSON.parse(e):{};b=null==t?void 0:t.value}const L=null===(i=b)||void 0===i||null===(a=i.info)||void 0===a||null===(r=a.roles)||void 0===r?void 0:r.map(e=>e.code);let M=!1,w=!1,x=(null==P||null===(u=P.data)||void 0===u||null===(d=u.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s?void 0:s.filter(e=>(null==L?void 0:L.some(t=>{var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles))||(null==P||null===(c=P.data)||void 0===c||null===(p=c.nextActions)||void 0===p?void 0:p.filter(e=>(null==L?void 0:L.some(t=>{var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles));return Digit.Hooks.useClickOutside(D,()=>{A(!1)},g),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==x?void 0:x.length)||null!=x&&null!==(m=x[0])&&void 0!==m&&null!==(v=m.redirectionUrl)&&void 0!==v&&v.pathname.includes("/pt/property-details/")&&1==(null==x?void 0:x.length)?(w=!1,M=!0):(null==x?void 0:x.length)>0&&(w=!0,M=!1),l.createElement(l.Fragment,null,!(null!=P&&P.isLoading)&&w&&!M&&l.createElement(t.ActionBar,{style:{...h}},g&&(null!=P&&null!==(E=P.data)&&void 0!==E&&null!==(_=E.actionState)&&void 0!==_&&_.nextActions||null!=P&&null!==(T=P.data)&&void 0!==T&&T.nextActions)?l.createElement(t.Menu,{localeKeyPrefix:I||"WF_EMPLOYEE_"+(null==O?void 0:O.toUpperCase()),options:x,optionKey:"action",t:R,onSelect:N,style:C}):null,l.createElement(t.SubmitBar,{ref:D,label:R("WF_TAKE_ACTION"),onSubmit:()=>A(!g)})),!(null!=P&&P.isLoading)&&!w&&M&&l.createElement(t.ActionBar,{style:{...h}},l.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==x||null===(y=x[0])||void 0===y?void 0:y.action,value:null==x||null===(S=x[0])||void 0===S?void 0:S.action,onClick:e=>{N((null==x?void 0:x[0])||{})}},R((I||"WF_EMPLOYEE_"+(null==O?void 0:O.toUpperCase()))+"_"+(null==x||null===(f=x[0])||void 0===f?void 0:f.action)))))}const Zi=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Qi=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Zi,null));function Ji(e){let{action:n,closeWarningPopup:i}=e;const{t:a}=o.useTranslation(),r=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},a("PT_DUES_ARE_PENDING")),headerBarEnd:l.createElement(Qi,{onClick:()=>{i()}}),hideSubmit:!0,isDisabled:!1,popupStyles:r?{}:{width:"29%",marginTop:"auto"}},l.createElement(t.Card,null,l.createElement("div",{style:{marginBottom:"30px"}},l.createElement("h1",null,a("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",a("PT_DUE_WARNING_MSG2"))),l.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+a("PT_AMOUNT_DUE"),text:"₹"+a(null==n?void 0:n.AmountDueForPay)}),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:a("ES_PT_COMMON_CANCEL"),onSubmit:i,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:a("PT_COLLECT"),onSubmit:()=>{var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}const ea=e=>{var a;const u=Digit.ULBService.getCurrentTenantId(),d=Digit.ULBService.getStateId(),{t:s}=o.useTranslation(),c=i.useHistory();let{id:p}=i.useParams();const[m,v]=n.useState(!1),[E,_]=n.useState(null),[T,y]=n.useState(!1),[S,f]=n.useState(!1),[P,g]=n.useState(!1),{applicationDetails:N,showToast:A,setShowToast:O,isLoading:I,isDataLoading:h,applicationData:C,mutate:R,nocMutation:b,workflowDetails:D,id:L,businessService:M,closeToast:w,moduleCode:x,timelineStatusPrefix:U,forcedActionPrefix:F,statusAttribute:B,ActionBarStyle:k,MenuStyle:H,paymentsList:Y,showTimeLine:W=!0,oldValue:j,isInfoLabel:K=!1,clearDataDetails:V}=e;n.useEffect(()=>{A&&D.revalidate()},[A]);const G=r.useQueryClient(),z=()=>{_(null),y(!1)};return I||S?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,I?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(Xi,{applicationDetails:N,id:L,workflowDetails:D,isDataLoading:h,applicationData:C,businessService:M,timelineStatusPrefix:U,statusAttribute:B,paymentsList:Y,showTimeLine:W,oldValue:j,isInfoLabel:K}),T?l.createElement(Do,{t:s,action:E,tenantId:u,state:d,id:p,applicationDetails:N,applicationData:null==N?void 0:N.applicationData,closeModal:z,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{let l=!1;const o=function(o,i,a,r,u,d,p,m,v,_,T,y){if(0!=(null==e||null===(o=e.Property)||void 0===o||null===(i=o.workflow)||void 0===i||null===(a=i.comment)||void 0===a?void 0:a.length)&&0!=(null==e||null===(r=e.Licenses)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.comment)||void 0===d?void 0:d.length)&&0!=(null==e||null===(p=e.WaterConnection)||void 0===p||null===(m=p.comment)||void 0===m?void 0:m.length)&&0!=(null==e||null===(v=e.SewerageConnection)||void 0===v||null===(_=v.comment)||void 0===_?void 0:_.length)&&0!=(null==e||null===(T=e.BPA)||void 0===T||null===(y=T.comment)||void 0===y?void 0:y.length)){function S(t){if(l)return t;R&&(f(!0),R(e,{onError:(e,t)=>{f(!1),O({key:"error",error:e}),setTimeout(w,5e3)},onSuccess:(e,t)=>{var l,o,i,a,r,u,d,p,m,v,_,T;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),f(!1),null!==(l=n)&&void 0!==l&&l.bpa&&(e.selectedAction=E,c.replace("/digit-ui/employee/obps/response",{data:e})),null!==(o=n)&&void 0!==o&&o.isStakeholder&&(e.selectedAction=E,c.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!==(i=n)&&void 0!==i&&i.isNoc&&c.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(a=e.Amendments)||void 0===a?void 0:a.length)>0?null!=t&&null!==(r=t.AmendmentUpdate)&&void 0!==r&&null!==(u=r.workflow)&&void 0!==u&&u.action.includes("SEND_BACK")?O({key:"success",label:s("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(d=t.AmendmentUpdate)&&void 0!==d&&null!==(p=d.workflow)&&void 0!==p&&p.action.includes("RE-SUBMIT")?O({key:"success",label:s("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(m=t.AmendmentUpdate)&&void 0!==m&&null!==(v=m.workflow)&&void 0!==v&&v.action.includes("APPROVE")?O({key:"success",label:s("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(_=t.AmendmentUpdate)&&void 0!==_&&null!==(T=_.workflow)&&void 0!==T&&T.action.includes("REJECT")&&O({key:"success",label:s("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(O({key:"success",action:E}),V&&setTimeout(V,3e3),setTimeout(w,5e3),G.clear(),G.refetchQueries("APPLICATION_SEARCH"))}})),z()}f(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const o=function(){if(!1!==t&&b){var e;const n=null===(e=t)||void 0===e?void 0:e.map(e=>null==b?void 0:b.mutateAsync(e)),o=Ee(function(){return f(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(e=>{var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,o,i,a,r,u,d,c,p,m,v;f(!1);let E=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(o=n.Errors)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.code?s(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(c=e.response)||void 0===c||null===(p=c.data)||void 0===p||null===(m=p.Errors)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.message)||e;z(),O({key:"error",error:{message:E}}),setTimeout(w,5e3),l=!0});if(o&&o.then)return o.then(function(){})}}();return o&&o.then?o.then(S):S(o)}alert("Please fill in the comments before submitting")}();return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},actionData:null==D||null===(a=D.data)||void 0===a?void 0:a.timeline,businessService:M,workflowDetails:D,moduleCode:x}):null,P?l.createElement(Ji,{action:E,workflowDetails:D,businessService:M,isWarningPop:P,closeWarningPopup:()=>{g(!1)}}):null,l.createElement(qi,{t:s,showToast:A,closeToast:w,businessService:M}),l.createElement($i,{workflowDetails:D,displayMenu:m,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)O({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(w,5e3);else if(null!=e&&e.isWarningPopUp)g(!0);else if(null!=e&&e.redirectionUrll){var t,n,l,o,i;if("ACTIVATE_CONNECTION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action))c.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),JSON.stringify({data:null==e||null===(o=e.redirectionUrll)||void 0===o?void 0:o.state,url:""+(null===(i=location)||void 0===i?void 0:i.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action)){var a,r;c.push(""+(null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.pathname),{data:null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.state})}else{var u;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(u=e.redirectionUrll)||void 0===u?void 0:u.pathname))}}else if(null!=e&&e.redirectionUrl){var d,s;c.push({pathname:null===(d=e.redirectionUrl)||void 0===d?void 0:d.pathname,state:{...null===(s=e.redirectionUrl)||void 0===s?void 0:s.state}})}else y(!0);_(e),v(!1)},setDisplayMenu:v,businessService:M,forcedActionPrefix:F,ActionBarStyle:k,MenuStyle:H})))},ta=e=>{var a,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O;let{propertyId:I,acknowledgementIds:h,workflowDetails:C,mutate:R,showToast:b,setShowToast:D,closeToast:L}=e;const{t:M}=o.useTranslation(),[w,x]=n.useState(!1),[U,F]=n.useState(!1),B=Digit.ULBService.getCurrentTenantId(),k=Digit.ULBService.getStateId(),{data:H}=Digit.Hooks.useStore.getInitData(),{tenants:Y}=H||{},[W,j]=n.useState("PT.MUTATION"),K=i.useHistory(),[V,G]=n.useState(!1),{isLoading:z,data:X}=Digit.Hooks.pt.usePropertySearch({filters:{acknowledgementIds:h},tenantId:B},{filters:{acknowledgementIds:h},tenantId:B}),[q,$]=n.useState(null),[Z,Q]=n.useState(null),J=wn(X,"Properties",[]);let ee=J&&J.length>0&&J[0]||{};const te=ee;sessionStorage.setItem("pt-property",JSON.stringify(te));const ne=r.useQueryClient(),{isLoading:le,data:oe}=Digit.Hooks.pt.usePropertySearch({tenantId:B,filters:{propertyIds:I,audit:!0}},{enabled:!0}),{data:ie,isLoading:ae}=Digit.Hooks.useRecieptSearch({tenantId:B,businessService:"PT.MUTATION",consumerCodes:h,isEmployee:!0},{enabled:!!h}),[re,ue]=n.useState({}),[de,se]=n.useState(!1),[ce,pe]=n.useState(null),{data:me}=Digit.Hooks.pt.useApplicationDetail(M,B,I);n.useEffect(function(){try{const e=function(){if(h)return Promise.resolve(Digit.PaymentService.searchBill(B,{Service:W,consumerCode:h})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:null==me?void 0:me.applicationData},B)).then(function(e){var t;$((null==e||null===(t=e[h])||void 0===t?void 0:t.totalAmount)||M("CS_NA")),Q(M("PT_MUT_BILL_ACTIVE"))});var t,n,l;$((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||M("CS_NA")),Q(M("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[B,h,W]),n.useEffect(()=>{ve()},[oe,me,re]),n.useEffect(()=>{me&&ue(Xe.cloneDeep(me))},[me]),n.useEffect(()=>{b&&C.revalidate()},[b]);const ve=()=>{var e,t;if(oe&&Object.keys(re).length&&"ACTIVE"!==(null==me||null===(e=me.applicationData)||void 0===e?void 0:e.status)&&"MUTATION"===(null==me||null===(t=me.applicationData)||void 0===t?void 0:t.creationReason)&&(null==re||!re.applicationDetails.find(e=>"PT_MUTATION_TRANSFEROR_DETAILS"===e.title))){var n;let e=null===(n=re.applicationDetails)||void 0===n?void 0:n.filter(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title),t=Un.reduce((e,t)=>[...e,...t.body],[]).find(e=>"TransfererDetails"===e.component);e.unshift({title:"PT_MUTATION_TRANSFEROR_DETAILS",belowComponent:()=>l.createElement(TransfererDetails,{userType:"employee",formData:{originalData:oe[0]},config:t})}),ue({...re,applicationDetails:e})}},_e=()=>{pe(null),se(!1)};if(ee.workflow||(ee.workflow={id:null,tenantId:B,businessService:"PT.MUTATION",businessId:null==te?void 0:te.acknowldgementNumber,action:"",moduleName:"PT",state:null,comment:null,documents:null,assignes:null}),ee&&ee.owners&&ee.owners.length>0){let e=[],t=[];ee.owners.map(n=>{n.documentUid=n.documents?n.documents[0].documentUid:"NA",n.documentType=n.documents?n.documents[0].documentType:"NA","ACTIVE"==n.status?e.push(n):t.push(n)}),ee.ownersInit=t,ee.ownersTemp=e}if(ee.ownershipCategoryTemp=ee.ownershipCategory,ee.ownershipCategoryInit="NA",wn(te,"Properties[0].ownershipCategory","").startsWith("INSTITUTION")&&(ee.institutionTemp=ee.institution),oe&&Array.isArray(wn(oe,"Properties",[]))&&wn(oe,"Properties",[]).length>0){const e=wn(oe,"Properties",[]),t="ACTIVE"==ee.status?1:0,n=e.filter(e=>"ACTIVE"==e.status).sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[t];ee.ownershipCategoryInit=n.ownershipCategory,ee.ownersInit=n.owners.filter(e=>"ACTIVE"==e.status),ee.ownershipCategoryInit.startsWith("INSTITUTION")&&(ee.institutionInit=n.institution)}let Te=wn(ee,"ownersTemp",[]),ye=wn(ee,"ownersInit",[]),Se=(wn(ee,"institutionTemp",[]),wn(ee,"institutionInit",[])),fe=[];fe=null==te?void 0:te.units,fe&&fe.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1});let Pe=[];if(Pe=null==te?void 0:te.documents,z||le||V)return l.createElement(t.Loader,null);let ge=M("CS_NA");if(null!=ee&&null!==(a=ee.additionalDetails)&&void 0!==a&&a.documentDate){var Ne;const e=new Date(null==ee||null===(Ne=ee.additionalDetails)||void 0===Ne?void 0:Ne.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];ge=e.getDate()+" "+t+" "+e.getFullYear()}let Ae=[];return Ae.push({label:M("MT_APPLICATION"),onClick:()=>function(){try{const e=te||{},t=Y.find(t=>t.code===e.tenantId);return Promise.resolve(gt({...e},t,M)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}),ie&&(null==ie?void 0:ie.Payments.length)>0&&0==ae&&Ae.push({label:M("MT_FEE_RECIEPT"),onClick:()=>{var e;return function(e){let{tenantId:t,payments:n,...l}=e;try{let e={filestoreIds:[null==n?void 0:n.fileStoreId]};const l=null!==e?Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")}):Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...n}]},"property-receipt")).then(function(n){return e=n,Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})});return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}({tenantId:null==ie||null===(e=ie.Payments[0])||void 0===e?void 0:e.tenantId,payments:null==ie?void 0:ie.Payments[0]})}}),"MUTATION"===(null==X||null===(u=X.Properties)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.creationReason)&&"ACTIVE"===(null==X||null===(s=X.Properties)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.status)&&Ae.push({label:M("MT_CERTIFICATE"),onClick:()=>function(){try{var e;return Promise.resolve(Digit.PaymentService.generatePdf(B,{Properties:[null==X||null===(e=X.Properties)||void 0===e?void 0:e[0]]},"ptmutationcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(B,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()}),l.createElement(l.Fragment,null,l.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto"}},l.createElement(t.Header,{styles:{fontSize:"32px",marginLeft:"12px"}},M("PT_MUTATION_APPLICATION_DETAILS")),l.createElement("div",null,l.createElement("div",null,Ae&&Ae.length>0&&l.createElement(t.MultiLink,{onHeadClick:()=>F(!U),displayOptions:U,options:Ae,className:"multilinkWrapper",style:{top:"90px"}})))),l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_APPLICATION_NUMBER_LABEL"),text:null==ee?void 0:ee.acknowldgementNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:M("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==ee?void 0:ee.propertyId,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:M("PT_APPLICATION_CHANNEL_LABEL"),text:M("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==ee?void 0:ee.channel))}),l.createElement(t.Row,{label:M("PT_FEE_AMOUNT"),text:q,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:M("PT_PAYMENT_STATUS"),text:Z,textStyle:{whiteSpace:"pre"}})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==ee||null===(p=ee.address)||void 0===p?void 0:p.pincode)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_COMMON_CITY"),text:(null==ee||null===(m=ee.address)||void 0===m?void 0:m.city)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_COMMON_LOCALITY_OR_MOHALLA"),text:M(""+(null==ee||null===(v=ee.address)||void 0===v||null===(E=v.locality)||void 0===E?void 0:E.area))||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==ee||null===(_=ee.address)||void 0===_?void 0:_.street)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_DOOR_OR_HOUSE"),text:(null==ee||null===(T=ee.address)||void 0===T?void 0:T.doorNo)||M("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(ye)&&ye.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=ye.length&&l.createElement("span",null,M("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||M("CS_NA")}),l.createElement(t.Row,{label:M("Guardian Name"),text:(null==e?void 0:e.fatherOrHusbandName)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType.toLowerCase())||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||M("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement("div",null,Se.length?Array.isArray(Te)&&Te.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=Te.length&&l.createElement("span",null,M("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_INSTITUTION_NAME"),text:(null==Se?void 0:Se.name)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_TYPE_OF_INSTITUTION"),text:""+M(null==Se?void 0:Se.type)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_NAME_AUTHORIZED_PERSON"),text:(null==Se?void 0:Se.nameOfAuthorizedPerson)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_INSTITUTION_DESIGNATION"),text:(null==Se?void 0:Se.designation)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||M("CS_NA")})))):Array.isArray(Te)&&Te.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=Te.length&&l.createElement("span",null,M("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_COMMON_GENDER_LABEL"),text:M(null==e?void 0:e.gender)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_RELATIONSHIP"),text:M(null==e?void 0:e.relationship)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType).toLowerCase()||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_FORM3_OWNERSHIP_TYPE"),text:""+M(null!=ee&&ee.ownershipCategoryTemp?"PT_OWNERSHIP_"+(null==ee?void 0:ee.ownershipCategoryTemp):"CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_MUTATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_MUTATION_PENDING_COURT"),text:(null==ee||null===(y=ee.additionalDetails)||void 0===y?void 0:y.isMutationInCourt)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_DETAILS_COURT_CASE"),text:(null==ee||null===(S=ee.additionalDetails)||void 0===S?void 0:S.caseDetails)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_PROP_UNDER_GOV_AQUISITION"),text:(null==ee||null===(f=ee.additionalDetails)||void 0===f?void 0:f.isPropertyUnderGovtPossession)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_DETAILS_GOV_AQUISITION"),text:M("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_REGISTRATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:M("PT_REASON_PROP_TRANSFER"),text:""+M(null==ee||null===(P=ee.additionalDetails)||void 0===P?void 0:P.reasonForTransfer)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_PROP_MARKET_VALUE"),text:(null==ee||null===(g=ee.additionalDetails)||void 0===g?void 0:g.marketValue)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_REG_NUMBER"),text:(null==ee||null===(N=ee.additionalDetails)||void 0===N?void 0:N.documentNumber)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_DOC_ISSUE_DATE"),text:ge}),l.createElement(t.Row,{label:M("PT_REG_DOC_VALUE"),text:(null==ee||null===(A=ee.additionalDetails)||void 0===A?void 0:A.documentValue)||M("CS_NA")}),l.createElement(t.Row,{label:M("PT_REMARKS"),text:M("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},M("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(Pe)?Pe.length>0&&l.createElement(Ut,{property:ee}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{text:M("PT_NO_DOCUMENTS_MSG")}))),l.createElement(ze,{application:te,id:h,userType:"employee"}),de?l.createElement(Do,{t:M,action:ce,tenantId:B,state:k,id:h,applicationDetails:re,applicationData:null==re?void 0:re.applicationData,closeModal:_e,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{let o=!1;function l(t){if(o)return t;R&&(G(!0),R(e,{onError:(e,t)=>{G(!1),D({key:"error",error:e}),setTimeout(L,5e3)},onSuccess:(e,t)=>{G(!1),null!=n&&n.bpa&&(e.selectedAction=ce,K.replace("/digit-ui/employee/obps/response",{data:e})),null!=n&&n.isStakeholder&&(e.selectedAction=ce,K.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=n&&n.isNoc&&K.push("/digit-ui/employee/noc/response",{data:e}),D({key:"success",action:ce}),setTimeout(L,5e3),ne.clear(),ne.refetchQueries("APPLICATION_SEARCH")}})),_e()}G(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const i=function(){if(!1!==t&&nocMutation){var e;const n=null===(e=t)||void 0===e?void 0:e.map(e=>{var t;return null===(t=nocMutation)||void 0===t?void 0:t.mutateAsync(e)}),l=Ee(function(){return G(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(e=>{var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,l,i,a,r,u,d,s,c,p,m;G(!1);let v=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.code?M(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(s=e.response)||void 0===s||null===(c=s.data)||void 0===c||null===(p=c.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;_e(),D({key:"error",error:{message:v}}),setTimeout(L,5e3),o=!0});if(l&&l.then)return l.then(function(){})}}();return Promise.resolve(i&&i.then?i.then(l):l(i))}catch(e){return Promise.reject(e)}},actionData:null==C||null===(O=C.data)||void 0===O?void 0:O.timeline,businessService:W,workflowDetails:C,moduleCode:"PT"}):null,l.createElement(qi,{t:M,showToast:b,closeToast:L,businessService:W}),l.createElement($i,{workflowDetails:C,displayMenu:w,onActionSelect:function(e){if(null!=e&&e.isToast)D({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(L,5e3);else if(e){var t;if(null!=e&&e.redirectionUrll)window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.pathname));else if(null!=e&&e.redirectionUrl){var n,l;K.push({pathname:null===(n=e.redirectionUrl)||void 0===n?void 0:n.pathname,state:{...null===(l=e.redirectionUrl)||void 0===l?void 0:l.state}})}else se(!0)}pe(e),x(!1)},setDisplayMenu:x,businessService:W,forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"})))};var na=l.memo(()=>{var e,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C,R,b;const{t:D}=o.useTranslation(),{data:L}=Digit.Hooks.useStore.getInitData(),M=Digit.ULBService.getCurrentTenantId(),{tenants:w}=L||{},{id:x}=i.useParams(),[U,F]=n.useState(null),[B,k]=n.useState({}),[H,Y]=n.useState(!1),[W,j]=n.useState(!1),[K,V]=n.useState("PT.CREATE");sessionStorage.setItem("applicationNoinAppDetails",x);const[G,z]=n.useState(!1),{isLoading:X,data:q}=Digit.Hooks.pt.useApplicationDetail(D,M,x),{mutate:$}=Digit.Hooks.pt.useApplicationActions(M);let Z=Digit.Hooks.useWorkflowDetails({tenantId:(null==q?void 0:q.tenantId)||M,id:null==q||null===(e=q.applicationData)||void 0===e?void 0:e.acknowldgementNumber,moduleCode:K,role:"PT_CEMP"});const{data:Q}=Digit.Hooks.pt.usePropertySearch({tenantId:M,filters:{propertyIds:x,audit:!0}},{enabled:W,select:e=>{var t;return null===(t=e.Properties)||void 0===t?void 0:t.filter(e=>"ACTIVE"===e.status)}}),J=l.useCallback(()=>{var e,t;if(Q&&Object.keys(B).length&&"ACTIVE"!==(null==q||null===(e=q.applicationData)||void 0===e?void 0:e.status)&&"MUTATION"===(null==q||null===(t=q.applicationData)||void 0===t?void 0:t.creationReason)&&(null==B||!B.applicationDetails.find(e=>"PT_MUTATION_TRANSFEROR_DETAILS"===e.title))){var n;let e=null===(n=B.applicationDetails)||void 0===n?void 0:n.filter(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title),t=Un.reduce((e,t)=>[...e,...t.body],[]).find(e=>"TransfererDetails"===e.component);e.unshift({title:"PT_MUTATION_TRANSFEROR_DETAILS",belowComponent:()=>l.createElement(ko,{userType:"employee",formData:{originalData:Q[0]},config:t})}),k({...B,applicationDetails:e})}},[k,B,Q,q,Q,Un]),ee=()=>{F(null)};n.useEffect(()=>{var e,t,n;q&&(null==B||null===(e=B.applicationData)||void 0===e||e.owners.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}),k(Xe.cloneDeep(q)),"ACTIVE"!==(null==q||null===(t=q.applicationData)||void 0===t?void 0:t.status)&&"MUTATION"===(null==q||null===(n=q.applicationData)||void 0===n?void 0:n.creationReason)&&j(!0))},[q]),n.useEffect(()=>{var e;J(),"ACTIVE"===(null==B||null===(e=B.applicationData)||void 0===e?void 0:e.status)&&te&&"PT.CREATE"==K&&V("PT.UPDATE")},[Q,q,B]),n.useEffect(()=>{var e,t,n,l,o,i;null===(e=Z)||void 0===e||null===(t=e.data)||void 0===t||!t.applicationBusinessService||"PT.CREATE"===(null===(n=Z)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.applicationBusinessService)&&"PT.UPDATE"===K||V(null===(o=Z)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.applicationBusinessService)},[Z.data]);const te=Digit.UserService.hasAccess(["PT_CEMP"])||!1;var ne,le,oe,ie,ae,re,ue,de,se,ce,pe,me,ve,Ee;"ACTIVE"===(null==B||null===(a=B.applicationData)||void 0===a?void 0:a.status)&&te&&(Z={...Z,data:{...null===(ne=Z)||void 0===ne?void 0:ne.data,actionState:{nextActions:[{action:"VIEW_DETAILS",redirectionUrl:{pathname:"/digit-ui/employee/pt/property-details/"+x},tenantId:Digit.ULBService.getStateId()}]}}}),!te||null===(r=Z)||void 0===r||null===(u=r.data)||void 0===u||null===(d=u.actionState)||void 0===d||!d.isStateUpdatable||null!==(s=Z)&&void 0!==s&&null!==(c=s.data)&&void 0!==c&&null!==(p=c.actionState)&&void 0!==p&&null!==(m=p.nextActions)&&void 0!==m&&m.find(e=>"UPDATE"===e.action)||(null!==(le=Z)&&void 0!==le&&null!==(oe=le.data)&&void 0!==oe&&null!==(ie=oe.actionState)&&void 0!==ie&&ie.nextActions||(Z.data.actionState.nextActions=[]),null===(ae=Z)||void 0===ae||null===(re=ae.data)||void 0===re||null===(ue=re.actionState)||void 0===ue||ue.nextActions.push({action:"UPDATE",redirectionUrl:{pathname:"/digit-ui/employee/pt/modify-application/"+x,state:{workflow:{action:"REOPEN",moduleName:"PT",businessService:K}}},tenantId:Digit.ULBService.getStateId()})),"PT_PROPERTY_APPLICATION_NO"!==(null==B||null===(v=B.applicationDetails)||void 0===v||null===(E=v[0])||void 0===E||null===(_=E.values)||void 0===_?void 0:_[0].title)&&(null==B||null===(de=B.applicationDetails)||void 0===de||de.unshift({values:[{title:"PT_PROPERTY_APPLICATION_NO",value:null==B||null===(se=B.applicationData)||void 0===se?void 0:se.acknowldgementNumber},{title:"PT_SEARCHPROPERTY_TABEL_PTUID",value:null==B||null===(ce=B.applicationData)||void 0===ce?void 0:ce.propertyId},{title:"ES_APPLICATION_CHANNEL",value:"ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==B||null===(pe=B.applicationData)||void 0===pe?void 0:pe.channel)}]})),te&&"PT.MUTATION"===(null===(T=Z)||void 0===T||null===(y=T.data)||void 0===y?void 0:y.applicationBusinessService)&&null!==(S=Z)&&void 0!==S&&null!==(f=S.data)&&void 0!==f&&null!==(P=f.actionState)&&void 0!==P&&null!==(g=P.nextActions)&&void 0!==g&&g.find(e=>"PAY"===e.action)&&(Z.data.actionState.nextActions=null===(me=Z)||void 0===me||null===(ve=me.data)||void 0===ve||null===(Ee=ve.actionState)||void 0===Ee?void 0:Ee.nextActions.map(e=>{var t;return"PAY"===e.action?{action:"PAY",forcedName:"WF_EMPLOYEE_PT.MUTATION_PAY",redirectionUrl:{pathname:"/digit-ui/employee/payment/collect/PT.MUTATION/"+(null==B||null===(t=B.applicationData)||void 0===t?void 0:t.acknowldgementNumber)}}:e}));const _e=null===(N=Z.data)||void 0===N||null===(A=N.timeline)||void 0===A?void 0:A.reduce((e,t)=>{let{wfDocuments:n}=t;return n?[...e,...n]:e},[]);let Te=null==B||null===(O=B.applicationDetails)||void 0===O||null===(I=O.find(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title))||void 0===I||null===(h=I.additionalDetails)||void 0===h?void 0:h.documents;var ye;!Te||null==_e||!_e.length||null!=Te&&Te.find(e=>"PT_WORKFLOW_DOCS"===e.title)||(B.applicationDetails.find(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title).additionalDetails.documents=[...Te,{title:"PT_WORKFLOW_DOCS",values:null==_e||null===(ye=_e.map)||void 0===ye?void 0:ye.call(_e,e=>({...e,title:e.documentType}))}]);let Se=[{order:1,label:D("PT_APPLICATION"),onClick:()=>function(){try{const e=null==B?void 0:B.applicationData,t=w.find(t=>t.code===e.tenantId);return Promise.resolve(gt(e,t,D)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}];var fe,Pe,ge,Ne;if("MUTATION"===(null==q||null===(C=q.applicationData)||void 0===C?void 0:C.creationReason))return l.createElement(ta,{propertyId:x,acknowledgementIds:null==B||null===(fe=B.applicationData)||void 0===fe?void 0:fe.acknowldgementNumber,workflowDetails:Z,mutate:$,showToast:U,setShowToast:F,closeToast:ee});if("PT_ASSESMENT_INFO_SUB_HEADER"==(null==q?void 0:q.applicationDetails[1].title)){if(4==(null==q?void 0:q.applicationDetails[1].values.length)){var Ae;let e={title:"PT_ASSESMENT_ELECTRICITY",value:(null==q||null===(Ae=q.additionalDetails)||void 0===Ae?void 0:Ae.electricity)||"NA"};null==q||q.applicationDetails[1].values.push(e)}if(5==(null==q?void 0:q.applicationDetails[1].values.length)){var Oe;let e={title:"PT_ASSESMENT_ELECTRICITY_UID",value:(null==q||null===(Oe=q.additionalDetails)||void 0===Oe?void 0:Oe.uid)||"NA"};null==q||q.applicationDetails[1].values.push(e)}}return Array.isArray(null==B||null===(R=B.applicationData)||void 0===R?void 0:R.owners)&&(null==B||null===(b=B.applicationData)||void 0===b||b.owners.slice().reverse()),null!=B&&B.applicationData&&(null==B||null===(Pe=B.applicationDetails)||void 0===Pe||null===(ge=Pe[3])||void 0===ge||null===(Ne=ge.additionalDetails)||void 0===Ne||Ne.owners.sort(()=>{var e,t,n;return null==B||null===(e=B.applicationDetails)||void 0===e||null===(t=e[3])||void 0===t||null===(n=t.additionalDetails)||void 0===n?void 0:n.owners})),l.createElement("div",null,l.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},l.createElement(t.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},D("PT_APPLICATION_TITLE")),l.createElement("div",{style:{display:"flex",alignItems:"center",color:"#A52A2A"}},l.createElement(t.LinkButton,{label:D("VIEW_TIMELINE"),onClick:()=>{z(!0);const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"})}})),Se&&Se.length>0&&l.createElement(t.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>Y(!H),displayOptions:H,options:Se,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className"})),l.createElement(ea,{applicationDetails:B,isLoading:X,isDataLoading:X,applicationData:null==B?void 0:B.applicationData,mutate:$,id:"timeline",workflowDetails:Z,businessService:K,moduleCode:"PT",showToast:U,setShowToast:F,closeToast:ee,timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE",statusAttribute:"state",MenuStyle:{color:"#FFFFFF",fontSize:"18px"}}))});const la=e=>{const{propertyId:t,userType:n}=e;return l.createElement(Bo,{propertyId:t,userType:n})};u.interceptors.response.use(e=>e,e=>{var t,n;const l=window.location.pathname.split("/").includes("employee");if(null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.Errors)for(const t of e.response.data.Errors){var o,i,a,r;t.message.includes("InvalidAccessTokenException")?(localStorage.clear(),sessionStorage.clear(),window.location.href=(l?"/digit-ui/employee/user/login":"/digit-ui/citizen/login")+"?from="+encodeURIComponent(window.location.pathname+window.location.search)):null!=t&&null!==(o=t.message)&&void 0!==o&&null!==(i=o.toLowerCase())&&void 0!==i&&i.includes("internal server error")||null!=t&&null!==(a=t.message)&&void 0!==a&&null!==(r=a.toLowerCase())&&void 0!==r&&r.includes("some error occured")?window.location.href=(l?"/digit-ui/employee/user/error":"/digit-ui/citizen/error")+"?type=maintenance&from="+encodeURIComponent(window.location.pathname+window.location.search):t.message.includes("ZuulRuntimeException")&&(window.location.href=(l?"/digit-ui/employee/user/error":"/digit-ui/citizen/error")+"?type=notfound&from="+encodeURIComponent(window.location.pathname+window.location.search))}throw e}),window.Digit=window.Digit||{},window.Digit={...window.Digit,RequestCache:window.Digit.RequestCache||{}};const oa=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ia=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(oa,null)),aa=e=>{var a,r;let{applicationData:u}=e;const{t:d}=o.useTranslation(),s=i.useHistory(),{state:c}=i.useLocation(),[p,m]=n.useState(!1),[v,E,_]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[T,y,S]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),{isLoading:f}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","CommonFieldsConfig");n.useEffect(()=>{E(!1),S()},[]),console.log("applicationData",u);let P={usageCategory:"",structureType:null==u||null===(a=u.additionalDetails)||void 0===a?void 0:a.structureType,ageOfProperty:null==u||null===(r=u.additionalDetails)||void 0===r?void 0:r.ageOfProperty};const g={originalData:u,address:null==u?void 0:u.address,propertyStructureDetails:P,owners:null==u?void 0:u.owners.map(e=>({...e,ownerType:{code:e.ownerType,i18nKey:e.ownerType},relationship:{code:e.relationship,i18nKey:"PT_FORM3_"+e.relationship},gender:{code:e.gender,i18nKey:"PT_FORM3_"+e.gender,value:e.gender}}))};return sessionStorage.setItem("PropertyInitials",JSON.stringify(null==g?void 0:g.originalData)),f?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{heading:d("PT_UPDATE_PROPERTY"),isDisabled:!p,label:d("ES_COMMON_APPLICATION_SUBMIT"),config:[{head:"ES_NEW_APPLICATION_LOCATION_DETAILS",body:[{route:"map",component:"PTSelectGeolocation",nextStep:"pincode",hideInEmployee:!0,key:"address",texts:{header:"PT_GEOLOCATON_HEADER",cardText:"PT_GEOLOCATION_TEXT",nextText:"PT_COMMON_NEXT",skipAndContinueText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"pincode",component:"PTSelectPincode",texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PINCODE_LABEL",cardText:"PT_PINCODE_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,key:"address",nextStep:"address",type:"component"},{route:"address",component:"PTSelectAddress",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_CITY_MOHALLA_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"address",nextStep:"street",isMandatory:!0,type:"component"},{type:"component",route:"street",component:"PTSelectStreet",key:"address",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"PT_STREET_TEXT",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"landmark"},{type:"component",route:"landmark",component:"SelectLandmark",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TITLE",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},key:"address",nextStep:"proof",hideInEmployee:!0},{type:"component",route:"proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PROOF_OF_ADDRESS_HEADER",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"address",nextStep:"owner-ship-details@0",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"info",component:"PropertyTax",nextStep:"isResidential",hideInEmployee:!0,key:"Documents"},{type:"component",route:"isResidential",isMandatory:!0,component:"IsResidential",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_HEADER",cardText:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"isResdential",withoutLabel:!0,hideInEmployee:!0,nextStep:{PT_COMMON_YES:"property-type",PT_COMMON_NO:"property-usage-type"}},{type:"component",route:"property-usage-type",isMandatory:!0,component:"PropertyUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER",cardText:"PT_PROPERTY_DETAILS_USAGE_TYPE_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"property-type",key:"usageCategoryMajor",withoutLabel:!0},{type:"component",isMandatory:!0,component:"ProvideSubUsageType",key:"usageCategoryMinor",withoutLabel:!0},{type:"component",route:"provide-sub-usage-type",isMandatory:!0,component:"ProvideSubUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"is-any-part-of-this-floor-unoccupied",no:"provide-sub-usage-type-of-rented-area"},hideInEmployee:!0},{type:"component",route:"property-type",isMandatory:!0,component:"PropertyType",texts:{headerCaption:"",header:"PT_ASSESMENT1_PROPERTY_TYPE",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"number-of-floors",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"provide-floor-no",COMMON_PROPTYPE_VACANT:"area"},key:"PropertyType",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Area",key:"landarea",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Electricity",key:"electricity",withoutLabel:!0},{type:"component",isMandatory:!0,component:"UID",key:"uid",withoutLabel:!0},{type:"component",isMandatory:!0,component:"PropertyStructureDetails",key:"propertyStructureDetails",withoutLabel:!0},{type:"component",route:"electricity",isMandatory:!0,component:"Electricity",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"uid",isMandatory:!0,component:"UID",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"area",isMandatory:!0,component:"Area",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"number-of-floors",isMandatory:!0,component:"PropertyFloorDetails",texts:{headerCaption:"",header:"BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL",cardText:"PT_PROPERTY_DETAILS_NO_OF_FLOORS_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"number-of-basements@0",key:"noOfFloors",withoutLabel:!0},{type:"component",component:"Units",key:"units",withoutLabel:!0},{type:"component",route:"provide-floor-no",isMandatory:!0,component:"ProvideFloorNo",texts:{headerCaption:"",header:"PT_FLOOR_NUMBER_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"floordetails",key:"Floorno",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"is-this-floor-self-occupied",isMandatory:!0,component:"IsThisFloorSelfOccupied",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_FLOOR_OCC_HEADER",cardText:"PT_ASSESSMENT_FLOW_FLOOR_OCC_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_YES_IT_IS_SELFOCCUPIED:"provide-sub-usage-type",PT_YES_IT_IS_SELFOCCUPIED1:"is-any-part-of-this-floor-unoccupied",PT_PARTIALLY_RENTED_OUT:"area",PT_PARTIALLY_RENTED_OUT1:"area",PT_FULLY_RENTED_OUT:"provide-sub-usage-type-of-rented-area",PT_FULLY_RENTED_OUT1:"rental-details"},hideInEmployee:!0},{type:"component",route:"number-of-basements@0",isMandatory:!0,component:"PropertyBasementDetails",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_NO_OF_BASEMENTS_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{PT_NO_BASEMENT_OPTION:"floordetails",PT_ONE_BASEMENT_OPTION:"floordetails",PT_TWO_BASEMENT_OPTION:"floordetails"},key:"noOofBasements",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"floordetails",isMandatory:!0,component:"GroundFloorDetails",texts:{headerCaption:"",cardText:"PT_PROPERTY_DETAILS_FLOOR_DETAILS_TEXT",submitBarLabel:"Next"},nextStep:"is-this-floor-self-occupied",key:"units",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"rental-details",isMandatory:!0,component:"RentalDetails",texts:{header:"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"is-any-part-of-this-floor-unoccupied",hideInEmployee:!0},{type:"component",route:"provide-sub-usage-type-of-rented-area",isMandatory:!0,component:"ProvideSubUsageTypeOfRentedArea",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_RENT_SUB_USAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"rental-details",hideInEmployee:!0},{type:"component",route:"is-any-part-of-this-floor-unoccupied",isMandatory:!0,component:"IsAnyPartOfThisFloorUnOccupied",texts:{header:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_HEADER",cardText:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_COMMON_NO:"map",PT_COMMON_YES:"un-occupied-area"},hideInEmployee:!0},{type:"component",route:"un-occupied-area",isMandatory:!0,component:"UnOccupiedArea",texts:{header:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_HEADER",cardText:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:""},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_PROPERTIES_OWNERSHIP",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"owner-details","INDIVIDUAL.MULTIPLEOWNERS":"owner-details"}},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"ES_NEW_APPLICATION_DOCUMENTS_REQUIRED",body:[{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}].map(e=>({...e,body:[...e.body.filter(e=>!e.hideInEmployee),{withoutLabel:!0,type:"custom",populators:{name:"originalData",component:(e,t)=>l.createElement(l.Fragment,null)}}]})),fieldStyle:{marginRight:0},onSubmit:e=>{var t,n,l,o,i,a,r,d,p,m,v,E,_,T,y,S;console.log("dataaaa",e);const f={...u,address:{...null==u?void 0:u.address,...null==e?void 0:e.address,city:null==e||null===(t=e.address)||void 0===t||null===(n=t.city)||void 0===n?void 0:n.name},propertyType:null==e||null===(l=e.PropertyType)||void 0===l?void 0:l.code,creationReason:"PT.UPDATE"===(null==c||null===(o=c.workflow)||void 0===o?void 0:o.businessService)||null==(null==u?void 0:u.documents)?"UPDATE":null==u?void 0:u.creationReason,usageCategory:null!=e&&null!==(i=e.usageCategoryMinor)&&void 0!==i&&i.subuagecode?null==e||null===(a=e.usageCategoryMinor)||void 0===a?void 0:a.subuagecode:null==e||null===(r=e.usageCategoryMajor)||void 0===r?void 0:r.code,usageCategoryMajor:null==e||null===(d=e.usageCategoryMajor)||void 0===d?void 0:d.code.split(".")[0],usageCategoryMinor:(null==e||null===(p=e.usageCategoryMajor)||void 0===p?void 0:p.code.split(".")[1])||null,noOfFloors:Number(null==e?void 0:e.noOfFloors),landArea:Number(null==e?void 0:e.landarea),superBuiltUpArea:Number(null==e?void 0:e.landarea),additionalDetails:{...e.originalData.additionalDetails,electricity:e.electricity,uid:e.uid,ageOfProperty:null==e||null===(m=e.propertyStructureDetails)||void 0===m?void 0:m.ageOfProperty,structureType:null==e||null===(v=e.propertyStructureDetails)||void 0===v?void 0:v.structureType},source:"MUNICIPAL_RECORDS",channel:"CFC_COUNTER",documents:null!=u&&u.documents?null==u?void 0:u.documents.map(t=>{var n,l;let o=t.documentType.split("."),i=null==e||null===(n=e.documents)||void 0===n||null===(l=n.documents)||void 0===l?void 0:l.find(e=>e.documentType.includes(o[0]+"."+o[1]));return{...t,...i}}):(null==e||null===(E=e.documents)||void 0===E?void 0:E.documents.length)>0?null==e||null===(_=e.documents)||void 0===_?void 0:_.documents:null,units:[...(null==u||null===(T=u.units)||void 0===T?void 0:T.map(e=>({...e,active:!1})))||[],...(null==e||null===(y=e.units)||void 0===y?void 0:y.map(e=>({...e,active:!0})))||[]],workflow:null==c?void 0:c.workflow,applicationStatus:"UPDATE"};"OPEN"===(null==c||null===(S=c.workflow)||void 0===S?void 0:S.action)&&(f.units=f.units.filter(e=>e.active)),s.push("/digit-ui/employee/pt/response",{Property:f,key:"UPDATE",action:"SUBMIT"})},defaultValues:g,onFormValueChange:(e,t,n)=>{1==Object.keys(n.errors).length&&n.errors.documents?m(!0):m(!Object.keys(n.errors).length)}})},ra=(e,t,n,l,o)=>o((l?"E":"C")+"S_PT_RESPONSE_"+(t||"CREATE")+"_"+e+(n?"":"_ERROR")),ua=(e,t,n,l)=>ra("ACTION",e,t,n,l),da=(e,t,n,l)=>ra("LABEL",e,t,n,l),sa=e=>{var n,o,i,a,r,u,d,s,c;return l.createElement(t.Banner,{message:ua((null==e||null===(n=e.data)||void 0===n||null===(o=n.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationStatus)||e.action,e.isSuccess,e.isEmployee,e.t),applicationNumber:null==e||null===(a=e.data)||void 0===a||null===(r=a.Properties)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.acknowldgementNumber,info:da((null===(d=e.data)||void 0===d||null===(s=d.Properties)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.applicationStatus)||e.action,e.isSuccess,e.isEmployee,e.t),successful:e.isSuccess})},ca=e=>{let{applicationData:a}=e;const{t:r}=o.useTranslation(),[u,d]=n.useState(!1),{data:s}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","MutationDocuments"),c={originalData:a},[p,m,v]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[E,_,T]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{});n.useEffect(()=>{m(!1),T()},[]);const y=i.useHistory(),S=Un;return console.log("config",S),l.createElement(t.FormComposer,{heading:r("ES_TITLE_MUTATE_PROPERTY"),isDisabled:!u,label:r("ES_COMMON_APPLICATION_SUBMIT"),config:S.map(e=>({...e,body:[...e.body.filter(e=>!e.hideInEmployee),{withoutLabel:!0,type:"custom",populators:{name:"originalData",component:(e,t)=>l.createElement(l.Fragment,null)}}]})),fieldStyle:{marginRight:0},onSubmit:e=>{var t,n,l,o,i,a,r,u,d;e.originalData.owners=null===(t=e.originalData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n.filter(e=>"ACTIVE"==e.status);let{additionalDetails:c}=e,p=(null==e||null===(l=e.originalData)||void 0===l||null===(o=l.documents)||void 0===o?void 0:o.filter(e=>{var t;return!(null!=s&&null!==(t=s.PropertyTax)&&void 0!==t&&t.MutationDocuments.some(t=>e.documentType.includes(t.code)))}))||[];const m={Property:{...e.originalData,creationReason:"MUTATION",owners:[...null===(i=e.originalData)||void 0===i||null===(a=i.owners)||void 0===a?void 0:a.map(t=>({...t,landlineNumber:e.owners[0].altContactNumber,altContactNumber:e.owners[0].altContactNumber,status:"INACTIVE"})),...e.owners.map((t,n)=>{var l,o,i,a;let r={},u=t.gender.code,d=t.ownerType.code,s=t.relationship.code,c={ownerSequence:n,ownerName:null==t?void 0:t.name};if(r.documents=[null==e||null===(l=e.documents)||void 0===l||null===(o=l.documents)||void 0===o?void 0:o.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})],t.documents){let{documentUid:e,documentType:n}=t.documents;r.documents=[...r.documents,{documentUid:e,documentType:n.code,fileStoreId:e}]}return{...t,gender:u,ownerType:d,relationship:s,inistitutetype:null==t||null===(i=t.institution)||void 0===i||null===(a=i.type)||void 0===a?void 0:a.code,landlineNumber:null==t?void 0:t.altContactNumber,...r,status:"ACTIVE",additionalDetails:c}})],additionalDetails:{...c,isMutationInCourt:null===(r=c.isMutationInCourt)||void 0===r?void 0:r.code,reasonForTransfer:null==c?void 0:c.reasonForTransfer.code,isPropertyUnderGovtPossession:null==c||null===(u=c.isPropertyUnderGovtPossession)||void 0===u?void 0:u.code,documentDate:new Date(null==c?void 0:c.documentDate).getTime(),marketValue:Number(null==c?void 0:c.marketValue)},ownershipCategory:e.ownershipCategory.code,documents:[...p,...null==e||null===(d=e.documents)||void 0===d?void 0:d.documents.map(e=>e.documentType.includes("OWNER.TRANSFERREASONDOCUMENT")?{...e,documentType:e.documentType.split(".")[2]}:e)],workflow:{action:"OPEN",businessService:"PT.MUTATION",moduleName:"PT",tenantId:e.originalData.tenantId}}};m.Property.ownershipCategory.includes("INDIVIDUAL")||(m.Property.institution={nameOfAuthorizedPerson:e.owners[0].name,name:e.owners[0].institution.name,designation:e.owners[0].designation,tenantId:e.originalData.tenantId,type:e.owners[0].institution.type.code}),y.replace("/digit-ui/employee/pt/response",{Property:m.Property,key:"UPDATE",action:"SUBMIT"})},defaultValues:c,onFormValueChange:(e,t,n)=>{var l,o,i,a;if(d(!Object.keys(n.errors).length),!Object.keys(n.errors).length){let{additionalDetails:e}=t,{documentDate:n,documentNumber:l,documentValue:o,marketValue:i,reasonForTransfer:a}=e;d(!!(n&&l&&o&&i&&a))}null!=t&&null!==(l=t.ownershipCategory)&&void 0!==l&&null!==(o=l.code)&&void 0!==o&&null!==(i=o.includes)&&void 0!==i&&i.call(o,"MULTIPLE")&&(null==t||null===(a=t.owners)||void 0===a?void 0:a.length)<2&&d(!1)}})},pa=e=>{const{t:t}=o.useTranslation();return t(null!=e&&e.isSuccess?"CS_PROPERTY_FEEDBACK_SUCCESS":"CS_PROPERTY_FEEDBACK_FAILED")},ma=e=>l.createElement(t.Banner,{message:pa(e),applicationNumber:"",style:e.isMobile?{width:"unset"}:{width:"740px"},successful:null==e?void 0:e.isSuccess}),va={PTLandArea:e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e,s={};const[p,m]=n.useState(null===(o=u.landArea)||void 0===o?void 0:o.floorarea),[v,E]=n.useState(null);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:a,onChange:function(e){e.target.value.length>1024?E("CS_COMMON_LANDMARK_MAX_LENGTH"):(E(null),m(e.target.value))},forcedError:i(v),onSelect:()=>{r("landArea",{floorarea:p})},onSkip:()=>r(),t:i,isDisabled:v||!p,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+i("PT_PLOT_SIZE_SQUARE_FEET_LABEL")),l.createElement(t.TextInput,d({t:i,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"floorarea",value:p,onChange:function(e){m(e.target.value)}},s={pattern:"^([0-9]){0,8}$",type:"number",title:i("PT_PLOT_SIZE_ERROR_MESSAGE")}))))},PTCheckPage:e=>{var a,r;let{onSubmit:u,value:d={}}=e;const{t:s}=o.useTranslation();i.useHistory(),console.log("value",d);const{address:p,PropertyType:m,electricity:v,uid:E,units:_=[{}],landarea:T,landArea:y,ownershipCategory:S,IsAnyPartOfThisFloorUnOccupied:f,selfOccupied:P,owners:g,isEditProperty:N,isUpdateProperty:A}=d,O=N||A?"edit-application":"new-application";Le(null==P?void 0:P.i18nKey),Me(null==f?void 0:f.i18nKey),De(null==m?void 0:m.i18nKey);const[I,h]=n.useState(!1);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:4}):null,l.createElement(t.Card,null,l.createElement(t.CardHeader,null,s("PT_CHECK_CHECK_YOUR_ANSWERS")),l.createElement("div",null,l.createElement(t.CardText,null,s("PT_CHECK_CHECK_YOUR_ANSWERS_TEXT")),l.createElement(t.CardSubHeader,null,s("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PT_PROPERTY_ADDRESS_SUB_HEADER"),text:(null!=p&&p.doorNo?(null==p?void 0:p.doorNo)+", ":"")+" "+(null!=p&&p.street?(null==p?void 0:p.street)+", ":"")+(null!=p&&p.landmark?(null==p?void 0:p.landmark)+", ":"")+s(null==p?void 0:p.locality.code)+", "+s(null==p?void 0:p.city.code)+","+(s(null==p?void 0:p.pincode)?""+p.pincode:" "),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/pincode"})}),l.createElement(t.Row,{label:s("PT_PROOF_OF_ADDRESS_SUB_HEADER"),text:""+((null==p||null===(a=p.documents)||void 0===a||null===(r=a.ProofOfAddress)||void 0===r?void 0:r.name)&&Ae(p.documents.ProofOfAddress.name)||"na"),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/proof"})})),l.createElement(t.CardSubHeader,null,s("PT_OWNERSHIP_DETAILS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PT_FORM3_OWNERSHIP_TYPE"),text:s(be("PT_OWNERSHIP_"+(null==S?void 0:S.code))),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-ship-details@0"})})),l.createElement("div",null,g&&g.map&&g.map((e,n)=>{var o,i,a,r,u,d,c,p;return l.createElement("div",{key:n},1!=g.length&&l.createElement(t.CardSubHeader,null,s("PT_OWNER_SUB_HEADER")," - ",n+1),l.createElement("div",null,"INSTITUTIONALPRIVATE"==(null==S?void 0:S.value)||"INSTITUTIONALGOVERNMENT"==(null==S?void 0:S.value)?l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PT_COMMON_INSTITUTION_NAME"),text:""+s(be(null==e?void 0:e.inistitutionName)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:s("PT_TYPE_OF_INSTITUTION"),text:""+s(be(null==e||null===(o=e.inistitutetype)||void 0===o?void 0:o.code)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:s("PT_OWNER_NAME"),text:""+s(be(null==e?void 0:e.name)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_COMMON_AUTHORISED_PERSON_DESIGNATION"),text:""+s(be(null==e?void 0:e.designation)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_FORM3_MOBILE_NUMBER"),text:""+s(be(null==e?void 0:e.mobileNumber)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_OWNERSHIP_INFO_TEL_PHONE_NO"),text:""+s(be(null==e?void 0:e.altContactNumber)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_FORM3_EMAIL_ID"),text:""+s(be(null==e?void 0:e.emailId)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_OWNERSHIP_INFO_CORR_ADDR"),text:""+s(be(null==e?void 0:e.permanentAddress)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/institutional-owner-address/"+n})}),l.createElement(t.Row,{label:""+s("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),text:""+s(be(null==e?void 0:e.isCorrespondenceAddress)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/institutional-owner-address/"+n})}),l.createElement(t.Row,{label:s("PT_PROOF_IDENTITY_HEADER"),text:""+((null==e||null===(i=e.documents.proofIdentity)||void 0===i?void 0:i.name)&&Ae(e.documents.proofIdentity.name)||"na"),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/institutional-proof-of-identity/"+n})})):l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PT_OWNER_NAME"),text:""+s(be(null==e?void 0:e.name)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:s("PT_FORM3_GENDER"),text:""+s(be(null==e||null===(a=e.gender)||void 0===a?void 0:a.code)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:""+s("PT_FORM3_MOBILE_NUMBER"),text:""+s(be(null==e?void 0:e.mobileNumber)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:s("PT_FORM3_GUARDIAN_NAME"),text:""+s(be(null==e?void 0:e.fatherOrHusbandName)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:s("PT_FORM3_RELATIONSHIP"),text:""+s(be(null==e||null===(r=e.relationship)||void 0===r?void 0:r.code)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:s("PT_FORM3_EMAIL_ID"),text:""+s(be(null==e?void 0:e.emailId)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-details/"+n})}),l.createElement(t.Row,{label:s("PT_SPECIAL_OWNER_CATEGORY"),text:""+s(be(null==e||null===(u=e.ownerType)||void 0===u?void 0:u.code)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/special-owner-category/"+n})}),l.createElement(t.Row,{label:""+s("PT_OWNERS_ADDRESS"),text:""+s(be(null==e?void 0:e.permanentAddress)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/owner-address/"+n})}),"NONE"!==(null==e||null===(d=e.ownerType)||void 0===d?void 0:d.code)?l.createElement(t.Row,{label:s("PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER"),text:""+((null==e||null===(c=e.documents.specialProofIdentity)||void 0===c?void 0:c.name)&&Ae(e.documents.specialProofIdentity.name)||"na"),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/special-owner-category-proof/"+n})}):"",l.createElement(t.Row,{label:s("PT_PROOF_IDENTITY_HEADER"),text:""+((null==e||null===(p=e.documents.proofIdentity)||void 0===p?void 0:p.name)&&Ae(e.documents.proofIdentity.name)||"na"),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/proof-of-identity/"+n})}))))})),l.createElement(t.CardSubHeader,null,s("PT_ASSESMENT_INFO_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PT_ASSESMENT1_PROPERTY_TYPE"),text:""+s(be(null==m?void 0:m.i18nKey)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/property-type"})}),l.createElement(t.Row,{label:s("PT_ASSESMENT1_ELECTRICITY_NUMBER"),text:""+s(be(null==v?void 0:v.electricity)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/electricity-number"})}),l.createElement(t.Row,{label:s("PT_ASSESMENT1_ELECTRICITY_UID"),text:""+s(be(null==E?void 0:E.uid)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/electricity-uid"})}),"VACANT"!==(null==m?void 0:m.code)&&l.createElement(t.Row,{label:s("PT_ASSESMENT1_PLOT_SIZE"),text:""+(null==y?void 0:y.floorarea),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/landarea"})}),"VACANT"===(null==m?void 0:m.code)&&l.createElement(t.Row,{label:s("PT_ASSESMENT1_PLOT_SIZE"),text:""+(null==T?void 0:T.floorarea),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}),"VACANT"!==(null==m?void 0:m.code)&&_.sort((e,t)=>e.floorNo-t.floorNo).map((e,n)=>{var o,i,a,r;return l.createElement("div",null,_.length>1&&l.createElement(t.CardSubHeader,null,s("PT_UNIT"),"-",n),l.createElement(t.Row,{label:s("PT_BUILT_UP_AREA"),text:""+(null==e||null===(o=e.constructionDetail)||void 0===o?void 0:o.builtUpArea),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}),l.createElement(t.Row,{label:s("PT_ASSESMENT_INFO_OCCUPLANCY"),text:s("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}),l.createElement(t.Row,{label:s("PT_FORM2_USAGE_TYPE"),text:s("PROPERTYTAX_BILLING_SLAB_"+((null==e||null===(i=e.usageCategory)||void 0===i?void 0:i.split(".").length)>2?null==e||null===(a=e.usageCategory)||void 0===a?void 0:a.split(".")[1]:null==e||null===(r=e.usageCategory)||void 0===r?void 0:r.split(".")[0])),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})})," ",(null==e?void 0:e.unitType)&&l.createElement(t.Row,{label:s("PT_FORM2_SUB_USAGE_TYPE"),text:s("PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.unitType)),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}),l.createElement(t.Row,{label:s("PT_FLOOR_NO"),text:0===(null==e?void 0:e.floorNo)?s("PT_GROUND_FLOOR_OPTION"):(null==e?void 0:e.floorNo)<0?(null==e?void 0:e.floorNo)+" and Ground floor":"Ground floor +"+(null==e?void 0:e.floorNo),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}),(null==e?void 0:e.arv)&&l.createElement(t.Row,{label:s("PT_PROPERTY_ANNUAL_RENT_LABEL"),text:""+(null==e?void 0:e.arv),actionButton:l.createElement(Et,{jumpTo:"/digit-ui/citizen/pt/property/"+O+"/PtUnits"})}))})),l.createElement(t.CheckBox,{label:s("PT_FINAL_DECLARATION_MESSAGE"),onChange:()=>{h(!I)},styles:{height:"auto"}})),l.createElement(t.SubmitBar,{label:s("PT_COMMON_BUTTON_SUBMIT"),onSubmit:u,disabled:!I})))},PTAcknowledgement:e=>{var a,r,u,d,s;let{data:c,onSuccess:p}=e;const{t:m}=o.useTranslation(),v=window.location.href.includes("property-mutation"),E=Digit.ULBService.getCurrentTenantId(),_=Digit.Hooks.pt.usePropertyAPI(null!=c&&null!==(a=c.address)&&void 0!==a&&a.city?null===(r=c.address)||void 0===r||null===(u=r.city)||void 0===u?void 0:u.code:E,!window.location.href.includes("edit-application")&&!v),{data:T}=Digit.Hooks.useStore.getInitData(),{tenants:y}=(i.useRouteMatch(),T||{});return n.useEffect(()=>{try{var e,t,n,l,o;let i=v?null===(e=c.Property)||void 0===e?void 0:e.address.tenantId:null!=c&&null!==(t=c.address)&&void 0!==t&&t.city?null===(n=c.address)||void 0===n||null===(l=n.city)||void 0===l?void 0:l.code:i;c.tenantId=i;let a=window.location.href.includes("edit-application")?function(e,t){var n,l,o,i,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f;void 0===e&&(e={});let P=e.isResdential,g=e.PropertyType,N=e.selfOccupied,A=e.Subusagetypeofrentedarea||null,O=e.subusagetype||null,I=e.IsAnyPartOfThisFloorUnOccupied||null,h=(null===(n=e)||void 0===n||null===(l=n.floordetails)||void 0===l?void 0:l.builtUpArea)||null,C=null===(o=e)||void 0===o?void 0:o.noOfFloors,R=null===(i=e)||void 0===i?void 0:i.noOofBasements,b=null===(a=e)||void 0===a?void 0:a.units;e.units=null===(r=e)||void 0===r||null===(u=r.units)||void 0===u?void 0:u.map(e=>{var t;return{...e,unitType:null==e||null===(t=e.unitType)||void 0===t?void 0:t.code}});let D=Array.isArray(null===(d=e)||void 0===d?void 0:d.units)&&null!==(s=e)&&void 0!==s&&s.units[-1]?null===(c=e)||void 0===c?void 0:c.units[-1]:null,L=Array.isArray(null===(p=e)||void 0===p?void 0:p.units)&&null!==(m=e)&&void 0!==m&&m.units[-2]?null===(v=e)||void 0===v?void 0:v.units[-2]:null;e=(e=>{var t;const{address:n,owners:l}=e;let o=[];var i,a,r,u,d,s,c,p;return null!=n&&null!==(t=n.documents.ProofOfAddress)&&void 0!==t&&t.id?o.push({fileStoreId:(null==n||null===(i=n.documents.ProofOfAddress)||void 0===i?void 0:i.fileStoreId)||"",documentType:(null==n||null===(a=n.documents.ProofOfAddress)||void 0===a||null===(r=a.documentType)||void 0===r?void 0:r.code)||"",id:(null==n||null===(u=n.documents.ProofOfAddress)||void 0===u?void 0:u.id)||"",status:(null==n||null===(d=n.documents.ProofOfAddress)||void 0===d?void 0:d.status)||""}):o.push({fileStoreId:(null==n||null===(s=n.documents.ProofOfAddress)||void 0===s?void 0:s.fileStoreId)||"",documentType:(null==n||null===(c=n.documents.ProofOfAddress)||void 0===c||null===(p=c.documentType)||void 0===p?void 0:p.code)||""}),l&&l.length>0&&l.map(e=>{e.documents.map(e=>{o.push(e)})}),e.documents=o,e})(e=function(e){var t,n,l,o;void 0===e&&(e=[]);const{institution:i,owners:a}=e;var r,u,d,s;if("INSTITUTIONALPRIVATE"===(null===(t=e)||void 0===t||null===(n=t.ownershipCategory)||void 0===n?void 0:n.value)||"INSTITUTIONALGOVERNMENT"===(null===(l=e)||void 0===l||null===(o=l.ownershipCategory)||void 0===o?void 0:o.value)){if("INSTITUTIONALPRIVATE"===(null===(r=e)||void 0===r||null===(u=r.ownershipCategory)||void 0===u?void 0:u.value)||"INSTITUTIONALGOVERNMENT"===(null===(d=e)||void 0===d||null===(s=d.ownershipCategory)||void 0===s?void 0:s.value)){var c,p,m,v,E,_,T,y,S,f;i.designation=null===(c=a[0])||void 0===c?void 0:c.designation,i.name=null===(p=a[0])||void 0===p?void 0:p.inistitutionName,i.nameOfAuthorizedPerson=null===(m=a[0])||void 0===m?void 0:m.name,i.tenantId=null===(v=e)||void 0===v||null===(E=v.address)||void 0===E||null===(_=E.city)||void 0===_?void 0:_.code,i.type=null===(T=a[0])||void 0===T||null===(y=T.inistitutetype)||void 0===y?void 0:y.value;let t=[];var P,g;null!==(S=a[0])&&void 0!==S&&null!==(f=S.documents.proofIdentity)&&void 0!==f&&f.fileStoreId&&a[0].documents.proofIdentity.id?t.push({fileStoreId:a[0].documents.proofIdentity.fileStoreId||"",documentType:(null===(P=a[0].documents.proofIdentity.documentType)||void 0===P?void 0:P.code)||"",id:a[0].documents.proofIdentity.id||"",status:a[0].documents.proofIdentity.status||""}):t.push({fileStoreId:a[0].documents.proofIdentity.fileStoreId||"",documentType:(null===(g=a[0].documents.proofIdentity.documentType)||void 0===g?void 0:g.code)||""}),e.owners.forEach(e=>{var n,l,o,i,r,u,d,s,c;e.altContactNumber=null===(n=a[0])||void 0===n?void 0:n.altContactNumber,e.correspondenceAddress=null===(l=a[0])||void 0===l?void 0:l.permanentAddress,e.designation=null===(o=a[0])||void 0===o?void 0:o.designation,e.emailId=null===(i=a[0])||void 0===i?void 0:i.emailId,e.isCorrespondenceAddress=null===(r=a[0])||void 0===r?void 0:r.isCorrespondenceAddress,e.mobileNumber=null===(u=a[0])||void 0===u?void 0:u.mobileNumber,e.name=null===(d=a[0])||void 0===d?void 0:d.name,e.ownerType=(null===(s=a[0])||void 0===s||null===(c=s.ownerType)||void 0===c?void 0:c.code)||"NONE",e.documents=t}),e.institution=i}}else e.owners.forEach(e=>{var t,n,l,o,i;let a=[];var r,u,d,s;"NONE"!=(null==e||null===(t=e.ownerType)||void 0===t?void 0:t.code)&&a.push(e.documents.specialProofIdentity.id?{fileStoreId:e.documents.specialProofIdentity.fileStoreId||"",documentType:(null===(r=e.documents.specialProofIdentity.documentType)||void 0===r?void 0:r.code)||"",id:e.documents.specialProofIdentity.id||"",status:e.documents.specialProofIdentity.status||""}:{fileStoreId:e.documents.specialProofIdentity.fileStoreId||"",documentType:(null===(u=e.documents.specialProofIdentity.documentType)||void 0===u?void 0:u.code)||""}),null!=e&&null!==(n=e.documents.proofIdentity)&&void 0!==n&&n.fileStoreId&&a.push(e.documents.proofIdentity.id?{fileStoreId:e.documents.proofIdentity.fileStoreId||"",documentType:(null===(d=e.documents.proofIdentity.documentType)||void 0===d?void 0:d.code)||"",id:e.documents.proofIdentity.id||"",status:e.documents.proofIdentity.status||""}:{fileStoreId:e.documents.proofIdentity.fileStoreId||"",documentType:(null===(s=e.documents.proofIdentity.documentType)||void 0===s?void 0:s.code)||""}),e.gender=null==e||null===(l=e.gender)||void 0===l?void 0:l.code,e.ownerType=null==e||null===(o=e.ownerType)||void 0===o?void 0:o.code,e.relationship=null==e||null===(i=e.relationship)||void 0===i?void 0:i.code,e.documents=a});return e}(e=Ie(e))),(e=Re(e)).address.city=e.address.city?e.address.city:t("TENANT_TENANTS_"+Fe(null===(E=e)||void 0===E?void 0:E.tenantId.toUpperCase(),".","_"));const M={Property:{id:e.id,accountId:e.accountId,acknowldgementNumber:e.acknowldgementNumber,propertyId:e.propertyId,status:e.status||"INWORKFLOW",tenantId:e.tenantId,address:e.address,ownershipCategory:null===(_=e)||void 0===_||null===(T=_.ownershipCategory)||void 0===T?void 0:T.value,owners:e.owners,institution:e.institution||null,documents:e.documents||[],...e.propertyDetails,additionalDetails:{inflammable:!1,heightAbove36Feet:!1,isResdential:P,propertyType:g,selfOccupied:N,Subusagetypeofrentedarea:A,subusagetype:O,IsAnyPartOfThisFloorUnOccupied:I,builtUpArea:h,noOfFloors:C,noOofBasements:R,unit:b,basement1:D,basement2:L,ageOfProperty:e.propertyStructureDetails.ageOfProperty,structureType:e.propertyStructureDetails.structureType},creationReason:Ye(e),source:"MUNICIPAL_RECORDS",channel:"CITIZEN",workflow:He(e)}};let w=JSON.parse(sessionStorage.getItem("propertyInitialObject"));if(ke(null==w?void 0:w.units)&&Be(null===(y=M.Property)||void 0===y?void 0:y.units)&&null!==(S=e)&&void 0!==S&&S.isEditProperty){var x;w.units=w.units.filter(e=>e.active);let e=w.units.map(e=>({...e,active:!1}));null===(x=M.Property)||void 0===x||x.units.push(...e)}return ke(null==w?void 0:w.owners)&&Be(null===(f=M.Property)||void 0===f?void 0:f.owners)&&(M.Property.owners=[...w.owners]),null!=w&&w.auditDetails&&(M.Property.auditDetails={...w.auditDetails}),M}(c,m):v?c:function(e){var t,n,l,o,i,a,r,u,d,s,c,p;void 0===e&&(e={}),console.log("data",e);let m=e.isResdential,v=e.PropertyType,E=e.selfOccupied,_=e.Subusagetypeofrentedarea||null,T=e.subusagetype||null,y=e.IsAnyPartOfThisFloorUnOccupied||null,S=(null===(t=e)||void 0===t||null===(n=t.floordetails)||void 0===n?void 0:n.builtUpArea)||null,f=null===(l=e)||void 0===l?void 0:l.noOfFloors,P=null===(o=e)||void 0===o?void 0:o.noOofBasements,g=Array.isArray(null===(i=e)||void 0===i?void 0:i.units)&&null!==(a=e)&&void 0!==a&&a.units[-1]?null===(r=e)||void 0===r?void 0:r.units[-1]:null,N=Array.isArray(null===(u=e)||void 0===u?void 0:u.units)&&null!==(d=e)&&void 0!==d&&d.units[-2]?null===(s=e)||void 0===s?void 0:s.units[-2]:null;return e=(e=>{const{address:t,owners:n}=e;let l={},o=[];var i,a;if(n&&n.length>0)if("INSTITUTIONALPRIVATE"===(null==e||null===(i=e.ownershipCategory)||void 0===i?void 0:i.value)||"INSTITUTIONALGOVERNMENT"===(null==e||null===(a=e.ownershipCategory)||void 0===a?void 0:a.value)){var r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A;l.designation=null===(r=n[0])||void 0===r?void 0:r.designation,l.name=null===(u=n[0])||void 0===u?void 0:u.inistitutionName,l.nameOfAuthorizedPerson=null===(d=n[0])||void 0===d?void 0:d.name,l.tenantId=null==t||null===(s=t.city)||void 0===s?void 0:s.code,l.type=null===(c=n[0])||void 0===c||null===(p=c.inistitutetype)||void 0===p?void 0:p.value;let i=[];var O,I,h,C,R;null!==(m=n[0])&&void 0!==m&&null!==(v=m.documents.proofIdentity)&&void 0!==v&&v.fileStoreId&&i.push({fileStoreId:(null===(O=n[0])||void 0===O||null===(I=O.documents.proofIdentity)||void 0===I?void 0:I.fileStoreId)||"",documentType:(null===(h=n[0])||void 0===h||null===(C=h.documents.proofIdentity)||void 0===C||null===(R=C.documentType)||void 0===R?void 0:R.code)||""}),o.push({altContactNumber:null===(E=n[0])||void 0===E?void 0:E.altContactNumber,correspondenceAddress:null===(_=n[0])||void 0===_?void 0:_.permanentAddress,designation:null===(T=n[0])||void 0===T?void 0:T.designation,emailId:null===(y=n[0])||void 0===y?void 0:y.emailId,isCorrespondenceAddress:null===(S=n[0])||void 0===S?void 0:S.isCorrespondenceAddress,mobileNumber:null===(f=n[0])||void 0===f?void 0:f.mobileNumber,name:null===(P=n[0])||void 0===P?void 0:P.name,ownerType:(null===(g=n[0])||void 0===g||null===(N=g.ownerType)||void 0===N?void 0:N.code)||"NONE",documents:i,additionalDetails:{ownerSequence:0,ownerName:null===(A=n[0])||void 0===A?void 0:A.name}}),e.institution=l,e.owners=o}else n.map((e,t)=>{var n,l,i,a,r;let u=[];var d,s,c,p,m,v;"NONE"!=(null==e||null===(n=e.ownerType)||void 0===n?void 0:n.code)&&u.push({fileStoreId:(null==e||null===(d=e.documents.specialProofIdentity)||void 0===d?void 0:d.fileStoreId)||"",documentType:(null==e||null===(s=e.documents.specialProofIdentity)||void 0===s||null===(c=s.documentType)||void 0===c?void 0:c.code)||""}),null!=e&&null!==(l=e.documents.proofIdentity)&&void 0!==l&&l.fileStoreId&&u.push({fileStoreId:(null==e||null===(p=e.documents.proofIdentity)||void 0===p?void 0:p.fileStoreId)||"",documentType:(null==e||null===(m=e.documents.proofIdentity)||void 0===m||null===(v=m.documentType)||void 0===v?void 0:v.code)||""}),o.push({emailId:null==e?void 0:e.emailId,fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,gender:null==e||null===(i=e.gender)||void 0===i?void 0:i.value,isCorrespondenceAddress:null==e?void 0:e.isCorrespondenceAddress,mobileNumber:null==e?void 0:e.mobileNumber,name:null==e?void 0:e.name,ownerType:(null==e||null===(a=e.ownerType)||void 0===a?void 0:a.code)||"NONE",permanentAddress:null==e?void 0:e.permanentAddress,relationship:null==e||null===(r=e.relationship)||void 0===r?void 0:r.code,documents:u,additionalDetails:{ownerSequence:t,ownerName:null==e?void 0:e.name}})}),e.owners=o;return e})(e=(e=>{var t;const{address:n,owners:l}=e;let o=[];var i,a,r,u,d,s,c,p;return null!=n&&null!==(t=n.documents.ProofOfAddress)&&void 0!==t&&t.id?o.push({fileStoreId:(null==n||null===(i=n.documents.ProofOfAddress)||void 0===i?void 0:i.fileStoreId)||"",documentType:(null==n||null===(a=n.documents.ProofOfAddress)||void 0===a||null===(r=a.documentType)||void 0===r?void 0:r.code)||"",id:(null==n||null===(u=n.documents.ProofOfAddress)||void 0===u?void 0:u.id)||"",status:(null==n||null===(d=n.documents.ProofOfAddress)||void 0===d?void 0:d.status)||""}):o.push({fileStoreId:(null==n||null===(s=n.documents.ProofOfAddress)||void 0===s?void 0:s.fileStoreId)||"",documentType:(null==n||null===(c=n.documents.ProofOfAddress)||void 0===c||null===(p=c.documentType)||void 0===p?void 0:p.code)||""}),l&&l.length>0&&l.map(e=>{var t,n,l,i,a,r,u,d,s,c,p,m,v,E;e.documents&&e.documents.proofIdentity&&(null!=e&&null!==(t=e.documents.proofIdentity)&&void 0!==t&&t.id?o.push({fileStoreId:(null==e?void 0:e.documents.proofIdentity.fileStoreId)||"",documentType:(null==e||null===(n=e.documents.proofIdentity.documentType)||void 0===n?void 0:n.code)||"",id:(null==e||null===(l=e.documents.proofIdentity)||void 0===l?void 0:l.id)||"",status:(null==e||null===(i=e.documents.proofIdentity)||void 0===i?void 0:i.status)||""}):o.push({fileStoreId:(null==e?void 0:e.documents.proofIdentity.fileStoreId)||"",documentType:(null==e||null===(a=e.documents.proofIdentity.documentType)||void 0===a?void 0:a.code)||""})),e.documents&&e.documents.specialProofIdentity&&(null!=e&&null!==(r=e.documents.specialProofIdentity)&&void 0!==r&&r.id?o.push({fileStoreId:(null==e||null===(u=e.documents.specialProofIdentity)||void 0===u?void 0:u.fileStoreId)||"",documentType:(null==e||null===(d=e.documents.specialProofIdentity)||void 0===d||null===(s=d.documentType)||void 0===s?void 0:s.code)||"",id:(null==e||null===(c=e.documents.specialProofIdentity)||void 0===c?void 0:c.id)||"",status:(null==e||null===(p=e.documents.specialProofIdentity)||void 0===p?void 0:p.status)||""}):o.push({fileStoreId:(null==e||null===(m=e.documents.specialProofIdentity)||void 0===m?void 0:m.fileStoreId)||"",documentType:(null==e||null===(v=e.documents.specialProofIdentity)||void 0===v||null===(E=v.documentType)||void 0===E?void 0:E.code)||""}))}),e.documents=o,e})(e)),e=Ie(e),{Property:{tenantId:(e=Re(e)).tenantId,address:e.address,ownershipCategory:null===(c=e)||void 0===c||null===(p=c.ownershipCategory)||void 0===p?void 0:p.value,owners:e.owners,institution:e.institution||null,documents:e.documents||[],...e.propertyDetails,additionalDetails:{inflammable:!1,heightAbove36Feet:!1,isResdential:m,propertyType:v,selfOccupied:E,Subusagetypeofrentedarea:_,subusagetype:T,IsAnyPartOfThisFloorUnOccupied:y,builtUpArea:S,noOfFloors:f,noOofBasements:P,basement1:g,basement2:N,electricity:e.electricity.electricity,uid:e.uid.uid,ageOfProperty:e.propertyStructureDetails.ageOfProperty,structureType:e.propertyStructureDetails.structureType},creationReason:Ye(e),source:"MUNICIPAL_RECORDS",channel:"CITIZEN"}}}(c);a.Property.tenantId=(null==a||null===(o=a.Property)||void 0===o?void 0:o.tenantId)||i,_.mutate(a,{onSuccess:p})}catch(e){log("error",e)}},[]),_.isLoading||_.isIdle?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(Ot,{t:m,data:_.data,isSuccess:_.isSuccess,isLoading:_.isIdle||_.isLoading}),_.isSuccess&&l.createElement(t.CardText,null,m("CS_FILE_PROPERTY_RESPONSE")),!_.isSuccess&&l.createElement(t.CardText,null,m("CS_FILE_PROPERTY_FAILED_RESPONSE"),". ",_.error.response.data.Errors[0].message," "),l.createElement(t.StatusTable,null,_.isSuccess&&l.createElement(t.Row,{rowContainerStyle:At,last:!0,label:m("PT_COMMON_TABLE_COL_PT_ID"),text:null==_||null===(d=_.data)||void 0===d||null===(s=d.Properties[0])||void 0===s?void 0:s.propertyId,textStyle:{whiteSpace:"pre",width:"60%"}})),_.isSuccess&&l.createElement(t.SubmitBar,{label:m("PT_DOWNLOAD_ACK_FORM"),onSubmit:function(){try{const{Properties:e=[]}=_.data;let t=e&&e[0]||{};const n=y.find(e=>e.code===t.tenantId);let l=t.tenantId||l;return Promise.resolve(Digit.PTService.search({tenantId:l,filters:{propertyIds:null==t?void 0:t.propertyId,status:"INACTIVE"}})).then(function(e){var l,o,i;return t.transferorDetails=(null==e||null===(l=e.Properties)||void 0===l?void 0:l[0])||[],t.isTransferor=!0,t.transferorOwnershipCategory=null==e||null===(o=e.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.ownershipCategory,Promise.resolve(gt({...t},n,m)).then(function(e){Digit.Utils.pdf.generate(e)})})}catch(e){return Promise.reject(e)}}}),l.createElement(i.Link,{to:"/digit-ui/citizen"},l.createElement(t.LinkButton,{label:m("CORE_COMMON_GO_TO_HOME")})))},PropertyTax:e=>{var o,i;let{t:a,config:r,onSelect:u}=e;Digit.ULBService.getCurrentTenantId();const d=Digit.ULBService.getStateId();sessionStorage.removeItem("docReqScreenByBack");const s=null!=r&&r.isMutation?["MutationDocuments"]:"Documents",{isLoading:c,data:p={}}=Digit.Hooks.pt.usePropertyMDMS(d,"PropertyTax",s);let m=null==p||null===(o=p.PropertyTax)||void 0===o?void 0:o[null!=r&&r.isMutation?s[0]:s];return null!=r&&r.isMutation||(m=null===(i=m)||void 0===i?void 0:i.filter(e=>e["digit-citizen"])),n.useEffect(()=>{window.process={...window.process}},[]),Digit.Hooks.createTokenAPI(),n.useEffect(function(){try{const e=function(){if(window.location.href.includes("code")){let e=window.location.href.split("=")[1].split("&")[0],t={code_verifier:sessionStorage.getItem("code_verfier"),code:e,module:"PT"};return console.log("token",e,t,sessionStorage.getItem("code_verfier")),Promise.resolve(Digit.DigiLockerService.token({TokenReq:t})).then(function(e){var t;sessionStorage.setItem("DigiLocker.token1",null==e||null===(t=e.TokenRes)||void 0===t?void 0:t.access_token)})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[]),l.createElement(l.Fragment,null,l.createElement(t.Card,null,l.createElement(t.CardHeader,null,a(r.isMutation?"PT_REQIURED_DOC_TRANSFER_OWNERSHIP":"PT_DOC_REQ_SCREEN_HEADER")),l.createElement("div",null,l.createElement(t.CardText,{className:"primaryColor"},a("PT_DOC_REQ_SCREEN_SUB_HEADER")),l.createElement(t.CardText,{className:"primaryColor"},a("PT_DOC_REQ_SCREEN_TEXT")),l.createElement(t.CardText,{className:"primaryColor"},a("PT_DOC_REQ_SCREEN_SUB_TEXT")),l.createElement(t.CardSubHeader,null,a("PT_DOC_REQ_SCREEN_LABEL")),l.createElement(t.CardText,{className:"primaryColor"},a("PT_DOC_REQ_SCREEN_LABEL_TEXT")),l.createElement("div",null,c&&l.createElement(t.Loader,null),Array.isArray(m)?m.map(null!=r&&r.isMutation?(e,n)=>{let{code:o,dropdownData:i}=e;return l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,n+1,". ",a(o)),l.createElement(t.CardText,{className:"primaryColor"},i.map(e=>a(null==e?void 0:e.code)).join(", ")))}:(e,n)=>{let{code:o,dropdownData:i}=e;return l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,n+1,". ",a("PROPERTYTAX_"+Fe(o,".","_")+"_HEADING")),i.map(e=>l.createElement(t.CardText,{className:"primaryColor"},a("PROPERTYTAX_"+Fe(null==e?void 0:e.code,".","_")+"_LABEL"))))}):null)),l.createElement("span",null,l.createElement(t.SubmitBar,{label:a("PT_COMMON_NEXT"),onSubmit:u})),l.createElement("span",{style:{marginTop:"10px"}},l.createElement(t.SubmitBar,{label:a("PT_DIGILOCKER_CONSENT"),onSubmit:e=>{!function(e){try{Promise.resolve(Digit.DigiLockerService.authorization({module:"PT"})).then(function(t){e.preventDefault(),console.log("data",t),sessionStorage.setItem("code_verfier",null==t?void 0:t.codeverifier),window.location.href=null==t?void 0:t.redirectURL})}catch(e){return Promise.reject(e)}}(e)}}))))},PTSelectPincode:e=>{var o;let{t:a,config:r,onSelect:u,formData:s={},userType:p}=e;const m=Digit.Hooks.pt.useTenants(),{pathname:v}=i.useLocation(),E=v.includes("modify"),[_,T]=n.useState(()=>{var e,t,n;return E&&"employee"===p?(null==s||null===(e=s.originalData)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.pincode)||"":(null==s||null===(n=s.address)||void 0===n?void 0:n.pincode)||""});let y=(null==s?void 0:s.isEditProperty)||!1;null!=s&&s.isUpdateProperty&&(y=!0);const S=[{label:"PT_PROPERTY_ADDRESS_PINCODE",type:"text",name:"pincode",disable:y,validation:{minlength:6,maxlength:7,pattern:"[0-9]+",max:"9999999",title:a("PT_PROPERTY_ADDRESS_PINCODE_INVALID")}}],[f,P]=n.useState(null),[g,N]=n.useState("");function A(e){T(e.target.value),P(null),N("");let t=Digit.Utils.getPattern("Pincode").test(e.target.value);"employee"===p&&(e.target.value&&!t&&N(a("ERR_DEFAULT_INPUT_FIELD_MSG")),t&&((null==m?void 0:m.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t.toString()===e.target.value)}))||N(a("PT_COMMON_PINCODE_NOT_SERVICABLE"))),u(r.key,{...s.address,pincode:e.target.value}))}return n.useEffect(()=>{var e;null!=s&&null!==(e=s.address)&&void 0!==e&&e.pincode&&T(s.address.pincode)},[null==s||null===(o=s.address)||void 0===o?void 0:o.pincode]),"employee"===p?null==S?void 0:S.map((e,n)=>l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},a(e.label)),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({key:e.name,value:_,onChange:A},e.validation,{disable:E,autoFocus:E})))),g?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},g):null)):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:{...r,inputs:S},onSelect:function(e){try{return(null==m?void 0:m.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t==(null==e?void 0:e.pincode))}))?u(r.key,{pincode:_}):P("PT_COMMON_PINCODE_NOT_SERVICABLE"),Promise.resolve()}catch(e){return Promise.reject(e)}},_defaultValues:{pincode:_},onChange:A,onSkip:()=>u(),forcedError:a(f),isDisabled:!_||y}))},PTSelectAddress:e=>{var o;let{t:r,config:u,onSelect:d,userType:s,formData:p,setError:m,clearErrors:v,formState:E}=e;const _=Digit.Hooks.pt.useTenants();let T=Digit.ULBService.getCurrentTenantId();const{pathname:y}=i.useLocation(),S=y.includes("modify");let f=(null==p?void 0:p.isEditProperty)||!1;S&&(f=!0),null!=p&&p.isUpdateProperty&&(f=!0);const{pincode:P}=(null==p?void 0:p.address)||"",g="employee"===s?_.filter(e=>e.code===T):P?_.filter(e=>{var t;return null==e||null===(t=e.pincode)||void 0===t?void 0:t.some(e=>e==P)}):_,[N,A]=n.useState(()=>{var e;return(null==p||null===(e=p.address)||void 0===e?void 0:e.city)||null}),{data:O}=Digit.Hooks.useBoundaryLocalities(null==N?void 0:N.code,"revenue",{enabled:!!N},r),[I,h]=n.useState(),[C,R]=n.useState();n.useEffect(()=>{if("employee"===s&&S&&null!=I&&I.length){var e,t,n;const l=null==p||null===(e=p.originalData)||void 0===e||null===(t=e.address)||void 0===t||null===(n=t.locality)||void 0===n?void 0:n.code,o=null==I?void 0:I.filter(e=>e.code===l)[0];x("locality",o)}},[I]),n.useEffect(()=>{g&&1===g.length&&A(g[0])},[g]),n.useEffect(()=>{if(N&&O){var e,t;let l=O,o=[];var n;null!=p&&null!==(e=p.address)&&void 0!==e&&e.locality&&R(p.address.locality),null!=p&&null!==(t=p.address)&&void 0!==t&&t.pincode&&(o=l.filter(e=>{var t;return null===(t=e.pincode)||void 0===t?void 0:t.find(e=>e==p.address.pincode)}),null!=p&&null!==(n=p.address)&&void 0!==n&&n.locality||R()),h(()=>o.length>0?o:l),1===o.length&&(R(o[0]),"employee"===s&&d(u.key,{...p[u.key],locality:o[0]}))}},[N,null==p||null===(o=p.address)||void 0===o?void 0:o.pincode,O]);const{control:b,formState:D,watch:L,setError:M,clearErrors:w,setValue:x}=a.useForm(),U=L(),{errors:F}=D,B={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};var k,H;return n.useEffect(()=>{if("employee"===s){let e=Object.keys(U);const t={};e.forEach(e=>{var n;return t[e]=null===(n=p[u.key])||void 0===n?void 0:n[e]}),Xe.isEqual(U,t)||d(u.key,{...p[u.key],...U});for(let e in U)U[e]||null!=D&&D.errors[e]?U[e]&&D.errors[e]&&w([e]):M(e,{type:e.toUpperCase()+"_REQUIRED",message:r("CORE_COMMON_REQUIRED_ERRMSG")})}},[U]),n.useEffect(()=>{if("employee"===s){var e,t;const n=!!Object.keys(D.errors).lengtha;!n||null!==(e=E.errors)&&void 0!==e&&e[u.key]?!n&&null!==(t=E.errors)&&void 0!==t&&t[u.key]&&v(u.key):m(u.key,{type:"required"})}},[D]),"employee"===s?l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},r("MYCITY_CODE_LABEL")+" *"),l.createElement(a.Controller,{name:"city",defaultValue:1===(null==g?void 0:g.length)?g[0]:N,control:b,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:f||1===(null==g?void 0:g.length),option:g,select:e.onChange,optionKey:"code",onBlur:e.onBlur,t:r})})),l.createElement(t.CardLabelError,{style:B},D.touched.city?null==F||null===(k=F.city)||void 0===k?void 0:k.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},r("PT_LOCALITY_LABEL")+" *"),l.createElement(a.Controller,{name:"locality",defaultValue:null,control:b,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,option:I,select:e.onChange,onBlur:e.onBlur,optionKey:"i18nkey",t:r,disable:f||!1})})),l.createElement(t.CardLabelError,{style:B},D.touched.locality?null==F||null===(H=F.locality)||void 0===H?void 0:H.message:"")):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:u,onSelect:function(){d(u.key,{city:N,locality:C})},t:r,isDisabled:!C},l.createElement("div",null,l.createElement(t.CardLabel,null,r("MYCITY_CODE_LABEL")+" "),l.createElement("span",{className:"form-pt-dropdown-only"},l.createElement(t.RadioOrSelect,{options:g.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:N,optionKey:"i18nKey",onSelect:function(e){R(null),h(null),A(e)},t:r,isPTFlow:!0,disabled:f})),N&&I&&l.createElement(t.CardLabel,null,r("PT_LOCALITY_LABEL")+" "),N&&I&&l.createElement("span",{className:"form-pt-dropdown-only"},l.createElement(t.RadioOrSelect,{dropdownStyle:{paddingBottom:"20px"},isMandatory:u.isMandatory,options:I.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:C,optionKey:"i18nkey",onSelect:function(e){var t;null!=p&&null!==(t=p.address)&&void 0!==t&&t.locality&&(p.address.locality=e),R(e),"employee"===s&&d(u.key,{...p[u.key],locality:e})},t:r,labelKey:"",disabled:f})))))},PTSelectStreet:e=>{let{t:o,config:i,onSelect:r,userType:u,formData:s,formState:p,setError:m,clearErrors:v}=e;const[E,_]=n.useState({index:-1,type:""}),{control:T,formState:y,watch:S,trigger:f}=a.useForm(),P=S(),{errors:g}=y,N=window.location.href.includes("tl/new-application")||window.location.href.includes("tl/renew-application-details"),A=window.location.href.includes("edit-application")||window.location.href.includes("tl/renew-application-details");let O;window.location.href.includes("tl")?(O=i.inputs,i.inputs[0].disable=window.location.href.includes("edit-application"),i.inputs[1].disable=window.location.href.includes("edit-application")):O=[{label:"PT_PROPERTY_ADDRESS_STREET_NAME",type:"text",name:"street",validation:{pattern:"[a-zA-Z0-9 !@#$%^&*()_+-={};':\\\\|,.<>/?]{1,64}",title:o("CORE_COMMON_STREET_INVALID")}},{label:"PT_PROPERTY_ADDRESS_HOUSE_NO",type:"text",name:"doorNo",validation:{pattern:"[a-zA-Z0-9 !@#$%^&*()_+-={};':\\\\|,.<>/?]{1,64}",title:o("CORE_COMMON_DOOR_INVALID")}}];const I=e=>{let{validation:t,name:n,messages:l}=e;if(t){let{pattern:e,maxlength:o,minlength:i,required:a}=t||{};return{pattern:t=>{if(e){var o;if(e instanceof RegExp)return!!e.test(t)||(null==l?void 0:l.pattern)||n.toUpperCase()+"_PATTERN";if("string"==typeof e)return!(null===(o=new RegExp(e))||void 0===o||!o.test(t))||(null==l?void 0:l.pattern)||n.toUpperCase()+"_PATTERN"}return!0},required:e=>!a||!!e||(null==l?void 0:l.required)||n.toUpperCase()+"_REQUIRED",minLength:e=>!i||(null==e?void 0:e.length)>=i||(null==l?void 0:l.minlength)||n.toUpperCase()+"_MINLENGTH",maxLength:e=>!o||(null==e?void 0:e.length)<=o||(null==l?void 0:l.maxlength)||n.toUpperCase()+"_MAXLENGTH"}}return{}};var h;return n.useEffect(()=>{f()},[]),n.useEffect(()=>{var e;"employee"===u&&(Object.keys(g).length&&!Xe.isEqual((null===(e=p.errors[i.key])||void 0===e?void 0:e.type)||{},g)?m(i.key,{type:g}):!Object.keys(g).length&&p.errors[i.key]&&v(i.key))},[g]),n.useEffect(()=>{const e=Object.keys(P),t={};e.forEach(e=>{var n;return t[e]=null===(n=s[i.key])||void 0===n?void 0:n[e]}),Xe.isEqual(P,t)||(r(i.key,{...s[i.key],...P}),f())},[P]),"employee"===u?null===(h=O)||void 0===h?void 0:h.map((e,n)=>{var r;return l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},N?o(e.label)+":":o(e.label),i.isMandatory?" * ":null),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:T,defaultValue:null==s||null===(r=s.address)||void 0===r?void 0:r[e.name],name:e.name,rules:{validate:I(e)},render:o=>l.createElement(t.TextInput,d({id:e.name,key:e.name,value:o.value,onChange:e=>{_({index:n}),o.onChange(e.target.value)},onBlur:o.onBlur,disable:A,autoFocus:(null==E?void 0:E.index)==n},e.validation))})))}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:{...i,inputs:O},_defaultValues:{street:null==s?void 0:s.address.street,doorNo:null==s?void 0:s.address.doorNo},onSelect:e=>r(i.key,e),onSkip:()=>r(),t:o}))},Proof:e=>{var o,a,r,u,d,s,p,m,v,E,_;let{t:T,config:y,onSelect:S,formData:f}=e;const[P,g]=n.useState(!1),{pathname:N}=i.useLocation(),A=N.includes("property-mutation");let O=window.location.href.split("/").pop();const[I,h]=n.useState(A?null==f||null===(u=f[y.key])||void 0===u?void 0:u.fileStoreId:(null==f||null===(o=f.address)||void 0===o||null===(a=o.documents)||void 0===a||null===(r=a.ProofOfAddress)||void 0===r?void 0:r.fileStoreId)||null),[C,R]=n.useState(null==f||null===(d=f.address)||void 0===d||null===(s=d.documents)||void 0===s?void 0:s.ProofOfAddress),[b,D]=n.useState(null),L=(Digit.ULBService.getCurrentUlb(),(null==f?void 0:f.isUpdateProperty)||!1),M=(null==f?void 0:f.isEditProperty)||!1,[w,x]=n.useState(A?null==f||null===(E=f[y.key])||void 0===E?void 0:E.documentType:(null==f||null===(p=f.address)||void 0===p||null===(m=p.documents)||void 0===m||null===(v=m.ProofOfAddress)||void 0===v?void 0:v.documentType)||null);let U=[];Digit.ULBService.getCurrentTenantId();const F=Digit.ULBService.getStateId(),{data:B={}}=Digit.Hooks.pt.usePropertyMDMS(F,"PropertyTax","Documents"),k=null==B||null===(_=B.PropertyTax)||void 0===_?void 0:_.Documents,H=Array.isArray(k)&&k.filter(e=>e.code.includes("ADDRESSPROOF"));var Y;H.length>0&&(U=null===(Y=H[0])||void 0===Y?void 0:Y.dropdownData.filter(e=>1==(null==e?void 0:e.active)),U.forEach(e=>{e.i18nKey=Fe(e.code,".","_")})),n.useEffect(()=>{!function(){try{D(null);const e=function(){if(C){const e=function(){if(C.size>=2e6)D(T("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",C,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?h(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):D(T("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[C]);const W=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(c,{currentStep:3,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:1});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?W:null,l.createElement(t.FormStep,{config:y,onSelect:()=>{let e=I,t=C;t&&(t.documentType=w),t&&(t.fileStoreId=e||null);let n=A?{}:null==f?void 0:f.address;n&&n.documents||(n.documents=[]),n.documents.ProofOfAddress=t,S(y.key,A?{documentType:w,fileStoreId:e}:n,"",O)},onSkip:()=>S(),t:T,isDisabled:!L&&!M&&(!I||!w||b)},l.createElement(t.CardLabelDesc,null,T("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,T("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+T("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:T,isMandatory:!1,option:U,selected:w,optionKey:"i18nKey",select:function(e){g(1==(null==e?void 0:e.digiLockerFetch)),h(null),x(e)},placeholder:T("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(P?Ve:t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e,t){R(t||e.target.files[0])},onDelete:()=>{h(null)},message:I?"1 "+T("PT_ACTION_FILEUPLOADED"):T("PT_ACTION_NO_FILEUPLOADED"),error:b}),b?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},b):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},SelectOwnerShipDetails:e=>{let{t:o,config:a,onSelect:r,userType:u,formData:d,onBlur:s,formState:p,setError:m,clearErrors:v}=e;Digit.ULBService.getCurrentTenantId();const E=Digit.ULBService.getStateId(),_=(null==d?void 0:d.isUpdateProperty)||!1;let T=(null==d?void 0:d.isEditProperty)||!1;const[y,S]=n.useState(null==d?void 0:d.ownershipCategory),[f,P]=n.useState(!0),{data:g,isLoading:N}=Digit.Hooks.pt.usePropertyMDMS(E,"PropertyTax","SubOwnerShipCategory"),{data:A,isLoading:O}=Digit.Hooks.pt.usePropertyMDMS(E,"PropertyTax","OwnerShipCategory"),I=[];let h=["INDIVIDUAL"],C={},R={};const{pathname:b}=i.useLocation(),D=b.includes("/modify-application/");function L(e){const{name:t,code:n}=e;return{label:t,value:n,code:n}}function M(e){var t,n;return"employee"===u?null==e||null===(t=e.filter(e=>e.code.split(".").length<=2))||void 0===t||null===(n=t.splice(0,10))||void 0===n?void 0:n.map(e=>({...e,i18nKey:"PT_OWNERSHIP_"+(e.value.split(".")[1]?e.value.split(".")[1]:e.value.split(".")[0])})):e&&e.length&&e.splice(0,10).map(e=>({...e,i18nKey:"PT_OWNERSHIP_"+(e.value.split(".")[1]?e.value.split(".")[1]:e.value.split(".")[0])}))}function w(e){S(e)}function x(){let e=window.location.href.charAt(window.location.href.length-1);sessionStorage.setItem("ownershipCategory",null==y?void 0:y.value),r(a.key,y,"",e,null,{routeKey:null==y?void 0:y.value})}return n.useEffect(()=>{if(!N&&g&&A){const e=g.filter(e=>{var t;return e.code===((null==d||null===(t=d.ownershipCategory)||void 0===t?void 0:t.value)||(null==d?void 0:d.ownershipCategory))})[0];S(e)}},[null==d?void 0:d.ownershipCategory,g]),n.useEffect(()=>{"employee"===u&&D&&!N&&!O&&A&&(w(M(I).filter(e=>{var t;return e.code===(null==d||null===(t=d.originalData)||void 0===t?void 0:t.ownershipCategory)})[0]),P(!1))},[N,O,A]),A&&A.length>0&&A.map(e=>{C[e.code]=e}),g&&g.length>0&&g.map(e=>{R[e.code]=e}),C&&R&&Object.keys(C).forEach(e=>{const t=C[e].code;-1!==h.indexOf(t)?Object.keys(R).filter(e=>t===R[e].ownerShipCategory).forEach(e=>{I.push(L(R[e]))}):I.push(L(C[e]))}),n.useEffect(()=>{"employee"===u&&(y?v(a.key):m(a.key,{type:"required",message:o("CORE_COMMON_REQUIRED_ERRMSG")}),x())},[y]),"employee"===u&&D&&f?l.createElement(t.Loader,null):"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller",style:D?{color:"#B1B4B6"}:{}},o("PT_PROVIDE_OWNERSHIP_DETAILS")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null===(U=M(I))||void 0===U?void 0:U.length)?M(I)[0]:y,disable:1===(null===(F=M(I))||void 0===F?void 0:F.length)||D,option:M(I),select:w,optionKey:"i18nKey",onBlur:s,t:o})),null!==(B=p.touched)&&void 0!==B&&B[a.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(k=p.errors[a.key])||void 0===k?void 0:k.message):null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:2}),l.createElement(t.FormStep,{t:o,config:a,onSelect:x,onSkip:()=>r(),isDisabled:!y},l.createElement("div",null,l.createElement(t.RadioButtons,{isMandatory:a.isMandatory,options:M(I)||[],selectedOption:y,optionsKey:"i18nKey",onSelect:w,value:y,labelKey:"PT_OWNERSHIP",isDependent:!0,disabled:_||T}))));var U,F,B,k},SelectOwnerDetails:e=>{var o,a,r,u,s,p;let{t:m,config:v,onSelect:E,userType:_,formData:T,ownerIndex:y}=e;const{pathname:S}=i.useLocation(),f=S.includes("/modify-application/"),P=S.includes("/property-mutation/");let g=P?y:window.location.href.charAt(window.location.href.length-1),N={};const[A,O]=n.useState(T.owners&&T.owners[g]&&T.owners[g].name||(null==T||null===(o=T.owners)||void 0===o?void 0:o.name)||""),[I,h]=n.useState(T.owners&&T.owners[g]&&T.owners[g].email||(null==T||null===(a=T.owners)||void 0===a?void 0:a.emailId)||""),[C,R]=n.useState(T.owners&&T.owners[g]&&T.owners[g].gender||(null==T||null===(r=T.owners)||void 0===r?void 0:r.gender)),[b,D]=n.useState(T.owners&&T.owners[g]&&T.owners[g].mobileNumber||(null==T||null===(u=T.owners)||void 0===u?void 0:u.mobileNumber)||""),[L,M]=n.useState(T.owners&&T.owners[g]&&T.owners[g].fatherOrHusbandName||(null==T||null===(s=T.owners)||void 0===s?void 0:s.fatherOrHusbandName)||""),[w,x]=n.useState(T.owners&&T.owners[g]&&T.owners[g].relationship||(null==T||null===(p=T.owners)||void 0===p?void 0:p.relationship)||{}),U=(null==T?void 0:T.isUpdateProperty)||!1;let F=(null==T?void 0:T.isEditProperty)||!1;Digit.ULBService.getCurrentTenantId();const B=Digit.ULBService.getStateId(),{data:k}=Digit.Hooks.pt.useGenderMDMS(B,"common-masters","GenderType");let H=[];function Y(e){O(e.target.value)}function W(e){h(e.target.value)}function j(e){R(e)}function K(e){D(e.target.value)}function V(e){M(e.target.value)}function G(e){x(e)}k&&k.map(e=>{H.push({i18nKey:"PT_COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})});const z=()=>{let e,t=T.owners&&T.owners[g];if("employee"===_)e={...t,name:A,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:w,emailId:I},E(v.key,{...T[v.key],...e},!1,g);else{if(P)return e={...t,name:A,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:w},void E("",e);e={...t,name:A,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:w,emailId:I},E(v.key,e,!1,g)}},X=[{name:"HUSBAND",code:"HUSBAND",i18nKey:"PT_RELATION_HUSBAND"},{name:"Father",code:"FATHER",i18nKey:"PT_RELATION_FATHER"}];return n.useEffect(()=>{"employee"===_&&z()},[A,C,b,L,w]),"employee"===_?l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_MOBILE_NUMBER")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({type:"text",t:m,isMandatory:!1,name:"mobileNumber",value:b,onChange:K,ValidationRequired:!0},N={isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:m("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")},{disable:f})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_OWNER_NAME")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({t:m,type:"text",isMandatory:!1,name:"name",value:A,onChange:Y,ValidationRequired:!0},N={isRequired:!0,pattern:"^[a-zA-Z ]+$",type:"tel",title:m("PT_NAME_ERROR_MESSAGE")},{disable:f})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_GUARDIAN_NAME")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({t:m,type:"text",isMandatory:!1,name:"fatherOrHusbandName",value:L,onChange:V,ValidationRequired:!0},N={pattern:"^[a-zA-Z ]+$",title:m("PT_NAME_ERROR_MESSAGE")},{disable:f})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_RELATIONSHIP")),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==w?void 0:w.length)?w[0]:w,disable:1===(null==w?void 0:w.length)||f,option:X,select:G,optionKey:"i18nKey",t:m,name:"relationship"})),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_GENDER")),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==C?void 0:C.length)?C[0]:C,disable:1===(null==C?void 0:C.length)||f,option:H,select:j,optionKey:"code",t:m,name:"gender"})),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:f?{color:"#B1B4B6"}:{}},""+m("PT_OWNER_EMAIL")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{t:m,type:"email",isMandatory:!1,optionKey:"i18nKey",name:"email",value:I,onChange:W,disable:f})))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:2}):null,l.createElement(t.FormStep,{config:v,onSelect:z,onSkip:()=>E(),t:m,isDisabled:!(A&&b&&C&&w&&L)},l.createElement("div",null,l.createElement(t.CardLabel,null,""+m("PT_OWNER_NAME")),l.createElement(t.TextInput,d({t:m,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name",value:A,onChange:Y,disable:U||F,ValidationRequired:!0},N={isRequired:!0,pattern:"^[a-zA-Z ]+$",type:"text",title:m("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+m("PT_FORM3_GENDER")),l.createElement(t.RadioButtons,{t:m,options:H,optionsKey:"code",name:"gender",value:C,selectedOption:C,onSelect:j,isDependent:!0,labelKey:"PT_COMMON_GENDER",disabled:U||F}),l.createElement(t.CardLabel,null,""+m("PT_FORM3_MOBILE_NUMBER")),l.createElement(t.MobileNumber,{value:b,name:"mobileNumber",onChange:e=>K({target:{value:e}}),disable:U||F,required:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:m("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}),l.createElement(t.CardLabel,null,""+m("PT_FORM3_GUARDIAN_NAME")),l.createElement(t.TextInput,d({t:m,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"fatherOrHusbandName",value:L,onChange:V,disable:U||F,ValidationRequired:!0},N={isRequired:!0,pattern:"^[a-zA-Z ]+$",type:"text",title:m("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+m("PT_FORM3_RELATIONSHIP")),l.createElement(t.RadioButtons,{t:m,optionsKey:"i18nKey",name:"relationship",options:X,value:w,selectedOption:w,onSelect:G,isDependent:!0,labelKey:"PT_RELATION",disabled:U||F}),l.createElement(t.CardLabel,null,""+m("PT_FORM3_EMAIL_ID")),l.createElement(t.TextInput,{isMandatory:!1,name:"email",value:I,onChange:W,required:!0,pattern:"[A-Za-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",type:"email",title:m("CORE_COMMON_APPLICANT_EMAILI_ID_INVALID"),disable:U||F}))))},SelectSpecialOwnerCategoryType:e=>{var o,a;let{t:r,config:u,onSelect:d,userType:s,formData:p,ownerIndex:m}=e;const{pathname:v}=i.useLocation(),E=v.includes("/modify-application/");let _=v.includes("property-mutation")?m:window.location.href.charAt(window.location.href.length-1);Digit.ULBService.getCurrentTenantId();const T=Digit.ULBService.getStateId(),y=(null==p?void 0:p.isUpdateProperty)||!1;let S=(null==p?void 0:p.isEditProperty)||!1;const[f,P]=n.useState(p.owners&&p.owners[_]&&(null===(o=p.owners[_])||void 0===o?void 0:o.ownerType)||(null===(a=p.owners)||void 0===a?void 0:a.ownerType)||{}),{data:g,isLoading:N}=Digit.Hooks.pt.usePropertyMDMS(T,"PropertyTax","OwnerType");function A(e){P(e)}g&&g.sort((e,t)=>e.name.localeCompare(t.name)),(null==g?void 0:g.length)>0&&(null==g||g.forEach((e,t)=>{e.order="NONE"==e.code?0:t+1}),g.sort(function(e,t){return e.order-t.order})),n.useEffect(()=>{"employee"===s&&d(u.key,{...p[u.key],ownerType:f})},[f]);const O=[{label:"PT_SPECIAL_OWNER_CATEGORY",type:"text",name:"ownerSpecialCategory",validation:{}}];return N?l.createElement(t.Loader,null):"employee"===s?null==O?void 0:O.map((e,n)=>l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller",style:E?{color:"#B1B4B6"}:{}},r(e.label)),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==g?void 0:g.length)?g[0]:f,disable:1===(null==g?void 0:g.length)||E,option:g,select:A,optionKey:"i18nKey",t:r}))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:2}):null,l.createElement(t.FormStep,{t:r,config:u,onSelect:function(){let e=p.owners&&p.owners[_];e.ownerType=f,d(u.key,e,"",_)},onSkip:()=>d(),isDisabled:!f},l.createElement("div",null,l.createElement(t.RadioButtons,{t:r,optionsKey:"i18nKey",isMandatory:u.isMandatory,options:g||[],selectedOption:f,onSelect:A,labelKey:"PROPERTYTAX_OWNERTYPE",isDependent:!0,disabled:y||S}))))},SelectOwnerAddress:e=>{var o,a,r,u;let{t:d,config:s,onSelect:p,userType:m,formData:v,ownerIndex:E=0}=e;const{pathname:_}=i.useLocation(),T=_.includes("/modify-application/"),y=_.includes("property-mutation");let S=y?E:window.location.href.charAt(window.location.href.length-1);const[f,P]=n.useState(v.owners&&v.owners[S]&&(null===(o=v.owners[S])||void 0===o?void 0:o.permanentAddress)||(null===(a=v.owners[S])||void 0===a?void 0:a.correspondenceAddress)||(null==v||null===(r=v.owners)||void 0===r?void 0:r.permanentAddress)||""),[g,N]=n.useState(v.owners&&v.owners[S]&&(null===(u=v.owners[S])||void 0===u?void 0:u.isCorrespondenceAddress)),A=(null==v?void 0:v.isUpdateProperty)||!1;let O=(null==v?void 0:v.isEditProperty)||!1;function I(e){P(e.target.value)}function h(e){if(1==e.target.checked){var t,n,l,o,i,a,r,u;const e=y?null==v||null===(t=v.searchResult)||void 0===t||null===(n=t.property)||void 0===n?void 0:n.address:null==v?void 0:v.address;let s={doorNo:null==e?void 0:e.doorNo,street:null==e?void 0:e.street,landmark:null==e?void 0:e.landmark,locality:null==e||null===(l=e.locality)||void 0===l?void 0:l.i18nkey,city:null==e||null===(o=e.city)||void 0===o?void 0:o.code,pincode:null==e?void 0:e.pincode},c=null!=v&&null!==(i=v.searchResult)&&void 0!==i&&null!==(a=i.data)&&void 0!==a&&a.property_address?null==v||null===(r=v.searchResult)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.property_address:"";for(const e in s)c+="pincode"==e?s[e]?s[e]:"":s[e]?d(s[e])+", ":"";P(c)}else P("");N(e.target.checked)}const C=()=>{if("employee"===m)p(s.key,{...v[s.key],permanentAddress:f,isCorrespondenceAddress:g},S);else{let e=v.owners&&v.owners[S];e.permanentAddress=f,e.isCorrespondenceAddress=g,p(s.key,y?[e]:e,"",S)}};if(n.useEffect(()=>{!g&&A&&h({target:{checked:!0}})}),n.useEffect(()=>{"employee"===m&&C()},[f]),"employee"===m)return l.createElement(t.LabelFieldPair,{key:S},l.createElement(t.CardLabel,{className:"card-label-smaller",style:T?{color:"#B1B4B6"}:{}},d("PT_OWNERS_ADDRESS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{name:"address",onChange:I,value:f,disable:T})));const R=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:2});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?R:null,l.createElement(t.FormStep,{config:s,t:d,onSelect:C,isDisabled:!f},l.createElement(t.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:d,name:"address",onChange:I,value:f,disable:A||O}),l.createElement(t.CheckBox,{label:d("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),onChange:h,value:g,checked:g||!1,style:{paddingTop:"10px"},disable:A||O})))},SelectInistitutionOwnerDetails:e=>{let{t:o,config:a,onSelect:r,formData:u}=e;const{pathname:s}=i.useLocation(),p=(s.includes("/modify-application/"),s.includes("property-mutation"));let m={};Digit.ULBService.getCurrentTenantId();const[v,E]=n.useState(u.owners&&u.owners[0]&&u.owners[0].inistitutionName),[_,T]=n.useState(u.owners&&u.owners[0]&&u.owners[0].inistitutetype),[y,S]=n.useState(u.owners&&u.owners[0]&&u.owners[0].name),[f,P]=n.useState(u.owners&&u.owners[0]&&u.owners[0].designation),[g,N]=n.useState(u.owners&&u.owners[0]&&u.owners[0].mobileNumber),[A,O]=n.useState(u.owners&&u.owners[0]&&u.owners[0].altContactNumber),[I,h]=n.useState(u.owners&&u.owners[0]&&u.owners[0].emailId),C=(null==u?void 0:u.isUpdateProperty)||!1;let R=(null==u?void 0:u.isEditProperty)||!1;const b=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:2});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?b:null,l.createElement(t.FormStep,{config:a,t:o,onSelect:()=>{let e=u.owners&&u.owners[0];if(e)e.inistitutionName=v,e.inistitutetype=_,e.name=y,e.designation=f,e.mobileNumber=g,e.altContactNumber=A,e.emailId=I,r(a.key,p?[e]:e,!1,0);else{let t={...e,inistitutionName:v,inistitutetype:_,name:y,designation:f,mobileNumber:g,altContactNumber:A,emailId:I};r(a.key,p?[t]:t,!1,0)}},isDisabled:!(v&&_&&y&&f&&g&&A)},l.createElement("div",null,l.createElement(t.CardLabel,null,""+o("PT_COMMON_INSTITUTION_NAME")),l.createElement(t.TextInput,d({isMandatory:!1,optionKey:"i18nKey",t:o,name:"institutionName",onChange:function(e){E(e.target.value)},value:v,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z_@./()#&+- ]*$",title:o("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_TYPE_OF_INSTITUTION")),l.createElement(t.Dropdown,{t:o,isMandatory:!1,option:(()=>{var e;let t={},n=JSON.parse(sessionStorage.getItem("getSubPropertyOwnerShipCategory")),l=null==n||null===(e=n.PropertyTax)||void 0===e?void 0:e.SubOwnerShipCategory;l&&l.length>0&&l.map(e=>{t[e.code]=e});const i=[],a=u.ownershipCategory.value||"";return t&&Object.keys(t).filter(e=>t[e].ownerShipCategory===a).forEach(e=>{i.push((e=>{const{name:t,code:n}=e;return{label:t,value:n,code:o("PROPERTYTAX_BILLING_SLAB_"+n)}})(t[e]))}),i.sort((e,t)=>e.label.localeCompare(t.label)),i})()||[],selected:_,optionKey:"code",select:function(e){T(e)},disabled:C||R}),l.createElement(t.CardHeader,null,o("PT_AUTH_PERSON_DETAILS")),l.createElement(t.CardLabel,null,""+o("PT_OWNER_NAME")),l.createElement(t.TextInput,d({isMandatory:!1,optionKey:"i18nKey",t:o,name:"name",onChange:function(e){S(e.target.value)},value:y,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z ]*$",title:o("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_COMMON_AUTHORISED_PERSON_DESIGNATION")),l.createElement(t.TextInput,d({isMandatory:!1,optionKey:"i18nKey",t:o,name:"designation",onChange:function(e){P(e.target.value)},value:f,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z ]*$",title:o("PT_DESIGNATION_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_FORM3_MOBILE_NUMBER")),l.createElement(t.TextInput,d({isMandatory:!1,optionKey:"i18nKey",t:o,name:"setMobileNo",onChange:function(e){N(e.target.value)},value:g,type:"tel",disable:C||R},m={isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:o("CORE_COMMON_APPLICANT_ALT_NUMBER_INVALID")})),l.createElement(t.CardLabel,null,""+o("PT_OWNERSHIP_INFO_TEL_PHONE_NO")),l.createElement(t.TextInput,d({isMandatory:!1,optionKey:"i18nKey",t:o,name:"altContactNumber",onChange:function(e){O(e.target.value)},value:A,type:"tel",disable:C||R},m={isRequired:!0,pattern:"^[0-9]{11}$",type:"tel",title:o("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")})),l.createElement(t.CardLabel,null,o("PT_FORM3_EMAIL_ID")),l.createElement(t.TextInput,{isMandatory:!1,optionKey:"i18nKey",t:o,name:"email",onChange:function(e){h(e.target.value)},type:"email",value:I,disable:C||R}))))},SelectProofIdentity:e=>{var o,a,r,u,d,s,p;let{t:m,config:v,onSelect:E,formData:_,ownerIndex:T=0,addNewOwner:y}=e;const{pathname:S}=i.useLocation(),f=S.includes("property-mutation");let P=f?T:window.location.href.charAt(window.location.href.length-1);const[g,N]=n.useState(()=>{var e,t,n;return(null==_||null===(e=_.owners[P])||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.proofIdentity)||void 0===n?void 0:n.fileStoreId)||null}),[A,O]=n.useState(null==_||null===(o=_.owners[P])||void 0===o||null===(a=o.documents)||void 0===a?void 0:a.proofIdentity),[I,h]=n.useState(null),C=(Digit.ULBService.getCurrentUlb(),(null==_?void 0:_.isUpdateProperty)||!1);let R=(null==_?void 0:_.isEditProperty)||!1;const[b,D]=n.useState(null==_||null===(r=_.owners[P])||void 0===r||null===(u=r.documents)||void 0===u||null===(d=u.proofIdentity)||void 0===d?void 0:d.documentType);let L=[];Digit.ULBService.getCurrentTenantId();const M=Digit.ULBService.getStateId(),{data:w={}}=Digit.Hooks.pt.usePropertyMDMS(M,"PropertyTax","Documents"),x=null==w||null===(s=w.PropertyTax)||void 0===s?void 0:s.Documents,U=Array.isArray(x)&&x.filter(e=>e.code.includes("IDENTITYPROOF"));var F;U.length>0&&(L=null===(F=U[0])||void 0===F?void 0:F.dropdownData,L.forEach(e=>{e.i18nKey=Fe(e.code,".","_")})),n.useEffect(()=>{!function(){try{h(null);const e=function(){if(A){const e=function(){if(A.size>=2e6)h(m("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",A,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?N(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):h(m("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]);const[B,k]=n.useState(null),H=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:3});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?H:null,l.createElement(t.FormStep,{t:m,config:v,onSelect:()=>{var e,t,n,l;if(k(null),"INDIVIDUAL.MULTIPLEOWNERS"===(null==_||null===(e=_.ownershipCategory)||void 0===e?void 0:e.code)&&(null==_||null===(t=_.owners)||void 0===t?void 0:t.length)<=1&&"0"==P&&!f)k("PT_MULTI_OWNER_ADD_ERR_MSG");else if(f&&(null==_||null===(n=_.owners)||void 0===n?void 0:n.length)<=1&&"INDIVIDUAL.MULTIPLEOWNERS"===(null==_||null===(l=_.ownershipCategory)||void 0===l?void 0:l.code))k("PT_MULTI_OWNER_ADD_ERR_MSG");else{let e=g,t=A;t&&(t.documentType=b,t.fileStoreId=e||null);let n=_.owners&&_.owners[P];n&&n.documents?n.documents.proofIdentity=f?{documentType:b,fileStoreId:e}:t:f?(n.documents={},n.documents.proofIdentity={documentType:b,fileStoreId:e}):(n.documents=[],n.documents.proofIdentity=t),E(v.key,f?[n]:n,"",P)}},onSkip:()=>E(),forcedError:m(B),isDisabled:!C&&!R&&(B||!g||!b||I),onAdd:function(){if(f){if(!g||!b)return void h(m("ERR_DEFAULT_INPUT_FIELD_MSG"));let e=_.owners&&_.owners[P];return e&&e.documents||(e.documents={}),e.documents.proofIdentity={documentType:b,fileStoreId:g},void y(e)}let e=parseInt(P)+1,t=g,n=A;n&&(n.documentType=b,n.fileStoreId=t||null);let l=_.owners&&_.owners[P];l&&l.documents||(l.documents=[]),l.documents.proofIdentity=n,E("owner-details",{},!1,e,!0)},isMultipleAllow:"INDIVIDUAL.MULTIPLEOWNERS"==(null==_||null===(p=_.ownershipCategory)||void 0===p?void 0:p.value)},l.createElement(t.CardLabelDesc,null,m("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,m("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+m("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:m,isMandatory:!1,option:L,selected:b,optionKey:"i18nKey",select:function(e){D(e)},placeholder:m("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){O(e.target.files[0])},onDelete:()=>{N(null)},message:g?"1 "+m("PT_ACTION_FILEUPLOADED"):m("PT_ACTION_NO_FILEUPLOADED"),error:I}),I?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},I):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},SelectSpecialProofIdentity:e=>{var o,a,r,u,d,s;let{t:p,config:m,onSelect:v,formData:E,ownerIndex:_}=e;const{pathname:T}=i.useLocation();T.includes("/modify-application/");let y=T.includes("property-mutation")?_:window.location.href.charAt(window.location.href.length-1);const[S,f]=n.useState(()=>{var e,t,n;return(null==E||null===(e=E.owners[y])||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.specialProofIdentity)||void 0===n?void 0:n.fileStoreId)||null}),[P,g]=n.useState(null==E||null===(o=E.owners[y])||void 0===o||null===(a=o.documents)||void 0===a?void 0:a.specialProofIdentity),[N,A]=n.useState(null),O=(Digit.ULBService.getCurrentUlb(),(null==E?void 0:E.isUpdateProperty)||!1);let I=(null==E?void 0:E.isEditProperty)||!1;const[h,C]=n.useState(null==E||null===(r=E.owners[y])||void 0===r||null===(u=r.documents)||void 0===u||null===(d=u.specialProofIdentity)||void 0===d?void 0:d.documentType);let R=[];Digit.ULBService.getCurrentTenantId();const b=Digit.ULBService.getStateId(),{data:D={}}=Digit.Hooks.pt.usePropertyMDMS(b,"PropertyTax","Documents"),L=null==D||null===(s=D.PropertyTax)||void 0===s?void 0:s.Documents,M=Array.isArray(L)&&L.filter(e=>e.code.includes("SPECIALCATEGORYPROOF"));var w,x;function U(e){C(e)}return M.length>0&&(R=null===(w=M[0])||void 0===w?void 0:w.dropdownData,R.forEach(e=>{e.i18nKey=Fe(e.code,".","_")}),R=null===(x=R)||void 0===x?void 0:x.filter(e=>{var t,n;return e.parentValue.includes(null==E||null===(t=E.owners[y])||void 0===t||null===(n=t.ownerType)||void 0===n?void 0:n.code)}),1==R.length&&h!=R[0]&&U(R[0])),n.useEffect(()=>{E.owners&&E.owners[y]&&"NONE"===E.owners[y].ownerType.code&&v("",{},!0,y)},[E.owners&&E.owners[y]&&E.owners[y].ownerType.code]),n.useEffect(()=>{!function(){try{A(null);const e=function(){if(P){const e=function(){if(P.size>=2e6)A(p("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",P,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?f(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):A(p("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[P]),l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(c,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(c,{currentStep:3}):null,l.createElement(t.FormStep,{config:m,onSelect:()=>{let e=S,t=P;t&&(t.documentType=h,t.fileStoreId=e||null);let n=E.owners&&E.owners[y];n&&n.documents||(n.documents={}),n.documents.specialProofIdentity=t,v(m.key,n,"",y)},onSkip:()=>v(),t:p,isDisabled:!O&&!I&&(!S||!h||N)},l.createElement(t.CardLabelDesc,null,p("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,p("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+p("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:p,isMandatory:!1,option:R,selected:h,optionKey:"i18nKey",select:U,placeholder:p("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){g(e.target.files[0])},onDelete:()=>{f(null)},message:S?"1 "+p("PT_ACTION_FILEUPLOADED"):p("PT_ACTION_NO_FILEUPLOADED"),error:N}),N?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},N):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},PTSelectGeolocation:e=>{var o,i,a;let{t:r,config:u,onSelect:d,formData:s={}}=e;const[p,m]=n.useState((null==s||null===(o=s.address)||void 0===o?void 0:o.pincode)||""),[v,E]=n.useState((null==s||null===(i=s.address)||void 0===i?void 0:i.geoLocation)||{}),_=Digit.Hooks.pt.useTenants(),[T,y]=n.useState(null),S=(null==s?void 0:s.isEditProperty)||!1,f=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:P={}}=Digit.Hooks.pt.usePropertyMDMS(f,"PropertyTax","MapConfig"),g=null==P||null===(a=P.PropertyTax)||void 0===a?void 0:a.MapConfig;let N=g?g[0]:{};return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.LocationSearchCard,{header:r("PT_GEOLOCATON_HEADER"),cardText:r("PT_GEOLOCATION_TEXT"),nextText:r("PT_COMMON_NEXT"),skipAndContinueText:r("CORE_COMMON_SKIP_CONTINUE"),skip:()=>d(),t:r,position:v,onSave:()=>d(u.key,{geoLocation:v,pincode:p}),onChange:(e,t)=>((e,t)=>{y(null),(null==_?void 0:_.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t==e)}))?(m(e),E(t)):(y("PT_COMMON_PINCODE_NOT_SERVICABLE"),m(""),E({}))})(e,t),disabled:""===p||S,forcedError:r(T),cardBodyStyle:Oe,isPTDefault:!0,PTdefaultcoord:N}))},PTWFApplicationTimeline:ze,PTWFCaption:Ge,PTWFReason:e=>{let{headComment:t,otherComment:n}=e;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,t),l.createElement("p",null,n))},IsThisFloorSelfOccupied:e=>{let o,i,{t:a,config:r,onSelect:u,formData:d}=e,s=window.location.href.split("/").pop();return Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),isNaN(s)?[o,i]=n.useState(null==d?void 0:d.selfOccupied):[o,i]=n.useState(d.units&&d.units[s]&&d.units[s].selfOccupied),l.createElement(t.FormStep,{t:a,config:r,onSelect:function(){var e,t;let n=window.location.href.split("/").pop();if("PT_COMMON_YES"===(null==d||null===(e=d.isResdential)||void 0===e?void 0:e.i18nKey)||"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"==(null==d||null===(t=d.usageCategoryMajor)||void 0===t?void 0:t.i18nKey)?sessionStorage.setItem("IsThisFloorSelfOccupied",o.i18nKey+"1"):sessionStorage.setItem("IsThisFloorSelfOccupied",o.i18nKey),isNaN(n))u("selfOccupied",o);else{let e={...d.units&&d.units[n],selfOccupied:o};u(r.key,e,!1,n)}},onSkip:()=>u(),isDisabled:!o},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"},{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"},{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"}],selectedOption:o,onSelect:function(e){i(e)}}))},ProvideSubUsageType:e=>{var o,i;let{t:a,config:r,onSelect:u,userType:d,formData:s}=e,p=window.location.href.split("/").pop();Digit.ULBService.getCurrentTenantId();const m=Digit.ULBService.getStateId();let v,E;var _;isNaN(p)?[v,E]=n.useState(null===(_=s.subusagetype)||void 0===_?void 0:_.SubUsageType):[v,E]=n.useState(s.units&&s.units[p]&&s.units[p].SubUsageType);const{data:T={}}=Digit.Hooks.pt.usePropertyMDMS(m,"PropertyTax","UsageCategory")||{};let y,S=[];S=(null==T||null===(o=T.PropertyTax)||void 0===o?void 0:o.UsageCategory)||[];let f=[];function P(){let e=(()=>{for(y=0;y<S.length;y++){var e,t,n;if((null===(e=S[y])||void 0===e?void 0:e.code.split(".").pop())===(null===(t=v)||void 0===t?void 0:t.i18nKey.split("_").pop()))return null===(n=S[y])||void 0===n?void 0:n.code}})();if(isNaN(p)){var t;"employee"===d?u(r.key,{SubUsageType:v,subuagecode:e}):("PT_YES_IT_IS_SELFOCCUPIED"===(null==s||null===(t=s.selfOccupied)||void 0===t?void 0:t.i18nKey)?sessionStorage.setItem("subusagetypevar","yes"):sessionStorage.setItem("subusagetypevar","no"),u("subusagetype",{SubUsageType:v,subuagecode:e}))}else{var n;let t=s.units&&s.units[p],l={...t,SubUsageType:v,subuagecode:e};"PT_YES_IT_IS_SELFOCCUPIED"===(null==t||null===(n=t.selfOccupied)||void 0===n?void 0:n.i18nKey)?sessionStorage.setItem("subusagetypevar","yes"):sessionStorage.setItem("subusagetypevar","no"),u(r.key,l,!1,p)}}const[g,N]=n.useState([]);return n.useEffect(()=>{var e;"employee"===d&&(["RESIDENTIAL","NONRESIDENTIAL.OTHERS","MIXED"].includes(null==s||null===(e=s.usageCategoryMajor)||void 0===e?void 0:e.code)?N([]):N([{label:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",type:"dropdown",name:"subusagetype",validation:{}}]))},[null==s||null===(i=s.usageCategoryMajor)||void 0===i?void 0:i.code]),n.useEffect(()=>{"employee"===d&&P()},[v]),"employee"===d?null:l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:P,onSkip:()=>u(),isDisabled:!v},l.createElement(t.CardLabel,null,a("PT_SUB_USAGE_TYPE_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},function(e){var t,n;if("employee"===d)return null==e||null===(t=e.map(e=>{var t;const n=null==e?void 0:e.code.split(".");return n[1]==(null==s||null===(t=s.usageCategoryMajor)||void 0===t?void 0:t.i18nKey.split("_")[3])&&4==n.length?{i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+n[1]+"_"+n[n.length-1]}:{filter:!0}}))||void 0===t||null===(n=t.filter(e=>!(null!=e&&e.filter)))||void 0===n?void 0:n.sort((e,t)=>a(e.i18nKey).localeCompare(a(t.i18nKey)));for(y=0;y<e.length;y++){var l;Array.isArray(e)&&e.length>0&&e[y].code.split(".")[1]==(null==s||null===(l=s.usageCategoryMajor)||void 0===l?void 0:l.i18nKey.split("_")[3])&&4==e[y].code.split(".").length&&f.push({i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+e[y].code.split(".")[1]+"_"+e[y].code.split(".")[e[y].code.split(".").length-1]})}return f.sort((e,t)=>a(e.i18nKey).localeCompare(a(t.i18nKey))),f}(S)&&l.createElement(t.RadioOrSelect,{isMandatory:r.isMandatory,selectedOption:v,options:f||{},t:a,optionKey:"i18nKey",onSelect:function(e){E(e)}}))),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_SUB_USAGE_TYPE_INFO_MSG")}))},RentalDetails:e=>{let o,i,a,r,{t:u,config:s,onSelect:p,formData:m}=e,v=window.location.href.split("/").pop(),E={};var _,T;isNaN(v)?([o,a]=n.useState(null===(_=m.Constructiondetails)||void 0===_?void 0:_.RentArea),[i,r]=n.useState(null===(T=m.Constructiondetails)||void 0===T?void 0:T.AnnualRent)):([o,a]=n.useState(m.units&&m.units[v]&&m.units[v].RentArea),[i,r]=n.useState(m.units&&m.units[v]&&m.units[v].AnnualRent)),Digit.ULBService.getCurrentTenantId();const y=Digit.ULBService.getStateId(),{data:S}=Digit.Hooks.pt.usePropertyMDMS(y,"PropertyTax","RentalDetails");var f,P,g,N;S&&(s.texts.cardText=null!=S&&null!==(f=S.PropertyTax)&&void 0!==f&&null!==(P=f.RentalDetails[0])&&void 0!==P&&P.code?"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_"+(null==S||null===(g=S.PropertyTax)||void 0===g||null===(N=g.RentalDetails[0])||void 0===N?void 0:N.code):"");const[A,O]=n.useState(null),[I,h]=n.useState(null);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:(s.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==m||null===(C=m.PropertyType)||void 0===C?void 0:C.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+v+"_DETAILS",s),onSelect:()=>{if(isNaN(v))p("Constructiondetails",{RentArea:o,AnnualRent:i});else{let e={...m.units&&m.units[v],RentArea:o,AnnualRent:i};p(s.key,e,!1,v)}},onSkip:()=>p(),forcedError:u(A)||u(I),t:u,isDisabled:A||I||!o||!i,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+u("PT_FLOOR_DETAILS_RENTED_AREA_LABEL")),l.createElement(t.TextInput,d({t:u,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"RentArea",value:o,onChange:function(e){var t,n,l,o;if(a(e.target.value),O(null),h(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==m||null===(t=m.PropertyType)||void 0===t?void 0:t.code)){var i,r;let t=parseInt((null==m||null===(i=m.units[v])||void 0===i?void 0:i.floorarea)||0)+parseInt(e.target.value);parseInt(null==m||null===(r=m.units[v])||void 0===r?void 0:r.builtUpArea)<t&&O("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG")}"BUILTUP.SHAREDPROPERTY"===(null==m||null===(n=m.PropertyType)||void 0===n?void 0:n.code)&&parseInt(null==m||null===(l=m.floordetails)||void 0===l?void 0:l.builtUpArea)<parseInt(e.target.value)+parseInt((null==m||null===(o=m.landarea)||void 0===o?void 0:o.floorarea)||"0")&&O("PT_RENTED_AREA_LESS_THAN_BUILTUP"),0==parseInt(e.target.value)&&h("PT_AREA_NOT_0_MSG")}},E={pattern:"^([0-9]){0,8}$",type:"number",title:u("PT_RENT_AREA_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+u("PT_FLOOR_DETAILS_ANNUAL_RENT_LABEL")),l.createElement(t.TextInput,d({t:u,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"AnnualRent",value:i,onChange:function(e){r(e.target.value)}},E={pattern:"^([0-9]){0,8}$",type:"number",title:u("PT_BUILT_AREA_ERROR_MESSAGE")}))),l.createElement(t.CitizenInfoLabel,{info:u("CS_FILE_APPLICATION_INFO_LABEL"),text:u("PT_RENTAL_AREA_INFO_MSG")}));var C},ProvideSubUsageTypeOfRentedArea:e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e,d=window.location.href.split("/").pop();Digit.ULBService.getCurrentTenantId();const s=Digit.ULBService.getStateId();let p,m;var v;isNaN(d)?[p,m]=n.useState((null===(v=u.Subusagetypeofrentedarea)||void 0===v?void 0:v.SubUsageTypeOfRentedArea)||""):[p,m]=n.useState(u.units&&u.units[d]&&u.units[d].SubUsageTypeOfRentedArea||"");const{data:E={}}=Digit.Hooks.pt.usePropertyMDMS(s,"PropertyTax","UsageCategory")||{};let _,T=[];T=(null==E||null===(o=E.PropertyTax)||void 0===o?void 0:o.UsageCategory)||[];let y=[];return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:i,config:a,onSelect:function(){let e=(()=>{for(_=0;_<T.length;_++){var e,t;if((null===(e=T[_])||void 0===e?void 0:e.code.split(".").pop())===p.i18nKey.split("_").pop())return null===(t=T[_])||void 0===t?void 0:t.code}})();if(isNaN(d))r("Subusagetypeofrentedarea",{SubUsageTypeOfRentedArea:p,Subusagetypeofrentedareacode:e});else{let t={...u.units&&u.units[d],SubUsageTypeOfRentedArea:p,Subusagetypeofrentedareacode:e};r(a.key,t,!1,d)}},onSkip:()=>r(),isDisabled:!p},l.createElement(t.CardLabel,null,i("PT_SUB_USAGE_TYPE_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},function(e){for(_=0;_<e.length;_++)Array.isArray(e)&&e.length>0&&e[_].code.split(".")[1]==(null==u?void 0:u.usageCategoryMajor.i18nKey.split("_")[3])&&4==e[_].code.split(".").length&&y.push({i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+e[_].code.split(".")[1]+"_"+e[_].code.split(".")[e[_].code.split(".").length-1]});return y.sort((e,t)=>i(e.i18nKey).localeCompare(i(t.i18nKey))),y}(T)&&l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:y||[],selectedOption:p,onSelect:function(e){m(e)}}))),l.createElement(t.CitizenInfoLabel,{info:i("CS_FILE_APPLICATION_INFO_LABEL"),text:i("PT_SUB_USAGE_TYPE_INFO_MSG")}))},IsAnyPartOfThisFloorUnOccupied:e=>{let o,i,{t:a,config:r,onSelect:u,formData:d}=e,s=window.location.href.split("/").pop();return Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),isNaN(s)?[o,i]=n.useState(null==d?void 0:d.IsAnyPartOfThisFloorUnOccupied):[o,i]=n.useState(d.units&&d.units[s]&&d.units[s].IsAnyPartOfThisFloorUnOccupied),l.createElement(t.FormStep,{t:a,config:(r.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==d||null===(c=d.PropertyType)||void 0===c?void 0:c.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+s+"_DETAILS",r),onSelect:function(){let e=window.location.href.split("/").pop();if(isNaN(e))sessionStorage.setItem("IsAnyPartOfThisFloorUnOccupied",o.i18nKey),u("IsAnyPartOfThisFloorUnOccupied",o);else{sessionStorage.setItem("IsAnyPartOfThisFloorUnOccupied",o.i18nKey);let s={...d.units&&d.units[e],IsAnyPartOfThisFloorUnOccupied:o};var t,n,l,i,a;if(u(r.key,s,!1,e),"PT_COMMON_NO"===o.i18nKey)if("PT_GROUND_PLUS_ONE_OPTION"===(null==d||null===(t=d.noOfFloors)||void 0===t?void 0:t.i18nKey)&&e<1&&e>-1){let t=parseInt(e)+1;u("floordetails",{},!0,t,!0)}else if("PT_GROUND_PLUS_TWO_OPTION"===(null==d||null===(n=d.noOfFloors)||void 0===n?void 0:n.i18nKey)&&e<2&&e>-1){let t=parseInt(e)+1;u("floordetails",{},!0,t,!0)}else("PT_ONE_BASEMENT_OPTION"===(null==d||null===(l=d.noOofBasements)||void 0===l?void 0:l.i18nKey)||"PT_TWO_BASEMENT_OPTION"===(null==d||null===(i=d.noOofBasements)||void 0===i?void 0:i.i18nKey))&&e>-1?u("floordetails",{},!0,"-1",!0):"PT_TWO_BASEMENT_OPTION"===(null==d||null===(a=d.noOofBasements)||void 0===a?void 0:a.i18nKey)&&-2!=e&&u("floordetails",{},!0,"-2",!0)}},onSkip:()=>u(),isDisabled:!o},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"},{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"}],selectedOption:o,onSelect:function(e){i(e)}}));var c},UnOccupiedArea:e=>{let o,i,{t:a,config:r,onSelect:u,userType:s,formData:c}=e,p=window.location.href.split("/").pop();var m;isNaN(p)?[o,i]=n.useState(null==c||null===(m=c.UnOccupiedArea)||void 0===m?void 0:m.UnOccupiedArea):[o,i]=n.useState(c.units&&c.units[p]&&c.units[p].UnOccupiedArea);let v={};const[E,_]=n.useState(null),[T,y]=n.useState(null);return l.createElement(t.FormStep,{config:(r.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==c||null===(S=c.PropertyType)||void 0===S?void 0:S.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+p+"_DETAILS",r),onChange:function(e){if(e.target.value.length>1024)setError("CS_COMMON_LANDMARK_MAX_LENGTH");else if(setError(null),i(e.target.value),"employee"===s){var t,n;const l=null==e||null===(t=e.target)||void 0===t?void 0:t.value,o=null==e||null===(n=e.target)||void 0===n?void 0:n.id;u(o,l)}},onSelect:()=>{if(isNaN(p))u("UnOccupiedArea",{UnOccupiedArea:o});else{var e,t,n,l,i;let a={...c.units&&c.units[p],UnOccupiedArea:o};if(u(r.key,a,!1,p),"PT_GROUND_PLUS_ONE_OPTION"===(null==c||null===(e=c.noOfFloors)||void 0===e?void 0:e.i18nKey)&&p<1&&p>-1){let e=parseInt(p)+1;u("floordetails",{},!0,e,!0)}else if("PT_GROUND_PLUS_TWO_OPTION"===(null==c||null===(t=c.noOfFloors)||void 0===t?void 0:t.i18nKey)&&p<2&&p>-1){let e=parseInt(p)+1;u("floordetails",{},!0,e,!0)}else("PT_ONE_BASEMENT_OPTION"===(null==c||null===(n=c.noOofBasements)||void 0===n?void 0:n.i18nKey)||"PT_TWO_BASEMENT_OPTION"===(null==c||null===(l=c.noOofBasements)||void 0===l?void 0:l.i18nKey))&&p>-1?u("floordetails",{},!0,"-1",!0):"PT_TWO_BASEMENT_OPTION"===(null==c||null===(i=c.noOofBasements)||void 0===i?void 0:i.i18nKey)&&-2!=p&&u("floordetails",{},!0,"-2",!0)}},forcedError:a(E)||a(T),onSkip:()=>u(),t:a,isDisabled:E||T||!o,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+a("PT_UNOCCUPIED_AREA_SQ_FEET_LABEL")),l.createElement(t.TextInput,d({t:a,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"RentArea",value:o,onChange:function(e){var t,n,l,o,a,r,u,d;if(i(e.target.value),_(null),y(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==c||null===(t=c.PropertyType)||void 0===t?void 0:t.code)){var s,m,v,E,T,S;let t=parseInt((null==c||null===(s=c.units[p])||void 0===s?void 0:s.floorarea)||0)+parseInt((null==c||null===(m=c.units[p])||void 0===m?void 0:m.RentArea)||0)+parseInt(e.target.value);parseInt(null==c||null===(v=c.units[p])||void 0===v?void 0:v.builtUpArea)<t?_("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"):"PT_YES_IT_IS_SELFOCCUPIED"===(null==c||null===(E=c.units[p])||void 0===E||null===(T=E.selfOccupied)||void 0===T?void 0:T.i18nKey)&&parseInt(null==c||null===(S=c.units[p])||void 0===S?void 0:S.builtUpArea)==parseInt(e.target.value)&&_("PT_BUILTUP_UNOCCUPIED_AREA_NOT_SAME")}"BUILTUP.SHAREDPROPERTY"===(null==c||null===(n=c.PropertyType)||void 0===n?void 0:n.code)&&parseInt(null==c||null===(l=c.floordetails)||void 0===l?void 0:l.builtUpArea)<parseInt(e.target.value)+parseInt((null==c||null===(o=c.landarea)||void 0===o?void 0:o.floorarea)||"0")+parseInt((null==c||null===(a=c.Constructiondetails)||void 0===a?void 0:a.RentArea)||"0")?_("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"):"BUILTUP.SHAREDPROPERTY"===(null==c||null===(r=c.PropertyType)||void 0===r?void 0:r.code)&&"PT_YES_IT_IS_SELFOCCUPIED"===(null==c||null===(u=c.selfOccupied)||void 0===u?void 0:u.i18nKey)&&parseInt(null==c||null===(d=c.floordetails)||void 0===d?void 0:d.builtUpArea)==parseInt(e.target.value)&&_("PT_BUILTUP_UNOCCUPIED_AREA_NOT_SAME"),0==parseInt(e.target.value)&&y("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:a("PT_BUILT_AREA_ERROR_MESSAGE")})));var S},Area:e=>{let o,a,{t:r,config:u,onSelect:s,userType:p,formData:m,setError:v,clearErrors:E,formState:_,onBlur:T}=e,y=window.location.href.split("/").pop();var S;isNaN(y)?[o,a]=n.useState(null===(S=m.landarea)||void 0===S?void 0:S.floorarea):[o,a]=n.useState(m.units&&m.units[y]&&m.units[y].floorarea);const[f,P]=n.useState(null),[g,N]=n.useState(null),[A,O]=n.useState(null),{pathname:I}=i.useLocation(),h=I.includes("modify");function C(e){e.target.value.length>1024?P("CS_COMMON_LANDMARK_MAX_LENGTH"):(P(null),a(e.target.value))}n.useEffect(()=>{"employee"===p&&(Number(o)?isNaN(o)?v(u.key,{type:"invalid",message:r("ERR_DEFAULT_INPUT_FIELD_MSG")}):E(u.key):v(u.key,{type:"required",message:r("CORE_COMMON_REQUIRED_ERRMSG")}),s(u.key,o))},[o]),n.useEffect(()=>{var e;h&&"employee"===p&&a(null==m||null===(e=m.originalData)||void 0===e?void 0:e.landArea)},[]);const R=[{label:"PT_PLOT_SIZE_SQUARE_FEET_LABEL",type:"text",name:"area",validation:{}}];return"employee"===p?null==R?void 0:R.map((e,n)=>{var i,a;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},r(e.label)+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({key:e.name,id:e.name,value:o,onChange:C},e.validation,{onBlur:T})))),_.touched[u.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(i=_.errors)||void 0===i||null===(a=i[u.key])||void 0===a?void 0:a.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:u,onChange:C,forcedError:r(g)||r(A),onSelect:()=>{if(isNaN(y)){var e,t,n,l;"PT_COMMON_YES"!==(null==m||null===(e=m.isResdential)||void 0===e?void 0:e.i18nKey)&&"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"!=(null==m||null===(t=m.usageCategoryMajor)||void 0===t?void 0:t.i18nKey)||"COMMON_PROPTYPE_VACANT"===(null==m||null===(n=m.PropertyType)||void 0===n?void 0:n.i18nKey)?"VACANT"===(null==m||null===(l=m.PropertyType)||void 0===l?void 0:l.code)?sessionStorage.setItem("area","vacant"):sessionStorage.setItem("area","no"):sessionStorage.setItem("area","yes"),s("landarea",{floorarea:o})}else{var i,a,r;let e=m.units&&m.units[y];"PT_COMMON_YES"!==(null==m||null===(i=m.isResdential)||void 0===i?void 0:i.i18nKey)&&"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"!=(null==m||null===(a=m.usageCategoryMajor)||void 0===a?void 0:a.i18nKey)||"COMMON_PROPTYPE_VACANT"===(null==m||null===(r=m.PropertyType)||void 0===r?void 0:r.i18nKey)?sessionStorage.setItem("area","no"):sessionStorage.setItem("area","yes");let t={...e,floorarea:o};s(u.key,t,!1,y)}},onSkip:()=>s(),t:r,isDisabled:g||A||!o,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+r("PT_PLOT_SIZE_SQUARE_FEET_LABEL")),l.createElement(t.TextInput,d({t:r,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"floorarea",value:o,onChange:function(e){var t,n,l,o;a(e.target.value),N(null),O(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==m||null===(t=m.PropertyType)||void 0===t?void 0:t.code)&&parseInt(null==m||null===(n=m.units[y])||void 0===n?void 0:n.builtUpArea)<e.target.value&&N("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"),"BUILTUP.SHAREDPROPERTY"===(null==m||null===(l=m.PropertyType)||void 0===l?void 0:l.code)&&parseInt(null==m||null===(o=m.floordetails)||void 0===o?void 0:o.builtUpArea)<e.target.value&&N("PT_SELFOCCUPIED_AREA_LESS_THAN_BUILTUP"),0==parseInt(e.target.value)&&O("PT_AREA_NOT_0_MSG")}},{pattern:"^([0-9]){0,8}$",type:"number",title:r("PT_PLOT_SIZE_ERROR_MESSAGE")}))))},UID:e=>{let o,a,{t:r,config:u,onSelect:s,userType:p,formData:m,setError:v,clearErrors:E,formState:_,onBlur:T}=e,y=window.location.href.split("/").pop();const[S,f]=n.useState(!0);var P,g,N,A;isNaN(y)?[o,a]=n.useState((null==m||null===(P=m.originalData)||void 0===P||null===(g=P.additionalDetails)||void 0===g?void 0:g.uid)||""):[o,a]=n.useState((null==m||null===(N=m.originalData)||void 0===N||null===(A=N.additionalDetails)||void 0===A?void 0:A.uid)||"");const[O,I]=n.useState(null),{pathname:h}=i.useLocation(),C=h.includes("modify");n.useEffect(()=>{D()},[o]);const R=()=>{sessionStorage.setItem("uid",o.i18nKey),s("uid",{uid:o})};n.useEffect(()=>{var e,t;"employee"===p&&("undefined"!==o&&0===(null===(e=o)||void 0===e?void 0:e.length)?v(u.key,{type:"required",message:r("CORE_COMMON_REQUIRED_ERRMSG")}):"undefined"===o||/^[0-9-]{0,15}$/.test(o)&&15===(null===(t=o)||void 0===t?void 0:t.length)?E(u.key):v(u.key,{type:"invalid",message:r("ERR_DEFAULT_INPUT_FIELD_MSG")}),s(u.key,o))},[o]),n.useEffect(()=>{var e,t;C&&"employee"===p&&a(null==m||null===(e=m.originalData)||void 0===e||null===(t=e.additionalDetails)||void 0===t?void 0:t.uid)},[]);const b=[{label:"PT_ELECTRICITY_UID_LABEL",type:"text",name:"electricity_uid",error:"ERR_HRMS_INVALID_ELECTRICITY_UID_NO",validation:{pattern:"/^[a-zA-Z0-9-]*$",required:!0,minLength:15,maxLength:15}}],D=()=>{(/^[a-zA-Z0-9-]{0,15}$/.test(o)||""===o)&&I(" ")},L=e=>{const t=e.target.value;/^[a-zA-Z0-9-]{0,15}$/.test(t)||""===t?((e=>{a(e.target.value),D()})(e),D()):I("ERR_DEFAULT_INPUT_FIELD_MSG")};return"employee"===p?null==b?void 0:b.map((e,n)=>{var i,a;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},r(e.label)+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({key:e.name,id:e.name,value:o,onChange:L,onSelect:R,placeholder:"Enter a valid 15-digit alphanumeric characters UID"},e.validation,{onBlur:T})))),_.touched[u.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(i=_.errors)||void 0===i||null===(a=i[u.key])||void 0===a?void 0:a.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(ve,{config:u,onChange:L,onSelect:R,onSkip:()=>s(),t:r,isDisabled:15!==o.length,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+r("PT_ELECTRICITY_UID")),l.createElement(t.TextInput,d({t:r,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"uid",value:o,onChange:L,placeholder:"Enter a valid 15-digit alphanumeric characters UID"},b[0].validation))))},Electricity:e=>{let o,a,{t:r,config:u,onSelect:s,userType:p,formData:m,setError:v,clearErrors:E,formState:_,onBlur:T}=e,y=window.location.href.split("/").pop();const[S,f]=n.useState(!0);var P,g,N,A;isNaN(y)?[o,a]=n.useState((null==m||null===(P=m.originalData)||void 0===P||null===(g=P.additionalDetails)||void 0===g?void 0:g.electricity)||""):[o,a]=n.useState((null==m||null===(N=m.originalData)||void 0===N||null===(A=N.additionalDetails)||void 0===A?void 0:A.electricity)||"");const[O,I]=n.useState(null),{pathname:h}=i.useLocation(),C=h.includes("modify");n.useEffect(()=>{D()},[o]);const R=()=>{sessionStorage.setItem("electricity",o.i18nKey),s("electricity",{electricity:o})};n.useEffect(()=>{var e,t,n;"employee"===p&&(console.log("configkeyEEE",u.key),"undefined"!==o&&0===(null===(e=o)||void 0===e?void 0:e.length)?v(u.key,{type:"required",message:r("CORE_COMMON_REQUIRED_ERRMSG")}):"undefined"!==o&&(null===(t=o)||void 0===t?void 0:t.length)<10||(null===(n=o)||void 0===n?void 0:n.length)>10||!Number(o)?v(u.key,{type:"invalid",message:r("ERR_DEFAULT_INPUT_FIELD_MSG")}):E(u.key),s(u.key,o))},[o]),n.useEffect(()=>{var e,t;C&&"employee"===p&&a(null==m||null===(e=m.originalData)||void 0===e||null===(t=e.additionalDetails)||void 0===t?void 0:t.electricity)},[]);const b=[{label:"PT_ELECTRICITY_LABEL",type:"text",name:"electricity",isMandatory:"true",validation:{required:!0,minLength:10,maxLength:10}}],D=()=>{(new RegExp(/^\d{10}$/).test(o)||""===o)&&I("")},L=e=>{const t=e.target.value;new RegExp(/^\d{0,10}$/).test(t)||""===t?((e=>{a(e.target.value),D()})(e),D()):I("Electricity number should contain only 10 digits")};return"employee"===p?null==b?void 0:b.map((e,n)=>{var i,a;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},r(e.label)+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,d({key:e.name,id:e.name,value:o,onChange:L,onSelect:R,placeholder:"Enter a valid 10-digit electricity number"},e.validation,{onBlur:T})))),_.touched[u.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(i=_.errors)||void 0===i||null===(a=i[u.key])||void 0===a?void 0:a.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(ve,{config:u,onChange:L,onSelect:R,onSkip:()=>s(),t:r,isDisabled:10!==o.length,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+r("PT_ELECTRICITY")),l.createElement(t.TextInput,d({t:r,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"electricity",value:o,onChange:L,placeholder:"Enter a valid 10-digit electricity number"},{required:!0,minLength:10,maxLength:10})),O&&l.createElement(t.CardLabelError,null,O)))},PropertyStructureDetails:e=>{var o;let{t:i,config:a,onSelect:r,userType:u,formData:d}=e;window.location.pathname.split("/"),window.location.pathname.includes("new-application/units")||window.location.pathname.includes("/edit-application/units");const[s,p]=n.useState(window.location.pathname.includes("/pt/modify-application/")?d.propertyStructureDetails:{usageCategory:"",structureType:"",ageOfProperty:""});console.log("formaDataPropertyStructureDetails",d);const{isLoading:m}=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"PropertyTax",["Floor","OccupancyType","UsageCategory"],{select:e=>{var t,n,l,o,i,a,r,u,d,s;let c=null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UsageCategory)||void 0===n?void 0:n.map(e=>$o(e.code)).filter(e=>!1===e.usageCategoryDetail&&!1===e.usageCategorySubMinor&&!1!==e.usageCategoryMinor).map(e=>({code:e.usageCategoryMinor,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryMinor})),p=Digit.Utils.getUnique(null==e||null===(l=e.PropertyTax)||void 0===l?void 0:l.UsageCategory.map(e=>$o(e.code)).filter(e=>e.usageCategoryDetail).map(e=>({code:e.usageCategoryDetail,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryDetail,usageCategorySubMinor:e.usageCategorySubMinor,usageCategoryMinor:e.usageCategoryMinor})));return{Floor:null==e||null===(o=e.PropertyTax)||void 0===o||null===(i=o.Floor)||void 0===i||null===(a=i.filter(e=>e.active))||void 0===a?void 0:a.map(e=>({i18nKey:"PROPERTYTAX_FLOOR_"+e.code,code:e.code})),OccupancyType:null==e||null===(r=e.PropertyTax)||void 0===r||null===(u=r.OccupancyType)||void 0===u||null===(d=u.filter(e=>e.active))||void 0===d?void 0:d.map(e=>({i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+e.code,code:e.code})),UsageCategory:c,UsageSubCategory:p,usageDetails:null==e||null===(s=e.PropertyTax)||void 0===s?void 0:s.UsageCategory}},retry:!1,enable:!1});let v=[{i18nKey:"PROPERTYTAX_MONTH>10",name:"greater than 10 years",code:"10",active:!0},{i18nKey:"PROPERTYTAX_MONTH>15",name:"greater than 15 years",code:"15",active:!0},{i18nKey:"PROPERTYTAX_MONTH>25",name:"greater than 24 years",code:"25",active:!0}],E=[{i18nKey:"PERMANENT",name:"Permanent",code:"permanent",active:!0},{i18nKey:"TEMPORARY",name:"Temporary",code:"temporary",active:!0},{i18nKey:"SEMI_PERMANENT",name:"Semi Permanent",code:"semi permanent",active:!0},{i18nKey:"RCC",name:"RCC",code:"RCC",active:!0}];function _(e,t){let n={...s};n.ageOfProperty=t,p(n),"employee"===u&&r(a.key,n)}function T(e,t){let n={...s};n.structureType=t,p(n),"employee"===u&&r(a.key,n)}return m?l.createElement(t.Loader,null):"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:0},l.createElement(t.CardLabel,null,i("PT_STRUCTURE_TYPE")+"*"),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:E,selected:null==s?void 0:s.structureType,placeholder:"Select structure type",select:e=>T(0,e)}))),l.createElement(t.LabelFieldPair,{key:1},l.createElement(t.CardLabel,null,i("PT_AGE_OF_PROPERTY")+"*"),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:v,selected:null==s?void 0:s.ageOfProperty,placeholder:"Select Age of Property",select:e=>_(0,e)})))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:(a.texts.header="PROPERTYTAX_STRUCTURE_DETAILS",a),onSelect:()=>{r(a.key,s)},onSkip:()=>r(),t:i,isDisabled:!s.structureType||!s.ageOfProperty},l.createElement("div",{key:"unique"},l.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},"VACANT"===(null==d||null===(o=d.PropertyType)||void 0===o?void 0:o.code)?l.createElement("div",null,l.createElement(t.CardLabel,null,i("PT_FORM2_USAGE_TYPE")+"*"),l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:[{code:"RESIDENTIAL",name:"RESIDENTIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_RESIDENTIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.COMMERCIAL",name:"NONRESIDENTIAL.COMMERCIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_COMMERCIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.INDUSTRIAL",name:"NONRESIDENTIAL.INDUSTRIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_INDUSTRIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.INSTITUTIONAL",name:"NONRESIDENTIAL.INSTITUTIONAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_INSTITUTIONAL",label:"PropertyType"},{code:"NONRESIDENTIAL.OTHERS",name:"NONRESIDENTIAL.OTHERS",i18nKey:"PROPERTYTAX_BILLING_SLAB_OTHERS",label:"PropertyType"}],selected:null==s?void 0:s.usageCategory,select:e=>function(e,t){let n={...s};n.usageCategory=t,p(n)}(0,e)})):"",l.createElement(t.CardLabel,null,i("PT_STRUCTURE_TYPE")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:E,selected:null==s?void 0:s.structureType,placeholder:"Select structure type",select:e=>T(0,e)})),l.createElement(t.CardLabel,null,i("PT_AGE_OF_PROPERTY")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:v,selected:null==s?void 0:s.ageOfProperty,placeholder:"Select Age of Property",select:e=>_(0,e)}))))))},IsResidential:e=>{let{t:o,config:i,onSelect:a,formData:r}=e;const[u,d]=n.useState(null==r?void 0:r.isResdential);return l.createElement(t.FormStep,{t:o,config:i,onSelect:function(){sessionStorage.setItem("isResdential",u.i18nKey),a(i.key,u)},onSkip:()=>a(),isDisabled:!u},l.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:i.isMandatory,options:[{i18nKey:"PT_COMMON_YES",code:"RESIDENTIAL"},{i18nKey:"PT_COMMON_NO",code:"NONRESIDENTIAL"}],selectedOption:u,onSelect:function(e){d(e)}}))},PropertyType:e=>{var o;let{t:a,config:r,onSelect:u,userType:d,formData:s,setError:p,clearErrors:m,formState:v,onBlur:E}=e;const[_,T]=n.useState(null==s?void 0:s.PropertyType),y=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:S={},isLoading:f}=Digit.Hooks.pt.usePropertyMDMS(y,"PropertyTax","PTPropertyType")||{};let P,g=[];g=null==S||null===(o=S.PropertyTax)||void 0===o?void 0:o.PropertyType;let N=[];function A(e){var t,n;if("employee"===d)return null==e||null===(t=e.filter(e=>"VACANT"===e.code||e.code.split(".").length>1))||void 0===t||null===(n=t.map(e=>({i18nKey:"COMMON_PROPTYPE_"+Fe(null==e?void 0:e.code,".","_"),code:null==e?void 0:e.code})))||void 0===n?void 0:n.sort((e,t)=>e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop()));if(Array.isArray(e)&&e.length>0)for(P=0;P<e.length;P++)Array.isArray(e)&&e.length>0&&N.push({i18nKey:"COMMON_PROPTYPE_"+Fe(e[P].code,".","_"),code:e[P].code});return N.sort((e,t)=>e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop())),N}const{pathname:O}=i.useLocation(),I=O.includes("modify");function h(e){T(e)}function C(){sessionStorage.setItem("PropertyType",null==_?void 0:_.i18nKey),u(r.key,_)}n.useEffect(()=>{if(I&&"employee"===d&&S){var e,t;const n=null==s||null===(e=s.originalData)||void 0===e?void 0:e.propertyType,l=null===(t=A(g))||void 0===t?void 0:t.filter(e=>e.code===n)[0];T(l)}},[f]),n.useEffect(()=>{"employee"===d&&(C(),_?m(r.key):p(r.key,{type:"required",message:a("CORE_COMMON_REQUIRED_ERRMSG")}))},[_]);const R=[{label:"PT_ASSESMENT_INFO_TYPE_OF_BUILDING",type:"text",name:"propertyType",validation:{}}];return f?l.createElement(t.Loader,null):"employee"===d?null==R?void 0:R.map((e,n)=>{var o,i,u,d;return l.createElement(l.Fragment,{key:n},l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},a(e.label)+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null===(o=A(g))||void 0===o?void 0:o.length)?A(g)[0]:_,disable:1===(null===(i=A(g))||void 0===i?void 0:i.length),option:A(g),select:h,optionKey:"i18nKey",onBlur:E,t:a})),v.touched[r.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(u=v.errors)||void 0===u||null===(d=u[r.key])||void 0===d?void 0:d.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:C,onSkip:()=>u(),isDisabled:!_},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:A(g)||{},selectedOption:_,onSelect:h})),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_PROPERTY_TYPE_INFO_MSG")}))},PropertyUsageType:e=>{var o,a,r;let{t:u,config:d,onSelect:s,userType:c,formData:p,formState:m,setError:v,clearErrors:E,onBlur:_}=e;const[T,y]=n.useState(null!=p&&p.usageCategoryMajor&&"NONRESIDENTIAL.OTHERS"===(null==p||null===(o=p.usageCategoryMajor)||void 0===o?void 0:o.code)?{code:""+(null==p||null===(a=p.usageCategoryMajor)||void 0===a?void 0:a.code),i18nKey:"PROPERTYTAX_BILLING_SLAB_OTHERS"}:null==p?void 0:p.usageCategoryMajor),S=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:f={},isLoading:P}=Digit.Hooks.pt.usePropertyMDMS(S,"PropertyTax","UsageCategory")||{};let g,N=[];N=(null==f||null===(r=f.PropertyTax)||void 0===r?void 0:r.UsageCategory)||[];let A=[];const{pathname:O}=i.useLocation(),I=O.includes("modify");function h(e){var t;if("employee"===c)return null==e||null===(t=e.filter(e=>(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==e.code))||void 0===t?void 0:t.map(e=>{const t=null==e?void 0:e.code.split(".");return 2==t.length?{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],code:null==e?void 0:e.code}:{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),code:null==e?void 0:e.code}});for(g=0;g<10;g++)Array.isArray(e)&&e.length>0&&"NONRESIDENTIAL"==e[g].code.split(".")[0]&&2==e[g].code.split(".").length&&A.push({i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e[g].code.split(".")[1],code:e[g].code});return A}function C(e){y(e)}function R(){"PROPERTYTAX_BILLING_SLAB_OTHERS"===(null==T?void 0:T.i18nKey)?(T.i18nKey="PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL",s(d.key,T)):s(d.key,T)}var b,D,L;return n.useEffect(()=>{if(!P&&I&&"employee"===c){var e;const t=null==p||null===(e=p.originalData)||void 0===e?void 0:e.usageCategory,n=h(N).filter(e=>e.code===t)[0];y(n)}},[P]),n.useEffect(()=>{"employee"===c&&(T?E(d.key):v(d.key,{type:"required",message:u("CORE_COMMON_REQUIRED_ERRMSG")}),R())},[T]),"employee"===c?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},u("PT_ASSESMENT_INFO_USAGE_TYPE")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:T,disable:1===(null===(b=h(N))||void 0===b?void 0:b.length),option:h(N),select:e=>{C(e)},optionKey:"i18nKey",onBlur:_,t:u})),m.touched[d.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(D=m.errors)||void 0===D||null===(L=D[d.key])||void 0===L?void 0:L.message):null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(Timeline,{currentStep:1}):null,l.createElement(t.FormStep,{t:u,config:d,onSelect:R,onSkip:()=>s(),isDisabled:!T},l.createElement("div",null,l.createElement(t.RadioButtons,{t:u,optionsKey:"i18nKey",isMandatory:d.isMandatory,options:h(N)||{},selectedOption:T,onSelect:C}))),l.createElement(t.CitizenInfoLabel,{info:u("CS_FILE_APPLICATION_INFO_LABEL"),text:u("PT_USAGE_TYPE_INFO_MSG",T)}))},GroundFloorDetails:e=>{let o,i,a,r,{t:u,config:s,onSelect:c,formData:p}=e,m=window.location.href.split("/").pop(),v={};var E,_;isNaN(m)?([o,a]=n.useState(null===(E=p.floordetails)||void 0===E?void 0:E.plotSize),[i,r]=n.useState(null===(_=p.floordetails)||void 0===_?void 0:_.builtUpArea)):([o,a]=n.useState(p.units&&p.units[m]&&p.units[m].plotSize),[i,r]=n.useState(p.units&&p.units[m]&&p.units[m].builtUpArea));const[T,y]=n.useState(null),[S,f]=n.useState(null);return l.createElement(l.Fragment,null,l.createElement(t.FormStep,{config:(s.texts.header="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==p||null===(P=p.PropertyType)||void 0===P?void 0:P.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+m+"_DETAILS",s),header:"ground",onSelect:()=>{if(isNaN(m))sessionStorage.setItem("propertyArea","multiple"),c("floordetails",{plotSize:o,builtUpArea:i});else{let e=p.units&&p.units[m]||null;if(null!==e)e.builtUpArea=i,e.plotSize=o,c(s.key,e,"",m);else{let e={plotSize:o,builtUpArea:i};sessionStorage.setItem("propertyArea","multiple"),c(s.key,e,"",m)}}},onSkip:()=>c(),t:u,forcedError:u(T)||u(S),isDisabled:T||S||!i&&(!o||!i),showErrorBelowChildren:!0},("0"===m||isNaN(m))&&l.createElement("div",null,l.createElement(t.CardLabel,null,""+u("PT_FLOOR_DETAILS_PLOT_SIZE_LABEL")),l.createElement(t.TextInput,d({t:u,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"PlotSize",value:o,onChange:function(e){a(e.target.value),y(null),f(null),e.target.value&&parseInt(i)>parseInt(e.target.value)&&y("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"),0==parseInt(e.target.value)&&f("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:u("PT_PLOT_SIZE_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,""+u("PT_FLOOR_DETAILS_BUILT_UP_AREA_LABEL")),l.createElement(t.TextInput,d({t:u,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"BuiltUpArea",value:i,onChange:function(e){var t,n,l;r(e.target.value),y(null),f(null),"COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY"===(null==p||null===(t=p.PropertyType)||void 0===t?void 0:t.i18nKey)&&"0"!=m?null!=p&&null!==(n=p.units[0])&&void 0!==n&&n.plotSize&&parseInt(e.target.value)>parseInt(null==p||null===(l=p.units[0])||void 0===l?void 0:l.plotSize)&&y("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"):o&&parseInt(e.target.value)>parseInt(o)&&y("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"),0==parseInt(e.target.value)&&f("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:u("PT_BUILT_AREA_ERROR_MESSAGE")}))),l.createElement(t.CitizenInfoLabel,{info:u("CS_FILE_APPLICATION_INFO_LABEL"),text:u("PT_FLOOR_AREA_INFO_MSG")}));var P},PropertyFloorDetails:e=>{var o,i;let{t:a,config:r,onSelect:u,formData:d,userType:s}=e;const[p,m]=n.useState(null==d?void 0:d.noOfFloors),v=Digit.ULBService.getStateId(),{data:E={}}=Digit.Hooks.pt.usePropertyMDMS(v,"PropertyTax","Floor")||{};function _(){let e=window.location.href.charAt(window.location.href.length-1);u(r.key,p,"",e)}return null==E||null===(o=E.PropertyTax)||void 0===o||null===(i=o.Floor)||void 0===i||i.filter(e=>(null==e?void 0:e.code)>0),n.useEffect(()=>{"employee"===s&&_()},[p]),"employee"===s?null:l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:_,onSkip:()=>u(),isDisabled:!p,isMultipleAllow:!0},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_GROUND_FLOOR_OPTION",code:0},{i18nKey:"PT_GROUND_PLUS_ONE_OPTION",code:1},{i18nKey:"PT_GROUND_PLUS_TWO_OPTION",code:2}],selectedOption:p,onSelect:function(e){m(e)}})),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_USAGE_TYPE_INFO_MSG")}))},PropertyBasementDetails:e=>{let{t:o,config:i,onSelect:a,formData:r}=e;const[u,d]=n.useState(null==r?void 0:r.noOofBasements);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{t:o,config:i,onSelect:function(){sessionStorage.setItem("noOofBasements",u.i18nKey),a(i.key,u)},onSkip:()=>a(),isDisabled:!u,isMultipleAllow:!0},l.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:i.isMandatory,options:[{code:0,i18nKey:"PT_NO_BASEMENT_OPTION"},{code:1,i18nKey:"PT_ONE_BASEMENT_OPTION"},{code:2,i18nKey:"PT_TWO_BASEMENT_OPTION"}],selectedOption:u,onSelect:d})),l.createElement(t.CitizenInfoLabel,{info:o("CS_FILE_APPLICATION_INFO_LABEL"),text:o("PT_BASEMENT_NUMBER_INFO_MSG",u)}))},PropertyInformation:()=>{var e,a,r,u,d,s,c,p,m,v,E,_;const{t:T}=o.useTranslation(),{propertyIds:y}=i.useParams(),[S,f]=n.useState(!1);var P=window.Digit.Utils.browser.isMobile();const[g,N]=n.useState(!1),A=i.useHistory(),O={action:"ASSESS_PROPERTY",forcedName:"PT_ASSESS",showFinancialYearsModal:!0,customFunctionToExecute:e=>{delete e.customFunctionToExecute,A.replace({pathname:"/digit-ui/citizen/pt/assessment-details/"+W.propertyId,state:{...e}})},tenantId:Digit.ULBService.getStateId()},[I,h]=(i.useParams(),n.useState(!1)),[C,R]=n.useState(!1),b=Digit.ULBService.getStateId(),D=Digit.ULBService.getCurrentTenantId(),{data:L}=Digit.Hooks.useCommonMDMSV2(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1}),{isLoading:M,data:w}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:y,tenantId:D}},{filters:{propertyIds:y,tenantId:D}}),{data:x}=Digit.Hooks.pt.usePropertySearch({tenantId:D,filters:{propertyIds:y,audit:!0}},{enabled:g,select:e=>{var t;return null===(t=e.Properties.filter(e=>"ACTIVE"===e.status))||void 0===t?void 0:t.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)}}),[U,F]=n.useState(!1),[B,k]=n.useState({loading:!1,loaded:!1,canLoad:!1}),[H,Y]=n.useState({}),[W,j]=n.useState(()=>(null==w?void 0:w.Properties[0])||" "),K=Digit.Hooks.pt.usePropertyAPI(null==W?void 0:W.tenantId,!1);let V=[];null==W||null===(e=W.documents)||void 0===e||e.filter(e=>e.documentType.includes("SPECIALCATEGORYPROOF")).map(e=>{V.push(e)}),n.useEffect(()=>{var e;w&&(j(null==w?void 0:w.Properties[0]),"ACTIVE"!==(null==w||null===(e=w.Properties[0])||void 0===e?void 0:e.status)&&N(!0))},[w]),n.useEffect(()=>{if(null!=x&&x[0]){var e;const t=(null==x?void 0:x[0])||{};t.owners=null==t||null===(e=t.owners)||void 0===e?void 0:e.filter(e=>"ACTIVE"==e.status),j(t)}},[g,x]),sessionStorage.setItem("pt-property",JSON.stringify(W));let G=[];G=null==W?void 0:W.documents;let z=[],X=[];if(X=null==W?void 0:W.owners,z=null==W?void 0:W.units,z&&z.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1}),M)return l.createElement(t.Loader,null);"ACTIVE"!=(null==W?void 0:W.status)||B.loading||B.loaded||B.canLoad||k({loading:!1,loaded:!1,canLoad:!0}),null==B||!B.canLoad||B.loading||B.loaded||(k({loading:!0,loaded:!1,canLoad:!0}),function(e,t,n,l){try{Promise.resolve(Digit.PTService.assessmentSearch({tenantId:e,filters:{propertyIds:t}})).then(function(o){function i(){n(a),l({loading:!1,loaded:!0,canLoad:!0})}let a={};const r=function(n){if((null==o||null===(n=o.Assessments)||void 0===n?void 0:n.length)>0)return Promise.resolve(Digit.PaymentService.fetchBill(e,{businessService:"PT",consumerCode:t})).then(function(e){a=e})}();return r&&r.then?r.then(i):i()})}catch(e){return Promise.reject(e)}}((null==W?void 0:W.tenantId)||D,y,Y,k));let q,$=0;q=z&&(null===(a=z[0])||void 0===a?void 0:a.floorNo);const Z=e=>{let{jumpTo:n,style:a}=e;const{t:r}=o.useTranslation(),u=i.useHistory();return l.createElement(t.LinkButton,{style:a,label:r("PT_OWNER_HISTORY"),className:"check-page-link-button",onClick:function(){u.push(n)}})},Q=null===(r=Digit)||void 0===r||null===(u=r.ComponentRegistryService)||void 0===u?void 0:u.getComponent("UpdateNumber");if(M||I)return l.createElement(t.Loader,null);const J=()=>{console.log("closeModal"),f(!0)};return console.log("data78",w),l.createElement(l.Fragment,null,l.createElement(t.Header,null,T("PT_PROPERTY_INFORMATION")),l.createElement("div",null,l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:T("PT_PROPERTY_PTUID"),text:""+(W.propertyId||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("CS_COMMON_TOTAL_AMOUNT_DUE"),text:"₹"+T(Uo(H))}),l.createElement(t.LinkLabel,{onClick:()=>A.push({pathname:"/digit-ui/citizen/pt/payment-details/"+(null==W?void 0:W.propertyId)}),style:P?{marginTop:"15px",marginLeft:"0px"}:{marginTop:"15px"}},T("PT_VIEW_PAYMENT"))),l.createElement(xo,{bill:null===(d=H.Bill)||void 0===d?void 0:d[0]}),l.createElement(t.CardSubHeader,null,T("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:T("PT_PROPERTY_ADDRESS_PINCODE"),text:""+((null===(s=W.address)||void 0===s?void 0:s.pincode)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_COMMON_CITY"),text:""+(T(ge(null==W?void 0:W.tenantId))||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_COMMON_LOCALITY_OR_MOHALLA"),text:""+T(null==W||null===(c=W.address)||void 0===c||null===(p=c.locality)||void 0===p?void 0:p.name)||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_PROPERTY_ADDRESS_STREET_NAME"),text:""+((null===(m=W.address)||void 0===m?void 0:m.street)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_PROPERTY_ADDR_DOOR_HOUSE_NO"),text:""+((null===(v=W.address)||void 0===v?void 0:v.doorNo)||T("CS_NA"))})),l.createElement(t.CardSubHeader,null,T("PT_PROPERTY_ASSESSMENT_DETAILS_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:T("PT_COMMON_PROPERTY_TYPE"),text:""+T(Se(null==W?void 0:W.propertyType))||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_ASSESMENT1_PLOT_SIZE"),text:W.landArea+" sq.ft"||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_ASSESMENT_INFO_NO_OF_FLOOR"),text:""+(W.noOfFloors||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_ASSESSMENT1_ELECTRICITY"),text:""+((null==W||null===(E=W.additionalDetails)||void 0===E?void 0:E.electricity)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_ASSESSMENT1_UID"),text:""+((null==W||null===(_=W.additionalDetails)||void 0===_?void 0:_.uid)||T("CS_NA"))})),l.createElement("div",null,Array.isArray(z)&&z.length>0&&z.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},(q!==(null==e?void 0:e.floorNo)?$=1:$+=1)&&1===$&&l.createElement(t.CardSubHeader,null,T("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))),l.createElement("div",{style:{border:"groove",marginBottom:"10px"}},l.createElement(t.CardSubHeader,null,T("ES_APPLICATION_DETAILS_UNIT")," ",$),(q=null==e?void 0:e.floorNo)>-5&&l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:T("PT_ASSESSMENT_UNIT_USAGE_TYPE"),text:""+T(("RESIDENTIAL"!==W.usageCategory?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPUSGTYPE_")+(null!=W&&null!==(o=W.usageCategory)&&void 0!==o&&o.split(".")[1]?null==W||null===(i=W.usageCategory)||void 0===i?void 0:i.split(".")[1]:W.usageCategory))||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_OCCUPANY_TYPE_LABEL"),text:""+T("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType))||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_BUILTUP_AREA_LABEL"),text:""+((null==e||null===(a=e.constructionDetail)||void 0===a?void 0:a.builtUpArea)+" sq.ft"||T("CS_NA"))}),"RENTED"==e.occupancyType&&l.createElement(t.Row,{className:"border-none",label:T("PT_FORM2_TOTAL_ANNUAL_RENT"),text:""+((null==e?void 0:e.arv)&&"₹"+(null==e?void 0:e.arv)||T("CS_NA"))}))))})),l.createElement(t.CardSubHeader,null,T("PT_COMMON_PROPERTY_OWNERSHIP_DETAILS_HEADER")),l.createElement("div",{className:"owner-details"},Array.isArray(X)&&X.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map((e,n)=>{var o,i,a,r,u,d,s,c,p,m,v,E;return l.createElement("div",{key:n,className:"owner-details-child"},l.createElement(t.CardSubHeader,null,1!=X.length&&l.createElement("span",null,T("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,(null==W?void 0:W.institution)&&(null==W||null===(o=W.institution)||void 0===o?void 0:o.name)&&l.createElement(t.Row,{className:"border-none",label:T("PT_INSTITUTION_NAME"),text:""+((null==W||null===(i=W.institution)||void 0===i?void 0:i.name)||T("CS_NA"))}),(null==W?void 0:W.institution)&&(null==W||null===(a=W.institution)||void 0===a?void 0:a.type)&&l.createElement(t.Row,{className:"border-none",label:T("PT_INSTITUTION_TYPE"),text:""+(T("COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==W||null===(r=W.institution)||void 0===r?void 0:r.type))||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_COMMON_APPLICANT_NAME_LABEL"),textStyle:P?{marginLeft:"27%",marginRight:"5%",wordBreak:"break-word"}:{marginLeft:"18%"},text:""+((null==e?void 0:e.name)||T("CS_NA")),actionButtonStyle:{marginRight:"-10px"},actionButton:l.createElement(Z,{style:{marginRight:"-10px"},jumpTo:"/digit-ui/citizen/pt/property/owner-history/"+W.tenantId+"/"+W.propertyId})}),l.createElement(t.Row,{className:"border-none",label:T("PT_COMMON_GENDER_LABEL"),text:""+(null!=e&&e.gender?null==e?void 0:e.gender.toLowerCase():T("CS_NA"))}),(null==W?void 0:W.institution)&&l.createElement(t.Row,{className:"border-none",label:T("PT_LANDLINE_NUMBER_FLOATING_LABEL"),text:""+((null==e?void 0:e.altContactNumber)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_FORM3_MOBILE_NUMBER"),text:""+T(null==e?void 0:e.mobileNumber)||T("CS_NA"),textStyle:P?{marginLeft:"16%"}:{marginLeft:"12%"},actionButton:"ACTIVE"===(null==W?void 0:W.status)&&(null==e?void 0:e.mobileNumber)&&(null===(u=Digit.UserService.getUser())||void 0===u||null===(d=u.info)||void 0===d?void 0:d.mobileNumber)&&e.mobileNumber===(null===(s=Digit.UserService.getUser())||void 0===s||null===(c=s.info)||void 0===c?void 0:c.mobileNumber)&&l.createElement("div",{onClick:()=>F({name:null==e?void 0:e.name,mobileNumber:null==e?void 0:e.mobileNumber,ownerIndex:n})},l.createElement(t.EditIcon,null))}),(null==W?void 0:W.institution)&&(null==W||null===(p=W.institution)||void 0===p?void 0:p.designation)&&l.createElement(t.Row,{className:"border-none",label:T("Designation"),text:""+((null==W||null===(m=W.institution)||void 0===m?void 0:m.designation)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_FORM3_GUARDIAN_NAME"),text:""+((null==e?void 0:e.fatherOrHusbandName)||T("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:T("PT_FORM3_OWNERSHIP_TYPE"),text:""+T(null!=W&&W.ownershipCategory?"PT_OWNERSHIP_"+(null==W?void 0:W.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_FORM3_RELATIONSHIP"),text:""+((null==e?void 0:e.relationship)||T("CS_NA"))}),V&&V.length>0&&l.createElement(t.Row,{className:"border-none",label:T("PT_SPL_CAT_DOC_TYPE"),text:""+T(Fe(null===(v=V[n])||void 0===v?void 0:v.documentType,".","_"))||T("NA")}),V&&V.length>0&&l.createElement(t.Row,{className:"border-none",label:T("PT_SPL_CAT_DOC_ID"),text:""+T(null===(E=V[n])||void 0===E?void 0:E.id)||T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_MUTATION_AUTHORISED_EMAIL"),text:null!=e&&e.emailId?null==e?void 0:e.emailId:""+T("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:T("PT_OWNERSHIP_INFO_CORR_ADDR"),text:""+T(null==e?void 0:e.permanentAddress)||T("CS_NA")}),0==(null==V?void 0:V.length)&&l.createElement(t.Row,{className:"border-none",label:T("PT_SPL_CAT"),text:(null==e?void 0:e.ownerType)||T("CS_NA")})))})),l.createElement(t.CardSubHeader,null,T("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(G)?G.length>0&&l.createElement(Ut,{property:W}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:T("PT_NO_DOCUMENTS_MSG")}))),l.createElement("div",null,"ACTIVE"===(null==W?void 0:W.status)&&!g&&l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement("button",{className:"submit-bar",type:"button",onClick:()=>{sessionStorage.setItem("type","PT"),sessionStorage.setItem("pincode",w.Properties[0].address.pincode),sessionStorage.setItem("tenantId",w.Properties[0].address.tenantId),sessionStorage.setItem("localityCode",w.Properties[0].address.locality.code),sessionStorage.setItem("landmark",w.Properties[0].address.landmark),sessionStorage.setItem("propertyid",w.Properties[0].propertyId),A.push("/digit-ui/citizen/pgr/create-complaint/complaint-type?propertyId="+W.propertyId)},style:{fontFamily:"sans-serif",color:"white",fontSize:"19px"}},T("PT_PGR"))),"ACTIVE"===(null==W?void 0:W.status)&&!g&&l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/pt/property/edit-application/action=UPDATE/"+W.propertyId}},l.createElement(t.SubmitBar,{label:T("PT_UPDATE_PROPERTY_BUTTON")}))),"ACTIVE"===(null==W?void 0:W.status)&&!g&&l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement("button",{className:"submit-bar",type:"button",onClick:()=>{f(!0)},style:{fontFamily:"sans-serif",color:"white",fontSize:"19px"}},T("PT_SELF_ASSES_PROPERTY")))),U&&l.createElement(t.PopUp,{className:"updatenumber-warper-citizen"},l.createElement(Q,{showPopup:F,name:null==U?void 0:U.name,UpdateNumberConfig:L,mobileNumber:null==U?void 0:U.mobileNumber,t:T,onValidation:(e,t)=>{let n={...W};n.owners[null==U?void 0:U.ownerIndex].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null,K.mutate({Property:n},{onError:()=>{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}})),S?l.createElement(Do,{t:T,action:O,tenantId:D,state:b,id:W.propertyId,applicationDetails:W,applicationData:W,closeModal:J,submitAction:function(e,t,n){void 0===t&&(t=!1);try{let n=!1;function l(e){if(n)return e;J()}h(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(console.log("customFunctionToExecute"),null==e||e.customFunctionToExecute({...e}));const o=function(){if(!1!==t&&nocMutation){var e;const l=null===(e=t)||void 0===e?void 0:e.map(e=>{var t;return null===(t=nocMutation)||void 0===t?void 0:t.mutateAsync(e)}),o=Ee(function(){return h(!0),Promise.resolve(Promise.all(l)).then(function(e){e&&e.map(e=>{var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,l,o,i,a,r,u,d,s,c,p,m;h(!1);let v=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(o=l.Errors)&&void 0!==o&&null!==(i=o[0])&&void 0!==i&&i.code?T(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(s=e.response)||void 0===s||null===(c=s.data)||void 0===c||null===(p=c.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;J(),setShowToast({key:"error",error:{message:v}}),setTimeout(closeToast,5e3),n=!0});if(o&&o.then)return o.then(function(){})}}();return Promise.resolve(o&&o.then?o.then(l):l(o))}catch(e){return Promise.reject(e)}},businessService:"PT",moduleCode:"PT"}):null)))},ProvideFloorNo:e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e;window.location.href.split("/").pop(),Digit.ULBService.getCurrentTenantId();const d=Digit.ULBService.getStateId(),[s,c]=n.useState((null==u?void 0:u.Floorno)||""),{data:p}=Digit.Hooks.pt.usePropertyMDMS(d,"PropertyTax","Floor")||{};let m,v=[];v=null==p||null===(o=p.PropertyTax)||void 0===o?void 0:o.Floor;let E=[];return l.createElement(t.FormStep,{t:i,config:a,onSelect:function(){r(a.key,s)},onSkip:()=>r(),isDisabled:!s},l.createElement(t.CardLabel,null,i("PT_FLOOR_NUMBER_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},E&&l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:function(e){for(m=0;Array.isArray(e)&&m<e.length;m++)E.push({i18nKey:"PROPERTYTAX_FLOOR_"+Fe(e[m].code,"-","_")});return E}(v)||{},selectedOption:s,onSelect:function(e){c(e)}})))},PropertyOwnerHistory:Bo,TransferDetails:Bo,Units:e=>{var o,a,r,u,d,s,c,p,m,v,E,_;let{t:T,config:y,onSelect:S,formData:f,setError:P,formState:g,clearErrors:N}=e;const{pathname:A}=i.useLocation(),O=A.includes("modify");let I=window.Digit.Utils.browser.isMobile();const h=Digit.ULBService.getCurrentTenantId(),[C,R]=n.useState((null==f?void 0:f.units)||[{key:Date.now(),order:1,floorNo:null,occupancyType:null,tenantId:h,usageCategory:null,builtUpArea:"",RentedMonths:null,ageOfProperty:null,structureType:null,NonRentedMonthsUsage:null}]),b=Digit.ULBService.getStateId(),[D,L]=n.useState({index:-1}),[M,w]=n.useState(!0),{data:x,isLoading:U}=Digit.Hooks.pt.usePropertyMDMS(b,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"])||{};let F=[];F=(null==x||null===(o=x.PropertyTax)||void 0===o||null===(a=o.UsageCategory)||void 0===a?void 0:a.filter(e=>"MIXED"!==(null==e?void 0:e.code)))||[];let B=[];B=null==x||null===(r=x.PropertyTax)||void 0===r?void 0:r.Floor;let k=[];k=(null==x||null===(u=x.PropertyTax)||void 0===u||null===(d=u.OccupancyType)||void 0===d?void 0:d.map(e=>({i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.code),...e})))||[];let H=[{i18nKey:"PROPERTYTAX_MONTH1",name:"Month 1",code:"1",active:!0},{i18nKey:"PROPERTYTAX_MONTH2",name:"Month 2",code:"2",active:!0},{i18nKey:"PROPERTYTAX_MONTH3",name:"Month 3",code:"3",active:!0},{i18nKey:"PROPERTYTAX_MONTH4",name:"Month 4",code:"4",active:!0},{i18nKey:"PROPERTYTAX_MONTH5",name:"Month 5",code:"5",active:!0},{i18nKey:"PROPERTYTAX_MONTH6",name:"Month 6",code:"6",active:!0},{i18nKey:"PROPERTYTAX_MONTH7",name:"Month 7",code:"7",active:!0},{i18nKey:"PROPERTYTAX_MONTH8",name:"Month 8",code:"8",active:!0},{i18nKey:"PROPERTYTAX_MONTH9",name:"Month 9",code:"9",active:!0},{i18nKey:"PROPERTYTAX_MONTH10",name:"Month 10",code:"10",active:!0},{i18nKey:"PROPERTYTAX_MONTH11",name:"Month 11",code:"11",active:!0},{i18nKey:"PROPERTYTAX_MONTH12",name:"Month 12",code:"12",active:!0}],Y=[{i18nKey:"NON_RENT_SELFOCCUPIED",name:"Non Rent Self occupied",code:"NonRentSelfOccupied",active:!0},{i18nKey:"NON_RENT_UNOCCUPIED",name:"Non rent Un occupied",code:"NonRentUnOccupied",active:!0}],W=[{i18nKey:"PROPERTYTAX_MONTH>10",name:"greater than 10 years",code:"10",active:!0},{i18nKey:"PROPERTYTAX_MONTH>15",name:"greater than 15 years",code:"15",active:!0},{i18nKey:"PROPERTYTAX_MONTH>25",name:"greater than 24 years",code:"25",active:!0}],j=[{i18nKey:"PERMANENT",name:"Permanent",code:"permanent",active:!0},{i18nKey:"TEMPORARY",name:"Temporary",code:"temporary",active:!0},{i18nKey:"SEMI_PERMANENT",name:"Semi Permanent",code:"semiPermanent",active:!0},{i18nKey:"RCC",name:"RCC",code:"RCC",active:!0}],K=[];function V(e){return K=(null==e?void 0:e.map(e=>({i18nKey:"PROPERTYTAX_FLOOR_"+Fe(null==e?void 0:e.code,"-","_"),code:null==e?void 0:e.code})))||[],K}n.useEffect(()=>{if(!U&&O&&x){var e,t,n;let l=null==f||null===(e=f.originalData)||void 0===e||null===(t=e.units)||void 0===t||null===(n=t.filter(e=>e.active))||void 0===n?void 0:n.map((e,t)=>{let{occupancyType:n,usageCategory:l,constructionDetail:o,floorNo:i,arv:a}=e;n=k.filter(e=>(null==e?void 0:e.code)===n)[0];let r=G(F).filter(e=>(null==e?void 0:e.code)===l)[0];i=V(B).filter(e=>(null==e?void 0:e.code)==i)[0];let u=Date.now()+t;return{floorNo:i,occupancyType:n,usageCategory:r,key:u,order:t+1,builtUpArea:o.builtUpArea,existingUsageCategory:l,arv:a}});R(l||[]),w(!1)}},[U]);const G=e=>{var t;return null==e||null===(t=e.filter(e=>(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==(null==e?void 0:e.code)))||void 0===t?void 0:t.map(e=>{const t=null==e?void 0:e.code.split(".");return 2==t.length?{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],code:null==e?void 0:e.code}:{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),code:null==e?void 0:e.code}})},z=e=>F.filter(t=>(null==t?void 0:t.code.includes(null==e?void 0:e.code))&&4===(null==t?void 0:t.code.split(".").length)).map(e=>{const t=null==e?void 0:e.code.split(".");return{i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+t[1]+"_"+t[3],code:null==e?void 0:e.code}}),X=()=>{R(e=>e.map((e,t)=>({...e,order:t+1})))},q=e=>{var t,n;R(t=>t.filter(t=>t.key!==e.key)),(null===(t=g.errors)||void 0===t||null===(n=t.units)||void 0===n?void 0:n.type)==e.key&&N("units"),X()};return n.useEffect(()=>{var e;"VACANT"===(null==f||null===(e=f.PropertyType)||void 0===e?void 0:e.code)&&g.errors[y.key]&&N(y.key)},[null==f?void 0:f.PropertyType]),n.useEffect(()=>{!function(){var e;let t=null==C?void 0:C.map(e=>{var t,n,l,o,i,a,r;return{occupancyType:null==e||null===(t=e.occupancyType)||void 0===t?void 0:t.code,RentedMonths:null==e||null===(n=e.RentedMonths)||void 0===n?void 0:n.code,ageOfProperty:null==e||null===(l=e.ageOfProperty)||void 0===l?void 0:l.code,structureType:null==e||null===(o=e.structureType)||void 0===o?void 0:o.code,NonRentedMonthsUsage:null==e||null===(i=e.NonRentedMonthsUsage)||void 0===i?void 0:i.code,floorNo:null==e||null===(a=e.floorNo)||void 0===a?void 0:a.code,constructionDetail:{builtUpArea:null==e?void 0:e.builtUpArea},tenantId:Digit.ULBService.getCurrentTenantId(),usageCategory:null==e||null===(r=e.usageCategory)||void 0===r?void 0:r.code}});t=null===(e=t)||void 0===e?void 0:e.map((e,t)=>"RENTED"===e.occupancyType?{...e,arv:C[t].arv}:e),S(y.key,t)}(),(()=>{var e,t;if("BUILTUP.INDEPENDENTPROPERTY"!==(null==f||null===(e=f.PropertyType)||void 0===e?void 0:e.code)){var n,l;if("units_missing"===(null===(n=g.errors[y.key])||void 0===n?void 0:n.type)&&N(y.key),null!=f&&null!==(l=f.PropertyType)&&void 0!==l&&l.code.includes("BUILTUP")){let e=C.reduce((e,t)=>t.floorNo?e[t.floorNo]?e:{...e,[t.floorNo]:1}:e,{});S("noOfFloors",Object.keys(e).length);let t=C.reduce((e,t)=>{let{floorNo:n,builtUpArea:l}=t;if(!n)return e;let o=Number(l)||0;return e[null==n?void 0:n.code]=isNaN(null==e?void 0:e[null==n?void 0:n.code])?o:e[null==n?void 0:n.code]+o,e},{});Object.keys(t).reduce((e,n)=>t[n]<=e?e:t[n],0)>Number(null==f?void 0:f.landarea)?P(y.key,{type:"landArea extended",message:T("PT_BUILTUPAREA_GRATER_THAN_LANDAREA")}):N(y.key)}return}if(null===(t=B)||void 0===t||!t.length)return;let o=C.reduce((e,t)=>{var n;return Math.min(e,Number(null===(n=t.floorNo)||void 0===n?void 0:n.code)||Number(0))},Number(0)),i=C.reduce((e,t)=>{var n;return Math.max(e,Number(null===(n=t.floorNo)||void 0===n?void 0:n.code)||Number(0))},Number(0)),a=C.reduce((e,t)=>{let{floorNo:n,builtUpArea:l}=t;if(!n)return e;let o=Number(l)||0;return e[null==n?void 0:n.code]=isNaN(null==e?void 0:e[null==n?void 0:n.code])?o:e[null==n?void 0:n.code]+o,e},{}),r=Object.keys(a).reduce((e,t)=>a[t]<=e?e:a[t],0);const u=K.filter(e=>{let t=Number(null==e?void 0:e.code);return t<i&&t>o||t===i||t===o});let d=[...u];u.forEach(e=>{C.some(t=>{var n;return(null===(n=t.floorNo)||void 0===n?void 0:n.code)===(null==e?void 0:e.code)})?d=d.filter(t=>(null==t?void 0:t.code)!==(null==e?void 0:e.code)):d.some(t=>(null==t?void 0:t.code)===(null==e?void 0:e.code))||d.push(e)}),d.length&&C.some(e=>{var t;return null==e||null===(t=e.floorNo)||void 0===t?void 0:t.code})?P(y.key,{type:"units_missing",message:"PT_FLOORS_MISSING_UNITS."+d.map(e=>null==e?void 0:e.code).join()}):r>Number(null==f?void 0:f.landarea)?P(y.key,{type:"landArea extended",message:T("PT_BUILTUPAREA_GRATER_THAN_LANDAREA")}):N(y.key),S("noOfFloors",i+1)})()},[C,f.PropertyType,f.landarea]),M&&O?l.createElement(t.Loader,null):"VACANT"!==(null==f||null===(s=f.PropertyType)||void 0===s?void 0:s.code)&&null!=f&&null!==(c=f.PropertyType)&&void 0!==c&&c.code&&null!=f&&null!==(p=f.usageCategoryMajor)&&void 0!==p&&p.code?l.createElement("div",null,null==C?void 0:C.map((e,t)=>l.createElement(qe,{t:T,key:e.key,unit:e,allUnits:C,setUnits:R,index:t,stateId:b,focusIndex:D,setFocusIndex:L,isMobile:I,getfloorlistdata:V,floorlist:B,occupencyOptions:k,rentedmonths:H,ageOfPropertyOptions:W,structureTypeOptions:j,nonrentedusage:Y,formData:f,handleRemoveUnit:q,formState:g,setError:P,clearErrors:N,usageCategoryMajorMenu:G,subUsageCategoryMenu:z})),l.createElement(t.LinkButton,{label:T("PT_ADD_UNIT"),onClick:()=>{R(e=>[...e,{key:Date.now(),floorNo:null,occupancyType:null,tenantId:h,usageCategory:null,builtUpArea:null==f?void 0:f.landarea,order:e.length+1}]),X()},style:{color:"orange",width:"175px"}}),["units_missing","landArea extended"].includes(null===(m=g.errors)||void 0===m||null===(v=m[y.key])||void 0===v?void 0:v.type)?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},T(null===(E=g.errors)||void 0===E?void 0:E[y.key].message.split(".")[0])+"-\n           "+((null===(_=g.errors)||void 0===_?void 0:_[y.key].message.split(".")[1])||" ")):null):null},SelectAltContactNumber:e=>{var o;let{t:a,config:r,onSelect:u,formData:d}=e;const[s,c]=n.useState(null==d||null===(o=d.owners)||void 0===o?void 0:o.altContactNumber),{pathname:p}=i.useLocation(),m=p.includes("/modify-application/");return n.useEffect(()=>{u(r.key,{...d[r.key],altContactNumber:s})},[s]),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller",style:m?{color:"#B1B4B6"}:{}},a("ES_PT_ALT_CONTACT_NUMBER")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{name:"altContactNumber",onChange:e=>c(e.target.value),value:s,disable:m})))},SelectDocuments:e=>{var o,a,r,u,d;let{t:s,config:c,onSelect:p,formData:m,setError:v,clearErrors:E,formState:_}=e;Digit.ULBService.getCurrentTenantId();const T=Digit.ULBService.getStateId(),[y,S]=n.useState((null==m||null===(o=m.documents)||void 0===o?void 0:o.documents)||[]),[f,P]=n.useState(null);let g="create";const{pathname:N}=i.useLocation(),A=N.includes("/modify-application/"),O=N.includes("/property-mutate/");A&&(g="update");const I=JSON.parse(sessionStorage.getItem("PropertyInitials")),{isLoading:h,data:C}=Digit.Hooks.pt.usePropertyMDMS(T,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory","MutationDocuments"]),R=null==C||null===(a=C.PropertyTax)||void 0===a?void 0:a.MutationDocuments,b=null==C||null===(r=C.PropertyTax)||void 0===r?void 0:r.Documents,D=O?null==R||null===(u=R.map)||void 0===u?void 0:u.call(R,e=>b.find(t=>e.code===t.code)||e):null==C||null===(d=C.PropertyTax)||void 0===d?void 0:d.Documents;return n.useEffect(()=>{p(c.key,{documents:y,propertyTaxDocumentsLength:null==D?void 0:D.length})},[y]),h?l.createElement(t.Loader,null):l.createElement("div",null,O?l.createElement(t.CardSectionHeader,null,s("PT_MUTATION_DOCUMENTS_HEADER")," "):null,null==D?void 0:D.map((e,t)=>l.createElement($e,{key:t,document:e,action:g,t:s,id:"pt-document-"+t,error:f,setError:P,setDocuments:S,documents:y,formData:m,setFormError:v,clearFormErrors:E,config:c,formState:_,propertyInitialValues:I})),f&&l.createElement(t.Toast,{label:f,onClose:()=>P(null),error:!0}))},PTEmployeeOwnershipDetails:e=>{var a,r,u;let{config:s,onSelect:c,formData:p,setError:m,formState:v,clearErrors:E}=e;const{t:_}=o.useTranslation(),{pathname:T}=i.useLocation(),y=T.includes("/modify-application/"),[S,f]=n.useState((null==p?void 0:p.owners)||[Ze()]),[P,g]=n.useState({index:-1,type:""}),N=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:A}=Digit.Hooks.pt.usePropertyMDMS(N,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]),{data:O}=Digit.Hooks.pt.usePTGenderMDMS(N,"common-masters","GenderType");let I=[];O&&O.map(e=>{I.push({i18nKey:"PT_FORM3_"+e.code,code:""+e.code,value:""+e.code})}),n.useEffect(()=>{c(null==s?void 0:s.key,S)},[S]),n.useEffect(()=>{null!=p&&p.owners||f([Ze()])},[null==p||null===(a=p.ownershipCategory)||void 0===a?void 0:a.code]);const h={focusIndex:P,allOwners:S,setFocusIndex:g,removeOwner:e=>{f(t=>t.filter(t=>t.key!=e.key))},formData:p,formState:v,setOwners:f,mdmsData:A,t:_,setError:m,clearErrors:E,config:s,menu:I,isEditScreen:y};return null!=p&&null!==(r=p.ownershipCategory)&&void 0!==r&&r.code?l.createElement(l.Fragment,null,S.map((e,t)=>l.createElement(Qe,d({key:e.key,index:t,owner:e},h))),y||"INDIVIDUAL.MULTIPLEOWNERS"!==(null==p||null===(u=p.ownershipCategory)||void 0===u?void 0:u.code)?null:l.createElement(t.LinkButton,{label:"Add Owner",onClick:()=>{const e=Ze();f(t=>[...t,e])},style:{color:"orange"}})):null},SearchPropertyCitizen:ct,SearchResultCitizen:vt,TransfererDetails:ko,OwnerMutate:e=>{var t;const{onSelect:o,formData:a,config:r}=e,{pathname:u}=i.useLocation(),[s,c]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS",[Ho()]),[p,m]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS_LAST_PATH","/0/"+Yo[0].route),{path:v}=i.useRouteMatch(),E="INDIVIDUAL.MULTIPLEOWNERS"===(null==a||null===(t=a.ownershipCategory)||void 0===t?void 0:t.code),_=i.useHistory();n.useEffect(()=>{s.length||c([Ho()])},[]),n.useEffect(()=>{!E&&s.length>1&&(c([s[0]]),o(r.key,[s[0]]),_.replace(v+"/0/"+Yo[0].route))},[E]),n.useEffect(()=>{p!==u.split(v)[1]&&m(u.split(v)[1])},[u]);const T=n.useRef();n.useEffect(()=>{T.current=[...s].length});const y=T.current;n.useEffect(()=>{s.length>y&&_.push(v+"/"+(s.length-1)+"/"+Yo[0].route)},[s]);const S={addNewOwner:()=>{const e=Ho();E&&c(t=>[...t,e])},removeOwner:e=>{c(t=>t.filter(t=>t.key!=e.key))},setOwners:c,owners:s,...e,propsConfig:r};return l.createElement(l.Fragment,null,l.createElement(i.Switch,null,s.map((e,t)=>l.createElement(i.Route,{key:e.key,path:v+"/"+t},l.createElement(Wo,d({owner:e,ownerIndex:t},S)))),l.createElement(i.Route,null,u!=""+v+p&&""!=p?l.createElement(i.Redirect,{to:""+v+p}):null)))},PTComments:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:d}=e,[s,p]=n.useState(null==d||null===(o=d[a.key])||void 0===o?void 0:o.remarks);return"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_REMARKS")),l.createElement("div",{className:"field"},l.createElement(t.TextArea,{onChange:e=>p(e.target.value),value:s})))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:()=>{r(a.key,{...null==d?void 0:d[a.key],remarks:s})},onSkip:()=>{}},l.createElement("div",null,l.createElement(t.TextArea,{onChange:e=>p(e.target.value),value:s}))))},IsMutationPending:e=>{var o,i;const{t:a,config:r,onSelect:u,userType:d,formData:s,setError:p,clearErrors:m,errors:v}=e,[E,_]=n.useState(null==s||null===(o=s[r.key])||void 0===o?void 0:o.isMutationInCourt),[T,y]=n.useState((null==s||null===(i=s[r.key])||void 0===i?void 0:i.caseDetails)||""),S=()=>{u(r.key,{...null==s?void 0:s[r.key],isMutationInCourt:E,caseDetails:T})};return n.useEffect(()=>{"NO"===(null==E?void 0:E.code)&&null!=T&&T.length&&y(""),"employee"===d&&(E?null!=v&&v[r.key]&&m(r.key):p(r.key,{type:"Required"}),S())},[E,T]),"employee"===d?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},l.createElement("div",{className:"field",style:{width:"55%"}},l.createElement(t.CheckBox,{label:a("PT_MUTATION_COURT_PENDING_OR_NOT")+"*",name:"isMutationInCourt",onChange:function(e){_(1==e.target.checked?{code:"YES"}:{code:"NO"})},checked:"YES"===(null==E?void 0:E.code),style:{paddingBottom:"10px",paddingTop:"3px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#0b0c0c"}}))),l.createElement(t.LabelFieldPair,{style:{marginBottom:"50px"}},l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},a("PT_MUTATION_COURT_CASE_DETAILS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{disable:"YES"!==(null==E?void 0:E.code),value:T,onChange:e=>y(e.target.value)})))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:a,config:r,onSelect:S,onSkip:()=>{},isDisabled:!E},l.createElement("div",null,l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{code:"YES"},{code:"NO"}],selectedOption:E,onSelect:e=>{_(e)},labelKey:"PT_MUTATION_PENDING",isDependent:!0}),l.createElement(t.CardLabel,null,a("PT_MUTATION_COURT_CASE_DETAILS")),l.createElement(t.TextInput,{disable:"YES"!==(null==E?void 0:E.code),value:T,onChange:e=>y(e.target.value)}))))},PropertyMarketValue:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:d,setError:s,clearErrors:p,errors:m}=e,[v,E]=n.useState(null==d||null===(o=d[a.key])||void 0===o?void 0:o.marketValue);n.useEffect(()=>{"employee"===u&&(v?null!=m&&m[a.key]&&p(a.key):s(a.key,{type:"Required"}),_())},[v]);const _=()=>{r(a.key,{...null==d?void 0:d[a.key],marketValue:v})};return"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_MARKET_VALUE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,onChange:e=>E(e.target.value),value:v})))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:_,onSkip:()=>{},isDisabled:!v},l.createElement("div",{className:"field-container"},l.createElement("span",{className:"citizen-card-input citizen-card-input--front"},"₹"),l.createElement(t.TextInput,{type:"number",min:0,onChange:e=>E(e.target.value),value:v}))))},PTReasonForTransfer:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:d,setError:s,clearErrors:p,errors:m}=e,{data:v}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","ReasonForTransfer",{}),[E,_]=n.useState([]);n.useEffect(()=>{if(v){let e=v.PropertyTax.ReasonForTransfer.map(e=>({...e,i18nKey:"PROPERTYTAX_REASONFORTRANSFER_"+e.code}));_(e)}},[v]);const[T,y]=n.useState(null==d||null===(o=d[a.key])||void 0===o?void 0:o.reasonForTransfer),S=()=>{r(a.key,{...null==d?void 0:d[a.key],reasonForTransfer:T})};return n.useEffect(()=>{"employee"===u&&(T?null!=m&&m[a.key]&&p(a.key):s(a.key,{type:"Required"}),S())},[T]),"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_TRANSFER_REASON")+" *"),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{t:i,option:E,optionKey:"i18nKey",select:y,selected:T})))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:S,onSkip:()=>{},isDisabled:!T},l.createElement("div",null,l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:E,onSelect:y,selectedOption:T,optionCardStyles:{maxHeight:"50vh",overflow:"auto",zIndex:100}}))))},PTRegistrationDocument:e=>{var o,i,a;const{t:r,config:u,onSelect:d,userType:s,formData:p,setError:m,clearErrors:v,errors:E}=e,[_,T]=n.useState(null==p||null===(o=p[u.key])||void 0===o?void 0:o.documentNumber),[y,S]=n.useState(null==p||null===(i=p[u.key])||void 0===i?void 0:i.documentValue),[f,P]=n.useState(null==p||null===(a=p[u.key])||void 0===a?void 0:a.documentDate),[g,N]=n.useState(null),A=e=>{N(null);let t=(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"-"+(new Date).getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});new Date(e).getTime()<=new Date(t).getTime()?P(e):N("PT_DOCUMENT_DATE_ERROR_MESSAGE")},O=()=>{d(u.key,{...null==p?void 0:p[u.key],documentNumber:_,documentValue:y,documentDate:f})};return n.useEffect(()=>{var e;"employee"!==s||null!=E&&E[u.key]||!g?g||"invalid"!==(null==E||null===(e=E[u.key])||void 0===e?void 0:e.type)||v(u.key):m(u.key,{type:"invalid"})},[g]),n.useEffect(()=>{var e;"employee"===s&&(f&&_&&y?"Required"===(null==E||null===(e=E[u.key])||void 0===e?void 0:e.type)&&v(u.key):m(u.key,{type:"Required"}),O())},[_,y,f]),"employee"===s?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_NO")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,value:_,onChange:e=>T(e.target.value)}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_VALUE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,value:y,onChange:e=>S(e.target.value)}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_ISSUE_DATE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.DatePicker,{max:(new Date).toLocaleDateString(),date:f,onChange:A}))),g?l.createElement(t.CardLabelError,{style:{marginLeft:"30%"}},r(g)):null):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:r,config:u,onSelect:O,onSkip:()=>{},isDisabled:!(_&&y&&f)},l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_NO")),l.createElement(t.TextInput,{type:"number",min:0,value:_,onChange:e=>T(e.target.value)}),l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_VALUE")),l.createElement(t.TextInput,{type:"number",min:0,value:y,onChange:e=>S(e.target.value)}),l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_ISSUE_DATE")),l.createElement(t.DatePicker,{max:(new Date).toLocaleDateString(),date:f,onChange:A,style:{maxWidth:540}}),g?l.createElement(t.CardLabelError,null,r(g)):null))},UnderStateAquire:e=>{var o,i;let{...a}=e;const{t:r,config:u,onSelect:d,userType:s,formData:p,setError:m,clearErrors:v,errors:E}=a,[_,T]=n.useState(null==p||null===(o=p[u.key])||void 0===o?void 0:o.isPropertyUnderGovtPossession),[y,S]=n.useState(null==p||null===(i=p[u.key])||void 0===i?void 0:i.govtAcquisitionDetails);n.useEffect(()=>{"NO"===(null==_?void 0:_.code)&&null!=y&&y.length&&S(""),"employee"===s&&(_?null!=E&&E[u.key]&&v(u.key):m(u.key,{type:"Required"}),f())},[_,y]);const f=()=>{d(u.key,{...null==p?void 0:p[u.key],isPropertyUnderGovtPossession:_,govtAcquisitionDetails:y})};return"employee"===s?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},l.createElement("div",{className:"field",style:{width:"55%"}},l.createElement(t.CheckBox,{label:r("PT_MUTATION_STATE_ACQUISITION")+"*",name:"isPropertyUnderGovtPossession",onChange:function(e){T(1==e.target.checked?{code:"YES"}:{code:"NO"})},checked:"YES"===(null==_?void 0:_.code),style:{paddingBottom:"10px",paddingTop:"3px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#0b0c0c"}}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_GOVT_ACQUISITION_DETAILS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{disable:"YES"!==(null==_?void 0:_.code),value:y,onChange:e=>S(e.target.value)})))):l.createElement(l.Fragment,null,l.createElement(c,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:r,config:u,onSelect:f,onSkip:()=>{},isDisabled:!(null!=_&&_.code)},l.createElement(t.RadioButtons,{t:r,optionsKey:"i18nKey",isMandatory:u.isMandatory,options:[{code:"YES"},{code:"NO"}],selectedOption:_,onSelect:e=>{T(e)},labelKey:"PT_MUTATION_STATE_ACQUISITION",isDependent:!0}),l.createElement(t.CardLabel,null,r("PT_MUTATION_GOVT_ACQUISITION_DETAILS")),l.createElement(t.TextInput,{disable:"YES"!==(null==_?void 0:_.code),value:y,onChange:e=>S(e.target.value)})))},TransferProof:e=>{var o,a,r;let{t:u,config:d,onSelect:s,formData:p}=e;const{pathname:m}=i.useLocation();m.includes("property-mutation");let v=window.location.href.split("/").pop();const[E,_]=n.useState((null==p||null===(o=p[d.key])||void 0===o?void 0:o.fileStoreId)||null),[T,y]=n.useState(null),[S,f]=n.useState(null),[P,g]=(Digit.ULBService.getCurrentUlb(),n.useState((null==p||null===(a=p[d.key])||void 0===a?void 0:a.documentType)||null));let N=[];Digit.ULBService.getCurrentTenantId();const A=Digit.ULBService.getStateId(),{data:O}=Digit.Hooks.pt.useMDMS(A,"PropertyTax","MutationDocuments"),I=null==O||null===(r=O.PropertyTax)||void 0===r?void 0:r.MutationDocuments,h=Array.isArray(I)&&I.filter(e=>e.code.includes("OWNER.TRANSFERREASONDOCUMENT"));var C;return h.length>0&&(N=null===(C=h[0])||void 0===C?void 0:C.dropdownData.filter(e=>{var t,n;return e.code.includes(null==p||null===(t=p.additionalDetails)||void 0===t||null===(n=t.reasonForTransfer)||void 0===n?void 0:n.code)}),N.forEach(e=>{e.i18nKey=Fe(e.code,".","_")})),n.useEffect(()=>{!function(){try{f(null);const e=function(){if(T){const e=function(){if(T.size>=2e6)f(u("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",T,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?_(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):f(u("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),l.createElement(l.Fragment,null,l.createElement(c,{currentStep:3,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{config:d,onSelect:()=>{s(d.key,{fileStoreId:E,documentType:P},"",v)},onSkip:()=>s(),t:u,isDisabled:!E||!P||S},l.createElement(t.CardLabelDesc,null,u("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,u("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+u("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:u,isMandatory:!1,option:N,selected:P,optionKey:"i18nKey",select:function(e){g(e)},placeholder:u("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"ptm-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){y(e.target.files[0])},onDelete:()=>{_(null)},message:E?"1 "+u("PT_ACTION_FILEUPLOADED"):u("PT_ACTION_NO_FILEUPLOADED"),error:S}),S?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},S):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},UpdateNumber:e=>{var o,i,r,u;let{showPopup:d,t:s,onValidation:c,mobileNumber:p,name:m,UpdateNumberConfig:v}=e;const E=Digit.ULBService.getStateId(),[_,T]=n.useReducer(Go,{...Vo,name:m,mobileNumber:p}),y=null===(o=Digit)||void 0===o||null===(i=o.ComponentRegistryService)||void 0===i?void 0:i.getComponent("SelectOtp"),S=n.useCallback(function(e){try{T({type:"resettoast"});let t=(null==v?void 0:v.invalidNumber)===(null==e?void 0:e.mobileNumber)&&"PTUPNO_INVALIDNO_HEADER";return t=(null==e?void 0:e.mobileNumber)===_.mobileNumber?"PT_SEC_SAME_NUMBER":t,Promise.resolve(function(){if(t)T({type:"warning",value:t});else{const t={mobileNumber:null==e?void 0:e.mobileNumber,tenantId:E,userType:"CITIZEN"},n=function(){if(0==_.otpSentTo)return Promise.resolve(zo({otp:{...t,...Ko}},E)).then(function(n){let[l,o]=n;const i=function(){if(o)return Promise.resolve(zo({otp:{...t,name:null==_?void 0:_.name,...jo}},E)).then(function(t){let[n,l]=t;T(l?{type:"error",value:l}:{type:"otpsent",value:null==e?void 0:e.mobileNumber,isNewUser:!0})});T({type:"otpsent",value:null==e?void 0:e.mobileNumber})}();if(i&&i.then)return i.then(function(){})});f(e,e=>{T({type:"success",value:"PT_MOBILE_NUM_UPDATED_SUCCESS"})})}();if(n&&n.then)return n.then(function(){})}}())}catch(e){return Promise.reject(e)}},[_]),f=function(e,t){try{return Promise.resolve(Ee(function(){T({type:"verifyotp"});const{mobileNumber:n,otp:l}=e,o=null!=_&&_.isNewUser?Promise.resolve(Digit.UserService.registerUser({name:null==_?void 0:_.name,username:n,otpReference:l,tenantId:E},E)).then(function(n){let{...l}=n;c&&c(e,t)}):Promise.resolve(Digit.UserService.authenticate({username:n,password:l,tenantId:E,userType:"CITIZEN"})).then(function(n){let{...l}=n;c&&c(e,t)});if(o&&o.then)return o.then(function(){})},function(){T({type:"verifiedotp"})}))}catch(e){return Promise.reject(e)}},P=n.useCallback(function(){try{const e={mobileNumber:null==_?void 0:_.otpSentTo,tenantId:E,userType:"CITIZEN"},t=null!=_&&_.isNewUser?Promise.resolve(zo({otp:{...e,...jo}},E)).then(function(){}):Promise.resolve(zo({otp:{...e,...Ko}},E)).then(function(){});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[_]),{register:g,control:N,handleSubmit:A,getValues:O,formState:I}=a.useForm({defaultValues:{mobileNumber:"",otp:""}});return l.createElement("div",{className:"popup-module updatePropertyNumber"},l.createElement("div",{className:"popup-close-icon",onClick:()=>d(!1)},l.createElement(t.CloseSvg,null)),l.createElement(t.Header,null,s("PTUPNO_HEADER")),l.createElement(t.SearchForm,{onSubmit:S,handleSubmit:A},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:s("PTUPNO_OWNER_NAME"),text:""+((null==_?void 0:_.name)||s("CS_NA"))}),l.createElement(t.Row,{label:s("PTUPNO_CURR_NO"),text:""+((null==_?void 0:_.mobileNumber)||s("CS_NA"))}),l.createElement(t.CardLabel,{style:{marginBottom:"8px"}},s("PT_UPDATE_NEWNO")),l.createElement(t.MobileNumber,{className:"field pt-update-no-field",name:"mobileNumber",inputRef:g({value:O("mobileNumber"),shouldUnregister:!0,required:"MANDATORY_MOBILE",minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}),disable:(null==_?void 0:_.otpSentTo)&&!0}),l.createElement(t.CardLabelError,{style:{marginTop:"-10px"}},s(null==I||null===(r=I.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message)),(null==_?void 0:_.otpSentTo)&&l.createElement(a.Controller,{control:N,name:"otp",rules:{required:"MANDATORY_OTP",minLength:{value:6,message:"CORE_COMMON_OTP_ERROR"}},render:(e,t)=>l.createElement(y,{userType:"employee",config:{header:"OTPVERIFICATION",cardText:"ENTEROTP",nextText:"Next",submitBarLabel:"Next"},onOtpChange:t=>{e.onChange(t)},onResend:P,error:!_.invalid,t:s,otp:e.value})})),_.showToast&&l.createElement(t.Toast,{error:_.error,warning:_.warning,label:s(_.message),onClose:()=>{T({type:"resettoast"})}}),l.createElement(t.SubmitBar,{label:s(null!=_&&_.otpSentTo?"PTUPNO_VERUPD_NO":"PTUPNO_SENDOTP"),submit:!0,disabled:_.disable})))},EmployeeUpdateOwnerNumber:e=>{let{t:o,onValidation:i,mobileNumber:r,name:u,UpdateNumberConfig:s}=e;const[c,p]=n.useReducer(qo,{...Xo,name:u,mobileNumber:r}),[m,v]=n.useState(null),[E,_]=n.useState(null),[T,y]=n.useState(null);function S(e){var t,n;null!=e&&null!==(t=e.target)&&void 0!==t&&null!==(n=t.files)&&void 0!==n&&n[0]?v({[e.target.id]:e.target.files[0]}):v(null)}n.useEffect(()=>{!function(){try{y(null);const e=function(){if(m){var e;let t=null===(e=Object.keys(m))||void 0===e?void 0:e[0];const n=function(){if(m[t].size>=5242880)y(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ee(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",m[t],Digit.ULBService.getStateId())).then(function(e){var n,l;(null==e||null===(n=e.data)||void 0===n||null===(l=n.files)||void 0===l?void 0:l.length)>0?_(n=>{var l,o;return{...n,[t]:null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId}}):y(o("CS_FILE_UPLOAD_ERROR"))})},function(){y(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[m]);const f=n.useCallback(function(e){try{p({type:"resettoast"});let t=(null==s?void 0:s.invalidNumber)===(null==e?void 0:e.mobileNumber)&&"PTUPNO_INVALIDNO_HEADER";return t=(null==e?void 0:e.mobileNumber)===c.mobileNumber?"PT_SEC_SAME_NUMBER":t,t?(p({type:"warning",value:t}),Promise.resolve()):(i&&i(e,e=>{p({type:"success",value:"PT_MOBILE_NUM_UPDATED_SUCCESS"})}),Promise.resolve())}catch(e){return Promise.reject(e)}},[c]),P=(a.useForm({defaultValues:{mobileNumber:""}}),n.useMemo(()=>((e,n,o,i,a)=>{var r;const u=(null==a||null===(r=a.documents)||void 0===r?void 0:r.map(a=>({label:e(a.code),populators:l.createElement("div",{style:{marginBottom:"2rem"}},l.createElement(t.UploadFile,d({id:a.documentType},a.inputProps,{onUpload:n,onDelete:()=>{o(e=>({...e,[null==a?void 0:a.documentType]:null}))},message:null!=i&&i[null==a?void 0:a.documentType]?"1 "+e("HR_ACTION_FILEUPLOADED"):e("HR_ACTION_NO_FILEUPLOADED")})),l.createElement("span",null,e("PT_ATTACH_RESTRICTIONS_SIZE")))})))||[];return[{body:[{label:e("PTUPNO_CURR_NO"),type:"mobileNumber",populators:{name:"mobileNumber",validation:{required:"MANDATORY_MOBILE",minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}}},...u]}]})(o,S,_,E,s),[o,_,E,s]));return l.createElement("div",{className:"popup-module updateNumberEmployee"},l.createElement(t.FormComposer,{config:P,noBoxShadow:!0,inline:!0,submitInForm:!0,onSubmit:e=>f({...e,...E}),label:"ES_COMMON_UPDATE",defaultValues:{mobileNumber:""},formId:"modal-action"},l.createElement("div",null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:o("PTUPNO_OWNER_NAME"),text:""+((null==c?void 0:c.name)||o("CS_NA"))}),l.createElement(t.Row,{label:o("PTUPNO_CURR_NO"),text:""+((null==c?void 0:c.mobileNumber)||o("CS_NA"))})))),c.showToast&&l.createElement(t.Toast,{error:c.error,warning:c.warning,label:o(c.message),onClose:()=>{p({type:"resettoast"})}}))},PropertySearchForm:e=>{let{tenantId:o,t:i,onSubmit:r,onReset:u,searchBy:s,PTSearchFields:c,setSearchBy:p,payload:m}=e;const{register:v,control:E,handleSubmit:_,watch:T,getValues:y,formState:S}=a.useForm({defaultValues:{...m}}),f=Digit.ULBService.getStateId(),{data:P={}}=Digit.Hooks.pt.usePropertyMDMS(f,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]),g=()=>{console.log("usageCategoryMajorMenu");const e=[{code:"RESIDENTIAL",name:"RESIDENTIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_RESIDENTIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.COMMERCIAL",name:"NONRESIDENTIAL.COMMERCIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_COMMERCIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.INDUSTRIAL",name:"NONRESIDENTIAL.INDUSTRIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_INDUSTRIAL",label:"PropertyType"},{code:"NONRESIDENTIAL.INSTITUTIONAL",name:"NONRESIDENTIAL.INSTITUTIONAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_INSTITUTIONAL",label:"PropertyType"},{code:"NONRESIDENTIAL.OTHERS",name:"NONRESIDENTIAL.OTHERS",i18nKey:"PROPERTYTAX_BILLING_SLAB_OTHERS",label:"PropertyType"}];return console.log("usageCategoryMajorMenu",e),e},[N,A]=n.useState();let O=T();const I=(null==c?void 0:c[s])||{};return sessionStorage.removeItem("revalidateddone"),console.log("payload",m,O),l.createElement("div",{className:"PropertySearchForm"},l.createElement(t.SearchForm,{onSubmit:r,className:"pt-property-search",handleSubmit:_},l.createElement(It,{keys:Object.keys(c||{}),searchBy:s,onReset:u,t:i,onSwitch:p}),I&&Object.keys(I).map(e=>{var n,r,u;let s=I[e],c=(null==s?void 0:s.validation)||{};return l.createElement(t.SearchField,{key:e,className:"pt-form-field"},l.createElement("label",null,i(null==s?void 0:s.label),null!=s&&null!==(n=s.validation)&&void 0!==n&&n.required?"*":""),"custom"===(null==s?void 0:s.type)?l.createElement(a.Controller,{name:e,defaultValue:null==O?void 0:O[e],rules:s.validation,control:E,render:(t,n)=>l.createElement(s.customComponent,d({selectLocality:e=>{t.onChange(e)},tenantId:o,selected:null==O?void 0:O[e]},s.customCompProps))}):"number"===(null==s?void 0:s.type)?l.createElement("div",null,l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:v({value:y(e),shouldUnregister:!0,...c}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")})):"propertyType"===s.type?l.createElement("div",null,l.createElement(t.Dropdown,{className:"form-field",selected:N,disable:!1,defaultValue:null==O?void 0:O[e],name:e,option:g(),select:e=>(e=>{console.log("e",e.code),O.propertyType="bbb"})(e),inputRef:v({value:y(e),shouldUnregister:!0}),optionKey:"i18nKey",t:i})):l.createElement(t.TextInput,{name:e,type:null==s?void 0:s.type,inputRef:v({value:y(e),shouldUnregister:!0,...c})}),l.createElement(t.CardLabelError,{style:{marginTop:"-10px",marginBottom:"-10px"}},i(null==S||null===(r=S.errors)||void 0===r||null===(u=r[e])||void 0===u?void 0:u.message)))}),l.createElement("div",{className:"pt-search-action"},l.createElement(t.SearchField,{className:"pt-search-action-reset"},l.createElement("p",{style:{color:"#a82227"},onClick:()=>{u({})}},i("ES_COMMON_CLEAR_ALL"))),l.createElement(t.SearchField,{className:"pt-search-action-submit"},l.createElement(t.SubmitBar,{label:i("ES_COMMON_SEARCH"),submit:!0})))))},PropertySearchResults:e=>{var o,a,r,u;let{tenantId:d,t:s,payload:c,showToast:p,setShowToast:m,ptSearchConfig:v}=e;const E=i.useHistory(),[_,T]=n.useState({...c}),[y,S]=n.useState(!1),[f,P]=n.useState(!1),[g,N]=n.useState(null),[A,O]=n.useState(0),{data:I,isLoading:h,error:C,revalidate:R}=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:d,filters:_,configs:{enabled:Object.keys(c).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),b=Digit.Hooks.pt.usePropertyAPI(d,!1),D=null===(o=Digit)||void 0===o||null===(a=o.ComponentRegistryService)||void 0===a?void 0:a.getComponent("EmployeeUpdateOwnerNumber"),{data:L}=Digit.Hooks.useCommonMDMSV2(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1}),M=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),w=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(M,null)),x=n.useMemo(()=>[{Header:s("PT_COMMON_TABLE_COL_PT_ID"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/ptsearch/property-details/"+t.original.propertyId},t.original.propertyId)))}},{Header:s("PT_COMMON_TABLE_COL_OWNER_NAME"),disableSortBy:!0,Cell:e=>{var t;let{row:n}=e;return Ct(null!==n.original.owners.additionalDetails?""+(null==n||null===(t=n.original)||void 0===t?void 0:t.owners.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map(e=>e.name).join(",")):""+n.original.owners.map(e=>e.name).join(",")||"")}},{Header:s("ES_INBOX_LOCALITY"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return Ct(s(t.original.locality)||"")}},{Header:s("PT_COMMON_TABLE_COL_STATUS_LABEL"),Cell:e=>{var t;let{row:n}=e;return Ct(s((null==n||null===(t=n.original)||void 0===t?void 0:t.status)||"NA"))},disableSortBy:!0},{Header:s("PT_AMOUNT_DUE"),Cell:e=>{var t,n;let{row:l}=e;return Ct(null!=l&&null!==(t=l.original)&&void 0!==t&&t.due?"₹ "+(null==l||null===(n=l.original)||void 0===n?void 0:n.due):s("PT_NA"))},disableSortBy:!0},{Header:s("ES_SEARCH_ACTION"),disableSortBy:!0,Cell:e=>{var t;let{row:n}=e;return l.createElement("div",null,(null===(t=n.original)||void 0===t?void 0:t.due)>0&&Digit.Utils.didEmployeeHasRole("PT_CEMP")?l.createElement("span",{className:"link"},l.createElement("a",{style:{textDecoration:"none"},onClick:()=>(e=>{let t=!1,{owners:n}=e;n=n&&n.filter(e=>"ACTIVE"==e.status),n&&n.map((e,n)=>{let l=e.mobileNumber;(l==(null==L?void 0:L.invalidNumber)||!l.match(null==L?void 0:L.invalidPattern)&&l==JSON.parse(getUserInfo()).mobileNumber)&&(t=!0,O(n))}),t?(S(!0),N(e)):(R(),E.push("/digit-ui/employee/payment/collect/PT/"+(null==e?void 0:e.propertyId)))})(n.original)},s("ES_PT_COLLECT_TAX"))):null)}}],[]);let U=window.Digit.Utils.browser.isMobile();if(h)return p&&m(null),l.createElement(t.Loader,null);var F,B,k,H;if(C)return!p&&m({error:!0,label:(null==C||null===(F=C.response)||void 0===F||null===(B=F.data)||void 0===B||null===(k=B.Errors)||void 0===k||null===(H=k[0])||void 0===H?void 0:H.code)||C}),null;const Y=n.memo(Digit.ComponentRegistryService.getComponent("PTEmptyResultInbox")),W=Object.values((null==I?void 0:I.FormattedData)||{})||[];return null!=v&&v.ptSearchCount&&c.locality&&W&&W.length>(null==v?void 0:v.ptSearchCount)?(!p&&m({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"}),null):l.createElement(l.Fragment,null,0===(null==I||null===(r=I.Properties)||void 0===r?void 0:r.length)?l.createElement(Y,{data:!0}):U?l.createElement(t.DetailsCard,{data:function(e){var t;return void 0===e&&(e=[]),null===(t=e)||void 0===t?void 0:t.map(e=>{const t={};return x.forEach(n=>{n.Cell&&(t[n.Header]=n.Cell({row:{original:e}}))}),t})}(W),t:s}):l.createElement(t.Table,{t:s,data:W,totalRecords:null==I||null===(u=I.Properties)||void 0===u?void 0:u.length,columns:x,getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),manualPagination:!1,disableSort:!0}),y?l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},s(f?"PTUPNO_HEADER":"PT_INVALID_MOBILE_NO")),headerBarEnd:l.createElement(w,{onClick:()=>{S(!1),P(!1)}}),hideSubmit:!0,isDisabled:!1,popupStyles:{width:"50%",marginTop:"auto"}},f&&l.createElement(D,{showPopup:S,name:null==f?void 0:f.name,UpdateNumberConfig:L,mobileNumber:null==f?void 0:f.mobileNumber,t:s,onValidation:(e,t)=>{let n={...g};n.owners[null==f?void 0:f.index].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null;let l={...e};delete l.mobileNumber,n.documents=[...n.documents,...Object.keys(l).map(e=>({documentType:e,documentUid:l[e],fileStoreId:l[e]}))],b.mutate({Property:n},{onError:()=>{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}}),!f&&l.createElement(ht,{propertyId:null==g?void 0:g.propertyId,userType:"employee",skipNContinue:()=>{E.push("/digit-ui/employee/payment/collect/PT/"+(null==g?void 0:g.propertyId))},updateMobileNumber:()=>{var e,t;const n=A;S(!0),P({name:null==g||null===(e=g.owners[n])||void 0===e?void 0:e.name,mobileNumber:null==g||null===(t=g.owners[n])||void 0===t?void 0:t.mobileNumber,index:n})}})):null)},PTMyPayments:lt,SelectPTUnits:Dt,PTNewApplication:()=>{const e=Digit.ULBService.getCurrentTenantId(),a=Digit.Hooks.pt.useTenants(),{t:r}=o.useTranslation(),[u,d]=n.useState(!1),s=i.useHistory(),[c,p,m]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[v,E,_]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),{isLoading:T}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","CommonFieldsConfig");return n.useEffect(()=>{p(!1),_()},[]),T?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{heading:r("ES_TITLE_NEW_PROPERTY_APPLICATION"),isDisabled:!u,label:r("ES_COMMON_APPLICATION_SUBMIT"),config:[{head:"ES_NEW_APPLICATION_LOCATION_DETAILS",body:[{route:"map",component:"PTSelectGeolocation",nextStep:"pincode",hideInEmployee:!0,key:"address",texts:{header:"PT_GEOLOCATON_HEADER",cardText:"PT_GEOLOCATION_TEXT",nextText:"PT_COMMON_NEXT",skipAndContinueText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"pincode",component:"PTSelectPincode",texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PINCODE_LABEL",cardText:"PT_PINCODE_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,key:"address",nextStep:"address",type:"component"},{route:"address",component:"PTSelectAddress",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_CITY_MOHALLA_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"address",nextStep:"street",isMandatory:!0,type:"component"},{type:"component",route:"street",component:"PTSelectStreet",key:"address",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"PT_STREET_TEXT",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"landmark"},{type:"component",route:"landmark",component:"SelectLandmark",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TITLE",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},key:"address",nextStep:"proof",hideInEmployee:!0},{type:"component",route:"proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PROOF_OF_ADDRESS_HEADER",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"address",nextStep:"owner-ship-details@0",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"info",component:"PropertyTax",nextStep:"isResidential",hideInEmployee:!0,key:"Documents"},{type:"component",route:"isResidential",isMandatory:!0,component:"IsResidential",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_HEADER",cardText:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"isResdential",withoutLabel:!0,hideInEmployee:!0,nextStep:{PT_COMMON_YES:"property-type",PT_COMMON_NO:"property-usage-type"}},{type:"component",route:"property-usage-type",isMandatory:!0,component:"PropertyUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER",cardText:"PT_PROPERTY_DETAILS_USAGE_TYPE_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"property-type",key:"usageCategoryMajor",withoutLabel:!0},{type:"component",isMandatory:!0,component:"ProvideSubUsageType",key:"usageCategoryMinor",withoutLabel:!0},{type:"component",route:"provide-sub-usage-type",isMandatory:!0,component:"ProvideSubUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"is-any-part-of-this-floor-unoccupied",no:"provide-sub-usage-type-of-rented-area"},hideInEmployee:!0},{type:"component",route:"property-type",isMandatory:!0,component:"PropertyType",texts:{headerCaption:"",header:"PT_ASSESMENT1_PROPERTY_TYPE",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"number-of-floors",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"provide-floor-no",COMMON_PROPTYPE_VACANT:"area"},key:"PropertyType",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Area",key:"landarea",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Electricity",key:"electricity",withoutLabel:!0},{type:"component",isMandatory:!0,component:"UID",key:"uid",withoutLabel:!0},{type:"component",isMandatory:!0,component:"PropertyStructureDetails",key:"propertyStructureDetails",withoutLabel:!0},{type:"component",route:"electricity",isMandatory:!0,component:"Electricity",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"uid",isMandatory:!0,component:"UID",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"area",isMandatory:!0,component:"Area",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_AREA_HEADER",cardText:"PT_SELFOCCUPIED_AREA",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"rental-details",no:"provide-sub-usage-type",vacant:"map"},hideInEmployee:!0},{type:"component",route:"number-of-floors",isMandatory:!0,component:"PropertyFloorDetails",texts:{headerCaption:"",header:"BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL",cardText:"PT_PROPERTY_DETAILS_NO_OF_FLOORS_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"number-of-basements@0",key:"noOfFloors",withoutLabel:!0},{type:"component",component:"Units",key:"units",withoutLabel:!0},{type:"component",route:"provide-floor-no",isMandatory:!0,component:"ProvideFloorNo",texts:{headerCaption:"",header:"PT_FLOOR_NUMBER_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"floordetails",key:"Floorno",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"is-this-floor-self-occupied",isMandatory:!0,component:"IsThisFloorSelfOccupied",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_FLOOR_OCC_HEADER",cardText:"PT_ASSESSMENT_FLOW_FLOOR_OCC_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_YES_IT_IS_SELFOCCUPIED:"provide-sub-usage-type",PT_YES_IT_IS_SELFOCCUPIED1:"is-any-part-of-this-floor-unoccupied",PT_PARTIALLY_RENTED_OUT:"area",PT_PARTIALLY_RENTED_OUT1:"area",PT_FULLY_RENTED_OUT:"provide-sub-usage-type-of-rented-area",PT_FULLY_RENTED_OUT1:"rental-details"},hideInEmployee:!0},{type:"component",route:"number-of-basements@0",isMandatory:!0,component:"PropertyBasementDetails",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_NO_OF_BASEMENTS_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{PT_NO_BASEMENT_OPTION:"floordetails",PT_ONE_BASEMENT_OPTION:"floordetails",PT_TWO_BASEMENT_OPTION:"floordetails"},key:"noOofBasements",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"floordetails",isMandatory:!0,component:"GroundFloorDetails",texts:{headerCaption:"",cardText:"PT_PROPERTY_DETAILS_FLOOR_DETAILS_TEXT",submitBarLabel:"Next"},nextStep:"is-this-floor-self-occupied",key:"units",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"rental-details",isMandatory:!0,component:"RentalDetails",texts:{header:"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"is-any-part-of-this-floor-unoccupied",hideInEmployee:!0},{type:"component",route:"provide-sub-usage-type-of-rented-area",isMandatory:!0,component:"ProvideSubUsageTypeOfRentedArea",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_RENT_SUB_USAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"rental-details",hideInEmployee:!0},{type:"component",route:"is-any-part-of-this-floor-unoccupied",isMandatory:!0,component:"IsAnyPartOfThisFloorUnOccupied",texts:{header:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_HEADER",cardText:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_COMMON_NO:"map",PT_COMMON_YES:"un-occupied-area"},hideInEmployee:!0},{type:"component",route:"un-occupied-area",isMandatory:!0,component:"UnOccupiedArea",texts:{header:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_HEADER",cardText:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:""},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_PROPERTIES_OWNERSHIP",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"owner-details","INDIVIDUAL.MULTIPLEOWNERS":"owner-details"}},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"ES_NEW_APPLICATION_DOCUMENTS_REQUIRED",body:[{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}].map(e=>({...e,body:e.body.filter(e=>!e.hideInEmployee)})),fieldStyle:{marginRight:0},onSubmit:t=>{var n,l,o,i,a,r,u,d,c,p,m,v,E,_,T;const y={tenantId:e,address:{...null==t?void 0:t.address,city:null==t||null===(n=t.address)||void 0===n||null===(l=n.city)||void 0===l?void 0:l.name,locality:{code:null==t||null===(o=t.address)||void 0===o||null===(i=o.locality)||void 0===i?void 0:i.code,area:null==t||null===(a=t.address)||void 0===a||null===(r=a.locality)||void 0===r?void 0:r.area}},usageCategory:null==t?void 0:t.usageCategoryMajor.code,usageCategoryMajor:null==t||null===(u=t.usageCategoryMajor)||void 0===u?void 0:u.code.split(".")[0],usageCategoryMinor:(null==t||null===(d=t.usageCategoryMajor)||void 0===d?void 0:d.code.split(".")[1])||null,landArea:Number(null==t?void 0:t.landarea),superBuiltUpArea:Number(null==t?void 0:t.landarea),propertyType:null==t||null===(c=t.PropertyType)||void 0===c?void 0:c.code,noOfFloors:Number(null==t?void 0:t.noOfFloors),ownershipCategory:null==t||null===(p=t.ownershipCategory)||void 0===p?void 0:p.code,additionalDetails:{ageOfProperty:null==t||null===(m=t.propertyStructureDetails)||void 0===m?void 0:m.ageOfProperty,structureType:null==t||null===(v=t.propertyStructureDetails)||void 0===v?void 0:v.structureType,electricity:null==t?void 0:t.electricity,uid:null==t?void 0:t.uid},owners:null==t?void 0:t.owners.map((e,n)=>{var l,o,i;let a,{name:r,mobileNumber:u,designation:d,altContactNumber:s,emailId:c,correspondenceAddress:p,isCorrespondenceAddress:m,ownerType:v,fatherOrHusbandName:E}=e;var _,T;a=null!=t&&null!==(l=t.ownershipCategory)&&void 0!==l&&l.code.includes("INDIVIDUAL")?{name:r,mobileNumber:u,correspondenceAddress:p,permanentAddress:null==t||null===(_=t.address)||void 0===_||null===(T=_.locality)||void 0===T?void 0:T.name,relationship:null==e?void 0:e.relationship.code,fatherOrHusbandName:E,gender:null==e?void 0:e.gender.code,emailId:c}:{name:r,mobileNumber:u,designation:d,altContactNumber:s,emailId:c,correspondenceAddress:p,isCorrespondenceAddress:m,ownerType:v},null!==(o=a)&&void 0!==o&&o.correspondenceAddress||(a.correspondenceAddress="");const y={...a,ownerType:null==e||null===(i=e.ownerType)||void 0===i?void 0:i.code};if("NONE"!==y.ownerType){var S,f;const{documentType:n,documentUid:l}=null==e?void 0:e.documents;y.documents=[{documentUid:l,documentType:n.code,fileStoreId:l},null==t||null===(S=t.documents)||void 0===S||null===(f=S.documents)||void 0===f?void 0:f.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})]}else{var P,g;y.documents=[null==t||null===(P=t.documents)||void 0===P||null===(g=P.documents)||void 0===g?void 0:g.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})]}return y}),channel:"CFC_COUNTER",creationReason:"CREATE",source:"MUNICIPAL_RECORDS",units:"VACANT"!==(null==t||null===(E=t.PropertyType)||void 0===E?void 0:E.code)?null==t?void 0:t.units:[],documents:null==t||null===(_=t.documents)||void 0===_?void 0:_.documents,applicationStatus:"CREATE"};var S,f,P,g,N,A;null!=t&&null!==(T=t.ownershipCategory)&&void 0!==T&&T.code.includes("INDIVIDUAL")||(y.institution={name:null===(S=t.owners)||void 0===S?void 0:S[0].institution.name,type:null===(f=t.owners)||void 0===f||null===(P=f[0].institution)||void 0===P||null===(g=P.type)||void 0===g?void 0:g.code,designation:null===(N=t.owners)||void 0===N?void 0:N[0].designation,nameOfAuthorizedPerson:null===(A=t.owners)||void 0===A?void 0:A[0].name,tenantId:Digit.ULBService.getCurrentTenantId()}),s.replace("/digit-ui/employee/pt/response",{Property:y})},defaultValues:{},onFormValueChange:(e,t,n)=>{var l,o,i,r,u,s;console.log("formData, formState",t,n),d(!Object.keys(n.errors).length),1===Object.keys(n.errors).length&&"arv"===(null===(l=n.errors)||void 0===l||null===(o=l.units)||void 0===o?void 0:o.message)&&d(!(null!=t&&t.units.some(e=>"RENTED"===e.occupancyType&&!e.arv))),null!=t&&null!==(i=t.ownershipCategory)&&void 0!==i&&null!==(r=i.code)&&void 0!==r&&r.includes("MULTIPLEOWNERS")&&(null==t||null===(u=t.owners)||void 0===u?void 0:u.length)<2&&d(!1);let c=null==t||null===(s=t.address)||void 0===s?void 0:s.pincode;c&&(Digit.Utils.getPattern("Pincode").test(c)||d(!1),(null==a?void 0:a.find(e=>{var t;return null===(t=e.pincode)||void 0===t?void 0:t.find(e=>e.toString()===c)}))||d(!1))}})},ApplicationDetails:na,PTPropertyDetails:()=>{var e,a,r,u,d,s,c;const{t:p}=o.useTranslation(),m=Digit.ULBService.getCurrentTenantId(),{id:v}=i.useParams(),[E,_]=n.useState(null),[T,y]=n.useState({}),[S,f]=n.useState(!1),[P,g]=n.useState(!1),[N,A]=n.useState(!1),O=Digit.UserService.hasAccess(["PT_CEMP"])||!1,[I,h]=n.useState("PT.CREATE"),C=i.useHistory();sessionStorage.setItem("propertyIdinPropertyDetail",v);const[R,b]=l.useState(window.innerWidth<=780);let{isLoading:D,data:L}=Digit.Hooks.pt.useApplicationDetail(p,m,v);const{data:M,isLoading:w,revalidate:x}=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",consumerCode:v}),{data:U}=Digit.Hooks.pt.usePropertySearch({tenantId:m,filters:{propertyIds:v,audit:!0}},{enabled:S,select:e=>{var t;return null===(t=e.Properties.filter(e=>"ACTIVE"===e.status))||void 0===t?void 0:t.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)}}),F=Digit.Hooks.pt.usePropertyAPI(m,!1),{data:B}=Digit.Hooks.useCommonMDMSV2(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1});l.useEffect(()=>{const e=()=>{window.innerWidth<=780&&!R?b(!0):window.innerWidth>780&&R&&b(!1)};return window.addEventListener("resize",()=>{e()}),()=>{window.removeEventListener("resize",()=>{e()})}}),n.useEffect(()=>{if(L&&!S){var e;if("PT_ASSESMENT_INFO_SUB_HEADER"==(null==L?void 0:L.applicationDetails[1].title)){if(4==(null==L?void 0:L.applicationDetails[1].values.length)){var t;let e={title:"PT_ASSESMENT_ELECTRICITY",value:(null==L||null===(t=L.additionalDetails)||void 0===t?void 0:t.electricity)||"NA"};null==L||L.applicationDetails[1].values.push(e)}if(5==(null==L?void 0:L.applicationDetails[1].values.length)){var n;let e={title:"PT_ASSESMENT_ELECTRICITY_UID",value:(null==L||null===(n=L.additionalDetails)||void 0===n?void 0:n.uid)||"NA"};null==L||L.applicationDetails[1].values.push(e)}}y(Xe.cloneDeep(L)),"ACTIVE"!==(null==L||null===(e=L.applicationData)||void 0===e?void 0:e.status)&&f(!0)}},[L]),n.useEffect(()=>{if(S&&null!=U&&U.length&&Object.keys(T).length){var e;const t=null==U?void 0:U[0];if(t.owners=null==t||null===(e=t.owners)||void 0===e?void 0:e.filter(e=>"ACTIVE"==e.status),t){let e=null==T?void 0:T.transformToAppDetailsForEmployee({property:t,t:p});y({...T,applicationDetails:e})}}},[U,S,L]);let k=Digit.Hooks.useWorkflowDetails({tenantId:(null==L?void 0:L.tenantId)||m,id:null==L||null===(e=L.applicationData)||void 0===e?void 0:e.acknowldgementNumber,moduleCode:"PT.UPDATE",role:"PT_CEMP"});var H,Y,W,j,K,V,G,z,X,q,$,Z,Q,J;if(n.useEffect(()=>{var e,t,n,l;null!==(e=k)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.applicationBusinessService&&h(null===(n=k)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.applicationBusinessService)},[k.data]),null!=T&&T.applicationDetails&&(T.applicationDetails=null==T||null===(H=T.applicationDetails)||void 0===H?void 0:H.map(e=>{var n;return"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title?("ACTIVE"===(null==L||null===(n=L.applicationData)||void 0===n?void 0:n.status)&&e.additionalDetails.owners.map((e,n)=>{e.values.map(e=>{"PT_OWNERSHIP_INFO_MOBILE_NO"==e.title&&(e.textStyle={display:"flex",wordBreak:"revert"},e.caption=l.createElement("span",{onClick:()=>{var e,t,l,o;g(e=>!e),A({name:null==T||null===(e=T.applicationData)||void 0===e||null===(t=e.owners[n])||void 0===t?void 0:t.name,mobileNumber:null==T||null===(l=T.applicationData)||void 0===l||null===(o=l.owners[n])||void 0===o?void 0:o.mobileNumber,index:n})},style:{cursor:"pointer",display:"inline-flex",paddingLeft:"20px"}},l.createElement(t.EditIcon,null)))})}),{...e,Component:()=>l.createElement(t.LinkLabel,{onClick:()=>{g(e=>!e)},style:{display:"inline",marginLeft:"25px"}},p("PT_VIEW_HISTORY"))}):e})),n.useEffect(()=>{var e,n,o,i,a,r;return"PT_TOTAL_DUES"!==(null==T||null===(e=T.applicationDetails)||void 0===e||null===(n=e[0])||void 0===n||null===(o=n.values)||void 0===o?void 0:o[1].title)&&(null==T||null===(i=T.applicationDetails)||void 0===i||i.unshift({title:" ",asSectionHeader:!0,belowComponent:()=>l.createElement(t.LinkLabel,{onClick:()=>C.push({pathname:"/digit-ui/employee/pt/payment-details/"+v}),style:R?{marginTop:"15px",marginLeft:"0px"}:{marginTop:"15px"}},p("PT_VIEW_PAYMENT")),values:[{title:"PT_PROPERTY_PTUID",value:v},{title:"PT_TOTAL_DUES",value:null!=M&&null!==(a=M.Bill[0])&&void 0!==a&&a.totalAmount?"₹ "+(null==M||null===(r=M.Bill[0])||void 0===r?void 0:r.totalAmount):"N/A"}]})),()=>{var e,t,n;"PT_TOTAL_DUES"==(null==T||null===(e=T.applicationDetails)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.values)||void 0===n?void 0:n[1].title)&&"done"!==sessionStorage.getItem("revalidateddone")&&(null==T||T.applicationDetails.shift(),sessionStorage.setItem("revalidateddone","done"),x())}},[M,T]),"ACTIVE"===(null==L||null===(a=L.applicationData)||void 0===a?void 0:a.status)&&(k={...k,data:{...null===(Y=k)||void 0===Y?void 0:Y.data,actionState:{nextActions:O?[{action:"ASSESS_PROPERTY",forcedName:"PT_ASSESS",showFinancialYearsModal:!0,customFunctionToExecute:e=>{delete e.customFunctionToExecute,C.replace({pathname:"/digit-ui/employee/pt/ptsearch/assessment-details/"+v,state:{...e}})},tenantId:Digit.ULBService.getStateId()},{action:null!=M&&null!==(W=M.Bill[0])&&void 0!==W&&W.totalAmount?"PT_TOTALDUES_PAY":"MUTATE_PROPERTY",forcedName:"PT_OWNERSHIP_TRANSFER",AmountDueForPay:null==M||null===(j=M.Bill[0])||void 0===j?void 0:j.totalAmount,isWarningPopUp:!(null==M||null===(K=M.Bill[0])||void 0===K||!K.totalAmount),redirectionUrl:{pathname:null!=M&&null!==(V=M.Bill[0])&&void 0!==V&&V.totalAmount?"/digit-ui/employee/payment/collect/PT/"+v:"/digit-ui/employee/pt/property-mutate-docs-required/"+v,state:null},tenantId:Digit.ULBService.getStateId()},{action:"INACTIVE_PROPERTY",forcedName:"PT_INACTIVE_PROPERTY",showInactiveYearModel:!0,customFunctionToExecute:e=>{C.push("/digit-ui/employee/pt/response",{Property:e.Property,key:"UPDATE",action:"SUBMIT"})},tenantId:Digit.ULBService.getStateId()}]:[]}}}),"ACTIVE"===(null==T||null===(r=T.applicationData)||void 0===r?void 0:r.status)&&O&&("PT.CREATE"==I&&h("PT.UPDATE"),null!==(G=k)&&void 0!==G&&null!==(z=G.data)&&void 0!==z&&null!==(X=z.actionState)&&void 0!==X&&null!==(q=X.nextActions)&&void 0!==q&&q.find(e=>"UPDATE"===e.action)||null===($=k)||void 0===$||null===(Z=$.data)||void 0===Z||null===(Q=Z.actionState)||void 0===Q||null===(J=Q.nextActions)||void 0===J||J.push({action:"UPDATE",redirectionUrl:{pathname:"/digit-ui/employee/pt/modify-application/"+v,state:{workflow:{action:"OPEN",moduleName:"PT",businessService:"PT.UPDATE"}}},tenantId:Digit.ULBService.getStateId()})),w)return l.createElement(t.Loader,null);const ee=null===(u=Digit)||void 0===u||null===(d=u.ComponentRegistryService)||void 0===d?void 0:d.getComponent("EmployeeUpdateOwnerNumber");return null==T||null===(s=T.applicationData)||void 0===s||s.owners.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}),l.createElement("div",null,l.createElement(t.Header,null,p("PT_PROPERTY_INFORMATION")),l.createElement(ea,{applicationDetails:T,isLoading:D,isDataLoading:D,applicationData:null==T?void 0:T.applicationData,mutate:null,workflowDetails:"ACTIVE"===(null==T||null===(c=T.applicationData)||void 0===c?void 0:c.status)?k:{},businessService:"PT",showToast:E,setShowToast:_,closeToast:()=>{_(null)},showTimeLine:!1,timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"}),P?l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},p(N?"PTUPNO_HEADER":"PT_OWNER_HISTORY")),headerBarEnd:l.createElement(ia,{onClick:()=>{g(!1),A(!1)}}),hideSubmit:!0,isDisabled:!1,popupStyles:N?{width:R?"473px":"50%"}:{width:"75%"}},N&&l.createElement(ee,{showPopup:g,name:null==N?void 0:N.name,UpdateNumberConfig:B,mobileNumber:null==N?void 0:N.mobileNumber,t:p,onValidation:(e,t)=>{let n={...null==T?void 0:T.applicationData};n.owners[null==N?void 0:N.index].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null;let l={...e};delete l.mobileNumber,n.documents=[...n.documents,...Object.keys(l).map(e=>({documentType:e,documentUid:l[e],fileStoreId:l[e]}))],F.mutate({Property:n},{onError:{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}}),!N&&l.createElement(la,{propertyId:v,userType:"employee"})):null)},PTAssessmentDetails:()=>{var e,a,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C,R,b,D,L,M,w,x,U;const{t:F}=o.useTranslation(),[B,k]=n.useState(""),[H,Y]=n.useState(""),W=Digit.ULBService.getCurrentTenantId(),{id:j}=i.useParams(),K=Digit.ULBService.getStateId(),V=i.useLocation(),G=null==V||null===(e=V.state)||void 0===e?void 0:e.Assessment,[z,X]=n.useState(null),q=r.useQueryClient(),$=i.useHistory(),[Z,Q]=n.useState({}),J=window.Digit.Utils.browser.isMobile(),[ee,te]=n.useState(!1),[ne,le]=n.useState(null),[oe,ie]=n.useState(null),ae=n.useRef(),re=n.useRef(),ue=n.useRef(),de=n.useRef();let{isLoading:se,data:ce}=Digit.Hooks.pt.useApplicationDetail(F,W,j);const{isLoading:pe,mutate:me}=Digit.Hooks.pt.usePropertyAssessment(W),{isLoading:ve,data:Ee,mutate:_e}=Digit.Hooks.pt.usePtCalculationEstimate(W),{data:Te}=Digit.Hooks.pt.usePropertyMDMS(K,"PropertyTax","ChargeSlabs");let ye;ye||(ye=null==Ee?void 0:Ee.Calculation[0]);const Se=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",consumerCode:j,tenantId:W},{enabled:!!j});n.useEffect(()=>{_e({Assessment:G})},[]),n.useEffect(()=>{k(parseInt(null==Ee?void 0:Ee.Calculation[0].taxHeadEstimates[6].estimateAmount)),Y(parseInt(null==Ee?void 0:Ee.Calculation[0].taxHeadEstimates[5].estimateAmount))},[ve]),n.useEffect(()=>{ce&&Q(Xe.cloneDeep(ce))},[ce]);let fe=Digit.Hooks.useWorkflowDetails({tenantId:(null==ce?void 0:ce.tenantId)||W,id:null==ce||null===(a=ce.applicationData)||void 0===a?void 0:a.acknowldgementNumber,moduleCode:"PT",role:"PT_CEMP"});null==Z||null===(u=Z.applicationDetails)||void 0===u||u.shift(),null==Z||null===(d=Z.applicationDetails)||void 0===d||d.unshift({title:"PT_ESTIMATE_DETAILS_HEADER",values:[{title:"PT_PROPERTY_PTUID",value:j},{title:"ES_PT_TITLE_BILLING_PERIOD",value:null==V||null===(s=V.state)||void 0===s||null===(c=s.Assessment)||void 0===c?void 0:c.financialYear}],additionalDetails:{taxHeadEstimatesCalculation:null==Ee?void 0:Ee.Calculation[0]}});const Pe=()=>{X(null)},ge=()=>{$.push("/digit-ui/employee/payment/collect/PT/"+j)};if(ve||pe||null==ce||!ce.applicationDetails)return l.createElement(t.Loader,null);let Ne=null==ce||null===(p=ce.applicationData)||void 0===p?void 0:p.address;var Ae,Oe,Ie,he,Ce,Re,be;Ne=null!==(m=Ne)&&void 0!==m&&m.doorNo?(null===(Ae=Ne)||void 0===Ae?void 0:Ae.doorNo)+","+(null===(Oe=Ne)||void 0===Oe||null===(Ie=Oe.locality)||void 0===Ie?void 0:Ie.area)+","+(null===(he=Ne)||void 0===he?void 0:he.city):(null===(Ce=Ne)||void 0===Ce||null===(Re=Ce.locality)||void 0===Re?void 0:Re.area)+","+(null===(be=Ne)||void 0===be?void 0:be.city);const De=e=>l.createElement("h1",{className:"heading-m"},e.label),Le=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Me=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Le,null)),we=e=>{le(e)};return l.createElement("div",null,l.createElement(t.Header,null,F("PT_TX_ASSESSMENT")),l.createElement(ea,{applicationDetails:{applicationDetails:[{title:"PT_ESTIMATE_DETAILS_HEADER",values:[{title:"PT_PROPERTY_PTUID",value:j},{title:"PT_ADDRESS",value:Ne},{title:"ES_PT_TITLE_BILLING_PERIOD",value:null==V||null===(v=V.state)||void 0===v||null===(E=v.Assessment)||void 0===E?void 0:E.financialYear},{title:"PT_BILLING_DUE_DATE",value:Ue(null==Se||null===(_=Se.data)||void 0===_||null===(T=_.Bill)||void 0===T||null===(y=T[0])||void 0===y||null===(S=y.billDetails)||void 0===S||null===(f=S[0])||void 0===f?void 0:f.expiryDate,"PT")||F("CS_NA")}]},{title:"PT_TAX_ESTIMATION_HEADER",additionalDetails:{taxHeadEstimatesCalculation:null==Ee?void 0:Ee.Calculation[0]}},{belowComponent:()=>l.createElement(t.LinkLabel,{onClick:()=>{te(!0)},style:J?{color:"#a82227",marginLeft:"0px"}:{color:"#a82227"}},F("PT_ADD_REBATE_PENALITY"))},{title:"PT_ASSESMENT_INFO_SUB_HEADER",values:[{title:"PT_ASSESMENT_INFO_TYPE_OF_BUILDING",value:(xe=null==ce||null===(P=ce.applicationData)||void 0===P?void 0:P.propertyType,"PROPERTYTAX_BILLING_SLAB_"+(null==xe?void 0:xe.split(".")[0]))},{title:"PT_ASSESMENT_INFO_USAGE_TYPE",value:(e=>"PROPERTYTAX_BILLING_SLAB_"+e)(null==ce||null===(g=ce.applicationData)||void 0===g?void 0:g.usageCategory)},{title:"PT_ASSESMENT_INFO_PLOT_SIZE",value:null==ce||null===(N=ce.applicationData)||void 0===N?void 0:N.landArea},{title:"PT_ASSESMENT_INFO_NO_OF_FLOOR",value:null==ce||null===(A=ce.applicationData)||void 0===A?void 0:A.noOfFloors}],additionalDetails:{floors:null==ce||null===(O=ce.applicationData)||void 0===O||null===(I=O.units)||void 0===I||null===(h=I.filter(e=>e.active))||void 0===h||null===(C=h.sort)||void 0===C||null===(R=C.call(h,(e,t)=>e.floorNo-t.floorNo))||void 0===R?void 0:R.map((e,t)=>{var n,l;const o=[{title:F("ES_APPLICATION_DETAILS_UNIT")+" "+(t+1),value:""},{title:"Floor No",value:null==e?void 0:e.floorNo},{title:"PT_ASSESSMENT_UNIT_USAGE_TYPE",value:"PROPERTYTAX_BILLING_SLAB_"+("RESIDENTIAL"!=(null==e?void 0:e.usageCategory)?null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.split(".")[1]:null==e?void 0:e.usageCategory)},{title:"PT_ASSESMENT_INFO_OCCUPLANCY",value:null==e?void 0:e.occupancyType},{title:"PT_FORM2_BUILT_AREA",value:null==e||null===(l=e.constructionDetail)||void 0===l?void 0:l.builtUpArea}];return"RENTED"===e.occupancyType&&o.push({title:"PT_FORM2_TOTAL_ANNUAL_RENT",value:e.arv}),{title:"",values:[{title:"",values:o}]}})}},{belowComponent:()=>{var e,n,o,i,a;return l.createElement("div",{style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#0B0C0C",fontSize:"24px"}},F("PT_CALC_DETAILS"),l.createElement("br",null)),l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#0B0C0C",fontSize:"16px",marginTop:"revert"}},F("PT_CALC_LOGIC_HEADER")),l.createElement(t.CardText,{style:{fontSize:"16px"}},F("PT_CALC_LOGIC")),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA"}},l.createElement("div",{className:"row border-none"},l.createElement("h2",null,F("PT_APPLICABLE_CHARGE_SLABS"))),l.createElement(t.StatusTable,null,null==ce||null===(e=ce.applicationData)||void 0===e||null===(n=e.units)||void 0===n||null===(o=n.filter(e=>e.active))||void 0===o||null===(i=o.sort)||void 0===i||null===(a=i.call(o,(e,t)=>e.floorNo-t.floorNo))||void 0===a?void 0:a.map((e,n)=>{var o,i,a,r;return l.createElement(t.Row,{label:F("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))+" "+F("PT_UNIT")+" - "+(n+1),text:(null==Te?void 0:Te.PropertyTax)&&(null==Te||null===(o=Te.PropertyTax)||void 0===o||null===(i=o.ChargeSlabs)||void 0===i||null===(a=i.filter(t=>t.floorNo==e.floorNo))||void 0===a||null===(r=a[0])||void 0===r?void 0:r.name)})}))))}}]},showTimeLine:!1,isLoading:se,isDataLoading:se,applicationData:null==Z?void 0:Z.applicationData,mutate:null,workflowDetails:q.getQueryData(["PT_ASSESSMENT",j,null==V||null===(b=V.state)||void 0===b||null===(D=b.Assessment)||void 0===D?void 0:D.financialYear])?{...fe,data:{...fe.data,nextActions:[]}}:fe,businessService:"PT",assessmentMutate:me,ptCalculationEstimateMutate:_e,showToast:z,setShowToast:X,closeToast:Pe,timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"}),ee&&l.createElement(t.Modal,{headerBarMain:l.createElement(De,{label:F("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(Me,{onClick:()=>{te(!1),Ee.Calculation[0]=ye,le(null),ie(null)}}),actionCancelLabel:F("PT_CANCEL"),actionCancelOnSubmit:()=>{Ee.Calculation[0]=ye,le(null),ie(null),te(!1)},actionSaveLabel:F("PT_ADD"),actionSaveOnSubmit:()=>function(){var e;let t=null==Ee||null===(e=Ee.Calculation[0])||void 0===e?void 0:e.totalAmount;const[n,l]=[parseInt(ae.current.value),parseInt(re.current.value)];if(G.additionalDetails={adhocPenalty:0,adhocExemptionReason:null,adhocPenaltyReason:null,adhocExemption:0},ne&&n>0)if("Others"!==we.value)if(n<t){var o;let e=n;Ee.Calculation[0].taxHeadEstimates[6]={taxHeadCode:"PT_TIME_PENALTY",estimateAmount:Ee.Calculation[0].taxHeadEstimates[6].estimateAmount=n+B,category:"TAX"},G.additionalDetails.adhocPenalty=e,G.additionalDetails.adhocPenaltyReason=ne.value,Ee.Calculation[0].totalAmount=(null==Ee||null===(o=Ee.Calculation[0])||void 0===o?void 0:o.taxAmount)+n,console.log("ptCalculationEstimateData",Ee)}else alert("Penality cannot exceed total amount");else if(n<t){var i,a;let e=n;Ee.Calculation[0].taxHeadEstimates[6]={taxHeadCode:"PT_TIME_PENALTY",estimateAmount:(null===(i=Ee.Calculation[0].taxHeadEstimates[6])||void 0===i?void 0:i.estimateAmount)+n+B,category:"TAX"},G.additionalDetails.adhocPenalty=e,G.additionalDetails.adhocPenaltyReason=de.current.value,Ee.Calculation[0].totalAmount=(null==Ee||null===(a=Ee.Calculation[0])||void 0===a?void 0:a.totalAmount)+n}else alert("Penality cannot exceed total amount");var r,u,d;oe&&l&&("Others"!==oe.value?l>0&&(l<t?(Ee.Calculation[0].taxHeadEstimates[5]={taxHeadCode:"PT_TIME_REBATE",estimateAmount:Ee.Calculation[0].taxHeadEstimates[5].estimateAmount=l+H,category:"TAX"},G.additionalDetails.adhocExemption=l,G.additionalDetails.adhocExemptionReason=oe.value,Ee.Calculation[0].totalAmount=(null==Ee||null===(r=Ee.Calculation[0])||void 0===r?void 0:r.totalAmount)-l):alert("Adhoc Exemption cannot be greater than the estimated tax for the given property")):l>0&&(l<t?(Ee.Calculation[0].taxHeadEstimates[5]={taxHeadCode:"PT_TIME_REBATE",estimateAmount:(null===(u=Ee.Calculation[0].taxHeadEstimates[5])||void 0===u?void 0:u.estimateAmount)-l-H,category:"TAX"},G.additionalDetails.adhocExemption=l,G.additionalDetails.adhocExemptionReason=ue.current.value,Ee.Calculation[0].totalAmount=(null==Ee||null===(d=Ee.Calculation[0])||void 0===d?void 0:d.totalAmount)-l):alert("Adhoc Exemption cannot be greater than the estimated tax for the given property"))),le(null),ie(null),te(!1)}(),hideSubmit:!1},l.createElement("div",null,l.createElement(t.Card,null,l.createElement(t.CardSectionHeader,null,F("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,F("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement(t.Dropdown,{isMandatory:!0,option:[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],optionKey:"value",select:we,selected:ne,isPropertyAssess:!0,t:F})))),ne&&"Others"===ne.value&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,F("PT_REASON")),l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"type",className:"employee-card-input false focus-visible undefined",ref:de})))),l.createElement(t.CardLabel,null,F("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{key:"firstTemp",type:"number",className:"employee-card-input false focus-visible undefined",ref:ae}))))),l.createElement(t.Card,null,l.createElement(t.CardSectionHeader,null,F("PT_AD_REBATE")),l.createElement(t.CardLabel,null,F("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement(t.Dropdown,{isMandatory:!0,option:[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],optionKey:"value",select:e=>{ie(e)},selected:oe,isPropertyAssess:!0,t:F})))),oe&&"Others"===oe.value&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,F("PT_REASON")),l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"type",className:"employee-card-input false focus-visible undefined",ref:ue})))),l.createElement(t.CardLabel,null,F("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"number",className:"employee-card-input false focus-visible undefined",ref:re}))))))),q.getQueryData(["PT_ASSESSMENT",j,null==V||null===(L=V.state)||void 0===L||null===(M=L.Assessment)||void 0===M?void 0:M.financialYear])?l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{disabled:!((null==Se||null===(w=Se.data)||void 0===w||null===(x=w.Bill)||void 0===x||null===(U=x[0])||void 0===U?void 0:U.totalAmount)>0),label:F("PT_PROCEED_PAYMENT"),onSubmit:ge})):l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{label:F("PT_ASSESS_PROPERTY_BUTTON"),onSubmit:()=>{var e,t;q.getQueryData(["PT_ASSESSMENT",j,null==V||null===(e=V.state)||void 0===e||null===(t=e.Assessment)||void 0===t?void 0:t.financialYear])||me({Assessment:G},{onError:(e,t)=>{var n,l,o,i,a,r;X({key:"error",action:(null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.message)||e.message,error:{message:(null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors[0])||void 0===r?void 0:r.code)||e.message}}),setTimeout(Pe,5e3)},onSuccess:(e,t)=>{var n,l,o,i,a;sessionStorage.setItem("IsPTAccessDone",null==e||null===(n=e.Assessments)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.auditDetails)||void 0===o?void 0:o.lastModifiedTime);let r=sessionStorage.getItem("Digit.User"),u=JSON.parse(r);X({key:"success",action:{action:"ASSESSMENT"}}),setTimeout(Pe,5e3),console.log("useType.value.info.type",u,typeof u),"CITIZEN"==(null==u||null===(i=u.value)||void 0===i||null===(a=i.info)||void 0===a?void 0:a.type)?$.push("/digit-ui/citizen/payment/my-bills/PT/"+j):ge()}})}})));var xe},PTEditApplication:()=>{const e=Digit.ULBService.getCurrentTenantId(),{t:t}=o.useTranslation();let{id:n}=i.useParams();const{isLoading:a,data:r}=Digit.Hooks.pt.useApplicationDetail(t,e,n);return r&&!a?l.createElement(aa,{applicationData:null==r?void 0:r.applicationData,tenantId:e}):null},PTResponse:e=>{const{t:a}=o.useTranslation(),u=r.useQueryClient(),[d,s]=(i.useHistory(),n.useState(null)),[c,p]=n.useState(null),[m,v]=n.useState(!1),[E,_,T]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[y,S,f]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",!1),P=Digit.ULBService.getCurrentTenantId(),{state:g}=e.location,N=Digit.Hooks.pt.usePropertyAPI(P,"UPDATE"!==g.key),A=Digit.Hooks.pt.usePropertyAPI(P,!1),{data:O}=Digit.Hooks.useStore.getInitData(),{tenants:I}=O||{},{data:h}=Digit.Hooks.pt.usePropertySearch({tenantId:P,filters:{propertyIds:g.Property.propertyId,audit:!0}},{enabled:m,select:e=>{var t;return null===(t=e.Properties)||void 0===t?void 0:t.filter(e=>"ACTIVE"===e.status)}});return n.useEffect(()=>{A.data&&A.isSuccess&&S(A.data)},[N.data]),n.useEffect(()=>{A.data&&A.isSuccess&&S(A.data)},[A.data]),n.useEffect(()=>{E||N.mutate({Property:null==g?void 0:g.Property},{onError:(e,t)=>{var n,l,o;p({key:"error"}),s((null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.message)||null)},onSuccess:function(e){try{var t;return _(!0),u.clear(),"MUTATION"===(null==e||null===(t=e.Properties[0])||void 0===t?void 0:t.creationReason)&&v(!0),Promise.resolve()}catch(e){return Promise.reject(e)}}})},[]),N.isLoading||N.isIdle&&!E?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(sa,{t:a,data:(null==N?void 0:N.data)||y,action:null==g?void 0:g.action,isSuccess:!!Object.keys(y||{}).length||(null==N?void 0:N.isSuccess),isLoading:N.isIdle&&!E||(null==N?void 0:N.isLoading),isEmployee:e.parentRoute.includes("employee")}),l.createElement(t.CardText,null,((e,t,n,l)=>ra("DISPLAY",e,t,n,l))(g.action,(N.isSuccess||!!y)&&!N.isError,e.parentRoute.includes("employee"),a)),(N.isSuccess||!!y)&&!N.isError&&l.createElement(t.SubmitBar,{style:{overflow:"hidden"},label:a("PT_DOWNLOAD_ACK_FORM"),onSubmit:function(){try{const{Properties:e=[]}=N.data||y,t=e&&e[0]||{},n=I.find(e=>e.code===t.tenantId);let l=t.tenantId||l;return Promise.resolve(Digit.PTService.search({tenantId:l,filters:{propertyIds:null==t?void 0:t.propertyId,status:"INACTIVE"}})).then(function(e){var l,o,i;return t.transferorDetails=(null==e||null===(l=e.Properties)||void 0===l?void 0:l[0])||[],t.isTransferor=!0,t.transferorOwnershipCategory=null==e||null===(o=e.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.ownershipCategory,Promise.resolve(gt({...t,auditData:h},n,a)).then(function(e){Digit.Utils.pdf.generate(e)})})}catch(e){return Promise.reject(e)}}})),c&&l.createElement(t.Toast,{error:"error"===c.key,label:d,onClose:()=>{p(null),s(null)}}),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:e.parentRoute.includes("employee")?"/digit-ui/employee":"/digit-ui/citizen"},l.createElement(t.SubmitBar,{label:a("CORE_COMMON_GO_TO_HOME")}))))},PTTransferOwnership:()=>{const e=Digit.ULBService.getCurrentTenantId(),{t:t}=o.useTranslation();let{id:n}=i.useParams();const{isLoading:a,data:r}=Digit.Hooks.pt.useApplicationDetail(t,e,n);return r&&!a?l.createElement(ca,{applicationData:null==r?void 0:r.applicationData,tenantId:e}):null},PTDocsRequired:()=>{Digit.ULBService.getCurrentTenantId();const e=Digit.ULBService.getStateId(),{t:a}=o.useTranslation(),r=i.useHistory(),{id:u}=i.useParams(),[d,s]=n.useState([]),{isLoading:c,data:p}=Digit.Hooks.pt.usePropertyMDMS(e,"PropertyTax",["MutationDocuments"]);return n.useEffect(()=>{var e;p&&s(null==p||null===(e=p.PropertyTax)||void 0===e?void 0:e.MutationDocuments)},[p]),c?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,a("PT_REQIURED_DOC_TRANSFER_OWNERSHIP")),l.createElement(t.Card,null,d.map((e,n)=>{const o=e.code.split("."),i=e.dropdownData;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginTop:"38px",marginBottom:"16px"}},a(o[0]+"."+o[1])),i.map((e,n)=>l.createElement(l.Fragment,{key:n},l.createElement(t.CardLabel,{style:{fontWeight:700}},n+1+". "+a(e.code)))),l.createElement(t.CardText,{className:"docsDescription"},a(o[0]+"."+o[1]+"."+o[1]+"_DESCRIPTION")))})),l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{style:{display:"block",marginLeft:"auto"},label:a("PT_TRANSFER_OWNERSHIP"),onSubmit:()=>{r.push("/digit-ui/employee/pt/property-mutate/"+u)}})))},PTCreateProperty:e=>{var a,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C;const R=r.useQueryClient(),b=i.useRouteMatch(),{t:D}=o.useTranslation(),{pathname:L}=i.useLocation(),[M,w]=n.useState(null),x=i.useHistory(),U=Digit.ULBService.getStateId();let F=[];const[B,k,H]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{});let{data:Y,isLoading:W}=Digit.Hooks.pt.useMDMS(U,"PropertyTax","CommonFieldsConfig");const[j,K]=n.useState({}),{data:V,isLoading:G}=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:null==j?void 0:j.city,filters:null==j?void 0:j.filters,auth:!0,configs:{enabled:Object.keys(j).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}});function z(e,t,n,l,o){if(void 0===o&&(o=!1),"owners"===e){let n=B.owners||[];n[l]=t,k({...B,[e]:[...n]})}else if("units"===e){let e=B.units||[];e=t,k({...B,units:e})}else if("propertyStructureDetails"===e){let e=B.propertyStructureDetails||{};e=t;let n={propertyStructureDetails:e};k({...B,...n})}else k({...B,[e]:{...B[e],...t}});((e,t,n,l)=>{let o,i=L.split("/").pop(),a=i.charAt(i.length-1),r=!1;Number(parseInt(i))||"0"==i||"-1"==i?"-1"==i||"-2"==i?(i=L.slice(0,-3),i=i.split("/").pop(),r=!0):(i=L.slice(0,-2),i=i.split("/").pop(),r=!0):r=!1,isNaN(a)||(r=!0);let{nextStep:u={}}=F.find(e=>e.route===i);"object"==typeof u&&null!=u&&0!=r&&(u=u[sessionStorage.getItem("ownershipCategory")]?u[sessionStorage.getItem("ownershipCategory")]+"/"+t:u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]=="un-occupied-area"?u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]+"/"+t:""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]:u[sessionStorage.getItem("subusagetypevar")]?u[sessionStorage.getItem("subusagetypevar")]+"/"+t:u[sessionStorage.getItem("area")]?""+u[sessionStorage.getItem("area")]!="map"?u[sessionStorage.getItem("area")]+"/"+t:""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u[sessionStorage.getItem("IsThisFloorSelfOccupied")]+"/"+t:u[sessionStorage.getItem("noOofBasements")]+"/"+t),"object"==typeof u&&null!=u&&0==r&&(!u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]||"map"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]&&"un-occupied-area"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?u[sessionStorage.getItem("subusagetypevar")]?u=""+u[sessionStorage.getItem("subusagetypevar")]:u[sessionStorage.getItem("area")]?u=""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u=""+u[sessionStorage.getItem("IsThisFloorSelfOccupied")]:u[sessionStorage.getItem("PropertyType")]?u=""+u[sessionStorage.getItem("PropertyType")]:u[sessionStorage.getItem("isResdential")]&&(u=""+u[sessionStorage.getItem("isResdential")]):u=""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]);let d=x.push;if(e&&(d=x.replace),n&&(u=l),null===u)return d(b.path+"/check");o=isNaN(u.split("/").pop())&&r&&"map"!==u?b.path+"/"+u+"/"+t:b.path+"/"+u,d(o)})(n,l,o,e)}B&&Object.keys(B).length>0&&window.location.href.includes("/info")&&"true"!==sessionStorage.getItem("docReqScreenByBack")&&(H(),R.invalidateQueries("PT_CREATE_PROPERTY")),n.useEffect(()=>{G&&(null==V?void 0:V.Properties.length)>0?w(!0):G&&0===(null==V?void 0:V.Properties.length)&&(w(!1),console.log("propertyDatapropertyData",V),x.push(b.path+"/acknowledgement"))},[V]);const X=e=>l.createElement("h1",{className:"heading-m"},e.label),q=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),$=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(q,null)),Z=()=>{},Q=()=>{};if(W)return l.createElement(t.Loader,null);const J=()=>{w(!1)};Y=Lt,Y.forEach(e=>{F=F.concat(e.body.filter(e=>!e.hideInCitizen))}),F.indexRoute="info";const ee=null===(a=Digit)||void 0===a||null===(u=a.ComponentRegistryService)||void 0===u?void 0:u.getComponent("PTCheckPage"),te=null===(d=Digit)||void 0===d||null===(s=d.ComponentRegistryService)||void 0===s?void 0:s.getComponent("PTAcknowledgement");return l.createElement("div",null,l.createElement("div",null,l.createElement(i.Switch,null,F.map((e,t)=>{const{component:n,texts:o,inputs:a,key:r}=e,u="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:b.path+"/"+e.route,key:t},l.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:z,onSkip:Z,t:D,formData:B,onAdd:Q}))}),l.createElement(i.Route,{path:b.path+"/check"},l.createElement(ee,{onSubmit:function(){try{return K({city:B.address.city.code,filters:{mobileNumber:B.owners[0].mobileNumber,name:B.owners[0].name,doorNo:B.address.doorNo,locality:B.address.locality.code,isRequestForDuplicatePropertyValidation:!0}}),Promise.resolve()}catch(e){return Promise.reject(e)}},value:B})),l.createElement(i.Route,{path:b.path+"/acknowledgement"},l.createElement(te,{data:B,onSuccess:()=>{H(),R.invalidateQueries("PT_CREATE_PROPERTY")}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:b.path+"/"+F.indexRoute})))),l.createElement("div",null,M&&l.createElement(t.Modal,{headerBarMain:l.createElement(X,{label:D("CR_PROPERTY_DUPLICATE")}),headerBarEnd:l.createElement($,{onClick:J}),actionCancelLabel:"Cancel",actionCancelOnSubmit:J,actionSaveLabel:"Proceed",actionSaveOnSubmit:()=>{w(!1),x.push(b.path+"/acknowledgement")},formId:"modal-action"},"  ",l.createElement("div",{style:{width:"100%"}},l.createElement(t.Card,null,l.createElement(t.CardHeader,null,"Property Details"),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("CR_PROPERTY_NUMBER"),text:(null==V||null===(c=V.Properties)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.propertyId)||"NA",textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:D("CR_OWNER_NAME"),text:(null==V||null===(m=V.Properties)||void 0===m||null===(v=m[0])||void 0===v||null===(E=v.owners)||void 0===E?void 0:E[0].name)||"NA"}),l.createElement(t.Row,{label:D("CR_MOBILE_NUMBER"),text:(null==V||null===(_=V.Properties)||void 0===_||null===(T=_[0])||void 0===T||null===(y=T.owners)||void 0===y?void 0:y[0].mobileNumber)||"NA"}),l.createElement(t.Row,{label:D("CR_ADDRESS"),text:(null==V||null===(S=V.Properties)||void 0===S||null===(f=S[0])||void 0===f||null===(P=f.address)||void 0===P?void 0:P.doorNo)+", "+(null==V||null===(g=V.Properties)||void 0===g||null===(N=g[0])||void 0===N||null===(A=N.address)||void 0===A||null===(O=A.locality)||void 0===O?void 0:O.name)+", "+(null==V||null===(I=V.Properties)||void 0===I||null===(h=I[0])||void 0===h||null===(C=h.address)||void 0===C?void 0:C.city)||"NA"})))))))},PTMyApplications:()=>{const{t:e}=o.useTranslation(),n=Digit.ULBService.getCitizenCurrentTenant(!0)||Digit.ULBService.getCurrentTenantId(),a=Digit.UserService.getUser().info;let r,u,d=window.location.href.split("/").pop();isNaN(parseInt(d))?r=4:(u=d,r=parseInt(d)+50);let s=isNaN(parseInt(d))?{limit:"4",sortOrder:"ASC",sortBy:"createdTime",offset:"0",mobileNumber:null==a?void 0:a.mobileNumber,tenantId:n,status:"INWORKFLOW"}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:u,tenantId:n,status:"INWORKFLOW"};const{isLoading:c,data:p}=Digit.Hooks.pt.usePropertySearch({filters:s},{filters:s}),{Properties:m}=p||{};let v=(null==m?void 0:m.length)>0?null==m?void 0:m.map(e=>null==e?void 0:e.acknowldgementNumber):[],E={tenantId:n,referenceIds:v};const{isLoading:_,data:T}=Digit.Hooks.useFeedBackSearch({filters:{serviceSearchArgs:E}},{filters:{serviceSearchArgs:E},enabled:(null==v?void 0:v.length)>0,cacheTime:0});function y(t){var n,l;let o=null==T||null===(n=T.Service)||void 0===n?void 0:n.find(e=>{var n;return null==e||null===(n=e.referenceId)||void 0===n?void 0:n.includes(null==t?void 0:t.acknowldgementNumber)});return o?e("CS_CF_VIEW"):!o&&null!=t&&null!==(l=t.status)&&void 0!==l&&l.includes("ACTIVE")?e("CS_CF_RATE_US"):e("CS_CF_TRACK")}return c||_?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("CS_TITLE_MY_APPLICATIONS")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(Mt,{application:e,tenantId:null==a?void 0:a.permanentCity,buttonLabel:y(e)}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_NO_APPLICATION_FOUND_MSG")),0!==(null==m?void 0:m.length)&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/my-applications/"+r},e("PT_LOAD_MORE_MSG")))))),l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_TEXT_NOT_ABLE_TO_FIND_THE_APPLICATION")," ",l.createElement("span",{className:"link",style:{display:"block"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application/info"},e("PT_COMMON_CLICK_HERE_TO_REGISTER_NEW_PROPERTY")))))},PTMyProperties:()=>{const{t:e}=o.useTranslation(),n=Digit.ULBService.getCitizenCurrentTenant(!0)||Digit.ULBService.getCurrentTenantId(),a=Digit.UserService.getUser().userInfo;let r,u,d=window.location.href.split("/").pop();isNaN(parseInt(d))?r=4:(u=d,r=parseInt(d)+50);let s=isNaN(parseInt(d))?{limit:"4",sortOrder:"ASC",sortBy:"createdTime",offset:"0",mobileNumber:null==a?void 0:a.mobileNumber,tenantId:n,status:"ACTIVE,INACTIVE"}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:u,tenantId:n,status:"ACTIVE,INACTIVE"};const{isLoading:c,data:p}=Digit.Hooks.pt.usePropertySearchNew({filters:s,searchedFrom:"myPropertyCitizen"},{filters:s});if(c)return l.createElement(t.Loader,null);const{Properties:m}=p||{};return l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("PT_MY_PROPERTIES_HEADER")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(wt,{application:e}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_NO_PROP_FOUND_MSG")),0!==(null==m?void 0:m.length)&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/my-properties/"+r},e("PT_LOAD_MORE_MSG")))))),l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_TEXT_NOT_ABLE_TO_FIND_THE_APPLICATION")," ",l.createElement("span",{className:"link",style:{display:"block"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application/info"},e("PT_COMMON_CLICK_HERE_TO_REGISTER_NEW_PROPERTY")))))},PTApplicationDetails:()=>{var e,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C,R,b,D,L,M,w,x,U,F,B,k,H,Y,W,j,K,V,G;const{t:z}=o.useTranslation(),{acknowledgementIds:X,tenantId:q}=(i.useHistory(),i.useParams()),[$,Z]=n.useState([]),[Q,J]=n.useState(!1),[ee,te]=n.useState(!1),[ne,le]=n.useState(null),{data:oe}=Digit.Hooks.useStore.getInitData(),{tenants:ie}=oe||{},{isLoading:ae,data:re}=Digit.Hooks.pt.usePropertySearch({filters:{acknowledgementIds:X,tenantId:q}},{filters:{acknowledgementIds:X,tenantId:q}}),[ue,de]=n.useState(null),[se,ce]=n.useState(null),[pe,me]=n.useState(!1);let ve={tenantId:q,code:["PT_"+(null==re||null===(e=re.Properties)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.creationReason)],module:["PT"],referenceIds:[null==re||null===(r=re.Properties)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.acknowldgementNumber]};const{data:Ee}=Digit.Hooks.pt.useServiceSearchCF({filters:{serviceSearchArgs:ve}},{filters:{serviceSearchArgs:ve},enabled:!(null==re||null===(d=re.Properties)||void 0===d||null===(s=d[0])||void 0===s||!s.acknowldgementNumber),cacheTime:0}),_e=wn(re,"Properties",[]),Te=wn(re,"Properties[0].propertyId",[]);let ye=_e&&_e.length>0&&_e[0]||{};const fe=ye;sessionStorage.setItem("pt-property",JSON.stringify(fe)),n.useMemo(()=>{var e,t,n,l,o;"ACTIVE"!==(null==re||null===(e=re.Properties)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.status)&&"INACTIVE"!==(null==re||null===(n=re.Properties)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.status)||0!=ee||0!=(null==Ee||null===(o=Ee.Service)||void 0===o?void 0:o.length)||te(!0)},[re,Ee]),n.useEffect(function(){try{const e=function(){if(X&&q&&ye)return Promise.resolve(Digit.PaymentService.searchBill(q,{Service:"PT.MUTATION",consumerCode:X})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:ye},q)).then(function(e){var t;de((null==e||null===(t=e[X])||void 0===t?void 0:t.totalAmount)||z("CS_NA")),ce(z("PT_MUT_BILL_ACTIVE"))});var t,n,l;de((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||z("CS_NA")),ce(z("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[q,X,ye]);const{isLoading:Pe,data:ge}=Digit.Hooks.pt.usePropertySearch({tenantId:q,filters:{propertyIds:Te,audit:!0}},{enabled:!0}),{data:Ne,isLoading:Ae}=Digit.Hooks.useRecieptSearch({tenantId:q,businessService:"PT.MUTATION",consumerCodes:X,isEmployee:!1},{enabled:!!X});if(ye.workflow||(ye.workflow={id:null,tenantId:q,businessService:"PT.MUTATION",businessId:null==fe?void 0:fe.acknowldgementNumber,action:"",moduleName:"PT",state:null,comment:null,documents:null,assignes:null}),ye&&ye.owners&&ye.owners.length>0){let e=[],t=[];ye.owners.map(n=>{n.documentUid=n.documents?n.documents[0].documentUid:"NA",n.documentType=n.documents?n.documents[0].documentType:"NA","ACTIVE"==n.status?e.push(n):t.push(n)}),ye.ownersInit=t,ye.ownersTemp=e}if(ye.ownershipCategoryTemp=null==ye?void 0:ye.ownershipCategory,ye.ownershipCategoryInit="NA",null!==(c=wn(fe,"Properties[0].ownershipCategory",""))&&void 0!==c&&c.startsWith("INSTITUTION")&&(ye.institutionTemp=ye.institution),ge&&Array.isArray(wn(ge,"Properties",[]))&&wn(ge,"Properties",[]).length>0){var Oe,Ie;const e=wn(ge,"Properties",[]),t="ACTIVE"==ye.status?1:0,n=e.filter(e=>"ACTIVE"==e.status).sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[t];ye.ownershipCategoryInit=null==n?void 0:n.ownershipCategory,ye.ownersInit=null==n||null===(Oe=n.owners)||void 0===Oe?void 0:Oe.filter(e=>"ACTIVE"==e.status);const l=e.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[0];ye.ownersTemp=l.owners.filter(e=>"ACTIVE"==e.status),null!=ye&&null!==(Ie=ye.ownershipCategoryInit)&&void 0!==Ie&&Ie.startsWith("INSTITUTION")&&(ye.institutionInit=n.institution)}let he=wn(ye,"ownersTemp",[]),Ce=wn(ye,"ownersInit",[]),Re=(wn(ye,"institutionTemp",[]),null==ye||null===(p=ye.ownershipCategoryInit)||void 0===p?void 0:p.startsWith("INSTITUTION")),be=wn(ye,"institutionInit",[]),De=[];De=null==fe?void 0:fe.units,De&&De.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1});let Le=[];Le=null==fe?void 0:fe.owners;let Me=[];if(Me=null==fe?void 0:fe.documents,ae||Pe)return l.createElement(t.Loader,null);let we,xe=0;we=De&&(null===(m=De[0])||void 0===m?void 0:m.floorNo);const Ue=!(null==ye||!ye.creationReason||"MUTATION"!==ye.creationReason);let Fe=z("CS_NA");if(null!=ye&&null!==(v=ye.additionalDetails)&&void 0!==v&&v.documentDate){var Be;const e=new Date(null==ye||null===(Be=ye.additionalDetails)||void 0===Be?void 0:Be.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];Fe=e.getDate()+" "+t+" "+e.getFullYear()}let ke=[];ke.push({label:"MUTATION"===(null==re||null===(E=re.Properties)||void 0===E||null===(_=E[0])||void 0===_?void 0:_.creationReason)?z("MT_APPLICATION"):z("PT_APPLICATION_ACKNOWLEDGMENT"),onClick:()=>function(){try{const e=fe||{},t=ie.find(t=>t.code===e.tenantId);return Promise.resolve(gt({...e},t,z)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}),Ne&&(null==Ne?void 0:Ne.Payments.length)>0&&0==Ae&&ke.push({label:z("MT_FEE_RECIEPT"),onClick:()=>{var e;return function(e){let{tenantId:t,payments:n,...l}=e;try{let e={filestoreIds:[null==n?void 0:n.fileStoreId]};const l=null!==e?Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")}):Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...n}]},"property-receipt")).then(function(n){return e=n,Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})});return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}({tenantId:null==Ne||null===(e=Ne.Payments[0])||void 0===e?void 0:e.tenantId,payments:null==Ne?void 0:Ne.Payments[0]})}}),"MUTATION"===(null==re||null===(T=re.Properties)||void 0===T||null===(y=T[0])||void 0===y?void 0:y.creationReason)&&"ACTIVE"===(null==re||null===(S=re.Properties)||void 0===S||null===(f=S[0])||void 0===f?void 0:f.status)&&ke.push({label:z("MT_CERTIFICATE"),onClick:()=>function(){try{var e;return Promise.resolve(Digit.PaymentService.generatePdf(q,{Properties:[null==re||null===(e=re.Properties)||void 0===e?void 0:e[0]]},"ptmutationcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(q,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()});const He=Array.isArray(null==re||null===(P=re.Properties)||void 0===P||null===(g=P[0])||void 0===g?void 0:g.owners)?null==re||null===(N=re.Properties)||void 0===N||null===(A=N[0])||void 0===A?void 0:A.owners.slice().reverse():[];return l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto",maxWidth:"960px"}},l.createElement(t.Header,{styles:{fontSize:"32px"}},z("PT_MUTATION_APPLICATION_DETAILS")),l.createElement("div",{style:{display:"flex",alignItems:"center",color:"#A52A2A"}},l.createElement(t.LinkButton,{label:z("VIEW_TIMELINE"),onClick:()=>{const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"}),me(!0)}})),ke&&ke.length>0&&l.createElement(t.MultiLink,{className:"multilinkWrapper",onHeadClick:()=>J(!Q),displayOptions:Q,options:ke})),l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_APPLICATION_NUMBER_LABEL"),text:null==ye?void 0:ye.acknowldgementNumber}),l.createElement(t.Row,{className:"border-none",label:z("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==ye?void 0:ye.propertyId}),l.createElement(t.Row,{className:"border-none",label:z("PT_APPLICATION_CHANNEL_LABEL"),text:z("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==ye?void 0:ye.channel))}),Ue&&l.createElement(l.Fragment,null,l.createElement(t.Row,{className:"border-none",label:z("PT_FEE_AMOUNT"),text:ue||z("₹0"),textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:z("PT_PAYMENT_STATUS"),text:se,textStyle:{whiteSpace:"pre"}}))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==ye||null===(O=ye.address)||void 0===O?void 0:O.pincode)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_CITY"),text:(null==ye||null===(I=ye.address)||void 0===I?void 0:I.city)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_LOCALITY_OR_MOHALLA"),text:z(""+(null==ye||null===(h=ye.address)||void 0===h||null===(C=h.locality)||void 0===C?void 0:C.area))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==ye||null===(R=ye.address)||void 0===R?void 0:R.street)||z("CS_NA")}),l.createElement(t.Row,Ue?{className:"border-none",label:z("PT_DOOR_OR_HOUSE"),text:(null==ye||null===(b=ye.address)||void 0===b?void 0:b.doorNo)||z("CS_NA")}:{className:"border-none",label:z("PT_PROPERTY_ADDRESS_COLONY_NAME"),text:(null==ye||null===(D=ye.address)||void 0===D?void 0:D.buildingName)||z("CS_NA")})),Ue?l.createElement(l.Fragment,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(Ce)&&he.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=Ce.length&&l.createElement("span",null,z("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||z("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement("div",null,Re?Array.isArray(he)&&he.sort((e,t)=>e.additionalDetails.ownerSequence-t.additionalDetails.ownerSequence).map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=he.length&&l.createElement("span",null,z("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_INSTITUTION_NAME"),text:(null==be?void 0:be.name)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_TYPE_OF_INSTITUTION"),text:""+z(null==be?void 0:be.type)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_NAME_AUTHORIZED_PERSON"),text:(null==be?void 0:be.nameOfAuthorizedPerson)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_INSTITUTION_DESIGNATION"),text:(null==be?void 0:be.designation)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||z("CS_NA")})))):Array.isArray(he)&&he.sort((e,t)=>{var n,l;return(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.ownerSequence)-(null==t||null===(l=t.additionalDetails)||void 0===l?void 0:l.ownerSequence)}).map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=he.length&&l.createElement("span",null,z("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_GENDER_LABEL"),text:(null==e?void 0:e.gender)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_OWNERSHIP_TYPE"),text:""+z(null!=fe&&fe.ownershipCategory?"PT_OWNERSHIP_"+(null==fe?void 0:fe.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||z("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_MUTATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_PENDING_COURT"),text:(null==ye||null===(L=ye.additionalDetails)||void 0===L?void 0:L.isMutationInCourt)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_DETAILS_COURT_CASE"),text:(null==ye||null===(M=ye.additionalDetails)||void 0===M?void 0:M.caseDetails)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_PROP_UNDER_GOV_AQUISITION"),text:(null==ye||null===(w=ye.additionalDetails)||void 0===w?void 0:w.isPropertyUnderGovtPossession)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_DETAILS_GOV_AQUISITION"),text:z("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_REGISTRATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_REASON_PROP_TRANSFER"),text:""+z(null==ye||null===(x=ye.additionalDetails)||void 0===x?void 0:x.reasonForTransfer)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_PROP_MARKET_VALUE"),text:(null==ye||null===(U=ye.additionalDetails)||void 0===U?void 0:U.marketValue)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_REG_NUMBER"),text:(null==ye||null===(F=ye.additionalDetails)||void 0===F?void 0:F.documentNumber)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_DOC_ISSUE_DATE"),text:Fe}),l.createElement(t.Row,{className:"border-none",label:z("PT_REG_DOC_VALUE"),text:(null==ye||null===(B=ye.additionalDetails)||void 0===B?void 0:B.documentValue)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_REMARKS"),text:z("CS_NA")}))):l.createElement(l.Fragment,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}}," ",z("PT_PROPERTY_ASSESSMENT_DETAILS_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESMENT_INFO_USAGE_TYPE"),text:""+z(("RESIDENTIAL"!==(null==ye?void 0:ye.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPSUBUSGTYPE_")+(null!=ye&&null!==(k=ye.usageCategory)&&void 0!==k&&k.split(".")[1]?null==ye||null===(H=ye.usageCategory)||void 0===H?void 0:H.split(".")[1]:null==ye?void 0:ye.usageCategory))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_PROPERTY_TYPE"),text:""+z(Se(null==ye?void 0:ye.propertyType))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESMENT1_PLOT_SIZE"),text:(null==ye?void 0:ye.landArea)&&""+z((null==ye?void 0:ye.landArea)+" sq.ft")||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESMENT_INFO_NO_OF_FLOOR"),text:""+z(null==ye?void 0:ye.noOfFloors)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESMENT1_ELECTRICITY_NUMBER"),text:""+z(""+(null===(Y=ye.additionalDetails)||void 0===Y?void 0:Y.electricity))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESMENT1_ELECTRICITY_UID"),text:""+z(""+(null===(W=ye.additionalDetails)||void 0===W?void 0:W.uid))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_STRUCTURE_TYPE_LABEL"),text:""+(""+(null==ye||null===(j=ye.additionalDetails)||void 0===j||null===(K=j.structureType)||void 0===K?void 0:K.i18nKey)||z("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:z("PT_AGE_OF_PROPERTY_LABEL"),text:""+(""+(null==ye||null===(V=ye.additionalDetails)||void 0===V||null===(G=V.ageOfProperty)||void 0===G?void 0:G.code)||z("CS_NA"))})),l.createElement("div",null,Array.isArray(De)&&De.length>0&&De.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},(we!==(null==e?void 0:e.floorNo)?xe=1:xe+=1)&&1===xe&&l.createElement(t.CardSubHeader,null,z("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))),l.createElement("div",{style:{border:"groove",padding:"7px",marginBottom:"10px"}},l.createElement(t.CardSubHeader,null,z("ES_APPLICATION_DETAILS_UNIT")," ",xe),(we=null==e?void 0:e.floorNo)>-3&&l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_ASSESSMENT_UNIT_USAGE_TYPE"),text:""+z(("RESIDENTIAL"!==(null==ye?void 0:ye.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPUSGTYPE_")+(null!=ye&&null!==(o=ye.usageCategory)&&void 0!==o&&o.split(".")[1]?null==ye||null===(i=ye.usageCategory)||void 0===i?void 0:i.split(".")[1]:null==ye?void 0:ye.usageCategory))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_OCCUPANY_TYPE_LABEL"),text:""+z("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType))||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_BUILTUP_AREA_LABEL"),text:""+((null==e||null===(a=e.constructionDetail)||void 0===a?void 0:a.builtUpArea)+" sq.ft"||z("CS_NA"))}),"RENTED"==e.occupancyType&&l.createElement(t.Row,{className:"border-none",label:z("PT_FORM2_TOTAL_ANNUAL_RENT"),text:""+((null==e?void 0:e.arv)&&"₹"+(null==e?void 0:e.arv)||z("CS_NA"))}))))})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_COMMON_PROPERTY_OWNERSHIP_DETAILS_HEADER")),l.createElement("div",{className:"owner-details"},Array.isArray(Le)&&He.sort(()=>He).map((e,n)=>l.createElement("div",{key:n,className:"owner-details-child"},l.createElement(t.CardSubHeader,null,1!=Le.length&&l.createElement("span",null,z("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_COMMON_GENDER_LABEL"),text:(null==e?void 0:e.gender)||z("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_OWNERSHIP_TYPE"),text:""+z(null!=ye&&ye.ownershipCategory?"PT_OWNERSHIP_"+(null==ye?void 0:ye.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:z("PT_FORM3_MOBILE_NUMBER"),text:null==e?void 0:e.mobileNumber}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_AUTHORISED_EMAIL"),text:""+((null==e?void 0:e.emailId)||z("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:z("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:null==e?void 0:e.ownerType}),l.createElement(t.Row,{className:"border-none",label:z("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.permanentAddress)||z("CS_NA")})))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},z("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(Me)?Me.length>0&&l.createElement(Ut,{property:ye}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:z("PT_NO_DOCUMENTS_MSG")}))),l.createElement("div",{id:"timeline"},l.createElement(ze,{application:fe,id:X,userType:"citizen"})),ne&&l.createElement(t.Toast,{error:ne.key,label:z(ne.label),style:{bottom:"0px"},onClose:()=>{le(null)}})),ee&&l.createElement(Ft,{setpopup:te,setShowToast:le,data:re})))},PTSearchPropertyComponent:()=>{const{t:e}=o.useTranslation(),{path:t}=i.useRouteMatch(),a=n.useMemo(()=>xn.map(t=>{const n={};for(const l in t.texts)n[l]=e(t.texts[l]);return{...t,texts:n}},[xn]));return l.createElement(i.Switch,null,l.createElement(i.Route,{path:""+t,exact:!0},l.createElement(ct,{config:a[0]})))},PTSearchResultsComponent:vt,PTEditProperty:e=>{var a,u,d,s;const c=r.useQueryClient(),p=i.useRouteMatch(),{t:m}=o.useTranslation(),{pathname:v}=i.useLocation(),E=i.useHistory();let _=[];const[T,y,S]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{}),f=Digit.ULBService.getStateId();let{data:P,isLoading:g}=Digit.Hooks.pt.useMDMS(f,"PropertyTax","CommonFieldsConfig");Digit.ULBService.getCurrentTenantId();const N=window.location.href.split("/").pop(),A=window.location.href.split("/").pop();let O={};const I=window.location.href.includes("action=UPDATE"),h=!!window.location.href.includes("UPDATE"),{isLoading:C,data:R}=(JSON.parse(sessionStorage.getItem("pt-property")),Digit.Hooks.pt.usePropertySearch({filters:I?{propertyIds:A,isSearchInternal:!0}:{acknowledgementIds:N,isSearchInternal:!0}},{filters:I?{propertyIds:A,isSearchInternal:!0}:{acknowledgementIds:N,isSearchInternal:!0}}));function b(e,t,n,l,o){if(void 0===o&&(o=!1),"owners"===e){let n=T.owners||[];n[l]=t,y({...T,[e]:[...n]})}else y("units"===e?{...T,[e]:[...t]}:{...T,[e]:{...T[e],...t}});((e,t,n,l)=>{let o,i=v.split("/").pop(),a=i.charAt(i.length-1),r=!1;Number(parseInt(i))||"0"==i||"-1"==i?"-1"==i||"-2"==i?(i=v.slice(0,-3),i=i.split("/").pop(),r=!0):(i=v.slice(0,-2),i=i.split("/").pop(),r=!0):r=!1,isNaN(a)||(r=!0);let{nextStep:u={}}=_.find(e=>e.route===i);"object"==typeof u&&null!=u&&0!=r&&(u=u[sessionStorage.getItem("ownershipCategory")]?u[sessionStorage.getItem("ownershipCategory")]+"/"+t:u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]=="un-occupied-area"?u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]+"/"+t:""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]:u[sessionStorage.getItem("subusagetypevar")]?u[sessionStorage.getItem("subusagetypevar")]+"/"+t:u[sessionStorage.getItem("area")]?""+u[sessionStorage.getItem("area")]!="map"?u[sessionStorage.getItem("area")]+"/"+t:""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u[sessionStorage.getItem("IsThisFloorSelfOccupied")]+"/"+t:u[sessionStorage.getItem("noOofBasements")]+"/"+t),"object"==typeof u&&null!=u&&0==r&&(!u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]||"map"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]&&"un-occupied-area"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?u[sessionStorage.getItem("subusagetypevar")]?u=""+u[sessionStorage.getItem("subusagetypevar")]:u[sessionStorage.getItem("area")]?u=""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u=""+u[sessionStorage.getItem("IsThisFloorSelfOccupied")]:u[sessionStorage.getItem("PropertyType")]?u=""+u[sessionStorage.getItem("PropertyType")]:u[sessionStorage.getItem("isResdential")]&&(u=""+u[sessionStorage.getItem("isResdential")]):u=""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]);let d=E.push;if(e&&(d=E.replace),n&&(u=l),null===u)return d(p.path+"/check");o=isNaN(u.split("/").pop())&&r&&"map"!==u?p.path+"/"+u+"/"+t:p.path+"/"+u,d(o)})(n,l,o,e)}sessionStorage.setItem("isEditApplication",!1),n.useEffect(()=>{var e;if(O=(null==R?void 0:R.Properties)&&R.Properties[0]&&R.Properties[0],R&&O&&(null==R||null===(e=R.Properties)||void 0===e?void 0:e.length)>0){O=null==R?void 0:R.Properties[0],I?(O.isUpdateProperty=!0,O.isEditProperty=!1):(O.isUpdateProperty=h,O.isEditProperty=!0),sessionStorage.setItem("propertyInitialObject",JSON.stringify({...O}));let e=function(e){var t,n,l,o,i,a,r,u,d,s,c,p,m,v,E,_,T,y,S,f,P,g,N,A,O,I,h,C,R,b,D,L,M,w,x,U,F;if(void 0===e&&(e={}),"BUILTUP.INDEPENDENTPROPERTY"===(null===(t=e)||void 0===t?void 0:t.propertyType)&&0==e.units.length&&(e.units=[{constructionDetail:{builtUpArea:null===(C=e)||void 0===C?void 0:C.superBuiltUpArea},floorNo:0,occupancyType:null===(R=e)||void 0===R?void 0:R.occupancyType,unitType:null===(b=e)||void 0===b?void 0:b.occupancyType,usageCategory:null===(D=e)||void 0===D?void 0:D.usageCategory}]),"INSTITUTIONALPRIVATE"===(null===(n=e)||void 0===n?void 0:n.ownershipCategory)||"INSTITUTIONALGOVERNMENT"===(null===(l=e)||void 0===l?void 0:l.ownershipCategory)){var B,k,H,Y,W,j,K,V,G,z,X,q,$,Z,Q,J;let t=[];var ee,te,ne,le,oe,ie,ae,re;null!==(B=e)&&void 0!==B&&null!==(k=B.owners[0])&&void 0!==k&&null!==(H=k.documents[0])&&void 0!==H&&null!==(Y=H.documentType)&&void 0!==Y&&Y.includes("IDENTITYPROOF")&&(e.owners[0].documents[0].documentType={code:null===(ee=e)||void 0===ee||null===(te=ee.owners[0])||void 0===te||null===(ne=te.documents[0])||void 0===ne?void 0:ne.documentType,i18nKey:Fe(null===(le=e)||void 0===le||null===(oe=le.owners[0])||void 0===oe||null===(ie=oe.documents[0])||void 0===ie?void 0:ie.documentType,".","_")},t.proofIdentity=null===(ae=e)||void 0===ae||null===(re=ae.owners[0])||void 0===re?void 0:re.documents[0]),e.owners[0].designation=null===(W=e)||void 0===W||null===(j=W.institution)||void 0===j?void 0:j.designation,e.owners[0].inistitutionName=null===(K=e)||void 0===K||null===(V=K.institution)||void 0===V?void 0:V.name,e.owners[0].name=null===(G=e)||void 0===G||null===(z=G.institution)||void 0===z?void 0:z.nameOfAuthorizedPerson,e.owners[0].inistitutetype={value:null===(X=e)||void 0===X?void 0:X.institution.type,code:null===(q=e)||void 0===q?void 0:q.institution.type},e.owners[0].documents=t,e.owners[0].permanentAddress=null===($=e)||void 0===$||null===(Z=$.owners[0])||void 0===Z?void 0:Z.correspondenceAddress,e.owners[0].isCorrespondenceAddress=null===(Q=e)||void 0===Q||null===(J=Q.owners[0])||void 0===J?void 0:J.isCorrespondenceAddress}else e.owners.map(e=>{let t=[];e.documents&&e.documents.map(e=>{var n,l;null!=e&&e.documentType&&"string"==typeof(null==e?void 0:e.documentType)&&null!=e&&null!==(n=e.documentType)&&void 0!==n&&n.includes("SPECIALCATEGORYPROOF")&&(e.documentType={code:null==e?void 0:e.documentType,i18nKey:Fe(null==e?void 0:e.documentType,".","_")},t.specialProofIdentity=e),null!=e&&e.documentType&&"string"==typeof(null==e?void 0:e.documentType)&&null!=e&&null!==(l=e.documentType)&&void 0!==l&&l.includes("IDENTITYPROOF")&&(e.documentType={code:null==e?void 0:e.documentType,i18nKey:Fe(null==e?void 0:e.documentType,".","_")},t.proofIdentity=e)}),e.emailId=null==e?void 0:e.emailId,e.fatherOrHusbandName=null==e?void 0:e.fatherOrHusbandName,e.isCorrespondenceAddress=null==e?void 0:e.isCorrespondenceAddress,e.mobileNumber=null==e?void 0:e.mobileNumber,e.name=null==e?void 0:e.name,e.permanentAddress=null==e?void 0:e.permanentAddress,e.gender={code:null==e?void 0:e.gender},e.ownerType={code:null==e?void 0:e.ownerType},e.relationship={code:null==e?void 0:e.relationship},e.documents=t});e.ownershipCategory={code:null===(o=e)||void 0===o?void 0:o.ownershipCategory,value:null===(i=e)||void 0===i?void 0:i.ownershipCategory},e.address.geoLocation=null!==(a=e)&&void 0!==a&&null!==(r=a.address)&&void 0!==r&&null!==(u=r.geoLocation)&&void 0!==u&&u.latitude&&null!==(d=e)&&void 0!==d&&null!==(s=d.address)&&void 0!==s&&null!==(c=s.geoLocation)&&void 0!==c&&c.longitude?{latitude:null===(L=e)||void 0===L||null===(M=L.address)||void 0===M||null===(w=M.geoLocation)||void 0===w?void 0:w.latitude,longitude:null===(x=e)||void 0===x||null===(U=x.address)||void 0===U||null===(F=U.geoLocation)||void 0===F?void 0:F.longitude}:{},e.address.pincode=null===(p=e)||void 0===p||null===(m=p.address)||void 0===m?void 0:m.pincode,e.address.city={code:null===(v=e)||void 0===v?void 0:v.tenantId,i18nKey:"TENANT_TENANTS_"+Fe(null===(E=e)||void 0===E?void 0:E.tenantId.toUpperCase(),".","_")},e.address.locality.i18nkey=(null===(_=e)||void 0===_?void 0:_.tenantId.replace(".","_").toUpperCase())+"_REVENUE_"+(null===(T=e)||void 0===T||null===(y=T.address)||void 0===y||null===(S=y.locality)||void 0===S?void 0:S.code);let ue=null===(f=e)||void 0===f||null===(P=f.documents)||void 0===P?void 0:P.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes("ADDRESSPROOF")});var de,se,ce,pe,me,ve,Ee,_e,Te,ye,Se,fe,Pe,ge,Ne,Ae,Oe,Ie,he,Re,be,De,Le,Me,we,xe,Ue,Be,He,Ye,We,je,Ke,Ve,Ge;if(ke(ue)&&(ue[0].documentType={code:null===(de=ue[0])||void 0===de?void 0:de.documentType,i18nKey:Fe(null===(se=ue[0])||void 0===se?void 0:se.documentType,".","_")}),e.documents||(e={...e,documents:[]}),null!==(g=e)&&void 0!==g&&null!==(N=g.address)&&void 0!==N&&N.documents?e.address.documents.ProofOfAddress=ue[0]:(e.address.documents=[],e.address.documents.ProofOfAddress=ue&&Array.isArray(ue)&&ue.length>0&&ue[0]),e.documents.ProofOfAddress=ue&&Array.isArray(ue)&&ue.length>0&&ue[0],"CFC_COUNTER"===(null===(A=e)||void 0===A?void 0:A.channel)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(O=e)||void 0===O?void 0:O.PropertyType)&&0==e.units.length||0==(null===(I=e)||void 0===I||null===(h=I.additionalDetails)||void 0===h?void 0:h.isRainwaterHarvesting)){if("VACANT"===(null===(ce=e)||void 0===ce?void 0:ce.propertyType))e.PropertyType={code:null===(ve=e)||void 0===ve?void 0:ve.propertyType,i18nKey:"COMMON_PROPTYPE_"+e.propertyType},e.isResdential="RESIDENTIAL"===(null===(Ee=e)||void 0===Ee?void 0:Ee.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(_e=e)||void 0===_e?void 0:_e.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Te=e)||void 0===Te||null===(ye=Te.usageCategory)||void 0===ye?void 0:ye.split(".").pop())},e.landarea={floorarea:null===(Se=e)||void 0===Se?void 0:Se.landArea};else if("BUILTUP.SHAREDPROPERTY"===(null===(pe=e)||void 0===pe?void 0:pe.propertyType)){var ze,Xe,qe,$e,Ze,Qe,Je,et,tt,nt,lt,ot,it,at,rt,ut,dt,st,ct,pt;let t=[],n=!1,l=!1,o=!1;e.isResdential="RESIDENTIAL"===(null===(ze=e)||void 0===ze?void 0:ze.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(Xe=e)||void 0===Xe?void 0:Xe.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(qe=e)||void 0===qe||null===($e=qe.usageCategory)||void 0===$e?void 0:$e.split(".").pop())},e.PropertyType={code:null===(Ze=e)||void 0===Ze?void 0:Ze.propertyType,i18nKey:"COMMON_PROPTYPE_BUILTUP_"+e.propertyType.split(".").pop()},e.Floorno=(null===(Qe=e)||void 0===Qe||null===(Je=Qe.units[0])||void 0===Je?void 0:Je.floorNo)<0?{i18nKey:"PROPERTYTAX_FLOOR__"+-1*(null===(et=e)||void 0===et||null===(tt=et.units[0])||void 0===tt?void 0:tt.floorNo)}:{i18nKey:"PROPERTYTAX_FLOOR_"+(null===(nt=e)||void 0===nt||null===(lt=nt.units[0])||void 0===lt?void 0:lt.floorNo)},e.Subusagetypeofrentedarea={SubUsageTypeOfRentedArea:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null===(ot=e)||void 0===ot||null===(it=ot.units[0])||void 0===it?void 0:it.usageCategory.slice(0,null===(at=e)||void 0===at||null===(rt=at.units[0])||void 0===rt?void 0:rt.usageCategory.lastIndexOf(".")).replaceAll(".","_"))},Subusagetypeofrentedareacode:null===(ut=e)||void 0===ut||null===(dt=ut.units[0])||void 0===dt?void 0:dt.usageCategory},(null===(st=e)||void 0===st?void 0:st.units)&&(null===(ct=e)||void 0===ct||ct.units.map((i,a)=>{var r,u,d,s,c,p;if("RENTED"===(null==i?void 0:i.occupancyType)&&1==l&&i.floorNo==(null===(r=e)||void 0===r?void 0:r.units[0].floorNo)||"UNOCCUPIED"===(null==i?void 0:i.occupancyType)&&1==o&&i.floorNo==(null===(u=e)||void 0===u?void 0:u.units[0].floorNo)||"SELFOCCUPIED"===(null==i?void 0:i.occupancyType)&&1==n&&i.floorNo==(null===(d=e)||void 0===d?void 0:d.units[0].floorNo))t.includes(i)||t.push(i);else if("RENTED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(s=e)||void 0===s?void 0:s.units[0].floorNo)){var m;l=!0,e.Constructiondetails={RentArea:null==i||null===(m=i.constructionDetail)||void 0===m?void 0:m.builtUpArea,AnnualRent:null==i?void 0:i.arv},e.Subusagetypeofrentedarea={SubUsageTypeOfRentedArea:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null==i?void 0:i.usageCategory.slice(0,null==i?void 0:i.usageCategory.lastIndexOf(".")).replaceAll(".","_"))},Subusagetypeofrentedareacode:null==i?void 0:i.usageCategory}}else if("UNOCCUPIED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(c=e)||void 0===c?void 0:c.units[0].floorNo)){var v;o=!0,e.UnOccupiedArea={UnOccupiedArea:null==i||null===(v=i.constructionDetail)||void 0===v?void 0:v.builtUpArea}}else if("SELFOCCUPIED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(p=e)||void 0===p?void 0:p.units[0].floorNo)){var E;n=!0,e.landarea={floorarea:null==i||null===(E=i.constructionDetail)||void 0===E?void 0:E.builtUpArea},e.subusagetype={SubUsageType:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null==i?void 0:i.usageCategory.slice(0,null==i?void 0:i.usageCategory.lastIndexOf(".")).replaceAll(".","_"))}}}else t.includes(i)||t.push(i)})),e.selfOccupied=1==l?1==n?{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"},e.IsAnyPartOfThisFloorUnOccupied=1==o?{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"}:{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"},e.floordetails={plotSize:null===(pt=e)||void 0===pt?void 0:pt.landArea,builtUpArea:Ce(e)},e.extraunitFPB=t}else if("BUILTUP.INDEPENDENTPROPERTY"===(null===(me=e)||void 0===me?void 0:me.propertyType)){var mt,vt,Et,_t,Tt,yt,St,ft,Pt;e.landArea={floorarea:null===(mt=e)||void 0===mt?void 0:mt.landArea},e.isResdential="RESIDENTIAL"===(null===(vt=e)||void 0===vt?void 0:vt.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(Et=e)||void 0===Et?void 0:Et.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(_t=e)||void 0===_t||null===(Tt=_t.usageCategory)||void 0===Tt?void 0:Tt.split(".").pop())},e.PropertyType={code:null===(yt=e)||void 0===yt?void 0:yt.propertyType,i18nKey:"COMMON_PROPTYPE_BUILTUP_"+e.propertyType.split(".").pop()};let t,n=[],l={},o=[],i=[];e.units&&e.units.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1}),(null===(St=e)||void 0===St?void 0:St.units)&&(null===(ft=e)||void 0===ft||ft.units.map((a,r)=>{l={},0==a.floorNo||1==a.floorNo||2==a.floorNo||-1==a.floorNo||-2==a.floorNo?(t=a.floorNo,l=((e,t,n,l,o)=>{let i=0,a=!1,r=!1,u=!1;return t.plotSize=""+(null==e?void 0:e.landArea),(null==e?void 0:e.units)&&(null==e||e.units.map((e,d)=>{if((null==e?void 0:e.floorNo)==n&&("RENTED"===(null==e?void 0:e.occupancyType)&&1==r||"UNOCCUPIED"===(null==e?void 0:e.occupancyType)&&1==u||"SELFOCCUPIED"===(null==e?void 0:e.occupancyType)&&1==a||n>o.length))l.includes(e)||l.push(e);else if((null==e?void 0:e.floorNo)==n&&"RENTED"===(null==e?void 0:e.occupancyType)){var s,c;r=!0,t.AnnualRent=""+e.arv||"",t.RentArea=""+(null==e||null===(s=e.constructionDetail)||void 0===s?void 0:s.builtUpArea),t.SubUsageTypeOfRentedArea={i18nKey:"COMMON_PROPSUBUSGTYPE_"+(e.usageCategory.split(".")[0]+"_"+e.usageCategory.split(".")[1]+"_"+e.usageCategory.split(".").pop()).replaceAll(".","_"),Subusagetypeofrentedareacode:e.usageCategory},i+=parseInt(null==e||null===(c=e.constructionDetail)||void 0===c?void 0:c.builtUpArea)}else if((null==e?void 0:e.floorNo)==n&&"UNOCCUPIED"===(null==e?void 0:e.occupancyType)){var p,m;u=!0,t.UnOccupiedArea=""+(null==e||null===(p=e.constructionDetail)||void 0===p?void 0:p.builtUpArea),i+=parseInt(null==e||null===(m=e.constructionDetail)||void 0===m?void 0:m.builtUpArea)}else if((null==e?void 0:e.floorNo)==n&&"SELFOCCUPIED"===(null==e?void 0:e.occupancyType)){var v,E;a=!0,t.floorarea=""+(null==e||null===(v=e.constructionDetail)||void 0===v?void 0:v.builtUpArea),t.SubUsageType={i18nKey:"COMMON_PROPSUBUSGTYPE_"+(e.usageCategory.split(".")[0]+"_"+e.usageCategory.split(".")[1]+"_"+e.usageCategory.split(".").pop()).replaceAll(".","_")},i+=parseInt(null==e||null===(E=e.constructionDetail)||void 0===E?void 0:E.builtUpArea)}})),t.selfOccupied=1==u&&0==r&&0==a?"":1==r?1==a?{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"},t.IsAnyPartOfThisFloorUnOccupied=1==u?{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"}:{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"},t.builtUpArea=""+i,t})(e,l,t,i,n),""==l.selfOccupied&&i.push(a)):i.push(a),l=={}&&i.push(a),!o.includes(a.floorNo)&&l.builtUpArea>0&&a.floorNo>-1&&a.floorNo<3&&""!==l.selfOccupied&&l!={}&&n.push(l),-1==a.floorNo&&l!={}&&""!==l.selfOccupied&&l.builtUpArea>0&&(n[-1]=l),n[-1]&&-2==a.floorNo&&!i.includes(a)?-2==a.floorNo&&l!={}&&""!==l.selfOccupied&&l.builtUpArea>0&&(n[-2]=l):n[-1]||-2!=a.floorNo||i.includes(a)||i.push(a),o.push(t)})),e.noOfFloors=3==n.length?{i18nKey:"PT_GROUND_PLUS_TWO_OPTION",code:2}:2==n.length?{i18nKey:"PT_GROUND_PLUS_ONE_OPTION",code:1}:{i18nKey:"PT_GROUND_FLOOR_OPTION",code:0},e.noOofBasements=n[-2]?{i18nKey:"PT_TWO_BASEMENT_OPTION",code:2}:n[-1]?{i18nKey:"PT_ONE_BASEMENT_OPTION",code:1}:{i18nKey:"PT_NO_BASEMENT_OPTION",code:0},e.units=null===(Pt=e)||void 0===Pt?void 0:Pt.units.map(e=>{var t,n,l,o;return{...e,unitType:{code:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?null==e?void 0:e.usageCategory:null==e||null===(t=e.usageCategory)||void 0===t?void 0:t.split(".")[3],i18nKey:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.usageCategory):"PROPERTYTAX_BILLING_SLAB_"+(null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.split(".")[3]),usageCategoryMinor:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"":null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.split(".")[1],usageCategorySubMinor:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"":null==e||null===(o=e.usageCategory)||void 0===o?void 0:o.split(".")[2]}}})}}else if("VACANT"===(null===(fe=e)||void 0===fe||null===(Pe=fe.additionalDetails)||void 0===Pe||null===(ge=Pe.propertyType)||void 0===ge?void 0:ge.code)||"VACANT"===(null===(Ne=e)||void 0===Ne||null===(Ae=Ne.propertyType)||void 0===Ae?void 0:Ae.code))e.PropertyType=null===(Be=e)||void 0===Be||null===(He=Be.additionalDetails)||void 0===He?void 0:He.propertyType,e.isResdential=null===(Ye=e)||void 0===Ye||null===(We=Ye.additionalDetails)||void 0===We?void 0:We.isResdential,e.usageCategoryMajor={code:null===(je=e)||void 0===je?void 0:je.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Ke=e)||void 0===Ke||null===(Ve=Ke.usageCategory)||void 0===Ve?void 0:Ve.split(".").pop())},e.landarea={floorarea:null===(Ge=e)||void 0===Ge?void 0:Ge.landArea};else if("BUILTUP.SHAREDPROPERTY"===(null===(Oe=e)||void 0===Oe||null===(Ie=Oe.additionalDetails)||void 0===Ie||null===(he=Ie.propertyType)||void 0===he?void 0:he.code)||"BUILTUP.SHAREDPROPERTY"===(null===(Re=e)||void 0===Re||null===(be=Re.propertyType)||void 0===be?void 0:be.code)){var gt,Nt,At,Ot,It,ht,Ct,Rt,bt,Dt,Lt,Mt,wt,xt,Ut,Ft,Bt,kt,Ht,Yt,Wt,jt,Kt,Vt,Gt,zt;e.isResdential=null===(gt=e)||void 0===gt||null===(Nt=gt.additionalDetails)||void 0===Nt?void 0:Nt.isResdential,e.usageCategoryMajor={code:null===(At=e)||void 0===At?void 0:At.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Ot=e)||void 0===Ot||null===(It=Ot.usageCategory)||void 0===It?void 0:It.split(".").pop())},e.PropertyType=null===(ht=e)||void 0===ht||null===(Ct=ht.additionalDetails)||void 0===Ct?void 0:Ct.propertyType,e.Floorno=(null===(Rt=e)||void 0===Rt||null===(bt=Rt.units[0])||void 0===bt?void 0:bt.floorNo)<0?{i18nKey:"PROPERTYTAX_FLOOR__"+-1*(null===(Dt=e)||void 0===Dt||null===(Lt=Dt.units[0])||void 0===Lt?void 0:Lt.floorNo)}:{i18nKey:"PROPERTYTAX_FLOOR_"+(null===(Mt=e)||void 0===Mt||null===(wt=Mt.units[0])||void 0===wt?void 0:wt.floorNo)},e.selfOccupied=null===(xt=e)||void 0===xt||null===(Ut=xt.additionalDetails)||void 0===Ut?void 0:Ut.selfOccupied,e.Subusagetypeofrentedarea=null===(Ft=e)||void 0===Ft||null===(Bt=Ft.additionalDetails)||void 0===Bt?void 0:Bt.Subusagetypeofrentedarea,e.subusagetype=null===(kt=e)||void 0===kt||null===(Ht=kt.additionalDetails)||void 0===Ht?void 0:Ht.subusagetype,e.IsAnyPartOfThisFloorUnOccupied=null===(Yt=e)||void 0===Yt||null===(Wt=Yt.additionalDetails)||void 0===Wt?void 0:Wt.IsAnyPartOfThisFloorUnOccupied,(null===(jt=e)||void 0===jt?void 0:jt.units)&&(null===(Kt=e)||void 0===Kt||Kt.units.map((t,n)=>{var l;if("RENTED"===(null==t?void 0:t.occupancyType))e.Constructiondetails={RentArea:null==t||null===(l=t.constructionDetail)||void 0===l?void 0:l.builtUpArea,AnnualRent:null==t?void 0:t.arv};else if("UNOCCUPIED"===(null==t?void 0:t.occupancyType)){var o;e.UnOccupiedArea={UnOccupiedArea:null==t||null===(o=t.constructionDetail)||void 0===o?void 0:o.builtUpArea}}else if("SELFOCCUPIED"===(null==t?void 0:t.occupancyType)){var i;e.landarea={floorarea:null==t||null===(i=t.constructionDetail)||void 0===i?void 0:i.builtUpArea}}})),e.floordetails={plotSize:null===(Vt=e)||void 0===Vt?void 0:Vt.landArea,builtUpArea:null===(Gt=e)||void 0===Gt||null===(zt=Gt.additionalDetails)||void 0===zt?void 0:zt.builtUpArea}}else if("BUILTUP.INDEPENDENTPROPERTY"===(null===(De=e)||void 0===De||null===(Le=De.additionalDetails)||void 0===Le||null===(Me=Le.propertyType)||void 0===Me?void 0:Me.code)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(we=e)||void 0===we||null===(xe=we.propertyType)||void 0===xe?void 0:xe.code)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(Ue=e)||void 0===Ue?void 0:Ue.propertyType)){var Xt,qt,$t,Zt,Qt,Jt,en,tn,nn,ln,on,an,rn,un,dn,sn,cn,pn,mn,vn,En,_n,Tn;e.isResdential=null===(Xt=e)||void 0===Xt||null===(qt=Xt.additionalDetails)||void 0===qt?void 0:qt.isResdential,e.usageCategoryMajor={code:null===($t=e)||void 0===$t?void 0:$t.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Zt=e)||void 0===Zt||null===(Qt=Zt.usageCategory)||void 0===Qt?void 0:Qt.split(".").pop())},e.PropertyType=(null===(Jt=e)||void 0===Jt||null===(en=Jt.additionalDetails)||void 0===en?void 0:en.propertyType)||(null===(tn=e)||void 0===tn?void 0:tn.propertyType),e.noOfFloors=(null===(nn=e)||void 0===nn||null===(ln=nn.additionalDetails)||void 0===ln?void 0:ln.noOfFloors)||(null===(on=e)||void 0===on?void 0:on.noOfFloors),e.noOofBasements=null===(an=e)||void 0===an||null===(rn=an.additionalDetails)||void 0===rn?void 0:rn.noOofBasements,e.units=null===(un=e)||void 0===un||null===(dn=un.additionalDetails)||void 0===dn?void 0:dn.unit,e.units[0].selfOccupied=null===(sn=e)||void 0===sn||null===(cn=sn.additionalDetails)||void 0===cn||null===(pn=cn.unit[0])||void 0===pn?void 0:pn.selfOccupied,e.units[-1]=null===(mn=e)||void 0===mn||null===(vn=mn.additionalDetails)||void 0===vn?void 0:vn.basement1,e.units[-2]=null===(En=e)||void 0===En||null===(_n=En.additionalDetails)||void 0===_n?void 0:_n.basement2,e.landArea={floorarea:null===(Tn=e)||void 0===Tn?void 0:Tn.landArea}}return e}(O);console.log("propertyEditDetails",e),y({...T,...e})}},[R]);const D=()=>{},L=()=>{};if(g||C)return l.createElement(t.Loader,null);P=Lt,P.forEach(e=>{_=_.concat(e.body.filter(e=>!e.hideInCitizen))}),_.indexRoute="info";const M=null===(a=Digit)||void 0===a||null===(u=a.ComponentRegistryService)||void 0===u?void 0:u.getComponent("PTCheckPage"),w=null===(d=Digit)||void 0===d||null===(s=d.ComponentRegistryService)||void 0===s?void 0:s.getComponent("PTAcknowledgement");return l.createElement(i.Switch,null,_.map((e,t)=>{const{component:n,texts:o,inputs:a,key:r}=e,u="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:p.path+"/"+e.route,key:t},l.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:b,onSkip:D,t:m,formData:T,onAdd:L}))}),l.createElement(i.Route,{path:p.path+"/check"},l.createElement(M,{onSubmit:function(){try{return E.push(p.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:T})),l.createElement(i.Route,{path:p.path+"/acknowledgement"},l.createElement(w,{data:T,onSuccess:()=>{S(),c.invalidateQueries("PT_CREATE_PROPERTY"),sessionStorage.setItem("propertyInitialObject",JSON.stringify({})),sessionStorage.setItem("pt-property",JSON.stringify({}))}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:p.path+"/"+_.indexRoute})))},PTMutateProperty:e=>{var t,a;const{t:r}=o.useTranslation(),u=i.useRouteMatch(),{pathname:d}=i.useLocation(),[s,c,p]=Digit.Hooks.useSessionStorage("PT_MUTATE_PROPERTY",{}),m=i.useHistory(),[v,E]=n.useState(!1),[_,T]=n.useState(null),{data:y}=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","MutationDocuments"));let S=[];function f(e,t,n,l,o,i){let a=d.split("/"),r=a.pop();if(null!=i&&i.nesting)for(let e=0;e<(null==i?void 0:i.nesting);e++)r=a.pop();let u=S.filter(e=>e.route===r)[0];((e,t)=>{c(n=>({...n,[e]:t}))})(e,t);let{queryParams:s}=i||{},p=s?"?"+Object.keys(s).map(e=>e+"="+s[e]).join("&"):"";if(u.nextStep){if("string"==typeof u.nextStep)n?m.replace(a.join("/")+"/"+u.nextStep+p):m.push(a.join("/")+"/"+u.nextStep+p);else if("object"==typeof u.nextStep){let e=u.nextStep[null==i?void 0:i.routeKey];n?m.replace(a.join("/")+"/"+e+p):m.push(a.join("/")+"/"+e+p)}}else E(!0)}Un.forEach(e=>{S=S.concat(e.body.filter(e=>!e.hideInCitizen))}),n.useEffect(()=>{v&&P()},[v]);const P=()=>{var e,t,n,l;const o=s.searchResult.property,{additionalDetails:i,ownershipCategory:a,addressProof:r,transferReasonProof:u}=s,d=null!=a&&a.code.includes("INDIVIDUAL")?s.Owners:s.owners,c=[...d.map(e=>Object.keys(e.documents).map(t=>{const{documentType:n,fileStoreId:l}=e.documents[t];return{documentType:n.code,fileStoreId:l}})).flat(),...[r,u].map((e,t)=>{const{documentType:n,fileStoreId:l}=e;return{documentType:1===t?n.code.split(".")[2]:n.code,fileStoreId:l}})];o.owners=null==o?void 0:o.owners.filter(e=>"ACTIVE"==e.status);const p={Property:{...s.searchResult.property,creationReason:"MUTATION",owners:[...null===(e=o.owners)||void 0===e?void 0:e.map(e=>({...e,status:"INACTIVE"})),...d.map((e,t)=>{var n,l,o,i;return{...e,additionalDetails:{ownerSequence:t,ownerName:null==e?void 0:e.name},documents:Object.keys(e.documents).map(t=>{const{documentType:n,fileStoreId:l}=e.documents[t];return{documentType:n.code,fileStoreId:l}}),gender:null===(n=e.gender)||void 0===n?void 0:n.code,ownerType:(null===(l=e.ownerType)||void 0===l?void 0:l.code)||"NONE",relationship:null===(o=e.relationship)||void 0===o?void 0:o.code,inistitutetype:null==e||null===(i=e.inistitutetype)||void 0===i?void 0:i.value,landlineNumber:null==e?void 0:e.altContactNumber,status:"ACTIVE"}})],additionalDetails:{...i,isMutationInCourt:null===(t=i.isMutationInCourt)||void 0===t?void 0:t.code,reasonForTransfer:null==i?void 0:i.reasonForTransfer.code,isPropertyUnderGovtPossession:i.isPropertyUnderGovtPossession.code,documentDate:new Date(null==i?void 0:i.documentDate).getTime(),marketValue:Number(null==i?void 0:i.marketValue)},ownershipCategory:a.code,documents:[...null!=o&&o.documents&&(null==o||null===(n=o.documents)||void 0===n?void 0:n.length)>0?null==o||null===(l=o.documents)||void 0===l?void 0:l.map(e=>{var t;return null!=y&&null!==(t=y.PropertyTax)&&void 0!==t&&t.MutationDocuments.some(t=>e.documentType.includes(t.code))?{...e,status:"INACTIVE"}:e}):[],...c],workflow:{action:"OPEN",businessService:"PT.MUTATION",moduleName:"PT",tenantId:o.tenantId}}};var m,v,E;null!=a&&a.code.includes("INDIVIDUAL")?delete p.Property.institution:(p.Property.institution={nameOfAuthorizedPerson:d[0].name,name:d[0].inistitutionName,designation:d[0].designation,tenantId:null==p||null===(m=p.Property)||void 0===m?void 0:m.address.tenantId,type:null===(v=d[0].inistitutetype)||void 0===v?void 0:v.value},p.Property.owners=null===(E=p.Property.owners)||void 0===E?void 0:E.map(e=>"INACTIVE"===e.status?{...e,altContactNumber:d[0].altContactNumber}:e)),T(p)};n.useEffect(()=>{_&&m.push(u.path+"/check")},[_]);const g=()=>{};S.indexRoute="search-property";const N=null===(t=Digit)||void 0===t||null===(a=t.ComponentRegistryService)||void 0===a?void 0:a.getComponent("PTAcknowledgement");return l.createElement(l.Fragment,null,l.createElement(i.Switch,null,S.map((e,t)=>{const{component:n}=e,o="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:u.path+"/"+e.route,key:t},o?l.createElement(o,{config:e,onSelect:f,onSkip:g,t:r,formData:s,clearParams:()=>p()}):l.createElement("div",null,"Component not found"))}),l.createElement(i.Route,{path:u.path+"/check"},l.createElement(Fn,{onSubmit:()=>{m.push(u.path+"/acknowledgement")},value:s})),l.createElement(i.Route,{path:u.path+"/acknowledgement"},l.createElement(N,{data:_,onSuccess:()=>{p(),T(null)}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:u.path+"/"+S.indexRoute}))))},SelectOtp:e=>{let{config:o,otp:i,onOtpChange:a,onResend:r,onSelect:u,t:d,error:s,userType:c="citizen",canSubmit:p}=e;const[m,v]=n.useState(30),E={type:"register"},_={type:"login"},[T,y]=n.useState(!1);!function(e,t){const l=n.useRef();n.useEffect(()=>{l.current=e},[e]),n.useEffect(()=>{if(null!==t){const e=setInterval(function(){l.current()},t);return()=>clearInterval(e)}},[t])}(()=>{v(m-1)},m>0?1e3:null),n.useEffect(function(){try{const e=function(){if(window.location.href.includes("code")){let e=window.location.href.split("=")[1].split("&")[0],t={code_verifier:sessionStorage.getItem("code_verfier_register"),code:e,module:"REGISTER",redirect_uri:"https://upyog.niua.org/digit-ui/citizen/login/otp"};return console.log("token",e,t,sessionStorage.getItem("code_verfier_register")),Promise.resolve(Digit.DigiLockerService.token({TokenReq:t})).then(function(e){S(e)})}window.location.href.includes("error=")&&(console.log("errrrrorrrrr"),window.location.href=window.location.href.split("/otp")[0])}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[]);const S=function(e){try{console.log("registerUser",e);const t={dob:(null==e?void 0:e.dob.substring(0,2))+"/"+(null==e?void 0:e.dob.substring(2,4))+"/"+(null==e?void 0:e.dob.substring(4,8)),mobileNumber:e.mobile,name:e.name,tenantId:"pg",userType:Digit.UserService.getType()};return Promise.resolve(P({otp:{...t,...E}})).then(function(n){let[l,o]=n;return function(){if(o)return Promise.resolve(P({otp:{...t,..._}})).then(function(t){let[n,l]=t;sessionStorage.setItem("userName",e.mobile)});history.replace(path+"/otp",{from:getFromLocation(location.state,searchParams)})}()})}catch(e){return Promise.reject(e)}},f=()=>{r(),v(2)},P=function(e){return Promise.resolve(Ee(function(){return Promise.resolve(Digit.UserService.sendOtp(e,"pg")).then(function(e){return[e,null]})},function(e){return[null,e]}))};return"employee"===c?l.createElement(n.Fragment,null,l.createElement(t.OTPInput,{length:6,onChange:a,value:i}),m>0?l.createElement(t.CardText,null,d("CS_RESEND_ANOTHER_OTP")+" "+m+" "+d("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:f},d("CS_RESEND_OTP")),!s&&l.createElement(t.CardLabelError,null,d("CS_INVALID_OTP"))):l.createElement(t.FormStep,{onSelect:u,config:o,t:d,isDisabled:!(6===(null==i?void 0:i.length)&&p)},l.createElement(t.OTPInput,{length:6,onChange:a,value:i}),m>0?l.createElement(t.CardText,null,d("CS_RESEND_ANOTHER_OTP")+" "+m+" "+d("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:f},d("CS_RESEND_OTP")),!s&&l.createElement(t.CardLabelError,null,d("CS_INVALID_OTP")),T&&l.createElement(t.CardLabelError,null,d("CS_ALREADY_REGISTERED")))},AcknowledgementCF:e=>{var n,a,r,u,d,s,c,p,m;const{t:v}=o.useTranslation(),E=(Digit.ULBService.getCurrentTenantId(),i.useLocation()),_=(Digit.Hooks.useStore.getInitData(),window.Digit.Utils.browser.isMobile());return l.createElement("form",null,l.createElement(t.Card,{style:_?{padding:"unset"}:{}},l.createElement(ma,{t:v,data:E.state,isSuccess:!(null===(n=E.state)||void 0===n||null===(a=n.result)||void 0===a||null===(r=a.Service)||void 0===r||!r[0]),isMobile:_,isLoading:!1}),(null===(u=E.state)||void 0===u||null===(d=u.result)||void 0===d||null===(s=d.Service)||void 0===s?void 0:s[0])&&l.createElement(t.CardText,{style:{padding:"0px 10px 0px 10px"}},v("CS_CF_FEEDBACK_RESPONSE")),!(null!==(c=E.state)&&void 0!==c&&null!==(p=c.result)&&void 0!==p&&null!==(m=p.Service)&&void 0!==m&&m[0])&&l.createElement(t.CardText,null,v("CS_FILE_PROPERTY_FAILED_RESPONSE")),l.createElement("div",{style:{padding:"0px 10px 20px 10px"}},l.createElement(i.Link,{to:"/digit-ui/citizen"},l.createElement(t.SubmitBar,{label:v("CS_COMMON_GO_BACK_TO_HOME")})))))},CitizenFeedback:e=>{var a,r,u,d;let{popup:s=!1,onClose:c,setShowToast:p,data:m}=e;const{t:v}=o.useTranslation(),E=i.useHistory(),_=Digit.UserService.getUser();let{redirectedFrom:T,propertyId:y,acknowldgementNumber:S,creationReason:f,tenantId:P,locality:g}=Digit.Hooks.useQueryParams();const N=window.Digit.Utils.browser.isMobile();P=P||Digit.ULBService.getCurrentTenantId();const A=Digit.ULBService.getStateId(),{data:O,isLoading:I}=Digit.Hooks.pt.useRatingAndFeedbackMDMS.RatingAndFeedBack(A),[h,C]=n.useState(""),[R,b]=n.useState(0);if(I)return l.createElement(t.Loader,null);const D=e=>{var t,n;let l=null==O||null===(t=O.enabledScreensList)||void 0===t||null===(n=t.filter(e=>{var t,n,l;return"PT"===(null==e?void 0:e.module)&&((null==T?void 0:T.includes(null==e?void 0:e.screenfrom))||(null==e||null===(t=e.bussinessService)||void 0===t?void 0:t.includes(null==m||null===(n=m.Properties)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.creationReason)))}))||void 0===n?void 0:n[0];return"Header"===e?null==l?void 0:l.cardHeader:"Text"===e?null==l?void 0:l.cardText:void 0};return l.createElement(l.Fragment,null,l.createElement("form",null,l.createElement(t.Card,null,l.createElement("div",{style:s?{display:"flex",justifyContent:"space-between"}:{}},l.createElement(t.CardHeader,null,v(D("Header"))||v("PT_RATE_HELP_TEXT")),s&&l.createElement("span",{style:{marginTop:"8px"},onClick:()=>c(!1)},l.createElement(t.CloseSvg,null))),l.createElement(t.CardText,null,v(D("Text"),{acknowldgementNumber:S||(null==m||null===(a=m.Properties)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.acknowldgementNumber),propertyId:y||(null==m||null===(u=m.Properties)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.propertyId)})||v("PT_RATE_TEXT")),l.createElement(t.Rating,{styles:{justifyContent:"center"},currentRating:R,maxRating:5,onFeedback:(e,t,n)=>{b(n)}}),0!==R&&l.createElement("div",null,l.createElement(t.CardLabel,null,v((null==O||null===(L=O.headerByRating)||void 0===L||null===(M=L.filter(e=>R>=(null==e?void 0:e.minvalue)&&R<=(null==e?void 0:e.maxvalue)))||void 0===M||null===(w=M[0])||void 0===w?void 0:w.code)||v("CS_WHAT_WENT_WRONG"))),l.createElement(t.TextArea,{name:"",minLength:"64",onChange:e=>{C(e.target.value)}}),h&&(null==h?void 0:h.length)<64&&l.createElement(t.CardLabelError,{style:{marginTop:"-20px",marginBottom:"25px"}},v("CS_MIN_LENGTH_64"))),l.createElement(t.SubmitBar,{label:v("PT_SUBMIT"),onSubmit:()=>{var e,t,n,l;let o={},i={tenantId:(null==m||null===(e=m.Properties)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.tenantId)||P,code:["PT_"+(null!=T&&T.includes("payment")?"PAYMENT":f||(null==m||null===(n=m.Properties)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.creationReason))],module:["PT"]};Digit.PTService.cfdefinitionsearch({filters:{ServiceDefinitionCriteria:i}}).then((e,t)=>{var n,l,i,a,r,u,d,v,T,f,N,A,O,I;(null==e||null===(n=e.ServiceDefinition)||void 0===n?void 0:n.length)>0&&(o={tenantId:(null==m||null===(l=m.Properties)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.tenantId)||P,serviceDefId:null==e||null===(a=e.ServiceDefinition)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.id,isActive:!0,attributes:[{attributeCode:"consumerCode",value:y||(null==m||null===(u=m.Properties)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.propertyId),additionalDetails:{}},{attributeCode:"rating",value:R,additionalDetails:{}},{attributeCode:"comments",value:h,additionalDetails:{}},{attributeCode:"channel",value:"Online",additionalDetails:{}}],additionalDetails:{locality:g||(null==m||null===(v=m.Properties)||void 0===v||null===(T=v[0])||void 0===T||null===(f=T.address)||void 0===f||null===(N=f.locality)||void 0===N?void 0:N.code)||""},accountId:null==_||null===(A=_.info)||void 0===A?void 0:A.uuid},o={...o,referenceId:S||(null==m||null===(O=m.Properties)||void 0===O||null===(I=O[0])||void 0===I?void 0:I.acknowldgementNumber)},Digit.PTService.cfcreate({Service:{...o}},P).then((e,t)=>{var n;(null==e||null===(n=e.Service)||void 0===n?void 0:n.length)>0&&(s?(c(!1),p({key:!1,label:"PT_FEEDBACK_SUBMITTED_SUCCESSFULLY"})):E.push({pathname:"/digit-ui/citizen/feedback-acknowledgement",state:{rating:R,comment:h,result:e}}))}).catch(e=>{var t,n,l;p({key:"error",label:""+(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(l=n.Errors[0])||void 0===l?void 0:l.message)})}))})},disabled:!!(h&&(null==h?void 0:h.length)<64)||!R}),!s&&l.createElement("div",{className:"link",style:N?{marginTop:"8px",width:"100%",textAlign:"center"}:{marginTop:"8px"}},l.createElement(i.Link,{to:"/digit-ui/citizen"},v("CS_GO_BACK_HOME"))))));var L,M,w},PTSelectLandmark:e=>{var o;let{t:i,config:a,onSelect:r,formData:u,userType:s}=e;const[p,m]=n.useState(),[v,E]=n.useState(""),_=[{label:"ES_NEW_APPLICATION_LOCATION_LANDMARK",type:"textarea",name:"landmark",validation:{maxLength:1024}}];function T(e){e.target.value.length>1024?E("CS_COMMON_LANDMARK_MAX_LENGTH"):(E(null),m(e.target.value),"employee"===s&&r(a.key,{...u[a.key],landmark:e.target.value}))}return n.useEffect(()=>{var e;m(null==u||null===(e=u.address)||void 0===e?void 0:e.landmark)},[null==u||null===(o=u.address)||void 0===o?void 0:o.landmark]),"employee"===s?null==_?void 0:_.map((e,n)=>l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},i(e.label),a.isMandatory?" * ":null),l.createElement(t.TextArea,d({className:"form-field",id:e.name,value:p,onChange:T,name:e.name||""},e.validation)))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(c,{currentStep:1}):null,l.createElement(t.FormStep,{config:{...a,inputs:_},value:p,onChange:T,onSelect:e=>r(a.key,{...u[a.key],...e}),onSkip:()=>r(),t:i,forcedError:i(v)}))},SearchPTIDProp:e=>{var o,a,u,d;let{tenantId:s,t:c,payload:p,showToast:m,setShowToast:v,ptSearchConfig:E}=e;i.useHistory();const[_,T]=n.useState({...p}),[y,S]=n.useState(!1),[f,P]=n.useState(!1),[g,N]=n.useState(null),[A,O]=n.useState(0),[I,h]=n.useState(!1),[C,R]=n.useState([]);console.log("payload",p);let b={...p,isDefaulterNoticeSearch:!0};const D=s?{tenantId:s,filters:b}:{filters:b},{isLoading:L,data:M}=r.useQuery(["propertySearchList",s,b],()=>Digit.PTService.search(D)),w=(Digit.Hooks.pt.usePropertyAPI(s,!1),null===(o=Digit)||void 0===o||null===(a=o.ComponentRegistryService)||void 0===a||a.getComponent("EmployeeUpdateOwnerNumber"),Digit.Hooks.useCommonMDMSV2(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1}),n.useMemo(()=>[{Header:c("PT_COMMON_TABLE_COL_PT_ID"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/ptsearch/property-details/"+t.original.propertyId},t.original.propertyId)))}},{Header:c("PT_COMMON_TABLE_COL_OWNER_NAME"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return Bn(""+t.original.owners.map(e=>e.name).join(",")||"")}},{Header:c("PT_COMMON_TABLE_COL_STATUS_LABEL"),Cell:e=>{var t;let{row:n}=e;return Bn(c((null==n||null===(t=n.original)||void 0===t?void 0:t.status)||"NA"))},disableSortBy:!0},{Header:c("PT_AMOUNT_DUE"),Cell:e=>{var t,n;let{row:l}=e;return Bn(null!=l&&null!==(t=l.original)&&void 0!==t&&t.dueAmount?"₹ "+(null==l||null===(n=l.original)||void 0===n?void 0:n.dueAmount):c("PT_NA"))},disableSortBy:!0},{Header:c("PT_AMOUNT_YEAR"),Cell:e=>{var t,n;let{row:l}=e;return Bn(null!=l&&null!==(t=l.original)&&void 0!==t&&t.dueAmountYear?""+(null==l||null===(n=l.original)||void 0===n?void 0:n.dueAmountYear):c("PT_NA"))},disableSortBy:!0},{Header:c("PT_PROPERTY_TYPE"),Cell:e=>{var t,n;let{row:l}=e;return Bn(null!=l&&null!==(t=l.original)&&void 0!==t&&t.propertyType?""+(null==l||null===(n=l.original)||void 0===n?void 0:n.propertyType):c("PT_NA"))},disableSortBy:!0}],[])),x=n.useMemo(()=>[{Header:c("ES_TOTAL_RECORD"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return Bn(c(t.original.totalrecords)||"")}},{Header:c("ES_TOTAL_RECORD_COMPLETED"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return Bn(c(t.original.recordscompleted)||"")}},{Header:c("ES_TOTAL_RECORD_STATUS"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return Bn(c(t.original.status)||"")}},{Header:c("ES_SEARCH_ACTION"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,Digit.Utils.didEmployeeHasRole("PT_CEMP")?l.createElement("span",{className:"link"},l.createElement("a",{style:{textDecoration:"none"},onClick:()=>U(t.original)},c("ES_PT_COLLECT_TAX"))):null)}}],[]),U=function(e){try{return console.log("document",e),Promise.resolve(Digit.UploadServices.Filefetch([null==e?void 0:e.filestoreid],s)).then(function(t){console.log("ressss",t);let n=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t="");let l=e[t]||"",o=(null==l?void 0:l.split(","))||[],i="";return o.length>0&&o.map(e=>{e.includes("large")||e.includes("medium")||e.includes("small")||(i=e)}),i}(t.data,null==e?void 0:e.filestoreid);window.open(n,"_blank")})}catch(e){return Promise.reject(e)}};let F=window.Digit.Utils.browser.isMobile();if(L)return m&&v(null),l.createElement(t.Loader,null);const B=n.memo(Digit.ComponentRegistryService.getComponent("PTEmptyResultInbox")),k=Object.values((null==M?void 0:M.Properties)||{})||[];if(null!=E&&E.ptSearchCount&&p.locality&&k&&k.length>(null==E?void 0:E.ptSearchCount))return null;const H=Object.values(C||{})||[];return l.createElement(l.Fragment,null,0===(null==M||null===(u=M.Properties)||void 0===u?void 0:u.length)?l.createElement(B,{data:!0}):F?l.createElement(t.DetailsCard,{data:function(e){var t;return void 0===e&&(e=[]),null===(t=e)||void 0===t?void 0:t.map(e=>{const t={};return w.forEach(n=>{n.Cell&&(t[n.Header]=n.Cell({row:{original:e}}))}),t})}(k),t:c}):l.createElement("div",null,l.createElement(t.Table,{t:c,data:k,totalRecords:null==M||null===(d=M.Properties)||void 0===d?void 0:d.length,columns:w,getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),manualPagination:!1,disableSort:!0}),l.createElement("div",{style:{display:"flex",flexDirection:"row-reverse"}},l.createElement("div",{style:{width:"inherit",marginLeft:"10px"}},l.createElement(t.SearchField,{className:"pt-search-action-submit"},l.createElement(t.SubmitBar,{label:c("CS_COMMON_GENERATE_NOTICE"),onSubmit:function(){try{let e;return Promise.resolve(Digit.PTService.generateDefaulterNotice(s,e=Object.values((null==M?void 0:M.Properties)||{}))).then(function(e){v({label:c("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)})})}catch(e){return Promise.reject(e)}}}))),l.createElement("div",{style:{width:"inherit",marginLeft:"10px"}},l.createElement(t.SearchField,{className:"pt-search-action-submit"},l.createElement(t.SubmitBar,{label:c("CS_COMMON_DOWNLOADS"),onSubmit:function(){try{return Promise.resolve(Digit.PTService.getDefaulterNoticeStatus({offset:0,limit:100})).then(function(e){h(!0),R(e.groupBillrecords),console.log("response",e)})}catch(e){return Promise.reject(e)}}})))),I&&l.createElement(t.Table,{t:c,data:H,totalRecords:null==C?void 0:C.length,columns:x,getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),manualPagination:!1,disableSort:!0})))}},Ea=e=>{let{stateCode:t,userType:o,tenants:a}=e;const{path:r,url:u}=i.useRouteMatch(),d=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:t,moduleCode:"PT",language:d}),Object.entries(va).forEach(e=>{let[t,n]=e;Digit.ComponentRegistryService.setComponent(t,n)}),Digit.SessionStorage.set("PT_TENANTS",a),n.useEffect(()=>"employee"===o&&Digit.LocalizationService.getLocale({modules:["rainmaker-"+Digit.ULBService.getCurrentTenantId()],locale:Digit.StoreData.getCurrentLanguage(),tenantId:Digit.ULBService.getCurrentTenantId()}),[]),"employee"===o?l.createElement(Ti,{path:r,url:u,userType:o}):l.createElement(dt,null)},_a=e=>{let{matchPath:i}=e;const{t:a}=o.useTranslation(),[r,u,d]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{});n.useEffect(()=>{d()},[]);const s=[{link:i+"/property/citizen-search",i18nKey:a("PT_SEARCH_AND_PAY")},{link:"/digit-ui/citizen/payment/my-bills/PT",i18nKey:a("CS_TITLE_MY_BILLS")},{link:i+"/property/my-payments",i18nKey:a("PT_MY_PAYMENTS_HEADER")},{link:i+"/property/new-application",i18nKey:a("PT_CREATE_PROPERTY")},{link:i+"/property/my-properties",i18nKey:a("PT_MY_PROPERTIES")},{link:i+"/property/my-applications",i18nKey:a("PT_MY_APPLICATION")},{link:i+"/property/property-mutation",i18nKey:a("PT_PROPERTY_MUTATION")},{link:i+"/howItWorks",i18nKey:a("PT_HOW_IT_WORKS")},{link:i+"/faqs",i18nKey:a("PT_FAQ_S")}];return l.createElement(t.CitizenHomeCard,{header:a("ACTION_TEST_PROPERTY_TAX"),links:s,Icon:()=>l.createElement(t.PTIcon,{className:"fill-path-primary-main"})})};exports.PTComponents={PTCard:()=>{const{t:e}=o.useTranslation(),[i,a]=n.useState("-"),{data:r,isLoading:u,isFetching:d,isSuccess:s}=Digit.Hooks.useNewInboxGeneral({tenantId:Digit.ULBService.getCurrentTenantId(),ModuleCode:"PT",filters:{limit:10,offset:0,services:["PT.CREATE","PT.MUTATION","PT.UPDATE"]},config:{select:e=>({totalCount:null==e?void 0:e.totalCount,nearingSlaCount:null==e?void 0:e.nearingSlaCount}||"-"),enabled:Digit.Utils.ptAccess()}});if(n.useEffect(()=>{!d&&s&&a(r)},[d]),!Digit.Utils.ptAccess())return null;const c=[{count:u?"-":null==i?void 0:i.totalCount,label:e("ES_COMMON_INBOX"),link:"/digit-ui/employee/pt/inbox"},{label:e("ES_TITLE_NEW_REGISTRATION"),link:"/digit-ui/employee/pt/new-application",role:"PT_CEMP"},{label:e("SEARCH_PROPERTY"),link:"/digit-ui/employee/pt/search"},{label:e("ES_COMMON_APPLICATION_SEARCH"),link:"/digit-ui/employee/pt/application-search"}],p=Digit.UserService.hasAccess(["PT_CEMP"])||!1,m={Icon:l.createElement(t.PropertyHouse,null),moduleName:e("ES_TITLE_PROPERTY_TAX"),kpis:[{count:null==i?void 0:i.totalCount,label:e("ES_TITLE_INBOX"),link:"/digit-ui/employee/pt/inbox"},{count:null==i?void 0:i.nearingSlaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/pt/inbox"}],links:c.filter(e=>!(null!=e&&e.role)||p)};return l.createElement(t.EmployeeModuleCard,m)},PTModule:Ea,PTLinks:_a,PT_INBOX_FILTER:e=>l.createElement(fi,e),PTEmptyResultInbox:e=>{const{t:n}=o.useTranslation(),a=i.useHistory();return l.createElement(l.Fragment,null,e.data?l.createElement(l.Fragment,null,l.createElement("div",{style:{textAlign:"center",marginTop:"50px",marginBottom:"24px"}},n("PT_NO_MATCHING_PROPERTY_FOUND")),l.createElement("div",{style:{textAlign:"center"}},l.createElement(t.SubmitBar,{onSubmit:()=>{a.push("/digit-ui/employee/pt/new-application")},label:n("PT_ADD_NEW_PROPERTY_BUTTON")}))):null)},PTInboxTableConfig:e=>({PT:{searchColumns:t=>[{Header:e("ES_INBOX_UNIQUE_PROPERTY_ID"),disableSortBy:!0,Cell:e=>{var n,o,a,r;let{row:u}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:t.parentRoute+"/property-details/"+(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.propertyId)},null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)))},mobileCell:e=>{var t;return Ni(null==e||null===(t=e.searchData)||void 0===t?void 0:t.propertyId)}},{Header:e("ES_INBOX_OWNER_NAME"),disableSortBy:!0,Cell:e=>{var t,n,l;let{row:o}=e;const i=(null===(t=o.original)||void 0===t?void 0:t.searchData.owners)||[],a=null===(n=o.original)||void 0===n?void 0:n.searchData.status,r=null===(l=o.original)||void 0===l?void 0:l.searchData.creationReason,u=[...i.filter((e,t)=>"ACTIVE"===e.status),...i.filter((e,t)=>"ACTIVE"!==e.status)],d="INWORKFLOW"===a&&"MUTATION"===r?u.reverse():u;return Pi(""+(null==d?void 0:d[0].name))},mobileCell:e=>{var t,n;return Ni(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n[0].name)}},{Header:e("ES_INBOX_LOCALITY"),Cell:t=>{var n,l,o,i,a,r;let{row:u}=t;const d=null===(n=u.original)||void 0===n||null===(l=n.searchData)||void 0===l?void 0:l.tenantId;return Pi(e(d.replace(".","_").toUpperCase()+"_REVENUE_"+(null===(o=u.original)||void 0===o||null===(i=o.searchData)||void 0===i||null===(a=i.address)||void 0===a||null===(r=a.locality)||void 0===r?void 0:r.code)))},disableSortBy:!0,mobileCell:e=>{var t,n,l;return Ni(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.address)||void 0===n||null===(l=n.locality)||void 0===l?void 0:l.name)}},{Header:e("ES_SEARCH_PROPERTY_STATUS"),Cell:t=>{var n,l;let{row:o}=t;return Pi(e(null===(n=o.original)||void 0===n||null===(l=n.searchData)||void 0===l?void 0:l.status))},disableSortBy:!0,mobileCell:e=>{var t;return Ni(null==e||null===(t=e.searchData)||void 0===t?void 0:t.status)}},{Header:e("ES_SEARCH_TAX_DUE"),Cell:e=>{var t,n;let{row:l}=e;return Pi("₹ "+(null===(t=l.original)||void 0===t||null===(n=t.searchData)||void 0===n?void 0:n.due_tax))},disableSortBy:!0,mobileCell:e=>{var t;return Ni("₹ "+(null==e||null===(t=e.searchData)||void 0===t?void 0:t.due_tax))}},{Header:e("ES_SEARCH_ACTION"),Cell:t=>{var n,o,a,r;let{row:u}=t;return l.createElement("div",null,(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.due_tax)>0&&Digit.Utils.didEmployeeHasRole("PT_CEMP")?l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/payment/collect/PT/"+(null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)},e("ES_PT_COLLECT_TAX"))):null)},disableSortBy:!0}],inboxColumns:t=>[{Header:e("ES_INBOX_UNIQUE_PROPERTY_ID"),Cell:e=>{var n,o,a,r;let{row:u}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:t.parentRoute+"/application-details/"+(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.propertyId)},null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)))},mobileCell:e=>{var t;return Ni(null==e||null===(t=e.searchData)||void 0===t?void 0:t.propertyId)}},{Header:e("ES_INBOX_OWNER"),Cell:e=>{var t,n,l;let{row:o}=e;return Pi(""+(null===(t=o.original)||void 0===t||null===(n=t.searchData)||void 0===n||null===(l=n.owners)||void 0===l?void 0:l[0].name))},mobileCell:e=>{var t,n;return Ni(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n[0].name)}},{Header:e("ES_INBOX_APPLICATION_TYPE"),Cell:t=>{var n,l;let{row:o}=t;return Pi(e(""+{"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"}[null===(n=o.original)||void 0===n||null===(l=n.workflowData)||void 0===l?void 0:l.businessService]))},mobileCell:t=>{var n;return Ni(e({"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"}[null==t||null===(n=t.workflowData)||void 0===n?void 0:n.businessService]))}},{Header:e("ES_INBOX_STATUS"),Cell:t=>{var n,l;let{row:o}=t;const i=null===(n=o.original)||void 0===n?void 0:n.workflowData;return Pi(e("ES_PT_COMMON_STATUS_"+(null==i||null===(l=i.state)||void 0===l?void 0:l.state)))},mobileCell:t=>{var n,l;return Ni(e("ES_PT_COMMON_STATUS_"+(null==t||null===(n=t.workflowData)||void 0===n||null===(l=n.state)||void 0===l?void 0:l.state)))}},{Header:e("ES_INBOX_SLA_DAYS_REMAINING"),accessor:"createdTime",Cell:e=>{let{row:t}=e;const n=t.original.workflowData,l=Math.round(((null==n?void 0:n.businesssServiceSla)||0)/864e5)||"-";return gi(l)},mobileCell:e=>{var t;return gi(Math.round(((null==e||null===(t=e.workflowData)||void 0===t?void 0:t.businesssServiceSla)||0)/864e5))}}],serviceRequestIdKey:t=>{var n,l;return null==t||null===(n=t[e("ES_INBOX_UNIQUE_PROPERTY_ID")])||void 0===n||null===(l=n.props)||void 0===l?void 0:l.children}}})},exports.PTLinks=_a,exports.PTModule=Ea;
