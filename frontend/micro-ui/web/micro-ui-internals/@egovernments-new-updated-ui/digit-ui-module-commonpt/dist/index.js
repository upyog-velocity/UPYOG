var e,t=require("@egovernments/digit-ui-react-components"),n=require("react"),l=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,o=require("react-i18next"),r=require("react-router-dom"),a=require("react-query"),u=require("react-hook-form");function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,l,o={},r=Object.keys(e);for(l=0;l<r.length;l++)t.indexOf(n=r[l])>=0||(o[n]=e[n]);return o}var s=[{head:"PT_ASSEMBLY_DET",body:[{type:"component",route:"property-type",isMandatory:!0,component:"CPTPropertyAssemblyDetails",texts:{headerCaption:"",header:"PT_ASSEMBLY_DET",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"landarea",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"PtUnits",COMMON_PROPTYPE_VACANT:"area"},key:"assemblyDet",withoutLabel:!0}]},{head:"PT_LOCATION_DETAILS",body:[{type:"component",route:"property-type",isMandatory:!0,component:"CPTPropertyLocationDetails",texts:{headerCaption:"",header:"PT_LOCATION_DETAILS",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"landarea",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"PtUnits",COMMON_PROPTYPE_VACANT:"area"},key:"locationDet",withoutLabel:!0}]},{head:"PT_OWNERSHIP_DETAILS",body:[{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"CPTPropertyOwnerDetails",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0}]}],v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(e,t){return e(t={exports:{}},t.exports),t.exports}var f=p(function(e,t){(function(){var n="Expected a function",l="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],r="[object Arguments]",i="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",s="[object GeneratorFunction]",p="[object Map]",f="[object Number]",m="[object Object]",E="[object RegExp]",y="[object Set]",_="[object String]",g="[object Symbol]",h="[object WeakMap]",S="[object ArrayBuffer]",b="[object DataView]",T="[object Float32Array]",A="[object Float64Array]",C="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",N="[object Uint8Array]",D="[object Uint16Array]",I="[object Uint32Array]",w=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,k=RegExp(x.source),F=RegExp(M.source),B=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,j=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(V.source),K=/^\s+/,$=/\s/,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,G=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,X=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,re=/^0o[0-7]+$/i,ie=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,ce=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="["+se+"]",pe="["+de+"]",fe="\\d+",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ee="[^\\ud800-\\udfff"+se+fe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ye="\\ud83c[\\udffb-\\udfff]",_e="[^\\ud800-\\udfff]",ge="(?:\\ud83c[\\udde6-\\uddff]){2}",he="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",be="(?:"+me+"|"+Ee+")",Te="(?:"+Se+"|"+Ee+")",Ae="(?:"+pe+"|"+ye+")?",Ce="[\\ufe0e\\ufe0f]?"+Ae+"(?:\\u200d(?:"+[_e,ge,he].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*",Pe="(?:"+["[\\u2700-\\u27bf]",ge,he].join("|")+")"+Ce,Oe="(?:"+[_e+pe+"?",pe,ge,he,"[\\ud800-\\udfff]"].join("|")+")",Ne=RegExp("['’]","g"),De=RegExp(pe,"g"),Ie=RegExp(ye+"(?="+ye+")|"+Oe+Ce,"g"),we=RegExp([Se+"?"+me+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ve,Se,"$"].join("|")+")",Te+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ve,Se+be,"$"].join("|")+")",Se+"?"+be+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fe,Pe].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),Le=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,ke={};ke[T]=ke[A]=ke[C]=ke[P]=ke[O]=ke[N]=ke["[object Uint8ClampedArray]"]=ke[D]=ke[I]=!0,ke[r]=ke[i]=ke[S]=ke[a]=ke[b]=ke[u]=ke[c]=ke[d]=ke[p]=ke[f]=ke[m]=ke[E]=ke[y]=ke[_]=ke[h]=!1;var Fe={};Fe[r]=Fe[i]=Fe[S]=Fe[b]=Fe[a]=Fe[u]=Fe[T]=Fe[A]=Fe[C]=Fe[P]=Fe[O]=Fe[p]=Fe[f]=Fe[m]=Fe[E]=Fe[y]=Fe[_]=Fe[g]=Fe[N]=Fe["[object Uint8ClampedArray]"]=Fe[D]=Fe[I]=!0,Fe[c]=Fe[d]=Fe[h]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ue=parseFloat,je=parseInt,He="object"==typeof v&&v&&v.Object===Object&&v,We="object"==typeof self&&self&&self.Object===Object&&self,ze=He||We||Function("return this")(),Ve=t&&!t.nodeType&&t,Ye=Ve&&e&&!e.nodeType&&e,Ke=Ye&&Ye.exports===Ve,$e=Ke&&He.process,qe=function(){try{return Ye&&Ye.require&&Ye.require("util").types||$e&&$e.binding&&$e.binding("util")}catch(e){}}(),Ge=qe&&qe.isArrayBuffer,Ze=qe&&qe.isDate,Xe=qe&&qe.isMap,Qe=qe&&qe.isRegExp,Je=qe&&qe.isSet,et=qe&&qe.isTypedArray;function tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function nt(e,t,n,l){for(var o=-1,r=null==e?0:e.length;++o<r;){var i=e[o];t(l,i,n(i),e)}return l}function lt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function rt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(!t(e[n],n,e))return!1;return!0}function it(e,t){for(var n=-1,l=null==e?0:e.length,o=0,r=[];++n<l;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}function at(e,t){return!(null==e||!e.length)&&yt(e,t,0)>-1}function ut(e,t,n){for(var l=-1,o=null==e?0:e.length;++l<o;)if(n(t,e[l]))return!0;return!1}function ct(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}function dt(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e}function st(e,t,n,l){var o=-1,r=null==e?0:e.length;for(l&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}function vt(e,t,n,l){var o=null==e?0:e.length;for(l&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function pt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(t(e[n],n,e))return!0;return!1}var ft=St("length");function mt(e,t,n){var l;return n(e,function(e,n,o){if(t(e,n,o))return l=n,!1}),l}function Et(e,t,n,l){for(var o=e.length,r=n+(l?1:-1);l?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function yt(e,t,n){return t==t?function(e,t,n){for(var l=n-1,o=e.length;++l<o;)if(e[l]===t)return l;return-1}(e,t,n):Et(e,gt,n)}function _t(e,t,n,l){for(var o=n-1,r=e.length;++o<r;)if(l(e[o],t))return o;return-1}function gt(e){return e!=e}function ht(e,t){var n=null==e?0:e.length;return n?At(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function bt(e){return function(t){return null==e?void 0:e[t]}}function Tt(e,t,n,l,o){return o(e,function(e,o,r){n=l?(l=!1,e):t(n,e,o,r)}),n}function At(e,t){for(var n,l=-1,o=e.length;++l<o;){var r=t(e[l]);void 0!==r&&(n=void 0===n?r:n+r)}return n}function Ct(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}function Pt(e){return e?e.slice(0,Vt(e)+1).replace(K,""):e}function Ot(e){return function(t){return e(t)}}function Nt(e,t){return ct(t,function(t){return e[t]})}function Dt(e,t){return e.has(t)}function It(e,t){for(var n=-1,l=e.length;++n<l&&yt(t,e[n],0)>-1;);return n}function wt(e,t){for(var n=e.length;n--&&yt(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length,l=0;n--;)e[n]===t&&++l;return l}var Lt=bt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xt=bt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mt(e){return"\\"+Be[e]}function kt(e){return Re.test(e)}function Ft(e){var t=-1,n=Array(e.size);return e.forEach(function(e,l){n[++t]=[l,e]}),n}function Bt(e,t){return function(n){return e(t(n))}}function Ut(e,t){for(var n=-1,o=e.length,r=0,i=[];++n<o;){var a=e[n];a!==t&&a!==l||(e[n]=l,i[r++]=n)}return i}function jt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Wt(e){return kt(e)?function(e){for(var t=Ie.lastIndex=0;Ie.test(e);)++t;return t}(e):ft(e)}function zt(e){return kt(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split("")}(e)}function Vt(e){for(var t=e.length;t--&&$.test(e.charAt(t)););return t}var Yt=bt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kt=function e(t){var v,$=(t=null==t?ze:Kt.defaults(ze.Object(),t,Kt.pick(ze,xe))).Array,de=t.Date,se=t.Error,ve=t.Function,pe=t.Math,fe=t.Object,me=t.RegExp,Ee=t.String,ye=t.TypeError,_e=$.prototype,ge=fe.prototype,he=t["__core-js_shared__"],Se=ve.prototype.toString,be=ge.hasOwnProperty,Te=0,Ae=(v=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",Ce=ge.toString,Pe=Se.call(fe),Oe=ze._,Ie=me("^"+Se.call(be).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ke?t.Buffer:void 0,Be=t.Symbol,He=t.Uint8Array,We=Re?Re.allocUnsafe:void 0,Ve=Bt(fe.getPrototypeOf,fe),Ye=fe.create,$e=ge.propertyIsEnumerable,qe=_e.splice,ft=Be?Be.isConcatSpreadable:void 0,bt=Be?Be.iterator:void 0,$t=Be?Be.toStringTag:void 0,qt=function(){try{var e=Jo(fe,"defineProperty");return e({},"",{}),e}catch(e){}}(),Gt=t.clearTimeout!==ze.clearTimeout&&t.clearTimeout,Zt=de&&de.now!==ze.Date.now&&de.now,Xt=t.setTimeout!==ze.setTimeout&&t.setTimeout,Qt=pe.ceil,Jt=pe.floor,en=fe.getOwnPropertySymbols,tn=Re?Re.isBuffer:void 0,nn=t.isFinite,ln=_e.join,on=Bt(fe.keys,fe),rn=pe.max,an=pe.min,un=de.now,cn=t.parseInt,dn=pe.random,sn=_e.reverse,vn=Jo(t,"DataView"),pn=Jo(t,"Map"),fn=Jo(t,"Promise"),mn=Jo(t,"Set"),En=Jo(t,"WeakMap"),yn=Jo(fe,"create"),_n=En&&new En,gn={},hn=Nr(vn),Sn=Nr(pn),bn=Nr(fn),Tn=Nr(mn),An=Nr(En),Cn=Be?Be.prototype:void 0,Pn=Cn?Cn.valueOf:void 0,On=Cn?Cn.toString:void 0;function Nn(e){if(Yi(e)&&!xi(e)&&!(e instanceof Rn)){if(e instanceof wn)return e;if(be.call(e,"__wrapped__"))return Dr(e)}return new wn(e)}var Dn=function(){function e(){}return function(t){if(!Vi(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function In(){}function wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Rn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new xn(e);this.size=t.size}function Bn(e,t){var n=xi(e),l=!n&&Li(e),o=!n&&!l&&Bi(e),r=!n&&!l&&!o&&Ji(e),i=n||l||o||r,a=i?Ct(e.length,Ee):[],u=a.length;for(var c in e)!t&&!be.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ir(c,u))||a.push(c);return a}function Un(e){var t=e.length;return t?e[Ml(0,t-1)]:void 0}function jn(e,t){return Tr(yo(e),Gn(t,0,e.length))}function Hn(e){return Tr(yo(e))}function Wn(e,t,n){(void 0!==n&&!Ii(e[t],n)||void 0===n&&!(t in e))&&$n(e,t,n)}function zn(e,t,n){var l=e[t];be.call(e,t)&&Ii(l,n)&&(void 0!==n||t in e)||$n(e,t,n)}function Vn(e,t){for(var n=e.length;n--;)if(Ii(e[n][0],t))return n;return-1}function Yn(e,t,n,l){return el(e,function(e,o,r){t(l,e,n(e),r)}),l}function Kn(e,t){return e&&_o(t,Sa(t),e)}function $n(e,t,n){"__proto__"==t&&qt?qt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qn(e,t){for(var n=-1,l=t.length,o=$(l),r=null==e;++n<l;)o[n]=r?void 0:Ea(e,t[n]);return o}function Gn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Zn(e,t,n,l,o,i){var c,v=1&t,h=2&t,w=4&t;if(n&&(c=o?n(e,l,o,i):n(e)),void 0!==c)return c;if(!Vi(e))return e;var R=xi(e);if(R){if(c=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!v)return yo(e,c)}else{var L=nr(e),x=L==d||L==s;if(Bi(e))return so(e,v);if(L==m||L==r||x&&!o){if(c=h||x?{}:or(e),!v)return h?function(e,t){return _o(e,tr(e),t)}(e,function(e,t){return e&&_o(t,ba(t),e)}(c,e)):function(e,t){return _o(e,er(e),t)}(e,Kn(c,e))}else{if(!Fe[L])return o?e:{};c=function(e,t,n){var l=e.constructor;switch(t){case S:return vo(e);case a:case u:return new l(+e);case b:return function(e,t){var n=t?vo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case A:case C:case P:case O:case N:case"[object Uint8ClampedArray]":case D:case I:return po(e,n);case p:return new l;case f:case _:return new l(e);case E:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return new l;case g:return Pn?fe(Pn.call(e)):{}}}(e,L,v)}}i||(i=new Fn);var M=i.get(e);if(M)return M;i.set(e,c),Zi(e)?e.forEach(function(l){c.add(Zn(l,t,n,l,e,i))}):Ki(e)&&e.forEach(function(l,o){c.set(o,Zn(l,t,n,o,e,i))});var k=R?void 0:(w?h?Ko:Yo:h?ba:Sa)(e);return lt(k||e,function(l,o){k&&(l=e[o=l]),zn(c,o,Zn(l,t,n,o,e,i))}),c}function Xn(e,t,n){var l=n.length;if(null==e)return!l;for(e=fe(e);l--;){var o=n[l],r=e[o];if(void 0===r&&!(o in e)||!(0,t[o])(r))return!1}return!0}function Qn(e,t,l){if("function"!=typeof e)throw new ye(n);return gr(function(){e.apply(void 0,l)},t)}function Jn(e,t,n,l){var o=-1,r=at,i=!0,a=e.length,u=[],c=t.length;if(!a)return u;n&&(t=ct(t,Ot(n))),l?(r=ut,i=!1):t.length>=200&&(r=Dt,i=!1,t=new kn(t));e:for(;++o<a;){var d=e[o],s=null==n?d:n(d);if(d=l||0!==d?d:0,i&&s==s){for(var v=c;v--;)if(t[v]===s)continue e;u.push(d)}else r(t,s,l)||u.push(d)}return u}Nn.templateSettings={escape:B,evaluate:U,interpolate:j,variable:"",imports:{_:Nn}},(Nn.prototype=In.prototype).constructor=Nn,(wn.prototype=Dn(In.prototype)).constructor=wn,(Rn.prototype=Dn(In.prototype)).constructor=Rn,Ln.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ln.prototype.get=function(e){var t=this.__data__;if(yn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return be.call(t,e)?t[e]:void 0},Ln.prototype.has=function(e){var t=this.__data__;return yn?void 0!==t[e]:be.call(t,e)},Ln.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&void 0===t?"__lodash_hash_undefined__":t,this},xn.prototype.clear=function(){this.__data__=[],this.size=0},xn.prototype.delete=function(e){var t=this.__data__,n=Vn(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),--this.size,0))},xn.prototype.get=function(e){var t=this.__data__,n=Vn(t,e);return n<0?void 0:t[n][1]},xn.prototype.has=function(e){return Vn(this.__data__,e)>-1},xn.prototype.set=function(e,t){var n=this.__data__,l=Vn(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new Ln,map:new(pn||xn),string:new Ln}},Mn.prototype.delete=function(e){var t=Xo(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Xo(this,e).get(e)},Mn.prototype.has=function(e){return Xo(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Xo(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this},kn.prototype.add=kn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},kn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new xn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof xn){var l=n.__data__;if(!pn||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(l)}return n.set(e,t),this.size=n.size,this};var el=So(ul),tl=So(cl,!0);function nl(e,t){var n=!0;return el(e,function(e,l,o){return n=!!t(e,l,o)}),n}function ll(e,t,n){for(var l=-1,o=e.length;++l<o;){var r=e[l],i=t(r);if(null!=i&&(void 0===a?i==i&&!Qi(i):n(i,a)))var a=i,u=r}return u}function ol(e,t){var n=[];return el(e,function(e,l,o){t(e,l,o)&&n.push(e)}),n}function rl(e,t,n,l,o){var r=-1,i=e.length;for(n||(n=rr),o||(o=[]);++r<i;){var a=e[r];t>0&&n(a)?t>1?rl(a,t-1,n,l,o):dt(o,a):l||(o[o.length]=a)}return o}var il=bo(),al=bo(!0);function ul(e,t){return e&&il(e,t,Sa)}function cl(e,t){return e&&al(e,t,Sa)}function dl(e,t){return it(t,function(t){return Hi(e[t])})}function sl(e,t){for(var n=0,l=(t=io(t,e)).length;null!=e&&n<l;)e=e[Or(t[n++])];return n&&n==l?e:void 0}function vl(e,t,n){var l=t(e);return xi(e)?l:dt(l,n(e))}function pl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$t&&$t in fe(e)?function(e){var t=be.call(e,$t),n=e[$t];try{e[$t]=void 0;var l=!0}catch(e){}var o=Ce.call(e);return l&&(t?e[$t]=n:delete e[$t]),o}(e):function(e){return Ce.call(e)}(e)}function fl(e,t){return e>t}function ml(e,t){return null!=e&&be.call(e,t)}function El(e,t){return null!=e&&t in fe(e)}function yl(e,t,n){for(var l=n?ut:at,o=e[0].length,r=e.length,i=r,a=$(r),u=Infinity,c=[];i--;){var d=e[i];i&&t&&(d=ct(d,Ot(t))),u=an(d.length,u),a[i]=!n&&(t||o>=120&&d.length>=120)?new kn(i&&d):void 0}d=e[0];var s=-1,v=a[0];e:for(;++s<o&&c.length<u;){var p=d[s],f=t?t(p):p;if(p=n||0!==p?p:0,!(v?Dt(v,f):l(c,f,n))){for(i=r;--i;){var m=a[i];if(!(m?Dt(m,f):l(e[i],f,n)))continue e}v&&v.push(f),c.push(p)}}return c}function _l(e,t,n){var l=null==(e=mr(e,t=io(t,e)))?e:e[Or(jr(t))];return null==l?void 0:tt(l,e,n)}function gl(e){return Yi(e)&&pl(e)==r}function hl(e,t,n,l,o){return e===t||(null==e||null==t||!Yi(e)&&!Yi(t)?e!=e&&t!=t:function(e,t,n,l,o,d){var s=xi(e),v=xi(t),h=s?i:nr(e),T=v?i:nr(t),A=(h=h==r?m:h)==m,C=(T=T==r?m:T)==m,P=h==T;if(P&&Bi(e)){if(!Bi(t))return!1;s=!0,A=!1}if(P&&!A)return d||(d=new Fn),s||Ji(e)?zo(e,t,n,l,o,d):function(e,t,n,l,o,r,i){switch(n){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!r(new He(e),new He(t)));case a:case u:case f:return Ii(+e,+t);case c:return e.name==t.name&&e.message==t.message;case E:case _:return e==t+"";case p:var d=Ft;case y:if(d||(d=jt),e.size!=t.size&&!(1&l))return!1;var s=i.get(e);if(s)return s==t;l|=2,i.set(e,t);var v=zo(d(e),d(t),l,o,r,i);return i.delete(e),v;case g:if(Pn)return Pn.call(e)==Pn.call(t)}return!1}(e,t,h,n,l,o,d);if(!(1&n)){var O=A&&be.call(e,"__wrapped__"),N=C&&be.call(t,"__wrapped__");if(O||N){var D=O?e.value():e,I=N?t.value():t;return d||(d=new Fn),o(D,I,n,l,d)}}return!!P&&(d||(d=new Fn),function(e,t,n,l,o,r){var i=1&n,a=Yo(e),u=a.length;if(u!=Yo(t).length&&!i)return!1;for(var c=u;c--;){var d=a[c];if(!(i?d in t:be.call(t,d)))return!1}var s=r.get(e),v=r.get(t);if(s&&v)return s==t&&v==e;var p=!0;r.set(e,t),r.set(t,e);for(var f=i;++c<u;){var m=e[d=a[c]],E=t[d];if(l)var y=i?l(E,m,d,t,e,r):l(m,E,d,e,t,r);if(!(void 0===y?m===E||o(m,E,n,l,r):y)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var _=e.constructor,g=t.constructor;_==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(p=!1)}return r.delete(e),r.delete(t),p}(e,t,n,l,o,d))}(e,t,n,l,hl,o))}function Sl(e,t,n,l){var o=n.length,r=o,i=!l;if(null==e)return!r;for(e=fe(e);o--;){var a=n[o];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<r;){var u=(a=n[o])[0],c=e[u],d=a[1];if(i&&a[2]){if(void 0===c&&!(u in e))return!1}else{var s=new Fn;if(l)var v=l(c,d,u,e,t,s);if(!(void 0===v?hl(d,c,3,l,s):v))return!1}}return!0}function bl(e){return!(!Vi(e)||(t=e,Ae&&Ae in t))&&(Hi(e)?Ie:oe).test(Nr(e));var t}function Tl(e){return"function"==typeof e?e:null==e?$a:"object"==typeof e?xi(e)?Nl(e[0],e[1]):Ol(e):nu(e)}function Al(e){if(!sr(e))return on(e);var t=[];for(var n in fe(e))be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Cl(e,t){return e<t}function Pl(e,t){var n=-1,l=ki(e)?$(e.length):[];return el(e,function(e,o,r){l[++n]=t(e,o,r)}),l}function Ol(e){var t=Qo(e);return 1==t.length&&t[0][2]?pr(t[0][0],t[0][1]):function(n){return n===e||Sl(n,e,t)}}function Nl(e,t){return ur(e)&&vr(t)?pr(Or(e),t):function(n){var l=Ea(n,e);return void 0===l&&l===t?ya(n,e):hl(t,l,3)}}function Dl(e,t,n,l,o){e!==t&&il(t,function(r,i){if(o||(o=new Fn),Vi(r))!function(e,t,n,l,o,r,i){var a=yr(e,n),u=yr(t,n),c=i.get(u);if(c)Wn(e,n,c);else{var d=r?r(a,u,n+"",e,t,i):void 0,s=void 0===d;if(s){var v=xi(u),p=!v&&Bi(u),f=!v&&!p&&Ji(u);d=u,v||p||f?xi(a)?d=a:Fi(a)?d=yo(a):p?(s=!1,d=so(u,!0)):f?(s=!1,d=po(u,!0)):d=[]:qi(u)||Li(u)?(d=a,Li(a)?d=aa(a):Vi(a)&&!Hi(a)||(d=or(u))):s=!1}s&&(i.set(u,d),o(d,u,l,r,i),i.delete(u)),Wn(e,n,d)}}(e,t,i,n,Dl,l,o);else{var a=l?l(yr(e,i),r,i+"",e,t,o):void 0;void 0===a&&(a=r),Wn(e,i,a)}},ba)}function Il(e,t){var n=e.length;if(n)return ir(t+=t<0?n:0,n)?e[t]:void 0}function wl(e,t,n){t=t.length?ct(t,function(e){return xi(e)?function(t){return sl(t,1===e.length?e[0]:e)}:e}):[$a];var l=-1;return t=ct(t,Ot(Zo())),function(e,t){var l=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var l=-1,o=e.criteria,r=t.criteria,i=o.length,a=n.length;++l<i;){var u=fo(o[l],r[l]);if(u)return l>=a?u:u*("desc"==n[l]?-1:1)}return e.index-t.index}(e,t,n)});l--;)e[l]=e[l].value;return e}(Pl(e,function(e,n,o){return{criteria:ct(t,function(t){return t(e)}),index:++l,value:e}}))}function Rl(e,t,n){for(var l=-1,o=t.length,r={};++l<o;){var i=t[l],a=sl(e,i);n(a,i)&&jl(r,io(i,e),a)}return r}function Ll(e,t,n,l){var o=l?_t:yt,r=-1,i=t.length,a=e;for(e===t&&(t=yo(t)),n&&(a=ct(e,Ot(n)));++r<i;)for(var u=0,c=t[r],d=n?n(c):c;(u=o(a,d,u,l))>-1;)a!==e&&qe.call(a,u,1),qe.call(e,u,1);return e}function xl(e,t){for(var n=e?t.length:0,l=n-1;n--;){var o=t[n];if(n==l||o!==r){var r=o;ir(o)?qe.call(e,o,1):Ql(e,o)}}return e}function Ml(e,t){return e+Jt(dn()*(t-e+1))}function kl(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Fl(e,t){return hr(fr(e,t,$a),e+"")}function Bl(e){return Un(Ia(e))}function Ul(e,t){var n=Ia(e);return Tr(n,Gn(t,0,n.length))}function jl(e,t,n,l){if(!Vi(e))return e;for(var o=-1,r=(t=io(t,e)).length,i=r-1,a=e;null!=a&&++o<r;){var u=Or(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=i){var d=a[u];void 0===(c=l?l(d,u,a):void 0)&&(c=Vi(d)?d:ir(t[o+1])?[]:{})}zn(a,u,c),a=a[u]}return e}var Hl=_n?function(e,t){return _n.set(e,t),e}:$a,Wl=qt?function(e,t){return qt(e,"toString",{configurable:!0,enumerable:!1,value:Va(t),writable:!0})}:$a;function zl(e){return Tr(Ia(e))}function Vl(e,t,n){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=$(o);++l<o;)r[l]=e[l+t];return r}function Yl(e,t){var n;return el(e,function(e,l,o){return!(n=t(e,l,o))}),!!n}function Kl(e,t,n){var l=0,o=null==e?l:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;l<o;){var r=l+o>>>1,i=e[r];null!==i&&!Qi(i)&&(n?i<=t:i<t)?l=r+1:o=r}return o}return $l(e,t,$a,n)}function $l(e,t,n,l){var o=0,r=null==e?0:e.length;if(0===r)return 0;for(var i=(t=n(t))!=t,a=null===t,u=Qi(t),c=void 0===t;o<r;){var d=Jt((o+r)/2),s=n(e[d]),v=void 0!==s,p=null===s,f=s==s,m=Qi(s);if(i)var E=l||f;else E=c?f&&(l||v):a?f&&v&&(l||!p):u?f&&v&&!p&&(l||!m):!p&&!m&&(l?s<=t:s<t);E?o=d+1:r=d}return an(r,4294967294)}function ql(e,t){for(var n=-1,l=e.length,o=0,r=[];++n<l;){var i=e[n],a=t?t(i):i;if(!n||!Ii(a,u)){var u=a;r[o++]=0===i?0:i}}return r}function Gl(e){return"number"==typeof e?e:Qi(e)?NaN:+e}function Zl(e){if("string"==typeof e)return e;if(xi(e))return ct(e,Zl)+"";if(Qi(e))return On?On.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xl(e,t,n){var l=-1,o=at,r=e.length,i=!0,a=[],u=a;if(n)i=!1,o=ut;else if(r>=200){var c=t?null:Fo(e);if(c)return jt(c);i=!1,o=Dt,u=new kn}else u=t?[]:a;e:for(;++l<r;){var d=e[l],s=t?t(d):d;if(d=n||0!==d?d:0,i&&s==s){for(var v=u.length;v--;)if(u[v]===s)continue e;t&&u.push(s),a.push(d)}else o(u,s,n)||(u!==a&&u.push(s),a.push(d))}return a}function Ql(e,t){return null==(e=mr(e,t=io(t,e)))||delete e[Or(jr(t))]}function Jl(e,t,n,l){return jl(e,t,n(sl(e,t)),l)}function eo(e,t,n,l){for(var o=e.length,r=l?o:-1;(l?r--:++r<o)&&t(e[r],r,e););return n?Vl(e,l?0:r,l?r+1:o):Vl(e,l?r+1:0,l?o:r)}function to(e,t){var n=e;return n instanceof Rn&&(n=n.value()),st(t,function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))},n)}function no(e,t,n){var l=e.length;if(l<2)return l?Xl(e[0]):[];for(var o=-1,r=$(l);++o<l;)for(var i=e[o],a=-1;++a<l;)a!=o&&(r[o]=Jn(r[o]||i,e[a],t,n));return Xl(rl(r,1),t,n)}function lo(e,t,n){for(var l=-1,o=e.length,r=t.length,i={};++l<o;)n(i,e[l],l<r?t[l]:void 0);return i}function oo(e){return Fi(e)?e:[]}function ro(e){return"function"==typeof e?e:$a}function io(e,t){return xi(e)?e:ur(e,t)?[e]:Pr(ua(e))}var ao=Fl;function uo(e,t,n){var l=e.length;return n=void 0===n?l:n,!t&&n>=l?e:Vl(e,t,n)}var co=Gt||function(e){return ze.clearTimeout(e)};function so(e,t){if(t)return e.slice();var n=e.length,l=We?We(n):new e.constructor(n);return e.copy(l),l}function vo(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function po(e,t){var n=t?vo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function fo(e,t){if(e!==t){var n=void 0!==e,l=null===e,o=e==e,r=Qi(e),i=void 0!==t,a=null===t,u=t==t,c=Qi(t);if(!a&&!c&&!r&&e>t||r&&i&&u&&!a&&!c||l&&i&&u||!n&&u||!o)return 1;if(!l&&!r&&!c&&e<t||c&&n&&o&&!l&&!r||a&&n&&o||!i&&o||!u)return-1}return 0}function mo(e,t,n,l){for(var o=-1,r=e.length,i=n.length,a=-1,u=t.length,c=rn(r-i,0),d=$(u+c),s=!l;++a<u;)d[a]=t[a];for(;++o<i;)(s||o<r)&&(d[n[o]]=e[o]);for(;c--;)d[a++]=e[o++];return d}function Eo(e,t,n,l){for(var o=-1,r=e.length,i=-1,a=n.length,u=-1,c=t.length,d=rn(r-a,0),s=$(d+c),v=!l;++o<d;)s[o]=e[o];for(var p=o;++u<c;)s[p+u]=t[u];for(;++i<a;)(v||o<r)&&(s[p+n[i]]=e[o++]);return s}function yo(e,t){var n=-1,l=e.length;for(t||(t=$(l));++n<l;)t[n]=e[n];return t}function _o(e,t,n,l){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],u=l?l(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),o?$n(n,a,u):zn(n,a,u)}return n}function go(e,t){return function(n,l){var o=xi(n)?nt:Yn,r=t?t():{};return o(n,e,Zo(l,2),r)}}function ho(e){return Fl(function(t,n){var l=-1,o=n.length,r=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,i&&ar(n[0],n[1],i)&&(r=o<3?void 0:r,o=1),t=fe(t);++l<o;){var a=n[l];a&&e(t,a,l,r)}return t})}function So(e,t){return function(n,l){if(null==n)return n;if(!ki(n))return e(n,l);for(var o=n.length,r=t?o:-1,i=fe(n);(t?r--:++r<o)&&!1!==l(i[r],r,i););return n}}function bo(e){return function(t,n,l){for(var o=-1,r=fe(t),i=l(t),a=i.length;a--;){var u=i[e?a:++o];if(!1===n(r[u],u,r))break}return t}}function To(e){return function(t){var n=kt(t=ua(t))?zt(t):void 0,l=n?n[0]:t.charAt(0),o=n?uo(n,1).join(""):t.slice(1);return l[e]()+o}}function Ao(e){return function(t){return st(Ha(La(t).replace(Ne,"")),e,"")}}function Co(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Dn(e.prototype),l=e.apply(n,t);return Vi(l)?l:n}}function Po(e){return function(t,n,l){var o=fe(t);if(!ki(t)){var r=Zo(n,3);t=Sa(t),n=function(e){return r(o[e],e,o)}}var i=e(t,n,l);return i>-1?o[r?t[i]:i]:void 0}}function Oo(e){return Vo(function(t){var l=t.length,o=l,r=wn.prototype.thru;for(e&&t.reverse();o--;){var i=t[o];if("function"!=typeof i)throw new ye(n);if(r&&!a&&"wrapper"==qo(i))var a=new wn([],!0)}for(o=a?o:l;++o<l;){var u=qo(i=t[o]),c="wrapper"==u?$o(i):void 0;a=c&&cr(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[qo(c[0])].apply(a,c[3]):1==i.length&&cr(i)?a[u]():a.thru(i)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&xi(n))return a.plant(n).value();for(var o=0,r=l?t[o].apply(this,e):n;++o<l;)r=t[o].call(this,r);return r}})}function No(e,t,n,l,o,r,i,a,u,c){var d=128&t,s=1&t,v=2&t,p=24&t,f=512&t,m=v?void 0:Co(e);return function E(){for(var y=arguments.length,_=$(y),g=y;g--;)_[g]=arguments[g];if(p)var h=Go(E),S=Rt(_,h);if(l&&(_=mo(_,l,o,p)),r&&(_=Eo(_,r,i,p)),y-=S,p&&y<c){var b=Ut(_,h);return Mo(e,t,No,E.placeholder,n,_,b,a,u,c-y)}var T=s?n:this,A=v?T[e]:e;return y=_.length,a?_=Er(_,a):f&&y>1&&_.reverse(),d&&u<y&&(_.length=u),this&&this!==ze&&this instanceof E&&(A=m||Co(A)),A.apply(T,_)}}function Do(e,t){return function(n,l){return function(e,t,n,l){return ul(e,function(e,o,r){t(l,n(e),o,r)}),l}(n,e,t(l),{})}}function Io(e,t){return function(n,l){var o;if(void 0===n&&void 0===l)return t;if(void 0!==n&&(o=n),void 0!==l){if(void 0===o)return l;"string"==typeof n||"string"==typeof l?(n=Zl(n),l=Zl(l)):(n=Gl(n),l=Gl(l)),o=e(n,l)}return o}}function wo(e){return Vo(function(t){return t=ct(t,Ot(Zo())),Fl(function(n){var l=this;return e(t,function(e){return tt(e,l,n)})})})}function Ro(e,t){var n=(t=void 0===t?" ":Zl(t)).length;if(n<2)return n?kl(t,e):t;var l=kl(t,Qt(e/Wt(t)));return kt(t)?uo(zt(l),0,e).join(""):l.slice(0,e)}function Lo(e){return function(t,n,l){return l&&"number"!=typeof l&&ar(t,n,l)&&(n=l=void 0),t=la(t),void 0===n?(n=t,t=0):n=la(n),function(e,t,n,l){for(var o=-1,r=rn(Qt((t-e)/(n||1)),0),i=$(r);r--;)i[l?r:++o]=e,e+=n;return i}(t,n,l=void 0===l?t<n?1:-1:la(l),e)}}function xo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ia(t),n=ia(n)),e(t,n)}}function Mo(e,t,n,l,o,r,i,a,u,c){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var s=[e,t,o,d?r:void 0,d?i:void 0,d?void 0:r,d?void 0:i,a,u,c],v=n.apply(void 0,s);return cr(e)&&_r(v,s),v.placeholder=l,Sr(v,e,t)}function ko(e){var t=pe[e];return function(e,n){if(e=ia(e),(n=null==n?0:an(oa(n),292))&&nn(e)){var l=(ua(e)+"e").split("e");return+((l=(ua(t(l[0]+"e"+(+l[1]+n)))+"e").split("e"))[0]+"e"+(+l[1]-n))}return t(e)}}var Fo=mn&&1/jt(new mn([,-0]))[1]==1/0?function(e){return new mn(e)}:Qa;function Bo(e){return function(t){var n=nr(t);return n==p?Ft(t):n==y?Ht(t):function(e,t){return ct(t,function(t){return[t,e[t]]})}(t,e(t))}}function Uo(e,t,o,r,i,a,u,c){var d=2&t;if(!d&&"function"!=typeof e)throw new ye(n);var s=r?r.length:0;if(s||(t&=-97,r=i=void 0),u=void 0===u?u:rn(oa(u),0),c=void 0===c?c:oa(c),s-=i?i.length:0,64&t){var v=r,p=i;r=i=void 0}var f=d?void 0:$o(e),m=[e,t,o,r,i,v,p,a,u,c];if(f&&function(e,t){var n=e[1],o=t[1],r=n|o;if(!(r<131||128==o&&8==n||128==o&&256==n&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==n))return e;1&o&&(e[2]=t[2],r|=1&n?0:4);var i=t[3];if(i){var a=e[3];e[3]=a?mo(a,i,t[4]):i,e[4]=a?Ut(e[3],l):t[4]}(i=t[5])&&(e[5]=(a=e[5])?Eo(a,i,t[6]):i,e[6]=a?Ut(e[5],l):t[6]),(i=t[7])&&(e[7]=i),128&o&&(e[8]=null==e[8]?t[8]:an(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(m,f),e=m[0],t=m[1],o=m[2],r=m[3],i=m[4],!(c=m[9]=void 0===m[9]?d?0:e.length:rn(m[9]-s,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?function(e,t,n){var l=Co(e);return function o(){for(var r=arguments.length,i=$(r),a=r,u=Go(o);a--;)i[a]=arguments[a];var c=r<3&&i[0]!==u&&i[r-1]!==u?[]:Ut(i,u);if((r-=c.length)<n)return Mo(e,t,No,o.placeholder,void 0,i,c,void 0,void 0,n-r);var d=this&&this!==ze&&this instanceof o?l:e;return tt(d,this,i)}}(e,t,c):32!=t&&33!=t||i.length?No.apply(void 0,m):function(e,t,n,l){var o=1&t,r=Co(e);return function t(){for(var i=-1,a=arguments.length,u=-1,c=l.length,d=$(c+a),s=this&&this!==ze&&this instanceof t?r:e;++u<c;)d[u]=l[u];for(;a--;)d[u++]=arguments[++i];return tt(s,o?n:this,d)}}(e,t,o,r);else var E=function(e,t,n){var l=1&t,o=Co(e);return function t(){var r=this&&this!==ze&&this instanceof t?o:e;return r.apply(l?n:this,arguments)}}(e,t,o);return Sr((f?Hl:_r)(E,m),e,t)}function jo(e,t,n,l){return void 0===e||Ii(e,ge[n])&&!be.call(l,n)?t:e}function Ho(e,t,n,l,o,r){return Vi(e)&&Vi(t)&&(r.set(t,e),Dl(e,t,void 0,Ho,r),r.delete(t)),e}function Wo(e){return qi(e)?void 0:e}function zo(e,t,n,l,o,r){var i=1&n,a=e.length,u=t.length;if(a!=u&&!(i&&u>a))return!1;var c=r.get(e),d=r.get(t);if(c&&d)return c==t&&d==e;var s=-1,v=!0,p=2&n?new kn:void 0;for(r.set(e,t),r.set(t,e);++s<a;){var f=e[s],m=t[s];if(l)var E=i?l(m,f,s,t,e,r):l(f,m,s,e,t,r);if(void 0!==E){if(E)continue;v=!1;break}if(p){if(!pt(t,function(e,t){if(!Dt(p,t)&&(f===e||o(f,e,n,l,r)))return p.push(t)})){v=!1;break}}else if(f!==m&&!o(f,m,n,l,r)){v=!1;break}}return r.delete(e),r.delete(t),v}function Vo(e){return hr(fr(e,void 0,Mr),e+"")}function Yo(e){return vl(e,Sa,er)}function Ko(e){return vl(e,ba,tr)}var $o=_n?function(e){return _n.get(e)}:Qa;function qo(e){for(var t=e.name+"",n=gn[t],l=be.call(gn,t)?n.length:0;l--;){var o=n[l],r=o.func;if(null==r||r==e)return o.name}return t}function Go(e){return(be.call(Nn,"placeholder")?Nn:e).placeholder}function Zo(){var e=Nn.iteratee||qa;return e=e===qa?Tl:e,arguments.length?e(arguments[0],arguments[1]):e}function Xo(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Qo(e){for(var t=Sa(e),n=t.length;n--;){var l=t[n],o=e[l];t[n]=[l,o,vr(o)]}return t}function Jo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return bl(n)?n:void 0}var er=en?function(e){return null==e?[]:(e=fe(e),it(en(e),function(t){return $e.call(e,t)}))}:ru,tr=en?function(e){for(var t=[];e;)dt(t,er(e)),e=Ve(e);return t}:ru,nr=pl;function lr(e,t,n){for(var l=-1,o=(t=io(t,e)).length,r=!1;++l<o;){var i=Or(t[l]);if(!(r=null!=e&&n(e,i)))break;e=e[i]}return r||++l!=o?r:!!(o=null==e?0:e.length)&&zi(o)&&ir(i,o)&&(xi(e)||Li(e))}function or(e){return"function"!=typeof e.constructor||sr(e)?{}:Dn(Ve(e))}function rr(e){return xi(e)||Li(e)||!!(ft&&e&&e[ft])}function ir(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ie.test(e))&&e>-1&&e%1==0&&e<t}function ar(e,t,n){if(!Vi(n))return!1;var l=typeof t;return!!("number"==l?ki(n)&&ir(t,n.length):"string"==l&&t in n)&&Ii(n[t],e)}function ur(e,t){if(xi(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qi(e))||W.test(e)||!H.test(e)||null!=t&&e in fe(t)}function cr(e){var t=qo(e),n=Nn[t];if("function"!=typeof n||!(t in Rn.prototype))return!1;if(e===n)return!0;var l=$o(n);return!!l&&e===l[0]}(vn&&nr(new vn(new ArrayBuffer(1)))!=b||pn&&nr(new pn)!=p||fn&&"[object Promise]"!=nr(fn.resolve())||mn&&nr(new mn)!=y||En&&nr(new En)!=h)&&(nr=function(e){var t=pl(e),n=t==m?e.constructor:void 0,l=n?Nr(n):"";if(l)switch(l){case hn:return b;case Sn:return p;case bn:return"[object Promise]";case Tn:return y;case An:return h}return t});var dr=he?Hi:iu;function sr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ge)}function vr(e){return e==e&&!Vi(e)}function pr(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in fe(n))}}function fr(e,t,n){return t=rn(void 0===t?e.length-1:t,0),function(){for(var l=arguments,o=-1,r=rn(l.length-t,0),i=$(r);++o<r;)i[o]=l[t+o];o=-1;for(var a=$(t+1);++o<t;)a[o]=l[o];return a[t]=n(i),tt(e,this,a)}}function mr(e,t){return t.length<2?e:sl(e,Vl(t,0,-1))}function Er(e,t){for(var n=e.length,l=an(t.length,n),o=yo(e);l--;){var r=t[l];e[l]=ir(r,n)?o[r]:void 0}return e}function yr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _r=br(Hl),gr=Xt||function(e,t){return ze.setTimeout(e,t)},hr=br(Wl);function Sr(e,t,n){var l=t+"";return hr(e,function(e,t){var n=t.length;if(!n)return e;var l=n-1;return t[l]=(n>1?"& ":"")+t[l],t=t.join(n>2?", ":" "),e.replace(q,"{\n/* [wrapped with "+t+"] */\n")}(l,function(e,t){return lt(o,function(n){var l="_."+n[0];t&n[1]&&!at(e,l)&&e.push(l)}),e.sort()}(function(e){var t=e.match(G);return t?t[1].split(Z):[]}(l),n)))}function br(e){var t=0,n=0;return function(){var l=un(),o=16-(l-n);if(n=l,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Tr(e,t){var n=-1,l=e.length,o=l-1;for(t=void 0===t?l:t;++n<t;){var r=Ml(n,o),i=e[r];e[r]=e[n],e[n]=i}return e.length=t,e}var Ar,Cr,Pr=(Ar=Ai(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(z,function(e,n,l,o){t.push(l?o.replace(J,"$1"):n||e)}),t},function(e){return 500===Cr.size&&Cr.clear(),e}),Cr=Ar.cache,Ar);function Or(e){if("string"==typeof e||Qi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Nr(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Dr(e){if(e instanceof Rn)return e.clone();var t=new wn(e.__wrapped__,e.__chain__);return t.__actions__=yo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ir=Fl(function(e,t){return Fi(e)?Jn(e,rl(t,1,Fi,!0)):[]}),wr=Fl(function(e,t){var n=jr(t);return Fi(n)&&(n=void 0),Fi(e)?Jn(e,rl(t,1,Fi,!0),Zo(n,2)):[]}),Rr=Fl(function(e,t){var n=jr(t);return Fi(n)&&(n=void 0),Fi(e)?Jn(e,rl(t,1,Fi,!0),void 0,n):[]});function Lr(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:oa(n);return o<0&&(o=rn(l+o,0)),Et(e,Zo(t,3),o)}function xr(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l-1;return void 0!==n&&(o=oa(n),o=n<0?rn(l+o,0):an(o,l-1)),Et(e,Zo(t,3),o,!0)}function Mr(e){return null!=e&&e.length?rl(e,1):[]}function kr(e){return e&&e.length?e[0]:void 0}var Fr=Fl(function(e){var t=ct(e,oo);return t.length&&t[0]===e[0]?yl(t):[]}),Br=Fl(function(e){var t=jr(e),n=ct(e,oo);return t===jr(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yl(n,Zo(t,2)):[]}),Ur=Fl(function(e){var t=jr(e),n=ct(e,oo);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?yl(n,void 0,t):[]});function jr(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Hr=Fl(Wr);function Wr(e,t){return e&&e.length&&t&&t.length?Ll(e,t):e}var zr=Vo(function(e,t){var n=null==e?0:e.length,l=qn(e,t);return xl(e,ct(t,function(e){return ir(e,n)?+e:e}).sort(fo)),l});function Vr(e){return null==e?e:sn.call(e)}var Yr=Fl(function(e){return Xl(rl(e,1,Fi,!0))}),Kr=Fl(function(e){var t=jr(e);return Fi(t)&&(t=void 0),Xl(rl(e,1,Fi,!0),Zo(t,2))}),$r=Fl(function(e){var t=jr(e);return t="function"==typeof t?t:void 0,Xl(rl(e,1,Fi,!0),void 0,t)});function qr(e){if(!e||!e.length)return[];var t=0;return e=it(e,function(e){if(Fi(e))return t=rn(e.length,t),!0}),Ct(t,function(t){return ct(e,St(t))})}function Gr(e,t){if(!e||!e.length)return[];var n=qr(e);return null==t?n:ct(n,function(e){return tt(t,void 0,e)})}var Zr=Fl(function(e,t){return Fi(e)?Jn(e,t):[]}),Xr=Fl(function(e){return no(it(e,Fi))}),Qr=Fl(function(e){var t=jr(e);return Fi(t)&&(t=void 0),no(it(e,Fi),Zo(t,2))}),Jr=Fl(function(e){var t=jr(e);return t="function"==typeof t?t:void 0,no(it(e,Fi),void 0,t)}),ei=Fl(qr),ti=Fl(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Gr(e,n)});function ni(e){var t=Nn(e);return t.__chain__=!0,t}function li(e,t){return t(e)}var oi=Vo(function(e){var t=e.length,n=t?e[0]:0,l=this.__wrapped__,o=function(t){return qn(t,e)};return!(t>1||this.__actions__.length)&&l instanceof Rn&&ir(n)?((l=l.slice(n,+n+(t?1:0))).__actions__.push({func:li,args:[o],thisArg:void 0}),new wn(l,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(o)}),ri=go(function(e,t,n){be.call(e,n)?++e[n]:$n(e,n,1)}),ii=Po(Lr),ai=Po(xr);function ui(e,t){return(xi(e)?lt:el)(e,Zo(t,3))}function ci(e,t){return(xi(e)?ot:tl)(e,Zo(t,3))}var di=go(function(e,t,n){be.call(e,n)?e[n].push(t):$n(e,n,[t])}),si=Fl(function(e,t,n){var l=-1,o="function"==typeof t,r=ki(e)?$(e.length):[];return el(e,function(e){r[++l]=o?tt(t,e,n):_l(e,t,n)}),r}),vi=go(function(e,t,n){$n(e,n,t)});function pi(e,t){return(xi(e)?ct:Pl)(e,Zo(t,3))}var fi=go(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),mi=Fl(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ar(e,t[0],t[1])?t=[]:n>2&&ar(t[0],t[1],t[2])&&(t=[t[0]]),wl(e,rl(t,1),[])}),Ei=Zt||function(){return ze.Date.now()};function yi(e,t,n){return t=n?void 0:t,Uo(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function _i(e,t){var l;if("function"!=typeof t)throw new ye(n);return e=oa(e),function(){return--e>0&&(l=t.apply(this,arguments)),e<=1&&(t=void 0),l}}var gi=Fl(function(e,t,n){var l=1;if(n.length){var o=Ut(n,Go(gi));l|=32}return Uo(e,l,t,n,o)}),hi=Fl(function(e,t,n){var l=3;if(n.length){var o=Ut(n,Go(hi));l|=32}return Uo(t,l,e,n,o)});function Si(e,t,l){var o,r,i,a,u,c,d=0,s=!1,v=!1,p=!0;if("function"!=typeof e)throw new ye(n);function f(t){var n=o,l=r;return o=r=void 0,d=t,a=e.apply(l,n)}function m(e){return d=e,u=gr(y,t),s?f(e):a}function E(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-d>=i}function y(){var e=Ei();if(E(e))return _(e);u=gr(y,function(e){var n=t-(e-c);return v?an(n,i-(e-d)):n}(e))}function _(e){return u=void 0,p&&o?f(e):(o=r=void 0,a)}function g(){var e=Ei(),n=E(e);if(o=arguments,r=this,c=e,n){if(void 0===u)return m(c);if(v)return co(u),u=gr(y,t),f(c)}return void 0===u&&(u=gr(y,t)),a}return t=ia(t)||0,Vi(l)&&(s=!!l.leading,i=(v="maxWait"in l)?rn(ia(l.maxWait)||0,t):i,p="trailing"in l?!!l.trailing:p),g.cancel=function(){void 0!==u&&co(u),d=0,o=c=r=u=void 0},g.flush=function(){return void 0===u?a:_(Ei())},g}var bi=Fl(function(e,t){return Qn(e,1,t)}),Ti=Fl(function(e,t,n){return Qn(e,ia(t)||0,n)});function Ai(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(n);var l=function n(){var l=arguments,o=t?t.apply(this,l):l[0],r=n.cache;if(r.has(o))return r.get(o);var i=e.apply(this,l);return n.cache=r.set(o,i)||r,i};return l.cache=new(Ai.Cache||Mn),l}function Ci(e){if("function"!=typeof e)throw new ye(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ai.Cache=Mn;var Pi=ao(function(e,t){var n=(t=1==t.length&&xi(t[0])?ct(t[0],Ot(Zo())):ct(rl(t,1),Ot(Zo()))).length;return Fl(function(l){for(var o=-1,r=an(l.length,n);++o<r;)l[o]=t[o].call(this,l[o]);return tt(e,this,l)})}),Oi=Fl(function(e,t){return Uo(e,32,void 0,t,Ut(t,Go(Oi)))}),Ni=Fl(function(e,t){return Uo(e,64,void 0,t,Ut(t,Go(Ni)))}),Di=Vo(function(e,t){return Uo(e,256,void 0,void 0,void 0,t)});function Ii(e,t){return e===t||e!=e&&t!=t}var wi=xo(fl),Ri=xo(function(e,t){return e>=t}),Li=gl(function(){return arguments}())?gl:function(e){return Yi(e)&&be.call(e,"callee")&&!$e.call(e,"callee")},xi=$.isArray,Mi=Ge?Ot(Ge):function(e){return Yi(e)&&pl(e)==S};function ki(e){return null!=e&&zi(e.length)&&!Hi(e)}function Fi(e){return Yi(e)&&ki(e)}var Bi=tn||iu,Ui=Ze?Ot(Ze):function(e){return Yi(e)&&pl(e)==u};function ji(e){if(!Yi(e))return!1;var t=pl(e);return t==c||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qi(e)}function Hi(e){if(!Vi(e))return!1;var t=pl(e);return t==d||t==s||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Wi(e){return"number"==typeof e&&e==oa(e)}function zi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Vi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Yi(e){return null!=e&&"object"==typeof e}var Ki=Xe?Ot(Xe):function(e){return Yi(e)&&nr(e)==p};function $i(e){return"number"==typeof e||Yi(e)&&pl(e)==f}function qi(e){if(!Yi(e)||pl(e)!=m)return!1;var t=Ve(e);if(null===t)return!0;var n=be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==Pe}var Gi=Qe?Ot(Qe):function(e){return Yi(e)&&pl(e)==E},Zi=Je?Ot(Je):function(e){return Yi(e)&&nr(e)==y};function Xi(e){return"string"==typeof e||!xi(e)&&Yi(e)&&pl(e)==_}function Qi(e){return"symbol"==typeof e||Yi(e)&&pl(e)==g}var Ji=et?Ot(et):function(e){return Yi(e)&&zi(e.length)&&!!ke[pl(e)]},ea=xo(Cl),ta=xo(function(e,t){return e<=t});function na(e){if(!e)return[];if(ki(e))return Xi(e)?zt(e):yo(e);if(bt&&e[bt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[bt]());var t=nr(e);return(t==p?Ft:t==y?jt:Ia)(e)}function la(e){return e?(e=ia(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function oa(e){var t=la(e),n=t%1;return t==t?n?t-n:t:0}function ra(e){return e?Gn(oa(e),0,4294967295):0}function ia(e){if("number"==typeof e)return e;if(Qi(e))return NaN;if(Vi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Vi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Pt(e);var n=le.test(e);return n||re.test(e)?je(e.slice(2),n?2:8):ne.test(e)?NaN:+e}function aa(e){return _o(e,ba(e))}function ua(e){return null==e?"":Zl(e)}var ca=ho(function(e,t){if(sr(t)||ki(t))_o(t,Sa(t),e);else for(var n in t)be.call(t,n)&&zn(e,n,t[n])}),da=ho(function(e,t){_o(t,ba(t),e)}),sa=ho(function(e,t,n,l){_o(t,ba(t),e,l)}),va=ho(function(e,t,n,l){_o(t,Sa(t),e,l)}),pa=Vo(qn),fa=Fl(function(e,t){e=fe(e);var n=-1,l=t.length,o=l>2?t[2]:void 0;for(o&&ar(t[0],t[1],o)&&(l=1);++n<l;)for(var r=t[n],i=ba(r),a=-1,u=i.length;++a<u;){var c=i[a],d=e[c];(void 0===d||Ii(d,ge[c])&&!be.call(e,c))&&(e[c]=r[c])}return e}),ma=Fl(function(e){return e.push(void 0,Ho),tt(Aa,void 0,e)});function Ea(e,t,n){var l=null==e?void 0:sl(e,t);return void 0===l?n:l}function ya(e,t){return null!=e&&lr(e,t,El)}var _a=Do(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n},Va($a)),ga=Do(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),be.call(e,t)?e[t].push(n):e[t]=[n]},Zo),ha=Fl(_l);function Sa(e){return ki(e)?Bn(e):Al(e)}function ba(e){return ki(e)?Bn(e,!0):function(e){if(!Vi(e))return function(e){var t=[];if(null!=e)for(var n in fe(e))t.push(n);return t}(e);var t=sr(e),n=[];for(var l in e)("constructor"!=l||!t&&be.call(e,l))&&n.push(l);return n}(e)}var Ta=ho(function(e,t,n){Dl(e,t,n)}),Aa=ho(function(e,t,n,l){Dl(e,t,n,l)}),Ca=Vo(function(e,t){var n={};if(null==e)return n;var l=!1;t=ct(t,function(t){return t=io(t,e),l||(l=t.length>1),t}),_o(e,Ko(e),n),l&&(n=Zn(n,7,Wo));for(var o=t.length;o--;)Ql(n,t[o]);return n}),Pa=Vo(function(e,t){return null==e?{}:function(e,t){return Rl(e,t,function(t,n){return ya(e,n)})}(e,t)});function Oa(e,t){if(null==e)return{};var n=ct(Ko(e),function(e){return[e]});return t=Zo(t),Rl(e,n,function(e,n){return t(e,n[0])})}var Na=Bo(Sa),Da=Bo(ba);function Ia(e){return null==e?[]:Nt(e,Sa(e))}var wa=Ao(function(e,t,n){return t=t.toLowerCase(),e+(n?Ra(t):t)});function Ra(e){return ja(ua(e).toLowerCase())}function La(e){return(e=ua(e))&&e.replace(ae,Lt).replace(De,"")}var xa=Ao(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ma=Ao(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ka=To("toLowerCase"),Fa=Ao(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ba=Ao(function(e,t,n){return e+(n?" ":"")+ja(t)}),Ua=Ao(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ja=To("toUpperCase");function Ha(e,t,n){return e=ua(e),void 0===(t=n?void 0:t)?function(e){return Le.test(e)}(e)?function(e){return e.match(we)||[]}(e):function(e){return e.match(X)||[]}(e):e.match(t)||[]}var Wa=Fl(function(e,t){try{return tt(e,void 0,t)}catch(e){return ji(e)?e:new se(e)}}),za=Vo(function(e,t){return lt(t,function(t){t=Or(t),$n(e,t,gi(e[t],e))}),e});function Va(e){return function(){return e}}var Ya=Oo(),Ka=Oo(!0);function $a(e){return e}function qa(e){return Tl("function"==typeof e?e:Zn(e,1))}var Ga=Fl(function(e,t){return function(n){return _l(n,e,t)}}),Za=Fl(function(e,t){return function(n){return _l(e,n,t)}});function Xa(e,t,n){var l=Sa(t),o=dl(t,l);null!=n||Vi(t)&&(o.length||!l.length)||(n=t,t=e,e=this,o=dl(t,Sa(t)));var r=!(Vi(n)&&"chain"in n&&!n.chain),i=Hi(e);return lt(o,function(n){var l=t[n];e[n]=l,i&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__),o=n.__actions__=yo(this.__actions__);return o.push({func:l,args:arguments,thisArg:e}),n.__chain__=t,n}return l.apply(e,dt([this.value()],arguments))})}),e}function Qa(){}var Ja=wo(ct),eu=wo(rt),tu=wo(pt);function nu(e){return ur(e)?St(Or(e)):function(e){return function(t){return sl(t,e)}}(e)}var lu=Lo(),ou=Lo(!0);function ru(){return[]}function iu(){return!1}var au,uu=Io(function(e,t){return e+t},0),cu=ko("ceil"),du=Io(function(e,t){return e/t},1),su=ko("floor"),vu=Io(function(e,t){return e*t},1),pu=ko("round"),fu=Io(function(e,t){return e-t},0);return Nn.after=function(e,t){if("function"!=typeof t)throw new ye(n);return e=oa(e),function(){if(--e<1)return t.apply(this,arguments)}},Nn.ary=yi,Nn.assign=ca,Nn.assignIn=da,Nn.assignInWith=sa,Nn.assignWith=va,Nn.at=pa,Nn.before=_i,Nn.bind=gi,Nn.bindAll=za,Nn.bindKey=hi,Nn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return xi(e)?e:[e]},Nn.chain=ni,Nn.chunk=function(e,t,n){t=(n?ar(e,t,n):void 0===t)?1:rn(oa(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var o=0,r=0,i=$(Qt(l/t));o<l;)i[r++]=Vl(e,o,o+=t);return i},Nn.compact=function(e){for(var t=-1,n=null==e?0:e.length,l=0,o=[];++t<n;){var r=e[t];r&&(o[l++]=r)}return o},Nn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=$(e-1),n=arguments[0],l=e;l--;)t[l-1]=arguments[l];return dt(xi(n)?yo(n):[n],rl(t,1))},Nn.cond=function(e){var t=null==e?0:e.length,l=Zo();return e=t?ct(e,function(e){if("function"!=typeof e[1])throw new ye(n);return[l(e[0]),e[1]]}):[],Fl(function(n){for(var l=-1;++l<t;){var o=e[l];if(tt(o[0],this,n))return tt(o[1],this,n)}})},Nn.conforms=function(e){return function(e){var t=Sa(e);return function(n){return Xn(n,e,t)}}(Zn(e,1))},Nn.constant=Va,Nn.countBy=ri,Nn.create=function(e,t){var n=Dn(e);return null==t?n:Kn(n,t)},Nn.curry=function e(t,n,l){var o=Uo(t,8,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Nn.curryRight=function e(t,n,l){var o=Uo(t,16,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Nn.debounce=Si,Nn.defaults=fa,Nn.defaultsDeep=ma,Nn.defer=bi,Nn.delay=Ti,Nn.difference=Ir,Nn.differenceBy=wr,Nn.differenceWith=Rr,Nn.drop=function(e,t,n){var l=null==e?0:e.length;return l?Vl(e,(t=n||void 0===t?1:oa(t))<0?0:t,l):[]},Nn.dropRight=function(e,t,n){var l=null==e?0:e.length;return l?Vl(e,0,(t=l-(t=n||void 0===t?1:oa(t)))<0?0:t):[]},Nn.dropRightWhile=function(e,t){return e&&e.length?eo(e,Zo(t,3),!0,!0):[]},Nn.dropWhile=function(e,t){return e&&e.length?eo(e,Zo(t,3),!0):[]},Nn.fill=function(e,t,n,l){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&ar(e,t,n)&&(n=0,l=o),function(e,t,n,l){var o=e.length;for((n=oa(n))<0&&(n=-n>o?0:o+n),(l=void 0===l||l>o?o:oa(l))<0&&(l+=o),l=n>l?0:ra(l);n<l;)e[n++]=t;return e}(e,t,n,l)):[]},Nn.filter=function(e,t){return(xi(e)?it:ol)(e,Zo(t,3))},Nn.flatMap=function(e,t){return rl(pi(e,t),1)},Nn.flatMapDeep=function(e,t){return rl(pi(e,t),1/0)},Nn.flatMapDepth=function(e,t,n){return n=void 0===n?1:oa(n),rl(pi(e,t),n)},Nn.flatten=Mr,Nn.flattenDeep=function(e){return null!=e&&e.length?rl(e,1/0):[]},Nn.flattenDepth=function(e,t){return null!=e&&e.length?rl(e,t=void 0===t?1:oa(t)):[]},Nn.flip=function(e){return Uo(e,512)},Nn.flow=Ya,Nn.flowRight=Ka,Nn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,l={};++t<n;){var o=e[t];l[o[0]]=o[1]}return l},Nn.functions=function(e){return null==e?[]:dl(e,Sa(e))},Nn.functionsIn=function(e){return null==e?[]:dl(e,ba(e))},Nn.groupBy=di,Nn.initial=function(e){return null!=e&&e.length?Vl(e,0,-1):[]},Nn.intersection=Fr,Nn.intersectionBy=Br,Nn.intersectionWith=Ur,Nn.invert=_a,Nn.invertBy=ga,Nn.invokeMap=si,Nn.iteratee=qa,Nn.keyBy=vi,Nn.keys=Sa,Nn.keysIn=ba,Nn.map=pi,Nn.mapKeys=function(e,t){var n={};return t=Zo(t,3),ul(e,function(e,l,o){$n(n,t(e,l,o),e)}),n},Nn.mapValues=function(e,t){var n={};return t=Zo(t,3),ul(e,function(e,l,o){$n(n,l,t(e,l,o))}),n},Nn.matches=function(e){return Ol(Zn(e,1))},Nn.matchesProperty=function(e,t){return Nl(e,Zn(t,1))},Nn.memoize=Ai,Nn.merge=Ta,Nn.mergeWith=Aa,Nn.method=Ga,Nn.methodOf=Za,Nn.mixin=Xa,Nn.negate=Ci,Nn.nthArg=function(e){return e=oa(e),Fl(function(t){return Il(t,e)})},Nn.omit=Ca,Nn.omitBy=function(e,t){return Oa(e,Ci(Zo(t)))},Nn.once=function(e){return _i(2,e)},Nn.orderBy=function(e,t,n,l){return null==e?[]:(xi(t)||(t=null==t?[]:[t]),xi(n=l?void 0:n)||(n=null==n?[]:[n]),wl(e,t,n))},Nn.over=Ja,Nn.overArgs=Pi,Nn.overEvery=eu,Nn.overSome=tu,Nn.partial=Oi,Nn.partialRight=Ni,Nn.partition=fi,Nn.pick=Pa,Nn.pickBy=Oa,Nn.property=nu,Nn.propertyOf=function(e){return function(t){return null==e?void 0:sl(e,t)}},Nn.pull=Hr,Nn.pullAll=Wr,Nn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ll(e,t,Zo(n,2)):e},Nn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ll(e,t,void 0,n):e},Nn.pullAt=zr,Nn.range=lu,Nn.rangeRight=ou,Nn.rearg=Di,Nn.reject=function(e,t){return(xi(e)?it:ol)(e,Ci(Zo(t,3)))},Nn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var l=-1,o=[],r=e.length;for(t=Zo(t,3);++l<r;){var i=e[l];t(i,l,e)&&(n.push(i),o.push(l))}return xl(e,o),n},Nn.rest=function(e,t){if("function"!=typeof e)throw new ye(n);return Fl(e,t=void 0===t?t:oa(t))},Nn.reverse=Vr,Nn.sampleSize=function(e,t,n){return t=(n?ar(e,t,n):void 0===t)?1:oa(t),(xi(e)?jn:Ul)(e,t)},Nn.set=function(e,t,n){return null==e?e:jl(e,t,n)},Nn.setWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:jl(e,t,n,l)},Nn.shuffle=function(e){return(xi(e)?Hn:zl)(e)},Nn.slice=function(e,t,n){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&ar(e,t,n)?(t=0,n=l):(t=null==t?0:oa(t),n=void 0===n?l:oa(n)),Vl(e,t,n)):[]},Nn.sortBy=mi,Nn.sortedUniq=function(e){return e&&e.length?ql(e):[]},Nn.sortedUniqBy=function(e,t){return e&&e.length?ql(e,Zo(t,2)):[]},Nn.split=function(e,t,n){return n&&"number"!=typeof n&&ar(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ua(e))&&("string"==typeof t||null!=t&&!Gi(t))&&!(t=Zl(t))&&kt(e)?uo(zt(e),0,n):e.split(t,n):[]},Nn.spread=function(e,t){if("function"!=typeof e)throw new ye(n);return t=null==t?0:rn(oa(t),0),Fl(function(n){var l=n[t],o=uo(n,0,t);return l&&dt(o,l),tt(e,this,o)})},Nn.tail=function(e){var t=null==e?0:e.length;return t?Vl(e,1,t):[]},Nn.take=function(e,t,n){return e&&e.length?Vl(e,0,(t=n||void 0===t?1:oa(t))<0?0:t):[]},Nn.takeRight=function(e,t,n){var l=null==e?0:e.length;return l?Vl(e,(t=l-(t=n||void 0===t?1:oa(t)))<0?0:t,l):[]},Nn.takeRightWhile=function(e,t){return e&&e.length?eo(e,Zo(t,3),!1,!0):[]},Nn.takeWhile=function(e,t){return e&&e.length?eo(e,Zo(t,3)):[]},Nn.tap=function(e,t){return t(e),e},Nn.throttle=function(e,t,l){var o=!0,r=!0;if("function"!=typeof e)throw new ye(n);return Vi(l)&&(o="leading"in l?!!l.leading:o,r="trailing"in l?!!l.trailing:r),Si(e,t,{leading:o,maxWait:t,trailing:r})},Nn.thru=li,Nn.toArray=na,Nn.toPairs=Na,Nn.toPairsIn=Da,Nn.toPath=function(e){return xi(e)?ct(e,Or):Qi(e)?[e]:yo(Pr(ua(e)))},Nn.toPlainObject=aa,Nn.transform=function(e,t,n){var l=xi(e),o=l||Bi(e)||Ji(e);if(t=Zo(t,4),null==n){var r=e&&e.constructor;n=o?l?new r:[]:Vi(e)&&Hi(r)?Dn(Ve(e)):{}}return(o?lt:ul)(e,function(e,l,o){return t(n,e,l,o)}),n},Nn.unary=function(e){return yi(e,1)},Nn.union=Yr,Nn.unionBy=Kr,Nn.unionWith=$r,Nn.uniq=function(e){return e&&e.length?Xl(e):[]},Nn.uniqBy=function(e,t){return e&&e.length?Xl(e,Zo(t,2)):[]},Nn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xl(e,void 0,t):[]},Nn.unset=function(e,t){return null==e||Ql(e,t)},Nn.unzip=qr,Nn.unzipWith=Gr,Nn.update=function(e,t,n){return null==e?e:Jl(e,t,ro(n))},Nn.updateWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Jl(e,t,ro(n),l)},Nn.values=Ia,Nn.valuesIn=function(e){return null==e?[]:Nt(e,ba(e))},Nn.without=Zr,Nn.words=Ha,Nn.wrap=function(e,t){return Oi(ro(t),e)},Nn.xor=Xr,Nn.xorBy=Qr,Nn.xorWith=Jr,Nn.zip=ei,Nn.zipObject=function(e,t){return lo(e||[],t||[],zn)},Nn.zipObjectDeep=function(e,t){return lo(e||[],t||[],jl)},Nn.zipWith=ti,Nn.entries=Na,Nn.entriesIn=Da,Nn.extend=da,Nn.extendWith=sa,Xa(Nn,Nn),Nn.add=uu,Nn.attempt=Wa,Nn.camelCase=wa,Nn.capitalize=Ra,Nn.ceil=cu,Nn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ia(n))==n?n:0),void 0!==t&&(t=(t=ia(t))==t?t:0),Gn(ia(e),t,n)},Nn.clone=function(e){return Zn(e,4)},Nn.cloneDeep=function(e){return Zn(e,5)},Nn.cloneDeepWith=function(e,t){return Zn(e,5,t="function"==typeof t?t:void 0)},Nn.cloneWith=function(e,t){return Zn(e,4,t="function"==typeof t?t:void 0)},Nn.conformsTo=function(e,t){return null==t||Xn(e,t,Sa(t))},Nn.deburr=La,Nn.defaultTo=function(e,t){return null==e||e!=e?t:e},Nn.divide=du,Nn.endsWith=function(e,t,n){e=ua(e),t=Zl(t);var l=e.length,o=n=void 0===n?l:Gn(oa(n),0,l);return(n-=t.length)>=0&&e.slice(n,o)==t},Nn.eq=Ii,Nn.escape=function(e){return(e=ua(e))&&F.test(e)?e.replace(M,xt):e},Nn.escapeRegExp=function(e){return(e=ua(e))&&Y.test(e)?e.replace(V,"\\$&"):e},Nn.every=function(e,t,n){var l=xi(e)?rt:nl;return n&&ar(e,t,n)&&(t=void 0),l(e,Zo(t,3))},Nn.find=ii,Nn.findIndex=Lr,Nn.findKey=function(e,t){return mt(e,Zo(t,3),ul)},Nn.findLast=ai,Nn.findLastIndex=xr,Nn.findLastKey=function(e,t){return mt(e,Zo(t,3),cl)},Nn.floor=su,Nn.forEach=ui,Nn.forEachRight=ci,Nn.forIn=function(e,t){return null==e?e:il(e,Zo(t,3),ba)},Nn.forInRight=function(e,t){return null==e?e:al(e,Zo(t,3),ba)},Nn.forOwn=function(e,t){return e&&ul(e,Zo(t,3))},Nn.forOwnRight=function(e,t){return e&&cl(e,Zo(t,3))},Nn.get=Ea,Nn.gt=wi,Nn.gte=Ri,Nn.has=function(e,t){return null!=e&&lr(e,t,ml)},Nn.hasIn=ya,Nn.head=kr,Nn.identity=$a,Nn.includes=function(e,t,n,l){e=ki(e)?e:Ia(e),n=n&&!l?oa(n):0;var o=e.length;return n<0&&(n=rn(o+n,0)),Xi(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&yt(e,t,n)>-1},Nn.indexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:oa(n);return o<0&&(o=rn(l+o,0)),yt(e,t,o)},Nn.inRange=function(e,t,n){return t=la(t),void 0===n?(n=t,t=0):n=la(n),function(e,t,n){return e>=an(t,n)&&e<rn(t,n)}(e=ia(e),t,n)},Nn.invoke=ha,Nn.isArguments=Li,Nn.isArray=xi,Nn.isArrayBuffer=Mi,Nn.isArrayLike=ki,Nn.isArrayLikeObject=Fi,Nn.isBoolean=function(e){return!0===e||!1===e||Yi(e)&&pl(e)==a},Nn.isBuffer=Bi,Nn.isDate=Ui,Nn.isElement=function(e){return Yi(e)&&1===e.nodeType&&!qi(e)},Nn.isEmpty=function(e){if(null==e)return!0;if(ki(e)&&(xi(e)||"string"==typeof e||"function"==typeof e.splice||Bi(e)||Ji(e)||Li(e)))return!e.length;var t=nr(e);if(t==p||t==y)return!e.size;if(sr(e))return!Al(e).length;for(var n in e)if(be.call(e,n))return!1;return!0},Nn.isEqual=function(e,t){return hl(e,t)},Nn.isEqualWith=function(e,t,n){var l=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===l?hl(e,t,void 0,n):!!l},Nn.isError=ji,Nn.isFinite=function(e){return"number"==typeof e&&nn(e)},Nn.isFunction=Hi,Nn.isInteger=Wi,Nn.isLength=zi,Nn.isMap=Ki,Nn.isMatch=function(e,t){return e===t||Sl(e,t,Qo(t))},Nn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Sl(e,t,Qo(t),n)},Nn.isNaN=function(e){return $i(e)&&e!=+e},Nn.isNative=function(e){if(dr(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bl(e)},Nn.isNil=function(e){return null==e},Nn.isNull=function(e){return null===e},Nn.isNumber=$i,Nn.isObject=Vi,Nn.isObjectLike=Yi,Nn.isPlainObject=qi,Nn.isRegExp=Gi,Nn.isSafeInteger=function(e){return Wi(e)&&e>=-9007199254740991&&e<=9007199254740991},Nn.isSet=Zi,Nn.isString=Xi,Nn.isSymbol=Qi,Nn.isTypedArray=Ji,Nn.isUndefined=function(e){return void 0===e},Nn.isWeakMap=function(e){return Yi(e)&&nr(e)==h},Nn.isWeakSet=function(e){return Yi(e)&&"[object WeakSet]"==pl(e)},Nn.join=function(e,t){return null==e?"":ln.call(e,t)},Nn.kebabCase=xa,Nn.last=jr,Nn.lastIndexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l;return void 0!==n&&(o=(o=oa(n))<0?rn(l+o,0):an(o,l-1)),t==t?function(e,t,n){for(var l=n+1;l--;)if(e[l]===t)return l;return l}(e,t,o):Et(e,gt,o,!0)},Nn.lowerCase=Ma,Nn.lowerFirst=ka,Nn.lt=ea,Nn.lte=ta,Nn.max=function(e){return e&&e.length?ll(e,$a,fl):void 0},Nn.maxBy=function(e,t){return e&&e.length?ll(e,Zo(t,2),fl):void 0},Nn.mean=function(e){return ht(e,$a)},Nn.meanBy=function(e,t){return ht(e,Zo(t,2))},Nn.min=function(e){return e&&e.length?ll(e,$a,Cl):void 0},Nn.minBy=function(e,t){return e&&e.length?ll(e,Zo(t,2),Cl):void 0},Nn.stubArray=ru,Nn.stubFalse=iu,Nn.stubObject=function(){return{}},Nn.stubString=function(){return""},Nn.stubTrue=function(){return!0},Nn.multiply=vu,Nn.nth=function(e,t){return e&&e.length?Il(e,oa(t)):void 0},Nn.noConflict=function(){return ze._===this&&(ze._=Oe),this},Nn.noop=Qa,Nn.now=Ei,Nn.pad=function(e,t,n){e=ua(e);var l=(t=oa(t))?Wt(e):0;if(!t||l>=t)return e;var o=(t-l)/2;return Ro(Jt(o),n)+e+Ro(Qt(o),n)},Nn.padEnd=function(e,t,n){e=ua(e);var l=(t=oa(t))?Wt(e):0;return t&&l<t?e+Ro(t-l,n):e},Nn.padStart=function(e,t,n){e=ua(e);var l=(t=oa(t))?Wt(e):0;return t&&l<t?Ro(t-l,n)+e:e},Nn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(ua(e).replace(K,""),t||0)},Nn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ar(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=la(e),void 0===t?(t=e,e=0):t=la(t)),e>t){var l=e;e=t,t=l}if(n||e%1||t%1){var o=dn();return an(e+o*(t-e+Ue("1e-"+((o+"").length-1))),t)}return Ml(e,t)},Nn.reduce=function(e,t,n){var l=xi(e)?st:Tt,o=arguments.length<3;return l(e,Zo(t,4),n,o,el)},Nn.reduceRight=function(e,t,n){var l=xi(e)?vt:Tt,o=arguments.length<3;return l(e,Zo(t,4),n,o,tl)},Nn.repeat=function(e,t,n){return t=(n?ar(e,t,n):void 0===t)?1:oa(t),kl(ua(e),t)},Nn.replace=function(){var e=arguments,t=ua(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Nn.result=function(e,t,n){var l=-1,o=(t=io(t,e)).length;for(o||(o=1,e=void 0);++l<o;){var r=null==e?void 0:e[Or(t[l])];void 0===r&&(l=o,r=n),e=Hi(r)?r.call(e):r}return e},Nn.round=pu,Nn.runInContext=e,Nn.sample=function(e){return(xi(e)?Un:Bl)(e)},Nn.size=function(e){if(null==e)return 0;if(ki(e))return Xi(e)?Wt(e):e.length;var t=nr(e);return t==p||t==y?e.size:Al(e).length},Nn.snakeCase=Fa,Nn.some=function(e,t,n){var l=xi(e)?pt:Yl;return n&&ar(e,t,n)&&(t=void 0),l(e,Zo(t,3))},Nn.sortedIndex=function(e,t){return Kl(e,t)},Nn.sortedIndexBy=function(e,t,n){return $l(e,t,Zo(n,2))},Nn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var l=Kl(e,t);if(l<n&&Ii(e[l],t))return l}return-1},Nn.sortedLastIndex=function(e,t){return Kl(e,t,!0)},Nn.sortedLastIndexBy=function(e,t,n){return $l(e,t,Zo(n,2),!0)},Nn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Kl(e,t,!0)-1;if(Ii(e[n],t))return n}return-1},Nn.startCase=Ba,Nn.startsWith=function(e,t,n){return e=ua(e),n=null==n?0:Gn(oa(n),0,e.length),t=Zl(t),e.slice(n,n+t.length)==t},Nn.subtract=fu,Nn.sum=function(e){return e&&e.length?At(e,$a):0},Nn.sumBy=function(e,t){return e&&e.length?At(e,Zo(t,2)):0},Nn.template=function(e,t,n){var l=Nn.templateSettings;n&&ar(e,t,n)&&(t=void 0),e=ua(e),t=sa({},t,l,jo);var o,r,i=sa({},t.imports,l.imports,jo),a=Sa(i),u=Nt(i,a),c=0,d=t.interpolate||ue,s="__p += '",v=me((t.escape||ue).source+"|"+d.source+"|"+(d===j?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),p="//# sourceURL="+(be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(v,function(t,n,l,i,a,u){return l||(l=i),s+=e.slice(c,u).replace(ce,Mt),n&&(o=!0,s+="' +\n__e("+n+") +\n'"),a&&(r=!0,s+="';\n"+a+";\n__p += '"),l&&(s+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),s+="';\n";var f=be.call(t,"variable")&&t.variable;if(f){if(Q.test(f))throw new se("Invalid `variable` option passed into `_.template`")}else s="with (obj) {\n"+s+"\n}\n";s=(r?s.replace(w,""):s).replace(R,"$1").replace(L,"$1;"),s="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var m=Wa(function(){return ve(a,p+"return "+s).apply(void 0,u)});if(m.source=s,ji(m))throw m;return m},Nn.times=function(e,t){if((e=oa(e))<1||e>9007199254740991)return[];var n=4294967295,l=an(e,4294967295);e-=4294967295;for(var o=Ct(l,t=Zo(t));++n<e;)t(n);return o},Nn.toFinite=la,Nn.toInteger=oa,Nn.toLength=ra,Nn.toLower=function(e){return ua(e).toLowerCase()},Nn.toNumber=ia,Nn.toSafeInteger=function(e){return e?Gn(oa(e),-9007199254740991,9007199254740991):0===e?e:0},Nn.toString=ua,Nn.toUpper=function(e){return ua(e).toUpperCase()},Nn.trim=function(e,t,n){if((e=ua(e))&&(n||void 0===t))return Pt(e);if(!e||!(t=Zl(t)))return e;var l=zt(e),o=zt(t);return uo(l,It(l,o),wt(l,o)+1).join("")},Nn.trimEnd=function(e,t,n){if((e=ua(e))&&(n||void 0===t))return e.slice(0,Vt(e)+1);if(!e||!(t=Zl(t)))return e;var l=zt(e);return uo(l,0,wt(l,zt(t))+1).join("")},Nn.trimStart=function(e,t,n){if((e=ua(e))&&(n||void 0===t))return e.replace(K,"");if(!e||!(t=Zl(t)))return e;var l=zt(e);return uo(l,It(l,zt(t))).join("")},Nn.truncate=function(e,t){var n=30,l="...";if(Vi(t)){var o="separator"in t?t.separator:o;n="length"in t?oa(t.length):n,l="omission"in t?Zl(t.omission):l}var r=(e=ua(e)).length;if(kt(e)){var i=zt(e);r=i.length}if(n>=r)return e;var a=n-Wt(l);if(a<1)return l;var u=i?uo(i,0,a).join(""):e.slice(0,a);if(void 0===o)return u+l;if(i&&(a+=u.length-a),Gi(o)){if(e.slice(a).search(o)){var c,d=u;for(o.global||(o=me(o.source,ua(te.exec(o))+"g")),o.lastIndex=0;c=o.exec(d);)var s=c.index;u=u.slice(0,void 0===s?a:s)}}else if(e.indexOf(Zl(o),a)!=a){var v=u.lastIndexOf(o);v>-1&&(u=u.slice(0,v))}return u+l},Nn.unescape=function(e){return(e=ua(e))&&k.test(e)?e.replace(x,Yt):e},Nn.uniqueId=function(e){var t=++Te;return ua(e)+t},Nn.upperCase=Ua,Nn.upperFirst=ja,Nn.each=ui,Nn.eachRight=ci,Nn.first=kr,Xa(Nn,(au={},ul(Nn,function(e,t){be.call(Nn.prototype,t)||(au[t]=e)}),au),{chain:!1}),Nn.VERSION="4.17.21",lt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Nn[e].placeholder=Nn}),lt(["drop","take"],function(e,t){Rn.prototype[e]=function(n){n=void 0===n?1:rn(oa(n),0);var l=this.__filtered__&&!t?new Rn(this):this.clone();return l.__filtered__?l.__takeCount__=an(n,l.__takeCount__):l.__views__.push({size:an(n,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},Rn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),lt(["filter","map","takeWhile"],function(e,t){var n=t+1,l=1==n||3==n;Rn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Zo(e,3),type:n}),t.__filtered__=t.__filtered__||l,t}}),lt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Rn.prototype[e]=function(){return this[n](1).value()[0]}}),lt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Rn.prototype[e]=function(){return this.__filtered__?new Rn(this):this[n](1)}}),Rn.prototype.compact=function(){return this.filter($a)},Rn.prototype.find=function(e){return this.filter(e).head()},Rn.prototype.findLast=function(e){return this.reverse().find(e)},Rn.prototype.invokeMap=Fl(function(e,t){return"function"==typeof e?new Rn(this):this.map(function(n){return _l(n,e,t)})}),Rn.prototype.reject=function(e){return this.filter(Ci(Zo(e)))},Rn.prototype.slice=function(e,t){e=oa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Rn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=oa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Rn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rn.prototype.toArray=function(){return this.take(4294967295)},ul(Rn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),o=Nn[l?"take"+("last"==t?"Right":""):t],r=l||/^find/.test(t);o&&(Nn.prototype[t]=function(){var t=this.__wrapped__,i=l?[1]:arguments,a=t instanceof Rn,u=i[0],c=a||xi(t),d=function(e){var t=o.apply(Nn,dt([e],i));return l&&s?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(a=c=!1);var s=this.__chain__,v=!!this.__actions__.length,p=r&&!s,f=a&&!v;if(!r&&c){t=f?t:new Rn(this);var m=e.apply(t,i);return m.__actions__.push({func:li,args:[d],thisArg:void 0}),new wn(m,s)}return p&&f?e.apply(this,i):(m=this.thru(d),p?l?m.value()[0]:m.value():m)})}),lt(["pop","push","shift","sort","splice","unshift"],function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);Nn.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var o=this.value();return t.apply(xi(o)?o:[],e)}return this[n](function(n){return t.apply(xi(n)?n:[],e)})}}),ul(Rn.prototype,function(e,t){var n=Nn[t];if(n){var l=n.name+"";be.call(gn,l)||(gn[l]=[]),gn[l].push({name:t,func:n})}}),gn[No(void 0,2).name]=[{name:"wrapper",func:void 0}],Rn.prototype.clone=function(){var e=new Rn(this.__wrapped__);return e.__actions__=yo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=yo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=yo(this.__views__),e},Rn.prototype.reverse=function(){if(this.__filtered__){var e=new Rn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=xi(e),l=t<0,o=n?e.length:0,r=function(e,t,n){for(var l=-1,o=n.length;++l<o;){var r=n[l],i=r.size;switch(r.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=an(t,e+i);break;case"takeRight":e=rn(e,t-i)}}return{start:e,end:t}}(0,o,this.__views__),i=r.start,a=r.end,u=a-i,c=l?a:i-1,d=this.__iteratees__,s=d.length,v=0,p=an(u,this.__takeCount__);if(!n||!l&&o==u&&p==u)return to(e,this.__actions__);var f=[];e:for(;u--&&v<p;){for(var m=-1,E=e[c+=t];++m<s;){var y=d[m],_=y.type,g=(0,y.iteratee)(E);if(2==_)E=g;else if(!g){if(1==_)continue e;break e}}f[v++]=E}return f},Nn.prototype.at=oi,Nn.prototype.chain=function(){return ni(this)},Nn.prototype.commit=function(){return new wn(this.value(),this.__chain__)},Nn.prototype.next=function(){void 0===this.__values__&&(this.__values__=na(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Nn.prototype.plant=function(e){for(var t,n=this;n instanceof In;){var l=Dr(n);l.__index__=0,l.__values__=void 0,t?o.__wrapped__=l:t=l;var o=l;n=n.__wrapped__}return o.__wrapped__=e,t},Nn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rn){var t=e;return this.__actions__.length&&(t=new Rn(this)),(t=t.reverse()).__actions__.push({func:li,args:[Vr],thisArg:void 0}),new wn(t,this.__chain__)}return this.thru(Vr)},Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return to(this.__wrapped__,this.__actions__)},Nn.prototype.first=Nn.prototype.head,bt&&(Nn.prototype[bt]=function(){return this}),Nn}();Ye?((Ye.exports=Kt)._=Kt,Ve._=Kt):ze._=Kt}).call(v)}),m=function(e){var i,a=e.config,u=e.onSelect,d=e.value,v=e.userType,p=e.redirectUrl,m=n.useState(null),E=m[0],y=m[1],_=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.pt.useTenants(),o.useTranslation().t),g=r.useLocation(),h=n.useState(!1),S=h[0],b=h[1],T=c({},d),A=r.useHistory(),C=r.useRouteMatch();sessionStorage.setItem("VisitedCommonPTSearch",!0),sessionStorage.setItem("VisitedLightCreate",!0);var P,O,N,D,I,w=window.Digit.Utils.browser.isMobile(),R=(null===(i=Digit.Hooks.pt.useTenants())||void 0===i||i.sort(function(e,t){var n,l;return null==e||null===(n=e.i18nKey)||void 0===n||null===(l=n.localeCompare)||void 0===l?void 0:l.call(n,null==t?void 0:t.i18nKey)}),n.useState("")),L=R[0],x=R[1],M=(n.useState(""),"employee"!=v&&((null==a?void 0:a.isSkipEnabled)||sessionStorage.getItem("skipenabled"))),k=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1)[1],F=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{})[2],B=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","CommonFieldsConfig").isLoading;return n.useEffect(function(){k(!1),F()},[]),B?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement("div",{style:{marginLeft:"12px"}},l.createElement(t.Header,{styles:window.location.href.includes("citizen")?{paddingLeft:"0px",marginLeft:"0px"}:{}},_(_((I=null==(D=window.location.href)||null===(P=D.split("="))||void 0===P||null===(O=P[1])||void 0===O||null===(N=O.split("/"))||void 0===N?void 0:N[3])?"ES_COMMON_CREATE_PROPERTY_HEADER_"+(null==I?void 0:I.toUpperCase()):"ES_COMMON_CREATE_PROPERTY_HEADER")))),l.createElement(t.FormComposer,{onSkip:function(){u("isSkip",!0)},showSkip:M,skipStyle:w?{}:{textAlign:"right",marginRight:"55px"},sectionHeadStyle:{marginBottom:"16px"},onSubmit:function(){try{var e,t,n,l,o,r,i,a,d;return(null!=L&&null!==(e=L.owners)&&void 0!==e&&null!==(t=e.ownershipCategory)&&void 0!==t&&t.includes("MULTIPLEOWNERS")||null!=L&&null!==(n=L.owners)&&void 0!==n&&null!==(l=n[0])&&void 0!==l&&null!==(o=l.ownershipCategory)&&void 0!==o&&null!==(r=o.code)&&void 0!==r&&r.includes("MULTIPLEOWNERS"))&&1==(null==L||null===(i=L.owners)||void 0===i?void 0:i.length)?y({key:!0,label:"PT_COMMON_ONE_MORE_OWNER_INFROMATION_REQUIRED"}):u?u("cptNewProperty",{property:L}):"employee"===v?A.push(C.path+"/save-property?redirectToUrl="+p,{data:L,prevState:c({},null==g?void 0:g.state)}):A.replace("/digit-ui/citizen/commonPt/property/citizen-otp",{mobileNumber:null==L||null===(a=L.owners)||void 0===a||null===(d=a[0])||void 0===d?void 0:d.mobileNumber,redirectBackTo:"/digit-ui/citizen/commonPt/property/new-application/save-property",redirectData:L}),Promise.resolve()}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,config:s,label:_("SUBMIT"),isDisabled:!S,defaultValues:T,onFormValueChange:function(e,t,n){f.isEqual(t,L)||x(t),t.assemblyDet&&t.locationDet&&t.owners&&!Object.keys(null==n?void 0:n.errors).length?b(!0):b(!1)}}),E&&l.createElement(t.Toast,{error:E.key,label:_(E.label),onClose:function(){y(null)}}))},E=function(e){var t,n,l=e.locationDet,o={city:null==l||null===(t=l.cityCode)||void 0===t?void 0:t.name,doorNo:null==l?void 0:l.houseDoorNo,street:null==l?void 0:l.buildingColonyName,landmark:null==l?void 0:l.landmarkName,locality:{code:(null==l||null===(n=l.locality)||void 0===n?void 0:n.code)||"NA"}};return e.address=o,e},y=function(e){var t,n,l,o,r,i,a,u,c,d,s,v,p,f,m,E,y,_=e.locationDet,g=e.owners,h={},S=[],b=[];return e.ownershipCategory=null==e||null===(t=e.owners)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.ownershipCategory,e.ownershipCategory.includes("INSTITUTIONALPRIVATE")||e.ownershipCategory.includes("INSTITUTIONALGOVERNMENT")?(h.designation=null==g||null===(l=g[0])||void 0===l?void 0:l.designation,h.name=null==g||null===(o=g[0])||void 0===o?void 0:o.institutionName,h.type=null==g||null===(r=g[0])||void 0===r||null===(i=r.institutionType)||void 0===i||null===(a=i.code)||void 0===a||null===(u=a.split("."))||void 0===u?void 0:u[1],h.landlineNumber=null==g||null===(c=g[0])||void 0===c?void 0:c.altContactNumber,h.tenantId=null==_||null===(d=_.cityCode)||void 0===d?void 0:d.code,S.push({altContactNumber:null==g||null===(s=g[0])||void 0===s?void 0:s.altContactNumber,permanentAddress:null==g||null===(v=g[0])||void 0===v?void 0:v.permanentAddress,correspondenceAddress:null==g||null===(p=g[0])||void 0===p?void 0:p.permanentAddress,sameAsPropertyAddress:(null==g||null===(f=g[0])||void 0===f?void 0:f.isCorrespondenceAddress)||(null==g||null===(m=g[0])||void 0===m?void 0:m.isCoresAddr),mobileNumber:null==g||null===(E=g[0])||void 0===E?void 0:E.mobileNumber,name:null==g||null===(y=g[0])||void 0===y?void 0:y.name,ownerType:"NONE",status:"ACTIVE",documents:b}),e.institution=h,e.owners=S):(g.map(function(e){var t,n,l,o;S.push({emailId:null==e?void 0:e.emailId,fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,gender:null==e||null===(t=e.gender)||void 0===t?void 0:t.value,sameAsPropertyAddress:(null==e?void 0:e.isCorrespondenceAddress)||(null==g||null===(n=g[0])||void 0===n?void 0:n.isCoresAddr),mobileNumber:null==e?void 0:e.mobileNumber,name:null==e?void 0:e.name,ownerType:(null==e||null===(l=e.ownerType)||void 0===l?void 0:l.code)||"NONE",permanentAddress:null==e?void 0:e.permanentAddress,relationship:null==e||null===(o=e.relationship)||void 0===o?void 0:o.code,documents:b})}),e.owners=S),e},g=function(e){var t,n,l;return"RESIDENTIAL"==(null==e||null===(t=e.isResdential)||void 0===t?void 0:t.code)?null==e||null===(n=e.isResdential)||void 0===n?void 0:n.code:null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.code},h=function(e){var t,n,l=e.assemblyDet;return n={propertyType:null==l||null===(t=l.BuildingType)||void 0===t?void 0:t.code,usageCategory:g(l),landArea:parseInt(null==l?void 0:l.floorarea),superBuiltUpArea:parseInt(null==l?void 0:l.constructionArea)},e.propertyDetails=n,e},S=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e},b=function(e){var t=o.useTranslation().t;return e.isSuccess?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_SUCCESS"):window.location.href.includes("employee")?t("CS_NEW_PROPERTY_APPLICATION_CREATED_SUCCESS"):t("CS_NEW_PROPERTY_APPLICATION_SUBMITTED_SUCCESS"):e.isLoading?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_PENDING"):t("CS_PROPERTY_APPLICATION_PENDING"):e.isSuccess?void 0:window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_FAILED"):t("CS_PROPERTY_APPLICATION_FAILED")},T={padding:"4px 0px",justifyContent:"space-between"},A=function(e){var n;return l.createElement(t.Banner,{message:b(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.Properties[0].acknowldgementNumber,info:e.isSuccess?e.t("PT_APPLICATION_NO"):"",successful:e.isSuccess})},C=function(e){var i,a,u,d,s,v,p,f,m,_,g,S,b,C=e.onSuccess,P=e.onSelect,O=e.formData,N=e.redirectUrl,D=e.userType,I=o.useTranslation().t,w=r.useLocation(),R=Digit.ULBService.getStateId(),L=Digit.ULBService.getCurrentTenantId(),x=r.useHistory(),M=null==w||null===(i=w.state)||void 0===i?void 0:i.data;P&&(M=null==O||null===(b=O.cptNewProperty)||void 0===b?void 0:b.property);var k=!1,F=Digit.Hooks.pt.useMDMS(R,"PropertyTax","PTWorkflow").data;((null==F||null===(a=F.PropertyTax)||void 0===a?void 0:a.PTWorkfow)||[]).forEach(function(e){e.enable&&e.businessService.includes("WNS")&&(k=!0)});var B=Digit.Hooks.pt.usePropertyAPI(null!==(u=M)&&void 0!==u&&null!==(d=u.locationDet)&&void 0!==d&&d.city?null===(s=M.locationDet)||void 0===s||null===(v=s.city)||void 0===v?void 0:v.code:L,!0),U=Digit.Hooks.pt.usePropertyAPI(null!==(p=M)&&void 0!==p&&null!==(f=p.locationDet)&&void 0!==f&&f.city?null===(m=M.locationDet)||void 0===m||null===(_=m.city)||void 0===_?void 0:_.code:L,!1);return Digit.Hooks.useStore.getInitData(),n.useEffect(function(){try{var e,t,n,l,o="employee"===D?L:null===(e=M)||void 0===e||null===(t=e.locationDet)||void 0===t||null===(n=t.cityCode)||void 0===n?void 0:n.code;M.tenantId=o;var r=function(e){var t,n,l,o,r,i;void 0===e&&(e={});var a=e.PropertyType,u=null===(t=e)||void 0===t||null===(n=t.owners)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.ownershipCategory;e=y(e),e=E(e);var d,s={Property:c({tenantId:(e=h(e)).tenantId,address:e.address,propertyType:a},e.propertyDetails,{ownershipCategory:u,usageCategory:null===(o=e)||void 0===o||null===(r=o.assemblyDet)||void 0===r||null===(i=r.usageCategoryMajor)||void 0===i?void 0:i.code,owners:e.owners,noOfFloors:1,additionalDetails:{isRainwaterHarvesting:!1},creationReason:"CREATE",source:"MUNICIPAL_RECORDS",channel:"SYSTEM"})};return(u.includes("INSTITUTIONALPRIVATE")||u.includes("INSTITUTIONALGOVERNMENT"))&&(s.Property.institution=null===(d=e)||void 0===d?void 0:d.institution),s}(M);r.Property.tenantId=(null==r||null===(l=r.Property)||void 0===l?void 0:l.tenantId)||o,B.mutate(r,{onSuccess:C}),k||B.isLoading&&B.isIdle||B.isSuccess&&setTimeout(function(){if(N){var e,t,n;x.push(N+"?propertyId="+(null==B||null===(e=B.data)||void 0===e||null===(t=e.Properties[0])||void 0===t?void 0:t.propertyId)+"&tenantId="+r.Property.tenantId,c({},null==w||null===(n=w.state)||void 0===n?void 0:n.prevState));var l=null!=N&&N.includes("employee/tl")?1600:300;setTimeout(function(){return window.scrollTo(0,l)},400)}},3e3)}catch(e){}},[]),n.useEffect(function(){var e,t,n,l="employee"===D?L:null===(e=M)||void 0===e||null===(t=e.locationDet)||void 0===t||null===(n=t.city)||void 0===n?void 0:n.code;B.isSuccess&&setTimeout(function(){if(N){var e,t,n;x.push(N+"?propertyId="+(null==B||null===(e=B.data)||void 0===e||null===(t=e.Properties[0])||void 0===t?void 0:t.propertyId)+"&tenantId="+l,c({},null==w||null===(n=w.state)||void 0===n?void 0:n.prevState));var o=null!=N&&N.includes("employee/tl")?1600:300;setTimeout(function(){return window.scrollTo(0,o)},400)}},3e3)},[B]),n.useEffect(function(){if(B.isSuccess&&k)try{var e,t,n,l,o="employee"===D?L:null===(e=M)||void 0===e||null===(t=e.locationDet)||void 0===t||null===(n=t.city)||void 0===n?void 0:n.code;M.tenantId=o;var r=function(e){var t,n,l,o;void 0===e&&(e={});var r=e.PropertyType;e=y(e),e=E(e);var i={Property:c({id:(e=h(e)).id,accountId:e.accountId,acknowldgementNumber:e.acknowldgementNumber,propertyId:e.propertyId,status:e.status||"INWORKFLOW",tenantId:e.tenantId,address:e.address,propertyType:r,ownershipCategory:null===(t=e)||void 0===t?void 0:t.ownershipCategory,owners:e.owners,noOfFloors:1,additionalDetails:{isRainwaterHarvesting:!1}},e.propertyDetails,{creationReason:getCreationReason(e),source:"MUNICIPAL_RECORDS",channel:"CITIZEN",workflow:getWorkflow(e)})},a=JSON.parse(sessionStorage.getItem("propertyInitialObject"));if(checkArrayLength(null==a?void 0:a.units)&&checkIsAnArray(null===(n=i.Property)||void 0===n?void 0:n.units)&&null!==(l=e)&&void 0!==l&&l.isEditProperty){var u,d;a.units=a.units.filter(function(e){return e.active});var s=a.units.map(function(e){return c({},e,{active:!1})});null===(u=i.Property)||void 0===u||(d=u.units).push.apply(d,s)}return checkArrayLength(null==a?void 0:a.owners)&&checkIsAnArray(null===(o=i.Property)||void 0===o?void 0:o.owners)&&(i.Property.owners=[].concat(a.owners)),null!=a&&a.auditDetails&&(i.Property.auditDetails=c({},a.auditDetails)),i}(M);r.Property.tenantId=(null==r||null===(l=r.Property)||void 0===l?void 0:l.tenantId)||o,U.mutate(r,{onSuccess:C}),U.isSuccess&&setTimeout(function(){if(N){var e,t,n,l,o;x.push(N+"?propertyId="+(null==U||null===(e=U.data)||void 0===e||null===(t=e.Properties[0])||void 0===t?void 0:t.propertyId)+"&tenantId="+(null==U||null===(n=U.data)||void 0===n||null===(l=n.Properties[0])||void 0===l?void 0:l.tenantId),c({},null==w||null===(o=w.state)||void 0===o?void 0:o.prevState));var r=null!=N&&N.includes("employee/tl")?1600:300;setTimeout(function(){return window.scrollTo(0,r)},400)}},3e3)}catch(e){}},[B.isSuccess]),B.isLoading||B.isIdle?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(A,{t:I,data:B.data,isSuccess:B.isSuccess,isLoading:B.isIdle||B.isLoading}),B.isSuccess&&l.createElement(t.CardText,null,window.location.href.includes("employee")?I("CS_CREATE_PROPERTY_SUCCESS_EMP_RESPONSE"):I("CS_CREATE_PROPERTY_SUCCESS_CITIZEN_RESPONSE")),!B.isSuccess&&l.createElement(t.CardText,null,I("CS_FILE_PROPERTY_FAILED_RESPONSE")),l.createElement(t.StatusTable,null,B.isSuccess&&l.createElement(t.Row,{rowContainerStyle:T,last:!0,label:I("PT_COMMON_TABLE_COL_PT_ID"),text:null==B||null===(g=B.data)||void 0===g||null===(S=g.Properties[0])||void 0===S?void 0:S.propertyId,textStyle:{whiteSpace:"pre",width:"200%"}})),B.isSuccess&&window.location.href.includes("/citizen/")&&l.createElement(t.SubmitBar,P?{label:I("CS_COMMON_PROCEED"),onSubmit:function(){var e;P&&B.isSuccess&&P("cpt",{details:null==B||null===(e=B.data)||void 0===e?void 0:e.Properties[0]})}}:{label:I("CS_COMMON_PROCEED"),onSubmit:function(){var e,t,n,l,o;N&&x.push(N+"?propertyId="+(null==U||null===(e=U.data)||void 0===e||null===(t=e.Properties[0])||void 0===t?void 0:t.propertyId)+"&tenantId="+(null==U||null===(n=U.data)||void 0===n||null===(l=n.Properties[0])||void 0===l?void 0:l.tenantId),c({},null==w||null===(o=w.state)||void 0===o?void 0:o.prevState))}}))},P=function(e){var n=a.useQueryClient(),i=r.useRouteMatch(),u=(o.useTranslation(),r.useLocation(),r.useHistory()),c=Digit.ULBService.getStateId(),d=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{}),s=d[0],v=d[2],p=Digit.Hooks.pt.useMDMS(c,"PropertyTax","CommonFieldsConfig").isLoading,f=r.useLocation().search,E=new URLSearchParams(f).get("redirectUrl");return p?l.createElement(t.Loader,null):l.createElement(r.Switch,null,l.createElement(r.Route,{exact:!0,path:""+i.path},l.createElement(m,{onSubmit:function(){try{return u.push(i.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:s,userType:"citizen"})),l.createElement(r.Route,{exact:!0,path:i.path+"/save-property"},l.createElement(C,{data:s,onSuccess:function(){v(),n.invalidateQueries("PT_CREATE_PROPERTY")},redirectUrl:E,userType:"citizen"})))},O=[{texts:{header:"SEARCH_PROPERTY",submitButtonLabel:"PT_HOME_SEARCH_RESULTS_BUTTON_SEARCH",text:""},inputs:[{label:"PT_OWNER_MOB_NO_LABEL",type:"mobileNumber",name:"mobileNumber",validation:{pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}},error:"CORE_COMMON_MOBILE_ERROR"},{label:"PT_PROPERTY_ID",description:"CS_PROPERTY_ID_FORMAT_MUST_BE",type:"text",name:"propertyIds",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_PROPERTY_ADDRESS_OLDPID",type:"text",name:"oldPropertyId",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_COMMON_PAYEE_NAME",type:"text",name:"name",validation:{pattern:{value:"[A-Za-z .`'-]{3,63}",message:"PAYMENT_INVALID_NAME"}},error:"PAYMENT_INVALID_NAME"},{label:"PT_DOOR_NUM_LABEL",type:"text",name:"doorNumber",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}},error:"ERR_INVALID_DOOR_NO"}]}],N="function"==typeof Symbol&&Symbol.for,D=N?Symbol.for("react.element"):60103,I=N?Symbol.for("react.portal"):60106,w=N?Symbol.for("react.fragment"):60107,R=N?Symbol.for("react.strict_mode"):60108,L=N?Symbol.for("react.profiler"):60114,x=N?Symbol.for("react.provider"):60109,M=N?Symbol.for("react.context"):60110,k=N?Symbol.for("react.async_mode"):60111,F=N?Symbol.for("react.concurrent_mode"):60111,B=N?Symbol.for("react.forward_ref"):60112,U=N?Symbol.for("react.suspense"):60113,j=N?Symbol.for("react.suspense_list"):60120,H=N?Symbol.for("react.memo"):60115,W=N?Symbol.for("react.lazy"):60116,z=N?Symbol.for("react.block"):60121,V=N?Symbol.for("react.fundamental"):60117,Y=N?Symbol.for("react.responder"):60118,K=N?Symbol.for("react.scope"):60119;function $(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case D:switch(e=e.type){case k:case F:case w:case L:case R:case U:return e;default:switch(e=e&&e.$$typeof){case M:case B:case W:case H:case x:return e;default:return t}}case I:return t}}}function q(e){return $(e)===F}var G={AsyncMode:k,ConcurrentMode:F,ContextConsumer:M,ContextProvider:x,Element:D,ForwardRef:B,Fragment:w,Lazy:W,Memo:H,Portal:I,Profiler:L,StrictMode:R,Suspense:U,isAsyncMode:function(e){return q(e)||$(e)===k},isConcurrentMode:q,isContextConsumer:function(e){return $(e)===M},isContextProvider:function(e){return $(e)===x},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===D},isForwardRef:function(e){return $(e)===B},isFragment:function(e){return $(e)===w},isLazy:function(e){return $(e)===W},isMemo:function(e){return $(e)===H},isPortal:function(e){return $(e)===I},isProfiler:function(e){return $(e)===L},isStrictMode:function(e){return $(e)===R},isSuspense:function(e){return $(e)===U},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===w||e===F||e===L||e===R||e===U||e===j||"object"==typeof e&&null!==e&&(e.$$typeof===W||e.$$typeof===H||e.$$typeof===x||e.$$typeof===M||e.$$typeof===B||e.$$typeof===V||e.$$typeof===Y||e.$$typeof===K||e.$$typeof===z)},typeOf:$},Z=p(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,s=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,E=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,g=e?Symbol.for("react.scope"):60119;function h(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var p=e.type;switch(p){case c:case d:case o:case i:case r:case v:return p;default:var E=p&&p.$$typeof;switch(E){case u:case s:case m:case f:case a:return E;default:return t}}case l:return t}}}var S=d,b=u,T=a,A=n,C=s,P=o,O=m,N=f,D=l,I=i,w=r,R=v,L=!1;function x(e){return h(e)===d}t.AsyncMode=c,t.ConcurrentMode=S,t.ContextConsumer=b,t.ContextProvider=T,t.Element=A,t.ForwardRef=C,t.Fragment=P,t.Lazy=O,t.Memo=N,t.Portal=D,t.Profiler=I,t.StrictMode=w,t.Suspense=R,t.isAsyncMode=function(e){return L||(L=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),x(e)||h(e)===c},t.isConcurrentMode=x,t.isContextConsumer=function(e){return h(e)===u},t.isContextProvider=function(e){return h(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return h(e)===s},t.isFragment=function(e){return h(e)===o},t.isLazy=function(e){return h(e)===m},t.isMemo=function(e){return h(e)===f},t.isPortal=function(e){return h(e)===l},t.isProfiler=function(e){return h(e)===i},t.isStrictMode=function(e){return h(e)===r},t.isSuspense=function(e){return h(e)===v},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===i||e===r||e===v||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===a||e.$$typeof===u||e.$$typeof===s||e.$$typeof===y||e.$$typeof===_||e.$$typeof===g||e.$$typeof===E)},t.typeOf=h}()}),X=p(function(e){e.exports="production"===process.env.NODE_ENV?G:Z}),Q=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;function te(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ne=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,o=te(e),r=1;r<arguments.length;r++){for(var i in n=Object(arguments[r]))J.call(n,i)&&(o[i]=n[i]);if(Q){l=Q(n);for(var a=0;a<l.length;a++)ee.call(n,l[a])&&(o[l[a]]=n[l[a]])}}return o},le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oe=Function.call.bind(Object.prototype.hasOwnProperty),re=function(){};if("production"!==process.env.NODE_ENV){var ie=le,ae={},ue=oe;re=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function ce(e,t,n,l,o){if("production"!==process.env.NODE_ENV)for(var r in e)if(ue(e,r)){var i;try{if("function"!=typeof e[r]){var a=Error((l||"React class")+": "+n+" type `"+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[r]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}i=e[r](t,r,l,n,null,ie)}catch(e){i=e}if(!i||i instanceof Error||re((l||"React class")+": type specification of "+n+" `"+r+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof i+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),i instanceof Error&&!(i.message in ae)){ae[i.message]=!0;var u=o?o():"";re("Failed "+n+" type: "+i.message+(null!=u?u:""))}}}ce.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(ae={})};var de=ce,se=function(){};function ve(){return null}function pe(){}function fe(){}"production"!==process.env.NODE_ENV&&(se=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),fe.resetWarningCache=pe;var me=p(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,l={array:a("array"),bigint:a("bigint"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:i(ve),arrayOf:function(e){return i(function(t,n,l,o,i){if("function"!=typeof e)return new r("Property `"+i+"` of component `"+l+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a))return new r("Invalid "+o+" `"+i+"` of type `"+d(a)+"` supplied to `"+l+"`, expected an array.");for(var u=0;u<a.length;u++){var c=e(a,u,l,o,i+"["+u+"]",le);if(c instanceof Error)return c}return null})},element:i(function(t,n,l,o,i){var a=t[n];return e(a)?null:new r("Invalid "+o+" `"+i+"` of type `"+d(a)+"` supplied to `"+l+"`, expected a single ReactElement.")}),elementType:i(function(e,t,n,l,o){var i=e[t];return X.isValidElementType(i)?null:new r("Invalid "+l+" `"+o+"` of type `"+d(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return i(function(t,n,l,o,i){var a;return t[n]instanceof e?null:new r("Invalid "+o+" `"+i+"` of type `"+((a=t[n]).constructor&&a.constructor.name?a.constructor.name:"<<anonymous>>")+"` supplied to `"+l+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:i(function(e,t,n,l,o){return c(e[t])?null:new r("Invalid "+l+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return i(function(t,n,l,o,i){if("function"!=typeof e)return new r("Property `"+i+"` of component `"+l+"` has invalid PropType notation inside objectOf.");var a=t[n],u=d(a);if("object"!==u)return new r("Invalid "+o+" `"+i+"` of type `"+u+"` supplied to `"+l+"`, expected an object.");for(var c in a)if(oe(a,c)){var s=e(a,c,l,o,i+"."+c,le);if(s instanceof Error)return s}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&se(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),ve;function t(t,n,l,i,a){for(var u=t[n],c=0;c<e.length;c++)if(o(u,e[c]))return null;var d=JSON.stringify(e,function(e,t){return"symbol"===s(t)?String(t):t});return new r("Invalid "+i+" `"+a+"` of value `"+String(u)+"` supplied to `"+l+"`, expected one of "+d+".")}return i(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&se("Invalid argument supplied to oneOfType, expected an instance of array."),ve;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return se("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+v(n)+" at index "+t+"."),ve}return i(function(t,n,l,o,i){for(var a=[],u=0;u<e.length;u++){var c=(0,e[u])(t,n,l,o,i,le);if(null==c)return null;c.data&&oe(c.data,"expectedType")&&a.push(c.data.expectedType)}return new r("Invalid "+o+" `"+i+"` supplied to `"+l+"`"+(a.length>0?", expected one of type ["+a.join(", ")+"]":"")+".")})},shape:function(e){return i(function(t,n,l,o,i){var a=t[n],c=d(a);if("object"!==c)return new r("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+l+"`, expected `object`.");for(var v in e){var p=e[v];if("function"!=typeof p)return u(l,o,i,v,s(p));var f=p(a,v,l,o,i+"."+v,le);if(f)return f}return null})},exact:function(e){return i(function(t,n,l,o,i){var a=t[n],c=d(a);if("object"!==c)return new r("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+l+"`, expected `object`.");var v=ne({},t[n],e);for(var p in v){var f=e[p];if(oe(e,p)&&"function"!=typeof f)return u(l,o,i,p,s(f));if(!f)return new r("Invalid "+o+" `"+i+"` key `"+p+"` supplied to `"+l+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=f(a,p,l,o,i+"."+p,le);if(m)return m}return null})}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function r(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function i(e){function t(t,n,l,o,i,a,u){if(o=o||"<<anonymous>>",a=a||l,u!==le){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}return null==n[l]?t?new r(null===n[l]?"The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,l,o,i,a)}process;var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){return i(function(t,n,l,o,i,a){var u=t[n];return d(u)!==e?new r("Invalid "+o+" `"+i+"` of type `"+s(u)+"` supplied to `"+l+"`, expected `"+e+"`.",{expectedType:e}):null})}function u(e,t,n,l,o){return new r((e||"React class")+": "+t+" type `"+n+"."+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var l=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!l)return!1;var o,r=l.call(t);if(l!==t.entries){for(;!(o=r.next()).done;)if(!c(o.value))return!1}else for(;!(o=r.next()).done;){var i=o.value;if(i&&!c(i[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function s(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){var t=s(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return r.prototype=Error.prototype,l.checkPropTypes=de,l.resetWarningCache=de.resetWarningCache,l.PropTypes=l,l}(X.isElement):function(){function e(e,t,n,l,o,r){if(r!==le){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fe,resetWarningCache:pe};return n.PropTypes=n,n}()}),Ee={description:"PT_SEARCH_OR_DESC",descriptionStyles:{fontWeight:"300",color:"#505A5F",marginTop:"0px",textAlign:"center",marginBottom:"20px",maxWidth:"540px"}},ye=function(e){var i,a,u,d,s,v,p,m=e.config,E=e.onSelect,y=e.redirectToUrl,_=o.useTranslation().t,g=r.useHistory(),h=Digit.Hooks.useQueryParams().action,S=void 0===h?0:h,b=n.useState({}),T=b[0],A=b[1],C=n.useState(null),P=C[0],O=C[1];sessionStorage.setItem("VisitedCommonPTSearch",!0),sessionStorage.setItem("VisitedLightCreate",!1);var N=null===(i=Digit.Hooks.pt.useTenants())||void 0===i?void 0:i.sort(function(e,t){var n,l;return null==e||null===(n=e.i18nKey)||void 0===n||null===(l=n.localeCompare)||void 0===l?void 0:l.call(n,null==t?void 0:t.i18nKey)});N=N||(null===(a=Digit.Hooks.tl.useTenants())||void 0===a?void 0:a.sort(function(e,t){var n,l;return null==e||null===(n=e.i18nKey)||void 0===n||null===(l=n.localeCompare)||void 0===l?void 0:l.call(n,null==t?void 0:t.i18nKey)}));var D=n.useState(),I=D[0],w=D[1],R=n.useState(),L=R[0],x=R[1],M=n.useState(!1),k=M[0],F=M[1],B=window.Digit.Utils.browser.isMobile(),U=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:null==T?void 0:T.city,filters:null==T?void 0:T.filters,auth:!0,configs:{enabled:Object.keys(T).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),j=U.data,H=U.isLoading,W=U.error;n.useEffect(function(){var e,t,n;(null==T||null===(e=T.filters)||void 0===e||!e.mobileNumber||1!=(null===(t=Object.values(null==T?void 0:T.filters))||void 0===t||null===(n=t.filter(function(e){return void 0!==e}))||void 0===n?void 0:n.length))&&(null==j?void 0:j.Properties.length)>0&&V.maxResultValidation&&(null==j?void 0:j.Properties.length)>V.maxPropertyResult&&!k&&O({error:!0,warning:!0,label:"ERR_PLEASE_REFINED_UR_SEARCH"})},[j]),n.useEffect(function(){P&&"ERR_PLEASE_REFINED_UR_SEARCH"!==(null==P?void 0:P.label)&&"NO_PROPERTIES_FOUND"!==(null==P?void 0:P.label)&&O(null)},[S,H]),n.useEffect(function(){var e;!H&&j&&T&&(null==j||null===(e=j.Properties)||void 0===e?void 0:e.length)<=0&&O({error:!0,warning:!0,label:"NO_PROPERTIES_FOUND"})},[null==j||null===(u=j.Properties)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.propertyId,H]),n.useLayoutEffect(function(){!function e(){var t=document.querySelector("div.action-bar-wrap");t?(t.style.position="static",t.style.padding="8px 0",t.style.boxShadow="none",t.style.marginBottom="16px",t.style.textAlign="left",t.style.zIndex="0"):setTimeout(function(){e()},100)}()},[]);var z=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:function(e){var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),V=z.data,Y=z.isLoading,K=m.inputs,$=K[0],q=K[1],G=K[2],Z=K[3],X=K[4],Q=[{body:[{type:"custom",populators:{name:"addParam",defaultValue:{code:0,name:_("PT_KNOW_PTID")},customProps:{t:_,isMandatory:!0,optionsKey:"name",options:[{code:0,name:_("PT_KNOW_PTID")},{code:1,name:_("PT_SEARCH_DOOR_NO")}]},component:function(e,n){return l.createElement(t.RadioButtons,c({},n,{selectedOption:e.value,onSelect:function(t){null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNumber",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),g.replace(g.location.pathname+"?action="+(0==S?1:0))}}))}}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:_,isMandatory:!0,option:[].concat(N),optionKey:"i18nKey"},component:function(e,n){return l.createElement(t.Dropdown,c({},n,{selected:e.value,select:function(t){var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==I&&e.setValue("locality",null),e.onChange(t)}}))}}},{label:_("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},c({label:$.label,type:$.type,populators:{defaultValue:"",name:$.name,validation:null==$?void 0:$.validation}},Ee,{isMandatory:!1,isInsideBox:!0,placementinbox:1}),c({label:"",labelChildren:l.createElement("div",{className:"tooltip"},l.createElement("div",{style:{display:"flex",gap:"0 4px"}},l.createElement("h2",null,_(q.label)),l.createElement(t.InfoBannerIcon,{fill:"#0b0c0c"}),l.createElement("span",{className:"tooltiptext",style:{position:"absolute",width:"72%",marginLeft:"50%",fontSize:"medium"}},_(q.description)+" "+(null==V?void 0:V.propertyIdFormat)))),type:q.type,populators:{name:q.name,defaultValue:"",validation:null==q?void 0:q.validation}},Ee,{isMandatory:!1,isInsideBox:!0,placementinbox:1}),{label:G.label,type:G.type,populators:{name:G.name,defaultValue:"",validation:null==G?void 0:G.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}],body1:[{type:"custom",populators:{name:"addParam1",defaultValue:{code:1,name:_("PT_SEARCH_DOOR_NO")},customProps:{t:_,isMandatory:!0,optionsKey:"name",options:[{code:0,name:_("PT_KNOW_PTID")},{code:1,name:_("PT_SEARCH_DOOR_NO")}]},component:function(e,n){return l.createElement(t.RadioButtons,c({},n,{selectedOption:e.value,onSelect:function(t){null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNumber",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),g.replace(g.location.pathname+"?action="+(0==S?1:0))}}))}}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:_,isMandatory:!0,option:[].concat(N),optionKey:"i18nKey"},component:function(e,n){return l.createElement(t.Dropdown,c({},n,{selected:e.value,select:function(t){var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==I&&e.setValue("locality",null),e.onChange(t)}}))}}},{label:"PT_SELECT_LOCALITY",type:"custom",isMandatory:!0,populators:{name:"locality",defaultValue:"",rules:{required:!0},customProps:{},component:function(e,n){return l.createElement(t.Localities,{selectLocality:function(t){e.onChange(t)},tenantId:I,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10",maxHeight:"300px"},selected:null==L?void 0:L.locality,disable:!I,disableLoader:!0})}}},{label:_("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},{label:X.label,type:X.type,populators:{defaultValue:"",name:X.name,validation:null==X?void 0:X.validation},isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:Z.label,type:Z.type,populators:{defaultValue:"",name:Z.name,validation:null==Z?void 0:Z.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}]}];if(Y)return l.createElement(t.Loader,null);var J,ee,te,ne,le,oe,re,ie,ae,ue,ce=!(V.maxResultValidation&&(null==T||null===(s=T.filters)||void 0===s||!s.mobileNumber||1!=(null===(v=Object.values(null==T?void 0:T.filters))||void 0===v||null===(p=v.filter(function(e){return void 0!==e}))||void 0===p?void 0:p.length)))||(null==j?void 0:j.Properties.length)<V.maxPropertyResult&&(null==P||null!==P&&!(null!=P&&P.error));if(j&&!H&&!W&&ce)if(ue=c({},T.filters,{city:T.city}),(null==T||null===(le=T.filters)||void 0===le||!le.mobileNumber||1!=(null===(oe=Object.values(null==T?void 0:T.filters))||void 0===oe||null===(re=oe.filter(function(e){return void 0!==e}))||void 0===re?void 0:re.length))&&null!=V&&V.ptSearchCount&&null!=T&&null!==(ie=T.filters)&&void 0!==ie&&ie.locality&&H&&null!=H&&null!==(ae=H.Properties)&&void 0!==ae&&ae.length&&H.Properties.length>V.ptSearchCount)!P&&O({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"});else if("MUTATION"===m.action)E(m.key,ue,null,null,null,{queryParams:c({},ue)});else if(y||window.location.href.includes("digit-ui/citizen/commonpt/property/citizen-search"))g.push("/digit-ui/citizen/commonPt/property/search-results?"+Object.keys(ue).map(function(e){return e+"="+ue[e]}).join("&")+(y?"&redirectToUrl="+y:""));else{var de,se,ve,pe,fe,me,ye,_e,ge,he,Se;Se=0==S?{city:null===(de=ue)||void 0===de?void 0:de.city,mobileNumber:(null===(se=ue)||void 0===se?void 0:se.mobileNumber)||"",propertyIds:(null===(ve=ue)||void 0===ve?void 0:ve.propertyIds)||"",oldPropertyIds:(null===(pe=ue)||void 0===pe?void 0:pe.oldPropertyIds)||"",locality:"",doorNo:"",name:""}:{city:null===(fe=ue)||void 0===fe?void 0:fe.city,locality:(null===(me=ue)||void 0===me?void 0:me.locality)||"",doorNo:(null===(ye=ue)||void 0===ye?void 0:ye.doorNumber)||(null===(_e=ue)||void 0===_e?void 0:_e.doorNo)||"",name:(null===(ge=ue)||void 0===ge?void 0:ge.name)||"",mobileNumber:"",propertyIds:"",oldPropertyIds:""},!H&&(null==j||null===(he=j.Properties)||void 0===he?void 0:he.length)>0&&E("cptSearchQuery",Se,null,null,null,{queryParams:c({},Se)})}return W&&!P&&O({error:!0,label:(null==W||null===(J=W.response)||void 0===J||null===(ee=J.data)||void 0===ee||null===(te=ee.Errors)||void 0===te||null===(ne=te[0])||void 0===ne?void 0:ne.code)||W}),1==S&&(Q[0].body=[].concat(Q[0].body1)),l.createElement("div",{style:{marginTop:"16px",marginBottom:"16px",backgroundColor:"white",maxWidth:"960px"}},l.createElement(t.FormComposer,{onSubmit:function(e){try{var t,n;if(V.maxResultValidation&&(null==j?void 0:j.Properties.length)>0&&(null==j?void 0:j.Properties.length)>V.maxPropertyResult&&k)return F(!0),Promise.resolve();if(null==e||null===(t=e.city)||void 0===t||!t.code)return O({error:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(0==S){var l,o,r,i,a,u,d,s,v,p,f,m,E,y,_;if(!(null!=e&&e.mobileNumber||null!=e&&e.propertyIds||null!=e&&e.oldPropertyId))return O({error:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.mobileNumber&&(null===(l=e.mobileNumber)||void 0===l||!l.match(null==$||null===(o=$.validation)||void 0===o||null===(r=o.pattern)||void 0===r?void 0:r.value)))return O({error:!0,label:null==$||null===(p=$.validation)||void 0===p||null===(f=p.pattern)||void 0===f?void 0:f.message}),Promise.resolve();if(null!=e&&e.propertyIds&&(null===(i=e.propertyIds)||void 0===i||!i.match(null==q||null===(a=q.validation)||void 0===a||null===(u=a.pattern)||void 0===u?void 0:u.value)))return O({error:!0,label:null==q||null===(m=q.validation)||void 0===m||null===(E=m.pattern)||void 0===E?void 0:E.message}),Promise.resolve();if(null!=e&&e.oldPropertyId&&(null===(d=e.oldPropertyId)||void 0===d||!d.match(null==G||null===(s=G.validation)||void 0===s||null===(v=s.pattern)||void 0===v?void 0:v.value)))return O({error:!0,label:null==G||null===(y=G.validation)||void 0===y||null===(_=y.pattern)||void 0===_?void 0:_.message}),Promise.resolve()}else{var g,h,b,T,C,N,D,I,w,R,L;if(null==e||null===(g=e.locality)||void 0===g||!g.code)return O({error:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(!(null!=e&&e.doorNumber||null!=e&&e.name))return O({error:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.name&&(null===(h=e.name)||void 0===h||!h.match(null==Z||null===(b=Z.validation)||void 0===b||null===(T=b.pattern)||void 0===T?void 0:T.value)))return O({error:!0,label:null==Z||null===(I=Z.validation)||void 0===I||null===(w=I.pattern)||void 0===w?void 0:w.message}),Promise.resolve();if(null!=e&&e.doorNumber&&(null===(C=e.doorNumber)||void 0===C||!C.match(null==X||null===(N=X.validation)||void 0===N||null===(D=N.pattern)||void 0===D?void 0:D.value)))return O({error:!0,label:null==X||null===(R=X.validation)||void 0===R||null===(L=R.pattern)||void 0===L?void 0:L.message}),Promise.resolve()}"ERR_PLEASE_REFINED_UR_SEARCH"===(null==P?void 0:P.label)&&"NO_PROPERTIES_FOUND"===(null==P?void 0:P.label)||O(null),null!=e&&e.doorNumber&&""!==(null==e?void 0:e.doorNumber)&&""!==(null==e?void 0:e.propertyIds)&&(e.propertyIds="");var x,M,B,U=Object.keys(e).filter(function(t){return e[t]}).reduce(function(t,n){var l;return c({},t,((l={})[n]="object"==typeof e[n]?e[n].code:e[n],l))},{}),H=U.city;if(U.doorNo=U.doorNumber||(null===(n=U)||void 0===n?void 0:n.doorNo),delete U.addParam,delete U.addParam1,delete U.city,"0"===S)U={oldPropertyId:null===(x=U)||void 0===x?void 0:x.oldPropertyId,mobileNumber:null===(M=U)||void 0===M?void 0:M.mobileNumber,propertyIds:null===(B=U)||void 0===B?void 0:B.propertyIds};else if("1"===S){var W,z,Y,K;U={name:null===(W=U)||void 0===W?void 0:W.name,doorNo:(null===(z=U)||void 0===z?void 0:z.doorNumber)||(null===(Y=U)||void 0===Y?void 0:Y.doorNo),locality:null===(K=U)||void 0===K?void 0:K.locality}}return A({city:H,filters:U}),Promise.resolve()}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,config:Q,label:m.texts.submitButtonLabel,heading:_(m.texts.header),text:_(m.texts.text),headingStyle:{fontSize:"32px",marginBottom:"16px",fontFamily:"Roboto Condensed,sans-serif"},onFormValueChange:function(e,t,n){var l=null==t?void 0:t.city;(null==l?void 0:l.code)!==I&&w(null==l?void 0:l.code),f.isEqual(t,L)||x(t)},cardStyle:{marginBottom:"0",maxWidth:"960px"}}),l.createElement("span",{className:"link",style:B?{display:"flex",justifyContent:"center",paddingBottom:"16px"}:{display:"flex",justifyContent:"left",paddingBottom:"16px",marginLeft:"45px"}},l.createElement(r.Link,{to:window.location.href.includes("/ws/")?"/digit-ui/citizen/ws/create-application/create-property":window.location.href.includes("/tl/tradelicence/")?"/digit-ui/citizen/tl/tradelicence/new-application/create-property":"/digit-ui/citizen/commonpt/property/new-application"},_("CPT_REG_NEW_PROPERTY"))),P&&l.createElement(t.Toast,{isDleteBtn:!0,error:P.error,warning:P.warning,label:_(P.label),onClose:function(){O(null)}}))};ye.propTypes={loginParams:me.any},ye.defaultProps={loginParams:null};var _e=function(e){var t=e.onSelect,i=o.useTranslation().t,a=r.useRouteMatch().path,u=r.useLocation().search,d=new URLSearchParams(u).get("redirectToUrl"),s=n.useMemo(function(){return O.map(function(e){var t={};for(var n in e.texts)t[n]=i(e.texts[n]);return c({},e,{texts:t})},[O])});return l.createElement(r.Switch,null,l.createElement(r.Route,{path:""+a,exact:!0},l.createElement(ye,{config:s[0],onSelect:t,redirectToUrl:d})))},ge=[{texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"PT_COMMONS_SELECT_PLACEHOLDER"},labels:[{label:"PT_DUES_ARE_PENDING",key:"total_due",noteStyle:{fontSize:"24px",fontWeight:"bold"},notePrefix:"₹ "},{label:"TL_PROPERTY_ID",key:"property_id"},{label:"PT_OWNERS_NAME",key:"owner_name"},{label:"PT_COMMON_COL_ADDRESS",key:"property_address"},{label:"PT_COMMON_TABLE_COL_STATUS_LABEL",key:"status"}]}];function he(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Se={type:"login"},be=function(e){var i,a,u,d,s,v,p,m,E,y,_=e.template,g=e.header,h=e.actionButtonLabel,S=e.isMutation,b=e.onSelect,T=e.clearParams,A=void 0===T?function(){}:T,C=e.stateCode,P=e.redirectToUrl,O=e.searchQuery,N=o.useTranslation().t,D=n.useRef(),I=Digit.Hooks.useQueryParams(),w=I.mobileNumber,R=I.propertyIds,L=I.oldPropertyIds,x=I.locality,M=I.city,k=I.doorNo,F=I.name,B=I.PToffset,U={},j=n.useState(!1),H=j[0],W=j[1],z=Digit.ComponentRegistryService.getComponent("WSInfoLabel"),V=B;isNaN(parseInt(V))?E=5:(y=V,E=parseInt(V)+5);var Y=isNaN(parseInt(V))?{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:"0"}:{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:y};Digit.Hooks.useClickOutside(D,function(){W(!1)},H),(w||O&&O.mobileNumber)&&(U.mobileNumber=w||(null==O?void 0:O.mobileNumber)),(R||O&&O.propertyIds)&&(U.propertyIds=R||(null==O?void 0:O.propertyIds)),(L||O&&O.oldPropertyIds)&&(U.oldPropertyIds=L||(null==O?void 0:O.oldPropertyIds)),(x||O&&O.locality)&&(U.locality=x||(null==O?void 0:O.locality)),(k||O&&O.doorNo)&&(U.doorNo=k||(null==O?void 0:O.doorNo)),(F||O&&O.name)&&(U.name=F||(null==O?void 0:O.name)),(x||O&&O.locality)&&(U.limit=Y.limit,U.sortOrder=Y.sortOrder,U.sortBy=Y.sortBy,U.offset=Y.offset);var K=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS",null)[1],$=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS_LAST_PATH",null)[1],q=(r.useRouteMatch(),Digit.Hooks.useQueryParams());n.useEffect(function(){K([]),A(),$("")},[]);var G=Digit.ULBService.getCurrentTenantId(),Z=M||(null==O?void 0:O.city),X=Digit.Hooks.pt.usePropertySearch(Z?{tenantId:Z,filters:U,auth:!0}:{filters:U,auth:!0},{privacy:Digit.Utils.getPrivacyObject()}),Q=null==X||null===(i=X.data)||void 0===i||null===(a=i.Properties)||void 0===a?void 0:a.map(function(e){return e.propertyId}).join(","),J=Digit.Hooks.useFetchBillsForBuissnessService(c({businessService:"PT"},w?{mobileNumber:w,consumerCode:Q}:{consumerCode:Q},{tenantId:Z}),{enabled:!!Q,retry:!1}),ee=r.useHistory();if(J.isLoading||X.isLoading)return l.createElement(t.Loader,null);if(X.error||!Q)return l.createElement("div",{style:{height:"150px"}},l.createElement(t.Card,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},N("CS_PT_NO_PROPERTIES_FOUND")));var te={};null==J||null===(u=J.data)||void 0===u||null===(d=u.Bill)||void 0===d||d.forEach(function(e){null!=e&&e.consumerCode&&(te[null==e?void 0:e.consumerCode]={total_due:null==e?void 0:e.totalAmount,bil_due__date:new Date(null==e?void 0:e.billDate).toDateString()})});var ne=S?null==X||null===(s=X.data)||void 0===s||null===(v=s.Properties)||void 0===v?void 0:v.filter(function(e){return"ACTIVE"===e.status}):null==X||null===(p=X.data)||void 0===p?void 0:p.Properties,le=null==ne?void 0:ne.map(function(e){var t,n,l,o,r,i,a,u=(null==e?void 0:e.address)||{};return{property_id:null==e?void 0:e.propertyId,owner_name:null===(t=((null==e?void 0:e.owners)||[])[0])||void 0===t?void 0:t.name,property_address:[u.doorNo||"",u.buildingName||"",u.street||"",N("TENANTS_MOHALLA_"+(null===(n=u.locality)||void 0===n?void 0:n.code))||"",N(u.tenantId)||""].filter(function(e){return e}).join(", "),total_due:(null===(l=te[null==e?void 0:e.propertyId])||void 0===l?void 0:l.total_due)||0,bil_due__date:(null===(o=te[null==e?void 0:e.propertyId])||void 0===o?void 0:o.bil_due__date)||N("N/A"),status:N(e.status),owner_mobile:null===(r=((null==e?void 0:e.owners)||[])[0])||void 0===r?void 0:r.mobileNumber,privacy:{property_address:{uuid:null==e||null===(i=e.owners)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.uuid,fieldName:["doorNo","street","landmark"],model:"Property",showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==e?void 0:e.tenantId,propertyIds:null==e?void 0:e.propertyId},jsonPath:"Properties[0].address.street",isArray:!1,d:function(e){return(f.get(e,"Properties[0].address.doorNo")?f.get(e,"Properties[0].address.doorNo")+", ":"")+(f.get(e,"Properties[0].address.street")?f.get(e,"Properties[0].address.street")+", ":"")+(f.get(e,"Properties[0].address.landmark")?""+f.get(e,"Properties[0].address.landmark"):"")}}}}}}),oe=function(e,t){return(null==e?void 0:e.from)||(null==t?void 0:t.from)||"/digit-ui/citizen"};return l.createElement("div",{className:"static",style:{marginTop:"16px"}},l.createElement("div",{className:"static-wrapper"},g&&l.createElement(t.Header,{style:{marginLeft:"8px"}},N(g)," (",null==le?void 0:le.length,")"),l.createElement(z,{t:N}),l.createElement(t.ResponseComposer,{data:le,template:_,actionButtonLabel:h,onSubmit:function(e){try{return Promise.resolve(function(){if(!b){var t={mobileNumber:null==e?void 0:e.owner_mobile,tenantId:C,userType:Digit.UserService.getType()};return Promise.resolve(function(e){return Promise.resolve(he(function(){return Promise.resolve(Digit.UserService.sendOtp(e,C)).then(function(e){return[e,null]})},function(e){return[null,e]}))}({otp:c({},t,Se)})).then(function(n){if(n[1])ee.push("/digit-ui/citizen/",{from:oe(location.state,q),data:t});else{var l="/digit-ui/citizen/commonPt/property/link-success/"+e.property_id;P&&(l=P+"?propertyId="+e.property_id+"&tenantId="+G),ee.replace("/digit-ui/citizen/commonPt/property/citizen-otp",{from:oe(location.state,q),mobileNumber:e.owner_mobile,redirectBackTo:l})}})}b("cptId",{id:e.property_id})}())}catch(e){return Promise.reject(e)}}})),H?l.createElement(t.Modal,{hideSubmit:!0,isDisabled:!1,popupStyles:{width:"319px",height:"250px",margin:"auto"},formId:"modal-action"},l.createElement("div",{ref:D},l.createElement(t.KeyNote,{keyValue:N("PT_AMOUNT_DUE"),note:"₹ "+(null==H||null===(m=H.total_due)||void 0===m?void 0:m.toLocaleString("en-IN")),noteStyle:{fontSize:"24px",fontWeight:"bold"}}),l.createElement("p",null,N("PT_YOU_HAVE")+" ₹ "+(null==H?void 0:H.total_due.toLocaleString("en-IN"))+" "+N("PT_PENDING_AMOUNT")+" "+N("PT_INORDER_TO_TRANSFER")),l.createElement(t.SubmitBar,{submit:!1,onSubmit:function(){ee.push("/digit-ui/citizen/payment/my-bills/PT/"+H.property_id,{tenantId:G})},style:{marginTop:"14px",width:"100%"},label:N("PT_PROCEED_PAYMENT")}))):null,!(null!=le&&le.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},N("PT_NO_PROP_FOUND_MSG")),0!==(null==le?void 0:le.length)&&(5==(null==le?void 0:le.length)||50==(null==le?void 0:le.length))&&(x||O&&O.locality)&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},N("PT_LOAD_MORE_MSG")," ",l.createElement("span",{className:"link"},l.createElement(r.Link,{to:"/digit-ui/citizen/pt/property/search-results?mobileNumber="+(w||O.mobileNumber?w||(null==O?void 0:O.mobileNumber):"")+"&propertyIds="+(R||null!=O&&O.propertyIds?R||(null==O?void 0:O.propertyIds):"")+"&oldPropertyIds="+(L||null!=O&&O.oldPropertyIds?L||(null==O?void 0:O.oldPropertyIds):"")+"&doorNo="+(k||null!=O&&O.doorNo?k||(null==O?void 0:O.doorNo):"")+"&name="+(F||null!=O&&O.name?F||(null==O?void 0:O.name):"")+"&city="+(M||"")+"&locality="+(x||null!=O&&O.locality?x||(null==O?void 0:O.locality):"")+"&PToffset="+E},N("PT_COMMON_CLICK_HERE"))))))};be.propTypes={template:me.any,header:me.string,actionButtonLabel:me.string},be.defaultProps={template:[],header:null,actionButtonLabel:null};var Te=[{texts:{header:"CS_LOGIN_PROVIDE_MOBILE_NUMBER",cardText:"CS_LOGIN_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"},inputs:[{label:"CORE_COMMON_MOBILE_NUMBER",type:"text",name:"mobileNumber",error:"ERR_HRMS_INVALID_MOB_NO",validation:{required:!0,minLength:10,maxLength:10}}]},{texts:{header:"CS_LOGIN_OTP",cardText:"CS_LOGIN_OTP_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"}},{texts:{header:"CS_LOGIN_PROVIDE_NAME",cardText:"CS_LOGIN_NAME_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"},inputs:[{label:"CORE_COMMON_NAME",type:"text",name:"name",error:"CORE_COMMON_NAME_VALIDMSG",validation:{required:!0,minLength:1,pattern:/^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i}}]}],Ae=function(e){var t=e.config,i=e.onSelect,a=e.clearParams,u=e.formData,d=e.stateCode,s=o.useTranslation().t,v=r.useRouteMatch().path,p=r.useLocation().search,f=new URLSearchParams(p).get("redirectToUrl"),m=ge,E=n.useMemo(function(){var e;return null==m||null===(e=m.map)||void 0===e?void 0:e.call(m,function(e){var t={};for(var n in e.texts)t[n]=s(e.texts[n]);return c({},e,{texts:t})})},[m]);return l.createElement(r.Switch,null,l.createElement(r.Route,{path:""+v,exact:!0},l.createElement(be,{template:E[0].labels,header:E[0].texts.header,actionButtonLabel:E[0].texts.actionButtonLabel,t:s,isMutation:"MUTATION"===(null==t?void 0:t.action),onSelect:i,config:t,clearParams:a,stateCode:d,redirectToUrl:f,searchQuery:null==u?void 0:u.cptSearchQuery})))},Ce=function(e){var i=e.onSelect,a=o.useTranslation().t,u=r.useParams().propertyIds,c=r.useHistory(),d=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:u}},{filters:{propertyIds:u}}).data,s=n.useState(function(){return(null==d?void 0:d.Properties[0])||" "}),v=s[0],p=s[1];return n.useEffect(function(){d&&p(null==d?void 0:d.Properties[0])},[d]),l.createElement(l.Fragment,null,l.createElement(t.Header,null,a("PT_PROPERTY_DETAILS")),l.createElement("div",null,l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:a("PT_PROPERTY_PTUID"),text:""+(v.propertyId||a("CS_NA")),textStyle:{whiteSpace:"pre"}})),l.createElement(t.SubmitBar,i?{submit:!1,label:a("CS_COMMONS_NEXT"),onSubmit:function(){i&&i("propertyId",u)}}:{submit:!1,label:a("PT_PROPERTY_CREATE"),onSubmit:function(){return c.push("/digit-ui/citizen/commonPt/property/new-application")}}))))},Pe=function(e){var o,r,i,a=e.config,u=e.otp,c=e.onOtpChange,d=e.onResend,s=e.onSelect,v=e.t,p=e.error,f=e.userType,m=void 0===f?"citizen":f,E=n.useState(30),y=E[0],_=E[1];o=function(){_(y-1)},r=y>0?1e3:null,i=n.useRef(),n.useEffect(function(){i.current=o},[o]),n.useEffect(function(){if(null!==r){var e=setInterval(function(){i.current()},r);return function(){return clearInterval(e)}}},[r]);var g=function(){d(),_(2)};return"employee"===m?l.createElement(n.Fragment,null,l.createElement(t.OTPInput,{length:6,onChange:c,value:u}),y>0?l.createElement(t.CardText,null,v("CS_RESEND_ANOTHER_OTP")+" "+y+" "+v("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:g},v("CS_RESEND_OTP")),!p&&l.createElement(t.CardLabelError,null,v("CS_INVALID_OTP"))):l.createElement(t.FormStep,{onSelect:s,config:a,t:v,isDisabled:6!==(null==u?void 0:u.length)},l.createElement(t.OTPInput,{length:6,onChange:c,value:u}),y>0?l.createElement(t.CardText,null,v("CS_RESEND_ANOTHER_OTP")+" "+y+" "+v("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:g},v("CS_RESEND_OTP")),!p&&l.createElement(t.CardLabelError,null,v("CS_INVALID_OTP")))},Oe=["ResponseInfo","UserRequest"],Ne=function(e){var t=o.useTranslation().t,i=(r.useRouteMatch(),r.useLocation()),a=r.useHistory(),u=n.useState({mobileNumber:i.state.mobileNumber,otp:""}),s=u[0],v=u[1],p=n.useState(!0),f=p[0],m=p[1],E=function(){return Digit.UserService.getType()},y=n.useMemo(function(){return Te.map(function(e){var n={};for(var l in e.texts)n[l]=t(e.texts[l]);return c({},e,{texts:n})},[Te])});return l.createElement(Pe,{config:c({},y[1],{texts:c({},y[1].texts,{cardText:y[1].texts.cardText+" "+(s.mobileNumber||"")})}),onOtpChange:function(e){v(c({},s,{otp:e}))},onResend:function(){try{var t={mobileNumber:s.mobileNumber,tenantId:e.stateCode,userType:E()};return Promise.resolve(sendOtp({otp:c({},t,TYPE_LOGIN)})).then(function(){})}catch(e){return Promise.reject(e)}},onSelect:function(){try{var t=he(function(){m(!0);var t={username:s.mobileNumber,password:s.otp,tenantId:e.stateCode,userType:E()};return Promise.resolve(Digit.UserService.authenticate(t)).then(function(e){var t,n,l;d(e,Oe),null!==(t=i.state)&&void 0!==t&&t.redirectBackTo?a.replace(null===(n=i.state)||void 0===n?void 0:n.redirectBackTo,{data:null===(l=i.state)||void 0===l?void 0:l.redirectData}):a.replace("digit-ui/citizen/")})},function(){m(!1)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},otp:s.otp,error:f,t:t})},De=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},Ie=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},we=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ie,null))},Re=function(e){var o,r,i=e.t,a=e.action,u=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,p=e.businessService,f=e.moduleCode,m=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(o=a.assigneeRoles)||void 0===o||null===(r=o.map)||void 0===r?void 0:r.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),E=m.data,y=m.isLoading,_=Digit.Hooks.pt.useMDMS(u,p,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),g=_.isLoading,h=_.data,S=n.useState({}),b=S[0],T=S[1],A=n.useState({})[0],C=n.useState([]),P=C[0],O=C[1],N=n.useState(null),D=N[0],I=N[1],w=n.useState(null),R=w[0],L=w[1],x=n.useState(null),M=x[0],k=x[1],F=n.useState(null)[1],B=n.useState([]),U=B[0],j=B[1],H=n.useState(null),W=H[0],z=H[1];function V(e){L(e.target.files[0])}return n.useState(!1),n.useEffect(function(){var e;h&&h["egf-master"]&&j(null===(e=h["egf-master"])||void 0===e?void 0:e.FinancialYear)},[h]),n.useEffect(function(){var e;O(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[E]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(R){var e=function(){if(R.size>=5242880)F(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",R,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?k(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):F(i("CS_FILE_UPLOAD_ERROR"))})},function(){F(i("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[R]),n.useEffect(function(){a&&T(null!=a&&a.showFinancialYearsModal?function(e){var n=e.action,o=e.financialYears,r=e.selectedFinancialYear,i=e.setSelectedFinancialYear;return{label:{heading:"WF_"+n.action+"_APPLICATION",submit:"WF_PT.CREATE_"+n.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:(0,e.t)("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:l.createElement(t.RadioButtons,{options:o,optionsKey:"name",onSelect:i,selectedOption:r})}]}]}}({t:i,action:a,financialYears:U,selectedFinancialYear:W,setSelectedFinancialYear:z}):function(e){var n,o=e.t,r=e.action,i=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile;return{label:{heading:"WF_"+(null==r?void 0:r.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==r?void 0:r.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:r.isTerminateState||"SENDBACKTOCITIZEN"===(null==r?void 0:r.action)?null:o(e.assigneeLabel||"WF_ROLE_"+(null===(n=r.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:r.isTerminateState||"SENDBACKTOCITIZEN"===(null==r?void 0:r.action)?null:l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:o("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("ES_PT_ATTACH_FILE")+(r.docUploadRequired?" *":""),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},showHint:!0,hintText:o("PT_ATTACH_RESTRICTIONS_SIZE"),message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}}({t:i,action:a,approvers:P,selectedApprover:D,setSelectedApprover:I,selectFile:V,uploadedFile:M,setUploadedFile:k,businessService:p}))},[a,P,U,W,M]),a&&b.form?l.createElement(t.Modal,{headerBarMain:l.createElement(De,{label:i(b.label.heading)}),headerBarEnd:l.createElement(we,{onClick:d}),actionCancelLabel:i(b.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:i(b.label.submit),actionSaveOnSubmit:function(){},isDisabled:a.showFinancialYearsModal?!W:y||(null==a?void 0:a.docUploadRequired)&&!M,formId:"modal-action"},g?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:b.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if(null!=a&&a.showFinancialYearsModal)s({customFunctionToExecute:null==a?void 0:a.customFunctionToExecute,Assessment:{financialYear:null==W?void 0:W.name,propertyId:null==v?void 0:v.propertyId,tenantId:u,source:null==v?void 0:v.source,channel:null==v?void 0:v.channel,assessmentDate:Date.now()}});else{var t={action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,businessService:p,moduleName:f};t.assignes=null!=a&&a.isTerminateState||!D?[]:[D],M&&(t.documents=[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==R?void 0:R.name,fileStoreId:M}]),s({Property:c({},v,{workflow:t})})}},defaultValues:A,formId:"modal-action"})):l.createElement(t.Loader,null)},Le=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},xe=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Me=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(xe,null))},ke=function(e){var o,r,i=e.t,a=e.action,u=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,p=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(o=a.assigneeRoles)||void 0===o||null===(r=o.map)||void 0===r?void 0:r.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}).data,m=Digit.Hooks.pt.useMDMS(u,p,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),E=m.isLoading,y=m.data,_=n.useState({}),g=_[0],h=_[1],S=n.useState({})[0],b=n.useState([]),T=b[0],A=b[1],C=n.useState({}),P=C[0],O=C[1],N=n.useState(null),D=N[0],I=N[1],w=n.useState(null),R=w[0],L=w[1],x=n.useState(null)[1],M=n.useState([]),k=M[0],F=M[1],B=n.useState(null)[0];function U(e){I(e.target.files[0])}return n.useEffect(function(){var e;y&&y["egf-master"]&&F(null===(e=y["egf-master"])||void 0===e?void 0:e.FinancialYear)},[y]),n.useEffect(function(){var e;A(null==f||null===(e=f.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[f]),n.useEffect(function(){!function(){try{x(null);var e=function(){if(D){var e=function(){if(D.size>=5242880)x(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",D,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?L(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):x(i("CS_FILE_UPLOAD_ERROR"))})},function(){x(i("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[D]),n.useEffect(function(){a&&h(function(e){var n=e.t,o=e.action,r=e.approvers,i=e.selectedApprover,a=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,d=e.setUploadedFile,s=e.businessService,v=!0;return"SENDBACKTOCITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(v=!1),o.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:v?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?l.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:i}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){d(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}}({t:i,action:a,approvers:T,selectedApprover:P,setSelectedApprover:O,selectFile:U,uploadedFile:R,setUploadedFile:L,businessService:p}))},[a,T,k,B,R]),a&&g.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Le,{label:i(g.label.heading)}),headerBarEnd:l.createElement(Me,{onClick:d}),actionCancelLabel:i(g.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:i(g.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:g.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=c({},v,{action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,wfDocuments:R?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==D?void 0:D.name,fileStoreId:R}]:null}),s({Licenses:[v]})},defaultValues:S,formId:"modal-action"})):l.createElement(t.Loader,null)},Fe=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Be=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ue=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Be,null))},je=function(e){var o,r,i=e.t,a=e.action,u=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,p=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(o=a.assigneeRoles)||void 0===o||null===(r=o.map)||void 0===r?void 0:r.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),m=f.data,E=f.isLoading,y=n.useState({}),_=y[0],g=y[1],h=n.useState({})[0],S=n.useState([]),b=S[0],T=S[1],A=n.useState({}),C=A[0],P=A[1],O=n.useState(null),N=O[0],D=O[1],I=n.useState(null),w=I[0],R=I[1],L=n.useState(null),x=L[0],M=L[1],k=!!Digit.Utils.browser.isMobile();function F(e){D(e.target.files[0])}return n.useEffect(function(){var e;T(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(function(){!function(){try{M(null);var e=function(){if(N){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(N.size>=5242880)M(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=N&&N.type&&!e.test(null==N?void 0:N.type))M(i("NOT_SUPPORTED_FILE_TYPE"));else{var t=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",N,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):M(i("CS_FILE_UPLOAD_ERROR"))})},function(){M(i("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(function(){a&&g(function(e){var n=e.t,o=e.action,r=e.approvers,i=e.selectedApprover,a=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,d=e.setUploadedFile,s=e.businessService,v=e.error,p=!0;return"SENDBACKTOCITIZEN"==(null==o?void 0:o.action)&&(p=!1),o.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:p?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?l.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:i}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){d(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:i,action:a,approvers:b,selectedApprover:C,setSelectedApprover:P,selectFile:F,uploadedFile:w,setUploadedFile:R,businessService:p,error:x}))},[a,b,w,x]),a&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Fe,{label:i(_.label.heading)}),headerBarEnd:l.createElement(Ue,{onClick:d}),actionCancelLabel:i(_.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:i(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:k?{width:"720px"}:{},style:k?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:k?{paddingLeft:"5px"}:{}},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=c({},v,{action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=C&&C.uuid?[null==C?void 0:C.uuid]:null,wfDocuments:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:null}),s({Licenses:[v]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:h,formId:"modal-action"})):l.createElement(t.Loader,null)},He=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},We=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},ze=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(We,null))},Ve=function(e){var o,r,i,u,d,s,v,p,f,m,E,y,_=e.t,g=e.action,h=e.tenantId,S=e.closeModal,b=e.submitAction,T=e.applicationDetails,A=e.applicationData,C=e.businessService,P=e.workflowDetails,O=(Digit.Hooks.obps.useObpsAPI(null!==(o=A)&&void 0!==o&&null!==(r=o.landInfo)&&void 0!==r&&null!==(i=r.address)&&void 0!==i&&i.city?null===(u=A)||void 0===u||null===(d=u.landInfo)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.city:h,!1),Digit.Hooks.useEmployeeSearch(h,{roles:null==P||null===(v=P.data)||void 0===v||null===(p=v.initialActionState)||void 0===p||null===(f=p.nextActions)||void 0===f||null===(m=f.filter(function(e){return(null==e?void 0:e.action)==(null==g?void 0:g.action)}))||void 0===m||null===(E=m[0])||void 0===E||null===(y=E.assigneeRoles)||void 0===y?void 0:y.map(function(e){return{code:e}}),isActive:!0},{enabled:!(null!=g&&g.isTerminateState)})),N=O.data,D=O.isLoading,I=(a.useQueryClient(),n.useState({})),w=I[0],R=I[1],L=n.useState({})[0],x=n.useState([]),M=x[0],k=x[1],F=n.useState({}),B=F[0],U=F[1],j=n.useState(null),H=j[0],W=j[1],z=n.useState(null),V=z[0],Y=z[1],K=n.useState(null),$=K[0],q=K[1],G=n.useState(null)[0],Z=!!Digit.Utils.browser.isMobile();function X(e){W(e.target.files[0])}n.useEffect(function(){var e;k(null==N||null===(e=N.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[N]),n.useEffect(function(){!function(){try{q(null);var e=function(){if(H){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(H.size>=5242880)q(_("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=H&&H.type&&!e.test(null==H?void 0:H.type))q(_("NOT_SUPPORTED_FILE_TYPE"));else{var t=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",H,Digit.ULBService.getStateId()||(null==h?void 0:h.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?Y(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):q(_("CS_FILE_UPLOAD_ERROR"))})},function(){q(_("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[H]);var Q=function(e){var t,n=[];for(t=0;t<(null==e?void 0:e.questionLength);t++){var l;n.push({remarks:e["Remarks_"+t],question:null==e?void 0:e.questionList[t].question,value:null==e||null===(l=e["question_"+t])||void 0===l?void 0:l.code})}return n},J=function(e){var t,n,l,o,r=[],i=[];return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(n=t.fieldinspection_pending)||void 0===n?void 0:n.length)>0&&(i=null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?((null===(o=r=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")))||void 0===o?void 0:o.length)>0&&r.map(function(e,t){var n,l;i.push({docs:(n=e.Documents,l=[],n&&n.map(function(e,t){l.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),l),date:e.InspectionDate,questions:Q(e),time:null==e?void 0:e.InspectionTime})}),i=i.filter(function(e){return e.docs&&e.docs.length>0})):sessionStorage.removeItem("INSPECTION_DATA"),[].concat(i)};return n.useEffect(function(){g&&R(function(e){var n,o=e.t,r=e.action,i=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.error,p=!1;"REVOCATE"!=(null==r?void 0:r.action)&&"REJECT"!=(null==r?void 0:r.action)&&"SKIP_PAYMENT"!=r.action&&"SEND_BACK_TO_CITIZEN"!=(null==r?void 0:r.action)&&"APPROVE"!=(null==r?void 0:r.action)||(p=!0);var f=!1;return"REVOCATE"!=(null==r?void 0:r.action)&&"REJECT"!=(null==r?void 0:r.action)||(f=!0),{label:{heading:"WF_"+(null==r?void 0:r.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==r?void 0:r.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:r.isTerminateState||p?null:o(e.assigneeLabel||"WF_ROLE_"+(null===(n=r.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:r.isTerminateState||p?null:l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:f,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:_,action:g,approvers:M,selectedApprover:B,setSelectedApprover:U,selectFile:X,uploadedFile:V,setUploadedFile:Y,businessService:C,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:$}))},[g,M,G,V,$]),g&&w.form?l.createElement(t.Modal,{headerBarMain:l.createElement(He,{label:_(w.label.heading)}),headerBarEnd:l.createElement(ze,{onClick:S}),actionCancelLabel:_(w.label.cancel),actionCancelOnSubmit:S,actionSaveLabel:_(w.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:Z?{width:"720px"}:{},style:Z?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:Z?{paddingLeft:"5px"}:{}},D?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:w.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var t,n,l,o,r,i;A=c({},A,{documents:(f=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),m=[],f.map(function(e){var t,n,l,o,r,i;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.values)||void 0===l?void 0:l.length)>0&&(m=[].concat(m,null==e||null===(o=e.uploadedDocuments)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.values)),(null==e||null===(i=e.newUploadedDocs)||void 0===i?void 0:i.length)>0&&(m=[].concat(m,null==e?void 0:e.newUploadedDocs))}),m),additionalDetails:c({},null===(t=A)||void 0===t?void 0:t.additionalDetails,{fieldinspection_pending:J(A),pendingapproval:(s=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),v=Digit.SessionStorage.get("OBPS_NEW_APPROVALS"),p=null==s?void 0:s.reduce(function(e,t){return null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e},[]),null===(d=p)||void 0===d?void 0:d.concat(null!==v?v.filter(function(e){return""!==e.label}).map(function(e){return null==e?void 0:e.label}):[]))}),workflow:{action:null==g?void 0:g.action,comment:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=B&&B.uuid?[null==B?void 0:B.uuid]:null,assignes:null!=B&&B.uuid?[null==B?void 0:B.uuid]:null,varificationDocuments:V?[{documentType:(null==g?void 0:g.action)+" DOC",fileName:null==H?void 0:H.name,fileStoreId:V}]:null},action:null==g?void 0:g.action,comment:null==e?void 0:e.comments,assignee:null!=B&&B.uuid?[null==B?void 0:B.uuid]:null,wfDocuments:V?[{documentType:(null==g?void 0:g.action)+" DOC",fileName:null==H?void 0:H.name,fileStoreId:V}]:null});var a=null==T||null===(o=T.nocData)||void 0===o?void 0:o.map(function(e){var t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:c({},e,{documents:[].concat(null!=e&&e.documents?null==e?void 0:e.documents:[],t||[])})}}),u={sourceRefId:null==a||null===(r=a[0])||void 0===r||null===(i=r.Noc)||void 0===i?void 0:i.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(h,u)).then(function(e){var t,n=!0,l=!0;null==e||null===(t=e.Noc)||void 0===t||t.map(function(e){var t,o,r,i,a;"APPROVED"!==(null==e||null===(t=e.applicationStatus)||void 0===t?void 0:t.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"REJECTED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"VOIDED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())||1!=n&&1!=l||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?n=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(l=!1))});var o=[];a&&a.map(function(e){var t,r,i,a,u,c,d,s,v,p,f,m;("APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(r=t.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(i=e.Noc)||void 0===i||null===(a=i.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(c=u.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(d=e.Noc)||void 0===d||null===(s=d.applicationStatus)||void 0===s?void 0:s.toUpperCase())&&"VOIDED"!=(null==e||null===(v=e.Noc)||void 0===v||null===(p=v.applicationStatus)||void 0===p?void 0:p.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(f=e.Noc)||void 0===f?void 0:f.nocType)&&n||"FIRE_NOC"===(null==e||null===(m=e.Noc)||void 0===m?void 0:m.nocType)&&l)&&o.push(e)}),b({BPA:A},(null==o?void 0:o.length)>0&&o,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}var d,s,v,p,f,m},defaultValues:L,formId:"modal-action"})):l.createElement(t.Loader,null)},Ye=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Ke=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},$e=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ke,null))},qe=function(e){var o,i,u=e.t,d=e.action,s=e.tenantId,v=e.closeModal,p=e.submitAction,f=e.applicationData,m=e.businessService,E=Digit.Hooks.useEmployeeSearch(s,{roles:null==d||null===(o=d.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=d&&d.isTerminateState)}),y=E.data,_=E.isLoading,g=(a.useQueryClient(),n.useState({})),h=g[0],S=g[1],b=n.useState({})[0],T=n.useState([]),A=T[0],C=T[1],P=n.useState({}),O=P[0],N=P[1],D=n.useState(null),I=D[0],w=D[1],R=n.useState(null),L=R[0],x=R[1],M=n.useState(null),k=M[0],F=M[1],B=!!Digit.Utils.browser.isMobile();function U(e){w(e.target.files[0])}return r.useHistory(),n.useEffect(function(){var e;C(null==y||null===(e=y.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[y]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(I){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(I.size>=5242880)F(u("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=I&&I.type&&!e.test(null==I?void 0:I.type))F(u("NOT_SUPPORTED_FILE_TYPE"));else{var t=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",I,Digit.ULBService.getStateId()||(null==s?void 0:s.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?x(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):F(u("CS_FILE_UPLOAD_ERROR"))})},function(){F(u("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(function(){d&&S(function(e){var n,o=e.t,r=e.action,i=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.error,p=!1;"REVOCATE"!=(null==r?void 0:r.action)&&"REJECT"!=(null==r?void 0:r.action)||(p=!0);var f=!1;return"APPROVE"!=(null==r?void 0:r.action)&&"REJECT"!=(null==r?void 0:r.action)&&"AUTO_APPROVE"!=r.action&&"AUTO_REJECT"!=r.action||(f=!0),{label:{heading:"WF_"+(null==r?void 0:r.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==r?void 0:r.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:r.isTerminateState||f?null:o(e.assigneeLabel||"WF_ROLE_"+(null===(n=r.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:r.isTerminateState||f?null:l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:p,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},showHint:!0,message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:u,action:d,approvers:A,selectedApprover:O,setSelectedApprover:N,selectFile:U,uploadedFile:L,setUploadedFile:x,businessService:m,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:k}))},[d,A,L,k]),d&&h.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Ye,{label:u(h.label.heading)}),headerBarEnd:l.createElement($e,{onClick:v}),actionCancelLabel:u(h.label.cancel),actionCancelOnSubmit:v,actionSaveLabel:u(h.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:B?{width:"720px"}:{},style:B?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:B?{paddingLeft:"5px"}:{}},_?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:h.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,o=JSON.parse(sessionStorage.getItem("NewNOCDocs")),r=(null===(t=f)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0?[].concat(null===(l=f)||void 0===l?void 0:l.documents):[];o.map(function(e,t){r.push(e)}),f=c({},f,{workflow:{action:null==d?void 0:d.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=O&&O.uuid?[null==O?void 0:O.uuid]:null,documents:L?[{documentType:(null==d?void 0:d.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:L}]:null},documents:r}),p({Noc:f},!1,{isNoc:!0})},defaultValues:b,formId:"modal-action"})):l.createElement(t.Loader,null)},Ge=function(e,t){return e===t||e!=e&&t!=t},Ze=function(e,t){for(var n=e.length;n--;)if(Ge(e[n][0],t))return n;return-1},Xe=Array.prototype.splice;function Qe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Qe.prototype.clear=function(){this.__data__=[],this.size=0},Qe.prototype.delete=function(e){var t=this.__data__,n=Ze(t,e);return!(n<0||(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,0))},Qe.prototype.get=function(e){var t=this.__data__,n=Ze(t,e);return n<0?void 0:t[n][1]},Qe.prototype.has=function(e){return Ze(this.__data__,e)>-1},Qe.prototype.set=function(e,t){var n=this.__data__,l=Ze(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this};var Je,et=Qe,tt="object"==typeof v&&v&&v.Object===Object&&v,nt="object"==typeof self&&self&&self.Object===Object&&self,lt=tt||nt||Function("return this")(),ot=lt.Symbol,rt=Object.prototype,it=rt.hasOwnProperty,at=rt.toString,ut=ot?ot.toStringTag:void 0,ct=Object.prototype.toString,dt=ot?ot.toStringTag:void 0,st=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":dt&&dt in Object(e)?function(e){var t=it.call(e,ut),n=e[ut];try{e[ut]=void 0;var l=!0}catch(e){}var o=at.call(e);return l&&(t?e[ut]=n:delete e[ut]),o}(e):function(e){return ct.call(e)}(e)},vt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},pt=function(e){if(!vt(e))return!1;var t=st(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ft=lt["__core-js_shared__"],mt=(Je=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||""))?"Symbol(src)_1."+Je:"",Et=Function.prototype.toString,yt=function(e){if(null!=e){try{return Et.call(e)}catch(e){}try{return e+""}catch(e){}}return""},_t=/^\[object .+?Constructor\]$/,gt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!vt(e)||(t=e,mt&&mt in t))&&(pt(e)?gt:_t).test(yt(e));var t}(n)?n:void 0},St=ht(lt,"Map"),bt=ht(Object,"create"),Tt=Object.prototype.hasOwnProperty,At=Object.prototype.hasOwnProperty;function Ct(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Ct.prototype.clear=function(){this.__data__=bt?bt(null):{},this.size=0},Ct.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ct.prototype.get=function(e){var t=this.__data__;if(bt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Tt.call(t,e)?t[e]:void 0},Ct.prototype.has=function(e){var t=this.__data__;return bt?void 0!==t[e]:At.call(t,e)},Ct.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bt&&void 0===t?"__lodash_hash_undefined__":t,this};var Pt=Ct,Ot=function(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function Nt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new Pt,map:new(St||et),string:new Pt}},Nt.prototype.delete=function(e){var t=Ot(this,e).delete(e);return this.size-=t?1:0,t},Nt.prototype.get=function(e){return Ot(this,e).get(e)},Nt.prototype.has=function(e){return Ot(this,e).has(e)},Nt.prototype.set=function(e,t){var n=Ot(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this};var Dt=Nt;function It(e){var t=this.__data__=new et(e);this.size=t.size}It.prototype.clear=function(){this.__data__=new et,this.size=0},It.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},It.prototype.get=function(e){return this.__data__.get(e)},It.prototype.has=function(e){return this.__data__.has(e)},It.prototype.set=function(e,t){var n=this.__data__;if(n instanceof et){var l=n.__data__;if(!St||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new Dt(l)}return n.set(e,t),this.size=n.size,this};var wt=It,Rt=function(){try{var e=ht(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Lt=function(e,t,n){"__proto__"==t&&Rt?Rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},xt=Object.prototype.hasOwnProperty,Mt=function(e,t,n){var l=e[t];xt.call(e,t)&&Ge(l,n)&&(void 0!==n||t in e)||Lt(e,t,n)},kt=function(e,t,n,l){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],u=l?l(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),o?Lt(n,a,u):Mt(n,a,u)}return n},Ft=function(e){return null!=e&&"object"==typeof e},Bt=function(e){return Ft(e)&&"[object Arguments]"==st(e)},Ut=Object.prototype,jt=Ut.hasOwnProperty,Ht=Ut.propertyIsEnumerable,Wt=Bt(function(){return arguments}())?Bt:function(e){return Ft(e)&&jt.call(e,"callee")&&!Ht.call(e,"callee")},zt=Array.isArray,Vt=function(){return!1},Yt=p(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?lt.Buffer:void 0;e.exports=(o?o.isBuffer:void 0)||Vt}),Kt=/^(?:0|[1-9]\d*)$/,$t=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Kt.test(e))&&e>-1&&e%1==0&&e<t},qt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt["[object Arguments]"]=Gt["[object Array]"]=Gt["[object ArrayBuffer]"]=Gt["[object Boolean]"]=Gt["[object DataView]"]=Gt["[object Date]"]=Gt["[object Error]"]=Gt["[object Function]"]=Gt["[object Map]"]=Gt["[object Number]"]=Gt["[object Object]"]=Gt["[object RegExp]"]=Gt["[object Set]"]=Gt["[object String]"]=Gt["[object WeakMap]"]=!1;var Zt=function(e){return function(t){return e(t)}},Xt=p(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n&&tt.process,r=function(){try{return l&&l.require&&l.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=r}),Qt=Xt&&Xt.isTypedArray,Jt=Qt?Zt(Qt):function(e){return Ft(e)&&qt(e.length)&&!!Gt[st(e)]},en=Object.prototype.hasOwnProperty,tn=function(e,t){var n=zt(e),l=!n&&Wt(e),o=!n&&!l&&Yt(e),r=!n&&!l&&!o&&Jt(e),i=n||l||o||r,a=i?function(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}(e.length,String):[],u=a.length;for(var c in e)!t&&!en.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$t(c,u))||a.push(c);return a},nn=Object.prototype,ln=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||nn)},on=function(e,t){return function(n){return e(t(n))}},rn=on(Object.keys,Object),an=Object.prototype.hasOwnProperty,un=function(e){return null!=e&&qt(e.length)&&!pt(e)},cn=function(e){return un(e)?tn(e):function(e){if(!ln(e))return rn(e);var t=[];for(var n in Object(e))an.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},dn=Object.prototype.hasOwnProperty,sn=function(e){return un(e)?tn(e,!0):function(e){if(!vt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ln(e),n=[];for(var l in e)("constructor"!=l||!t&&dn.call(e,l))&&n.push(l);return n}(e)},vn=p(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?lt.Buffer:void 0,r=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,l=r?r(n):new e.constructor(n);return e.copy(l),l}}),pn=function(){return[]},fn=Object.prototype.propertyIsEnumerable,mn=Object.getOwnPropertySymbols,En=mn?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var l=-1,o=null==t?0:t.length,r=0,i=[];++l<o;){var a=t[l];fn.call(e,a)&&(i[r++]=a)}return i}(mn(e)))}:pn,yn=function(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e},_n=on(Object.getPrototypeOf,Object),gn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)yn(t,En(e)),e=_n(e);return t}:pn,hn=function(e,t,n){var l=t(e);return zt(e)?l:yn(l,n(e))},Sn=function(e){return hn(e,cn,En)},bn=function(e){return hn(e,sn,gn)},Tn=ht(lt,"DataView"),An=ht(lt,"Promise"),Cn=ht(lt,"Set"),Pn=ht(lt,"WeakMap"),On=yt(Tn),Nn=yt(St),Dn=yt(An),In=yt(Cn),wn=yt(Pn),Rn=st;(Tn&&"[object DataView]"!=Rn(new Tn(new ArrayBuffer(1)))||St&&"[object Map]"!=Rn(new St)||An&&"[object Promise]"!=Rn(An.resolve())||Cn&&"[object Set]"!=Rn(new Cn)||Pn&&"[object WeakMap]"!=Rn(new Pn))&&(Rn=function(e){var t=st(e),n="[object Object]"==t?e.constructor:void 0,l=n?yt(n):"";if(l)switch(l){case On:return"[object DataView]";case Nn:return"[object Map]";case Dn:return"[object Promise]";case In:return"[object Set]";case wn:return"[object WeakMap]"}return t});var Ln=Rn,xn=Object.prototype.hasOwnProperty,Mn=lt.Uint8Array,kn=function(e){var t=new e.constructor(e.byteLength);return new Mn(t).set(new Mn(e)),t},Fn=/\w*$/,Bn=ot?ot.prototype:void 0,Un=Bn?Bn.valueOf:void 0,jn=Object.create,Hn=function(){function e(){}return function(t){if(!vt(t))return{};if(jn)return jn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Wn=Xt&&Xt.isMap,zn=Wn?Zt(Wn):function(e){return Ft(e)&&"[object Map]"==Ln(e)},Vn=Xt&&Xt.isSet,Yn=Vn?Zt(Vn):function(e){return Ft(e)&&"[object Set]"==Ln(e)},Kn={};Kn["[object Arguments]"]=Kn["[object Array]"]=Kn["[object ArrayBuffer]"]=Kn["[object DataView]"]=Kn["[object Boolean]"]=Kn["[object Date]"]=Kn["[object Float32Array]"]=Kn["[object Float64Array]"]=Kn["[object Int8Array]"]=Kn["[object Int16Array]"]=Kn["[object Int32Array]"]=Kn["[object Map]"]=Kn["[object Number]"]=Kn["[object Object]"]=Kn["[object RegExp]"]=Kn["[object Set]"]=Kn["[object String]"]=Kn["[object Symbol]"]=Kn["[object Uint8Array]"]=Kn["[object Uint8ClampedArray]"]=Kn["[object Uint16Array]"]=Kn["[object Uint32Array]"]=!0,Kn["[object Error]"]=Kn["[object Function]"]=Kn["[object WeakMap]"]=!1;var $n=function e(t,n,l,o,r,i){var a,u=1&n,c=2&n,d=4&n;if(l&&(a=r?l(t,o,r,i):l(t)),void 0!==a)return a;if(!vt(t))return t;var s=zt(t);if(s){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&xn.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!u)return function(e,t){var n=-1,l=e.length;for(t||(t=Array(l));++n<l;)t[n]=e[n];return t}(t,a)}else{var v=Ln(t),p="[object Function]"==v||"[object GeneratorFunction]"==v;if(Yt(t))return vn(t,u);if("[object Object]"==v||"[object Arguments]"==v||p&&!r){if(a=c||p?{}:function(e){return"function"!=typeof e.constructor||ln(e)?{}:Hn(_n(e))}(t),!u)return c?function(e,t){return kt(e,gn(e),t)}(t,function(e,t){return e&&kt(t,sn(t),e)}(a,t)):function(e,t){return kt(e,En(e),t)}(t,function(e,t){return e&&kt(t,cn(t),e)}(a,t))}else{if(!Kn[v])return r?t:{};a=function(e,t,n){var l,o,r=e.constructor;switch(t){case"[object ArrayBuffer]":return kn(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var n=t?kn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?kn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(o=new(l=e).constructor(l.source,Fn.exec(l))).lastIndex=l.lastIndex,o;case"[object Set]":return new r;case"[object Symbol]":return Un?Object(Un.call(e)):{}}}(t,v,u)}}i||(i=new wt);var f=i.get(t);if(f)return f;i.set(t,a),Yn(t)?t.forEach(function(o){a.add(e(o,n,l,o,t,i))}):zn(t)&&t.forEach(function(o,r){a.set(r,e(o,n,l,r,t,i))});var m=s?void 0:(d?c?bn:Sn:c?sn:cn)(t);return function(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n););}(m||t,function(o,r){m&&(o=t[r=o]),Mt(a,r,e(o,n,l,r,t,i))}),a},qn=function(e){return $n(e,5)},Gn=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},Zn=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Xn=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Zn,null))},Qn=function(e,t){void 0===t&&(t="dayend");try{var n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(n[1],n[2]-1,n[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===t&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(t){return e}},Jn=function(e){var o,r,i=e.t,a=e.action,u=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,p=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(o=a.assigneeRoles)||void 0===o||null===(r=o.map)||void 0===r?void 0:r.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),m=f.data,E=f.isLoading,y=n.useState({}),_=y[0],g=y[1],h=n.useState({})[0],S=n.useState([]),b=S[0],T=S[1],A=n.useState({}),C=A[0],P=A[1],O=n.useState(null),N=O[0],D=O[1],I=n.useState(null),w=I[0],R=I[1],L=n.useState(null),x=L[0],M=L[1],k=window.Digit.Utils.browser.isMobile(),F=window.location.href.includes("/employee");function B(e){D(e.target.files[0])}return n.useEffect(function(){var e;T(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(function(){!function(){try{M(null);var e=function(){if(N){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(N.size>=5242880)M(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=N&&N.type&&!e.test(null==N?void 0:N.type))M(i("NOT_SUPPORTED_FILE_TYPE"));else{var t=he(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",N,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):M(i("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),M(i("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(function(){var e,n,o,r;"DisconnectWSConnection"==(null===(e=v)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(o=v)||void 0===o||null===(r=o.processInstance)||void 0===r?void 0:r.businessService)?a&&g(function(e){var n,o=e.t,r=e.action,i=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,d=e.selectFile,s=e.uploadedFile,v=e.setUploadedFile,p=e.businessService,f=e.error,m=!0,E=!1;return(null!=r&&null!==(n=r.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==r?void 0:r.action)||"RESUBMIT_APPLICATION"==(null==r?void 0:r.action))&&(m=!1),r.isTerminateState&&(m=!1),"EXECUTE_DISCONNECTION"!=(null==r?void 0:r.action)&&"DISCONNECTION_EXECUTED"!=(null==r?void 0:r.action)||(E=!0),{label:{heading:"WF_"+(null==r?void 0:r.action)+"_APPLICATION",submit:"WF_"+(null==p?void 0:p.toUpperCase())+"_"+(null==r?void 0:r.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a}):null},E&&{label:o("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!E,type:"custom",populators:E?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:function(e,n){return l.createElement(t.DatePicker,c({onChange:e.onChange,date:e.value},n))}}:null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:function(){v(null)},message:s?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:f,iserror:f,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:i,action:a,approvers:b,selectedApprover:C,setSelectedApprover:P,selectFile:B,uploadedFile:w,setUploadedFile:R,businessService:p,error:x})):a&&g(function(e){var n,o=e.t,r=e.action,i=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.businessService,p=e.error,f=!0;return(null!=r&&null!==(n=r.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==r?void 0:r.action))&&(f=!1),r.isTerminateState&&(f=!1),{label:{heading:"WF_"+(null==r?void 0:r.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==r?void 0:r.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:f?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:f?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:f?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a}):null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:c,onDelete:function(){s(null)},message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:i,action:a,approvers:b,selectedApprover:C,setSelectedApprover:P,selectFile:B,uploadedFile:w,setUploadedFile:R,businessService:p,error:x}))},[a,b,w,x]),a&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Gn,{label:i(_.label.heading)}),headerBarEnd:l.createElement(Xn,{onClick:d}),actionCancelLabel:i(_.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:i(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",style:k&&F?{width:"100%",height:"auto"}:{}},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,o,r,i,d,p;if(null!==(t=v)&&void 0!==t&&t.isBillAmend){var f,m,E,y,_,g,h,S,b,T=c({},null===(f=v)||void 0===f||null===(m=f.billAmendmentDetails)||void 0===m?void 0:m.additionalDetails,{comments:null!=e&&e.comments?e.comments:null}),A=c({},null===(E=v)||void 0===E?void 0:E.billAmendmentDetails,{workflow:{businessId:null===(y=v)||void 0===y||null===(_=y.billAmendmentDetails)||void 0===_?void 0:_.amendmentId,action:null==a?void 0:a.action,tenantId:u,businessService:null!==(g=v)&&void 0!==g&&null!==(h=g.applicationType)&&void 0!==h&&h.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(S=v)&&void 0!==S&&null!==(b=S.applicationType)&&void 0!==b&&b.includes("WATER")?"WS":"SW",assignes:null!=C&&C.uuid?[{uuid:null==C?void 0:C.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:[]},additionalDetails:T,comment:(null==e?void 0:e.comments)||"",wfDocuments:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:null,processInstance:{action:null==a?void 0:a.action,assignes:null!=C&&C.uuid?[{uuid:null==C?void 0:C.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:[]}});s({AmendmentUpdate:A})}else{if(v=c({},v,{action:null==a?void 0:a.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=C&&C.uuid?[null==C?void 0:C.uuid]:[],assignes:null!=C&&C.uuid?[{uuid:null==C?void 0:C.uuid}]:[],wfDocuments:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:null,processInstance:c({},null===(n=v)||void 0===n?void 0:n.processInstance,{action:null==a?void 0:a.action,assignes:null!=C&&C.uuid?[{uuid:null==C?void 0:C.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:w?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:w}]:[]})}),null!=e&&e.date&&null!==(l=v)&&void 0!==l&&null!==(o=l.applicationType)&&void 0!==o&&o.includes("DISCONNECT")){var P=qn(null==e?void 0:e.date);v.disconnectionExecutionDate=Qn(P)}else if(null!=e&&e.date){var O=qn(null==e?void 0:e.date);v.connectionExecutionDate=Qn(O)}if("DisconnectWSConnection"==(null===(r=v)||void 0===r||null===(i=r.processInstance)||void 0===i?void 0:i.businessService)||"DisconnectSWConnection"==(null===(d=v)||void 0===d||null===(p=d.processInstance)||void 0===p?void 0:p.businessService)||window.location.href.includes("disconnection")){var D;"WATER"==(null===(D=v)||void 0===D?void 0:D.serviceType)?s({WaterConnection:v,disconnectRequest:!0}):s({SewerageConnection:v,disconnectRequest:!0})}else{var I,R,L,x,M,k,F,B,U,j,H,W,z,V=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),Y=V?JSON.parse(V):"";null!=Y&&null!==(I=Y.value)&&void 0!==I&&I.adhocPenalty&&(v.additionalDetails.adhocPenalty=parseInt(null==Y||null===(R=Y.value)||void 0===R?void 0:R.adhocPenalty)||""),null!=Y&&null!==(L=Y.value)&&void 0!==L&&L.adhocPenaltyComment&&(v.additionalDetails.adhocPenaltyComment=(null==Y||null===(x=Y.value)||void 0===x?void 0:x.adhocPenaltyComment)||""),null!=Y&&null!==(M=Y.value)&&void 0!==M&&M.adhocPenaltyReason&&(v.additionalDetails.adhocPenaltyReason=(null==Y||null===(k=Y.value)||void 0===k?void 0:k.adhocPenaltyReason)||""),null!=Y&&null!==(F=Y.value)&&void 0!==F&&F.adhocRebate&&(v.additionalDetails.adhocRebate=parseInt(null==Y||null===(B=Y.value)||void 0===B?void 0:B.adhocRebate)||""),null!=Y&&null!==(U=Y.value)&&void 0!==U&&U.adhocRebateComment&&(v.additionalDetails.adhocRebateComment=(null==Y||null===(j=Y.value)||void 0===j?void 0:j.adhocRebateComment)||""),null!=Y&&null!==(H=Y.value)&&void 0!==H&&H.adhocRebateReason&&(v.additionalDetails.adhocRebateReason=(null==Y||null===(W=Y.value)||void 0===W?void 0:W.adhocRebateReason)||""),"WATER"==(null===(z=v)||void 0===z?void 0:z.serviceType)?s({WaterConnection:v}):s({SewerageConnection:v})}}},defaultValues:h,formId:"modal-action"})):l.createElement(t.Loader,null)},el=function(e){return null!=e&&e.businessService.includes("PT")?l.createElement(Re,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?l.createElement(ke,e):null!=e&&e.moduleCode.includes("BPAREG")?l.createElement(je,e):null!=e&&e.moduleCode.includes("BPA")?l.createElement(Ve,e):null!=e&&e.moduleCode.includes("NOC")?l.createElement(qe,e):null!=e&&e.moduleCode.includes("WS")?l.createElement(Jn,e):void 0};function tl(e){var n=e.documents,r=e.svgStyles,i=void 0===r?{}:r,a=e.isSendBackFlow,u=void 0!==a&&a,c=e.isHrLine,d=void 0!==c&&c,s=e.titleStyles,v=o.useTranslation().t,p=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!p&&(null==n?void 0:n.map(function(e,o){var r;return l.createElement(l.Fragment,{key:o},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:s||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(r=e.values)||void 0===r?void 0:r.map(function(e,n){var o,r;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:(o={minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},o.minWidth="100px",o),key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},v(null==e?void 0:e.title)),u?null!=e&&null!==(r=e.documentType)&&void 0!==r&&r.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),d&&(null==n?void 0:n.length)!=o+1?l.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),p&&(null==n?void 0:n.map(function(e,n){var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=i&&i.minWidth?null==i?void 0:i.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},v(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+v(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:(o={marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center"},o.color="#505A5F",o)},""+v(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}var nl=function(e){var t,o,r=e.t,i=e.formData,a=e.applicationData,u=e.docs,c=e.bpaActionsDetails,d=(null==a?void 0:a.status)||"",s=(null==c||null===(t=c.data)||void 0===t?void 0:t.nextActions)||[],v=Digit.ULBService.getStateId(),p=n.useState((null==i||null===(o=i.documents)||void 0===o?void 0:o.documents)||[]),f=p[0],m=p[1],E=n.useState(null),y=E[0],_=E[1],g=n.useState([]),h=g[0],S=g[1],b=n.useState(!0)[1],T=n.useState(!1),A=T[0],C=T[1],P=n.useState(!1),O=P[0],N=P[1],D=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"]),I=D.isLoading,w=D.data,R=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]),L=R.data;return n.useEffect(function(){var e,t,n,l,o,r,i=[];null!=w&&null!==(e=w.BPA)&&void 0!==e&&e.DocTypeMapping&&(i=null==w||null===(o=w.BPA)||void 0===o||null===(r=o.DocTypeMapping)||void 0===r?void 0:r.filter(function(e){var t,n;return e.WFState==(null==a?void 0:a.status)?null==a?void 0:a.status:e.RiskType==(null==a?void 0:a.riskType)&&e.ServiceType==(null==a||null===(t=a.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==a||null===(n=a.additionalDetails)||void 0===n?void 0:n.applicationType)}));var c=[];null===(t=i)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.docTypes)||void 0===l||l.forEach(function(e){var t,n,l,o,r=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==L||null===(t=L["common-masters"])||void 0===t||null===(n=t.DocumentType)||void 0===n||n.forEach(function(t){var n=t.code.slice(0,r.length);r===n&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(o=l.values)||void 0===o||o.map(function(t){var n,l;r===(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==t||null===(l=t.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),c.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)),S(c)},[!I,!R.isLoading]),n.useEffect(function(){var e=0;h.map(function(t){var n=!1;f.map(function(e){t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(n=!0)}),!n&&t.required&&(e+=1)}),b("0"!=e&&0!=e||!(f.length>0))},[f,A]),n.useEffect(function(){N("DOC_VERIFICATION_INPROGRESS"===d&&(null==s?void 0:s.length)>0)},[a,c]),l.createElement("div",null,null==h?void 0:h.map(function(e,t){return l.createElement("div",null,l.createElement(ll,{key:t,index:t,document:e,t:r,error:y,setError:_,setDocuments:m,documents:f,setCheckRequiredFields:C,applicationStatus:d,actions:s,bpaTaxDocuments:h,checkEnablingDocs:O}))}))};function ll(e){var o,r,i=e.t,a=e.document,u=e.setDocuments,d=e.documents,s=e.index,v=e.bpaTaxDocuments,p=e.checkEnablingDocs,f=null==d?void 0:d.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==a?void 0:a.code)})[0],m=Digit.ULBService.getStateId(),E=n.useState(f?c({},f,{active:!0,code:null==f?void 0:f.documentType,i18nKey:null==f?void 0:f.documentType}):1===(null==a||null===(o=a.dropdownData)||void 0===o?void 0:o.length)?null==a?void 0:a.dropdownData[0]:{}),y=E[0],_=E[1],g=n.useState(null),h=g[0],S=g[1],b=n.useState(function(){return(null==f?void 0:f.fileStoreId)||null})[0],T=n.useState([]),A=T[0],C=T[1];return n.useEffect(function(){null!=y&&y.code&&u(function(e){var t,n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==y?void 0:y.code)});if(0===(null==b?void 0:b.length)||null===b)return n;var l=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b});return[].concat(l,[{documentType:null==y?void 0:y.code,fileStoreId:b,documentUid:b,fileName:(null==h?void 0:h.name)||"",id:d?null===(t=d.find(function(e){return e.documentType===(null==y?void 0:y.code)}))||void 0===t?void 0:t.id:void 0}])})},[b,y]),n.useEffect(function(){try{A.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),a.newUploadedDocs=[],A.map(function(e){var t,n,l;null!=y&&y.code&&a.newUploadedDocs.push({documentType:null==y?void 0:y.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),v[s]=a,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(v)))}catch(e){Promise.reject(e)}},[A,y]),n.useEffect(function(){},[h]),l.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+i(null==a?void 0:a.code)),(null==a||null===(r=a.uploadedDocuments)||void 0===r?void 0:r.length)&&l.createElement(tl,{documents:null==a?void 0:a.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),p?l.createElement("div",{style:{marginTop:"20px"}},l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=a&&a.required?i(null==a?void 0:a.code)+"* ":""+i(null==a?void 0:a.code)),l.createElement(t.Dropdown,{className:"form-field",t:i,isMandatory:!1,option:null==a?void 0:a.dropdownData,selected:y,optionKey:"i18nKey",select:function(e){return _(e)},style:{width:"100%"}})),l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:function(e){return t=Object.fromEntries(e),n=Object.values(t),0!==Object.keys(t).length&&C(n),void function(e){e&&S(e.file)}(n[n.length-1]);var t,n},t:i,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function ol(e){var n=e.fiReport,r=e.isCitizen,i=void 0!==r&&r,a=o.useTranslation().t;return l.createElement(l.Fragment,null,l.createElement("div",{style:{marginTop:"10px"}},l.createElement(i?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+a("BPA_FI_REPORT")),n.map(function(e,o){var r,i,u,c,d,s;return l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},l.createElement(t.StatusTable,null,l.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+a("BPA_FI_REPORT"):a("BPA_FI_REPORT")+" - "+(o+1)),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(r=e.date)||void 0===r?void 0:r.split("-")[2])+"/"+(null===(i=e.date)||void 0===i?void 0:i.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(c=e.questions)||void 0===c?void 0:c.length)&&(null==e||null===(d=e.questions)||void 0===d?void 0:d.map(function(e){return l.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},l.createElement(t.Row,{className:"border-none",label:""+a(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"}))})),l.createElement(tl,{documents:(s=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==s?void 0:s.map(function(e){var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function rl(e){var o=e.t,r=e.document,i=e.setNocDocuments,a=e.setError,u=e.nocDocuments,c=null==u?void 0:u.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==r?void 0:r.code)})[0],d=Digit.ULBService.getStateId(),s=(n.useState(),n.useState(null)),v=s[0],p=s[1],f=n.useState(function(){return(null==c?void 0:c.fileStoreId)||null}),m=f[0],E=f[1];return n.useEffect(function(){var e,t;null!=r&&null!==(e=r.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&i(function(e){var t,n=null==e?void 0:e.filter(function(e){var t,n;return(null==e?void 0:e.documentType)!==(null==r||null===(t=r.dropdownData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.code)});if(0===(null==m?void 0:m.length)||null===m)return n;var l=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==m});return[].concat(l,[{documentType:null==r||null===(t=r.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:m,documentUid:m,fileName:(null==v?void 0:v.name)||""}])})},[m]),n.useEffect(function(){!function(){try{a(null);var e=function(){if(v){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(v.size>=5242880)a(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=v&&v.type&&!e.test(null==v?void 0:v.type))a(o("NOT_SUPPORTED_FILE_TYPE"));else{var t=he(function(){return E(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",v,Digit.ULBService.getStateId())).then(function(e){var t,n,l,r;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?E(null==e||null===(l=e.data)||void 0===l||null===(r=l.files[0])||void 0===r?void 0:r.fileStoreId):a(o("CS_FILE_UPLOAD_ERROR"))})},function(){a(o("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[v]),l.createElement("div",{style:{}},l.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},l.createElement(t.CardLabel,{style:{width:"100%"}},null!=r&&r.required?o("TL_BUTTON_UPLOAD FILE")+"*":""+o("TL_BUTTON_UPLOAD FILE")),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:d,getFormState:function(e){return t=Object.fromEntries(e),void function(e){e&&p(e.file)}((n=Object.values(t))[n.length-1]);var t,n},t:o,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var il=function(e){var o,r=e.t,i=e.noc,a=e.docs,u=e.isNoc,c=e.applicationData,d=e.NOCdata,s=e.bpaActionsDetails,v=(Digit.ULBService.getStateId(),Digit.ULBService.getStateId()),p=(null==c?void 0:c.status)||"",f=(null==s||null===(o=s.data)||void 0===o?void 0:o.nextActions)||[],m=Digit.Hooks.obps.useMDMS(v,"NOC",["DocumentTypeMapping"],{enabled:u}).data,E=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"],{enabled:!u}).data,y=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]).data,_=n.useState([]),g=_[0],h=_[1],S=n.useState([]),b=S[0],T=S[1],A=n.useState(!1),C=A[0],P=A[1],O=Digit.Hooks.useSessionStorage(null==i?void 0:i.nocType,[]),N=O[0],D=O[1],I=n.useState(null),w=I[0],R=I[1],L=window.location.href.includes("/employee/");return n.useEffect(function(){var e;h(null==y||null===(e=y["common-masters"])||void 0===e?void 0:e.DocumentType)},[y]),n.useEffect(function(){var e,t,n,l,o,r,a,d,s=[];null!==(e=l=u?null==m||null===(o=m.NOC)||void 0===o||null===(r=o.DocumentTypeMapping)||void 0===r?void 0:r.filter(function(e){return(null==e?void 0:e.applicationType)===(null==i?void 0:i.applicationType)&&(null==e?void 0:e.nocType)===(null==i?void 0:i.nocType)}):null==E||null===(a=E.BPA)||void 0===a||null===(d=a.DocTypeMapping)||void 0===d?void 0:d.filter(function(e){var t,n;return e.WFState==(null==c?void 0:c.status)&&e.RiskType==(null==c?void 0:c.riskType)&&e.ServiceType==(null==c||null===(t=c.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==c||null===(n=c.additionalDetails)||void 0===n?void 0:n.applicationType)}))&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(n=t.docTypes)&&void 0!==n&&n[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==i?void 0:i.additionalDetails,applicationStatus:null==i?void 0:i.applicationStatus,appNumberLink:null==i?void 0:i.applicationNo,nocNo:null==i?void 0:i.nocNo},s.push(l[0].docTypes[0]));var v=[];s&&s.length>0&&(s.map(function(e){var t=e.documentType;e.dropdownData=[],null==g||g.forEach(function(n){var l=n.code.slice(0,null==t?void 0:t.length);t===l&&(e.hasDropdown=!0,e.dropdownData.push(n))}),v.push(e)}),T(v))},[m,g]),n.useEffect(function(){P("NOC_VERIFICATION_INPROGRESS"===p&&(null==f?void 0:f.length)>0)},[c,s]),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:L?""+r("BPA_"+(null==i?void 0:i.nocType)+"_HEADER"):r("BPA_"+(null==i?void 0:i.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),d&&d.map(function(e,n){if(null!=e&&e.value)return l.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:L?""+r(null==e?void 0:e.title):r(null==e?void 0:e.title),text:r(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:L?""+r(null==e?void 0:e.title):r(null==e?void 0:e.title),text:r(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),l.createElement(tl,{documents:a,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),C&&(null==b?void 0:b.map(function(e,t){return l.createElement(rl,{key:t,document:e,t:r,error:w,setError:R,setNocDocuments:D,nocDocuments:N,checkEnablingDocs:C})})))},al=function(e){var o=e.permissions,r=e.t,i=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==o?void 0:o.map(function(e){return{label:e,checked:!1}})),a=i[0],u=i[1],d=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]),s=d[0],v=d[1];n.useEffect(function(){return function(){Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")}},[]);var p=window.Digit.Utils.browser.isMobile();return l.createElement("div",null,l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},r("BPA_PERMIT_CONDITIONS")),null==a?void 0:a.map(function(e,n){return l.createElement(t.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:p?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:function(e){return function(e,t,n){var l=e.target.checked;u(function(){return null==a?void 0:a.map(function(e,t){return n===t?c({},e,{checked:l}):e})})}(e,0,n)},isLabelFirst:!0,index:n})}),null==s?void 0:s.map(function(e,n){return l.createElement("div",null,l.createElement(t.TextInput,{key:n,value:null==e?void 0:e.label,onChange:function(e){return function(e,t){v(function(){return null==s?void 0:s.map(function(n,l){var o;return t===l?{label:null==e||null===(o=e.target)||void 0===o?void 0:o.value}:n})})}(e,n)},textInputStyle:{maxWidth:p?"96%":"830px",width:p?"96%":"830px"},style:p?{paddingRight:"10%"}:{},placeholder:r("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),l.createElement(t.LinkButton,{label:l.createElement("div",null,l.createElement("span",null,l.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:p?"5%":"35%"}}))),style:{},onClick:function(e){return function(e){var t=[].concat(s);t.splice(e,1),v([].concat(t))}(n)}}))}),l.createElement(t.LinkButton,{style:{color:"#a82227",maxWidth:p?"fit-content":"10%",marginRight:"3%"},label:r("BPA_ADD_MORE"),onClick:function(){v([].concat(s,[{label:""}]))}}))};function ul(e){var r=e.documents,i=e.svgStyles,a=void 0===i?{}:i,u=e.isSendBackFlow,c=void 0!==u&&u,d=o.useTranslation().t,s=n.useState(function(){return[]}),v=s[0],p=s[1],f=(Digit.ULBService.getCurrentTenantId(),n.useState({})),m=f[0],E=f[1];n.useEffect(function(){var e,t=[];null==r||r.forEach(function(e,n,l){t=[].concat(t,e.values?e.values:[])}),p(null===(e=t)||void 0===e?void 0:e.map(function(e){return null==e?void 0:e.fileStoreId}))},[r]),n.useEffect(function(){var e;null!=v&&v.length&&"BillAmend"===(null==r||null===(e=r[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(v,Digit.ULBService.getCurrentTenantId()).then(function(e){E(null==e?void 0:e.data)}):null!=v&&v.length&&Digit.UploadServices.Filefetch(v,Digit.ULBService.getStateId()).then(function(e){E(null==e?void 0:e.data)})},[v]);var y=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),_=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!_&&(null==r?void 0:r.map(function(e,n){var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:y?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o,r;return l.createElement("a",{target:"_",href:null===(o=m[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:y?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},d(null==e?void 0:e.title)),c?null!=e&&null!==(r=e.documentType)&&void 0!==r&&r.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),_&&(null==r?void 0:r.map(function(e,n){var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return l.createElement("a",{target:"_",href:null===(o=m[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},d(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+d(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+d(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function cl(e){var n=e.taxHeadEstimatesCalculation,r=n.taxHeadEstimates,i=o.useTranslation().t;return l.createElement("div",{style:{marginTop:"40px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:i("ES_PT_TITLE_TAX_HEADS"),text:i("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==r?void 0:r.map(function(e,n){return l.createElement(t.Row,{key:i(e.taxHeadCode),label:i(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==r?void 0:r.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),l.createElement(t.Row,{label:i("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function dl(e){var n=e.floors,r=o.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e){var n;return l.createElement("div",{key:r(null==e?void 0:e.title),style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},r(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e,n){var o;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},r(e.title)),l.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:r(e.title),label:r(e.title),text:l.createElement("img",{src:r(e.value),alt:""})}:{key:r(e.title),label:r(e.title),text:r(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function sl(e){var n=e.owners,r=o.useTranslation().t,i=(null==n?void 0:n.length)||1,a={marginTop:"19px"},u={position:"relative",padding:"8px"},d={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(i)>1?a={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(i)>1||(a={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},u={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(a=c({},a,{maxWidth:"950px"}),a=c({},a,{maxWidth:"950px"}),d={}),l.createElement(l.Fragment,null,n.map(function(e,n){var o;return l.createElement("div",{key:r(null==e?void 0:e.title),style:a},l.createElement(t.CardSubHeader,{style:Number(i)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(i)>1?r(null==e?void 0:e.title)+" "+(n+1):r(null==e?void 0:e.title)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:u},l.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return!0===e.map&&"N/A"!==e.value?l.createElement(t.Row,{key:r(e.title),label:r(e.title),text:l.createElement("img",{src:r(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):l.createElement("span",null,l.createElement(t.Row,{key:r(e.title),label:""+r(e.title),text:r(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:d}))}))))}))}var vl=function(e){var r,i,a,u=e.scrutinyDetails,c=o.useTranslation().t,d=function(e){return null!=e&&e.value&&null!=e&&e.isTransLate?l.createElement("span",{style:{color:"#00703C"}},c(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?c(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void c("NA")};return l.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement("div",null,null==u||null===(r=u.values)||void 0===r?void 0:r.map(function(e,n){return null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+c(""+e.title),text:null!=e&&e.value?d(e)+" "+c(null==e?void 0:e.isUnit):c("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+c(""+e.title),text:d(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},c(null==e?void 0:e.title)):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},c(null==e?void 0:e.title))}),null==u||null===(i=u.permit)||void 0===i?void 0:i.map(function(e,n){return l.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title)})),l.createElement("div",null,null==u||null===(a=u.scruntinyDetails)||void 0===a?void 0:a.map(function(e,o){return l.createElement(n.Fragment,null,l.createElement(t.Row,{className:"border-none",label:""+c(null==e?void 0:e.title),labelStyle:{width:"150%"}}),l.createElement("a",{href:null==e?void 0:e.value}," ",l.createElement(t.PDFSvg,null)," "),l.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},c(null==e?void 0:e.text)))})))))},pl=function(e){var r,i,a,u,c,d=e.edcrDetails,s=e.applicationData,v=o.useTranslation().t,p=window.Digit.Utils.browser.isMobile(),f=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],m=n.useMemo(function(){return f.map(function(e){return{Header:v(""+e.name),accessor:(t=e.id,n=t,function(e,t,l){return e[n]}),id:e.id};var t,n})});function E(e){var t,n=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(function(e){var t,l,o,r,i,a,u,c;n.push({Floor:v("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:v(""+(null===(t=e.occupancies)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.type)),BuildupArea:null===(o=e.occupancies)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.builtUpArea,FloorArea:(null===(i=e.occupancies)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.CarpetArea)||0,key:v("BPA_FLOOR_NAME_"+e.number)})}),n}function y(e){var t,n=null==s||null===(t=s.landInfo)||void 0===t?void 0:t.unit,l="";if((null==n?void 0:n.length)>0){var o,r,i=null===(o=n[e])||void 0===o||null===(r=o.usageCategory)||void 0===r?void 0:r.split(",");null!=i&&i.length&&(l=i.map(function(e){return e?""+v("BPA_SUBOCCUPANCYTYPE_"+function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA"}).join(", "))}return l||"NA"}return l.createElement(n.Fragment,null,l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},l.createElement(t.StatusTable,null,null==d||null===(r=d.values)||void 0===r?void 0:r.map(function(e,n){return null!=e&&e.isHeader?l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},v(null==e?void 0:e.title)):l.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+v(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),null==d||null===(i=d.subOccupancyTableDetails)||void 0===i||null===(a=i[0])||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.planDetail)||void 0===c?void 0:c.blocks.map(function(e,n){var o,r,i,a,u;return l.createElement("div",{key:n,style:(null==d||null===(o=d.subOccupancyTableDetails)||void 0===o||null===(r=o[0])||void 0===r||null===(i=r.value)||void 0===i||null===(a=i.planDetail)||void 0===a||null===(u=a.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},v("BPA_BLOCK_SUBHEADER")," ",n+1),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+v("BPA_SUB_OCCUPANCY_LABEL"),text:y(n)})),l.createElement("div",{style:window.location.href.includes("citizen")||p?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},l.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:v,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:E(e),columns:m,getCellProps:function(e){return{style:{}}}})))})))},fl=function(e){var t=e.otherComment;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,e.headComment),l.createElement("p",null,t))},ml=function(e){var n,r,i,a=e.data,u=e.OpenImage,c=e.privacy,d=void 0===c?{}:c,s=o.useTranslation().t;return l.createElement("div",null,a.date&&l.createElement("p",null,a.date),l.createElement("p",null,a.name),a.mobileNumber&&l.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},l.createElement(t.TelePhone,{mobile:a.mobileNumber,privacy:d}),l.createElement("p",null,"    ")),a.source&&l.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+a.source.toUpperCase())),a.comment&&l.createElement(fl,{otherComment:null==a?void 0:a.otherComment,headComment:null==a?void 0:a.comment}),null!=a&&a.wfComment?l.createElement("div",null,null==a||null===(n=a.wfComment)||void 0===n?void 0:n.map(function(e){return l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("WF_COMMON_COMMENTS")),l.createElement("p",null,e))})):null,(null==a||null===(r=a.thumbnailsToShow)||void 0===r||null===(i=r.thumbs)||void 0===i?void 0:i.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==a?void 0:a.thumbnailsToShow.thumbs,onClick:function(e,t){u(e,t,null==a?void 0:a.thumbnailsToShow)}})):null)};function El(e){var n=e.units,r=o.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e,n){var o;return l.createElement("div",{key:r(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},r(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:r(e.title),label:r(e.title),text:l.createElement("img",{src:r(e.value),alt:""})}:{key:r(e.title),label:r(e.title)+":",text:r(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function yl(e){var n=e.units,r=o.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e,n){var o;return l.createElement("div",{key:r(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},r(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:r(e.title),label:r(e.title),text:l.createElement("img",{src:r(e.value),alt:""})}:{key:r(e.title),label:r(e.title)+":",text:r(e.value)||"NA",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}var _l=function(e){var r,i,a,u,c,d=e.wsAdditionalDetails,s=o.useTranslation().t,v=(c=location.search)?(/^[?#]/.test(c)?c.slice(1):c).split("&").reduce(function(e,t){var n=t.split("="),l=n[1];return e[n[0]]=l?decodeURIComponent(l.replace(/\+/g," ")):"",e},{}):{},p=null==v?void 0:v.mode,f=(null==d?void 0:d.additionalDetails)||{connectionDetails:[],plumberDetails:[]},m=f.connectionDetails,E=f.plumberDetails,y=f.roadCuttingDetails,_=f.activationDetails;return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==d||null===(r=d.additionalDetails)||void 0===r?void 0:r.connectionDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),l.createElement("div",null,l.createElement("div",{className:"connection-details-new-value-wrapper"},null==m?void 0:m.map(function(e,n){return l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""}))})))),(null==d||null===(i=d.additionalDetails)||void 0===i?void 0:i.plumberDetails)&&"MODIFY"!=p&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map(function(e,n){return l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy})})))),(null==d||null===(a=d.additionalDetails)||void 0===a?void 0:a.roadCuttingDetails)&&"MODIFY"!=p&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==y?void 0:y.map(function(e){var n;return l.createElement("div",{style:(null==y?void 0:y.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e){return l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))})))),(null==d||null===(u=d.additionalDetails)||void 0===u?void 0:u.activationDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map(function(e,n){return l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))))))},gl=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],hl=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],Sl=function(e){var r,i,a,u,d=e.wsAdditionalDetails,s=o.useTranslation().t,v=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),p=v[0],f=v[1],m=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{})[1],E=!(null==d||null===(r=d.additionalDetails)||void 0===r||!r.isPaid),y=n.useState(!1),g=y[0],h=y[1],S=n.useState(p||{}),b=S[0],T=S[1],A=n.useState(null),C=A[0],P=A[1],O=n.useState(d.additionalDetails.data?d.additionalDetails.data:{}),N=O[0],D=O[1],I=n.useState(d.additionalDetails.values?d.additionalDetails.values:[]),w=I[0],R=I[1],L=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(L,"BillingService",["TaxHeadMaster"]),n.useEffect(function(){var e,t,n,o=c({},null==d||null===(e=d.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails);if((null==p||null===(n=p.billDetails)||void 0===n?void 0:n.length)>0){var r,i,a,u,s,v,m,E=[{title:"WS_APPLICATION_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(r=p.billDetails)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.fee)},{title:"WS_SERVICE_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(a=p.billDetails)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.charge)},{title:"WS_TAX_HEADER",value:l.createElement("span",null,"₹",null==p||null===(s=p.billDetails)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount)}];R(E),D(null==p||null===(m=p.billDetails)||void 0===m?void 0:m[0])}else f(o),T(o)},[]);var x=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},M=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},k=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(M,null))},F=function(e,t,n){void 0===t&&(t=!1);var l=c({},b);if("adhocPenalty"!=e&&"adhocRebate"!=e||!n.target.value)t?(l[e+"_data"]=n,l[e]=n.title,"PT_OTHERS"==n.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==n.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=n.target.value;else{var o,r,i=0==(null==n||null===(o=n.target)||void 0===o?void 0:o.value)?1:Math.sign(null==n||null===(r=n.target)||void 0===r?void 0:r.value)||-1;l[e]=1==i?n.target.value:""}T(l)};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},w&&l.createElement(t.StatusTable,null,l.createElement("div",null,null==w?void 0:w.map(function(e,n){return l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),l.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+s("WS_COMMON_TOTAL_AMT"),text:l.createElement("span",null,"₹",(null==N?void 0:N.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),l.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+s("CS_INBOX_STATUS_FILTER"),text:s(E?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:E?{color:"#00703C"}:{color:"#D4351C"}}))),null!=d&&null!==(i=d.additionalDetails)&&void 0!==i&&i.isAdhocRebate?l.createElement("div",{onClick:function(e){h(!0)}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},s("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,g&&l.createElement(t.Modal,{headerBarMain:l.createElement(x,{label:s("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(k,{onClick:function(){T(p),h(!1)}}),actionCancelLabel:s("PT_CANCEL"),actionCancelOnSubmit:function(){T(p),h(!1)},actionSaveLabel:s("PT_ADD"),actionSaveOnSubmit:function(e){return function(e){var t,n,l=null!=b&&b.adhocPenalty?Number(null==b?void 0:b.adhocPenalty):0,o=null!=b&&b.adhocRebate?Number(null==b?void 0:b.adhocRebate):0;if(l||o)if(o>(null==d||null===(t=d.additionalDetails)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.totalAmount))P({isError:!1,isWarning:!0,key:"error",message:s("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var r,i,a,u,v,p,E,y,g,S,T=null==d||null===(r=d.additionalDetails)||void 0===r||null===(i=r.appDetails)||void 0===i?void 0:i.applicationNo,A=null==d||null===(a=d.additionalDetails)||void 0===a||null===(u=a.appDetails)||void 0===u?void 0:u.tenantId,C=c({},null==d||null===(v=d.additionalDetails)||void 0===v||null===(p=v.appDetails)||void 0===p?void 0:p.additionalDetails,b);d.additionalDetails.appDetails.additionalDetails=C;var O={CalculationCriteria:"WATER"==(null==d||null===(E=d.additionalDetails)||void 0===E||null===(y=E.appDetails)||void 0===y?void 0:y.service)?[{applicationNo:T,tenantId:A,waterConnection:d.additionalDetails.appDetails}]:[{applicationNo:T,tenantId:A,sewerageConnection:d.additionalDetails.appDetails}],isconnectionCalculation:!1},N="WATER"==(null==d||null===(g=d.additionalDetails)||void 0===g||null===(S=g.appDetails)||void 0===S?void 0:S.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(O,N).then(function(e,t){var n,l,o,r,i,a,u,c,d,s,v,p,E,y,g;(null==e||null===(n=e.Calculation)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.taxHeadEstimates)||void 0===o?void 0:o.length)>0&&(null==e||null===(E=e.Calculation)||void 0===E||null===(y=E[0])||void 0===y||null===(g=y.taxHeadEstimates)||void 0===g||g.forEach(function(e){return e.amount=e.estimateAmount})),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(r=e.Calculation)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.taxHeadEstimates,"category");var S=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(a=e.Calculation)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.charge},{title:"WS_TAX_HEADER",value:null===(s=e.Calculation)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount}];m(qn(e.Calculation[0])),D(null==e||null===(p=e.Calculation)||void 0===p?void 0:p[0]),R(S),b.billDetails=null==e?void 0:e.Calculation,f(b),h(!1)}).catch(function(e){var t,n,l,o,r,i;P({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors[0])&&void 0!==l&&l.message?s(""+(null==e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r||null===(i=r.Errors[0])||void 0===i?void 0:i.code)):s("PT_COMMON_ADD_REBATE_PENALITY")})})}else P({isError:!1,isWarning:!0,key:"warning",message:s("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})}()},hideSubmit:!1,popupStyles:{overflowY:"auto"}},l.createElement("div",null,l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,s("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:gl,optionKey:"title",select:function(e){return F("adhocPenaltyReason",!0,e)},selected:(null==b?void 0:b.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:s})),"PT_OTHERS"===(null==b||null===(a=b.adhocPenaltyReason_data)||void 0===a?void 0:a.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,s("PT_REASON")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==b?void 0:b.adhocPenaltyComment)||"",onChange:function(e){return F("adhocPenaltyComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")})))),l.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==b?void 0:b.adhocPenalty)||"",onChange:function(e){return F("adhocPenalty",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))),l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_REBATE")),l.createElement(t.CardLabel,null,s("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:hl,optionKey:"title",select:function(e){return F("adhocRebateReason",!0,e)},selected:(null==b?void 0:b.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:s})),"PT_OTHERS"===(null==b||null===(u=b.adhocRebateReason_data)||void 0===u?void 0:u.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,s("PT_REASON")),l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==b?void 0:b.adhocRebateComment)||"",onChange:function(e){return F("adhocRebateComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==b?void 0:b.adhocRebate)||"",onChange:function(e){return F("adhocRebate",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),C&&l.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==C?void 0:C.isWarning,error:null==C||!C.isWarning,label:s(null==C?void 0:C.message),onClose:function(){P(!1)},isDleteBtn:!0})))},bl=function(e){return l.createElement("span",null,l.createElement("svg",{style:c({},e.style),display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},Tl=function(e){var n=e.t,o=e.userType,r=void 0!==o&&o,i=e.infoBannerLabel,a=void 0===i?"":i,u=e.infoClickLable,c=void 0===u?"":u,d=e.infoClickInfoLabel,s=void 0===d?"":d,v=e.infoClickInfoLabel1,p=void 0===v?"":v;r=r||Digit.SessionStorage.get("userType");var f=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement("div",{style:f?{}:{width:"80%"}},l.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},l.createElement("div",null,l.createElement(t.InfoBannerIcon,null),l.createElement("h2",{style:{color:"#3498DB"}},n(a))),n(c)+" ",l.createElement(bl,{style:{display:"inline",marginBottom:"5px"}})," "+n(s),l.createElement("div",null," "+n(p)))))},Al=function(e){var r,i,a,u,c,d,s,v=e.wsAdditionalDetails,p=o.useTranslation().t,f=n.useState(!1),m=f[0],E=f[1],y=n.useState({}),_=y[0],g=y[1],h=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},S=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},b=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(S,null))};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=v&&null!==(r=v.additionalDetails)&&void 0!==r&&r.isViewBreakup?l.createElement("div",{onClick:function(e){return n=v.additionalDetails.data||{},null!=(o=(l=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"))?JSON.parse(l):{})&&null!==(t=o.value)&&void 0!==t&&t.totalAmount&&(n=null==o?void 0:o.value),g(n),void E(!0);var t,n,l,o},style:{marginTop:"12px"}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},p("WS_PAYMENT_VIEW_BREAKUP"))):null,m&&l.createElement(t.Modal,{headerBarMain:l.createElement(h,{label:p("WS_CALCULATION_BREAKUP")}),headerBarEnd:l.createElement(b,{onClick:function(){E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},l.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_APPLICATION_FEE_HEADER")),null==_||null===(i=_.billSlabData)||void 0===i||null===(a=i.FEE)||void 0===a?void 0:a.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_SERVICE_FEE_HEADER")),null==_||null===(u=_.billSlabData)||void 0===u||null===(c=u.CHARGES)||void 0===c?void 0:c.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==_||null===(d=_.billSlabData)||void 0===d||null===(s=d.TAX)||void 0===s?void 0:s.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))};function Cl(e){var i,a,u,c,d,s,v,p,f,m,E,y=e.applicationDetails,g=e.workflowDetails,h=e.isDataLoading,S=e.applicationData,b=e.timelineStatusPrefix,T=e.showTimeLine,A=void 0===T||T,C=e.statusAttribute,P=void 0===C?"status":C,O=e.paymentsList,N=e.oldValue,D=e.isInfoLabel,I=void 0!==D&&D,w=o.useTranslation().t;function R(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}var L=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,l=t.getDate();return(l=(l>9?"":"0")+l)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()},x=function(e,t){if(void 0===t&&(t=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var n,o={date:L(null==S||null===(n=S.auditDetails)||void 0===n?void 0:n.createdTime),source:(null==S?void 0:S.channel)||""};return l.createElement(ml,{data:o})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var r,i,a,u,c,d,s,v,p,f,m,E,g,h,b,T,A,C,P={uuid:null==e||null===(r=e.assignes)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==y?void 0:y.tenantId,businessIds:null==y?void 0:y.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:function(e){return"+91 "+_.get(e,"ProcessInstances["+t+"].assignes[0].mobileNumber")}}},O={date:null==e||null===(a=e.auditDetails)||void 0===a?void 0:a.lastModified,name:null==e||null===(u=e.assignes)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.name,mobileNumber:(null==S||null===(d=S.processInstance)||void 0===d||null===(s=d.assignes)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.uuid)===(null==e||null===(p=e.assignes)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.uuid)&&null!=S&&null!==(m=S.processInstance)&&void 0!==m&&null!==(E=m.assignes)&&void 0!==E&&null!==(g=E[0])&&void 0!==g&&g.mobileNumber?null==S||null===(h=S.processInstance)||void 0===h||null===(b=h.assignes)||void 0===b||null===(T=b[0])||void 0===T?void 0:T.mobileNumber:null==e||null===(A=e.assignes)||void 0===A||null===(C=A[0])||void 0===C?void 0:C.mobileNumber,comment:w(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return l.createElement(ml,{data:O,OpenImage:R,privacy:P})}var N,D,I,x,M,k={date:L(null==S||null===(N=S.auditDetails)||void 0===N?void 0:N.lastModifiedTime),name:null==e||null===(D=e.assignes)||void 0===D||null===(I=D[0])||void 0===I?void 0:I.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(x=e.assignes)||void 0===x||null===(M=x[0])||void 0===M?void 0:M.mobileNumber};return l.createElement(ml,{data:k})},M=function(e,t){return e?t?e:w(e):w("NA")},k=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),F=window.location.href.includes("employee/noc"),B=window.location.href.includes("employee/obps"),U=(window.location.href.includes("employee/ws"),function(){return window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||k?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}}),j=function(e){return null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?M(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+w(null==e?void 0:e.isUnit):w("N/A"):null!=e&&e.value?M(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):w("N/A")};return l.createElement(t.Card,{style:{position:"relative"},className:"employeeCard-override"},I?l.createElement(Tl,{t:w,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==y||null===(i=y.applicationDetails)||void 0===i?void 0:i.map(function(e,o){var i,a,u,c,d,s,v,p,f,m,E,_,h,S,b,T,A,C,P,D,I,R,L,x,M,H,W,z,V,Y,K,$,q,G,Z,X,Q,J,ee;return l.createElement(l.Fragment,{key:o},l.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:k?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==o||e.asSectionHeader?l.createElement(l.Fragment,null,l.createElement(t.CardSectionHeader,{style:0==o&&k?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},F?""+w(e.title):w(e.title),null!=e&&e.Component?l.createElement(e.Component,null):null)):l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},w(e.title)),(null==e?void 0:e.isTable)&&l.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},l.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(function(e){return l.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},w(e))})),null==e?void 0:e.tableRows.map(function(t,o){return o===(null==e?void 0:e.tableRows.length)-1?l.createElement(n.Fragment,null,l.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),l.createElement("tr",null,t.map(function(e){return l.createElement("td",{style:{textAlign:"left"}},w(e))}))):l.createElement("tr",null,t.map(function(e){return l.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},w(e))}))})),l.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||k?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(i=e.values)||void 0===i?void 0:i.map(function(n,o){var i,a;return!0===n.map&&"N/A"!==n.value?l.createElement(t.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:w(n.title),label:w(n.title),text:l.createElement("img",{src:w(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?l.createElement(t.Row,{key:w(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?l.createElement("div",{style:{width:"200%"}},l.createElement(r.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},w(null==n?void 0:n.title)))):F||B?""+w(n.title):w(n.title),text:l.createElement("div",null,l.createElement(r.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:o===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement("div",null,window.location.href.includes("modify")?l.createElement(t.Row,{className:"border-none",key:""+n.title,label:""+w(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement(t.Row,{key:w(n.title),label:w(n.title),text:j(n),last:o===(null==e||null===(i=e.values)||void 0===i?void 0:i.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}))})))),(null==e?void 0:e.belowComponent)&&l.createElement(e.belowComponent,null),(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.inspectionReport)&&l.createElement(vl,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:O}),(null==y||null===(u=y.applicationData)||void 0===u||null===(c=u.additionalDetails)||void 0===c||null===(d=c.fieldinspection_pending)||void 0===d?void 0:d.length)>0&&(null==e||null===(s=e.additionalDetails)||void 0===s?void 0:s.fiReport)&&l.createElement(ol,{fiReport:null==y||null===(v=y.applicationData)||void 0===v||null===(p=v.additionalDetails)||void 0===p?void 0:p.fieldinspection_pending}),(null==e||null===(f=e.additionalDetails)||void 0===f?void 0:f.floors)&&l.createElement(dl,{floors:null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.floors}),(null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.owners)&&l.createElement(sl,{owners:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners}),(null==e||null===(h=e.additionalDetails)||void 0===h?void 0:h.units)&&l.createElement(yl,{units:null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.units}),(null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.accessories)&&l.createElement(El,{units:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.accessories}),(null==e||null===(A=e.additionalDetails)||void 0===A?void 0:A.permissions)&&(null==g||null===(C=g.data)||void 0===C||null===(P=C.nextActions)||void 0===P?void 0:P.length)>0&&l.createElement(al,{applicationData:null==y?void 0:y.applicationData,t:w,permissions:null==e||null===(D=e.additionalDetails)||void 0===D?void 0:D.permissions}),(null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.obpsDocuments)&&l.createElement(nl,{t:w,applicationData:null==y?void 0:y.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:g}),(null==e||null===(R=e.additionalDetails)||void 0===R?void 0:R.noc)&&l.createElement(il,{t:w,isNoc:!0,NOCdata:e.values,applicationData:null==y?void 0:y.applicationData,docs:e.additionalDetails.noc,noc:null===(L=e.additionalDetails)||void 0===L?void 0:L.data,bpaActionsDetails:g}),(null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.scruntinyDetails)&&l.createElement(vl,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.buildingExtractionDetails)&&l.createElement(vl,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(H=e.additionalDetails)||void 0===H?void 0:H.subOccupancyTableDetails)&&l.createElement(pl,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==y?void 0:y.applicationData}),(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.documentsWithUrl)&&l.createElement(tl,{documents:null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.documentsWithUrl}),(null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.documents)&&l.createElement(ul,{documents:null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.documents}),(null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.taxHeadEstimatesCalculation)&&l.createElement(cl,{taxHeadEstimatesCalculation:null==e||null===($=e.additionalDetails)||void 0===$?void 0:$.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&l.createElement(_l,{wsAdditionalDetails:e,oldValue:N}),(null==e||null===(q=e.additionalDetails)||void 0===q?void 0:q.redirectUrl)&&l.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},l.createElement(r.Link,{to:null==e||null===(G=e.additionalDetails)||void 0===G||null===(Z=G.redirectUrl)||void 0===Z?void 0:Z.url},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==e||null===(X=e.additionalDetails)||void 0===X||null===(Q=X.redirectUrl)||void 0===Q?void 0:Q.title))),(null==e||null===(J=e.additionalDetails)||void 0===J?void 0:J.estimationDetails)&&l.createElement(Sl,{wsAdditionalDetails:e,workflowDetails:g}),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&l.createElement(Al,{wsAdditionalDetails:e,workflowDetails:g}))}),A&&(null==g||null===(a=g.data)||void 0===a||null===(u=a.timeline)||void 0===u?void 0:u.length)>0&&l.createElement(l.Fragment,null,l.createElement(t.BreakLine,null),((null==g?void 0:g.isLoading)||h)&&l.createElement(t.Loader,null),!(null!=g&&g.isLoading)&&!h&&l.createElement(n.Fragment,null,l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},w("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=g&&null!==(c=g.data)&&void 0!==c&&c.timeline&&1===(null==g||null===(d=g.data)||void 0===d||null===(s=d.timeline)||void 0===s?void 0:s.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:w(""+b+(null==g||null===(v=g.data)||void 0===v||null===(p=v.timeline[0])||void 0===p?void 0:p.state)),customChild:x(null==g||null===(f=g.data)||void 0===f?void 0:f.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==g||null===(m=g.data)||void 0===m?void 0:m.timeline)&&(null==g||null===(E=g.data)||void 0===E?void 0:E.timeline.map(function(e,n,o){var r,i,a,u,c,d,s="";return window.location.href.includes("/obps/")&&(s=null!=g&&null!==(r=g.data)&&void 0!==r&&null!==(i=r.timeline[n-1])&&void 0!==i&&null!==(a=i.state)&&void 0!==a&&a.includes("BACK_FROM")||null!=g&&null!==(u=g.data)&&void 0!==u&&null!==(c=u.timeline[n-1])&&void 0!==c&&null!==(d=c.state)&&void 0!==d&&d.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:w(""+b+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[P])+s),customChild:x(e,n)}))}))))))}function Pl(e){var n,o,r,i,a,u,c,d,s,v,p,f,m,E,y,_,g,h,S=e.t,b=e.showToast,T=e.closeToast,A=e.businessService;if(null!=A&&A.includes("NewTL")||null!=A&&A.includes("TL")||null!=A&&A.includes("EDITRENEWAL")){var C,P="";switch(null==b||null===(C=b.action)||void 0===C?void 0:C.action){case"SENDBACK":P="error"===(null==b?void 0:b.key)?null==b||null===(n=b.error)||void 0===n?void 0:n.message:S("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":P="error"===(null==b?void 0:b.key)?null==b||null===(o=b.error)||void 0===o?void 0:o.message:S("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":P="error"===(null==b?void 0:b.key)?null==b||null===(r=b.error)||void 0===r?void 0:r.message:S("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":P="error"===(null==b?void 0:b.key)?null==b||null===(i=b.error)||void 0===i?void 0:i.message:S("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":P="error"===(null==b?void 0:b.key)?null==b||null===(a=b.error)||void 0===a?void 0:a.message:S("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":P="error"===(null==b?void 0:b.key)?null==b||null===(u=b.error)||void 0===u?void 0:u.message:S("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":P="error"===(null==b?void 0:b.key)?null==b||null===(c=b.error)||void 0===c?void 0:c.message:S("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:P="error"===(null==b?void 0:b.key)?null==b||null===(d=b.error)||void 0===d?void 0:d.message:S("ES_"+A+"_"+(null==b||null===(s=b.action)||void 0===s?void 0:s.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,b&&l.createElement(t.Toast,{error:"error"===b.key,label:P,onClose:T}))}if(null!=A&&A.includes("BPA")||null!=A&&A.includes("BPA_LOW")||null!=A&&A.includes("BPA_OC")){var O,N=function(e){var t;return void 0===e&&(e=[]),2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=A&&A.includes("BPA_OC")?S(e[1]):S(e[0])},D="";switch(null==b||null===(O=b.action)||void 0===O?void 0:O.action){case"REVOCATE":D="error"===(null==b?void 0:b.key)?null==b||null===(v=b.error)||void 0===v?void 0:v.message:N(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":D="error"===(null==b?void 0:b.key)?null==b||null===(p=b.error)||void 0===p?void 0:p.message:N(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":D="error"===(null==b?void 0:b.key)?null==b||null===(f=b.error)||void 0===f?void 0:f.message:N(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":D="error"===(null==b?void 0:b.key)?null==b||null===(m=b.error)||void 0===m?void 0:m.message:N(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":D="error"===(null==b?void 0:b.key)?null==b||null===(E=b.error)||void 0===E?void 0:E.message:N(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":D="error"===(null==b?void 0:b.key)?null==b||null===(y=b.error)||void 0===y?void 0:y.message:N(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":D="error"===(null==b?void 0:b.key)?null==b||null===(_=b.error)||void 0===_?void 0:_.message:N(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:D="error"===(null==b?void 0:b.key)?null==b||null===(g=b.error)||void 0===g?void 0:g.message:S("ES_"+A+"_"+(null==b||null===(h=b.action)||void 0===h?void 0:h.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,b&&l.createElement(t.Toast,{error:"error"===b.key,label:D,onClose:T}))}var I,w,R="error"===(null==b?void 0:b.key)?null==b||null===(I=b.error)||void 0===I?void 0:I.message:"ES_"+A+"_"+(null==b||null===(w=b.action)||void 0===w?void 0:w.action)+"_UPDATE_SUCCESS";return l.createElement(l.Fragment,null,b&&l.createElement(t.Toast,{error:"error"===b.key,label:S(R),onClose:T}))}function Ol(e){var r,i,a,u,d,s,v,p,f,m,E,y,_,g,h,S,b=e.workflowDetails,T=e.displayMenu,A=e.onActionSelect,C=e.setDisplayMenu,P=e.businessService,O=e.forcedActionPrefix,N=e.ActionBarStyle,D=void 0===N?{}:N,I=e.MenuStyle,w=void 0===I?{}:I,R=o.useTranslation().t,L=Digit.UserService.getUser(),x=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){var M=sessionStorage.getItem("Digit.citizen.userRequestObject"),k=M?JSON.parse(M):{};L=null==k?void 0:k.value}var F=null===(r=L)||void 0===r||null===(i=r.info)||void 0===i||null===(a=i.roles)||void 0===a?void 0:a.map(function(e){return e.code}),B=!1,U=!1,j=(null==b||null===(u=b.data)||void 0===u||null===(d=u.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s?void 0:s.filter(function(e){return(null==F?void 0:F.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles}))||(null==b||null===(v=b.data)||void 0===v||null===(p=v.nextActions)||void 0===p?void 0:p.filter(function(e){return(null==F?void 0:F.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles}));return Digit.Hooks.useClickOutside(x,function(){C(!1)},T),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==j?void 0:j.length)||null!=j&&null!==(f=j[0])&&void 0!==f&&null!==(m=f.redirectionUrl)&&void 0!==m&&m.pathname.includes("/pt/property-details/")&&1==(null==j?void 0:j.length)?(U=!1,B=!0):(null==j?void 0:j.length)>0&&(U=!0,B=!1),l.createElement(l.Fragment,null,!(null!=b&&b.isLoading)&&U&&!B&&l.createElement(t.ActionBar,{style:c({},D)},T&&(null!=b&&null!==(E=b.data)&&void 0!==E&&null!==(y=E.actionState)&&void 0!==y&&y.nextActions||null!=b&&null!==(_=b.data)&&void 0!==_&&_.nextActions)?l.createElement(t.Menu,{localeKeyPrefix:O||"WF_EMPLOYEE_"+(null==P?void 0:P.toUpperCase()),options:j,optionKey:"action",t:R,onSelect:A,style:w}):null,l.createElement(t.SubmitBar,{ref:x,label:R("WF_TAKE_ACTION"),onSubmit:function(){return C(!T)}})),!(null!=b&&b.isLoading)&&!U&&B&&l.createElement(t.ActionBar,{style:c({},D)},l.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==j||null===(g=j[0])||void 0===g?void 0:g.action,value:null==j||null===(h=j[0])||void 0===h?void 0:h.action,onClick:function(e){A((null==j?void 0:j[0])||{})}},R((O||"WF_EMPLOYEE_"+(null==P?void 0:P.toUpperCase()))+"_"+(null==j||null===(S=j[0])||void 0===S?void 0:S.action)))))}var Nl=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Dl=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Nl,null))};function Il(e){var n=e.action,r=e.closeWarningPopup,i=o.useTranslation().t,a=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},i("PT_DUES_ARE_PENDING")),headerBarEnd:l.createElement(Dl,{onClick:function(){r()}}),hideSubmit:!0,isDisabled:!1,popupStyles:a?{}:{width:"29%",marginTop:"auto"}},l.createElement(t.Card,null,l.createElement("div",{style:{marginBottom:"30px"}},l.createElement("h1",null,i("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",i("PT_DUE_WARNING_MSG2"))),l.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+i("PT_AMOUNT_DUE"),text:"₹"+i(null==n?void 0:n.AmountDueForPay)}),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:i("ES_PT_COMMON_CANCEL"),onSubmit:r,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:i("PT_COLLECT"),onSubmit:function(){var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}var wl=function(e){var i,u=Digit.ULBService.getCurrentTenantId(),d=Digit.ULBService.getStateId(),s=o.useTranslation().t,v=r.useHistory(),p=r.useParams().id,f=n.useState(!1),m=f[0],E=f[1],y=n.useState(null),_=y[0],g=y[1],h=n.useState(!1),S=h[0],b=h[1],T=n.useState(!1),A=T[0],C=T[1],P=n.useState(!1),O=P[0],N=P[1],D=e.applicationDetails,I=e.showToast,w=e.setShowToast,R=e.isLoading,L=e.isDataLoading,x=e.applicationData,M=e.mutate,k=e.nocMutation,F=e.workflowDetails,B=e.businessService,U=e.closeToast,j=e.moduleCode,H=e.timelineStatusPrefix,W=e.forcedActionPrefix,z=e.statusAttribute,V=e.ActionBarStyle,Y=e.MenuStyle,K=e.paymentsList,$=e.showTimeLine,q=void 0===$||$,G=e.oldValue,Z=e.isInfoLabel,X=void 0!==Z&&Z,Q=e.clearDataDetails;n.useEffect(function(){I&&F.revalidate()},[I]);var J=a.useQueryClient(),ee=function(){g(null),b(!1)};return R||A?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,R?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(Cl,{applicationDetails:D,workflowDetails:F,isDataLoading:L,applicationData:x,businessService:B,timelineStatusPrefix:H,statusAttribute:z,paymentsList:K,showTimeLine:q,oldValue:G,isInfoLabel:X}),S?l.createElement(el,{t:s,action:_,tenantId:u,state:d,id:p,applicationDetails:D,applicationData:null==D?void 0:D.applicationData,closeModal:ee,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{var l=function(t){if(o)return t;M&&(C(!0),M(e,{onError:function(e,t){C(!1),w({key:"error",error:e}),setTimeout(U,5e3)},onSuccess:function(e,t){var l,o,r,i,a,u,c,d,p;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),C(!1),null!=n&&n.bpa&&(e.selectedAction=_,v.replace("/digit-ui/employee/obps/response",{data:e})),null!=n&&n.isStakeholder&&(e.selectedAction=_,v.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=n&&n.isNoc&&v.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(l=e.Amendments)||void 0===l?void 0:l.length)>0?null!=t&&null!==(o=t.AmendmentUpdate)&&void 0!==o&&null!==(r=o.workflow)&&void 0!==r&&r.action.includes("SEND_BACK")?w({key:"success",label:s("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(i=t.AmendmentUpdate)&&void 0!==i&&null!==(a=i.workflow)&&void 0!==a&&a.action.includes("RE-SUBMIT")?w({key:"success",label:s("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(u=t.AmendmentUpdate)&&void 0!==u&&null!==(c=u.workflow)&&void 0!==c&&c.action.includes("APPROVE")?w({key:"success",label:s("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(d=t.AmendmentUpdate)&&void 0!==d&&null!==(p=d.workflow)&&void 0!==p&&p.action.includes("REJECT")&&w({key:"success",label:s("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(w({key:"success",action:_}),Q&&setTimeout(Q,3e3),setTimeout(U,5e3),J.clear(),J.refetchQueries("APPLICATION_SEARCH"))}})),ee()},o=!1;C(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute(c({},e)));var r=function(){if(!1!==t&&k){var e,n=null===(e=t)||void 0===e?void 0:e.map(function(e){return null==k?void 0:k.mutateAsync(e)}),l=he(function(){return C(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(function(e){var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,l,r,i,a,u,c,d,v,p,f;C(!1);var m=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors)&&void 0!==l&&null!==(r=l[0])&&void 0!==r&&r.code?s(null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(u=a.Errors)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.code):(null==e||null===(d=e.response)||void 0===d||null===(v=d.data)||void 0===v||null===(p=v.Errors)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.message)||e;ee(),w({key:"error",error:{message:m}}),setTimeout(U,5e3),o=!0});if(l&&l.then)return l.then(function(){})}}();return Promise.resolve(r&&r.then?r.then(l):l(r))}catch(e){return Promise.reject(e)}},actionData:null==F||null===(i=F.data)||void 0===i?void 0:i.timeline,businessService:B,workflowDetails:F,moduleCode:j}):null,O?l.createElement(Il,{action:_,workflowDetails:F,businessService:B,isWarningPop:O,closeWarningPopup:function(){N(!1)}}):null,l.createElement(Pl,{t:s,showToast:I,closeToast:U,businessService:B}),l.createElement(Ol,{workflowDetails:F,displayMenu:m,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)w({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(U,5e3);else if(null!=e&&e.isWarningPopUp)N(!0);else if(null!=e&&e.redirectionUrll){var t,n,l,o,r;if("ACTIVATE_CONNECTION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action))v.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),JSON.stringify({data:null==e||null===(o=e.redirectionUrll)||void 0===o?void 0:o.state,url:""+(null===(r=location)||void 0===r?void 0:r.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action)){var i,a;v.push(""+(null==e||null===(i=e.redirectionUrll)||void 0===i?void 0:i.pathname),{data:null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.state})}else{var u;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(u=e.redirectionUrll)||void 0===u?void 0:u.pathname))}}else if(null!=e&&e.redirectionUrl){var d,s;v.push({pathname:null===(d=e.redirectionUrl)||void 0===d?void 0:d.pathname,state:c({},null===(s=e.redirectionUrl)||void 0===s?void 0:s.state)})}else b(!0);g(e),E(!1)},setDisplayMenu:E,businessService:B,forcedActionPrefix:W,ActionBarStyle:V,MenuStyle:Y})))},Rl=function(){var e,i=o.useTranslation().t,a=Digit.Hooks.useQueryParams(),u=a.propertyId,d=a.tenantId,s=a.redirectToUrl,v=Digit.Hooks.pt.useGenericViewProperty(i,d,u,{}),p=v.isLoading,f=v.data,m=r.useLocation().state,E=r.useHistory();return n.useEffect(function(){"true"===sessionStorage.getItem("isCreateEnabledEmployee")?(sessionStorage.removeItem("isCreateEnabledEmployee"),E.replace("/digit-ui/employee")):sessionStorage.removeItem("isCreateEnabledEmployee")}),l.createElement("div",null,l.createElement("div",null,l.createElement(t.Header,null,i("PT_PROPERTY_INFO_HEADER"))),l.createElement(wl,{applicationDetails:f,isLoading:p,isDataLoading:p,workflowDetails:{},applicationData:null==f?void 0:f.applicationData,moduleCode:"PT"}),window.location.href.includes("redirectToUrl")&&"INACTIVE"!==(null==f||null===(e=f.applicationData)||void 0===e?void 0:e.status)&&l.createElement(t.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},l.createElement("div",null,l.createElement(t.SubmitBar,{label:i("PT_ADD_PROPERTY_TO_APP"),onSubmit:function(){return a=null!=s&&s.includes("employee/tl")?1600:300,setTimeout(function(){return window.scrollTo(0,a)},400),E.push(s+"?propertyId="+u+"&tenantId="+((null==f?void 0:f.tenantId)||d)+("PENDING_FOR_FIELD_INSPECTION"===(null==m||null===(e=m.data)||void 0===e||null===(t=e.applicationDetails)||void 0===t?void 0:t.applicationStatus)?"&applicationNumber="+(null==m||null===(n=m.data)||void 0===n||null===(l=n.applicationDetails)||void 0===l?void 0:l.applicationNo)+"&service="+(null==m||null===(o=m.data)||void 0===o||null===(r=o.applicationDetails)||void 0===r||null===(i=r.applicationData)||void 0===i?void 0:i.serviceType):""),c({},m));var e,t,n,l,o,r,i,a}}))))},Ll=["path","url"],xl=function(e){var n=e.stateCode,o=r.useRouteMatch(),i=o.path;return d(o,Ll),l.createElement("span",{className:"pt-citizen"},l.createElement(r.Switch,null,l.createElement(t.AppContainer,null,l.createElement(t.BackButton,null,"Back"),l.createElement(r.Route,{path:i+"/property/citizen-search",component:_e}),l.createElement(r.Route,{path:i+"/property/search-results"},l.createElement(Ae,{stateCode:n})),l.createElement(r.Route,{path:i+"/property/citizen-otp"},l.createElement(Ne,{stateCode:n})," "),l.createElement(t.PrivateRoute,{path:i+"/property/link-success/:propertyIds",component:Ce}),l.createElement(t.PrivateRoute,{path:i+"/property/new-application",component:P}),l.createElement(t.PrivateRoute,{path:i+"/view-property",component:function(){return l.createElement(Rl,null)}}))))},Ml=function(e){o.useTranslation();var n=a.useQueryClient(),i=r.useRouteMatch(),u=(r.useLocation(),r.useHistory()),c=Digit.ULBService.getStateId(),d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{})),s=d[0],v=d[2],p=Digit.Hooks.pt.useMDMS(c,"PropertyTax","CommonFieldsConfig").isLoading,f=r.useLocation().search,E=new URLSearchParams(f).get("redirectToUrl");return p?l.createElement(t.Loader,null):l.createElement(r.Switch,null,l.createElement(r.Route,{exact:!0,path:""+i.path},l.createElement(m,{onSubmit:function(){try{return u.push(i.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:s,redirectUrl:E,userType:"employee"})),l.createElement(r.Route,{exact:!0,path:i.path+"/save-property"},l.createElement(C,{data:s,onSuccess:function(){v(),n.invalidateQueries("PT_CREATE_PROPERTY")},redirectUrl:E,userType:"employee"})))},kl={searchId:{propertyIds:{type:"text",label:"PT_PROPERTY_UNIQUE_ID",placeHolder:"PT_PROPERTY_UNIQUE_ID_PLACEHOLDER",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},oldPropertyId:{type:"text",label:"PT_EXISTING_PROPERTY_ID",placeholder:"PT_EXISTING_PROPERTY_ID_PLACEHOLDER",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},mobileNumber:{type:"number",label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",componentInFront:"+91",placeHolder:"PT_HOME_SEARCH_RESULTS_OWN_MOB_PLACEHOLDER",validation:{minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}}},searchDetail:{locality:{type:"custom",label:"PT_SEARCH_LOCALITY",placeHolder:"PT_SEARCH_LOCALITY_PLACEHOLDER",validation:{required:"PTLOCALITYMANDATORY"},customComponent:t.Localities,customCompProps:{boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},disableLoader:!0}},doorNo:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",placeHolder:"PT_SEARCH_DOOR_NO_PLACEHOLDER",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}}},name:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",placeHolder:"PT_SEARCH_OWNER_NAME_PLACEHOLDER",validation:{minLength:{value:3,message:"PT_MIN_3CHAR"},pattern:{value:"[A-Za-z .`'-]{3,63}",message:"PAYMENT_INVALID_NAME"}}}}},Fl={propertyIds:"",mobileNumber:"",oldPropertyId:"",locality:"",name:"",doorNo:""},Bl=function(e){var i=o.useTranslation().t,a=Digit.ULBService.getCurrentTenantId(),u=n.useState({}),d=u[0],s=u[1],v=n.useState(Fl),p=v[0],f=v[1],m=n.useState("searchId"),E=m[0],y=m[1],_=n.useState(null),g=_[0],h=_[1],S=r.useLocation().search,b=new URLSearchParams(S).get("redirectToUrl"),T=n.memo(Digit.ComponentRegistryService.getComponent("CPTPropertySearchForm")),A=n.memo(Digit.ComponentRegistryService.getComponent("CPTPropertySearchResults")),C=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:function(e){var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),P=C.data,O=C.isLoading;n.useEffect(function(){1==sessionStorage.getItem("searchDetailValue")&&"searchId"===E&&y("searchDetail")},[E]);var N=n.useCallback(function(){f(Fl),s({}),h(null)}),D=n.useCallback(function(e){f(e),Object.keys(e).filter(function(t){return e[t]&&"object"!=typeof e[t]}).length>0?(s(Object.keys(e).filter(function(t){return e[t]}).reduce(function(t,n){var l;return c({},t,((l={})[n]="object"==typeof e[n]?e[n].code:e[n],l))},{})),h(null)):h({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"})});return O?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,i("SEARCH_PROPERTY")),l.createElement(T,{t:i,payload:p,searchBy:E,setSearchBy:y,PTSearchFields:kl,tenantId:a,onSubmit:D,onReset:N}),Object.keys(d).length>0&&l.createElement(A,{t:i,showToast:g,setShowToast:h,tenantId:a,payload:d,ptSearchConfig:c({},P),redirectToUrl:b}),g&&l.createElement(t.Toast,{error:g.error,warning:g.warning,label:i(g.label),onClose:function(){h(null)}}))},Ul=function(e){var n,i=e.path,a=e.url,u=e.userType,d=o.useTranslation().t,s=r.useLocation(),v=new URLSearchParams(r.useLocation().search).get("propertyId"),p=new URLSearchParams(r.useLocation().search).get("tenantId"),f=((n={})["/digit-ui/employee/pt/inbox"]="ES_TITLE_INBOX",n["/digit-ui/employee/pt/new-application"]="ES_TITLE_NEW_PROPERTY_APPLICATION",n["/digit-ui/employee/pt/search"]="ES_COMMON_SEARCH",n["/digit-ui/employee/pt/application-search"]="ES_COMMON_APPLICATION_SEARCH",r.useLocation().search),m=new URLSearchParams(f).get("redirectToUrl"),E=new URLSearchParams(f).get("from")||"",y=[{path:"/digit-ui/employee",content:d("ES_COMMON_HOME"),show:!0},{path:{pathname:v?m+"?propertyId="+v+"&tenantId="+p:m,state:c({},s.state)},content:m?function(e){return e.includes("employee/tl/new-application")?d("ES_TITLE_NEW_TRADE_LICESE_APPLICATION"):e.includes("employee/ws/new-application")?d("ES_COMMON_WS_NEW_CONNECTION"):e.includes("employee/ws/modify-application")?d("WS_WATER_AND_SEWERAGE_MODIFY_CONNECTION_LABEL"):d("WF_EMPLOYEE_NEWTL_RENEWAL_SUBMIT_BUTTON")}(m):E&&d(E)||"NONE",show:(m||E)&&!0,isBack:E&&!0,isredirected:!0},{path:"/digit-ui/employee/dss/drilldown",content:s.pathname.includes("/commonpt/search")?d("SEARCH_PROPERTY"):s.pathname.includes("/view-property")?d("PT_PROPERTY_INFORMATION"):d("PT_NEW_PROPERTY"),show:!0}],_=window.location.href.includes("/employee/commonpt/new-application");return l.createElement(r.Switch,null,l.createElement(l.Fragment,null,l.createElement("div",{className:"ground-container"},l.createElement("div",{style:_?{marginLeft:"12px"}:{}},l.createElement(t.BreadCrumb,{crumbs:y})),l.createElement(t.PrivateRoute,{exact:!0,path:i+"/",component:function(){return l.createElement(Kl,{matchPath:i,userType:u})}}),l.createElement(t.PrivateRoute,{path:i+"/new-application",component:function(){return l.createElement(Ml,{parentUrl:a})}}),l.createElement(t.PrivateRoute,{path:i+"/search",component:function(){return l.createElement(Bl,null)}}),l.createElement(t.PrivateRoute,{path:i+"/view-property",component:function(){return l.createElement(Rl,null)}}))))},jl=function(e){return l.createElement("div",{className:"w-fullwidth PropertySearchFormSwitcher"},e.keys.map(function(t){return l.createElement("span",{key:t,className:e.searchBy===t?"selected":"non-selected",onClick:function(){"searchDetail"===t&&!sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",1),"searchId"===t&&1==sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",2),e.onSwitch(t),e.onReset()}},e.t("PT_SEARCH_BY_"+(null==t?void 0:t.toUpperCase())))}))},Hl=function(e){return l.createElement("span",{className:"cell-text"},e)},Wl=[],zl=function(e){var n=e.currentStep,r=void 0===n?1:n,i=e.flow,a=void 0===i?"":i,u=o.useTranslation().t,c=window.Digit.Utils.browser.isMobile();return function(e){switch(e){case"STAKEHOLDER":Wl=[];break;case"WS":Wl=["WS_COMMON_PROPERTY_DETAILS","WS_COMMON_CONNECTION_DETAIL","WS_COMMON_DOCUMENT_DETAILS","WS_COMMON_SUMMARY"];break;default:Wl=["TL_COMMON_TR_DETAILS","TL_LOCATION_AND_OWNER_DETAILS","TL_DOCUMENT_DETAIL","TL_COMMON_SUMMARY"]}}(a),l.createElement("div",{className:"timeline-container",style:c?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},Wl.map(function(e,n,o){return l.createElement("div",{className:"timeline-checkpoint",key:n},l.createElement("div",{className:"timeline-content"},l.createElement("span",{className:"circle "+(n<=r-1&&"active")},n<r-1?l.createElement(t.TickMark,null):n+1),l.createElement("span",{className:"secondary-color"},u(e))),n<o.length-1&&l.createElement("span",{className:"line "+(n<r-1&&"active")}))}))},Vl={CPTPropertySearchForm:function(e){var o=e.tenantId,r=e.t,i=e.onSubmit,a=e.onReset,d=e.searchBy,s=e.PTSearchFields,v=e.setSearchBy,p=u.useForm({defaultValues:c({},e.payload)}),f=p.register,m=p.control,E=p.handleSubmit,y=p.getValues,_=p.formState,g=(0,p.watch)(),h=(null==s?void 0:s[d])||{};return n.useEffect(function(){"true"===sessionStorage.getItem("isCreateEnabledEmployee")?(sessionStorage.removeItem("isCreateEnabledEmployee"),history.replace("/digit-ui/employee")):sessionStorage.removeItem("isCreateEnabledEmployee")}),l.createElement("div",{className:"PropertySearchForm"},l.createElement(t.SearchForm,{onSubmit:i,handleSubmit:E},l.createElement(jl,{keys:Object.keys(s||{}),searchBy:d,onReset:a,t:r,onSwitch:v}),h&&Object.keys(h).map(function(e){var n,i,a,d=h[e],s=(null==d?void 0:d.validation)||{};return l.createElement(t.SearchField,{key:e},l.createElement("label",null,r(null==d?void 0:d.label),null!=d&&null!==(n=d.validation)&&void 0!==n&&n.required?"*":""),"custom"===(null==d?void 0:d.type)?l.createElement(u.Controller,{name:e,defaultValue:null==g?void 0:g[e],rules:d.validation,control:m,render:function(t,n){return l.createElement(d.customComponent,c({selectLocality:function(e){t.onChange(e)},tenantId:o,selected:null==g?void 0:g[e]},d.customCompProps))}}):l.createElement("div",{className:"field-container"},null!=d&&d.componentInFront?l.createElement("span",{className:"employee-card-input employee-card-input--front",style:{flex:"none"}},null==d?void 0:d.componentInFront):null,l.createElement(t.TextInput,{name:e,type:null==d?void 0:d.type,inputRef:f(c({value:y(e),shouldUnregister:!0},s))})),l.createElement(t.CardLabelError,{style:{marginTop:"-10px",marginBottom:"-10px"}},r(null==_||null===(i=_.errors)||void 0===i||null===(a=i[e])||void 0===a?void 0:a.message)))}),l.createElement("div",{className:"pt-search-action"},l.createElement(t.SearchField,{className:"pt-search-action-reset"},l.createElement("p",{onClick:function(){a({})}},r("ES_COMMON_CLEAR_ALL"))),l.createElement(t.SearchField,{className:"pt-search-action-submit"},l.createElement(t.SubmitBar,{label:r("ES_COMMON_SEARCH"),submit:!0})))))},CPTPropertySearchResults:function(e){var o,i,a,u,d,s,v=e.tenantId,p=e.t,f=e.payload,m=e.showToast,E=e.setShowToast,y=e.ptSearchConfig,_=e.redirectToUrl,g=r.useHistory(),h=r.useLocation().state,S=r.useLocation().search,b=new URLSearchParams(S).get("propertyId"),T=window.location.href.includes("&")?window.location.href.substring(window.location.href.indexOf("&")+1,window.location.href.length):"",A=n.useState(c({},f)),C=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:v,filters:A[0],configs:{enabled:Object.keys(f).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),P=C.data,O=C.isLoading,N=C.error,D=n.useMemo(function(){return[{Header:p("PT_COMMON_TABLE_COL_PT_ID"),disableSortBy:!0,Cell:function(e){var t=e.row;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement("span",{onClick:function(){g.push("/digit-ui/employee/commonpt/view-property?propertyId="+t.original.propertyId+"&tenantId="+v+"&redirectToUrl="+_,c({},h))}},t.original.propertyId)))}},{Header:p("PT_COMMON_TABLE_COL_OWNER_NAME"),disableSortBy:!0,Cell:function(e){return Hl(e.row.original.ownerNames||"")}},{Header:p("ES_INBOX_LOCALITY"),disableSortBy:!0,Cell:function(e){return Hl(p(e.row.original.locality)||"")}},{Header:p("PT_COMMON_TABLE_COL_STATUS_LABEL"),Cell:function(e){var t,n=e.row;return Hl(p((null==n||null===(t=n.original)||void 0===t?void 0:t.status)||"NA"))},disableSortBy:!0},{Header:p("PT_AMOUNT_DUE"),Cell:function(e){var t,n,l=e.row;return Hl(null!=l&&null!==(t=l.original)&&void 0!==t&&t.due?"₹ "+(null==l||null===(n=l.original)||void 0===n?void 0:n.due):p("PT_NA"))},disableSortBy:!0},{Header:p("ES_SEARCH_ACTION"),disableSortBy:!0,Cell:function(e){var t,n=e.row;return l.createElement("div",null,"INACTIVE"!==(null==n||null===(t=n.original)||void 0===t?void 0:t.status)?l.createElement("span",{className:"link"},_?l.createElement("span",{onClick:function(){g.push(T?_+"?"+(null==T?void 0:T.replace(b,n.original.propertyId)):_+"?propertyId="+n.original.propertyId+"&tenantId="+v,c({},h));var e=null!=_&&_.includes("employee/tl")?1600:300;setTimeout(function(){return window.scrollTo(0,e)},400)}},p("CPT_SELECT_PROPERTY")):null):p("PT_NA"))}}]},[]),I=window.Digit.Utils.browser.isMobile();if(O)return m&&E(null),l.createElement(t.Loader,null);if(N)return!m&&E({error:!0,label:(null==N||null===(a=N.response)||void 0===a||null===(u=a.data)||void 0===u||null===(d=u.Errors)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.code)||N}),null;var w=n.memo(Digit.ComponentRegistryService.getComponent("PTEmptyResultInbox")),R=Object.values((null==P?void 0:P.FormattedData)||{})||[];return null!=y&&y.ptSearchCount&&f.locality&&R&&R.length>y.ptSearchCount?(!m&&E({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"}),null):l.createElement(l.Fragment,null,0===(null==P||null===(o=P.Properties)||void 0===o?void 0:o.length)?l.createElement(w,{data:!0}):I?l.createElement(t.DetailsCard,{data:function(e){var t;return void 0===e&&(e=[]),null===(t=e)||void 0===t?void 0:t.map(function(e){var t={};return D.forEach(function(n){n.Cell&&(t[n.Header]=n.Cell({row:{original:e}}))}),t})}(R),t:p}):l.createElement(t.Table,{t:p,data:R,totalRecords:null==P||null===(i=P.Properties)||void 0===i?void 0:i.length,columns:D,getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},manualPagination:!1,disableSort:!0}))},CPTSearchProperty:_e,CPTPropertyAssemblyDetails:function(e){var o,r,a,d,s,v,p,m,E,y=e.t,_=e.config,g=e.onSelect,h=e.userType,b=e.formData,T=e.formState,A=e.setError,C=e.clearErrors,P=l.useState(c({},b.assemblyDet,{BuildingType:null==b?void 0:b.PropertyType,floorarea:null==b?void 0:b.landArea,constructionArea:null==b?void 0:b.constructionArea,usageCategoryMajor:null!=b&&b.usageCategoryMajor&&"NONRESIDENTIAL.OTHERS"===(null==b||null===(o=b.usageCategoryMajor)||void 0===o?void 0:o.code)?{code:""+(null==b||null===(r=b.usageCategoryMajor)||void 0===r?void 0:r.code),i18nKey:"PROPERTYTAX_BILLING_SLAB_OTHERS"}:null==b?void 0:b.usageCategoryMajor})),O=P[0],N=P[1],D=l.useState(""),I=D[0],w=D[1],R=Digit.ULBService.getStateId(),L=n.useState(!1),x=L[0],M=L[1],k=window.Digit.Utils.browser.isMobile(),F=(Digit.Hooks.pt.usePropertyMDMS(R,"PropertyTax","PTPropertyType")||{}).data,B=void 0===F?{}:F;E=null==B||null===(a=B.PropertyTax)||void 0===a?void 0:a.PropertyType;var U,j=(Digit.Hooks.pt.usePropertyMDMS(R,"PropertyTax","UsageCategory")||{}).data,H=void 0===j?{}:j;function W(e){var t,n;if("employee"===h)return null==e||null===(t=e.filter(function(e){return"VACANT"===e.code||e.code.split(".").length>1}))||void 0===t||null===(n=t.map(function(e){return{i18nKey:"COMMON_PROPTYPE_"+S(null==e?void 0:e.code,".","_"),code:null==e?void 0:e.code}}))||void 0===n?void 0:n.sort(function(e,t){return e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop())});if(Array.isArray(e)&&e.length>0)for(i=0;i<e.length;i++)1!=i&&4!=i&&Array.isArray(e)&&e.length>0&&menu.push({i18nKey:"COMMON_PROPTYPE_"+S(e[i].code,".","_"),code:e[i].code});return menu.sort(function(e,t){return e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop())}),menu}function z(e){var t;if("employee"===h)return null==e||null===(t=e.filter(function(e){return(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==e.code}))||void 0===t?void 0:t.map(function(e){var t=null==e?void 0:e.code.split(".");return 2==t.length?{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],code:null==e?void 0:e.code}:{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),code:null==e?void 0:e.code}});for(i=0;i<10;i++)Array.isArray(e)&&e.length>0&&"NONRESIDENTIAL"==e[i].code.split(".")[0]&&2==e[i].code.split(".").length&&menu.push({i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e[i].code.split(".")[1],code:e[i].code});return menu}U=(null==H||null===(d=H.PropertyTax)||void 0===d?void 0:d.UsageCategory)||[];var V=u.useForm(),Y=V.control,K=V.formState,$=K.errors,q=K.touched,G=V.trigger,Z=V.clearErrors,X=(0,V.watch)(),Q={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return l.useEffect(function(){var e=!1,t={};Object.keys(O).forEach(function(e){t[e]=null==X?void 0:X[e]}),f.isEqual(t,O)||Object.keys(O).forEach(function(t){O[t]?(e=!1,Z(t)):e=!0}),e?A(null==_?void 0:_.key,{type:$}):C(null==_?void 0:_.key),G(),M(e),g(null==_?void 0:_.key,O)},[O]),l.useEffect(function(){var e;Object.keys($).length&&!f.isEqual((null===(e=T.errors[_.key])||void 0===e?void 0:e.type)||{},$)?A(_.key,{type:$}):!Object.keys($).length&&T.errors[_.key]&&x&&C(_.key)},[$]),l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,y("PT_PROP_TYPE")+"*"),l.createElement("div",{class:"form-field"},l.createElement(u.Controller,{name:"BuildingType",control:Y,defaultValue:null==O?void 0:O.BuildingType,rules:{required:y("REQUIRED_FIELD")},key:null==_?void 0:_.key,render:function(e){var n,o;return l.createElement(t.Dropdown,{selected:1===(null===(n=W(E))||void 0===n?void 0:n.length)?W(E)[0]:null==O?void 0:O.BuildingType,disable:1===(null===(o=W(E))||void 0===o?void 0:o.length),option:W(E),autoFocus:"BuildingType"===I,select:function(t){var n;e.onChange(t),N(c({},O,((n={}).BuildingType=t,n))),w("BuildingType")},optionKey:"i18nKey",onBlur:null==e?void 0:e.onBlur,t:y})}}))),l.createElement(t.CardLabelError,{style:Q},null!=q&&q.BuildingType?null==$||null===(s=$.BuildingType)||void 0===s?void 0:s.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,y("PT_TOT_LAND_AREA")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"floorarea",control:Y,defaultValue:null==O?void 0:O.floorarea,rules:{required:y("REQUIRED_FIELD"),validate:function(e){return!!/^([0-9]){0,8}$/i.test(e)||y("PT_TOT_LAND_AREA_ERROR_MESSAGE")}},key:null==_?void 0:_.key,render:function(e){return l.createElement(t.TextInput,{t:y,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"totLandArea",value:null==e?void 0:e.value,autoFocus:"floorarea"===I,onChange:function(t){var n;null==e||e.onChange(t.target.value),N(c({},O,((n={}).floorarea=t.target.value,n))),w("floorarea")},onBlur:null==e?void 0:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:Q},null!=q&&q.floorarea?null==$||null===(v=$.floorarea)||void 0===v?void 0:v.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,y("PT_TOT_CONSTRUCTION_AREA")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"constructionArea",control:Y,defaultValue:null==O?void 0:O.constructionArea,key:null==_?void 0:_.key,rules:{required:y("REQUIRED_FIELD"),validate:function(e){return!!(/^([0-9]){0,8}$/i.test(e)&&null!=O&&O.floorarea&&parseInt(e)<parseInt(null==O?void 0:O.floorarea))||y("PT_TOT_CONSTRUCTION_AREA_ERROR_MESSAGE")}},render:function(e){return l.createElement(t.TextInput,{t:y,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"totConstructionArea",value:null==e?void 0:e.value,autoFocus:"constructionArea"===I,onChange:function(t){var n;null==e||e.onChange(t.target.value),w("constructionArea"),N(c({},O,((n={}).constructionArea=t.target.value,n)))},onBlur:null==e?void 0:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:k?c({},Q,{marginLeft:"0px"}):c({},Q)},null!=q&&q.constructionArea?null==$||null===(p=$.constructionArea)||void 0===p?void 0:p.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,y("PT_ASSESMENT_INFO_USAGE_TYPE")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"usageCategoryMajor",defaultValue:null==O?void 0:O.usageCategoryMajor,rules:{required:y("REQUIRED_FIELD")},control:Y,key:null==_?void 0:_.key,render:function(e){var n;return l.createElement(t.Dropdown,{selected:null==e?void 0:e.value,disable:1===(null===(n=z(U))||void 0===n?void 0:n.length),option:z(U),autoFocus:"usageCategoryMajor"===I,select:function(t){var n;null==e||e.onChange(t),w("usageCategoryMajor"),N(c({},O,((n={}).usageCategoryMajor=t,n)))},optionKey:"i18nKey",onBlur:null==e?void 0:e.onBlur,t:y})}}))),l.createElement(t.CardLabelError,{style:Q},null!=q&&q.usageCategoryMajor?null==$||null===(m=$.usageCategoryMajor)||void 0===m?void 0:m.message:""))},CPTPropertyLocationDetails:function(e){var n,o,r,i,a,d,s,v=e.t,p=e.config,m=e.onSelect,E=e.formData,y=e.formState,_=e.setError,g=e.clearErrors,h=Digit.Hooks.pt.useTenants()?Digit.Hooks.pt.useTenants():Digit.Hooks.tl.useTenants(),S=null===(n=Digit.UserService.getUser())||void 0===n?void 0:n.info;s="EMPLOYEE"==(null==S?void 0:S.type)?"employee":"citizen";var b=null==S?void 0:S.tenantId,T="TENANT_TENANTS_"+(null==S?void 0:S.tenantId.replace(".","_").toUpperCase()),A="employee"===s?{code:b,name:v(T),i18nKey:T}:null,C=l.useState(c({},null==E?void 0:E.locationDet,{cityCode:A,locality:null==E?void 0:E.locality,houseDoorNo:null==E?void 0:E.houseDoorNo,buildingColonyName:null==E?void 0:E.buildingColonyName,landmarkName:null==E?void 0:E.landmarkName})),P=C[0],O=C[1],N=l.useState(!1),D=N[0],I=N[1],w=u.useForm(),R=w.control,L=w.formState,x=L.errors,M=L.touched,k=w.trigger,F=w.clearErrors,B=(0,w.watch)();l.useEffect(function(){var e=!1,t={};Object.keys(P).forEach(function(e){t[e]=null==B?void 0:B[e]}),f.isEqual(t,P)||Object.keys(P).forEach(function(t){P[t]?(e=!1,F(t)):e=!0}),e?_(null==p?void 0:p.key,{type:x}):g(null==p?void 0:p.key),k(),I(e),m(null==p?void 0:p.key,P)},[P]),l.useEffect(function(){var e;Object.keys(x).length&&!f.isEqual((null===(e=y.errors[p.key])||void 0===e?void 0:e.type)||{},x)?_(p.key,{type:x}):!Object.keys(x).length&&y.errors[p.key]&&D&&g(p.key)},[x]);var U={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,v("PT_PROP_CITY")+"*"),l.createElement(u.Controller,{name:"",defaultValue:null==P?void 0:P.cityCode,control:R,rules:{required:v("REQUIRED_FIELD")},render:function(e){var n=e.onBlur,o=e.onChange;return l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:"employee"===s,option:h.sort(function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}),select:function(e){o(e),O(c({},P,{cityCode:e}))},optionKey:"code",onBlur:n,t:v})}})),l.createElement(t.CardLabelError,{style:U},null!=M&&M.cityCode?null==x||null===(o=x.cityCode)||void 0===o?void 0:o.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,v("PT_PROP_LOCALITY")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"locality",defaultValue:null==P?void 0:P.locality,control:R,rules:{required:v("REQUIRED_FIELD")},render:function(e){var n,o,r=e.onChange;return l.createElement(t.Localities,{selectLocality:function(e){r(e),O(c({},P,{locality:e}))},tenantId:null==P||null===(n=P.cityCode)||void 0===n?void 0:n.code,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},selected:e.value,disable:!(null!=P&&null!==(o=P.cityCode)&&void 0!==o&&o.code),disableLoader:!0,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:U},null!=M&&M.locality?null==x||null===(r=x.locality)||void 0===r?void 0:r.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,v("PT_HOUSE_DOOR_NO")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"houseDoorNo",defaultValue:null==P?void 0:P.houseDoorNo,control:R,rules:{required:v("REQUIRED_FIELD"),validate:function(e){return!!/^([a-zA-Z0-9 !@#$%^&*()_+\-={};':\\\\|,.<>/?]){1,64}$/i.test(e)||v("PT_HOUSE_DOOR_NO_ERROR_MESSAGE")}},render:function(e){var n=e.onChange;return l.createElement(t.TextInput,c({t:v,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"houseDoorNo",value:e.value,onChange:function(e){n(e.target.value),O(c({},P,{houseDoorNo:e.target.value}))},onBlur:e.onBlur},{pattern:"^([a-zA-Z0-9 !@#$%^&*()_+-={};':\\\\|,.<>/?]){1,64}$",title:v("PT_HOUSE_DOOR_NO_ERROR_MESSAGE")}))}}))),l.createElement(t.CardLabelError,{style:U},null!=M&&M.houseDoorNo?null==x||null===(i=x.houseDoorNo)||void 0===i?void 0:i.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,v("PT_PROPERTY_ADDRESS_STREET_NAME")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"buildingColonyName",defaultValue:null==P?void 0:P.buildingColonyName,control:R,rules:{required:v("REQUIRED_FIELD")},render:function(e){var n=e.onChange;return l.createElement(t.TextInput,{t:v,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"buildingColonyName",value:e.value,onChange:function(e){n(e.target.value),O(c({},P,{buildingColonyName:e.target.value}))},onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:U},null!=M&&M.buildingColonyName?null==x||null===(a=x.buildingColonyName)||void 0===a?void 0:a.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,""+v("PT_LANDMARK_NAME")),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{name:"landmarkName",defaultValue:null==P?void 0:P.landmarkName,control:R,rules:{},render:function(e){var n=e.onChange;return l.createElement(t.TextInput,{t:v,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"landmarkName",value:e.value,onChange:function(e){n(e.target.value),O(c({},P,{landmarkName:e.target.value}))},onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:U},null!=M&&M.landmarkName?null==x||null===(d=x.landmarkName)||void 0===d?void 0:d.message:""))},CPTPropertyOwnerDetails:function(e){var o,i,a,d,s,v,p,m,E,y,_,g,h,S,b=e.t,T=e.config,A=e.onSelect,C=e.userType,P=e.formData,O=e.formState,N=e.setError,D=e.clearErrors,I=r.useLocation().pathname,w=I.includes("/modify-application/"),R=I.includes("/property-mutation/"),L=window.Digit.Utils.browser.isMobile(),x=l.useState(""),M=x[0],k=x[1],F=l.useState([c({},P.owners&&P.owners[0],{name:P.owners&&P.owners[0]&&P.owners[0].name||(null==P||null===(o=P.owners)||void 0===o?void 0:o.name)||"",gender:P.owners&&P.owners[0]&&P.owners[0].gender||(null==P||null===(i=P.owners)||void 0===i?void 0:i.gender),mobileNumber:P.owners&&P.owners[0]&&P.owners[0].mobileNumber||(null==P||null===(a=P.owners)||void 0===a?void 0:a.mobileNumber)||"",fatherOrHusbandName:P.owners&&P.owners[0]&&P.owners[0].fatherOrHusbandName||(null==P||null===(d=P.owners)||void 0===d?void 0:d.fatherOrHusbandName)||"",relationship:P.owners&&P.owners[0]&&P.owners[0].relationship||(null==P||null===(s=P.owners)||void 0===s?void 0:s.relationship),ownershipCategory:M,ownerType:P.owners&&P.owners[0]&&(null===(v=P.owners[0])||void 0===v?void 0:v.ownerType)||(null===(p=P.owners)||void 0===p?void 0:p.ownerType),permanentAddress:P.owners&&P.owners[0]&&P.owners[0].permanentAddress||(null==P||null===(m=P.owners)||void 0===m?void 0:m.permanentAddress)||"",email:P.owners&&P.owners[0]&&P.owners[0].email||(null==P||null===(E=P.owners)||void 0===E?void 0:E.emailId)||"",isCoresAddr:!1})]),B=F[0],U=F[1],j=n.useState(!1),H=j[0],W=j[1],z=(l.useState(!1),(null==P?void 0:P.isUpdateProperty)||!1),V=(null==P?void 0:P.isEditProperty)||!1,Y=Digit.ULBService.getStateId(),K=Digit.Hooks.pt.useGenderMDMS(Y,"common-masters","GenderType").data,$=[];K&&K.map(function(e){$.push({i18nKey:"PT_COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})});var q=Digit.Hooks.tl.useTradeLicenseMDMS(Y,"common-masters","TLOwnerTypeWithSubtypes",{userType:C}).data,G=Digit.Hooks.pt.usePropertyMDMS(Y,"PropertyTax","OwnerType").data,Z=Digit.Hooks.pt.usePropertyMDMS(Y,"PropertyTax",["OwnerShipCategory"]).data;function X(e,t){var n,l,o="";!0===e.target.checked&&(o=function(e,t){return(null!=e&&e.houseDoorNo?(null==e?void 0:e.houseDoorNo)+", ":"")+" "+(null!=e&&e.buildingColonyName?(null==e?void 0:e.buildingColonyName)+", ":"")+(null!=e&&e.landmarkName?(null==e?void 0:e.landmarkName)+", ":"")+t(null==e?void 0:e.locality.i18nkey)+", "+t(null==e?void 0:e.cityCode.i18nKey)+","+(t(null==e?void 0:e.pincode)?""+e.pincode:" ")}(R?null==P||null===(n=P.searchResult)||void 0===n||null===(l=n.property)||void 0===l?void 0:l.locationDet:null==P?void 0:P.locationDet,b)),ae("permanentAddress",t,o),ae("isCoresAddr",t,e.target.checked)}n.useState(null==P||null===(y=P.owners)||void 0===y?void 0:y.isCorrespondenceAddress);var Q=[{name:"HUSBAND",code:"HUSBAND",i18nKey:"PT_RELATION_HUSBAND"},{name:"Father",code:"FATHER",i18nKey:"PT_RELATION_FATHER"}],J=u.useForm(),ee=J.control,te=J.formState,ne=te.errors,le=te.touched,oe=J.trigger,re=J.clearErrors,ie=(0,J.watch)();n.useEffect(function(){var e=!1,t={};B.map(function(n){Object.keys(n).forEach(function(e){t[e]=null==ie?void 0:ie[e]}),f.isEqual(t,n)||Object.keys(n).forEach(function(t){n[t]?(e=!1,re(t)):e=!0})}),e?N(null==T?void 0:T.key,{type:ne}):D(null==T?void 0:T.key),oe(),W(e),A(null==T?void 0:T.key,B.map(function(e){return c({},e,{ownershipCategory:null==M?void 0:M.value})}))},[B]),n.useEffect(function(){var e;Object.keys(ne).length&&!f.isEqual((null===(e=O.errors[T.key])||void 0===e?void 0:e.type)||{},ne)?N(T.key,{type:ne}):!Object.keys(ne).length&&O.errors[T.key]&&H&&D(T.key)},[ne]);var ae=function(e,t,n){void 0===e&&(e="name"),void 0===t&&(t=0),void 0===n&&(n=""),U(B.map(function(l,o){return o===t&&(l[e]=n),c({},l)}))},ue=n.useMemo(function(){var e,t,n=null==M?void 0:M.code,l=null==Z||null===(e=Z.PropertyTax)||void 0===e||null===(t=e.OwnerShipCategory)||void 0===t?void 0:t.filter(function(e){var t;return(null==e||null===(t=e.code)||void 0===t?void 0:t.split(".")[0])==(null==n?void 0:n.split(".")[0])}),o=null==l?void 0:l.filter(function(e){var t,n;return null==e||null===(t=e.code)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n[1]});return null==o?void 0:o.map(function(e){var t,n,l,o,r;return(null===(t=e.code)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n[1])&&c({},e,{i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null===(l=e.code)||void 0===l||null===(o=l.split("."))||void 0===o||null===(r=o[1])||void 0===r?void 0:r.replaceAll(".","_"))})})},[Z,null==M?void 0:M.code]),ce={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"},de=!(null==M||null===(_=M.code)||void 0===_||!_.includes("MULTIPLEOWNERS")),se=null==M||null===(g=M.code)||void 0===g?void 0:g.includes("INSTITUTIONAL");return l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:""},b("TL_NEW_OWNER_DETAILS_OWNERSHIP_TYPE_LABEL")+"*"),l.createElement(u.Controller,{name:"ownershipCategory",defaultValue:M,control:ee,rules:{required:b("REQUIRED_FIELD")},render:function(e){var n=e.onChange;return l.createElement(t.Dropdown,{className:"form-field",selected:e.value,option:q,select:function(e){var t;(null==e||null===(t=e.code)||void 0===t||!t.includes("MULTIPLEOWNERS"))&&(null==B?void 0:B.length)>1&&U([].concat(B.filter(function(e,t){return 0==t}))),n(e),k(e)},optionKey:"i18nKey",onBlur:e.onBlur,t:b})}})),null==B?void 0:B.map(function(e,n){var o,r,i,a,c,d,s,v,p,f,m,E,y,_,g,h,S,T,A,C;return l.createElement("div",{style:{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",boxSizing:"border-box",margin:"16px 0px",padding:"16px 8px"}},L&&de&&B.length>1&&l.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{bottom:"5px"},fill:1!=B.length?"#494848":"#FAFAFA"}),style:{margin:"0px"},onClick:function(e){U([].concat(B.filter(function(e,t){return t!=n})))}})),se?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_INSTITUTION_NAME")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"institutionName"+n,name:"institutionName"+n,defaultValue:null==e?void 0:e.institutionName,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[a-zA-Z-.`' ]*$/i.test(e)||b("PT_NAME_ERROR_MESSAGE")}},render:function(e){var o=e.onChange;return l.createElement(t.TextInput,{t:b,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"institutionName"+n,value:e.value,onChange:function(e){o(e.target.value),ae("institutionName",n,e.target.value)},disable:z||V,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["institutionName"+n]?null==ne||null===(o=ne["institutionName"+n])||void 0===o?void 0:o.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:""},b("PT_INSTITUTION_TYPE")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"institutionType"+n,name:"institutionType"+n,defaultValue:null==e?void 0:e.institutionType,control:ee,rules:{required:b("REQUIRED_FIELD")},render:function(e){var o=e.onChange,r=e.onBlur;return l.createElement(t.Dropdown,{selected:1===(null==ue?void 0:ue.length)?G[0]:e.value,disable:1===(null==ue?void 0:ue.length)||w,option:ue?ue.sort(function(e,t){return e.name.localeCompare(t.name)}):[],select:function(e){o(e),ae("institutionType",n,e)},optionKey:"i18nKey",t:b,onBlur:r})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["institutionType"+n]?null==ne||null===(r=ne["institutionType"+n])||void 0===r?void 0:r.message:""),l.createElement(t.CardSectionHeader,null,b("TL_AUTHORIZED_PERSON_DETAILS")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_OWNER_NAME")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"name"+n,name:"name"+n,defaultValue:null==e?void 0:e.name,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[a-zA-Z-.`' ]*$/i.test(e)||b("PT_NAME_ERROR_MESSAGE")}},render:function(e){var o=e.onChange;return l.createElement(t.TextInput,{t:b,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name"+n,value:e.value,onChange:function(e){o(e.target.value),ae("name",n,e.target.value)},disable:z||V,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["name"+n]?null==ne||null===(i=ne["name"+n])||void 0===i?void 0:i.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_LANDLINE_NUMBER_FLOATING_LABEL")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"altContactNumber"+n,name:"altContactNumber"+n,defaultValue:e.altContactNumber,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[0-9]{11}$/i.test(e)||b("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:function(e){var o=e.onChange;return l.createElement(t.MobileNumber,{type:"text",t:b,maxLength:11,value:e.value,name:"altContactNumber"+n,onChange:function(e){o(e),ae("altContactNumber",n,e)},disable:z||V,labelStyle:{border:"1px solid #000",borderRight:"none"},onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["altContactNumber"+n]?null==ne||null===(a=ne["altContactNumber"+n])||void 0===a?void 0:a.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_FORM3_MOBILE_NUMBER")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"mobileNumber"+n,name:"mobileNumber"+n,defaultValue:e.mobileNumber,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/[6-9]{1}[0-9]{9}/i.test(e)||b("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}},render:function(e){var o=e.onChange;return l.createElement(t.MobileNumber,{value:e.value,name:"mobileNumber"+n,onChange:function(e){o(e),ae("mobileNumber",n,e)},disable:z||V,labelStyle:{border:"1px solid #000",borderRight:"none"},onBlur:e.onBlur})}})),!L&&l.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"20%",alignSelf:"flex-start"}},de&&l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{bottom:"0px"},fill:1!=B.length?"#494848":"#FAFAFA"}),style:{margin:"0px"},onClick:function(e){U([].concat(B.filter(function(e,t){return t!=n})))}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["mobileNumber"+n]?null==ne||null===(c=ne["mobileNumber"+n])||void 0===c?void 0:c.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("TL_NEW_DESIG_OWNER_LABEL")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"designation"+n,name:"designation"+n,defaultValue:null==e?void 0:e.designation,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[a-zA-Z-.`' ]*$/i.test(e)||b("PT_NAME_ERROR_MESSAGE")}},render:function(e){var o=e.onChange;return l.createElement(t.TextInput,{t:b,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"designation"+n,value:e.value,onChange:function(e){o(e.target.value),ae("designation",n,e.target.value)},disable:z||V,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["designation"+n]?null==ne||null===(d=ne["designation"+n])||void 0===d?void 0:d.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_CORRESPONDANCE_ADDRESS")),l.createElement("div",{className:"form-field"},l.createElement(t.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:b,disabled:!0===(null==B||null===(s=B[n])||void 0===s?void 0:s.isCoresAddr),name:"address"+n,onChange:function(e){var t;!0!==(null==B||null===(t=B[n])||void 0===t?void 0:t.isCoresAddr)&&ae("permanentAddress",n,e.target.value)},value:null==B||null===(v=B[n])||void 0===v?void 0:v.permanentAddress}))),l.createElement(t.CheckBox,{className:"form-field",label:""+b("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),onChange:function(e){return X(e,n)},value:null==B||null===(p=B[n])||void 0===p?void 0:p.isCoresAddr,checked:(null==B||null===(f=B[n])||void 0===f?void 0:f.isCoresAddr)||!1,style:window.location.href.includes("/citizen/")?{paddingTop:"10px"}:{}})):l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_FORM3_MOBILE_NUMBER")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"mobileNumber"+n,name:"mobileNumber"+n,defaultValue:e.mobileNumber,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/[6-9]{1}[0-9]{9}/i.test(e)||b("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}},render:function(e){var o=e.onChange;return l.createElement(t.MobileNumber,{value:e.value,name:"mobileNumber"+n,onChange:function(e){o(e),ae("mobileNumber",n,e)},disable:z||V,labelStyle:{border:"1px solid #000",borderRight:"none"},onBlur:e.onBlur})}})),!L&&l.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"20%",alignSelf:"flex-start"}},de&&l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{bottom:"0px"},fill:1!=B.length?"#494848":"#FAFAFA"}),style:{margin:"0px"},onClick:function(e){U([].concat(B.filter(function(e,t){return t!=n})))}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["mobileNumber"+n]?null==ne||null===(m=ne["mobileNumber"+n])||void 0===m?void 0:m.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_OWNER_NAME")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"name"+n,name:"name"+n,defaultValue:null==e?void 0:e.name,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[a-zA-Z-.`' ]*$/i.test(e)||b("PT_NAME_ERROR_MESSAGE")}},render:function(e){var o=e.onChange;return l.createElement(t.TextInput,{t:b,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name"+n,value:e.value,onChange:function(e){o(e.target.value),ae("name",n,e.target.value)},disable:z||V,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["name"+n]?null==ne||null===(E=ne["name"+n])||void 0===E?void 0:E.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_FORM3_GENDER")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"gender"+n,name:"gender"+n,defaultValue:null==e?void 0:e.gender,control:ee,rules:{required:b("REQUIRED_FIELD")},render:function(e){var o=e.onChange,r=e.onBlur;return l.createElement(t.RadioOrSelect,{name:"gender"+n,options:$,selectedOption:e.value,optionKey:"code",onSelect:function(e){o(e),ae("gender",n,e)},t:b,disabled:z||V,isDropDown:!!window.location.href.includes("/employee"),onBlur:r})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["gender"+n]?null==ne||null===(y=ne["gender"+n])||void 0===y?void 0:y.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_FORM3_GUARDIAN_NAME")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"fatherOrHusbandName"+n,name:"fatherOrHusbandName"+n,defaultValue:null==e?void 0:e.fatherOrHusbandName,control:ee,rules:{required:b("REQUIRED_FIELD"),validate:function(e){return!!/^[a-zA-Z-.`' ]*$/i.test(e)||b("PT_NAME_ERROR_MESSAGE")}},render:function(e){var o=e.onChange;return l.createElement(t.TextInput,{t:b,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"fatherOrHusbandName"+n,value:e.value,onChange:function(e){o(e.target.value),ae("fatherOrHusbandName",n,e.target.value)},disable:z||V,onBlur:e.onBlur})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["fatherOrHusbandName"+n]?null==ne||null===(_=ne["fatherOrHusbandName"+n])||void 0===_?void 0:_.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_FORM3_RELATIONSHIP")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"relationship"+n,name:"relationship"+n,defaultValue:null==e?void 0:e.relationship,control:ee,rules:{required:b("REQUIRED_FIELD")},render:function(e){var o=e.onChange,r=e.onBlur;return l.createElement(t.RadioOrSelect,{name:"relationship"+n,options:Q,selectedOption:e.value,optionKey:"i18nKey",onSelect:function(e){o(e),ae("relationship",n,e)},t:b,disabled:z||V,isDropDown:!!window.location.href.includes("/employee"),onBlur:r})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["relationship"+n]?null==ne||null===(g=ne["relationship"+n])||void 0===g?void 0:g.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:""},b("PT_SPECIAL_APPLICANT_CATEGORY")+"*"),l.createElement("div",{className:"form-field"},l.createElement(u.Controller,{key:"ownerType"+n,name:"ownerType"+n,defaultValue:null==e?void 0:e.ownerType,control:ee,rules:{required:b("REQUIRED_FIELD")},render:function(e){var o=e.onChange,r=e.onBlur;return l.createElement(t.Dropdown,{selected:1===(null==G?void 0:G.length)?G[0]:e.value,disable:1===(null==G?void 0:G.length)||w,option:G?G.sort(function(e,t){return e.name.localeCompare(t.name)}):[],select:function(e){o(e),ae("ownerType",n,e)},optionKey:"i18nKey",t:b,onBlur:r})}}))),l.createElement(t.CardLabelError,{style:ce},null!=le&&le["ownerType"+n]?null==ne||null===(h=ne["ownerType"+n])||void 0===h?void 0:h.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,null,b("PT_CORRESPONDANCE_ADDRESS")),l.createElement("div",{className:"form-field"},l.createElement(t.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:b,disabled:!0===(null==B||null===(S=B[n])||void 0===S?void 0:S.isCoresAddr),name:"address"+n,onChange:function(e){var t;!0!==(null==B||null===(t=B[n])||void 0===t?void 0:t.isCoresAddr)&&ae("permanentAddress",n,e.target.value)},value:null==B||null===(T=B[n])||void 0===T?void 0:T.permanentAddress}))),l.createElement(t.CheckBox,{className:"form-field",label:""+b("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),onChange:function(e){return X(e,n)},value:null==B||null===(A=B[n])||void 0===A?void 0:A.isCoresAddr,checked:(null==B||null===(C=B[n])||void 0===C?void 0:C.isCoresAddr)||!1,style:window.location.href.includes("/citizen/")?{paddingTop:"10px"}:{}})))}),de?l.createElement("div",null,l.createElement("div",{style:{display:"flex",paddingBottom:"15px",color:"#FF8C00"}},l.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:function(){return U(function(e){return[].concat(e,[{name:"",gender:"",mobileNumber:"",fatherOrHusbandName:"",relationship:"",ownershipCategory:M,ownerType:"",permanentAddress:"",email:"",isCoresAddr:!1}])})}},b("PT_COMMON_ADD_APPLICANT_LABEL"))),l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-35px"}},b((null===(h=O.errors)||void 0===h||null===(S=h.mulipleOwnerError)||void 0===S?void 0:S.message)||""))):null)},CPTKnowYourProperty:function(e){var o,r,i=e.t,a=e.config,u=e.onSelect,d=e.formData,s=n.useState(null===(o=d)||void 0===o||null===(r=o.PropDetails)||void 0===r?void 0:r.KnowProperty),v=s[0],p=s[1];return(window.location.href.includes("/tl/tradelicence/edit-application/")||window.location.href.includes("/renew-trade/"))&&(d=c({},d,JSON.parse(sessionStorage.getItem("EditFormData")))),l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(zl,null):null,l.createElement(t.FormStep,{t:i,config:a,onSelect:function(){sessionStorage.setItem("KnowProperty",v.i18nKey),u(a.key,{KnowProperty:v})},onSkip:function(){return u()},isDisabled:!v},l.createElement(t.RadioButtons,{t:i,optionsKey:"i18nKey",isMandatory:a.isMandatory,options:[{i18nKey:"TL_COMMON_YES",code:"YES"},{i18nKey:"TL_COMMON_NO",code:"NO"}],selectedOption:v,onSelect:function(e){p(e)}})))},CPTPropertyDetails:function(e){var n,o,i,a,u,d,s,v,p,f,m,E,y,g,h,S,b,T,A,C,P,O,N,D,I,w,R,L,x,M,k,F,B,U,j,H,W,z,V,Y,K,$,q,G,Z,X,Q,J,ee,te,ne,le,oe,re,ie,ae,ue,ce,de,se,ve,pe,fe=e.t,me=e.config,Ee=e.onSelect,ye=e.formData,_e=("YES"===(null===(n=ye)||void 0===n||null===(o=n.knowyourproperty)||void 0===o||null===(i=o.KnowProperty)||void 0===i?void 0:i.code)||"false"===sessionStorage.getItem("VisitedLightCreate")?null===(a=ye)||void 0===a||null===(u=a.cptSearchQuery)||void 0===u?void 0:u.city:null===(d=ye)||void 0===d||null===(s=d.cpt)||void 0===s||null===(v=s.details)||void 0===v?void 0:v.tenantId)||Digit.ULBService.getCitizenCurrentTenant();if(window.location.href.includes("/tl/tradelicence/edit-application/")||window.location.href.includes("/renew-trade/")&&JSON.parse(sessionStorage.getItem("EditFormData"))){var ge=JSON.parse(sessionStorage.getItem("EditFormData"));ye=c({},ye,ge)}var he,Se,be,Te,Ae,Ce,Pe,Oe,Ne,De,Ie,we,Re,Le,xe,Me,ke,Fe,Be,Ue,je,He,We,ze,Ve,Ye,Ke,$e,qe,Ge,Ze,Xe,Qe,Je,et,tt=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:null!==(p=ye)&&void 0!==p&&null!==(f=p.cptId)&&void 0!==f&&f.id||null!==(m=ye)&&void 0!==m&&null!==(E=m.cpt)&&void 0!==E&&null!==(y=E.details)&&void 0!==y&&y.propertyId?"YES"===(null===(g=ye)||void 0===g||null===(h=g.knowyourproperty)||void 0===h||null===(S=h.KnowProperty)||void 0===S?void 0:S.code)||"false"===sessionStorage.getItem("VisitedLightCreate")?null===(b=ye)||void 0===b||null===(T=b.cptId)||void 0===T?void 0:T.id:null===(A=ye)||void 0===A||null===(C=A.cpt)||void 0===C||null===(P=C.details)||void 0===P?void 0:P.propertyId:window.location.href.includes("/tl/tradelicence/edit-application")||window.location.href.includes("/renew-trade/")?null===(O=ye)||void 0===O||null===(N=O.tradeLicenseDetail)||void 0===N||null===(D=N.additionalDetail)||void 0===D?void 0:D.propertyId:(null===(I=ye)||void 0===I||null===(w=I.cptId)||void 0===w?void 0:w.id)||(null===(R=ye)||void 0===R||null===(L=R.cpt)||void 0===L||null===(x=L.details)||void 0===x?void 0:x.propertyId)},tenantId:_e,privacy:Digit.Utils.getPrivacyObject()},{filters:{propertyIds:null!==(M=ye)&&void 0!==M&&null!==(k=M.cptId)&&void 0!==k&&k.id||null!==(F=ye)&&void 0!==F&&null!==(B=F.cpt)&&void 0!==B&&null!==(U=B.details)&&void 0!==U&&U.propertyId?"YES"===(null===(j=ye)||void 0===j||null===(H=j.knowyourproperty)||void 0===H||null===(W=H.KnowProperty)||void 0===W?void 0:W.code)||"false"===sessionStorage.getItem("VisitedLightCreate")?null===(z=ye)||void 0===z||null===(V=z.cptId)||void 0===V?void 0:V.id:null===(Y=ye)||void 0===Y||null===(K=Y.cpt)||void 0===K||null===($=K.details)||void 0===$?void 0:$.propertyId:window.location.href.includes("/tl/tradelicence/edit-application")||window.location.href.includes("/renew-trade/")?null===(q=ye)||void 0===q||null===(G=q.tradeLicenseDetail)||void 0===G||null===(Z=G.additionalDetail)||void 0===Z?void 0:Z.propertyId:(null===(X=ye)||void 0===X||null===(Q=X.cptId)||void 0===Q?void 0:Q.id)||(null===(J=ye)||void 0===J||null===(ee=J.cpt)||void 0===ee||null===(te=ee.details)||void 0===te?void 0:te.propertyId)},tenantId:_e,privacy:Digit.Utils.getPrivacyObject()}),nt=tt.isLoading,lt=tt.data,ot=function(){sessionStorage.setItem("cpt",null==lt?void 0:lt.Properties[0]),Ee("cpt",{details:null==lt?void 0:lt.Properties[0]})},rt=[];return lt&&null!=lt&&lt.Properties.length&&(null!=lt&&null!==(Pe=lt.Properties[0])&&void 0!==Pe&&null!==(Oe=Pe.address)&&void 0!==Oe&&Oe.doorNo&&rt.push(null==lt||null===(je=lt.Properties[0])||void 0===je||null===(He=je.address)||void 0===He?void 0:He.doorNo),(null!=lt&&null!==(Ne=lt.Properties[0])&&void 0!==Ne&&null!==(De=Ne.address)&&void 0!==De&&De.street||null!=lt&&null!==(Ie=lt.Properties[0])&&void 0!==Ie&&null!==(we=Ie.address)&&void 0!==we&&we.buildingName)&&rt.push((null==lt||null===(We=lt.Properties[0])||void 0===We||null===(ze=We.address)||void 0===ze?void 0:ze.street)||(null==lt||null===(Ve=lt.Properties[0])||void 0===Ve||null===(Ye=Ve.address)||void 0===Ye?void 0:Ye.buildingName)),null!=lt&&null!==(Re=lt.Properties[0])&&void 0!==Re&&null!==(Le=Re.address)&&void 0!==Le&&Le.landmark&&rt.push(null==lt||null===(Ke=lt.Properties[0])||void 0===Ke||null===($e=Ke.address)||void 0===$e?void 0:$e.landmark),null!=lt&&null!==(xe=lt.Properties[0])&&void 0!==xe&&null!==(Me=xe.address)&&void 0!==Me&&null!==(ke=Me.locality)&&void 0!==ke&&ke.code&&rt.push(fe(Digit.Utils.pt.getMohallaLocale(null==lt||null===(qe=lt.Properties[0])||void 0===qe||null===(Ge=qe.address)||void 0===Ge||null===(Ze=Ge.locality)||void 0===Ze?void 0:Ze.code,null==lt||null===(Xe=lt.Properties[0])||void 0===Xe?void 0:Xe.tenantId))),null!=lt&&null!==(Fe=lt.Properties[0])&&void 0!==Fe&&Fe.tenantId&&rt.push(fe(Digit.Utils.pt.getCityLocale(null==lt||null===(Qe=lt.Properties[0])||void 0===Qe?void 0:Qe.tenantId))),null!=lt&&null!==(Be=lt.Properties[0])&&void 0!==Be&&null!==(Ue=Be.address)&&void 0!==Ue&&Ue.pincode&&rt.push(null==lt||null===(Je=lt.Properties[0])||void 0===Je||null===(et=Je.address)||void 0===et?void 0:et.pincode)),nt?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(zl,{currentStep:window.location.href.includes("/ws/")?1:2,flow:window.location.href.includes("/ws/")?"WS":"",businessService:"WS"}):null,l.createElement(t.FormStep,{t:fe,config:me,onSelect:ot,onSkip:function(){return Ee()}},lt&&(null==lt?void 0:lt.Properties.length)&&l.createElement(l.Fragment,null,l.createElement(t.CardHeader,null,fe("PT_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:fe("PROPERTY_ID"),text:null==lt||null===(ne=lt.Properties[0])||void 0===ne?void 0:ne.propertyId}),l.createElement(t.Row,{className:"border-none",label:fe("OWNER_NAME"),text:null==lt||null===(le=lt.Properties[0])||void 0===le||null===(oe=le.owners[0])||void 0===oe?void 0:oe.name}),l.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:fe("PROPERTY_ADDRESS"),text:rt.join(", "),privacy:{uuid:null==lt||null===(re=lt.Properties)||void 0===re||null===(ie=re[0])||void 0===ie||null===(ae=ie.owners)||void 0===ae||null===(ue=ae[0])||void 0===ue?void 0:ue.uuid,fieldName:["doorNo","street","landmark"],model:"Property",showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==lt||null===(ce=lt.Properties[0])||void 0===ce?void 0:ce.tenantId,propertyIds:null==lt||null===(de=lt.Properties[0])||void 0===de?void 0:de.propertyId},jsonPath:"Properties[0].address.street",d:function(e){return(_.get(e,"Properties[0].address.doorNo")?_.get(e,"Properties[0].address.doorNo")+", ":"")+(_.get(e,"Properties[0].address.street")?_.get(e,"Properties[0].address.street")+", ":"")+(_.get(e,"Properties[0].address.landmark")?""+_.get(e,"Properties[0].address.landmark"):"")},isArray:!1}}}),l.createElement(t.Row,{className:"border-none",label:fe("PT_MUTATION_STATUS"),text:fe(null==lt||null===(se=lt.Properties[0])||void 0===se?void 0:se.status)}),l.createElement("div",{style:{textAlign:"left"}},l.createElement(r.Link,{to:"/digit-ui/citizen/commonpt/view-property?propertyId="+(null==lt||null===(ve=lt.Properties[0])||void 0===ve?void 0:ve.propertyId)+"&tenantId="+(null==lt||null===(pe=lt.Properties[0])||void 0===pe?void 0:pe.tenantId)},l.createElement(t.LinkButton,{style:{textAlign:"left"},label:fe("PT_VIEW_MORE_DETAILS")})),l.createElement(r.Link,{to:window.location.href.includes("/ws/modify-connection/")?"/digit-ui/citizen/ws/modify-connection/"+(null===(he=ye)||void 0===he?void 0:he.tenantId)+"/search-property":window.location.href.includes("/ws/edit-application/")?"/digit-ui/citizen/ws/edit-application/"+(null===(Se=ye)||void 0===Se?void 0:Se.tenantId)+"/search-property":window.location.href.includes("/ws/")?"/digit-ui/citizen/ws/create-application/search-property":window.location.href.includes("/renew-trade/")?"/digit-ui/citizen/tl/tradelicence/renew-trade/"+(null===(be=ye)||void 0===be?void 0:be.applicationNumber)+"/"+(null===(Te=ye)||void 0===Te?void 0:Te.tenantId)+"/know-your-property":window.location.href.includes("/edit-application/")?"/digit-ui/citizen/tl/tradelicence/edit-application/"+(null===(Ae=ye)||void 0===Ae?void 0:Ae.applicationNumber)+"/"+(null===(Ce=ye)||void 0===Ce?void 0:Ce.tenantId)+"/know-your-property":"/digit-ui/citizen/tl/tradelicence/new-application/know-your-property"},l.createElement(t.LinkButton,{style:{textAlign:"left"},label:fe("PT_CHANGE_PROPERTY"),onClick:function(){sessionStorage.setItem("changePropertySelected","yes"),sessionStorage.setItem("EditFormData",JSON.stringify(ye))}})))),l.createElement(t.SubmitBar,{style:{marginTop:"10px"},onSubmit:ot,label:fe("CS_COMMON_NEXT")}))))},CPTPropertySearchNSummary:function(e){var i,a,u,d,s,v,p,m,E,y,_,g,h,S=e.config,b=e.onSelect,T=e.formData,A=o.useTranslation().t,C=r.useHistory(),P=r.useLocation(),O=P.pathname,N=P.state;N=N&&("string"==typeof N||N instanceof String)?JSON.parse(N):N;var D=O.includes("/modify-application/"),I=Digit.ULBService.getCurrentTenantId(),w=window.location.href.includes("/employee/tl/new-application"),R=window.location.href.includes("/employee/tl/renew-application-details")||window.location.href.includes("/employee/tl/edit-application-details"),L=r.useLocation().search,x=new URLSearchParams(L).get("propertyId"),M=n.useState((null==T||null===(i=T.cptId)||void 0===i?void 0:i.id)||("null"!==x?x:"")||""),k=M[0],F=M[1],B=n.useState("null"!==x?x:""),U=B[0],j=B[1],H=n.useState(null),W=H[0],z=H[1],V=window.Digit.Utils.browser.isMobile(),Y=window.location.href.includes("?")?window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length):"",K=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:U},tenantId:I},{filters:{propertyIds:U},tenantId:I,enabled:!!U,privacy:Digit.Utils.getPrivacyObject()}),$=K.isLoading,q=K.error,G=K.data;if(n.useEffect(function(){k&&(window.location.href.includes("/renew-application-details/")||window.location.href.includes("/edit-application-details/"))&&j(k)},[k]),n.useEffect(function(){var e;(0==$&&q&&1==q||0==(null==G||null===(e=G.Properties)||void 0===e?void 0:e.length))&&z({error:!0,label:"PT_ENTER_VALID_PROPERTY_ID"})},[q,G]),n.useEffect(function(){b("cpt",{details:null==G?void 0:G.Properties[0]})},[G,O]),D)return l.createElement(l.Fragment,null);var Z,X,Q,J,ee,te,ne=window.location.pathname,le="";return G&&null!=G&&G.Properties.length&&(le=function(e,t){return(null!=e&&e.doorNo?(null==e?void 0:e.doorNo)+", ":"")+" "+(null!=e&&e.street?(null==e?void 0:e.street)+", ":"")+(null!=e&&e.landmark?(null==e?void 0:e.landmark)+", ":"")+t(Digit.Utils.pt.getMohallaLocale(null==e?void 0:e.locality.code,null==e?void 0:e.tenantId))+", "+t(Digit.Utils.pt.getCityLocale(null==e?void 0:e.tenantId))+(null!=e&&e.pincode&&t(null==e?void 0:e.pincode)?", "+e.pincode:" ")}(null==G||null===(Z=G.Properties[0])||void 0===Z?void 0:Z.address,A)),window.location.href.includes("/ws/"),l.createElement(l.Fragment,null,(!window.location.href.includes("/tl/")||!("MOVABLE"===(null==T||null===(a=T.tradedetils)||void 0===a||null===(u=a[0])||void 0===u||null===(d=u.structureType)||void 0===d?void 0:d.code))&&(w||R))&&l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller",style:window.location.href.includes("/ws/")?{fontWeight:"700"}:{}},""+A("PROPERTY_ID")),l.createElement("div",{className:"field",style:{marginTop:"20px",display:"flex"}},l.createElement(t.TextInput,{key:S.key,value:k,onChange:function(e){F(e.target.value),b(S.key,{id:e.target.value})},style:{width:"80%",float:"left",marginRight:"20px"}}),l.createElement("button",{className:"submit-bar",type:"button",style:{color:"white"},onClick:function(){k||z({error:!0,label:"PT_ENTER_PROPERTY_ID_AND_SEARCH"}),j(k),window.location.pathname.includes("/tl/new-application")?(C.push("/digit-ui/employee/tl/new-application?propertyId="+k),setTimeout(function(){return window.scrollTo(0,1600)},0)):window.location.pathname.includes("/ws/new-application")&&C.push("/digit-ui/employee/ws/new-application?propertyId="+k)}},""+A("PT_SEARCH")))),l.createElement("span",{onClick:function(){return C.push("/digit-ui/employee/commonpt/search?redirectToUrl="+ne+"&"+Y,c({},N))}},l.createElement(t.LinkButton,{label:A("CPT_SEARCH_PROPERTY"),style:{color:"#a82227",display:"inline-block"}})),"  |  ",l.createElement("span",{onClick:function(){return C.push("/digit-ui/employee/commonpt/new-application?redirectToUrl="+ne+"&"+Y,c({},N))}},l.createElement(t.LinkButton,{label:A("CPT_CREATE_PROPERTY"),style:{color:"#a82227",display:"inline-block"}})),G&&null!=G&&G.Properties.length?l.createElement(l.Fragment,null,l.createElement("header",{className:"card-section-header",style:{marginBottom:"5px",marginTop:"20px"}},A("PT_DETAILS")),l.createElement(t.StatusTable,null,l.createElement("div",{style:V?{}:{maxWidth:"60%"}},l.createElement(t.Row,{className:"border-none",labelStyle:V?{width:"40%"}:{},label:A("PROPERTY_ID"),text:null==G||null===(s=G.Properties[0])||void 0===s?void 0:s.propertyId}),l.createElement(t.Row,{className:"border-none",labelStyle:V?{width:"40%"}:{},label:A("OWNER_NAME"),text:(X=null==G?void 0:G.Properties[0],ee=null==X||null===(Q=X.owners)||void 0===Q?void 0:Q.filter(function(e){return null==e?void 0:e.active}),te=null==ee||null===(J=ee.map(function(e){return null==e?void 0:e.name}))||void 0===J?void 0:J.join(","),te||A("NA"))}),l.createElement(t.Row,{className:"border-none",labelStyle:V?{width:"40%"}:{},textStyle:{wordBreak:"break-word"},label:A("PROPERTY_ADDRESS"),text:le,privacy:{uuid:null==G||null===(v=G.Properties[0])||void 0===v||null===(p=v.owners)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.uuid,fieldName:["doorNo","street","landmark"],model:"Property",showValue:!0,loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==G||null===(E=G.Properties[0])||void 0===E?void 0:E.tenantId,propertyIds:null==G||null===(y=G.Properties[0])||void 0===y?void 0:y.propertyId},jsonPath:"Properties[0].address.street",d:function(e){return(f.get(e,"Properties[0].address.doorNo")?f.get(e,"Properties[0].address.doorNo")+", ":"")+(f.get(e,"Properties[0].address.street")?f.get(e,"Properties[0].address.street")+", ":"")+(f.get(e,"Properties[0].address.landmark")?""+f.get(e,"Properties[0].address.landmark"):"")},isArray:!1}}}))),l.createElement(r.Link,{to:"/digit-ui/employee/commonpt/view-property?propertyId="+k+"&tenantId="+I+"&from="+(null!==(_=window.location.pathname)&&void 0!==_&&_.includes("employee/ws/new-application")?"ES_COMMON_WS_NEW_CONNECTION":null!==(g=window.location.pathname)&&void 0!==g&&g.includes("employee/ws/modify-application")?"WS_MODIFY_CONNECTION_BUTTON":null!==(h=window.location.pathname)&&void 0!==h&&h.includes("employee/tl/new-application")?"ES_TITLE_NEW_TRADE_LICESE_APPLICATION":"WF_EMPLOYEE_NEWTL_RENEWAL_SUBMIT_BUTTON")},l.createElement(t.LinkButton,{label:A("CPT_COMPLETE_PROPERTY_DETAILS"),style:{color:"#a82227",textAlign:"Left"}}))):null,W&&l.createElement(t.Toast,{isDleteBtn:!0,labelstyle:{width:"100%"},error:W.error,warning:W.warning,label:A(W.label),onClose:function(){z(null)}})))},CPTSearchResults:Ae,CPTCreateProperty:m,CPTAcknowledgement:C},Yl=function(e){var t=e.stateCode,n=e.userType,o=e.tenants,i=r.useRouteMatch(),a=i.path,u=i.url,c=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:t,moduleCode:"PT",language:c}),Object.entries(Vl).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])}),Digit.SessionStorage.set("PT_TENANTS",o),"employee"===n?l.createElement(Ul,{path:a,url:u,userType:n}):l.createElement(xl,{stateCode:t})},Kl=function(e){var r=e.matchPath,i=o.useTranslation().t,a=Digit.Hooks.useSessionStorage("CPT_CREATE_PROPERTY",{})[2];n.useEffect(function(){a()},[]);var u=[{link:r+"/property/citizen-search",i18nKey:i("PT_SEARCH_AND_PAY")},{link:r+"/property/new-application",i18nKey:i("PT_CREATE_PROPERTY")}];return l.createElement(t.CitizenHomeCard,{header:i("ACTION_TEST_COMMON_PROPERTY_TAX"),links:u,Icon:function(){return l.createElement(t.PTIcon,{className:"fill-path-primary-main"})}})},$l=c({CommonPTCardTemp:function(){var e,n=o.useTranslation().t;if(!Digit.Utils.ptAccess())return null;var r={Icon:l.createElement(t.PropertyHouse,null),moduleName:n("ACTION_TEST_COMMON_PROPERTY_TAX"),links:[{label:n("PT_SEARCH_AND_PAY"),link:"/digit-ui/employee/commonpt/search"}]};return!Digit.UserService.hasAccess(["PT_CEMP"])||null!==(e=r.links)&&void 0!==e&&e[1]||r.links.push({label:n("PT_CREATE_PROPERTY"),link:"/digit-ui/employee/commonpt/new-application"}),l.createElement(t.EmployeeModuleCard,r)},CommonPTModule:Yl,CommonPTLinksTemp:Kl},Vl);exports.CommonPTComponents=$l,exports.CommonPTLinks=Kl,exports.CommonPTModule=Yl,exports.initCommonPTComponents=function(){Object.entries($l).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
