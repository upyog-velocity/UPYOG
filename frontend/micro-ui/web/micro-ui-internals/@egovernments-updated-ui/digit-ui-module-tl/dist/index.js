var e,t=require("@egovernments/digit-ui-react-components"),l=require("react"),n=(e=l)&&"object"==typeof e&&"default"in e?e.default:e,i=require("react-i18next"),o=require("react-router-dom"),r=require("react-hook-form"),a=require("react-query"),u=Array.isArray,d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e,t){return e(t={exports:{}},t.exports),t.exports}var c,v="object"==typeof d&&d&&d.Object===Object&&d,p="object"==typeof self&&self&&self.Object===Object&&self,m=v||p||Function("return this")(),E=m.Symbol,f=Object.prototype,y=f.hasOwnProperty,T=f.toString,g=E?E.toStringTag:void 0,S=Object.prototype.toString,h=E?E.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?function(e){var t=y.call(e,g),l=e[g];try{e[g]=void 0;var n=!0}catch(e){}var i=T.call(e);return n&&(t?e[g]=l:delete e[g]),i}(e):function(e){return S.call(e)}(e)},A=function(e){return null!=e&&"object"==typeof e},b=function(e){return"symbol"==typeof e||A(e)&&"[object Symbol]"==L(e)},N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/,D=function(e,t){if(u(e))return!1;var l=typeof e;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=e&&!b(e))||C.test(e)||!N.test(e)||null!=t&&e in Object(t)},I=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},O=function(e){if(!I(e))return!1;var t=L(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},w=m["__core-js_shared__"],R=(c=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",P=Function.prototype.toString,x=function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""},M=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=function(e,t){var l=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!I(e)||(t=e,R&&R in t))&&(O(e)?k:M).test(x(e));var t}(l)?l:void 0},B=U(Object,"create"),F=Object.prototype.hasOwnProperty,H=Object.prototype.hasOwnProperty;function W(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}W.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},W.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},W.prototype.get=function(e){var t=this.__data__;if(B){var l=t[e];return"__lodash_hash_undefined__"===l?void 0:l}return F.call(t,e)?t[e]:void 0},W.prototype.has=function(e){var t=this.__data__;return B?void 0!==t[e]:H.call(t,e)},W.prototype.set=function(e,t){var l=this.__data__;return this.size+=this.has(e)?0:1,l[e]=B&&void 0===t?"__lodash_hash_undefined__":t,this};var V=W,j=function(e,t){return e===t||e!=e&&t!=t},Y=function(e,t){for(var l=e.length;l--;)if(j(e[l][0],t))return l;return-1},K=Array.prototype.splice;function z(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}z.prototype.clear=function(){this.__data__=[],this.size=0},z.prototype.delete=function(e){var t=this.__data__,l=Y(t,e);return!(l<0||(l==t.length-1?t.pop():K.call(t,l,1),--this.size,0))},z.prototype.get=function(e){var t=this.__data__,l=Y(t,e);return l<0?void 0:t[l][1]},z.prototype.has=function(e){return Y(this.__data__,e)>-1},z.prototype.set=function(e,t){var l=this.__data__,n=Y(l,e);return n<0?(++this.size,l.push([e,t])):l[n][1]=t,this};var G=z,q=U(m,"Map"),$=function(e,t){var l,n,i=e.__data__;return("string"==(n=typeof(l=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==l:null===l)?i["string"==typeof t?"string":"hash"]:i.map};function X(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}X.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(q||G),string:new V}},X.prototype.delete=function(e){var t=$(this,e).delete(e);return this.size-=t?1:0,t},X.prototype.get=function(e){return $(this,e).get(e)},X.prototype.has=function(e){return $(this,e).has(e)},X.prototype.set=function(e,t){var l=$(this,e),n=l.size;return l.set(e,t),this.size+=l.size==n?0:1,this};var Z=X;function Q(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var l=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=l.cache;if(o.has(i))return o.get(i);var r=e.apply(this,n);return l.cache=o.set(i,r)||o,r};return l.cache=new(Q.Cache||Z),l}Q.Cache=Z;var J,ee,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/\\(\\)?/g,ne=(J=Q(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,function(e,l,n,i){t.push(n?i.replace(le,"$1"):l||e)}),t},function(e){return 500===ee.size&&ee.clear(),e}),ee=J.cache,J),ie=function(e,t){for(var l=-1,n=null==e?0:e.length,i=Array(n);++l<n;)i[l]=t(e[l],l,e);return i},oe=E?E.prototype:void 0,re=oe?oe.toString:void 0,ae=function(e,t){return u(e)?e:D(e,t)?[e]:ne(function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(u(t))return ie(t,e)+"";if(b(t))return re?re.call(t):"";var l=t+"";return"0"==l&&1/t==-1/0?"-0":l}(e)}(e))},ue=function(e){if("string"==typeof e||b(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},de=function(e,t){for(var l=0,n=(t=ae(t,e)).length;null!=e&&l<n;)e=e[ue(t[l++])];return l&&l==n?e:void 0},se=function(e,t,l){var n=null==e?void 0:de(e,t);return void 0===n?l:n},ce=function(){try{var e=U(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ve=function(e,t,l){"__proto__"==t&&ce?ce(e,t,{configurable:!0,enumerable:!0,value:l,writable:!0}):e[t]=l},pe=Object.prototype.hasOwnProperty,me=function(e,t,l){var n=e[t];pe.call(e,t)&&j(n,l)&&(void 0!==l||t in e)||ve(e,t,l)},Ee=/^(?:0|[1-9]\d*)$/,fe=function(e,t){var l=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==l||"symbol"!=l&&Ee.test(e))&&e>-1&&e%1==0&&e<t},_e=function(e,t,l){return null==e?e:function(e,t,l,n){if(!I(e))return e;for(var i=-1,o=(t=ae(t,e)).length,r=o-1,a=e;null!=a&&++i<o;){var u=ue(t[i]),d=l;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=r){var s=a[u];void 0===(d=void 0)&&(d=I(s)?s:fe(t[i+1])?[]:{})}me(a,u,d),a=a[u]}return e}(e,t,l)};const ye=(e,t,l)=>e.sort((e,n)=>l(e[t]).localeCompare(l(n[t]))),Te=e=>{var t;const l=null==e||null===(t=e.owners)||void 0===t?void 0:t.owners;return null==l?void 0:l.map((t,l)=>{var n,i,o;return{additionalDetails:{ownerSequence:l,name:t.name},mobileNumber:t.mobilenumber,name:t.name,fatherOrHusbandName:null==t?void 0:t.fatherOrHusbandName,relationship:null==t||null===(n=t.relationship)||void 0===n?void 0:n.code,dob:null,gender:null==t||null===(i=t.gender)||void 0===i?void 0:i.code,permanentAddress:null==e||null===(o=e.owners)||void 0===o?void 0:o.permanentAddress,emailId:null==t?void 0:t.emailId}})},ge=e=>{var t,l,n,i,o,r,a;let u=[];const d=window.location.href.includes("renew-trade");return null!==(null==e||null===(t=e.tradeLicenseDetail)||void 0===t||null===(l=t.owners)||void 0===l?void 0:l.additionalDetails)&&(null==e||null===(n=e.tradeLicenseDetail)||void 0===n||null===(i=n.owners)||void 0===i||i.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)})),e.tradeLicenseDetail.owners.map(t=>{var l;null==e||null===(l=e.owners)||void 0===l||l.owners.map(l=>{var n,i,o;if(t.id===l.id)if(t.name!==l.name||t.gender!==(null==l||null===(n=l.gender)||void 0===n?void 0:n.code)||t.mobileNumber!==l.mobilenumber||t.permanentAddress!==(null==e||null===(i=e.owners)||void 0===i?void 0:i.permanentAddress)||t.relationship!==(null===(o=l.relationship)||void 0===o?void 0:o.code)||t.fatherOrHusbandName!==l.fatherOrHusbandName||t.additionalDetails!==l.additionalDetails){var r,a,d,s,c,v;t.additionalDetails!==l.additionalDetails&&(t.additionalDetails=l.additionalDetails),t.name!==l.name&&(t.name=l.name),t.gender!==(null===(r=l.gender)||void 0===r?void 0:r.code)&&(t.gender=null===(s=l.gender)||void 0===s?void 0:s.code),t.mobileNumber!==l.mobilenumber&&(t.mobileNumber=l.mobilenumber),t.permanentAddress!==(null==e||null===(a=e.owners)||void 0===a?void 0:a.permanentAddress)&&(t.permanentAddress=null==e||null===(c=e.owners)||void 0===c?void 0:c.permanentAddress),t.relationship!==(null===(d=l.relationship)||void 0===d?void 0:d.code)&&(t.relationship=null===(v=l.relationship)||void 0===v?void 0:v.code),t.fatherOrHusbandName!==l.fatherOrHusbandName&&(t.fatherOrHusbandName=l.fatherOrHusbandName),u.length>0&&u.some(e=>e.id===t.id)||u.push(t)}else u.length>0&&u.some(e=>e.id===t.id)||u.push(t)})}),!d&&!window.location.href.includes("edit-application")&&(null===(o=e.tradeLicenseDetail)||void 0===o||null===(r=o.owners)||void 0===r||r.map(e=>{u.length>0&&(null==u?void 0:u.some(t=>t.id===e.id))||u.push({...e,active:!1})})),null==e||null===(a=e.owners)||void 0===a||a.owners.map((t,l)=>{var n,i,o,r,a,d,s,c;t.id||u.push({additionalDetails:{ownerSequence:l,name:t.name},mobileNumber:t.mobilenumber,name:t.name,fatherOrHusbandName:null==t?void 0:t.fatherOrHusbandName,relationship:null!=t&&null!==(n=t.relationship)&&void 0!==n&&n.code?null==t||null===(i=t.relationship)||void 0===i?void 0:i.code:null==t?void 0:t.relationship,dob:null,gender:(null==t||null===(o=t.gender)||void 0===o?void 0:o.code)||null,permanentAddress:null==e||null===(r=e.owners)||void 0===r?void 0:r.permanentAddress,...(null==e||null===(a=e.ownershipCategory)||void 0===a?void 0:a.code.includes("INSTITUTIONAL"))&&{uuid:null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.owners)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.uuid}})}),u},Se=e=>{var t,l;let n=[];return null==e||null===(t=e.TradeDetails)||void 0===t||null===(l=t.units)||void 0===l||l.map(e=>{n.push({tradeType:e.tradesubtype.code,uom:e.unit,uomValue:e.uom})}),n},he=e=>{var t,l,n,i;let o=[];const r=window.location.href.includes("renew-trade");return null==e||null===(t=e.tradeLicenseDetail)||void 0===t||null===(l=t.tradeUnits)||void 0===l||l.map(t=>{var l,n;null==e||null===(l=e.TradeDetails)||void 0===l||null===(n=l.units)||void 0===n||n.map(e=>{t.id===e.id?t.tradeType!==e.tradesubtype.code||t.uomValue!==e.uom?(t.tradeType!==e.tradesubtype.code?t.tradeType=e.tradesubtype.code:t.uomValue!==e.uom&&(t.uomValue=e.uom),o.push(t)):o.length>0&&o.some(e=>e.id===t.id)||o.push(t):r||o.length>0&&o.some(e=>e.id===t.id)||o.push({...t,active:!1})})}),null===(n=e.TradeDetails)||void 0===n||null===(i=n.units)||void 0===i||i.map(e=>{e.id||o.push({tradeType:e.tradesubtype.code,uom:e.unit,uomValue:e.uom})}),o},Le=e=>{var t,l;let n=[];return null==e||null===(t=e.TradeDetails)||void 0===t||null===(l=t.accessories)||void 0===l||l.map(e=>{n.push({uom:e.unit,accessoryCategory:e.accessory.code,uomValue:e.uom?e.uom:null,count:e.accessorycount})}),n},Ae=e=>{var t,l;let n=[];const i=window.location.href.includes("renew-trade");var o,r,a,u,d,s,c,v;return null!=e&&null!==(t=e.TradeDetails)&&void 0!==t&&null!==(l=t.isAccessories)&&void 0!==l&&l.i18nKey.includes("NO")?(null==e||null===(o=e.tradeLicenseDetail)||void 0===o?void 0:o.accessories)&&(null==e||null===(r=e.tradeLicenseDetail)||void 0===r||null===(a=r.accessories)||void 0===a||a.map(e=>{n.push({...e,active:!1})})):((null==e||null===(u=e.tradeLicenseDetail)||void 0===u?void 0:u.accessories)&&(null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.accessories)||void 0===s||s.map(t=>{var l,o;null==e||null===(l=e.TradeDetails)||void 0===l||null===(o=l.accessories)||void 0===o||o.map(e=>{t.id===e.id?t.accessoryCategory!==e.accessory.code||t.count!==e.accessorycount||t.uomValue!==e.uom?(t.accessoryCategory!==e.accessory.code&&(t.accessoryCategory=e.accessory.code),t.count!==e.accessorycount&&(t.count=e.accessorycount),t.uomValue!==e.uom&&(t.uomValue=e.uom),n.push(t)):n.length>0&&n.some(e=>e.id===t.id)||n.push(t):i||n.length>0&&n.some(e=>e.id===t.id)||n.push({...t,active:!1})})})),null==e||null===(c=e.TradeDetails)||void 0===c||null===(v=c.accessories)||void 0===v||v.map(e=>{e.id||n.push({uom:e.unit,accessoryCategory:e.accessory.code,uomValue:e.uom?e.uom:null,count:e.accessorycount})})),n},be=e=>{let t=[],l=e?e.owners.documents:[];return l.OwnerPhotoProof&&t.push({fileName:l.OwnerPhotoProof.name,fileStoreId:l.OwnerPhotoProof.fileStoreId,documentType:"OWNERPHOTO",tenantId:null==e?void 0:e.tenantId}),l.ProofOfIdentity&&t.push({fileName:l.ProofOfIdentity.name,fileStoreId:l.ProofOfIdentity.fileStoreId,documentType:"OWNERIDPROOF",tenantId:null==e?void 0:e.tenantId}),l.ProofOfOwnership&&t.push({fileName:l.ProofOfOwnership.name,fileStoreId:l.ProofOfOwnership.fileStoreId,documentType:"OWNERSHIPPROOF",tenantId:null==e?void 0:e.tenantId}),t},Ne=e=>{var t,l,n,i,o,r,a,u;let d=[],s=e?e.owners.documents:[];return null==e||null===(t=e.tradeLicenseDetail)||void 0===t||null===(l=t.applicationDocuments)||void 0===l||l.map(t=>{"OWNERPHOTO"===t.documentType&&t.fileStoreId===e.owners.documents.OwnerPhotoProof.fileStoreId||"OWNERSHIPPROOF"===t.documentType&&t.fileStoreId==e.owners.documents.ProofOfOwnership.fileStoreId||"OWNERIDPROOF"===t.documentType&&t.fileStoreId===e.owners.documents.ProofOfIdentity.fileStoreId?d.push(t):("OWNERPHOTO"===t.documentType&&t.fileStoreId!==e.owners.documents.OwnerPhotoProof.fileStoreId&&(d.push({fileName:s.OwnerPhotoProof.name,fileStoreId:s.OwnerPhotoProof.fileStoreId,documentType:"OWNERPHOTO",tenantId:null==e?void 0:e.tenantId}),d.push({...t,active:"false"})),"OWNERSHIPPROOF"===t.documentType&&t.fileStoreId!==e.owners.documents.ProofOfOwnership.fileStoreId&&(d.push({fileName:s.ProofOfOwnership.name,fileStoreId:s.ProofOfOwnership.fileStoreId,documentType:"OWNERSHIPPROOF",tenantId:null==e?void 0:e.tenantId}),d.push({...t,active:"false"})),"OWNERIDPROOF"===t.documentType&&t.fileStoreId!==e.owners.documents.ProofOfIdentity.fileStoreId&&(d.push({fileName:s.ProofOfIdentity.name,fileStoreId:s.ProofOfIdentity.fileStoreId,documentType:"OWNERIDPROOF",tenantId:null==e?void 0:e.tenantId}),d.push({...t,active:"false"})))}),(null==e||null===(n=e.tradeLicenseDetail)||void 0===n||null===(i=n.applicationDocuments)||void 0===i||null===(o=i.filter(e=>"OLDLICENCENO"===(null==e?void 0:e.documentType)))||void 0===o?void 0:o.length)>0&&d.push(null==e||null===(r=e.tradeLicenseDetail)||void 0===r||null===(a=r.applicationDocuments)||void 0===a||null===(u=a.filter(e=>"OLDLICENCENO"===(null==e?void 0:e.documentType)))||void 0===u?void 0:u[0]),d},Ce=(e,t)=>{let l=parseInt(t[0].id),n=null==t?void 0:t[0];return t&&(null==t||t.map(e=>{parseInt(e.id)>l&&(n=e,l=parseInt(e.id))})),n},De=e=>{if(!e)return Boolean(e);switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}},Ie=e=>{if(e){const t=new Date(e);let l=t.getMonth()+1,n=t.getDate(),i=t.getFullYear();return l=(l>9?"":"0")+l,n=(n>9?"":"0")+n,n+"/"+l+"/"+i}return null},Oe=e=>new Date(e).getFullYear().toString()+"-"+(new Date(e).getMonth()+1).toString()+"-"+new Date(e).getDate().toString(),we=function(e,t,l){void 0===e&&(e={}),void 0===t&&(t="");let n=e[t]||"",i=(null==n?void 0:n.split(","))||[],o="";return i.length>0&&(null==i||i.map(e=>{e.includes("large")||e.includes("medium")||e.includes("small")||(o=e)})),o},Re=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=0),decodeURIComponent(e.split("?")[0].split("/").pop().slice(13))||"Document - "+(t+1)},Pe=e=>{if(e){const t=new Date(e);let l=t.getMonth()+1,n=t.getDate(),i=t.getFullYear();return l=(l>9?"":"0")+l,n=(n>9?"":"0")+n,i+"-"+l+"-"+n}return null},xe=function(e,t,l){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===l&&(l=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,l);return e},Me=(e,t)=>{const l=[],n=new Map;for(const i of e)n.has(i[t])||(n.set(i[t],!0),l.push(i));return l},ke=(e,t)=>{let l=se(e,t),n={};return null==l||l.map(e=>{const t=e.code.split(".");let l="";for(let i=0;i<t.length;i+=1)i!=t.length-1?t[i]in(""===l?n:se(n,l))||_e(n,""===l?t[i]:l+"."+t[i],i<t.length-2?{}:[]):se(n,l).push(e),l=t.slice(0,i+1).join(".")}),_e(e,t,n),e},Ue=function(e,t){void 0===t&&(t="dayend");try{const l=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),n=new Date(Date.UTC(l[1],l[2]-1,l[3]));return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),"dayend"===t&&(n.setHours(n.getHours()+24),n.setSeconds(n.getSeconds()-1)),n.getTime()}catch(t){return e}},Be=e=>{switch(e){case"Name":return/^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i;case"MobileNo":return/^[6789][0-9]{9}$/i;case"Amount":return/^[0-9]{0,8}$/i;case"NonZeroAmount":return/^[1-9][0-9]{0,7}$/i;case"DecimalNumber":return/^\d{0,8}(\.\d{1,2})?$/i;case"Email":return/^(?=^.{1,64}$)((([^<>()\[\]\\.,;:\s$*@'"]+(\.[^<>()\[\]\\.,;:\s@'"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$/i;case"Address":return/^[^\$\"<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,500}$/i;case"PAN":return/^[A-Za-z]{5}\d{4}[A-Za-z]{1}$/i;case"TradeName":return/^[-@.\/#&+\w\s]*$/;case"Date":return/^[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/i;case"UOMValue":return/^(0)*[1-9][0-9]{0,5}$/i;case"OperationalArea":case"NoOfEmp":return/^(0)*[1-9][0-9]{0,6}$/i;case"GSTNo":return/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}\d[Z]{1}[A-Z\d]{1}$/i;case"DoorHouseNo":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*:;“”‘’]{1,50}$/i;case"BuildingStreet":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,64}$/i;case"Pincode":return/^[1-9][0-9]{5}$/i;case"Landline":return/^[0-9]{11}$/i;case"PropertyID":return/^[a-zA-z0-9\s\\/\-]$/i;case"ElectricityConnNo":return/^.{1,15}$/i;case"DocumentNo":return/^[0-9]{1,15}$/i;case"eventName":return/^[^\$\"<>?\\\\~`!@#$%^()+={}\[\]*,.:;“”]{1,65}$/i;case"eventDescription":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,500}$/i;case"cancelChallan":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,100}$/i;case"FireNOCNo":return/^[a-zA-Z0-9-]*$/i;case"consumerNo":return/^[a-zA-Z0-9/-]*$/i;case"AadharNo":return/^([0-9]){12}$/;case"ChequeNo":return/^(?!0{6})[0-9]{6}$/;case"Comments":return/^[^\$\"'<>?\\\\~`!@$%^()+={}\[\]*.:;“”‘’]{1,50}$/i;case"OldLicenceNo":return/^[a-zA-Z0-9-/]{0,64}$/}},Fe=e=>{if(null==e||null==e||""==e)return"NA";const t=new Date(e);let l=t.getMonth()+1,n=t.getDate();return l=(l>9?"":"0")+l,n=(n>9?"":"0")+n,n+"/"+l+"/"+t.getFullYear()},He=e=>{var t,l,n,i,o,r,a,u,d,s,c,v,p;let m=[];const E=null!==(null==e||null===(t=e.cpt)||void 0===t||null===(l=t.details)||void 0===l||null===(n=l.owners)||void 0===n?void 0:n.additionalDetails)?null==e||null===(i=e.cpt)||void 0===i||null===(o=i.details)||void 0===o?void 0:o.owners.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}):(null==e||null===(r=e.cpt)||void 0===r||null===(a=r.details)||void 0===a?void 0:a.owners)||[];if(null!=e&&null!==(u=e.ownershipCategory)&&void 0!==u&&null!==(d=u.code)&&void 0!==d&&d.includes("SINGLEOWNER")||null!=e&&null!==(s=e.ownershipCategory)&&void 0!==s&&null!==(c=s.code)&&void 0!==c&&c.includes("MULTIPLEOWNER"))null==E||E.map(e=>{m.push({name:null==e?void 0:e.name,fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,gender:{code:null==e?void 0:e.gender,i18nKey:"TL_GENDER_"+(null==e?void 0:e.gender)},isprimaryowner:!1,emailId:null==e?void 0:e.emailId,mobilenumber:null==e?void 0:e.mobileNumber,relationship:{code:null==e?void 0:e.relationship,i18nKey:"COMMON_RELATION_"+(null==e?void 0:e.relationship)}})});else if(null!=e&&null!==(v=e.ownershipCategory)&&void 0!==v&&null!==(p=v.code)&&void 0!==p&&p.includes("INSTITUTIONAL")){var f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z;m.push({name:null==e||null===(f=e.cpt)||void 0===f||null===(_=f.details)||void 0===_||null===(y=_.institution)||void 0===y?void 0:y.nameOfAuthorizedPerson,designation:null==e||null===(T=e.cpt)||void 0===T||null===(g=T.details)||void 0===g||null===(S=g.institution)||void 0===S?void 0:S.designation,mobilenumber:null==e||null===(h=e.cpt)||void 0===h||null===(L=h.details)||void 0===L||null===(A=L.owners)||void 0===A||null===(b=A[0])||void 0===b?void 0:b.mobileNumber,altContactNumber:null==e||null===(N=e.cpt)||void 0===N||null===(C=N.details)||void 0===C||null===(D=C.owners)||void 0===D||null===(I=D[0])||void 0===I?void 0:I.altContactNumber,instituionName:null==e||null===(O=e.cpt)||void 0===O||null===(w=O.details)||void 0===w||null===(R=w.institution)||void 0===R?void 0:R.name,emailId:null==e||null===(P=e.cpt)||void 0===P||null===(x=P.details)||void 0===x||null===(M=x.owners)||void 0===M||null===(k=M[0])||void 0===k?void 0:k.emailId,subOwnerShipCategory:{active:!0,code:(null==e||null===(U=e.cpt)||void 0===U||null===(B=U.details)||void 0===B?void 0:B.ownershipCategory)+"."+(null==e||null===(F=e.cpt)||void 0===F||null===(H=F.details)||void 0===H||null===(W=H.institution)||void 0===W?void 0:W.type),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==e||null===(V=e.cpt)||void 0===V||null===(j=V.details)||void 0===j?void 0:j.ownershipCategory)+"_"+(null==e||null===(Y=e.cpt)||void 0===Y||null===(K=Y.details)||void 0===K||null===(z=K.institution)||void 0===z?void 0:z.type)},id:"",uuid:""})}return m};let We=[];const Ve=e=>{var l;let{currentStep:o=1,flow:r=""}=e;const{t:a}=i.useTranslation(),u=window.Digit.Utils.browser.isMobile();return(e=>{switch(e){case"STAKEHOLDER":We=[];break;default:We=["TL_COMMON_TR_DETAILS","TL_LOCATION_AND_OWNER_DETAILS","TL_DOCUMENT_DETAIL","TL_COMMON_SUMMARY"]}})(r),n.createElement("div",{className:"timeline-container",style:u?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},null===(l=We)||void 0===l?void 0:l.map((e,l,i)=>n.createElement("div",{className:"timeline-checkpoint",key:l},n.createElement("div",{className:"timeline-content"},n.createElement("span",{className:"circle "+(l<=o-1&&"active")},l<o-1?n.createElement(t.TickMark,null):l+1),n.createElement("span",{className:"secondary-color"},a(e))),l<i.length-1&&n.createElement("span",{className:"line "+(l<o-1&&"active")}))))};var je=s(function(e,t){(function(){var l="Expected a function",n="__lodash_placeholder__",i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",r="[object Array]",a="[object Boolean]",u="[object Date]",s="[object Error]",c="[object Function]",v="[object GeneratorFunction]",p="[object Map]",m="[object Number]",E="[object Object]",f="[object RegExp]",_="[object Set]",y="[object String]",T="[object Symbol]",g="[object WeakMap]",S="[object ArrayBuffer]",h="[object DataView]",L="[object Float32Array]",A="[object Float64Array]",b="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",D="[object Uint8Array]",I="[object Uint16Array]",O="[object Uint32Array]",w=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,k=RegExp(x.source),U=RegExp(M.source),B=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,K=RegExp(Y.source),z=/^\s+/,G=/\s/,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,le=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,ie=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,re=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,de=/['\n\r\u2028\u2029\\]/g,se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="["+ce+"]",pe="["+se+"]",me="\\d+",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",fe="[^\\ud800-\\udfff"+ce+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",ye="[^\\ud800-\\udfff]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+Ee+"|"+fe+")",Le="(?:"+Se+"|"+fe+")",Ae="(?:"+pe+"|"+_e+")?",be="[\\ufe0e\\ufe0f]?"+Ae+"(?:\\u200d(?:"+[ye,Te,ge].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*",Ne="(?:"+["[\\u2700-\\u27bf]",Te,ge].join("|")+")"+be,Ce="(?:"+[ye+pe+"?",pe,Te,ge,"[\\ud800-\\udfff]"].join("|")+")",De=RegExp("['’]","g"),Ie=RegExp(pe,"g"),Oe=RegExp(_e+"(?="+_e+")|"+Ce+be,"g"),we=RegExp([Se+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ve,Se,"$"].join("|")+")",Le+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ve,Se+he,"$"].join("|")+")",Se+"?"+he+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Ne].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff"+se+"\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,ke={};ke[L]=ke[A]=ke[b]=ke[N]=ke[C]=ke[D]=ke["[object Uint8ClampedArray]"]=ke[I]=ke[O]=!0,ke[o]=ke[r]=ke[S]=ke[a]=ke[h]=ke[u]=ke[s]=ke[c]=ke[p]=ke[m]=ke[E]=ke[f]=ke[_]=ke[y]=ke[g]=!1;var Ue={};Ue[o]=Ue[r]=Ue[S]=Ue[h]=Ue[a]=Ue[u]=Ue[L]=Ue[A]=Ue[b]=Ue[N]=Ue[C]=Ue[p]=Ue[m]=Ue[E]=Ue[f]=Ue[_]=Ue[y]=Ue[T]=Ue[D]=Ue["[object Uint8ClampedArray]"]=Ue[I]=Ue[O]=!0,Ue[s]=Ue[c]=Ue[g]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fe=parseFloat,He=parseInt,We="object"==typeof d&&d&&d.Object===Object&&d,Ve="object"==typeof self&&self&&self.Object===Object&&self,je=We||Ve||Function("return this")(),Ye=t&&!t.nodeType&&t,Ke=Ye&&e&&!e.nodeType&&e,ze=Ke&&Ke.exports===Ye,Ge=ze&&We.process,qe=function(){try{return Ke&&Ke.require&&Ke.require("util").types||Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),$e=qe&&qe.isArrayBuffer,Xe=qe&&qe.isDate,Ze=qe&&qe.isMap,Qe=qe&&qe.isRegExp,Je=qe&&qe.isSet,et=qe&&qe.isTypedArray;function tt(e,t,l){switch(l.length){case 0:return e.call(t);case 1:return e.call(t,l[0]);case 2:return e.call(t,l[0],l[1]);case 3:return e.call(t,l[0],l[1],l[2])}return e.apply(t,l)}function lt(e,t,l,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var r=e[i];t(n,r,l(r),e)}return n}function nt(e,t){for(var l=-1,n=null==e?0:e.length;++l<n&&!1!==t(e[l],l,e););return e}function it(e,t){for(var l=null==e?0:e.length;l--&&!1!==t(e[l],l,e););return e}function ot(e,t){for(var l=-1,n=null==e?0:e.length;++l<n;)if(!t(e[l],l,e))return!1;return!0}function rt(e,t){for(var l=-1,n=null==e?0:e.length,i=0,o=[];++l<n;){var r=e[l];t(r,l,e)&&(o[i++]=r)}return o}function at(e,t){return!(null==e||!e.length)&&_t(e,t,0)>-1}function ut(e,t,l){for(var n=-1,i=null==e?0:e.length;++n<i;)if(l(t,e[n]))return!0;return!1}function dt(e,t){for(var l=-1,n=null==e?0:e.length,i=Array(n);++l<n;)i[l]=t(e[l],l,e);return i}function st(e,t){for(var l=-1,n=t.length,i=e.length;++l<n;)e[i+l]=t[l];return e}function ct(e,t,l,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(l=e[++i]);++i<o;)l=t(l,e[i],i,e);return l}function vt(e,t,l,n){var i=null==e?0:e.length;for(n&&i&&(l=e[--i]);i--;)l=t(l,e[i],i,e);return l}function pt(e,t){for(var l=-1,n=null==e?0:e.length;++l<n;)if(t(e[l],l,e))return!0;return!1}var mt=St("length");function Et(e,t,l){var n;return l(e,function(e,l,i){if(t(e,l,i))return n=l,!1}),n}function ft(e,t,l,n){for(var i=e.length,o=l+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _t(e,t,l){return t==t?function(e,t,l){for(var n=l-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,l):ft(e,Tt,l)}function yt(e,t,l,n){for(var i=l-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Tt(e){return e!=e}function gt(e,t){var l=null==e?0:e.length;return l?At(e,t)/l:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function ht(e){return function(t){return null==e?void 0:e[t]}}function Lt(e,t,l,n,i){return i(e,function(e,i,o){l=n?(n=!1,e):t(l,e,i,o)}),l}function At(e,t){for(var l,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(l=void 0===l?o:l+o)}return l}function bt(e,t){for(var l=-1,n=Array(e);++l<e;)n[l]=t(l);return n}function Nt(e){return e?e.slice(0,Yt(e)+1).replace(z,""):e}function Ct(e){return function(t){return e(t)}}function Dt(e,t){return dt(t,function(t){return e[t]})}function It(e,t){return e.has(t)}function Ot(e,t){for(var l=-1,n=e.length;++l<n&&_t(t,e[l],0)>-1;);return l}function wt(e,t){for(var l=e.length;l--&&_t(t,e[l],0)>-1;);return l}function Rt(e,t){for(var l=e.length,n=0;l--;)e[l]===t&&++n;return n}var Pt=ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xt=ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mt(e){return"\\"+Be[e]}function kt(e){return Re.test(e)}function Ut(e){var t=-1,l=Array(e.size);return e.forEach(function(e,n){l[++t]=[n,e]}),l}function Bt(e,t){return function(l){return e(t(l))}}function Ft(e,t){for(var l=-1,i=e.length,o=0,r=[];++l<i;){var a=e[l];a!==t&&a!==n||(e[l]=n,r[o++]=l)}return r}function Ht(e){var t=-1,l=Array(e.size);return e.forEach(function(e){l[++t]=e}),l}function Wt(e){var t=-1,l=Array(e.size);return e.forEach(function(e){l[++t]=[e,e]}),l}function Vt(e){return kt(e)?function(e){for(var t=Oe.lastIndex=0;Oe.test(e);)++t;return t}(e):mt(e)}function jt(e){return kt(e)?function(e){return e.match(Oe)||[]}(e):function(e){return e.split("")}(e)}function Yt(e){for(var t=e.length;t--&&G.test(e.charAt(t)););return t}var Kt=ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zt=function e(t){var d=(t=null==t?je:zt.defaults(je.Object(),t,zt.pick(je,xe))).Array,G=t.Date,se=t.Error,ce=t.Function,ve=t.Math,pe=t.Object,me=t.RegExp,Ee=t.String,fe=t.TypeError,_e=d.prototype,ye=pe.prototype,Te=t["__core-js_shared__"],ge=ce.prototype.toString,Se=ye.hasOwnProperty,he=0,Le=function(){var e=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ae=ye.toString,be=ge.call(pe),Ne=je._,Ce=me("^"+ge.call(Se).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=ze?t.Buffer:void 0,Re=t.Symbol,Be=t.Uint8Array,We=Oe?Oe.allocUnsafe:void 0,Ve=Bt(pe.getPrototypeOf,pe),Ye=pe.create,Ke=ye.propertyIsEnumerable,Ge=_e.splice,qe=Re?Re.isConcatSpreadable:void 0,mt=Re?Re.iterator:void 0,ht=Re?Re.toStringTag:void 0,Gt=function(){try{var e=Zi(pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),qt=t.clearTimeout!==je.clearTimeout&&t.clearTimeout,$t=G&&G.now!==je.Date.now&&G.now,Xt=t.setTimeout!==je.setTimeout&&t.setTimeout,Zt=ve.ceil,Qt=ve.floor,Jt=pe.getOwnPropertySymbols,el=Oe?Oe.isBuffer:void 0,tl=t.isFinite,ll=_e.join,nl=Bt(pe.keys,pe),il=ve.max,ol=ve.min,rl=G.now,al=t.parseInt,ul=ve.random,dl=_e.reverse,sl=Zi(t,"DataView"),cl=Zi(t,"Map"),vl=Zi(t,"Promise"),pl=Zi(t,"Set"),ml=Zi(t,"WeakMap"),El=Zi(pe,"create"),fl=ml&&new ml,_l={},yl=bo(sl),Tl=bo(cl),gl=bo(vl),Sl=bo(pl),hl=bo(ml),Ll=Re?Re.prototype:void 0,Al=Ll?Ll.valueOf:void 0,bl=Ll?Ll.toString:void 0;function Nl(e){if(Vr(e)&&!wr(e)&&!(e instanceof Ol)){if(e instanceof Il)return e;if(Se.call(e,"__wrapped__"))return No(e)}return new Il(e)}var Cl=function(){function e(){}return function(t){if(!Wr(t))return{};if(Ye)return Ye(t);e.prototype=t;var l=new e;return e.prototype=void 0,l}}();function Dl(){}function Il(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ol(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function wl(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}function Rl(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}function Pl(e){var t=-1,l=null==e?0:e.length;for(this.clear();++t<l;){var n=e[t];this.set(n[0],n[1])}}function xl(e){var t=-1,l=null==e?0:e.length;for(this.__data__=new Pl;++t<l;)this.add(e[t])}function Ml(e){var t=this.__data__=new Rl(e);this.size=t.size}function kl(e,t){var l=wr(e),n=!l&&Or(e),i=!l&&!n&&Mr(e),o=!l&&!n&&!i&&Xr(e),r=l||n||i||o,a=r?bt(e.length,Ee):[],u=a.length;for(var d in e)!t&&!Se.call(e,d)||r&&("length"==d||i&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||io(d,u))||a.push(d);return a}function Ul(e){var t=e.length;return t?e[xn(0,t-1)]:void 0}function Bl(e,t){return ho(Ei(e),Gl(t,0,e.length))}function Fl(e){return ho(Ei(e))}function Hl(e,t,l){(void 0!==l&&!Cr(e[t],l)||void 0===l&&!(t in e))&&Kl(e,t,l)}function Wl(e,t,l){var n=e[t];Se.call(e,t)&&Cr(n,l)&&(void 0!==l||t in e)||Kl(e,t,l)}function Vl(e,t){for(var l=e.length;l--;)if(Cr(e[l][0],t))return l;return-1}function jl(e,t,l,n){return Ql(e,function(e,i,o){t(n,e,l(e),o)}),n}function Yl(e,t){return e&&fi(t,ya(t),e)}function Kl(e,t,l){"__proto__"==t&&Gt?Gt(e,t,{configurable:!0,enumerable:!0,value:l,writable:!0}):e[t]=l}function zl(e,t){for(var l=-1,n=t.length,i=d(n),o=null==e;++l<n;)i[l]=o?void 0:pa(e,t[l]);return i}function Gl(e,t,l){return e==e&&(void 0!==l&&(e=e<=l?e:l),void 0!==t&&(e=e>=t?e:t)),e}function ql(e,t,l,n,i,r){var d,s=1&t,g=2&t,w=4&t;if(l&&(d=i?l(e,n,i,r):l(e)),void 0!==d)return d;if(!Wr(e))return e;var R=wr(e);if(R){if(d=function(e){var t=e.length,l=new e.constructor(t);return t&&"string"==typeof e[0]&&Se.call(e,"index")&&(l.index=e.index,l.input=e.input),l}(e),!s)return Ei(e,d)}else{var P=eo(e),x=P==c||P==v;if(Mr(e))return di(e,s);if(P==E||P==o||x&&!i){if(d=g||x?{}:lo(e),!s)return g?function(e,t){return fi(e,Ji(e),t)}(e,function(e,t){return e&&fi(t,Ta(t),e)}(d,e)):function(e,t){return fi(e,Qi(e),t)}(e,Yl(d,e))}else{if(!Ue[P])return i?e:{};d=function(e,t,l){var n=e.constructor;switch(t){case S:return si(e);case a:case u:return new n(+e);case h:return function(e,t){var l=t?si(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.byteLength)}(e,l);case L:case A:case b:case N:case C:case D:case"[object Uint8ClampedArray]":case I:case O:return ci(e,l);case p:return new n;case m:case y:return new n(e);case f:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new n;case T:return Al?pe(Al.call(e)):{}}}(e,P,s)}}r||(r=new Ml);var M=r.get(e);if(M)return M;r.set(e,d),Gr(e)?e.forEach(function(n){d.add(ql(n,t,l,n,e,r))}):jr(e)&&e.forEach(function(n,i){d.set(i,ql(n,t,l,i,e,r))});var k=R?void 0:(w?g?Yi:ji:g?Ta:ya)(e);return nt(k||e,function(n,i){k&&(n=e[i=n]),Wl(d,i,ql(n,t,l,i,e,r))}),d}function $l(e,t,l){var n=l.length;if(null==e)return!n;for(e=pe(e);n--;){var i=l[n],o=e[i];if(void 0===o&&!(i in e)||!(0,t[i])(o))return!1}return!0}function Xl(e,t,n){if("function"!=typeof e)throw new fe(l);return yo(function(){e.apply(void 0,n)},t)}function Zl(e,t,l,n){var i=-1,o=at,r=!0,a=e.length,u=[],d=t.length;if(!a)return u;l&&(t=dt(t,Ct(l))),n?(o=ut,r=!1):t.length>=200&&(o=It,r=!1,t=new xl(t));e:for(;++i<a;){var s=e[i],c=null==l?s:l(s);if(s=n||0!==s?s:0,r&&c==c){for(var v=d;v--;)if(t[v]===c)continue e;u.push(s)}else o(t,c,n)||u.push(s)}return u}Nl.templateSettings={escape:B,evaluate:F,interpolate:H,variable:"",imports:{_:Nl}},(Nl.prototype=Dl.prototype).constructor=Nl,(Il.prototype=Cl(Dl.prototype)).constructor=Il,(Ol.prototype=Cl(Dl.prototype)).constructor=Ol,wl.prototype.clear=function(){this.__data__=El?El(null):{},this.size=0},wl.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wl.prototype.get=function(e){var t=this.__data__;if(El){var l=t[e];return"__lodash_hash_undefined__"===l?void 0:l}return Se.call(t,e)?t[e]:void 0},wl.prototype.has=function(e){var t=this.__data__;return El?void 0!==t[e]:Se.call(t,e)},wl.prototype.set=function(e,t){var l=this.__data__;return this.size+=this.has(e)?0:1,l[e]=El&&void 0===t?"__lodash_hash_undefined__":t,this},Rl.prototype.clear=function(){this.__data__=[],this.size=0},Rl.prototype.delete=function(e){var t=this.__data__,l=Vl(t,e);return!(l<0||(l==t.length-1?t.pop():Ge.call(t,l,1),--this.size,0))},Rl.prototype.get=function(e){var t=this.__data__,l=Vl(t,e);return l<0?void 0:t[l][1]},Rl.prototype.has=function(e){return Vl(this.__data__,e)>-1},Rl.prototype.set=function(e,t){var l=this.__data__,n=Vl(l,e);return n<0?(++this.size,l.push([e,t])):l[n][1]=t,this},Pl.prototype.clear=function(){this.size=0,this.__data__={hash:new wl,map:new(cl||Rl),string:new wl}},Pl.prototype.delete=function(e){var t=$i(this,e).delete(e);return this.size-=t?1:0,t},Pl.prototype.get=function(e){return $i(this,e).get(e)},Pl.prototype.has=function(e){return $i(this,e).has(e)},Pl.prototype.set=function(e,t){var l=$i(this,e),n=l.size;return l.set(e,t),this.size+=l.size==n?0:1,this},xl.prototype.add=xl.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xl.prototype.has=function(e){return this.__data__.has(e)},Ml.prototype.clear=function(){this.__data__=new Rl,this.size=0},Ml.prototype.delete=function(e){var t=this.__data__,l=t.delete(e);return this.size=t.size,l},Ml.prototype.get=function(e){return this.__data__.get(e)},Ml.prototype.has=function(e){return this.__data__.has(e)},Ml.prototype.set=function(e,t){var l=this.__data__;if(l instanceof Rl){var n=l.__data__;if(!cl||n.length<199)return n.push([e,t]),this.size=++l.size,this;l=this.__data__=new Pl(n)}return l.set(e,t),this.size=l.size,this};var Ql=Ti(an),Jl=Ti(un,!0);function en(e,t){var l=!0;return Ql(e,function(e,n,i){return l=!!t(e,n,i)}),l}function tn(e,t,l){for(var n=-1,i=e.length;++n<i;){var o=e[n],r=t(o);if(null!=r&&(void 0===a?r==r&&!$r(r):l(r,a)))var a=r,u=o}return u}function ln(e,t){var l=[];return Ql(e,function(e,n,i){t(e,n,i)&&l.push(e)}),l}function nn(e,t,l,n,i){var o=-1,r=e.length;for(l||(l=no),i||(i=[]);++o<r;){var a=e[o];t>0&&l(a)?t>1?nn(a,t-1,l,n,i):st(i,a):n||(i[i.length]=a)}return i}var on=gi(),rn=gi(!0);function an(e,t){return e&&on(e,t,ya)}function un(e,t){return e&&rn(e,t,ya)}function dn(e,t){return rt(t,function(t){return Br(e[t])})}function sn(e,t){for(var l=0,n=(t=oi(t,e)).length;null!=e&&l<n;)e=e[Ao(t[l++])];return l&&l==n?e:void 0}function cn(e,t,l){var n=t(e);return wr(e)?n:st(n,l(e))}function vn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ht&&ht in pe(e)?function(e){var t=Se.call(e,ht),l=e[ht];try{e[ht]=void 0;var n=!0}catch(e){}var i=Ae.call(e);return n&&(t?e[ht]=l:delete e[ht]),i}(e):function(e){return Ae.call(e)}(e)}function pn(e,t){return e>t}function mn(e,t){return null!=e&&Se.call(e,t)}function En(e,t){return null!=e&&t in pe(e)}function fn(e,t,l){for(var n=l?ut:at,i=e[0].length,o=e.length,r=o,a=d(o),u=Infinity,s=[];r--;){var c=e[r];r&&t&&(c=dt(c,Ct(t))),u=ol(c.length,u),a[r]=!l&&(t||i>=120&&c.length>=120)?new xl(r&&c):void 0}c=e[0];var v=-1,p=a[0];e:for(;++v<i&&s.length<u;){var m=c[v],E=t?t(m):m;if(m=l||0!==m?m:0,!(p?It(p,E):n(s,E,l))){for(r=o;--r;){var f=a[r];if(!(f?It(f,E):n(e[r],E,l)))continue e}p&&p.push(E),s.push(m)}}return s}function _n(e,t,l){var n=null==(e=mo(e,t=oi(t,e)))?e:e[Ao(Uo(t))];return null==n?void 0:tt(n,e,l)}function yn(e){return Vr(e)&&vn(e)==o}function Tn(e,t,l,n,i){return e===t||(null==e||null==t||!Vr(e)&&!Vr(t)?e!=e&&t!=t:function(e,t,l,n,i,d){var c=wr(e),v=wr(t),g=c?r:eo(e),L=v?r:eo(t),A=(g=g==o?E:g)==E,b=(L=L==o?E:L)==E,N=g==L;if(N&&Mr(e)){if(!Mr(t))return!1;c=!0,A=!1}if(N&&!A)return d||(d=new Ml),c||Xr(e)?Wi(e,t,l,n,i,d):function(e,t,l,n,i,o,r){switch(l){case h:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new Be(e),new Be(t)));case a:case u:case m:return Cr(+e,+t);case s:return e.name==t.name&&e.message==t.message;case f:case y:return e==t+"";case p:var d=Ut;case _:if(d||(d=Ht),e.size!=t.size&&!(1&n))return!1;var c=r.get(e);if(c)return c==t;n|=2,r.set(e,t);var v=Wi(d(e),d(t),n,i,o,r);return r.delete(e),v;case T:if(Al)return Al.call(e)==Al.call(t)}return!1}(e,t,g,l,n,i,d);if(!(1&l)){var C=A&&Se.call(e,"__wrapped__"),D=b&&Se.call(t,"__wrapped__");if(C||D){var I=C?e.value():e,O=D?t.value():t;return d||(d=new Ml),i(I,O,l,n,d)}}return!!N&&(d||(d=new Ml),function(e,t,l,n,i,o){var r=1&l,a=ji(e),u=a.length;if(u!=ji(t).length&&!r)return!1;for(var d=u;d--;){var s=a[d];if(!(r?s in t:Se.call(t,s)))return!1}var c=o.get(e),v=o.get(t);if(c&&v)return c==t&&v==e;var p=!0;o.set(e,t),o.set(t,e);for(var m=r;++d<u;){var E=e[s=a[d]],f=t[s];if(n)var _=r?n(f,E,s,t,e,o):n(E,f,s,e,t,o);if(!(void 0===_?E===f||i(E,f,l,n,o):_)){p=!1;break}m||(m="constructor"==s)}if(p&&!m){var y=e.constructor,T=t.constructor;y==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof T&&T instanceof T||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,l,n,i,d))}(e,t,l,n,Tn,i))}function gn(e,t,l,n){var i=l.length,o=i,r=!n;if(null==e)return!o;for(e=pe(e);i--;){var a=l[i];if(r&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=l[i])[0],d=e[u],s=a[1];if(r&&a[2]){if(void 0===d&&!(u in e))return!1}else{var c=new Ml;if(n)var v=n(d,s,u,e,t,c);if(!(void 0===v?Tn(s,d,3,n,c):v))return!1}}return!0}function Sn(e){return!(!Wr(e)||(t=e,Le&&Le in t))&&(Br(e)?Ce:ie).test(bo(e));var t}function hn(e){return"function"==typeof e?e:null==e?Ya:"object"==typeof e?wr(e)?Cn(e[0],e[1]):Nn(e):Ja(e)}function Ln(e){if(!so(e))return nl(e);var t=[];for(var l in pe(e))Se.call(e,l)&&"constructor"!=l&&t.push(l);return t}function An(e,t){return e<t}function bn(e,t){var l=-1,n=Pr(e)?d(e.length):[];return Ql(e,function(e,i,o){n[++l]=t(e,i,o)}),n}function Nn(e){var t=Xi(e);return 1==t.length&&t[0][2]?vo(t[0][0],t[0][1]):function(l){return l===e||gn(l,e,t)}}function Cn(e,t){return ro(e)&&co(t)?vo(Ao(e),t):function(l){var n=pa(l,e);return void 0===n&&n===t?ma(l,e):Tn(t,n,3)}}function Dn(e,t,l,n,i){e!==t&&on(t,function(o,r){if(i||(i=new Ml),Wr(o))!function(e,t,l,n,i,o,r){var a=fo(e,l),u=fo(t,l),d=r.get(u);if(d)Hl(e,l,d);else{var s=o?o(a,u,l+"",e,t,r):void 0,c=void 0===s;if(c){var v=wr(u),p=!v&&Mr(u),m=!v&&!p&&Xr(u);s=u,v||p||m?wr(a)?s=a:xr(a)?s=Ei(a):p?(c=!1,s=di(u,!0)):m?(c=!1,s=ci(u,!0)):s=[]:Kr(u)||Or(u)?(s=a,Or(a)?s=ia(a):Wr(a)&&!Br(a)||(s=lo(u))):c=!1}c&&(r.set(u,s),i(s,u,n,o,r),r.delete(u)),Hl(e,l,s)}}(e,t,r,l,Dn,n,i);else{var a=n?n(fo(e,r),o,r+"",e,t,i):void 0;void 0===a&&(a=o),Hl(e,r,a)}},Ta)}function In(e,t){var l=e.length;if(l)return io(t+=t<0?l:0,l)?e[t]:void 0}function On(e,t,l){t=t.length?dt(t,function(e){return wr(e)?function(t){return sn(t,1===e.length?e[0]:e)}:e}):[Ya];var n=-1;return t=dt(t,Ct(qi())),function(e,t){var n=e.length;for(e.sort(function(e,t){return function(e,t,l){for(var n=-1,i=e.criteria,o=t.criteria,r=i.length,a=l.length;++n<r;){var u=vi(i[n],o[n]);if(u)return n>=a?u:u*("desc"==l[n]?-1:1)}return e.index-t.index}(e,t,l)});n--;)e[n]=e[n].value;return e}(bn(e,function(e,l,i){return{criteria:dt(t,function(t){return t(e)}),index:++n,value:e}}))}function wn(e,t,l){for(var n=-1,i=t.length,o={};++n<i;){var r=t[n],a=sn(e,r);l(a,r)&&Fn(o,oi(r,e),a)}return o}function Rn(e,t,l,n){var i=n?yt:_t,o=-1,r=t.length,a=e;for(e===t&&(t=Ei(t)),l&&(a=dt(e,Ct(l)));++o<r;)for(var u=0,d=t[o],s=l?l(d):d;(u=i(a,s,u,n))>-1;)a!==e&&Ge.call(a,u,1),Ge.call(e,u,1);return e}function Pn(e,t){for(var l=e?t.length:0,n=l-1;l--;){var i=t[l];if(l==n||i!==o){var o=i;io(i)?Ge.call(e,i,1):Zn(e,i)}}return e}function xn(e,t){return e+Qt(ul()*(t-e+1))}function Mn(e,t){var l="";if(!e||t<1||t>9007199254740991)return l;do{t%2&&(l+=e),(t=Qt(t/2))&&(e+=e)}while(t);return l}function kn(e,t){return To(po(e,t,Ya),e+"")}function Un(e){return Ul(Ca(e))}function Bn(e,t){var l=Ca(e);return ho(l,Gl(t,0,l.length))}function Fn(e,t,l,n){if(!Wr(e))return e;for(var i=-1,o=(t=oi(t,e)).length,r=o-1,a=e;null!=a&&++i<o;){var u=Ao(t[i]),d=l;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=r){var s=a[u];void 0===(d=n?n(s,u,a):void 0)&&(d=Wr(s)?s:io(t[i+1])?[]:{})}Wl(a,u,d),a=a[u]}return e}var Hn=fl?function(e,t){return fl.set(e,t),e}:Ya,Wn=Gt?function(e,t){return Gt(e,"toString",{configurable:!0,enumerable:!1,value:Wa(t),writable:!0})}:Ya;function Vn(e){return ho(Ca(e))}function jn(e,t,l){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(l=l>i?i:l)<0&&(l+=i),i=t>l?0:l-t>>>0,t>>>=0;for(var o=d(i);++n<i;)o[n]=e[n+t];return o}function Yn(e,t){var l;return Ql(e,function(e,n,i){return!(l=t(e,n,i))}),!!l}function Kn(e,t,l){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,r=e[o];null!==r&&!$r(r)&&(l?r<=t:r<t)?n=o+1:i=o}return i}return zn(e,t,Ya,l)}function zn(e,t,l,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var r=(t=l(t))!=t,a=null===t,u=$r(t),d=void 0===t;i<o;){var s=Qt((i+o)/2),c=l(e[s]),v=void 0!==c,p=null===c,m=c==c,E=$r(c);if(r)var f=n||m;else f=d?m&&(n||v):a?m&&v&&(n||!p):u?m&&v&&!p&&(n||!E):!p&&!E&&(n?c<=t:c<t);f?i=s+1:o=s}return ol(o,4294967294)}function Gn(e,t){for(var l=-1,n=e.length,i=0,o=[];++l<n;){var r=e[l],a=t?t(r):r;if(!l||!Cr(a,u)){var u=a;o[i++]=0===r?0:r}}return o}function qn(e){return"number"==typeof e?e:$r(e)?NaN:+e}function $n(e){if("string"==typeof e)return e;if(wr(e))return dt(e,$n)+"";if($r(e))return bl?bl.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xn(e,t,l){var n=-1,i=at,o=e.length,r=!0,a=[],u=a;if(l)r=!1,i=ut;else if(o>=200){var d=t?null:Mi(e);if(d)return Ht(d);r=!1,i=It,u=new xl}else u=t?[]:a;e:for(;++n<o;){var s=e[n],c=t?t(s):s;if(s=l||0!==s?s:0,r&&c==c){for(var v=u.length;v--;)if(u[v]===c)continue e;t&&u.push(c),a.push(s)}else i(u,c,l)||(u!==a&&u.push(c),a.push(s))}return a}function Zn(e,t){return null==(e=mo(e,t=oi(t,e)))||delete e[Ao(Uo(t))]}function Qn(e,t,l,n){return Fn(e,t,l(sn(e,t)),n)}function Jn(e,t,l,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return l?jn(e,n?0:o,n?o+1:i):jn(e,n?o+1:0,n?i:o)}function ei(e,t){var l=e;return l instanceof Ol&&(l=l.value()),ct(t,function(e,t){return t.func.apply(t.thisArg,st([e],t.args))},l)}function ti(e,t,l){var n=e.length;if(n<2)return n?Xn(e[0]):[];for(var i=-1,o=d(n);++i<n;)for(var r=e[i],a=-1;++a<n;)a!=i&&(o[i]=Zl(o[i]||r,e[a],t,l));return Xn(nn(o,1),t,l)}function li(e,t,l){for(var n=-1,i=e.length,o=t.length,r={};++n<i;)l(r,e[n],n<o?t[n]:void 0);return r}function ni(e){return xr(e)?e:[]}function ii(e){return"function"==typeof e?e:Ya}function oi(e,t){return wr(e)?e:ro(e,t)?[e]:Lo(oa(e))}var ri=kn;function ai(e,t,l){var n=e.length;return l=void 0===l?n:l,!t&&l>=n?e:jn(e,t,l)}var ui=qt||function(e){return je.clearTimeout(e)};function di(e,t){if(t)return e.slice();var l=e.length,n=We?We(l):new e.constructor(l);return e.copy(n),n}function si(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function ci(e,t){var l=t?si(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.length)}function vi(e,t){if(e!==t){var l=void 0!==e,n=null===e,i=e==e,o=$r(e),r=void 0!==t,a=null===t,u=t==t,d=$r(t);if(!a&&!d&&!o&&e>t||o&&r&&u&&!a&&!d||n&&r&&u||!l&&u||!i)return 1;if(!n&&!o&&!d&&e<t||d&&l&&i&&!n&&!o||a&&l&&i||!r&&i||!u)return-1}return 0}function pi(e,t,l,n){for(var i=-1,o=e.length,r=l.length,a=-1,u=t.length,s=il(o-r,0),c=d(u+s),v=!n;++a<u;)c[a]=t[a];for(;++i<r;)(v||i<o)&&(c[l[i]]=e[i]);for(;s--;)c[a++]=e[i++];return c}function mi(e,t,l,n){for(var i=-1,o=e.length,r=-1,a=l.length,u=-1,s=t.length,c=il(o-a,0),v=d(c+s),p=!n;++i<c;)v[i]=e[i];for(var m=i;++u<s;)v[m+u]=t[u];for(;++r<a;)(p||i<o)&&(v[m+l[r]]=e[i++]);return v}function Ei(e,t){var l=-1,n=e.length;for(t||(t=d(n));++l<n;)t[l]=e[l];return t}function fi(e,t,l,n){var i=!l;l||(l={});for(var o=-1,r=t.length;++o<r;){var a=t[o],u=n?n(l[a],e[a],a,l,e):void 0;void 0===u&&(u=e[a]),i?Kl(l,a,u):Wl(l,a,u)}return l}function _i(e,t){return function(l,n){var i=wr(l)?lt:jl,o=t?t():{};return i(l,e,qi(n,2),o)}}function yi(e){return kn(function(t,l){var n=-1,i=l.length,o=i>1?l[i-1]:void 0,r=i>2?l[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,r&&oo(l[0],l[1],r)&&(o=i<3?void 0:o,i=1),t=pe(t);++n<i;){var a=l[n];a&&e(t,a,n,o)}return t})}function Ti(e,t){return function(l,n){if(null==l)return l;if(!Pr(l))return e(l,n);for(var i=l.length,o=t?i:-1,r=pe(l);(t?o--:++o<i)&&!1!==n(r[o],o,r););return l}}function gi(e){return function(t,l,n){for(var i=-1,o=pe(t),r=n(t),a=r.length;a--;){var u=r[e?a:++i];if(!1===l(o[u],u,o))break}return t}}function Si(e){return function(t){var l=kt(t=oa(t))?jt(t):void 0,n=l?l[0]:t.charAt(0),i=l?ai(l,1).join(""):t.slice(1);return n[e]()+i}}function hi(e){return function(t){return ct(Ba(Oa(t).replace(De,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var l=Cl(e.prototype),n=e.apply(l,t);return Wr(n)?n:l}}function Ai(e){return function(t,l,n){var i=pe(t);if(!Pr(t)){var o=qi(l,3);t=ya(t),l=function(e){return o(i[e],e,i)}}var r=e(t,l,n);return r>-1?i[o?t[r]:r]:void 0}}function bi(e){return Vi(function(t){var n=t.length,i=n,o=Il.prototype.thru;for(e&&t.reverse();i--;){var r=t[i];if("function"!=typeof r)throw new fe(l);if(o&&!a&&"wrapper"==zi(r))var a=new Il([],!0)}for(i=a?i:n;++i<n;){var u=zi(r=t[i]),d="wrapper"==u?Ki(r):void 0;a=d&&ao(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?a[zi(d[0])].apply(a,d[3]):1==r.length&&ao(r)?a[u]():a.thru(r)}return function(){var e=arguments,l=e[0];if(a&&1==e.length&&wr(l))return a.plant(l).value();for(var i=0,o=n?t[i].apply(this,e):l;++i<n;)o=t[i].call(this,o);return o}})}function Ni(e,t,l,n,i,o,r,a,u,s){var c=128&t,v=1&t,p=2&t,m=24&t,E=512&t,f=p?void 0:Li(e);return function _(){for(var y=arguments.length,T=d(y),g=y;g--;)T[g]=arguments[g];if(m)var S=Gi(_),h=Rt(T,S);if(n&&(T=pi(T,n,i,m)),o&&(T=mi(T,o,r,m)),y-=h,m&&y<s){var L=Ft(T,S);return Pi(e,t,Ni,_.placeholder,l,T,L,a,u,s-y)}var A=v?l:this,b=p?A[e]:e;return y=T.length,a?T=Eo(T,a):E&&y>1&&T.reverse(),c&&u<y&&(T.length=u),this&&this!==je&&this instanceof _&&(b=f||Li(b)),b.apply(A,T)}}function Ci(e,t){return function(l,n){return function(e,t,l,n){return an(e,function(e,i,o){t(n,l(e),i,o)}),n}(l,e,t(n),{})}}function Di(e,t){return function(l,n){var i;if(void 0===l&&void 0===n)return t;if(void 0!==l&&(i=l),void 0!==n){if(void 0===i)return n;"string"==typeof l||"string"==typeof n?(l=$n(l),n=$n(n)):(l=qn(l),n=qn(n)),i=e(l,n)}return i}}function Ii(e){return Vi(function(t){return t=dt(t,Ct(qi())),kn(function(l){var n=this;return e(t,function(e){return tt(e,n,l)})})})}function Oi(e,t){var l=(t=void 0===t?" ":$n(t)).length;if(l<2)return l?Mn(t,e):t;var n=Mn(t,Zt(e/Vt(t)));return kt(t)?ai(jt(n),0,e).join(""):n.slice(0,e)}function wi(e){return function(t,l,n){return n&&"number"!=typeof n&&oo(t,l,n)&&(l=n=void 0),t=ea(t),void 0===l?(l=t,t=0):l=ea(l),function(e,t,l,n){for(var i=-1,o=il(Zt((t-e)/(l||1)),0),r=d(o);o--;)r[n?o:++i]=e,e+=l;return r}(t,l,n=void 0===n?t<l?1:-1:ea(n),e)}}function Ri(e){return function(t,l){return"string"==typeof t&&"string"==typeof l||(t=na(t),l=na(l)),e(t,l)}}function Pi(e,t,l,n,i,o,r,a,u,d){var s=8&t;t|=s?32:64,4&(t&=~(s?64:32))||(t&=-4);var c=[e,t,i,s?o:void 0,s?r:void 0,s?void 0:o,s?void 0:r,a,u,d],v=l.apply(void 0,c);return ao(e)&&_o(v,c),v.placeholder=n,go(v,e,t)}function xi(e){var t=ve[e];return function(e,l){if(e=na(e),(l=null==l?0:ol(ta(l),292))&&tl(e)){var n=(oa(e)+"e").split("e");return+((n=(oa(t(n[0]+"e"+(+n[1]+l)))+"e").split("e"))[0]+"e"+(+n[1]-l))}return t(e)}}var Mi=pl&&1/Ht(new pl([,-0]))[1]==1/0?function(e){return new pl(e)}:$a;function ki(e){return function(t){var l=eo(t);return l==p?Ut(t):l==_?Wt(t):function(e,t){return dt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ui(e,t,i,o,r,a,u,s){var c=2&t;if(!c&&"function"!=typeof e)throw new fe(l);var v=o?o.length:0;if(v||(t&=-97,o=r=void 0),u=void 0===u?u:il(ta(u),0),s=void 0===s?s:ta(s),v-=r?r.length:0,64&t){var p=o,m=r;o=r=void 0}var E=c?void 0:Ki(e),f=[e,t,i,o,r,p,m,a,u,s];if(E&&function(e,t){var l=e[1],i=t[1],o=l|i;if(!(o<131||128==i&&8==l||128==i&&256==l&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==l))return e;1&i&&(e[2]=t[2],o|=1&l?0:4);var r=t[3];if(r){var a=e[3];e[3]=a?pi(a,r,t[4]):r,e[4]=a?Ft(e[3],n):t[4]}(r=t[5])&&(e[5]=(a=e[5])?mi(a,r,t[6]):r,e[6]=a?Ft(e[5],n):t[6]),(r=t[7])&&(e[7]=r),128&i&&(e[8]=null==e[8]?t[8]:ol(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(f,E),e=f[0],t=f[1],i=f[2],o=f[3],r=f[4],!(s=f[9]=void 0===f[9]?c?0:e.length:il(f[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,l){var n=Li(e);return function i(){for(var o=arguments.length,r=d(o),a=o,u=Gi(i);a--;)r[a]=arguments[a];var s=o<3&&r[0]!==u&&r[o-1]!==u?[]:Ft(r,u);if((o-=s.length)<l)return Pi(e,t,Ni,i.placeholder,void 0,r,s,void 0,void 0,l-o);var c=this&&this!==je&&this instanceof i?n:e;return tt(c,this,r)}}(e,t,s):32!=t&&33!=t||r.length?Ni.apply(void 0,f):function(e,t,l,n){var i=1&t,o=Li(e);return function t(){for(var r=-1,a=arguments.length,u=-1,s=n.length,c=d(s+a),v=this&&this!==je&&this instanceof t?o:e;++u<s;)c[u]=n[u];for(;a--;)c[u++]=arguments[++r];return tt(v,i?l:this,c)}}(e,t,i,o);else var _=function(e,t,l){var n=1&t,i=Li(e);return function t(){var o=this&&this!==je&&this instanceof t?i:e;return o.apply(n?l:this,arguments)}}(e,t,i);return go((E?Hn:_o)(_,f),e,t)}function Bi(e,t,l,n){return void 0===e||Cr(e,ye[l])&&!Se.call(n,l)?t:e}function Fi(e,t,l,n,i,o){return Wr(e)&&Wr(t)&&(o.set(t,e),Dn(e,t,void 0,Fi,o),o.delete(t)),e}function Hi(e){return Kr(e)?void 0:e}function Wi(e,t,l,n,i,o){var r=1&l,a=e.length,u=t.length;if(a!=u&&!(r&&u>a))return!1;var d=o.get(e),s=o.get(t);if(d&&s)return d==t&&s==e;var c=-1,v=!0,p=2&l?new xl:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var m=e[c],E=t[c];if(n)var f=r?n(E,m,c,t,e,o):n(m,E,c,e,t,o);if(void 0!==f){if(f)continue;v=!1;break}if(p){if(!pt(t,function(e,t){if(!It(p,t)&&(m===e||i(m,e,l,n,o)))return p.push(t)})){v=!1;break}}else if(m!==E&&!i(m,E,l,n,o)){v=!1;break}}return o.delete(e),o.delete(t),v}function Vi(e){return To(po(e,void 0,Ro),e+"")}function ji(e){return cn(e,ya,Qi)}function Yi(e){return cn(e,Ta,Ji)}var Ki=fl?function(e){return fl.get(e)}:$a;function zi(e){for(var t=e.name+"",l=_l[t],n=Se.call(_l,t)?l.length:0;n--;){var i=l[n],o=i.func;if(null==o||o==e)return i.name}return t}function Gi(e){return(Se.call(Nl,"placeholder")?Nl:e).placeholder}function qi(){var e=Nl.iteratee||Ka;return e=e===Ka?hn:e,arguments.length?e(arguments[0],arguments[1]):e}function $i(e,t){var l,n,i=e.__data__;return("string"==(n=typeof(l=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==l:null===l)?i["string"==typeof t?"string":"hash"]:i.map}function Xi(e){for(var t=ya(e),l=t.length;l--;){var n=t[l],i=e[n];t[l]=[n,i,co(i)]}return t}function Zi(e,t){var l=function(e,t){return null==e?void 0:e[t]}(e,t);return Sn(l)?l:void 0}var Qi=Jt?function(e){return null==e?[]:(e=pe(e),rt(Jt(e),function(t){return Ke.call(e,t)}))}:lu,Ji=Jt?function(e){for(var t=[];e;)st(t,Qi(e)),e=Ve(e);return t}:lu,eo=vn;function to(e,t,l){for(var n=-1,i=(t=oi(t,e)).length,o=!1;++n<i;){var r=Ao(t[n]);if(!(o=null!=e&&l(e,r)))break;e=e[r]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Hr(i)&&io(r,i)&&(wr(e)||Or(e))}function lo(e){return"function"!=typeof e.constructor||so(e)?{}:Cl(Ve(e))}function no(e){return wr(e)||Or(e)||!!(qe&&e&&e[qe])}function io(e,t){var l=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==l||"symbol"!=l&&re.test(e))&&e>-1&&e%1==0&&e<t}function oo(e,t,l){if(!Wr(l))return!1;var n=typeof t;return!!("number"==n?Pr(l)&&io(t,l.length):"string"==n&&t in l)&&Cr(l[t],e)}function ro(e,t){if(wr(e))return!1;var l=typeof e;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=e&&!$r(e))||V.test(e)||!W.test(e)||null!=t&&e in pe(t)}function ao(e){var t=zi(e),l=Nl[t];if("function"!=typeof l||!(t in Ol.prototype))return!1;if(e===l)return!0;var n=Ki(l);return!!n&&e===n[0]}(sl&&eo(new sl(new ArrayBuffer(1)))!=h||cl&&eo(new cl)!=p||vl&&"[object Promise]"!=eo(vl.resolve())||pl&&eo(new pl)!=_||ml&&eo(new ml)!=g)&&(eo=function(e){var t=vn(e),l=t==E?e.constructor:void 0,n=l?bo(l):"";if(n)switch(n){case yl:return h;case Tl:return p;case gl:return"[object Promise]";case Sl:return _;case hl:return g}return t});var uo=Te?Br:nu;function so(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function co(e){return e==e&&!Wr(e)}function vo(e,t){return function(l){return null!=l&&l[e]===t&&(void 0!==t||e in pe(l))}}function po(e,t,l){return t=il(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=il(n.length-t,0),r=d(o);++i<o;)r[i]=n[t+i];i=-1;for(var a=d(t+1);++i<t;)a[i]=n[i];return a[t]=l(r),tt(e,this,a)}}function mo(e,t){return t.length<2?e:sn(e,jn(t,0,-1))}function Eo(e,t){for(var l=e.length,n=ol(t.length,l),i=Ei(e);n--;){var o=t[n];e[n]=io(o,l)?i[o]:void 0}return e}function fo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _o=So(Hn),yo=Xt||function(e,t){return je.setTimeout(e,t)},To=So(Wn);function go(e,t,l){var n=t+"";return To(e,function(e,t){var l=t.length;if(!l)return e;var n=l-1;return t[n]=(l>1?"& ":"")+t[n],t=t.join(l>2?", ":" "),e.replace(q,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return nt(i,function(l){var n="_."+l[0];t&l[1]&&!at(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match($);return t?t[1].split(X):[]}(n),l)))}function So(e){var t=0,l=0;return function(){var n=rl(),i=16-(n-l);if(l=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ho(e,t){var l=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++l<t;){var o=xn(l,i),r=e[o];e[o]=e[l],e[l]=r}return e.length=t,e}var Lo=function(e){var t=Sr(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(j,function(e,l,n,i){t.push(n?i.replace(J,"$1"):l||e)}),t},function(e){return 500===l.size&&l.clear(),e}),l=t.cache;return t}();function Ao(e){if("string"==typeof e||$r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function bo(e){if(null!=e){try{return ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function No(e){if(e instanceof Ol)return e.clone();var t=new Il(e.__wrapped__,e.__chain__);return t.__actions__=Ei(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Co=kn(function(e,t){return xr(e)?Zl(e,nn(t,1,xr,!0)):[]}),Do=kn(function(e,t){var l=Uo(t);return xr(l)&&(l=void 0),xr(e)?Zl(e,nn(t,1,xr,!0),qi(l,2)):[]}),Io=kn(function(e,t){var l=Uo(t);return xr(l)&&(l=void 0),xr(e)?Zl(e,nn(t,1,xr,!0),void 0,l):[]});function Oo(e,t,l){var n=null==e?0:e.length;if(!n)return-1;var i=null==l?0:ta(l);return i<0&&(i=il(n+i,0)),ft(e,qi(t,3),i)}function wo(e,t,l){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==l&&(i=ta(l),i=l<0?il(n+i,0):ol(i,n-1)),ft(e,qi(t,3),i,!0)}function Ro(e){return null!=e&&e.length?nn(e,1):[]}function Po(e){return e&&e.length?e[0]:void 0}var xo=kn(function(e){var t=dt(e,ni);return t.length&&t[0]===e[0]?fn(t):[]}),Mo=kn(function(e){var t=Uo(e),l=dt(e,ni);return t===Uo(l)?t=void 0:l.pop(),l.length&&l[0]===e[0]?fn(l,qi(t,2)):[]}),ko=kn(function(e){var t=Uo(e),l=dt(e,ni);return(t="function"==typeof t?t:void 0)&&l.pop(),l.length&&l[0]===e[0]?fn(l,void 0,t):[]});function Uo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Bo=kn(Fo);function Fo(e,t){return e&&e.length&&t&&t.length?Rn(e,t):e}var Ho=Vi(function(e,t){var l=null==e?0:e.length,n=zl(e,t);return Pn(e,dt(t,function(e){return io(e,l)?+e:e}).sort(vi)),n});function Wo(e){return null==e?e:dl.call(e)}var Vo=kn(function(e){return Xn(nn(e,1,xr,!0))}),jo=kn(function(e){var t=Uo(e);return xr(t)&&(t=void 0),Xn(nn(e,1,xr,!0),qi(t,2))}),Yo=kn(function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,Xn(nn(e,1,xr,!0),void 0,t)});function Ko(e){if(!e||!e.length)return[];var t=0;return e=rt(e,function(e){if(xr(e))return t=il(e.length,t),!0}),bt(t,function(t){return dt(e,St(t))})}function zo(e,t){if(!e||!e.length)return[];var l=Ko(e);return null==t?l:dt(l,function(e){return tt(t,void 0,e)})}var Go=kn(function(e,t){return xr(e)?Zl(e,t):[]}),qo=kn(function(e){return ti(rt(e,xr))}),$o=kn(function(e){var t=Uo(e);return xr(t)&&(t=void 0),ti(rt(e,xr),qi(t,2))}),Xo=kn(function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,ti(rt(e,xr),void 0,t)}),Zo=kn(Ko),Qo=kn(function(e){var t=e.length,l=t>1?e[t-1]:void 0;return l="function"==typeof l?(e.pop(),l):void 0,zo(e,l)});function Jo(e){var t=Nl(e);return t.__chain__=!0,t}function er(e,t){return t(e)}var tr=Vi(function(e){var t=e.length,l=t?e[0]:0,n=this.__wrapped__,i=function(t){return zl(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Ol&&io(l)?((n=n.slice(l,+l+(t?1:0))).__actions__.push({func:er,args:[i],thisArg:void 0}),new Il(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(i)}),lr=_i(function(e,t,l){Se.call(e,l)?++e[l]:Kl(e,l,1)}),nr=Ai(Oo),ir=Ai(wo);function or(e,t){return(wr(e)?nt:Ql)(e,qi(t,3))}function rr(e,t){return(wr(e)?it:Jl)(e,qi(t,3))}var ar=_i(function(e,t,l){Se.call(e,l)?e[l].push(t):Kl(e,l,[t])}),ur=kn(function(e,t,l){var n=-1,i="function"==typeof t,o=Pr(e)?d(e.length):[];return Ql(e,function(e){o[++n]=i?tt(t,e,l):_n(e,t,l)}),o}),dr=_i(function(e,t,l){Kl(e,l,t)});function sr(e,t){return(wr(e)?dt:bn)(e,qi(t,3))}var cr=_i(function(e,t,l){e[l?0:1].push(t)},function(){return[[],[]]}),vr=kn(function(e,t){if(null==e)return[];var l=t.length;return l>1&&oo(e,t[0],t[1])?t=[]:l>2&&oo(t[0],t[1],t[2])&&(t=[t[0]]),On(e,nn(t,1),[])}),pr=$t||function(){return je.Date.now()};function mr(e,t,l){return t=l?void 0:t,Ui(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function Er(e,t){var n;if("function"!=typeof t)throw new fe(l);return e=ta(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var fr=kn(function(e,t,l){var n=1;if(l.length){var i=Ft(l,Gi(fr));n|=32}return Ui(e,n,t,l,i)}),_r=kn(function(e,t,l){var n=3;if(l.length){var i=Ft(l,Gi(_r));n|=32}return Ui(t,n,e,l,i)});function yr(e,t,n){var i,o,r,a,u,d,s=0,c=!1,v=!1,p=!0;if("function"!=typeof e)throw new fe(l);function m(t){var l=i,n=o;return i=o=void 0,s=t,a=e.apply(n,l)}function E(e){return s=e,u=yo(_,t),c?m(e):a}function f(e){var l=e-d;return void 0===d||l>=t||l<0||v&&e-s>=r}function _(){var e=pr();if(f(e))return y(e);u=yo(_,function(e){var l=t-(e-d);return v?ol(l,r-(e-s)):l}(e))}function y(e){return u=void 0,p&&i?m(e):(i=o=void 0,a)}function T(){var e=pr(),l=f(e);if(i=arguments,o=this,d=e,l){if(void 0===u)return E(d);if(v)return ui(u),u=yo(_,t),m(d)}return void 0===u&&(u=yo(_,t)),a}return t=na(t)||0,Wr(n)&&(c=!!n.leading,r=(v="maxWait"in n)?il(na(n.maxWait)||0,t):r,p="trailing"in n?!!n.trailing:p),T.cancel=function(){void 0!==u&&ui(u),s=0,i=d=o=u=void 0},T.flush=function(){return void 0===u?a:y(pr())},T}var Tr=kn(function(e,t){return Xl(e,1,t)}),gr=kn(function(e,t,l){return Xl(e,na(t)||0,l)});function Sr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new fe(l);var n=function(){var l=arguments,i=t?t.apply(this,l):l[0],o=n.cache;if(o.has(i))return o.get(i);var r=e.apply(this,l);return n.cache=o.set(i,r)||o,r};return n.cache=new(Sr.Cache||Pl),n}function hr(e){if("function"!=typeof e)throw new fe(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Sr.Cache=Pl;var Lr=ri(function(e,t){var l=(t=1==t.length&&wr(t[0])?dt(t[0],Ct(qi())):dt(nn(t,1),Ct(qi()))).length;return kn(function(n){for(var i=-1,o=ol(n.length,l);++i<o;)n[i]=t[i].call(this,n[i]);return tt(e,this,n)})}),Ar=kn(function(e,t){return Ui(e,32,void 0,t,Ft(t,Gi(Ar)))}),br=kn(function(e,t){return Ui(e,64,void 0,t,Ft(t,Gi(br)))}),Nr=Vi(function(e,t){return Ui(e,256,void 0,void 0,void 0,t)});function Cr(e,t){return e===t||e!=e&&t!=t}var Dr=Ri(pn),Ir=Ri(function(e,t){return e>=t}),Or=yn(function(){return arguments}())?yn:function(e){return Vr(e)&&Se.call(e,"callee")&&!Ke.call(e,"callee")},wr=d.isArray,Rr=$e?Ct($e):function(e){return Vr(e)&&vn(e)==S};function Pr(e){return null!=e&&Hr(e.length)&&!Br(e)}function xr(e){return Vr(e)&&Pr(e)}var Mr=el||nu,kr=Xe?Ct(Xe):function(e){return Vr(e)&&vn(e)==u};function Ur(e){if(!Vr(e))return!1;var t=vn(e);return t==s||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Kr(e)}function Br(e){if(!Wr(e))return!1;var t=vn(e);return t==c||t==v||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Fr(e){return"number"==typeof e&&e==ta(e)}function Hr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Wr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Vr(e){return null!=e&&"object"==typeof e}var jr=Ze?Ct(Ze):function(e){return Vr(e)&&eo(e)==p};function Yr(e){return"number"==typeof e||Vr(e)&&vn(e)==m}function Kr(e){if(!Vr(e)||vn(e)!=E)return!1;var t=Ve(e);if(null===t)return!0;var l=Se.call(t,"constructor")&&t.constructor;return"function"==typeof l&&l instanceof l&&ge.call(l)==be}var zr=Qe?Ct(Qe):function(e){return Vr(e)&&vn(e)==f},Gr=Je?Ct(Je):function(e){return Vr(e)&&eo(e)==_};function qr(e){return"string"==typeof e||!wr(e)&&Vr(e)&&vn(e)==y}function $r(e){return"symbol"==typeof e||Vr(e)&&vn(e)==T}var Xr=et?Ct(et):function(e){return Vr(e)&&Hr(e.length)&&!!ke[vn(e)]},Zr=Ri(An),Qr=Ri(function(e,t){return e<=t});function Jr(e){if(!e)return[];if(Pr(e))return qr(e)?jt(e):Ei(e);if(mt&&e[mt])return function(e){for(var t,l=[];!(t=e.next()).done;)l.push(t.value);return l}(e[mt]());var t=eo(e);return(t==p?Ut:t==_?Ht:Ca)(e)}function ea(e){return e?(e=na(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ta(e){var t=ea(e),l=t%1;return t==t?l?t-l:t:0}function la(e){return e?Gl(ta(e),0,4294967295):0}function na(e){if("number"==typeof e)return e;if($r(e))return NaN;if(Wr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Nt(e);var l=ne.test(e);return l||oe.test(e)?He(e.slice(2),l?2:8):le.test(e)?NaN:+e}function ia(e){return fi(e,Ta(e))}function oa(e){return null==e?"":$n(e)}var ra=yi(function(e,t){if(so(t)||Pr(t))fi(t,ya(t),e);else for(var l in t)Se.call(t,l)&&Wl(e,l,t[l])}),aa=yi(function(e,t){fi(t,Ta(t),e)}),ua=yi(function(e,t,l,n){fi(t,Ta(t),e,n)}),da=yi(function(e,t,l,n){fi(t,ya(t),e,n)}),sa=Vi(zl),ca=kn(function(e,t){e=pe(e);var l=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&oo(t[0],t[1],i)&&(n=1);++l<n;)for(var o=t[l],r=Ta(o),a=-1,u=r.length;++a<u;){var d=r[a],s=e[d];(void 0===s||Cr(s,ye[d])&&!Se.call(e,d))&&(e[d]=o[d])}return e}),va=kn(function(e){return e.push(void 0,Fi),tt(Sa,void 0,e)});function pa(e,t,l){var n=null==e?void 0:sn(e,t);return void 0===n?l:n}function ma(e,t){return null!=e&&to(e,t,En)}var Ea=Ci(function(e,t,l){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=l},Wa(Ya)),fa=Ci(function(e,t,l){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),Se.call(e,t)?e[t].push(l):e[t]=[l]},qi),_a=kn(_n);function ya(e){return Pr(e)?kl(e):Ln(e)}function Ta(e){return Pr(e)?kl(e,!0):function(e){if(!Wr(e))return function(e){var t=[];if(null!=e)for(var l in pe(e))t.push(l);return t}(e);var t=so(e),l=[];for(var n in e)("constructor"!=n||!t&&Se.call(e,n))&&l.push(n);return l}(e)}var ga=yi(function(e,t,l){Dn(e,t,l)}),Sa=yi(function(e,t,l,n){Dn(e,t,l,n)}),ha=Vi(function(e,t){var l={};if(null==e)return l;var n=!1;t=dt(t,function(t){return t=oi(t,e),n||(n=t.length>1),t}),fi(e,Yi(e),l),n&&(l=ql(l,7,Hi));for(var i=t.length;i--;)Zn(l,t[i]);return l}),La=Vi(function(e,t){return null==e?{}:function(e,t){return wn(e,t,function(t,l){return ma(e,l)})}(e,t)});function Aa(e,t){if(null==e)return{};var l=dt(Yi(e),function(e){return[e]});return t=qi(t),wn(e,l,function(e,l){return t(e,l[0])})}var ba=ki(ya),Na=ki(Ta);function Ca(e){return null==e?[]:Dt(e,ya(e))}var Da=hi(function(e,t,l){return t=t.toLowerCase(),e+(l?Ia(t):t)});function Ia(e){return Ua(oa(e).toLowerCase())}function Oa(e){return(e=oa(e))&&e.replace(ae,Pt).replace(Ie,"")}var wa=hi(function(e,t,l){return e+(l?"-":"")+t.toLowerCase()}),Ra=hi(function(e,t,l){return e+(l?" ":"")+t.toLowerCase()}),Pa=Si("toLowerCase"),xa=hi(function(e,t,l){return e+(l?"_":"")+t.toLowerCase()}),Ma=hi(function(e,t,l){return e+(l?" ":"")+Ua(t)}),ka=hi(function(e,t,l){return e+(l?" ":"")+t.toUpperCase()}),Ua=Si("toUpperCase");function Ba(e,t,l){return e=oa(e),void 0===(t=l?void 0:t)?function(e){return Pe.test(e)}(e)?function(e){return e.match(we)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Fa=kn(function(e,t){try{return tt(e,void 0,t)}catch(e){return Ur(e)?e:new se(e)}}),Ha=Vi(function(e,t){return nt(t,function(t){t=Ao(t),Kl(e,t,fr(e[t],e))}),e});function Wa(e){return function(){return e}}var Va=bi(),ja=bi(!0);function Ya(e){return e}function Ka(e){return hn("function"==typeof e?e:ql(e,1))}var za=kn(function(e,t){return function(l){return _n(l,e,t)}}),Ga=kn(function(e,t){return function(l){return _n(e,l,t)}});function qa(e,t,l){var n=ya(t),i=dn(t,n);null!=l||Wr(t)&&(i.length||!n.length)||(l=t,t=e,e=this,i=dn(t,ya(t)));var o=!(Wr(l)&&"chain"in l&&!l.chain),r=Br(e);return nt(i,function(l){var n=t[l];e[l]=n,r&&(e.prototype[l]=function(){var t=this.__chain__;if(o||t){var l=e(this.__wrapped__),i=l.__actions__=Ei(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),l.__chain__=t,l}return n.apply(e,st([this.value()],arguments))})}),e}function $a(){}var Xa=Ii(dt),Za=Ii(ot),Qa=Ii(pt);function Ja(e){return ro(e)?St(Ao(e)):function(e){return function(t){return sn(t,e)}}(e)}var eu=wi(),tu=wi(!0);function lu(){return[]}function nu(){return!1}var iu,ou=Di(function(e,t){return e+t},0),ru=xi("ceil"),au=Di(function(e,t){return e/t},1),uu=xi("floor"),du=Di(function(e,t){return e*t},1),su=xi("round"),cu=Di(function(e,t){return e-t},0);return Nl.after=function(e,t){if("function"!=typeof t)throw new fe(l);return e=ta(e),function(){if(--e<1)return t.apply(this,arguments)}},Nl.ary=mr,Nl.assign=ra,Nl.assignIn=aa,Nl.assignInWith=ua,Nl.assignWith=da,Nl.at=sa,Nl.before=Er,Nl.bind=fr,Nl.bindAll=Ha,Nl.bindKey=_r,Nl.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return wr(e)?e:[e]},Nl.chain=Jo,Nl.chunk=function(e,t,l){t=(l?oo(e,t,l):void 0===t)?1:il(ta(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,r=d(Zt(n/t));i<n;)r[o++]=jn(e,i,i+=t);return r},Nl.compact=function(e){for(var t=-1,l=null==e?0:e.length,n=0,i=[];++t<l;){var o=e[t];o&&(i[n++]=o)}return i},Nl.concat=function(){var e=arguments.length;if(!e)return[];for(var t=d(e-1),l=arguments[0],n=e;n--;)t[n-1]=arguments[n];return st(wr(l)?Ei(l):[l],nn(t,1))},Nl.cond=function(e){var t=null==e?0:e.length,n=qi();return e=t?dt(e,function(e){if("function"!=typeof e[1])throw new fe(l);return[n(e[0]),e[1]]}):[],kn(function(l){for(var n=-1;++n<t;){var i=e[n];if(tt(i[0],this,l))return tt(i[1],this,l)}})},Nl.conforms=function(e){return function(e){var t=ya(e);return function(l){return $l(l,e,t)}}(ql(e,1))},Nl.constant=Wa,Nl.countBy=lr,Nl.create=function(e,t){var l=Cl(e);return null==t?l:Yl(l,t)},Nl.curry=function e(t,l,n){var i=Ui(t,8,void 0,void 0,void 0,void 0,void 0,l=n?void 0:l);return i.placeholder=e.placeholder,i},Nl.curryRight=function e(t,l,n){var i=Ui(t,16,void 0,void 0,void 0,void 0,void 0,l=n?void 0:l);return i.placeholder=e.placeholder,i},Nl.debounce=yr,Nl.defaults=ca,Nl.defaultsDeep=va,Nl.defer=Tr,Nl.delay=gr,Nl.difference=Co,Nl.differenceBy=Do,Nl.differenceWith=Io,Nl.drop=function(e,t,l){var n=null==e?0:e.length;return n?jn(e,(t=l||void 0===t?1:ta(t))<0?0:t,n):[]},Nl.dropRight=function(e,t,l){var n=null==e?0:e.length;return n?jn(e,0,(t=n-(t=l||void 0===t?1:ta(t)))<0?0:t):[]},Nl.dropRightWhile=function(e,t){return e&&e.length?Jn(e,qi(t,3),!0,!0):[]},Nl.dropWhile=function(e,t){return e&&e.length?Jn(e,qi(t,3),!0):[]},Nl.fill=function(e,t,l,n){var i=null==e?0:e.length;return i?(l&&"number"!=typeof l&&oo(e,t,l)&&(l=0,n=i),function(e,t,l,n){var i=e.length;for((l=ta(l))<0&&(l=-l>i?0:i+l),(n=void 0===n||n>i?i:ta(n))<0&&(n+=i),n=l>n?0:la(n);l<n;)e[l++]=t;return e}(e,t,l,n)):[]},Nl.filter=function(e,t){return(wr(e)?rt:ln)(e,qi(t,3))},Nl.flatMap=function(e,t){return nn(sr(e,t),1)},Nl.flatMapDeep=function(e,t){return nn(sr(e,t),1/0)},Nl.flatMapDepth=function(e,t,l){return l=void 0===l?1:ta(l),nn(sr(e,t),l)},Nl.flatten=Ro,Nl.flattenDeep=function(e){return null!=e&&e.length?nn(e,1/0):[]},Nl.flattenDepth=function(e,t){return null!=e&&e.length?nn(e,t=void 0===t?1:ta(t)):[]},Nl.flip=function(e){return Ui(e,512)},Nl.flow=Va,Nl.flowRight=ja,Nl.fromPairs=function(e){for(var t=-1,l=null==e?0:e.length,n={};++t<l;){var i=e[t];n[i[0]]=i[1]}return n},Nl.functions=function(e){return null==e?[]:dn(e,ya(e))},Nl.functionsIn=function(e){return null==e?[]:dn(e,Ta(e))},Nl.groupBy=ar,Nl.initial=function(e){return null!=e&&e.length?jn(e,0,-1):[]},Nl.intersection=xo,Nl.intersectionBy=Mo,Nl.intersectionWith=ko,Nl.invert=Ea,Nl.invertBy=fa,Nl.invokeMap=ur,Nl.iteratee=Ka,Nl.keyBy=dr,Nl.keys=ya,Nl.keysIn=Ta,Nl.map=sr,Nl.mapKeys=function(e,t){var l={};return t=qi(t,3),an(e,function(e,n,i){Kl(l,t(e,n,i),e)}),l},Nl.mapValues=function(e,t){var l={};return t=qi(t,3),an(e,function(e,n,i){Kl(l,n,t(e,n,i))}),l},Nl.matches=function(e){return Nn(ql(e,1))},Nl.matchesProperty=function(e,t){return Cn(e,ql(t,1))},Nl.memoize=Sr,Nl.merge=ga,Nl.mergeWith=Sa,Nl.method=za,Nl.methodOf=Ga,Nl.mixin=qa,Nl.negate=hr,Nl.nthArg=function(e){return e=ta(e),kn(function(t){return In(t,e)})},Nl.omit=ha,Nl.omitBy=function(e,t){return Aa(e,hr(qi(t)))},Nl.once=function(e){return Er(2,e)},Nl.orderBy=function(e,t,l,n){return null==e?[]:(wr(t)||(t=null==t?[]:[t]),wr(l=n?void 0:l)||(l=null==l?[]:[l]),On(e,t,l))},Nl.over=Xa,Nl.overArgs=Lr,Nl.overEvery=Za,Nl.overSome=Qa,Nl.partial=Ar,Nl.partialRight=br,Nl.partition=cr,Nl.pick=La,Nl.pickBy=Aa,Nl.property=Ja,Nl.propertyOf=function(e){return function(t){return null==e?void 0:sn(e,t)}},Nl.pull=Bo,Nl.pullAll=Fo,Nl.pullAllBy=function(e,t,l){return e&&e.length&&t&&t.length?Rn(e,t,qi(l,2)):e},Nl.pullAllWith=function(e,t,l){return e&&e.length&&t&&t.length?Rn(e,t,void 0,l):e},Nl.pullAt=Ho,Nl.range=eu,Nl.rangeRight=tu,Nl.rearg=Nr,Nl.reject=function(e,t){return(wr(e)?rt:ln)(e,hr(qi(t,3)))},Nl.remove=function(e,t){var l=[];if(!e||!e.length)return l;var n=-1,i=[],o=e.length;for(t=qi(t,3);++n<o;){var r=e[n];t(r,n,e)&&(l.push(r),i.push(n))}return Pn(e,i),l},Nl.rest=function(e,t){if("function"!=typeof e)throw new fe(l);return kn(e,t=void 0===t?t:ta(t))},Nl.reverse=Wo,Nl.sampleSize=function(e,t,l){return t=(l?oo(e,t,l):void 0===t)?1:ta(t),(wr(e)?Bl:Bn)(e,t)},Nl.set=function(e,t,l){return null==e?e:Fn(e,t,l)},Nl.setWith=function(e,t,l,n){return n="function"==typeof n?n:void 0,null==e?e:Fn(e,t,l,n)},Nl.shuffle=function(e){return(wr(e)?Fl:Vn)(e)},Nl.slice=function(e,t,l){var n=null==e?0:e.length;return n?(l&&"number"!=typeof l&&oo(e,t,l)?(t=0,l=n):(t=null==t?0:ta(t),l=void 0===l?n:ta(l)),jn(e,t,l)):[]},Nl.sortBy=vr,Nl.sortedUniq=function(e){return e&&e.length?Gn(e):[]},Nl.sortedUniqBy=function(e,t){return e&&e.length?Gn(e,qi(t,2)):[]},Nl.split=function(e,t,l){return l&&"number"!=typeof l&&oo(e,t,l)&&(t=l=void 0),(l=void 0===l?4294967295:l>>>0)?(e=oa(e))&&("string"==typeof t||null!=t&&!zr(t))&&!(t=$n(t))&&kt(e)?ai(jt(e),0,l):e.split(t,l):[]},Nl.spread=function(e,t){if("function"!=typeof e)throw new fe(l);return t=null==t?0:il(ta(t),0),kn(function(l){var n=l[t],i=ai(l,0,t);return n&&st(i,n),tt(e,this,i)})},Nl.tail=function(e){var t=null==e?0:e.length;return t?jn(e,1,t):[]},Nl.take=function(e,t,l){return e&&e.length?jn(e,0,(t=l||void 0===t?1:ta(t))<0?0:t):[]},Nl.takeRight=function(e,t,l){var n=null==e?0:e.length;return n?jn(e,(t=n-(t=l||void 0===t?1:ta(t)))<0?0:t,n):[]},Nl.takeRightWhile=function(e,t){return e&&e.length?Jn(e,qi(t,3),!1,!0):[]},Nl.takeWhile=function(e,t){return e&&e.length?Jn(e,qi(t,3)):[]},Nl.tap=function(e,t){return t(e),e},Nl.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new fe(l);return Wr(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),yr(e,t,{leading:i,maxWait:t,trailing:o})},Nl.thru=er,Nl.toArray=Jr,Nl.toPairs=ba,Nl.toPairsIn=Na,Nl.toPath=function(e){return wr(e)?dt(e,Ao):$r(e)?[e]:Ei(Lo(oa(e)))},Nl.toPlainObject=ia,Nl.transform=function(e,t,l){var n=wr(e),i=n||Mr(e)||Xr(e);if(t=qi(t,4),null==l){var o=e&&e.constructor;l=i?n?new o:[]:Wr(e)&&Br(o)?Cl(Ve(e)):{}}return(i?nt:an)(e,function(e,n,i){return t(l,e,n,i)}),l},Nl.unary=function(e){return mr(e,1)},Nl.union=Vo,Nl.unionBy=jo,Nl.unionWith=Yo,Nl.uniq=function(e){return e&&e.length?Xn(e):[]},Nl.uniqBy=function(e,t){return e&&e.length?Xn(e,qi(t,2)):[]},Nl.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xn(e,void 0,t):[]},Nl.unset=function(e,t){return null==e||Zn(e,t)},Nl.unzip=Ko,Nl.unzipWith=zo,Nl.update=function(e,t,l){return null==e?e:Qn(e,t,ii(l))},Nl.updateWith=function(e,t,l,n){return n="function"==typeof n?n:void 0,null==e?e:Qn(e,t,ii(l),n)},Nl.values=Ca,Nl.valuesIn=function(e){return null==e?[]:Dt(e,Ta(e))},Nl.without=Go,Nl.words=Ba,Nl.wrap=function(e,t){return Ar(ii(t),e)},Nl.xor=qo,Nl.xorBy=$o,Nl.xorWith=Xo,Nl.zip=Zo,Nl.zipObject=function(e,t){return li(e||[],t||[],Wl)},Nl.zipObjectDeep=function(e,t){return li(e||[],t||[],Fn)},Nl.zipWith=Qo,Nl.entries=ba,Nl.entriesIn=Na,Nl.extend=aa,Nl.extendWith=ua,qa(Nl,Nl),Nl.add=ou,Nl.attempt=Fa,Nl.camelCase=Da,Nl.capitalize=Ia,Nl.ceil=ru,Nl.clamp=function(e,t,l){return void 0===l&&(l=t,t=void 0),void 0!==l&&(l=(l=na(l))==l?l:0),void 0!==t&&(t=(t=na(t))==t?t:0),Gl(na(e),t,l)},Nl.clone=function(e){return ql(e,4)},Nl.cloneDeep=function(e){return ql(e,5)},Nl.cloneDeepWith=function(e,t){return ql(e,5,t="function"==typeof t?t:void 0)},Nl.cloneWith=function(e,t){return ql(e,4,t="function"==typeof t?t:void 0)},Nl.conformsTo=function(e,t){return null==t||$l(e,t,ya(t))},Nl.deburr=Oa,Nl.defaultTo=function(e,t){return null==e||e!=e?t:e},Nl.divide=au,Nl.endsWith=function(e,t,l){e=oa(e),t=$n(t);var n=e.length,i=l=void 0===l?n:Gl(ta(l),0,n);return(l-=t.length)>=0&&e.slice(l,i)==t},Nl.eq=Cr,Nl.escape=function(e){return(e=oa(e))&&U.test(e)?e.replace(M,xt):e},Nl.escapeRegExp=function(e){return(e=oa(e))&&K.test(e)?e.replace(Y,"\\$&"):e},Nl.every=function(e,t,l){var n=wr(e)?ot:en;return l&&oo(e,t,l)&&(t=void 0),n(e,qi(t,3))},Nl.find=nr,Nl.findIndex=Oo,Nl.findKey=function(e,t){return Et(e,qi(t,3),an)},Nl.findLast=ir,Nl.findLastIndex=wo,Nl.findLastKey=function(e,t){return Et(e,qi(t,3),un)},Nl.floor=uu,Nl.forEach=or,Nl.forEachRight=rr,Nl.forIn=function(e,t){return null==e?e:on(e,qi(t,3),Ta)},Nl.forInRight=function(e,t){return null==e?e:rn(e,qi(t,3),Ta)},Nl.forOwn=function(e,t){return e&&an(e,qi(t,3))},Nl.forOwnRight=function(e,t){return e&&un(e,qi(t,3))},Nl.get=pa,Nl.gt=Dr,Nl.gte=Ir,Nl.has=function(e,t){return null!=e&&to(e,t,mn)},Nl.hasIn=ma,Nl.head=Po,Nl.identity=Ya,Nl.includes=function(e,t,l,n){e=Pr(e)?e:Ca(e),l=l&&!n?ta(l):0;var i=e.length;return l<0&&(l=il(i+l,0)),qr(e)?l<=i&&e.indexOf(t,l)>-1:!!i&&_t(e,t,l)>-1},Nl.indexOf=function(e,t,l){var n=null==e?0:e.length;if(!n)return-1;var i=null==l?0:ta(l);return i<0&&(i=il(n+i,0)),_t(e,t,i)},Nl.inRange=function(e,t,l){return t=ea(t),void 0===l?(l=t,t=0):l=ea(l),function(e,t,l){return e>=ol(t,l)&&e<il(t,l)}(e=na(e),t,l)},Nl.invoke=_a,Nl.isArguments=Or,Nl.isArray=wr,Nl.isArrayBuffer=Rr,Nl.isArrayLike=Pr,Nl.isArrayLikeObject=xr,Nl.isBoolean=function(e){return!0===e||!1===e||Vr(e)&&vn(e)==a},Nl.isBuffer=Mr,Nl.isDate=kr,Nl.isElement=function(e){return Vr(e)&&1===e.nodeType&&!Kr(e)},Nl.isEmpty=function(e){if(null==e)return!0;if(Pr(e)&&(wr(e)||"string"==typeof e||"function"==typeof e.splice||Mr(e)||Xr(e)||Or(e)))return!e.length;var t=eo(e);if(t==p||t==_)return!e.size;if(so(e))return!Ln(e).length;for(var l in e)if(Se.call(e,l))return!1;return!0},Nl.isEqual=function(e,t){return Tn(e,t)},Nl.isEqualWith=function(e,t,l){var n=(l="function"==typeof l?l:void 0)?l(e,t):void 0;return void 0===n?Tn(e,t,void 0,l):!!n},Nl.isError=Ur,Nl.isFinite=function(e){return"number"==typeof e&&tl(e)},Nl.isFunction=Br,Nl.isInteger=Fr,Nl.isLength=Hr,Nl.isMap=jr,Nl.isMatch=function(e,t){return e===t||gn(e,t,Xi(t))},Nl.isMatchWith=function(e,t,l){return l="function"==typeof l?l:void 0,gn(e,t,Xi(t),l)},Nl.isNaN=function(e){return Yr(e)&&e!=+e},Nl.isNative=function(e){if(uo(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sn(e)},Nl.isNil=function(e){return null==e},Nl.isNull=function(e){return null===e},Nl.isNumber=Yr,Nl.isObject=Wr,Nl.isObjectLike=Vr,Nl.isPlainObject=Kr,Nl.isRegExp=zr,Nl.isSafeInteger=function(e){return Fr(e)&&e>=-9007199254740991&&e<=9007199254740991},Nl.isSet=Gr,Nl.isString=qr,Nl.isSymbol=$r,Nl.isTypedArray=Xr,Nl.isUndefined=function(e){return void 0===e},Nl.isWeakMap=function(e){return Vr(e)&&eo(e)==g},Nl.isWeakSet=function(e){return Vr(e)&&"[object WeakSet]"==vn(e)},Nl.join=function(e,t){return null==e?"":ll.call(e,t)},Nl.kebabCase=wa,Nl.last=Uo,Nl.lastIndexOf=function(e,t,l){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==l&&(i=(i=ta(l))<0?il(n+i,0):ol(i,n-1)),t==t?function(e,t,l){for(var n=l+1;n--;)if(e[n]===t)return n;return n}(e,t,i):ft(e,Tt,i,!0)},Nl.lowerCase=Ra,Nl.lowerFirst=Pa,Nl.lt=Zr,Nl.lte=Qr,Nl.max=function(e){return e&&e.length?tn(e,Ya,pn):void 0},Nl.maxBy=function(e,t){return e&&e.length?tn(e,qi(t,2),pn):void 0},Nl.mean=function(e){return gt(e,Ya)},Nl.meanBy=function(e,t){return gt(e,qi(t,2))},Nl.min=function(e){return e&&e.length?tn(e,Ya,An):void 0},Nl.minBy=function(e,t){return e&&e.length?tn(e,qi(t,2),An):void 0},Nl.stubArray=lu,Nl.stubFalse=nu,Nl.stubObject=function(){return{}},Nl.stubString=function(){return""},Nl.stubTrue=function(){return!0},Nl.multiply=du,Nl.nth=function(e,t){return e&&e.length?In(e,ta(t)):void 0},Nl.noConflict=function(){return je._===this&&(je._=Ne),this},Nl.noop=$a,Nl.now=pr,Nl.pad=function(e,t,l){e=oa(e);var n=(t=ta(t))?Vt(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Oi(Qt(i),l)+e+Oi(Zt(i),l)},Nl.padEnd=function(e,t,l){e=oa(e);var n=(t=ta(t))?Vt(e):0;return t&&n<t?e+Oi(t-n,l):e},Nl.padStart=function(e,t,l){e=oa(e);var n=(t=ta(t))?Vt(e):0;return t&&n<t?Oi(t-n,l)+e:e},Nl.parseInt=function(e,t,l){return l||null==t?t=0:t&&(t=+t),al(oa(e).replace(z,""),t||0)},Nl.random=function(e,t,l){if(l&&"boolean"!=typeof l&&oo(e,t,l)&&(t=l=void 0),void 0===l&&("boolean"==typeof t?(l=t,t=void 0):"boolean"==typeof e&&(l=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ea(e),void 0===t?(t=e,e=0):t=ea(t)),e>t){var n=e;e=t,t=n}if(l||e%1||t%1){var i=ul();return ol(e+i*(t-e+Fe("1e-"+((i+"").length-1))),t)}return xn(e,t)},Nl.reduce=function(e,t,l){var n=wr(e)?ct:Lt,i=arguments.length<3;return n(e,qi(t,4),l,i,Ql)},Nl.reduceRight=function(e,t,l){var n=wr(e)?vt:Lt,i=arguments.length<3;return n(e,qi(t,4),l,i,Jl)},Nl.repeat=function(e,t,l){return t=(l?oo(e,t,l):void 0===t)?1:ta(t),Mn(oa(e),t)},Nl.replace=function(){var e=arguments,t=oa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Nl.result=function(e,t,l){var n=-1,i=(t=oi(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[Ao(t[n])];void 0===o&&(n=i,o=l),e=Br(o)?o.call(e):o}return e},Nl.round=su,Nl.runInContext=e,Nl.sample=function(e){return(wr(e)?Ul:Un)(e)},Nl.size=function(e){if(null==e)return 0;if(Pr(e))return qr(e)?Vt(e):e.length;var t=eo(e);return t==p||t==_?e.size:Ln(e).length},Nl.snakeCase=xa,Nl.some=function(e,t,l){var n=wr(e)?pt:Yn;return l&&oo(e,t,l)&&(t=void 0),n(e,qi(t,3))},Nl.sortedIndex=function(e,t){return Kn(e,t)},Nl.sortedIndexBy=function(e,t,l){return zn(e,t,qi(l,2))},Nl.sortedIndexOf=function(e,t){var l=null==e?0:e.length;if(l){var n=Kn(e,t);if(n<l&&Cr(e[n],t))return n}return-1},Nl.sortedLastIndex=function(e,t){return Kn(e,t,!0)},Nl.sortedLastIndexBy=function(e,t,l){return zn(e,t,qi(l,2),!0)},Nl.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var l=Kn(e,t,!0)-1;if(Cr(e[l],t))return l}return-1},Nl.startCase=Ma,Nl.startsWith=function(e,t,l){return e=oa(e),l=null==l?0:Gl(ta(l),0,e.length),t=$n(t),e.slice(l,l+t.length)==t},Nl.subtract=cu,Nl.sum=function(e){return e&&e.length?At(e,Ya):0},Nl.sumBy=function(e,t){return e&&e.length?At(e,qi(t,2)):0},Nl.template=function(e,t,l){var n=Nl.templateSettings;l&&oo(e,t,l)&&(t=void 0),e=oa(e),t=ua({},t,n,Bi);var i,o,r=ua({},t.imports,n.imports,Bi),a=ya(r),u=Dt(r,a),d=0,s=t.interpolate||ue,c="__p += '",v=me((t.escape||ue).source+"|"+s.source+"|"+(s===H?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(v,function(t,l,n,r,a,u){return n||(n=r),c+=e.slice(d,u).replace(de,Mt),l&&(i=!0,c+="' +\n__e("+l+") +\n'"),a&&(o=!0,c+="';\n"+a+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=u+t.length,t}),c+="';\n";var m=Se.call(t,"variable")&&t.variable;if(m){if(Q.test(m))throw new se("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(o?c.replace(w,""):c).replace(R,"$1").replace(P,"$1;"),c="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var E=Fa(function(){return ce(a,p+"return "+c).apply(void 0,u)});if(E.source=c,Ur(E))throw E;return E},Nl.times=function(e,t){if((e=ta(e))<1||e>9007199254740991)return[];var l=4294967295,n=ol(e,4294967295);e-=4294967295;for(var i=bt(n,t=qi(t));++l<e;)t(l);return i},Nl.toFinite=ea,Nl.toInteger=ta,Nl.toLength=la,Nl.toLower=function(e){return oa(e).toLowerCase()},Nl.toNumber=na,Nl.toSafeInteger=function(e){return e?Gl(ta(e),-9007199254740991,9007199254740991):0===e?e:0},Nl.toString=oa,Nl.toUpper=function(e){return oa(e).toUpperCase()},Nl.trim=function(e,t,l){if((e=oa(e))&&(l||void 0===t))return Nt(e);if(!e||!(t=$n(t)))return e;var n=jt(e),i=jt(t);return ai(n,Ot(n,i),wt(n,i)+1).join("")},Nl.trimEnd=function(e,t,l){if((e=oa(e))&&(l||void 0===t))return e.slice(0,Yt(e)+1);if(!e||!(t=$n(t)))return e;var n=jt(e);return ai(n,0,wt(n,jt(t))+1).join("")},Nl.trimStart=function(e,t,l){if((e=oa(e))&&(l||void 0===t))return e.replace(z,"");if(!e||!(t=$n(t)))return e;var n=jt(e);return ai(n,Ot(n,jt(t))).join("")},Nl.truncate=function(e,t){var l=30,n="...";if(Wr(t)){var i="separator"in t?t.separator:i;l="length"in t?ta(t.length):l,n="omission"in t?$n(t.omission):n}var o=(e=oa(e)).length;if(kt(e)){var r=jt(e);o=r.length}if(l>=o)return e;var a=l-Vt(n);if(a<1)return n;var u=r?ai(r,0,a).join(""):e.slice(0,a);if(void 0===i)return u+n;if(r&&(a+=u.length-a),zr(i)){if(e.slice(a).search(i)){var d,s=u;for(i.global||(i=me(i.source,oa(te.exec(i))+"g")),i.lastIndex=0;d=i.exec(s);)var c=d.index;u=u.slice(0,void 0===c?a:c)}}else if(e.indexOf($n(i),a)!=a){var v=u.lastIndexOf(i);v>-1&&(u=u.slice(0,v))}return u+n},Nl.unescape=function(e){return(e=oa(e))&&k.test(e)?e.replace(x,Kt):e},Nl.uniqueId=function(e){var t=++he;return oa(e)+t},Nl.upperCase=ka,Nl.upperFirst=Ua,Nl.each=or,Nl.eachRight=rr,Nl.first=Po,qa(Nl,(iu={},an(Nl,function(e,t){Se.call(Nl.prototype,t)||(iu[t]=e)}),iu),{chain:!1}),Nl.VERSION="4.17.21",nt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Nl[e].placeholder=Nl}),nt(["drop","take"],function(e,t){Ol.prototype[e]=function(l){l=void 0===l?1:il(ta(l),0);var n=this.__filtered__&&!t?new Ol(this):this.clone();return n.__filtered__?n.__takeCount__=ol(l,n.__takeCount__):n.__views__.push({size:ol(l,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Ol.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),nt(["filter","map","takeWhile"],function(e,t){var l=t+1,n=1==l||3==l;Ol.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:qi(e,3),type:l}),t.__filtered__=t.__filtered__||n,t}}),nt(["head","last"],function(e,t){var l="take"+(t?"Right":"");Ol.prototype[e]=function(){return this[l](1).value()[0]}}),nt(["initial","tail"],function(e,t){var l="drop"+(t?"":"Right");Ol.prototype[e]=function(){return this.__filtered__?new Ol(this):this[l](1)}}),Ol.prototype.compact=function(){return this.filter(Ya)},Ol.prototype.find=function(e){return this.filter(e).head()},Ol.prototype.findLast=function(e){return this.reverse().find(e)},Ol.prototype.invokeMap=kn(function(e,t){return"function"==typeof e?new Ol(this):this.map(function(l){return _n(l,e,t)})}),Ol.prototype.reject=function(e){return this.filter(hr(qi(e)))},Ol.prototype.slice=function(e,t){e=ta(e);var l=this;return l.__filtered__&&(e>0||t<0)?new Ol(l):(e<0?l=l.takeRight(-e):e&&(l=l.drop(e)),void 0!==t&&(l=(t=ta(t))<0?l.dropRight(-t):l.take(t-e)),l)},Ol.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ol.prototype.toArray=function(){return this.take(4294967295)},an(Ol.prototype,function(e,t){var l=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Nl[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Nl.prototype[t]=function(){var t=this.__wrapped__,r=n?[1]:arguments,a=t instanceof Ol,u=r[0],d=a||wr(t),s=function(e){var t=i.apply(Nl,st([e],r));return n&&c?t[0]:t};d&&l&&"function"==typeof u&&1!=u.length&&(a=d=!1);var c=this.__chain__,v=!!this.__actions__.length,p=o&&!c,m=a&&!v;if(!o&&d){t=m?t:new Ol(this);var E=e.apply(t,r);return E.__actions__.push({func:er,args:[s],thisArg:void 0}),new Il(E,c)}return p&&m?e.apply(this,r):(E=this.thru(s),p?n?E.value()[0]:E.value():E)})}),nt(["pop","push","shift","sort","splice","unshift"],function(e){var t=_e[e],l=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Nl.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(wr(i)?i:[],e)}return this[l](function(l){return t.apply(wr(l)?l:[],e)})}}),an(Ol.prototype,function(e,t){var l=Nl[t];if(l){var n=l.name+"";Se.call(_l,n)||(_l[n]=[]),_l[n].push({name:t,func:l})}}),_l[Ni(void 0,2).name]=[{name:"wrapper",func:void 0}],Ol.prototype.clone=function(){var e=new Ol(this.__wrapped__);return e.__actions__=Ei(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ei(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ei(this.__views__),e},Ol.prototype.reverse=function(){if(this.__filtered__){var e=new Ol(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ol.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,l=wr(e),n=t<0,i=l?e.length:0,o=function(e,t,l){for(var n=-1,i=l.length;++n<i;){var o=l[n],r=o.size;switch(o.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=ol(t,e+r);break;case"takeRight":e=il(e,t-r)}}return{start:e,end:t}}(0,i,this.__views__),r=o.start,a=o.end,u=a-r,d=n?a:r-1,s=this.__iteratees__,c=s.length,v=0,p=ol(u,this.__takeCount__);if(!l||!n&&i==u&&p==u)return ei(e,this.__actions__);var m=[];e:for(;u--&&v<p;){for(var E=-1,f=e[d+=t];++E<c;){var _=s[E],y=_.type,T=(0,_.iteratee)(f);if(2==y)f=T;else if(!T){if(1==y)continue e;break e}}m[v++]=f}return m},Nl.prototype.at=tr,Nl.prototype.chain=function(){return Jo(this)},Nl.prototype.commit=function(){return new Il(this.value(),this.__chain__)},Nl.prototype.next=function(){void 0===this.__values__&&(this.__values__=Jr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Nl.prototype.plant=function(e){for(var t,l=this;l instanceof Dl;){var n=No(l);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;l=l.__wrapped__}return i.__wrapped__=e,t},Nl.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ol){var t=e;return this.__actions__.length&&(t=new Ol(this)),(t=t.reverse()).__actions__.push({func:er,args:[Wo],thisArg:void 0}),new Il(t,this.__chain__)}return this.thru(Wo)},Nl.prototype.toJSON=Nl.prototype.valueOf=Nl.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},Nl.prototype.first=Nl.prototype.head,mt&&(Nl.prototype[mt]=function(){return this}),Nl}();Ke?((Ke.exports=zt)._=zt,Ye._=zt):je._=zt}).call(d)});function Ye(){return(Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)({}).hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(null,arguments)}function Ke(e,t){try{var l=e()}catch(e){return t(e)}return l&&l.then?l.then(void 0,t):l}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ze=function(e){return void 0===e};const Ge=e=>{let{width:t=20,height:l=20,style:i}=e;return n.createElement("svg",{style:i,xmlns:"http://www.w3.org/2000/svg",width:t,height:l,viewBox:"0 0 20 20",fill:"gray"},n.createElement("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"}))};function qe(e){var l,o,r,a,u;let{value:d={}}=e;const{t:s}=i.useTranslation(),{isLoading:c,data:v}=Digit.Hooks.tl.useTLDocumentSearch({value:d},{value:d});let p=window.location.href.includes("/tl/tradelicence/application/")?null==d||null===(l=d.tradeLicenseDetail)||void 0===l?void 0:l.applicationDocuments:[];return null!=d&&d.workflowDocs&&(p=null==d?void 0:d.workflowDocs),null!=d&&null!==(o=d.owners)&&void 0!==o&&o.documents.ProofOfIdentity&&p.push(d.owners.documents.ProofOfIdentity),null!=d&&null!==(r=d.owners)&&void 0!==r&&r.documents.ProofOfOwnership&&p.push(d.owners.documents.ProofOfOwnership),null!=d&&null!==(a=d.owners)&&void 0!==a&&a.documents.OwnerPhotoProof&&p.push(d.owners.documents.OwnerPhotoProof),c?n.createElement(t.Loader,null):n.createElement("div",{style:{marginTop:"19px"}},n.createElement(n.Fragment,null,n.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},null===(u=p)||void 0===u?void 0:u.map((e,t)=>{let l=we(v.pdfFiles,null==e?void 0:e.fileStoreId);return n.createElement("a",{target:"_",href:l,style:{minWidth:"100px",marginRight:"10px"},key:t},n.createElement(Ge,{width:85,height:100,style:{background:"#f6f6f6",padding:"8px"}}),n.createElement("p",{style:{marginTop:"8px",textAlign:"center"}},s(null!=d&&d.workflowDocs?""+(null==e?void 0:e.documentType):"TL_"+(null==e?void 0:e.documentType)+"_LABEL")))}))))}const $e=e=>{var r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$;let{onSubmit:X,value:Z}=e;window.location.href.includes("renew-trade");const{t:Q}=i.useTranslation(),J=o.useHistory(),ee=o.useRouteMatch(),[te,le]=l.useState(null),{TradeDetails:ne,address:ie,owners:oe,isEditProperty:re,cpt:ae}=Z,{data:ue}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:(null==Z?void 0:Z.tenantId)||Digit.ULBService.getCurrentTenantId(),filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.tradeType&&e.applicationType===(window.location.href.includes("renew-trade")?"RENEWAL":"NEW")&&"PERMANENT"===e.licenseType&&e.uom)});function de(e){sessionStorage.getItem("isDirectRenewal")&&sessionStorage.removeItem("isDirectRenewal"),J.push(e)}l.useEffect(()=>()=>{localStorage.setItem("TLAppSubmitEnabled","false")},[]),l.useEffect(()=>{"true"===sessionStorage.getItem("isCreateEnabledEmployee")?(sessionStorage.removeItem("isCreateEnabledEmployee"),J.replace("/employee")):sessionStorage.removeItem("isCreateEnabledEmployee")});let se="/digit-ui/citizen/tl/tradelicence/"+(re?"renew-trade":"new-application");var ce,ve,pe;return(window.location.href.includes("edit-application")||window.location.href.includes("renew-trade"))&&(se=""+(ce=ee.path,(ve=ee.params)&&(null===(pe=Object.keys(ve))||void 0===pe||pe.map(e=>{ce=ce.replace(":"+e,ve[e])})),ce),se=se.replace("/check","")),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:4}):null,n.createElement(t.Header,{styles:{fontSize:"32px"}},Q("TL_COMMON_SUMMARY")),n.createElement(t.Card,{style:{paddingRight:"16px"}},n.createElement(t.CardHeader,{styles:{fontSize:"28px"}},Q("TL_LOCALIZATION_TRADE_DETAILS")),n.createElement(t.StatusTable,null,n.createElement(t.LinkButton,{label:n.createElement(t.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>de(se+"/TradeName")}),n.createElement(t.Row,{className:"border-none",textStyle:{marginRight:"-10px"},label:Q("TL_LOCALIZATION_TRADE_NAME"),text:Q(null==ne?void 0:ne.TradeName)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_STRUCTURE_TYPE"),text:Q("TL_"+(null==ne?void 0:ne.StructureType.code))}),n.createElement(t.Row,{className:"border-none",label:Q("TL_STRUCTURE_SUB_TYPE"),text:Q("IMMOVABLE"!==(null==ne?void 0:ne.StructureType.code)?null==ne||null===(r=ne.VehicleType)||void 0===r?void 0:r.i18nKey:null==ne||null===(a=ne.BuildingType)||void 0===a?void 0:a.i18nKey)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_TRADE_GST_NO"),text:(null==ne?void 0:ne.TradeGSTNumber)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_OPERATIONAL_AREA"),text:(null==ne?void 0:ne.OperationalSqFtArea)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NO_OF_EMPLOYEES"),text:(null==ne?void 0:ne.NumberOfEmployees)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL"),text:Q(function(e){let t=Date.parse(e);return new Date(t).getDate().toString()+"/"+(new Date(t).getMonth()+1).toString()+"/"+new Date(t).getFullYear().toString()}(null==ne?void 0:ne.CommencementDate))}),null==ne||null===(u=ne.units)||void 0===u?void 0:u.map((e,l)=>{var i,o,r;return n.createElement("div",{key:l},n.createElement(t.CardSubHeader,null,Q("TL_UNIT_HEADER"),"-",l+1),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_DETAILS_TRADE_CAT_LABEL"),text:Q(null==e||null===(i=e.tradecategory)||void 0===i?void 0:i.i18nKey)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_DETAILS_TRADE_TYPE_LABEL"),text:Q(null==e||null===(o=e.tradetype)||void 0===o?void 0:o.i18nKey)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_DETAILS_TRADE_SUBTYPE_LABEL"),text:Q(null==e||null===(r=e.tradesubtype)||void 0===r?void 0:r.i18nKey)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_UNIT_OF_MEASURE_LABEL"),text:""+Q(null!=e&&e.unit?null==e?void 0:e.unit:"CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL"),text:""+Q(null!=e&&e.uom?null==e?void 0:e.uom:"CS_NA")}))}),(null==ne?void 0:ne.accessories)&&(null==ne||null===(d=ne.isAccessories)||void 0===d||null===(s=d.i18nKey)||void 0===s?void 0:s.includes("YES"))&&(null==ne||null===(c=ne.accessories)||void 0===c?void 0:c.map((e,l)=>{var i;return n.createElement("div",{key:l},n.createElement(t.CardSubHeader,null,Q("TL_ACCESSORY_LABEL"),"-",l+1),n.createElement(t.Row,{className:"border-none",label:Q("TL_TRADE_ACC_HEADER"),text:Q(null==e||null===(i=e.accessory)||void 0===i?void 0:i.i18nKey)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_TRADE_ACCESSORY_COUNT"),text:Q(null==e?void 0:e.accessorycount)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_ACC_UOM_LABEL"),text:""+Q(null!=e&&e.unit?null==e?void 0:e.unit:"CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_ACC_UOM_VALUE_LABEL"),text:""+Q(null!=e&&e.unit?null==e?void 0:e.uom:"CS_NA")}))})))),!("MOVABLE"===(null==ne?void 0:ne.StructureType.code))&&n.createElement(t.Card,null,n.createElement(t.StatusTable,null,n.createElement(t.CardHeader,{styles:{fontSize:"28px"}},Q("TL_NEW_TRADE_DETAILS_HEADER_TRADE_LOC_DETAILS")),ae&&ae.details&&ae.details.propertyId?n.createElement(n.Fragment,null,n.createElement(t.LinkButton,{label:n.createElement(t.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>de(se+"/know-your-property")}),n.createElement(t.Row,{className:"border-none",textStyle:{marginRight:"-10px"},label:Q("TL_PROPERTY_ID"),text:""+(null===(v=ae.details.propertyId)||void 0===v?void 0:v.trim())}),n.createElement(t.Row,{className:"border-none",label:Q("TL_CHECK_ADDRESS"),text:(null!==(p=ae.details)&&void 0!==p&&null!==(m=p.address)&&void 0!==m&&null!==(E=m.doorNo)&&void 0!==E&&E.trim()?(null===(f=ae.details)||void 0===f||null===(_=f.address)||void 0===_||null===(y=_.doorNo)||void 0===y?void 0:y.trim())+", ":"")+" "+(null!==(T=ae.details)&&void 0!==T&&null!==(g=T.address)&&void 0!==g&&null!==(S=g.street)&&void 0!==S&&S.trim()?(null===(h=ae.details)||void 0===h||null===(L=h.address)||void 0===L||null===(A=L.street)||void 0===A?void 0:A.trim())+", ":"")+" "+(null!==(b=ae.details)&&void 0!==b&&null!==(N=b.address)&&void 0!==N&&null!==(C=N.buildingName)&&void 0!==C&&C.trim()?(null===(D=ae.details)||void 0===D||null===(I=D.address)||void 0===I||null===(O=I.buildingName)||void 0===O?void 0:O.trim())+", ":"")+"\n              "+Q(null===(w=ae.details)||void 0===w||null===(R=w.address)||void 0===R||null===(P=R.locality)||void 0===P?void 0:P.name)+", "+Q(null===(x=ae.details)||void 0===x||null===(M=x.address)||void 0===M?void 0:M.city)+" "+(null!==(k=ae.details)&&void 0!==k&&null!==(U=k.address)&&void 0!==U&&null!==(B=U.pincode)&&void 0!==B&&B.trim()?","+(null===(F=ae.details)||void 0===F||null===(H=F.address)||void 0===H||null===(W=H.pincode)||void 0===W?void 0:W.trim()):"")})):n.createElement(n.Fragment,null,n.createElement(t.LinkButton,{label:n.createElement(t.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>de(se+"/map")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_CHECK_ADDRESS"),text:(null!=ie&&null!==(V=ie.doorNo)&&void 0!==V&&V.trim()?(null==ie||null===(j=ie.doorNo)||void 0===j?void 0:j.trim())+", ":"")+" "+(null!=ie&&null!==(Y=ie.street)&&void 0!==Y&&Y.trim()?(null==ie||null===(K=ie.street)||void 0===K?void 0:K.trim())+", ":"")+Q(null==ie||null===(z=ie.locality)||void 0===z?void 0:z.i18nkey)+", "+Q(null==ie?void 0:ie.city.code)+" "+(null!=ie&&null!==(G=ie.pincode)&&void 0!==G&&G.trim()?","+(null==ie||null===(q=ie.pincode)||void 0===q?void 0:q.trim()):"")})))),n.createElement(t.Card,null,n.createElement(t.StatusTable,null,n.createElement(t.CardHeader,{styles:{fontSize:"28px"}},Q("TL_NEW_OWNER_DETAILS_HEADER")),n.createElement(t.LinkButton,{label:n.createElement(t.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>de(se+"/owner-details")}),oe.owners&&(null==oe||null===($=oe.owners)||void 0===$?void 0:$.map((e,l)=>{var i,o;return n.createElement("div",{key:l},n.createElement(t.CardSubHeader,null,Q("TL_PAYMENT_PAID_BY_PLACEHOLDER"),"-",l+1),n.createElement(t.Row,{className:"border-none",label:Q("TL_COMMON_TABLE_COL_OWN_NAME"),text:Q(null==e?void 0:e.name)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_NEW_OWNER_DETAILS_GENDER_LABEL"),text:Q(null==e||null===(i=e.gender)||void 0===i?void 0:i.i18nKey)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_MOBILE_NUMBER_LABEL"),text:Q(null==e?void 0:e.mobilenumber)}),n.createElement(t.Row,{className:"border-none",label:Q("TL_GUARDIAN_S_NAME_LABEL"),text:Q(null==e?void 0:e.fatherOrHusbandName)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_RELATIONSHIP_WITH_GUARDIAN_LABEL"),text:Q(null==e||null===(o=e.relationship)||void 0===o?void 0:o.i18nKey)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_EMAIL_ID_LABEL"),text:Q(null==e?void 0:e.emailId)||Q("CS_NA")}),n.createElement(t.Row,{className:"border-none",label:Q("TL_CORRESPONDENCE_ADDRESS"),labelStyle:{marginRight:"2px"},text:Q(null==oe?void 0:oe.permanentAddress)||Q("CS_NA")}))})))),n.createElement(t.Card,null,n.createElement(t.StatusTable,null,n.createElement(t.CardHeader,{styles:{fontSize:"28px"}},Q("TL_COMMON_DOCS")),n.createElement(t.LinkButton,{label:n.createElement(t.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:()=>de(se+"/proof-of-identity")}),n.createElement("div",null,null!=oe&&oe.documents.OwnerPhotoProof||null!=oe&&oe.documents.ProofOfIdentity||null!=oe&&oe.documents.ProofOfOwnership?n.createElement(qe,{value:Z}):n.createElement(t.StatusTable,null,n.createElement(t.Row,{className:"border-none",text:Q("TL_NO_DOCUMENTS_MSG")})))),te&&n.createElement(t.Toast,{error:"error"===te.key,label:Q(te.message),onClose:()=>le(null),style:{maxWidth:"670px"},isDleteBtn:!0}),n.createElement(t.SubmitBar,{label:Q("CS_COMMON_SUBMIT"),onSubmit:()=>{if(window.location.href.includes("renew-trade")&&Z){var e,t;let l=!0;null==Z||null===(e=Z.TradeDetails)||void 0===e||null===(t=e.units)||void 0===t||t.map(e=>{var t;e&&(null==ue||null===(t=ue.filter(t=>{var l,n,i,o,r;return(null==t?void 0:t.tradeType)===(null==e||null===(l=e.tradesubtype)||void 0===l?void 0:l.code)&&((null==t?void 0:t.structureType)===(null==Z||null===(n=Z.TradeDetails)||void 0===n||null===(i=n.VehicleType)||void 0===i?void 0:i.code)||(null==t?void 0:t.structureType)===(null==Z||null===(o=Z.TradeDetails)||void 0===o||null===(r=o.BuildingType)||void 0===r?void 0:r.code))}))||void 0===t?void 0:t.length)<=0&&(l=!1,le({key:"error",message:"TL_BILLING_SLAB_NOT_FOUND_FOR_COMB"}))}),l&&X()}else X()}})))},Xe=e=>e.substr(0,1).toUpperCase()+e.substr(1),Ze=e=>{var t,l;return null===(t=e.toLowerCase())||void 0===t||null===(l=t.split(" "))||void 0===l?void 0:l.map(Xe).join(" ")},Qe=(e,t)=>{var l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y;if(e.owners=(null==e||null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.owners)||void 0===n?void 0:n.filter(e=>1==e.active))||[],"INDIVIDUAL.SINGLEOWNER"==(null==e||null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.subOwnerShipCategory))return{title:t("TL_OWNERSHIP_DETAILS_HEADER"),values:[{title:t("TL_OWNER_S_NAME_LABEL"),value:(null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(r=o.owners[0])||void 0===r?void 0:r.name)||t("CS_NA")},{title:t("TL_OWNER_S_MOBILE_NUM_LABEL"),value:(null==e||null===(a=e.tradeLicenseDetail)||void 0===a||null===(u=a.owners[0])||void 0===u?void 0:u.mobileNumber)||t("CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_GENDER_LABEL"),value:t(null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.owners[0])||void 0===s?void 0:s.gender)||t("CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_EMAIL_LABEL"),value:(null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.owners[0])||void 0===v?void 0:v.emailId)||t("CS_NA")},{title:t("TL_OWNER_SPECIAL_CATEGORY"),value:null!=e&&null!==(p=e.tradeLicenseDetail)&&void 0!==p&&null!==(m=p.owners[0])&&void 0!==m&&m.ownerType?t("COMMON_MASTERS_OWNERTYPE_"+(null==e||null===(E=e.tradeLicenseDetail)||void 0===E||null===(f=E.owners[0])||void 0===f?void 0:f.ownerType)):t("CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_ADDR_LABEL"),value:(null==e||null===(_=e.tradeLicenseDetail)||void 0===_||null===(y=_.owners[0])||void 0===y?void 0:y.permanentAddress)||t("CS_NA")}]};{var T,g;let l=[];return null==e||null===(T=e.tradeLicenseDetail)||void 0===T||null===(g=T.owners)||void 0===g||g.map(e=>{let n=[{title:t("TL_OWNER_S_NAME_LABEL"),value:(null==e?void 0:e.name)||t("CS_NA")},{title:t("TL_OWNER_S_MOBILE_NUM_LABEL"),value:(null==e?void 0:e.mobileNumber)||t("CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_GENDER_LABEL"),value:t(null==e?void 0:e.gender)||t("CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_EMAIL_LABEL"),value:(null==e?void 0:e.emailId)||t("CS_NA")},{title:t("TL_OWNER_SPECIAL_CATEGORY"),value:t(null!=e&&e.ownerType?"COMMON_MASTERS_OWNERTYPE_"+(null==e?void 0:e.ownerType):"CS_NA")},{title:t("TL_NEW_OWNER_DETAILS_ADDR_LABEL"),value:(null==e?void 0:e.permanentAddress)||t("CS_NA")}];l.push(...n)}),{title:t("TL_OWNERSHIP_DETAILS_HEADER"),values:l}}},Je=(e,t)=>{var l,n,i,o,r,a,u,d,s;return{title:t("TL_COMMON_TR_DETAILS"),values:[{title:t("TL_HOME_SEARCH_RESULTS_APP_NO_LABEL"),value:(null==e?void 0:e.applicationNumber)||t("CS_NA")},{title:t("TL_APPLICATION_TYPE"),value:t("TRADELICENSE_APPLICATIONTYPE_"+(null==e?void 0:e.applicationType))||t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_LIC_TYPE_LABEL"),value:t(null!=e&&e.licenseType?"TRADELICENSE_LICENSETYPE_"+(null==e?void 0:e.licenseType):"CS_NA")},{title:t("TL_COMMON_TABLE_COL_TRD_NAME"),value:(null==e?void 0:e.tradeName)||t("CS_NA")},{title:t("reports.tl.fromDate"),value:null!=e&&e.validFrom?Digit.DateUtils.ConvertTimestampToDate(null==e?void 0:e.validFrom,"dd/MM/yyyy"):t("CS_NA")},{title:t("reports.tl.toDate"),value:null!=e&&e.validTo?Digit.DateUtils.ConvertTimestampToDate(null==e?void 0:e.validTo,"dd/MM/yyyy"):t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_STRUCT_TYPE_LABEL"),value:null!=e&&null!==(l=e.tradeLicenseDetail)&&void 0!==l&&l.structureType?t("COMMON_MASTERS_STRUCTURETYPE_"+(null==e||null===(n=e.tradeLicenseDetail)||void 0===n||null===(i=n.structureType)||void 0===i?void 0:i.split(".")[0])):t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_STRUCT_SUB_TYPE_LABEL"),value:null!=e&&null!==(o=e.tradeLicenseDetail)&&void 0!==o&&o.structureType?t("COMMON_MASTERS_STRUCTURETYPE_"+xe(null==e||null===(r=e.tradeLicenseDetail)||void 0===r?void 0:r.structureType,".","_")):t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL"),value:Digit.DateUtils.ConvertTimestampToDate(null==e?void 0:e.commencementDate,"dd/MM/yyyy")||t("CS_NA")},{title:t("TL_NEW_GST_NUMBER_LABEL"),value:(null==e||null===(a=e.tradeLicenseDetail)||void 0===a||null===(u=a.additionalDetail)||void 0===u?void 0:u.tradeGstNo)||t("CS_NA")},{title:t("TL_NEW_OPERATIONAL_SQ_FT_AREA_LABEL"),value:(null==e||null===(d=e.tradeLicenseDetail)||void 0===d?void 0:d.operationalArea)||t("CS_NA")},{title:t("TL_NEW_NUMBER_OF_EMPLOYEES_LABEL"),value:(null==e||null===(s=e.tradeLicenseDetail)||void 0===s?void 0:s.noOfEmployees)||t("CS_NA")}]}},et=(e,t)=>{var l,n,i;let o=[];return null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.accessories)||void 0===n||null===(i=n.filter(e=>!1!==(null==e?void 0:e.active)))||void 0===i||i.map(e=>{let l=t("CS_NA");null!=e&&e.accessoryCategory&&(l=xe(null==e?void 0:e.accessoryCategory,".","_"),l=t("TRADELICENSE_ACCESSORIESCATEGORY_"+xe(l,"-","_")));let n=[{title:t("TL_NEW_TRADE_DETAILS_ACC_LABEL"),value:l},{title:t("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER"),value:(null==e?void 0:e.uom)||t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL"),value:(null==e?void 0:e.uomValue)||t("CS_NA")},{title:t("TL_ACCESSORY_COUNT_LABEL"),value:(null==e?void 0:e.count)||t("CS_NA")}];o.push(...n)}),{title:"ACCESSORIES_DETAILS",values:o}},tt=(e,t)=>{var l,n;let i=[];return null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.tradeUnits)||void 0===n||n.map(e=>{var l,n;let o=xe(null==e?void 0:e.tradeType,".","_");o=xe(o,"-","_");let r=[{title:t("TRADELICENSE_TRADECATEGORY_LABEL"),value:t(null!=e&&e.tradeType?"TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[0]):"CS_NA")},{title:t("TRADELICENSE_TRADETYPE_LABEL"),value:t(null!=e&&e.tradeType?"TRADELICENSE_TRADETYPE_"+(null==e||null===(n=e.tradeType)||void 0===n?void 0:n.split(".")[1]):"CS_NA")},{title:t("TL_NEW_TRADE_SUB_TYPE_LABEL"),value:t(o?"TRADELICENSE_TRADETYPE_"+o:"CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER"),value:(null==e?void 0:e.uom)||t("CS_NA")},{title:t("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL"),value:(null==e?void 0:e.uomValue)||t("CS_NA")}];i.push(...r)}),{title:"TRADE_UNIT_DETAILS",values:i}},lt=(e,t)=>{var l,n,i,o,r,a,u,d,s,c,v,p,m,E;return{title:"PROPERTY_DETAILS",values:[{title:t("TL_PROPERTY_ID"),value:(null==e||null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.additionalDetail)||void 0===n?void 0:n.propertyId)||t("CS_NA")},{title:t("CORE_COMMON_PINCODE"),value:(null==e||null===(i=e.tradeLicenseDetail)||void 0===i||null===(o=i.address)||void 0===o?void 0:o.pincode)||t("CS_NA")},{title:t("MYCITY_CODE_LABEL"),value:t(null==e||null===(r=e.tradeLicenseDetail)||void 0===r||null===(a=r.address)||void 0===a?void 0:a.city)||t("CS_NA")},{title:t("TL_LOCALIZATION_LOCALITY"),value:t((p=null==e||null===(u=e.tradeLicenseDetail)||void 0===u?void 0:u.address,((null==p||null===(m=p.tenantId)||void 0===m?void 0:m.replaceAll(".","_"))||xe(null==p?void 0:p.tenantId,".","_")).toUpperCase()+"_REVENUE_"+(null==p||null===(E=p.locality)||void 0===E?void 0:E.code)))||t("CS_NA")},{title:t("TL_LOCALIZATION_BUILDING_NO"),value:(null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.doorNo)||t("CS_NA")},{title:t("TL_LOCALIZATION_STREET_NAME"),value:(null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.address)||void 0===v?void 0:v.street)||t("CS_NA")}]}},nt=function(e,t,l){try{var n,i;function o(){var n,i,o,r,u;return{t:l,tenantId:null==t?void 0:t.code,title:l(null==t?void 0:t.i18nKey)+" "+Ze(l("ULBGRADE_"+(null==t||null===(n=t.city)||void 0===n?void 0:n.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),name:l(null==t?void 0:t.i18nKey)+" "+Ze(l("ULBGRADE_"+(null==t||null===(i=t.city)||void 0===i?void 0:i.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),email:null==t?void 0:t.emailId,phoneNumber:null==t?void 0:t.contactNumber,heading:l("NEW_TRADE_LICENSE_APPLICATION"),applicationNumber:null==e?void 0:e.applicationNumber,details:[Je(e,l),tt(e,l),et(e,l),lt(e,l),Qe(e,l),{title:l("TL_COMMON_DOCS"),values:(null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(r=o.applicationDocuments)||void 0===r?void 0:r.length)>0?null==e||null===(u=e.tradeLicenseDetail)||void 0===u?void 0:u.applicationDocuments.map((e,t)=>{var n;let i=we(null===(n=a)||void 0===n?void 0:n.data,null==e?void 0:e.fileStoreId);return{title:l("TL_NEW_"+(null==e?void 0:e.documentType)||l("CS_NA")),value:Re(i,t)||l("CS_NA")}}):[]}]}}const r=null==e||null===(n=e.tradeLicenseDetail)||void 0===n||null===(i=n.applicationDocuments)||void 0===i?void 0:i.map(e=>null==e?void 0:e.fileStoreId);let a;const u=function(){if(r)return Promise.resolve(Digit.UploadServices.Filefetch(r,Digit.ULBService.getStateId())).then(function(e){a=e})}();return Promise.resolve(u&&u.then?u.then(o):o())}catch(e){return Promise.reject(e)}},it=e=>{const{t:t}=i.useTranslation();return e.isSuccess?window.location.href.includes("renew-trade")&&window.location.href.includes("edit-application")?t("CS_TRADE_UPDATE_APPLICATION_SUCCESS"):t("CS_TRADE_APPLICATION_SUCCESS"):e.isLoading?window.location.href.includes("renew-trade")&&window.location.href.includes("edit-application")?t("CS_TRADE_UPDATE_APPLICATION_PENDING"):t("CS_TRADE_APPLICATION_SUCCESS"):e.isSuccess?void 0:window.location.href.includes("renew-trade")&&window.location.href.includes("edit-application")?t("CS_TRADE_UPDATE_APPLICATION_FAILED"):t("CS_TRADE_APPLICATION_FAILED")},ot=e=>{var l,i;return n.createElement(t.Banner,{message:it(e),applicationNumber:null===(l=e.data)||void 0===l||null===(i=l.Licenses[0])||void 0===i?void 0:i.applicationNumber,info:e.isSuccess?e.t("TL_REF_NO_LABEL"):"",successful:e.isSuccess})};function rt(e){var t=this.__data__=new G(e);this.size=t.size}rt.prototype.clear=function(){this.__data__=new G,this.size=0},rt.prototype.delete=function(e){var t=this.__data__,l=t.delete(e);return this.size=t.size,l},rt.prototype.get=function(e){return this.__data__.get(e)},rt.prototype.has=function(e){return this.__data__.has(e)},rt.prototype.set=function(e,t){var l=this.__data__;if(l instanceof G){var n=l.__data__;if(!q||n.length<199)return n.push([e,t]),this.size=++l.size,this;l=this.__data__=new Z(n)}return l.set(e,t),this.size=l.size,this};var at=rt,ut=function(e,t,l,n){var i=!l;l||(l={});for(var o=-1,r=t.length;++o<r;){var a=t[o],u=n?n(l[a],e[a],a,l,e):void 0;void 0===u&&(u=e[a]),i?ve(l,a,u):me(l,a,u)}return l},dt=function(e){return A(e)&&"[object Arguments]"==L(e)},st=Object.prototype,ct=st.hasOwnProperty,vt=st.propertyIsEnumerable,pt=dt(function(){return arguments}())?dt:function(e){return A(e)&&ct.call(e,"callee")&&!vt.call(e,"callee")},mt=function(){return!1},Et=s(function(e,t){var l=t&&!t.nodeType&&t,n=l&&e&&!e.nodeType&&e,i=n&&n.exports===l?m.Buffer:void 0;e.exports=(i?i.isBuffer:void 0)||mt}),ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},_t={};_t["[object Float32Array]"]=_t["[object Float64Array]"]=_t["[object Int8Array]"]=_t["[object Int16Array]"]=_t["[object Int32Array]"]=_t["[object Uint8Array]"]=_t["[object Uint8ClampedArray]"]=_t["[object Uint16Array]"]=_t["[object Uint32Array]"]=!0,_t["[object Arguments]"]=_t["[object Array]"]=_t["[object ArrayBuffer]"]=_t["[object Boolean]"]=_t["[object DataView]"]=_t["[object Date]"]=_t["[object Error]"]=_t["[object Function]"]=_t["[object Map]"]=_t["[object Number]"]=_t["[object Object]"]=_t["[object RegExp]"]=_t["[object Set]"]=_t["[object String]"]=_t["[object WeakMap]"]=!1;var yt=function(e){return function(t){return e(t)}},Tt=s(function(e,t){var l=t&&!t.nodeType&&t,n=l&&e&&!e.nodeType&&e,i=n&&n.exports===l&&v.process,o=function(){try{return n&&n.require&&n.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),gt=Tt&&Tt.isTypedArray,St=gt?yt(gt):function(e){return A(e)&&ft(e.length)&&!!_t[L(e)]},ht=Object.prototype.hasOwnProperty,Lt=function(e,t){var l=u(e),n=!l&&pt(e),i=!l&&!n&&Et(e),o=!l&&!n&&!i&&St(e),r=l||n||i||o,a=r?function(e,t){for(var l=-1,n=Array(e);++l<e;)n[l]=t(l);return n}(e.length,String):[],d=a.length;for(var s in e)!t&&!ht.call(e,s)||r&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||fe(s,d))||a.push(s);return a},At=Object.prototype,bt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||At)},Nt=function(e,t){return function(l){return e(t(l))}},Ct=Nt(Object.keys,Object),Dt=Object.prototype.hasOwnProperty,It=function(e){return null!=e&&ft(e.length)&&!O(e)},Ot=function(e){return It(e)?Lt(e):function(e){if(!bt(e))return Ct(e);var t=[];for(var l in Object(e))Dt.call(e,l)&&"constructor"!=l&&t.push(l);return t}(e)},wt=Object.prototype.hasOwnProperty,Rt=function(e){return It(e)?Lt(e,!0):function(e){if(!I(e))return function(e){var t=[];if(null!=e)for(var l in Object(e))t.push(l);return t}(e);var t=bt(e),l=[];for(var n in e)("constructor"!=n||!t&&wt.call(e,n))&&l.push(n);return l}(e)},Pt=s(function(e,t){var l=t&&!t.nodeType&&t,n=l&&e&&!e.nodeType&&e,i=n&&n.exports===l?m.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var l=e.length,n=o?o(l):new e.constructor(l);return e.copy(n),n}}),xt=function(){return[]},Mt=Object.prototype.propertyIsEnumerable,kt=Object.getOwnPropertySymbols,Ut=kt?function(e){return null==e?[]:(e=Object(e),function(t,l){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var a=t[n];Mt.call(e,a)&&(r[o++]=a)}return r}(kt(e)))}:xt,Bt=function(e,t){for(var l=-1,n=t.length,i=e.length;++l<n;)e[i+l]=t[l];return e},Ft=Nt(Object.getPrototypeOf,Object),Ht=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Bt(t,Ut(e)),e=Ft(e);return t}:xt,Wt=function(e,t,l){var n=t(e);return u(e)?n:Bt(n,l(e))},Vt=function(e){return Wt(e,Ot,Ut)},jt=function(e){return Wt(e,Rt,Ht)},Yt=U(m,"DataView"),Kt=U(m,"Promise"),zt=U(m,"Set"),Gt=U(m,"WeakMap"),qt=x(Yt),$t=x(q),Xt=x(Kt),Zt=x(zt),Qt=x(Gt),Jt=L;(Yt&&"[object DataView]"!=Jt(new Yt(new ArrayBuffer(1)))||q&&"[object Map]"!=Jt(new q)||Kt&&"[object Promise]"!=Jt(Kt.resolve())||zt&&"[object Set]"!=Jt(new zt)||Gt&&"[object WeakMap]"!=Jt(new Gt))&&(Jt=function(e){var t=L(e),l="[object Object]"==t?e.constructor:void 0,n=l?x(l):"";if(n)switch(n){case qt:return"[object DataView]";case $t:return"[object Map]";case Xt:return"[object Promise]";case Zt:return"[object Set]";case Qt:return"[object WeakMap]"}return t});var el=Jt,tl=Object.prototype.hasOwnProperty,ll=m.Uint8Array,nl=function(e){var t=new e.constructor(e.byteLength);return new ll(t).set(new ll(e)),t},il=/\w*$/,ol=E?E.prototype:void 0,rl=ol?ol.valueOf:void 0,al=Object.create,ul=function(){function e(){}return function(t){if(!I(t))return{};if(al)return al(t);e.prototype=t;var l=new e;return e.prototype=void 0,l}}(),dl=Tt&&Tt.isMap,sl=dl?yt(dl):function(e){return A(e)&&"[object Map]"==el(e)},cl=Tt&&Tt.isSet,vl=cl?yt(cl):function(e){return A(e)&&"[object Set]"==el(e)},pl={};pl["[object Arguments]"]=pl["[object Array]"]=pl["[object ArrayBuffer]"]=pl["[object DataView]"]=pl["[object Boolean]"]=pl["[object Date]"]=pl["[object Float32Array]"]=pl["[object Float64Array]"]=pl["[object Int8Array]"]=pl["[object Int16Array]"]=pl["[object Int32Array]"]=pl["[object Map]"]=pl["[object Number]"]=pl["[object Object]"]=pl["[object RegExp]"]=pl["[object Set]"]=pl["[object String]"]=pl["[object Symbol]"]=pl["[object Uint8Array]"]=pl["[object Uint8ClampedArray]"]=pl["[object Uint16Array]"]=pl["[object Uint32Array]"]=!0,pl["[object Error]"]=pl["[object Function]"]=pl["[object WeakMap]"]=!1;var ml=function e(t,l,n,i,o,r){var a,d=1&l,s=2&l,c=4&l;if(n&&(a=o?n(t,i,o,r):n(t)),void 0!==a)return a;if(!I(t))return t;var v=u(t);if(v){if(a=function(e){var t=e.length,l=new e.constructor(t);return t&&"string"==typeof e[0]&&tl.call(e,"index")&&(l.index=e.index,l.input=e.input),l}(t),!d)return function(e,t){var l=-1,n=e.length;for(t||(t=Array(n));++l<n;)t[l]=e[l];return t}(t,a)}else{var p=el(t),m="[object Function]"==p||"[object GeneratorFunction]"==p;if(Et(t))return Pt(t,d);if("[object Object]"==p||"[object Arguments]"==p||m&&!o){if(a=s||m?{}:function(e){return"function"!=typeof e.constructor||bt(e)?{}:ul(Ft(e))}(t),!d)return s?function(e,t){return ut(e,Ht(e),t)}(t,function(e,t){return e&&ut(t,Rt(t),e)}(a,t)):function(e,t){return ut(e,Ut(e),t)}(t,function(e,t){return e&&ut(t,Ot(t),e)}(a,t))}else{if(!pl[p])return o?t:{};a=function(e,t,l){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return nl(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var l=t?nl(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.byteLength)}(e,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var l=t?nl(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.length)}(e,l);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,il.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new n;case"[object Symbol]":return rl?Object(rl.call(e)):{}}}(t,p,d)}}r||(r=new at);var E=r.get(t);if(E)return E;r.set(t,a),vl(t)?t.forEach(function(i){a.add(e(i,l,n,i,t,r))}):sl(t)&&t.forEach(function(i,o){a.set(o,e(i,l,n,o,t,r))});var f=v?void 0:(c?s?jt:Vt:s?Rt:Ot)(t);return function(e,t){for(var l=-1,n=null==e?0:e.length;++l<n&&!1!==t(e[l],l););}(f||t,function(i,o){f&&(i=t[o=i]),me(a,o,e(i,l,n,o,t,r))}),a},El=function(e){return ml(e,5)},fl=function(e,t){return function(){for(var l=new Array(arguments.length),n=0;n<l.length;n++)l[n]=arguments[n];return e.apply(t,l)}},_l=Object.prototype.toString;function yl(e){return"[object Array]"===_l.call(e)}function Tl(e){return void 0===e}function gl(e){return null!==e&&"object"==typeof e}function Sl(e){if("[object Object]"!==_l.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function hl(e){return"[object Function]"===_l.call(e)}function Ll(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),yl(e))for(var l=0,n=e.length;l<n;l++)t.call(null,e[l],l,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var Al={isArray:yl,isArrayBuffer:function(e){return"[object ArrayBuffer]"===_l.call(e)},isBuffer:function(e){return null!==e&&!Tl(e)&&null!==e.constructor&&!Tl(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:gl,isPlainObject:Sl,isUndefined:Tl,isDate:function(e){return"[object Date]"===_l.call(e)},isFile:function(e){return"[object File]"===_l.call(e)},isBlob:function(e){return"[object Blob]"===_l.call(e)},isFunction:hl,isStream:function(e){return gl(e)&&hl(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Ll,merge:function e(){var t={};function l(l,n){t[n]=Sl(t[n])&&Sl(l)?e(t[n],l):Sl(l)?e({},l):yl(l)?l.slice():l}for(var n=0,i=arguments.length;n<i;n++)Ll(arguments[n],l);return t},extend:function(e,t,l){return Ll(t,function(t,n){e[n]=l&&"function"==typeof t?fl(t,l):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function bl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Nl=function(e,t,l){if(!t)return e;var n;if(l)n=l(t);else if(Al.isURLSearchParams(t))n=t.toString();else{var i=[];Al.forEach(t,function(e,t){null!=e&&(Al.isArray(e)?t+="[]":e=[e],Al.forEach(e,function(e){Al.isDate(e)?e=e.toISOString():Al.isObject(e)&&(e=JSON.stringify(e)),i.push(bl(t)+"="+bl(e))}))}),n=i.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function Cl(){this.handlers=[]}Cl.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Cl.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Cl.prototype.forEach=function(e){Al.forEach(this.handlers,function(t){null!==t&&e(t)})};var Dl=Cl,Il=function(e,t,l){return Al.forEach(l,function(l){e=l(e,t)}),e},Ol=function(e){return!(!e||!e.__CANCEL__)},wl=function(e,t){Al.forEach(e,function(l,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=l,delete e[n])})},Rl=function(e,t,l,n,i){return function(e,t,l,n,i){return e.config=t,l&&(e.code=l),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,l,n,i)},Pl=Al.isStandardBrowserEnv()?{write:function(e,t,l,n,i,o){var r=[];r.push(e+"="+encodeURIComponent(t)),Al.isNumber(l)&&r.push("expires="+new Date(l).toGMTString()),Al.isString(n)&&r.push("path="+n),Al.isString(i)&&r.push("domain="+i),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},xl=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ml=Al.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a");function n(e){var n=e;return t&&(l.setAttribute("href",n),n=l.href),l.setAttribute("href",n),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:"/"===l.pathname.charAt(0)?l.pathname:"/"+l.pathname}}return e=n(window.location.href),function(t){var l=Al.isString(t)?n(t):t;return l.protocol===e.protocol&&l.host===e.host}}():function(){return!0},kl={"Content-Type":"application/x-www-form-urlencoded"};function Ul(e,t){!Al.isUndefined(e)&&Al.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Bl,Fl={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Bl=function(e){return new Promise(function(t,l){var n=e.data,i=e.headers;Al.isFormData(n)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var r=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(r+":"+a)}var u,d,s=(d=e.url,(u=e.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(d)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,d):d);if(o.open(e.method.toUpperCase(),Nl(s,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var n,i,r,a,u,d="getAllResponseHeaders"in o?(n=o.getAllResponseHeaders(),u={},n?(Al.forEach(n.split("\n"),function(e){if(a=e.indexOf(":"),i=Al.trim(e.substr(0,a)).toLowerCase(),r=Al.trim(e.substr(a+1)),i){if(u[i]&&xl.indexOf(i)>=0)return;u[i]="set-cookie"===i?(u[i]?u[i]:[]).concat([r]):u[i]?u[i]+", "+r:r}}),u):u):null;!function(e,t,l){var n=l.config.validateStatus;l.status&&n&&!n(l.status)?t(Rl("Request failed with status code "+l.status,l.config,null,l.request,l)):e(l)}(t,l,{data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:d,config:e,request:o}),o=null}},o.onabort=function(){o&&(l(Rl("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){l(Rl("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(Rl(t,e,"ECONNABORTED",o)),o=null},Al.isStandardBrowserEnv()){var c=(e.withCredentials||Ml(s))&&e.xsrfCookieName?Pl.read(e.xsrfCookieName):void 0;c&&(i[e.xsrfHeaderName]=c)}if("setRequestHeader"in o&&Al.forEach(i,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)}),Al.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),l(e),o=null)}),n||(n=null),o.send(n)})}),Bl),transformRequest:[function(e,t){return wl(t,"Accept"),wl(t,"Content-Type"),Al.isFormData(e)||Al.isArrayBuffer(e)||Al.isBuffer(e)||Al.isStream(e)||Al.isFile(e)||Al.isBlob(e)?e:Al.isArrayBufferView(e)?e.buffer:Al.isURLSearchParams(e)?(Ul(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Al.isObject(e)?(Ul(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Al.forEach(["delete","get","head"],function(e){Fl.headers[e]={}}),Al.forEach(["post","put","patch"],function(e){Fl.headers[e]=Al.merge(kl)});var Hl=Fl;function Wl(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Vl=function(e){return Wl(e),e.headers=e.headers||{},e.data=Il(e.data,e.headers,e.transformRequest),e.headers=Al.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Al.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Hl.adapter)(e).then(function(t){return Wl(e),t.data=Il(t.data,t.headers,e.transformResponse),t},function(t){return Ol(t)||(Wl(e),t&&t.response&&(t.response.data=Il(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},jl=function(e,t){t=t||{};var l={},n=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function a(e,t){return Al.isPlainObject(e)&&Al.isPlainObject(t)?Al.merge(e,t):Al.isPlainObject(t)?Al.merge({},t):Al.isArray(t)?t.slice():t}function u(n){Al.isUndefined(t[n])?Al.isUndefined(e[n])||(l[n]=a(void 0,e[n])):l[n]=a(e[n],t[n])}Al.forEach(n,function(e){Al.isUndefined(t[e])||(l[e]=a(void 0,t[e]))}),Al.forEach(i,u),Al.forEach(o,function(n){Al.isUndefined(t[n])?Al.isUndefined(e[n])||(l[n]=a(void 0,e[n])):l[n]=a(void 0,t[n])}),Al.forEach(r,function(n){n in t?l[n]=a(e[n],t[n]):n in e&&(l[n]=a(void 0,e[n]))});var d=n.concat(i).concat(o).concat(r),s=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===d.indexOf(e)});return Al.forEach(s,u),l};function Yl(e){this.defaults=e,this.interceptors={request:new Dl,response:new Dl}}Yl.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=jl(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=[Vl,void 0],l=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)l=l.then(t.shift(),t.shift());return l},Yl.prototype.getUri=function(e){return e=jl(this.defaults,e),Nl(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Al.forEach(["delete","get","head","options"],function(e){Yl.prototype[e]=function(t,l){return this.request(jl(l||{},{method:e,url:t,data:(l||{}).data}))}}),Al.forEach(["post","put","patch"],function(e){Yl.prototype[e]=function(t,l,n){return this.request(jl(n||{},{method:e,url:t,data:l}))}});var Kl=Yl;function zl(e){this.message=e}zl.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},zl.prototype.__CANCEL__=!0;var Gl=zl;function ql(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var l=this;e(function(e){l.reason||(l.reason=new Gl(e),t(l.reason))})}ql.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ql.source=function(){var e;return{token:new ql(function(t){e=t}),cancel:e}};var $l=ql;function Xl(e){var t=new Kl(e),l=fl(Kl.prototype.request,t);return Al.extend(l,Kl.prototype,t),Al.extend(l,t),l}var Zl=Xl(Hl);Zl.Axios=Kl,Zl.create=function(e){return Xl(jl(Zl.defaults,e))},Zl.Cancel=Gl,Zl.CancelToken=$l,Zl.isCancel=Ol,Zl.all=function(e){return Promise.all(e)},Zl.spread=function(e){return function(t){return e.apply(null,t)}},Zl.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var Ql=Zl;Ql.default=Zl;var Jl=Ql;Jl.interceptors.response.use(e=>e,e=>{var t,l;const n=window.location.pathname.split("/").includes("employee");if(null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&l.Errors)for(const t of e.response.data.Errors){var i,o,r,a;t.message.includes("InvalidAccessTokenException")?(localStorage.clear(),sessionStorage.clear(),window.location.href=(n?"/digit-ui/employee/user/login":"/digit-ui/citizen/login")+"?from="+encodeURIComponent(window.location.pathname+window.location.search)):null!=t&&null!==(i=t.message)&&void 0!==i&&null!==(o=i.toLowerCase())&&void 0!==o&&o.includes("internal server error")||null!=t&&null!==(r=t.message)&&void 0!==r&&null!==(a=r.toLowerCase())&&void 0!==a&&a.includes("some error occured")?window.location.href=(n?"/digit-ui/employee/user/error":"/digit-ui/citizen/error")+"?type=maintenance&from="+encodeURIComponent(window.location.pathname+window.location.search):t.message.includes("ZuulRuntimeException")&&(window.location.href=(n?"/digit-ui/employee/user/error":"/digit-ui/citizen/error")+"?type=notfound&from="+encodeURIComponent(window.location.pathname+window.location.search))}throw e}),window.Digit=window.Digit||{},window.Digit={...window.Digit,RequestCache:window.Digit.RequestCache||{}};const en=e=>{let{tenantId:t,filters:l}=e;return function(e){let{method:t="POST",url:l,data:n={},headers:i={},useCache:o=!1,params:r={},auth:a,urlParams:u={},userService:d,locale:s=!0,authHeader:c=!1,setTimeParam:v=!0,userDownload:p=!1,noRequestInfo:m=!1,multipartFormData:E=!1,multipartData:f={},reqTimestamp:_=!1,plainAccessRequest:y=null}=e;try{var T,g;let e=!1;function S(l){var a,u;if(e)return l;const d="citizen"===Digit.SessionStorage.get("userType")?Digit.ULBService.getStateId():Digit.ULBService.getCurrentTenantId()||Digit.ULBService.getStateId();return!r.tenantId&&null!==(a=window)&&void 0!==a&&null!==(u=a.globalConfigs)&&void 0!==u&&u.getConfig("ENABLE_SINGLEINSTANCE")&&(r.tenantId=d),Promise.resolve(Jl(p?{method:t,url:D,data:n,params:r,headers:i,responseType:"arraybuffer"}:{method:t,url:D,data:n,params:r,headers:i})).then(function(e){var t;if(p)return e;const l=(null==e?void 0:e.data)||(null==e||null===(t=e.response)||void 0===t?void 0:t.data)||{};return o&&null!=e&&e.data&&0!==Object.keys(l).length&&(window.Digit.RequestCache[C]=l),l})}if("POST"===t.toUpperCase()){var h;const e=(new Date).getTime();n.RequestInfo={apiId:"Rainmaker"},(a||null!==(h=Digit.UserService.getUser())&&void 0!==h&&h.access_token)&&(n.RequestInfo={...n.RequestInfo,authToken:(null===(b=Digit.UserService.getUser())||void 0===b?void 0:b.access_token)||null}),d&&(n.RequestInfo={...n.RequestInfo,userInfo:null===(A=Digit.UserService.getUser())||void 0===A?void 0:A.info}),s&&(n.RequestInfo={...n.RequestInfo,msgId:e+"|"+Digit.StoreData.getCurrentLanguage()}),m&&delete n.RequestInfo,_&&(n.RequestInfo={...n.RequestInfo,ts:Number(e)});const t=Digit.Utils.getPrivacyObject();!t||l.includes("/edcr/rest/dcr/")||m||(n.RequestInfo={...n.RequestInfo,plainAccessRequest:{...t}}),y&&(n.RequestInfo={...n.RequestInfo,plainAccessRequest:y})}const N={"Content-Type":"application/json",Accept:null!==(T=window)&&void 0!==T&&null!==(g=T.globalConfigs)&&void 0!==g&&g.getConfig("ENABLE_SINGLEINSTANCE")?"application/pdf,application/json":"application/pdf"};c&&(i={...i,"auth-token":(null===(L=Digit.UserService.getUser())||void 0===L?void 0:L.access_token)||null}),p&&(i={...i,...N});let C="";if(o){C=t.toUpperCase()+"."+l+"."+btoa(escape(JSON.stringify(r,null,0)))+"."+btoa(escape(JSON.stringify(n,null,0)));const e=window.Digit.RequestCache[C];if(e)return Promise.resolve(e)}else v&&(r._=Date.now());let D=l.split("/").map(e=>{var t;let l=null===(t=e.split(":"))||void 0===t?void 0:t[1];return u[l]?u[l]:e}).join("/");const I=function(){var l;if(E)return Promise.resolve(Jl({method:t,url:D,data:f.data,params:r,headers:{"Content-Type":"multipart/form-data","auth-token":(null===(l=Digit.UserService.getUser())||void 0===l?void 0:l.access_token)||null}})).then(function(t){return e=!0,t})}();return Promise.resolve(I&&I.then?I.then(S):S(I))}catch(e){return Promise.reject(e)}var L,A,b}({url:"/tl-services/v1/_search",useCache:!1,method:"POST",auth:!0,userService:!1,params:{tenantId:t,...l}})},tn=function(e,t,l){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===l&&(l=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,l);return e},ln=e=>{if(e){const t=new Date(e);let l=t.getMonth()+1,n=t.getDate(),i=t.getFullYear();return l=(l>9?"":"0")+l,n=(n>9?"":"0")+n,n+"/"+l+"/"+i}return null},nn={all:function(e,t){void 0===t&&(t={});try{return Promise.resolve(en({tenantId:e,filters:t}))}catch(e){return Promise.reject(e)}},application:function(e,t){void 0===t&&(t={});try{return Promise.resolve(en({tenantId:e,filters:t})).then(function(e){return e.Licenses[0]})}catch(e){return Promise.reject(e)}},numberOfApplications:function(e,t){void 0===t&&(t={});try{return Promise.resolve(en({tenantId:e,filters:t})).then(function(e){return e.Licenses})}catch(e){return Promise.reject(e)}},applicationDetails:function(e,t,l,n){try{return Promise.resolve(nn.application(t,{applicationNumber:l})).then(function(l){var n,i,o,r;function a(n){function i(){var t,i,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne,ie,oe,re;let ae="";var ue;n&&null!=n&&n.Properties.length&&(ae=((e,t)=>(null!=e&&e.doorNo?(null==e?void 0:e.doorNo)+", ":"")+" "+(null!=e&&e.street?(null==e?void 0:e.street)+", ":"")+(null!=e&&e.landmark?(null==e?void 0:e.landmark)+", ":"")+t(Digit.Utils.pt.getMohallaLocale(null==e?void 0:e.locality.code,null==e?void 0:e.tenantId))+", "+t(Digit.Utils.pt.getCityLocale(null==e?void 0:e.tenantId))+(null!=e&&e.pincode&&t(null==e?void 0:e.pincode)?", "+e.pincode:" "))(null==n||null===(ue=n.Properties[0])||void 0===ue?void 0:ue.address,e));let de=[],se={title:" ",asSectionHeader:!1,values:[{title:"TL_LOCALIZATION_APPLICATION_NO",value:null!=l&&l.applicationNumber?""+(null==l?void 0:l.applicationNumber):"NA"},{title:"TL_APPLICATION_CHALLAN_LABEL",value:null!=l&&null!==(t=l.tradeLicenseDetail)&&void 0!==t&&t.channel?"TL_CHANNEL_"+(null==l||null===(i=l.tradeLicenseDetail)||void 0===i?void 0:i.channel):"NA"}]};null!=l&&l.licenseNumber&&(null==se||null===(r=se.values.filter(e=>"TL_LOCALIZATION_LICENSE_NO"===(null==e?void 0:e.title)))||void 0===r?void 0:r.length)<=0&&(null==se||se.values.push({title:"TL_LOCALIZATION_LICENSE_NO",value:null!=l&&l.licenseNumber?""+(null==l?void 0:l.licenseNumber):"NA"}));const ce={title:"TL_COMMON_TR_DETAILS",asSectionHeader:!0,values:[{title:"TL_FINANCIAL_YEAR_LABEL",value:null!=l&&l.financialYear?"FY"+(null==l?void 0:l.financialYear):"NA"},{title:"TL_NEW_TRADE_DETAILS_LIC_TYPE_LABEL",value:null!=l&&l.licenseType?"TRADELICENSE_LICENSETYPE_"+(null==l?void 0:l.licenseType):"NA"},{title:"TL_COMMON_TABLE_COL_TRD_NAME",value:null==l?void 0:l.tradeName},{title:"TL_NEW_TRADE_DETAILS_STRUCT_TYPE_LABEL",value:null!=l&&null!==(a=l.tradeLicenseDetail)&&void 0!==a&&a.structureType?"COMMON_MASTERS_STRUCTURETYPE_"+(null==l||null===(u=l.tradeLicenseDetail)||void 0===u||null===(d=u.structureType)||void 0===d?void 0:d.split(".")[0]):"NA"},{title:"TL_NEW_TRADE_DETAILS_STRUCT_SUB_TYPE_LABEL",value:null!=l&&null!==(s=l.tradeLicenseDetail)&&void 0!==s&&s.structureType?"COMMON_MASTERS_STRUCTURETYPE_"+tn(null==l||null===(c=l.tradeLicenseDetail)||void 0===c?void 0:c.structureType,".","_"):"NA"},{title:"TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL",value:null!=l&&l.commencementDate?ln(null==l?void 0:l.commencementDate):"NA"},{title:"TL_NEW_GST_NUMBER_LABEL",value:(null==l||null===(v=l.tradeLicenseDetail)||void 0===v||null===(p=v.additionalDetail)||void 0===p?void 0:p.gstNo)||(null==l||null===(m=l.tradeLicenseDetail)||void 0===m||null===(E=m.additionalDetail)||void 0===E?void 0:E.tradeGstNo)||"NA"},{title:"TL_NEW_OPERATIONAL_SQ_FT_AREA_LABEL",value:(null==l||null===(f=l.tradeLicenseDetail)||void 0===f?void 0:f.operationalArea)||"NA"},{title:"TL_NEW_NUMBER_OF_EMPLOYEES_LABEL",value:(null==l||null===(_=l.tradeLicenseDetail)||void 0===_?void 0:_.noOfEmployees)||"NA"}]},ve={title:"TL_TRADE_UNITS_HEADER",additionalDetails:{units:null==l||null===(y=l.tradeLicenseDetail)||void 0===y||null===(T=y.tradeUnits)||void 0===T?void 0:T.map((e,t)=>{var l,n;let i=tn(null==e?void 0:e.tradeType,".","_");return i=tn(i,"-","_"),{title:"TL_UNIT_HEADER",values:[{title:"TRADELICENSE_TRADECATEGORY_LABEL",value:null!=e&&e.tradeType?"TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[0]):"NA"},{title:"TRADELICENSE_TRADETYPE_LABEL",value:null!=e&&e.tradeType?"TRADELICENSE_TRADETYPE_"+(null==e||null===(n=e.tradeType)||void 0===n?void 0:n.split(".")[1]):"NA"},{title:"TL_NEW_TRADE_SUB_TYPE_LABEL",value:i?"TRADELICENSE_TRADETYPE_"+i:"NA"},{title:"TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER",value:(null==e?void 0:e.uom)||"NA"},{title:"TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL",value:(null==e?void 0:e.uomValue)||"NA"}]}})}},pe={title:"TL_NEW_TRADE_DETAILS_HEADER_ACC",additionalDetails:{accessories:null==l||null===(g=l.tradeLicenseDetail)||void 0===g||null===(S=g.accessories)||void 0===S?void 0:S.map((e,t)=>{let l="NA";return null!=e&&e.accessoryCategory&&(l=tn(null==e?void 0:e.accessoryCategory,".","_"),l="TRADELICENSE_ACCESSORIESCATEGORY_"+tn(l,"-","_")),{title:"TL_ACCESSORY_LABEL",values:[{title:"TL_NEW_TRADE_DETAILS_ACC_LABEL",value:l},{title:"TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER",value:(null==e?void 0:e.uom)||"NA"},{title:"TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL",value:(null==e?void 0:e.uomValue)||"NA"},{title:"TL_ACCESSORY_COUNT_LABEL",value:(null==e?void 0:e.count)||"NA"}]}})}},me=Array.isArray(null==n||null===(h=n.Properties)||void 0===h||null===(L=h[0])||void 0===L?void 0:L.owners)?null==n||null===(A=n.Properties)||void 0===A||null===(b=A[0])||void 0===b?void 0:b.owners.slice().reverse():[],Ee={title:"PT_DETAILS",values:[{title:"TL_PROPERTY_ID",value:(null==n||null===(N=n.Properties)||void 0===N||null===(C=N[0])||void 0===C?void 0:C.propertyId)||"NA"},{title:"PT_OWNER_NAME",value:(null===(D=me[0])||void 0===D?void 0:D.name)||"NA"},{title:"PROPERTY_ADDRESS",value:ae||"NA"},{title:"TL_VIEW_PROPERTY_DETAIL",to:"/digit-ui/employee/commonpt/view-property?propertyId="+(null==n||null===(I=n.Properties)||void 0===I||null===(O=I[0])||void 0===O?void 0:O.propertyId)+"&tenantId="+(null==n||null===(w=n.Properties)||void 0===w||null===(R=w[0])||void 0===R?void 0:R.tenantId)+"&from=TL_APPLICATION_DETAILS_LABEL",value:"",isLink:!0}]},fe=El(null==l||null===(P=l.tradeLicenseDetail)||void 0===P||null===(x=P.address)||void 0===x?void 0:x.city),_e=El(null==l||null===(M=l.tradeLicenseDetail)||void 0===M||null===(k=M.address)||void 0===k||null===(U=k.locality)||void 0===U?void 0:U.code),ye={title:"TL_CHECK_ADDRESS",values:[{title:"CORE_COMMON_PINCODE",value:(null==l||null===(B=l.tradeLicenseDetail)||void 0===B||null===(F=B.address)||void 0===F?void 0:F.pincode)||"NA"},{title:"MYCITY_CODE_LABEL",value:(null==l||null===(H=l.tradeLicenseDetail)||void 0===H||null===(W=H.address)||void 0===W?void 0:W.city)||"NA"},{title:"TL_LOCALIZATION_LOCALITY",value:tn(null==fe?void 0:fe.toUpperCase(),".","_")+"_REVENUE_"+_e},{title:"TL_LOCALIZATION_BUILDING_NO",value:(null==l||null===(V=l.tradeLicenseDetail)||void 0===V||null===(j=V.address)||void 0===j?void 0:j.doorNo)||"NA"},{title:"TL_LOCALIZATION_STREET_NAME",value:(null==l||null===(Y=l.tradeLicenseDetail)||void 0===Y||null===(K=Y.address)||void 0===K?void 0:K.street)||"NA"}]},Te=(null==l||null===(z=l.tradeLicenseDetail)||void 0===z||null===(G=z.owners)||void 0===G?void 0:G.length)||1,ge=null!=l&&null!==(q=l.tradeLicenseDetail)&&void 0!==q&&q.subOwnerShipCategory.includes("INSTITUTIONAL")?{title:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",additionalDetails:{owners:null==l||null===($=l.tradeLicenseDetail)||void 0===$||null===(X=$.owners)||void 0===X?void 0:X.map((e,t)=>{var n,i,o,r,a,u,d,s,c,v,p,m,E,f;let _=null!=l&&null!==(n=l.tradeLicenseDetail)&&void 0!==n&&n.subOwnerShipCategory?"COMMON_MASTERS_OWNERSHIPCATEGORY_"+tn(null==l||null===(i=l.tradeLicenseDetail)||void 0===i?void 0:i.subOwnerShipCategory,".","_"):"NA";return{title:Number(Te)>1?"TL_PAYMENT_PAID_BY_PLACEHOLDER":"",values:[{title:"TL_NEW_OWNER_DETAILS_OWNERSHIP_TYPE_LABEL",value:_},{title:"TL_INSTITUTION_NAME_LABEL",value:(null==l||null===(o=l.tradeLicenseDetail)||void 0===o||null===(r=o.institution)||void 0===r?void 0:r.instituionName)||"NA"},{title:"TL_NEW_OWNER_DESIG_LABEL",value:(null==l||null===(a=l.tradeLicenseDetail)||void 0===a||null===(u=a.institution)||void 0===u?void 0:u.designation)||"NA"},{title:"TL_TELEPHONE_NUMBER_LABEL",value:null!=l&&null!==(d=l.tradeLicenseDetail)&&void 0!==d&&null!==(s=d.institution)&&void 0!==s&&s.contactNo||""!==(null==l||null===(c=l.tradeLicenseDetail)||void 0===c||null===(v=c.institution)||void 0===v?void 0:v.contactNo)?null==l||null===(p=l.tradeLicenseDetail)||void 0===p||null===(m=p.institution)||void 0===m?void 0:m.contactNo:"NA"},{title:"TL_OWNER_S_MOBILE_NUM_LABEL",value:(null==e?void 0:e.mobileNumber)||"NA"},{title:"TL_NEW_OWNER_DETAILS_NAME_LABEL",value:(null==l||null===(E=l.tradeLicenseDetail)||void 0===E||null===(f=E.institution)||void 0===f?void 0:f.name)||"NA"},{title:"TL_NEW_OWNER_DETAILS_EMAIL_LABEL",value:null!=e&&e.emailId||""!==(null==e?void 0:e.emailId)?null==e?void 0:e.emailId:"NA"}]}}),documents:[{title:"PT_COMMON_DOCS",values:null==l||null===(Z=l.tradeLicenseDetail)||void 0===Z||null===(Q=Z.applicationDocuments)||void 0===Q?void 0:Q.map(e=>({title:"TL_NEW_"+(null==e?void 0:e.documentType.replace(".","_")),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId}))}]}}:{title:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",additionalDetails:{owners:null==l||null===(J=l.tradeLicenseDetail)||void 0===J?void 0:J.owners.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}).map((e,t)=>{var n,i;let o=null!=l&&null!==(n=l.tradeLicenseDetail)&&void 0!==n&&n.subOwnerShipCategory?"COMMON_MASTERS_OWNERSHIPCATEGORY_"+tn(null==l||null===(i=l.tradeLicenseDetail)||void 0===i?void 0:i.subOwnerShipCategory,".","_"):"NA";return{title:Number(Te)>1?"TL_PAYMENT_PAID_BY_PLACEHOLDER":"",values:[{title:"TL_NEW_OWNER_DETAILS_OWNERSHIP_TYPE_LABEL",value:o},{title:"TL_OWNER_S_NAME_LABEL",value:(null==e?void 0:e.name)||"NA"},{title:"TL_OWNER_S_MOBILE_NUM_LABEL",value:(null==e?void 0:e.mobileNumber)||"NA"},{title:"TL_GUARDIAN_S_NAME_LABEL",value:(null==e?void 0:e.fatherOrHusbandName)||"NA"},{title:"TL_RELATIONSHIP_WITH_GUARDIAN_LABEL",value:(null==e?void 0:e.relationship)||"NA"},{title:"TL_NEW_OWNER_DETAILS_GENDER_LABEL",value:(null==e?void 0:e.gender)||"NA"},{title:"TL_NEW_OWNER_DETAILS_EMAIL_LABEL",value:(null==e?void 0:e.emailId)||"NA"},{title:"TL_OWNER_SPECIAL_CATEGORY",value:null!=e&&e.ownerType?"COMMON_MASTERS_OWNERTYPE_"+(null==e?void 0:e.ownerType):"NA"},{title:"TL_NEW_OWNER_DETAILS_ADDR_LABEL",value:(null==e?void 0:e.permanentAddress)||"NA"}]}}),documents:[{title:"PT_COMMON_DOCS",values:null==l||null===(ee=l.tradeLicenseDetail)||void 0===ee||null===(te=ee.applicationDocuments)||void 0===te?void 0:te.map(e=>({title:"TL_NEW_"+(null==e?void 0:e.documentType.replace(".","_")),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId}))}]}};if("NewTL"==(null==l?void 0:l.workflowCode)&&"APPROVED"!==(null==l?void 0:l.status)){var Se,he;const e={title:"",values:[{title:"TL_COMMON_TABLE_COL_APP_NO",value:(null==l?void 0:l.applicationNumber)||"NA"},{title:"TL_APPLICATION_CHALLAN_LABEL",value:(null==l||null===(Se=l.tradeLicenseDetail)||void 0===Se?void 0:Se.channel)&&"TL_CHANNEL_"+(null==l||null===(he=l.tradeLicenseDetail)||void 0===he?void 0:he.channel)||"NA"}]};l&&de.push(e)}return l&&de.push(se),l&&de.push(ce),(null==l||null===(le=l.tradeLicenseDetail)||void 0===le?void 0:le.tradeUnits)&&de.push(ve),(null==l||null===(ne=l.tradeLicenseDetail)||void 0===ne?void 0:ne.accessories)&&de.push(pe),(null==n||null===(ie=n.Properties)||void 0===ie?void 0:ie.length)>0&&de.push(Ee),l&&!((null==n||null===(oe=n.Properties)||void 0===oe?void 0:oe.length)>0)&&de.push(ye),(null==l||null===(re=l.tradeLicenseDetail)||void 0===re?void 0:re.owners)&&de.push(ge),{tenantId:l.tenantId,applicationDetails:de,additionalDetails:null==l?void 0:l.additionalDetails,applicationData:l,numOfApplications:o}}let o=[];const r=function(){if(null!=l&&l.licenseNumber)return Promise.resolve(nn.numberOfApplications(t,{licenseNumbers:null==l?void 0:l.licenseNumber,offset:0})).then(function(e){o=e})}();return r&&r.then?r.then(i):i()}const u=null==l||null===(n=l.tradeLicenseDetail)||void 0===n||null===(i=n.additionalDetail)||void 0===i?void 0:i.propertyId;return u?Promise.resolve(Digit.PTService.search({tenantId:t,filters:{propertyIds:null==l||null===(o=l.tradeLicenseDetail)||void 0===o||null===(r=o.additionalDetail)||void 0===r?void 0:r.propertyId}})).then(a):a(u)})}catch(e){return Promise.reject(e)}}},on=e=>{var r;let{application:a}=e;sessionStorage.setItem("isDirectRenewal",!0);const u=o.useHistory(),d=null==a||null===(r=a.tradeLicenseDetail)||void 0===r?void 0:r.owners,{t:s}=i.useTranslation(),c=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),[v,p]=l.useState(!1),[m,E]=l.useState(""),[f,_]=l.useState(null),[y,T]=l.useState(""),[g,S]=l.useState([]),{data:h={}}=Digit.Hooks.tl.useTradeLicenseMDMS(c,"egf-master","FinancialYear");let L=h["egf-master"]?h["egf-master"].FinancialYear.filter(e=>"TL"===e.module):[];const[A,b]=l.useState(!1),N=()=>{A?_({error:!0,label:""+s("TL_RENEWAL_PRESENT_ERROR")}):0==v&&m&&"MANUALEXPIRED"!==(null==a?void 0:a.status)?_({error:!0,label:s("TL_ERROR_TOAST_RENEWAL_1")+" "+m+" "+s("TL_ERROR_TOAST_RENEWAL_2")}):"CANCELLED"===(null==a?void 0:a.status)?_({error:!0,label:""+s("TL_ERROR_TOAST_RENEWAL_CANCEL")}):"MANUALEXPIRED"===(null==a?void 0:a.status)&&_({error:!0,label:""+s("TL_ERROR_TOAST_MUTUALLY_EXPIRED")})};l.useEffect(function(){try{return Promise.resolve(nn.numberOfApplications(null==a?void 0:a.tenantId,{licenseNumbers:null==a?void 0:a.licenseNumber,offset:0})).then(function(e){var t;let l=!1;b(!1);let n="",i=El(null==a?void 0:a.financialYear);const o=null==i?void 0:i.split("-")[1],r="20"+Number(o)+"-"+(Number(o)+1),u=Math.max.apply(Math,null==e||null===(t=e.filter(e=>e.licenseNumber===(null==a?void 0:a.licenseNumber)))||void 0===t?void 0:t.map(function(e){return parseInt(e.financialYear.split("-")[0])})),d=null==e?void 0:e.filter(e=>e.financialYear==r&&"REJECTED"!==(null==e?void 0:e.status));if(Object.keys(h).length>0){let t=Ce(0,L).finYearRange;var s;e&&e.map(e=>{e.financialYear===t&&b(!0)}),(null==d?void 0:d.length)>0&&(p(!1),E(null==d||null===(s=d[0])||void 0===s?void 0:s.applicationNumber)),null!=a&&a.financialYear.includes(""+u)||(n=null==a?void 0:a.financialYear,T(null==a?void 0:a.financialYear)),d&&0!=(null==d?void 0:d.length)||(l=!0,p(!0)),S(e)}})}catch(e){return Promise.reject(e)}},[h]);const C=null!==(null==d?void 0:d.additionalDetails)?d.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}):d;return n.createElement(n.Fragment,null,n.createElement(t.Card,null,n.createElement(t.KeyNote,{keyValue:s("TL_LOCALIZATION_TRADE_NAME"),note:a.tradeName}),n.createElement(t.KeyNote,{keyValue:s("TL_LICENSE_NUMBERL_LABEL"),note:a.licenseNumber}),n.createElement(t.KeyNote,{keyValue:s("TL_LOCALIZATION_OWNER_NAME"),note:C.map((e,t)=>n.createElement("div",{key:"index"},t==e.length-1?(null==e?void 0:e.name)+",":e.name))}),n.createElement(t.KeyNote,{keyValue:s("TL_LOCALIZATION_LICENSE_STATUS"),note:"APPROVED"===a.status?s("TL_ACTIVE_STATUS_MSG")+" "+Ie(a.validTo):s("TL_EXPIRED_STATUS_MSG")+Ie(a.validTo)+" "+s("TL_EXPIRED_STATUS_MSG_1")}),A?n.createElement(t.KeyNote,{keyValue:""+s("TL_RENEWAL_PRESENT_ERROR")}):n.createElement(t.SubmitBar,{label:s("TL_RENEW_LABEL"),onSubmit:function(){try{return Promise.resolve(nn.numberOfApplications(null==a?void 0:a.tenantId,{licenseNumbers:null==a?void 0:a.licenseNumber,offset:0})).then(function(e){var t;let l=!1;b(!1);let n=El(null==a?void 0:a.financialYear);const i=null==n?void 0:n.split("-")[1],o="20"+Number(i)+"-"+(Number(i)+1),r=Math.max.apply(Math,null==e||null===(t=e.filter(e=>e.licenseNumber===(null==a?void 0:a.licenseNumber)))||void 0===t?void 0:t.map(function(e){return parseInt(e.financialYear.split("-")[0])})),d=null==e?void 0:e.filter(e=>e.financialYear==o&&"REJECTED"!==(null==e?void 0:e.status));let s=Ce(0,L).finYearRange;var c;e&&(null==e||e.map(e=>{e.financialYear===s&&b(!0)})),(null==d?void 0:d.length)>0&&(p(!1),E(null==d||null===(c=d[0])||void 0===c?void 0:c.applicationNumber)),null!=a&&a.financialYear.includes(""+r)||T(null==a?void 0:a.financialYear),d&&0!=(null==d?void 0:d.length)||(l=!0,p(!0)),S(e),A||0==l||"CANCELLED"===(null==a?void 0:a.status)||"MANUALEXPIRED"===(null==a?void 0:a.status)?N():u.push("/digit-ui/citizen/tl/tradelicence/renew-trade/"+a.licenseNumber+"/"+a.tenantId)})}catch(e){return Promise.reject(e)}}})),f&&n.createElement(t.Toast,{isDleteBtn:!0,error:f.error,warning:f.warning,label:s(f.label),onClose:()=>{_(null)}}))},rn=e=>{let{headComment:t,otherComment:l}=e;return n.createElement("div",{className:"checkpoint-comments-wrap"},n.createElement("h4",null,t),n.createElement("p",null,l))},an=e=>{var l,o,r;let{data:a}=e;const{t:u}=i.useTranslation();return n.createElement("div",null,a.date&&n.createElement("p",null,a.date),n.createElement("p",null,a.name),a.mobileNumber&&n.createElement(t.TelePhone,{mobile:a.mobileNumber}),a.source&&n.createElement("p",null,u("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+a.source.toUpperCase())),a.comment&&n.createElement(rn,{otherComment:null==a?void 0:a.otherComment,headComment:null==a?void 0:a.comment}),null!=a&&a.wfComment?n.createElement("div",null,null==a||null===(l=a.wfComment)||void 0===l?void 0:l.map(e=>n.createElement("div",{className:"TLComments"},n.createElement("h3",null,u("WF_COMMON_COMMENTS")),n.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==a||null===(o=a.thumbnailsToShow)||void 0===o||null===(r=o.thumbs)||void 0===r?void 0:r.length)>0?n.createElement("div",{className:"TLComments"},n.createElement("h3",null,u("CS_COMMON_ATTACHMENTS")),n.createElement(t.DisplayPhotos,{srcs:null==a?void 0:a.thumbnailsToShow.thumbs,onClick:(e,t)=>{OpenImage(e,t,null==a?void 0:a.thumbnailsToShow)}})):null)},un=e=>{var o,r,a,u,d,s;const{t:c}=i.useTranslation(),v=null===(o=e.application)||void 0===o?void 0:o.businessService,{isLoading:p,data:m}=Digit.Hooks.useWorkflowDetails({tenantId:null===(r=e.application)||void 0===r?void 0:r.tenantId,id:e.id,moduleCode:v}),[E,f]=l.useState(!1);function _(e,t,l){var n;window.open(null==l||null===(n=l.fullImage)||void 0===n?void 0:n[0],"_blank")}const y=t=>{if("INITIATE"===t.state){var l,i,o,r;const t={date:Digit.DateUtils.ConvertTimestampToDate(null===(l=e.application)||void 0===l||null===(i=l.auditDetails)||void 0===i?void 0:i.createdTime),source:(null===(o=e.application)||void 0===o||null===(r=o.tradeLicenseDetail)||void 0===r?void 0:r.channel)||""};return n.createElement(an,{data:t})}{var a,u,d,s,v;const e={date:null==t||null===(a=t.auditDetails)||void 0===a?void 0:a.lastModified,name:null==t||null===(u=t.assignes)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.name,mobileNumber:null==t||null===(s=t.assignes)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.mobileNumber,comment:c(null==t?void 0:t.comment),wfComment:t.wfComment,thumbnailsToShow:null==t?void 0:t.thumbnailsToShow};return n.createElement(an,{data:e,OpenImage:_})}};return p?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,!p&&n.createElement(l.Fragment,null,(null==m||null===(a=m.timeline)||void 0===a?void 0:a.length)>0&&n.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},c("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=m&&m.timeline&&1===(null==m||null===(u=m.timeline)||void 0===u?void 0:u.length)?n.createElement(t.CheckPoint,{isCompleted:!0,label:c((null==m||null===(d=m.timeline[0])||void 0===d?void 0:d.state)&&"WF_"+v+"_"+m.timeline[0].state||"NA"),customChild:y(null==m?void 0:m.timeline[0])}):n.createElement(t.ConnectingCheckPoints,null,(null==m?void 0:m.timeline)&&(null==m?void 0:m.timeline.slice(0,E?m.timeline.length:2).map((e,l,i)=>n.createElement(n.Fragment,{key:l},n.createElement(t.CheckPoint,{keyValue:l,isCompleted:0===l,label:e.state?c("WF_NEW"+v+"_"+e.state):"NA",customChild:y(e)}))))),(null==m||null===(s=m.timeline)||void 0===s?void 0:s.length)>2&&n.createElement(t.LinkButton,{label:c(E?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{f(e=>!e)}})))};let dn=[];const sn=e=>{var l;let{currentStep:o=1,flow:r=""}=e;const{t:a}=i.useTranslation(),u=window.Digit.Utils.browser.isMobile();return(e=>{switch(e){case"STAKEHOLDER":dn=[];break;case"APPLY":dn=["FSM_TIMELINE_PROPERTY_DETAILS","FSM_GENDER_DETAILS","FSM_PAYMENT_DETAILS","FSM_TIMELINE_SUMMARY"];break;default:dn=["TL_COMMON_TR_DETAILS","TL_LOCATION_AND_OWNER_DETAILS","TL_DOCUMENT_DETAIL","TL_COMMON_SUMMARY"]}})(r),n.createElement("div",{className:"timeline-container",style:u?{}:{maxWidth:"960px",marginRight:"auto"}},null===(l=dn)||void 0===l?void 0:l.map((e,l,i)=>n.createElement("div",{className:"timeline-checkpoint",key:l},n.createElement("div",{className:"timeline-content"},n.createElement("span",{className:"circle "+(l<=o-1&&"active")},l<o-1?n.createElement(t.TickMark,null):l+1),n.createElement("span",{className:"secondary-color"},a(e))),l<i.length-1&&n.createElement("span",{className:"line "+(l<o-1&&"active")}))))},cn=()=>({name:"",designation:"",mobileNumber:"",altContactNumber:"",instituionName:"",fatherOrHusbandName:"",relationship:"",emailId:"",permanentAddress:"",ownerType:"",gender:"",subOwnerShipCategory:"",correspondenceAddress:"",key:Date.now()}),vn=e=>{var i,o,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b;const{owner:N,focusIndex:C,allOwners:D,setFocusIndex:I,removeOwner:O,setOwners:w,t:R,mdmsData:P,formData:x,config:M,setError:k,clearErrors:U,formState:B,setIsErrors:F,isErrors:H,isRenewal:W,isSameAsPropertyOwner:V,previousLicenseDetails:j,setPreviousLicenseDetails:Y,genderTypeData:K}=e,{control:z,formState:G,watch:q,setValue:$,trigger:X}=r.useForm(),Z=q(),{errors:Q}=G,J=Digit.ULBService.getStateId(),[ee,te]=l.useState({}),{ownershipCategory:{code:le}={}}=x,{data:ne}=Digit.Hooks.tl.useTradeLicenseMDMS(J,"common-masters","TradeOwnershipSubType",{keyToSearchOwnershipSubtype:le?le.split(".")[0]:void 0}),ie=l.useMemo(()=>{var e,t,l,n;return null!=x&&null!==(e=x.ownershipCategory)&&void 0!==e&&null!==(t=e.code)&&void 0!==t&&t.includes("SINGLEOWNER")?"SINGLEOWNER":null!=x&&null!==(l=x.ownershipCategory)&&void 0!==l&&null!==(n=l.code)&&void 0!==n&&n.includes("INSTITUTIONAL")?"INSTITUTIONAL":"MULTIOWNER"},[null==x?void 0:x.ownershipCategory]),oe=l.useMemo(()=>{var e,t,l;return(null==P||null===(e=P.PropertyTax)||void 0===e||null===(t=e.OwnerType)||void 0===t||null===(l=t.map)||void 0===l?void 0:l.call(t,e=>({i18nKey:""+e.code.replaceAll("PROPERTY","COMMON_MASTERS").replaceAll(".","_"),code:e.code,name:e.name})))||[]},[P]),re=K&&(null===(i=K["common-masters"])||void 0===i||null===(o=i.GenderType)||void 0===o?void 0:o.filter(e=>e.active)),ae=l.useMemo(()=>{var e;return(null==re||null===(e=re.map)||void 0===e?void 0:e.call(re,e=>({i18nKey:"TL_GENDER_"+e.code,code:e.code})))||[]},[re]);l.useEffect(()=>{X()},[]),l.useEffect(()=>{var e;window.location.href.includes("tl/renew-application-details")&&null!=x&&null!==(e=x.cpt)&&void 0!==e&&e.details&&("INSTITUTIONAL"===ie?($("instituionName",null==N?void 0:N.instituionName),$("subOwnerShipCategory",null==N?void 0:N.subOwnerShipCategory),$("name",null==N?void 0:N.name),$("designation",null==N?void 0:N.designation),$("mobileNumber",null==N?void 0:N.mobileNumber),$("altContactNumber",null==N?void 0:N.altContactNumber),$("emailId",null==N?void 0:N.emailId),$("emailId",null==N?void 0:N.emailId)):($("name",null==N?void 0:N.name),$("mobileNumber",null==N?void 0:N.mobileNumber),$("fatherOrHusbandName",null==N?void 0:N.fatherOrHusbandName),$("relationship",null==N?void 0:N.relationship),$("gender",null==N?void 0:N.gender),$("emailId",null==N?void 0:N.emailId),$("ownerType",null==N?void 0:N.ownerType),$("permanentAddress",null==N?void 0:N.permanentAddress)))},[null==x||null===(a=x.cpt)||void 0===a||null===(u=a.details)||void 0===u?void 0:u.propertyId,null==x||null===(d=x.cptId)||void 0===d?void 0:d.Id,x]),l.useEffect(()=>{var e;je.isEqual(Z,ee)||(te({...Z}),null===(e=Object.keys(Z))||void 0===e||e.map(e=>{"key"==e||null==Z[e]||""==Z[e]||null==Z[e]||H||F(!0)}),w(e=>null==e?void 0:e.map(e=>e.key&&e.key===N.key?{...e,...Z}:{...e})),X())},[Z]),l.useEffect(()=>{var e;Object.keys(Q).length&&!je.isEqual((null===(e=B.errors[M.key])||void 0===e?void 0:e.type)||{},Q)?k(M.key,{type:Q}):!Object.keys(Q).length&&B.errors[M.key]&&H&&U(M.key)},[Q]);const ue={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};let de=!1;return"INDIVIDUAL.MULTIPLEOWNERS"===(null==x||null===(s=x.ownershipCategory)||void 0===s?void 0:s.code)&&(de=!0),n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"16px"}},n.createElement("div",{style:"MULTIOWNER"===ie?{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA"}:{}},(null==D?void 0:D.length)>1?n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.createElement("div",{onClick:()=>O(N),style:{padding:"5px",cursor:"pointer",textAlign:"right"}},n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"5px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:"#494848"}))))):null,"INSTITUTIONAL"===ie&&n.createElement(n.Fragment,null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,R("TL_INSTITUTION_NAME_LABEL")+"*"),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"instituionName",defaultValue:null==N?void 0:N.instituionName,rules:{required:R("REQUIRED_FIELD"),validate:{pattern:e=>!!/^[a-zA-Z_@./()#&+-\s]*$/.test(e)||R("TL_NAME_ERROR_MESSAGE")}},render:e=>{var l;return n.createElement(t.TextInput,{t:R,type:"text",isMandatory:!1,value:e.value,disable:V,autoFocus:C.index===(null==N?void 0:N.key)&&"instituionName"===C.type,errorStyle:!(!G.touched.instituionName||null==Q||null===(l=Q.instituionName)||void 0===l||!l.message),onChange:t=>{t!=(null==N?void 0:N.instituionName)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"instituionName"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue}," ",G.touched.instituionName?null==Q||null===(c=Q.instituionName)||void 0===c?void 0:c.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,R("TL_INSTITUTION_TYPE_LABEL")+"*"),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"subOwnerShipCategory",defaultValue:window.location.href.includes("tl/edit-application-details")||window.location.href.includes("tl/renew-application-details/")?null==N?void 0:N.subOwnerShipCategory:"",render:e=>{var l;return n.createElement(t.Dropdown,{t:R,option:ne,errorStyle:!(!G.touched.subOwnerShipCategory||null==Q||null===(l=Q.subOwnerShipCategory)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"subOwnerShipCategory"===C.type,selected:e.value,disable:V,select:t=>{var l;(null==t?void 0:t.code)!=(null==N||null===(l=N.subOwnerShipCategory)||void 0===l?void 0:l.code)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"subOwnerShipCategory"})},onBlur:e.onBlur,optionKey:"i18nKey"})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.subOwnerShipCategory?null==Q||null===(v=Q.subOwnerShipCategory)||void 0===v?void 0:v.message:""),n.createElement(t.CardSectionHeader,null,R("TL_AUTHORIZED_PERSON_DETAILS")),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,R("TL_NEW_OWNER_DETAILS_NAME_LABEL")+"*"),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,defaultValue:null==N?void 0:N.name,name:"name",rules:{required:R("REQUIRED_FIELD"),validate:{pattern:e=>!!/^[a-zA-Z ]+$/.test(e)||R("TL_NAME_ERROR_MESSAGE")}},render:e=>{var l;return n.createElement(t.TextInput,{t:R,type:"text",isMandatory:!1,name:"name",value:e.value,disable:V,errorStyle:!(!G.touched.name||null==Q||null===(l=Q.name)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"name"===C.type,onChange:t=>{t!=(null==N?void 0:N.name)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"name"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.name?null==Q||null===(p=Q.name)||void 0===p?void 0:p.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,""+R("TL_NEW_OWNER_DESIG_LABEL")),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"designation",defaultValue:null==N?void 0:N.designation,rules:{validate:{pattern:e=>!!/^[a-zA-Z ]*$/.test(e)||R("TL_NAME_ERROR_MESSAGE")}},render:e=>{var l;return n.createElement(t.TextInput,{t:R,type:"text",isMandatory:!1,name:"designation",value:e.value,disable:V,errorStyle:!(!G.touched.designation||null==Q||null===(l=Q.designation)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"designation"===C.type,onChange:t=>{t!=(null==N?void 0:N.designation)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"designation"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.designation?null==Q||null===(m=Q.designation)||void 0===m?void 0:m.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,R("TL_MOBILE_NUMBER_LABEL")+"*"),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"mobileNumber",defaultValue:null==N?void 0:N.mobileNumber,rules:{required:R("REQUIRED_FIELD"),validate:{pattern:e=>!!/^([6-9]{1}[0-9]{9})$/.test(e)||R("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}},render:e=>{var l;return n.createElement(t.MobileNumber,{type:"",t:R,isMandatory:!1,name:"mobileNumber",value:e.value,disable:V,errorStyle:!(!G.touched.mobileNumber||null==Q||null===(l=Q.mobileNumber)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"mobileNumber"===C.type,onChange:t=>{t!=(null==N?void 0:N.mobileNumber)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"mobileNumber"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.mobileNumber?null==Q||null===(E=Q.mobileNumber)||void 0===E?void 0:E.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,""+R("TL_TELEPHONE_NUMBER_LABEL")),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"altContactNumber",defaultValue:null==N?void 0:N.altContactNumber,rules:{validate:{pattern:e=>!/^$|^[0][1-9][0-9]{9}$|^[1-9][0-9]{9}$/.test(e)&&R("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}},render:e=>{var l;return n.createElement(t.MobileNumber,{type:"text",t:R,isMandatory:!1,maxLength:11,name:"altContactNumber",value:N.altContactNumber,disable:V,errorStyle:!(!G.touched.altContactNumber||null==Q||null===(l=Q.altContactNumber)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"altContactNumber"===C.type,onChange:t=>{t!=(null==N?void 0:N.altContactNumber)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"altContactNumber"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.altContactNumber?null==Q||null===(f=Q.altContactNumber)||void 0===f?void 0:f.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,null,""+R("NOC_APPLICANT_EMAIL_LABEL")),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,defaultValue:null==N?void 0:N.emailId,name:"emailId",rules:{validate:{pattern:e=>!!/^$|^(?=^.{1,64}$)((([^<>()\[\]\\.,;:\s$*@'"]+(\.[^<>()\[\]\\.,;:\s@'"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$/.test(e)||R("TL_EMAIL_ERROR_MESSAGE")}},render:e=>{var l;return n.createElement(t.TextInput,{t:R,type:"text",isMandatory:!1,name:"emailId",value:e.value,disable:V,errorStyle:!(!G.touched.emailId||null==Q||null===(l=Q.emailId)||void 0===l||!l.message),autoFocus:C.index===(null==N?void 0:N.key)&&"emailId"===C.type,onChange:t=>{t!=(null==N?void 0:N.emailId)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"emailId"})},onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.emailId?null==Q||null===(_=Q.emailId)||void 0===_?void 0:_.message:"")),"INSTITUTIONAL"!==ie&&n.createElement(n.Fragment,null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_OWNER_S_NAME_LABEL")+" * "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"name",defaultValue:null==N?void 0:N.name,rules:{required:R("REQUIRED_FIELD"),validate:{pattern:e=>!!/^\w+( +\w+)*$/.test(e)||R("INVALID_NAME")}},render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:C.index===(null==N?void 0:N.key)&&"name"===C.type,errorStyle:!(!G.touched.name||null==Q||null===(l=Q.name)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==N?void 0:N.name)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t.target.value),I({index:N.key,type:"name"})},onBlur:t=>{I({index:-1}),e.onBlur(t)},disable:V,style:de?{background:"#FAFAFA"}:""})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.name?null==Q||null===(y=Q.name)||void 0===y?void 0:y.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_OWNER_S_MOBILE_NUM_LABEL")+" * "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"mobileNumber",defaultValue:null==N?void 0:N.mobileNumber,rules:{required:R("REQUIRED_FIELD"),validate:e=>!!/^[6789]\d{9}$/.test(e)||R("INVALID_NUMBER")},render:e=>{var l;return n.createElement(t.MobileNumber,{value:e.value,autoFocus:C.index===(null==N?void 0:N.key)&&"mobileNumber"===C.type,onChange:t=>{t!=(null==N?void 0:N.mobileNumber)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t),I({index:N.key,type:"mobileNumber"})},labelStyle:{marginTop:"unset",border:"1px solid #464646",borderRight:"none"},onBlur:e.onBlur,disable:V,errorStyle:!(!G.touched.mobileNumber||null==Q||null===(l=Q.mobileNumber)||void 0===l||!l.message),style:de?{background:"#FAFAFA"}:""})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.mobileNumber?null==Q||null===(T=Q.mobileNumber)||void 0===T?void 0:T.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_GUARDIAN_S_NAME_LABEL")+" * "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"fatherOrHusbandName",defaultValue:null==N?void 0:N.fatherOrHusbandName,rules:{required:"NAME_REQUIRED",validate:{pattern:e=>!!/^\w+( +\w+)*$/.test(e)||R("INVALID_NAME")}},render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:C.index===(null==N?void 0:N.key)&&"fatherOrHusbandName"===C.type,errorStyle:!(!G.touched.fatherOrHusbandName||null==Q||null===(l=Q.fatherOrHusbandName)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==N?void 0:N.fatherOrHusbandName)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t.target.value),I({index:N.key,type:"fatherOrHusbandName"})},disable:V,onBlur:e.onBlur})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.fatherOrHusbandName?null==Q||null===(g=Q.fatherOrHusbandName)||void 0===g?void 0:g.message:""," "),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_RELATIONSHIP_WITH_GUARDIAN_LABEL")+" * "),n.createElement(r.Controller,{control:z,name:"relationship",defaultValue:null==N?void 0:N.relationship,rules:{required:"RelationShip Required"},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,errorStyle:!(!G.touched.relationship||null==Q||null===(l=Q.relationship)||void 0===l||!l.message),select:t=>{var l;(null==t?void 0:t.code)!=(null==N||null===(l=N.relationship)||void 0===l?void 0:l.code)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t)},onBlur:e.onBlur,disable:V,option:[{i18nKey:"COMMON_RELATION_FATHER",code:"FATHER"},{i18nKey:"COMMON_RELATION_HUSBAND",code:"HUSBAND"}],optionKey:"i18nKey",t:R})}})),n.createElement(t.CardLabelError,{style:ue},G.touched.relationship?null==Q||null===(S=Q.relationship)||void 0===S?void 0:S.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_NEW_OWNER_DETAILS_GENDER_LABEL")+" * "),n.createElement(r.Controller,{control:z,name:"gender",defaultValue:null==N?void 0:N.gender,rules:{required:R("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:V,errorStyle:!(!G.touched.gender||null==Q||null===(l=Q.gender)||void 0===l||!l.message),select:t=>{var l;(null==t?void 0:t.code)!=(null==N||null===(l=N.gender)||void 0===l?void 0:l.code)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t)},onBlur:e.onBlur,option:ae,optionKey:"i18nKey",t:R})}})),n.createElement(t.CardLabelError,{style:ue},G.touched.gender?null==Q||null===(h=Q.gender)||void 0===h?void 0:h.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_NEW_OWNER_DETAILS_EMAIL_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"emailId",defaultValue:null==N?void 0:N.emailId,render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:C.index===(null==N?void 0:N.key)&&"emailId"===C.type,errorStyle:!(!G.touched.emailId||null==Q||null===(l=Q.emailId)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==N?void 0:N.emailId)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t.target.value),I({index:N.key,type:"emailId"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,disable:V,style:de?{background:"#FAFAFA"}:""})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.emailId?null==Q||null===(L=Q.emailId)||void 0===L?void 0:L.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_OWNER_SPECIAL_CATEGORY")+" "),n.createElement(r.Controller,{control:z,name:"ownerType",defaultValue:null==N?void 0:N.ownerType,render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,errorStyle:!(!G.touched.ownerType||null==Q||null===(l=Q.ownerType)||void 0===l||!l.message),select:t=>{var l;(null==t?void 0:t.code)!=(null==N||null===(l=N.ownerType)||void 0===l?void 0:l.code)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t)},onBlur:e.onBlur,disable:V,option:oe?oe.sort((e,t)=>e.name.localeCompare(t.name)):[],optionKey:"i18nKey",t:R})}})),n.createElement(t.CardLabelError,{style:ue},G.touched.ownerType?null==Q||null===(A=Q.ownerType)||void 0===A?void 0:A.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},R("TL_NEW_OWNER_DETAILS_ADDR_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:z,name:"permanentAddress",defaultValue:null==N?void 0:N.permanentAddress,render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:C.index===(null==N?void 0:N.key)&&"permanentAddress"===C.type,errorStyle:!(!G.touched.permanentAddress||null==Q||null===(l=Q.permanentAddress)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==N?void 0:N.permanentAddress)&&W&&Y({...j,checkForRenewal:!0}),e.onChange(t.target.value),I({index:N.key,type:"permanentAddress"})},onBlur:e.onBlur,disable:V,style:de?{background:"#FAFAFA"}:""})}}))),n.createElement(t.CardLabelError,{style:ue},G.touched.permanentAddress?null==Q||null===(b=Q.permanentAddress)||void 0===b?void 0:b.message:"")))))},pn=()=>{const e=Pe(Date.now()),t=e.split("-")[0],l=t.slice(2,4),n=Number(e.split("-")[1])<4?Number(t)-1+"-"+Number(l):Number(t)+"-"+(Number(l)+1);return{code:n,i18nKey:"FY"+n,id:null==n?void 0:n.split("-")[0]}},mn=()=>({financialYear:pn(),licenseType:"",structureType:"",structureSubType:"",commencementDate:"",gstNo:"",operationalArea:"",noOfEmployees:"",key:Date.now()}),En=e=>{var i,o,a,u,d,s,c,v,p,m;const{tradedetail:E,focusIndex:f,setFocusIndex:_,t:y,config:T,setError:g,clearErrors:S,formState:h,setTradedetils:L,FinaceMenu:A,setStructureSubTypeOptions:b,structureSubTypeOptions:N,Menu:C,setIsErrors:D,isErrors:I,billingSlabData:O,licenseTypeList:w,setLicenseTypeList:R,previousLicenseDetails:P,setPreviousLicenseDetails:x,licenseTypeValue:M,setLicenseTypeValue:k,menuLoading:U}=e,{control:B,formState:F,watch:H,setValue:W,trigger:V,getValues:j}=r.useForm(),Y=H(),{errors:K}=F;l.useEffect(()=>{var e;if(O&&null!=O&&O.billingSlab&&(null==O||null===(e=O.billingSlab)||void 0===e?void 0:e.length)>0){var t;const e=O.billingSlab&&O.billingSlab.reduce((e,t)=>{let l={active:!0},n={active:!0};return t.accessoryCategory&&null===t.tradeType?(l.code=t.accessoryCategory,l.uom=t.uom,l.rate=t.rate,t.rate&&t.rate>0&&e.accessories.push(l)):null===t.accessoryCategory&&t.tradeType&&(n.code=t.tradeType,n.uom=t.uom,n.structureType=t.structureType,n.licenseType=t.licenseType,n.rate=t.rate,!ze(t.rate)&&null!==t.rate&&e.tradeTypeData.push(n)),e},{accessories:[],tradeTypeData:[]});let i=Me(e.tradeTypeData,"licenseType");var l;i=null===(t=i)||void 0===t?void 0:t.map(e=>({code:e.licenseType,active:!0})),i&&i.length>0&&(null===(l=i)||void 0===l||l.forEach(e=>{e.i18nKey="TRADELICENSE_LICENSETYPE_"+e.code}));let o=[];var n;i&&i.length>0&&(null===(n=i)||void 0===n||n.map(e=>{"PERMANENT"==e.code&&o.push(e)})),k(o[0]),R(i)}},[O]);let z=[];A&&A["egf-master"]&&(null===(i=A["egf-master"].FinancialYear)||void 0===i||i.map(e=>{"TL"==e.module&&z.push({code:e.name,i18nKey:"FY"+e.name,id:e.name.split("-")[0]})})),z&&z.length>0&&z.sort(function(e,t){return Number(e.id)-Number(t.id)});let G=[];G=C&&C["common-masters"]&&(null===(o=C["common-masters"].StructureType)||void 0===o?void 0:o.map(e=>{let t=null==e?void 0:e.code.split(".")[0];return{i18nKey:y("COMMON_MASTERS_STRUCTURETYPE_"+xe(null==t?void 0:t.toUpperCase(),".","_")),label:t,...e}}))||[];let q=[];if(G&&G.length>0){var $,X=[],Z=G.length;for($=0;$<Z;$++){var Q,J;X[G[$].label]||(X[G[$].label]=!0,q.push({code:G[$].label,i18nKey:y("COMMON_MASTERS_STRUCTURETYPE_"+xe(null===(Q=G[$])||void 0===Q||null===(J=Q.label)||void 0===J?void 0:J.toUpperCase(),".","_"))}))}}let ee=window.location.href.includes("renew-application-details");window.location.href.includes("edit-application-details")&&(ee=!0),l.useEffect(()=>{var e;if(ee&&(null===(e=G)||void 0===e?void 0:e.length)>0&&!U){var t,l,n;let e=null==E||null===(t=E.structureType)||void 0===t||null===(l=t.code)||void 0===l?void 0:l.split(".")[0],i=[];null===(n=G)||void 0===n||n.map(t=>{var l,n;e===(null==t||null===(l=t.code)||void 0===l?void 0:l.split(".")[0])&&i.push({code:null==t?void 0:t.code,i18nKey:y("COMMON_MASTERS_STRUCTURETYPE_"+xe(null==t||null===(n=t.code)||void 0===n?void 0:n.toUpperCase(),".","_"))})}),b(i)}},[null==E?void 0:E.structureType,!U]),l.useEffect(()=>{V()},[]),l.useEffect(()=>{const e=Object.keys(Y),t={};null==e||e.forEach(e=>t[e]=E[e]);let l={};var n;je.isEqual(Y,t)||(null===(n=Object.keys(Y))||void 0===n||n.map(e=>{"key"==e||null==Y[e]||""==Y[e]||null==Y[e]||I||D(!0)}),L(e=>null==e?void 0:e.map(e=>e.key&&e.key===E.key?{...e,...Y,...l}:{...e})),V())},[Y]),l.useEffect(()=>{var e;Object.keys(K).length&&!je.isEqual((null===(e=h.errors[T.key])||void 0===e?void 0:e.type)||{},K)?g(T.key,{type:K}):!Object.keys(K).length&&h.errors[T.key]&&I&&S(T.key)},[K]);const te={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"16px"}},n.createElement("div",null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_FINANCIAL_YEAR_LABEL")+" * "),n.createElement(r.Controller,{name:"financialYear",rules:{required:y("REQUIRED_FIELD")},defaultValue:null==E?void 0:E.financialYear,control:B,render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,errorStyle:!(!F.touched.financialYear||null==K||null===(l=K.financialYear)||void 0===l||!l.message),option:z,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,disable:ee,t:y})}})),n.createElement(t.CardLabelError,{style:te},F.touched.financialYear?null==K||null===(a=K.financialYear)||void 0===a?void 0:a.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_TRADE_DETAILS_LIC_TYPE_LABEL")+" * "),n.createElement(r.Controller,{name:"licenseType",defaultValue:null==E?void 0:E.licenseType,control:B,render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:M,disable:!0,option:w,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:y,errorStyle:!(!F.touched.licenseType||null==K||null===(l=K.licenseType)||void 0===l||!l.message)})}})),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_COMMON_TABLE_COL_TRD_NAME")+" * "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:B,name:"tradeName",defaultValue:null==E?void 0:E.tradeName,rules:{required:y("REQUIRED_FIELD"),validate:{pattern:e=>!!/^[-@.\/#&+\w\s]*$/.test(e)||y("INVALID_NAME")}},render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:f.index===(null==E?void 0:E.key)&&"name"===f.type,errorStyle:!(!F.touched.tradeName||null==K||null===(l=K.tradeName)||void 0===l||!l.message),onChange:t=>{e.onChange(t.target.value),_({index:E.key,type:"tradeName"})},onBlur:t=>{_({index:-1}),e.onBlur(t)},disable:ee})}}))),n.createElement(t.CardLabelError,{style:te},F.touched.tradeName?null==K||null===(u=K.tradeName)||void 0===u?void 0:u.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_TRADE_DETAILS_STRUCT_TYPE_LABEL")+" * "),n.createElement(r.Controller,{name:"structureType",rules:{required:y("REQUIRED_FIELD")},defaultValue:null==E?void 0:E.structureType,control:B,render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:ee,option:q,errorStyle:!(!F.touched.structureType||null==K||null===(l=K.structureType)||void 0===l||!l.message),select:t=>{var l,n;let i=null==t||null===(l=t.code)||void 0===l?void 0:l.split(".")[0],o=[];null===(n=G)||void 0===n||n.map(e=>{var t,l;i===(null==e||null===(t=e.code)||void 0===t?void 0:t.split(".")[0])&&o.push({code:null==e?void 0:e.code,i18nKey:y("COMMON_MASTERS_STRUCTURETYPE_"+xe(null==e||null===(l=e.code)||void 0===l?void 0:l.toUpperCase(),".","_"))})}),W("structureSubType",""),b(o),e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:y})}})),n.createElement(t.CardLabelError,{style:te},F.touched.structureType?null==K||null===(d=K.structureType)||void 0===d?void 0:d.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_TRADE_DETAILS_STRUCT_SUB_TYPE_LABEL")+" * "),n.createElement(r.Controller,{name:"structureSubType",rules:{required:y("REQUIRED_FIELD")},defaultValue:null==E?void 0:E.structureSubType,control:B,render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:j("structureSubType"),disable:!1,option:N,select:t=>{var l;(null==t?void 0:t.code)!=(null==E||null===(l=E.structureSubType)||void 0===l?void 0:l.code)&&ee&&x({...P,checkForRenewal:!0}),e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:y,errorStyle:!(!F.touched.structureSubType||null==K||null===(l=K.structureSubType)||void 0===l||!l.message)})}})),n.createElement(t.CardLabelError,{style:te},F.touched.structureSubType?null==K||null===(s=K.structureSubType)||void 0===s?void 0:s.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL")+" * "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{name:"commencementDate",rules:{required:y("REQUIRED_FIELD")},defaultValue:null==E?void 0:E.commencementDate,control:B,render:e=>n.createElement(t.DatePicker,{date:e.value,name:"CommencementDate",onChange:e.onChange,disabled:ee})}))),n.createElement(t.CardLabelError,{style:te},F.touched.commencementDate?null==K||null===(c=K.commencementDate)||void 0===c?void 0:c.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_GST_NUMBER_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:B,name:"gstNo",defaultValue:null==E?void 0:E.gstNo,rules:{validate:e=>!!(e&&Be("GSTNo").test(e)||!e)||y("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:f.index===(null==E?void 0:E.key)&&"gstNo"===f.type,errorStyle:!(!F.touched.gstNo||null==K||null===(l=K.gstNo)||void 0===l||!l.message),onChange:t=>{e.onChange(t.target.value),_({index:null==E?void 0:E.key,type:"gstNo"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur,disable:ee})}}))),n.createElement(t.CardLabelError,{style:te},F.touched.gstNo?null==K||null===(v=K.gstNo)||void 0===v?void 0:v.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_OPERATIONAL_SQ_FT_AREA_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{name:"operationalArea",rules:{validate:e=>!!(e&&Be("OperationalArea").test(e)||!e)||y("ERR_DEFAULT_INPUT_FIELD_MSG")},defaultValue:null==E?void 0:E.operationalArea,control:B,render:e=>{var l;return n.createElement(t.TextInput,{onChange:t=>{e.onChange(t.target.value),_({index:null==E?void 0:E.key,type:"operationalArea"})},value:e.value,autoFocus:f.index===(null==E?void 0:E.key)&&"operationalArea"===f.type,errorStyle:!(!F.touched.operationalArea||null==K||null===(l=K.operationalArea)||void 0===l||!l.message),onBlur:e.onBlur,disable:ee})}}))),n.createElement(t.CardLabelError,{style:te},F.touched.operationalArea?null==K||null===(p=K.operationalArea)||void 0===p?void 0:p.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},y("TL_NEW_NUMBER_OF_EMPLOYEES_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{name:"noOfEmployees",rules:{validate:e=>!!(e&&Be("NoOfEmp").test(e)||!e)||y("ERR_DEFAULT_INPUT_FIELD_MSG")},defaultValue:null==E?void 0:E.noOfEmployees,control:B,render:e=>{var l;return n.createElement(t.TextInput,{onChange:t=>{e.onChange(t.target.value),_({index:null==E?void 0:E.key,type:"noOfEmployees"})},value:e.value,autoFocus:f.index===(null==E?void 0:E.key)&&"noOfEmployees"===f.type,errorStyle:!(!F.touched.noOfEmployees||null==K||null===(l=K.noOfEmployees)||void 0===l||!l.message),onBlur:e.onBlur,disable:ee})}}))),n.createElement(t.CardLabelError,{style:te},F.touched.noOfEmployees?null==K||null===(m=K.noOfEmployees)||void 0===m?void 0:m.message:""))))},fn=()=>({tradeType:"",tradeSubType:"",tradeCategory:"",uom:"",uomValue:"",key:Date.now()}),_n=e=>{var i,o,a,u,d,s,c,v,p,m,E,f,_,y,T,g;const{unit:S,focusIndex:h,allUnits:L,setFocusIndex:A,removeUnit:b,setUnits:N,t:C,formData:D,config:I,setError:O,clearErrors:w,formState:R,tradeCategoryValues:P,tradeTypeOptionsList:x,setTradeTypeOptionsList:M,tradeTypeMdmsData:k,tradeSubTypeOptionsList:U,setTradeSubTypeOptionsList:B,setTradeTypeMdmsData:F,setTradeCategoryValues:H,billingSlabTradeTypeData:W,isErrors:V,setIsErrors:j,previousLicenseDetails:Y,setPreviousLicenseDetails:K,isRenewal:z,isLoading:G,isbillingSlabLoading:q,tradeMdmsData:$}=e,{control:X,formState:Z,watch:Q,setValue:J,trigger:ee,getValues:te}=r.useForm(),le=Q(),{errors:ne}=Z,ie=l.useMemo(()=>{var e,t;return null==D||null===(e=D.ownershipCategory)||void 0===e||null===(t=e.code)||void 0===t?void 0:t.includes("INDIVIDUAL")},[null==D||null===(i=D.ownershipCategory)||void 0===i?void 0:i.code]);l.useEffect(()=>{var e,t,l,n,i,o;if($&&(null==W?void 0:W.length)>0&&null!=D&&null!==(e=D.tradedetils)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(l=t.structureType)&&void 0!==l&&l.code&&null!=D&&null!==(n=D.tradedetils)&&void 0!==n&&null!==(i=n[0])&&void 0!==i&&null!==(o=i.structureSubType)&&void 0!==o&&o.code){var r;let e=null==$?void 0:$.TradeLicense.TradeType;e=null===(r=e)||void 0===r?void 0:r.map(e=>({...e,tradeType:null==e?void 0:e.code})),F(e);let t=El(e),l=[];null==t||t.map(e=>{var t,n;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(n=e.tradeType)||void 0===n?void 0:n.split(".")[0])),l.push(e)});const n=Me(l,"code");H(n)}},[null==D||null===(o=D.tradedetils)||void 0===o||null===(a=o[0])||void 0===a||null===(u=a.structureType)||void 0===u?void 0:u.code,!G,W,null==D||null===(d=D.tradedetils)||void 0===d||null===(s=d[0])||void 0===s||null===(c=s.structureSubType)||void 0===c?void 0:c.code]),l.useEffect(()=>{ee()},[]),l.useEffect(()=>{const e=Object.keys(le),t={};null==e||e.forEach(e=>t[e]=S[e]);let l=ie?{}:{ownerType:{code:"NONE"}};var n;je.isEqual(le,t)||(null===(n=Object.keys(le))||void 0===n||n.map(e=>{"key"==e||null==le[e]||""==le[e]||null==le[e]||V||j(!0)}),N(e=>null==e?void 0:e.map(e=>e.key&&e.key===S.key?{...e,...le,...l}:{...e})),ee())},[le]),l.useEffect(()=>{var e;Object.keys(ne).length&&!je.isEqual((null===(e=R.errors[I.key])||void 0===e?void 0:e.type)||{},ne)?O(I.key,{type:ne}):!Object.keys(ne).length&&R.errors[I.key]&&V&&w(I.key)},[ne]);let oe=window.location.href.includes("renew-application-details");if(window.location.href.includes("edit-application-details")&&(oe=!0),l.useEffect(()=>{if((null==k?void 0:k.length)>0&&(oe||null!=S&&S.tradeCategory&&x&&0==(null==x?void 0:x.length))&&!G&&!q){let e=El(k).filter(e=>{var t,l;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0])===(null==S||null===(l=S.tradeCategory)||void 0===l?void 0:l.code)});null==e||e.map(e=>{var t,l;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[1]))});const t=Me(e,"code");M(t)}},[k,!G,W]),l.useEffect(()=>{if((null==k?void 0:k.length)>0&&(oe||null!=S&&S.tradeType&&U&&0==(null==U?void 0:U.length))&&!G&&!q){let e=El(k).filter(e=>{var t,l;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1])===(null==S||null===(l=S.tradeType)||void 0===l?void 0:l.code)}),t=[];null==e||e.map(e=>{let l=xe(null==e?void 0:e.tradeType,"-","_");e.code=null==e?void 0:e.tradeType,e.i18nKey=C("TRADELICENSE_TRADETYPE_"+xe(l,".","_")),t.push(e)});const l=Me(t,"code");B(l)}},[k,!G,W]),G||q)return n.createElement(t.Loader,null);function re(e){var t;let l=null==W||null===(t=W.filter(e=>{var t,l,n,i;return(null==e?void 0:e.tradeType)===(null==S||null===(t=S.tradeSubType)||void 0===t?void 0:t.code)&&(null==e?void 0:e.structureType)===(null==D||null===(l=D.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureSubType)||void 0===i?void 0:i.code)}))||void 0===t?void 0:t[0];return"fromUom"===e?null==l?void 0:l.fromUom:null==l?void 0:l.toUom}const ae={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"16px"}},n.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",background:"#FAFAFA"}},(null==L?void 0:L.length)>1?n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.createElement("div",{onClick:()=>b(S),style:{padding:"5px",cursor:"pointer",textAlign:"right"}},n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"5px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:"#494848"}))))):null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TRADELICENSE_TRADECATEGORY_LABEL")+" * "),n.createElement(r.Controller,{control:X,name:"tradeCategory",defaultValue:null==S?void 0:S.tradeCategory,rules:{required:C("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!1,option:P,errorStyle:!(!Z.touched.tradeCategory||null==ne||null===(l=ne.tradeCategory)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0});let i=null==t?void 0:t.code;if((null==k?void 0:k.length)>0){let e=El(k).filter(e=>{var t;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0])===i});null==e||e.map(e=>{var t,l;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[1]))});const t=Me(e,"code");J("tradeType",""),J("tradeSubType",""),J("uom",""),J("uomValue",""),M(t)}e.onChange(t)},optionKey:"i18nKey",onBlur:t=>{A({index:-1}),e.onBlur(t)},t:C})}})),n.createElement(t.CardLabelError,{style:ae},Z.touched.tradeCategory?null==ne||null===(v=ne.tradeCategory)||void 0===v?void 0:v.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TRADELICENSE_TRADETYPE_LABEL")+" * "),n.createElement(r.Controller,{control:X,name:"tradeType",defaultValue:null==S?void 0:S.tradeType,rules:{required:C("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:te("tradeType"),disable:!1,option:null!=S&&S.tradeCategory?x:[],errorStyle:!(!Z.touched.tradeType||null==ne||null===(l=ne.tradeType)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0});let i=null==t?void 0:t.code;if((null==k?void 0:k.length)>0){let e=El(k).filter(e=>{var t;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1])===i}),t=[];null==e||e.map(e=>{let l=xe(null==e?void 0:e.tradeType,"-","_");e.code=null==e?void 0:e.tradeType,e.i18nKey=C("TRADELICENSE_TRADETYPE_"+xe(l,".","_")),t.push(e)});const l=Me(t,"code");J("tradeSubType",""),J("uom",""),J("uomValue",""),B(l)}e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:C})}})),n.createElement(t.CardLabelError,{style:ae},Z.touched.tradeType?null==ne||null===(p=ne.tradeType)||void 0===p?void 0:p.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TL_NEW_TRADE_SUB_TYPE_LABEL")+" * "),n.createElement(r.Controller,{control:X,name:"tradeSubType",defaultValue:null==S?void 0:S.tradeSubType,rules:{required:C("REQUIRED_FIELD"),validate:{pattern:e=>{return!!((t=e||(null==S?void 0:S.tradeSubType))&&((null==W||null===(l=W.filter(e=>{var l,n,i;return(null==e?void 0:e.tradeType)===(null==t?void 0:t.code)&&(null==e?void 0:e.structureType)===(null==D||null===(l=D.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureSubType)||void 0===i?void 0:i.code)}))||void 0===l?void 0:l.length)<=0||null==(null==W?void 0:W.filter(e=>{var l,n,i;return(null==e?void 0:e.tradeType)===(null==t?void 0:t.code)&&(null==e?void 0:e.structureType)===(null==D||null===(l=D.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureSubType)||void 0===i?void 0:i.code)})))?(sessionStorage.setItem("isBillingSlabError",!0),0):(sessionStorage.removeItem("isBillingSlabError"),1))||C("TL_BILLING_SLAB_NOT_FOUND_FOR_COMB");var t,l}}},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:te("tradeSubType"),disable:!1,option:null!=S&&S.tradeType?ye(U,"i18nKey",C):[],errorStyle:!(!Z.touched.tradeSubType||null==ne||null===(l=ne.tradeSubType)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0}),J("uom",null!=t&&t.uom?null==t?void 0:t.uom:""),J("uomValue",""),e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:C})}})),n.createElement(t.CardLabelError,{style:ae}," ",Z.touched.tradeSubType||Z.touched.uomValue||z&&te("tradeSubType")?null==ne||null===(m=ne.tradeSubType)||void 0===m?void 0:m.message:""," "),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=S&&null!==(E=S.tradeSubType)&&void 0!==E&&E.uom?C("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")+" * ":""+C("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:X,name:"uom",defaultValue:null==S||null===(f=S.tradeSubType)||void 0===f?void 0:f.uom,render:e=>{var l;return n.createElement(t.TextInput,{value:te("uom"),autoFocus:h.index===(null==S?void 0:S.key)&&"uom"===h.type,errorStyle:!(!Z.touched.uom||null==ne||null===(l=ne.uom)||void 0===l||!l.message),onChange:t=>{e.onChange(t),A({index:S.key,type:"uom"})},disable:!0,onBlur:e.onBlur,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:ae},Z.touched.uom?null==ne||null===(_=ne.uom)||void 0===_?void 0:_.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=S&&null!==(y=S.tradeSubType)&&void 0!==y&&y.uom?C("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+" * ":C("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:X,name:"uomValue",defaultValue:null==S?void 0:S.uomValue,rules:(null==S||null===(T=S.tradeSubType)||void 0===T?void 0:T.uom)&&{required:C("REQUIRED_FIELD"),validate:{pattern:e=>{var t,l;return e>0&&e<99999?!!function(e,t,l){var n;let i=null==W||null===(n=W.filter(e=>{var t,l,n,i;return(null==e?void 0:e.tradeType)===(null==S||null===(t=S.tradeSubType)||void 0===t?void 0:t.code)&&(null==e?void 0:e.structureType)===(null==D||null===(l=D.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureSubType)||void 0===i?void 0:i.code)}))||void 0===n?void 0:n[0];return t=t||(null==i?void 0:i.fromUom),l=l||(null==i?void 0:i.toUom),!(Number.isInteger(t)&&!(e&&parseFloat(e)>=t)||Number.isInteger(l)&&!(e&&parseFloat(e)<=l))}(e,null==S||null===(t=S.tradeSubType)||void 0===t?void 0:t.fromUom,null==S||null===(l=S.tradeSubType)||void 0===l?void 0:l.toUom)||C("ERR_WRONG_UOM_VALUE")+" "+re("fromUom")+" - "+re("toUom"):C("ERR_DEFAULT_INPUT_FIELD_MSG")}}},render:e=>{var l,i;return n.createElement(t.TextInput,{value:te("uomValue"),autoFocus:h.index===(null==S?void 0:S.key)&&"uomValue"===h.type,errorStyle:!(!Z.touched.uomValue||null==ne||null===(l=ne.uomValue)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==S?void 0:S.uomValue)&&z&&K({...Y,checkForRenewal:!0}),e.onChange(t),A({index:S.key,type:"uomValue"})},disable:!(null!=S&&null!==(i=S.tradeSubType)&&void 0!==i&&i.uom),onBlur:e.onBlur,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:ae}," ",Z.touched.uomValue?null==ne||null===(g=ne.uomValue)||void 0===g?void 0:g.message:""," "))))},yn=()=>({accessoryCategory:"",count:"",uom:"",uomValue:"",key:Date.now()}),Tn=e=>{var i,o,a,u,d,s,c,v,p;const{accessor:m,focusIndex:E,allAccessoriesList:f,setFocusIndex:_,removeAccessor:y,setAccessoriesList:T,t:g,formData:S,config:h,setError:L,clearErrors:A,formState:b,accessories:N,setIsErrors:C,isErrors:D,SetAccessories:I,billingSlabData:O,setUomvalues:w,isRenewal:R,enableUOM:P,setenableUOM:x}=e,{control:M,formState:k,watch:U,setValue:B,trigger:F,getValues:H}=r.useForm(),W=U(),{errors:V}=k,j=l.useMemo(()=>{var e,t;return null==S||null===(e=S.ownershipCategory)||void 0===e||null===(t=e.code)||void 0===t?void 0:t.includes("INDIVIDUAL")},[null==S||null===(i=S.ownershipCategory)||void 0===i?void 0:i.code]);l.useEffect(()=>{F()},[]),l.useEffect(()=>{F()},[null==m||null===(o=m.accessoryCategory)||void 0===o?void 0:o.uom,null==S?void 0:S.accessories]),l.useEffect(()=>{if(O&&(null==O?void 0:O.length)>0){var e,t;const l=O&&O.reduce((e,t)=>{let l={active:!0},n={active:!0};return t.accessoryCategory&&null===t.tradeType?(l.code=t.accessoryCategory,l.uom=t.uom,l.rate=t.rate,l.fromUom=t.fromUom,l.toUom=t.toUom,t.rate&&t.rate>0&&e.accessories.push(l)):null===t.accessoryCategory&&t.tradeType&&(n.code=t.tradeType,n.uom=t.uom,n.structureType=t.structureType,n.licenseType=t.licenseType,n.rate=t.rate,n.fromUom=t.fromUom,n.toUom=t.toUom,!ze(t.rate)&&null!==t.rate&&e.tradeTypeData.push(n)),e},{accessories:[],tradeTypeData:[]}),n=Me(l.accessories,"code");let i=Me(l.tradeTypeData,"structureType");i=ke({StructureType:null===(e=i)||void 0===e?void 0:e.map(e=>({code:e.structureType,active:!0}))},"StructureType");let o=Me(l.tradeTypeData,"licenseType");o=null===(t=o)||void 0===t?void 0:t.map(e=>({code:e.licenseType,active:!0})),null==n||n.forEach(e=>{var t;e.i18nKey=g("TRADELICENSE_ACCESSORIESCATEGORY_"+xe(null==e||null===(t=e.code)||void 0===t?void 0:t.toUpperCase(),"-","_"))}),I(n)}},[O]),l.useEffect(()=>{var e;const t=Object.keys(W);null!=W&&null!==(e=W.accessoryCategory)&&void 0!==e&&e.uom||(W.uomValue="");const l={};null==t||t.forEach(e=>l[e]=m[e]);let n=j?{}:{ownerType:{code:"NONE"}};var i;je.isEqual(W,l)||(null===(i=Object.keys(W))||void 0===i||i.map(e=>{"key"==e||null==W[e]||""==W[e]||null==W[e]||D||C(!0)}),T(e=>null==e?void 0:e.map(e=>e.key&&e.key===m.key?{...e,...W,...n}:{...e})),F())},[W]),l.useEffect(()=>{var e;Object.keys(V).length&&!je.isEqual((null===(e=b.errors[h.key])||void 0===e?void 0:e.type)||{},V)?L(h.key,{type:V}):!Object.keys(V).length&&b.errors[h.key]&&D&&A(h.key)},[V]);const Y={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"16px"}},n.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",background:"#FAFAFA"}},(null==f?void 0:f.length)>1?n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.createElement("div",{onClick:()=>y(m),style:{padding:"5px",cursor:"pointer",textAlign:"right"}},n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"5px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:"#494848"}))))):null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},g("TL_NEW_TRADE_DETAILS_ACC_LABEL")+" "),n.createElement(r.Controller,{control:M,name:"accessoryCategory",defaultValue:null==m?void 0:m.accessoryCategory,render:e=>n.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:t=>{var l,n;B("uom",null!=t&&t.uom?null==t?void 0:t.uom:""),(null==t?void 0:t.uom)!==(null==m||null===(l=m.accessoryCategory)||void 0===l?void 0:l.uom)&&B("uomValue",""),e.onChange(t),w(null==m||null===(n=m.accessoryCategory)||void 0===n?void 0:n.uom),x(!0),B("uomValue",""),B("count","")},onBlur:e.onBlur,option:ye(N,"i18nKey",g)||[],optionKey:"i18nKey",t:g})})),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},H("uom")?g("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")+" * ":g("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:M,name:"uom",defaultValue:null==m||null===(a=m.accessoryCategory)||void 0===a?void 0:a.uom,render:e=>n.createElement(t.TextInput,{value:H("uom"),autoFocus:E.index===(null==m?void 0:m.key)&&"uom"===E.type,onChange:t=>{e.onChange(t.target.value),_({index:m.key,type:"uom"})},disable:!0,onBlur:e.onBlur,style:{background:"#FAFAFA"}})}))),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=m&&null!==(u=m.accessoryCategory)&&void 0!==u&&u.uom?g("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+" *  ":g("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+"  "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:M,name:"uomValue",defaultValue:null==m?void 0:m.uomValue,rules:(null==m||null===(d=m.accessoryCategory)||void 0===d?void 0:d.uom)&&{required:g("REQUIRED_FIELD"),validate:e=>{var t,l,n,i;return e>0&&e<99999?!!function(e,t,l){return!(Number.isInteger(t)&&!(e&&parseFloat(e)>=t)||Number.isInteger(l)&&!(e&&parseFloat(e)<=l))}(e,null==m||null===(t=m.accessoryCategory)||void 0===t?void 0:t.fromUom,null==m||null===(l=m.accessoryCategory)||void 0===l?void 0:l.toUom)||g("ERR_WRONG_UOM_VALUE")+" "+(null==m||null===(n=m.accessoryCategory)||void 0===n?void 0:n.fromUom)+" - "+(null==m||null===(i=m.accessoryCategory)||void 0===i?void 0:i.toUom):g("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>{var l;return n.createElement(t.TextInput,{value:H("uomValue"),autoFocus:E.index===(null==m?void 0:m.key)&&"uomValue"===E.type,errorStyle:!(!k.touched.uomValue||null==V||null===(l=V.uomValue)||void 0===l||!l.message),onChange:t=>{e.onChange(t.target.value),_({index:m.key,type:"uomValue"})},disable:!!R&&!P,onBlur:e.onBlur,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:Y},k.touched.uomValue?null==V||null===(s=V.uomValue)||void 0===s?void 0:s.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=m&&null!==(c=m.accessoryCategory)&&void 0!==c&&c.code?g("TL_ACCESSORY_COUNT_LABEL")+" * ":g("TL_ACCESSORY_COUNT_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:M,name:"count",defaultValue:null==m?void 0:m.count,rules:(null==m||null===(v=m.accessoryCategory)||void 0===v?void 0:v.code)&&{required:g("REQUIRED_FIELD"),validate:e=>!!(e&&Be("NoOfEmp").test(e)||!e)||g("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>{var l;return n.createElement(t.TextInput,{value:e.value,autoFocus:E.index===(null==m?void 0:m.key)&&"count"===E.type,errorStyle:!(!k.touched.count||null==V||null===(l=V.count)||void 0===l||!l.message),onChange:t=>{e.onChange(t.target.value),_({index:m.key,type:"count"})},onBlur:e.onBlur,disable:!!R&&!P,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:Y},k.touched.count?null==V||null===(p=V.count)||void 0===p?void 0:p.message:""))))};function gn(e){let{t:i,document:o,setDocuments:r,setError:a,documents:u,formData:d,setFormError:s,clearFormErrors:c,config:v,formState:p,id:m}=e;const E=null==u?void 0:u.filter(e=>null==e?void 0:e.documentType),f=Digit.ULBService.getCurrentTenantId(),[_,y]=l.useState(""),[T,g]=l.useState(null),[S,h]=l.useState(()=>(null==E?void 0:E.fileStoreId)||null),L="OWNERPHOTO"===(null==o?void 0:o.documentType)?".jpg,.png,.jpeg":".jpg,.png,.pdf,.jpeg",[A,b]=l.useState(!1),N=()=>{var e,t;let l=null===(e=p.errors)||void 0===e||null===(t=e[v.key])||void 0===t?void 0:t.type;Array.isArray(l)||(l=[]),l.includes(null==o?void 0:o.documentType)&&(l=l.filter(e=>e!=(null==o?void 0:o.documentType)),l.length?s(v.key,{type:l}):c(v.key))};return l.useEffect(()=>{null!=_&&_.documentType&&r(e=>{const t=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==_?void 0:_.documentType));if(0===(null==S?void 0:S.length)||null===S)return t;const l=null==t?void 0:t.filter(e=>(null==e?void 0:e.fileStoreId)!==S);return null!=_&&_.id?[...l,{documentType:null==_?void 0:_.documentType,fileStoreId:S,tenantId:f,id:null==_?void 0:_.id}]:[...l,{documentType:null==_?void 0:_.documentType,fileStoreId:S,tenantId:f}]}),A?A&&N():window.location.href.includes("renew-application-details")||(S&&null!=_&&_.documentType?S&&null!=_&&_.documentType&&N():(()=>{var e,t;let l=null===(e=p.errors)||void 0===e||null===(t=e[v.key])||void 0===t?void 0:t.type;Array.isArray(l)||(l=[]),l.includes(o.documentType)||(l.push(o.documentType),s(v.key,{type:l}))})())},[S,_,A]),l.useEffect(()=>{!function(){try{a(null);const e=function(){if(T){const e=function(e,t,l){if(null!=L&&null!==(e=L.split(","))&&void 0!==e&&e.includes("."+(null==T||null===(t=T.type)||void 0===t||null===(l=t.split("/"))||void 0===l?void 0:l.pop()))){const e=function(){if(T.size>=5242880)a(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return h(null),Promise.resolve(Digit.UploadServices.Filestorage("TL",T,Digit.ULBService.getStateId())).then(function(e){var t,l,n,o;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?h(null==e||null===(n=e.data)||void 0===n||null===(o=n.files[0])||void 0===o?void 0:o.fileStoreId):a(i("CS_FILE_UPLOAD_ERROR"))})},function(){a(i("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}else a(i("PT_UPLOAD_FORMAT_NOT_SUPPORTED"))}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),l.useEffect(()=>{var e,t;if(o&&(null==d||null===(e=d.documents)||void 0===e||null===(t=e.documents)||void 0===t?void 0:t.length)>0)for(let e=0;e<(null==d||null===(l=d.documents)||void 0===l||null===(n=l.documents)||void 0===n?void 0:n.length);e++){var l,n,i,r,a,u,s,c,v,p,m,E,f,_;(null==o?void 0:o.documentType)===(null==d||null===(i=d.documents)||void 0===i||null===(r=i.documents)||void 0===r||null===(a=r[e])||void 0===a?void 0:a.documentType)&&(y({documentType:null==d||null===(u=d.documents)||void 0===u||null===(s=u.documents)||void 0===s||null===(c=s[e])||void 0===c?void 0:c.documentType,id:null==d||null===(v=d.documents)||void 0===v||null===(p=v.documents)||void 0===p||null===(m=p[e])||void 0===m?void 0:m.id}),h(null==d||null===(E=d.documents)||void 0===E||null===(f=E.documents)||void 0===f||null===(_=f[e])||void 0===_?void 0:_.fileStoreId))}},[o]),n.createElement("div",{style:{marginBottom:"24px"}},n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},"OLDLICENCENO"!=(null==o?void 0:o.documentType)?i("TL_NEW_"+(null==o?void 0:o.documentType.replaceAll(".","_")))+" * ":i("TL_NEW_"+(null==o?void 0:o.documentType.replaceAll(".","_")))+" "),n.createElement("div",{className:"field"},n.createElement(t.UploadFile,{id:m,onUpload:e=>{!function(e,t){e.target.files[0].documentType=t,y({documentType:t}),g(e.target.files[0])}(e,null==o?void 0:o.documentType.replaceAll(".","_"))},onDelete:()=>{h(null)},message:S?"1 "+i("CS_ACTION_FILEUPLOADED"):i("CS_ACTION_NO_FILEUPLOADED"),textStyles:{width:"100%"},inputStyles:{width:"280px"},buttonType:"button"}))))}const Sn=e=>{var i,o;let{register:a,control:u,reset:d,tenantId:s,t:c,previousPage:v}=e;const{data:p,isLoading:m}=Digit.Hooks.tl.useMDMS.applicationTypes(s),E=r.useWatch({control:u,name:"applicationType"});let f=[];f=E&&"RENEWAL"===(null==E?void 0:E.code)?["EDITRENEWAL","DIRECTRENEWAL"]:E&&"NEW"===(null==E?void 0:E.code)?["NewTL"]:["EDITRENEWAL","DIRECTRENEWAL","NewTL"];const{data:_,isLoading:y}=Digit.Hooks.useApplicationStatusGeneral({businessServices:f,tenantId:s},{});let T=[];return _&&(null==_||null===(i=_.otherRoleStates)||void 0===i||i.map(e=>{T.length>0&&(null==T?void 0:T.some(t=>(null==t?void 0:t.code)===e.applicationStatus))||T.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWTL_"+(null==e?void 0:e.applicationStatus)})})),_&&(null==_||null===(o=_.userRoleStates)||void 0===o||o.map(e=>{T.length>0&&(null==T?void 0:T.some(t=>(null==t?void 0:t.code)===e.applicationStatus))||T.push({code:null==e?void 0:e.applicationStatus,i18nKey:"WF_NEWTL_"+(null==e?void 0:e.applicationStatus)})})),n.createElement(l.Fragment,null,n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_HOME_SEARCH_RESULTS_APP_NO_LABEL")),n.createElement(t.TextInput,{name:"applicationNumber",inputRef:a({})})),m?n.createElement(t.Loader,null):n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_LOCALIZATION_APPLICATION_TYPE")),n.createElement(r.Controller,{control:u,name:"applicationType",render:e=>n.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:p,optionKey:"i18nKey",t:c})})),n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_APPLICATION_FROM_DATE")),n.createElement(r.Controller,{render:e=>n.createElement(t.DatePicker,{date:e.value,onChange:e.onChange}),name:"fromDate",control:u})),n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_APPLICATION_TO_DATE")),n.createElement(r.Controller,{render:e=>n.createElement(t.DatePicker,{date:e.value,onChange:e.onChange}),name:"toDate",control:u})),n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_TRADE_LICENSE_LABEL")),n.createElement(t.TextInput,{name:"licenseNumbers",inputRef:a({})})),y?n.createElement(t.Loader,null):n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_HOME_SEARCH_RESULTS_APP_STATUS_LABEL")),n.createElement(r.Controller,{control:u,name:"status",render:e=>n.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:T,optionKey:"i18nKey",t:c})})),n.createElement(t.SearchField,null,n.createElement("label",null,c("TL_LOCALIZATION_TRADE_NAME")),n.createElement(t.TextInput,{name:"tradeName",inputRef:a({})})),n.createElement(t.SearchField,{className:"submit"},n.createElement(t.SubmitBar,{label:c("ES_COMMON_SEARCH"),submit:!0}),n.createElement("p",{onClick:()=>{d({applicationType:"",fromDate:"",toDate:"",licenseNumbers:"",status:"",tradeName:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),v()}},c("ES_COMMON_CLEAR_ALL"))))},hn=e=>{var i;let{Controller:o,register:r,control:a,t:u,reset:d,previousPage:s,handleSubmit:c,tenantId:v,data:p,onSubmit:m}=e;const[E,f]=l.useReducer(function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}},!1),_=()=>{f({type:"remove"})},y=()=>n.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:_},n.createElement(t.CloseSvg,null)),T={Controller:o,register:r,control:a,t:u,reset:d,previousPage:s},g=l.useCallback(e=>{let{currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r}=e;return(e=>{let{currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r}=e;const{closeMobilePopupModal:a}=r;switch(l){case"SearchFormComponent":return n.createElement(t.SearchForm,r,n.createElement(y,null),n.createElement("div",{className:"MobilePopupHeadingWrapper"},n.createElement("h2",null,u("ES_COMMON_SEARCH"),":")),n.createElement(Sn,Ye({},i,{closeMobilePopupModal:a,tenantId:o,t:u})));default:return n.createElement("span",null)}})({currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r})},[E]),S=l.useMemo(()=>null!=p&&p.display||""===p?[]:null==p?void 0:p.map(e=>{var t,l,n;return{[u("TL_COMMON_TABLE_COL_APP_NO")]:e.applicationNumber,[u("TL_COMMON_TABLE_COL_APP_DATE")]:Fe(null===(t=e.auditDetails)||void 0===t?void 0:t.createdTime)||"",[u("TL_APPLICATION_TYPE_LABEL")]:e.applicationType?u("TL_LOCALIZATION_APPLICATIONTYPE_"+e.applicationType):"-",[u("TL_LICENSE_NUMBERL_LABEL")]:(null==e?void 0:e.licenseNumber)||"-",[u("TL_LICENSE_YEAR_LABEL")]:e.financialYear||"",[u("TL_COMMON_TABLE_COL_TRD_NAME")]:e.tradeName||"",[u("TL_LOCALIZATION_TRADE_OWNER_NAME")]:(null==e||null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.owners)||void 0===n?void 0:n.map(e=>e.name).join(","))||"",[u("WF_INBOX_HEADER_CURRENT_OWNER")]:(null==e?void 0:e.CurrentOwners[0].currentOwner)||"",[u("TL_COMMON_TABLE_COL_STATUS")]:e.workflowCode&&e.state?u("WF_"+e.workflowCode+"_"+e.state):"NA"}}),[p]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"searchBox"},n.createElement(t.SearchAction,{text:u("ES_COMMON_SEARCH"),handleActionClick:()=>f({type:"set",payload:"SearchFormComponent"}),tenantId:v,t:u})),E?n.createElement(t.PopUp,null,n.createElement(g,{onSubmit:e=>{f({type:"remove"}),m(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:T,currentlyActiveMobileModal:E,closeMobilePopupModal:_,tenantId:v})):null,null!=p&&p.display?n.createElement(t.Card,{style:{marginTop:20}},null===(i=u(null==p?void 0:p.display).split("\\n"))||void 0===i?void 0:i.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e))):n.createElement(t.DetailsCard,{data:S,linkPrefix:"/digit-ui/employee/tl/application-details/",serviceRequestIdKey:u("TL_COMMON_TABLE_COL_APP_NO")}))},Ln=e=>{let{register:i,control:o,reset:a,t:u,previousPage:d}=e,s={};return n.createElement(l.Fragment,null,n.createElement(t.SearchField,null,n.createElement("label",null,u("TL_TRADE_LICENSE_LABEL")),n.createElement(t.TextInput,{name:"licenseNumbers",inputRef:i({})})),n.createElement(t.SearchField,null,n.createElement("label",null,u("TL_TRADE_OWNER_S_NUMBER_LABEL")),n.createElement(t.TextInput,Ye({name:"mobileNumber",inputRef:i({}),type:"mobileNumber",componentInFront:n.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91"),maxlength:10},s={pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:u("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}))),n.createElement(t.SearchField,null,n.createElement("label",null,u("TL_SEARCH_TRADE_LICENSE_ISSUED_FROM")),n.createElement(r.Controller,{render:e=>n.createElement(t.DatePicker,{date:e.value,onChange:e.onChange}),name:"fromDate",control:o})),n.createElement(t.SearchField,null,n.createElement("label",null,u("TL_SEARCH_TRADE_LICENSE_ISSUED_TO")),n.createElement(r.Controller,{render:e=>n.createElement(t.DatePicker,{date:e.value,onChange:e.onChange}),name:"toDate",control:o})),n.createElement(t.SearchField,null,n.createElement("label",null,u("TL_LOCALIZATION_TRADE_NAME")),n.createElement(t.TextInput,{name:"tradeName",inputRef:i({})})),n.createElement(t.SearchField,{className:"submit"},n.createElement(t.SubmitBar,{label:u("ES_COMMON_SEARCH"),submit:!0}),n.createElement("p",{onClick:()=>{a({licenseNumbers:"",mobileNumber:"",fromDate:"",toDate:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",status:"",RenewalPending:!0}),d()}},u("ES_COMMON_CLEAR_ALL"))))},An=e=>{var i;let{Controller:o,register:r,control:a,t:u,reset:d,previousPage:s,handleSubmit:c,tenantId:v,data:p,onSubmit:m}=e;const[E,f]=l.useReducer(function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}},!1),_=()=>{f({type:"remove"})},y=()=>n.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:_},n.createElement(t.CloseSvg,null)),T={Controller:o,register:r,control:a,t:u,reset:d,previousPage:s},g=l.useCallback(e=>{let{currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r}=e;return(e=>{let{currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r}=e;const{closeMobilePopupModal:a}=r;switch(l){case"SearchFormComponent":return n.createElement(t.SearchForm,r,n.createElement(y,null),n.createElement("div",{className:"MobilePopupHeadingWrapper"},n.createElement("h2",null,u("ES_COMMON_SEARCH"),":")),n.createElement(Ln,Ye({},i,{closeMobilePopupModal:a,tenantId:o,t:u})));default:return n.createElement("span",null)}})({currentlyActiveMobileModal:l,searchFormFieldsComponentProps:i,tenantId:o,...r})},[E]),S=l.useMemo(()=>null!=p&&p.display||""===p?[]:null==p?void 0:p.map(e=>{var t,l;return{[u("TL_TRADE_LICENSE_LABEL")]:e.licenseNumber,[u("TL_COMMON_TABLE_COL_APP_NO")]:e.applicationNumber,[u("TL_LOCALIZATION_TRADE_NAME")]:e.tradeName||"",[u("ES_APPLICATION_SEARCH_ISSUED_DATE")]:e.issuedDate?Fe(e.issuedDate):"",[u("ES_APPLICATION_SEARCH_VALID_TO")]:null!=e&&e.validTo?Fe(null==e?void 0:e.validTo):"-",[u("TL_HOME_SEARCH_RESULTS__LOCALITY")]:u(xe(null===(t=e.tenantId)||void 0===t?void 0:t.toUpperCase(),".","_")+"_REVENUE_"+e.tradeLicenseDetail.address.locality.code)||"",[u("TL_COMMON_TABLE_COL_STATUS")]:u((null==e?void 0:e.workflowCode)&&(null==e?void 0:e.status)&&"WF_"+(null==e||null===(l=e.workflowCode)||void 0===l?void 0:l.toUpperCase())+"_"+e.status||"NA")}}),[p]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"searchBox"},n.createElement(t.SearchAction,{text:u("ES_COMMON_SEARCH"),handleActionClick:()=>f({type:"set",payload:"SearchFormComponent"}),tenantId:v,t:u})),E?n.createElement(t.PopUp,null,n.createElement(g,{onSubmit:e=>{f({type:"remove"}),m(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:T,currentlyActiveMobileModal:E,closeMobilePopupModal:_,tenantId:v})):null,null!=p&&p.display?n.createElement(t.Card,{style:{marginTop:20}},null===(i=u(null==p?void 0:p.display).split("\\n"))||void 0===i?void 0:i.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e))):n.createElement(t.DetailsCard,{data:S,linkPrefix:"/digit-ui/employee/tl/application-details/",serviceRequestIdKey:u("TL_COMMON_TABLE_COL_APP_NO")}))},bn=e=>{var o;let{searchParams:r,onFilterChange:a,statuses:u,...d}=e;const{t:s}=i.useTranslation(),[c,v]=l.useState(()=>r),p=e=>{let t=e.delete,l={...c,...e};t&&(null==t||t.forEach(e=>delete l[e])),delete e.delete,v({...l})},m=()=>{v({applicationStatus:[]}),a({applicationStatus:[]})},E=Digit.ULBService.getCurrentTenantId();return n.createElement(n.Fragment,null,n.createElement("div",{className:"filter"},n.createElement("div",{className:"filter-card"},n.createElement("div",{className:"heading",style:{alignItems:"center"}},n.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},n.createElement("span",null,n.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),n.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},s("ES_COMMON_FILTER_BY"))),n.createElement("div",{className:"clearAll",onClick:m},s("ES_COMMON_CLEAR_ALL")),"desktop"===d.type&&n.createElement("span",{className:"clear-search",onClick:m,style:{border:"1px solid #e0e0e0",padding:"6px"}},n.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===d.type&&n.createElement("span",{onClick:d.onClose},n.createElement(t.CloseSvg,null))),n.createElement("div",null,n.createElement(t.RadioButtons,{onSelect:e=>p({uuid:e}),selectedOption:(null==c?void 0:c.uuid)||{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"},t:s,optionsKey:"name",options:[{code:"ASSIGNED_TO_ME",name:"ES_INBOX_ASSIGNED_TO_ME"},{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"}]}),n.createElement("div",null,n.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},s("ES_INBOX_LOCALITY"),":"),n.createElement(t.Localities,{selectLocality:e=>{p({locality:[...(null==c?void 0:c.locality)||[],e]})},tenantId:E,boundaryType:"revenue"}),n.createElement("div",{className:"tag-container"},null==c||null===(o=c.locality)||void 0===o?void 0:o.map((e,l)=>n.createElement(t.RemoveableTag,{key:l,text:s(""+e.i18nkey),onClick:()=>{p({locality:null==c?void 0:c.locality.filter(t=>t.code!==e.code)})}})))),n.createElement("div",null,n.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},s("CS_INBOX_STATUS_FILTER")),null==u?void 0:u.map((e,l)=>{var i;const o=null==c||null===(i=c.applicationStatus)||void 0===i?void 0:i.includes(e.statusid);return n.createElement(t.CheckBox,{key:l+"service",label:s("CS_COMMON_INBOX_"+e.businessservice.toUpperCase())+" - "+s("WF_NEWTL_"+e.applicationstatus)+" ("+e.count+")",value:e.statusid,checked:o,onChange:t=>((e,t)=>{p(e.target.checked?{applicationStatus:[...null!=c&&c.applicationStatus?c.applicationStatus:[],t]}:{applicationStatus:null==c?void 0:c.applicationStatus.filter(e=>e!==t)})})(t,e.statusid)})})),n.createElement("div",null,n.createElement(t.SubmitBar,{disabled:je.isEqual(c,r),onSubmit:()=>a(c),label:s("ES_COMMON_APPLY")}))))))},Nn=[{head:"",body:[{type:"component",component:"TLInfoLabel",key:"tradedetils1",withoutLabel:!0,hideInCitizen:!0}]},{head:"TL_COMMON_TR_DETAILS",body:[{type:"component",component:"TLTradeDetailsEmployee",key:"tradedetils",withoutLabel:!0,hideInCitizen:!0}]},{head:"TL_TRADE_UNITS_HEADER",body:[{type:"component",component:"TLTradeUnitsEmployee",key:"tradeUnits",withoutLabel:!0,hideInCitizen:!0}]},{head:"TL_NEW_TRADE_DETAILS_HEADER_ACC",body:[{type:"component",component:"TLAccessoriesEmployee",key:"accessories",withoutLabel:!0,hideInCitizen:!0}]},{head:"TL_NEW_APPLICATION_PROPERTY",body:[{component:"CPTPropertySearchNSummary",withoutLabel:!0,key:"cpt",type:"component",hideInCitizen:!0}]},{head:"ES_NEW_APPLICATION_LOCATION_DETAILS",body:[{route:"map",component:"TLSelectGeolocation",nextStep:"pincode",hideInEmployee:!0,key:"address",withoutLabel:!0,texts:{header:"TL_GEOLOACTION_HEADER",cardText:"TL_GEOLOCATION_TEXT",nextText:"CS_COMMON_NEXT",skipAndContinueText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"pincode",component:"TLSelectPincode",texts:{headerCaption:"TL_LOCATION_CAPTION",header:"TL_PINCODE_HEADER",cardText:"TL_PINCODE_TEXT",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,key:"address",nextStep:"address",type:"component"},{route:"address",component:"TLSelectAddress",withoutLabel:!0,texts:{headerCaption:"TL_LOCATION_CAPTION",header:"TL_ADDRESS_HEADER",cardText:"TL_ADDRESS_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"address",nextStep:"street",isMandatory:!0,type:"component"},{type:"component",route:"street",component:"TLSelectStreet",key:"address",withoutLabel:!0,hideInEmployee:!0,texts:{headerCaption:"TL_LOCATION_CAPTION",header:"TL_ADDRESS_HEADER",cardText:"TL_STREET_TEXT",submitBarLabel:"CS_COMMON_NEXT"},inputs:[{label:"TL_LOCALIZATION_STREET_NAME",type:"text",name:"street",disable:"window.location.href.includes(`edit-application`)||window.location.href.includes(`renew-trade`)"},{label:"TL_LOCALIZATION_BUILDING_NO",type:"text",name:"doorNo",disable:"window.location.href.includes(`edit-application`)||window.location.href.includes(`renew-trade`)"}],nextStep:"landmark"},{type:"component",component:"TLSelectStreet",key:"address",withoutLabel:!0,hideInCitizen:!0,texts:{headerCaption:"TL_LOCATION_CAPTION",header:"TL_ADDRESS_HEADER",cardText:"TL_STREET_TEXT",submitBarLabel:"CS_COMMON_NEXT"},inputs:[{label:"TL_LOCALIZATION_BUILDING_NO",type:"text",name:"doorNo"},{label:"TL_LOCALIZATION_STREET_NAME",type:"text",name:"street"}]},{type:"component",route:"landmark",component:"TLSelectLandmark",withoutLabel:!0,texts:{headerCaption:"TL_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TITLE",cardText:"TL_LANDMARK_TEXT",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},key:"address",nextStep:"owner-ship-details",hideInEmployee:!0},{type:"component",route:"proof",component:"TLProof",withoutLabel:!0,texts:{headerCaption:"TL_OWNERS_DETAILS",header:"TL_OWNERS_PHOTOGRAPH_HEADER",cardText:"",nextText:"CS_COMMON_NEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"owners",nextStep:null,hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"info",component:"TradeLicense",nextStep:"TradeName",hideInEmployee:!0,key:"tl"},{route:"TradeName",component:"SelectTradeName",texts:{headerCaption:"",header:"TL_TRADE_NAME_HEADER",cardText:"TL_TARDE_NAME_TEXT",submitBarLabel:"CS_COMMON_NEXT",skipText:""},withoutLabel:!0,key:"TradeDetails",nextStep:"structure-type",type:"component",hideInEmployee:!0},{type:"component",route:"structure-type",isMandatory:!0,component:"SelectStructureType",texts:{headerCaption:"TL_STRUCTURE_TYPE",header:"TL_STRUCTURE_TYPE_HEADER",cardText:"TL_STRUCTURE_TYPE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"TradeDetails",withoutLabel:!0,hideInEmployee:!0,nextStep:{TL_COMMON_YES:"Building-type",TL_COMMON_NO:"vehicle-type"}},{type:"component",route:"vehicle-type",isMandatory:!0,component:"TLSelectVehicleType",texts:{headerCaption:"TL_STRUCTURE_SUBTYPE_CAPTION",header:"TL_VEHICLE_TYPE_HEADER",cardText:"TL_VEHICLE_TYPE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"TradeDetails",withoutLabel:!0,hideInEmployee:!0,nextStep:"commencement-date"},{type:"component",route:"Building-type",isMandatory:!0,component:"SelectBuildingType",texts:{headerCaption:"TL_STRUCTURE_SUBTYPE_CAPTION",header:"TL_BUILDING_TYPE_HEADER",cardText:"TL_BUILDING_TYPE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"TradeDetails",withoutLabel:!0,hideInEmployee:!0,nextStep:"commencement-date"},{type:"component",route:"commencement-date",isMandatory:!0,component:"SelectCommencementDate",texts:{headerCaption:"",header:"TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL",cardText:"TL_TRADE_COMM_DATE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"TradeDetails",withoutLabel:!0,hideInEmployee:!0,nextStep:"units-details"},{isMandatory:!0,type:"component",route:"units-details",key:"TradeDetails",component:"SelectTradeUnits",texts:{headerCaption:"",header:"TL_TRADE_UNITS_HEADER",cardText:"TL_TRADE_UNITS_TEXT",submitBarLabel:"CS_COMMON_NEXT"},withoutLabel:!0,nextStep:"isAccessories",hideInEmployee:!0},{type:"component",route:"isAccessories",isMandatory:!0,component:"SelectAccessories",texts:{headerCaption:"",header:"TL_ISACCESSORIES_HEADER",cardText:"TL_ISACCESSORIES_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"TradeDetails",withoutLabel:!0,hideInEmployee:!0,nextStep:{TL_COMMON_YES:"accessories-details",TL_COMMON_NO:"other-trade-details"}},{isMandatory:!0,type:"component",route:"accessories-details",key:"TradeDetails",component:"SelectAccessoriesDetails",texts:{headerCaption:"",header:"TL_TRADE_ACCESSORIES_HEADER",cardText:"TL_TRADE_ACCESSORIES_TEXT",submitBarLabel:"CS_COMMON_NEXT"},withoutLabel:!0,nextStep:"other-trade-details",hideInEmployee:!0},{isMandatory:!0,type:"component",route:"other-trade-details",key:"TradeDetails",component:"SelectOtherTradeDetails",texts:{headerCaption:"",header:"TL_OTHER_TRADE_DETAILS_HEADER",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,nextStep:"know-your-property",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",body:[{type:"component",route:"owner-ship-details",isMandatory:!0,component:"TLSelectOwnerShipDetails",texts:{headerCaption:"TL_TRADE_OWNERSHIP_CAPTION",header:"TL_PROVIDE_OWNERSHIP_DETAILS",cardText:"TL_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"CS_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:"owner-details"},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"TLSelectOwnerDetails",texts:{headerCaption:"",header:"TL_OWNERSHIP_INFO_SUB_HEADER",cardText:"TL_OWNER_DETAILS_TEXT",submitBarLabel:"CS_COMMON_NEXT"},withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"TLSelectOwnerAddress",texts:{headerCaption:"TL_OWNERS_DETAILS",header:"TL_OWNERS_ADDRESS",cardText:"",submitBarLabel:"CS_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"TLSelectProofIdentity",texts:{headerCaption:"TL_OWNERS_DETAILS",header:"TL_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"CS_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:"ownership-proof",hideInEmployee:!0},{type:"component",route:"ownership-proof",isMandatory:!0,component:"SelectOwnershipProof",texts:{headerCaption:"TL_OWNERS_DETAILS",header:"TL_OWNERSHIP_DOCUMENT",cardText:"",submitBarLabel:"CS_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof",hideInEmployee:!0},{type:"component",component:"TLOwnerDetailsEmployee",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"",body:[{type:"component",route:"know-your-property",isMandatory:!0,component:"CPTKnowYourProperty",texts:{header:"PT_DO_YOU_KNOW_YOUR_PROPERTY",submitBarLabel:"CS_COMMON_NEXT"},key:"knowyourproperty",isCreateEnabled:!0,withoutLabel:!0,nextStep:{TL_COMMON_YES:"search-property",TL_COMMON_NO:"create-property"},hideInEmployee:!0},{type:"component",route:"search-property",isMandatory:!0,component:"CPTSearchProperty",key:"cptsearchproperty",withoutLabel:!0,nextStep:"search-results",hideInEmployee:!0},{type:"component",route:"search-results",isMandatory:!0,component:"CPTSearchResults",key:"cptsearchresults",withoutLabel:!0,nextStep:"property-details",hideInEmployee:!0},{type:"component",route:"create-property",isMandatory:!0,component:"CPTCreateProperty",key:"cptcreateproperty",withoutLabel:!0,isSkipEnabled:!0,nextStep:"acknowledge-create-property",hideInEmployee:!0},{type:"component",route:"acknowledge-create-property",isMandatory:!0,component:"CPTAcknowledgement",key:"cptacknowledgement",withoutLabel:!0,nextStep:"property-details",hideInEmployee:!0},{type:"component",route:"property-details",isMandatory:!0,component:"CPTPropertyDetails",key:"propertydetails",withoutLabel:!0,nextStep:"owner-ship-details",hideInEmployee:!0}]},{head:"TL_NEW_APPLICATION_DOCUMENTS_REQUIRED",body:[{component:"TLDocumentsEmployee",withoutLabel:!0,key:"documents",type:"component",hideInCitizen:!0}]}],Cn=(e,t)=>{var l;return t&&(null===(l=Object.keys(t))||void 0===l||l.map(l=>{e=e.replace(":"+l,t[l])})),e},Dn=(e,t)=>{var l;return t&&(null===(l=Object.keys(t))||void 0===l||l.map(l=>{e=e.replace(":"+l,t[l])})),e},In=e=>{let t=[];return e&&(null==e||e.map(e=>{e.documentType.includes("OWNERPHOTO")?t.OwnerPhotoProof=e:e.documentType.includes("OWNERIDPROOF")?t.ProofOfIdentity=e:e.documentType.includes("OWNERSHIPPROOF")&&(t.ProofOfOwnership=e)})),t},On=[{texts:{header:"TL_SEARCH_TRADE_HEADER",submitButtonLabel:"ES_COMMON_SEARCH",text:"TL_SEARCH_TEXT"},inputs:[{label:"TL_OWNER_MOB_NO_LABEL",type:"mobileNumber",name:"mobileNumber",error:"ERR_INVALID_MOBILE_NUMBER"},{label:"TL_TRADE_LICENSE_LABEL",type:"text",name:"LicenseNum",error:"ERR_INVALID_TRADE_LICENSE_NO"}]}];var wn="function"==typeof Symbol&&Symbol.for,Rn=wn?Symbol.for("react.element"):60103,Pn=wn?Symbol.for("react.portal"):60106,xn=wn?Symbol.for("react.fragment"):60107,Mn=wn?Symbol.for("react.strict_mode"):60108,kn=wn?Symbol.for("react.profiler"):60114,Un=wn?Symbol.for("react.provider"):60109,Bn=wn?Symbol.for("react.context"):60110,Fn=wn?Symbol.for("react.async_mode"):60111,Hn=wn?Symbol.for("react.concurrent_mode"):60111,Wn=wn?Symbol.for("react.forward_ref"):60112,Vn=wn?Symbol.for("react.suspense"):60113,jn=wn?Symbol.for("react.suspense_list"):60120,Yn=wn?Symbol.for("react.memo"):60115,Kn=wn?Symbol.for("react.lazy"):60116,zn=wn?Symbol.for("react.block"):60121,Gn=wn?Symbol.for("react.fundamental"):60117,qn=wn?Symbol.for("react.responder"):60118,$n=wn?Symbol.for("react.scope"):60119;function Xn(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Rn:switch(e=e.type){case Fn:case Hn:case xn:case kn:case Mn:case Vn:return e;default:switch(e=e&&e.$$typeof){case Bn:case Wn:case Kn:case Yn:case Un:return e;default:return t}}case Pn:return t}}}function Zn(e){return Xn(e)===Hn}var Qn={AsyncMode:Fn,ConcurrentMode:Hn,ContextConsumer:Bn,ContextProvider:Un,Element:Rn,ForwardRef:Wn,Fragment:xn,Lazy:Kn,Memo:Yn,Portal:Pn,Profiler:kn,StrictMode:Mn,Suspense:Vn,isAsyncMode:function(e){return Zn(e)||Xn(e)===Fn},isConcurrentMode:Zn,isContextConsumer:function(e){return Xn(e)===Bn},isContextProvider:function(e){return Xn(e)===Un},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Rn},isForwardRef:function(e){return Xn(e)===Wn},isFragment:function(e){return Xn(e)===xn},isLazy:function(e){return Xn(e)===Kn},isMemo:function(e){return Xn(e)===Yn},isPortal:function(e){return Xn(e)===Pn},isProfiler:function(e){return Xn(e)===kn},isStrictMode:function(e){return Xn(e)===Mn},isSuspense:function(e){return Xn(e)===Vn},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===xn||e===Hn||e===kn||e===Mn||e===Vn||e===jn||"object"==typeof e&&null!==e&&(e.$$typeof===Kn||e.$$typeof===Yn||e.$$typeof===Un||e.$$typeof===Bn||e.$$typeof===Wn||e.$$typeof===Gn||e.$$typeof===qn||e.$$typeof===$n||e.$$typeof===zn)},typeOf:Xn},Jn=s(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,l=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,E=e?Symbol.for("react.lazy"):60116,f=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,T=e?Symbol.for("react.scope"):60119;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case l:var p=e.type;switch(p){case d:case s:case i:case r:case o:case v:return p;default:var f=p&&p.$$typeof;switch(f){case u:case c:case E:case m:case a:return f;default:return t}}case n:return t}}}var S=s,h=u,L=a,A=l,b=c,N=i,C=E,D=m,I=n,O=r,w=o,R=v,P=!1;function x(e){return g(e)===s}t.AsyncMode=d,t.ConcurrentMode=S,t.ContextConsumer=h,t.ContextProvider=L,t.Element=A,t.ForwardRef=b,t.Fragment=N,t.Lazy=C,t.Memo=D,t.Portal=I,t.Profiler=O,t.StrictMode=w,t.Suspense=R,t.isAsyncMode=function(e){return P||(P=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),x(e)||g(e)===d},t.isConcurrentMode=x,t.isContextConsumer=function(e){return g(e)===u},t.isContextProvider=function(e){return g(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},t.isForwardRef=function(e){return g(e)===c},t.isFragment=function(e){return g(e)===i},t.isLazy=function(e){return g(e)===E},t.isMemo=function(e){return g(e)===m},t.isPortal=function(e){return g(e)===n},t.isProfiler=function(e){return g(e)===r},t.isStrictMode=function(e){return g(e)===o},t.isSuspense=function(e){return g(e)===v},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===s||e===r||e===o||e===v||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===E||e.$$typeof===m||e.$$typeof===a||e.$$typeof===u||e.$$typeof===c||e.$$typeof===_||e.$$typeof===y||e.$$typeof===T||e.$$typeof===f)},t.typeOf=g}()}),ei=s(function(e){e.exports="production"===process.env.NODE_ENV?Qn:Jn}),ti=Object.getOwnPropertySymbols,li=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable;function ii(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var oi=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},l=0;l<10;l++)t["_"+String.fromCharCode(l)]=l;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var l,n,i=ii(e),o=1;o<arguments.length;o++){for(var r in l=Object(arguments[o]))li.call(l,r)&&(i[r]=l[r]);if(ti){n=ti(l);for(var a=0;a<n.length;a++)ni.call(l,n[a])&&(i[n[a]]=l[n[a]])}}return i},ri="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ai=Function.call.bind(Object.prototype.hasOwnProperty),ui=function(){};if("production"!==process.env.NODE_ENV){var di=ri,si={},ci=ai;ui=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function vi(e,t,l,n,i){if("production"!==process.env.NODE_ENV)for(var o in e)if(ci(e,o)){var r;try{if("function"!=typeof e[o]){var a=Error((n||"React class")+": "+l+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}r=e[o](t,o,n,l,null,di)}catch(e){r=e}if(!r||r instanceof Error||ui((n||"React class")+": type specification of "+l+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof r+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),r instanceof Error&&!(r.message in si)){si[r.message]=!0;var u=i?i():"";ui("Failed "+l+" type: "+r.message+(null!=u?u:""))}}}vi.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(si={})};var pi=vi,mi=function(){};function Ei(){return null}function fi(){}function _i(){}"production"!==process.env.NODE_ENV&&(mi=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),_i.resetWarningCache=fi;var yi=s(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var l="function"==typeof Symbol&&Symbol.iterator,n={array:a("array"),bigint:a("bigint"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:r(Ei),arrayOf:function(e){return r(function(t,l,n,i,r){if("function"!=typeof e)return new o("Property `"+r+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var a=t[l];if(!Array.isArray(a))return new o("Invalid "+i+" `"+r+"` of type `"+s(a)+"` supplied to `"+n+"`, expected an array.");for(var u=0;u<a.length;u++){var d=e(a,u,n,i,r+"["+u+"]",ri);if(d instanceof Error)return d}return null})},element:r(function(t,l,n,i,r){var a=t[l];return e(a)?null:new o("Invalid "+i+" `"+r+"` of type `"+s(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:r(function(e,t,l,n,i){var r=e[t];return ei.isValidElementType(r)?null:new o("Invalid "+n+" `"+i+"` of type `"+s(r)+"` supplied to `"+l+"`, expected a single ReactElement type.")}),instanceOf:function(e){return r(function(t,l,n,i,r){var a;return t[l]instanceof e?null:new o("Invalid "+i+" `"+r+"` of type `"+((a=t[l]).constructor&&a.constructor.name?a.constructor.name:"<<anonymous>>")+"` supplied to `"+n+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:r(function(e,t,l,n,i){return d(e[t])?null:new o("Invalid "+n+" `"+i+"` supplied to `"+l+"`, expected a ReactNode.")}),objectOf:function(e){return r(function(t,l,n,i,r){if("function"!=typeof e)return new o("Property `"+r+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var a=t[l],u=s(a);if("object"!==u)return new o("Invalid "+i+" `"+r+"` of type `"+u+"` supplied to `"+n+"`, expected an object.");for(var d in a)if(ai(a,d)){var c=e(a,d,n,i,r+"."+d,ri);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&mi(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Ei;function t(t,l,n,r,a){for(var u=t[l],d=0;d<e.length;d++)if(i(u,e[d]))return null;var s=JSON.stringify(e,function(e,t){return"symbol"===c(t)?String(t):t});return new o("Invalid "+r+" `"+a+"` of value `"+String(u)+"` supplied to `"+n+"`, expected one of "+s+".")}return r(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&mi("Invalid argument supplied to oneOfType, expected an instance of array."),Ei;for(var t=0;t<e.length;t++){var l=e[t];if("function"!=typeof l)return mi("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+v(l)+" at index "+t+"."),Ei}return r(function(t,l,n,i,r){for(var a=[],u=0;u<e.length;u++){var d=(0,e[u])(t,l,n,i,r,ri);if(null==d)return null;d.data&&ai(d.data,"expectedType")&&a.push(d.data.expectedType)}return new o("Invalid "+i+" `"+r+"` supplied to `"+n+"`"+(a.length>0?", expected one of type ["+a.join(", ")+"]":"")+".")})},shape:function(e){return r(function(t,l,n,i,r){var a=t[l],d=s(a);if("object"!==d)return new o("Invalid "+i+" `"+r+"` of type `"+d+"` supplied to `"+n+"`, expected `object`.");for(var v in e){var p=e[v];if("function"!=typeof p)return u(n,i,r,v,c(p));var m=p(a,v,n,i,r+"."+v,ri);if(m)return m}return null})},exact:function(e){return r(function(t,l,n,i,r){var a=t[l],d=s(a);if("object"!==d)return new o("Invalid "+i+" `"+r+"` of type `"+d+"` supplied to `"+n+"`, expected `object`.");var v=oi({},t[l],e);for(var p in v){var m=e[p];if(ai(e,p)&&"function"!=typeof m)return u(n,i,r,p,c(m));if(!m)return new o("Invalid "+i+" `"+r+"` key `"+p+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[l],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var E=m(a,p,n,i,r+"."+p,ri);if(E)return E}return null})}};function i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function o(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function r(e){function t(t,l,n,i,r,a,u){if(i=i||"<<anonymous>>",a=a||n,u!==ri){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}return null==l[n]?t?new o(null===l[n]?"The "+r+" `"+a+"` is marked as required in `"+i+"`, but its value is `null`.":"The "+r+" `"+a+"` is marked as required in `"+i+"`, but its value is `undefined`."):null:e(l,n,i,r,a)}process;var l=t.bind(null,!1);return l.isRequired=t.bind(null,!0),l}function a(e){return r(function(t,l,n,i,r,a){var u=t[l];return s(u)!==e?new o("Invalid "+i+" `"+r+"` of type `"+c(u)+"` supplied to `"+n+"`, expected `"+e+"`.",{expectedType:e}):null})}function u(e,t,l,n,i){return new o((e||"React class")+": "+t+" type `"+l+"."+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function d(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var n=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var i,o=n.call(t);if(n!==t.entries){for(;!(i=o.next()).done;)if(!d(i.value))return!1}else for(;!(i=o.next()).done;){var r=i.value;if(r&&!d(r[1]))return!1}return!0;default:return!1}}function s(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function c(e){if(null==e)return""+e;var t=s(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){var t=c(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return o.prototype=Error.prototype,n.checkPropTypes=pi,n.resetWarningCache=pi.resetWarningCache,n.PropTypes=n,n}(ei.isElement):function(){function e(e,t,l,n,i,o){if(o!==ri){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var l={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_i,resetWarningCache:fi};return l.PropTypes=l,l}()});const Ti=e=>{var r;let{config:a}=e;const{t:u}=i.useTranslation(),d=o.useHistory(),[s,c]=l.useState(!1),v=Digit.UserService.getUser();let p=(null==v?void 0:v.info).mobileNumber;const m=null===(r=Digit.Hooks.tl.useTenants())||void 0===r?void 0:r.sort((e,t)=>{var l,n;return null==e||null===(l=e.i18nKey)||void 0===l||null===(n=l.localeCompare)||void 0===n?void 0:n.call(l,null==t?void 0:t.i18nKey)}),[E,f]=l.useState();l.useLayoutEffect(()=>{const e=()=>{let t=document.querySelector("div.action-bar-wrap");t?(t.style.position="static",t.style.padding="8px 0",t.style.boxShadow="none",t.style.marginBottom="16px"):setTimeout(()=>{e()},100)};e()},[]);const[_,y]=a.inputs,T=[{body:[{label:"CORE_COMMON_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:u,isMendatory:!0,option:[...m],optionKey:"i18nKey"},component:(e,l)=>n.createElement(t.Dropdown,Ye({},l,{selected:e.value,select:t=>{t.code!==E&&e.setValue("locality",null),e.onChange(t)}}))}},{label:_.label,type:_.type,populators:{name:_.name,validation:{pattern:/^[6-9]{1}[0-9]{9}$ /}},disable:!0,isMandatory:!1},{label:y.label,type:y.type,populators:{name:y.name},isMandatory:!1}]}];return n.createElement("div",{style:{marginTop:"16px"}},n.createElement(t.FormComposer,{onSubmit:function(e){try{return e.mobileNumber||e.LicenseNum?d.push("/digit-ui/citizen/tl/tradelicence/renewal-list?mobileNumber="+(null!=e&&e.mobileNumber?null==e?void 0:e.mobileNumber:"")+"&LicenseNumber="+(null!=e&&e.LicenseNum?null==e?void 0:e.LicenseNum:"")+"&tenantId="+(E||"")):alert(u("TL_ERROR_NEED_ONE_PARAM")),Promise.resolve()}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,config:T,label:a.texts.submitButtonLabel,heading:a.texts.header,text:a.texts.text,cardStyle:{margin:"auto"},headingStyle:{fontSize:"32px",marginBottom:"16px",fontFamily:"Roboto Condensed,sans-serif"},isDisabled:!s,defaultValues:{mobileNumber:p},onFormValueChange:(e,t,l)=>{var n;const i=null==t||null===(n=t[_.name])||void 0===n?void 0:n.length,o=null==t?void 0:t[y.name],r=null==t?void 0:t.city;(null==r?void 0:r.code)!==E&&f(null==r?void 0:r.code),c(!(i>0&&i<10||!r||!(o||i||r)))}}))};Ti.propTypes={loginParams:yi.any},Ti.defaultProps={loginParams:null};const gi=()=>({tradeType:"",tradeSubType:"",tradeCategory:"",uom:"",uomValue:"",key:Date.now()}),Si=e=>{var i,o,a,u,d,s,c,v,p,m,E,f,_,y,T,g;const{unit:S,focusIndex:h,allUnits:L,setFocusIndex:A,removeUnit:b,setUnits:N,t:C,formData:D,config:I,setError:O,clearErrors:w,formState:R,tradeCategoryValues:P,tradeTypeOptionsList:x,setTradeTypeOptionsList:M,tradeTypeMdmsData:k,tradeSubTypeOptionsList:U,setTradeSubTypeOptionsList:B,setTradeTypeMdmsData:F,setTradeCategoryValues:H,billingSlabTradeTypeData:W,isErrors:V,setIsErrors:j,previousLicenseDetails:Y,setPreviousLicenseDetails:K,isRenewal:z,isLoading:G}=e,{control:q,formState:$,watch:X,setValue:Z,trigger:Q,getValues:J}=r.useForm(),ee=X(),{errors:te}=$,le=l.useMemo(()=>{var e,t;return null==D||null===(e=D.ownershipCategory)||void 0===e||null===(t=e.code)||void 0===t?void 0:t.includes("INDIVIDUAL")},[null==D||null===(i=D.ownershipCategory)||void 0===i?void 0:i.code]);l.useEffect(()=>{var e,t,l,n,i,o;if((null==W?void 0:W.length)>0&&null!=D&&null!==(e=D.tradedetils)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(l=t.structureType)&&void 0!==l&&l.code&&null!=D&&null!==(n=D.tradedetils)&&void 0!==n&&null!==(i=n[0])&&void 0!==i&&null!==(o=i.structureSubType)&&void 0!==o&&o.code){let e=W.filter(e=>{var t,l,n;return(null==e?void 0:e.structureType)===(null==D||null===(t=D.tradedetils)||void 0===t||null===(l=t[0])||void 0===l||null===(n=l.structureSubType)||void 0===n?void 0:n.code.toString())});F(e);let t=El(e),l=[];null==t||t.map(e=>{var t,n;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(n=e.tradeType)||void 0===n?void 0:n.split(".")[0])),l.push(e)});const n=Me(l,"code");H(n)}},[null==D||null===(o=D.tradedetils)||void 0===o||null===(a=o[0])||void 0===a||null===(u=a.structureType)||void 0===u?void 0:u.code,!G,W,null==D||null===(d=D.tradedetils)||void 0===d||null===(s=d[0])||void 0===s||null===(c=s.structureSubType)||void 0===c?void 0:c.code]),l.useEffect(()=>{Q()},[]),l.useEffect(()=>{const e=Object.keys(ee),t={};null==e||e.forEach(e=>t[e]=S[e]);let l=le?{}:{ownerType:{code:"NONE"}};var n;je.isEqual(ee,t)||(null===(n=Object.keys(ee))||void 0===n||n.map(e=>{"key"==e||null==ee[e]||""==ee[e]||null==ee[e]||V||j(!0)}),N(e=>null==e?void 0:e.map(e=>e.key&&e.key===S.key?{...e,...ee,...l}:{...e})),Q())},[ee]),l.useEffect(()=>{var e;Object.keys(te).length&&!je.isEqual((null===(e=R.errors[I.key])||void 0===e?void 0:e.type)||{},te)?O(I.key,{type:te}):!Object.keys(te).length&&R.errors[I.key]&&V&&w(I.key)},[te]);let ne=window.location.href.includes("renew-application-details");window.location.href.includes("edit-application-details")&&(ne=!0),l.useEffect(()=>{if((null==k?void 0:k.length)>0&&ne&&!G){let e=El(k).filter(e=>{var t,l;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0])===(null==S||null===(l=S.tradeCategory)||void 0===l?void 0:l.code)});null==e||e.map(e=>{var t,l;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[1]))});const t=Me(e,"code");M(t)}},[k,!G,W]),l.useEffect(()=>{if((null==k?void 0:k.length)>0&&ne&&!G){let e=El(k).filter(e=>{var t,l;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1])===(null==S||null===(l=S.tradeType)||void 0===l?void 0:l.code)}),t=[];null==e||e.map(e=>{let l=xe(null==e?void 0:e.tradeType,"-","_");e.code=null==e?void 0:e.tradeType,e.i18nKey=C("TRADELICENSE_TRADETYPE_"+xe(l,".","_")),t.push(e)});const l=Me(t,"code");B(l)}},[k,!G,W]);const ie={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginBottom:"16px"}},n.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",background:"#FAFAFA"}},(null==L?void 0:L.length)>1?n.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},n.createElement("div",{onClick:()=>b(S),style:{padding:"5px",cursor:"pointer",textAlign:"right"}},n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"5px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:"#494848"}))))):null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TRADELICENSE_TRADECATEGORY_LABEL")+" * "),n.createElement(r.Controller,{control:q,name:"tradeCategory",defaultValue:null==S?void 0:S.tradeCategory,rules:{required:C("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!1,option:P,errorStyle:!(!$.touched.tradeCategory||null==te||null===(l=te.tradeCategory)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0});let i=null==t?void 0:t.code;if((null==k?void 0:k.length)>0){let e=El(k).filter(e=>{var t;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[0])===i});null==e||e.map(e=>{var t,l;e.code=null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1],e.i18nKey=C("TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeType)||void 0===l?void 0:l.split(".")[1]))});const t=Me(e,"code");Z("tradeType",""),Z("tradeSubType",""),Z("uom",""),Z("uomValue",""),M(t)}e.onChange(t)},optionKey:"i18nKey",onBlur:t=>{A({index:-1}),e.onBlur(t)},t:C})}})),n.createElement(t.CardLabelError,{style:ie},$.touched.tradeCategory?null==te||null===(v=te.tradeCategory)||void 0===v?void 0:v.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TRADELICENSE_TRADETYPE_LABEL")+" * "),n.createElement(r.Controller,{control:q,name:"tradeType",defaultValue:null==S?void 0:S.tradeType,rules:{required:C("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:J("tradeType"),disable:!1,option:null!=S&&S.tradeCategory?x:[],errorStyle:!(!$.touched.tradeType||null==te||null===(l=te.tradeType)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0});let i=null==t?void 0:t.code;if((null==k?void 0:k.length)>0){let e=El(k).filter(e=>{var t;return(null==e||null===(t=e.tradeType)||void 0===t?void 0:t.split(".")[1])===i}),t=[];null==e||e.map(e=>{let l=xe(null==e?void 0:e.tradeType,"-","_");e.code=null==e?void 0:e.tradeType,e.i18nKey=C("TRADELICENSE_TRADETYPE_"+xe(l,".","_")),t.push(e)});const l=Me(t,"code");Z("tradeSubType",""),Z("uom",""),Z("uomValue",""),B(l)}e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:C})}})),n.createElement(t.CardLabelError,{style:ie},$.touched.tradeType?null==te||null===(p=te.tradeType)||void 0===p?void 0:p.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},C("TL_NEW_TRADE_SUB_TYPE_LABEL")+" * "),n.createElement(r.Controller,{control:q,name:"tradeSubType",defaultValue:null==S?void 0:S.tradeSubType,rules:{required:C("REQUIRED_FIELD")},render:e=>{var l;return n.createElement(t.Dropdown,{className:"form-field",selected:J("tradeSubType"),disable:!1,option:null!=S&&S.tradeType?ye(U,"i18nKey",C):[],errorStyle:!(!$.touched.tradeSubType||null==te||null===(l=te.tradeSubType)||void 0===l||!l.message),select:t=>{var l,n;if((null==e||null===(l=e.value)||void 0===l?void 0:l.code)==(null==t?void 0:t.code))return!0;(null==t?void 0:t.code)!=(null==e||null===(n=e.value)||void 0===n?void 0:n.code)&&z&&K({...Y,checkForRenewal:!0}),Z("uom",null!=t&&t.uom?null==t?void 0:t.uom:""),Z("uomValue",""),e.onChange(t)},optionKey:"i18nKey",onBlur:e.onBlur,t:C})}})),n.createElement(t.CardLabelError,{style:ie}," ",$.touched.tradeSubType?null==te||null===(m=te.tradeSubType)||void 0===m?void 0:m.message:""," "),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=S&&null!==(E=S.tradeSubType)&&void 0!==E&&E.uom?C("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")+" * ":""+C("TL_NEW_TRADE_DETAILS_UOM_UOM_PLACEHOLDER")),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:q,name:"uom",defaultValue:null==S||null===(f=S.tradeSubType)||void 0===f?void 0:f.uom,render:e=>{var l;return n.createElement(t.TextInput,{value:J("uom"),autoFocus:h.index===(null==S?void 0:S.key)&&"uom"===h.type,errorStyle:!(!$.touched.uom||null==te||null===(l=te.uom)||void 0===l||!l.message),onChange:t=>{e.onChange(t),A({index:S.key,type:"uom"})},disable:!0,onBlur:e.onBlur,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:ie},$.touched.uom?null==te||null===(_=te.uom)||void 0===_?void 0:_.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},null!=S&&null!==(y=S.tradeSubType)&&void 0!==y&&y.uom?C("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+" * ":C("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+" "),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:q,name:"uomValue",defaultValue:null==S?void 0:S.uomValue,rules:(null==S||null===(T=S.tradeSubType)||void 0===T?void 0:T.uom)&&{required:C("REQUIRED_FIELD"),validate:{pattern:e=>{var t,l,n,i;return e>0&&e<99999?!!function(e,t,l){return!(Number.isInteger(t)&&!(e&&parseFloat(e)>=t)||Number.isInteger(l)&&!(e&&parseFloat(e)<=l))}(e,null==S||null===(t=S.tradeSubType)||void 0===t?void 0:t.fromUom,null==S||null===(l=S.tradeSubType)||void 0===l?void 0:l.toUom)||C("ERR_WRONG_UOM_VALUE")+" "+(null==S||null===(n=S.tradeSubType)||void 0===n?void 0:n.fromUom)+" - "+(null==S||null===(i=S.tradeSubType)||void 0===i?void 0:i.toUom):C("ERR_DEFAULT_INPUT_FIELD_MSG")}}},render:e=>{var l,i;return n.createElement(t.TextInput,{value:J("uomValue"),autoFocus:h.index===(null==S?void 0:S.key)&&"uomValue"===h.type,errorStyle:!(!$.touched.uomValue||null==te||null===(l=te.uomValue)||void 0===l||!l.message),onChange:t=>{t.target.value!=(null==S?void 0:S.uomValue)&&z&&K({...Y,checkForRenewal:!0}),e.onChange(t),A({index:S.key,type:"uomValue"})},disable:!(null!=S&&null!==(i=S.tradeSubType)&&void 0!==i&&i.uom),onBlur:e.onBlur,style:{background:"#FAFAFA"}})}}))),n.createElement(t.CardLabelError,{style:ie}," ",$.touched.uomValue?null==te||null===(g=te.uomValue)||void 0===g?void 0:g.message:""," "))))},hi=()=>{var e,l,i,r,a,u,d,s,c,v,p,m,E,f;const{path:_,...y}=o.useRouteMatch();let T=window.location.href.includes("acknowledgement"),g=window.location.href.includes("/tl/tradelicence/new-application/property-details");const S=Digit.ComponentRegistryService.getComponent("TLApplicationDetails"),h=null===(e=Digit)||void 0===e||null===(l=e.ComponentRegistryService)||void 0===l?void 0:l.getComponent("TLCreateTradeLicence"),L=null===(i=Digit)||void 0===i||null===(r=i.ComponentRegistryService)||void 0===r?void 0:r.getComponent("TLEditTrade"),A=null===(a=Digit)||void 0===a||null===(u=a.ComponentRegistryService)||void 0===u?void 0:u.getComponent("TLRenewTrade"),b=null===(d=Digit)||void 0===d||null===(s=d.ComponentRegistryService)||void 0===s?void 0:s.getComponent("TradeLicense"),N=null===(c=Digit)||void 0===c||null===(v=c.ComponentRegistryService)||void 0===v?void 0:v.getComponent("TLList"),C=null===(p=Digit)||void 0===p||null===(m=p.ComponentRegistryService)||void 0===m?void 0:m.getComponent("TLSearchTradeComponent"),D=null===(E=Digit)||void 0===E||null===(f=E.ComponentRegistryService)||void 0===f?void 0:f.getComponent("TLMyApplications");return n.createElement("span",{className:"tl-citizen"},n.createElement(o.Switch,null,n.createElement(t.AppContainer,null,!window.location.href.includes("/acknowledgement")&&window.location.href.includes("tl/tradelicence")&&n.createElement(t.BackButton,{isCommonPTPropertyScreen:g,isSuccessScreen:T,getBackPageNumber:()=>{let e=-1;return"true"!==sessionStorage.getItem("VisitedCommonPTSearch")||"true"!==sessionStorage.getItem("VisitedAccessoriesDetails")&&"true"!==sessionStorage.getItem("VisitedisAccessories")||!g||(e=-4,sessionStorage.removeItem("VisitedCommonPTSearch")),e}},"Back"),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/new-application",component:h}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/edit-application/:id/:tenantId",component:L}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/renew-trade/:id/:tenantId",component:A}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/my-application",component:D}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/my-bills",component:()=>n.createElement(D,{view:"bills"})}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/tl-info",component:b}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/application/:id/:tenantId",component:S}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/renewal-list",component:N}),n.createElement(t.PrivateRoute,{path:_+"/tradelicence/trade-search",component:C}))))},Li=e=>{let{businessService:r,allLinks:a,headerText:u,classNameForMobileView:d=""}=e;const{t:s}=i.useTranslation(),[c,v]=l.useState([]),{roles:p}=Digit.UserService.getUser().info;return l.useEffect(()=>{let e=a.filter(e=>e.businessService===r).filter(e=>{let{roles:t}=e;return t.some(e=>null==p?void 0:p.map(e=>{let{code:t}=e;return t}).includes(e))||!t.length});v(e)},[]),n.createElement(t.Card,{className:"employeeCard filter inboxLinks"},n.createElement("div",{className:"complaint-links-container "+d},n.createElement("div",{className:"header"},n.createElement("span",{className:"logo"},n.createElement(t.CaseIcon,null))," ",n.createElement("span",{className:"text"},s(u))),n.createElement("div",{className:"body"},null==c?void 0:c.map((e,t)=>{let{link:l,text:i,hyperlink:r=!1,accessTo:a=[]}=e;return n.createElement("span",{className:"link",key:t},r?n.createElement("a",{href:l},s(i)):n.createElement(o.Link,{to:l},s(i)))}))))},Ai=e=>{let{t:l,currentPage:i,columns:o,data:r,getCellProps:a,disableSort:u,onSort:d,onNextPage:s,onPrevPage:c,onPageSizeChange:v,pageSizeLimit:p,sortParams:m,totalRecords:E}=e;return n.createElement(t.Table,{t:l,data:r,currentPage:i,columns:o,getCellProps:a,onNextPage:s,onPrevPage:c,pageSizeLimit:p,disableSort:u,onPageSizeChange:v,onSort:d,sortParams:m,totalRecords:E})},bi={date:t.DatePicker,mobileNumber:t.MobileNumber},Ni=e=>{var o;let{onSearch:a,type:u,onClose:d,searchFields:s,searchParams:c,isInboxPage:v,clearSearch:p,setSearchFieldsBackToOriginalState:m,setSetSearchFieldsBackToOriginalState:E}=e;const{t:f}=i.useTranslation(),{handleSubmit:_,reset:y,watch:T,control:g,setError:S,clearErrors:h,formState:L,setValue:A}=r.useForm({defaultValues:c}),b=T(),N=innerWidth<=640,[C,D]=l.useState([{applicationNumber:"",mobileNumber:""}]);l.useEffect(()=>{m&&(I(),setTimeout(E(!1),1e3))},[m]);const I=()=>{if(Array.isArray(C)){let[{applicationNumber:e,mobileNumber:t}]=C;A("applicationNumber",e),A("mobileNumber",t)}else{let{applicationNumber:e,mobileNumber:t}=C;A("applicationNumber",e),A("mobileNumber",t)}};function O(){const e=s.reduce((e,t)=>({...e,[null==t?void 0:t.name]:""}),{});if(y(e),v){const e={...c};e.delete=[],null==s||s.forEach(t=>{e.delete.push(null==t?void 0:t.name)}),D({applicationNumber:"",mobileNumber:""}),a({...e})}else p()}l.useEffect(()=>{null==s||s.forEach(e=>{let{pattern:t,name:l,maxLength:n,minLength:i,errorMessages:o,...r}=e;const a=b[l],u=L.errors[l];t&&(new RegExp(t).test(a)||u?new RegExp(t).test(a)&&"pattern"===(null==u?void 0:u.type)&&h([l]):S(l,{type:"pattern",message:f(null==o?void 0:o.pattern)||f("PATTERN_"+l.toUpperCase()+"_FAILED")})),i&&((null==a?void 0:a.length)<i&&!u?S(l,{type:"minLength",message:f((null==o?void 0:o.minLength)||"MINLENGTH_"+l.toUpperCase()+"_FAILED")}):(null==a?void 0:a.length)>=i&&"minLength"===(null==u?void 0:u.type)&&h([l])),n&&((null==a?void 0:a.length)>n&&!u?S(l,{type:"maxLength",message:f((null==o?void 0:o.maxLength)||"MAXLENGTH_"+l.toUpperCase()+"_FAILED")}):(null==a?void 0:a.length)<=n&&"maxLength"===(null==u?void 0:u.type)&&h([l]))})},[b,L,S,h]);const w=e=>n.createElement(t.LinkLabel,{style:{display:"inline",...e?{margin:0}:{}},onClick:O},f("ES_COMMON_CLEAR_SEARCH"));return n.createElement("form",{onSubmit:_(e=>{0!=e.mobileNumber.length&&10!=e.mobileNumber.length||(e.mobileNumber||delete e.mobileNumber,D({mobileNumber:null==e?void 0:e.mobileNumber,applicationNumber:null==e?void 0:e.applicationNumber}),e.delete=[],null==s||s.forEach(t=>{e[t.name]||e.delete.push(t.name)}),a(e),"mobile"===u&&d())})},n.createElement(n.Fragment,null,n.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:v?"24px":"revert"}},n.createElement("div",{className:"search-complaint-container"},("mobile"===u||N)&&n.createElement("div",{className:"complaint-header"},n.createElement("h2",null,f("ES_COMMON_SEARCH_BY")),n.createElement("span",{onClick:d},n.createElement(t.CloseSvg,null))),n.createElement("div",{className:"complaint-input-container",style:{textAlign:"start"}},null==s||null===(o=s.filter(e=>!0))||void 0===o?void 0:o.map((e,l)=>{var i,o,a;return n.createElement("div",{key:e.name,className:"input-fields"},n.createElement("span",{className:"complaint-input"},n.createElement(t.Label,null,f(e.label)),n.createElement(r.Controller,e.type?{render:t=>n.createElement(null==bi?void 0:bi[e.type],{onChange:t.onChange,value:t.value}),name:e.name,control:g,defaultValue:""}:{render:e=>n.createElement(t.TextInput,{onChange:e.onChange,value:e.value}),name:e.name,control:g,defaultValue:""})),null!=L&&null!==(i=L.dirtyFields)&&void 0!==i&&i[e.name]?n.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==L||null===(o=L.errors)||void 0===o||null===(a=o[e.name])||void 0===a?void 0:a.message):null)}),"desktop"===u&&!N&&!v&&n.createElement("div",{className:"search-action-wrapper"},n.createElement(t.SubmitBar,{className:"submit-bar-search",label:f("ES_COMMON_SEARCH"),disabled:!!Object.keys(L.errors).length||Object.keys(b).every(e=>!(null!=b&&b[e])),submit:!0}),n.createElement("div",{style:{width:"100%",textAlign:"right",width:"240px",textAlign:"right",marginLeft:"96px",marginTop:"8px"}},w())),v&&n.createElement("div",{className:"search-action-wrapper",style:{width:"100%"}},"desktop"===u&&!N&&n.createElement(t.SubmitBar,{className:"submit-bar-search",label:f("ES_COMMON_SEARCH"),submit:!0}),"desktop"===u&&!N&&n.createElement("span",{style:{paddingTop:"9px"},className:"clear-search"},w()))))),("mobile"===u||N)&&n.createElement(t.ActionBar,{className:"clear-search-container"},n.createElement("button",{className:"clear-search",style:{flex:1}},w(N)),n.createElement(t.SubmitBar,{disabled:!!Object.keys(L.errors).length,label:f("ES_COMMON_SEARCH"),style:{flex:1},submit:!0}))))},Ci=e=>{var r,a;let{filterComponent:u,isLoading:d,setSearchFieldsBackToOriginalState:s,setSetSearchFieldsBackToOriginalState:c,...v}=e;const{data:p}=v,{t:m}=i.useTranslation(),[E,f]=l.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(u)}),_=e=>n.createElement("span",{className:"cell-text"},e);let y;if(v.isLoading)y=n.createElement(t.Loader,null);else if(0===(null==p||null===(r=p.table)||void 0===r?void 0:r.length)){var T;y=n.createElement(t.Card,{style:{marginTop:20}},null===(T=m("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n"))||void 0===T?void 0:T.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e)))}else(null==p||null===(a=p.table)||void 0===a?void 0:a.length)>0&&(y=n.createElement(Ai,{t:m,data:null==p?void 0:p.table,columns:[{Header:m("WF_INBOX_HEADER_APPLICATION_NO"),Cell:e=>{let{row:t}=e;return n.createElement("div",null,n.createElement("span",{className:"link"},n.createElement(o.Link,{to:"/digit-ui/employee/tl/application-details/"+t.original.applicationId},t.original.applicationId)))}},{Header:m("TL_COMMON_TABLE_COL_APP_DATE"),accessor:"applicationDate",Cell:e=>{let{row:t}=e;const l=Fe(t.original.date);return _(l)}},{Header:m("TL_COMMON_TABLE_COL_APP_TYPE"),Cell:e=>{var t;let{row:l}=e;return _(m(l.original.businessService?"CS_COMMON_INBOX_"+(null===(t=l.original.businessService)||void 0===t?void 0:t.toUpperCase()):"NA"))}},{Header:m("WF_INBOX_HEADER_LOCALITY"),Cell:e=>{let{row:t}=e;return _(m(Digit.Utils.locale.getRevenueLocalityCode(t.original.locality,t.original.tenantId)))}},{Header:m("WF_INBOX_HEADER_STATUS"),Cell:e=>{var t,l;let{row:n}=e;return _(m(n.original.businessService?"WF_"+(null===(t=n.original.businessService)||void 0===t?void 0:t.toUpperCase())+"_"+(null===(l=n.original)||void 0===l?void 0:l.status):"NA"))}},{Header:m("WF_INBOX_HEADER_CURRENT_OWNER"),Cell:e=>{var t;let{row:l}=e;return _(m(""+(null===(t=l.original)||void 0===t?void 0:t.owner)))}},{Header:m("WF_INBOX_HEADER_SLA_DAYS_REMAINING"),Cell:e=>{let{row:t}=e;return"CS_NA"===(l=t.original.sla)?m(l):isNaN(l)?n.createElement("span",{className:"sla-cell-success"},"0"):n.createElement("span",l<0?{className:"sla-cell-error"}:{className:"sla-cell-success"},l);var l}}],getCellProps:e=>({style:{minWidth:e.column.Header===m("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:v.onPageSizeChange,currentPage:v.currentPage,onNextPage:v.onNextPage,onPrevPage:v.onPrevPage,pageSizeLimit:v.pageSizeLimit,onSort:v.onSort,disableSort:v.disableSort,sortParams:v.sortParams,totalRecords:v.totalRecords}));return n.createElement("div",{className:"inbox-container"},!v.isSearch&&n.createElement("div",{className:"filters-container"},n.createElement(Li,{parentRoute:v.parentRoute,allLinks:[{text:"TL_NEW_APPLICATION",link:"/digit-ui/employee/tl/new-application",businessService:"TL",roles:["TL_CEMP"]},{text:"TL_SEARCH_APPLICATIONS",link:"/digit-ui/employee/tl/search/application",businessService:"TL",roles:["TL_FIELD_INSPECTOR","TL_APPROVER","TL_DOC_VERIFIER","TL_CEMP"]},{text:"TL_SEARCH_LICENSE",link:"/digit-ui/employee/tl/search/license",businessService:"TL",roles:["TL_APPROVER","TL_DOC_VERIFIER","TL_FIELD_INSPECTOR"]},{text:"TL_RENEWAL_HEADER",link:"/digit-ui/employee/tl/search/license",businessService:"TL",roles:["TL_CEMP"]},{text:"ACTION_TEST_DASHBOARD",link:"/digit-ui/employee/dss/dashboard/tradelicence",businessService:"TL",roles:["STADMIN"]}],headerText:m("ACTION_TEST_TRADELICENSE"),businessService:v.businessService}),n.createElement("div",null,d?n.createElement(t.Loader,null):n.createElement(E,{defaultSearchParams:v.defaultSearchParams,statuses:null==p?void 0:p.statuses,onFilterChange:v.onFilterChange,searchParams:v.searchParams,type:"desktop"}))),n.createElement("div",{style:{flex:1}},n.createElement(Ni,{defaultSearchParams:v.defaultSearchParams,onSearch:v.onSearch,type:"desktop",searchFields:v.searchFields,isInboxPage:!(null!=v&&v.isSearch),searchParams:v.searchParams,setSearchFieldsBackToOriginalState:s,setSetSearchFieldsBackToOriginalState:c}),n.createElement("div",{className:"result",style:{marginLeft:null!=v&&v.isSearch?"":"24px",flex:1}},y)))},Di=e=>{const{t:o}=i.useTranslation(),[r,a]=l.useState(()=>{var t,l;return null!==(t=e.sortParams)&&void 0!==t&&null!==(l=t[0])&&void 0!==l&&l.desc?{code:"DESC",name:o("ES_INBOX_DATE_LATEST_FIRST")}:{code:"ASC",name:o("ES_INBOX_DATE_LATEST_LAST")}});function u(){}return n.createElement(n.Fragment,null,n.createElement("div",{className:"filter"},n.createElement("div",{className:"filter-card"},n.createElement("div",{className:"heading"},n.createElement("div",{className:"filter-label"},o("SORT_BY"),":"),n.createElement("div",{className:"clearAll",onClick:u},o("ES_COMMON_CLEAR_ALL")),"desktop"===e.type&&n.createElement("span",{className:"clear-search",onClick:u},o("ES_COMMON_CLEAR_ALL")),"mobile"===e.type&&n.createElement("span",{onClick:e.onClose},n.createElement(t.CloseSvg,null))),n.createElement("div",null,n.createElement(t.RadioButtons,{onSelect:function(t){e.onSort([{id:"createdTime",desc:"DESC"===t.code}]),e.onClose()},selectedOption:r,optionsKey:"name",options:[{code:"DESC",name:o("ES_INBOX_DATE_LATEST_FIRST")},{code:"ASC",name:o("ES_INBOX_DATE_LATEST_LAST")}]})))))},Ii=e=>{let{t:i,data:o,onFilterChange:r,onSearch:a,onSort:u,serviceRequestIdKey:d,isFstpOperator:s,isLoading:c,isSearch:v,searchParams:p,searchFields:m,sortParams:E,linkPrefix:f,removeParam:_}=e;const[y,T]=l.useState(v?"SEARCH":""),[g,S]=l.useState(!!v),[h,L]=l.useState(p),[A,b]=l.useState(E);l.useEffect(()=>{y&&S(!0)},[y]);const N=()=>{S(!1),T(""),L(p),b(E)};if(c)return n.createElement(t.Loader,null);let C;var D;return o&&0!==(null==o?void 0:o.length)?o&&(null==o?void 0:o.length)>0&&(C=n.createElement(t.DetailsCard,{data:o,serviceRequestIdKey:d,linkPrefix:f||"/digit-ui/employee/tl/application-details/"})):C=n.createElement(t.Card,{style:{marginTop:20}},null===(D=i("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n"))||void 0===D?void 0:D.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e))),n.createElement(n.Fragment,null,n.createElement("div",{className:"searchBox"},a&&n.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:()=>{T("SEARCH"),S(!0)}}),!v&&r&&n.createElement(t.FilterAction,{text:"FILTER",handleActionClick:()=>{T("FILTER"),S(!0)}}),n.createElement(t.FilterAction,{text:"SORT",handleActionClick:()=>{T("SORT"),S(!0)}})),C,g&&n.createElement(t.PopUp,null,"FILTER"===y&&n.createElement("div",{className:"popup-module"},n.createElement(bn,{onFilterChange:e=>{L(t=>({...t,...e}))},onClose:N,onSearch:e=>{r({...h,...e}),T(""),S(!1)},type:"mobile",searchParams:h,removeParam:_})),"SORT"===y&&n.createElement("div",{className:"popup-module"},n.createElement(Di,{type:"mobile",sortParams:E,onClose:N,onSort:u})),"SEARCH"===y&&n.createElement("div",{className:"popup-module"},n.createElement(Ni,{type:"mobile",onClose:N,onSearch:a,isFstpOperator:s,searchParams:p,searchFields:m}))))},Oi=e=>{let{data:t,isLoading:l,onSearch:o,onFilterChange:r,onSort:a,searchParams:u,searchFields:d,linkPrefix:s,parentRoute:c,removeParam:v,sortParams:p}=e;const{t:m}=i.useTranslation();return n.createElement("div",{style:{padding:0}},n.createElement("div",{className:"inbox-container"},n.createElement("div",{className:"filters-container"},n.createElement(Li,{classNameForMobileView:"linksWrapperForMobileInbox",linkPrefix:c,allLinks:[{text:"TL_NEW_APPLICATION",link:"/digit-ui/employee/tl/new-application",businessService:"TL",roles:["TL_CEMP"]},{text:"TL_SEARCH_APPLICATIONS",link:"/digit-ui/employee/tl/search/application",businessService:"TL",roles:["TL_FIELD_INSPECTOR","TL_APPROVER","TL_DOC_VERIFIER","TL_CEMP"]},{text:"TL_SEARCH_LICENSE",link:"/digit-ui/employee/tl/search/license",businessService:"TL",roles:["TL_APPROVER","TL_DOC_VERIFIER","TL_FIELD_INSPECTOR"]},{text:"TL_RENEWAL_HEADER",link:"/digit-ui/employee/tl/search/license",businessService:"TL",roles:["TL_CEMP"]},{text:"ACTION_TEST_DASHBOARD",link:"/digit-ui/employee/dss/dashboard/tradelicence",businessService:"TL",roles:["STADMIN"]}],headerText:m("ACTION_TEST_TRADELICENSE"),isMobile:!0}),n.createElement(Ii,{t:m,data:null==t||null===(E=t.table)||void 0===E?void 0:E.map(e=>{var t,l;return{[m("WF_INBOX_HEADER_APPLICATION_NO")]:null==e?void 0:e.applicationId,[m("TL_COMMON_TABLE_COL_APP_DATE")]:Fe(null==e?void 0:e.date),[m("TL_COMMON_TABLE_COL_APP_TYPE")]:m(null!=e&&e.businessService?"CS_COMMON_INBOX_"+(null==e||null===(t=e.businessService)||void 0===t?void 0:t.toUpperCase()):"NA"),[m("WF_INBOX_HEADER_LOCALITY")]:m(Digit.Utils.locale.getRevenueLocalityCode(null==e?void 0:e.locality,null==e?void 0:e.tenantId)),[m("WF_INBOX_HEADER_STATUS")]:m(null!=e&&e.businessService?"WF_"+(null===(l=e.businessService)||void 0===l?void 0:l.toUpperCase())+"_"+(null==e?void 0:e.status):"NA"),[m("WF_INBOX_HEADER_CURRENT_OWNER")]:m(null==e?void 0:e.owner),[m("WF_INBOX_HEADER_SLA_DAYS_REMAINING")]:m(null==e?void 0:e.sla)}}),onFilterChange:r,serviceRequestIdKey:m("WF_INBOX_HEADER_APPLICATION_NO"),isLoading:l,onSearch:o,onSort:a,searchParams:u,searchFields:d,linkPrefix:s,removeParam:v,sortParams:p}))));var E},wi=e=>{var o,r,a,u;let{parentRoute:d,businessService:s="TL",initialStates:c={},filterComponent:v,isInbox:p}=e;const m=Digit.ULBService.getCurrentTenantId(),[E,f]=l.useState(()=>p?{}:{enabled:!1}),{t:_}=i.useTranslation(),[y,T]=l.useState((null==c?void 0:c.pageOffset)||0),[g,S]=l.useState((null==c?void 0:c.pageSize)||10),[h,L]=l.useState((null==c?void 0:c.sortParams)||[{id:"applicationDate",desc:!1}]),[A,b]=l.useState(!1),[N,C]=l.useState(()=>(null==c?void 0:c.searchParams)||{});let D=window.Digit.Utils.browser.isMobile(),I=D?{limit:100,offset:0,sortBy:null==h||null===(o=h[0])||void 0===o?void 0:o.id,sortOrder:null!=h&&null!==(r=h[0])&&void 0!==r&&r.desc?"DESC":"ASC"}:{limit:g,offset:y,sortBy:null==h||null===(a=h[0])||void 0===a?void 0:a.id,sortOrder:null!=h&&null!==(u=h[0])&&void 0!==u&&u.desc?"DESC":"ASC"};const{isLoading:O,data:w,...R}=Digit.Hooks.tl.useInbox({tenantId:m,filters:{...N,...I,sortParams:h},config:{}});l.useEffect(()=>{T(0)},[N]);const P=e=>{var t;let l=null==e?void 0:e.delete,n={};D?n={...e}:(window.scrollTo(0,0),n={...N,...e}),l&&(null==l||l.forEach(e=>delete n[e])),null===(t=n)||void 0===t||delete t.delete,null==e||delete e.delete,b(!0),C({...n}),f({enabled:!0})},x=l.useCallback(e=>{0!==e.length&&L(e)},[]),M=()=>[{label:_("TL_HOME_SEARCH_RESULTS_APP_NO_LABEL"),name:"applicationNumber"},{label:_("CORE_COMMON_MOBILE_NUMBER"),name:"mobileNumber",maxlength:10,pattern:Digit.Utils.getPattern("MobileNo"),type:"mobileNumber",title:_("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"}];return D?n.createElement(Oi,{data:w,isLoading:O,searchFields:M(),onFilterChange:P,onSearch:P,onSort:x,parentRoute:d,searchParams:N,sortParams:h}):n.createElement("div",null,p&&n.createElement(t.Header,null,_("ES_COMMON_INBOX"),null!=w&&w.totalCount?n.createElement("p",{className:"inbox-count"},null==w?void 0:w.totalCount):null),n.createElement(Ci,{businessService:s,data:w,tableConfig:null==R?void 0:R.tableConfig,isLoading:O,defaultSearchParams:c.searchParams,isSearch:!p,onFilterChange:P,searchFields:M(),setSearchFieldsBackToOriginalState:A,setSetSearchFieldsBackToOriginalState:b,onSearch:P,onSort:x,onNextPage:()=>{T(e=>e+g)},onPrevPage:()=>{T(e=>e-g)},currentPage:Math.floor(y/g),pageSizeLimit:g,disableSort:!1,onPageSizeChange:e=>{S(Number(e.target.value))},parentRoute:d,searchParams:N,sortParams:h,totalRecords:Number(null==w?void 0:w.totalCount),filterComponent:v}))},Ri=e=>n.createElement("h1",{className:"heading-m"},e.label),Pi=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),xi=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Pi,null)),Mi=e=>{var i,o;let{t:r,action:a,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v,moduleCode:p}=e;const{data:m,isLoading:E}=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(i=a.assigneeRoles)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),{isLoading:f,data:_}=Digit.Hooks.pt.useMDMS(u,v,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),[y,T]=l.useState({}),[g,S]=l.useState({}),[h,L]=l.useState([]),[A,b]=l.useState(null),[N,C]=l.useState(null),[D,I]=l.useState(null),[O,w]=l.useState(null),[R,P]=l.useState([]),[x,M]=l.useState(null),[k,U]=l.useState(!1);function B(e){C(e.target.files[0])}return l.useEffect(()=>{var e;_&&_["egf-master"]&&P(null===(e=_["egf-master"])||void 0===e?void 0:e.FinancialYear)},[_]),l.useEffect(()=>{var e;L(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),l.useEffect(()=>{!function(){try{w(null);const e=function(){if(N){const e=function(){if(N.size>=5242880)w(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",N,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?I(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):w(r("CS_FILE_UPLOAD_ERROR"))})},function(){w(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),l.useEffect(()=>{a&&T(null!=a&&a.showFinancialYearsModal?(e=>{let{t:l,action:i,financialYears:o,selectedFinancialYear:r,setSelectedFinancialYear:a}=e;return{label:{heading:"WF_"+i.action+"_APPLICATION",submit:"WF_PT.CREATE_"+i.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:l("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:n.createElement(t.RadioButtons,{options:o,optionsKey:"name",onSelect:a,selectedOption:r})}]}]}})({t:r,action:a,financialYears:R,selectedFinancialYear:x,setSelectedFinancialYear:M}):(e=>{var l;let{t:i,action:o,approvers:r,selectedApprover:a,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p}=e;return{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:i(v||"WF_ROLE_"+(null===(l=o.assigneeRoles)||void 0===l?void 0:l[0])),type:"dropdown",populators:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:n.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:i("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:i("ES_PT_ATTACH_FILE")+(o.docUploadRequired?" *":""),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,hintText:i("PT_ATTACH_RESTRICTIONS_SIZE"),message:s?"1 "+i("ES_PT_ACTION_FILEUPLOADED"):i("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}})({t:r,action:a,approvers:h,selectedApprover:A,setSelectedApprover:b,selectFile:B,uploadedFile:D,setUploadedFile:I,businessService:v}))},[a,h,R,x,D]),a&&y.form?n.createElement(t.Modal,{headerBarMain:n.createElement(Ri,{label:r(y.label.heading)}),headerBarEnd:n.createElement(xi,{onClick:d}),actionCancelLabel:r(y.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(y.label.submit),actionSaveOnSubmit:()=>{},isDisabled:a.showFinancialYearsModal?!x:E||(null==a?void 0:a.docUploadRequired)&&!D,formId:"modal-action"},f?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:y.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if("INACTIVE_PROPERTY"==(null==a?void 0:a.action)){let t={action:"OPEN",comment:null==e?void 0:e.comments,businessService:"PT.CREATE",moduleName:"PT"};c.creationReason="STATUS",s({customFunctionToExecute:null==a?void 0:a.customFunctionToExecute,Property:{...c,workflow:t}})}else if(null!=a&&a.showFinancialYearsModal)s({customFunctionToExecute:null==a?void 0:a.customFunctionToExecute,Assessment:{financialYear:null==x?void 0:x.name,propertyId:null==c?void 0:c.propertyId,tenantId:u,source:null==c?void 0:c.source,channel:null==c?void 0:c.channel,assessmentDate:Date.now()}});else{let t={action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,businessService:v,moduleName:p};t.assignes=null!=a&&a.isTerminateState||!A?[]:[A],D&&(t.documents=[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:D}]),s({Property:{...c,workflow:t}})}},defaultValues:g,formId:"modal-action"})):n.createElement(t.Loader,null)},ki=e=>n.createElement("h1",{className:"heading-m"},e.label),Ui=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Bi=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Ui,null)),Fi=e=>{var i,o;let{t:r,action:a,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p}=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(i=a.assigneeRoles)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),{isLoading:m,data:E}=Digit.Hooks.pt.useMDMS(u,v,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),[f,_]=l.useState({}),[y,T]=l.useState({}),[g,S]=l.useState([]),[h,L]=l.useState({}),[A,b]=l.useState(null),[N,C]=l.useState(null),[D,I]=l.useState(null),[O,w]=l.useState([]),[R,P]=l.useState(null);function x(e){b(e.target.files[0])}return l.useEffect(()=>{var e;E&&E["egf-master"]&&w(null===(e=E["egf-master"])||void 0===e?void 0:e.FinancialYear)},[E]),l.useEffect(()=>{var e;S(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),l.useEffect(()=>{!function(){try{I(null);const e=function(){if(A){const e=function(){if(A.size>=5242880)I(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",A,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?C(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):I(r("CS_FILE_UPLOAD_ERROR"))})},function(){I(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]),l.useEffect(()=>{a&&_((e=>{let{t:l,action:i,approvers:o,selectedApprover:r,setSelectedApprover:a,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c}=e,v=!0;return"SENDBACKTOCITIZEN"!=(null==i?void 0:i.action)&&"APPROVE"!=(null==i?void 0:i.action)||(v=!1),i.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:v?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?n.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:r}):null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED")})}]}]}})({t:r,action:a,approvers:g,selectedApprover:h,setSelectedApprover:L,selectFile:x,uploadedFile:N,setUploadedFile:C,businessService:v}))},[a,g,O,R,N]),a&&f.form?n.createElement(t.Modal,{headerBarMain:n.createElement(ki,{label:r(f.label.heading)}),headerBarEnd:n.createElement(Bi,{onClick:d}),actionCancelLabel:r(f.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(f.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},m?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:f.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=h&&h.uuid?[null==h?void 0:h.uuid]:null,wfDocuments:N?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==A?void 0:A.name,fileStoreId:N}]:null},s({Licenses:[c]})},defaultValues:y,formId:"modal-action"})):n.createElement(t.Loader,null)},Hi=e=>n.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Wi=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Vi=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Wi,null)),ji=e=>{var i,o;let{t:r,action:a,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p,isLoading:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(i=a.assigneeRoles)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),[E,f]=l.useState({}),[_,y]=l.useState({}),[T,g]=l.useState([]),[S,h]=l.useState({}),[L,A]=l.useState(null),[b,N]=l.useState(null),[C,D]=l.useState(null),I=!!Digit.Utils.browser.isMobile();function O(e){A(e.target.files[0])}return l.useEffect(()=>{var e;g(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),l.useEffect(()=>{!function(){try{D(null);const e=function(){if(L){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(L.size>=5242880)D(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=L&&L.type&&!e.test(null==L?void 0:L.type))D(r("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",L,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?N(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):D(r("CS_FILE_UPLOAD_ERROR"))})},function(){D(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[L]),l.useEffect(()=>{a&&f((e=>{let{t:l,action:i,approvers:o,selectedApprover:r,setSelectedApprover:a,selectFile:u,uploadedFile:d,setUploadedFile:s,businessService:c,error:v}=e,p=!0;return"SENDBACKTOCITIZEN"==(null==i?void 0:i.action)&&(p=!1),i.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:p?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?n.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:r}):null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{s(null)},message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:r,action:a,approvers:T,selectedApprover:S,setSelectedApprover:h,selectFile:O,uploadedFile:b,setUploadedFile:N,businessService:v,error:C}))},[a,T,b,C]),a&&E.form?n.createElement(t.Modal,{headerBarMain:n.createElement(Hi,{label:r(E.label.heading)}),headerBarEnd:n.createElement(Vi,{onClick:d}),actionCancelLabel:r(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:I?{width:"720px"}:{},style:I?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:I?{paddingLeft:"5px"}:{}},m?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:E.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){c={...c,action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=S&&S.uuid?[null==S?void 0:S.uuid]:null,wfDocuments:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:null},s({Licenses:[c]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:_,formId:"modal-action"})):n.createElement(t.Loader,null)},Yi=e=>n.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),Ki=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),zi=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Ki,null)),Gi=e=>{var i,o,r,u,d,s,c,v,p,m,E,f;let{t:_,action:y,tenantId:T,closeModal:g,submitAction:S,applicationDetails:h,applicationData:L,businessService:A,workflowDetails:b}=e;Digit.Hooks.obps.useObpsAPI(null!==(i=L)&&void 0!==i&&null!==(o=i.landInfo)&&void 0!==o&&null!==(r=o.address)&&void 0!==r&&r.city?null===(u=L)||void 0===u||null===(d=u.landInfo)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.city:T,!1);const{data:N,isLoading:C}=Digit.Hooks.useEmployeeSearch(T,{roles:null==b||null===(c=b.data)||void 0===c||null===(v=c.initialActionState)||void 0===v||null===(p=v.nextActions)||void 0===p||null===(m=p.filter(e=>(null==e?void 0:e.action)==(null==y?void 0:y.action)))||void 0===m||null===(E=m[0])||void 0===E||null===(f=E.assigneeRoles)||void 0===f?void 0:f.map(e=>({code:e})),isActive:!0},{enabled:!(null!=y&&y.isTerminateState)}),[D,I]=(a.useQueryClient(),l.useState({})),[O,w]=l.useState({}),[R,P]=l.useState([]),[x,M]=l.useState({}),[k,U]=l.useState(null),[B,F]=l.useState(null),[H,W]=l.useState(null),[V,j]=l.useState(null),Y=!!Digit.Utils.browser.isMobile();function K(e){U(e.target.files[0])}l.useEffect(()=>{var e;P(null==N||null===(e=N.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[N]),l.useEffect(()=>{!function(){try{W(null);const e=function(){if(k){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(k.size>=5242880)W(_("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=k&&k.type&&!e.test(null==k?void 0:k.type))W(_("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",k,Digit.ULBService.getStateId()||(null==T?void 0:T.split(".")[0]))).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?F(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):W(_("CS_FILE_UPLOAD_ERROR"))})},function(){W(_("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[k]);const z=e=>{let t=[];return e&&e.map((e,l)=>{t.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),t},G=e=>{let t=[];var l;for(l=0;l<(null==e?void 0:e.questionLength);l++){var n;t.push({remarks:e["Remarks_"+l],question:null==e?void 0:e.questionList[l].question,value:null==e||null===(n=e["question_"+l])||void 0===n?void 0:n.code})}return t},q=e=>{var t,l;let n=[],i=[];var o,r;return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(l=t.fieldinspection_pending)||void 0===l?void 0:l.length)>0&&(i=null==e||null===(o=e.additionalDetails)||void 0===o?void 0:o.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?(n=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")),(null===(r=n)||void 0===r?void 0:r.length)>0&&n.map((e,t)=>{i.push({docs:z(e.Documents),date:e.InspectionDate,questions:G(e),time:null==e?void 0:e.InspectionTime})}),i=i.filter(e=>e.docs&&e.docs.length>0)):sessionStorage.removeItem("INSPECTION_DATA"),[...i]},$=e=>{let t=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),l=[];return t.map(e=>{var t,n,i,o,r,a;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.values)||void 0===i?void 0:i.length)>0&&(l=[...l,...null==e||null===(o=e.uploadedDocuments)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.values]),(null==e||null===(a=e.newUploadedDocs)||void 0===a?void 0:a.length)>0&&(l=[...l,...null==e?void 0:e.newUploadedDocs])}),l},X=()=>{var e;const t=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),l=Digit.SessionStorage.get("OBPS_NEW_APPROVALS");let n=null==t?void 0:t.reduce((e,t)=>null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e,[]);return n=null===(e=n)||void 0===e?void 0:e.concat(null!==l?l.filter(e=>""!==e.label).map(e=>null==e?void 0:e.label):[]),n};return l.useEffect(()=>{y&&I((e=>{var l;let{t:i,action:o,approvers:r,selectedApprover:a,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p,error:m}=e,E=!1;return"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"SKIP_PAYMENT"!=o.action&&"SEND_BACK_TO_CITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(E=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:o.isTerminateState||E?null:i(v||"WF_ROLE_"+(null===(l=o.assigneeRoles)||void 0===l?void 0:l[0])),type:"dropdown",populators:o.isTerminateState||E?null:n.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:i("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:!0,populators:{name:"comments"}},{label:""+i("WF_APPROVAL_UPLOAD_HEAD"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+i("ES_PT_ACTION_FILEUPLOADED"):i("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}})({t:_,action:y,approvers:R,selectedApprover:x,setSelectedApprover:M,selectFile:K,uploadedFile:B,setUploadedFile:F,businessService:A,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:H}))},[y,R,V,B,H]),y&&D.form?n.createElement(t.Modal,{headerBarMain:n.createElement(Yi,{label:_(D.label.heading)}),headerBarEnd:n.createElement(zi,{onClick:g}),actionCancelLabel:_(D.label.cancel),actionCancelOnSubmit:g,actionSaveLabel:_(D.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:Y?{width:"720px"}:{},style:Y?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:Y?{paddingLeft:"5px"}:{}},C?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:D.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var t,l,n,i,o,r;L={...L,documents:$(),additionalDetails:{...null===(t=L)||void 0===t?void 0:t.additionalDetails,fieldinspection_pending:q(L),pendingapproval:X()},workflow:{action:null==y?void 0:y.action,comment:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,assignee:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,assignes:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,varificationDocuments:B?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==k?void 0:k.name,fileStoreId:B}]:null},action:null==y?void 0:y.action,comment:null==e?void 0:e.comments,assignee:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,wfDocuments:B?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==k?void 0:k.name,fileStoreId:B}]:null};const a=null==h||null===(i=h.nocData)||void 0===i?void 0:i.map(e=>{const t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:{...e,documents:[...null!=e&&e.documents?null==e?void 0:e.documents:[],...t||[]]}}});let u={sourceRefId:null==a||null===(o=a[0])||void 0===o||null===(r=o.Noc)||void 0===r?void 0:r.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(T,u)).then(function(e){var t;let l=!0,n=!0;null==e||null===(t=e.Noc)||void 0===t||t.map(e=>{var t,i,o,r,a;"APPROVED"!==(null==e||null===(t=e.applicationStatus)||void 0===t?void 0:t.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"REJECTED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"VOIDED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())||1!=l&&1!=n||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?l=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(n=!1))});let i=[];a&&a.map(e=>{var t,o,r,a,u,d,s,c,v,p,m,E;("APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(o=t.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(r=e.Noc)||void 0===r||null===(a=r.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(d=u.applicationStatus)||void 0===d?void 0:d.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(s=e.Noc)||void 0===s||null===(c=s.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"VOIDED"!=(null==e||null===(v=e.Noc)||void 0===v||null===(p=v.applicationStatus)||void 0===p?void 0:p.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(m=e.Noc)||void 0===m?void 0:m.nocType)&&l||"FIRE_NOC"===(null==e||null===(E=e.Noc)||void 0===E?void 0:E.nocType)&&n)&&i.push(e)}),S({BPA:L},(null==i?void 0:i.length)>0&&i,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}},defaultValues:O,formId:"modal-action"})):n.createElement(t.Loader,null)},qi=e=>n.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),$i=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Xi=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement($i,null)),Zi=e=>{var i,r;let{t:u,action:d,tenantId:s,closeModal:c,submitAction:v,applicationData:p,businessService:m}=e;const{data:E,isLoading:f}=Digit.Hooks.useEmployeeSearch(s,{roles:null==d||null===(i=d.assigneeRoles)||void 0===i||null===(r=i.map)||void 0===r?void 0:r.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=d&&d.isTerminateState)}),[_,y]=(a.useQueryClient(),l.useState({})),[T,g]=l.useState({}),[S,h]=l.useState([]),[L,A]=l.useState({}),[b,N]=l.useState(null),[C,D]=l.useState(null),[I,O]=l.useState(null),w=!!Digit.Utils.browser.isMobile();function R(e){N(e.target.files[0])}return o.useHistory(),l.useEffect(()=>{var e;h(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[E]),l.useEffect(()=>{!function(){try{O(null);const e=function(){if(b){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(b.size>=5242880)O(u("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=b&&b.type&&!e.test(null==b?void 0:b.type))O(u("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",b,Digit.ULBService.getStateId()||(null==s?void 0:s.split(".")[0]))).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?D(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):O(u("CS_FILE_UPLOAD_ERROR"))})},function(){O(u("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[b]),l.useEffect(()=>{d&&y((e=>{var l;let{t:i,action:o,approvers:r,selectedApprover:a,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,assigneeLabel:v,businessService:p,error:m}=e,E=!1;"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)||(E=!0);let f=!1;return"APPROVE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"AUTO_APPROVE"!=o.action&&"AUTO_REJECT"!=o.action||(f=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+p+"_"+(null==o?void 0:o.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:o.isTerminateState||f?null:i(v||"WF_ROLE_"+(null===(l=o.assigneeRoles)||void 0===l?void 0:l[0])),type:"dropdown",populators:o.isTerminateState||f?null:n.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:i("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:E,populators:{name:"comments"}},{label:""+i("WF_APPROVAL_UPLOAD_HEAD"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:()=>{c(null)},showHint:!0,message:s?"1 "+i("ES_PT_ACTION_FILEUPLOADED"):i("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}})({t:u,action:d,approvers:S,selectedApprover:L,setSelectedApprover:A,selectFile:R,uploadedFile:C,setUploadedFile:D,businessService:m,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:I}))},[d,S,C,I]),d&&_.form?n.createElement(t.Modal,{headerBarMain:n.createElement(qi,{label:u(_.label.heading)}),headerBarEnd:n.createElement(Xi,{onClick:c}),actionCancelLabel:u(_.label.cancel),actionCancelOnSubmit:c,actionSaveLabel:u(_.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:w?{width:"720px"}:{},style:w?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:w?{paddingLeft:"5px"}:{}},f?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:_.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,l,n;let i=JSON.parse(sessionStorage.getItem("NewNOCDocs")),o=(null===(t=p)||void 0===t||null===(l=t.documents)||void 0===l?void 0:l.length)>0?[...null===(n=p)||void 0===n?void 0:n.documents]:[];i.map((e,t)=>{o.push(e)}),p={...p,workflow:{action:null==d?void 0:d.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=L&&L.uuid?[null==L?void 0:L.uuid]:null,documents:C?[{documentType:(null==d?void 0:d.action)+" DOC",fileName:null==b?void 0:b.name,fileStoreId:C}]:null},documents:o},v({Noc:p},!1,{isNoc:!0})},defaultValues:T,formId:"modal-action"})):n.createElement(t.Loader,null)},Qi=e=>n.createElement("h1",{className:"heading-m"},e.label),Ji=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),eo=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Ji,null)),to=function(e,t){void 0===t&&(t="dayend");try{const l=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),n=new Date(Date.UTC(l[1],l[2]-1,l[3]));return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),"dayend"===t&&(n.setHours(n.getHours()+24),n.setSeconds(n.getSeconds()-1)),n.getTime()}catch(t){return e}},lo=e=>{var i,o;let{t:r,action:a,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v}=e;const{data:p,isLoading:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(i=a.assigneeRoles)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),[E,f]=l.useState({}),[_,y]=l.useState({}),[T,g]=l.useState([]),[S,h]=l.useState({}),[L,A]=l.useState(null),[b,N]=l.useState(null),[C,D]=l.useState(null),I=window.Digit.Utils.browser.isMobile(),O=window.location.href.includes("/employee");function w(e){A(e.target.files[0])}return l.useEffect(()=>{var e;g(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),l.useEffect(()=>{!function(){try{D(null);const e=function(){if(L){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(L.size>=5242880)D(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=L&&L.type&&!e.test(null==L?void 0:L.type))D(r("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",L,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?N(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):D(r("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),D(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[L]),l.useEffect(()=>{var e,l,i,o;"DisconnectWSConnection"==(null===(e=c)||void 0===e||null===(l=e.processInstance)||void 0===l?void 0:l.businessService)||"DisconnectSWConnection"==(null===(i=c)||void 0===i||null===(o=i.processInstance)||void 0===o?void 0:o.businessService)?a&&f((e=>{var l;let{t:i,action:o,approvers:r,selectedApprover:a,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,businessService:v,error:p}=e,m=!0,E=!1;return(null!=o&&null!==(l=o.action)&&void 0!==l&&l.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==o?void 0:o.action)||"RESUBMIT_APPLICATION"==(null==o?void 0:o.action))&&(m=!1),o.isTerminateState&&(m=!1),"EXECUTE_DISCONNECTION"!=(null==o?void 0:o.action)&&"DISCONNECTION_EXECUTED"!=(null==o?void 0:o.action)||(E=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?i("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?i("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?n.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a}):null},E&&{label:i("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!E,type:"custom",populators:E?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:(e,l)=>n.createElement(t.DatePicker,Ye({onChange:e.onChange,date:e.value},l))}:null},{label:i("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:i("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+i("ES_PT_ACTION_FILEUPLOADED"):i("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:r,action:a,approvers:T,selectedApprover:S,setSelectedApprover:h,selectFile:w,uploadedFile:b,setUploadedFile:N,businessService:v,error:C})):a&&f((e=>{var l;let{t:i,action:o,approvers:r,selectedApprover:a,setSelectedApprover:u,selectFile:d,uploadedFile:s,setUploadedFile:c,businessService:v,error:p}=e,m=!0;return(null!=o&&null!==(l=o.action)&&void 0!==l&&l.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==o?void 0:o.action))&&(m=!1),o.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?i("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?i("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?n.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a}):null},{label:i("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:i("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:n.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{c(null)},message:s?"1 "+i("ES_PT_ACTION_FILEUPLOADED"):i("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:r,action:a,approvers:T,selectedApprover:S,setSelectedApprover:h,selectFile:w,uploadedFile:b,setUploadedFile:N,businessService:v,error:C}))},[a,T,b,C]),a&&E.form?n.createElement(t.Modal,{headerBarMain:n.createElement(Qi,{label:r(E.label.heading)}),headerBarEnd:n.createElement(eo,{onClick:d}),actionCancelLabel:r(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",style:I&&O?{width:"100%",height:"auto"}:{}},m?n.createElement(t.Loader,null):n.createElement(t.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,l,n,i,o,r,d,v,p,m;if(null!==(t=c)&&void 0!==t&&t.isBillAmend){var E,f,_,y,T,g,h,A,N;const t={...null===(E=c)||void 0===E||null===(f=E.billAmendmentDetails)||void 0===f?void 0:f.additionalDetails,comments:null!=e&&e.comments?e.comments:null},l={...null===(_=c)||void 0===_?void 0:_.billAmendmentDetails,workflow:{businessId:null===(y=c)||void 0===y||null===(T=y.billAmendmentDetails)||void 0===T?void 0:T.amendmentId,action:null==a?void 0:a.action,tenantId:u,businessService:null!==(g=c)&&void 0!==g&&null!==(h=g.applicationType)&&void 0!==h&&h.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(A=c)&&void 0!==A&&null!==(N=A.applicationType)&&void 0!==N&&N.includes("WATER")?"WS":"SW",assignes:null!=S&&S.uuid?[{uuid:null==S?void 0:S.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:[]},additionalDetails:t,comment:(null==e?void 0:e.comments)||"",wfDocuments:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:null,processInstance:{action:null==a?void 0:a.action,assignes:null!=S&&S.uuid?[{uuid:null==S?void 0:S.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:[]}};s({AmendmentUpdate:l})}else{if(c={...c,action:null==a?void 0:a.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=S&&S.uuid?[null==S?void 0:S.uuid]:[],assignes:null!=S&&S.uuid?[{uuid:null==S?void 0:S.uuid}]:[],wfDocuments:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:null,processInstance:{...null===(l=c)||void 0===l?void 0:l.processInstance,action:null==a?void 0:a.action,assignes:null!=S&&S.uuid?[{uuid:null==S?void 0:S.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:b?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:b}]:[]}},null!=e&&e.date&&null!==(n=c)&&void 0!==n&&null!==(i=n.applicationType)&&void 0!==i&&i.includes("DISCONNECT")){const t=El(null==e?void 0:e.date);c.disconnectionExecutionDate=to(t)}else if(null!=e&&e.date){const t=El(null==e?void 0:e.date);c.connectionExecutionDate=to(t)}var C;if("DisconnectWSConnection"==(null===(o=c)||void 0===o||null===(r=o.processInstance)||void 0===r?void 0:r.businessService)||"DisconnectSWConnection"==(null===(d=c)||void 0===d||null===(v=d.processInstance)||void 0===v?void 0:v.businessService)||window.location.href.includes("disconnection"))"WATER"==(null===(C=c)||void 0===C?void 0:C.serviceType)?s({WaterConnection:c,disconnectRequest:!0}):s({SewerageConnection:c,disconnectRequest:!0});else if("SEWERAGE_RECONNECTION"==(null===(p=c)||void 0===p?void 0:p.applicationType))s({SewerageConnection:c,disconnectRequest:!1,reconnectRequest:!0});else if("WATER_RECONNECTION"==(null===(m=c)||void 0===m?void 0:m.applicationType))s({WaterConnection:c,disconnectRequest:!1,reconnectRequest:!0});else{var D,I,O,w,R,P,x,M,k,U,B,F,H;const e=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),t=e?JSON.parse(e):"";null!=t&&null!==(D=t.value)&&void 0!==D&&D.adhocPenalty&&(c.additionalDetails.adhocPenalty=parseInt(null==t||null===(I=t.value)||void 0===I?void 0:I.adhocPenalty)||""),null!=t&&null!==(O=t.value)&&void 0!==O&&O.adhocPenaltyComment&&(c.additionalDetails.adhocPenaltyComment=(null==t||null===(w=t.value)||void 0===w?void 0:w.adhocPenaltyComment)||""),null!=t&&null!==(R=t.value)&&void 0!==R&&R.adhocPenaltyReason&&(c.additionalDetails.adhocPenaltyReason=(null==t||null===(P=t.value)||void 0===P?void 0:P.adhocPenaltyReason)||""),null!=t&&null!==(x=t.value)&&void 0!==x&&x.adhocRebate&&(c.additionalDetails.adhocRebate=parseInt(null==t||null===(M=t.value)||void 0===M?void 0:M.adhocRebate)||""),null!=t&&null!==(k=t.value)&&void 0!==k&&k.adhocRebateComment&&(c.additionalDetails.adhocRebateComment=(null==t||null===(U=t.value)||void 0===U?void 0:U.adhocRebateComment)||""),null!=t&&null!==(B=t.value)&&void 0!==B&&B.adhocRebateReason&&(c.additionalDetails.adhocRebateReason=(null==t||null===(F=t.value)||void 0===F?void 0:F.adhocRebateReason)||""),"WATER"==(null===(H=c)||void 0===H?void 0:H.serviceType)?s({WaterConnection:c,disconnectRequest:!1,reconnectRequest:!1}):s({SewerageConnection:c,disconnectRequest:!1,reconnectRequest:!1})}}},defaultValues:_,formId:"modal-action"})):n.createElement(t.Loader,null)},no=e=>n.createElement("h1",{className:"heading-m"},e.label),io=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),oo=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(io,null)),ro=e=>{var i,o;let{t:r,action:a,tenantId:u,closeModal:d,submitAction:s,applicationData:c,businessService:v,moduleCode:p}=e;console.log("applicationData",c);const{data:m}=Digit.Hooks.useEmployeeSearch(u,{roles:null==a||null===(i=a.assigneeRoles)||void 0===i||null===(o=i.map)||void 0===o?void 0:o.call(i,e=>({code:e})),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),[E,f]=l.useState({}),[_,y]=l.useState({}),[T,g]=l.useState([]),[S,h]=l.useState(null),[L,A]=l.useState(null),[b,N]=l.useState(null),[C,D]=l.useState(null),[I,O]=l.useState(!1);function w(e){A(e.target.files[0])}return l.useEffect(()=>{var e;g(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),l.useEffect(()=>{!function(){try{D(null);const e=function(){if(L){const e=function(){if(L.size>=5242880)D(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PTR",L,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?N(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):D(r("CS_FILE_UPLOAD_ERROR"))})},function(){D(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[L]),l.useEffect(()=>{a&&f((e=>{let{t:l,action:i,selectFile:o,uploadedFile:r,setUploadedFile:a,businessService:u}=e;return{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+u+"_"+(null==i?void 0:i.action),cancel:"ES_PTR_COMMON_CANCEL"},form:[{body:[{label:l("ES_PTR_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("ES_PTR_ATTACH_FILE")+(i.docUploadRequired?" *":""),populators:n.createElement(t.UploadFile,{id:"workflow-doc",onUpload:o,onDelete:()=>{a(null)},showHint:!0,hintText:l("PTR_ATTACH_RESTRICTIONS_SIZE"),message:r?"1 "+l("ES_PTR_ACTION_FILEUPLOADED"):l("ES_PTR_ACTION_NO_FILEUPLOADED")})}]}]}})({t:r,action:a,approvers:T,selectedApprover:S,setSelectedApprover:h,selectFile:w,uploadedFile:b,setUploadedFile:N,businessService:v}))},[a,T,b]),a&&E.form?n.createElement(t.Modal,{headerBarMain:n.createElement(no,{label:r(E.label.heading)}),headerBarEnd:n.createElement(oo,{onClick:d}),actionCancelLabel:r(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(E.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},n.createElement(t.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){let t={action:null==a?void 0:a.action,comments:null==e?void 0:e.comments,businessService:v,moduleName:p};b&&(t.documents=[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==L?void 0:L.name,filestoreId:b}]),s({PetRegistrationApplications:[{...c,workflow:t}]})},defaultValues:_,formId:"modal-action"})):n.createElement(t.Loader,null)},ao=e=>null!=e&&e.businessService.includes("PT")?n.createElement(Mi,e):null!=e&&e.businessService.includes("ptr")?n.createElement(ro,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?n.createElement(Fi,e):null!=e&&e.moduleCode.includes("BPAREG")?n.createElement(ji,e):null!=e&&e.moduleCode.includes("BPA")?n.createElement(Gi,e):null!=e&&e.moduleCode.includes("NOC")?n.createElement(Zi,e):null!=e&&e.moduleCode.includes("WS")?n.createElement(lo,e):void 0;function uo(e){let{documents:l,svgStyles:o={},isSendBackFlow:r=!1,isHrLine:a=!1,titleStyles:u}=e;const{t:d}=i.useTranslation(),s=window.location.href.includes("stakeholder");return n.createElement("div",{style:{marginTop:"19px"}},!s&&(null==l?void 0:l.map((e,i)=>{var o;return n.createElement(n.Fragment,{key:i},null!=e&&e.title?n.createElement(t.CardSubHeader,{style:u||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,n.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,l)=>{var i;return n.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto",minWidth:"100px"},key:l},n.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.createElement(t.PDFSvg,null)),n.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},d(null==e?void 0:e.title)),r?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?n.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType.split(".")[1])):n.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&n.createElement("div",null,n.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),a&&(null==l?void 0:l.length)!=i+1?n.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),s&&(null==l?void 0:l.map((e,l)=>{var i;return n.createElement(n.Fragment,{key:l},null!=e&&e.title?n.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,n.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>n.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=o&&o.minWidth?null==o?void 0:o.minWidth:"160px",marginRight:"20px"},key:l},n.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},n.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},d(null==e?void 0:e.title)),null!=e&&e.docInfo?n.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+d(null==e?void 0:e.docInfo)):null,n.createElement(t.PDFSvg,null),n.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center",color:"#505A5F"}},""+d(null==e?void 0:e.title))))):!window.location.href.includes("citizen")&&n.createElement("div",null,n.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}const so=e=>{var t,i;let{t:o,formData:r,applicationData:a,docs:u,bpaActionsDetails:d}=e;const s=(null==a?void 0:a.status)||"",c=(null==d||null===(t=d.data)||void 0===t?void 0:t.nextActions)||[],v=Digit.ULBService.getStateId(),[p,m]=l.useState((null==r||null===(i=r.documents)||void 0===i?void 0:i.documents)||[]),[E,f]=l.useState(null),[_,y]=l.useState([]),[T,g]=l.useState(!0),[S,h]=l.useState(!1),[L,A]=l.useState(!1),{isLoading:b,data:N}=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"]),{isLoading:C,data:D}=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]);return l.useEffect(()=>{var e,t,l,n;let i=[];var o,r;null!=N&&null!==(e=N.BPA)&&void 0!==e&&e.DocTypeMapping&&(i=null==N||null===(o=N.BPA)||void 0===o||null===(r=o.DocTypeMapping)||void 0===r?void 0:r.filter(e=>{var t,l;return e.WFState==(null==a?void 0:a.status)?null==a?void 0:a.status:e.RiskType==(null==a?void 0:a.riskType)&&e.ServiceType==(null==a||null===(t=a.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==a||null===(l=a.additionalDetails)||void 0===l?void 0:l.applicationType)}));let d=[];null===(t=i)||void 0===t||null===(l=t[0])||void 0===l||null===(n=l.docTypes)||void 0===n||n.forEach(e=>{var t,l,n,i;let o=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==D||null===(t=D["common-masters"])||void 0===t||null===(l=t.DocumentType)||void 0===l||l.forEach(t=>{let l=t.code.slice(0,o.length);o===l&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(n=u[0])||void 0===n||null===(i=n.values)||void 0===i||i.map(t=>{var l,n;o===(null==t||null===(l=t.documentType)||void 0===l?void 0:l.split(".")[0])+"."+(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),d.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(d)),y(d)},[!b,!C]),l.useEffect(()=>{let e=0;_.map(t=>{let l=!1;p.map(e=>{t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(l=!0)}),!l&&t.required&&(e+=1)}),g("0"!=e&&0!=e||!(p.length>0))},[p,S]),l.useEffect(()=>{A("DOC_VERIFICATION_INPROGRESS"===s&&(null==c?void 0:c.length)>0)},[a,d]),n.createElement("div",null,null==_?void 0:_.map((e,t)=>n.createElement("div",null,n.createElement(co,{key:t,index:t,document:e,t:o,error:E,setError:f,setDocuments:m,documents:p,setCheckRequiredFields:h,applicationStatus:s,actions:c,bpaTaxDocuments:_,checkEnablingDocs:L}))))};function co(e){var i,o;let{t:r,document:a,setDocuments:u,documents:d,index:s,bpaTaxDocuments:c,checkEnablingDocs:v}=e;const p=null==d?void 0:d.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==a?void 0:a.code)})[0],m=Digit.ULBService.getStateId(),[E,f]=l.useState(p?{...p,active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}:1===(null==a||null===(i=a.dropdownData)||void 0===i?void 0:i.length)?null==a?void 0:a.dropdownData[0]:{}),[_,y]=l.useState(null),[T,g]=l.useState(()=>(null==p?void 0:p.fileStoreId)||null),[S,h]=l.useState([]);return l.useEffect(()=>{null!=E&&E.code&&u(e=>{var t;const l=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==T?void 0:T.length)||null===T?l:[...null==l?void 0:l.filter(e=>(null==e?void 0:e.fileStoreId)!==T),{documentType:null==E?void 0:E.code,fileStoreId:T,documentUid:T,fileName:(null==_?void 0:_.name)||"",id:d?null===(t=d.find(e=>e.documentType===(null==E?void 0:E.code)))||void 0===t?void 0:t.id:void 0}]})},[T,E]),l.useEffect(()=>{try{S.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),a.newUploadedDocs=[],S.map(e=>{var t,l,n;null!=E&&E.code&&a.newUploadedDocs.push({documentType:null==E?void 0:E.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.fileStoreId,tenantId:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.tenantId})}),c[s]=a,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)))}catch(e){Promise.reject(e)}},[S,E]),l.useEffect(()=>{},[_]),n.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},n.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+r(null==a?void 0:a.code)),(null==a||null===(o=a.uploadedDocuments)||void 0===o?void 0:o.length)&&n.createElement(uo,{documents:null==a?void 0:a.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),v?n.createElement("div",{style:{marginTop:"20px"}},n.createElement(t.LabelFieldPair,{style:{width:"100%"}},n.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=a&&a.required?r(null==a?void 0:a.code)+"* ":""+r(null==a?void 0:a.code)),n.createElement(t.Dropdown,{className:"form-field",t:r,isMandatory:!1,option:null==a?void 0:a.dropdownData,selected:E,optionKey:"i18nKey",select:e=>f(e),style:{width:"100%"}})),n.createElement(t.LabelFieldPair,{style:{width:"100%"}},n.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),n.createElement("div",{className:"field",style:{width:"100%"}},n.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:e=>((e,t)=>{let l=Object.fromEntries(t),n=Object.values(l);0!==Object.keys(l).length&&h(n),function(e){e&&y(e.file)}(n[n.length-1])})(0,e),t:r,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function vo(e){let{fiReport:l,isCitizen:o=!1}=e;const{t:r}=i.useTranslation();return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginTop:"10px"}},n.createElement(o?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+r("BPA_FI_REPORT")),l.map((e,i)=>{var o,a,u,d,s,c;return n.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},n.createElement(t.StatusTable,null,n.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==l?void 0:l.length)?""+r("BPA_FI_REPORT"):r("BPA_FI_REPORT")+" - "+(i+1)),n.createElement(t.Row,{className:"border-none",label:""+r("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(o=e.date)||void 0===o?void 0:o.split("-")[2])+"/"+(null===(a=e.date)||void 0===a?void 0:a.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),n.createElement(t.Row,{className:"border-none",label:""+r("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(d=e.questions)||void 0===d?void 0:d.length)&&(null==e||null===(s=e.questions)||void 0===s?void 0:s.map(e=>n.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},n.createElement(t.Row,{className:"border-none",label:""+r(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),n.createElement(t.Row,{className:"border-none",label:""+r("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"})))),n.createElement(uo,{documents:(c=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==c?void 0:c.map(e=>{var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function po(e){let{t:i,document:o,setNocDocuments:r,setError:a,nocDocuments:u}=e;const d=null==u?void 0:u.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==o?void 0:o.code)})[0],s=Digit.ULBService.getStateId(),[c,v]=l.useState(),[p,m]=l.useState(null),[E,f]=l.useState(()=>(null==d?void 0:d.fileStoreId)||null);return l.useEffect(()=>{var e,t;null!=o&&null!==(e=o.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&r(e=>{var t;const l=null==e?void 0:e.filter(e=>{var t,l;return(null==e?void 0:e.documentType)!==(null==o||null===(t=o.dropdownData)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.code)});return 0===(null==E?void 0:E.length)||null===E?l:[...null==l?void 0:l.filter(e=>(null==e?void 0:e.fileStoreId)!==E),{documentType:null==o||null===(t=o.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:E,documentUid:E,fileName:(null==p?void 0:p.name)||""}]})},[E]),l.useEffect(()=>{!function(){try{a(null);const e=function(){if(p){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(p.size>=5242880)a(i("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=p&&p.type&&!e.test(null==p?void 0:p.type))a(i("NOT_SUPPORTED_FILE_TYPE"));else{const e=Ke(function(){return f(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",p,Digit.ULBService.getStateId())).then(function(e){var t,l,n,o;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?f(null==e||null===(n=e.data)||void 0===n||null===(o=n.files[0])||void 0===o?void 0:o.fileStoreId):a(i("CS_FILE_UPLOAD_ERROR"))})},function(){a(i("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[p]),n.createElement("div",{style:{}},n.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},n.createElement(t.CardLabel,{style:{width:"100%"}},null!=o&&o.required?i("TL_BUTTON_UPLOAD FILE")+"*":""+i("TL_BUTTON_UPLOAD FILE")),n.createElement("div",{className:"field",style:{width:"100%"}},n.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:s,getFormState:e=>(e=>{let t=Object.fromEntries(e),l=Object.values(t);!function(e){e&&m(e.file)}(l[l.length-1])})(e),t:i,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}const mo=e=>{var i;let{t:o,noc:r,docs:a,isNoc:u,applicationData:d,NOCdata:s,bpaActionsDetails:c}=e;Digit.ULBService.getStateId();const v=Digit.ULBService.getStateId(),p=(null==d?void 0:d.status)||"",m=(null==c||null===(i=c.data)||void 0===i?void 0:i.nextActions)||[],{data:E}=Digit.Hooks.obps.useMDMS(v,"NOC",["DocumentTypeMapping"],{enabled:u}),{data:f}=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"],{enabled:!u}),{data:_}=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]),[y,T]=l.useState([]),[g,S]=l.useState([]),[h,L]=l.useState(!1),[A,b]=Digit.Hooks.useSessionStorage(null==r?void 0:r.nocType,[]),[N,C]=l.useState(null),D=window.location.href.includes("/employee/");return l.useEffect(()=>{var e;T(null==_||null===(e=_["common-masters"])||void 0===e?void 0:e.DocumentType)},[_]),l.useEffect(()=>{var e,t,l;let n,i=[];var o,a,s,c;n=u?null==E||null===(o=E.NOC)||void 0===o||null===(a=o.DocumentTypeMapping)||void 0===a?void 0:a.filter(e=>(null==e?void 0:e.applicationType)===(null==r?void 0:r.applicationType)&&(null==e?void 0:e.nocType)===(null==r?void 0:r.nocType)):null==f||null===(s=f.BPA)||void 0===s||null===(c=s.DocTypeMapping)||void 0===c?void 0:c.filter(e=>{var t,l;return e.WFState==(null==d?void 0:d.status)&&e.RiskType==(null==d?void 0:d.riskType)&&e.ServiceType==(null==d||null===(t=d.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==d||null===(l=d.additionalDetails)||void 0===l?void 0:l.applicationType)}),null!==(e=n)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(l=t.docTypes)&&void 0!==l&&l[0]&&(n[0].docTypes[0].nocType=n[0].nocType,n[0].docTypes[0].additionalDetails={submissionDetails:null==r?void 0:r.additionalDetails,applicationStatus:null==r?void 0:r.applicationStatus,appNumberLink:null==r?void 0:r.applicationNo,nocNo:null==r?void 0:r.nocNo},i.push(n[0].docTypes[0]));let v=[];i&&i.length>0&&(i.map(e=>{let t=e.documentType;e.dropdownData=[],null==y||y.forEach(l=>{let n=l.code.slice(0,null==t?void 0:t.length);t===n&&(e.hasDropdown=!0,e.dropdownData.push(l))}),v.push(e)}),S(v))},[E,y]),l.useEffect(()=>{L("NOC_VERIFICATION_INPROGRESS"===p&&(null==m?void 0:m.length)>0)},[d,c]),n.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},n.createElement(t.StatusTable,null,n.createElement(t.Row,{label:D?""+o("BPA_"+(null==r?void 0:r.nocType)+"_HEADER"):o("BPA_"+(null==r?void 0:r.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),s&&s.map((e,l)=>{if(null!=e&&e.value)return n.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:D?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:D?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),n.createElement(uo,{documents:a,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),h&&(null==g?void 0:g.map((e,t)=>n.createElement(po,{key:t,document:e,t:o,error:N,setError:C,setNocDocuments:b,nocDocuments:A,checkEnablingDocs:h}))))},Eo=e=>{let{permissions:i,t:o}=e;const[r,a,u]=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==i?void 0:i.map(e=>({label:e,checked:!1}))),[d,s,c]=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]);l.useEffect(()=>()=>{Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")},[]);const v=window.Digit.Utils.browser.isMobile();return n.createElement("div",null,n.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},o("BPA_PERMIT_CONDITIONS")),null==r?void 0:r.map((e,l)=>n.createElement(t.CheckBox,{key:l,styles:{margin:"20px 0 40px",maxWidth:v?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:e=>((e,t,l)=>{const n=e.target.checked;a(()=>null==r?void 0:r.map((e,t)=>l===t?{...e,checked:n}:e))})(e,0,l),isLabelFirst:!0,index:l})),null==d?void 0:d.map((e,l)=>n.createElement("div",null,n.createElement(t.TextInput,{key:l,value:null==e?void 0:e.label,onChange:e=>((e,t)=>{s(()=>null==d?void 0:d.map((l,n)=>{var i;return t===n?{label:null==e||null===(i=e.target)||void 0===i?void 0:i.value}:l}))})(e,l),textInputStyle:{maxWidth:v?"96%":"830px",width:v?"96%":"830px"},style:v?{paddingRight:"10%"}:{},placeholder:o("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),n.createElement(t.LinkButton,{label:n.createElement("div",null,n.createElement("span",null,n.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:v?"5%":"35%"}}))),style:{},onClick:e=>(e=>{const t=[...d];t.splice(e,1),s([...t])})(l)}))),n.createElement(t.LinkButton,{style:{color:"#a82227",maxWidth:v?"fit-content":"10%",marginRight:"3%"},label:o("BPA_ADD_MORE"),onClick:()=>{s([...d,{label:""}])}}))};function fo(e){let{documents:o,svgStyles:r={},isSendBackFlow:a=!1}=e;const{t:u}=i.useTranslation(),[d,s]=l.useState(()=>[]),[c,v]=(Digit.ULBService.getCurrentTenantId(),l.useState({}));l.useEffect(()=>{var e;let t=[];null==o||o.forEach((e,l,n)=>{t=[...t,...e.values?e.values:[]]}),s(null===(e=t)||void 0===e?void 0:e.map(e=>null==e?void 0:e.fileStoreId))},[o]),l.useEffect(()=>{var e;null!=d&&d.length&&"BillAmend"===(null==o||null===(e=o[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(d,Digit.ULBService.getCurrentTenantId()).then(e=>{v(null==e?void 0:e.data)}):null!=d&&d.length&&Digit.UploadServices.Filefetch(d,Digit.ULBService.getStateId()).then(e=>{v(null==e?void 0:e.data)})},[d]);const p=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),m=window.location.href.includes("stakeholder");return n.createElement("div",{style:{marginTop:"19px"}},!m&&(null==o?void 0:o.map((e,l)=>{var i;return n.createElement(n.Fragment,{key:l},null!=e&&e.title?n.createElement(t.CardSubHeader,{style:p?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,n.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i,o;return n.createElement("a",{target:"_",href:null===(i=c[e.fileStoreId])||void 0===i?void 0:i.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:l},n.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.createElement(t.PDFSvg,null)),n.createElement("p",{style:p?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},u(null==e?void 0:e.title)),a?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?n.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType.split(".")[1])):n.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&n.createElement("div",null,n.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),m&&(null==o?void 0:o.map((e,l)=>{var i;return n.createElement(n.Fragment,{key:l},null!=e&&e.title?n.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,n.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i;return n.createElement("a",{target:"_",href:null===(i=c[e.fileStoreId])||void 0===i?void 0:i.split(",")[0],style:{minWidth:null!=r&&r.minWidth?null==r?void 0:r.minWidth:"160px",marginRight:"20px"},key:l},n.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},n.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},u(null==e?void 0:e.title)),null!=e&&e.docInfo?n.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+u(null==e?void 0:e.docInfo)):null,n.createElement(t.PDFSvg,null),n.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+u(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&n.createElement("div",null,n.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function _o(e){let{taxHeadEstimatesCalculation:l}=e;const{taxHeadEstimates:o}=l,{t:r}=i.useTranslation();return n.createElement("div",{style:{marginTop:"40px"}},n.createElement(t.StatusTable,null,n.createElement(t.Row,{label:r("ES_PT_TITLE_TAX_HEADS"),text:r("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),n.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==o?void 0:o.map((e,l)=>n.createElement(t.Row,{key:r(e.taxHeadCode),label:r(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:l===(null==o?void 0:o.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})),n.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),n.createElement(t.Row,{label:r("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==l?void 0:l.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function yo(e){let{floors:l}=e;const{t:o}=i.useTranslation();return n.createElement(n.Fragment,null,l.map(e=>{var l;return n.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px"}},n.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},o(null==e?void 0:e.title)),null==e||null===(l=e.values)||void 0===l?void 0:l.map((e,l)=>{var i;return n.createElement(n.Fragment,{key:l},n.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==l?"16px":"revert"}},o(e.title)),n.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},n.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i;return n.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:n.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title),text:o(e.value)||"N/A",last:l===(null==e||null===(i=e.values)||void 0===i?void 0:i.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function To(e){let{owners:l}=e,o={};o=window.location.href.includes("/employee/pt/")?l.slice().reverse():l;const{t:r}=i.useTranslation(),a=(null==l?void 0:l.length)||1;let u={marginTop:"19px"},d={position:"relative",padding:"8px"},s={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(a)>1?u={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(a)>1||(u={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},d={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(u={...u,maxWidth:"950px"},u={...u,maxWidth:"950px"},s={}),l.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}),n.createElement(n.Fragment,null,n.createElement("div",{className:"owner-details"},o.map((e,l)=>{var i;return n.createElement("div",{key:r(null==e?void 0:e.title),style:u,className:"owner-details-child"},n.createElement(t.CardSubHeader,{style:Number(a)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(a)>1?r(null==e?void 0:e.title)+" "+(l+1):r(null==e?void 0:e.title)),n.createElement(n.Fragment,{key:l},n.createElement(t.StatusTable,{style:d},n.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i;return!0===e.map&&"N/A"!==e.value?n.createElement(t.Row,{key:r(e.title),label:r(e.title),text:n.createElement("img",{src:r(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):n.createElement("span",null,n.createElement(t.Row,{key:r(e.title),label:""+r(e.title),text:r(e.value)||"N/A",last:l===(null==e||null===(i=e.values)||void 0===i?void 0:i.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:s}))}))))})))}const go=e=>{var o,r,a;let{scrutinyDetails:u,paymentsList:d=[]}=e;const{t:s}=i.useTranslation(),c=e=>null!=e&&e.value&&null!=e&&e.isTransLate?n.createElement("span",{style:{color:"#00703C"}},s(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?s(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void s("NA");return n.createElement(l.Fragment,null,!(null!=u&&u.isChecklist)&&n.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},n.createElement(t.StatusTable,null,n.createElement("div",null,null==u||null===(o=u.values)||void 0===o?void 0:o.map((e,l)=>null!=e&&e.isUnit?n.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?c(e)+" "+s(null==e?void 0:e.isUnit):s("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?n.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+s(""+e.title),text:c(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):n.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},s(null==e?void 0:e.title)):n.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},s(null==e?void 0:e.title))),null==u||null===(r=u.permit)||void 0===r?void 0:r.map((e,l)=>n.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title))),n.createElement("div",null,null==u||null===(a=u.scruntinyDetails)||void 0===a?void 0:a.map((e,i)=>n.createElement(l.Fragment,null,n.createElement(t.Row,{className:"border-none",label:""+s(null==e?void 0:e.title),labelStyle:{width:"150%"}}),n.createElement("a",{href:null==e?void 0:e.value}," ",n.createElement(t.PDFSvg,null)," "),n.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},s(null==e?void 0:e.text))))))))},So=e=>{var o,r,a,u,d;let{edcrDetails:s,applicationData:c}=e;const{t:v}=i.useTranslation(),p=window.Digit.Utils.browser.isMobile(),m=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],E=e=>{const t=e;return(e,l,n)=>e[t]},f=l.useMemo(()=>m.map(e=>({Header:v(""+e.name),accessor:E(e.id),id:e.id})));function _(e){var t;let l=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(e=>{var t,n,i,o,r,a,u,d;l.push({Floor:v("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:v(""+(null===(t=e.occupancies)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(r=e.occupancies)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:v("BPA_FLOOR_NAME_"+e.number)})}),l}function y(e){var t;let l=null==c||null===(t=c.landInfo)||void 0===t?void 0:t.unit,n="";if((null==l?void 0:l.length)>0){var i,o;let t=null===(i=l[e])||void 0===i||null===(o=i.usageCategory)||void 0===o?void 0:o.split(",");null!=t&&t.length&&(n=t.map(e=>e?""+v("BPA_SUBOCCUPANCYTYPE_"+function(e,t,l){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===l&&(l=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,l);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA").join(", "))}return n||"NA"}return n.createElement(l.Fragment,null,n.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},n.createElement(t.StatusTable,null,null==s||null===(o=s.values)||void 0===o?void 0:o.map((e,l)=>null!=e&&e.isHeader?n.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},v(null==e?void 0:e.title)):n.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+v(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),null==s||null===(r=s.subOccupancyTableDetails)||void 0===r||null===(a=r[0])||void 0===a||null===(u=a.value)||void 0===u||null===(d=u.planDetail)||void 0===d?void 0:d.blocks.map((e,l)=>{var i,o,r,a,u;return n.createElement("div",{key:l,style:(null==s||null===(i=s.subOccupancyTableDetails)||void 0===i||null===(o=i[0])||void 0===o||null===(r=o.value)||void 0===r||null===(a=r.planDetail)||void 0===a||null===(u=a.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},n.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},v("BPA_BLOCK_SUBHEADER")," ",l+1),n.createElement(t.StatusTable,null,n.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+v("BPA_SUB_OCCUPANCY_LABEL"),text:y(l)})),n.createElement("div",{style:window.location.href.includes("citizen")||p?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},n.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:v,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:_(e),columns:f,getCellProps:e=>({style:{}})})))})))},ho=e=>{let{headComment:t,otherComment:l}=e;return n.createElement("div",{className:"checkpoint-comments-wrap"},n.createElement("h4",null,t),n.createElement("p",null,l))},Lo=e=>{var l,o,r;let{data:a,OpenImage:u,privacy:d={}}=e;const{t:s}=i.useTranslation();return n.createElement("div",null,a.date&&n.createElement("p",null,a.date),n.createElement("p",null,a.name),a.mobileNumber&&n.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},n.createElement(t.TelePhone,{mobile:a.mobileNumber,privacy:d}),n.createElement("p",null,"    ")),a.source&&n.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+a.source.toUpperCase())),a.comment&&n.createElement(ho,{otherComment:null==a?void 0:a.otherComment,headComment:null==a?void 0:a.comment}),null!=a&&a.wfComment?n.createElement("div",null,null==a||null===(l=a.wfComment)||void 0===l?void 0:l.map(e=>n.createElement("div",{className:"TLComments"},n.createElement("h3",null,s("WF_COMMON_COMMENTS")),n.createElement("p",{style:{overflowX:"scroll"}},e)))):null,(null==a||null===(o=a.thumbnailsToShow)||void 0===o||null===(r=o.thumbs)||void 0===r?void 0:r.length)>0?n.createElement("div",{className:"TLComments"},n.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),n.createElement(t.DisplayPhotos,{srcs:null==a?void 0:a.thumbnailsToShow.thumbs,onClick:(e,t)=>{u(e,t,null==a?void 0:a.thumbnailsToShow)}})):null)};function Ao(e){let{units:l}=e;const{t:o}=i.useTranslation();return n.createElement(n.Fragment,null,l.map((e,l)=>{var i;return n.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},n.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},o(null==e?void 0:e.title)+" "+(l+1)),n.createElement(n.Fragment,{key:l},n.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},n.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i;return n.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:n.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title)+":",text:o(e.value)||"N/A",last:l===(null==e||null===(i=e.values)||void 0===i?void 0:i.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function bo(e){let{units:l}=e;const{t:o}=i.useTranslation();return n.createElement(n.Fragment,null,l.map((e,l)=>{var i;return n.createElement("div",{key:o(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},n.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},o(null==e?void 0:e.title)+" "+(l+1)),n.createElement(n.Fragment,{key:l},n.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},n.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,l)=>{var i;return n.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:o(e.title),label:o(e.title),text:n.createElement("img",{src:o(e.value),alt:""})}:{key:o(e.title),label:o(e.title)+":",text:o(e.value)||"NA",last:l===(null==e||null===(i=e.values)||void 0===i?void 0:i.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}const No=e=>{var o,r,a,u;let{wsAdditionalDetails:d}=e;const{t:s}=i.useTranslation();let c=(v=location.search)?(/^[?#]/.test(v)?v.slice(1):v).split("&").reduce((e,t)=>{let[l,n]=t.split("=");return e[l]=n?decodeURIComponent(n.replace(/\+/g," ")):"",e},{}):{};var v;const p=null==c?void 0:c.mode;var{connectionDetails:m,plumberDetails:E,roadCuttingDetails:f,activationDetails:_}=(null==d?void 0:d.additionalDetails)||{connectionDetails:[],plumberDetails:[]};return n.createElement(l.Fragment,null,n.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==d||null===(o=d.additionalDetails)||void 0===o?void 0:o.connectionDetails)&&n.createElement(t.StatusTable,null,n.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),n.createElement("div",null,n.createElement("div",{className:"connection-details-new-value-wrapper"},null==m?void 0:m.map((e,l)=>n.createElement("div",null,n.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))),(null==d||null===(r=d.additionalDetails)||void 0===r?void 0:r.plumberDetails)&&"MODIFY"!=p&&n.createElement(t.StatusTable,null,n.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),n.createElement("div",null,n.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map((e,l)=>n.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy}))))),(null==d||null===(a=d.additionalDetails)||void 0===a?void 0:a.roadCuttingDetails)&&"MODIFY"!=p&&n.createElement(t.StatusTable,null,n.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),n.createElement("div",null,n.createElement("div",{className:"plumber-details-new-value-wrapper"},null==f?void 0:f.map(e=>{var l;return n.createElement("div",{style:(null==f?void 0:f.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(l=e.values)||void 0===l?void 0:l.map(e=>n.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))})))),(null==d||null===(u=d.additionalDetails)||void 0===u?void 0:u.activationDetails)&&n.createElement(t.StatusTable,null,n.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),n.createElement("div",null,n.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map((e,l)=>n.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))))},Co=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],Do=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],Io=e=>{var o,r,a,u;let{wsAdditionalDetails:d}=e;const{t:s}=i.useTranslation(),[c,v,p]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[m,E,f]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),y=!(null==d||null===(o=d.additionalDetails)||void 0===o||!o.isPaid),[T,g]=l.useState(!1),[S,h]=l.useState(c||{}),[L,A]=l.useState(null),[b,N]=l.useState(d.additionalDetails.data?d.additionalDetails.data:{}),[C,D]=l.useState(d.additionalDetails.values?d.additionalDetails.values:[]),I=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(I,"BillingService",["TaxHeadMaster"]),l.useEffect(()=>{var e,t,l;const i={...null==d||null===(e=d.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails};if((null==c||null===(l=c.billDetails)||void 0===l?void 0:l.length)>0){var o,r,a,u,s,p,m;const e=[{title:"WS_APPLICATION_FEE_HEADER",value:n.createElement("span",null,"₹",null==c||null===(o=c.billDetails)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.fee)},{title:"WS_SERVICE_FEE_HEADER",value:n.createElement("span",null,"₹",null==c||null===(a=c.billDetails)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.charge)},{title:"WS_TAX_HEADER",value:n.createElement("span",null,"₹",null==c||null===(s=c.billDetails)||void 0===s||null===(p=s[0])||void 0===p?void 0:p.taxAmount)}];D(e),N(null==c||null===(m=c.billDetails)||void 0===m?void 0:m[0])}else v(i),h(i)},[]);let O={};const w=e=>n.createElement("h1",{className:"heading-m"},e.label),R=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),P=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(R,null)),x=function(e,t,l){void 0===t&&(t=!1);let n={...S};if("adhocPenalty"!=e&&"adhocRebate"!=e||!l.target.value)t?(n[e+"_data"]=l,n[e]=l.title,"PT_OTHERS"==l.title&&"adhocPenaltyReason"==e&&(n.adhocPenaltyComment=""),"PT_OTHERS"==l.title&&"adhocRebateReason"==e&&(n.adhocRebateComment="")):n[e]=l.target.value;else{var i,o;const t=0==(null==l||null===(i=l.target)||void 0===i?void 0:i.value)?1:Math.sign(null==l||null===(o=l.target)||void 0===o?void 0:o.value)||-1;n[e]=1==t?l.target.value:""}h(n)};return n.createElement(l.Fragment,null,n.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},C&&n.createElement(t.StatusTable,null,n.createElement("div",null,null==C?void 0:C.map((e,l)=>n.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),n.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),n.createElement("div",null,n.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+s("WS_COMMON_TOTAL_AMT"),text:n.createElement("span",null,"₹",(null==b?void 0:b.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),n.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+s("CS_INBOX_STATUS_FILTER"),text:s(y?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:y?{color:"#00703C"}:{color:"#D4351C"}}))),null!=d&&null!==(r=d.additionalDetails)&&void 0!==r&&r.isAdhocRebate?n.createElement("div",{onClick:e=>{g(!0)}},n.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},s("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,T&&n.createElement(t.Modal,{headerBarMain:n.createElement(w,{label:s("PT_ADD_REBATE_PENALITY")}),headerBarEnd:n.createElement(P,{onClick:()=>{h(c),g(!1)}}),actionCancelLabel:s("PT_CANCEL"),actionCancelOnSubmit:()=>{h(c),g(!1)},actionSaveLabel:s("PT_ADD"),actionSaveOnSubmit:e=>(e=>{const t=null!=S&&S.adhocPenalty?Number(null==S?void 0:S.adhocPenalty):0,l=null!=S&&S.adhocRebate?Number(null==S?void 0:S.adhocRebate):0;var n,i;if(t||l)if(l>(null==d||null===(n=d.additionalDetails)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.totalAmount))A({isError:!1,isWarning:!0,key:"error",message:s("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var o,r,a,u,c,p,m,f,y,T;const e=null==d||null===(o=d.additionalDetails)||void 0===o||null===(r=o.appDetails)||void 0===r?void 0:r.applicationNo,t=null==d||null===(a=d.additionalDetails)||void 0===a||null===(u=a.appDetails)||void 0===u?void 0:u.tenantId,l={...null==d||null===(c=d.additionalDetails)||void 0===c||null===(p=c.appDetails)||void 0===p?void 0:p.additionalDetails,...S};d.additionalDetails.appDetails.additionalDetails=l;const n={CalculationCriteria:"WATER"==(null==d||null===(m=d.additionalDetails)||void 0===m||null===(f=m.appDetails)||void 0===f?void 0:f.service)?[{applicationNo:e,tenantId:t,waterConnection:d.additionalDetails.appDetails}]:[{applicationNo:e,tenantId:t,sewerageConnection:d.additionalDetails.appDetails}],isconnectionCalculation:!1};let i="WATER"==(null==d||null===(y=d.additionalDetails)||void 0===y||null===(T=y.appDetails)||void 0===T?void 0:T.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(n,i).then((e,t)=>{var l,n,i,o,r,a,u,d,s,c,p,m,f,y,T;(null==e||null===(l=e.Calculation)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.taxHeadEstimates)||void 0===i?void 0:i.length)>0&&(null==e||null===(f=e.Calculation)||void 0===f||null===(y=f[0])||void 0===y||null===(T=y.taxHeadEstimates)||void 0===T||T.forEach(e=>e.amount=e.estimateAmount)),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(o=e.Calculation)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.taxHeadEstimates,"category");const h=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(a=e.Calculation)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(d=e.Calculation)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.charge},{title:"WS_TAX_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.taxAmount}];E(El(e.Calculation[0])),N(null==e||null===(m=e.Calculation)||void 0===m?void 0:m[0]),D(h),S.billDetails=null==e?void 0:e.Calculation,v(S),g(!1)}).catch(e=>{var t,l,n,i,o,r;A({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(n=l.Errors[0])&&void 0!==n&&n.message?s(""+(null==e||null===(i=e.response)||void 0===i||null===(o=i.data)||void 0===o||null===(r=o.Errors[0])||void 0===r?void 0:r.code)):s("PT_COMMON_ADD_REBATE_PENALITY")})})}else A({isError:!1,isWarning:!0,key:"warning",message:s("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})})(),hideSubmit:!1,popupStyles:{overflowY:"auto"}},n.createElement("div",null,n.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},n.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_PENALTY")),n.createElement(t.CardLabel,null,s("PT_TX_HEADS")),n.createElement("div",{className:"field"},n.createElement(t.Dropdown,{isMandatory:!0,option:Co,optionKey:"title",select:e=>x("adhocPenaltyReason",!0,e),selected:(null==S?void 0:S.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:s})),"PT_OTHERS"===(null==S||null===(a=S.adhocPenaltyReason_data)||void 0===a?void 0:a.title)&&n.createElement("div",{className:"field"},n.createElement(t.CardLabel,null,s("PT_REASON")),n.createElement("div",{className:"field"},n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==S?void 0:S.adhocPenaltyComment)||"",onChange:e=>x("adhocPenaltyComment",!1,e)},O={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")})))),n.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),n.createElement("div",{className:"field"},n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==S?void 0:S.adhocPenalty)||"",onChange:e=>x("adhocPenalty",!1,e)},O={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))),n.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},n.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_REBATE")),n.createElement(t.CardLabel,null,s("PT_TX_HEADS")),n.createElement("div",{className:"field"},n.createElement(t.Dropdown,{isMandatory:!0,option:Do,optionKey:"title",select:e=>x("adhocRebateReason",!0,e),selected:(null==S?void 0:S.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:s})),"PT_OTHERS"===(null==S||null===(u=S.adhocRebateReason_data)||void 0===u?void 0:u.title)&&n.createElement("div",{className:"field"},n.createElement(t.CardLabel,null,s("PT_REASON")),n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==S?void 0:S.adhocRebateComment)||"",onChange:e=>x("adhocRebateComment",!1,e)},O={isRequired:!0,pattern:"^[a-zA-Z ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")}))),n.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),n.createElement("div",{className:"field"},n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==S?void 0:S.adhocRebate)||"",onChange:e=>x("adhocRebate",!1,e)},O={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),L&&n.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==L?void 0:L.isWarning,error:null==L||!L.isWarning,label:s(null==L?void 0:L.message),onClose:()=>{A(!1)},isDleteBtn:!0})))},Oo=e=>{let{style:t}=e;return n.createElement("span",null,n.createElement("svg",{style:{...t},display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},wo=e=>{let{t:l,userType:i=!1,infoBannerLabel:o="",infoClickLable:r="",infoClickInfoLabel:a="",infoClickInfoLabel1:u=""}=e;i=i||Digit.SessionStorage.get("userType");const d=window.Digit.Utils.browser.isMobile();return n.createElement(n.Fragment,null,n.createElement("div",{style:d?{}:{width:"80%"}},n.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},n.createElement("div",null,n.createElement(t.InfoBannerIcon,null),n.createElement("h2",{style:{color:"#3498DB"}},l(o))),l(r)+" ",n.createElement(Oo,{style:{display:"inline",marginBottom:"5px"}})," "+l(a),n.createElement("div",null," "+l(u)))))},Ro=e=>{var o,r,a,u,d,s,c;let{wsAdditionalDetails:v}=e;const{t:p}=i.useTranslation(),[m,E]=l.useState(!1),[f,_]=l.useState({}),y=e=>n.createElement("h1",{className:"heading-m"},e.label),T=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),g=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(T,null));return n.createElement(l.Fragment,null,n.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=v&&null!==(o=v.additionalDetails)&&void 0!==o&&o.isViewBreakup?n.createElement("div",{onClick:e=>(()=>{var e;let t=v.additionalDetails.data||{};const l=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"),n=l?JSON.parse(l):{};null!=n&&null!==(e=n.value)&&void 0!==e&&e.totalAmount&&(t=null==n?void 0:n.value),_(t),E(!0)})(),style:{marginTop:"12px"}},n.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},p("WS_PAYMENT_VIEW_BREAKUP"))):null,m&&n.createElement(t.Modal,{headerBarMain:n.createElement(y,{label:p("WS_CALCULATION_BREAKUP")}),headerBarEnd:n.createElement(g,{onClick:()=>{E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},n.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},n.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_APPLICATION_FEE_HEADER")),null==f||null===(r=f.billSlabData)||void 0===r||null===(a=r.FEE)||void 0===a?void 0:a.map(e=>n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:n.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),n.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:n.createElement("span",null,"₹",Number(null==f?void 0:f.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),n.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_SERVICE_FEE_HEADER")),null==f||null===(u=f.billSlabData)||void 0===u||null===(d=u.CHARGES)||void 0===d?void 0:d.map(e=>n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:n.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),n.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:n.createElement("span",null,"₹",Number(null==f?void 0:f.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==f||null===(s=f.billSlabData)||void 0===s||null===(c=s.TAX)||void 0===c?void 0:c.map(e=>n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:n.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),n.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),n.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:n.createElement("span",null,"₹",Number(null==f?void 0:f.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))},Po={root:{width:"100%",marginTop:"2px",overflowX:"auto",boxShadow:"none"},table:{minWidth:700,backgroundColor:"rgba(250, 250, 250, var(--bg-opacity))"},cell:{maxWidth:"7em",minWidth:"1em",border:"1px solid #e8e7e6",padding:"4px 5px",fontSize:"0.8em",textAlign:"left",lineHeight:"1.5em"},cellHeader:{overflow:"hidden",textOverflow:"ellipsis"},cellLeft:{},cellRight:{}},xo=e=>{let{className:t="table",headers:l=[],values:o=[],arrears:r=0}=e;const{t:a}=i.useTranslation();return n.createElement(n.Fragment,null,n.createElement("div",{style:Po.root},n.createElement("table",{className:"table-fixed-column-common-pay",style:Po.table},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{...Po.cell,...Po.cellLeft,...Po.cellHeader}},a("CS_BILL_PERIOD")),l.map((e,t)=>n.createElement("th",{style:{...Po.cell,...l.length==t+1?Po.cellRight:{},...Po.cellHeader},key:t},a(e))))),n.createElement("tbody",null,Object.values(o).map((e,t)=>n.createElement("tr",{key:t},n.createElement("td",{style:{...Po.cell,...Po.cellLeft},component:"th",scope:"row"},Object.keys(o)[t]),l.map((t,i)=>n.createElement("td",{style:{...Po.cell,textAlign:"left",...l.length==i+1?Po.cellRight:{},whiteSpace:"pre"},key:i,numeric:!0},i>1&&"₹",e[t]&&e[t].value||"0")))),n.createElement("tr",null,n.createElement("td",{style:{...Po.cell,...Po.cellLeft}}),l.map((e,t)=>t==l.length-1?n.createElement("td",{style:{...Po.cell,...Po.cellRight,textAlign:"left",fontWeight:"700",whiteSpace:"pre"},key:t,numeric:!0},r):t==l.length-2?n.createElement("td",{style:{...Po.cell,textAlign:"left"},key:t,numeric:!0},a("COMMON_ARREARS_TOTAL")):n.createElement("td",{style:Po.cell,key:t,numeric:!0})))))))},Mo={buttonStyle:{display:"flex",justifyContent:"flex-end",color:"#a82227"},headerStyle:{marginTop:"10px",fontSize:"16px",fontWeight:"700",lineHeight:"24px",color:" rgba(11, 12, 12, var(--text-opacity))"}},ko=e=>{var t,o,r;let{bill:a={}}=e;const{t:u}=i.useTranslation();let d={},s=(null==a||null===(t=a.billDetails)||void 0===t?void 0:t.sort((e,t)=>t.fromPeriod-e.fromPeriod))||[];s=[...s];const c=(null===(o=s)||void 0===o?void 0:o.reduce((e,t,l)=>0===l?e:e+t.amount,0))||0;let v="₹ "+((null==c||null===(r=c.toFixed)||void 0===r?void 0:r.call(c,0))||Number(0).toFixed(0));s.shift(),s.map(e=>{let t=function(e){var t,l,n;void 0===e&&(e={});let i={};const{billAccountDetails:o=[]}=e;return o.map(e=>{i[e.taxHeadCode]={value:e.amount,order:e.order}}),i.CS_BILL_NO={value:(null===(t=e)||void 0===t?void 0:t.billNumber)||"NA",order:-2},i.CS_BILL_DUEDATE={value:(null===(l=e)||void 0===l?void 0:l.expiryDate)&&new Date(null===(n=e)||void 0===n?void 0:n.expiryDate).toLocaleDateString()||"NA",order:-1},i.TL_COMMON_TOTAL_AMT={value:e.amount,order:10},i}(e);d[((e,t)=>{const l=new Date(e),n=new Date(t);return n.getYear()-l.getYear()!=0?"FY"+(l.getYear()+1900)+"-"+(n.getYear()-100):l.toLocaleDateString()+"-"+n.toLocaleDateString()})(e.fromPeriod,e.toPeriod)]=t});let p={};!d||Object.keys(d).map((e,t)=>{Object.keys(d[e]).map(t=>{p[t]=d[e]&&d[e][t]&&d[e][t].order||0})});let m=[];m=Object.keys(p),m.sort((e,t)=>p[e]-p[t]);const[E,f]=l.useState(!1);return 0==c||c<0?n.createElement("span",null):n.createElement(n.Fragment,null,n.createElement("div",{style:Mo.headerStyle},u("CS_ARREARS_DETAILS")),E&&n.createElement(xo,{headers:[...m],values:d,arrears:v}),!E&&n.createElement("div",{style:Mo.buttonStyle},n.createElement("button",{type:"button",onClick:()=>{f(!0)}},u("CS_SHOW_CARD"))),E&&n.createElement("div",{style:Mo.buttonStyle},n.createElement("button",{type:"button",onClick:()=>{f(!1)}},u("CS_HIDE_CARD"))))};function Uo(e){var r,a,u,d,s,c,v,p,m,E,f,y,T;let{applicationDetails:g,workflowDetails:S,isDataLoading:h,applicationData:L,timelineStatusPrefix:A,showTimeLine:b=!0,statusAttribute:N="status",paymentsList:C,oldValue:D,isInfoLabel:I=!1}=e;const{t:O}=i.useTranslation();function w(e,t,l){var n;window.open(null==l||null===(n=l.fullImage)||void 0===n?void 0:n[0],"_blank")}console.log("appl",g);const[R,P]=l.useState({}),[x,M]=l.useState({loading:!1,loaded:!1,canLoad:!1});"ACTIVE"!=(null==L?void 0:L.status)||x.loading||x.loaded||x.canLoad||M({loading:!1,loaded:!1,canLoad:!0}),null==x||!x.canLoad||x.loading||x.loaded||(M({loading:!0,loaded:!1,canLoad:!0}),function(e,t,l,n){try{Promise.resolve(Digit.PTService.assessmentSearch({tenantId:e,filters:{propertyIds:t}})).then(function(i){function o(){l(r),n({loading:!1,loaded:!0,canLoad:!0})}let r={};const a=function(l){if((null==i||null===(l=i.Assessments)||void 0===l?void 0:l.length)>0)return Promise.resolve(Digit.PaymentService.fetchBill(e,{businessService:"PT",consumerCode:t})).then(function(e){r=e})}();return a&&a.then?a.then(o):o()})}catch(e){return Promise.reject(e)}}((null==L?void 0:L.tenantId)||tenantId,null==L?void 0:L.propertyId,P,M));const k=e=>{if(null==e||null==e||""==e)return"NA";const t=new Date(e);let l=t.getMonth()+1,n=t.getDate();return l=(l>9?"":"0")+l,n=(n>9?"":"0")+n,n+"/"+l+"/"+t.getFullYear()},U=function(e,t){if(void 0===t&&(t=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var l;const e={date:k(null==L||null===(l=L.auditDetails)||void 0===l?void 0:l.createdTime),source:(null==L?void 0:L.channel)||""};return n.createElement(Lo,{data:e})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var i,o,r,a,u,d,s,c,v,p,m,E,f,y,T,S,h,A;const l={uuid:null==e||null===(i=e.assignes)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==g?void 0:g.tenantId,businessIds:null==g?void 0:g.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:e=>{let l="";return l="+91 "+_.get(e,"ProcessInstances["+t+"].assignes[0].mobileNumber"),l}}},b={date:null==e||null===(r=e.auditDetails)||void 0===r?void 0:r.lastModified,name:null==e||null===(a=e.assignes)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.name,mobileNumber:(null==L||null===(d=L.processInstance)||void 0===d||null===(s=d.assignes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.uuid)===(null==e||null===(v=e.assignes)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.uuid)&&null!=L&&null!==(m=L.processInstance)&&void 0!==m&&null!==(E=m.assignes)&&void 0!==E&&null!==(f=E[0])&&void 0!==f&&f.mobileNumber?null==L||null===(y=L.processInstance)||void 0===y||null===(T=y.assignes)||void 0===T||null===(S=T[0])||void 0===S?void 0:S.mobileNumber:null==e||null===(h=e.assignes)||void 0===h||null===(A=h[0])||void 0===A?void 0:A.mobileNumber,comment:O(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return n.createElement(Lo,{data:b,OpenImage:w,privacy:l})}{var b,N,C,D,I;const t={date:null==e||null===(b=e.auditDetails)||void 0===b?void 0:b.lastModified,name:null==e||null===(N=e.assignes)||void 0===N||null===(C=N[0])||void 0===C?void 0:C.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(D=e.assignes)||void 0===D||null===(I=D[0])||void 0===I?void 0:I.mobileNumber};return n.createElement(Lo,{data:t})}},B=(e,t)=>e?t?e:O(e):O("NA"),F=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),H=window.location.href.includes("employee/noc"),W=window.location.href.includes("employee/obps"),V=(window.location.href.includes("employee/ws"),()=>window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||F?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}),j=e=>null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?B(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+O(null==e?void 0:e.isUnit):O("N/A"):null!=e&&e.value?B(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):O("N/A"),[Y,K]=l.useState(!1);return n.createElement(t.Card,{style:{position:"relative"},className:"employeeCard-override"},I?n.createElement(wo,{t:O,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==g||null===(r=g.applicationDetails)||void 0===r?void 0:r.map((e,i)=>{var r,a,u,d,s,c,v,p,m,E,f,_,y,T,h,L,A,b,N,I,w,P,x,M,k,U,B,Y,K,z,G,q,$,X,Z,Q,J,ee,te;return n.createElement(n.Fragment,{key:i},n.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:F?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==i||e.asSectionHeader?n.createElement(n.Fragment,null,n.createElement(t.CardSectionHeader,{style:0==i&&F?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},H?""+O(e.title):O(e.title),null!=e&&e.Component?n.createElement(e.Component,null):null)):n.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},O(e.title)),(null==e?void 0:e.isTable)&&n.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},n.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(e=>n.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},O(e)))),null==e?void 0:e.tableRows.map((t,i)=>i===(null==e?void 0:e.tableRows.length)-1?n.createElement(l.Fragment,null,n.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),n.createElement("tr",null,t.map(e=>n.createElement("td",{style:{textAlign:"left"}},O(e))))):n.createElement("tr",null,t.map(e=>n.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},O(e)))))),n.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||F?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(r=e.values)||void 0===r?void 0:r.map((l,i)=>{var r,a,u;return!0===l.map&&"N/A"!==l.value?n.createElement(t.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:O(l.title),label:O(l.title),text:n.createElement("img",{src:O(l.value),alt:"",privacy:null==l?void 0:l.privacy})}):1==(null==l?void 0:l.isLink)?n.createElement(t.Row,{key:O(l.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?n.createElement("div",{style:{width:"200%"}},n.createElement(o.Link,{to:null==l?void 0:l.to},n.createElement("span",{className:"link",style:{color:"#a82227"}},O(null==l?void 0:l.title)))):H||W?""+O(l.title):O(l.title),text:n.createElement("div",null,n.createElement(o.Link,{to:null==l?void 0:l.to},n.createElement("span",{className:"link",style:{color:"#a82227"}},null==l?void 0:l.value))),last:i===(null==e||null===(u=e.values)||void 0===u?void 0:u.length)-1,caption:l.caption,className:"border-none",rowContainerStyle:V(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):n.createElement("div",null,window.location.href.includes("modify")?n.createElement(t.Row,{className:"border-none",key:""+l.title,label:""+O(""+l.title),privacy:null==l?void 0:l.privacy,text:null!=l&&l.oldValue?null==l?void 0:l.oldValue:null!=l&&l.value?null==l?void 0:l.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):n.createElement(t.Row,{key:O(l.title),label:O(l.title),text:j(l),last:i===(null==e||null===(r=e.values)||void 0===r?void 0:r.length)-1,caption:l.caption,className:"border-none",privacy:null==l?void 0:l.privacy,rowContainerStyle:V(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}),"PT_TOTAL_DUES"===l.title?n.createElement(ko,{bill:null===(a=R.Bill)||void 0===a?void 0:a[0]}):"")})))),(null==e?void 0:e.belowComponent)&&n.createElement(e.belowComponent,null),(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.inspectionReport)&&n.createElement(go,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:C}),(null==g||null===(u=g.applicationData)||void 0===u||null===(d=u.additionalDetails)||void 0===d||null===(s=d.fieldinspection_pending)||void 0===s?void 0:s.length)>0&&(null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.fiReport)&&n.createElement(vo,{fiReport:null==g||null===(v=g.applicationData)||void 0===v||null===(p=v.additionalDetails)||void 0===p?void 0:p.fieldinspection_pending}),(null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.floors)&&n.createElement(yo,{floors:null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.floors}),(null==e||null===(f=e.additionalDetails)||void 0===f?void 0:f.owners)&&n.createElement(To,{owners:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners}),(null==e||null===(y=e.additionalDetails)||void 0===y?void 0:y.units)&&n.createElement(bo,{units:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.units}),(null==e||null===(h=e.additionalDetails)||void 0===h?void 0:h.accessories)&&n.createElement(Ao,{units:null==e||null===(L=e.additionalDetails)||void 0===L?void 0:L.accessories}),(null==e||null===(A=e.additionalDetails)||void 0===A?void 0:A.permissions)&&(null==S||null===(b=S.data)||void 0===b||null===(N=b.nextActions)||void 0===N?void 0:N.length)>0&&n.createElement(Eo,{applicationData:null==g?void 0:g.applicationData,t:O,permissions:null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.permissions}),(null==e||null===(w=e.additionalDetails)||void 0===w?void 0:w.obpsDocuments)&&n.createElement(so,{t:O,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:S}),(null==e||null===(P=e.additionalDetails)||void 0===P?void 0:P.noc)&&n.createElement(mo,{t:O,isNoc:!0,NOCdata:e.values,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.noc,noc:null===(x=e.additionalDetails)||void 0===x?void 0:x.data,bpaActionsDetails:S}),(null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.scruntinyDetails)&&n.createElement(go,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(k=e.additionalDetails)||void 0===k?void 0:k.buildingExtractionDetails)&&n.createElement(go,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(U=e.additionalDetails)||void 0===U?void 0:U.subOccupancyTableDetails)&&n.createElement(So,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==g?void 0:g.applicationData}),(null==e||null===(B=e.additionalDetails)||void 0===B?void 0:B.documentsWithUrl)&&n.createElement(uo,{documents:null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.documentsWithUrl}),(null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.documents)&&n.createElement(fo,{documents:null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.documents}),(null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.taxHeadEstimatesCalculation)&&n.createElement(_o,{taxHeadEstimatesCalculation:null==e||null===(q=e.additionalDetails)||void 0===q?void 0:q.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&n.createElement(No,{wsAdditionalDetails:e,oldValue:D}),(null==e||null===($=e.additionalDetails)||void 0===$?void 0:$.redirectUrl)&&n.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},n.createElement(o.Link,{to:null==e||null===(X=e.additionalDetails)||void 0===X||null===(Z=X.redirectUrl)||void 0===Z?void 0:Z.url},n.createElement("span",{className:"link",style:{color:"#a82227"}},null==e||null===(Q=e.additionalDetails)||void 0===Q||null===(J=Q.redirectUrl)||void 0===J?void 0:J.title))),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&n.createElement(Io,{wsAdditionalDetails:e,workflowDetails:S}),(null==e||null===(te=e.additionalDetails)||void 0===te?void 0:te.estimationDetails)&&n.createElement(Ro,{wsAdditionalDetails:e,workflowDetails:S}))}),b&&(null==S||null===(a=S.data)||void 0===a||null===(u=a.timeline)||void 0===u?void 0:u.length)>0&&n.createElement(n.Fragment,null,n.createElement(t.BreakLine,null),((null==S?void 0:S.isLoading)||h)&&n.createElement(t.Loader,null),!(null!=S&&S.isLoading)&&!h&&n.createElement(l.Fragment,null,n.createElement("div",{id:"timeline"},n.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},O("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=S&&null!==(d=S.data)&&void 0!==d&&d.timeline&&1===(null==S||null===(s=S.data)||void 0===s||null===(c=s.timeline)||void 0===c?void 0:c.length)?n.createElement(t.CheckPoint,{isCompleted:!0,label:O(""+A+(null==S||null===(v=S.data)||void 0===v||null===(p=v.timeline[0])||void 0===p?void 0:p.state)),customChild:U(null==S||null===(m=S.data)||void 0===m?void 0:m.timeline[0])}):n.createElement(t.ConnectingCheckPoints,null,(null==S||null===(E=S.data)||void 0===E?void 0:E.timeline)&&(null==S||null===(f=S.data)||void 0===f?void 0:f.timeline.slice(0,Y?null==S?void 0:S.data.timeline.length:2).map((e,l,i)=>{let o="";var r,a,u,d,s,c;return window.location.href.includes("/obps/")&&(o=null!=S&&null!==(r=S.data)&&void 0!==r&&null!==(a=r.timeline[l-1])&&void 0!==a&&null!==(u=a.state)&&void 0!==u&&u.includes("BACK_FROM")||null!=S&&null!==(d=S.data)&&void 0!==d&&null!==(s=d.timeline[l-1])&&void 0!==s&&null!==(c=s.state)&&void 0!==c&&c.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==l?"":"_DONE"),n.createElement(n.Fragment,{key:l},n.createElement(t.CheckPoint,{keyValue:l,isCompleted:0===l,info:e.comment,label:O(""+A+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[N])+o),customChild:U(e,l)}))}))),(null==S||null===(y=S.data)||void 0===y||null===(T=y.timeline)||void 0===T?void 0:T.length)>2&&n.createElement(t.LinkButton,{label:O(Y?"COLLAPSE":"VIEW_TIMELINE"),onClick:()=>{K(e=>!e)}})))))}function Bo(e){var l,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g;let{t:S,showToast:h,closeToast:L,businessService:A}=e;if(null!=A&&A.includes("NewTL")||null!=A&&A.includes("TL")||null!=A&&A.includes("EDITRENEWAL")){var b;let e="";switch(null==h||null===(b=h.action)||void 0===b?void 0:b.action){case"SENDBACK":e="error"===(null==h?void 0:h.key)?null==h||null===(l=h.error)||void 0===l?void 0:l.message:S("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":e="error"===(null==h?void 0:h.key)?null==h||null===(i=h.error)||void 0===i?void 0:i.message:S("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":e="error"===(null==h?void 0:h.key)?null==h||null===(o=h.error)||void 0===o?void 0:o.message:S("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":e="error"===(null==h?void 0:h.key)?null==h||null===(r=h.error)||void 0===r?void 0:r.message:S("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":e="error"===(null==h?void 0:h.key)?null==h||null===(a=h.error)||void 0===a?void 0:a.message:S("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":e="error"===(null==h?void 0:h.key)?null==h||null===(u=h.error)||void 0===u?void 0:u.message:S("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":e="error"===(null==h?void 0:h.key)?null==h||null===(d=h.error)||void 0===d?void 0:d.message:S("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:e="error"===(null==h?void 0:h.key)?null==h||null===(s=h.error)||void 0===s?void 0:s.message:S("ES_"+A+"_"+(null==h||null===(c=h.action)||void 0===c?void 0:c.action)+"_UPDATE_SUCCESS")}return n.createElement(n.Fragment,null,h&&n.createElement(t.Toast,{error:"error"===h.key,label:e,onClose:L}))}if(null!=A&&A.includes("BPA")||null!=A&&A.includes("BPA_LOW")||null!=A&&A.includes("BPA_OC")){var N;const e=function(e){var t;void 0===e&&(e=[]);let l=e[0];return l=2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=A&&A.includes("BPA_OC")?S(e[1]):S(e[0]),l};let l="";switch(null==h||null===(N=h.action)||void 0===N?void 0:N.action){case"REVOCATE":l="error"===(null==h?void 0:h.key)?null==h||null===(v=h.error)||void 0===v?void 0:v.message:e(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":l="error"===(null==h?void 0:h.key)?null==h||null===(p=h.error)||void 0===p?void 0:p.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":l="error"===(null==h?void 0:h.key)?null==h||null===(m=h.error)||void 0===m?void 0:m.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":l="error"===(null==h?void 0:h.key)?null==h||null===(E=h.error)||void 0===E?void 0:E.message:e(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":l="error"===(null==h?void 0:h.key)?null==h||null===(f=h.error)||void 0===f?void 0:f.message:e(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":l="error"===(null==h?void 0:h.key)?null==h||null===(_=h.error)||void 0===_?void 0:_.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":l="error"===(null==h?void 0:h.key)?null==h||null===(y=h.error)||void 0===y?void 0:y.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:l="error"===(null==h?void 0:h.key)?null==h||null===(T=h.error)||void 0===T?void 0:T.message:S("ES_"+A+"_"+(null==h||null===(g=h.action)||void 0===g?void 0:g.action)+"_UPDATE_SUCCESS")}return n.createElement(n.Fragment,null,h&&n.createElement(t.Toast,{error:"error"===h.key,label:l,onClose:L}))}{var C,D;const e="error"===(null==h?void 0:h.key)?null==h||null===(C=h.error)||void 0===C?void 0:C.message:"ES_"+A+"_"+(null==h||null===(D=h.action)||void 0===D?void 0:D.action)+"_UPDATE_SUCCESS";return n.createElement(n.Fragment,null,h&&n.createElement(t.Toast,{error:"error"===h.key,label:S(e),onClose:L}))}}function Fo(e){var o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g;let{workflowDetails:S,displayMenu:h,onActionSelect:L,setDisplayMenu:A,businessService:b,forcedActionPrefix:N,ActionBarStyle:C={},MenuStyle:D={}}=e;const{t:I}=i.useTranslation();let O=Digit.UserService.getUser();const w=l.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){const e=sessionStorage.getItem("Digit.citizen.userRequestObject"),t=e?JSON.parse(e):{};O=null==t?void 0:t.value}const R=null===(o=O)||void 0===o||null===(r=o.info)||void 0===r||null===(a=r.roles)||void 0===a?void 0:a.map(e=>e.code);let P=!1,x=!1,M=(null==S||null===(u=S.data)||void 0===u||null===(d=u.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s?void 0:s.filter(e=>(null==R?void 0:R.some(t=>{var l;return null===(l=e.roles)||void 0===l?void 0:l.includes(t)}))||!e.roles))||(null==S||null===(c=S.data)||void 0===c||null===(v=c.nextActions)||void 0===v?void 0:v.filter(e=>(null==R?void 0:R.some(t=>{var l;return null===(l=e.roles)||void 0===l?void 0:l.includes(t)}))||!e.roles));return Digit.Hooks.useClickOutside(w,()=>{A(!1)},h),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==M?void 0:M.length)||null!=M&&null!==(p=M[0])&&void 0!==p&&null!==(m=p.redirectionUrl)&&void 0!==m&&m.pathname.includes("/pt/property-details/")&&1==(null==M?void 0:M.length)?(x=!1,P=!0):(null==M?void 0:M.length)>0&&(x=!0,P=!1),n.createElement(n.Fragment,null,!(null!=S&&S.isLoading)&&x&&!P&&n.createElement(t.ActionBar,{style:{...C}},h&&(null!=S&&null!==(E=S.data)&&void 0!==E&&null!==(f=E.actionState)&&void 0!==f&&f.nextActions||null!=S&&null!==(_=S.data)&&void 0!==_&&_.nextActions)?n.createElement(t.Menu,{localeKeyPrefix:N||"WF_EMPLOYEE_"+(null==b?void 0:b.toUpperCase()),options:M,optionKey:"action",t:I,onSelect:L,style:D}):null,n.createElement(t.SubmitBar,{ref:w,label:I("WF_TAKE_ACTION"),onSubmit:()=>A(!h)})),!(null!=S&&S.isLoading)&&!x&&P&&n.createElement(t.ActionBar,{style:{...C}},n.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==M||null===(y=M[0])||void 0===y?void 0:y.action,value:null==M||null===(T=M[0])||void 0===T?void 0:T.action,onClick:e=>{L((null==M?void 0:M[0])||{})}},I((N||"WF_EMPLOYEE_"+(null==b?void 0:b.toUpperCase()))+"_"+(null==M||null===(g=M[0])||void 0===g?void 0:g.action)))))}const Ho=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},n.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Wo=e=>n.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},n.createElement(Ho,null));function Vo(e){let{action:l,closeWarningPopup:o}=e;const{t:r}=i.useTranslation(),a=window.Digit.Utils.browser.isMobile();return n.createElement(n.Fragment,null,n.createElement(t.Modal,{headerBarMain:n.createElement("h1",{className:"heading-m"},r("PT_DUES_ARE_PENDING")),headerBarEnd:n.createElement(Wo,{onClick:()=>{o()}}),hideSubmit:!0,isDisabled:!1,popupStyles:a?{}:{width:"29%",marginTop:"auto"}},n.createElement(t.Card,null,n.createElement("div",{style:{marginBottom:"30px"}},n.createElement("h1",null,r("PT_YOU_HAVE")," ₹",null==l?void 0:l.AmountDueForPay," ",r("PT_DUE_WARNING_MSG2"))),n.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+r("PT_AMOUNT_DUE"),text:"₹"+r(null==l?void 0:l.AmountDueForPay)}),n.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},n.createElement(t.ButtonSelector,{theme:"border",label:r("ES_PT_COMMON_CANCEL"),onSubmit:o,style:{marginLeft:"10px"}}),n.createElement(t.ButtonSelector,{label:r("PT_COLLECT"),onSubmit:()=>{var e;return window.location.assign(""+window.location.origin+(null==l||null===(e=l.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}const jo=e=>{var r;const u=Digit.ULBService.getCurrentTenantId(),d=Digit.ULBService.getStateId(),{t:s}=i.useTranslation(),c=o.useHistory();let{id:v}=o.useParams();const[p,m]=l.useState(!1),[E,f]=l.useState(null),[_,y]=l.useState(!1),[T,g]=l.useState(!1),[S,h]=l.useState(!1),{applicationDetails:L,showToast:A,setShowToast:b,isLoading:N,isDataLoading:C,applicationData:D,mutate:I,nocMutation:O,workflowDetails:w,id:R,businessService:P,closeToast:x,moduleCode:M,timelineStatusPrefix:k,forcedActionPrefix:U,statusAttribute:B,ActionBarStyle:F,MenuStyle:H,paymentsList:W,showTimeLine:V=!0,oldValue:j,isInfoLabel:Y=!1,clearDataDetails:K}=e;l.useEffect(()=>{A&&w.revalidate()},[A]);const z=a.useQueryClient(),G=()=>{f(null),y(!1)};return N||T?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,N?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,n.createElement(Uo,{applicationDetails:L,id:R,workflowDetails:w,isDataLoading:C,applicationData:D,businessService:P,timelineStatusPrefix:k,statusAttribute:B,paymentsList:W,showTimeLine:V,oldValue:j,isInfoLabel:Y}),_?n.createElement(ao,{t:s,action:E,tenantId:u,state:d,id:v,applicationDetails:L,applicationData:null==L?void 0:L.applicationData,closeModal:G,submitAction:function(e,t,l){void 0===t&&(t=!1),void 0===l&&(l={});try{let n=!1;const i=function(i,o,r,a,u,d,v,p,m,f,_,y){if(0!=(null==e||null===(i=e.Property)||void 0===i||null===(o=i.workflow)||void 0===o||null===(r=o.comment)||void 0===r?void 0:r.length)&&0!=(null==e||null===(a=e.Licenses)||void 0===a||null===(u=a[0])||void 0===u||null===(d=u.comment)||void 0===d?void 0:d.length)&&0!=(null==e||null===(v=e.WaterConnection)||void 0===v||null===(p=v.comment)||void 0===p?void 0:p.length)&&0!=(null==e||null===(m=e.SewerageConnection)||void 0===m||null===(f=m.comment)||void 0===f?void 0:f.length)&&0!=(null==e||null===(_=e.BPA)||void 0===_||null===(y=_.comment)||void 0===y?void 0:y.length)){function T(t){if(n)return t;I&&(g(!0),I(e,{onError:(e,t)=>{g(!1),b({key:"error",error:e}),setTimeout(x,5e3)},onSuccess:(e,t)=>{var n,i,o,r,a,u,d,v,p,m,f,_;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),g(!1),null!==(n=l)&&void 0!==n&&n.bpa&&(e.selectedAction=E,c.replace("/digit-ui/employee/obps/response",{data:e})),null!==(i=l)&&void 0!==i&&i.isStakeholder&&(e.selectedAction=E,c.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!==(o=l)&&void 0!==o&&o.isNoc&&c.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(r=e.Amendments)||void 0===r?void 0:r.length)>0?null!=t&&null!==(a=t.AmendmentUpdate)&&void 0!==a&&null!==(u=a.workflow)&&void 0!==u&&u.action.includes("SEND_BACK")?b({key:"success",label:s("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(d=t.AmendmentUpdate)&&void 0!==d&&null!==(v=d.workflow)&&void 0!==v&&v.action.includes("RE-SUBMIT")?b({key:"success",label:s("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(p=t.AmendmentUpdate)&&void 0!==p&&null!==(m=p.workflow)&&void 0!==m&&m.action.includes("APPROVE")?b({key:"success",label:s("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(f=t.AmendmentUpdate)&&void 0!==f&&null!==(_=f.workflow)&&void 0!==_&&_.action.includes("REJECT")&&b({key:"success",label:s("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(b({key:"success",action:E}),K&&setTimeout(K,3e3),setTimeout(x,5e3),z.clear(),z.refetchQueries("APPLICATION_SEARCH"))}})),G()}g(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const i=function(){if(!1!==t&&O){var e;const l=null===(e=t)||void 0===e?void 0:e.map(e=>null==O?void 0:O.mutateAsync(e)),i=Ke(function(){return g(!0),Promise.resolve(Promise.all(l)).then(function(e){e&&e.map(e=>{var t,l;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.nocType)})})},function(e){var t,l,i,o,r,a,u,d,c,v,p,m;g(!1);let E=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(i=l.Errors)&&void 0!==i&&null!==(o=i[0])&&void 0!==o&&o.code?s(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a||null===(u=a.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(c=e.response)||void 0===c||null===(v=c.data)||void 0===v||null===(p=v.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;G(),b({key:"error",error:{message:E}}),setTimeout(x,5e3),n=!0});if(i&&i.then)return i.then(function(){})}}();return i&&i.then?i.then(T):T(i)}alert("Please fill in the comments before submitting")}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},actionData:null==w||null===(r=w.data)||void 0===r?void 0:r.timeline,businessService:P,workflowDetails:w,moduleCode:M}):null,S?n.createElement(Vo,{action:E,workflowDetails:w,businessService:P,isWarningPop:S,closeWarningPopup:()=>{h(!1)}}):null,n.createElement(Bo,{t:s,showToast:A,closeToast:x,businessService:P}),n.createElement(Fo,{workflowDetails:w,displayMenu:p,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)b({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(x,5e3);else if(null!=e&&e.isWarningPopUp)h(!0);else if(null!=e&&e.redirectionUrll){var t,l,n,i,o;if("ACTIVATE_CONNECTION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action))c.push(""+(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.pathname),JSON.stringify({data:null==e||null===(i=e.redirectionUrll)||void 0===i?void 0:i.state,url:""+(null===(o=location)||void 0===o?void 0:o.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.action)){var r,a;c.push(""+(null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.pathname),{data:null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.state})}else{var u;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(u=e.redirectionUrll)||void 0===u?void 0:u.pathname))}}else if(null!=e&&e.redirectionUrl){var d,s;c.push({pathname:null===(d=e.redirectionUrl)||void 0===d?void 0:d.pathname,state:{...null===(s=e.redirectionUrl)||void 0===s?void 0:s.state}})}else y(!0);f(e),m(!1)},setDisplayMenu:m,businessService:P,forcedActionPrefix:U,ActionBarStyle:F,MenuStyle:H})))};function Yo(e){var t=-1,l=null==e?0:e.length;for(this.__data__=new Z;++t<l;)this.add(e[t])}Yo.prototype.add=Yo.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Yo.prototype.has=function(e){return this.__data__.has(e)};var Ko=Yo,zo=function(e,t){for(var l=-1,n=null==e?0:e.length;++l<n;)if(t(e[l],l,e))return!0;return!1},Go=function(e,t){return e.has(t)},qo=function(e,t,l,n,i,o){var r=1&l,a=e.length,u=t.length;if(a!=u&&!(r&&u>a))return!1;var d=o.get(e),s=o.get(t);if(d&&s)return d==t&&s==e;var c=-1,v=!0,p=2&l?new Ko:void 0;for(o.set(e,t),o.set(t,e);++c<a;){var m=e[c],E=t[c];if(n)var f=r?n(E,m,c,t,e,o):n(m,E,c,e,t,o);if(void 0!==f){if(f)continue;v=!1;break}if(p){if(!zo(t,function(e,t){if(!Go(p,t)&&(m===e||i(m,e,l,n,o)))return p.push(t)})){v=!1;break}}else if(m!==E&&!i(m,E,l,n,o)){v=!1;break}}return o.delete(e),o.delete(t),v},$o=function(e){var t=-1,l=Array(e.size);return e.forEach(function(e,n){l[++t]=[n,e]}),l},Xo=function(e){var t=-1,l=Array(e.size);return e.forEach(function(e){l[++t]=e}),l},Zo=E?E.prototype:void 0,Qo=Zo?Zo.valueOf:void 0,Jo=Object.prototype.hasOwnProperty,er=Object.prototype.hasOwnProperty,tr=function e(t,l,n,i,o){return t===l||(null==t||null==l||!A(t)&&!A(l)?t!=t&&l!=l:function(e,t,l,n,i,o){var r=u(e),a=u(t),d=r?"[object Array]":el(e),s=a?"[object Array]":el(t),c="[object Object]"==(d="[object Arguments]"==d?"[object Object]":d),v="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s),p=d==s;if(p&&Et(e)){if(!Et(t))return!1;r=!0,c=!1}if(p&&!c)return o||(o=new at),r||St(e)?qo(e,t,l,n,i,o):function(e,t,l,n,i,o,r){switch(l){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new ll(e),new ll(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return j(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=$o;case"[object Set]":if(a||(a=Xo),e.size!=t.size&&!(1&n))return!1;var u=r.get(e);if(u)return u==t;n|=2,r.set(e,t);var d=qo(a(e),a(t),n,i,o,r);return r.delete(e),d;case"[object Symbol]":if(Qo)return Qo.call(e)==Qo.call(t)}return!1}(e,t,d,l,n,i,o);if(!(1&l)){var m=c&&er.call(e,"__wrapped__"),E=v&&er.call(t,"__wrapped__");if(m||E){var f=m?e.value():e,_=E?t.value():t;return o||(o=new at),i(f,_,l,n,o)}}return!!p&&(o||(o=new at),function(e,t,l,n,i,o){var r=1&l,a=Vt(e),u=a.length;if(u!=Vt(t).length&&!r)return!1;for(var d=u;d--;){var s=a[d];if(!(r?s in t:Jo.call(t,s)))return!1}var c=o.get(e),v=o.get(t);if(c&&v)return c==t&&v==e;var p=!0;o.set(e,t),o.set(t,e);for(var m=r;++d<u;){var E=e[s=a[d]],f=t[s];if(n)var _=r?n(f,E,s,t,e,o):n(E,f,s,e,t,o);if(!(void 0===_?E===f||i(E,f,l,n,o):_)){p=!1;break}m||(m="constructor"==s)}if(p&&!m){var y=e.constructor,T=t.constructor;y==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof T&&T instanceof T||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,l,n,i,o))}(t,l,n,i,e,o))},lr=function(e){return e==e&&!I(e)},nr=function(e,t){return function(l){return null!=l&&l[e]===t&&(void 0!==t||e in Object(l))}},ir=function(e,t){return null!=e&&t in Object(e)},or=function(e){return e},rr=function(e){return"function"==typeof e?e:null==e?or:"object"==typeof e?u(e)?(i=e[1],D(n=e[0])&&lr(i)?nr(ue(n),i):function(e){var t=se(e,n);return void 0===t&&t===i?function(e,t){return null!=e&&function(e,t,l){for(var n=-1,i=(t=ae(t,e)).length,o=!1;++n<i;){var r=ue(t[n]);if(!(o=null!=e&&l(e,r)))break;e=e[r]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&ft(i)&&fe(r,i)&&(u(e)||pt(e))}(e,t,ir)}(e,n):tr(i,t,3)}):1==(l=function(e){for(var t=Ot(e),l=t.length;l--;){var n=t[l],i=e[n];t[l]=[n,i,lr(i)]}return t}(t=e)).length&&l[0][2]?nr(l[0][0],l[0][1]):function(e){return e===t||function(e,t,l,n){var i=l.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var r=l[i];if(r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++i<o;){var a=(r=l[i])[0],u=e[a],d=r[1];if(r[2]){if(void 0===u&&!(a in e))return!1}else{var s=new at;if(!tr(d,u,3,void 0,s))return!1}}return!0}(e,0,l)}:function(e){return D(e)?(t=ue(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return de(t,e)}}(e);var t}(e);var t,l,n,i},ar=function(e,t){if(e!==t){var l=void 0!==e,n=null===e,i=e==e,o=b(e),r=void 0!==t,a=null===t,u=t==t,d=b(t);if(!a&&!d&&!o&&e>t||o&&r&&u&&!a&&!d||n&&r&&u||!l&&u||!i)return 1;if(!n&&!o&&!d&&e<t||d&&l&&i&&!n&&!o||a&&l&&i||!r&&i||!u)return-1}return 0};const ur=()=>{var e,r,a,d,s,c,v,p,m,E,f,_,y,T,g,S,h;const{data:L}=Digit.Hooks.useStore.getInitData(),{tenants:A}=L||{},{t:b}=i.useTranslation(),N=Digit.ULBService.getCurrentTenantId(),{id:C}=o.useParams(),[D,I]=l.useState(null),[O,w]=l.useState("NewTL"),[R,P]=l.useState([]),[x,M]=l.useState(!1),[k,U]=l.useState(""),[B,F]=l.useState(!1),[H,W]=l.useState("");sessionStorage.setItem("applicationNumber",C),Digit.Hooks.useQueryParams();const{isLoading:V,data:j}=Digit.Hooks.tl.useApplicationDetail(b,N,C),Y=Digit.ULBService.getStateId(),{data:K={}}=Digit.Hooks.tl.useTradeLicenseMDMS(Y,"TradeLicense",["TradeRenewal"]),{mutate:z}=Digit.Hooks.tl.useApplicationActions(N);let G=Digit.SessionStorage.get("EditRenewalApplastModifiedTime"),q=Digit.Hooks.useWorkflowDetails({tenantId:(null==j?void 0:j.tenantId)||N,id:null==j||null===(e=j.applicationData)||void 0===e?void 0:e.applicationNumber,moduleCode:O,role:"TL_CEMP",config:{EditRenewalApplastModifiedTime:G}});const{data:$}=Digit.Hooks.tl.useTLPaymentHistory(N,null==j||null===(r=j.applicationData)||void 0===r?void 0:r.applicationNumber);if(l.useEffect(()=>{var e;if((null==j||null===(e=j.numOfApplications)||void 0===e?void 0:e.length)>0){var t,l,n,i,o,r;let e=El(null==j||null===(t=j.applicationData)||void 0===t?void 0:t.financialYear);const u=null==e?void 0:e.split("-")[1],d="20"+Number(u)+"-"+(Number(u)+1),s=Math.max.apply(Math,null==j||null===(l=j.numOfApplications)||void 0===l||null===(n=l.filter(e=>{var t;return e.licenseNumber===(null==j||null===(t=j.applicationData)||void 0===t?void 0:t.licenseNumber)}))||void 0===n?void 0:n.map(function(e){return parseInt(e.financialYear.split("-")[0])})),c=null==j||null===(i=j.numOfApplications)||void 0===i?void 0:i.filter(e=>e.financialYear==d&&"REJECTED"!==(null==e?void 0:e.status));var a;(null==c?void 0:c.length)>0&&(M(!1),U(null==c||null===(a=c[0])||void 0===a?void 0:a.applicationNumber)),null!=j&&null!==(o=j.applicationData)&&void 0!==o&&o.financialYear.includes(""+s)||W(null==j||null===(r=j.applicationData)||void 0===r?void 0:r.financialYear),c&&0!=(null==c?void 0:c.length)||M(!0),P(null==j?void 0:j.numOfApplications)}},[null==j?void 0:j.numOfApplications]),l.useEffect(()=>{var e,t,l,n;null!==(e=q)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.applicationBusinessService&&w(null===(l=q)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.applicationBusinessService)},[q.data]),(null===(a=q)||void 0===a||null===(d=a.data)||void 0===d||null===(s=d.processInstances)||void 0===s?void 0:s.length)>0){var X,Z,Q,J,ee,te,le,ne,oe;let e=[];e=null===(X=se(null===(Z=q)||void 0===Z||null===(Q=Z.data)||void 0===Q?void 0:Q.processInstances[0],"nextActions",[]))||void 0===X?void 0:X.filter(e=>"ADHOC"!=e.action);let t=(ae=["action"],ue=["desc"],null==(re=e)?[]:(u(ae)||(ae=null==ae?[]:[ae]),u(ue=ue)||(ue=null==ue?[]:[ue]),function(e,t,l){t=t.length?ie(t,function(e){return u(e)?function(t){return de(t,1===e.length?e[0]:e)}:e}):[or];var n=-1;return t=ie(t,yt(rr)),function(e,t){var n=e.length;for(e.sort(function(e,t){return function(e,t,l){for(var n=-1,i=e.criteria,o=t.criteria,r=i.length,a=l.length;++n<r;){var u=ar(i[n],o[n]);if(u)return n>=a?u:u*("desc"==l[n]?-1:1)}return e.index-t.index}(e,t,l)});n--;)e[n]=e[n].value;return e}(function(e,t){var l=-1,n=It(e)?Array(e.length):[];return function(e,t){if(null==e)return e;if(!It(e))return function(e,t){return e&&function(e,t,l){for(var n=-1,i=Object(e),o=l(e),r=o.length;r--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e}(e,t,Ot)}(e,t);for(var l=e.length,n=-1,i=Object(e);++n<l&&!1!==t(i[n]););}(e,function(e,i,o){n[++l]=t(e)}),n}(e,function(e,l,i){return{criteria:ie(t,function(t){return t(e)}),index:++n,value:e}}))}(re,ae,ue)));t&&0!=(null==t?void 0:t.length)||null===(J=q)||void 0===J||null===(ee=J.data)||void 0===ee||!ee.actionState||(q.data.actionState.nextActions=[]),null===(te=q)||void 0===te||null===(le=te.data)||void 0===le||null===(ne=le.actionState)||void 0===ne||null===(oe=ne.nextActions)||void 0===oe||oe.forEach(e=>{"RESUBMIT"==e.action&&(e.redirectionUrl={pathname:"/digit-ui/employee/tl/edit-application-details/"+C,state:j},e.tenantId=Y)})}var re,ae,ue;const ce=Digit.UserService.getUser(),ve=null==ce||null===(c=ce.info)||void 0===c?void 0:c.roles.filter(e=>{if("TL_CEMP"==e.code&&e.tenantId===N||"CITIZEN"==e.code)return!0});var pe,me,Ee,fe,_e,ye,Te,ge,Se,he,Le;if(ve.length>0&&("APPROVED"===(null==j||null===(v=j.applicationData)||void 0===v?void 0:v.status)||"EXPIRED"===(null==j||null===(p=j.applicationData)||void 0===p?void 0:p.status)||"CANCELLED"===(null==j||null===(m=j.applicationData)||void 0===m?void 0:m.status)||"MANUALEXPIRED"===(null==j||null===(E=j.applicationData)||void 0===E?void 0:E.status))&&null!==(pe=q)&&void 0!==pe&&pe.data){var Ae,be,Ne,Ce,De,Ie;null!==(Ae=q)&&void 0!==Ae&&null!==(be=Ae.data)&&void 0!==be&&be.actionState||(q.data.actionState={},q.data.actionState.nextActions=[]);const e=null===(Ne=q)||void 0===Ne||null===(Ce=Ne.data)||void 0===Ce||null===(De=Ce.actionState)||void 0===De||null===(Ie=De.nextActions)||void 0===Ie?void 0:Ie.filter(e=>"RENEWAL_SUBMIT_BUTTON"==e.action);var Oe,we,Re,Pe,xe,Me;e&&0===e.length&&(null===(Oe=q)||void 0===Oe||null===(we=Oe.data)||void 0===we||null===(Re=we.actionState)||void 0===Re||null===(Pe=Re.nextActions)||void 0===Pe||Pe.push({action:"RENEWAL_SUBMIT_BUTTON",isToast:0==x||"CANCELLED"===(null==j||null===(xe=j.applicationData)||void 0===xe?void 0:xe.status)||"MANUALEXPIRED"===(null==j||null===(Me=j.applicationData)||void 0===Me?void 0:Me.status),toastMessage:0==x&&k&&"MANUALEXPIRED"!==(null==j||null===(me=j.applicationData)||void 0===me?void 0:me.status)?b("TL_ERROR_TOAST_RENEWAL_1")+" "+k+" "+b("TL_ERROR_TOAST_RENEWAL_2"):"CANCELLED"===(null==j||null===(Ee=j.applicationData)||void 0===Ee?void 0:Ee.status)?""+b("TL_ERROR_TOAST_RENEWAL_CANCEL"):"MANUALEXPIRED"===(null==j||null===(fe=j.applicationData)||void 0===fe?void 0:fe.status)?""+b("TL_ERROR_TOAST_MUTUALLY_EXPIRED"):void 0,redirectionUrl:{pathname:"/digit-ui/employee/tl/renew-application-details/"+C,state:j},tenantId:Y,role:[]}))}ve&&"PENDINGPAYMENT"===(null==j||null===(f=j.applicationData)||void 0===f?void 0:f.status)&&(null===(_e=q)||void 0===_e||null===(ye=_e.data)||void 0===ye||null===(Te=ye.nextActions)||void 0===Te||Te.map(e=>{var t,l;"PAY"===e.action&&(q={...q,data:{...null===(t=q)||void 0===t?void 0:t.data,actionState:{nextActions:[{action:e.action,redirectionUrll:{pathname:"TL/"+(null==j||null===(l=j.applicationData)||void 0===l?void 0:l.applicationNumber)+"/"+N,state:N},tenantId:N}]}}})}),null===(ge=q)||void 0===ge||null===(Se=ge.data)||void 0===Se||null===(he=Se.actionState)||void 0===he||null===(Le=he.nextActions)||void 0===Le||Le.forEach(e=>{var t;"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:"TL/"+(null==j||null===(t=j.applicationData)||void 0===t?void 0:t.applicationNumber)+"/"+N,state:(null==j?void 0:j.tenantId)||N})}));const ke=null===(_=q.data)||void 0===_||null===(y=_.timeline)||void 0===y?void 0:y.reduce((e,t)=>{let{wfDocuments:l}=t;return l?[...e,...l]:e},[]),Ue=null==j?void 0:j.applicationDetails.find(e=>"ES_NEW_APPLICATION_OWNERSHIP_DETAILS"===e.title);let Be=null==Ue||null===(T=Ue.additionalDetails)||void 0===T?void 0:T.documents;var Fe;Be&&null!=ke&&ke.length&&!Be.find(e=>"TL_WORKFLOW_DOCS"===e.title)&&(Ue.additionalDetails.documents=[...Ue.additionalDetails.documents,{title:"TL_WORKFLOW_DOCS",values:null==ke||null===(Fe=ke.map)||void 0===Fe?void 0:Fe.call(ke,e=>({...e,title:e.documentType}))}]);const He=function(){try{const e=A.find(e=>e.code===j.tenantId);return Promise.resolve(nt(null==j?void 0:j.applicationData,e,b)).then(function(e){Digit.Utils.pdf.generate(e),Ve(!1)})}catch(e){return Promise.reject(e)}},[We,Ve]=l.useState(!1),je="APPROVED"===(null==j||null===(g=j.applicationData)||void 0===g?void 0:g.status)?[{label:b("TL_CERTIFICATE"),onClick:function(){try{var e;return Promise.resolve(Digit.TLService.TLsearch({tenantId:null==j?void 0:j.tenantId,filters:{applicationNumber:null==j||null===(e=j.applicationData)||void 0===e?void 0:e.applicationNumber}})).then(function(e){return Promise.resolve(Digit.PaymentService.generatePdf(N,{Licenses:null==e?void 0:e.Licenses},"tlcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(N,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[e.filestoreIds[0]],"_blank"),Ve(!1)})})})}catch(e){return Promise.reject(e)}}},{label:b("TL_RECEIPT"),onClick:function(e,t){try{var l,n;void 0===t&&(t=null==j||null===(l=j.applicationData)||void 0===l?void 0:l.applicationNumber);const e={filestoreIds:[null===(n=$.Payments[0])||void 0===n?void 0:n.fileStoreId]},i=null!==e.filestoreIds[0]?Promise.resolve(Digit.PaymentService.printReciept(N,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[e.filestoreIds[0]],"_blank")}):Promise.resolve(Digit.PaymentService.generatePdf(N,{Payments:[$.Payments[0]]},"tradelicense-receipt")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(N,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[e.filestoreIds[0]],"_blank")})});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}},{label:b("TL_APPLICATION"),onClick:He}]:[{label:b("TL_APPLICATION"),onClick:He}];return n.createElement("div",{className:"employee-main-application-details"},n.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},n.createElement(t.Header,null,"NewTL"==(null==j||null===(S=j.applicationData)||void 0===S?void 0:S.workflowCode)&&"APPROVED"!==(null==j||null===(h=j.applicationData)||void 0===h?void 0:h.status)?b("TL_TRADE_APPLICATION_DETAILS_LABEL"):b("TL_TRADE_LICENSE_DETAILS_LABEL")),n.createElement("div",{style:{display:"flex",color:"#A52A2A",alignItems:"center"}},n.createElement(t.LinkButton,{label:b("VIEW_TIMELINE"),onClick:()=>{F(!0);const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"})}})),n.createElement(t.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>Ve(!We),displayOptions:We,options:je,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",optionStyle:{padding:"10px"}})),n.createElement(jo,{applicationDetails:j,isLoading:V,isDataLoading:V,applicationData:null==j?void 0:j.applicationData,mutate:z,id:"timeline",workflowDetails:q,businessService:O,moduleCode:"TL",showToast:D,setShowToast:I,closeToast:()=>{I(null)},timelineStatusPrefix:"WF_NEWTL_"}))},dr=e=>{var o,r,a,u,d,s,c,v,p;let{location:m}=e;const{t:E}=i.useTranslation(),f=null==m||null===(o=m.pathname)||void 0===o?void 0:o.includes("search"),_=null==m||null===(r=m.pathname)||void 0===r?void 0:r.includes("inbox"),y=null==m||null===(a=m.pathname)||void 0===a?void 0:a.includes("search/application"),T=null==m||null===(u=m.pathname)||void 0===u?void 0:u.includes("search/license"),g=null==m||null===(d=m.pathname)||void 0===d?void 0:d.includes("edit-application-details"),S=null==m||null===(s=m.pathname)||void 0===s?void 0:s.includes("renew-application-details"),h=null==m||null===(c=m.pathname)||void 0===c?void 0:c.includes("tl/application-details"),L=null==m||null===(v=m.pathname)||void 0===v?void 0:v.includes("tl/new-application"),A=null==m||null===(p=m.pathname)||void 0===p?void 0:p.includes("tl/response"),b=window.Digit.Utils.browser.isMobile(),[N,C]=l.useState(!1),D=window.location.href,I=sessionStorage.getItem("breadCrumbUrl")||"";D.includes("inbox")?sessionStorage.setItem("breadCrumbUrl","inbox"):D.includes("home")?sessionStorage.setItem("breadCrumbUrl","home"):D.includes("search/license")?"home"==I?sessionStorage.setItem("breadCrumbUrl","home/license"):"inbox"==I?sessionStorage.setItem("breadCrumbUrl","inbox/license"):sessionStorage.setItem("breadCrumbUrl",I.includes("home/license")?"home/license":"inbox/license"):D.includes("search/application")?"home"==I?sessionStorage.setItem("breadCrumbUrl","home/search"):"inbox"==I?sessionStorage.setItem("breadCrumbUrl","inbox/search"):sessionStorage.setItem("breadCrumbUrl",I.includes("home/search")?"home/search":"inbox/search"):D.includes("new-application")?"home"==I?sessionStorage.setItem("breadCrumbUrl","home/newApp"):"inbox"==I&&sessionStorage.setItem("breadCrumbUrl","inbox/newApp"):D.includes("application-details")?"home/license"==I?sessionStorage.setItem("breadCrumbUrl","home/license/appDetails"):"inbox/license"==I?sessionStorage.setItem("breadCrumbUrl","inbox/license/appDetails"):"home/search"==I?sessionStorage.setItem("breadCrumbUrl","home/search/appDetails"):"inbox/search"==I?sessionStorage.setItem("breadCrumbUrl","inbox/search/appDetails"):"inbox"==I&&sessionStorage.setItem("breadCrumbUrl","inbox/appDetails"):D.includes("renew-application-details")?"inbox/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","inbox/appDetails/renew"):"home/license/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","home/license/appDetails/renew"):"inbox/license/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","inbox/license/appDetails/renew"):"home/search/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","home/search/appDetails/renew"):"inbox/search/appDetails"==I&&sessionStorage.setItem("breadCrumbUrl","inbox/search/appDetails/renew"):D.includes("edit-application-details")?"inbox/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","inbox/appDetails/renew"):"home/license/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","home/license/appDetails/edit"):"inbox/license/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","inbox/license/appDetails/edit"):"home/search/appDetails"==I?sessionStorage.setItem("breadCrumbUrl","home/search/appDetails/edit"):"inbox/search/appDetails"==I&&sessionStorage.setItem("breadCrumbUrl","inbox/search/appDetails/edit"):D.includes("response")&&sessionStorage.setItem("breadCrumbUrl",""),l.useEffect(()=>{N?_&&N&&C(!1):C(f)},[m]);const O=sessionStorage.getItem("breadCrumbUrl")||"",w=[{path:"/digit-ui/employee",content:E("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/tl/inbox",content:E("ES_TITLE_INBOX"),show:O.includes("inbox")||_},{path:"/digit-ui/employee/tl/search/application",content:E("ES_COMMON_SEARCH_APPLICATION"),show:y||O.includes("home/search")||O.includes("inbox/search")},{path:"/digit-ui/employee/tl/search/license",content:E("TL_SEARCH_TRADE_HEADER"),show:T||O.includes("home/license")||O.includes("inbox/license")},{path:sessionStorage.getItem("applicationNumber")?"/digit-ui/employee/tl/application-details/"+sessionStorage.getItem("applicationNumber"):"",content:E("TL_DETAILS_HEADER_LABEL"),show:h||O.includes("inbox/appDetails")||O.includes("home/license/appDetails")||O.includes("inbox/license/appDetails")||O.includes("home/search/appDetails")||O.includes("inbox/search/appDetails")},{path:"/digit-ui/employee/tl/new-application",content:E("TL_HOME_SEARCH_RESULTS_NEW_APP_BUTTON"),show:L||O.includes("home/newApp")||O.includes("inbox/newApp")},{content:E("ES_TITLE_RENEW_TRADE_LICESE_APPLICATION"),show:S||O.includes("inbox/appDetails/renew")||O.includes("home/license/appDetails/renew")||O.includes("inbox/license/appDetails/renew")||O.includes("home/search/appDetails/renew")||O.includes("inbox/search/appDetails/renew")},{content:E("ES_TITLE_RE_NEW_TRADE_LICESE_APPLICATION"),show:g||O.includes("inbox/appDetails/edit")||O.includes("home/license/appDetails/edit")||O.includes("inbox/license/appDetails/edit")||O.includes("home/search/appDetails/edit")||O.includes("inbox/search/appDetails/edit")},{path:"/digit-ui/employee/tl/inbox",content:E("ACTION_TEST_RESPONSE"),show:A}];return n.createElement(t.BreadCrumb,{style:b?{display:"flex"}:{},spanStyle:{maxWidth:"min-content"},crumbs:w})},sr=e=>{var l,r,a,u,d,s,c,v;let{path:p,url:m}=e;const{t:E}=i.useTranslation(),f=o.useLocation(),_=window.location.href.includes("employee/tl/new-application")||window.location.href.includes("employee/tl/response")||window.location.href.includes("employee/tl/edit-application-details")||window.location.href.includes("employee/tl/renew-application-details"),y=null===(l=Digit)||void 0===l||null===(r=l.ComponentRegistryService)||void 0===r?void 0:r.getComponent("TLNewApplication"),T=null===(a=Digit)||void 0===a||null===(u=a.ComponentRegistryService)||void 0===u?void 0:u.getComponent("TLReNewApplication"),g=null===(d=Digit)||void 0===d||null===(s=d.ComponentRegistryService)||void 0===s?void 0:s.getComponent("TLResponse"),S=null===(c=Digit)||void 0===c||null===(v=c.ComponentRegistryService)||void 0===v?void 0:v.getComponent("TLSearch");return n.createElement(o.Switch,null,n.createElement(n.Fragment,null,n.createElement("div",{className:"ground-container",style:_?{width:"100%",marginLeft:"0px"}:{marginLeft:"0px"}},n.createElement("div",{style:_?{marginLeft:"15px"}:{}},n.createElement(dr,{location:f})),n.createElement(t.PrivateRoute,{path:p+"/inbox",component:()=>n.createElement(wi,{parentRoute:p,businessService:"TL",filterComponent:"TL_INBOX_FILTER",initialStates:{},isInbox:!0})}),n.createElement(t.PrivateRoute,{path:p+"/new-application",component:()=>n.createElement(y,{parentUrl:m})}),n.createElement(t.PrivateRoute,{path:p+"/application-details/:id",component:()=>n.createElement(ur,{parentRoute:p})}),n.createElement(t.PrivateRoute,{path:p+"/renew-application-details/:id",component:e=>n.createElement(T,Ye({},e,{parentRoute:p}))}),n.createElement(t.PrivateRoute,{path:p+"/edit-application-details/:id",component:e=>n.createElement(T,Ye({},e,{header:E("TL_ACTION_RESUBMIT"),parentRoute:p}))}),n.createElement(t.PrivateRoute,{path:p+"/response",component:e=>n.createElement(g,Ye({},e,{parentRoute:p}))}),n.createElement(t.PrivateRoute,{path:p+"/search/:variant",component:e=>n.createElement(S,Ye({},e,{parentRoute:p}))}))))},cr=e=>{let{stateCode:t,userType:l,tenants:i}=e;const{path:r,url:a}=o.useRouteMatch(),u=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:t,moduleCode:"TL",language:u}),Digit.SessionStorage.set("TL_TENANTS",i),"employee"===l?n.createElement(sr,{path:r,url:a,userType:l}):n.createElement(hi,null)},vr=e=>{let{matchPath:o}=e;const{t:r}=i.useTranslation(),[a,u,d]=Digit.Hooks.useSessionStorage("PT_CREATE_TRADE",{});l.useEffect(()=>{d()},[]);const s=[{link:o+"/tradelicence/new-application",i18nKey:r("TL_CREATE_TRADE")},{link:o+"/tradelicence/renewal-list",i18nKey:r("TL_RENEWAL_HEADER")},{link:o+"/tradelicence/my-application",i18nKey:r("TL_MY_APPLICATIONS_HEADER")}];return n.createElement(t.CitizenHomeCard,{header:r("ACTION_TEST_TRADE_LICENSE"),links:s,Icon:()=>n.createElement(t.CaseIcon,{className:"fill-path-primary-main"})})},pr={TLModule:cr,TLLinks:vr,TLCard:()=>{if(sessionStorage.setItem("breadCrumbUrl","home"),!Digit.Utils.tlAccess())return null;const{t:e}=i.useTranslation(),o=Digit.ULBService.getCurrentTenantId(),{isLoading:r,data:a}=Digit.Hooks.tl.useInbox({tenantId:o,filters:{limit:10,offset:0},config:{}}),[u,d]=l.useState(!0);l.useEffect(()=>{o&&u&&(d(!1),Digit.LocalizationService.getLocale({modules:["rainmaker-"+o],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+o}))},[o]);let s=[{count:r?"-":null==a?void 0:a.totalCount,label:e("ES_COMMON_INBOX"),link:"/digit-ui/employee/tl/inbox"},{label:e("TL_NEW_APPLICATION"),link:"/digit-ui/employee/tl/new-application",role:"TL_CEMP"},{label:e("TL_SEARCH_APPLICATIONS"),link:"/digit-ui/employee/tl/search/application"},{label:e("TL_SEARCH_LICENSE"),link:"/digit-ui/employee/tl/search/license",role:"TL_CEMP"}];s=s.filter(e=>!e.role||(e=>{var t;const l=Digit.ULBService.getCurrentTenantId(),n=Digit.UserService.getUser(),i=null==n||null===(t=n.info)||void 0===t?void 0:t.roles.filter(t=>{if(t.code==e&&t.tenantId===l)return!0});return null==i?void 0:i.length})(e.role));const c={Icon:n.createElement(t.CaseIcon,null),moduleName:e("TL_COMMON_TL"),kpis:[{count:r?"-":null==a?void 0:a.totalCount,label:e("TOTAL_TL"),link:"/digit-ui/employee/tl/inbox"},{count:r?"-":null==a?void 0:a.nearingSlaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/tl/inbox"}],links:s};return n.createElement(t.EmployeeModuleCard,c)},TradeLicense:e=>{var l;let{t:i,onSelect:o}=e;Digit.ULBService.getCurrentTenantId();const r=Digit.ULBService.getStateId(),{isLoading:a,data:u={}}=Digit.Hooks.tl.useTradeLicenseMDMS(r,"TradeLicense","TLDocuments");let d=null==u||null===(l=u.TradeLicense)||void 0===l?void 0:l.Documents;return n.createElement(n.Fragment,null,n.createElement(t.Card,null,n.createElement(t.CardHeader,null,i("TL_DOC_REQ_SCREEN_HEADER")),n.createElement("div",null,n.createElement(t.CardText,null,i("TL_DOC_REQ_SCREEN_TEXT")),n.createElement("div",null,a&&n.createElement(t.Loader,null),Array.isArray(d)?null==d?void 0:d.map((e,l)=>{let{code:o,dropdownData:r}=e;return n.createElement("div",{key:l},n.createElement(t.CardSubHeader,null,i("TRADELICENSE_"+xe(o,".","_")+"_HEADING")),null==r?void 0:r.map(e=>n.createElement(t.CardText,null,i("TRADELICENSE_"+xe(null==e?void 0:e.code,".","_")+"_LABEL"))))}):null)),n.createElement("span",null,n.createElement(t.SubmitBar,{label:i("CS_COMMON_NEXT"),onSubmit:o}))),n.createElement(t.CitizenInfoLabel,{info:i("CS_FILE_APPLICATION_INFO_LABEL"),text:i("TL_DOCUMENT_SIZE_INFO_MSG")}))},SelectTradeName:e=>{var i,o;let{t:r,config:a,onSelect:u,formData:d}=e;const[s,c]=l.useState(null===(i=d.TradeDetails)||void 0===i?void 0:i.TradeName),v=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),p=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade"),{isLoading:m,data:E={}}=Digit.Hooks.tl.useTradeLicenseMDMS(v,"egf-master","FinancialYear");let f=E["egf-master"]?E["egf-master"].FinancialYear.filter(e=>"TL"===e.module):[],_=f&&f.length>0&&(null===(o=f.sort((e,t)=>t.endingDate-e.endingDate)[0])||void 0===o?void 0:o.code);return l.useEffect(()=>{localStorage.setItem("TLAppSubmitEnabled","true")},[]),m?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{config:a,onSelect:()=>{sessionStorage.setItem("CurrentFinancialYear",(()=>{const e=Pe(Date.now()),t=e.split("-")[0],l=t.slice(2,4);return Number(e.split("-")[1])<4?Number(t)-1+"-"+Number(l):Number(t)+"-"+(Number(l)+1)})()),u(a.key,{TradeName:s})},onSkip:()=>u(),t:r,isDisabled:!s},n.createElement(t.CardLabel,null,""+r("TL_LOCALIZATION_TRADE_NAME")),n.createElement(t.TextInput,Ye({t:r,isMandatory:!1,type:"text",optionKey:"i18nKey",name:"TradeName",value:s,onChange:function(e){c(e.target.value)},disable:p},{pattern:"^[a-zA-Z-0-9_@/#&+-.`' ]*$",isRequired:!0,title:r("TL_INVALID_TRADE_NAME")}))),n.createElement(t.CitizenInfoLabel,{info:r("CS_FILE_APPLICATION_INFO_LABEL"),text:r("TL_LICENSE_ISSUE_YEAR_INFO_MSG")+_}))},SelectStructureType:e=>{var i;let{t:o,config:r,onSelect:a,formData:u}=e;const[d,s]=l.useState(null==u||null===(i=u.TradeDetails)||void 0===i?void 0:i.StructureType),c=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade");return n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{t:o,config:r,onSelect:function(){sessionStorage.setItem("StructureType",d.i18nKey),a(r.key,{StructureType:d})},onSkip:()=>a(),isDisabled:!d},n.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"TL_COMMON_YES",code:"IMMOVABLE"},{i18nKey:"TL_COMMON_NO",code:"MOVABLE"}],selectedOption:d,onSelect:function(e){s(e)},disabled:c})))},TLSelectVehicleType:e=>{var i,o;let{t:r,config:a,onSelect:u,formData:d}=e;Digit.ULBService.getCurrentTenantId();const s=Digit.ULBService.getStateId(),[c,v]=l.useState(null==d||null===(i=d.TradeDetails)||void 0===i?void 0:i.VehicleType),p=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade"),{isLoading:m,data:E={}}=Digit.Hooks.tl.useTradeLicenseMDMS(s,"common-masters","StructureType");let f=[];return E&&E["common-masters"]&&(null===(o=E["common-masters"].StructureType)||void 0===o||o.map(e=>{e.code.includes("IMMOVABLE")||f.push({i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+e.code.replaceAll(".","_"),code:""+e.code})})),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{t:r,config:a,onSelect:function(){u(a.key,{VehicleType:c})},onSkip:()=>u(),isDisabled:!c},m?n.createElement(t.Loader,null):n.createElement(t.RadioButtons,{t:r,optionsKey:"i18nKey",isMandatory:a.isMandatory,options:f,selectedOption:c,onSelect:function(e){v(e)},disable:p})))},SelectBuildingType:e=>{var i,o,r;let{t:a,config:u,onSelect:d,formData:s}=e;Digit.ULBService.getCurrentTenantId();const c=Digit.ULBService.getStateId(),[v,p]=l.useState(null==s||null===(i=s.TradeDetails)||void 0===i?void 0:i.BuildingType),{isLoading:m,data:E={}}=Digit.Hooks.tl.useTradeLicenseMDMS(c,"common-masters","StructureType"),f=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade");let _=[];return E&&E["common-masters"]&&(null===(o=E["common-masters"])||void 0===o||null===(r=o.StructureType)||void 0===r||r.map(e=>{e.code.includes("IMMOVABLE")&&_.push({i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+e.code.replaceAll(".","_"),code:""+e.code})})),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{t:a,config:u,onSelect:function(){d(u.key,{BuildingType:v})},onSkip:()=>d(),isDisabled:!v},m?n.createElement(t.Loader,null):n.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:u.isMandatory,options:_,selectedOption:v,onSelect:function(e){p(e)}})),n.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("TL_BUILDING_TYPE_INFO_MSG")}),f&&n.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("Structure type cant be modified")}))},SelectCommencementDate:e=>{var i;let{t:o,config:r,onSelect:a,formData:u}=e;const[d,s]=l.useState(null==u||null===(i=u.TradeDetails)||void 0===i?void 0:i.CommencementDate),c=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade");return l.useEffect(()=>{var e;if(window.location.href.includes("/tl/tradelicence/renew-trade")||window.location.href.includes("/tl/tradelicence/edit-application")&&null!=u&&null!==(e=u.TradeDetails)&&void 0!==e&&e.CommencementDate){let e=Date.parse(d);e=new Date(e).getFullYear().toString()+"-"+(new Date(e).getMonth()+1>9?1:0)+(new Date(e).getMonth()+1).toString()+"-"+(new Date(e).getDate()>9?"":0)+new Date(e).getDate().toString(),s(e)}},[d]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{t:o,config:r,onSelect:function(){a(r.key,{CommencementDate:d})},onSkip:()=>a(),isDisabled:!d},n.createElement(t.CardLabel,null,o("TL_NEW_TRADE_DETAILS_TRADE_COMM_DATE_LABEL")),n.createElement(t.DatePicker,{date:d,name:"CommencementDate",onChange:function(e){s(e)},disabled:c})))},SelectTradeUnits:e=>{var i,r,a,u,d,s,c,v,p,m,E,f,_;let{t:y,config:T,onSelect:g,formData:S}=e,h={};const[L,A]=l.useState(""),[b,N]=l.useState((null==S||null===(i=S.TadeDetails)||void 0===i||null===(r=i.Units)||void 0===r?void 0:r.TradeType)||""),[C,D]=l.useState((null==S||null===(a=S.TadeDetails)||void 0===a||null===(u=a.Units)||void 0===u?void 0:u.TradeSubType)||""),[I,O]=l.useState((null==S||null===(d=S.TadeDetails)||void 0===d||null===(s=d.Units)||void 0===s?void 0:s.UnitOfMeasure)||""),[w,R]=l.useState((null==S||null===(c=S.TadeDetails)||void 0===c||null===(v=c.Units)||void 0===v?void 0:v.UomValue)||""),[P,x]=l.useState(null),[M,k]=l.useState((null==S?void 0:S.TradeDetails)&&(null==S||null===(p=S.TradeDetails)||void 0===p?void 0:p.units)||[{tradecategory:"",tradetype:"",tradesubtype:"",unit:null,uom:null}]),U=Digit.ULBService.getCitizenCurrentTenant(),B=Digit.ULBService.getStateId(),{isLoading:F,data:H={}}=Digit.Hooks.tl.useTradeLicenseMDMS(B,"TradeLicense","TradeUnits","[?(@.type=='TL')]"),{data:W,isLoading:V}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:U,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.tradeType&&e.applicationType===(window.location.href.includes("renew-trade")?"RENEWAL":"NEW")&&"PERMANENT"===e.licenseType)});let j=[],Y=[];function K(e){var t,l;let n=[];var i,o;return e&&null!=H&&H.TradeLicense&&(null==H||null===(t=H.TradeLicense)||void 0===t||null===(l=t.TradeType)||void 0===l?void 0:l.length)>0&&(null==H||null===(i=H.TradeLicense)||void 0===i||null===(o=i.TradeType)||void 0===o||o.map(t=>{t.code.split(".")[0]!==e.code||n.some(e=>e.code===""+t.code.split(".")[1])||n.push({i18nKey:"TRADELICENSE_TRADETYPE_"+t.code.split(".")[1],code:""+t.code.split(".")[1]})})),n}function z(e){var t,l;let n=[];var i,o;return e&&null!=H&&H.TradeLicense&&(null==H||null===(t=H.TradeLicense)||void 0===t||null===(l=t.TradeType)||void 0===l?void 0:l.length)>0&&(null==H||null===(i=H.TradeLicense)||void 0===i||null===(o=i.TradeType)||void 0===o||o.map(t=>{t.code.split(".")[1]!==e.code||n.some(e=>e.code===""+t.code)||n.push({i18nKey:"TL_"+t.code,code:""+t.code})})),n}H&&H.TradeLicense&&(null===(m=H.TradeLicense)||void 0===m||null===(E=m.TradeType)||void 0===E||E.map(e=>{Y.some(t=>t.code===""+e.code.split(".")[0])||Y.push({i18nKey:"TRADELICENSE_TRADETYPE_"+e.code.split(".")[0],code:""+e.code.split(".")[0]})})),W&&W.length>0&&(null===(f=W.filter(e=>{var t,l;return e.structureType===(null==S||null===(t=S.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===f||f.map(e=>{j.some(t=>t.code===""+e.tradeType.split(".")[0])||j.push({i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]})})),W&&W.length>0&&(null===(_=W.filter(e=>{var t,l;return e.structureType===(null==S||null===(t=S.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===_||_.map(e=>{j.some(t=>t.code===""+e.tradeType.split(".")[0])||j.push({i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]})}));const{pathname:G}=o.useLocation();function q(e,t){let l=[...M];l[e].tradetype=t,N(t),$(e,null),X(e,""),k(l)}function $(e,t){var l,n,i,o;let r=[...M];r[e].tradesubtype=t,D(t),X(e,""),x(null),t&&(null==W||null===(l=W.filter(e=>{var l,n,i,o;return(null==e?void 0:e.tradeType)===(null==t?void 0:t.code)&&((null==e?void 0:e.structureType)===(null==S||null===(l=S.TradeDetails)||void 0===l||null===(n=l.VehicleType)||void 0===n?void 0:n.code)||(null==e?void 0:e.structureType)===(null==S||null===(i=S.TradeDetails)||void 0===i||null===(o=i.BuildingType)||void 0===o?void 0:o.code))}))||void 0===l?void 0:l.length)<=0&&(x("TL_BILLING_SLAB_NOT_FOUND_FOR_COMB"),window.setTimeout(function(){window.scrollTo(0,0)},0)),null==t&&(r[e].unit=null,O(null)),null===(n=Array.from(document.querySelectorAll("input")))||void 0===n||n.forEach(e=>e.value="");let a=!1;t&&W&&(null==W?void 0:W.length)>0&&(null===(i=W.filter(e=>{var t,l;return e.structureType===(null==S||null===(t=S.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===i||i.map(l=>{t.code===l.tradeType&&(r[e].unit=l.uom,a=!0,O(l.uom))})),t&&W&&(null==W?void 0:W.length)>0&&(null===(o=W.filter(e=>{var t,l;return e.structureType===(null==S||null===(t=S.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===o||o.map(l=>{t.code===l.tradeType&&(r[e].unit=l.uom,a=!0,O(l.uom))})),a||(r[e].unit=null,O(null)),k(r)}function X(e,t){var l,n;let i=[...M];i[e].uom=""==t?t:t.target.value,x(null);let o=null==W?void 0:W.filter(t=>{var l,n,o,r,a,u;return(null==t?void 0:t.tradeType)===(null===(l=i[e])||void 0===l||null===(n=l.tradesubtype)||void 0===n?void 0:n.code)&&((null==t?void 0:t.structureType)===(null==S||null===(o=S.TradeDetails)||void 0===o||null===(r=o.BuildingType)||void 0===r?void 0:r.code)||(null==t?void 0:t.structureType)===(null==S||null===(a=S.TradeDetails)||void 0===a||null===(u=a.VehicleType)||void 0===u?void 0:u.code))});var r,a,u,d,s,c,v,p,m,E;!t||null!=t&&null!==(l=t.target)&&void 0!==l&&l.value&&parseFloat(null==t||null===(n=t.target)||void 0===n?void 0:n.value)>0?(Number.isInteger(null==o||null===(r=o[0])||void 0===r?void 0:r.fromUom)&&(!t||null!=t&&null!==(u=t.target)&&void 0!==u&&u.value&&parseInt(t.target.value)>=(null==o||null===(d=o[0])||void 0===d?void 0:d.fromUom)||(x(y("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==o||null===(s=o[0])||void 0===s?void 0:s.fromUom)+" - "+(null==o||null===(c=o[0])||void 0===c?void 0:c.toUom)),window.setTimeout(function(){window.scrollTo(0,0)},0))),Number.isInteger(null==o||null===(a=o[0])||void 0===a?void 0:a.toUom)&&(!t||null!=t&&null!==(v=t.target)&&void 0!==v&&v.value&&parseInt(t.target.value)<=(null==o||null===(p=o[0])||void 0===p?void 0:p.toUom)||(x(y("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==o||null===(m=o[0])||void 0===m?void 0:m.fromUom)+" - "+(null==o||null===(E=o[0])||void 0===E?void 0:E.toUom)),window.setTimeout(function(){window.scrollTo(0,0)},0)))):(x(y("TL_UOM_VALUE_GREATER_O")),window.setTimeout(function(){window.scrollTo(0,0)},0)),R(""==t?t:t.target.value),k(i)}return G.includes("/modify-application/"),l.useEffect(()=>{window.location.href.includes("renew-trade")&&M&&(null==M||M.map(e=>{var t;e&&(null==W||null===(t=W.filter(t=>{var l,n,i,o,r;return(null==t?void 0:t.tradeType)===(null==e||null===(l=e.tradesubtype)||void 0===l?void 0:l.code)&&((null==t?void 0:t.structureType)===(null==S||null===(n=S.TradeDetails)||void 0===n||null===(i=n.VehicleType)||void 0===i?void 0:i.code)||(null==t?void 0:t.structureType)===(null==S||null===(o=S.TradeDetails)||void 0===o||null===(r=o.BuildingType)||void 0===r?void 0:r.code))}))||void 0===t?void 0:t.length)<=0&&x("TL_BILLING_SLAB_NOT_FOUND_FOR_COMB")}))},[]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,F||V?n.createElement(t.Loader,null):n.createElement(t.FormStep,{config:T,onSelect:()=>{let e,t=S.TradeDetails.Units;P||(x(null),e={...t,units:M},g(T.key,e))},onSkip:()=>g(),t:y,forcedError:y(P),isDisabled:!M[0].tradecategory||!M[0].tradetype||!M[0].tradesubtype},null==M?void 0:M.map((e,l)=>n.createElement("div",{key:e+"-"+l},n.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},n.createElement(t.CardLabel,null,y("TL_NEW_TRADE_DETAILS_TRADE_CAT_LABEL")+"*"),n.createElement(t.LinkButton,{label:n.createElement("div",null,n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"32px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:1!=M.length?"#494848":"#FAFAFA"})))),style:{width:"100px",display:"inline"},onClick:e=>function(e){const t=[...M];1!=t.length&&(t.splice(e,1),k(t))}(l)}),F&&V?n.createElement(t.Loader,null):n.createElement(t.RadioButtons,{t:y,options:Y,optionsKey:"i18nKey",name:"TradeCategory-"+l,value:null==e?void 0:e.tradecategory,selectedOption:null==e?void 0:e.tradecategory,onSelect:e=>function(e,t){let l=[...M];l[e].tradecategory=t,A(t),q(e,null),$(e,null),X(e,""),k(l)}(l,e),labelKey:"",isPTFlow:!0}),n.createElement(t.CardLabel,null,y("TL_NEW_TRADE_DETAILS_TRADE_TYPE_LABEL")+"*"),n.createElement(t.Dropdown,{t:y,optionKey:"i18nKey",isMandatory:T.isMandatory,option:ye(K(null==e?void 0:e.tradecategory),"i18nKey",y),selected:null==e?void 0:e.tradetype,select:e=>q(l,e)}),n.createElement(t.CardLabel,null,y("TL_NEW_TRADE_DETAILS_TRADE_SUBTYPE_LABEL")+"*"),n.createElement(t.Dropdown,{t:y,optionKey:"i18nKey",isMandatory:T.isMandatory,option:ye(z(null==e?void 0:e.tradetype),"i18nKey",y),selected:null==e?void 0:e.tradesubtype,optionCardStyles:{maxHeight:"125px",overflow:"scroll"},select:e=>$(l,e)}),n.createElement(t.CardLabel,null,""+y("TL_UNIT_OF_MEASURE_LABEL")),n.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:y,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UnitOfMeasure",value:null==e?void 0:e.unit,onChange:e=>function(e,t){let l=[...M];l[e].unit=t.target.value,O(t.target.value),k(l)}(l,e),disable:!0}),n.createElement(t.CardLabel,null,y("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+(e.unit?"*":"")),n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:y,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UomValue",value:null==e?void 0:e.uom,onChange:e=>X(l,e),disable:!e.unit},h={isRequired:!0,pattern:"[0-9]+",type:"text",title:y("TL_WRONG_UOM_VALUE_ERROR")}))))),n.createElement("div",{style:{justifyContent:"center",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},n.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>function(){const e=[...M];e.push({tradecategory:"",tradetype:"",tradesubtype:"",unit:null,uom:null}),k(e)}()},""+y("TL_ADD_MORE_TRADE_UNITS")))))},SelectAccessories:e=>{var i;let{t:o,config:r,onSelect:a,formData:u}=e;const[d,s]=l.useState(null==u||null===(i=u.TradeDetails)||void 0===i?void 0:i.isAccessories);return n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{t:o,config:r,onSelect:function(){var e,t;sessionStorage.setItem("isAccessories",d.i18nKey),sessionStorage.setItem("VisitedisAccessories",!0),a(r.key,{isAccessories:d,accessories:null!=u&&null!==(e=u.TradeDetails)&&void 0!==e&&e.accessories?null==u||null===(t=u.TradeDetails)||void 0===t?void 0:t.accessories:[]})},onSkip:()=>a(),isDisabled:!d},n.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"TL_COMMON_YES",code:"ACCESSORY"},{i18nKey:"TL_COMMON_NO",code:"NONACCESSORY"}],selectedOption:d,onSelect:function(e){s(e)}})))},SelectAccessoriesDetails:e=>{var i,r,a,u,d,s,c,v,p,m,E;let{t:f,config:_,onSelect:y,formData:T}=e,g={};const[S,h]=l.useState((null==T||null===(i=T.TadeDetails)||void 0===i||null===(r=i.accessories)||void 0===r?void 0:r.Accessory)||""),[L,A]=l.useState((null==T||null===(a=T.TadeDetails)||void 0===a||null===(u=a.accessories)||void 0===u?void 0:u.AccessoryCount)||""),[b,N]=l.useState((null==T||null===(d=T.TadeDetails)||void 0===d||null===(s=d.accessories)||void 0===s?void 0:s.UnitOfMeasure)||""),[C,D]=l.useState((null==T||null===(c=T.TadeDetails)||void 0===c||null===(v=c.accessories)||void 0===v?void 0:v.UomValue)||""),[I,O]=l.useState(null!=T&&T.TradeDetails&&null!=T&&null!==(p=T.TradeDetails)&&void 0!==p&&p.accessories&&(null==T||null===(m=T.TradeDetails)||void 0===m?void 0:m.accessories.length)>0?null==T||null===(E=T.TradeDetails)||void 0===E?void 0:E.accessories:[{accessory:"",accessorycount:"",unit:null,uom:null}]),[w,R]=l.useState(null),[P,x]=l.useState(null),[M,k]=l.useState(!1),U=Digit.ULBService.getCitizenCurrentTenant();let B=window.location.href.includes("edit-application"),F=window.location.href.includes("renew-trade");const{pathname:H}=o.useLocation(),W=(H.includes("/modify-application/"),Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{isLoading:V,data:j={}}=Digit.Hooks.tl.useTradeLicenseMDMS(W,"TradeLicense","AccessoryCategory"),[Y,K]=l.useState([]),{data:z}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:U,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.accessoryCategory&&(window.location.href.includes("renew-trade")?"RENEWAL":"NEW")&&e.uom)});return l.useEffect(()=>{if(z&&(null==z?void 0:z.length)>0){const e=z&&z.reduce((e,t)=>{let l={active:!0},n={active:!0};return t.accessoryCategory&&null===t.tradeType?(l.code=t.accessoryCategory,l.uom=t.uom,l.rate=t.rate,t.rate&&t.rate>0&&e.accessories.push(l),l.fromUom=t.fromUom,l.toUom=t.toUom):null===t.accessoryCategory&&t.tradeType&&(n.code=t.tradeType,n.uom=t.uom,n.structureType=t.structureType,n.licenseType=t.licenseType,n.rate=t.rate,n.fromUom=t.fromUom,n.toUom=t.toUom,!ze(t.rate)&&null!==t.rate&&e.tradeTypeData.push(n)),e},{accessories:[],tradeTypeData:[]}),t=Me(e.accessories,"code");let l=Me(e.tradeTypeData,"structureType");l=ke({StructureType:l.map(e=>({code:e.structureType,active:!0}))},"StructureType");let n=Me(e.tradeTypeData,"licenseType");n=n.map(e=>({code:e.licenseType,active:!0})),null==t||t(e=>{var t;e.i18nKey=f("TRADELICENSE_ACCESSORIESCATEGORY_"+xe(null==e||null===(t=e.code)||void 0===t?void 0:t.toUpperCase(),"-","_"))}),K(t)}},[z]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,V?n.createElement(t.Loader,null):n.createElement(t.FormStep,{config:_,onSelect:()=>{let e,t=T.TradeDetails;sessionStorage.setItem("VisitedAccessoriesDetails",!0),e={...t,accessories:I},y(_.key,e)},onSkip:()=>y(),t:f,forcedError:f(w)||f(P),isDisabled:!(null!=I&&null!==(G=I[0])&&void 0!==G&&G.accessory&&null!=I&&null!==(q=I[0])&&void 0!==q&&q.accessorycount&&(null==I||null===($=I[0])||void 0===$||!$.unit||null!=I&&null!==(X=I[0])&&void 0!==X&&X.uom)&&!w&&!P)},I.map((e,l)=>n.createElement("div",{key:e+"-"+l},n.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},n.createElement(t.CardLabel,null,f("TL_ACCESSORY_LABEL")+"*"),n.createElement(t.LinkButton,{label:n.createElement("div",null,n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"32px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:1!=I.length?"#494848":"#FAFAFA"})))),style:{width:"100px",display:"inline"},onClick:e=>function(e){const t=[...I];1!=t.length&&(t.splice(e,1),O(t))}(l)}),V?n.createElement(t.Loader,null):n.createElement(t.RadioOrSelect,{t:f,optionKey:"i18nKey",isMandatory:_.isMandatory,options:ye(Y,"i18nKey",f)||[],selectedOption:e.accessory,onSelect:e=>function(e,t){var l;let n=[...I];n[e].accessory=t,h(t),O(n),n[e].accessorycount="",n[e].uom="",k(!0),n[e].unit=null!=(null==t?void 0:t.uom)?t.uom:"",null===(l=Array.from(document.querySelectorAll("input")))||void 0===l||l.forEach(e=>e.value=""),N(null!=(null==t?void 0:t.uom)?t.uom:null)}(l,e),isPTFlow:!0}),n.createElement(t.CardLabel,null,f("TL_ACCESSORY_COUNT_LABEL")+"*"),n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:f,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"AccessoryCount",value:e.accessorycount,onChange:e=>function(e,t){R(null),isNaN(t.target.value)&&R("TL_ONLY_NUM_ALLOWED");let l=[...I];l[e].accessorycount=t.target.value,A(t.target.value),O(l)}(l,e),disable:!(!F&&!B||M)},g={isRequired:!0,pattern:"[0-9]+",type:"text",title:f("TL_WRONG_UOM_COUNT_ERROR")})),n.createElement(t.CardLabel,null,""+f("TL_UNIT_OF_MEASURE_LABEL")),n.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:f,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UnitOfMeasure",value:e.unit,onChange:e=>function(e,t){let l=[...I];l[e].unit=t.target.value,N(t.target.value),O(l)}(l,e),disable:!0}),n.createElement(t.CardLabel,null,f("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+"*"),n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:f,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UomValue",value:e.uom,onChange:e=>function(e,t){var l,n,i,o,r,a,u,d,s,c,v,p,m,E,_,y,T,g;x(null),isNaN(t.target.value)&&x("TL_ONLY_NUM_ALLOWED"),t.target.value&&parseFloat(t.target.value)>0?(null!=I&&null!==(l=I[e])&&void 0!==l&&l.accessory&&Number.isInteger(null==I||null===(n=I[e])||void 0===n||null===(i=n.accessory)||void 0===i?void 0:i.fromUom)&&(t.target.value&&parseInt(t.target.value)>=(null==I||null===(u=I[e])||void 0===u||null===(d=u.accessory)||void 0===d?void 0:d.fromUom)||(x(f("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==I||null===(s=I[e])||void 0===s||null===(c=s.accessory)||void 0===c?void 0:c.fromUom)+" - "+(null==I||null===(v=I[e])||void 0===v||null===(p=v.accessory)||void 0===p?void 0:p.toUom)),window.setTimeout(function(){window.scrollTo(0,0)},0))),null!=I&&null!==(o=I[e])&&void 0!==o&&o.accessory&&Number.isInteger(null==I||null===(r=I[e])||void 0===r||null===(a=r.accessory)||void 0===a?void 0:a.toUom)&&(t.target.value&&parseInt(t.target.value)<=(null==I||null===(m=I[e])||void 0===m||null===(E=m.accessory)||void 0===E?void 0:E.toUom)||(x(f("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==I||null===(_=I[e])||void 0===_||null===(y=_.accessory)||void 0===y?void 0:y.fromUom)+" - "+(null==I||null===(T=I[e])||void 0===T||null===(g=T.accessory)||void 0===g?void 0:g.toUom)),window.setTimeout(function(){window.scrollTo(0,0)},0)))):(x(f("TL_UOM_VALUE_GREATER_O")),window.setTimeout(function(){window.scrollTo(0,0)},0));let S=[...I];S[e].uom=t.target.value,D(t.target.value),O(S)}(l,e),disable:!(!F&&!B||M)},g={isRequired:!0,pattern:"[0-9]+",type:"text",title:f("TL_WRONG_UOM_VALUE_ERROR")}))))),n.createElement("div",{style:{justifyContent:"center",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},n.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>function(){const e=[...I];e.push({accessory:"",accessorycount:"",unit:null,uom:null}),O(e)}()},""+f("TL_ADD_MORE_TRADE_ACC")))));var G,q,$,X},TLSelectGeolocation:e=>{var i,o,r;let{t:a,config:u,onSelect:d,formData:s={}}=e;const[c,v]=l.useState((null==s||null===(i=s.address)||void 0===i?void 0:i.pincode)||""),[p,m]=l.useState((null==s||null===(o=s.address)||void 0===o?void 0:o.geoLocation)||{}),E=Digit.Hooks.tl.useTenants(),[f,_]=l.useState(null);let y=window.location.href.includes("edit-application")||window.location.href.includes("renew-trade");Digit.ULBService.getCurrentTenantId();const T=Digit.ULBService.getStateId(),{data:g={}}=Digit.Hooks.pt.usePropertyMDMS(T,"PropertyTax","MapConfig"),S=null==g||null===(r=g.PropertyTax)||void 0===r?void 0:r.MapConfig;let h=S?S[0]:{};return n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,n.createElement(t.LocationSearchCard,{header:a("TL_GEOLOCATION_HEADER"),cardText:a("TL_GEOLOCATION_TEXT"),nextText:a("CS_COMMON_NEXT"),skipAndContinueText:a("CORE_COMMON_SKIP_CONTINUE"),skip:()=>d(),t:a,position:p,onSave:()=>d(u.key,{geoLocation:p,pincode:c}),onChange:(e,t)=>((e,t)=>{_(null),(null==E?void 0:E.find(t=>{var l;return null===(l=t.pincode)||void 0===l?void 0:l.find(t=>t==e)}))?(v(e),m(t)):(_("TL_COMMON_PINCODE_NOT_SERVICABLE"),v(""),m({}))})(e,t),disabled:""===c||y,forcedError:a(f),isPTDefault:!0,PTdefaultcoord:h}))},TLSelectAddress:e=>{var i,o,a,u;let{t:d,config:s,onSelect:c,userType:v,formData:p,setError:m,formState:E,clearErrors:f}=e;const _=Digit.Hooks.tl.useTenants();let y=Digit.ULBService.getCurrentTenantId();const T=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade"),{pincode:g}=(null==p?void 0:p.address)||"",S="employee"===v?_.filter(e=>e.code===y):g?_.filter(e=>{var t;return null==e||null===(t=e.pincode)||void 0===t?void 0:t.some(e=>e==g)}):_,[h,L]=l.useState(()=>{var e;return(null==p||null===(e=p.address)||void 0===e?void 0:e.city)||null}),{data:A}=Digit.Hooks.useBoundaryLocalities(null==h?void 0:h.code,"revenue",{enabled:!!h},d),[b,N]=l.useState(),[C,D]=l.useState(),[I,O]=l.useState(!1);l.useEffect(()=>{S&&1===S.length&&L(S[0])},[S]),l.useEffect(()=>{if(null!=p&&p.address){var e;let t=!0;null===(e=Object.keys(null==p?void 0:p.address))||void 0===e||e.map(e=>{"key"!=e||null!=(null==p?void 0:p.address[e])||""!=(null==p?void 0:p.address[e])||null!=(null==p?void 0:p.address[e])||(t&&L(S[0]),t=!1)})}},[null==p||null===(i=p.tradeUnits)||void 0===i||null===(o=i[0])||void 0===o||null===(a=o.tradeCategory)||void 0===a?void 0:a.code]),l.useEffect(()=>{if(h&&A){var e,t;let n=A,i=[];var l;null!=p&&null!==(e=p.address)&&void 0!==e&&e.locality&&D(p.address.locality),null!=p&&null!==(t=p.address)&&void 0!==t&&t.pincode&&(i=n.filter(e=>{var t;return null===(t=e.pincode)||void 0===t?void 0:t.find(e=>e==p.address.pincode)}),null!=p&&null!==(l=p.address)&&void 0!==l&&l.locality||D()),N(()=>i.length>0?i:n),1===i.length&&(D(i[0]),"employee"===v&&c(s.key,{...p[s.key],locality:i[0]}))}},[h,null==p||null===(u=p.address)||void 0===u?void 0:u.pincode,A]);const{control:w,formState:R,watch:P,setError:x,clearErrors:M,trigger:k}=r.useForm(),U=P(),{errors:B}=R,F={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};l.useEffect(()=>{k()},[]),l.useEffect(()=>{let e=Object.keys(U);const t={};var l;null==e||e.forEach(e=>{var l;return t[e]=null===(l=p[s.key])||void 0===l?void 0:l[e]}),"employee"===v?je.isEqual(U,t)||(null===(l=Object.keys(U))||void 0===l||l.map(e=>{"key"==e||null==U[e]||""==U[e]||null==U[e]||I||O(!0)}),c(s.key,{...p[s.key],...U}),k()):je.isEqual(U,t)||c(s.key,{...p[s.key],...U});for(let e in U)U[e]||R.errors[e]?U[e]&&R.errors[e]&&M([e]):x(e,{type:e.toUpperCase()+"_REQUIRED",message:e.toUpperCase()+"_REQUIRED"})},[U]),l.useEffect(()=>{var e;"employee"===v&&(Object.keys(B).length&&!je.isEqual((null===(e=E.errors[s.key])||void 0===e?void 0:e.type)||{},B)?m(s.key,{type:B}):!Object.keys(B).length&&E.errors[s.key]&&I&&f(s.key))},[B]);let H=window.location.href.includes("renew-application-details");var W,V,j;return window.location.href.includes("edit-application-details")&&(H=!0),"employee"===v?n.createElement("div",null,n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},d("MYCITY_CODE_LABEL")+" * "),n.createElement(r.Controller,{name:"city",defaultValue:1===(null==S?void 0:S.length)?S[0]:h,control:w,rules:{required:d("REQUIRED_FIELD")},render:e=>n.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!0,option:S,select:e.onChange,optionKey:"code",onBlur:e.onBlur,t:d})})),n.createElement(t.CardLabelError,{style:F},R.touched.city?null==B||null===(W=B.city)||void 0===W?void 0:W.message:""),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller"},d("TL_LOCALIZATION_LOCALITY")+" * "),n.createElement(r.Controller,{name:"locality",defaultValue:H?null==p||null===(V=p.address)||void 0===V?void 0:V.locality:null,control:w,rules:{required:d("REQUIRED_FIELD")},render:e=>{var l,i,o,r,a,u,s,c,v,m,E,f,_,y,T,g,S;return n.createElement(t.Dropdown,{className:"form-field",selected:H||null!=p&&null!==(l=p.cpt)&&void 0!==l&&l.details?{...null==p||null===(i=p.cpt)||void 0===i||null===(o=i.details)||void 0===o||null===(r=o.address)||void 0===r?void 0:r.locality,i18nkey:null==p||null===(a=p.cpt)||void 0===a||null===(u=a.details)||void 0===u||null===(s=u.address)||void 0===s||null===(c=s.locality)||void 0===c?void 0:c.name}:e.value||{...null==p||null===(v=p.cpt)||void 0===v||null===(m=v.details)||void 0===m||null===(E=m.address)||void 0===E?void 0:E.locality,i18nkey:null==p||null===(f=p.cpt)||void 0===f||null===(_=f.details)||void 0===_||null===(y=_.address)||void 0===y||null===(T=y.locality)||void 0===T?void 0:T.name},option:b,select:e.onChange,onBlur:e.onBlur,optionKey:"i18nkey",t:d,disable:!!(H||null!=p&&null!==(g=p.cpt)&&void 0!==g&&g.details),errorStyle:!(!R.touched.locality||null==B||null===(S=B.locality)||void 0===S||!S.message)})}})),n.createElement(t.CardLabelError,{style:F},R.touched.locality?null==B||null===(j=B.locality)||void 0===j?void 0:j.message:"")):n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,n.createElement(t.FormStep,{config:s,onSelect:function(){c(s.key,{city:h,locality:C})},t:d,isDisabled:!C},n.createElement(t.CardLabel,null,d("MYCITY_CODE_LABEL")+"*"),n.createElement("span",{className:"form-pt-dropdown-only"},n.createElement(t.RadioOrSelect,{options:S.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:h,optionKey:"i18nKey",onSelect:function(e){D(null),N(null),L(e)},t:d,isDependent:!0,labelKey:"",disabled:T})),h&&b&&n.createElement(t.CardLabel,null,d("TL_LOCALIZATION_LOCALITY")+" "),h&&b&&n.createElement("span",{className:"form-pt-dropdown-only"},n.createElement(t.RadioOrSelect,{dropdownStyle:{paddingBottom:"20px"},isMandatory:s.isMandatory,options:b.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:C,optionKey:"i18nkey",onSelect:function(e){var t;null!=p&&null!==(t=p.address)&&void 0!==t&&t.locality&&(p.address.locality=e),D(e),"employee"===v&&c(s.key,{...p[s.key],locality:e})},t:d,optionCardStyles:{maxHeight:"210px",overflow:"scroll"},labelKey:"",disabled:T}))))},TLSelectPincode:e=>{var i;let{t:r,config:a,onSelect:u,formData:d={},userType:s}=e;const c=Digit.Hooks.tl.useTenants(),[v,p]=l.useState(()=>{var e;return(null==d||null===(e=d.address)||void 0===e?void 0:e.pincode)||""}),{pathname:m}=o.useLocation(),E=m.includes("modify");let f=window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade");const _=window.location.href.includes("edit-application")||window.location.href.includes("tl/renew-application-details"),y=[{label:"CORE_COMMON_PINCODE",type:"text",name:"pincode",disable:f,validation:{minlength:6,maxlength:7,pattern:"^[1-9]{1}[0-9]{2}\\s{0,1}[0-9]{3}$",max:"9999999",title:r("CORE_COMMON_PINCODE_INVALID")}}],[T,g]=l.useState(null);function S(e){if(p(e.target.value),g(null),"employee"===s)if(null==c?void 0:c.find(t=>{var l;return null===(l=t.pincode)||void 0===l?void 0:l.find(t=>t.toString()===e.target.value)})){const t=c.filter(t=>{var l;return null===(l=t.pincode)||void 0===l?void 0:l.find(t=>t==e.target.value)})[0];u(a.key,{...d.address,city:t,pincode:e.target.value,slum:null})}else u(a.key,{...d.address,pincode:e.target.value}),g("TL_COMMON_PINCODE_NOT_SERVICABLE")}return l.useEffect(()=>{var e;null!=d&&null!==(e=d.address)&&void 0!==e&&e.pincode&&p(d.address.pincode)},[null==d||null===(i=d.address)||void 0===i?void 0:i.pincode]),"employee"===s?null==y?void 0:y.map((e,l)=>{var i,o,a,u;return n.createElement(t.LabelFieldPair,{key:l},n.createElement(t.CardLabel,{className:"card-label-smaller"},""+r(e.label)),n.createElement("div",{className:"field"},n.createElement(t.TextInput,Ye({key:e.name,value:(null==d||null===(i=d.cpt)||void 0===i||null===(o=i.details)||void 0===o||null===(a=o.address)||void 0===a?void 0:a.pincode)||v,onChange:S,disable:(null==d||null===(u=d.cpt)||void 0===u?void 0:u.details)||_},e.validation,{autoFocus:E}))))}):n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,n.createElement(t.FormStep,{t:r,config:{...a,inputs:y},onSelect:function(e){try{return(null==c?void 0:c.find(t=>{var l;return null===(l=t.pincode)||void 0===l?void 0:l.find(t=>t==(null==e?void 0:e.pincode))}))?u(a.key,{pincode:v}):g("TL_COMMON_PINCODE_NOT_SERVICABLE"),Promise.resolve()}catch(e){return Promise.reject(e)}},_defaultValues:{pincode:v},onChange:S,onSkip:()=>u(),forcedError:r(T),isDisabled:!v||f}))},TLProof:e=>{var i,o,r,a,u,d,s,c,v;let{t:p,config:m,onSelect:E,formData:f}=e;const[_,y]=l.useState((null==f||null===(i=f.owners)||void 0===i||null===(o=i.documents)||void 0===o||null===(r=o.OwnerPhotoProof)||void 0===r?void 0:r.fileStoreId)||null),[T,g]=l.useState(null==f||null===(a=f.owners)||void 0===a||null===(u=a.documents)||void 0===u?void 0:u.OwnerPhotoProof),[S,h]=l.useState(null);Digit.ULBService.getCurrentUlb();const[L,A]=l.useState((null==f||null===(d=f.owners)||void 0===d||null===(s=d.documents)||void 0===s||null===(c=s.OwnerPhotoProof)||void 0===c?void 0:c.documentType)||null),b=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:N={}}=Digit.Hooks.pt.usePropertyMDMS(b,"PropertyTax","Documents"),C=null==N||null===(v=N.PropertyTax)||void 0===v?void 0:v.Documents;return Array.isArray(C)&&C.filter(e=>e.code.includes("ADDRESSPROOF")),l.useEffect(()=>{localStorage.setItem("TLAppSubmitEnabled","true")},[]),l.useEffect(()=>{!function(){try{h(null);const e=function(){if(T&&null!=T&&T.type){const e=function(e,t,l){if(null!==(e=".jpg,.png,.pdf,.jpeg".split(","))&&void 0!==e&&e.includes("."+(null==T||null===(t=T.type)||void 0===t||null===(l=t.split("/"))||void 0===l?void 0:l.pop()))){const e=function(){if(T.size>=2e6)h(p("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",T,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?y(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):h(p("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}else h(p("PT_UPLOAD_FORMAT_NOT_SUPPORTED"))}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:3}):null,n.createElement(t.FormStep,{config:m,onSelect:()=>{let e=_,t=T;t&&(t.documentType="OWNERPHOTO"),t&&(t.fileStoreId=e||null);let l=null==f?void 0:f.owners;l&&l.documents||(l.documents=[]),l.documents.OwnerPhotoProof=t,E(m.key,l)},onSkip:()=>E(),t:p,isDisabled:!_||S},n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}},p("TL_UPLOAD_PHOTO_RESTRICTIONS_TYPES")),n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}},p("TL_UPLOAD_RESTRICTIONS_SIZE")),n.createElement(t.CardLabel,null,""+p("TL_CATEGORY_DOCUMENT_TYPE")),n.createElement(t.UploadFile,{id:"tl-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf,.jpeg",onUpload:function(e){y(null),g(e.target.files[0])},onDelete:()=>{y(null)},message:_?"1 "+p("TL_ACTION_FILEUPLOADED"):p("TL_ACTION_NO_FILEUPLOADED"),error:S}),S?n.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},S):"",n.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},TLSelectOwnerShipDetails:e=>{var i,r,a,u,d,s,c,v,p;let{t:m,config:E,onSelect:f,userType:_,formData:y,onBlur:T,formState:g,setError:S,clearErrors:h}=e;Digit.ULBService.getCurrentTenantId();const L=Digit.ULBService.getStateId();let A=window.location.href.includes("edit-application")||window.location.href.includes("renew-trade");const[b,N]=l.useState(null==y?void 0:y.ownershipCategory),[C,D]=l.useState("false"!==(null==y||null===(i=y.ownershipCategory)||void 0===i?void 0:i.isSameAsPropertyOwner)&&(null==y||null===(r=y.ownershipCategory)||void 0===r?void 0:r.isSameAsPropertyOwner)||null),{data:I}=Digit.Hooks.tl.useTradeLicenseMDMS(L,"common-masters","TLOwnerTypeWithSubtypes",{userType:_}),O=window.location.href.includes("/employee/tl/new-application"),w=window.location.href.includes("/employee/tl/renew-application-details"),R=window.location.href.includes("/employee/tl/edit-application-details"),{pathname:P}=o.useLocation(),x=P.includes("/modify-application/");function M(e){N(e)}function k(e){var t,l,n,i,o,r,a,u,d,s,c,v,p,m,E,_,T,g,S,h,L,A,b,C,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q;D(e.target.checked),1==e.target.checked?window.location.href.includes("/citizen/tl")&&null!=y&&null!==(t=y.cpt)&&void 0!==t&&null!==(l=t.details)&&void 0!==l&&null!==(n=l.ownershipCategory)&&void 0!==n&&n.includes("INSTITUTIONAL")?N({code:""+(null==y||null===(P=y.cpt)||void 0===P||null===(x=P.details)||void 0===x?void 0:x.ownershipCategory),i18nKey:"PT_OWNERSHIP_"+(null!=y&&null!==(M=y.cpt)&&void 0!==M&&null!==(k=M.details)&&void 0!==k&&null!==(U=k.ownershipCategory)&&void 0!==U&&U.includes("INSTITUTIONAL")?null!=y&&null!==(B=y.cpt)&&void 0!==B&&null!==(F=B.details)&&void 0!==F&&null!==(H=F.ownershipCategory)&&void 0!==H&&H.includes("GOVERNMENT")?"OTHERGOVERNMENTINSTITUITION":"OTHERSPRIVATEINSTITUITION":null==y||null===(W=y.cpt)||void 0===W||null===(V=W.details)||void 0===V||null===(j=V.ownershipCategory)||void 0===j?void 0:j.split(".")[1]),label:void 0,value:(null==y||null===(Y=y.cpt)||void 0===Y||null===(K=Y.details)||void 0===K?void 0:K.ownershipCategory)+(null!=y&&null!==(z=y.cpt)&&void 0!==z&&null!==(G=z.details)&&void 0!==G&&null!==(q=G.ownershipCategory)&&void 0!==q&&q.includes("INSTITUTIONAL")?null!=y&&null!==($=y.cpt)&&void 0!==$&&null!==(X=$.details)&&void 0!==X&&null!==(Z=X.ownershipCategory)&&void 0!==Z&&Z.includes("GOVERNMENT")?".OTHERGOVERNMENTINSTITUITION":".OTHERSPRIVATEINSTITUITION":"")}):N({code:(null==y||null===(i=y.cpt)||void 0===i||null===(o=i.details)||void 0===o?void 0:o.ownershipCategory)+(null!=y&&null!==(r=y.cpt)&&void 0!==r&&null!==(a=r.details)&&void 0!==a&&null!==(u=a.ownershipCategory)&&void 0!==u&&u.includes("INSTITUTIONAL")?null!=y&&null!==(d=y.cpt)&&void 0!==d&&null!==(s=d.details)&&void 0!==s&&null!==(c=s.ownershipCategory)&&void 0!==c&&c.includes("GOVERNMENT")?".OTHERGOVERNMENTINSTITUITION":".OTHERSPRIVATEINSTITUITION":""),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_INDIVIDUAL_"+(null!=y&&null!==(v=y.cpt)&&void 0!==v&&null!==(p=v.details)&&void 0!==p&&null!==(m=p.ownershipCategory)&&void 0!==m&&m.includes("INSTITUTIONAL")?null!=y&&null!==(E=y.cpt)&&void 0!==E&&null!==(_=E.details)&&void 0!==_&&null!==(T=_.ownershipCategory)&&void 0!==T&&T.includes("GOVERNMENT")?"OTHERGOVERNMENTINSTITUITION":"OTHERSPRIVATEINSTITUITION":null==y||null===(g=y.cpt)||void 0===g||null===(S=g.details)||void 0===S||null===(h=S.ownershipCategory)||void 0===h?void 0:h.split(".")[1]),label:void 0,value:(null==y||null===(L=y.cpt)||void 0===L||null===(A=L.details)||void 0===A?void 0:A.ownershipCategory)+(null!=y&&null!==(b=y.cpt)&&void 0!==b&&null!==(C=b.details)&&void 0!==C&&null!==(I=C.ownershipCategory)&&void 0!==I&&I.includes("INSTITUTIONAL")?null!=y&&null!==(O=y.cpt)&&void 0!==O&&null!==(w=O.details)&&void 0!==w&&null!==(R=w.ownershipCategory)&&void 0!==R&&R.includes("GOVERNMENT")?".OTHERGOVERNMENTINSTITUITION":".OTHERSPRIVATEINSTITUITION":"")}):(N({code:"",i18nKey:"",label:void 0,value:""}),null!=y&&null!==(Q=y.owners)&&void 0!==Q&&Q.owners&&(null==y||delete y.owners,f("formData",y)))}function U(){sessionStorage.setItem("ownershipCategory",null==b?void 0:b.value),sessionStorage.setItem("isSameAsPropertyOwner",C),f(E.key,{...b,isSameAsPropertyOwner:C})}if(l.useEffect(()=>{var e,t,l,n,i;1==(null==y||null===(e=y.ownershipCategory)||void 0===e?void 0:e.isSameAsPropertyOwner)||"true"==(null==y||null===(t=y.ownershipCategory)||void 0===t?void 0:t.isSameAsPropertyOwner)&&null!=y&&null!==(l=y.cpt)&&void 0!==l&&l.details?sessionStorage.setItem("ownersFromProperty",JSON.stringify(((e,t)=>{var l,n,i,o,r,a,u,d,s,c,v,p,m;const E=null!==(null==e||null===(l=e.cpt)||void 0===l||null===(n=l.details)||void 0===n||null===(i=n.owners)||void 0===i?void 0:i.additionalDetails)?null==e||null===(o=e.cpt)||void 0===o||null===(r=o.details)||void 0===r?void 0:r.owners.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}):(null==e||null===(a=e.cpt)||void 0===a||null===(u=a.details)||void 0===u?void 0:u.owners)||[];let f=[];if(null!=e&&null!==(d=e.ownershipCategory)&&void 0!==d&&null!==(s=d.code)&&void 0!==s&&s.includes("SINGLEOWNER")||null!=e&&null!==(c=e.ownershipCategory)&&void 0!==c&&null!==(v=c.code)&&void 0!==v&&v.includes("MULTIPLEOWNER"))null==E||E.map((e,l)=>{f.push({additionalDetails:{ownerSequence:l,name:null==e?void 0:e.name},name:null==e?void 0:e.name,designation:"",mobileNumber:null==e?void 0:e.mobileNumber,altContactNumber:"",instituionName:"",fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,relationship:{code:null==e?void 0:e.relationship,i18nKey:"COMMON_RELATION_"+(null==e?void 0:e.relationship)},emailId:null==e?void 0:e.emailId,permanentAddress:null==e?void 0:e.permanentAddress,ownerType:{code:null==e?void 0:e.ownerType,i18nKey:null==e?void 0:e.ownerType,name:t("PROPERTYTAX_OWNERTYPE_"+(null==e?void 0:e.ownerType))},gender:{code:null==e?void 0:e.gender,i18nKey:"TL_GENDER_"+(null==e?void 0:e.gender)},subOwnerShipCategory:"",correspondenceAddress:null==e?void 0:e.correspondenceAddress})});else if(null!=e&&null!==(p=e.ownershipCategory)&&void 0!==p&&null!==(m=p.code)&&void 0!==m&&m.includes("INSTITUTIONAL")){var _,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te;f.push({name:null==e||null===(_=e.cpt)||void 0===_||null===(y=_.details)||void 0===y||null===(T=y.institution)||void 0===T?void 0:T.nameOfAuthorizedPerson,designation:null==e||null===(g=e.cpt)||void 0===g||null===(S=g.details)||void 0===S||null===(h=S.institution)||void 0===h?void 0:h.designation,mobileNumber:null==e||null===(L=e.cpt)||void 0===L||null===(A=L.details)||void 0===A||null===(b=A.owners)||void 0===b||null===(N=b[0])||void 0===N?void 0:N.mobileNumber,altContactNumber:null==e||null===(C=e.cpt)||void 0===C||null===(D=C.details)||void 0===D||null===(I=D.owners)||void 0===I||null===(O=I[0])||void 0===O?void 0:O.altContactNumber,instituionName:null==e||null===(w=e.cpt)||void 0===w||null===(R=w.details)||void 0===R||null===(P=R.institution)||void 0===P?void 0:P.name,fatherOrHusbandName:"",relationship:"",emailId:null==e||null===(x=e.cpt)||void 0===x||null===(M=x.details)||void 0===M||null===(k=M.owners)||void 0===k||null===(U=k[0])||void 0===U?void 0:U.emailId,permanentAddress:null==e||null===(B=e.cpt)||void 0===B||null===(F=B.details)||void 0===F||null===(H=F.owners)||void 0===H||null===(W=H[0])||void 0===W?void 0:W.permanentAddress,ownerType:"",gender:"",subOwnerShipCategory:{active:!0,code:(null==e||null===(V=e.cpt)||void 0===V||null===(j=V.details)||void 0===j?void 0:j.ownershipCategory)+"."+(null==e||null===(Y=e.cpt)||void 0===Y||null===(K=Y.details)||void 0===K||null===(z=K.institution)||void 0===z?void 0:z.type),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==e||null===(G=e.cpt)||void 0===G||null===(q=G.details)||void 0===q?void 0:q.ownershipCategory)+"_"+(null==e||null===($=e.cpt)||void 0===$||null===(X=$.details)||void 0===X||null===(Z=X.institution)||void 0===Z?void 0:Z.type)},correspondenceAddress:null==e||null===(Q=e.cpt)||void 0===Q||null===(J=Q.details)||void 0===J||null===(ee=J.owners)||void 0===ee||null===(te=ee[0])||void 0===te?void 0:te.correspondenceAddress})}return f})(y,m))):0!=(null==y||null===(n=y.ownershipCategory)||void 0===n?void 0:n.isSameAsPropertyOwner)&&"false"!==(null==y||null===(i=y.ownershipCategory)||void 0===i?void 0:i.isSameAsPropertyOwner)||sessionStorage.getItem("ownersFromProperty")&&sessionStorage.removeItem("ownersFromProperty")},[null==y||null===(a=y.ownershipCategory)||void 0===a?void 0:a.isSameAsPropertyOwner,C,null==y||null===(u=y.cpt)||void 0===u||null===(d=u.details)||void 0===d?void 0:d.propertyId,null==y||null===(s=y.cptId)||void 0===s?void 0:s.id]),l.useEffect(()=>{"employee"===_&&(null!=b&&b.code?h(E.key):S(E.key,{type:"required",message:m("REQUIRED_FIELD")}),U())},[b]),"employee"===_){var B,F,H,W,V,j,Y,K;let e=window.location.href.includes("tl/renew-application-details");return window.location.href.includes("tl/edit-application-details")&&(e=!0),n.createElement(n.Fragment,null,!("MOVABLE"===(null==y||null===(B=y.tradedetils)||void 0===B||null===(F=B[0])||void 0===F||null===(H=F.structureType)||void 0===H?void 0:H.code))&&(null==y||null===(W=y.cpt)||void 0===W?void 0:W.details)&&(O||w||R)&&n.createElement(t.LabelFieldPair,null,n.createElement("div",{className:"field"},n.createElement(t.CheckBox,{label:m("TL_COMMON_SAME_AS_PROPERTY_OWNERS"),onChange:k,value:C,checked:C||!1,style:{marginBottom:"20px"},disable:e}))),n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller",style:x?{color:"#B1B4B6"}:{}},m("TL_NEW_OWNER_DETAILS_OWNERSHIP_TYPE_LABEL")+" * "),n.createElement(t.Dropdown,{className:"form-field",selected:null!=b&&b.code?b:{},errorStyle:!(null===(V=g.touched)||void 0===V||!V[E.key]||null===(j=g.errors[E.key])||void 0===j||!j.message),disable:e&&(null==b?void 0:b.code)||C,option:I,select:M,optionKey:"i18nKey",onBlur:T,t:m})),null!==(Y=g.touched)&&void 0!==Y&&Y[E.key]?n.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(K=g.errors[E.key])||void 0===K?void 0:K.message):null)}return n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,n.createElement(t.FormStep,{t:m,config:E,onSelect:U,onSkip:()=>f(),isDisabled:!(null!=b&&b.code)},!("MOVABLE"===(null==y||null===(c=y.TradeDetails)||void 0===c||null===(v=c.StructureType)||void 0===v?void 0:v.code))&&(null==y||null===(p=y.cpt)||void 0===p?void 0:p.details)&&n.createElement(t.CheckBox,{label:m("TL_COMMON_SAME_AS_PROPERTY_OWNERS"),onChange:k,value:C,checked:C||!1,style:{marginBottom:"20px"},disable:A}),n.createElement(t.RadioButtons,{isMandatory:E.isMandatory,options:I||[],selectedOption:b,optionsKey:"i18nKey",onSelect:M,value:b,labelKey:"PT_OWNERSHIP",isDependent:!0,disabled:A,isTLFlow:!0})))},TLSelectOwnerDetails:e=>{var i;let{t:o,config:r,onSelect:a,formData:u}=e,{ownershipCategory:{code:d}={}}=u;const s=l.useMemo(()=>{var e,t;return null!=u&&null!==(e=u.ownershipCategory)&&void 0!==e&&e.code.includes("SINGLEOWNER")?"SINGLEOWNER":null!=u&&null!==(t=u.ownershipCategory)&&void 0!==t&&t.code.includes("INSTITUTIONAL")?"INSTITUTIONAL":"MULTIOWNER"},[null==u?void 0:u.ownershipCategory]),c=null==u||null===(i=u.owners)||void 0===i?void 0:i.owners,[v,p]=l.useReducer((e,t)=>{var l;switch(t.type){case"ADD_NEW_OWNER":return[...e,{name:"",gender:null,mobilenumber:null,relationship:"",fatherOrHusbandName:"",emailId:"",isprimaryowner:!1}];case"REMOVE_THIS_OWNER":return e.filter((e,l)=>{var n;return l!==(null==t||null===(n=t.payload)||void 0===n?void 0:n.index)});case"SET_PRIMARY_OWNER":return(null==t||null===(l=t.payload)||void 0===l?void 0:l.index)>=0?null==e?void 0:e.map((e,l)=>{var n;return l===(null==t||null===(n=t.payload)||void 0===n?void 0:n.index)?{...e,isprimaryowner:!0}:{...e,isprimaryowner:!1}}):e;case"EDIT_CURRENT_OWNER_PROPERTY":return null==e?void 0:e.map((e,l)=>l===t.payload.index?{...e,[t.payload.key]:t.payload.value}:e)}},c,e=>{var t,l,n,i,o,r,a,u,d,c,v,p,m,E,f,_,y;switch(s){case"SINGLEOWNER":return[{name:(null==e||null===(t=e[0])||void 0===t?void 0:t.name)||"",gender:null==e||null===(l=e[0])||void 0===l?void 0:l.gender,mobilenumber:null==e||null===(n=e[0])||void 0===n?void 0:n.mobilenumber,isprimaryowner:!0,fatherOrHusbandName:(null==e||null===(i=e[0])||void 0===i?void 0:i.fatherOrHusbandName)||"",emailId:(null==e||null===(o=e[0])||void 0===o?void 0:o.emailId)||"",relationship:(null==e||null===(r=e[0])||void 0===r?void 0:r.relationship)||"",id:(null==e||null===(a=e[0])||void 0===a?void 0:a.id)||"",uuid:(null==e||null===(u=e[0])||void 0===u?void 0:u.uuid)||""}];case"MULTIOWNER":return(null==e?void 0:e.length)>1?null==e?void 0:e.map(t=>({name:(null==t?void 0:t.name)||"",gender:null==t?void 0:t.gender,mobilenumber:null==t?void 0:t.mobilenumber,isprimaryowner:null==t?void 0:t.isprimaryowner,fatherOrHusbandName:(null==t?void 0:t.fatherOrHusbandName)||"",emailId:(null==e?void 0:e.emailId)||"",relationship:(null==t?void 0:t.relationship)||"",id:t.id||"",uuid:t.uuid||""})):[{name:null,gender:null,mobilenumber:null,isprimaryowner:!0,fatherOrHusbandName:null,emailId:null,relationship:null}];case"INSTITUTIONAL":return[{name:(null==e||null===(d=e[0])||void 0===d?void 0:d.name)||"",mobilenumber:null==e||null===(c=e[0])||void 0===c?void 0:c.mobilenumber,institutionName:(null==e||null===(v=e[0])||void 0===v?void 0:v.institutionName)||"",subOwnerShipCategory:(null==e||null===(p=e[0])||void 0===p?void 0:p.subOwnerShipCategory)||"",designation:(null==e||null===(m=e[0])||void 0===m?void 0:m.designation)||"",altContactNumber:(null==e||null===(E=e[0])||void 0===E?void 0:E.altContactNumber)||"",emailId:(null==e||null===(f=e[0])||void 0===f?void 0:f.emailId)||"",id:(null==e||null===(_=e[0])||void 0===_?void 0:_.id)||"",uuid:(null==e||null===(y=e[0])||void 0===y?void 0:y.uuid)||""}]}}),m=[{code:"FATHER",i18nKey:"COMMON_RELATION_FATHER"},{code:"HUSBAND",i18nKey:"COMMON_RELATION_HUSBAND"}],E=Digit.ULBService.getStateId(),f=window.location.href.includes("/edit-application/")||window.location.href.includes("/renew-trade/"),{data:_,isLoading:y}=Digit.Hooks.tl.useTLGenderMDMS(E,"common-masters","GenderType");f&&(d=d.split(".")[0]);const{data:T}=Digit.Hooks.tl.useTradeLicenseMDMS(E,"common-masters","TradeOwnershipSubType",{keyToSearchOwnershipSubtype:d});let g=[];function S(e,t,l){p({type:"EDIT_CURRENT_OWNER_PROPERTY",payload:{index:e,key:l,value:t.target.value}})}function h(e,t,l){p({type:"EDIT_CURRENT_OWNER_PROPERTY",payload:{index:e,key:l,value:t}})}_&&(null==_||_.map(e=>{g.push({i18nKey:"TL_GENDER_"+e.code,code:""+e.code})}));const[L,A]=l.useState(null),b=()=>{if(e=v,!("INSTITUTIONAL"===s?!(null!==(t=e[0])&&void 0!==t&&t.name&&null!==(l=e[0])&&void 0!==l&&l.subOwnerShipCategory&&null!==(n=e[0])&&void 0!==n&&n.mobilenumber)||(A("TL_ERROR_FILL_ALL_MANDATORY_DETAILS"),0):"SINGLEOWNER"===s?!(null!==(i=e[0])&&void 0!==i&&i.name&&null!==(o=e[0])&&void 0!==o&&o.gender&&null!==(d=e[0])&&void 0!==d&&d.mobilenumber)||(A("TL_ERROR_FILL_ALL_MANDATORY_DETAILS"),0):"MULTIOWNER"===s?e.reduce((e,t)=>{if(null!=t&&t.name&&null!=t&&t.gender&&null!=t&&t.mobilenumber)return A("TL_ERROR_FILL_ALL_MANDATORY_DETAILS"),!1},!0):void 0)){let e;e={...u.owners,owners:v},a(r.key,e)}var e,t,l,n,i,o,d},N=()=>a();return n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,"INSTITUTIONAL"===s?n.createElement(t.FormStep,{config:r,onSelect:b,onSkip:N,t:o,isDisabled:!1,forcedError:o(L)},null==v?void 0:v.map((e,l)=>n.createElement("div",{key:e+"-"+l},n.createElement("div",null,n.createElement(t.CardLabel,null,o("TL_INSTITUTION_NAME_LABEL")+"*"),n.createElement(t.TextInput,{t:o,type:"text",isMandatory:!1,name:"institutionName",value:e.institutionName,ValidationRequired:!0,onChange:e=>S(l,e,"institutionName"),validation:{isRequired:!0,pattern:"^[a-z0-9]+( [a-z0-9]+)*$",type:"text",title:o("TL_NAME_ERROR_MESSAGE")}}),n.createElement(t.CardLabel,null,o("TL_INSTITUTION_TYPE_LABEL")+"*"),n.createElement(t.Dropdown,{t:o,option:T,selected:e.subOwnerShipCategory,select:e=>{!function(e,t,l){p({type:"EDIT_CURRENT_OWNER_PROPERTY",payload:{index:e,key:"subOwnerShipCategory",value:t}})}(l,e)},optionKey:"i18nKey"}),n.createElement(t.CardHeader,null,o("TL_AUTHORIZED_PERSON_DETAILS")),n.createElement(t.CardLabel,null,""+o("TL_NEW_OWNER_DETAILS_NAME_LABEL")),n.createElement(t.TextInput,{t:o,type:"text",isMandatory:!1,name:"name",value:e.name,onChange:e=>S(l,e,"name"),ValidationRequired:!0,validation:{pattern:"^[a-z0-9]+( [a-z0-9]+)*$",type:"text",title:o("TL_NAME_ERROR_MESSAGE")}}),n.createElement(t.CardLabel,null,""+o("TL_NEW_OWNER_DESIG_LABEL")),n.createElement(t.TextInput,{t:o,type:"text",isMandatory:!1,name:"designation",value:e.designation,onChange:e=>S(l,e,"designation"),ValidationRequired:!0,validation:{pattern:"^[a-z0-9]+( [a-z0-9]+)*$",type:"text",title:o("TL_NAME_ERROR_MESSAGE")}}),n.createElement(t.CardLabel,null,o("TL_MOBILE_NUMBER_LABEL")+"*"),n.createElement("div",{className:"field-container"},n.createElement("span",{className:"employee-card-input employee-card-input--front",style:{marginTop:"-1px"}},"+91"),n.createElement(t.TextInput,{type:"text",t:o,isMandatory:!1,name:"mobilenumber",value:e.mobilenumber,onChange:e=>S(l,e,"mobilenumber"),ValidationRequired:!0,validation:{isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:o("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}})),n.createElement(t.CardLabel,null,""+o("TL_TELEPHONE_NUMBER_LABEL")),n.createElement("div",{className:"field-container"},n.createElement("span",{className:"employee-card-input employee-card-input--front",style:{marginTop:"-1px"}},"+91"),n.createElement(t.TextInput,{type:"text",t:o,isMandatory:!1,name:"altContactNumber",value:e.altContactNumber,onChange:e=>S(l,e,"altContactNumber"),ValidationRequired:!0,validation:{pattern:"[0][1-9][0-9]{9}|[1-9][0-9]{9}",type:"tel",title:o("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}})),n.createElement(t.CardLabel,null,""+o("NOC_APPLICANT_EMAIL_LABEL")),n.createElement(t.TextInput,{t:o,type:"text",isMandatory:!1,name:"emailId",value:e.emailId,onChange:e=>S(l,e,"emailId"),ValidationRequired:!0,validation:{type:"text",title:o("TL_EMAIL_ERROR_MESSAGE")}}))))):n.createElement(t.FormStep,{config:r,onSelect:b,onSkip:N,t:o,isDisabled:!1,forcedError:o(L)},null==v?void 0:v.map((e,l)=>n.createElement("div",{key:e+"-"+l},n.createElement("div",{style:"MULTIOWNER"===s?{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}:{}},n.createElement(t.CardLabel,{style:{}},o("TL_NEW_OWNER_DETAILS_NAME_LABEL")+"*"),"MULTIOWNER"===s&&n.createElement(t.LinkButton,{label:n.createElement("div",null,n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"5px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:1!=v.length?"#494848":"#FAFAFA"})))),style:{width:"100px",display:"inline"},onClick:e=>p({type:"REMOVE_THIS_OWNER",payload:{index:l}})}),n.createElement(t.TextInput,{style:"MULTIOWNER"===s?{background:"#FAFAFA"}:{},t:o,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name",value:e.name,onChange:e=>S(l,e,"name"),ValidationRequired:!0,validation:{isRequired:!0,pattern:"[a-zA-Z][a-zA-Z ]+[a-zA-Z]$",type:"text",title:o("TL_NAME_ERROR_MESSAGE")}}),n.createElement(t.CardLabel,null,o("TL_NEW_OWNER_DETAILS_GENDER_LABEL")+"*"),y?n.createElement(t.Loader,null):n.createElement(t.RadioButtons,{t:o,options:g,optionsKey:"i18nKey",name:"gender-"+l,selectedOption:e.gender,onSelect:e=>h(l,e,"gender"),labelKey:"",isPTFlow:!0}),n.createElement(t.CardLabel,null,o("TL_MOBILE_NUMBER_LABEL")+"*"),n.createElement("div",{className:"field-container"},n.createElement("span",{className:"employee-card-input employee-card-input--front",style:{marginTop:"-1px"}},"+91"),n.createElement(t.TextInput,{style:"MULTIOWNER"===s?{background:"#FAFAFA",maxWidth:"500px"}:{maxWidth:"500px"},type:"text",t:o,isMandatory:!1,optionKey:"i18nKey",name:"mobilenumber",value:e.mobilenumber,onChange:e=>S(l,e,"mobilenumber"),ValidationRequired:!0,validation:{isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:o("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}})),n.createElement(t.CardLabel,null,o("TL_NEW_OWNER_DETAILS_GUARDIAN_LABEL")+"*"),n.createElement(t.TextInput,{style:"MULTIOWNER"===s?{background:"#FAFAFA"}:{},t:o,type:"text",isMandatory:!1,name:"fatherOrHusbandName",value:e.fatherOrHusbandName,onChange:e=>S(l,e,"fatherOrHusbandName"),ValidationRequired:!0,validation:{isRequired:!0,pattern:"[a-zA-Z][a-zA-Z ]+[a-zA-Z]$",type:"text",title:o("TL_NAME_ERROR_MESSAGE")}}),n.createElement(t.CardLabel,null,o("TL_RELATIONSHIP_WITH_GUARDIAN_LABEL")+"*"),n.createElement(t.RadioButtons,{t:o,options:m,optionsKey:"i18nKey",name:"relationship-"+l,value:e.relationship,selectedOption:e.relationship,onSelect:e=>h(l,e,"relationship"),labelKey:"",isPTFlow:!0}),"MULTIOWNER"===s&&n.createElement(t.CheckBox,{label:o("TL_PRIMARY_OWNER_LABEL"),onChange:e=>p({type:"SET_PRIMARY_OWNER",payload:{index:l}}),value:e.isprimaryowner,checked:e.isprimaryowner,style:{paddingTop:"10px"},name:"multiowner-checkbox-"+l})))),"MULTIOWNER"===s&&n.createElement("div",null,n.createElement("div",{style:{justifyContent:"center",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},n.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>p({type:"ADD_NEW_OWNER"})},o("TL_ADD_OWNER_LABEL"))))))},TLSelectProofIdentity:e=>{var i,o,r,a,u,d,s,c,v;let{t:p,config:m,onSelect:E,formData:f}=e;const[_,y]=l.useState((null==f||null===(i=f.owners)||void 0===i||null===(o=i.documents)||void 0===o||null===(r=o.ProofOfIdentity)||void 0===r?void 0:r.fileStoreId)||null),[T,g]=l.useState(null==f||null===(a=f.owners)||void 0===a||null===(u=a.documents)||void 0===u?void 0:u.ProofOfIdentity),[S,h]=l.useState(null);Digit.ULBService.getCurrentUlb();const[L,A]=l.useState((null==f||null===(d=f.owners)||void 0===d||null===(s=d.documents)||void 0===s||null===(c=s.ProofOfIdentity)||void 0===c?void 0:c.documentType)||null),b=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:N={}}=Digit.Hooks.pt.usePropertyMDMS(b,"PropertyTax","Documents"),C=null==N||null===(v=N.PropertyTax)||void 0===v?void 0:v.Documents;return Array.isArray(C)&&C.filter(e=>e.code.includes("ADDRESSPROOF")),l.useEffect(()=>{!function(){try{h(null);const e=function(){if(T&&null!=T&&T.type){const e=function(e,t,l){if(null!==(e=".jpg,.png,.pdf,.jpeg".split(","))&&void 0!==e&&e.includes("."+(null==T||null===(t=T.type)||void 0===t||null===(l=t.split("/"))||void 0===l?void 0:l.pop()))){const e=function(){if(T.size>=2e6)h(p("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",T,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?y(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):h(p("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}else h(p("PT_UPLOAD_FORMAT_NOT_SUPPORTED"))}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:3}):null,n.createElement(t.FormStep,{config:m,onSelect:()=>{var e,t;let l=_,n=T;n&&(n.documentType="OWNERIDPROOF"),n&&(n.fileStoreId=l||null);let i=(null==f?void 0:f.owners)||{};var o,r,a,u,d,s,c,v;i&&i.documents||(i.documents=[]),i.documents.ProofOfIdentity=n,!window.location.href.includes("/citizen/tl")||1!=(null==f||null===(e=f.ownershipCategory)||void 0===e?void 0:e.isSameAsPropertyOwner)&&"true"!==(null==f||null===(t=f.ownershipCategory)||void 0===t?void 0:t.isSameAsPropertyOwner)||(i={...i,owners:He(f),permanentAddress:(null==f||null===(o=f.cpt)||void 0===o||null===(r=o.details)||void 0===r||null===(a=r.owners)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.permanentAddress)||(null==f||null===(d=f.cpt)||void 0===d||null===(s=d.details)||void 0===s||null===(c=s.owners)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.correspondenceAddress)}),E(m.key,i)},onSkip:()=>E(),t:p,isDisabled:!_||S},n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}},p("TL_UPLOAD_RESTRICTIONS_TYPES")),n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}}," ",p("TL_UPLOAD_RESTRICTIONS_SIZE")),n.createElement(t.CardLabel,null,""+p("TL_CATEGORY_DOCUMENT_TYPE")),n.createElement(t.UploadFile,{id:"tl-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf,.jpeg",onUpload:function(e){y(null),g(e.target.files[0])},onDelete:()=>{y(null)},message:_?"1 "+p("TL_ACTION_FILEUPLOADED"):p("TL_ACTION_NO_FILEUPLOADED"),error:S}),S?n.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},S):"",n.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},SelectOwnershipProof:e=>{var i,o,r,a,u,d,s,c,v;let{t:p,config:m,onSelect:E,formData:f}=e;const[_,y]=l.useState((null==f||null===(i=f.owners)||void 0===i||null===(o=i.documents)||void 0===o||null===(r=o.ProofOfOwnership)||void 0===r?void 0:r.fileStoreId)||null),[T,g]=l.useState(null==f||null===(a=f.owners)||void 0===a||null===(u=a.documents)||void 0===u?void 0:u.ProofOfOwnership),[S,h]=l.useState(null);Digit.ULBService.getCurrentUlb();const[L,A]=l.useState((null==f||null===(d=f.owners)||void 0===d||null===(s=d.documents)||void 0===s||null===(c=s.ProofOfOwnership)||void 0===c?void 0:c.documentType)||null),b=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:N={}}=Digit.Hooks.pt.usePropertyMDMS(b,"PropertyTax","Documents"),C=null==N||null===(v=N.PropertyTax)||void 0===v?void 0:v.Documents;return Array.isArray(C)&&C.filter(e=>e.code.includes("ADDRESSPROOF")),l.useEffect(()=>{!function(){try{h(null);const e=function(){if(T&&null!=T&&T.type){const e=function(e,t,l){if(null!==(e=".jpg,.png,.pdf,.jpeg".split(","))&&void 0!==e&&e.includes("."+(null==T||null===(t=T.type)||void 0===t||null===(l=t.split("/"))||void 0===l?void 0:l.pop()))){const e=function(){if(T.size>=2e6)h(p("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=Ke(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",T,Digit.ULBService.getStateId())).then(function(e){var t,l,n,i;(null==e||null===(t=e.data)||void 0===t||null===(l=t.files)||void 0===l?void 0:l.length)>0?y(null==e||null===(n=e.data)||void 0===n||null===(i=n.files[0])||void 0===i?void 0:i.fileStoreId):h(p("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}else h(p("PT_UPLOAD_FORMAT_NOT_SUPPORTED"))}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[T]),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:3}):null,n.createElement(t.FormStep,{config:m,onSelect:()=>{let e=_,t=T;t&&(t.documentType="OWNERSHIPPROOF"),t&&(t.fileStoreId=e||null);let l=null==f?void 0:f.owners;l&&l.documents||(l.documents=[]),l.documents.ProofOfOwnership=t,E(m.key,l)},onSkip:()=>E(),t:p,isDisabled:!_||S},n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}},p("TL_UPLOAD_OWNERSHIP_RESTRICTIONS_TYPES")),n.createElement(t.CardLabelDesc,{style:{fontWeight:"unset"}},p("TL_UPLOAD_RESTRICTIONS_SIZE")),n.createElement(t.CardLabel,null,""+p("TL_CATEGORY_DOCUMENT_TYPE")),n.createElement(t.UploadFile,{id:"tl-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf,.jpeg",onUpload:function(e){y(null),g(e.target.files[0])},onDelete:()=>{y(null)},message:_?"1 "+p("TL_ACTION_FILEUPLOADED"):p("TL_ACTION_NO_FILEUPLOADED"),error:S}),S?n.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},S):"",n.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},TLSelectStreet:e=>{var i;let{t:o,config:a,onSelect:u,userType:d,formData:s,formState:c,setError:v,clearErrors:p}=e;const[m,E]=l.useState({index:-1,type:""}),{control:f,formState:_,watch:y,setValue:T,getValues:g,trigger:S}=r.useForm(),h=y(),{errors:L}=_;let A;window.location.href.includes("tl/new-application")||window.location.href.includes("tl/renew-application-details"),window.location.href.includes("edit-application")||window.location.href.includes("tl/renew-application-details"),window.location.href.includes("tl")?(A=a.inputs,a.inputs[0].disable=window.location.href.includes("edit-application"),a.inputs[1].disable=window.location.href.includes("edit-application"),A[0].validation={minLength:0,maxLength:256},A[1].validation={minLength:0,maxLength:256}):A=[{label:"PT_PROPERTY_ADDRESS_STREET_NAME",type:"text",name:"street",validation:{pattern:"[a-zA-Z0-9 ]{1,255}",title:o("CORE_COMMON_STREET_INVALID")}},{label:"PT_PROPERTY_ADDRESS_HOUSE_NO",type:"text",name:"doorNo",validation:{pattern:"[A-Za-z0-9#,/ -]{1,63}",title:o("CORE_COMMON_DOOR_INVALID")}}];const b=e=>{let{validation:t,name:l,messages:n}=e;if(t){let{pattern:e,maxlength:i,minlength:o,required:r}=t||{};return{pattern:t=>{if(e){var i;if(e instanceof RegExp)return!!e.test(t)||(null==n?void 0:n.pattern)||l.toUpperCase()+"_PATTERN";if("string"==typeof e)return!(null===(i=new RegExp(e))||void 0===i||!i.test(t))||(null==n?void 0:n.pattern)||l.toUpperCase()+"_PATTERN"}return!0},required:e=>!r||!!e||(null==n?void 0:n.required)||l.toUpperCase()+"_REQUIRED",minLength:e=>!o||(null==e?void 0:e.length)>=o||(null==n?void 0:n.minlength)||l.toUpperCase()+"_MINLENGTH",maxLength:e=>!i||(null==e?void 0:e.length)<=i||(null==n?void 0:n.maxlength)||l.toUpperCase()+"_MAXLENGTH"}}return{}};var N;return l.useEffect(()=>{S()},[]),l.useEffect(()=>{var e;"employee"===d&&(Object.keys(L).length&&!je.isEqual((null===(e=c.errors[a.key])||void 0===e?void 0:e.type)||{},L)?v(a.key,{type:L}):!Object.keys(L).length&&c.errors[a.key]&&p(a.key))},[L]),l.useEffect(()=>{const e=Object.keys(h),t={};null==e||e.forEach(e=>{var l;return t[e]=null===(l=s[a.key])||void 0===l?void 0:l[e]}),je.isEqual(h,t)||(u(a.key,{...s[a.key],...h}),S())},[h]),l.useEffect(()=>{var e,t;null!=s&&null!==(e=s.cpt)&&void 0!==e&&e.details&&window.location.href.includes("tl")&&(null===(t=A)||void 0===t||t.map(e=>{var t,l,n,i,o,r,a,u,d,c,v,p,m,E;g(e.name)!==(null==s||null===(t=s.cpt)||void 0===t||null===(l=t.details)||void 0===l||null===(n=l.address)||void 0===n?void 0:n[e.name])&&T(e.name,null===(null==s||null===(i=s.cpt)||void 0===i||null===(o=i.details)||void 0===o||null===(r=o.address)||void 0===r?void 0:r[e.name])||""===(null==s||null===(a=s.cpt)||void 0===a||null===(u=a.details)||void 0===u||null===(d=u.address)||void 0===d?void 0:d[e.name])?null!=s&&null!==(c=s.address)&&void 0!==c&&c[e.name]?null==s||null===(v=s.address)||void 0===v?void 0:v[e.name]:"":null==s||null===(p=s.cpt)||void 0===p||null===(m=p.details)||void 0===m||null===(E=m.address)||void 0===E?void 0:E[e.name])}))},[null==s||null===(i=s.cpt)||void 0===i?void 0:i.details]),"employee"===d?null===(N=A)||void 0===N?void 0:N.map((e,l)=>{var i,u,d,c;return n.createElement(t.LabelFieldPair,{key:l},n.createElement(t.CardLabel,{className:"card-label-smaller"},o(e.label),a.isMandatory?" * ":null),n.createElement("div",{className:"field"},n.createElement(r.Controller,{control:f,defaultValue:(null==s||null===(i=s.cpt)||void 0===i||null===(u=i.details)||void 0===u||null===(d=u.address)||void 0===d?void 0:d[e.name])||(null==s||null===(c=s.address)||void 0===c?void 0:c[e.name]),name:e.name,rules:{validate:b(e)},render:i=>{var o,r,a,u,d,c,v,p,f,_,y,T,g,S,h,L;return n.createElement("div",{style:{display:"flex",alignItems:"baseline",marginRight:"unset"}},n.createElement(t.TextInput,Ye({id:e.name,key:e.name,value:i.value,onChange:e=>{E({index:l}),i.onChange(e.target.value)},onBlur:i.onBlur,disable:!(null==s||null===(o=s.cpt)||void 0===o||null===(r=o.details)||void 0===r||null===(a=r.address)||void 0===a||!a[e.name]),autoFocus:(null==m?void 0:m.index)==l},null==e?void 0:e.validation)),n.createElement("div",{style:{marginRight:"-50px",marginLeft:"10px"}},n.createElement(t.WrapUnMaskComponent,{unmaskField:e=>{i.onChange(e)},iseyevisible:!!(i.value?null===(u=i.value)||void 0===u?void 0:u.includes("*"):null==s||null===(d=s.cpt)||void 0===d||null===(c=d.details)||void 0===c||null===(v=c.address)||void 0===v||null===(p=v[e.name])||void 0===p?void 0:p.includes("*")),privacy:{uuid:null==s||null===(f=s.cpt)||void 0===f||null===(_=f.details)||void 0===_||null===(y=_.owners)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.uuid,fieldName:[e.name],model:"Property",loadData:{serviceName:"/property-services/property/_search",requestBody:{},requestParam:{tenantId:null==s||null===(g=s.cpt)||void 0===g||null===(S=g.details)||void 0===S?void 0:S.tenantId,propertyIds:null==s||null===(h=s.cpt)||void 0===h||null===(L=h.details)||void 0===L?void 0:L.propertyId},jsonPath:"Properties[0].address."+e.name,isArray:!1}}})))}})))}):n.createElement(n.Fragment,null,window.location.href.includes("/tl")?n.createElement(sn,{currentStep:2}):n.createElement(sn,{currentStep:1,flow:"APPLY"}),n.createElement(t.FormStep,{config:{...a,inputs:A},_defaultValues:{street:null==s?void 0:s.address.street,doorNo:null==s?void 0:s.address.doorNo},onSelect:e=>u(a.key,e),onSkip:()=>u(),t:o}))},TLSelectLandmark:e=>{var i;let{t:o,config:r,onSelect:a,formData:u,userType:d}=e;const[s,c]=l.useState(),[v,p]=l.useState(""),m=[{label:"ES_NEW_APPLICATION_LOCATION_LANDMARK",type:"textarea",name:"landmark",validation:{maxLength:1024}}];function E(e){e.target.value.length>1024?p("CS_COMMON_LANDMARK_MAX_LENGTH"):(p(null),c(e.target.value),"employee"===d&&a(r.key,{...u[r.key],landmark:e.target.value}))}return l.useEffect(()=>{var e;c(null==u||null===(e=u.address)||void 0===e?void 0:e.landmark)},[null==u||null===(i=u.address)||void 0===i?void 0:i.landmark]),"employee"===d?null==m?void 0:m.map((e,l)=>n.createElement(t.LabelFieldPair,{key:l},n.createElement(t.CardLabel,{className:"card-label-smaller"},o(e.label),r.isMandatory?" * ":null),n.createElement(t.TextArea,Ye({className:"form-field",id:e.name,value:s,onChange:E,name:e.name||""},e.validation)))):n.createElement(n.Fragment,null,window.location.href.includes("/tl")?n.createElement(sn,{currentStep:2}):n.createElement(sn,{currentStep:1,flow:"APPLY"}),n.createElement(t.FormStep,{config:{...r,inputs:m},value:s,onChange:E,onSelect:e=>a(r.key,{...u[r.key],...e}),onSkip:()=>a(),t:o,forcedError:o(v)}))},TLSelectOwnerAddress:e=>{var i,r,a,u,d,s,c;let{t:v,config:p,onSelect:m,userType:E,formData:f}=e;const[_,y]=l.useState((null==f||null===(i=f.owners)||void 0===i?void 0:i.permanentAddress)||""),[T,g]=l.useState(null==f||null===(r=f.owners)||void 0===r?void 0:r.isCorrespondenceAddress);let S=window.location.href.includes("edit-application"),h=window.location.href.includes("renew-trade");const{pathname:L}=o.useLocation(),A=L.includes("/modify-application/");let b=null==f||null===(a=f.ownershipCategory)||void 0===a||!a.code.includes("SINGLEOWNER");function N(e){y(e.target.value)}l.useEffect(()=>{var e;if(null==(null==f||null===(e=f.owners)||void 0===e?void 0:e.permanentAddress)&&h&&""===_){var t,l,n,i,o,r,a,u,d,s;let e={doorNo:null==f||null===(t=f.address)||void 0===t?void 0:t.doorNo,street:(null==f||null===(l=f.address)||void 0===l?void 0:l.street)||(null==f||null===(n=f.address)||void 0===n?void 0:n.buildingName),landmark:null==f||null===(i=f.address)||void 0===i?void 0:i.landmark,locality:null==f||null===(o=f.address)||void 0===o||null===(r=o.locality)||void 0===r?void 0:r.name,city:null==f||null===(a=f.address)||void 0===a||null===(u=a.city)||void 0===u||null===(d=u.code)||void 0===d?void 0:d.split(".")[1],pincode:null==f||null===(s=f.address)||void 0===s?void 0:s.pincode},c="";for(const t in e)"pincode"==t||!e.pincode&&"city"==t?c+=e[t]?e[t]:"":e[t]&&(c+=e[t]?v(""+e[t])+", ":"");y(c)}},[f]),l.useEffect(()=>{var e;if(null!=f&&null!==(e=f.cpt)&&void 0!==e&&e.details&&_&&T&&window.location.href.includes("/tl/tradelicence/new-application")){var t,l,n,i,o,r,a,u,d,s,c,p,m,E,g,S,h,L,A,b,N,C,D;let e={doorNo:null==f||null===(t=f.cpt)||void 0===t||null===(l=t.details)||void 0===l||null===(n=l.address)||void 0===n?void 0:n.doorNo,street:(null==f||null===(i=f.cpt)||void 0===i||null===(o=i.details)||void 0===o||null===(r=o.address)||void 0===r?void 0:r.street)||(null==f||null===(a=f.cpt)||void 0===a||null===(u=a.details)||void 0===u||null===(d=u.address)||void 0===d?void 0:d.buildingName),landmark:null==f||null===(s=f.cpt)||void 0===s||null===(c=s.details)||void 0===c||null===(p=c.address)||void 0===p?void 0:p.landmark,locality:null==f||null===(m=f.cpt)||void 0===m||null===(E=m.details)||void 0===E||null===(g=E.address)||void 0===g||null===(S=g.locality)||void 0===S?void 0:S.name,city:(null==f||null===(h=f.cpt)||void 0===h||null===(L=h.details)||void 0===L||null===(A=L.address)||void 0===A?void 0:A.city)||v(null==f||null===(b=f.cpt)||void 0===b||null===(N=b.details)||void 0===N||null===(C=N.address)||void 0===C?void 0:C.tenantId),pincode:null==f||null===(D=f.address)||void 0===D?void 0:D.pincode},_="";for(const t in e)"pincode"==t||!e.pincode&&"city"==t?_+=e[t]?e[t]:"":e[t]&&(_+=e[t]?v(""+e[t])+", ":"");y(_)}},[null==f||null===(u=f.cpt)||void 0===u||null===(d=u.details)||void 0===d?void 0:d.propertyId]);const C=()=>{if("employee"===E)m(p.key,{...f[p.key],permanentAddress:_,isCorrespondenceAddress:T});else{let e=f.owners;e.permanentAddress=_,e.isCorrespondenceAddress=T,m(p.key,e)}};return l.useEffect(()=>{"employee"===E&&C()},[_]),"employee"===E?n.createElement(t.LabelFieldPair,null,n.createElement(t.CardLabel,{className:"card-label-smaller",style:A?{color:"#B1B4B6"}:{}},v("PT_OWNERS_ADDRESS")),n.createElement("div",{className:"field"},n.createElement(t.TextInput,{name:"address",onChange:N,value:_,disable:A}))):n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,{currentStep:2}):null,n.createElement(t.FormStep,{config:p,t:v,onSelect:C,isDisabled:!S&&!h&&!_},n.createElement(t.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:v,name:"address",onChange:N,value:_}),"MOVABLE"!==(null==f||null===(s=f.TradeDetails)||void 0===s||null===(c=s.StructureType)||void 0===c?void 0:c.code)&&n.createElement(t.CheckBox,{label:v("TL_COMMON_SAME_AS_TRADE_ADDRESS"),onChange:function(e){var t,l;if(null!=f&&null!==(t=f.cpt)&&void 0!==t&&t.details&&Object.keys(null==f||null===(l=f.cpt)||void 0===l?void 0:l.details).length>0&&1==e.target.checked){var n,i,o,r,a,u,d,s,c,p,m,E,_,T,S,h,L,A,b,N;let e={doorNo:null==f||null===(n=f.cpt)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.address)||void 0===o?void 0:o.doorNo,street:(null==f||null===(r=f.cpt)||void 0===r||null===(a=r.details)||void 0===a||null===(u=a.address)||void 0===u?void 0:u.street)||(null==f||null===(d=f.cpt)||void 0===d||null===(s=d.details)||void 0===s||null===(c=s.address)||void 0===c?void 0:c.buildingName),landmark:null==f||null===(p=f.cpt)||void 0===p||null===(m=p.details)||void 0===m||null===(E=m.address)||void 0===E?void 0:E.landmark,locality:null==f||null===(_=f.cpt)||void 0===_||null===(T=_.details)||void 0===T||null===(S=T.address)||void 0===S||null===(h=S.locality)||void 0===h?void 0:h.name,city:null==f||null===(L=f.cpt)||void 0===L||null===(A=L.details)||void 0===A||null===(b=A.address)||void 0===b?void 0:b.city,pincode:null==f||null===(N=f.address)||void 0===N?void 0:N.pincode},t="";for(const l in e)"pincode"==l||!e.pincode&&"city"==l?t+=e[l]?e[l]:"":e[l]&&(t+=e[l]?v(""+e[l])+", ":"");y(t)}else if(1==e.target.checked){var C,D,I,O,w,R,P,x,M;let e={doorNo:null==f||null===(C=f.address)||void 0===C?void 0:C.doorNo,street:(null==f||null===(D=f.address)||void 0===D?void 0:D.street)||(null==f||null===(I=f.address)||void 0===I?void 0:I.buildingName),landmark:null==f||null===(O=f.address)||void 0===O?void 0:O.landmark,locality:null==f||null===(w=f.address)||void 0===w||null===(R=w.locality)||void 0===R?void 0:R.i18nkey,city:null==f||null===(P=f.address)||void 0===P||null===(x=P.city)||void 0===x?void 0:x.name,pincode:null==f||null===(M=f.address)||void 0===M?void 0:M.pincode},t="";for(const l in e)"pincode"==l||!e.pincode&&"city"==l?t+=e[l]?e[l]:"":e[l]&&(t+=e[l]?v(""+e[l])+", ":"");y(t)}else y("");g(e.target.checked)},value:T,checked:T||!1,style:{paddingTop:"10px"}})),b?n.createElement(t.CitizenInfoLabel,{info:v("CS_FILE_APPLICATION_INFO_LABEL"),text:v("TL_PRIMARY_ADDR_INFO_MSG")}):"")},TLCheckPage:e=>"true"!==localStorage.getItem("TLAppSubmitEnabled")?(window.location.replace("/digit-ui/citizen"),null):n.createElement($e,e),TLDocument:qe,TLAcknowledgement:e=>{var r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b;let{data:N,onSuccess:C,onUpdateSuccess:D}=e;const{t:I}=i.useTranslation(),[O,w,R]=Digit.Hooks.useSessionStorage("CITIZEN_TL_MUTATION_HAPPENED",!1),P=window.location.href.includes("edit-application"),x=Digit.ULBService.getCurrentTenantId(),M=!window.location.href.includes("renew-trade"),k=Digit.Hooks.tl.useTradeLicenseAPI(null!=N&&null!==(r=N.cpt)&&void 0!==r&&null!==(a=r.details)&&void 0!==a&&null!==(u=a.address)&&void 0!==u&&u.tenantId?null==N||null===(d=N.cpt)||void 0===d||null===(s=d.details)||void 0===s||null===(c=s.address)||void 0===c?void 0:c.tenantId:x,M),U=Digit.Hooks.tl.useTradeLicenseAPI(null!=N&&null!==(v=N.cpt)&&void 0!==v&&null!==(p=v.details)&&void 0!==p&&null!==(m=p.address)&&void 0!==m&&m.tenantId?null==N||null===(E=N.cpt)||void 0===E||null===(f=E.details)||void 0===f||null===(_=f.address)||void 0===_?void 0:_.tenantId:x,!1),B=Digit.Hooks.tl.useTradeLicenseAPI(null!=N&&null!==(y=N.cpt)&&void 0!==y&&null!==(T=y.details)&&void 0!==T&&null!==(g=T.address)&&void 0!==g&&g.tenantId?null==N||null===(S=N.cpt)||void 0===S||null===(h=S.details)||void 0===h||null===(L=h.address)||void 0===L?void 0:L.tenantId:x,!1),F=window.location.href.includes("renew-trade"),{data:H}=Digit.Hooks.useStore.getInitData(),{tenants:W}=H||{},V=Digit.ULBService.getStateId(),{data:j={}}=Digit.Hooks.tl.useTradeLicenseMDMS(V,"egf-master","FinancialYear");let Y=sessionStorage.getItem("isDirectRenewal")?De(sessionStorage.getItem("isDirectRenewal")):null;l.useEffect(()=>{const e=()=>{w(!0)};try{var t,l,n,i,o,r;let d=null!=N&&null!==(t=N.cpt)&&void 0!==t&&null!==(l=t.details)&&void 0!==l&&null!==(n=l.address)&&void 0!==n&&n.tenantId?null==N||null===(i=N.cpt)||void 0===i||null===(o=i.details)||void 0===o||null===(r=o.address)||void 0===r?void 0:r.tenantId:x;if(N.tenantId=d,P){var a;let t=(e=>{var t,l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R;return console.log("convertToResubmitTrade",e),{Licenses:[{id:null==e?void 0:e.id,tenantId:null==e||null===(t=e.address)||void 0===t||null===(l=t.city)||void 0===l?void 0:l.code,businessService:null==e?void 0:e.businessService,licenseType:null==e?void 0:e.licenseType,applicationType:e.applicationType,workflowCode:e.workflowCode,licenseNumber:null==e?void 0:e.licenseNumber,applicationNumber:null==e?void 0:e.applicationNumber,tradeName:null==e?void 0:e.tradeName,applicationDate:null==e?void 0:e.applicationDate,commencementDate:null==e?void 0:e.commencementDate,issuedDate:null==e?void 0:e.issuedDate,financialYear:null==e?void 0:e.financialYear,validFrom:null==e?void 0:e.validFrom,validTo:null==e?void 0:e.validTo,action:(null==e||null===(n=e.workflowObject)||void 0===n||null===(i=n.nextActions)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.action)||"FORWARD",wfDocuments:null==e?void 0:e.wfDocuments,status:null==e?void 0:e.status,tradeLicenseDetail:{address:e.tradeLicenseDetail.address,noOfEmployees:(null==e||null===(r=e.TradeDetails)||void 0===r?void 0:r.NumberOfEmployees)||null,operationalArea:(null==e||null===(a=e.TradeDetails)||void 0===a?void 0:a.OperationalSqFtArea)||null,applicationDocuments:Ne(e),accessories:Ae(e),owners:ge(e),structureType:null!=e&&null!==(u=e.TradeDetails)&&void 0!==u&&u.VehicleType?null==e||null===(d=e.TradeDetails)||void 0===d?void 0:d.VehicleType.code:null==e||null===(s=e.TradeDetails)||void 0===s?void 0:s.BuildingType.code,subOwnerShipCategory:null!=e&&null!==(c=e.ownershipCategory)&&void 0!==c&&c.code.includes("INSTITUTIONAL")?null==e||null===(v=e.owners)||void 0===v||null===(p=v.owners)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.subOwnerShipCategory.code:null==e||null===(E=e.ownershipCategory)||void 0===E?void 0:E.code,tradeUnits:he(e),additionalDetail:e.tradeLicenseDetail.additionalDetail,auditDetails:e.tradeLicenseDetail.auditDetails,channel:"CITIZEN",id:e.tradeLicenseDetail.id,institution:null!=e&&null!==(f=e.ownershipCategory)&&void 0!==f&&f.code.includes("INSTITUTIONAL")?{designation:null==e||null===(_=e.owners)||void 0===_||null===(y=_.owners)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.designation,ContactNo:null==e||null===(g=e.owners)||void 0===g||null===(S=g.owners)||void 0===S||null===(h=S[0])||void 0===h?void 0:h.altContactNumber,mobileNumber:null==e||null===(L=e.owners)||void 0===L||null===(A=L.owners)||void 0===A||null===(b=A[0])||void 0===b?void 0:b.mobilenumber,instituionName:null==e||null===(N=e.owners)||void 0===N||null===(C=N.owners)||void 0===C||null===(D=C[0])||void 0===D?void 0:D.institutionName,name:null==e||null===(I=e.owners)||void 0===I||null===(O=I.owners)||void 0===O||null===(w=O[0])||void 0===w?void 0:w.name}:null==e||null===(R=e.tradeLicenseDetail)||void 0===R?void 0:R.institution},calculation:null,auditDetails:null==e?void 0:e.auditDetails,accountId:null==e?void 0:e.accountId}]}})(N);t.Licenses[0].tenantId=(null==t||null===(a=t.Licenses[0])||void 0===a?void 0:a.tenantId)||d,!B.isLoading&&!B.isSuccess&&!O&&B.mutate(t,{onSuccessedit:e})}else{var u;let e=F?function(e,t){var l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R;void 0===t&&(t=[]);let P=null==e?void 0:e.financialYear;const x=null==P?void 0:P.split("-")[1],M="20"+Number(x)+"-"+(Number(x)+1),k=null===(l=t)||void 0===l?void 0:l.filter(e=>(null==e?void 0:e.code)===M);let U=De(sessionStorage.getItem("isDirectRenewal")),B=sessionStorage.getItem("isSameAsPropertyOwner");return{Licenses:[{id:null==e?void 0:e.id,tenantId:null==e||null===(n=e.address)||void 0===n||null===(i=n.city)||void 0===i?void 0:i.code,businessService:null==e?void 0:e.businessService,licenseType:null==e?void 0:e.licenseType,applicationType:"RENEWAL",workflowCode:U?"DIRECTRENEWAL":"EDITRENEWAL",licenseNumber:null==e?void 0:e.licenseNumber,applicationNumber:null==e?void 0:e.applicationNumber,tradeName:null==e?void 0:e.tradeName,applicationDate:null==e?void 0:e.applicationDate,commencementDate:null==e?void 0:e.commencementDate,issuedDate:null==e?void 0:e.issuedDate,financialYear:M||"2022-23",validFrom:k[0].startingDate||(null==e?void 0:e.validFrom),validTo:k[0].endingDate||(null==e?void 0:e.validTo),action:"INITIATE",wfDocuments:null==e?void 0:e.wfDocuments,status:null==e?void 0:e.status,tradeLicenseDetail:{address:e.tradeLicenseDetail.address,applicationDocuments:e.tradeLicenseDetail.applicationDocuments,noOfEmployees:(null==e||null===(o=e.TradeDetails)||void 0===o?void 0:o.NumberOfEmployees)||null,operationalArea:(null==e||null===(r=e.TradeDetails)||void 0===r?void 0:r.OperationalSqFtArea)||null,accessories:U?e.tradeLicenseDetail.accessories:null===(a=Ae(e))||void 0===a?void 0:a.filter(e=>!1!==(null==e?void 0:e.active)),owners:U?e.tradeLicenseDetail.owners:ge(e),structureType:U?e.tradeLicenseDetail.structureType:null!=e&&null!==(u=e.TradeDetails)&&void 0!==u&&u.VehicleType?null==e||null===(d=e.TradeDetails)||void 0===d?void 0:d.VehicleType.code:null==e||null===(s=e.TradeDetails)||void 0===s?void 0:s.BuildingType.code,subOwnerShipCategory:null!=e&&null!==(c=e.ownershipCategory)&&void 0!==c&&c.code.includes("INSTITUTIONAL")?null==e||null===(v=e.owners)||void 0===v||null===(p=v.owners)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.subOwnerShipCategory.code:null==e||null===(E=e.ownershipCategory)||void 0===E?void 0:E.code,tradeUnits:he(e),additionalDetail:{...e.tradeLicenseDetail.additionalDetail,isSameAsPropertyOwner:B},tradeGstNo:(null==e||null===(f=e.TradeDetails)||void 0===f?void 0:f.TradeGSTNumber)||null,auditDetails:e.tradeLicenseDetail.auditDetails,channel:"CITIZEN",id:e.tradeLicenseDetail.id,...(null==e||null===(_=e.ownershipCategory)||void 0===_?void 0:_.code.includes("INSTITUTIONAL"))&&{institution:{designation:null==e||null===(y=e.owners)||void 0===y||null===(T=y.owners)||void 0===T||null===(g=T[0])||void 0===g?void 0:g.designation,ContactNo:null==e||null===(S=e.owners)||void 0===S||null===(h=S.owners)||void 0===h||null===(L=h[0])||void 0===L?void 0:L.altContactNumber,mobileNumber:null==e||null===(A=e.owners)||void 0===A||null===(b=A.owners)||void 0===b||null===(N=b[0])||void 0===N?void 0:N.mobilenumber,instituionName:null==e||null===(C=e.owners)||void 0===C||null===(D=C.owners)||void 0===D||null===(I=D[0])||void 0===I?void 0:I.institutionName,name:null==e||null===(O=e.owners)||void 0===O||null===(w=O.owners)||void 0===w||null===(R=w[0])||void 0===R?void 0:R.name}}},calculation:null,auditDetails:null==e?void 0:e.auditDetails,accountId:null==e?void 0:e.accountId}]}}(N,j["egf-master"]?j["egf-master"].FinancialYear.filter(e=>"TL"===e.module):[]):function(e){var t,l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne,ie,oe,re,ae,ue,de,se,ce,ve,pe,me,Ee,fe,_e,ye,ge,he,Ae,be,Ne,Ce,De,Ie,Oe,we,Re,Pe,xe,Me,ke,Ue,Be,Fe,He,We,Ve,je,Ye,Ke,ze,Ge,qe,$e,Xe,Ze,Qe,Je,et,tt,lt,nt,it,ot,rt,at,ut,dt,st,ct,vt,pt,mt,Et,ft,_t,yt,Tt,gt;void 0===e&&(e={});let St=sessionStorage.getItem("CurrentFinancialYear"),ht=sessionStorage.getItem("isSameAsPropertyOwner");return{Licenses:[{action:"INITIATE",applicationType:"NEW",commencementDate:Date.parse(null===(t=e)||void 0===t||null===(l=t.TradeDetails)||void 0===l?void 0:l.CommencementDate),financialYear:St||"2021-22",licenseType:"PERMANENT",tenantId:null===(n=e)||void 0===n||null===(i=n.address)||void 0===i||null===(o=i.city)||void 0===o?void 0:o.code,tradeLicenseDetail:{channel:"CITIZEN",address:{city:null!==(r=e)&&void 0!==r&&r.cpt?null!==(E=e)&&void 0!==E&&null!==(f=E.cpt)&&void 0!==f&&null!==(_=f.details)&&void 0!==_&&null!==(y=_.address)&&void 0!==y&&null!==(T=y.city)&&void 0!==T&&T.code?null===(g=e)||void 0===g||null===(S=g.cpt)||void 0===S||null===(h=S.details)||void 0===h||null===(L=h.address)||void 0===L||null===(A=L.city)||void 0===A?void 0:A.code:null===(b=e)||void 0===b||null===(N=b.cpt)||void 0===N||null===(C=N.details)||void 0===C||null===(D=C.address)||void 0===D?void 0:D.city:null!==(a=e)&&void 0!==a&&null!==(u=a.address)&&void 0!==u&&null!==(d=u.city)&&void 0!==d&&d.code?null===(s=e)||void 0===s||null===(c=s.address)||void 0===c||null===(v=c.city)||void 0===v?void 0:v.code:null===(p=e)||void 0===p||null===(m=p.address)||void 0===m?void 0:m.city,locality:{code:null!==(I=e)&&void 0!==I&&I.cpt?null===(P=e)||void 0===P||null===(x=P.cpt)||void 0===x||null===(M=x.details)||void 0===M||null===(k=M.address)||void 0===k||null===(U=k.locality)||void 0===U?void 0:U.code:null===(O=e)||void 0===O||null===(w=O.address)||void 0===w||null===(R=w.locality)||void 0===R?void 0:R.code},tenantId:null===(B=e)||void 0===B?void 0:B.tenantId,pincode:null!==(F=e)&&void 0!==F&&F.cpt?null===(V=e)||void 0===V||null===(j=V.cpt)||void 0===j||null===(Y=j.details)||void 0===Y||null===(K=Y.address)||void 0===K?void 0:K.pincode:null===(H=e)||void 0===H||null===(W=H.address)||void 0===W?void 0:W.pincode,doorNo:null!==(z=e)&&void 0!==z&&z.cpt?null===($=e)||void 0===$||null===(X=$.cpt)||void 0===X||null===(Z=X.details)||void 0===Z||null===(Q=Z.address)||void 0===Q?void 0:Q.doorNo:null===(G=e)||void 0===G||null===(q=G.address)||void 0===q?void 0:q.doorNo,street:null!==(J=e)&&void 0!==J&&J.cpt?null===(le=e)||void 0===le||null===(ne=le.cpt)||void 0===ne||null===(ie=ne.details)||void 0===ie||null===(oe=ie.address)||void 0===oe?void 0:oe.street:null===(ee=e)||void 0===ee||null===(te=ee.address)||void 0===te?void 0:te.street,landmark:null!==(re=e)&&void 0!==re&&re.cpt?null===(de=e)||void 0===de||null===(se=de.cpt)||void 0===se||null===(ce=se.details)||void 0===ce||null===(ve=ce.address)||void 0===ve?void 0:ve.landmark:null===(ae=e)||void 0===ae||null===(ue=ae.address)||void 0===ue?void 0:ue.landmark},noOfEmployees:(null===(pe=e)||void 0===pe||null===(me=pe.TradeDetails)||void 0===me?void 0:me.NumberOfEmployees)||null,operationalArea:(null===(Ee=e)||void 0===Ee||null===(fe=Ee.TradeDetails)||void 0===fe?void 0:fe.OperationalSqFtArea)||null,applicationDocuments:null,accessories:null!==(_e=e)&&void 0!==_e&&null!==(ye=_e.TradeDetails)&&void 0!==ye&&ye.accessories&&null!==(ge=e)&&void 0!==ge&&null!==(he=ge.TradeDetails)&&void 0!==he&&null!==(Ae=he.isAccessories)&&void 0!==Ae&&null!==(be=Ae.i18nKey)&&void 0!==be&&be.includes("YES")?Le(e):null,owners:Te(e),...(null===(Ne=e)||void 0===Ne||null===(Ce=Ne.ownershipCategory)||void 0===Ce?void 0:Ce.code.includes("INSTITUTIONAL"))&&{institution:{designation:null===(De=e)||void 0===De||null===(Ie=De.owners)||void 0===Ie||null===(Oe=Ie.owners)||void 0===Oe||null===(we=Oe[0])||void 0===we?void 0:we.designation,ContactNo:null===(Re=e)||void 0===Re||null===(Pe=Re.owners)||void 0===Pe||null===(xe=Pe.owners)||void 0===xe||null===(Me=xe[0])||void 0===Me?void 0:Me.altContactNumber,mobileNumber:null===(ke=e)||void 0===ke||null===(Ue=ke.owners)||void 0===Ue||null===(Be=Ue.owners)||void 0===Be||null===(Fe=Be[0])||void 0===Fe?void 0:Fe.mobilenumber,instituionName:null===(He=e)||void 0===He||null===(We=He.owners)||void 0===We||null===(Ve=We.owners)||void 0===Ve||null===(je=Ve[0])||void 0===je?void 0:je.institutionName,name:null===(Ye=e)||void 0===Ye||null===(Ke=Ye.owners)||void 0===Ke||null===(ze=Ke.owners)||void 0===ze||null===(Ge=ze[0])||void 0===Ge?void 0:Ge.name}},structureType:"IMMOVABLE"!==(null===(qe=e)||void 0===qe||null===($e=qe.TradeDetails)||void 0===$e||null===(Xe=$e.StructureType)||void 0===Xe?void 0:Xe.code)?null===(Ze=e)||void 0===Ze||null===(Qe=Ze.TradeDetails)||void 0===Qe||null===(Je=Qe.VehicleType)||void 0===Je?void 0:Je.code:null===(et=e)||void 0===et||null===(tt=et.TradeDetails)||void 0===tt||null===(lt=tt.BuildingType)||void 0===lt?void 0:lt.code,subOwnerShipCategory:null!==(nt=e)&&void 0!==nt&&null!==(it=nt.owners.owners)&&void 0!==it&&null!==(ot=it[0])&&void 0!==ot&&null!==(rt=ot.subOwnerShipCategory)&&void 0!==rt&&rt.code?null===(at=e)||void 0===at||null===(ut=at.owners.owners)||void 0===ut||null===(dt=ut[0])||void 0===dt||null===(st=dt.subOwnerShipCategory)||void 0===st?void 0:st.code:null===(ct=e)||void 0===ct||null===(vt=ct.ownershipCategory)||void 0===vt?void 0:vt.code,tradeUnits:Se(e),additionalDetail:{propertyId:null!==(pt=e)&&void 0!==pt&&pt.cpt?null===(mt=e)||void 0===mt||null===(Et=mt.cpt)||void 0===Et||null===(ft=Et.details)||void 0===ft?void 0:ft.propertyId:"",isSameAsPropertyOwner:ht,tradeGstNo:(null===(_t=e)||void 0===_t||null===(yt=_t.TradeDetails)||void 0===yt?void 0:yt.TradeGSTNumber)||null}},tradeName:null===(Tt=e)||void 0===Tt||null===(gt=Tt.TradeDetails)||void 0===gt?void 0:gt.TradeName,wfDocuments:[],applicationDocuments:[],workflowCode:"NewTL"}]}}(N);e.Licenses[0].tenantId=(null==e||null===(u=e.Licenses[0])||void 0===u?void 0:u.tenantId)||d,F?j["egf-master"]&&j["egf-master"].FinancialYear.length>0&&Y?B.mutate(e,{onUpdateSuccess:D}):U.mutate(e,{onUpdateSuccess:D}):k.mutate(e,{onSuccess:C})}}catch(e){}},[j]),l.useEffect(()=>{if(k.isSuccess||U.isSuccess&&F&&!Y)try{let e=function(e,t,l){var n;void 0===e&&(e={});const i=window.location.href.includes("renew-trade");let o={Licenses:[]};return o.Licenses[0]={...e.Licenses[0]},o.Licenses[0].action="APPLY",o.Licenses[0].wfDocuments=o.Licenses[0].wfDocuments?o.Licenses[0].wfDocuments:be(t),o.Licenses[0].tradeLicenseDetail.applicationDocuments=i?((e,t)=>{var l,n;let i=[],o=t?t.owners.documents:[];return null==e||null===(l=e.tradeLicenseDetail)||void 0===l||null===(n=l.applicationDocuments)||void 0===n||n.map(l=>{"OWNERPHOTO"===l.documentType&&l.fileStoreId===t.owners.documents.OwnerPhotoProof.fileStoreId||"OWNERSHIPPROOF"===l.documentType&&l.fileStoreId==t.owners.documents.ProofOfOwnership.fileStoreId||"OWNERIDPROOF"===l.documentType&&l.fileStoreId===t.owners.documents.ProofOfIdentity.fileStoreId?i.push(l):("OWNERPHOTO"===l.documentType&&l.fileStoreId!==t.owners.documents.OwnerPhotoProof.fileStoreId&&(i.push({fileName:o.OwnerPhotoProof.name,fileStoreId:o.OwnerPhotoProof.fileStoreId,documentType:"OWNERPHOTO",tenantId:null==e?void 0:e.tenantId}),i.push({...l,active:"false"})),"OWNERSHIPPROOF"===l.documentType&&l.fileStoreId!==t.owners.documents.ProofOfOwnership.fileStoreId&&(i.push({fileName:o.ProofOfOwnership.name,fileStoreId:o.ProofOfOwnership.fileStoreId,documentType:"OWNERSHIPPROOF",tenantId:null==e?void 0:e.tenantId}),i.push({...l,active:"false"})),"OWNERIDPROOF"===l.documentType&&l.fileStoreId!==t.owners.documents.ProofOfIdentity.fileStoreId&&(i.push({fileName:o.ProofOfIdentity.name,fileStoreId:o.ProofOfIdentity.fileStoreId,documentType:"OWNERIDPROOF",tenantId:null==e?void 0:e.tenantId}),i.push({...l,active:"false"})))}),i})(null===(n=e)||void 0===n?void 0:n.Licenses[0],t):o.Licenses[0].tradeLicenseDetail.applicationDocuments?o.Licenses[0].tradeLicenseDetail.applicationDocuments:be(t),o}(F?U.data:k.data,N);B.mutate(e,{onSuccess:D})}catch(e){}},[k.isSuccess,U.isSuccess]);const K=function(){try{const{Licenses:e=[]}=k.data||U.data||B.data,t=e&&e[0]||{},l=W.find(e=>e.code===t.tenantId);return nt({...t},l,I).then(e=>Digit.Utils.pdf.generate(e)),Promise.resolve()}catch(e){return Promise.reject(e)}};return!P&&(F?!Y&&(U.isIdle||U.isLoading):k.isIdle||k.isLoading)?n.createElement(t.Loader,null):!(0==(null==k?void 0:k.isSuccess)&&0==(null==k?void 0:k.isIdle)||0==(null==U?void 0:U.isSuccess)&&0==(null==U?void 0:U.isIdle))||Y||P?B.isLoading||B.isIdle?n.createElement(t.Loader,null):n.createElement(t.Card,null,n.createElement(ot,{t:I,data:B.data,isSuccess:B.isSuccess,isLoading:B.isIdle||B.isLoading}),B.isSuccess&&n.createElement(t.CardText,null,I(Y?"TL_FILE_TRADE_RESPONSE_DIRECT_REN":"TL_FILE_TRADE_RESPONSE")),!B.isSuccess&&n.createElement(t.CardText,null,I("TL_FILE_TRADE_FAILED_RESPONSE")),!F&&B.isSuccess&&n.createElement(t.SubmitBar,{label:I("TL_DOWNLOAD_ACK_FORM"),onSubmit:K}),B.isSuccess&&F&&n.createElement(t.LinkButton,{label:n.createElement("div",{className:"response-download-button"},n.createElement("span",null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#a82227"},n.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),n.createElement("span",{className:"download-button"},I("TL_DOWNLOAD_ACK_FORM"))),onClick:K}),"PENDINGPAYMENT"===(null==B||null===(A=B.data)||void 0===A||null===(b=A.Licenses[0])||void 0===b?void 0:b.status)&&n.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+B.data.Licenses[0].businessService+"/"+B.data.Licenses[0].applicationNumber,state:{tenantId:B.data.Licenses[0].tenantId}}},n.createElement(t.SubmitBar,{label:I("COMMON_MAKE_PAYMENT")})),n.createElement(o.Link,{to:"/digit-ui/citizen"},n.createElement(t.LinkButton,{label:I("CORE_COMMON_GO_TO_HOME")}))):n.createElement(t.Card,null,n.createElement(ot,{t:I,data:k.data||U.data,isSuccess:k.isSuccess||U.isSuccess,isLoading:(null==k?void 0:k.isLoading)||(null==U?void 0:U.isLoading)}),n.createElement(t.CardText,null,I("TL_FILE_TRADE_FAILED_RESPONSE")),n.createElement(o.Link,{to:"/digit-ui/citizen"},n.createElement(t.LinkButton,{label:I("CORE_COMMON_GO_TO_HOME")})))},TradeLicenseList:on,TLMyApplications:e=>{var l;let{view:r}=e;const{t:a}=i.useTranslation(),{mobileNumber:u,tenantId:d}=(null===(l=Digit.UserService.getUser())||void 0===l?void 0:l.info)||{},{isLoading:s,data:c,...v}="bills"===r?Digit.Hooks.tl.useFetchBill({params:{businessService:"TL",tenantId:d,mobileNumber:u},config:{enabled:"bills"===r}}):Digit.Hooks.tl.useTLSearchApplication({},{enabled:"bills"!==r},a);return s?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,n.createElement(t.Header,null,""+a("TL_MY_APPLICATIONS_HEADER")),null==c?void 0:c.map(e=>{var l,i,r,u,d,s,v,p,m;return n.createElement("div",null,n.createElement(t.Card,null,null===(l=Object.keys(e))||void 0===l||null===(i=l.filter(t=>"raw"!==t&&null!==e[t]))||void 0===i?void 0:i.map(l=>n.createElement(t.KeyNote,{keyValue:a(l),note:a(e[l])})),n.createElement(o.Link,{to:"/digit-ui/citizen/tl/tradelicence/application/"+(null==e||null===(r=e.raw)||void 0===r?void 0:r.applicationNumber)+"/"+(null===(u=e.raw)||void 0===u?void 0:u.tenantId)},n.createElement(t.SubmitBar,{label:a("PENDINGPAYMENT"!=(null==e||null===(d=e.raw)||void 0===d?void 0:d.status)?"TL_VIEW_DETAILS":"TL_VIEW_DETAILS_PAY")}))," ","PENDINGPAYMENT"===(null==e||null===(s=e.raw)||void 0===s?void 0:s.status)?n.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==c||null===(v=c[0])||void 0===v||null===(p=v.raw)||void 0===p?void 0:p.businessService)+"/"+(null==e||null===(m=e.raw)||void 0===m?void 0:m.applicationNumber)}},n.createElement("div",{style:{marginTop:"10px"}},n.createElement(t.SubmitBar,{label:a("COMMON_MAKE_PAYMENT")}))):null))}))},TLOwnerDetailsEmployee:e=>{var r,a,u,d,s,c,v,p,m,E;let{config:f,onSelect:_,formData:y,setError:T,formState:g,clearErrors:S}=e;const{t:h}=i.useTranslation(),{pathname:L}=o.useLocation(),A=L.includes("/modify-application/");let b=null==y||null===(r=y.ownershipCategory)||void 0===r?void 0:r.isSameAsPropertyOwner;const[N,C]=l.useState((null==y?void 0:y.owners)||[cn()]),[D,I]=l.useState({index:-1,type:""}),O=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),[w,R]=l.useState(!1),[P,x]=l.useState((null==y?void 0:y.tradedetils1)||[]),{data:M}=Digit.Hooks.pt.usePropertyMDMS(O,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]),{data:k}=Digit.Hooks.tl.useTradeLicenseMDMS(O,"common-masters",["GenderType"]);l.useEffect(()=>{var e,t,l;null==y||null===(e=y.ownershipCategory)||void 0===e||null===(t=e.code)||void 0===t||!t.includes("INSTITUTIONAL")||1!=N.length||null==y||!y.tradedetils1||null!=N&&null!==(l=N[0])&&void 0!==l&&l.subOwnerShipCategory||C([{...N[0],subOwnerShipCategory:null==y?void 0:y.ownershipCategory}])},[N]),l.useEffect(()=>{var e,t;1!=(null==y||null===(e=y.ownershipCategory)||void 0===e?void 0:e.isSameAsPropertyOwner)&&"true"!==(null==y||null===(t=y.ownershipCategory)||void 0===t?void 0:t.isSameAsPropertyOwner)||!JSON.parse(sessionStorage.getItem("ownersFromProperty"))||je.isEqual(N,JSON.parse(sessionStorage.getItem("ownersFromProperty")))||C([...JSON.parse(sessionStorage.getItem("ownersFromProperty"))])},[y,null==y||null===(a=y.cpt)||void 0===a||null===(u=a.details)||void 0===u?void 0:u.propertyId]),l.useEffect(()=>{var e,t;"INDIVIDUAL.MULTIPLEOWNERS"==(null==y||null===(e=y.ownershipCategory)||void 0===e?void 0:e.code)&&N.length>1&&S("mulipleOwnerError"),"INDIVIDUAL.MULTIPLEOWNERS"==(null==y||null===(t=y.ownershipCategory)||void 0===t?void 0:t.code)&&1==N.length&&T("mulipleOwnerError",{type:"owner_missing",message:"TL_ERROR_MULTIPLE_OWNER"});const l=null==N?void 0:N.map(e=>e);_(null==f?void 0:f.key,l)},[N]),l.useEffect(()=>{_("tradedetils1",P)},[P]),l.useEffect(()=>{var e;window.location.href.includes("tl/new-application")&&(C([cn()]),"INDIVIDUAL.MULTIPLEOWNERS"==(null==y||null===(e=y.ownershipCategory)||void 0===e?void 0:e.code)&&T("mulipleOwnerError",{type:"owner_missing",message:"TL_ERROR_MULTIPLE_OWNER"}))},[null==y||null===(d=y.ownershipCategory)||void 0===d?void 0:d.code]);let U=window.location.href.includes("tl/renew-application-details");window.location.href.includes("tl/edit-application-details")&&(U=!0),l.useEffect(()=>{var e;if((null==y||null===(e=y.tradeUnits)||void 0===e?void 0:e.length)>0&&!U){var t;let e=!0;null==N||N.map(t=>{var l;null===(l=Object.keys(t))||void 0===l||l.map(l=>{"key"!=l&&t[l]&&(e=!1)})}),null==y||null===(t=y.tradeUnits)||void 0===t||t.map(t=>{var l;null===(l=Object.keys(t))||void 0===l||l.map(l=>{"key"!=l&&null!=t[l]&&""!=t[t]&&null!=t[t]||(e&&C([cn()]),e=!1)})})}},[null==y||null===(s=y.tradeUnits)||void 0===s||null===(c=s[0])||void 0===c||null===(v=c.tradeCategory)||void 0===v?void 0:v.code]);const B={focusIndex:D,allOwners:N,setFocusIndex:I,removeOwner:e=>{C(t=>t.filter(t=>t.key!=e.key))},formData:y,formState:g,setOwners:C,mdmsData:M,t:h,setError:T,clearErrors:S,config:f,setIsErrors:R,isErrors:w,isRenewal:U,isSameAsPropertyOwner:b,previousLicenseDetails:P,setPreviousLicenseDetails:x,genderTypeData:k};return A?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,null==N?void 0:N.map((e,t)=>n.createElement(vn,Ye({key:e.key,index:t,owner:e},B))),"INDIVIDUAL.MULTIPLEOWNERS"===(null==y||null===(p=y.ownershipCategory)||void 0===p?void 0:p.code)?n.createElement("div",null,n.createElement(t.LinkButton,{label:h("TL_NEW_OWNER_DETAILS_ADD_OWN"),onClick:()=>{const e=cn();C(t=>[...t,e])},style:{color:"#a82227",width:"fit-content"}}),n.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-24px"}},h((null===(m=g.errors)||void 0===m||null===(E=m.mulipleOwnerError)||void 0===E?void 0:E.message)||""))):null)},TLTradeDetailsEmployee:e=>{var t,r;let{config:a,onSelect:u,formData:d,setError:s,formState:c,clearErrors:v}=e;const{t:p}=i.useTranslation(),{pathname:m}=o.useLocation(),E=m.includes("/modify-application/"),[f,_]=l.useState((null==d?void 0:d.tradedetils)||[mn()]),[y,T]=l.useState((null==d?void 0:d.tradedetils1)||[]),[g,S]=l.useState([]),[h,L]=l.useState((null==d?void 0:d.owners)||[mn()]),[A,b]=l.useState({index:-1,type:""}),N=Digit.ULBService.getCurrentTenantId(),C=Digit.ULBService.getStateId(),[D,I]=l.useState(!1),[O,w]=l.useState([]),[R,P]=l.useState([]),{isLoading:x,data:M={}}=Digit.Hooks.tl.useTradeLicenseMDMS(C,"common-masters","StructureType"),{data:k={}}=Digit.Hooks.tl.useTradeLicenseMDMS(C,"egf-master",["FinancialYear"]),{data:U}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:N,filters:{}});l.useEffect(()=>{const e=null==f?void 0:f.map(e=>e);u(null==a?void 0:a.key,e)},[f]),l.useEffect(()=>{u("tradedetils1",y)},[y]),l.useEffect(()=>{L([mn()])},[null==d||null===(t=d.tradedetils)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.key]);const B={focusIndex:A,allOwners:f,setFocusIndex:b,removeOwner:e=>{L(t=>t.filter(t=>t.key!=e.key))},formData:d,formState:c,setOwners:L,t:p,setError:s,clearErrors:v,config:a,setTradedetils:_,FinaceMenu:k,setStructureSubTypeOptions:S,structureSubTypeOptions:g,Menu:M,setIsErrors:I,isErrors:D,billingSlabData:U,licenseTypeList:O,setLicenseTypeList:w,previousLicenseDetails:y,setPreviousLicenseDetails:T,licenseTypeValue:R,setLicenseTypeValue:P,menuLoading:x};return E?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,null==f?void 0:f.map((e,t)=>n.createElement(En,Ye({key:e.key,index:t,tradedetail:e},B))))},TLTradeUnitsEmployee:e=>{let{config:r,onSelect:a,formData:u,setError:d,formState:s,clearErrors:c}=e;const{t:v}=i.useTranslation(),{pathname:p}=o.useLocation(),m=p.includes("/modify-application/"),[E,f]=l.useState((null==u?void 0:u.tradeUnits)||[fn()]),[_,y]=l.useState({index:-1,type:""}),T=Digit.ULBService.getCurrentTenantId(),g=Digit.ULBService.getStateId(),[S,h]=l.useState([]),[L,A]=l.useState([]),[b,N]=l.useState([]),[C,D]=l.useState([]),[I,O]=l.useState(!1),[w,R]=l.useState((null==u?void 0:u.tradedetils1)||[]);let P=window.location.href.includes("tl/renew-application-details");window.location.href.includes("tl/renew-application-details")&&(P=!0);const x=P?"RENEWAL":"NEW",{data:M,isLoading:k}=Digit.Hooks.tl.useTradeLicenseMDMS(g,"TradeLicense","TradeUnits","[?(@.type=='TL')]"),{data:U,isLoading:B}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:T,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.tradeType&&e.applicationType===x&&"PERMANENT"===e.licenseType)});l.useEffect(()=>{const e=null==E?void 0:E.map(e=>e);a(null==r?void 0:r.key,e)},[E]),l.useEffect(()=>{a("tradedetils1",w)},[w]);const F={focusIndex:_,allUnits:E,setFocusIndex:y,removeUnit:e=>{f(t=>t.filter(t=>t.key!=e.key))},formData:u,formState:s,setUnits:f,t:v,setError:d,clearErrors:c,config:r,tradeCategoryValues:L,tradeTypeOptionsList:b,setTradeTypeOptionsList:N,tradeTypeMdmsData:S,tradeSubTypeOptionsList:C,setTradeSubTypeOptionsList:D,setTradeTypeMdmsData:h,setTradeCategoryValues:A,billingSlabTradeTypeData:U,isErrors:I,setIsErrors:O,previousLicenseDetails:w,setPreviousLicenseDetails:R,isRenewal:P,isLoading:k,isbillingSlabLoading:B,tradeMdmsData:M};return m?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,null==E?void 0:E.map((e,t)=>n.createElement(_n,Ye({key:e.key,index:t,unit:e},F))),n.createElement(t.LinkButton,{label:v("TL_ADD_TRADE_UNIT"),onClick:()=>{const e=fn();f(t=>[...t,e])},style:{color:"#a82227",width:"fit-content"}}))},TLAccessoriesEmployee:e=>{var r,a,u;let{config:d,onSelect:s,formData:c,setError:v,formState:p,clearErrors:m}=e;const{t:E}=i.useTranslation(),{pathname:f}=o.useLocation(),[_,y]=(f.includes("/modify-application/"),l.useState((null==c?void 0:c.accessories)||[yn()])),[T,g]=l.useState({index:-1,type:""}),S=Digit.ULBService.getCurrentTenantId(),[h,L]=l.useState([]),[A,b]=l.useState(!1),[N,C]=l.useState(!0),[D,I]=l.useState(""),[O,w]=l.useState(!1);let R=window.location.href.includes("renew-application-details");window.location.href.includes("edit-application-details")&&(R=!0);const{data:P}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:S,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.accessoryCategory&&"NEW"===e.applicationType&&e.uom)});l.useEffect(()=>{const e=null==_?void 0:_.map(e=>e);s(null==d?void 0:d.key,e)},[_]),l.useEffect(()=>{var e;if((null==c||null===(e=c.accessories)||void 0===e?void 0:e.length)>0&&!R){var t;let e=!0;null==_||_.map(t=>{var l;null===(l=Object.keys(t))||void 0===l||l.map(l=>{"key"!=l&&t[l]&&(e=!1)})}),null==c||null===(t=c.accessories)||void 0===t||t.map(t=>{var l;null===(l=Object.keys(t))||void 0===l||l.map(l=>{"key"!=l&&null!=t[l]&&""!=t[t]&&null!=t[t]||(c.accessories[0].count=1,e&&y(null==c?void 0:c.accessories),c.accessories[0].count="",y(null==c?void 0:c.accessories),e=!1)})})}},[null==c||null===(r=c.accessories)||void 0===r||null===(a=r[0])||void 0===a||null===(u=a.accessoryCategory)||void 0===u?void 0:u.code]);const x={focusIndex:T,allAccessoriesList:_,setFocusIndex:g,removeAccessor:e=>{y(t=>t.filter(t=>t.key!=e.key))},formData:c,formState:p,setAccessoriesList:y,t:E,setError:v,clearErrors:m,config:d,accessories:h,setIsErrors:b,isErrors:A,SetAccessories:L,accessoriesList:_,billingSlabData:P,setUomvalues:I,uomvalues:D,isRenewal:R,enableUOM:O,setenableUOM:w};return n.createElement(n.Fragment,null,null==_?void 0:_.map((e,t)=>n.createElement(Tn,Ye({key:e.key,index:t,accessor:e},x))),n.createElement(t.LinkButton,{label:""+E("TL_NEW_TRADE_DETAILS_NEW_ACCESSORIES"),onClick:()=>{const e=yn();y(t=>[...t,e])},style:{color:"#a82227",width:"fit-content"}}))},TLDocumentsEmployee:e=>{var i,r,a;let{t:u,config:d,onSelect:s,formData:c,setError:v,clearErrors:p,formState:m}=e;Digit.ULBService.getCurrentTenantId();const E=Digit.ULBService.getStateId(),[f,_]=l.useState((null==c||null===(i=c.documents)||void 0===i?void 0:i.documents)||[]),[y,T]=l.useState(null),[g,S]=l.useState((null==c?void 0:c.tradedetils1)||[]);let h="create";const{pathname:L}=o.useLocation();L.includes("/modify-application/")&&(h="update");const{isLoading:A,data:b}=Digit.Hooks.pt.usePropertyMDMS(E,"TradeLicense",["documentObj"]),N=window.location.href.includes("renew-application-details"),C=null==b||null===(r=b.TradeLicense)||void 0===r?void 0:r.documentObj,D=null==C||null===(a=C[0])||void 0===a?void 0:a.allowedDocs;let I=[];return D&&D.length>0&&(null==D||D.map(e=>{var t,l;N&&"SENDBACKTOCITIZEN"!=(null==g?void 0:g.action)||null==e||null===(t=e.applicationType)||void 0===t||!t.includes("NEW")?N&&"SENDBACKTOCITIZEN"!=(null==g?void 0:g.action)&&null!=e&&null!==(l=e.applicationType)&&void 0!==l&&l.includes("RENEWAL")&&I.push(e):I.push(e)})),l.useEffect(()=>{s(d.key,{documents:f})},[f]),A?n.createElement(t.Loader,null):n.createElement("div",null,null==I?void 0:I.map((e,t)=>n.createElement(gn,{key:t,document:e,action:h,t:u,id:"tl-doc-"+t,error:y,setError:T,setDocuments:_,documents:f,formData:c,setFormError:v,clearFormErrors:p,config:d,formState:m})),y&&n.createElement(t.Toast,{label:y,onClose:()=>T(null),error:!0}))},SearchLicenseApplication:e=>{var i;let{tenantId:a,t:u,onSubmit:d,data:s,count:c}=e;const v=Digit.SessionStorage.get("SEARCH_APPLICATION_DETAIL")?{...Digit.SessionStorage.get("SEARCH_APPLICATION_DETAIL"),offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"},{register:p,control:m,handleSubmit:E,setValue:f,getValues:_,reset:y}=r.useForm({defaultValues:v});l.useEffect(()=>{p("offset",0),p("limit",10),p("sortBy","commencementDate"),p("sortOrder","DESC")},[p]);const T=l.useCallback(e=>{0!==e.length&&(f("sortBy",e.id),f("sortOrder",e.desc?"DESC":"ASC"))},[]);function g(){f("offset",_("offset")-_("limit")),E(d)()}if(window.Digit.Utils.browser.isMobile())return n.createElement(hn,{Controller:r.Controller,register:p,control:m,t:u,reset:y,previousPage:g,handleSubmit:E,tenantId:a,data:s,onSubmit:d});const S=e=>n.createElement("span",{className:"cell-text"},e),h=l.useMemo(()=>[{Header:u("TL_COMMON_TABLE_COL_APP_NO"),accessor:"applicationNo",disableSortBy:!0,Cell:e=>{let{row:t}=e;return n.createElement("div",null,n.createElement("span",{className:"link"},n.createElement(o.Link,{to:"/digit-ui/employee/tl/application-details/"+t.original.applicationNumber},t.original.applicationNumber)))}},{Header:u("TL_COMMON_TABLE_COL_APP_DATE"),disableSortBy:!0,accessor:e=>S(e.auditDetails.createdTime?Fe(e.auditDetails.createdTime):"")},{Header:u("TL_APPLICATION_TYPE_LABEL"),disableSortBy:!0,accessor:e=>S(u("TL_LOCALIZATION_APPLICATIONTYPE_"+(null==e?void 0:e.workflowCode)))},{Header:u("TL_LICENSE_NUMBERL_LABEL"),disableSortBy:!0,accessor:e=>S(e.licenseNumber||"-")},{Header:u("TL_LICENSE_YEAR_LABEL"),disableSortBy:!0,accessor:e=>S(e.financialYear)},{Header:u("TL_COMMON_TABLE_COL_TRD_NAME"),disableSortBy:!0,accessor:e=>S(e.tradeName||"")},{Header:u("TL_LOCALIZATION_TRADE_OWNER_NAME"),accessor:e=>S(null!==e.tradeLicenseDetail.owners.additionalDetails?e.tradeLicenseDetail.owners.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}).map(e=>e.name).join(","):e.tradeLicenseDetail.owners.map(e=>e.name).join(",")||""),disableSortBy:!0},{Header:u("WF_INBOX_HEADER_CURRENT_OWNER"),accessor:e=>{var t;return S((null===(t=e.CurrentOwners[0])||void 0===t?void 0:t.currentOwner)||"")},disableSortBy:!0},{Header:u("TL_COMMON_TABLE_COL_STATUS"),accessor:e=>{var t;return S(u((null==e?void 0:e.workflowCode)&&(null==e?void 0:e.status)&&"WF_"+(null==e||null===(t=e.workflowCode)||void 0===t?void 0:t.toUpperCase())+"_"+e.status||"NA"))},disableSortBy:!0}],[]);return n.createElement(n.Fragment,null,n.createElement(t.Header,null,u("TL_SEARCH_APPLICATIONS")),n.createElement(t.SearchForm,{onSubmit:d,handleSubmit:E},n.createElement(Sn,{register:p,control:m,reset:y,tenantId:a,t:u,previousPage:g})),null!=s&&s.display?n.createElement(t.Card,{style:{marginTop:20}},null===(i=u(s.display).split("\\n"))||void 0===i?void 0:i.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e))):""!==s&&n.createElement(t.Table,{t:u,data:s,totalRecords:c,columns:h,getCellProps:e=>({style:{minWidth:e.column.Header===u("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){f("limit",Number(e.target.value)),E(d)()},currentPage:_("offset")/_("limit"),onNextPage:function(){f("offset",_("offset")+_("limit")),E(d)()},onPrevPage:g,pageSizeLimit:_("limit"),onSort:T,disableSort:!1,sortParams:[{id:_("sortBy"),desc:"DESC"===_("sortOrder")}]}))},SearchLicense:e=>{var i;let{tenantId:o,t:a,onSubmit:u,data:d,count:s}=e;const c=Digit.SessionStorage.get("SEARCH_APPLICATION_DETAIL")||{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"},{register:v,control:p,handleSubmit:m,setValue:E,getValues:f,reset:_}=r.useForm({defaultValues:c});l.useEffect(()=>{v("offset",0),v("limit",10),v("sortBy","commencementDate"),v("sortOrder","DESC"),v("status","")},[v]);const y=l.useCallback(e=>{0!==e.length&&(E("sortBy",e.id),E("sortOrder",e.desc?"DESC":"ASC"))},[]);function T(){E("offset",f("offset")-f("limit")),m(u)()}if(window.Digit.Utils.browser.isMobile())return n.createElement(An,{Controller:r.Controller,register:v,control:p,t:a,reset:_,previousPage:T,handleSubmit:m,tenantId:o,data:d,onSubmit:u});const g=e=>n.createElement("span",{className:"cell-text"},e),S=l.useMemo(()=>[{Header:a("TL_TRADE_LICENSE_LABEL"),accessor:"licenseNumber",disableSortBy:!0,Cell:e=>{let{row:t}=e;return n.createElement("div",null,n.createElement("span",{className:"link"},n.createElement("a",{href:"/digit-ui/employee/tl/application-details/"+t.original.applicationNumber},t.original.licenseNumber)))}},{Header:a("TL_LOCALIZATION_TRADE_NAME"),disableSortBy:!0,accessor:e=>g(e.tradeName||"")},{Header:a("ES_APPLICATION_SEARCH_ISSUED_DATE"),disableSortBy:!0,accessor:e=>g(e.issuedDate?Fe(e.issuedDate):"")},{Header:a("ES_APPLICATION_SEARCH_VALID_TO"),disableSortBy:!0,accessor:e=>g(e.validTo?Fe(e.validTo):"")},{Header:a("TL_HOME_SEARCH_RESULTS__LOCALITY"),disableSortBy:!0,accessor:e=>{var t;return g(a(xe(null===(t=e.tenantId)||void 0===t?void 0:t.toUpperCase(),".","_")+"_REVENUE_"+e.tradeLicenseDetail.address.locality.code)||"")}},{Header:a("TL_COMMON_TABLE_COL_STATUS"),accessor:e=>{var t;return g(a((null==e?void 0:e.workflowCode)&&(null==e?void 0:e.status)&&"WF_"+(null==e||null===(t=e.workflowCode)||void 0===t?void 0:t.toUpperCase())+"_"+e.status||"NA"))},disableSortBy:!0}],[]);return n.createElement(n.Fragment,null,n.createElement(t.Header,null,a("TL_SEARCH_LICENSE")),n.createElement(t.SearchForm,{onSubmit:u,handleSubmit:m},n.createElement(Ln,{register:v,control:p,reset:_,tenantId:o,t:a,previousPage:T})),null!=d&&d.display?n.createElement(t.Card,{style:{marginTop:20}},null===(i=a(d.display).split("\\n"))||void 0===i?void 0:i.map((e,t)=>n.createElement("p",{key:t,style:{textAlign:"center"}},e))):""!==d&&n.createElement(t.Table,{t:a,data:d,totalRecords:s,columns:S,getCellProps:e=>({style:{minWidth:e.column.Header===a("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){E("limit",Number(e.target.value)),m(u)()},currentPage:f("offset")/f("limit"),onNextPage:function(){E("offset",f("offset")+f("limit")),m(u)()},onPrevPage:T,pageSizeLimit:f("limit"),onSort:y,disableSort:!1,sortParams:[{id:f("sortBy"),desc:"DESC"===f("sortOrder")}]}))},TL_INBOX_FILTER:bn,TLInfoLabel:e=>{let{t:l}=e;return n.createElement(n.Fragment,null,n.createElement("div",{style:{width:"80%"}},n.createElement(t.CitizenInfoLabel,{info:l("CS_FILE_APPLICATION_INFO_LABEL"),text:l("TL_EDIT_INFO_CARD_INFORMATION_DETAILS_LABEL")})))},TLWFApplicationTimeline:un,TLApplicationDetails:()=>{var e,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A;const{t:b}=i.useTranslation(),{id:N}=o.useParams(),{tenantId:C}=o.useParams(),D=o.useHistory(),[I,O]=l.useState(null),{data:w}=Digit.Hooks.useStore.getInitData(),[R,P,x]=Digit.Hooks.useSessionStorage("CITIZEN_TL_MUTATION_HAPPENED",!1),{tenants:M}=w||{},k=window.Digit.Utils.browser.isMobile(),[U,B]=l.useState(!1);let F={border:"groove",background:"#FAFAFA",borderRadius:"4px",paddingInline:"10px",marginTop:"10px",marginBottom:"10px"},H={marginBottom:"10px",marginTop:"10px",color:"#505A5F"};const{isLoading:W,data:V,error:j}=Digit.Hooks.tl.useTLApplicationDetails({tenantId:C,applicationNumber:N}),{data:Y}=Digit.Hooks.pt.usePropertySearch({tenantId:C,filters:{propertyIds:null==V||null===(e=V[0])||void 0===e||null===(r=e.tradeLicenseDetail)||void 0===r||null===(a=r.additionalDetail)||void 0===a?void 0:a.propertyId}},{enabled:!(null==V||null===(u=V[0])||void 0===u||null===(d=u.tradeLicenseDetail)||void 0===d||null===(s=d.additionalDetail)||void 0===s||!s.propertyId)});l.useEffect(()=>{localStorage.setItem("TLAppSubmitEnabled","true"),P(!1)},[]);const{data:K}=Digit.Hooks.tl.useTLPaymentHistory(C,N);l.useEffect(()=>{var e,t;V&&Digit.PaymentService.fetchBill(C,{consumerCode:null===(e=V[0])||void 0===e?void 0:e.applicationNumber,businessService:null===(t=V[0])||void 0===t?void 0:t.businessService}).then(e=>{O(null==e?void 0:e.Bill[0])})},[V]);const[z,G]=l.useState(!1);l.useEffect(()=>{},[V,j]);const q=null==V||null===(c=V[0])||void 0===c?void 0:c.businessService,{isLoading:$,data:X}=Digit.Hooks.useWorkflowDetails({tenantId:null==V||null===(v=V[0])||void 0===v?void 0:v.tenantId,id:N,moduleCode:q});let Z=[];var Q;if(X&&(null==X||null===(Q=X.timeline)||void 0===Q||Q.map(e=>{var t,l;(null==e||null===(t=e.wfDocuments)||void 0===t?void 0:t.length)>0&&(null==e||null===(l=e.wfDocuments)||void 0===l||l.map(e=>{Z.push(e)}))})),W||$)return n.createElement(t.Loader,null);0===(null==V||null===(p=V.applicationDetails)||void 0===p?void 0:p.length)&&D.goBack();const J=function(){try{const e=M.find(e=>{var t;return e.code===(null===(t=V[0])||void 0===t?void 0:t.tenantId)});return nt({...V[0]},e,b).then(e=>Digit.Utils.pdf.generate(e)),G(!1),Promise.resolve()}catch(e){return Promise.reject(e)}};let ee="";var te;Y&&null!=Y&&null!==(m=Y.Properties)&&void 0!==m&&m.length&&(ee=((e,t)=>{var l,n;return(null!=e&&e.doorNo?(null==e?void 0:e.doorNo)+", ":"")+" "+(null!=e&&e.street?(null==e?void 0:e.street)+", ":"")+(null!=e&&e.landmark?(null==e?void 0:e.landmark)+", ":"")+t(null==e||null===(l=e.locality)||void 0===l?void 0:l.code)+", "+t(null==e||null===(n=e.city)||void 0===n?void 0:n.code)+","+(t(null==e?void 0:e.pincode)?""+(null==e?void 0:e.pincode):" ")})(null==Y||null===(te=Y.Properties[0])||void 0===te?void 0:te.address,b));const le=(null==K||null===(E=K.Payments)||void 0===E?void 0:E.length)>0&&"EXPIRED"!==(null==V||null===(f=V[0])||void 0===f?void 0:f.status)&&"CANCELLED"!==(null==V||null===(_=V[0])||void 0===_?void 0:_.status)&&"PENDINGPAYMENT"!==(null==V||null===(y=V[0])||void 0===y?void 0:y.status)&&"MANUALEXPIRED"!==(null==V||null===(T=V[0])||void 0===T?void 0:T.status)?[{label:b("TL_CERTIFICATE"),onClick:function(){try{return Promise.resolve(Digit.PaymentService.generatePdf(C,{Licenses:V},"tlcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(C,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[e.filestoreIds[0]],"_blank"),G(!1)})})}catch(e){return Promise.reject(e)}}},{label:b("CS_COMMON_PAYMENT_RECEIPT"),onClick:function(){try{var e;const t={filestoreIds:[null===(e=K.Payments[0])||void 0===e?void 0:e.fileStoreId]},l=null!==(null==t?void 0:t.filestoreIds[0])?Promise.resolve(Digit.PaymentService.printReciept(C,{fileStoreIds:t.filestoreIds[0]})).then(function(e){window.open(e[t.filestoreIds[0]],"_blank"),G(!1)}):Promise.resolve(Digit.PaymentService.generatePdf(C,{Payments:[K.Payments[0]]},"tradelicense-receipt")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(C,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[e.filestoreIds[0]],"_blank"),G(!1)})});return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}},{label:b("TL_APPLICATION"),onClick:J}]:[{label:b("TL_APPLICATION"),onClick:J}],ne=null!==(null==V||null===(g=V[0])||void 0===g||null===(S=g.tradeLicenseDetail)||void 0===S||null===(h=S.owners)||void 0===h?void 0:h.additionalDetails)?null==V||null===(L=V[0])||void 0===L||null===(A=L.tradeLicenseDetail)||void 0===A?void 0:A.owners.sort((e,t)=>{var l,n;return(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.ownerSequence)-(null==t||null===(n=t.additionalDetails)||void 0===n?void 0:n.ownerSequence)}):[];return n.createElement(n.Fragment,null,n.createElement("div",{className:"cardHeaderWithOptions",style:k?{}:{maxWidth:"960px"}},n.createElement(t.Header,null,b("CS_TITLE_APPLICATION_DETAILS")),n.createElement("div",{style:{display:"flex",color:"#A52A2A",alignItems:"center"}},n.createElement(t.LinkButton,{label:b("VIEW_TIMELINE"),onClick:()=>{const e=document.getElementById("timeline");e&&e.scrollIntoView({behavior:"smooth"}),B(!0)}})),n.createElement(t.MultiLink,{className:"multilinkWrapper",onHeadClick:()=>G(!z),displayOptions:z,options:le})),n.createElement(t.Card,{style:{position:"relative"}},null==V?void 0:V.map((e,l)=>{var i,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,O,w,R,P,x,M,k,U,B,W,V,j,K,z,G,q,$,X,Q,J,te,le,ie,oe;return n.createElement("div",{key:l,className:"employee-data-table"},n.createElement(t.Row,{className:"border-none",label:b("TL_COMMON_TABLE_COL_APP_NO"),text:null==e?void 0:e.applicationNumber,textStyle:{wordBreak:"break-word"}}),(null==e?void 0:e.licenseNumber)&&n.createElement(t.Row,{className:"border-none",label:b("TL_COMMON_TABLE_COL_LICENSE_NO"),text:null==e?void 0:e.licenseNumber,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_APPLICATION_CATEGORY"),text:b("ACTION_TEST_TRADE_LICENSE"),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_COMMON_TABLE_COL_STATUS"),text:b("WF_NEWTL_"+(null==e?void 0:e.status)),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_COMMON_TABLE_COL_SLA_NAME"),text:Math.round((null==e?void 0:e.SLA)/864e5)+" "+b("TL_SLA_DAYS"),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_COMMON_TABLE_COL_TRD_NAME"),text:null==e?void 0:e.tradeName,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_TRADE_GST_NO"),text:(null==e||null===(i=e.tradeLicenseDetail)||void 0===i||null===(r=i.additionalDetail)||void 0===r?void 0:r.tradeGstNo)||(null==e||null===(a=e.tradeLicenseDetail)||void 0===a||null===(u=a.additionalDetail)||void 0===u?void 0:u.gstNo)||b("CS_NA"),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_OPERATIONAL_AREA"),text:(null==e||null===(d=e.tradeLicenseDetail)||void 0===d?void 0:d.operationalArea)||b("CS_NA"),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NO_OF_EMPLOYEES"),text:(null==e||null===(s=e.tradeLicenseDetail)||void 0===s?void 0:s.noOfEmployees)||b("CS_NA"),textStyle:{wordBreak:"break-word"}}),n.createElement(t.CardSectionHeader,null,b("TL_OWNERSHIP_DETAILS_HEADER")),ne.map((l,i)=>{var o,r,a,u,d,s,c,v;return null!=e&&null!==(o=e.tradeLicenseDetail)&&void 0!==o&&o.subOwnerShipCategory.includes("INSTITUTIONAL")?n.createElement("div",{key:i,style:F},n.createElement(t.CardSectionHeader,{style:H},b("TL_PAYMENT_PAID_BY_PLACEHOLDER")+" - "+(i+1)),n.createElement(t.Row,{className:"border-none",label:""+b("TL_INSTITUTION_NAME_LABEL"),text:b(null==e||null===(r=e.tradeLicenseDetail)||void 0===r||null===(a=r.institution)||void 0===a?void 0:a.instituionName),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{label:""+b("TL_INSTITUTION_TYPE_LABEL"),text:b("TL_"+(null==e||null===(u=e.tradeLicenseDetail)||void 0===u?void 0:u.subOwnerShipCategory)),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_MOBILE_NUMBER_LABEL"),text:b(l.mobileNumber),textStyle:{whiteSpace:"pre"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_TELEPHONE_NUMBER_LABEL"),text:b((null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.institution)||void 0===s?void 0:s.contactNo)||b("CS_NA")),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_LOCALIZATION_OWNER_NAME"),text:b(l.fatherOrHusbandName||(null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.institution)||void 0===v?void 0:v.name)),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_LOCALIZATION_EMAIL_ID"),text:b(l.emailId||b("CS_NA")),textStyle:{wordBreak:"break-word"}})):n.createElement("div",{key:i,style:F},n.createElement(t.CardSectionHeader,{style:H},b("TL_PAYMENT_PAID_BY_PLACEHOLDER")+" - "+(i+1)),n.createElement(t.Row,{className:"border-none",label:""+b("TL_COMMON_TABLE_COL_OWN_NAME"),text:b(l.name),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_NEW_OWNER_DETAILS_GENDER_LABEL"),text:b(l.gender),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_MOBILE_NUMBER_LABEL"),text:b(l.mobileNumber),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_EMAIL_ID_LABEL"),text:b(l.emailId||b("CS_NA")),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_GUARDIAN_S_NAME_LABEL"),text:b(l.fatherOrHusbandName),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:""+b("TL_RELATIONSHIP_WITH_GUARDIAN_LABEL"),text:b(l.relationship),textStyle:{wordBreak:"break-word"}}))}),n.createElement(t.CardSubHeader,null,b("TL_TRADE_UNITS_HEADER")),null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.tradeUnits)||void 0===v?void 0:v.map((e,l)=>n.createElement("div",{key:l,style:F},n.createElement(t.CardSectionHeader,{style:H},b("TL_UNIT_HEADER")," ",l+1),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_DETAILS_TRADE_CAT_LABEL"),text:b("TRADELICENSE_TRADETYPE_"+(null==e?void 0:e.tradeType.split(".")[0])),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_DETAILS_TRADE_TYPE_LABEL"),text:b("TRADELICENSE_TRADETYPE_"+(null==e?void 0:e.tradeType.split(".")[1])),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_DETAILS_TRADE_SUBTYPE_LABEL"),text:b("TL_"+(null==e?void 0:e.tradeType)),textStyle:{wordBreak:"break-word"}}))),Array.isArray(null==e||null===(p=e.tradeLicenseDetail)||void 0===p?void 0:p.accessories)&&(null==e||null===(m=e.tradeLicenseDetail)||void 0===m?void 0:m.accessories.length)>0&&n.createElement(t.CardSubHeader,{style:{paddingTop:"7px"}},b("TL_NEW_TRADE_DETAILS_HEADER_ACC")),Array.isArray(null==e||null===(E=e.tradeLicenseDetail)||void 0===E?void 0:E.accessories)&&(null==e||null===(f=e.tradeLicenseDetail)||void 0===f?void 0:f.accessories.length)>0&&(null==e||null===(_=e.tradeLicenseDetail)||void 0===_||null===(y=_.accessories)||void 0===y?void 0:y.map((e,l)=>n.createElement("div",{key:l,style:F},n.createElement(t.CardSectionHeader,{style:H},b("TL_ACCESSORY_LABEL")," ",l+1),n.createElement(t.Row,{className:"border-none",label:b("TL_REVIEWACCESSORY_TYPE_LABEL"),text:b("TL_"+(null==e?void 0:e.accessoryCategory.split("-").join("_"))),textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_ACCESSORY_COUNT_LABEL"),text:null==e?void 0:e.count,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_ACCESSORY_UOM_LABEL"),text:null==e?void 0:e.uom,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_ACCESSORY_UOMVALUE_LABEL"),text:null==e?void 0:e.uomValue,textStyle:{wordBreak:"break-word"}})))),(null==Y?void 0:Y.Properties)&&(null==Y?void 0:Y.Properties.length)>0&&n.createElement("div",null,n.createElement(t.CardSubHeader,null,b("PT_DETAILS")),n.createElement(t.Row,{className:"border-none",label:b("TL_PROPERTY_ID"),text:null==Y||null===(T=Y.Properties)||void 0===T||null===(g=T[0])||void 0===g?void 0:g.propertyId,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("PT_OWNER_NAME"),text:null==Y||null===(S=Y.Properties)||void 0===S||null===(h=S[0])||void 0===h||null===(L=h.owners[0])||void 0===L?void 0:L.name,textStyle:{wordBreak:"break-word"}}),n.createElement(t.Row,{className:"border-none",label:b("PROPERTY_ADDRESS"),text:ee}),n.createElement(t.LinkButton,{style:{textAlign:"left"},label:b("TL_VIEW_PROPERTY_DETAIL"),onClick:()=>{var e,t,l,n;D.push("/digit-ui/citizen/commonpt/view-property?propertyId="+(null==Y||null===(e=Y.Properties)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.propertyId)+"&tenantId="+(null==Y||null===(l=Y.Properties)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.tenantId))}})),n.createElement(t.Row,{label:""}),!(null!=Y&&Y.Properties&&(null==Y?void 0:Y.Properties.length)>0)&&n.createElement(t.Row,{className:"border-none",label:b("TL_NEW_TRADE_ADDRESS_LABEL"),text:(null!=e&&null!==(A=e.tradeLicenseDetail)&&void 0!==A&&null!==(O=A.address)&&void 0!==O&&null!==(w=O.doorNo)&&void 0!==w&&w.trim()?(null==e||null===(R=e.tradeLicenseDetail)||void 0===R||null===(P=R.address)||void 0===P||null===(x=P.doorNo)||void 0===x?void 0:x.trim())+", ":"")+" "+(null!=e&&null!==(M=e.tradeLicenseDetail)&&void 0!==M&&null!==(k=M.address)&&void 0!==k&&null!==(U=k.street)&&void 0!==U&&U.trim()?(null==e||null===(B=e.tradeLicenseDetail)||void 0===B||null===(W=B.address)||void 0===W||null===(V=W.street)||void 0===V?void 0:V.trim())+", ":"")+b(null==e||null===(j=e.tradeLicenseDetail)||void 0===j||null===(K=j.address)||void 0===K||null===(z=K.locality)||void 0===z?void 0:z.name)+", "+b(null==e||null===(G=e.tradeLicenseDetail)||void 0===G||null===(q=G.address)||void 0===q?void 0:q.city)+" "+(null!=e&&null!==($=e.tradeLicenseDetail)&&void 0!==$&&null!==(X=$.address)&&void 0!==X&&null!==(Q=X.pincode)&&void 0!==Q&&Q.trim()?","+(null==e||null===(J=e.tradeLicenseDetail)||void 0===J||null===(te=J.address)||void 0===te||null===(le=te.pincode)||void 0===le?void 0:le.trim()):""),textStyle:{wordBreak:"break-word"}}),n.createElement(t.CardSubHeader,null,b("TL_COMMON_DOCS")),n.createElement("div",null,(null==e||null===(ie=e.tradeLicenseDetail)||void 0===ie||null===(oe=ie.applicationDocuments)||void 0===oe?void 0:oe.length)>0?n.createElement(qe,{value:{...e}}):n.createElement(t.StatusTable,null,n.createElement(t.Row,{text:b("TL_NO_DOCUMENTS_MSG")}))),(null==Z?void 0:Z.length)>0&&n.createElement("div",null,n.createElement(t.CardSubHeader,null,b("TL_TIMELINE_DOCS")),n.createElement("div",null,(null==Z?void 0:Z.length)>0?n.createElement(qe,{value:{workflowDocs:Z}}):n.createElement(t.StatusTable,null,n.createElement(t.Row,{text:b("TL_NO_DOCUMENTS_MSG")})))),n.createElement("div",{id:"timeline"},n.createElement(un,{application:e,id:N}),"CITIZENACTIONREQUIRED"===(null==e?void 0:e.status)?n.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/tl/tradelicence/edit-application/"+(null==e?void 0:e.applicationNumber)+"/"+(null==e?void 0:e.tenantId),state:{}}},n.createElement(t.SubmitBar,{label:b("COMMON_EDIT")})):null),"PENDINGPAYMENT"===(null==e?void 0:e.status)?n.createElement(o.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==e?void 0:e.businessService)+"/"+(null==e?void 0:e.applicationNumber),state:{bill:I,tenantId:C}}},n.createElement(t.SubmitBar,{label:b("COMMON_MAKE_PAYMENT")})):null)})))},TLCreateTradeLicence:e=>{var t,l,r,u,d,s,c,v,p,m,E;const f=a.useQueryClient(),_=o.useRouteMatch(),{t:y}=i.useTranslation(),{pathname:T}=o.useLocation(),g=o.useHistory();let S=[];const[h,L,A]=Digit.Hooks.useSessionStorage("TL_CREATE_TRADE",{});let b=window.location.href.includes("/renew-trade/")||window.location.href.includes("/edit-application/");const N=Digit.ULBService.getStateId();let{data:C}=Digit.Hooks.tl.useMDMS.getFormConfig(N,{});const D=(e,t,l,n,i)=>{var o,r,a,u,d,s,c,v,p;let m,E=T.split("/").pop(),{nextStep:f={}}=S.find(e=>e.route===E),{isCreateEnabled:y=!0}=S.find(e=>e.route===E);var L,A,N,C,D;"object"==typeof f&&null!=f&&((null!=h&&null!==(L=h.cptId)&&void 0!==L&&L.id||null!=h&&null!==(A=h.cpt)&&void 0!==A&&null!==(N=A.details)&&void 0!==N&&N.propertyId||b&&null!=h&&null!==(C=h.cpt)&&void 0!==C&&null!==(D=C.details)&&void 0!==D&&D.propertyId)&&f[sessionStorage.getItem("isAccessories")]&&"know-your-property"===f[sessionStorage.getItem("isAccessories")]&&(f="property-details"),!f[sessionStorage.getItem("isAccessories")]||"accessories-details"!==f[sessionStorage.getItem("isAccessories")]&&"map"!==f[sessionStorage.getItem("isAccessories")]&&"owner-ship-details"!==f[sessionStorage.getItem("isAccessories")]&&"other-trade-details"!==f[sessionStorage.getItem("isAccessories")]?!f[sessionStorage.getItem("StructureType")]||"Building-type"!==f[sessionStorage.getItem("StructureType")]&&"vehicle-type"!==f[sessionStorage.getItem("StructureType")]?!f[sessionStorage.getItem("KnowProperty")]||"search-property"!==f[sessionStorage.getItem("KnowProperty")]&&"create-property"!==f[sessionStorage.getItem("KnowProperty")]||(f="create-property"!==f[sessionStorage.getItem("KnowProperty")]||y?""+f[sessionStorage.getItem("KnowProperty")]:"map"):f=""+f[sessionStorage.getItem("StructureType")]:f=""+f[sessionStorage.getItem("isAccessories")]),"know-your-property"===f&&"MOVABLE"===(null==h||null===(o=h.TradeDetails)||void 0===o||null===(r=o.StructureType)||void 0===r?void 0:r.code)&&(f="map"),"landmark"===f&&"MOVABLE"===(null==h||null===(a=h.TradeDetails)||void 0===a||null===(u=a.StructureType)||void 0===u?void 0:u.code)&&(f="owner-ship-details"),"owner-details"===f&&"true"===sessionStorage.getItem("isSameAsPropertyOwner")&&(f="proof-of-identity"),(null!=h&&null!==(d=h.cptId)&&void 0!==d&&d.id||null!=h&&null!==(s=h.cpt)&&void 0!==s&&null!==(c=s.details)&&void 0!==c&&c.propertyId||b&&null!=h&&null!==(v=h.cpt)&&void 0!==v&&null!==(p=v.details)&&void 0!==p&&p.propertyId)&&"know-your-property"===f&&(f="property-details");let I=g.push;if(e&&(I=g.replace),l&&(f=n),null===f)return I(_.path+"/check");i&&"acknowledge-create-property"===f&&(f="map"),m=_.path+"/"+f,I(m)};function I(e,t,l,n,i){void 0===i&&(i=!1),"formData"===e?L({...t}):(L({...h,[e]:{...h[e],...t}}),"isSkip"===e&&!0===t?D(l,0,i,e,!0):D(l,0,i,e))}const O=()=>{},w=()=>{};C=C||Nn,null===(t=C)||void 0===t||t.forEach(e=>{S=S.concat(e.body.filter(e=>!e.hideInCitizen))});let R=null===(l=C)||void 0===l||null===(r=l.filter(e=>{var t;return null==e||null===(t=e.body)||void 0===t?void 0:t.some(e=>"CPTCreateProperty"===e.component)}))||void 0===r?void 0:r[0],P=null==R||null===(u=R.body)||void 0===u||null===(d=u.filter(e=>"CPTCreateProperty"===(null==e?void 0:e.component)))||void 0===d||null===(s=d[0])||void 0===s?void 0:s.isSkipEnabled;sessionStorage.setItem("skipenabled",P),S.indexRoute="info";const x=null===(c=Digit)||void 0===c||null===(v=c.ComponentRegistryService)||void 0===v?void 0:v.getComponent("TLCheckPage"),M=null===(p=Digit)||void 0===p||null===(m=p.ComponentRegistryService)||void 0===m?void 0:m.getComponent("TLAcknowledgement");return n.createElement(o.Switch,null,null===(E=S)||void 0===E?void 0:E.map((e,t)=>{const{component:l,texts:i,inputs:r,key:a,isSkipEnabled:u}=e,d="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return n.createElement(o.Route,{path:_.path+"/"+e.route,key:t},n.createElement(d,{config:{texts:i,inputs:r,key:a,isSkipEnabled:u},onSelect:I,onSkip:O,t:y,formData:h,onAdd:w,userType:"citizen"}))}),n.createElement(o.Route,{path:_.path+"/check"},n.createElement(x,{onSubmit:function(){try{return sessionStorage.setItem("isCreateEnabled","true"),g.push(_.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:h})),n.createElement(o.Route,{path:_.path+"/acknowledgement"},n.createElement(M,{data:h,onSuccess:()=>{sessionStorage.removeItem("CurrentFinancialYear"),f.invalidateQueries("TL_CREATE_TRADE")},onUpdateSuccess:()=>{sessionStorage.removeItem("CurrentFinancialYear"),A(),f.invalidateQueries("TL_CREATE_TRADE")}})),n.createElement(o.Route,null,n.createElement(o.Redirect,{to:_.path+"/"+S.indexRoute})))},TLEditTrade:e=>{var r,u,d,s,c,v,p,m,E,f,_;const y=a.useQueryClient(),T=o.useRouteMatch(),{t:g}=i.useTranslation(),{id:S,tenantId:h}=o.useParams(),{pathname:L}=o.useLocation(),A=o.useHistory();let b=[],N={};const[C,D,I]=Digit.Hooks.useSessionStorage("TL_EDIT_TRADE",{}),O=Digit.ULBService.getStateId();let{data:w,isLoading:R}=Digit.Hooks.tl.useMDMS.getFormConfig(O,{}),P={};S&&(P.applicationNumber=S),h&&(P.tenantId=h);const{isLoading:x,data:M}=Digit.Hooks.tl.useTradeLicenseSearch({filters:P},{filters:P}),k=null==M||null===(r=M.Licenses[0])||void 0===r?void 0:r.businessService,{data:U}=Digit.Hooks.useWorkflowDetails({tenantId:null==M||null===(u=M.Licenses[0])||void 0===u?void 0:u.tenantId,id:null==M||null===(d=M.Licenses)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.applicationNumber,moduleCode:k},{enabled:!(null==M||null===(c=M.Licenses)||void 0===c||!c[0])}),B=window.location.href.includes("edit");JSON.parse(sessionStorage.getItem("tl-trade"));let F=window.location.href.includes("/renew-trade/")||window.location.href.includes("/edit-application/");l.useEffect(()=>{var e,t;if(N=(null==M?void 0:M.Licenses)&&M.Licenses[0]&&M.Licenses[0],M&&N){N=null==M?void 0:M.Licenses[0],B&&(N.isEditProperty=!0),sessionStorage.setItem("tradeInitialObject",JSON.stringify({...N}));let e=((e,t,l)=>{var n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne,ie,oe,re,ae,ue,de,se,ce,ve;const pe=(e,t)=>{let l=[];return e&&(null==e||e.map(e=>{l.push({accessory:{code:""+e.accessoryCategory,i18nKey:t("TRADELICENSE_ACCESSORIESCATEGORY_"+e.accessoryCategory.replaceAll("-","_"))},accessorycount:e.count,unit:""+e.uom,uom:""+e.uomValue,id:e.id})})),l};var me,Ee,fe,_e,ye,Te;return e.TradeDetails={BuildingType:{code:""+(null==e||null===(n=e.tradeLicenseDetail)||void 0===n?void 0:n.structureType),i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+(null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.structureType.replaceAll(".","_"))},VehicleType:{code:""+(null==e||null===(o=e.tradeLicenseDetail)||void 0===o?void 0:o.structureType),i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+(null===(r=e.tradeLicenseDetail)||void 0===r?void 0:r.structureType.replaceAll(".","_"))},CommencementDate:Oe(null==e?void 0:e.commencementDate),StructureType:{code:""+(null===(a=e.tradeLicenseDetail)||void 0===a?void 0:a.structureType.split(".")[0]),i18nKey:null!==(u=e.tradeLicenseDetail)&&void 0!==u&&u.structureType.includes("IMMOVABLE")?"TL_COMMON_YES":"TL_COMMON_NO"},TradeName:null==e?void 0:e.tradeName,TradeGSTNumber:(null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.additionalDetail)||void 0===s?void 0:s.tradeGstNo)||(null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.additionalDetail)||void 0===v?void 0:v.gstNo)||"",OperationalSqFtArea:(null==e||null===(p=e.tradeLicenseDetail)||void 0===p?void 0:p.operationalArea)||"",NumberOfEmployees:(null==e||null===(m=e.tradeLicenseDetail)||void 0===m?void 0:m.noOfEmployees)||"",accessories:pe(null==e||null===(E=e.tradeLicenseDetail)||void 0===E?void 0:E.accessories,t),isAccessories:pe(null==e||null===(f=e.tradeLicenseDetail)||void 0===f?void 0:f.accessories,t).length>0?{code:"ACCESSORY",i18nKey:"TL_COMMON_YES"}:{code:"NONACCESSORY",i18nKey:"TL_COMMON_NO"},units:(e=>{let t=[];return e&&(null==e||e.map(e=>{t.push({tradecategory:{i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]},tradesubtype:{i18nKey:"TL_"+e.tradeType,code:""+e.tradeType},tradetype:{i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[1],code:""+e.tradeType.split(".")[1]},unit:e.uom,uom:e.uomValue,id:e.id})})),t})(null==e||null===(_=e.tradeLicenseDetail)||void 0===_?void 0:_.tradeUnits)},e.address={},e.address.geoLocation=null!=e&&null!==(y=e.tradeLicenseDetail)&&void 0!==y&&null!==(T=y.address)&&void 0!==T&&null!==(g=T.geoLocation)&&void 0!==g&&g.latitude&&null!=e&&null!==(S=e.tradeLicenseDetail)&&void 0!==S&&null!==(h=S.address)&&void 0!==h&&null!==(L=h.geoLocation)&&void 0!==L&&L.longitude?{latitude:null==e||null===(me=e.tradeLicenseDetail)||void 0===me||null===(Ee=me.address)||void 0===Ee||null===(fe=Ee.geoLocation)||void 0===fe?void 0:fe.latitude,longitude:null==e||null===(_e=e.tradeLicenseDetail)||void 0===_e||null===(ye=_e.address)||void 0===ye||null===(Te=ye.geoLocation)||void 0===Te?void 0:Te.longitude}:{},e.address.doorNo=null==e||null===(A=e.tradeLicenseDetail)||void 0===A||null===(b=A.address)||void 0===b?void 0:b.doorNo,e.address.street=null==e||null===(N=e.tradeLicenseDetail)||void 0===N||null===(C=N.address)||void 0===C?void 0:C.street,e.address.landmark=null==e||null===(D=e.tradeLicenseDetail)||void 0===D||null===(I=D.address)||void 0===I?void 0:I.landmark,e.address.pincode=null==e||null===(O=e.tradeLicenseDetail)||void 0===O||null===(w=O.address)||void 0===w?void 0:w.pincode,e.address.city={code:null==e||null===(R=e.tradeLicenseDetail)||void 0===R||null===(P=R.address)||void 0===P?void 0:P.tenantId,i18nKey:"TENANT_TENANTS_"+xe(null==e||null===(x=e.tradeLicenseDetail)||void 0===x||null===(M=x.address)||void 0===M?void 0:M.tenantId,".","_").toUpperCase()},e.address.locality=null==e||null===(k=e.tradeLicenseDetail)||void 0===k||null===(U=k.address)||void 0===U?void 0:U.locality,e.address.locality.i18nkey=(null==e?void 0:e.tenantId.replace(".","_").toUpperCase())+"_REVENUE_"+(null==e||null===(B=e.address)||void 0===B||null===(F=B.locality)||void 0===F?void 0:F.code),e.address.locality.doorNo=null==e||null===(H=e.tradeLicenseDetail)||void 0===H||null===(W=H.address)||void 0===W?void 0:W.doorNo,e.address.locality.landmark=null==e||null===(V=e.tradeLicenseDetail)||void 0===V||null===(j=V.address)||void 0===j?void 0:j.landmark,e.owners={documents:(e=>{let t=[];return e&&(null==e||e.map(e=>{e.documentType.includes("OWNERPHOTO")?t.OwnerPhotoProof=e:e.documentType.includes("OWNERIDPROOF")?t.ProofOfIdentity=e:e.documentType.includes("OWNERSHIPPROOF")&&(t.ProofOfOwnership=e)})),t})(null==e||null===(Y=e.tradeLicenseDetail)||void 0===Y?void 0:Y.applicationDocuments),owners:null!=e&&null!==(K=e.tradeLicenseDetail)&&void 0!==K&&null!==(z=K.institution)&&void 0!==z&&z.id?((t,l)=>{let n=[];return t&&(null==t||t.map(t=>{var i,o;n.push({name:l.name,mobilenumber:t.mobileNumber,permanentAddress:t.permanentAddress,altContactNumber:l.contactNo,designation:l.designation,institutionName:l.instituionName,tenantId:e.tenantId,emailId:t.emailId,subOwnerShipCategory:{code:""+(null==e||null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.subOwnerShipCategory),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+xe(null==e||null===(o=e.tradeLicenseDetail)||void 0===o?void 0:o.subOwnerShipCategory,".","_")},id:t.id,uuid:t.uuid})})),n})(null==e||null===(G=e.tradeLicenseDetail)||void 0===G?void 0:G.owners,null==e||null===(q=e.tradeLicenseDetail)||void 0===q?void 0:q.institution):(e=>{let t=[];return e&&(null==e||e.map(e=>{var l,n;t.push({gender:{code:e.gender,name:null!=e&&null!==(l=e.gender)&&void 0!==l&&l.includes("FEMALE")?"Female":"Male",value:null!=e&&null!==(n=e.gender)&&void 0!==n&&n.includes("FEMALE")?"Female":"Male",i18nKey:e.gender?"TL_GENDER_"+e.gender:"CS_NA"},isprimaryowner:!1,name:e.name,mobilenumber:e.mobileNumber,permanentAddress:e.permanentAddress,id:e.id,uuid:e.uuid,relationship:{code:null==e?void 0:e.relationship,i18nKey:e.relationship?"COMMON_RELATION_"+e.relationship:"CS_NA"},fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName})})),t})(null==e||null===($=e.tradeLicenseDetail)||void 0===$?void 0:$.owners),permanentAddress:null==e||null===(X=e.tradeLicenseDetail)||void 0===X?void 0:X.owners[0].permanentAddress,isCorrespondenceAddress:!1},e.ownershipCategory={code:""+(null==e||null===(Z=e.tradeLicenseDetail)||void 0===Z?void 0:Z.subOwnerShipCategory),i18nKey:"PT_OWNERSHIP_"+(null!=e&&null!==(Q=e.tradeLicenseDetail)&&void 0!==Q&&null!==(J=Q.subOwnerShipCategory)&&void 0!==J&&J.includes("INSTITUTIONAL")?null!=e&&null!==(ee=e.tradeLicenseDetail)&&void 0!==ee&&null!==(te=ee.subOwnerShipCategory)&&void 0!==te&&te.includes("GOVERNMENT")?"OTHERGOVERNMENTINSTITUITION":"OTHERSPRIVATEINSTITUITION":null==e||null===(le=e.tradeLicenseDetail)||void 0===le||null===(ne=le.subOwnerShipCategory)||void 0===ne?void 0:ne.split(".")[1]),value:(null==e||null===(ie=e.tradeLicenseDetail)||void 0===ie?void 0:ie.subOwnerShipCategory)+(null!=e&&null!==(oe=e.tradeLicenseDetail)&&void 0!==oe&&null!==(re=oe.subOwnerShipCategory)&&void 0!==re&&re.includes("INSTITUTIONAL")?null!=e&&null!==(ae=e.tradeLicenseDetail)&&void 0!==ae&&null!==(ue=ae.subOwnerShipCategory)&&void 0!==ue&&ue.includes("GOVERNMENT")?".OTHERGOVERNMENTINSTITUITION":".OTHERSPRIVATEINSTITUITION":""),isSameAsPropertyOwner:"null"===(null==e||null===(de=e.tradeLicenseDetail)||void 0===de||null===(se=de.additionalDetail)||void 0===se?void 0:se.isSameAsPropertyOwner)?null:null==e||null===(ce=e.tradeLicenseDetail)||void 0===ce||null===(ve=ce.additionalDetail)||void 0===ve?void 0:ve.isSameAsPropertyOwner},e.workflowObject=l,e})(N,g,U);D({...C,...e})}const l=null===(e=Digit)||void 0===e||null===(t=e.ComponentRegistryService)||void 0===t?void 0:t.getComponent("TLCitizenEditFormDataLoad");l&&l({data:M,setParams:D,params:C,licenseNo:S,tenantId:h})},[M]);const H=(e,t,l,n,i)=>{var o,r,a,u,d,s,c,v,p,m;let E,f=L.split("/").pop(),{nextStep:_={}}=(f.charAt(f.length-1),b.find(e=>e.route===f)),{isCreateEnabled:y=!0}=b.find(e=>e.route===f);var g,S,h,N,D;"object"==typeof _&&null!=_&&((null!=C&&null!==(g=C.cptId)&&void 0!==g&&g.id||null!=C&&null!==(S=C.cpt)&&void 0!==S&&null!==(h=S.details)&&void 0!==h&&h.propertyId||F&&null!=C&&null!==(N=C.tradeLicenseDetail)&&void 0!==N&&null!==(D=N.additionalDetail)&&void 0!==D&&D.propertyId)&&_[sessionStorage.getItem("isAccessories")]&&"know-your-property"===_[sessionStorage.getItem("isAccessories")]&&(_="property-details"),!_[sessionStorage.getItem("isAccessories")]||"accessories-details"!==_[sessionStorage.getItem("isAccessories")]&&"map"!==_[sessionStorage.getItem("isAccessories")]&&"owner-ship-details"!==_[sessionStorage.getItem("isAccessories")]&&"other-trade-details"!==_[sessionStorage.getItem("isAccessories")]?!_[sessionStorage.getItem("StructureType")]||"Building-type"!==_[sessionStorage.getItem("StructureType")]&&"vehicle-type"!==_[sessionStorage.getItem("StructureType")]?!_[sessionStorage.getItem("KnowProperty")]||"search-property"!==_[sessionStorage.getItem("KnowProperty")]&&"create-property"!==_[sessionStorage.getItem("KnowProperty")]||(_="create-property"!==_[sessionStorage.getItem("KnowProperty")]||y?""+_[sessionStorage.getItem("KnowProperty")]:"map"):_=""+_[sessionStorage.getItem("StructureType")]:_=""+_[sessionStorage.getItem("isAccessories")]),"know-your-property"===_&&"MOVABLE"===(null==C||null===(o=C.TradeDetails)||void 0===o||null===(r=o.StructureType)||void 0===r?void 0:r.code)&&(_="map"),"landmark"===_&&"MOVABLE"===(null==C||null===(a=C.TradeDetails)||void 0===a||null===(u=a.StructureType)||void 0===u?void 0:u.code)&&(_="owner-ship-details"),(null!=C&&null!==(d=C.cptId)&&void 0!==d&&d.id||null!=C&&null!==(s=C.cpt)&&void 0!==s&&null!==(c=s.details)&&void 0!==c&&c.propertyId||F&&null!=C&&null!==(v=C.tradeLicenseDetail)&&void 0!==v&&null!==(p=v.additionalDetail)&&void 0!==p&&p.propertyId)&&"know-your-property"===_&&(_="property-details"),"owner-details"!==_||!0!==(null==C||null===(m=C.ownershipCategory)||void 0===m?void 0:m.isSameAsPropertyOwner)&&"true"!==sessionStorage.getItem("isSameAsPropertyOwner")||(_="proof-of-identity");let I=A.push;if(e&&(I=A.replace),l&&(_=n),null===_)return I(Cn(T.path,T.params)+"/check");i&&"acknowledge-create-property"===_&&(_="map"),E=Cn(T.path,T.params)+"/"+_,I(E)};function W(e,t,l,n,i){void 0===i&&(i=!1),D({...C,[e]:{...C[e],...t}}),"isSkip"===e&&!0===t?H(l,0,i,e,!0):H(l,0,i,e)}const V=()=>{},j=()=>{};if(w=w||Nn,null===(v=w)||void 0===v||v.forEach(e=>{b=b.concat(e.body.filter(e=>!e.hideInCitizen))}),b.indexRoute="check",x||R)return n.createElement(t.Loader,null);const Y=null===(p=Digit)||void 0===p||null===(m=p.ComponentRegistryService)||void 0===m?void 0:m.getComponent("TLCheckPage"),K=null===(E=Digit)||void 0===E||null===(f=E.ComponentRegistryService)||void 0===f?void 0:f.getComponent("TLAcknowledgement");return n.createElement(o.Switch,null,null===(_=b)||void 0===_?void 0:_.map((e,t)=>{const{component:l,texts:i,inputs:r,key:a,isSkipEnabled:u}=e,d="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return n.createElement(o.Route,{path:Cn(T.path,T.params)+"/"+e.route,key:t},n.createElement(d,{config:{texts:i,inputs:r,key:a,isSkipEnabled:u},onSelect:W,onSkip:V,t:g,formData:C,onAdd:j}))}),n.createElement(o.Route,{path:Cn(T.path,T.params)+"/check"},n.createElement(Y,{onSubmit:function(){try{return A.push(Cn(T.path,T.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:C})),n.createElement(o.Route,{path:Cn(T.path,T.params)+"/acknowledgement"},n.createElement(K,{data:C,onSuccess:()=>{y.invalidateQueries("TL_EDIT_TRADE")}})),n.createElement(o.Route,null,n.createElement(o.Redirect,{to:Cn(T.path,T.params)+"/"+b.indexRoute})))},TLList:()=>{var e,o,r;const{t:a}=i.useTranslation(),u=Digit.UserService.getUser(),d=(null===(e=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===e?void 0:e.code)||(null==u||null===(o=u.info)||void 0===o?void 0:o.permanentCity),{LicenseNumber:s,tenantId:c}=Digit.Hooks.useQueryParams();let v={};s&&(v.licenseNumbers=s),s&&(v.tenantId=c),s||(v.mobileNumber=null==u||null===(r=u.info)||void 0===r?void 0:r.mobileNumber),v={...v,RenewalPending:!0,tenantId:d||c,status:"APPROVED,CANCELLED,EXPIRED,MANUALEXPIRED"};const{isLoading:p,data:m}=Digit.Hooks.tl.useTradeLicenseSearch({filters:v},{});if(l.useEffect(()=>{localStorage.setItem("TLAppSubmitEnabled","true")},[]),p)return n.createElement(t.Loader,null);let{Licenses:E}=m||{},f=E;return n.createElement(n.Fragment,null,n.createElement(t.Card,null,n.createElement(t.CardHeader,null,""+a("TL_RENEW_TRADE_HEADER")),n.createElement(t.CardText,null,""+a("TL_RENEW_TRADE_TEXT"))),n.createElement("div",null,(null==f?void 0:f.length)>0&&(null==f?void 0:f.map((e,t)=>n.createElement("div",{key:t},n.createElement(on,{application:e})))),!(null!=f&&f.length)>0&&n.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},a("PT_NO_APPLICATION_FOUND_MSG"))))},TLRenewTrade:e=>{var r,u,d,s,c,v,p;const m=a.useQueryClient(),E=o.useRouteMatch(),{t:f}=i.useTranslation(),{id:_,tenantId:y}=o.useParams(),{pathname:T}=o.useLocation(),g=o.useHistory();let S=[],h={};const[L,A,b]=Digit.Hooks.useSessionStorage("TL_RENEW_TRADE",{});let N={};_&&(N.licenseNumbers=_),y&&(N.tenantId=y);const{isLoading:C,data:D}=Digit.Hooks.tl.useTradeLicenseSearch({filters:N},{filters:N}),I=window.location.href.includes("edit");JSON.parse(sessionStorage.getItem("tl-trade"));let O=window.location.href.includes("/renew-trade/")||window.location.href.includes("/edit-application/");const w=Digit.ULBService.getStateId();let{data:R,isLoading:P}=Digit.Hooks.tl.useMDMS.getFormConfig(w,{});l.useEffect(()=>{if(h=(null==D?void 0:D.Licenses)&&D.Licenses[0]&&D.Licenses[0],D&&h){h=null==D?void 0:D.Licenses[0],I&&(h.isEditProperty=!0),sessionStorage.setItem("tradeInitialObject",JSON.stringify({...h}));let l=((e,t)=>{var l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne,ie,oe,re,ae,ue,de,se,ce;const ve=(e,t)=>{let l=[];return e&&(null==e||e.map(e=>{l.push({accessory:{code:""+e.accessoryCategory,i18nKey:t("TRADELICENSE_ACCESSORIESCATEGORY_"+e.accessoryCategory.replaceAll("-","_"))},accessorycount:e.count,unit:""+e.uom,uom:""+e.uomValue,id:e.id})})),l};var pe,me,Ee,fe,_e,ye;return e.TradeDetails={BuildingType:{code:""+(null==e||null===(l=e.tradeLicenseDetail)||void 0===l?void 0:l.structureType),i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+(null===(n=e.tradeLicenseDetail)||void 0===n?void 0:n.structureType.replaceAll(".","_"))},VehicleType:{code:""+(null==e||null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.structureType),i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+(null===(o=e.tradeLicenseDetail)||void 0===o?void 0:o.structureType.replaceAll(".","_"))},CommencementDate:Oe(null==e?void 0:e.commencementDate),StructureType:{code:""+(null===(r=e.tradeLicenseDetail)||void 0===r?void 0:r.structureType.split(".")[0]),i18nKey:null!==(a=e.tradeLicenseDetail)&&void 0!==a&&a.structureType.includes("IMMOVABLE")?"TL_COMMON_YES":"TL_COMMON_NO"},TradeName:null==e?void 0:e.tradeName,TradeGSTNumber:(null==e||null===(u=e.tradeLicenseDetail)||void 0===u||null===(d=u.additionalDetail)||void 0===d?void 0:d.tradeGstNo)||(null==e||null===(s=e.tradeLicenseDetail)||void 0===s||null===(c=s.additionalDetail)||void 0===c?void 0:c.gstNo)||"",OperationalSqFtArea:(null==e||null===(v=e.tradeLicenseDetail)||void 0===v?void 0:v.operationalArea)||"",NumberOfEmployees:(null==e||null===(p=e.tradeLicenseDetail)||void 0===p?void 0:p.noOfEmployees)||"",accessories:ve(null==e||null===(m=e.tradeLicenseDetail)||void 0===m?void 0:m.accessories,t),isAccessories:ve(null==e||null===(E=e.tradeLicenseDetail)||void 0===E?void 0:E.accessories,t).length>0?{code:"ACCESSORY",i18nKey:"TL_COMMON_YES"}:{code:"NONACCESSORY",i18nKey:"TL_COMMON_NO"},units:(e=>{let t=[];return e&&(null==e||e.map(e=>{t.push({tradecategory:{i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]},tradesubtype:{i18nKey:"TL_"+e.tradeType,code:""+e.tradeType},tradetype:{i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[1],code:""+e.tradeType.split(".")[1]},unit:e.uom,uom:e.uomValue,id:e.id})})),t})(null==e||null===(f=e.tradeLicenseDetail)||void 0===f?void 0:f.tradeUnits)},e.address={},e.address.geoLocation=null!=e&&null!==(_=e.tradeLicenseDetail)&&void 0!==_&&null!==(y=_.address)&&void 0!==y&&null!==(T=y.geoLocation)&&void 0!==T&&T.latitude&&null!=e&&null!==(g=e.tradeLicenseDetail)&&void 0!==g&&null!==(S=g.address)&&void 0!==S&&null!==(h=S.geoLocation)&&void 0!==h&&h.longitude?{latitude:null==e||null===(pe=e.tradeLicenseDetail)||void 0===pe||null===(me=pe.address)||void 0===me||null===(Ee=me.geoLocation)||void 0===Ee?void 0:Ee.latitude,longitude:null==e||null===(fe=e.tradeLicenseDetail)||void 0===fe||null===(_e=fe.address)||void 0===_e||null===(ye=_e.geoLocation)||void 0===ye?void 0:ye.longitude}:{},e.address.doorNo=null==e||null===(L=e.tradeLicenseDetail)||void 0===L||null===(A=L.address)||void 0===A?void 0:A.doorNo,e.address.street=null==e||null===(b=e.tradeLicenseDetail)||void 0===b||null===(N=b.address)||void 0===N?void 0:N.street,e.address.landmark=null==e||null===(C=e.tradeLicenseDetail)||void 0===C||null===(D=C.address)||void 0===D?void 0:D.landmark,e.address.pincode=null==e||null===(I=e.tradeLicenseDetail)||void 0===I||null===(O=I.address)||void 0===O?void 0:O.pincode,e.address.city={code:null==e||null===(w=e.tradeLicenseDetail)||void 0===w||null===(R=w.address)||void 0===R?void 0:R.tenantId,i18nKey:"TENANT_TENANTS_"+xe(null==e||null===(P=e.tradeLicenseDetail)||void 0===P||null===(x=P.address)||void 0===x?void 0:x.tenantId,".","_").toUpperCase()},e.address.locality=null==e||null===(M=e.tradeLicenseDetail)||void 0===M||null===(k=M.address)||void 0===k?void 0:k.locality,e.address.locality.i18nkey=(null==e?void 0:e.tenantId.replace(".","_").toUpperCase())+"_REVENUE_"+(null==e||null===(U=e.address)||void 0===U||null===(B=U.locality)||void 0===B?void 0:B.code),e.address.locality.doorNo=null==e||null===(F=e.tradeLicenseDetail)||void 0===F||null===(H=F.address)||void 0===H?void 0:H.doorNo,e.address.locality.landmark=null==e||null===(W=e.tradeLicenseDetail)||void 0===W||null===(V=W.address)||void 0===V?void 0:V.landmark,e.owners={documents:In(null==e||null===(j=e.tradeLicenseDetail)||void 0===j?void 0:j.applicationDocuments),owners:null!=e&&null!==(Y=e.tradeLicenseDetail)&&void 0!==Y&&null!==(K=Y.institution)&&void 0!==K&&K.id?((t,l)=>{let n=[];return t&&(null==t||t.map(t=>{var i,o;n.push({name:l.name,mobilenumber:t.mobileNumber,permanentAddress:t.permanentAddress,altContactNumber:l.contactNo,designation:l.designation,institutionName:l.instituionName,tenantId:e.tenantId,emailId:t.emailId,subOwnerShipCategory:{code:""+(null==e||null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.subOwnerShipCategory),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+xe(null==e||null===(o=e.tradeLicenseDetail)||void 0===o?void 0:o.subOwnerShipCategory,".","_")},id:t.id,uuid:t.uuid})})),n})(null==e||null===(z=e.tradeLicenseDetail)||void 0===z?void 0:z.owners,null==e||null===(G=e.tradeLicenseDetail)||void 0===G?void 0:G.institution):(e=>{let t=[];return e&&(null==e||e.map(e=>{var l,n;t.push({gender:{code:""+e.gender,name:e.gender?null!=e&&null!==(l=e.gender)&&void 0!==l&&l.includes("FEMALE")?"Female":"Male":"",value:e.gender?null!=e&&null!==(n=e.gender)&&void 0!==n&&n.includes("FEMALE")?"Female":"Male":"",i18nKey:e.gender?"TL_GENDER_"+e.gender:""},isprimaryowner:!1,name:e.name,mobilenumber:e.mobileNumber,permanentAddress:e.permanentAddress,fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,relationship:{code:null==e?void 0:e.relationship,i18nKey:e.relationship?"COMMON_RELATION_"+e.relationship:"CS_NA"},id:e.id,uuid:e.uuid})})),t})(null==e||null===(q=e.tradeLicenseDetail)||void 0===q?void 0:q.owners),permanentAddress:null==e||null===($=e.tradeLicenseDetail)||void 0===$?void 0:$.owners[0].permanentAddress,isCorrespondenceAddress:!1},e.ownershipCategory={code:""+(null==e||null===(X=e.tradeLicenseDetail)||void 0===X?void 0:X.subOwnerShipCategory),i18nKey:"PT_OWNERSHIP_"+(null!=e&&null!==(Z=e.tradeLicenseDetail)&&void 0!==Z&&null!==(Q=Z.subOwnerShipCategory)&&void 0!==Q&&Q.includes("INSTITUTIONAL")?null!=e&&null!==(J=e.tradeLicenseDetail)&&void 0!==J&&null!==(ee=J.subOwnerShipCategory)&&void 0!==ee&&ee.includes("GOVERNMENT")?"OTHERGOVERNMENTINSTITUITION":"OTHERSPRIVATEINSTITUITION":null==e||null===(te=e.tradeLicenseDetail)||void 0===te||null===(le=te.subOwnerShipCategory)||void 0===le?void 0:le.split(".")[1]),value:(null==e||null===(ne=e.tradeLicenseDetail)||void 0===ne?void 0:ne.subOwnerShipCategory)+(null!=e&&null!==(ie=e.tradeLicenseDetail)&&void 0!==ie&&null!==(oe=ie.subOwnerShipCategory)&&void 0!==oe&&oe.includes("INSTITUTIONAL")?null!=e&&null!==(re=e.tradeLicenseDetail)&&void 0!==re&&null!==(ae=re.subOwnerShipCategory)&&void 0!==ae&&ae.includes("GOVERNMENT")?".OTHERGOVERNMENTINSTITUITION":".OTHERSPRIVATEINSTITUITION":""),isSameAsPropertyOwner:"null"===(null==e||null===(ue=e.tradeLicenseDetail)||void 0===ue||null===(de=ue.additionalDetail)||void 0===de?void 0:de.isSameAsPropertyOwner)?null:null==e||null===(se=e.tradeLicenseDetail)||void 0===se||null===(ce=se.additionalDetail)||void 0===ce?void 0:ce.isSameAsPropertyOwner},e})(h,f);var e,t;window.location.href.includes("property-details")&&(l={...L,owners:{...null==L?void 0:L.owners,documents:In(null===(e=h)||void 0===e||null===(t=e.tradeLicenseDetail)||void 0===t?void 0:t.applicationDocuments)}}),A({...L,...l})}},[null==D||null===(r=D.Licenses[0])||void 0===r?void 0:r.applicationNumber]);const x=(e,t,l,n,i)=>{var o,r,a,u,d,s,c,v,p,m;let f,_=T.split("/").pop(),{nextStep:y={}}=(_.charAt(_.length-1),S.find(e=>e.route===_)),{isCreateEnabled:h=!0}=S.find(e=>e.route===_);var A,b,N,C,D,I,w,R,P;"object"==typeof y&&null!=y&&((null!=L&&null!==(A=L.cptId)&&void 0!==A&&A.id||null!=L&&null!==(b=L.cpt)&&void 0!==b&&null!==(N=b.details)&&void 0!==N&&N.propertyId||O&&null!=L&&null!==(C=L.tradeLicenseDetail)&&void 0!==C&&null!==(D=C.additionalDetail)&&void 0!==D&&D.propertyId)&&y[sessionStorage.getItem("isAccessories")]&&"know-your-property"===y[sessionStorage.getItem("isAccessories")]&&(y="property-details"),!y[sessionStorage.getItem("isAccessories")]||"accessories-details"!==y[sessionStorage.getItem("isAccessories")]&&"map"!==y[sessionStorage.getItem("isAccessories")]&&"owner-ship-details"!==y[sessionStorage.getItem("isAccessories")]&&"other-trade-details"!==y[sessionStorage.getItem("isAccessories")]?!y[sessionStorage.getItem("StructureType")]||"Building-type"!==y[sessionStorage.getItem("StructureType")]&&"vehicle-type"!==y[sessionStorage.getItem("StructureType")]?!y[sessionStorage.getItem("KnowProperty")]||"search-property"!==y[sessionStorage.getItem("KnowProperty")]&&"create-property"!==y[sessionStorage.getItem("KnowProperty")]||(y="create-property"!==y[sessionStorage.getItem("KnowProperty")]||h?""+y[sessionStorage.getItem("KnowProperty")]:"map"):y=""+y[sessionStorage.getItem("StructureType")]:y=!O||null!=L&&null!==(I=L.tradeLicenseDetail)&&void 0!==I&&null!==(w=I.additionalDetail)&&void 0!==w&&w.propertyId||"MOVABLE"!==(null==L||null===(R=L.TradeDetails)||void 0===R||null===(P=R.StructureType)||void 0===P?void 0:P.code)?""+y[sessionStorage.getItem("isAccessories")]:"map"),"know-your-property"===y&&"MOVABLE"===(null==L||null===(o=L.TradeDetails)||void 0===o||null===(r=o.StructureType)||void 0===r?void 0:r.code)&&(y="map"),"landmark"===y&&"MOVABLE"===(null==L||null===(a=L.TradeDetails)||void 0===a||null===(u=a.StructureType)||void 0===u?void 0:u.code)&&(y="owner-ship-details"),(null!=L&&null!==(d=L.cptId)&&void 0!==d&&d.id||null!=L&&null!==(s=L.cpt)&&void 0!==s&&null!==(c=s.details)&&void 0!==c&&c.propertyId||O&&null!=L&&null!==(v=L.tradeLicenseDetail)&&void 0!==v&&null!==(p=v.additionalDetail)&&void 0!==p&&p.propertyId)&&"know-your-property"===y&&(y="property-details"),"owner-details"!==y||!0!==(null==L||null===(m=L.ownershipCategory)||void 0===m?void 0:m.isSameAsPropertyOwner)&&"true"!==sessionStorage.getItem("isSameAsPropertyOwner")||(y="proof-of-identity");let x=g.push;if(e&&(x=g.replace),l&&(y=n),null===y)return x(Dn(E.path,E.params)+"/check");i&&"acknowledge-create-property"===y&&(y="map"),f=Dn(E.path,E.params)+"/"+y,x(f)};function M(e,t,l,n,i){void 0===i&&(i=!1),A({...L,[e]:{...L[e],...t}}),"isSkip"===e&&!0===t?x(l,0,i,e,!0):x(l,0,i,e)}const k=()=>{},U=()=>{};if(R=R||Nn,null===(u=R)||void 0===u||u.forEach(e=>{S=S.concat(e.body.filter(e=>!e.hideInCitizen))}),S.indexRoute="check",C||P)return n.createElement(t.Loader,null);const B=null===(d=Digit)||void 0===d||null===(s=d.ComponentRegistryService)||void 0===s?void 0:s.getComponent("TLCheckPage"),F=null===(c=Digit)||void 0===c||null===(v=c.ComponentRegistryService)||void 0===v?void 0:v.getComponent("TLAcknowledgement");return n.createElement(o.Switch,null,null===(p=S)||void 0===p?void 0:p.map((e,t)=>{const{component:l,texts:i,inputs:r,key:a,isSkipEnabled:u}=e,d="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return n.createElement(o.Route,{path:Dn(E.path,E.params)+"/"+e.route,key:t},n.createElement(d,{config:{texts:i,inputs:r,key:a,isSkipEnabled:u},onSelect:M,onSkip:k,t:f,formData:L,onAdd:U}))}),n.createElement(o.Route,{path:Dn(E.path,E.params)+"/check"},n.createElement(B,{onSubmit:function(){try{return g.push(Dn(E.path,E.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:L})),n.createElement(o.Route,{path:Dn(E.path,E.params)+"/acknowledgement"},n.createElement(F,{data:L,onSuccess:()=>{m.invalidateQueries("TL_RENEW_TRADE")}})),n.createElement(o.Route,null,n.createElement(o.Redirect,{to:Dn(E.path,E.params)+"/"+S.indexRoute})))},TLSearchTradeComponent:()=>{const{t:e}=i.useTranslation(),{path:t}=o.useRouteMatch(),r=l.useMemo(()=>null==On?void 0:On.map(t=>{const l={};for(const n in t.texts)l[n]=e(t.texts[n]);return{...t,texts:l}},[On]));return n.createElement(o.Switch,null,n.createElement(o.Route,{path:""+t,exact:!0},n.createElement(Ti,{config:r[0]})))},TLNewApplication:()=>{var e;let r=Digit.ULBService.getCurrentTenantId()||Digit.ULBService.getCitizenCurrentTenant();const a=Digit.Hooks.tl.useTenants(),{t:u}=i.useTranslation(),[d,s]=l.useState(!1),c=o.useHistory(),[v,p]=l.useState(new URLSearchParams(o.useLocation().search).get("propertyId")),m=window.location.href.includes("/employee/tl/new-application"),E=window.location.href.includes("/employee/tl/renew-application-details")||window.location.href.includes("/employee/tl/edit-application-details"),[f,_,y]=Digit.Hooks.useSessionStorage("PT_CREATE_EMP_TRADE_NEW_FORM",{}),[T,g,S]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[h,L,A]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),[b,N]=l.useState(null),[C,D]=l.useState(null),I=Digit.ULBService.getStateId();let{data:O}=Digit.Hooks.tl.useMDMS.getFormConfig(I,{});const{data:w}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:v},tenantId:r},{filters:{propertyIds:v},tenantId:r,enabled:!!v});console.log("pd123",w),l.useEffect(()=>{var e,t;!v&&p(null==f||null===(e=f.cpt)||void 0===e||null===(t=e.details)||void 0===t?void 0:t.propertyId)},[null==f?void 0:f.cpt]),l.useEffect(()=>{"true"===sessionStorage.getItem("isCreateEnabledEmployee")?(sessionStorage.removeItem("isCreateEnabledEmployee"),c.replace("/employee")):sessionStorage.removeItem("isCreateEnabledEmployee")}),l.useEffect(()=>{g(!1),A()},[]);let R=[];return O=O||Nn,null===(e=O)||void 0===e||e.map(e=>{"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT"!==e.head&&e.head&&R.push(e)}),console.log(R,"configs"),n.createElement("div",null,n.createElement("div",{style:{marginLeft:"15px"}},n.createElement(t.Header,null,u("ES_TITLE_NEW_TRADE_LICESE_APPLICATION"))),n.createElement(t.FormComposer,{heading:u(""),isDisabled:!d,label:u("ES_COMMON_APPLICATION_SUBMIT"),config:R.map(e=>{return{...e,body:e.body.filter(e=>!e.hideInEmployee),head:(t=e.head,"ES_NEW_APPLICATION_LOCATION_DETAILS"===t?"TL_CHECK_ADDRESS":"ES_NEW_APPLICATION_OWNERSHIP_DETAILS"===t?"TL_OWNERSHIP_DETAILS_HEADER":"TL_NEW_APPLICATION_PROPERTY"===t&&"MOVABLE"===(null==f||null===(l=f.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureType)||void 0===i?void 0:i.code)&&(m||E)?"":t)};var t,l,n,i}),fieldStyle:{marginRight:0},onSubmit:e=>{var t,l,n,i,o,d,s,v,p,m,E,f,_,T,g,S,h,L,A,b,C,I,O,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne;let ie=sessionStorage.getItem("isSameAsPropertyOwner");var oe;if(null!=e&&null!==(t=e.cpt)&&void 0!==t&&t.id&&(null==e||null===(oe=e.cpt)||void 0===oe||!oe.details||!w))return N({key:"error"}),void D(u("ERR_INVALID_PROPERTY_ID"));if(!(null==a?void 0:a.find(t=>{var l;return null===(l=t.pincode)||void 0===l?void 0:l.find(t=>{var l;return t.toString()===(null==e||null===(l=e.address)||void 0===l?void 0:l.pincode)})}))&&null!=e&&null!==(l=e.address)&&void 0!==l&&l.pincode)return N({key:"error"}),void D(u("TL_COMMON_PINCODE_NOT_SERVICABLE"));let re=[];(null==e||null===(n=e.accessories)||void 0===n?void 0:n.length)>0&&(null==e||e.accessories.map(e=>{var t,l,n;null!=e&&null!==(t=e.accessoryCategory)&&void 0!==t&&t.code&&re.push({accessoryCategory:(null==e||null===(l=e.accessoryCategory)||void 0===l?void 0:l.code)||null,uom:(null==e||null===(n=e.accessoryCategory)||void 0===n?void 0:n.uom)||null,count:Number(null==e?void 0:e.count)||null,uomValue:Number(null==e?void 0:e.uomValue)||null})}));let ae=[];(null==e||null===(i=e.tradeUnits)||void 0===i?void 0:i.length)>0&&(null==e||e.tradeUnits.map(e=>{var t,l;ae.push({tradeType:(null==e||null===(t=e.tradeSubType)||void 0===t?void 0:t.code)||null,uom:(null==e||null===(l=e.tradeSubType)||void 0===l?void 0:l.uom)||null,uomValue:Number(null==e?void 0:e.uomValue)||null})}));let ue={};var de,se,ce,ve,pe,me,Ee,fe,_e,ye,Te,ge,Se,he,Le,Ae,be,Ne,Ce,De,Ie,Oe,we,Re,Pe,xe,Me,ke,Be;if(null!=e&&null!==(o=e.cpt)&&void 0!==o&&null!==(d=o.details)&&void 0!==d&&d.address)ue.city=(null==e||null===(de=e.cpt)||void 0===de||null===(se=de.details)||void 0===se||null===(ce=se.address)||void 0===ce?void 0:ce.city)||null,ue.locality={code:(null==e||null===(ve=e.cpt)||void 0===ve||null===(pe=ve.details)||void 0===pe||null===(me=pe.address)||void 0===me||null===(Ee=me.locality)||void 0===Ee?void 0:Ee.code)||null},(null!=e&&null!==(fe=e.cpt)&&void 0!==fe&&null!==(_e=fe.details)&&void 0!==_e&&null!==(ye=_e.address)&&void 0!==ye&&ye.doorNo||null!=e&&null!==(Te=e.address)&&void 0!==Te&&Te.doorNo)&&(ue.doorNo=(null==e||null===(ge=e.cpt)||void 0===ge||null===(Se=ge.details)||void 0===Se||null===(he=Se.address)||void 0===he?void 0:he.doorNo)||(null==e||null===(Le=e.address)||void 0===Le?void 0:Le.doorNo)||null),(null!=e&&null!==(Ae=e.cpt)&&void 0!==Ae&&null!==(be=Ae.details)&&void 0!==be&&null!==(Ne=be.address)&&void 0!==Ne&&Ne.street||null!=e&&null!==(Ce=e.address)&&void 0!==Ce&&Ce.street)&&(ue.street=(null==e||null===(De=e.cpt)||void 0===De||null===(Ie=De.details)||void 0===Ie||null===(Oe=Ie.address)||void 0===Oe?void 0:Oe.street)||(null==e||null===(we=e.address)||void 0===we?void 0:we.street)||null),null!=e&&null!==(Re=e.cpt)&&void 0!==Re&&null!==(Pe=Re.details)&&void 0!==Pe&&null!==(xe=Pe.address)&&void 0!==xe&&xe.pincode&&(ue.pincode=null==e||null===(Me=e.cpt)||void 0===Me||null===(ke=Me.details)||void 0===ke||null===(Be=ke.address)||void 0===Be?void 0:Be.pincode);else if(null!=e&&e.address){var Fe,He,We,Ve,je,Ye,Ke,ze,Ge,qe;ue.city=(null==e||null===(Fe=e.address)||void 0===Fe||null===(He=Fe.city)||void 0===He?void 0:He.code)||null,ue.locality={code:(null==e||null===(We=e.address)||void 0===We||null===(Ve=We.locality)||void 0===Ve?void 0:Ve.code)||null},null!=e&&null!==(je=e.address)&&void 0!==je&&je.doorNo&&(ue.doorNo=(null==e||null===(Ye=e.address)||void 0===Ye?void 0:Ye.doorNo)||null),null!=e&&null!==(Ke=e.address)&&void 0!==Ke&&Ke.street&&(ue.street=(null==e||null===(ze=e.address)||void 0===ze?void 0:ze.street)||null),null!=e&&null!==(Ge=e.address)&&void 0!==Ge&&Ge.pincode&&(ue.pincode=null==e||null===(qe=e.address)||void 0===qe?void 0:qe.pincode)}let $e=[];(null==e||null===(s=e.owners)||void 0===s?void 0:s.length)>0&&(null==e||e.owners.map((e,t)=>{var l,n,i,o,r,a;let u={};u.dob=null!=e&&e.dob?Ue(null==e?void 0:e.dob):null,u.additionalDetails={ownerSequence:t,ownerName:null==e?void 0:e.name},null!=e&&e.fatherOrHusbandName&&(u.fatherOrHusbandName=null==e?void 0:e.fatherOrHusbandName),null!=e&&null!==(l=e.gender)&&void 0!==l&&l.code&&(u.gender=null==e||null===(n=e.gender)||void 0===n?void 0:n.code),null!=e&&e.mobileNumber&&(u.mobileNumber=Number(null==e?void 0:e.mobileNumber)),null!=e&&e.name&&(u.name=null!=e&&null!==(i=e.ownershipCategory)&&void 0!==i&&i.code.includes("INSTITUTIONAL")?"":null==e?void 0:e.name),null!=e&&e.permanentAddress&&(u.permanentAddress=null==e?void 0:e.permanentAddress),u.permanentAddress=u.permanentAddress?u.permanentAddress:null,null!=e&&e.relationship&&(u.relationship=null==e||null===(o=e.relationship)||void 0===o?void 0:o.code),null!=e&&e.emailId&&(u.emailId=null==e?void 0:e.emailId),null!=e&&null!==(r=e.ownerType)&&void 0!==r&&r.code&&(u.ownerType=null==e||null===(a=e.ownerType)||void 0===a?void 0:a.code),$e.push(u)}));let Xe=(null==e||null===(v=e.documents)||void 0===v?void 0:v.documents)||[],Ze=Ue(null==e||null===(p=e.tradedetils)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.commencementDate),Qe=null==e||null===(E=e.tradedetils)||void 0===E||null===(f=E[0])||void 0===f||null===(_=f.financialYear)||void 0===_?void 0:_.code,Je=(null==e||null===(T=e.tradedetils)||void 0===T||null===(g=T[0])||void 0===g?void 0:g.gstNo)||"",et=Number(null==e||null===(S=e.tradedetils)||void 0===S||null===(h=S[0])||void 0===h?void 0:h.noOfEmployees)||"",tt=Number(null==e||null===(L=e.tradedetils)||void 0===L||null===(A=L[0])||void 0===A?void 0:A.operationalArea)||"",lt=(null==e||null===(b=e.tradedetils)||void 0===b||null===(C=b[0])||void 0===C||null===(I=C.structureSubType)||void 0===I?void 0:I.code)||"",nt=(null==e||null===(O=e.tradedetils)||void 0===O||null===(R=O[0])||void 0===R?void 0:R.tradeName)||"",it=(null==e||null===(P=e.ownershipCategory)||void 0===P?void 0:P.code)||"",ot={action:"INITIATE",applicationType:"NEW",workflowCode:"NewTL",commencementDate:Ze,financialYear:Qe,licenseType:(null==e||null===(x=e.tradedetils)||void 0===x||null===(M=x[0])||void 0===M||null===(k=M.licenseType)||void 0===k?void 0:k.code)||"PERMANENT",tenantId:r,tradeName:nt,wfDocuments:[],tradeLicenseDetail:{channel:"COUNTER",additionalDetail:{}}};var rt,at;Je&&(ot.tradeLicenseDetail.additionalDetail.gstNo=Je),et&&(ot.tradeLicenseDetail.noOfEmployees=et),tt&&(ot.tradeLicenseDetail.operationalArea=tt),(null==re?void 0:re.length)>0&&(ot.tradeLicenseDetail.accessories=re),(null==ae?void 0:ae.length)>0&&(ot.tradeLicenseDetail.tradeUnits=ae),(null==$e?void 0:$e.length)>0&&(ot.tradeLicenseDetail.owners=$e),ue&&(ot.tradeLicenseDetail.address=ue),lt&&(ot.tradeLicenseDetail.structureType=lt),null!=e&&null!==(U=e.ownershipCategory)&&void 0!==U&&U.code.includes("INDIVIDUAL")&&(ot.tradeLicenseDetail.subOwnerShipCategory=null==e||null===(B=e.ownershipCategory)||void 0===B?void 0:B.code),it&&(ot.tradeLicenseDetail.subOwnerShipCategory=it),null!=e&&null!==(F=e.owners)&&void 0!==F&&F.length&&it.includes("INSTITUTIONAL")&&(ot.tradeLicenseDetail={...ot.tradeLicenseDetail,institution:{}}),null!=e&&null!==(H=e.owners)&&void 0!==H&&H.length&&it.includes("INSTITUTIONAL")&&(ot.tradeLicenseDetail.institution.designation=null==e||null===(W=e.owners)||void 0===W||null===(V=W[0])||void 0===V?void 0:V.designation),null!=e&&null!==(j=e.owners)&&void 0!==j&&j.length&&it.includes("INSTITUTIONAL")&&(ot.tradeLicenseDetail.institution.instituionName=null==e||null===(Y=e.owners)||void 0===Y||null===(K=Y[0])||void 0===K?void 0:K.instituionName),null!=e&&null!==(z=e.owners)&&void 0!==z&&z.length&&it.includes("INSTITUTIONAL")&&(ot.tradeLicenseDetail.institution.name=null==e||null===(G=e.owners)||void 0===G||null===(q=G[0])||void 0===q?void 0:q.name),null!=e&&null!==($=e.owners)&&void 0!==$&&$.length&&it.includes("INSTITUTIONAL")&&(ot.tradeLicenseDetail.institution.contactNo=null==e||null===(X=e.owners)||void 0===X||null===(Z=X[0])||void 0===Z?void 0:Z.altContactNumber),null!=e&&e.cpt&&(ot.tradeLicenseDetail.additionalDetail.propertyId=null==e||null===(rt=e.cpt)||void 0===rt||null===(at=rt.details)||void 0===at?void 0:at.propertyId,ot.tradeLicenseDetail.additionalDetail.isSameAsPropertyOwner=ie),ot=null!==(Q=Digit)&&void 0!==Q&&null!==(J=Q.Customizations)&&void 0!==J&&null!==(ee=J.TL)&&void 0!==ee&&ee.customiseCreateFormData?null===(te=Digit)||void 0===te||null===(le=te.Customizations)||void 0===le||null===(ne=le.TL)||void 0===ne?void 0:ne.customiseCreateFormData(e,ot):ot,Digit.TLService.create({Licenses:[ot]},r).then((e,t)=>{var l;if((null==e||null===(l=e.Licenses)||void 0===l?void 0:l.length)>0){var n;let t=null==e||null===(n=e.Licenses)||void 0===n?void 0:n[0];t.tradeLicenseDetail.applicationDocuments=Xe,t.wfDocuments=[],t.action="APPLY",Digit.TLService.update({Licenses:[t]},r).then(e=>{var t;(null==e||null===(t=e.Licenses)||void 0===t?void 0:t.length)>0&&(sessionStorage.setItem("isCreateEnabledEmployee","true"),c.replace("/digit-ui/employee/tl/response",{data:null==e?void 0:e.Licenses}),y())}).catch(e=>{var t,l,n;N({key:"error"}),D((null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.Errors[0])||void 0===n?void 0:n.message)||null)})}}).catch(e=>{var t,l,n;N({key:"error"}),D((null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.Errors[0])||void 0===n?void 0:n.message)||null)})},defaultValues:f,onFormValueChange:(e,t,l)=>{var n;if(je.isEqual(f,t)||_({...f,...t}),function(e){var t;if(null!=e&&e.owners)return null==e||null===(t=e.owners)||void 0===t||t.map(e=>{var t,l;if(null==e||!e.name||!e.mobileNumber||null==e||!e.fatherOrHusbandName||null==e||null===(t=e.relationship)||void 0===t||!t.code||null!=e&&null!==(l=e.gender)&&void 0!==l&&l.code||null!=e&&e.additionalDetails)return!0}),!1}(t))s(!1);else if(Object.keys(l.errors).length>0&&1==Object.keys(l.errors).length&&l.errors.owners&&0==Object.entries(l.errors.owners.type).filter(e=>"required"===(null==e?void 0:e[1].type)).length){var i,o;("INDIVIDUAL.SINGLEOWNER"===(null==t||null===(i=t.ownershipCategory)||void 0===i?void 0:i.code)&&1==(null==t?void 0:t.owners.length)||"INDIVIDUAL.MULTIPLEOWNERS"===(null==t||null===(o=t.ownershipCategory)||void 0===o?void 0:o.code)&&(null==t?void 0:t.owners.length)>1)&&s(!0)}else s(!Object.keys(l.errors).length);if("INDIVIDUAL.MULTIPLEOWNERS"===(null==t||null===(n=t.ownershipCategory)||void 0===n?void 0:n.code))for(let e=0;e<(null==t?void 0:t.owners.length);e++){var r,a,u,d,c;0!==(null==t||null===(r=t.owners[e])||void 0===r?void 0:r.gender.length)&&0!==(null==t||null===(a=t.owners[e])||void 0===a?void 0:a.fatherOrHusbandName.length)&&0!==(null==t||null===(u=t.owners[e])||void 0===u?void 0:u.name.length)&&0!==(null==t||null===(d=t.owners[e])||void 0===d?void 0:d.mobileNumber.length)&&0!==(null==t||null===(c=t.owners[e])||void 0===c?void 0:c.relationship.length)||s(!1)}},breaklineStyle:{border:"0px"}}),b&&n.createElement(t.Toast,{isDleteBtn:!0,error:"error"===(null==b?void 0:b.key),label:C,onClose:()=>{N(null),D(null)}}))},TLReNewApplication:e=>{var r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B,F,H,W,V,j,Y,K,z,G,q,$,X,Z,Q,J,ee,te,le,ne,ie,oe;const re=El(null==e||null===(r=e.location)||void 0===r||null===(a=r.state)||void 0===a?void 0:a.applicationData)||{},ae=(Digit.ULBService.getStateId(),o.useLocation()),ue=new URLSearchParams(ae.search).get("propertyId")||(null==ae||null===(u=ae.state)||void 0===u||null===(d=u.applicationDetails.find(e=>"PT_DETAILS"===(null==e?void 0:e.title)))||void 0===d||null===(s=d.values.find(e=>"TL_PROPERTY_ID"===(null==e?void 0:e.title)))||void 0===s?void 0:s.value),de=Digit.ULBService.getCurrentTenantId(),{t:se}=i.useTranslation(),[ce,ve]=l.useState(!1);let pe,{data:me,isLoading:Ee}=Digit.Hooks.tl.useMDMS.getFormConfig(null==de||null===(c=de.split)||void 0===c||null===(v=c.call(de,"."))||void 0===v?void 0:v[0],{});if("IMMOVABLE"===(null==re||null===(p=re.tradeLicenseDetail)||void 0===p?void 0:p.structureType.split(".")[0])){const{data:e}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:ue},tenantId:de});pe=e}const fe=o.useHistory(),[_e,ye,Te]=Digit.Hooks.useSessionStorage("store-data",null),[ge,Se,he]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[Le,Ae,be]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),Ne=window.location.href.includes("/employee/tl/new-application"),Ce=window.location.href.includes("/employee/tl/renew-application-details")||window.location.href.includes("/employee/tl/edit-application-details"),[De,Ie]=l.useState(null),[Oe,we]=l.useState(null);let Re=El(null==re?void 0:re.financialYear),Me=null==re||null===(m=re.financialYear)||void 0===m?void 0:m.split("-")[1],ke="20"+Number(Me)+"-"+(Number(Me)+1);window.location.href.includes("edit-application-details")&&(ke=Re);const Be=[{tradeName:null==re?void 0:re.tradeName,financialYear:{code:ke,i18nKey:"FY"+ke,id:null===(E=ke)||void 0===E?void 0:E.split("-")[0]},licenseType:"",structureType:{i18nKey:se("COMMON_MASTERS_STRUCTURETYPE_"+xe(null==re||null===(f=re.tradeLicenseDetail)||void 0===f||null===(_=f.structureType)||void 0===_||null===(y=_.split(".")[0])||void 0===y?void 0:y.toUpperCase(),".","_")),code:null==re||null===(T=re.tradeLicenseDetail)||void 0===T||null===(g=T.structureType)||void 0===g?void 0:g.split(".")[0]},structureSubType:{i18nKey:"COMMON_MASTERS_STRUCTURETYPE_"+xe(null==re||null===(S=re.tradeLicenseDetail)||void 0===S||null===(h=S.structureType)||void 0===h?void 0:h.toUpperCase(),".","_"),code:null==re||null===(L=re.tradeLicenseDetail)||void 0===L?void 0:L.structureType},commencementDate:Pe(null==re?void 0:re.commencementDate),gstNo:(null==re||null===(A=re.tradeLicenseDetail)||void 0===A||null===(b=A.additionalDetail)||void 0===b?void 0:b.gstNo)||(null==re||null===(N=re.tradeLicenseDetail)||void 0===N||null===(C=N.additionalDetail)||void 0===C?void 0:C.tradeGstNo)||"",operationalArea:(null==re||null===(D=re.tradeLicenseDetail)||void 0===D?void 0:D.operationalArea)||"",noOfEmployees:(null==re||null===(I=re.tradeLicenseDetail)||void 0===I?void 0:I.noOfEmployees)||"",key:Date.now()}];var Fe,He,We,Ve,je,Ye,Ke,ze,Ge,qe;(null==re||null===(O=re.tradeLicenseDetail)||void 0===O||null===(w=O.tradeUnits)||void 0===w?void 0:w.length)>0&&(null==re||null===(Fe=re.tradeLicenseDetail)||void 0===Fe||null===(He=Fe.tradeUnits)||void 0===He||He.forEach((e,t)=>{let l=El(null==e?void 0:e.tradeType),n=El(null==e?void 0:e.tradeType),i=El(null==e?void 0:e.tradeType),o="string"==typeof(null==e?void 0:e.tradeType)&&xe(i,"-","_");"string"==typeof(null==e?void 0:e.tradeType)&&(e.tradeCategory={code:null==l?void 0:l.split(".")[0],i18nKey:"TRADELICENSE_TRADETYPE_"+(null==l?void 0:l.split(".")[0])}),"string"==typeof(null==e?void 0:e.tradeType)&&(e.tradeSubType={code:i,i18nKey:se("TRADELICENSE_TRADETYPE_"+xe(o,".","_")),uom:(null==e?void 0:e.uom)||""}),"string"==typeof(null==e?void 0:e.tradeType)&&(e.tradeType={code:null==n?void 0:n.split(".")[1],i18nKey:"TRADELICENSE_TRADETYPE_"+(null==n?void 0:n.split(".")[1])}),e.uom=null==e?void 0:e.uom,e.uomValue=null==e?void 0:e.uomValue,e.key=Date.now()+20*(t+1)})),(null==re||null===(R=re.tradeLicenseDetail)||void 0===R||null===(P=R.accessories)||void 0===P?void 0:P.length)>0&&(null==re||null===(We=re.tradeLicenseDetail)||void 0===We||null===(Ve=We.accessories)||void 0===Ve||Ve.forEach((e,t)=>{let l=El(null==e?void 0:e.accessoryCategory);El(null==e?void 0:e.accessoryCategory),"string"==typeof(null==e?void 0:e.accessoryCategory)&&(e.accessoryCategory={code:l,i18nKey:"TRADELICENSE_ACCESSORIESCATEGORY_"+xe(l,"-","_"),uom:null==e?void 0:e.uom}),e.uom=null==e?void 0:e.uom,e.uomValue=(null==e?void 0:e.uomValue)||"",e.count=(null==e?void 0:e.count)||"",e.key=Date.now()+20*(t+1)})),null!=re&&re.tradeLicenseDetail&&(re.tradeLicenseDetail.address=(null==re||null===(je=re.tradeLicenseDetail)||void 0===je?void 0:je.address)||{},re.tradeLicenseDetail.address.locality={...null==re||null===(Ye=re.tradeLicenseDetail)||void 0===Ye||null===(Ke=Ye.address)||void 0===Ke?void 0:Ke.locality,i18nkey:null==re||null===(ze=re.tradeLicenseDetail)||void 0===ze||null===(Ge=ze.address)||void 0===Ge||null===(qe=Ge.locality)||void 0===qe?void 0:qe.name});const $e={code:null==re||null===(x=re.tradeLicenseDetail)||void 0===x?void 0:x.subOwnerShipCategory,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_INDIVIDUAL_"+(null!=re&&null!==(M=re.tradeLicenseDetail)&&void 0!==M&&null!==(k=M.subOwnerShipCategory)&&void 0!==k&&k.includes("INSTITUTIONAL")?null!=re&&null!==(U=re.tradeLicenseDetail)&&void 0!==U&&null!==(B=U.subOwnerShipCategory)&&void 0!==B&&B.includes("GOVERNMENT")?"OTHERGOVERNMENTINSTITUITION":"OTHERSPRIVATEINSTITUITION":null==re||null===(F=re.tradeLicenseDetail)||void 0===F||null===(H=F.subOwnerShipCategory)||void 0===H?void 0:H.split(".")[1]),isSameAsPropertyOwner:"null"===(null==re||null===(W=re.tradeLicenseDetail)||void 0===W||null===(V=W.additionalDetail)||void 0===V?void 0:V.isSameAsPropertyOwner)?null:null==re||null===(j=re.tradeLicenseDetail)||void 0===j||null===(Y=j.additionalDetail)||void 0===Y?void 0:Y.isSameAsPropertyOwner};var Xe,Ze;(null==re||null===(K=re.tradeLicenseDetail)||void 0===K||null===(z=K.owners)||void 0===z?void 0:z.length)>0&&(null==re||null===(Xe=re.tradeLicenseDetail)||void 0===Xe||null===(Ze=Xe.owners)||void 0===Ze||Ze.forEach((e,t)=>{"string"==typeof(null==e?void 0:e.gender)&&(e.gender={code:null==e?void 0:e.gender,i18nKey:"TL_GENDER_"+(null==e?void 0:e.gender)}),"string"==typeof(null==e?void 0:e.relationship)&&(e.relationship={code:null==e?void 0:e.relationship,i18nKey:"COMMON_RELATION_"+(null==e?void 0:e.relationship)}),"string"==typeof(null==e?void 0:e.ownerType)&&(e.ownerType={code:null==e?void 0:e.ownerType,i18nKey:null==e?void 0:e.ownerType}),null!=e&&e.fatherOrHusbandName||(e.fatherOrHusbandName=""),null!=e&&e.emailId||(e.emailId=""),null!=e&&e.permanentAddress||(e.permanentAddress=""),e.key=Date.now()+20*(t+1)}));let Qe=El(null==e||null===(G=e.location)||void 0===G||null===(q=G.state)||void 0===q?void 0:q.applicationData)||{};Qe.checkForRenewal=!1;const Je={tradedetils1:Qe,tradedetils:Be,tradeUnits:null==re||null===($=re.tradeLicenseDetail)||void 0===$?void 0:$.tradeUnits,accessories:null==re||null===(X=re.tradeLicenseDetail)||void 0===X?void 0:X.accessories,address:(null==re||null===(Z=re.tradeLicenseDetail)||void 0===Z?void 0:Z.address)||{},ownershipCategory:$e,owners:(e=>{var t,l,n;if(null!=e&&null!==(t=e.tradeLicenseDetail)&&void 0!==t&&null!==(l=t.subOwnerShipCategory)&&void 0!==l&&l.includes("INSTITUTIONAL")){var i,o,r,a,u,d,s,c,v,p,m;let t=[];return t.push({...null==e||null===(i=e.tradeLicenseDetail)||void 0===i?void 0:i.owners[0],instituionName:null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(r=o.institution)||void 0===r?void 0:r.instituionName,name:null==e||null===(a=e.tradeLicenseDetail)||void 0===a||null===(u=a.institution)||void 0===u?void 0:u.name,altContactNumber:null==e||null===(d=e.tradeLicenseDetail)||void 0===d||null===(s=d.institution)||void 0===s?void 0:s.contactNo,designation:null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(v=c.institution)||void 0===v?void 0:v.designation,subOwnerShipCategory:{code:null==re||null===(p=re.tradeLicenseDetail)||void 0===p?void 0:p.subOwnerShipCategory,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+xe(null==re||null===(m=re.tradeLicenseDetail)||void 0===m?void 0:m.subOwnerShipCategory,".","_")}}),t}return null==re||null===(n=re.tradeLicenseDetail)||void 0===n?void 0:n.owners})(re)||[],documents:{documents:(null==re||null===(Q=re.tradeLicenseDetail)||void 0===Q?void 0:Q.applicationDocuments)||[]},cptId:{id:"IMMOVABLE"===(null==re||null===(J=re.tradeLicenseDetail)||void 0===J?void 0:J.structureType.split(".")[0])?ue:""},cpt:{details:"IMMOVABLE"===(null==re||null===(ee=re.tradeLicenseDetail)||void 0===ee?void 0:ee.structureType.split(".")[0])?null===(te=pe)||void 0===te||null===(le=te.Properties)||void 0===le?void 0:le[0]:""},applicationData:El(null==e||null===(ne=e.location)||void 0===ne||null===(ie=ne.state)||void 0===ie?void 0:ie.applicationData)};if(l.useEffect(()=>{Se(!1),be()},[]),Ee)return n.createElement(t.Loader,null);let et=[];return me=me||Nn,null===(oe=me)||void 0===oe||oe.map(e=>{"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT"!==e.head&&et.push(e)}),n.createElement("div",null,n.createElement("div",{style:{marginLeft:"15px"}},n.createElement(t.Header,null,window.location.href.includes("employee/tl/edit-application-details")?se("ES_TITLE_RE_NEW_TRADE_LICESE_APPLICATION"):se("ES_TITLE_RENEW_TRADE_LICESE_APPLICATION"))),n.createElement(t.FormComposer,{heading:"",isDisabled:!ce,label:se("ES_COMMON_APPLICATION_SUBMIT"),config:null==et?void 0:et.map(e=>{return{...e,body:e.body.filter(e=>!e.hideInEmployee),head:(t=e.head,"ES_NEW_APPLICATION_LOCATION_DETAILS"===t?"TL_CHECK_ADDRESS":"ES_NEW_APPLICATION_OWNERSHIP_DETAILS"===t?"TL_OWNERSHIP_DETAILS_HEADER":"TL_NEW_APPLICATION_PROPERTY"===t&&"MOVABLE"===(null==Je||null===(l=Je.tradedetils)||void 0===l||null===(n=l[0])||void 0===n||null===(i=n.structureType)||void 0===i?void 0:i.code)&&(Ne||Ce)?"":t)};var t,l,n,i}),fieldStyle:{marginRight:0},onSubmit:e=>{var t,l,n,i,o,r,a,u,d,s,c,v,p,m,E,f,_,y,T,g,S,h,L,A,b,N,C,D,I,O,w,R,P,x,M,k,U,B;if(null!=e&&null!==(t=e.cpt)&&void 0!==t&&t.id&&(null==e||null===(B=e.cpt)||void 0===B||!B.details||!pe))return Ie({key:"error"}),void we(se("ERR_INVALID_PROPERTY_ID"));let F=null==e||null===(l=e.tradedetils1)||void 0===l?void 0:l.checkForRenewal,H=!1;var W,V;"SENDBACKTOCITIZEN"==(null==e||null===(n=e.tradedetils1)||void 0===n?void 0:n.action)&&(F=!1,H=!0),(null==e||null===(i=e.owners)||void 0===i?void 0:i.length)>0&&(null==e||null===(W=e.owners)||void 0===W||W.forEach(e=>{var t,l,n;e.gender=null==e||null===(t=e.gender)||void 0===t?void 0:t.code,e.relationship=null==e||null===(l=e.relationship)||void 0===l?void 0:l.code,e.ownerType=null==e||null===(n=e.ownerType)||void 0===n?void 0:n.code}));for(let t=0;t<(null==e||null===(j=e.tradedetils1)||void 0===j||null===(Y=j.tradeLicenseDetail)||void 0===Y||null===(K=Y.owners)||void 0===K?void 0:K.length);t++){var j,Y,K,z;let l=null==e||null===(z=e.owners)||void 0===z?void 0:z.filter(l=>{var n,i,o;return l.id===(null==e||null===(n=e.tradedetils1)||void 0===n||null===(i=n.tradeLicenseDetail)||void 0===i||null===(o=i.owners[t])||void 0===o?void 0:o.id)});if(0==(null==l?void 0:l.length)){var G,q;let l=null==e||null===(G=e.tradedetils1)||void 0===G||null===(q=G.tradeLicenseDetail)||void 0===q?void 0:q.owners[t];l.active=!1,l.userActive=!1,null==e||e.owners.push(l),F=!0}}(null==e||null===(o=e.tradeUnits)||void 0===o?void 0:o.length)>0&&(null==e||null===(V=e.tradeUnits)||void 0===V||V.forEach(e=>{var t,l;e.tradeType=(null==e||null===(t=e.tradeSubType)||void 0===t?void 0:t.code)||null,e.uom=(null==e||null===(l=e.tradeSubType)||void 0===l?void 0:l.uom)||null,e.uomValue=Number(null==e?void 0:e.uomValue)||null}));for(let t=0;t<(null==e||null===($=e.tradedetils1)||void 0===$||null===(X=$.tradeLicenseDetail)||void 0===X||null===(Z=X.tradeUnits)||void 0===Z?void 0:Z.length);t++){var $,X,Z,Q;let l=null==e||null===(Q=e.tradeUnits)||void 0===Q?void 0:Q.filter(l=>{var n,i,o;return l.id===(null==e||null===(n=e.tradedetils1)||void 0===n||null===(i=n.tradeLicenseDetail)||void 0===i||null===(o=i.tradeUnits[t])||void 0===o?void 0:o.id)});if(0==(null==l?void 0:l.length)){var J,ee;let l=null==e||null===(J=e.tradedetils1)||void 0===J||null===(ee=J.tradeLicenseDetail)||void 0===ee?void 0:ee.tradeUnits[t];l.active=!1,null==e||e.tradeUnits.push(l),F=!0}}let te=!1;var le,ne,ie,oe,re,ue,ce,ve,me;(null==e||null===(r=e.accessories)||void 0===r?void 0:r.length)>0&&(1!==(null==e||null===(le=e.accessories)||void 0===le?void 0:le.length)||null!=e&&null!==(ne=e.accessories)&&void 0!==ne&&null!==(ie=ne[0])&&void 0!==ie&&null!==(oe=ie.accessoryCategory)&&void 0!==oe&&oe.code||(te=!0),null==e||null===(re=e.accessories)||void 0===re||re.forEach(e=>{const t=El(null==e?void 0:e.accessoryCategory),l=El(null==e?void 0:e.accessoryCategory);e.accessoryCategory=(null==t?void 0:t.code)||null,e.uom=(null==l?void 0:l.uom)||null,e.count=Number(null==e?void 0:e.count)||null,e.uomValue=Number(null==e?void 0:e.uomValue)||null})),te&&(e.accessories=null);for(let t=0;t<(null==e||null===(Ee=e.tradedetils1)||void 0===Ee||null===(_e=Ee.tradeLicenseDetail)||void 0===_e||null===(ye=_e.accessories)||void 0===ye?void 0:ye.length);t++){var Ee,_e,ye,Te;let l=null==e||null===(Te=e.accessories)||void 0===Te?void 0:Te.filter(l=>{var n,i,o;return l.id===(null==e||null===(n=e.tradedetils1)||void 0===n||null===(i=n.tradeLicenseDetail)||void 0===i||null===(o=i.accessories[t])||void 0===o?void 0:o.id)});if(0==(null==l?void 0:l.length)){var ge,Se;let l=null==e||null===(ge=e.tradedetils1)||void 0===ge||null===(Se=ge.tradeLicenseDetail)||void 0===Se?void 0:Se.accessories[t];l.active=!1,e.accessories=null!=e&&e.accessories?e.accessories:[],e.accessories.push(l),F=!0}}null!=e&&null!==(a=e.tradedetils1)&&void 0!==a&&a.tradeLicenseDetail&&null==(null==e||null===(u=e.tradedetils1)||void 0===u||null===(d=u.tradeLicenseDetail)||void 0===d?void 0:d.accessories)&&e.accessories&&(F=!0),null!=e&&e.address?e.address.city=(null==e||null===(ue=e.address)||void 0===ue||null===(ce=ue.city)||void 0===ce?void 0:ce.code)||null:(e.address={},e.address=(null==e||null===(ve=e.tradedetils1)||void 0===ve||null===(me=ve.tradeLicenseDetail)||void 0===me?void 0:me.address)||{}),(null==e||null===(s=e.tradedetils1)||void 0===s?void 0:s.tradeLicenseDetail.address.doorNo)!==(null==e||null===(c=e.address)||void 0===c?void 0:c.doorNo)&&(F=!0),(null==e||null===(v=e.tradedetils1)||void 0===v?void 0:v.tradeLicenseDetail.address.street)!==(null==e||null===(p=e.address)||void 0===p?void 0:p.street)&&(F=!0),new URLSearchParams(ae.search).get("propertyId")&&new URLSearchParams(ae.search).get("propertyId")!==(null==ae||null===(m=ae.state)||void 0===m||null===(E=m.applicationDetails.find(e=>"PT_DETAILS"===(null==e?void 0:e.title)))||void 0===E||null===(f=E.values.find(e=>"TL_PROPERTY_ID"===(null==e?void 0:e.title)))||void 0===f?void 0:f.value)&&(F=!0);let he=(null==e||null===(_=e.documents)||void 0===_?void 0:_.documents)||[],Le=Ue(null==e||null===(y=e.tradedetils)||void 0===y||null===(T=y[0])||void 0===T?void 0:T.commencementDate),Ae=null==e||null===(g=e.tradedetils)||void 0===g||null===(S=g[0])||void 0===S||null===(h=S.financialYear)||void 0===h?void 0:h.code,be=(null==e||null===(L=e.tradedetils)||void 0===L||null===(A=L[0])||void 0===A?void 0:A.gstNo)||"",Ne=Number(null==e||null===(b=e.tradedetils)||void 0===b||null===(N=b[0])||void 0===N?void 0:N.noOfEmployees)||"",Ce=Number(null==e||null===(C=e.tradedetils)||void 0===C||null===(D=C[0])||void 0===D?void 0:D.operationalArea)||"",De=(null==e||null===(I=e.tradedetils)||void 0===I||null===(O=I[0])||void 0===O||null===(w=O.structureSubType)||void 0===w?void 0:w.code)||"",Oe=(null==e||null===(R=e.tradedetils)||void 0===R||null===(P=R[0])||void 0===P?void 0:P.tradeName)||"",Re=(null==e||null===(x=e.ownershipCategory)||void 0===x?void 0:x.code)||"",Pe=(null==e||null===(M=e.tradedetils)||void 0===M||null===(k=M[0])||void 0===k||null===(U=k.licenseType)||void 0===U?void 0:U.code)||"PERMANENT";if(!F||H){var xe,Me,ke,Be,Fe,He,We,Ve,je,Ye,Ke,ze,Ge,qe,$e,Xe,Ze,Qe,Je,et,tt,lt,nt,it,ot,rt,at,ut,dt,st,ct,vt,pt,mt,Et,ft,_t,yt,Tt,gt,St,ht;let t=El(e.tradedetils1);t.action=H?"RESUBMIT":"INITIATE",t.applicationType=H?null==e||null===(xe=e.tradedetils1)||void 0===xe?void 0:xe.applicationType:"RENEWAL",t.workflowCode=H?null==e||null===(Me=e.tradedetils1)||void 0===Me?void 0:Me.workflowCode:"DIRECTRENEWAL",t.commencementDate=Le,t.financialYear=Ae,t.licenseType=Pe,t.tenantId=de,t.tradeName=Oe,be&&(t.tradeLicenseDetail.additionalDetail.gstNo=be),Ne&&(t.tradeLicenseDetail.noOfEmployees=Ne),Ce&&(t.tradeLicenseDetail.operationalArea=Ce),(null==e||null===(ke=e.accessories)||void 0===ke?void 0:ke.length)>0&&(t.tradeLicenseDetail.accessories=null==e?void 0:e.accessories),(null==e||null===(Be=e.tradeUnits)||void 0===Be?void 0:Be.length)>0&&(t.tradeLicenseDetail.tradeUnits=null==e?void 0:e.tradeUnits),(null==e||null===(Fe=e.owners)||void 0===Fe?void 0:Fe.length)>0&&(t.tradeLicenseDetail.owners=null==e?void 0:e.owners),De&&(t.tradeLicenseDetail.structureType=De),(Re||null!=e&&null!==(He=e.owners)&&void 0!==He&&null!==(We=He[0])&&void 0!==We&&null!==(Ve=We.subOwnerShipCategory)&&void 0!==Ve&&Ve.code)&&(t.tradeLicenseDetail.subOwnerShipCategory=null!==(je=t)&&void 0!==je&&null!==(Ye=je.tradeLicenseDetail)&&void 0!==Ye&&null!==(Ke=Ye.owners)&&void 0!==Ke&&null!==(ze=Ke[0])&&void 0!==ze&&null!==(Ge=ze.subOwnerShipCategory)&&void 0!==Ge&&null!==(qe=Ge.code)&&void 0!==qe&&qe.includes("INSTITUTIONAL")?null==e||null===($e=e.owners)||void 0===$e||null===(Xe=$e[0])||void 0===Xe?void 0:Xe.subOwnerShipCategory.code:Re),null!==(Ze=t)&&void 0!==Ze&&null!==(Qe=Ze.tradeLicenseDetail)&&void 0!==Qe&&null!==(Je=Qe.owners)&&void 0!==Je&&null!==(et=Je[0])&&void 0!==et&&null!==(tt=et.subOwnerShipCategory)&&void 0!==tt&&null!==(lt=tt.code)&&void 0!==lt&&lt.includes("INSTITUTIONAL")&&(t.tradeLicenseDetail.institution={...null===(nt=t)||void 0===nt||null===(it=nt.tradeLicenseDetail)||void 0===it?void 0:it.institution,contactNo:null==e||null===(ot=e.owners)||void 0===ot||null===(rt=ot[0])||void 0===rt?void 0:rt.altContactNumber,designation:null==e||null===(at=e.owners)||void 0===at||null===(ut=at[0])||void 0===ut?void 0:ut.designation,instituionName:null==e||null===(dt=e.owners)||void 0===dt||null===(st=dt[0])||void 0===st?void 0:st.instituionName,name:null==e||null===(ct=e.owners)||void 0===ct||null===(vt=ct[0])||void 0===vt?void 0:vt.name,mobileNumber:null==e||null===(pt=e.owners)||void 0===pt||null===(mt=pt[0])||void 0===mt?void 0:mt.mobileNumber,emailId:null==e||null===(Et=e.owners)||void 0===Et||null===(ft=Et[0])||void 0===ft?void 0:ft.emailId}),t=null!==(_t=Digit)&&void 0!==_t&&null!==(yt=_t.Customizations)&&void 0!==yt&&null!==(Tt=yt.TL)&&void 0!==Tt&&Tt.customiseSendbackFormData?null===(gt=Digit)||void 0===gt||null===(St=gt.Customizations)||void 0===St||null===(ht=St.TL)||void 0===ht?void 0:ht.customiseSendbackFormData(e,t):t,Digit.TLService.update({Licenses:[t]},de).then((e,t)=>{var l,n;(null==e||null===(l=e.Licenses)||void 0===l?void 0:l.length)>0&&(null==e||null===(n=e.Licenses)||void 0===n?void 0:n.length)>0&&fe.replace("/digit-ui/employee/tl/response",{data:null==e?void 0:e.Licenses})}).catch(e=>{var t,l,n;Ie({key:"error"}),we((null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.Errors[0])||void 0===n?void 0:n.message)||null)})}else{var Lt,At,bt,Nt,Ct,Dt,It,Ot,wt,Rt,Pt,xt,Mt,kt,Ut,Bt,Ft,Ht,Wt,Vt,jt,Yt,Kt,zt,Gt,qt,$t,Xt,Zt,Qt,Jt,el,tl,ll,nl,il,ol,rl,al,ul,dl,sl,cl,vl,pl;let t=El(e.tradedetils1);if(t.action="INITIATE",t.applicationType="RENEWAL",t.workflowCode="EDITRENEWAL",t.commencementDate=Le,t.financialYear=Ae,t.licenseType=Pe,t.tenantId=de,t.tradeName=Oe,be&&(t.tradeLicenseDetail.additionalDetail.gstNo=be),Ne&&(t.tradeLicenseDetail.noOfEmployees=Ne),Ce&&(t.tradeLicenseDetail.operationalArea=Ce),(null==e||null===(Lt=e.accessories)||void 0===Lt?void 0:Lt.length)>0&&(t.tradeLicenseDetail.accessories=null==e?void 0:e.accessories),(null==e||null===(At=e.tradeUnits)||void 0===At?void 0:At.length)>0&&(t.tradeLicenseDetail.tradeUnits=null==e||null===(bt=e.tradeUnits)||void 0===bt?void 0:bt.filter(e=>!1!==(null==e?void 0:e.active))),(null==e||null===(Nt=e.owners)||void 0===Nt?void 0:Nt.length)>0&&(t.tradeLicenseDetail.owners=null==e||null===(Ct=e.owners)||void 0===Ct?void 0:Ct.filter(e=>!1!==(null==e?void 0:e.active))),null!=e&&e.address&&(t.tradeLicenseDetail.address=null==e?void 0:e.address),null!=e&&null!==(Dt=e.cpt)&&void 0!==Dt&&null!==(It=Dt.details)&&void 0!==It&&It.address||pe){var ml,fl,_l,yl,Tl,gl,Sl,hl,Ll,Al,bl,Nl,Cl,Dl;let l={},n=(null==e||null===(ml=e.cpt)||void 0===ml?void 0:ml.details)||pe;l.city=(null==n||null===(fl=n.address)||void 0===fl?void 0:fl.city)||null,l.locality={code:(null==n||null===(_l=n.address)||void 0===_l||null===(yl=_l.locality)||void 0===yl?void 0:yl.code)||null},(null!=n&&null!==(Tl=n.address)&&void 0!==Tl&&Tl.doorNo||null!=e&&null!==(gl=e.address)&&void 0!==gl&&gl.doorNo)&&(l.doorNo=(null==n||null===(Sl=n.address)||void 0===Sl?void 0:Sl.doorNo)||(null==e||null===(hl=e.address)||void 0===hl?void 0:hl.doorNo)||null),(null!=n&&null!==(Ll=n.address)&&void 0!==Ll&&Ll.street||null!=e&&null!==(Al=e.address)&&void 0!==Al&&Al.street)&&(l.street=(null==n||null===(bl=n.address)||void 0===bl?void 0:bl.street)||(null==e||null===(Nl=e.address)||void 0===Nl?void 0:Nl.street)||null),null!=n&&null!==(Cl=n.address)&&void 0!==Cl&&Cl.pincode&&(l.pincode=null==n||null===(Dl=n.address)||void 0===Dl?void 0:Dl.pincode),t.tradeLicenseDetail.address=l}var Il,Ol,wl,Rl,Pl,xl;De&&(t.tradeLicenseDetail.structureType=De),(Re||null!=e&&null!==(Ot=e.owners)&&void 0!==Ot&&null!==(wt=Ot[0])&&void 0!==wt&&null!==(Rt=wt.subOwnerShipCategory)&&void 0!==Rt&&Rt.code)&&(t.tradeLicenseDetail.subOwnerShipCategory=null!==(Pt=t)&&void 0!==Pt&&null!==(xt=Pt.tradeLicenseDetail)&&void 0!==xt&&null!==(Mt=xt.owners)&&void 0!==Mt&&null!==(kt=Mt[0])&&void 0!==kt&&null!==(Ut=kt.subOwnerShipCategory)&&void 0!==Ut&&null!==(Bt=Ut.code)&&void 0!==Bt&&Bt.includes("INSTITUTIONAL")?null==e||null===(Ft=e.owners)||void 0===Ft||null===(Ht=Ft[0])||void 0===Ht||null===(Wt=Ht.subOwnerShipCategory)||void 0===Wt?void 0:Wt.code:Re),he&&(t.tradeLicenseDetail.applicationDocuments=he),(null!=e&&e.cpt||pe)&&(null!==(Il=t)&&void 0!==Il&&null!==(Ol=Il.tradeLicenseDetail)&&void 0!==Ol&&null!==(wl=Ol.additionalDetail)&&void 0!==wl&&wl.propertyId||(t.tradeLicenseDetail.additionalDetail={propertyId:null}),t.tradeLicenseDetail.additionalDetail.propertyId=(null==e||null===(Rl=e.cpt)||void 0===Rl||null===(Pl=Rl.details)||void 0===Pl?void 0:Pl.propertyId)||(null===(xl=pe)||void 0===xl?void 0:xl.propertyId)),null!==(Vt=t)&&void 0!==Vt&&null!==(jt=Vt.tradeLicenseDetail)&&void 0!==jt&&null!==(Yt=jt.owners)&&void 0!==Yt&&null!==(Kt=Yt[0])&&void 0!==Kt&&null!==(zt=Kt.subOwnerShipCategory)&&void 0!==zt&&null!==(Gt=zt.code)&&void 0!==Gt&&Gt.includes("INSTITUTIONAL")&&(t.tradeLicenseDetail.institution={...null===(qt=t)||void 0===qt||null===($t=qt.tradeLicenseDetail)||void 0===$t?void 0:$t.institution,contactNo:null==e||null===(Xt=e.owners)||void 0===Xt||null===(Zt=Xt[0])||void 0===Zt?void 0:Zt.altContactNumber,designation:null==e||null===(Qt=e.owners)||void 0===Qt||null===(Jt=Qt[0])||void 0===Jt?void 0:Jt.designation,instituionName:null==e||null===(el=e.owners)||void 0===el||null===(tl=el[0])||void 0===tl?void 0:tl.instituionName,name:null==e||null===(ll=e.owners)||void 0===ll||null===(nl=ll[0])||void 0===nl?void 0:nl.name,mobileNumber:null==e||null===(il=e.owners)||void 0===il||null===(ol=il[0])||void 0===ol?void 0:ol.mobileNumber,emailId:null==e||null===(rl=e.owners)||void 0===rl||null===(al=rl[0])||void 0===al?void 0:al.emailId}),t=null!==(ul=Digit)&&void 0!==ul&&null!==(dl=ul.Customizations)&&void 0!==dl&&null!==(sl=dl.TL)&&void 0!==sl&&sl.customiseRenewalCreateFormData?null===(cl=Digit)||void 0===cl||null===(vl=cl.Customizations)||void 0===vl||null===(pl=vl.TL)||void 0===pl?void 0:pl.customiseRenewalCreateFormData(e,t):t,Digit.TLService.update({Licenses:[t]},de).then((e,t)=>{var l;if((null==e||null===(l=e.Licenses)||void 0===l?void 0:l.length)>0){var n;let t=null==e||null===(n=e.Licenses)||void 0===n?void 0:n[0];t.action="APPLY",Digit.TLService.update({Licenses:[t]},de).then(e=>{var t,l,n;Digit.SessionStorage.set("EditRenewalApplastModifiedTime",null==e||null===(t=e.Licenses[0])||void 0===t||null===(l=t.auditDetails)||void 0===l?void 0:l.lastModifiedTime),(null==e||null===(n=e.Licenses)||void 0===n?void 0:n.length)>0&&fe.replace("/digit-ui/employee/tl/response",{data:null==e?void 0:e.Licenses})}).catch(e=>{var t,l,n;Ie({key:"error"}),we((null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.Errors[0])||void 0===n?void 0:n.message)||null)})}}).catch(e=>{var t,l,n;Ie({key:"error"}),we((null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.Errors[0])||void 0===n?void 0:n.message)||null)})}},defaultValues:Je,onFormValueChange:(e,t,l)=>{"true"===sessionStorage.getItem("isBillingSlabError")?ve(!1):Object.keys(l.errors).length>0&&1==Object.keys(l.errors).length&&l.errors.owners&&0==Object.values(l.errors.owners.type).filter(e=>"required"===e.type).length?ve(!0):ve(!Object.keys(l.errors).length)},breaklineStyle:{border:"0px"}}),De&&n.createElement(t.Toast,{error:"error"===(null==De?void 0:De.key),label:Oe,onClose:()=>{Ie(null),we(null)}}))},TLSearch:e=>{const{variant:t}=o.useParams(),{t:r}=i.useTranslation(),a=Digit.ULBService.getCurrentTenantId(),[u,d]=l.useState({}),s=Digit.ComponentRegistryService.getComponent("license"===t?"SearchLicense":"SearchLicenseApplication");l.useEffect(()=>{const e=Digit.SessionStorage.get("SEARCH_APPLICATION_DETAIL")||{};if(e){var t=new Date(null==e?void 0:e.fromDate);null==t||t.setSeconds((null==t?void 0:t.getSeconds())-19800);var l=new Date(null==e?void 0:e.toDate);null==l||l.setSeconds((null==l?void 0:l.getSeconds())+86399-19800);const n={...e,...e.toDate?{toDate:null==l?void 0:l.getTime()}:{},...e.fromDate?{fromDate:null==t?void 0:t.getTime()}:{}};d(Object.keys(n).filter(e=>n[e]).reduce((e,t)=>({...e,[t]:"object"==typeof n[t]?n[t].code:n[t]}),{}))}},[]);const c={enabled:!!(u&&Object.keys(u).length>0)},{data:{Licenses:v,Count:p}={},isLoading:m,isSuccess:E}=Digit.Hooks.tl.useSearch({tenantId:a,filters:u,config:c}),f={enabled:u&&Object.keys(u).length>0&&!m&&E},{data:{ProcessInstances:_}={},isLoading:y,isSuccess:T}=Digit.Hooks.tl.useTLWorkflowData({tenantId:a,filters:{businessIds:null==v?void 0:v.map(e=>null==e?void 0:e.applicationNumber).join(",")},config:{...f}});return console.log("search"),n.createElement(s,{t:r,tenantId:a,onSubmit:function(e){Digit.SessionStorage.set("SEARCH_APPLICATION_DETAIL",{applicationNumber:null==e?void 0:e.applicationNumber,licenseNumbers:null==e?void 0:e.licenseNumbers,applicationType:null==e?void 0:e.applicationType,tradeName:null==e?void 0:e.tradeName,fromDate:null==e?void 0:e.fromDate,toDate:null==e?void 0:e.toDate,limit:10,sortBy:"commencementDate",sortOrder:"DESC",status:e.status});var t=new Date(null==e?void 0:e.fromDate);null==t||t.setSeconds((null==t?void 0:t.getSeconds())-19800);var l=new Date(null==e?void 0:e.toDate);null==l||l.setSeconds((null==l?void 0:l.getSeconds())+86399-19800);const n={...e,...e.toDate?{toDate:null==l?void 0:l.getTime()}:{},...e.fromDate?{fromDate:null==t?void 0:t.getTime()}:{}};d(Object.keys(n).filter(e=>n[e]).reduce((e,t)=>({...e,[t]:"object"==typeof n[t]?n[t].code:n[t]}),{}))},data:!m&&E&&!y&&T?(null==v?void 0:v.length)>0?null==v?void 0:v.map(e=>{var t;return{...e,CurrentOwners:(null==_?void 0:_.length)>0?null==_||null===(t=_.filter(t=>t.businessId===e.applicationNumber))||void 0===t?void 0:t.map(e=>({currentOwner:null!==e.assignes&&null!==e.assignes[0].name?e.assignes[0].name:"NA"})):{currentOwner:"NA"}}}):{display:"ES_COMMON_NO_DATA"}:"",count:p})},TLResponse:e=>{var r,a,u,d;const s=o.useLocation(),{state:c}=e.location,[v,p]=l.useState({}),{data:m}=(Digit.Hooks.useQueryParams(),Digit.Hooks.useStore.getInitData()),{tenants:E}=m||{};l.useEffect(()=>{var e;p((e=s.search)?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((e,t)=>{let[l,n]=t.split("=");return e[l]=n?decodeURIComponent(n.replace(/\+/g," ")):"",e},{}):{})},[s]);const{t:f}=i.useTranslation();return n.createElement("div",null,n.createElement(t.Card,null,n.createElement(t.Banner,{message:f("TL_APPLICATION_SUCCESS_MESSAGE_MAIN"),applicationNumber:null==c||null===(r=c.data)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.applicationNumber,info:f("TL_REF_NO_LABEL"),successful:!0}),n.createElement(t.CardText,null,f("TL_NEW_SUCESS_RESPONSE_NOTIFICATION_LABEL")),n.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset"},onClick:function(){try{const e=(null==c?void 0:c.data)||[],t=e&&e[0]||{},l=E.find(e=>e.code===t.tenantId);return Promise.resolve(nt({...t},l,f)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"})),f("TL_PRINT_APPLICATION_LABEL")),n.createElement(t.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},"PENDINGPAYMENT"!==(null==c||null===(u=c.data)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.status)?n.createElement(o.Link,{to:"/digit-ui/employee",style:{marginRight:"1rem"}},n.createElement(t.SubmitBar,{label:f("CORE_COMMON_GO_TO_HOME"),onClick:()=>sessionStorage.removeItem("isCreateEnabled")})):n.createElement("div",{onClick:function(){try{var e,t,l,n;return window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/TL/"+(null==c||null===(e=c.data)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.applicationNumber)+"/"+(null==c||null===(l=c.data)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.tenantId)),Promise.resolve()}catch(e){return Promise.reject(e)}}},n.createElement(t.SubmitBar,{label:f("TL_COLLECT_PAYMENT")})))))},SelectOtherTradeDetails:e=>{var i,o,r;let{t:a,config:u,onSelect:d,formData:s}=e;const[c,v]=l.useState(null===(i=s.TradeDetails)||void 0===i?void 0:i.TradeGSTNumber),[p,m]=l.useState(null===(o=s.TradeDetails)||void 0===o?void 0:o.OperationalSqFtArea),[E,f]=l.useState(null===(r=s.TradeDetails)||void 0===r?void 0:r.NumberOfEmployees),_=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{isLoading:y,data:T={}}=(window.location.href.includes("/edit-application/")||window.location.href.includes("renew-trade"),Digit.Hooks.tl.useTradeLicenseMDMS(_,"egf-master","FinancialYear"));return y?n.createElement(t.Loader,null):n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,n.createElement(t.FormStep,{config:u,onSelect:()=>{d(u.key,{TradeGSTNumber:c,OperationalSqFtArea:p,NumberOfEmployees:E})},onSkip:()=>d(),t:a},n.createElement(t.CardLabel,null,""+a("TL_TRADE_GST_NO")),n.createElement(t.TextInput,Ye({t:a,isMandatory:!1,type:"text",optionKey:"i18nKey",name:"TradeGSTNumber",value:c,onChange:function(e){v(e.target.value)}},{pattern:"^[a-zA-Z-0-9_@/#&+-.`' ]*$",isRequired:!1,title:a("TL_INVALID_TRADE_GST_NO")})),n.createElement(t.CardLabel,null,""+a("TL_OPERATIONAL_AREA")),n.createElement(t.TextInput,{t:a,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"OperationalSqFtArea",value:p,onChange:function(e){m(e.target.value)}}),n.createElement(t.CardLabel,null,""+a("TL_NO_OF_EMPLOYEES")),n.createElement(t.TextInput,{t:a,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"NumberOfEmployees",value:E,onChange:function(e){f(e.target.value)}})))},SelectTradeUnitsInitial:e=>{var i,r,a,u,d,s,c,v,p,m,E;let{t:f,config:_,onSelect:y,formData:T}=e,g={};const[S,h]=l.useState(""),[L,A]=l.useState((null==T||null===(i=T.TadeDetails)||void 0===i||null===(r=i.Units)||void 0===r?void 0:r.TradeType)||""),[b,N]=l.useState((null==T||null===(a=T.TadeDetails)||void 0===a||null===(u=a.Units)||void 0===u?void 0:u.TradeSubType)||""),[C,D]=l.useState((null==T||null===(d=T.TadeDetails)||void 0===d||null===(s=d.Units)||void 0===s?void 0:s.UnitOfMeasure)||""),[I,O]=l.useState((null==T||null===(c=T.TadeDetails)||void 0===c||null===(v=c.Units)||void 0===v?void 0:v.UomValue)||""),[w,R]=l.useState(null),[P,x]=l.useState((null==T?void 0:T.TradeDetails)&&(null==T||null===(p=T.TradeDetails)||void 0===p?void 0:p.units)||[{tradecategory:"",tradetype:"",tradesubtype:"",unit:null,uom:null}]),M=Digit.ULBService.getCitizenCurrentTenant();Digit.ULBService.getStateId();const{data:k,isLoading:U}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:M,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.tradeType&&"NEW"===e.applicationType&&"PERMANENT"===e.licenseType&&e.uom)});let B=[];function F(e){let t=[];if(k&&k.length>0){var l,n,i,o;if(null!=T&&null!==(l=T.TradeDetails)&&void 0!==l&&l.BuildingType)return null===(i=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===i||i.map(l=>{l.tradeType.split(".")[0]!==e.code||t.some(e=>e.code===""+l.tradeType.split(".")[1])||t.push({i18nKey:"TRADELICENSE_TRADETYPE_"+l.tradeType.split(".")[1],code:""+l.tradeType.split(".")[1]})}),t;if(null!=T&&null!==(n=T.TradeDetails)&&void 0!==n&&n.VehicleType)return null===(o=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===o||o.map(l=>{l.tradeType.split(".")[0]!==e.code||t.some(e=>e.code===""+l.tradeType.split(".")[1])||t.push({i18nKey:"TRADELICENSE_TRADETYPE_"+l.tradeType.split(".")[1],code:""+l.tradeType.split(".")[1]})}),t}}function H(e){let t=[];if(e&&k&&k.length>0){var l,n,i,o;if(null!=T&&null!==(l=T.TradeDetails)&&void 0!==l&&l.BuildingType)return null===(i=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===i||i.map(l=>{l.tradeType.split(".")[1]!==e.code||t.some(e=>e.code===""+l.tradeType)||t.push({i18nKey:"TL_"+l.tradeType,code:""+l.tradeType})}),t;if(null!=T&&null!==(n=T.TradeDetails)&&void 0!==n&&n.VehicleType)return null===(o=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===o||o.map(l=>{l.tradeType.split(".")[1]!==e.code||t.some(e=>e.code===""+l.tradeType)||t.push({i18nKey:"TL_"+l.tradeType,code:""+l.tradeType})}),t}}k&&k.length>0&&(null===(m=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===m||m.map(e=>{B.some(t=>t.code===""+e.tradeType.split(".")[0])||B.push({i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]})})),k&&k.length>0&&(null===(E=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===E||E.map(e=>{B.some(t=>t.code===""+e.tradeType.split(".")[0])||B.push({i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],code:""+e.tradeType.split(".")[0]})}));const{pathname:W}=o.useLocation();function V(e,t){let l=[...P];l[e].tradetype=t,A(t),j(e,null),x(l)}function j(e,t){var l,n,i;let o=[...P];o[e].tradesubtype=t,N(t),null==t&&(o[e].unit=null,D(null)),null===(l=Array.from(document.querySelectorAll("input")))||void 0===l||l.forEach(e=>e.value=""),t&&k&&(null==k?void 0:k.length)>0&&(null===(n=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.BuildingType)||void 0===l?void 0:l.code.toString())}))||void 0===n||n.map(l=>{t.code===l.tradeType&&(o[e].unit=l.uom,D(l.uom))})),t&&k&&(null==k?void 0:k.length)>0&&(null===(i=k.filter(e=>{var t,l;return e.structureType===(null==T||null===(t=T.TradeDetails)||void 0===t||null===(l=t.VehicleType)||void 0===l?void 0:l.code.toString())}))||void 0===i||i.map(l=>{t.code===l.tradeType&&(o[e].unit=l.uom,D(l.uom))})),x(o)}return W.includes("/modify-application/"),n.createElement(n.Fragment,null,window.location.href.includes("/citizen")?n.createElement(Ve,null):null,U?n.createElement(t.Loader,null):n.createElement(t.FormStep,{config:_,onSelect:()=>{let e,t=T.TradeDetails.Units;w||(R(null),e={...t,units:P},y(_.key,e))},onSkip:()=>y(),t:f,forcedError:f(w),isDisabled:!P[0].tradecategory||!P[0].tradetype||!P[0].tradesubtype},null==P?void 0:P.map((e,l)=>n.createElement("div",{key:e+"-"+l},n.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},n.createElement(t.CardLabel,null,f("TL_NEW_TRADE_DETAILS_TRADE_CAT_LABEL")+"*"),n.createElement(t.LinkButton,{label:n.createElement("div",null,n.createElement("span",null,n.createElement("svg",{style:{float:"right",position:"relative",bottom:"32px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:1!=P.length?"#494848":"#FAFAFA"})))),style:{width:"100px",display:"inline"},onClick:e=>function(e){const t=[...P];1!=t.length&&(t.splice(e,1),x(t))}(l)}),U?n.createElement(t.Loader,null):n.createElement(t.RadioButtons,{t:f,options:B,optionsKey:"i18nKey",name:"TradeCategory-"+l,value:null==e?void 0:e.tradecategory,selectedOption:null==e?void 0:e.tradecategory,onSelect:e=>function(e,t){let l=[...P];l[e].tradecategory=t,h(t),V(e,null),j(e,null),x(l)}(l,e),labelKey:"",isPTFlow:!0}),n.createElement(t.CardLabel,null,f("TL_NEW_TRADE_DETAILS_TRADE_TYPE_LABEL")+"*"),n.createElement(t.Dropdown,{t:f,optionKey:"i18nKey",isMandatory:_.isMandatory,option:F(null==e?void 0:e.tradecategory),selected:null==e?void 0:e.tradetype,select:e=>V(l,e)}),n.createElement(t.CardLabel,null,f("TL_NEW_TRADE_DETAILS_TRADE_SUBTYPE_LABEL")+"*"),n.createElement(t.Dropdown,{t:f,optionKey:"i18nKey",isMandatory:_.isMandatory,option:H(null==e?void 0:e.tradetype),selected:null==e?void 0:e.tradesubtype,optionCardStyles:{maxHeight:"125px",overflow:"scroll"},select:e=>j(l,e)}),n.createElement(t.CardLabel,null,""+f("TL_UNIT_OF_MEASURE_LABEL")),n.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:f,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UnitOfMeasure",value:null==e?void 0:e.unit,onChange:e=>function(e,t){let l=[...P];l[e].unit=t.target.value,D(t.target.value),x(l)}(l,e),disable:!0}),n.createElement(t.CardLabel,null,f("TL_NEW_TRADE_DETAILS_UOM_VALUE_LABEL")+(e.unit?"*":"")),n.createElement(t.TextInput,Ye({style:{background:"#FAFAFA"},t:f,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"UomValue",value:null==e?void 0:e.uom,onChange:e=>function(e,t){let l=[...P];l[e].uom=t.target.value,R(null);let n=null==k?void 0:k.filter(t=>{var n,i,o,r,a,u;return(null==t?void 0:t.tradeType)===(null===(n=l[e])||void 0===n||null===(i=n.tradesubtype)||void 0===i?void 0:i.code)&&((null==t?void 0:t.structureType)===(null==T||null===(o=T.TradeDetails)||void 0===o||null===(r=o.BuildingType)||void 0===r?void 0:r.code)||(null==t?void 0:t.structureType)===(null==T||null===(a=T.TradeDetails)||void 0===a||null===(u=a.VehicleType)||void 0===u?void 0:u.code))});var i,o,r,a,u,d,s,c;t.target.value&&parseFloat(t.target.value)>0?(Number.isInteger(null==n||null===(i=n[0])||void 0===i?void 0:i.fromUom)&&(t.target.value&&parseInt(t.target.value)>=(null==n||null===(r=n[0])||void 0===r?void 0:r.fromUom)||R(f("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==n||null===(a=n[0])||void 0===a?void 0:a.fromUom)+" - "+(null==n||null===(u=n[0])||void 0===u?void 0:u.toUom))),Number.isInteger(null==n||null===(o=n[0])||void 0===o?void 0:o.toUom)&&(t.target.value&&parseInt(t.target.value)<=(null==n||null===(d=n[0])||void 0===d?void 0:d.toUom)||R(f("TL_FILL_CORRECT_UOM_VALUE")+" "+(null==n||null===(s=n[0])||void 0===s?void 0:s.fromUom)+" - "+(null==n||null===(c=n[0])||void 0===c?void 0:c.toUom)))):R(f("TL_UOM_VALUE_GREATER_O")),O(t.target.value),x(l)}(l,e),disable:!e.unit},g={isRequired:!0,pattern:"[0-9]+",type:"text",title:f("TL_WRONG_UOM_VALUE_ERROR")}))))),n.createElement("div",{style:{justifyContent:"center",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},n.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>function(){const e=[...P];e.push({tradecategory:"",tradetype:"",tradesubtype:"",unit:null,uom:null}),x(e)}()},""+f("TL_ADD_MORE_TRADE_UNITS")))))},TLTradeUnitsEmployeeInitial:e=>{let{config:r,onSelect:a,formData:u,setError:d,formState:s,clearErrors:c}=e;const{t:v}=i.useTranslation(),{pathname:p}=o.useLocation(),m=p.includes("/modify-application/"),[E,f]=l.useState((null==u?void 0:u.tradeUnits)||[gi()]),[_,y]=l.useState({index:-1,type:""}),T=Digit.ULBService.getCurrentTenantId(),[g,S]=(Digit.ULBService.getStateId(),l.useState([])),[h,L]=l.useState([]),[A,b]=l.useState([]),[N,C]=l.useState([]),[D,I]=l.useState(!1),[O,w]=l.useState((null==u?void 0:u.tradedetils1)||[]);let R=window.location.href.includes("tl/renew-application-details");window.location.href.includes("tl/renew-application-details")&&(R=!0);const P=R?"RENEWAL":"NEW",{data:x,isLoading:M}=Digit.Hooks.tl.useTradeLicenseBillingslab({tenantId:T,filters:{}},{select:e=>null==e?void 0:e.billingSlab.filter(e=>e.tradeType&&e.applicationType===P&&"PERMANENT"===e.licenseType&&e.uom)});l.useEffect(()=>{const e=null==E?void 0:E.map(e=>e);a(null==r?void 0:r.key,e)},[E]),l.useEffect(()=>{a("tradedetils1",O)},[O]);const k={focusIndex:_,allUnits:E,setFocusIndex:y,removeUnit:e=>{f(t=>t.filter(t=>t.key!=e.key))},formData:u,formState:s,setUnits:f,t:v,setError:d,clearErrors:c,config:r,tradeCategoryValues:h,tradeTypeOptionsList:A,setTradeTypeOptionsList:b,tradeTypeMdmsData:g,tradeSubTypeOptionsList:N,setTradeSubTypeOptionsList:C,setTradeTypeMdmsData:S,setTradeCategoryValues:L,billingSlabTradeTypeData:x,isErrors:D,setIsErrors:I,previousLicenseDetails:O,setPreviousLicenseDetails:w,isRenewal:R,isLoading:M};return m?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,null==E?void 0:E.map((e,t)=>n.createElement(Si,Ye({key:e.key,index:t,unit:e},k))),n.createElement(t.LinkButton,{label:v("TL_ADD_TRADE_UNIT"),onClick:()=>{const e=gi();f(t=>[...t,e])},style:{color:"#F47738",width:"fit-content"}}))}};exports.TLLinks=vr,exports.TLModule=cr,exports.initTLComponents=()=>{var e;null===(e=Object.entries(pr))||void 0===e||e.forEach(e=>{let[t,l]=e;Digit.ComponentRegistryService.setComponent(t,l)})};
