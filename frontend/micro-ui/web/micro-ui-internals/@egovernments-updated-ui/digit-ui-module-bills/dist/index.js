var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,r=require("react-router-dom"),l=require("react-i18next"),i=require("@egovernments/digit-ui-react-components"),o=require("react-hook-form");function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function u(e,n){if(null==e)return{};var t,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)n.indexOf(t=i[r])>=0||(l[t]=e[t]);return l}var c,s=function(e){if(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()}return"NA"},d=function(e,n){void 0===e&&(e=""),void 0===n&&(n="");var t=function(e){return void 0===e&&(e=""),function(e){return void 0===e&&(e=""),!(!e||null==e||null==e||""==e)}(e)&&(e.replaceAll&&e.replaceAll(".","_")||e.replace&&function(e,n,t){if(void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),""==n)return e;for(;e.includes(n);)e=e.replace(n,t);return e}(e,".","_"))||"NA"}(e);return"NA"==t?"PT_NA":n+"_"+t},f=function(e,n){var r=l.useTranslation();return t.createElement("a",{style:{color:"#FE7A51",cursor:"pointer"},onClick:function(){!function(e,n){try{Promise.resolve(Digit.Utils.downloadReceipt(n,e,"consolidatedreceipt")).then(function(){})}catch(e){return Promise.reject(e)}}(e,n)}}," ",(0,r.t)("ABG_DOWNLOAD_RECEIPT")," ")},v=function(e,n,r){return t.createElement("a",{href:"javascript:void(0)",style:{color:"#FE7A51",cursor:"pointer"},onClick:function(){!function(e,n){try{Promise.resolve(Digit.Utils.downloadBill(n,e,"consolidatedreceipt")).then(function(){})}catch(e){return Promise.reject(e)}}(e,n)}},r)},m=function(e,n){try{var t=Digit.ULBService.getCurrentTenantId(),r=Digit.ULBService.getStateId();return Promise.resolve(Digit.PaymentService.getReciept(t,e,{consumerCodes:n})).then(function(e){var n;function t(){return Promise.resolve(Digit.PaymentService.printReciept(r,{fileStoreIds:l.filestoreIds[0]})).then(function(e){window.open(e[l.filestoreIds[0]],"_blank")})}var l={filestoreIds:[null===(n=e.Payments[0])||void 0===n?void 0:n.fileStoreId]},i=function(){var n;if(null===(n=e.Payments[0])||void 0===n||!n.fileStoreId)return Promise.resolve(Digit.PaymentService.generatePdf(r,{Payments:e.Payments},"consolidatedreceipt")).then(function(e){l=e})}();return i&&i.then?i.then(t):t()})}catch(e){return Promise.reject(e)}},_=function(e){var n=e.allLinks,o=e.headerText,a=l.useTranslation().t;return t.createElement(i.Card,{className:"employeeCard filter inboxLinks"},t.createElement("div",{className:"complaint-links-container"},t.createElement("div",{className:"header"},t.createElement("span",{className:"logo"},t.createElement(i.AnnouncementIcon,null))," ",t.createElement("span",{className:"text"},a(o))),t.createElement("div",{className:"body"},n.map(function(e,n){var l=e.link,i=e.text,o=e.hyperlink;return t.createElement("span",{className:"link",key:n},void 0!==o&&o?t.createElement("a",{href:l},a(i)):t.createElement(r.Link,{to:l},a(i)))}))))},E=function(e){return t.createElement(i.Table,{t:e.t,data:e.data,manualPagination:!1,columns:e.columns,getCellProps:e.getCellProps,onNextPage:e.onNextPage,onPrevPage:e.onPrevPage,currentPage:e.currentPage,totalRecords:e.totalRecords,onLastPage:e.onLastPage,onFirstPage:e.onFirstPage,onPageSizeChange:e.onPageSizeChange,pageSizeLimit:e.pageSizeLimit})},p=["pattern","name","maxLength","minLength","errorMessages"],h={date:i.DatePicker,mobileNumber:i.MobileNumber},g=function(e){var r,c,s=e.onSearch,d=e.type,f=e.onClose,v=e.searchFields,m=e.searchParams,_=e.isInboxPage,E=l.useTranslation().t,g=o.useForm({defaultValues:m}),C=g.register,S=g.handleSubmit,L=g.reset,b=g.watch,A=g.control,y=g.setError,N=g.clearErrors,B=g.formState,I=n.useState(null),O=I[0],T=I[1],M=b(),R=innerWidth<=640,P=function(){T(null)};function D(){var e=v.reduce(function(e,n){var t;return a({},e,((t={})[null==n?void 0:n.name]="",t))},{});L(e);var n=a({},m);n.delete=[],v.forEach(function(e){n.delete.push(null==e?void 0:e.name)}),s(a({},n),!0),"mobile"===d&&f()}setTimeout(function(){P()},1e4),n.useEffect(function(){v.forEach(function(e){var n=e.pattern,t=e.name,r=e.maxLength,l=e.minLength,i=e.errorMessages,o=(u(e,p),M[t]),a=B.errors[t];n&&(new RegExp(n).test(o)||a?new RegExp(n).test(o)&&"pattern"===(null==a?void 0:a.type)&&N([t]):y(t,{type:"pattern",message:E(null==i?void 0:i.pattern)||E("PATTERN_"+t.toUpperCase()+"_FAILED")})),l&&((null==o?void 0:o.length)<l&&!a?y(t,{type:"minLength",message:E((null==i?void 0:i.minLength)||"MINLENGTH_"+t.toUpperCase()+"_FAILED")}):(null==o?void 0:o.length)>=l&&"minLength"===(null==a?void 0:a.type)&&N([t])),r&&((null==o?void 0:o.length)>r&&!a?y(t,{type:"maxLength",message:E((null==i?void 0:i.maxLength)||"MAXLENGTH_"+t.toUpperCase()+"_FAILED")}):(null==o?void 0:o.length)<=r&&"maxLength"===(null==a?void 0:a.type)&&N([t]))})},[M,B,y,N]);var w=function(e){return t.createElement(i.LinkLabel,{style:a({display:"inline"},e?{margin:0}:{}),onClick:D},E("ABG_RESET_BUTTON"))};return t.createElement(t.Fragment,null,t.createElement("form",{onSubmit:S(function(e){m.businesService?(e.mobileNumber||delete e.mobileNumber,e.delete=[],v.forEach(function(n){e[n.name]||e.delete.push(n.name)}),s(e),"mobile"===d&&f()):T({key:!0,label:"ABG_SEARCH_SELECT_AT_LEAST_SERVICE_TOAST_MESSAGE"})})},t.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:_?"24px":"revert"}},t.createElement("div",{className:"search-complaint-container"},("mobile"===d||R)&&t.createElement("div",{className:"complaint-header",style:{display:"flex",justifyContent:"space-between"}},t.createElement("h2",null,E("ES_COMMON_SEARCH_BY")),t.createElement("span",{onClick:f},t.createElement(i.CloseSvg,null))),t.createElement("div",{className:"complaint-input-container group-complaint-input-container ",style:{width:"100%"}},null==v||null===(r=v.filter(function(e){return!0}))||void 0===r?void 0:r.map(function(e,n){var r,l,u;return t.createElement("div",{key:e.name,className:"input-fields"},t.createElement("span",{className:"mobile-input"},t.createElement(i.Label,null,E(e.label)),t.createElement(o.Controller,e.type?{render:function(n){return t.createElement(null==h?void 0:h[e.type],{onChange:n.onChange,value:n.value})},name:e.name,control:A,defaultValue:""}:{render:function(n){return t.createElement("div",{className:"field-container"},null!=e&&e.componentInFront?t.createElement("span",{className:"employee-card-input employee-card-input--front",style:{flex:"none"}},null==e?void 0:e.componentInFront):null,t.createElement(i.TextInput,a({},e,{inputRef:C,watch:b,shouldUpdate:!0})))},name:e.name,control:A,defaultValue:""})),null!=B&&null!==(r=B.dirtyFields)&&void 0!==r&&r[e.name]?t.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==B||null===(l=B.errors)||void 0===l||null===(u=l[e.name])||void 0===u?void 0:u.message):null)}),"desktop"===d&&!R&&!_&&t.createElement("div",{className:"search-action-wrapper"},t.createElement(i.SubmitBar,{className:"submit-bar-search",label:E("ABG_SEARCH_BUTTON"),submit:!0}),t.createElement("div",{style:(c={width:"100%",textAlign:"right"},c.width="240px",c.textAlign="right",c.marginLeft="96px",c.marginTop="8px",c)},w()))),_&&t.createElement("div",{className:"inbox-action-container"},"desktop"===d&&!R&&t.createElement("span",{style:{paddingTop:"9px"},className:"clear-search"},w()),"desktop"===d&&!R&&t.createElement(i.SubmitBar,{style:{marginTop:"unset"},className:"submit-bar-search",label:E("ABG_SEARCH_BUTTON"),submit:!0})))),("mobile"===d||R)&&t.createElement(i.ActionBar,{className:"clear-search-container"},t.createElement("button",{className:"clear-search",style:{flex:1}},w(R)),t.createElement(i.SubmitBar,{label:E("ABG_SEARCH_BUTTON"),style:{flex:1},submit:!0}))),O&&t.createElement(i.Toast,{error:O.key,label:E(O.label),onClose:P}))},C=["tableConfig","filterComponent"],S=function(e){var o,a,c=e.filterComponent,s=u(e,C),d=l.useTranslation().t,m=Digit.SessionStorage.get("HRMS_TENANTS"),p=null==s||null===(o=s.data)||void 0===o?void 0:o.Bills,h=n.useState(function(){var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(c)})[0],S=function(e){return t.createElement("span",{className:"cell-text"},e)},L=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},b=t.useMemo(function(){return window.location.href.includes("/digit-ui/employee/bills/group-bill")?[{Header:d("ABG_COMMON_TABLE_COL_BILL_NO"),disableSortBy:!0,Cell:function(e){var n,r,l,i=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},S(v(null===(n=i.original)||void 0===n?void 0:n.businessService,null===(r=i.original)||void 0===r?void 0:r.consumerCode,null===(l=i.original)||void 0===l?void 0:l.billNumber))))}},{Header:d("ABG_COMMON_TABLE_COL_CONSUMER_NAME"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.payerName))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_EXP_DATE"),disableSortBy:!0,Cell:function(e){var n,t,r=e.row,l="NA"===(null===(n=r.original)||void 0===n?void 0:n.billDate)?d("CS_NA"):L(null===(t=r.original)||void 0===t?void 0:t.billDate);return S(d(""+l))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_AMOUNT"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.totalAmount))}},{Header:d("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.status))}}]:[{Header:d("ABG_COMMON_TABLE_COL_BILL_NO"),disableSortBy:!0,Cell:function(e){var n,r,l,i=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},S(v(null===(n=i.original)||void 0===n?void 0:n.businessService,null===(r=i.original)||void 0===r?void 0:r.consumerCode,null===(l=i.original)||void 0===l?void 0:l.billNumber))))}},{Header:d("ABG_COMMON_TABLE_COL_CONSUMER_NAME"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.payerName))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_EXP_DATE"),disableSortBy:!0,Cell:function(e){var n,t,r=e.row,l="NA"===(null===(n=r.original)||void 0===n?void 0:n.billDate)?d("CS_NA"):L(null===(t=r.original)||void 0===t?void 0:t.billDate);return S(d(""+l))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_AMOUNT"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.totalAmount))}},{Header:d("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n;return S(""+(null===(n=e.row.original)||void 0===n?void 0:n.status))}},{Header:d("ABG_COMMON_TABLE_COL_ACTION"),Cell:function(e){var n,t,r=e.row,l=null===(n=r.original)||void 0===n?void 0:n.totalAmount;return S(l>0?A(null===(t=r.original)||void 0===t?void 0:t.status,r):d("CS_NA"))}}]},[]),A=function(e,n){var l,i,o,a,u,c,s,v;if(window.location.href.includes("/digit-ui/employee/bills/group-bill"))return null;switch(e){case"ACTIVE":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null===(l=n.original)||void 0===l?void 0:l.businessService)+"/"+(null===(i=n.original)||void 0===i?void 0:i.consumerCode)+"/tenantId="+(null===(o=n.original)||void 0===o?void 0:o.tenantId)+"?workflow=mcollect"}},d("ABG_COLLECT")," ")));case"CANCELLED":case"EXPIRED":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null===(a=n.original)||void 0===a?void 0:a.businessService)+"/"+(null===(u=n.original)||void 0===u?void 0:u.consumerCode)+"/tenantId="+(null===(c=n.original)||void 0===c?void 0:c.tenantId)+"?workflow=mcollect"}},d("ABG_GENERATE_NEW_BILL"))));case"PAID":return t.createElement("div",null,t.createElement("span",{className:"link"},f(null===(s=n.original)||void 0===s?void 0:s.businessService,null===(v=n.original)||void 0===v?void 0:v.consumerCode)))}};return s.isLoading?a=t.createElement(i.Loader,null):0===(null==p?void 0:p.length)?a=t.createElement(i.Card,{style:{marginTop:20}},d("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})):(null==p?void 0:p.length)>0&&(a=t.createElement(E,{t:d,data:p,columns:b,getCellProps:function(e){return{style:{maxWidth:e.column.Header===d("HR_EMP_ID_LABEL")?"140px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:s.onPageSizeChange,currentPage:s.currentPage,onNextPage:s.onNextPage,onPrevPage:s.onPrevPage,onLastPage:s.onLastPage,onFirstPage:s.onFirstPage,pageSizeLimit:s.pageSizeLimit,onSort:s.onSort,disableSort:s.disableSort,sortParams:s.sortParams,totalRecords:s.totalRecords})),t.createElement("div",{className:"inbox-container"},!s.isSearch&&t.createElement("div",{className:"filters-container"},window.location.href.includes("/digit-ui/employee/bills/group-bill")?t.createElement(_,{parentRoute:s.parentRoute,allLinks:[{text:"ABG_SEARCH_BILL_COMMON_HEADER",link:"/digit-ui/employee/bills/inbox"}],headerText:d("ACTION_TEST_BILLGENIE"),businessService:s.businessService}):t.createElement(_,{parentRoute:s.parentRoute,allLinks:[{text:"ABG_COMMON_HEADER",link:"/digit-ui/employee/bills/group-bill"}],headerText:d("ACTION_TEST_BILLGENIE"),businessService:s.businessService}),t.createElement("div",null,t.createElement(h,{defaultSearchParams:s.defaultSearchParams,onFilterChange:s.onFilterChange,searchParams:s.searchParams,type:"desktop",tenantIds:m}))),t.createElement("div",{style:{flex:1}},t.createElement(g,{defaultSearchParams:s.defaultSearchParams,onSearch:s.onSearch,type:"desktop",tenantIds:m,searchFields:s.searchFields,isInboxPage:!(null!=s&&s.isSearch),searchParams:s.searchParams}),t.createElement("div",{className:"result",style:{marginLeft:null!=s&&s.isSearch?"":"24px",flex:1}},a)))},L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b=(function(e,n){(function(){var t="Expected a function",r="__lodash_placeholder__",l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",o="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",s="[object Function]",d="[object GeneratorFunction]",f="[object Map]",v="[object Number]",m="[object Object]",_="[object RegExp]",E="[object Set]",p="[object String]",h="[object Symbol]",g="[object WeakMap]",C="[object ArrayBuffer]",S="[object DataView]",b="[object Float32Array]",A="[object Float64Array]",y="[object Int8Array]",N="[object Int16Array]",B="[object Int32Array]",I="[object Uint8Array]",O="[object Uint16Array]",T="[object Uint32Array]",M=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,w=/[&<>"']/g,x=RegExp(D.source),k=RegExp(w.source),G=/<%-([\s\S]+?)%>/g,F=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z=/[\\^$.*+?()[\]{}|]/g,V=RegExp(z.source),Y=/^\s+/,K=/\s/,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,ie=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,ce=/['\n\r\u2028\u2029\\]/g,se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="["+de+"]",ve="["+se+"]",me="\\d+",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ee="[^\\ud800-\\udfff"+de+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",pe="\\ud83c[\\udffb-\\udfff]",he="[^\\ud800-\\udfff]",ge="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Le="(?:"+_e+"|"+Ee+")",be="(?:"+Se+"|"+Ee+")",Ae="(?:"+ve+"|"+pe+")?",ye="[\\ufe0e\\ufe0f]?"+Ae+"(?:\\u200d(?:"+[he,ge,Ce].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*",Ne="(?:"+["[\\u2700-\\u27bf]",ge,Ce].join("|")+")"+ye,Be="(?:"+[he+ve+"?",ve,ge,Ce,"[\\ud800-\\udfff]"].join("|")+")",Ie=RegExp("['’]","g"),Oe=RegExp(ve,"g"),Te=RegExp(pe+"(?="+pe+")|"+Be+ye,"g"),Me=RegExp([Se+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[fe,Se,"$"].join("|")+")",be+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[fe,Se+Le,"$"].join("|")+")",Se+"?"+Le+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Ne].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff"+se+"\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,De=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],we=-1,xe={};xe[b]=xe[A]=xe[y]=xe[N]=xe[B]=xe[I]=xe["[object Uint8ClampedArray]"]=xe[O]=xe[T]=!0,xe[i]=xe[o]=xe[C]=xe[a]=xe[S]=xe[u]=xe[c]=xe[s]=xe[f]=xe[v]=xe[m]=xe[_]=xe[E]=xe[p]=xe[g]=!1;var ke={};ke[i]=ke[o]=ke[C]=ke[S]=ke[a]=ke[u]=ke[b]=ke[A]=ke[y]=ke[N]=ke[B]=ke[f]=ke[v]=ke[m]=ke[_]=ke[E]=ke[p]=ke[h]=ke[I]=ke["[object Uint8ClampedArray]"]=ke[O]=ke[T]=!0,ke[c]=ke[s]=ke[g]=!1;var Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fe=parseFloat,Ue=parseInt,He="object"==typeof L&&L&&L.Object===Object&&L,We="object"==typeof self&&self&&self.Object===Object&&self,je=He||We||Function("return this")(),ze=n&&!n.nodeType&&n,Ve=ze&&e&&!e.nodeType&&e,Ye=Ve&&Ve.exports===ze,Ke=Ye&&He.process,qe=function(){try{return Ve&&Ve.require&&Ve.require("util").types||Ke&&Ke.binding&&Ke.binding("util")}catch(e){}}(),Xe=qe&&qe.isArrayBuffer,$e=qe&&qe.isDate,Ze=qe&&qe.isMap,Qe=qe&&qe.isRegExp,Je=qe&&qe.isSet,en=qe&&qe.isTypedArray;function nn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function tn(e,n,t,r){for(var l=-1,i=null==e?0:e.length;++l<i;){var o=e[l];n(r,o,t(o),e)}return r}function rn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e}function ln(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function on(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(!n(e[t],t,e))return!1;return!0}function an(e,n){for(var t=-1,r=null==e?0:e.length,l=0,i=[];++t<r;){var o=e[t];n(o,t,e)&&(i[l++]=o)}return i}function un(e,n){return!(null==e||!e.length)&&hn(e,n,0)>-1}function cn(e,n,t){for(var r=-1,l=null==e?0:e.length;++r<l;)if(t(n,e[r]))return!0;return!1}function sn(e,n){for(var t=-1,r=null==e?0:e.length,l=Array(r);++t<r;)l[t]=n(e[t],t,e);return l}function dn(e,n){for(var t=-1,r=n.length,l=e.length;++t<r;)e[l+t]=n[t];return e}function fn(e,n,t,r){var l=-1,i=null==e?0:e.length;for(r&&i&&(t=e[++l]);++l<i;)t=n(t,e[l],l,e);return t}function vn(e,n,t,r){var l=null==e?0:e.length;for(r&&l&&(t=e[--l]);l--;)t=n(t,e[l],l,e);return t}function mn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var _n=Ln("length");function En(e,n,t){var r;return t(e,function(e,t,l){if(n(e,t,l))return r=t,!1}),r}function pn(e,n,t,r){for(var l=e.length,i=t+(r?1:-1);r?i--:++i<l;)if(n(e[i],i,e))return i;return-1}function hn(e,n,t){return n==n?function(e,n,t){for(var r=t-1,l=e.length;++r<l;)if(e[r]===n)return r;return-1}(e,n,t):pn(e,Cn,t)}function gn(e,n,t,r){for(var l=t-1,i=e.length;++l<i;)if(r(e[l],n))return l;return-1}function Cn(e){return e!=e}function Sn(e,n){var t=null==e?0:e.length;return t?yn(e,n)/t:NaN}function Ln(e){return function(n){return null==n?void 0:n[e]}}function bn(e){return function(n){return null==e?void 0:e[n]}}function An(e,n,t,r,l){return l(e,function(e,l,i){t=r?(r=!1,e):n(t,e,l,i)}),t}function yn(e,n){for(var t,r=-1,l=e.length;++r<l;){var i=n(e[r]);void 0!==i&&(t=void 0===t?i:t+i)}return t}function Nn(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Bn(e){return e?e.slice(0,Vn(e)+1).replace(Y,""):e}function In(e){return function(n){return e(n)}}function On(e,n){return sn(n,function(n){return e[n]})}function Tn(e,n){return e.has(n)}function Mn(e,n){for(var t=-1,r=e.length;++t<r&&hn(n,e[t],0)>-1;);return t}function Rn(e,n){for(var t=e.length;t--&&hn(n,e[t],0)>-1;);return t}function Pn(e,n){for(var t=e.length,r=0;t--;)e[t]===n&&++r;return r}var Dn=bn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wn=bn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xn(e){return"\\"+Ge[e]}function kn(e){return Re.test(e)}function Gn(e){var n=-1,t=Array(e.size);return e.forEach(function(e,r){t[++n]=[r,e]}),t}function Fn(e,n){return function(t){return e(n(t))}}function Un(e,n){for(var t=-1,l=e.length,i=0,o=[];++t<l;){var a=e[t];a!==n&&a!==r||(e[t]=r,o[i++]=t)}return o}function Hn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function Wn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function jn(e){return kn(e)?function(e){for(var n=Te.lastIndex=0;Te.test(e);)++n;return n}(e):_n(e)}function zn(e){return kn(e)?function(e){return e.match(Te)||[]}(e):function(e){return e.split("")}(e)}function Vn(e){for(var n=e.length;n--&&K.test(e.charAt(n)););return n}var Yn=bn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kn=function e(n){var L,K=(n=null==n?je:Kn.defaults(je.Object(),n,Kn.pick(je,De))).Array,se=n.Date,de=n.Error,fe=n.Function,ve=n.Math,me=n.Object,_e=n.RegExp,Ee=n.String,pe=n.TypeError,he=K.prototype,ge=me.prototype,Ce=n["__core-js_shared__"],Se=fe.prototype.toString,Le=ge.hasOwnProperty,be=0,Ae=(L=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",ye=ge.toString,Ne=Se.call(me),Be=je._,Te=_e("^"+Se.call(Le).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ye?n.Buffer:void 0,Ge=n.Symbol,He=n.Uint8Array,We=Re?Re.allocUnsafe:void 0,ze=Fn(me.getPrototypeOf,me),Ve=me.create,Ke=ge.propertyIsEnumerable,qe=he.splice,_n=Ge?Ge.isConcatSpreadable:void 0,bn=Ge?Ge.iterator:void 0,qn=Ge?Ge.toStringTag:void 0,Xn=function(){try{var e=Ql(me,"defineProperty");return e({},"",{}),e}catch(e){}}(),$n=n.clearTimeout!==je.clearTimeout&&n.clearTimeout,Zn=se&&se.now!==je.Date.now&&se.now,Qn=n.setTimeout!==je.setTimeout&&n.setTimeout,Jn=ve.ceil,et=ve.floor,nt=me.getOwnPropertySymbols,tt=Re?Re.isBuffer:void 0,rt=n.isFinite,lt=he.join,it=Fn(me.keys,me),ot=ve.max,at=ve.min,ut=se.now,ct=n.parseInt,st=ve.random,dt=he.reverse,ft=Ql(n,"DataView"),vt=Ql(n,"Map"),mt=Ql(n,"Promise"),_t=Ql(n,"Set"),Et=Ql(n,"WeakMap"),pt=Ql(me,"create"),ht=Et&&new Et,gt={},Ct=Bi(ft),St=Bi(vt),Lt=Bi(mt),bt=Bi(_t),At=Bi(Et),yt=Ge?Ge.prototype:void 0,Nt=yt?yt.valueOf:void 0,Bt=yt?yt.toString:void 0;function It(e){if(Vo(e)&&!Do(e)&&!(e instanceof Rt)){if(e instanceof Mt)return e;if(Le.call(e,"__wrapped__"))return Ii(e)}return new Mt(e)}var Ot=function(){function e(){}return function(n){if(!zo(n))return{};if(Ve)return Ve(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function Tt(){}function Mt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=void 0}function Rt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Pt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Dt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function wt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function xt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new wt;++n<t;)this.add(e[n])}function kt(e){var n=this.__data__=new Dt(e);this.size=n.size}function Gt(e,n){var t=Do(e),r=!t&&Po(e),l=!t&&!r&&Go(e),i=!t&&!r&&!l&&Jo(e),o=t||r||l||i,a=o?Nn(e.length,Ee):[],u=a.length;for(var c in e)!n&&!Le.call(e,c)||o&&("length"==c||l&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ii(c,u))||a.push(c);return a}function Ft(e){var n=e.length;return n?e[wr(0,n-1)]:void 0}function Ut(e,n){return Li(El(e),Xt(n,0,e.length))}function Ht(e){return Li(El(e))}function Wt(e,n,t){(void 0!==t&&!To(e[n],t)||void 0===t&&!(n in e))&&Kt(e,n,t)}function jt(e,n,t){var r=e[n];Le.call(e,n)&&To(r,t)&&(void 0!==t||n in e)||Kt(e,n,t)}function zt(e,n){for(var t=e.length;t--;)if(To(e[t][0],n))return t;return-1}function Vt(e,n,t,r){return er(e,function(e,l,i){n(r,e,t(e),i)}),r}function Yt(e,n){return e&&pl(n,Sa(n),e)}function Kt(e,n,t){"__proto__"==n&&Xn?Xn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function qt(e,n){for(var t=-1,r=n.length,l=K(r),i=null==e;++t<r;)l[t]=i?void 0:Ea(e,n[t]);return l}function Xt(e,n,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==n&&(e=e>=n?e:n)),e}function $t(e,n,t,r,l,o){var c,g=1&n,L=2&n,M=4&n;if(t&&(c=l?t(e,r,l,o):t(e)),void 0!==c)return c;if(!zo(e))return e;var R=Do(e);if(R){if(c=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&Le.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(e),!g)return El(e,c)}else{var P=ni(e),D=P==s||P==d;if(Go(e))return sl(e,g);if(P==m||P==i||D&&!l){if(c=L||D?{}:ri(e),!g)return L?function(e,n){return pl(e,ei(e),n)}(e,function(e,n){return e&&pl(n,La(n),e)}(c,e)):function(e,n){return pl(e,Jl(e),n)}(e,Yt(c,e))}else{if(!ke[P])return l?e:{};c=function(e,n,t){var r=e.constructor;switch(n){case C:return dl(e);case a:case u:return new r(+e);case S:return function(e,n){var t=n?dl(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case b:case A:case y:case N:case B:case I:case"[object Uint8ClampedArray]":case O:case T:return fl(e,t);case f:return new r;case v:case p:return new r(e);case _:return function(e){var n=new e.constructor(e.source,ne.exec(e));return n.lastIndex=e.lastIndex,n}(e);case E:return new r;case h:return Nt?me(Nt.call(e)):{}}}(e,P,g)}}o||(o=new kt);var w=o.get(e);if(w)return w;o.set(e,c),$o(e)?e.forEach(function(r){c.add($t(r,n,t,r,e,o))}):Yo(e)&&e.forEach(function(r,l){c.set(l,$t(r,n,t,l,e,o))});var x=R?void 0:(M?L?Vl:zl:L?La:Sa)(e);return rn(x||e,function(r,l){x&&(r=e[l=r]),jt(c,l,$t(r,n,t,l,e,o))}),c}function Zt(e,n,t){var r=t.length;if(null==e)return!r;for(e=me(e);r--;){var l=t[r],i=e[l];if(void 0===i&&!(l in e)||!(0,n[l])(i))return!1}return!0}function Qt(e,n,r){if("function"!=typeof e)throw new pe(t);return hi(function(){e.apply(void 0,r)},n)}function Jt(e,n,t,r){var l=-1,i=un,o=!0,a=e.length,u=[],c=n.length;if(!a)return u;t&&(n=sn(n,In(t))),r?(i=cn,o=!1):n.length>=200&&(i=Tn,o=!1,n=new xt(n));e:for(;++l<a;){var s=e[l],d=null==t?s:t(s);if(s=r||0!==s?s:0,o&&d==d){for(var f=c;f--;)if(n[f]===d)continue e;u.push(s)}else i(n,d,r)||u.push(s)}return u}It.templateSettings={escape:G,evaluate:F,interpolate:U,variable:"",imports:{_:It}},(It.prototype=Tt.prototype).constructor=It,(Mt.prototype=Ot(Tt.prototype)).constructor=Mt,(Rt.prototype=Ot(Tt.prototype)).constructor=Rt,Pt.prototype.clear=function(){this.__data__=pt?pt(null):{},this.size=0},Pt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Pt.prototype.get=function(e){var n=this.__data__;if(pt){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return Le.call(n,e)?n[e]:void 0},Pt.prototype.has=function(e){var n=this.__data__;return pt?void 0!==n[e]:Le.call(n,e)},Pt.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=pt&&void 0===n?"__lodash_hash_undefined__":n,this},Dt.prototype.clear=function(){this.__data__=[],this.size=0},Dt.prototype.delete=function(e){var n=this.__data__,t=zt(n,e);return!(t<0||(t==n.length-1?n.pop():qe.call(n,t,1),--this.size,0))},Dt.prototype.get=function(e){var n=this.__data__,t=zt(n,e);return t<0?void 0:n[t][1]},Dt.prototype.has=function(e){return zt(this.__data__,e)>-1},Dt.prototype.set=function(e,n){var t=this.__data__,r=zt(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new Pt,map:new(vt||Dt),string:new Pt}},wt.prototype.delete=function(e){var n=$l(this,e).delete(e);return this.size-=n?1:0,n},wt.prototype.get=function(e){return $l(this,e).get(e)},wt.prototype.has=function(e){return $l(this,e).has(e)},wt.prototype.set=function(e,n){var t=$l(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},xt.prototype.add=xt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xt.prototype.has=function(e){return this.__data__.has(e)},kt.prototype.clear=function(){this.__data__=new Dt,this.size=0},kt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},kt.prototype.get=function(e){return this.__data__.get(e)},kt.prototype.has=function(e){return this.__data__.has(e)},kt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Dt){var r=t.__data__;if(!vt||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new wt(r)}return t.set(e,n),this.size=t.size,this};var er=Cl(ur),nr=Cl(cr,!0);function tr(e,n){var t=!0;return er(e,function(e,r,l){return t=!!n(e,r,l)}),t}function rr(e,n,t){for(var r=-1,l=e.length;++r<l;){var i=e[r],o=n(i);if(null!=o&&(void 0===a?o==o&&!Qo(o):t(o,a)))var a=o,u=i}return u}function lr(e,n){var t=[];return er(e,function(e,r,l){n(e,r,l)&&t.push(e)}),t}function ir(e,n,t,r,l){var i=-1,o=e.length;for(t||(t=li),l||(l=[]);++i<o;){var a=e[i];n>0&&t(a)?n>1?ir(a,n-1,t,r,l):dn(l,a):r||(l[l.length]=a)}return l}var or=Sl(),ar=Sl(!0);function ur(e,n){return e&&or(e,n,Sa)}function cr(e,n){return e&&ar(e,n,Sa)}function sr(e,n){return an(n,function(n){return Ho(e[n])})}function dr(e,n){for(var t=0,r=(n=ol(n,e)).length;null!=e&&t<r;)e=e[Ni(n[t++])];return t&&t==r?e:void 0}function fr(e,n,t){var r=n(e);return Do(e)?r:dn(r,t(e))}function vr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qn&&qn in me(e)?function(e){var n=Le.call(e,qn),t=e[qn];try{e[qn]=void 0;var r=!0}catch(e){}var l=ye.call(e);return r&&(n?e[qn]=t:delete e[qn]),l}(e):function(e){return ye.call(e)}(e)}function mr(e,n){return e>n}function _r(e,n){return null!=e&&Le.call(e,n)}function Er(e,n){return null!=e&&n in me(e)}function pr(e,n,t){for(var r=t?cn:un,l=e[0].length,i=e.length,o=i,a=K(i),u=Infinity,c=[];o--;){var s=e[o];o&&n&&(s=sn(s,In(n))),u=at(s.length,u),a[o]=!t&&(n||l>=120&&s.length>=120)?new xt(o&&s):void 0}s=e[0];var d=-1,f=a[0];e:for(;++d<l&&c.length<u;){var v=s[d],m=n?n(v):v;if(v=t||0!==v?v:0,!(f?Tn(f,m):r(c,m,t))){for(o=i;--o;){var _=a[o];if(!(_?Tn(_,m):r(e[o],m,t)))continue e}f&&f.push(m),c.push(v)}}return c}function hr(e,n,t){var r=null==(e=mi(e,n=ol(n,e)))?e:e[Ni(Fi(n))];return null==r?void 0:nn(r,e,t)}function gr(e){return Vo(e)&&vr(e)==i}function Cr(e,n,t,r,l){return e===n||(null==e||null==n||!Vo(e)&&!Vo(n)?e!=e&&n!=n:function(e,n,t,r,l,s){var d=Do(e),g=Do(n),L=d?o:ni(e),b=g?o:ni(n),A=(L=L==i?m:L)==m,y=(b=b==i?m:b)==m,N=L==b;if(N&&Go(e)){if(!Go(n))return!1;d=!0,A=!1}if(N&&!A)return s||(s=new kt),d||Jo(e)?Wl(e,n,t,r,l,s):function(e,n,t,r,l,i,o){switch(t){case S:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case C:return!(e.byteLength!=n.byteLength||!i(new He(e),new He(n)));case a:case u:case v:return To(+e,+n);case c:return e.name==n.name&&e.message==n.message;case _:case p:return e==n+"";case f:var s=Gn;case E:if(s||(s=Hn),e.size!=n.size&&!(1&r))return!1;var d=o.get(e);if(d)return d==n;r|=2,o.set(e,n);var m=Wl(s(e),s(n),r,l,i,o);return o.delete(e),m;case h:if(Nt)return Nt.call(e)==Nt.call(n)}return!1}(e,n,L,t,r,l,s);if(!(1&t)){var B=A&&Le.call(e,"__wrapped__"),I=y&&Le.call(n,"__wrapped__");if(B||I){var O=B?e.value():e,T=I?n.value():n;return s||(s=new kt),l(O,T,t,r,s)}}return!!N&&(s||(s=new kt),function(e,n,t,r,l,i){var o=1&t,a=zl(e),u=a.length;if(u!=zl(n).length&&!o)return!1;for(var c=u;c--;){var s=a[c];if(!(o?s in n:Le.call(n,s)))return!1}var d=i.get(e),f=i.get(n);if(d&&f)return d==n&&f==e;var v=!0;i.set(e,n),i.set(n,e);for(var m=o;++c<u;){var _=e[s=a[c]],E=n[s];if(r)var p=o?r(E,_,s,n,e,i):r(_,E,s,e,n,i);if(!(void 0===p?_===E||l(_,E,t,r,i):p)){v=!1;break}m||(m="constructor"==s)}if(v&&!m){var h=e.constructor,g=n.constructor;h==g||!("constructor"in e)||!("constructor"in n)||"function"==typeof h&&h instanceof h&&"function"==typeof g&&g instanceof g||(v=!1)}return i.delete(e),i.delete(n),v}(e,n,t,r,l,s))}(e,n,t,r,Cr,l))}function Sr(e,n,t,r){var l=t.length,i=l,o=!r;if(null==e)return!i;for(e=me(e);l--;){var a=t[l];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++l<i;){var u=(a=t[l])[0],c=e[u],s=a[1];if(o&&a[2]){if(void 0===c&&!(u in e))return!1}else{var d=new kt;if(r)var f=r(c,s,u,e,n,d);if(!(void 0===f?Cr(s,c,3,r,d):f))return!1}}return!0}function Lr(e){return!(!zo(e)||(n=e,Ae&&Ae in n))&&(Ho(e)?Te:le).test(Bi(e));var n}function br(e){return"function"==typeof e?e:null==e?Ka:"object"==typeof e?Do(e)?Ir(e[0],e[1]):Br(e):tu(e)}function Ar(e){if(!si(e))return it(e);var n=[];for(var t in me(e))Le.call(e,t)&&"constructor"!=t&&n.push(t);return n}function yr(e,n){return e<n}function Nr(e,n){var t=-1,r=xo(e)?K(e.length):[];return er(e,function(e,l,i){r[++t]=n(e,l,i)}),r}function Br(e){var n=Zl(e);return 1==n.length&&n[0][2]?fi(n[0][0],n[0][1]):function(t){return t===e||Sr(t,e,n)}}function Ir(e,n){return ai(e)&&di(n)?fi(Ni(e),n):function(t){var r=Ea(t,e);return void 0===r&&r===n?pa(t,e):Cr(n,r,3)}}function Or(e,n,t,r,l){e!==n&&or(n,function(i,o){if(l||(l=new kt),zo(i))!function(e,n,t,r,l,i,o){var a=Ei(e,t),u=Ei(n,t),c=o.get(u);if(c)Wt(e,t,c);else{var s=i?i(a,u,t+"",e,n,o):void 0,d=void 0===s;if(d){var f=Do(u),v=!f&&Go(u),m=!f&&!v&&Jo(u);s=u,f||v||m?Do(a)?s=a:ko(a)?s=El(a):v?(d=!1,s=sl(u,!0)):m?(d=!1,s=fl(u,!0)):s=[]:qo(u)||Po(u)?(s=a,Po(a)?s=aa(a):zo(a)&&!Ho(a)||(s=ri(u))):d=!1}d&&(o.set(u,s),l(s,u,r,i,o),o.delete(u)),Wt(e,t,s)}}(e,n,o,t,Or,r,l);else{var a=r?r(Ei(e,o),i,o+"",e,n,l):void 0;void 0===a&&(a=i),Wt(e,o,a)}},La)}function Tr(e,n){var t=e.length;if(t)return ii(n+=n<0?t:0,t)?e[n]:void 0}function Mr(e,n,t){n=n.length?sn(n,function(e){return Do(e)?function(n){return dr(n,1===e.length?e[0]:e)}:e}):[Ka];var r=-1;return n=sn(n,In(Xl())),function(e,n){var r=e.length;for(e.sort(function(e,n){return function(e,n,t){for(var r=-1,l=e.criteria,i=n.criteria,o=l.length,a=t.length;++r<o;){var u=vl(l[r],i[r]);if(u)return r>=a?u:u*("desc"==t[r]?-1:1)}return e.index-n.index}(e,n,t)});r--;)e[r]=e[r].value;return e}(Nr(e,function(e,t,l){return{criteria:sn(n,function(n){return n(e)}),index:++r,value:e}}))}function Rr(e,n,t){for(var r=-1,l=n.length,i={};++r<l;){var o=n[r],a=dr(e,o);t(a,o)&&Ur(i,ol(o,e),a)}return i}function Pr(e,n,t,r){var l=r?gn:hn,i=-1,o=n.length,a=e;for(e===n&&(n=El(n)),t&&(a=sn(e,In(t)));++i<o;)for(var u=0,c=n[i],s=t?t(c):c;(u=l(a,s,u,r))>-1;)a!==e&&qe.call(a,u,1),qe.call(e,u,1);return e}function Dr(e,n){for(var t=e?n.length:0,r=t-1;t--;){var l=n[t];if(t==r||l!==i){var i=l;ii(l)?qe.call(e,l,1):Qr(e,l)}}return e}function wr(e,n){return e+et(st()*(n-e+1))}function xr(e,n){var t="";if(!e||n<1||n>9007199254740991)return t;do{n%2&&(t+=e),(n=et(n/2))&&(e+=e)}while(n);return t}function kr(e,n){return gi(vi(e,n,Ka),e+"")}function Gr(e){return Ft(Ta(e))}function Fr(e,n){var t=Ta(e);return Li(t,Xt(n,0,t.length))}function Ur(e,n,t,r){if(!zo(e))return e;for(var l=-1,i=(n=ol(n,e)).length,o=i-1,a=e;null!=a&&++l<i;){var u=Ni(n[l]),c=t;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(l!=o){var s=a[u];void 0===(c=r?r(s,u,a):void 0)&&(c=zo(s)?s:ii(n[l+1])?[]:{})}jt(a,u,c),a=a[u]}return e}var Hr=ht?function(e,n){return ht.set(e,n),e}:Ka,Wr=Xn?function(e,n){return Xn(e,"toString",{configurable:!0,enumerable:!1,value:za(n),writable:!0})}:Ka;function jr(e){return Li(Ta(e))}function zr(e,n,t){var r=-1,l=e.length;n<0&&(n=-n>l?0:l+n),(t=t>l?l:t)<0&&(t+=l),l=n>t?0:t-n>>>0,n>>>=0;for(var i=K(l);++r<l;)i[r]=e[r+n];return i}function Vr(e,n){var t;return er(e,function(e,r,l){return!(t=n(e,r,l))}),!!t}function Yr(e,n,t){var r=0,l=null==e?r:e.length;if("number"==typeof n&&n==n&&l<=2147483647){for(;r<l;){var i=r+l>>>1,o=e[i];null!==o&&!Qo(o)&&(t?o<=n:o<n)?r=i+1:l=i}return l}return Kr(e,n,Ka,t)}function Kr(e,n,t,r){var l=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(n=t(n))!=n,a=null===n,u=Qo(n),c=void 0===n;l<i;){var s=et((l+i)/2),d=t(e[s]),f=void 0!==d,v=null===d,m=d==d,_=Qo(d);if(o)var E=r||m;else E=c?m&&(r||f):a?m&&f&&(r||!v):u?m&&f&&!v&&(r||!_):!v&&!_&&(r?d<=n:d<n);E?l=s+1:i=s}return at(i,4294967294)}function qr(e,n){for(var t=-1,r=e.length,l=0,i=[];++t<r;){var o=e[t],a=n?n(o):o;if(!t||!To(a,u)){var u=a;i[l++]=0===o?0:o}}return i}function Xr(e){return"number"==typeof e?e:Qo(e)?NaN:+e}function $r(e){if("string"==typeof e)return e;if(Do(e))return sn(e,$r)+"";if(Qo(e))return Bt?Bt.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Zr(e,n,t){var r=-1,l=un,i=e.length,o=!0,a=[],u=a;if(t)o=!1,l=cn;else if(i>=200){var c=n?null:xl(e);if(c)return Hn(c);o=!1,l=Tn,u=new xt}else u=n?[]:a;e:for(;++r<i;){var s=e[r],d=n?n(s):s;if(s=t||0!==s?s:0,o&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;n&&u.push(d),a.push(s)}else l(u,d,t)||(u!==a&&u.push(d),a.push(s))}return a}function Qr(e,n){return null==(e=mi(e,n=ol(n,e)))||delete e[Ni(Fi(n))]}function Jr(e,n,t,r){return Ur(e,n,t(dr(e,n)),r)}function el(e,n,t,r){for(var l=e.length,i=r?l:-1;(r?i--:++i<l)&&n(e[i],i,e););return t?zr(e,r?0:i,r?i+1:l):zr(e,r?i+1:0,r?l:i)}function nl(e,n){var t=e;return t instanceof Rt&&(t=t.value()),fn(n,function(e,n){return n.func.apply(n.thisArg,dn([e],n.args))},t)}function tl(e,n,t){var r=e.length;if(r<2)return r?Zr(e[0]):[];for(var l=-1,i=K(r);++l<r;)for(var o=e[l],a=-1;++a<r;)a!=l&&(i[l]=Jt(i[l]||o,e[a],n,t));return Zr(ir(i,1),n,t)}function rl(e,n,t){for(var r=-1,l=e.length,i=n.length,o={};++r<l;)t(o,e[r],r<i?n[r]:void 0);return o}function ll(e){return ko(e)?e:[]}function il(e){return"function"==typeof e?e:Ka}function ol(e,n){return Do(e)?e:ai(e,n)?[e]:yi(ua(e))}var al=kr;function ul(e,n,t){var r=e.length;return t=void 0===t?r:t,!n&&t>=r?e:zr(e,n,t)}var cl=$n||function(e){return je.clearTimeout(e)};function sl(e,n){if(n)return e.slice();var t=e.length,r=We?We(t):new e.constructor(t);return e.copy(r),r}function dl(e){var n=new e.constructor(e.byteLength);return new He(n).set(new He(e)),n}function fl(e,n){var t=n?dl(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function vl(e,n){if(e!==n){var t=void 0!==e,r=null===e,l=e==e,i=Qo(e),o=void 0!==n,a=null===n,u=n==n,c=Qo(n);if(!a&&!c&&!i&&e>n||i&&o&&u&&!a&&!c||r&&o&&u||!t&&u||!l)return 1;if(!r&&!i&&!c&&e<n||c&&t&&l&&!r&&!i||a&&t&&l||!o&&l||!u)return-1}return 0}function ml(e,n,t,r){for(var l=-1,i=e.length,o=t.length,a=-1,u=n.length,c=ot(i-o,0),s=K(u+c),d=!r;++a<u;)s[a]=n[a];for(;++l<o;)(d||l<i)&&(s[t[l]]=e[l]);for(;c--;)s[a++]=e[l++];return s}function _l(e,n,t,r){for(var l=-1,i=e.length,o=-1,a=t.length,u=-1,c=n.length,s=ot(i-a,0),d=K(s+c),f=!r;++l<s;)d[l]=e[l];for(var v=l;++u<c;)d[v+u]=n[u];for(;++o<a;)(f||l<i)&&(d[v+t[o]]=e[l++]);return d}function El(e,n){var t=-1,r=e.length;for(n||(n=K(r));++t<r;)n[t]=e[t];return n}function pl(e,n,t,r){var l=!t;t||(t={});for(var i=-1,o=n.length;++i<o;){var a=n[i],u=r?r(t[a],e[a],a,t,e):void 0;void 0===u&&(u=e[a]),l?Kt(t,a,u):jt(t,a,u)}return t}function hl(e,n){return function(t,r){var l=Do(t)?tn:Vt,i=n?n():{};return l(t,e,Xl(r,2),i)}}function gl(e){return kr(function(n,t){var r=-1,l=t.length,i=l>1?t[l-1]:void 0,o=l>2?t[2]:void 0;for(i=e.length>3&&"function"==typeof i?(l--,i):void 0,o&&oi(t[0],t[1],o)&&(i=l<3?void 0:i,l=1),n=me(n);++r<l;){var a=t[r];a&&e(n,a,r,i)}return n})}function Cl(e,n){return function(t,r){if(null==t)return t;if(!xo(t))return e(t,r);for(var l=t.length,i=n?l:-1,o=me(t);(n?i--:++i<l)&&!1!==r(o[i],i,o););return t}}function Sl(e){return function(n,t,r){for(var l=-1,i=me(n),o=r(n),a=o.length;a--;){var u=o[e?a:++l];if(!1===t(i[u],u,i))break}return n}}function Ll(e){return function(n){var t=kn(n=ua(n))?zn(n):void 0,r=t?t[0]:n.charAt(0),l=t?ul(t,1).join(""):n.slice(1);return r[e]()+l}}function bl(e){return function(n){return fn(Ha(Pa(n).replace(Ie,"")),e,"")}}function Al(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Ot(e.prototype),r=e.apply(t,n);return zo(r)?r:t}}function yl(e){return function(n,t,r){var l=me(n);if(!xo(n)){var i=Xl(t,3);n=Sa(n),t=function(e){return i(l[e],e,l)}}var o=e(n,t,r);return o>-1?l[i?n[o]:o]:void 0}}function Nl(e){return jl(function(n){var r=n.length,l=r,i=Mt.prototype.thru;for(e&&n.reverse();l--;){var o=n[l];if("function"!=typeof o)throw new pe(t);if(i&&!a&&"wrapper"==Kl(o))var a=new Mt([],!0)}for(l=a?l:r;++l<r;){var u=Kl(o=n[l]),c="wrapper"==u?Yl(o):void 0;a=c&&ui(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Kl(c[0])].apply(a,c[3]):1==o.length&&ui(o)?a[u]():a.thru(o)}return function(){var e=arguments,t=e[0];if(a&&1==e.length&&Do(t))return a.plant(t).value();for(var l=0,i=r?n[l].apply(this,e):t;++l<r;)i=n[l].call(this,i);return i}})}function Bl(e,n,t,r,l,i,o,a,u,c){var s=128&n,d=1&n,f=2&n,v=24&n,m=512&n,_=f?void 0:Al(e);return function E(){for(var p=arguments.length,h=K(p),g=p;g--;)h[g]=arguments[g];if(v)var C=ql(E),S=Pn(h,C);if(r&&(h=ml(h,r,l,v)),i&&(h=_l(h,i,o,v)),p-=S,v&&p<c){var L=Un(h,C);return Dl(e,n,Bl,E.placeholder,t,h,L,a,u,c-p)}var b=d?t:this,A=f?b[e]:e;return p=h.length,a?h=_i(h,a):m&&p>1&&h.reverse(),s&&u<p&&(h.length=u),this&&this!==je&&this instanceof E&&(A=_||Al(A)),A.apply(b,h)}}function Il(e,n){return function(t,r){return function(e,n,t,r){return ur(e,function(e,l,i){n(r,t(e),l,i)}),r}(t,e,n(r),{})}}function Ol(e,n){return function(t,r){var l;if(void 0===t&&void 0===r)return n;if(void 0!==t&&(l=t),void 0!==r){if(void 0===l)return r;"string"==typeof t||"string"==typeof r?(t=$r(t),r=$r(r)):(t=Xr(t),r=Xr(r)),l=e(t,r)}return l}}function Tl(e){return jl(function(n){return n=sn(n,In(Xl())),kr(function(t){var r=this;return e(n,function(e){return nn(e,r,t)})})})}function Ml(e,n){var t=(n=void 0===n?" ":$r(n)).length;if(t<2)return t?xr(n,e):n;var r=xr(n,Jn(e/jn(n)));return kn(n)?ul(zn(r),0,e).join(""):r.slice(0,e)}function Rl(e){return function(n,t,r){return r&&"number"!=typeof r&&oi(n,t,r)&&(t=r=void 0),n=ra(n),void 0===t?(t=n,n=0):t=ra(t),function(e,n,t,r){for(var l=-1,i=ot(Jn((n-e)/(t||1)),0),o=K(i);i--;)o[r?i:++l]=e,e+=t;return o}(n,t,r=void 0===r?n<t?1:-1:ra(r),e)}}function Pl(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=oa(n),t=oa(t)),e(n,t)}}function Dl(e,n,t,r,l,i,o,a,u,c){var s=8&n;n|=s?32:64,4&(n&=~(s?64:32))||(n&=-4);var d=[e,n,l,s?i:void 0,s?o:void 0,s?void 0:i,s?void 0:o,a,u,c],f=t.apply(void 0,d);return ui(e)&&pi(f,d),f.placeholder=r,Ci(f,e,n)}function wl(e){var n=ve[e];return function(e,t){if(e=oa(e),(t=null==t?0:at(la(t),292))&&rt(e)){var r=(ua(e)+"e").split("e");return+((r=(ua(n(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}var xl=_t&&1/Hn(new _t([,-0]))[1]==1/0?function(e){return new _t(e)}:Qa;function kl(e){return function(n){var t=ni(n);return t==f?Gn(n):t==E?Wn(n):function(e,n){return sn(n,function(n){return[n,e[n]]})}(n,e(n))}}function Gl(e,n,l,i,o,a,u,c){var s=2&n;if(!s&&"function"!=typeof e)throw new pe(t);var d=i?i.length:0;if(d||(n&=-97,i=o=void 0),u=void 0===u?u:ot(la(u),0),c=void 0===c?c:la(c),d-=o?o.length:0,64&n){var f=i,v=o;i=o=void 0}var m=s?void 0:Yl(e),_=[e,n,l,i,o,f,v,a,u,c];if(m&&function(e,n){var t=e[1],l=n[1],i=t|l;if(!(i<131||128==l&&8==t||128==l&&256==t&&e[7].length<=n[8]||384==l&&n[7].length<=n[8]&&8==t))return e;1&l&&(e[2]=n[2],i|=1&t?0:4);var o=n[3];if(o){var a=e[3];e[3]=a?ml(a,o,n[4]):o,e[4]=a?Un(e[3],r):n[4]}(o=n[5])&&(e[5]=(a=e[5])?_l(a,o,n[6]):o,e[6]=a?Un(e[5],r):n[6]),(o=n[7])&&(e[7]=o),128&l&&(e[8]=null==e[8]?n[8]:at(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=i}(_,m),e=_[0],n=_[1],l=_[2],i=_[3],o=_[4],!(c=_[9]=void 0===_[9]?s?0:e.length:ot(_[9]-d,0))&&24&n&&(n&=-25),n&&1!=n)E=8==n||16==n?function(e,n,t){var r=Al(e);return function l(){for(var i=arguments.length,o=K(i),a=i,u=ql(l);a--;)o[a]=arguments[a];var c=i<3&&o[0]!==u&&o[i-1]!==u?[]:Un(o,u);if((i-=c.length)<t)return Dl(e,n,Bl,l.placeholder,void 0,o,c,void 0,void 0,t-i);var s=this&&this!==je&&this instanceof l?r:e;return nn(s,this,o)}}(e,n,c):32!=n&&33!=n||o.length?Bl.apply(void 0,_):function(e,n,t,r){var l=1&n,i=Al(e);return function n(){for(var o=-1,a=arguments.length,u=-1,c=r.length,s=K(c+a),d=this&&this!==je&&this instanceof n?i:e;++u<c;)s[u]=r[u];for(;a--;)s[u++]=arguments[++o];return nn(d,l?t:this,s)}}(e,n,l,i);else var E=function(e,n,t){var r=1&n,l=Al(e);return function n(){var i=this&&this!==je&&this instanceof n?l:e;return i.apply(r?t:this,arguments)}}(e,n,l);return Ci((m?Hr:pi)(E,_),e,n)}function Fl(e,n,t,r){return void 0===e||To(e,ge[t])&&!Le.call(r,t)?n:e}function Ul(e,n,t,r,l,i){return zo(e)&&zo(n)&&(i.set(n,e),Or(e,n,void 0,Ul,i),i.delete(n)),e}function Hl(e){return qo(e)?void 0:e}function Wl(e,n,t,r,l,i){var o=1&t,a=e.length,u=n.length;if(a!=u&&!(o&&u>a))return!1;var c=i.get(e),s=i.get(n);if(c&&s)return c==n&&s==e;var d=-1,f=!0,v=2&t?new xt:void 0;for(i.set(e,n),i.set(n,e);++d<a;){var m=e[d],_=n[d];if(r)var E=o?r(_,m,d,n,e,i):r(m,_,d,e,n,i);if(void 0!==E){if(E)continue;f=!1;break}if(v){if(!mn(n,function(e,n){if(!Tn(v,n)&&(m===e||l(m,e,t,r,i)))return v.push(n)})){f=!1;break}}else if(m!==_&&!l(m,_,t,r,i)){f=!1;break}}return i.delete(e),i.delete(n),f}function jl(e){return gi(vi(e,void 0,Di),e+"")}function zl(e){return fr(e,Sa,Jl)}function Vl(e){return fr(e,La,ei)}var Yl=ht?function(e){return ht.get(e)}:Qa;function Kl(e){for(var n=e.name+"",t=gt[n],r=Le.call(gt,n)?t.length:0;r--;){var l=t[r],i=l.func;if(null==i||i==e)return l.name}return n}function ql(e){return(Le.call(It,"placeholder")?It:e).placeholder}function Xl(){var e=It.iteratee||qa;return e=e===qa?br:e,arguments.length?e(arguments[0],arguments[1]):e}function $l(e,n){var t,r,l=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?l["string"==typeof n?"string":"hash"]:l.map}function Zl(e){for(var n=Sa(e),t=n.length;t--;){var r=n[t],l=e[r];n[t]=[r,l,di(l)]}return n}function Ql(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return Lr(t)?t:void 0}var Jl=nt?function(e){return null==e?[]:(e=me(e),an(nt(e),function(n){return Ke.call(e,n)}))}:iu,ei=nt?function(e){for(var n=[];e;)dn(n,Jl(e)),e=ze(e);return n}:iu,ni=vr;function ti(e,n,t){for(var r=-1,l=(n=ol(n,e)).length,i=!1;++r<l;){var o=Ni(n[r]);if(!(i=null!=e&&t(e,o)))break;e=e[o]}return i||++r!=l?i:!!(l=null==e?0:e.length)&&jo(l)&&ii(o,l)&&(Do(e)||Po(e))}function ri(e){return"function"!=typeof e.constructor||si(e)?{}:Ot(ze(e))}function li(e){return Do(e)||Po(e)||!!(_n&&e&&e[_n])}function ii(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&oe.test(e))&&e>-1&&e%1==0&&e<n}function oi(e,n,t){if(!zo(t))return!1;var r=typeof n;return!!("number"==r?xo(t)&&ii(n,t.length):"string"==r&&n in t)&&To(t[n],e)}function ai(e,n){if(Do(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Qo(e))||W.test(e)||!H.test(e)||null!=n&&e in me(n)}function ui(e){var n=Kl(e),t=It[n];if("function"!=typeof t||!(n in Rt.prototype))return!1;if(e===t)return!0;var r=Yl(t);return!!r&&e===r[0]}(ft&&ni(new ft(new ArrayBuffer(1)))!=S||vt&&ni(new vt)!=f||mt&&"[object Promise]"!=ni(mt.resolve())||_t&&ni(new _t)!=E||Et&&ni(new Et)!=g)&&(ni=function(e){var n=vr(e),t=n==m?e.constructor:void 0,r=t?Bi(t):"";if(r)switch(r){case Ct:return S;case St:return f;case Lt:return"[object Promise]";case bt:return E;case At:return g}return n});var ci=Ce?Ho:ou;function si(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||ge)}function di(e){return e==e&&!zo(e)}function fi(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in me(t))}}function vi(e,n,t){return n=ot(void 0===n?e.length-1:n,0),function(){for(var r=arguments,l=-1,i=ot(r.length-n,0),o=K(i);++l<i;)o[l]=r[n+l];l=-1;for(var a=K(n+1);++l<n;)a[l]=r[l];return a[n]=t(o),nn(e,this,a)}}function mi(e,n){return n.length<2?e:dr(e,zr(n,0,-1))}function _i(e,n){for(var t=e.length,r=at(n.length,t),l=El(e);r--;){var i=n[r];e[r]=ii(i,t)?l[i]:void 0}return e}function Ei(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var pi=Si(Hr),hi=Qn||function(e,n){return je.setTimeout(e,n)},gi=Si(Wr);function Ci(e,n,t){var r=n+"";return gi(e,function(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(q,"{\n/* [wrapped with "+n+"] */\n")}(r,function(e,n){return rn(l,function(t){var r="_."+t[0];n&t[1]&&!un(e,r)&&e.push(r)}),e.sort()}(function(e){var n=e.match(X);return n?n[1].split($):[]}(r),t)))}function Si(e){var n=0,t=0;return function(){var r=ut(),l=16-(r-t);if(t=r,l>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function Li(e,n){var t=-1,r=e.length,l=r-1;for(n=void 0===n?r:n;++t<n;){var i=wr(t,l),o=e[i];e[i]=e[t],e[t]=o}return e.length=n,e}var bi,Ai,yi=(bi=Ao(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(j,function(e,t,r,l){n.push(r?l.replace(J,"$1"):t||e)}),n},function(e){return 500===Ai.size&&Ai.clear(),e}),Ai=bi.cache,bi);function Ni(e){if("string"==typeof e||Qo(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Bi(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ii(e){if(e instanceof Rt)return e.clone();var n=new Mt(e.__wrapped__,e.__chain__);return n.__actions__=El(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Oi=kr(function(e,n){return ko(e)?Jt(e,ir(n,1,ko,!0)):[]}),Ti=kr(function(e,n){var t=Fi(n);return ko(t)&&(t=void 0),ko(e)?Jt(e,ir(n,1,ko,!0),Xl(t,2)):[]}),Mi=kr(function(e,n){var t=Fi(n);return ko(t)&&(t=void 0),ko(e)?Jt(e,ir(n,1,ko,!0),void 0,t):[]});function Ri(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var l=null==t?0:la(t);return l<0&&(l=ot(r+l,0)),pn(e,Xl(n,3),l)}function Pi(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var l=r-1;return void 0!==t&&(l=la(t),l=t<0?ot(r+l,0):at(l,r-1)),pn(e,Xl(n,3),l,!0)}function Di(e){return null!=e&&e.length?ir(e,1):[]}function wi(e){return e&&e.length?e[0]:void 0}var xi=kr(function(e){var n=sn(e,ll);return n.length&&n[0]===e[0]?pr(n):[]}),ki=kr(function(e){var n=Fi(e),t=sn(e,ll);return n===Fi(t)?n=void 0:t.pop(),t.length&&t[0]===e[0]?pr(t,Xl(n,2)):[]}),Gi=kr(function(e){var n=Fi(e),t=sn(e,ll);return(n="function"==typeof n?n:void 0)&&t.pop(),t.length&&t[0]===e[0]?pr(t,void 0,n):[]});function Fi(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}var Ui=kr(Hi);function Hi(e,n){return e&&e.length&&n&&n.length?Pr(e,n):e}var Wi=jl(function(e,n){var t=null==e?0:e.length,r=qt(e,n);return Dr(e,sn(n,function(e){return ii(e,t)?+e:e}).sort(vl)),r});function ji(e){return null==e?e:dt.call(e)}var zi=kr(function(e){return Zr(ir(e,1,ko,!0))}),Vi=kr(function(e){var n=Fi(e);return ko(n)&&(n=void 0),Zr(ir(e,1,ko,!0),Xl(n,2))}),Yi=kr(function(e){var n=Fi(e);return n="function"==typeof n?n:void 0,Zr(ir(e,1,ko,!0),void 0,n)});function Ki(e){if(!e||!e.length)return[];var n=0;return e=an(e,function(e){if(ko(e))return n=ot(e.length,n),!0}),Nn(n,function(n){return sn(e,Ln(n))})}function qi(e,n){if(!e||!e.length)return[];var t=Ki(e);return null==n?t:sn(t,function(e){return nn(n,void 0,e)})}var Xi=kr(function(e,n){return ko(e)?Jt(e,n):[]}),$i=kr(function(e){return tl(an(e,ko))}),Zi=kr(function(e){var n=Fi(e);return ko(n)&&(n=void 0),tl(an(e,ko),Xl(n,2))}),Qi=kr(function(e){var n=Fi(e);return n="function"==typeof n?n:void 0,tl(an(e,ko),void 0,n)}),Ji=kr(Ki),eo=kr(function(e){var n=e.length,t=n>1?e[n-1]:void 0;return t="function"==typeof t?(e.pop(),t):void 0,qi(e,t)});function no(e){var n=It(e);return n.__chain__=!0,n}function to(e,n){return n(e)}var ro=jl(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,l=function(n){return qt(n,e)};return!(n>1||this.__actions__.length)&&r instanceof Rt&&ii(t)?((r=r.slice(t,+t+(n?1:0))).__actions__.push({func:to,args:[l],thisArg:void 0}),new Mt(r,this.__chain__).thru(function(e){return n&&!e.length&&e.push(void 0),e})):this.thru(l)}),lo=hl(function(e,n,t){Le.call(e,t)?++e[t]:Kt(e,t,1)}),io=yl(Ri),oo=yl(Pi);function ao(e,n){return(Do(e)?rn:er)(e,Xl(n,3))}function uo(e,n){return(Do(e)?ln:nr)(e,Xl(n,3))}var co=hl(function(e,n,t){Le.call(e,t)?e[t].push(n):Kt(e,t,[n])}),so=kr(function(e,n,t){var r=-1,l="function"==typeof n,i=xo(e)?K(e.length):[];return er(e,function(e){i[++r]=l?nn(n,e,t):hr(e,n,t)}),i}),fo=hl(function(e,n,t){Kt(e,t,n)});function vo(e,n){return(Do(e)?sn:Nr)(e,Xl(n,3))}var mo=hl(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),_o=kr(function(e,n){if(null==e)return[];var t=n.length;return t>1&&oi(e,n[0],n[1])?n=[]:t>2&&oi(n[0],n[1],n[2])&&(n=[n[0]]),Mr(e,ir(n,1),[])}),Eo=Zn||function(){return je.Date.now()};function po(e,n,t){return n=t?void 0:n,Gl(e,128,void 0,void 0,void 0,void 0,n=e&&null==n?e.length:n)}function ho(e,n){var r;if("function"!=typeof n)throw new pe(t);return e=la(e),function(){return--e>0&&(r=n.apply(this,arguments)),e<=1&&(n=void 0),r}}var go=kr(function(e,n,t){var r=1;if(t.length){var l=Un(t,ql(go));r|=32}return Gl(e,r,n,t,l)}),Co=kr(function(e,n,t){var r=3;if(t.length){var l=Un(t,ql(Co));r|=32}return Gl(n,r,e,t,l)});function So(e,n,r){var l,i,o,a,u,c,s=0,d=!1,f=!1,v=!0;if("function"!=typeof e)throw new pe(t);function m(n){var t=l,r=i;return l=i=void 0,s=n,a=e.apply(r,t)}function _(e){return s=e,u=hi(p,n),d?m(e):a}function E(e){var t=e-c;return void 0===c||t>=n||t<0||f&&e-s>=o}function p(){var e=Eo();if(E(e))return h(e);u=hi(p,function(e){var t=n-(e-c);return f?at(t,o-(e-s)):t}(e))}function h(e){return u=void 0,v&&l?m(e):(l=i=void 0,a)}function g(){var e=Eo(),t=E(e);if(l=arguments,i=this,c=e,t){if(void 0===u)return _(c);if(f)return cl(u),u=hi(p,n),m(c)}return void 0===u&&(u=hi(p,n)),a}return n=oa(n)||0,zo(r)&&(d=!!r.leading,o=(f="maxWait"in r)?ot(oa(r.maxWait)||0,n):o,v="trailing"in r?!!r.trailing:v),g.cancel=function(){void 0!==u&&cl(u),s=0,l=c=i=u=void 0},g.flush=function(){return void 0===u?a:h(Eo())},g}var Lo=kr(function(e,n){return Qt(e,1,n)}),bo=kr(function(e,n,t){return Qt(e,oa(n)||0,t)});function Ao(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new pe(t);var r=function t(){var r=arguments,l=n?n.apply(this,r):r[0],i=t.cache;if(i.has(l))return i.get(l);var o=e.apply(this,r);return t.cache=i.set(l,o)||i,o};return r.cache=new(Ao.Cache||wt),r}function yo(e){if("function"!=typeof e)throw new pe(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Ao.Cache=wt;var No=al(function(e,n){var t=(n=1==n.length&&Do(n[0])?sn(n[0],In(Xl())):sn(ir(n,1),In(Xl()))).length;return kr(function(r){for(var l=-1,i=at(r.length,t);++l<i;)r[l]=n[l].call(this,r[l]);return nn(e,this,r)})}),Bo=kr(function(e,n){return Gl(e,32,void 0,n,Un(n,ql(Bo)))}),Io=kr(function(e,n){return Gl(e,64,void 0,n,Un(n,ql(Io)))}),Oo=jl(function(e,n){return Gl(e,256,void 0,void 0,void 0,n)});function To(e,n){return e===n||e!=e&&n!=n}var Mo=Pl(mr),Ro=Pl(function(e,n){return e>=n}),Po=gr(function(){return arguments}())?gr:function(e){return Vo(e)&&Le.call(e,"callee")&&!Ke.call(e,"callee")},Do=K.isArray,wo=Xe?In(Xe):function(e){return Vo(e)&&vr(e)==C};function xo(e){return null!=e&&jo(e.length)&&!Ho(e)}function ko(e){return Vo(e)&&xo(e)}var Go=tt||ou,Fo=$e?In($e):function(e){return Vo(e)&&vr(e)==u};function Uo(e){if(!Vo(e))return!1;var n=vr(e);return n==c||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!qo(e)}function Ho(e){if(!zo(e))return!1;var n=vr(e);return n==s||n==d||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Wo(e){return"number"==typeof e&&e==la(e)}function jo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function zo(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Vo(e){return null!=e&&"object"==typeof e}var Yo=Ze?In(Ze):function(e){return Vo(e)&&ni(e)==f};function Ko(e){return"number"==typeof e||Vo(e)&&vr(e)==v}function qo(e){if(!Vo(e)||vr(e)!=m)return!1;var n=ze(e);if(null===n)return!0;var t=Le.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Se.call(t)==Ne}var Xo=Qe?In(Qe):function(e){return Vo(e)&&vr(e)==_},$o=Je?In(Je):function(e){return Vo(e)&&ni(e)==E};function Zo(e){return"string"==typeof e||!Do(e)&&Vo(e)&&vr(e)==p}function Qo(e){return"symbol"==typeof e||Vo(e)&&vr(e)==h}var Jo=en?In(en):function(e){return Vo(e)&&jo(e.length)&&!!xe[vr(e)]},ea=Pl(yr),na=Pl(function(e,n){return e<=n});function ta(e){if(!e)return[];if(xo(e))return Zo(e)?zn(e):El(e);if(bn&&e[bn])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[bn]());var n=ni(e);return(n==f?Gn:n==E?Hn:Ta)(e)}function ra(e){return e?(e=oa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function la(e){var n=ra(e),t=n%1;return n==n?t?n-t:n:0}function ia(e){return e?Xt(la(e),0,4294967295):0}function oa(e){if("number"==typeof e)return e;if(Qo(e))return NaN;if(zo(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=zo(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Bn(e);var t=re.test(e);return t||ie.test(e)?Ue(e.slice(2),t?2:8):te.test(e)?NaN:+e}function aa(e){return pl(e,La(e))}function ua(e){return null==e?"":$r(e)}var ca=gl(function(e,n){if(si(n)||xo(n))pl(n,Sa(n),e);else for(var t in n)Le.call(n,t)&&jt(e,t,n[t])}),sa=gl(function(e,n){pl(n,La(n),e)}),da=gl(function(e,n,t,r){pl(n,La(n),e,r)}),fa=gl(function(e,n,t,r){pl(n,Sa(n),e,r)}),va=jl(qt),ma=kr(function(e,n){e=me(e);var t=-1,r=n.length,l=r>2?n[2]:void 0;for(l&&oi(n[0],n[1],l)&&(r=1);++t<r;)for(var i=n[t],o=La(i),a=-1,u=o.length;++a<u;){var c=o[a],s=e[c];(void 0===s||To(s,ge[c])&&!Le.call(e,c))&&(e[c]=i[c])}return e}),_a=kr(function(e){return e.push(void 0,Ul),nn(Aa,void 0,e)});function Ea(e,n,t){var r=null==e?void 0:dr(e,n);return void 0===r?t:r}function pa(e,n){return null!=e&&ti(e,n,Er)}var ha=Il(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=ye.call(n)),e[n]=t},za(Ka)),ga=Il(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=ye.call(n)),Le.call(e,n)?e[n].push(t):e[n]=[t]},Xl),Ca=kr(hr);function Sa(e){return xo(e)?Gt(e):Ar(e)}function La(e){return xo(e)?Gt(e,!0):function(e){if(!zo(e))return function(e){var n=[];if(null!=e)for(var t in me(e))n.push(t);return n}(e);var n=si(e),t=[];for(var r in e)("constructor"!=r||!n&&Le.call(e,r))&&t.push(r);return t}(e)}var ba=gl(function(e,n,t){Or(e,n,t)}),Aa=gl(function(e,n,t,r){Or(e,n,t,r)}),ya=jl(function(e,n){var t={};if(null==e)return t;var r=!1;n=sn(n,function(n){return n=ol(n,e),r||(r=n.length>1),n}),pl(e,Vl(e),t),r&&(t=$t(t,7,Hl));for(var l=n.length;l--;)Qr(t,n[l]);return t}),Na=jl(function(e,n){return null==e?{}:function(e,n){return Rr(e,n,function(n,t){return pa(e,t)})}(e,n)});function Ba(e,n){if(null==e)return{};var t=sn(Vl(e),function(e){return[e]});return n=Xl(n),Rr(e,t,function(e,t){return n(e,t[0])})}var Ia=kl(Sa),Oa=kl(La);function Ta(e){return null==e?[]:On(e,Sa(e))}var Ma=bl(function(e,n,t){return n=n.toLowerCase(),e+(t?Ra(n):n)});function Ra(e){return Ua(ua(e).toLowerCase())}function Pa(e){return(e=ua(e))&&e.replace(ae,Dn).replace(Oe,"")}var Da=bl(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),wa=bl(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),xa=Ll("toLowerCase"),ka=bl(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),Ga=bl(function(e,n,t){return e+(t?" ":"")+Ua(n)}),Fa=bl(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Ua=Ll("toUpperCase");function Ha(e,n,t){return e=ua(e),void 0===(n=t?void 0:n)?function(e){return Pe.test(e)}(e)?function(e){return e.match(Me)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(n)||[]}var Wa=kr(function(e,n){try{return nn(e,void 0,n)}catch(e){return Uo(e)?e:new de(e)}}),ja=jl(function(e,n){return rn(n,function(n){n=Ni(n),Kt(e,n,go(e[n],e))}),e});function za(e){return function(){return e}}var Va=Nl(),Ya=Nl(!0);function Ka(e){return e}function qa(e){return br("function"==typeof e?e:$t(e,1))}var Xa=kr(function(e,n){return function(t){return hr(t,e,n)}}),$a=kr(function(e,n){return function(t){return hr(e,t,n)}});function Za(e,n,t){var r=Sa(n),l=sr(n,r);null!=t||zo(n)&&(l.length||!r.length)||(t=n,n=e,e=this,l=sr(n,Sa(n)));var i=!(zo(t)&&"chain"in t&&!t.chain),o=Ho(e);return rn(l,function(t){var r=n[t];e[t]=r,o&&(e.prototype[t]=function(){var n=this.__chain__;if(i||n){var t=e(this.__wrapped__),l=t.__actions__=El(this.__actions__);return l.push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,dn([this.value()],arguments))})}),e}function Qa(){}var Ja=Tl(sn),eu=Tl(on),nu=Tl(mn);function tu(e){return ai(e)?Ln(Ni(e)):function(e){return function(n){return dr(n,e)}}(e)}var ru=Rl(),lu=Rl(!0);function iu(){return[]}function ou(){return!1}var au,uu=Ol(function(e,n){return e+n},0),cu=wl("ceil"),su=Ol(function(e,n){return e/n},1),du=wl("floor"),fu=Ol(function(e,n){return e*n},1),vu=wl("round"),mu=Ol(function(e,n){return e-n},0);return It.after=function(e,n){if("function"!=typeof n)throw new pe(t);return e=la(e),function(){if(--e<1)return n.apply(this,arguments)}},It.ary=po,It.assign=ca,It.assignIn=sa,It.assignInWith=da,It.assignWith=fa,It.at=va,It.before=ho,It.bind=go,It.bindAll=ja,It.bindKey=Co,It.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Do(e)?e:[e]},It.chain=no,It.chunk=function(e,n,t){n=(t?oi(e,n,t):void 0===n)?1:ot(la(n),0);var r=null==e?0:e.length;if(!r||n<1)return[];for(var l=0,i=0,o=K(Jn(r/n));l<r;)o[i++]=zr(e,l,l+=n);return o},It.compact=function(e){for(var n=-1,t=null==e?0:e.length,r=0,l=[];++n<t;){var i=e[n];i&&(l[r++]=i)}return l},It.concat=function(){var e=arguments.length;if(!e)return[];for(var n=K(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return dn(Do(t)?El(t):[t],ir(n,1))},It.cond=function(e){var n=null==e?0:e.length,r=Xl();return e=n?sn(e,function(e){if("function"!=typeof e[1])throw new pe(t);return[r(e[0]),e[1]]}):[],kr(function(t){for(var r=-1;++r<n;){var l=e[r];if(nn(l[0],this,t))return nn(l[1],this,t)}})},It.conforms=function(e){return function(e){var n=Sa(e);return function(t){return Zt(t,e,n)}}($t(e,1))},It.constant=za,It.countBy=lo,It.create=function(e,n){var t=Ot(e);return null==n?t:Yt(t,n)},It.curry=function e(n,t,r){var l=Gl(n,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return l.placeholder=e.placeholder,l},It.curryRight=function e(n,t,r){var l=Gl(n,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return l.placeholder=e.placeholder,l},It.debounce=So,It.defaults=ma,It.defaultsDeep=_a,It.defer=Lo,It.delay=bo,It.difference=Oi,It.differenceBy=Ti,It.differenceWith=Mi,It.drop=function(e,n,t){var r=null==e?0:e.length;return r?zr(e,(n=t||void 0===n?1:la(n))<0?0:n,r):[]},It.dropRight=function(e,n,t){var r=null==e?0:e.length;return r?zr(e,0,(n=r-(n=t||void 0===n?1:la(n)))<0?0:n):[]},It.dropRightWhile=function(e,n){return e&&e.length?el(e,Xl(n,3),!0,!0):[]},It.dropWhile=function(e,n){return e&&e.length?el(e,Xl(n,3),!0):[]},It.fill=function(e,n,t,r){var l=null==e?0:e.length;return l?(t&&"number"!=typeof t&&oi(e,n,t)&&(t=0,r=l),function(e,n,t,r){var l=e.length;for((t=la(t))<0&&(t=-t>l?0:l+t),(r=void 0===r||r>l?l:la(r))<0&&(r+=l),r=t>r?0:ia(r);t<r;)e[t++]=n;return e}(e,n,t,r)):[]},It.filter=function(e,n){return(Do(e)?an:lr)(e,Xl(n,3))},It.flatMap=function(e,n){return ir(vo(e,n),1)},It.flatMapDeep=function(e,n){return ir(vo(e,n),1/0)},It.flatMapDepth=function(e,n,t){return t=void 0===t?1:la(t),ir(vo(e,n),t)},It.flatten=Di,It.flattenDeep=function(e){return null!=e&&e.length?ir(e,1/0):[]},It.flattenDepth=function(e,n){return null!=e&&e.length?ir(e,n=void 0===n?1:la(n)):[]},It.flip=function(e){return Gl(e,512)},It.flow=Va,It.flowRight=Ya,It.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,r={};++n<t;){var l=e[n];r[l[0]]=l[1]}return r},It.functions=function(e){return null==e?[]:sr(e,Sa(e))},It.functionsIn=function(e){return null==e?[]:sr(e,La(e))},It.groupBy=co,It.initial=function(e){return null!=e&&e.length?zr(e,0,-1):[]},It.intersection=xi,It.intersectionBy=ki,It.intersectionWith=Gi,It.invert=ha,It.invertBy=ga,It.invokeMap=so,It.iteratee=qa,It.keyBy=fo,It.keys=Sa,It.keysIn=La,It.map=vo,It.mapKeys=function(e,n){var t={};return n=Xl(n,3),ur(e,function(e,r,l){Kt(t,n(e,r,l),e)}),t},It.mapValues=function(e,n){var t={};return n=Xl(n,3),ur(e,function(e,r,l){Kt(t,r,n(e,r,l))}),t},It.matches=function(e){return Br($t(e,1))},It.matchesProperty=function(e,n){return Ir(e,$t(n,1))},It.memoize=Ao,It.merge=ba,It.mergeWith=Aa,It.method=Xa,It.methodOf=$a,It.mixin=Za,It.negate=yo,It.nthArg=function(e){return e=la(e),kr(function(n){return Tr(n,e)})},It.omit=ya,It.omitBy=function(e,n){return Ba(e,yo(Xl(n)))},It.once=function(e){return ho(2,e)},It.orderBy=function(e,n,t,r){return null==e?[]:(Do(n)||(n=null==n?[]:[n]),Do(t=r?void 0:t)||(t=null==t?[]:[t]),Mr(e,n,t))},It.over=Ja,It.overArgs=No,It.overEvery=eu,It.overSome=nu,It.partial=Bo,It.partialRight=Io,It.partition=mo,It.pick=Na,It.pickBy=Ba,It.property=tu,It.propertyOf=function(e){return function(n){return null==e?void 0:dr(e,n)}},It.pull=Ui,It.pullAll=Hi,It.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Pr(e,n,Xl(t,2)):e},It.pullAllWith=function(e,n,t){return e&&e.length&&n&&n.length?Pr(e,n,void 0,t):e},It.pullAt=Wi,It.range=ru,It.rangeRight=lu,It.rearg=Oo,It.reject=function(e,n){return(Do(e)?an:lr)(e,yo(Xl(n,3)))},It.remove=function(e,n){var t=[];if(!e||!e.length)return t;var r=-1,l=[],i=e.length;for(n=Xl(n,3);++r<i;){var o=e[r];n(o,r,e)&&(t.push(o),l.push(r))}return Dr(e,l),t},It.rest=function(e,n){if("function"!=typeof e)throw new pe(t);return kr(e,n=void 0===n?n:la(n))},It.reverse=ji,It.sampleSize=function(e,n,t){return n=(t?oi(e,n,t):void 0===n)?1:la(n),(Do(e)?Ut:Fr)(e,n)},It.set=function(e,n,t){return null==e?e:Ur(e,n,t)},It.setWith=function(e,n,t,r){return r="function"==typeof r?r:void 0,null==e?e:Ur(e,n,t,r)},It.shuffle=function(e){return(Do(e)?Ht:jr)(e)},It.slice=function(e,n,t){var r=null==e?0:e.length;return r?(t&&"number"!=typeof t&&oi(e,n,t)?(n=0,t=r):(n=null==n?0:la(n),t=void 0===t?r:la(t)),zr(e,n,t)):[]},It.sortBy=_o,It.sortedUniq=function(e){return e&&e.length?qr(e):[]},It.sortedUniqBy=function(e,n){return e&&e.length?qr(e,Xl(n,2)):[]},It.split=function(e,n,t){return t&&"number"!=typeof t&&oi(e,n,t)&&(n=t=void 0),(t=void 0===t?4294967295:t>>>0)?(e=ua(e))&&("string"==typeof n||null!=n&&!Xo(n))&&!(n=$r(n))&&kn(e)?ul(zn(e),0,t):e.split(n,t):[]},It.spread=function(e,n){if("function"!=typeof e)throw new pe(t);return n=null==n?0:ot(la(n),0),kr(function(t){var r=t[n],l=ul(t,0,n);return r&&dn(l,r),nn(e,this,l)})},It.tail=function(e){var n=null==e?0:e.length;return n?zr(e,1,n):[]},It.take=function(e,n,t){return e&&e.length?zr(e,0,(n=t||void 0===n?1:la(n))<0?0:n):[]},It.takeRight=function(e,n,t){var r=null==e?0:e.length;return r?zr(e,(n=r-(n=t||void 0===n?1:la(n)))<0?0:n,r):[]},It.takeRightWhile=function(e,n){return e&&e.length?el(e,Xl(n,3),!1,!0):[]},It.takeWhile=function(e,n){return e&&e.length?el(e,Xl(n,3)):[]},It.tap=function(e,n){return n(e),e},It.throttle=function(e,n,r){var l=!0,i=!0;if("function"!=typeof e)throw new pe(t);return zo(r)&&(l="leading"in r?!!r.leading:l,i="trailing"in r?!!r.trailing:i),So(e,n,{leading:l,maxWait:n,trailing:i})},It.thru=to,It.toArray=ta,It.toPairs=Ia,It.toPairsIn=Oa,It.toPath=function(e){return Do(e)?sn(e,Ni):Qo(e)?[e]:El(yi(ua(e)))},It.toPlainObject=aa,It.transform=function(e,n,t){var r=Do(e),l=r||Go(e)||Jo(e);if(n=Xl(n,4),null==t){var i=e&&e.constructor;t=l?r?new i:[]:zo(e)&&Ho(i)?Ot(ze(e)):{}}return(l?rn:ur)(e,function(e,r,l){return n(t,e,r,l)}),t},It.unary=function(e){return po(e,1)},It.union=zi,It.unionBy=Vi,It.unionWith=Yi,It.uniq=function(e){return e&&e.length?Zr(e):[]},It.uniqBy=function(e,n){return e&&e.length?Zr(e,Xl(n,2)):[]},It.uniqWith=function(e,n){return n="function"==typeof n?n:void 0,e&&e.length?Zr(e,void 0,n):[]},It.unset=function(e,n){return null==e||Qr(e,n)},It.unzip=Ki,It.unzipWith=qi,It.update=function(e,n,t){return null==e?e:Jr(e,n,il(t))},It.updateWith=function(e,n,t,r){return r="function"==typeof r?r:void 0,null==e?e:Jr(e,n,il(t),r)},It.values=Ta,It.valuesIn=function(e){return null==e?[]:On(e,La(e))},It.without=Xi,It.words=Ha,It.wrap=function(e,n){return Bo(il(n),e)},It.xor=$i,It.xorBy=Zi,It.xorWith=Qi,It.zip=Ji,It.zipObject=function(e,n){return rl(e||[],n||[],jt)},It.zipObjectDeep=function(e,n){return rl(e||[],n||[],Ur)},It.zipWith=eo,It.entries=Ia,It.entriesIn=Oa,It.extend=sa,It.extendWith=da,Za(It,It),It.add=uu,It.attempt=Wa,It.camelCase=Ma,It.capitalize=Ra,It.ceil=cu,It.clamp=function(e,n,t){return void 0===t&&(t=n,n=void 0),void 0!==t&&(t=(t=oa(t))==t?t:0),void 0!==n&&(n=(n=oa(n))==n?n:0),Xt(oa(e),n,t)},It.clone=function(e){return $t(e,4)},It.cloneDeep=function(e){return $t(e,5)},It.cloneDeepWith=function(e,n){return $t(e,5,n="function"==typeof n?n:void 0)},It.cloneWith=function(e,n){return $t(e,4,n="function"==typeof n?n:void 0)},It.conformsTo=function(e,n){return null==n||Zt(e,n,Sa(n))},It.deburr=Pa,It.defaultTo=function(e,n){return null==e||e!=e?n:e},It.divide=su,It.endsWith=function(e,n,t){e=ua(e),n=$r(n);var r=e.length,l=t=void 0===t?r:Xt(la(t),0,r);return(t-=n.length)>=0&&e.slice(t,l)==n},It.eq=To,It.escape=function(e){return(e=ua(e))&&k.test(e)?e.replace(w,wn):e},It.escapeRegExp=function(e){return(e=ua(e))&&V.test(e)?e.replace(z,"\\$&"):e},It.every=function(e,n,t){var r=Do(e)?on:tr;return t&&oi(e,n,t)&&(n=void 0),r(e,Xl(n,3))},It.find=io,It.findIndex=Ri,It.findKey=function(e,n){return En(e,Xl(n,3),ur)},It.findLast=oo,It.findLastIndex=Pi,It.findLastKey=function(e,n){return En(e,Xl(n,3),cr)},It.floor=du,It.forEach=ao,It.forEachRight=uo,It.forIn=function(e,n){return null==e?e:or(e,Xl(n,3),La)},It.forInRight=function(e,n){return null==e?e:ar(e,Xl(n,3),La)},It.forOwn=function(e,n){return e&&ur(e,Xl(n,3))},It.forOwnRight=function(e,n){return e&&cr(e,Xl(n,3))},It.get=Ea,It.gt=Mo,It.gte=Ro,It.has=function(e,n){return null!=e&&ti(e,n,_r)},It.hasIn=pa,It.head=wi,It.identity=Ka,It.includes=function(e,n,t,r){e=xo(e)?e:Ta(e),t=t&&!r?la(t):0;var l=e.length;return t<0&&(t=ot(l+t,0)),Zo(e)?t<=l&&e.indexOf(n,t)>-1:!!l&&hn(e,n,t)>-1},It.indexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var l=null==t?0:la(t);return l<0&&(l=ot(r+l,0)),hn(e,n,l)},It.inRange=function(e,n,t){return n=ra(n),void 0===t?(t=n,n=0):t=ra(t),function(e,n,t){return e>=at(n,t)&&e<ot(n,t)}(e=oa(e),n,t)},It.invoke=Ca,It.isArguments=Po,It.isArray=Do,It.isArrayBuffer=wo,It.isArrayLike=xo,It.isArrayLikeObject=ko,It.isBoolean=function(e){return!0===e||!1===e||Vo(e)&&vr(e)==a},It.isBuffer=Go,It.isDate=Fo,It.isElement=function(e){return Vo(e)&&1===e.nodeType&&!qo(e)},It.isEmpty=function(e){if(null==e)return!0;if(xo(e)&&(Do(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||Jo(e)||Po(e)))return!e.length;var n=ni(e);if(n==f||n==E)return!e.size;if(si(e))return!Ar(e).length;for(var t in e)if(Le.call(e,t))return!1;return!0},It.isEqual=function(e,n){return Cr(e,n)},It.isEqualWith=function(e,n,t){var r=(t="function"==typeof t?t:void 0)?t(e,n):void 0;return void 0===r?Cr(e,n,void 0,t):!!r},It.isError=Uo,It.isFinite=function(e){return"number"==typeof e&&rt(e)},It.isFunction=Ho,It.isInteger=Wo,It.isLength=jo,It.isMap=Yo,It.isMatch=function(e,n){return e===n||Sr(e,n,Zl(n))},It.isMatchWith=function(e,n,t){return t="function"==typeof t?t:void 0,Sr(e,n,Zl(n),t)},It.isNaN=function(e){return Ko(e)&&e!=+e},It.isNative=function(e){if(ci(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},It.isNil=function(e){return null==e},It.isNull=function(e){return null===e},It.isNumber=Ko,It.isObject=zo,It.isObjectLike=Vo,It.isPlainObject=qo,It.isRegExp=Xo,It.isSafeInteger=function(e){return Wo(e)&&e>=-9007199254740991&&e<=9007199254740991},It.isSet=$o,It.isString=Zo,It.isSymbol=Qo,It.isTypedArray=Jo,It.isUndefined=function(e){return void 0===e},It.isWeakMap=function(e){return Vo(e)&&ni(e)==g},It.isWeakSet=function(e){return Vo(e)&&"[object WeakSet]"==vr(e)},It.join=function(e,n){return null==e?"":lt.call(e,n)},It.kebabCase=Da,It.last=Fi,It.lastIndexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var l=r;return void 0!==t&&(l=(l=la(t))<0?ot(r+l,0):at(l,r-1)),n==n?function(e,n,t){for(var r=t+1;r--;)if(e[r]===n)return r;return r}(e,n,l):pn(e,Cn,l,!0)},It.lowerCase=wa,It.lowerFirst=xa,It.lt=ea,It.lte=na,It.max=function(e){return e&&e.length?rr(e,Ka,mr):void 0},It.maxBy=function(e,n){return e&&e.length?rr(e,Xl(n,2),mr):void 0},It.mean=function(e){return Sn(e,Ka)},It.meanBy=function(e,n){return Sn(e,Xl(n,2))},It.min=function(e){return e&&e.length?rr(e,Ka,yr):void 0},It.minBy=function(e,n){return e&&e.length?rr(e,Xl(n,2),yr):void 0},It.stubArray=iu,It.stubFalse=ou,It.stubObject=function(){return{}},It.stubString=function(){return""},It.stubTrue=function(){return!0},It.multiply=fu,It.nth=function(e,n){return e&&e.length?Tr(e,la(n)):void 0},It.noConflict=function(){return je._===this&&(je._=Be),this},It.noop=Qa,It.now=Eo,It.pad=function(e,n,t){e=ua(e);var r=(n=la(n))?jn(e):0;if(!n||r>=n)return e;var l=(n-r)/2;return Ml(et(l),t)+e+Ml(Jn(l),t)},It.padEnd=function(e,n,t){e=ua(e);var r=(n=la(n))?jn(e):0;return n&&r<n?e+Ml(n-r,t):e},It.padStart=function(e,n,t){e=ua(e);var r=(n=la(n))?jn(e):0;return n&&r<n?Ml(n-r,t)+e:e},It.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),ct(ua(e).replace(Y,""),n||0)},It.random=function(e,n,t){if(t&&"boolean"!=typeof t&&oi(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=ra(e),void 0===n?(n=e,e=0):n=ra(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var l=st();return at(e+l*(n-e+Fe("1e-"+((l+"").length-1))),n)}return wr(e,n)},It.reduce=function(e,n,t){var r=Do(e)?fn:An,l=arguments.length<3;return r(e,Xl(n,4),t,l,er)},It.reduceRight=function(e,n,t){var r=Do(e)?vn:An,l=arguments.length<3;return r(e,Xl(n,4),t,l,nr)},It.repeat=function(e,n,t){return n=(t?oi(e,n,t):void 0===n)?1:la(n),xr(ua(e),n)},It.replace=function(){var e=arguments,n=ua(e[0]);return e.length<3?n:n.replace(e[1],e[2])},It.result=function(e,n,t){var r=-1,l=(n=ol(n,e)).length;for(l||(l=1,e=void 0);++r<l;){var i=null==e?void 0:e[Ni(n[r])];void 0===i&&(r=l,i=t),e=Ho(i)?i.call(e):i}return e},It.round=vu,It.runInContext=e,It.sample=function(e){return(Do(e)?Ft:Gr)(e)},It.size=function(e){if(null==e)return 0;if(xo(e))return Zo(e)?jn(e):e.length;var n=ni(e);return n==f||n==E?e.size:Ar(e).length},It.snakeCase=ka,It.some=function(e,n,t){var r=Do(e)?mn:Vr;return t&&oi(e,n,t)&&(n=void 0),r(e,Xl(n,3))},It.sortedIndex=function(e,n){return Yr(e,n)},It.sortedIndexBy=function(e,n,t){return Kr(e,n,Xl(t,2))},It.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var r=Yr(e,n);if(r<t&&To(e[r],n))return r}return-1},It.sortedLastIndex=function(e,n){return Yr(e,n,!0)},It.sortedLastIndexBy=function(e,n,t){return Kr(e,n,Xl(t,2),!0)},It.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=Yr(e,n,!0)-1;if(To(e[t],n))return t}return-1},It.startCase=Ga,It.startsWith=function(e,n,t){return e=ua(e),t=null==t?0:Xt(la(t),0,e.length),n=$r(n),e.slice(t,t+n.length)==n},It.subtract=mu,It.sum=function(e){return e&&e.length?yn(e,Ka):0},It.sumBy=function(e,n){return e&&e.length?yn(e,Xl(n,2)):0},It.template=function(e,n,t){var r=It.templateSettings;t&&oi(e,n,t)&&(n=void 0),e=ua(e),n=da({},n,r,Fl);var l,i,o=da({},n.imports,r.imports,Fl),a=Sa(o),u=On(o,a),c=0,s=n.interpolate||ue,d="__p += '",f=_e((n.escape||ue).source+"|"+s.source+"|"+(s===U?ee:ue).source+"|"+(n.evaluate||ue).source+"|$","g"),v="//# sourceURL="+(Le.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++we+"]")+"\n";e.replace(f,function(n,t,r,o,a,u){return r||(r=o),d+=e.slice(c,u).replace(ce,xn),t&&(l=!0,d+="' +\n__e("+t+") +\n'"),a&&(i=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+n.length,n}),d+="';\n";var m=Le.call(n,"variable")&&n.variable;if(m){if(Q.test(m))throw new de("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(M,""):d).replace(R,"$1").replace(P,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var _=Wa(function(){return fe(a,v+"return "+d).apply(void 0,u)});if(_.source=d,Uo(_))throw _;return _},It.times=function(e,n){if((e=la(e))<1||e>9007199254740991)return[];var t=4294967295,r=at(e,4294967295);e-=4294967295;for(var l=Nn(r,n=Xl(n));++t<e;)n(t);return l},It.toFinite=ra,It.toInteger=la,It.toLength=ia,It.toLower=function(e){return ua(e).toLowerCase()},It.toNumber=oa,It.toSafeInteger=function(e){return e?Xt(la(e),-9007199254740991,9007199254740991):0===e?e:0},It.toString=ua,It.toUpper=function(e){return ua(e).toUpperCase()},It.trim=function(e,n,t){if((e=ua(e))&&(t||void 0===n))return Bn(e);if(!e||!(n=$r(n)))return e;var r=zn(e),l=zn(n);return ul(r,Mn(r,l),Rn(r,l)+1).join("")},It.trimEnd=function(e,n,t){if((e=ua(e))&&(t||void 0===n))return e.slice(0,Vn(e)+1);if(!e||!(n=$r(n)))return e;var r=zn(e);return ul(r,0,Rn(r,zn(n))+1).join("")},It.trimStart=function(e,n,t){if((e=ua(e))&&(t||void 0===n))return e.replace(Y,"");if(!e||!(n=$r(n)))return e;var r=zn(e);return ul(r,Mn(r,zn(n))).join("")},It.truncate=function(e,n){var t=30,r="...";if(zo(n)){var l="separator"in n?n.separator:l;t="length"in n?la(n.length):t,r="omission"in n?$r(n.omission):r}var i=(e=ua(e)).length;if(kn(e)){var o=zn(e);i=o.length}if(t>=i)return e;var a=t-jn(r);if(a<1)return r;var u=o?ul(o,0,a).join(""):e.slice(0,a);if(void 0===l)return u+r;if(o&&(a+=u.length-a),Xo(l)){if(e.slice(a).search(l)){var c,s=u;for(l.global||(l=_e(l.source,ua(ne.exec(l))+"g")),l.lastIndex=0;c=l.exec(s);)var d=c.index;u=u.slice(0,void 0===d?a:d)}}else if(e.indexOf($r(l),a)!=a){var f=u.lastIndexOf(l);f>-1&&(u=u.slice(0,f))}return u+r},It.unescape=function(e){return(e=ua(e))&&x.test(e)?e.replace(D,Yn):e},It.uniqueId=function(e){var n=++be;return ua(e)+n},It.upperCase=Fa,It.upperFirst=Ua,It.each=ao,It.eachRight=uo,It.first=wi,Za(It,(au={},ur(It,function(e,n){Le.call(It.prototype,n)||(au[n]=e)}),au),{chain:!1}),It.VERSION="4.17.21",rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){It[e].placeholder=It}),rn(["drop","take"],function(e,n){Rt.prototype[e]=function(t){t=void 0===t?1:ot(la(t),0);var r=this.__filtered__&&!n?new Rt(this):this.clone();return r.__filtered__?r.__takeCount__=at(t,r.__takeCount__):r.__views__.push({size:at(t,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Rt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),rn(["filter","map","takeWhile"],function(e,n){var t=n+1,r=1==t||3==t;Rt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:Xl(e,3),type:t}),n.__filtered__=n.__filtered__||r,n}}),rn(["head","last"],function(e,n){var t="take"+(n?"Right":"");Rt.prototype[e]=function(){return this[t](1).value()[0]}}),rn(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");Rt.prototype[e]=function(){return this.__filtered__?new Rt(this):this[t](1)}}),Rt.prototype.compact=function(){return this.filter(Ka)},Rt.prototype.find=function(e){return this.filter(e).head()},Rt.prototype.findLast=function(e){return this.reverse().find(e)},Rt.prototype.invokeMap=kr(function(e,n){return"function"==typeof e?new Rt(this):this.map(function(t){return hr(t,e,n)})}),Rt.prototype.reject=function(e){return this.filter(yo(Xl(e)))},Rt.prototype.slice=function(e,n){e=la(e);var t=this;return t.__filtered__&&(e>0||n<0)?new Rt(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),void 0!==n&&(t=(n=la(n))<0?t.dropRight(-n):t.take(n-e)),t)},Rt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rt.prototype.toArray=function(){return this.take(4294967295)},ur(Rt.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),l=It[r?"take"+("last"==n?"Right":""):n],i=r||/^find/.test(n);l&&(It.prototype[n]=function(){var n=this.__wrapped__,o=r?[1]:arguments,a=n instanceof Rt,u=o[0],c=a||Do(n),s=function(e){var n=l.apply(It,dn([e],o));return r&&d?n[0]:n};c&&t&&"function"==typeof u&&1!=u.length&&(a=c=!1);var d=this.__chain__,f=!!this.__actions__.length,v=i&&!d,m=a&&!f;if(!i&&c){n=m?n:new Rt(this);var _=e.apply(n,o);return _.__actions__.push({func:to,args:[s],thisArg:void 0}),new Mt(_,d)}return v&&m?e.apply(this,o):(_=this.thru(s),v?r?_.value()[0]:_.value():_)})}),rn(["pop","push","shift","sort","splice","unshift"],function(e){var n=he[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);It.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var l=this.value();return n.apply(Do(l)?l:[],e)}return this[t](function(t){return n.apply(Do(t)?t:[],e)})}}),ur(Rt.prototype,function(e,n){var t=It[n];if(t){var r=t.name+"";Le.call(gt,r)||(gt[r]=[]),gt[r].push({name:n,func:t})}}),gt[Bl(void 0,2).name]=[{name:"wrapper",func:void 0}],Rt.prototype.clone=function(){var e=new Rt(this.__wrapped__);return e.__actions__=El(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=El(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=El(this.__views__),e},Rt.prototype.reverse=function(){if(this.__filtered__){var e=new Rt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Do(e),r=n<0,l=t?e.length:0,i=function(e,n,t){for(var r=-1,l=t.length;++r<l;){var i=t[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":n-=o;break;case"take":n=at(n,e+o);break;case"takeRight":e=ot(e,n-o)}}return{start:e,end:n}}(0,l,this.__views__),o=i.start,a=i.end,u=a-o,c=r?a:o-1,s=this.__iteratees__,d=s.length,f=0,v=at(u,this.__takeCount__);if(!t||!r&&l==u&&v==u)return nl(e,this.__actions__);var m=[];e:for(;u--&&f<v;){for(var _=-1,E=e[c+=n];++_<d;){var p=s[_],h=p.type,g=(0,p.iteratee)(E);if(2==h)E=g;else if(!g){if(1==h)continue e;break e}}m[f++]=E}return m},It.prototype.at=ro,It.prototype.chain=function(){return no(this)},It.prototype.commit=function(){return new Mt(this.value(),this.__chain__)},It.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},It.prototype.plant=function(e){for(var n,t=this;t instanceof Tt;){var r=Ii(t);r.__index__=0,r.__values__=void 0,n?l.__wrapped__=r:n=r;var l=r;t=t.__wrapped__}return l.__wrapped__=e,n},It.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rt){var n=e;return this.__actions__.length&&(n=new Rt(this)),(n=n.reverse()).__actions__.push({func:to,args:[ji],thisArg:void 0}),new Mt(n,this.__chain__)}return this.thru(ji)},It.prototype.toJSON=It.prototype.valueOf=It.prototype.value=function(){return nl(this.__wrapped__,this.__actions__)},It.prototype.first=It.prototype.head,bn&&(It.prototype[bn]=function(){return this}),It}();Ve?((Ve.exports=Kn)._=Kn,ze._=Kn):je._=Kn}).call(L)}(c={exports:{}},c.exports),c.exports),A=["searchParams","onFilterChange","defaultSearchParams","statuses"],y=function(e){var r,o,c,s,d,f,v=e.searchParams,m=e.onFilterChange,_=u(e,A),E=l.useTranslation().t,p=n.useState(function(){return v}),h=p[0],g=p[1],C=n.useState([]),S=C[0],L=C[1],y=n.useState([]),N=y[0],B=y[1],I=function(){L([]),m([])};n.useEffect(function(){S&&g(a({},S))},[S]);var O=null===(r=Digit.SessionStorage.get("User"))||void 0===r||null===(o=r.info)||void 0===o?void 0:o.tenantId,T=Digit.Hooks.useCommonMDMS(O,"BillingService","BillsGenieKey"),M=T.isLoading,R=T.data,P=null==R||null===(c=R.BillingService)||void 0===c||null===(s=c.BusinessService)||void 0===s?void 0:s.filter(function(e){return e.billGineiURL}),D=null==R||null===(d=R.tenant)||void 0===d||null===(f=d.tenants)||void 0===f?void 0:f.filter(function(e){return e.code===O}),w=[];P&&(w=P.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}})),n.useEffect(function(){D&&B(D[0])},[]);var x=[];return M?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{className:"filter"},t.createElement("div",{className:"filter-card"},t.createElement("div",{className:"heading",style:{alignItems:"center"}},t.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},t.createElement("span",null,t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),t.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},E("ES_COMMON_FILTER_BY"),":")),t.createElement("div",{className:"clearAll",onClick:I},E("ES_COMMON_CLEAR_ALL")),"desktop"===_.type&&t.createElement("span",{className:"clear-search",onClick:I,style:{border:"1px solid #e0e0e0",padding:"6px"}},t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===_.type&&t.createElement("span",{onClick:_.onClose},t.createElement(i.CloseSvg,null))),t.createElement("div",null,t.createElement("div",null,t.createElement("div",{className:"filter-label"},E("LABEL_FOR_ULB")),t.createElement(i.Dropdown,{option:x,optionKey:"name",value:N,selected:N,select:B,t:E,disable:x})),t.createElement("div",null,t.createElement("div",{className:"filter-label"},E("ABG_SERVICE_CATEGORY_LABEL")),t.createElement(i.Dropdown,{t:E,option:w,value:S,selected:S,select:L,optionKey:"name"})),t.createElement("div",null,t.createElement(i.SubmitBar,{disabled:b.isEqual(h,v),onSubmit:function(){return m(h)},label:E("ES_COMMON_APPLY")}))))))},N=function(e){var r=e.t,l=e.data,o=e.onFilterChange,a=e.onSearch,u=e.serviceRequestIdKey,c=e.isFstpOperator,s=e.isLoading,d=e.isSearch,f=e.searchParams,v=e.searchFields,m=e.sortParams,_=e.linkPrefix,E=e.defaultSearchParams,p=n.useState(d?"SEARCH":""),h=p[0],C=p[1],S=n.useState(!!d),L=S[0],b=S[1],A=n.useState(f)[1],N=n.useState(m)[1];n.useEffect(function(){h&&b(!0)},[h]);var B,I=function(){b(!1),C(""),A(f),N(m)};return s?t.createElement(i.Loader,null):(l&&0!==(null==l?void 0:l.length)?l&&(null==l?void 0:l.length)>0&&(B=t.createElement(i.DetailsCard,{data:l,serviceRequestIdKey:u,linkPrefix:_||"/digit-ui/employee/bills"})):B=t.createElement(i.Card,{style:{marginTop:20}},r("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})),t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},a&&t.createElement(i.SearchAction,{text:"SEARCH",handleActionClick:function(){C("SEARCH"),b(!0)}}),!d&&o&&t.createElement(i.FilterAction,{text:"FILTER",handleActionClick:function(){C("FILTER"),b(!0)}})),B,L&&t.createElement(i.PopUp,null,"FILTER"===h&&t.createElement("div",{className:"popup-module"},t.createElement(y,{defaultSearchParams:E,onFilterChange:function(e){o(e,!0),b(!1)},searchParams:f,type:"mobile",onClose:I})),"SEARCH"===h&&t.createElement("div",{className:"popup-module"},t.createElement(g,{type:"mobile",onClose:I,onSearch:a,isFstpOperator:c,searchParams:f,searchFields:v})))))},B=function(e){return t.createElement("span",{className:"sla-cell"},e)},I=function(e){var n,i=e.data,o=e.isLoading,a=e.isSearch,u=e.searchFields,c=e.onFilterChange,s=e.onSearch,d=e.onSort,f=e.searchParams,v=e.sortParams,_=e.linkPrefix,E=e.filterComponent,p=e.defaultSearchParams,h=l.useTranslation().t;return t.createElement("div",{style:{padding:0}},t.createElement("div",{className:"inbox-container"},t.createElement("div",{className:"filters-container"},t.createElement(N,{t:h,data:null==i||null===(n=i.Bills)||void 0===n?void 0:n.map(function(e){var n,l;return(n={})[h("ABG_COMMON_TABLE_COL_BILL_NO")]=B(null==e?void 0:e.billNumber),n[h("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=B(null==e?void 0:e.payerName),n[h("ABG_COMMON_TABLE_COL_BILL_EXP_DATE")]=(l=new Date(null==e?void 0:e.billDate),t.createElement("span",{className:"sla-cell"},null==l?void 0:l.toLocaleDateString())),n[h("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=B(null==e?void 0:e.totalAmount),n[h("ABG_COMMON_TABLE_COL_STATUS")]=B(null==e?void 0:e.status),n[h("ABG_COMMON_TABLE_COL_ACTION")]=function(e){return(null==e?void 0:e.totalAmount)>0?"ACTIVE"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==e?void 0:e.businessService)+"/"+(null==e?void 0:e.consumerCode)+"/tenantId="+(null==e?void 0:e.tenantId)+"?workflow=mcollect"}},h("ABG_COLLECT")))):"CANCELLED"===(null==e?void 0:e.status)||"EXPIRED"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null==e?void 0:e.businessService)+"/"+(null==e?void 0:e.consumerCode)+"/tenantId="+(null==e?void 0:e.tenantId)+"?workflow=mcollect"}},h("ABG_GENERATE_NEW_BILL")))):"PAID"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,null,t.createElement("a",{href:"javascript:void(0)",style:{color:"#FE7A51",cursor:"pointer"},onClick:function(n){m(null==e?void 0:e.businessService,null==e?void 0:e.consumerCode)}}," ",h("ABG_DOWNLOAD_RECEIPT")," ")))):void 0:B(h("CS_NA"))}(e),n}),onFilterChange:c,isLoading:o,isSearch:a,onSearch:s,onSort:d,defaultSearchParams:p,searchParams:f,searchFields:u,linkPrefix:_,sortParams:v,filterComponent:E,serviceRequestIdKey:function(e){return(null==f?void 0:f.businessServices)+"/"+encodeURIComponent(null==e?void 0:e[h("CR_COMMON_TABLE_COL_RECEIPT_NO")])}}))))},O=function(){var e=l.useTranslation().t,r=window.Digit.Utils.browser.isMobile(),o=n.useState(null),a=o[0],u=o[1],c=n.useState(0),s=c[0],d=c[1],f=n.useState(0),v=f[0],m=f[1],_=n.useState(10)[0],E=Digit.Hooks.useBulkPdfDetails({filters:{}}),p=E.data,h=E.isLoading,g=function(e,r,i,o){var a=l.useTranslation().t,u=function(e){return t.createElement("span",{className:"cell-text"},e)},c=function(e){return"DONE"==e.status?(n=new Date(Number(e.lastmodifiedtime)),t=new Date,r=Math.abs(t-n),Math.ceil(r/864e5)<2&&e.filestoreid?e.status:"EXPIRED"):"INPROGRESS"==e.status?e.recordscompleted!==e.totalrecords||e.filestoreid||0==e.recordscompleted?e.status:"FAILED":e.status;var n,t,r},s=function(r,l){switch(r){case"DONE":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:function(){return function(e,n){try{return Promise.resolve(Digit.UploadServices.Filefetch([e],n)).then(function(e){window.open(e.data[e.data.fileStoreIds[0].id])})}catch(e){return Promise.reject(e)}}(null==l?void 0:l.filestoreid,null==l?void 0:l.tenantId)},className:"btn btn-primary btn-sm"},a("GRP_BILL_ACT_DOWNLOAD"))));case"INPROGRESS":return l.recordscompleted/l.totalrecords*100?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("div",null,u(function(e,n,r){return t.createElement("div",{style:{color:"#FE7A51",cursor:"pointer"},onClick:function(){!function(e,n,t){try{Promise.resolve(Digit.WSService.cancelGroupBill({jobId:e})).then(function(e){e&&n(function(){return{label:t("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)}})})}catch(e){return Promise.reject(e)}}(e,n,r)}},r("GRP_BILL_ACT_CANCEL"))}(l.jobid,e,a))," "))):t.createElement("span",null," ",a("CS_NA")," ");case"FAILED":case"EXPIRED":return t.createElement("div",null,t.createElement("span",{className:"link"},u(function(e,r,l,i,o,a,u){return t.createElement(n.Fragment,null,t.createElement("div",{style:{color:"#FE7A51",cursor:"pointer"},onClick:function(){!function(e,n,t,r,l,i,o){try{Promise.resolve(Digit.WSService.wnsGroupBill({key:e,tenantId:n,locality:t,isConsolidated:r,bussinessService:l})).then(function(e){e&&i(function(){return{label:o("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)}})})}catch(e){return Promise.reject(e)}}(e,r,l,i,o,a,u)}},u("ABG_RETRY")))}(l.key,l.tenantId,l.locality,l.isConsolidated,l.bussinessService,e,a))));case"CANCEL":return t.createElement("span",null," ",a("CS_NA")," ")}},d=function(e){switch(e){case"DONE":return t.createElement("span",null," ",a("GRP_BILL_DONE")," ");case"INPROGRESS":return t.createElement("span",null," ",a("GRP_BILL_INITIATED")," ");case"FAILED":case"EXPIRED":return t.createElement("span",null," ",a("GRP_BILL_"+e)," ");case"CANCEL":return t.createElement("span",null," ",a("GRP_BILL_CANCELLED")," ")}};return o?n.useMemo(function(){var e;return i||""===r?[]:null==r||null===(e=r.groupBillrecords)||void 0===e?void 0:e.map(function(e){var n;return(n={})[a("TL_DATE_LABEL")]=new Date(Number(null==e?void 0:e.createdtime)).toLocaleDateString(),n[a("BUSINESS_SERVICE")]=function(e){if(null!=e&&e.isConsolidated&&("WS"==(null==e?void 0:e.bussinessService)||"SW"==(null==e?void 0:e.bussinessService))){var n="WS"==(null==e?void 0:e.bussinessService)?"SW":"WS";return u(a("BILLINGSERVICE_BUSINESSSERVICE_"+("WS"==(null==e?void 0:e.bussinessService)?"WS":"SW"))+","+a("BILLINGSERVICE_BUSINESSSERVICE_"+n))}return u(a("BILLINGSERVICE_BUSINESSSERVICE_"+(null==e?void 0:e.bussinessService)||"-"))}(e)||"-",n[a("ES_INBOX_LOCALITY")]=u(a(Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.tenantId)+"_REVENUE_"+(null==e?void 0:e.locality))||"-"),n[a("ABG_PT_CONSUMER_CODE_LABEL")]=u((null==e?void 0:e.consumerCode)||"-"),n[a("ABG_COMMON_TABLE_COL_STATUS")]=d(c(e)),n[a("ABG_COMMON_TABLE_COL_ACTION")]=s(c(e),e),n})},[r]):n.useMemo(function(){return[{Header:a("TL_DATE_LABEL"),disableSortBy:!0,accessor:function(e){return new Date(Number(null==e?void 0:e.createdtime)).toLocaleDateString()}},{Header:a("BUSINESS_SERVICE"),disableSortBy:!0,Cell:function(e){var n,t,r,l,i=e.row;if(null!=i&&null!==(n=i.original)&&void 0!==n&&n.isConsolidated&&("WS"==(null==i||null===(t=i.original)||void 0===t?void 0:t.bussinessService)||"SW"==(null==i||null===(r=i.original)||void 0===r?void 0:r.bussinessService))){var o,c,s="WS"==(null==i||null===(o=i.original)||void 0===o?void 0:o.bussinessService)?"WS":"SW",d="WS"==(null==i||null===(c=i.original)||void 0===c?void 0:c.bussinessService)?"SW":"WS";return u(a("BILLINGSERVICE_BUSINESSSERVICE_"+s)+","+a("BILLINGSERVICE_BUSINESSSERVICE_"+d))}return u(a("BILLINGSERVICE_BUSINESSSERVICE_"+(null==i||null===(l=i.original)||void 0===l?void 0:l.bussinessService)||"-"))}},{Header:a("ES_INBOX_LOCALITY"),disableSortBy:!0,accessor:function(e){return u(a(Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.tenantId)+"_REVENUE_"+(null==e?void 0:e.locality))||"-")}},{Header:a("ABG_PT_CONSUMER_CODE_LABEL"),disableSortBy:!0,accessor:function(e){return u((null==e?void 0:e.consumerCode)||"-")}},{Header:a("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n=e.row,t=c(null==n?void 0:n.original);return d(t)}},{Header:a("ABG_COMMON_TABLE_COL_ACTION"),disableSortBy:!0,Cell:function(e){var n=e.row,t=c(null==n?void 0:n.original);return s(t,null==n?void 0:n.original)}}]},[])}(function(e){u(e)},p,h,r);n.useEffect(function(){m(null==p?void 0:p.groupBillrecords.length)},[p]);var C=function(){d(v&&10*Math.ceil(v/10)-_)},S=function(){d(function(e){return e+_})},L=function(){d(function(e){return e-_})},b=n.useCallback(function(){return h?t.createElement(i.Loader,null):null!=p&&null!==(l=p[0])&&void 0!==l&&l.display?t.createElement(Card,{style:{marginTop:20}},e(null==p||null===(o=p[0])||void 0===o?void 0:o.display).split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})):r?t.createElement(i.DetailsCard,{handleSelect:function(e){},handleDetailCardClick:function(e){},data:[].concat(g),serviceRequestIdKey:e("TL_DATE_LABEL")}):t.createElement(n.Fragment,null,p&&p.groupBillrecords?t.createElement(i.Table,{t:e,data:p?p.groupBillrecords:[],columns:g,getCellProps:function(n){return{style:{minWidth:n.column.Header===e("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},currentPage:Math.floor(s/_),onLastPage:C,onNextPage:S,onPrevPage:L,isLoading:h,totalRecords:v,manualPagination:!1,pageSizeLimit:10}):t.createElement("div",{className:"no-data"},t.createElement("p",null,e("DSS_NO_DATA"))));var l,o},[h,p]);return t.createElement("div",null,t.createElement(i.Header,null,e("ACTION_TEST_DOWNLOADBILLS")),t.createElement(b,null),(null==a?void 0:a.label)&&t.createElement(i.Toast,{label:null==a?void 0:a.label,onClose:function(e){u(function(e){return null})}}))},T=["isFetching","isLoading","searchResponseKey","data","searchFields"],M=function(e){var r,o,c,s,d=e.parentRoute,f=e.initialStates,v=void 0===f?{}:f,m=e.businessService,_=e.filterComponent,E=e.isInbox,p=e.keys,h=n.useState(null),g=h[0],C=h[1],L=Digit.ULBService.getCurrentTenantId(),b=n.useState(function(){return E?{}:{enabled:!1}})[1],A=l.useTranslation().t,y=n.useState((null==v?void 0:v.pageOffset)||0),N=y[0],B=y[1],O=n.useState(0),M=O[0],R=O[1],P=n.useState((null==v?void 0:v.pageSize)||10),D=P[0],w=P[1],x=n.useState((null==v?void 0:v.sortParams)||[{id:"applicationDate",desc:!1}]),k=x[0],G=x[1],F=n.useState(!1),U=F[0],H=F[1],W=n.useState(function(){return(null==v?void 0:v.searchParams)||{}}),j=W[0],z=W[1],V=window.Digit.Utils.browser.isMobile(),Y=V?{limit:100,offset:0,sortBy:null==k||null===(r=k[0])||void 0===r?void 0:r.id,sortOrder:null!=k&&null!==(o=k[0])&&void 0!==o&&o.desc?"DESC":"ASC"}:{limit:D,offset:N,sortBy:null==k||null===(c=k[0])||void 0===c?void 0:c.id,sortOrder:null!=k&&null!==(s=k[0])&&void 0!==s&&s.desc?"DESC":"ASC"},K=Digit.Hooks.useBillSearch({tenantId:L,filters:a({},j,{businessService:m},Y,{sortParams:k,billActive:"ACTIVE"}),config:{}}),q=K.isLoading,X=K.data,$=u(K,T);n.useEffect(function(){B(0)},[j]),n.useEffect(function(){var e;R(null==X||null===(e=X.Bills)||void 0===e?void 0:e.length)},[X]);var Z,Q=function(e){var n,t=null==e?void 0:e.delete,r={};r=V?a({},e):a({},j,e),t&&t.forEach(function(e){return delete r[e]}),null===(n=r)||void 0===n||delete n.delete,null==e||delete e.delete,H(!0),z(a({},r)),b({enabled:!0})},J=n.useCallback(function(e){0!==e.length&&G(e)},[]),ee=function(){return[{label:A("ABG_CONSUMER_ID_LABEL"),name:"consumerCode"}]},ne=function(e){try{var n,t;return Promise.resolve(Digit.WSService.wnsGroupBill({key:"ws-bill",tenantId:L,locality:null==j||null===(n=j.locality)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.code,isConsolidated:e,bussinessService:null==j?void 0:j.businesService})).then(function(e){C({label:A("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)})})}catch(e){return Promise.reject(e)}},te=n.useState(!1),re=te[0],le=te[1],ie="WS"===(null==j?void 0:j.businesService)?[{order:1,label:A("ABG_WATER_BILLS"),onClick:function(){return ne(!1)}},{order:2,label:A("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return ne(!0)}}]:"SW"===(null==j?void 0:j.businesService)?[{order:1,label:A("ABG_SEWERAGE_BILLS"),onClick:function(){return ne(!1)}},{order:2,label:A("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return ne(!0)}}]:[{order:1,label:A("BILLS_MERGE_AND_DOWNLOAD"),onclick:function(e){!function(){try{var e=p.filter(function(e){return e.code===j.businesService});Promise.resolve(Digit.PaymentService.generatePdf(L,{Bill:X.Bills},e[0].billKey)).then(function(e){return Promise.resolve(Digit.UploadServices.Filefetch(null==e?void 0:e.filestoreIds,L)).then(function(n){window.open(n.data[e.filestoreIds[0]])})})}catch(e){return Promise.reject(e)}}()}}];return V?t.createElement(I,{data:X,isLoading:q,searchFields:ee(),onFilterChange:Q,onSearch:Q,onSort:J,parentRoute:d,searchParams:j,sortParams:k}):t.createElement("div",{className:"groupBill-custom"},t.createElement("div",{className:"custom-group-merge-container employee-application-details"},E&&t.createElement(i.Header,null,"Group Bills"),X&&(null==X||null===(Z=X.Bills)||void 0===Z?void 0:Z.length)>=0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:function(){return le(!re)},displayOptions:re,options:ie,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",label:A("BILLS_MERGE_AND_DOWNLOAD")})),t.createElement(S,{businessService:m,data:X,tableConfig:null==$?void 0:$.tableConfig,isLoading:q,defaultSearchParams:v.searchParams,isSearch:!E,onFilterChange:Q,searchFields:ee(),setSearchFieldsBackToOriginalState:U,setSetSearchFieldsBackToOriginalState:H,onSearch:Q,onSort:J,onNextPage:function(){B(function(e){return e+D})},onPrevPage:function(){B(function(e){return e-D})},currentPage:Math.floor(N/D),pageSizeLimit:D,disableSort:!1,onPageSizeChange:function(e){w(Number(e.target.value))},parentRoute:d,searchParams:j,sortParams:k,totalRecords:M,filterComponent:_}),g&&t.createElement(i.Toast,{label:null==g?void 0:g.label,onClose:function(){return C(null)}}))},R=["isLoading","data"],P=function(){Digit.ULBService.getCurrentTenantId();var e=r.useLocation().state,n=l.useTranslation().t,o=e.currentBill,c=e.bill,s=Digit.Hooks.useCancelBill({filters:a({},e.filters)}),d=s.isLoading,f=s.data;return u(s,R),t.createElement("div",null,d?t.createElement(i.Loader,null):t.createElement(i.Card,null,t.createElement(i.Banner,{message:n(!d&&null!=f&&f.Message?"ABG_BILL_CANCELLED":"AGB_BILL_CANCEL_FAILED"),applicationNumber:(null==o?void 0:o.billNumber)||(null==c?void 0:c.billNumber),info:!d&&null!=f&&f.Message?n("ABG_BILL_NUMBER_LABEL"):"",successful:!(d||null==f||!f.Message)}),!d&&null!=f&&f.Message?t.createElement(i.CardText,null,n("COMMON_RESPONSE_SUCCESS_MESSAGE_CANCEL_BILL")):null,t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(r.Link,{to:"/digit-ui/employee",style:{marginRight:"1rem"}},t.createElement(i.SubmitBar,{label:n("CORE_COMMON_GO_TO_HOME")})))))},D={WS:{heading:"COMMON_PAY_SCREEN_HEADER",details:[{keyValue:"WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL",keyPath:["consumerCode"],fallback:""},{keyValue:"CS_PAYMENT_BILLING_PERIOD",keyPath:["billDetails",function(e){var n=e[0],t=n.fromPeriod,r=n.toPeriod;return t&&r?new Date(t).toLocaleDateString()+" - "+new Date(r).toLocaleDateString():"N/A"}],fallback:"N/A"},{keyValue:"CS_BILL_NO",keyPath:["billNumber"],fallback:"N/A"},{keyValue:"CS_BILL_DUEDATE",keyPath:["billDetails",function(e){var n=e[0].expiryDate;return n?new Date(n).toLocaleDateString():"N/A"}],fallback:"N/A"}]},SW:{heading:"COMMON_PAY_SCREEN_HEADER",details:[{keyValue:"WS_COMMON_TABLE_COL_CONSUMER_NO_LABEL",keyPath:["consumerCode"],fallback:""},{keyValue:"CS_PAYMENT_BILLING_PERIOD",keyPath:["billDetails",function(e){var n=e[0],t=n.fromPeriod,r=n.toPeriod;return t&&r?new Date(t).toLocaleDateString()+" - "+new Date(r).toLocaleDateString():"N/A"}],fallback:"N/A"},{keyValue:"CS_BILL_NO",keyPath:["billNumber"],fallback:"N/A"},{keyValue:"CS_BILL_DUEDATE",keyPath:["billDetails",function(e){var n=e[0].expiryDate;return n?new Date(n).toLocaleDateString():"N/A"}],fallback:"N/A"}]}},w=function(e){return t.createElement("h1",{className:"heading-m"},e.t("ABG_CANCEL_BILL"))},x=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},k=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(x,null))},G=function(e){var r,l,a,u=e.t,c=e.closeModal,s=e.actionCancelLabel,d=e.actionCancelOnSubmit,f=e.actionSaveLabel,v=e.actionSaveOnSubmit,m=e.onSubmit,_=Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(),"common-masters",[{name:"CancelCurrentBillReasons"}],{select:function(e){var n;return null==e||null===(n=e["common-masters"])||void 0===n?void 0:n.CancelCurrentBillReasons}}),E=_.isLoading,p=_.data,h=_.isFetched,g=n.useMemo(function(){return null==(e=p)?void 0:e.map(function(e){return{code:null==e?void 0:e.code,active:null==e?void 0:e.active,message:"BC_REASON_"+(null==e?void 0:e.code)}});var e},[p]),C=o.useForm(),S=C.control,L=C.handleSubmit,b=C.formState,A=null==b?void 0:b.errors,y=o.useWatch({control:S,name:"reason",defaultValue:""}),N=!1;return null!=y&&null!==(r=y.code)&&void 0!==r&&r.includes("OTHER")&&(N=!0),t.createElement(i.Modal,{headerBarMain:t.createElement(w,{t:u}),headerBarEnd:t.createElement(k,{onClick:c}),actionCancelLabel:u(s),actionCancelOnSubmit:d,actionSaveLabel:u(f),actionSaveOnSubmit:L(v),formId:"modal-action"},t.createElement(i.Card,{style:{boxShadow:"none"}},t.createElement("form",{onSubmit:L(m)},!E&&h?t.createElement("span",null,t.createElement("label",null,u("BC_RECEIPT_CANCELLATION_REASON_LABEL")+"*"),t.createElement(o.Controller,{control:S,rules:{required:u("REQUIRED_FIELD")},name:"reason",render:function(e){return t.createElement(i.Dropdown,{option:g,select:function(n){e.onChange(n)},optionKey:"message",onBlur:e.onBlur,t:u,selected:e.value})}}),A&&(null==A?void 0:A.reason)&&"required"===(null==A||null===(l=A.reason)||void 0===l?void 0:l.type)&&t.createElement(i.CardLabelError,null,u("CS_COMMON_REQUIRED_ERROR"))):t.createElement(i.Loader,null),"OTHER"===(null==y?void 0:y.code)&&t.createElement("span",{className:"surveyformfield"},t.createElement("label",null,u("BC_MORE_DETAILS_LABEL")+"*"),t.createElement(o.Controller,{control:S,rules:N?{required:u("REQUIRED_FIELD")}:{},name:"details",render:function(e){return t.createElement(i.TextArea,{disabled:!N,onChange:e.onChange})}}),A&&(null==A?void 0:A.details)&&"required"===(null==A||null===(a=A.details)||void 0===a?void 0:a.type)&&t.createElement(i.CardLabelError,null,u("CS_COMMON_REQUIRED_ERROR"))))))},F=function(e){var o,u,c,s,d,f,v,m,_,E=r.useHistory(),p=Digit.Hooks.useQueryParams(),h=p.connectionNumber,g=p.service,C=p.tenantId,S=Digit.Hooks.useFetchBillsForBuissnessService(a({businessService:g},{consumerCode:h},{tenantId:C})),L=null==S||null===(o=S.data)||void 0===o||null===(u=o.Bill)||void 0===u?void 0:u[0],b=r.useLocation().state,A=l.useTranslation().t,y=b,N=D[null==y?void 0:y.businessService],B=(null==L||null===(c=L.billDetails)||void 0===c||null===(s=c.sort(function(e,n){return n.fromPeriod-e.fromPeriod}))||void 0===s?void 0:s.reduce(function(e,n,t){return 0===t?e:e+n.amount},0))||0,I=null==L||null===(d=L.billDetails)||void 0===d?void 0:d.sort(function(e,n){return n.fromPeriod-e.fromPeriod}),O=(null==I?void 0:I[0])||[],T=Digit.Hooks.ws.useConnectionDetail(A,C,h,"WS"===g?"WATER":"SEWERAGE"),M=T.isLoading,R=T.data,P=n.useState(!1),w=P[0],x=P[1],k=function(e){var n,t;x(!1);var r={tenantId:C,consumerCodes:[null==y?void 0:y.consumerCode],businessService:null==y?void 0:y.businessService,statusToBeUpdated:"CANCELLED",additionalDetails:{reason:null==e||null===(n=e.reason)||void 0===n?void 0:n.code,description:(null==e?void 0:e.details)||"",reasonMessage:A(null==e||null===(t=e.reason)||void 0===t?void 0:t.message)}};E.push("/digit-ui/employee/bills/response-cancelBill",{filters:r,bill:y})},F=function(e,n){return e?n?e:A(e):A("NA")},U=function(e){return null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?F(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+A(null==e?void 0:e.isUnit):A("N/A"):null!=e&&e.value?F(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):A("N/A")},H=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),W=window.location.href.includes("employee/noc"),j=window.location.href.includes("employee/obps"),z=window.location.href.includes("employee/ws");return t.createElement(n.Fragment,null,t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},A("ABG_BILL_DETAILS_HEADER"))),L&&!M?t.createElement(i.Card,{style:{position:"relative"},className:"employeeCard-override"},t.createElement(n.Fragment,null,t.createElement(i.StatusTable,null,L&&(null==N?void 0:N.details.map(function(e,n){var r=e.keyPath.reduce(function(e,n){return"function"==typeof n?n(e):e[n]},L);return t.createElement(i.Row,{key:n+"bill",label:A(e.keyValue),text:r})}))),t.createElement(i.StatusTable,{style:{paddingTop:"46px"}},t.createElement(i.CardSectionHeader,null,A("ABG_BILL_DETAILS_HEADER")),t.createElement(i.Row,{label:A("ES_PAYMENT_TAXHEADS"),textStyle:{fontWeight:"bold"},text:A("ES_PAYMENT_AMOUNT")}),t.createElement("hr",{style:{width:"40%"},className:"underline"}),null==O||null===(f=O.billAccountDetails)||void 0===f?void 0:f.sort(function(e,n){return e.order-n.order}).map(function(e,n){var r;return t.createElement(i.Row,{key:n+"taxheads",labelStyle:{fontWeight:"normal"},textStyle:{textAlign:"right",maxWidth:"100px"},label:A(e.taxHeadCode),text:"₹ "+(null===(r=e.amount)||void 0===r?void 0:r.toFixed(2))})}),null!=B&&null!==(v=B.toFixed)&&void 0!==v&&v.call(B,2)?t.createElement(i.Row,{labelStyle:{fontWeight:"normal"},textStyle:{textAlign:"right",maxWidth:"100px"},label:A("COMMON_ARREARS"),text:"₹ "+(null==B||null===(m=B.toFixed)||void 0===m?void 0:m.call(B,2))||Number(0).toFixed(2)}):null,t.createElement("hr",{style:{width:"40%"},className:"underline"}),t.createElement(i.Row,{label:A("CS_PAYMENT_TOTAL_AMOUNT"),textStyle:{fontWeight:"bold",textAlign:"right",maxWidth:"100px"},text:"₹ "+(null!=y&&y.totalAmount?null==y?void 0:y.totalAmount:0)}))),null==R||null===(_=R.applicationDetails)||void 0===_?void 0:_.map(function(e,n){var l;return t.createElement(t.Fragment,{key:n},t.createElement("div",null,0!==n||e.asSectionHeader?t.createElement(t.Fragment,null,t.createElement(i.CardSectionHeader,{style:0==n&&H?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},W?""+A(e.title):A(e.title),null!=e&&e.Component?t.createElement(e.Component,null):null)):t.createElement(CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},A(e.title)),(null==e?void 0:e.isTable)&&t.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},t.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(function(e){return t.createElement("th",{style:{padding:"10px"}},A(e))})),null==e?void 0:e.tableRows.map(function(e){return t.createElement("tr",null,e.map(function(e){return t.createElement("td",{style:{paddingRight:"60px",paddingTop:"20px",textAlign:"center"}},A(e))}))})),t.createElement(i.StatusTable,null,(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(n,l){var o,a;return t.createElement(i.Row,!0===n.map&&"N/A"!==n.value?{key:A(n.title),label:A(n.title),text:t.createElement("img",{src:A(n.value),alt:""})}:1==(null==n?void 0:n.isLink)?{key:A(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")||window.location.href.includes("bills")?t.createElement("div",{style:{width:"200%"}},t.createElement(r.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#F47738"}},A(null==n?void 0:n.title)))):W||j?""+A(n.title):A(n.title),text:t.createElement("div",null,t.createElement(r.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#F47738"}},null==n?void 0:n.value))),last:l===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none"}:{key:A(n.title),label:z?A(n.title)+":":A(n.title),text:U(n),last:l===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:n.caption,className:"border-none"})})))))})):t.createElement(i.Loader,null),t.createElement(i.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(i.SubmitBar,{label:A("ABG_CANCEL_BILL"),onSubmit:function(){return x(!0)}})),w&&t.createElement(G,{t:A,closeModal:function(){return x(!1)},actionCancelLabel:"ABG_BACK",actionCancelOnSubmit:function(){return x(!1)},actionSaveLabel:"ABG_CANCEL_BILL",actionSaveOnSubmit:k,onSubmit:k}))},U=["isLoading","data"],H=function(){l.useTranslation();var e,r,i,o,c,s,d,f=Digit.ComponentRegistryService.getComponent("CancelBills"),v=Digit.ULBService.getCurrentTenantId(),m=n.useState(""),_=m[0],E=m[1],p=(n.useState(""),n.useState("")),h=p[0],g=p[1],C=Digit.Hooks.useBillSearch({tenantId:v,filters:a({},_,{tenantId:v}),config:{cacheTime:0}}),S=C.isLoading,L=C.data,b=(u(C,U),null==L?void 0:L.Bills),A=[],y={};null==b||b.map(function(e){y[e.consumerCode]=e,e.billDetails[0].expiryDate<(new Date).getTime()&&A.push(e.consumerCode)}),(null==A?void 0:A.length)>0&&(d=[].concat(A));var N=Digit.Hooks.useFetchBillsForBuissnessService(a({businessService:h},{consumerCode:null===(e=d)||void 0===e?void 0:e.join(",")},{tenantId:v}),{enabled:(null==A?void 0:A.length)>0&&""!==h}),B=null==N||null===(r=N.data)||void 0===r?void 0:r.Bill;null==B||B.map(function(e){y[e.consumerCode]=e});var I=Object.values(y);return t.createElement(f,{tenantId:v,onSubmit:function(e){var n;g(null==e||null===(n=e.businesService)||void 0===n?void 0:n.businesService),E(function(n){var t,r,l=Object.keys(e).filter(function(n){return e[n]}).reduce(function(n,t){var r;return a({},n,((r={})[t]="object"==typeof e[t]?e[t].code:e[t],r))},{});return a({},l,{businesService:null==e||null===(t=e.businesService)||void 0===t?void 0:t.businesService,url:null==e||null===(r=e.businesService)||void 0===r?void 0:r.url,billActive:"ACTIVE"})})},isLoading:S,data:(null==A?void 0:A.length)>0?I:null==L?void 0:L.Bills,count:null==L||null===(i=L.Bills)||void 0===i?void 0:i.length,resultOk:(null==A?void 0:A.length)>0?!(null!=N&&N.isLoading)&&(null==N||null===(o=N.data)||void 0===o||null===(c=o.Bill)||void 0===c?void 0:c.length)>0:!S&&(null==L||null===(s=L.Bills)||void 0===s?void 0:s.length)>=0})},W=["isLoading","data"],j=function(){l.useTranslation();var e,r=Digit.ComponentRegistryService.getComponent("GroupBills"),i=Digit.ULBService.getCurrentTenantId(),o=n.useState(""),c=o[0],s=o[1],d=(n.useState(""),n.useState("")),f=d[0],v=d[1],m=n.useState(""),_=m[0],E=m[1],p=Digit.Hooks.useBillSearch({tenantId:i,filters:a({},c,{tenantId:i}),config:{cacheTime:0}}),h=p.isLoading,g=p.data;return u(p,W),t.createElement(r,{tenantId:i,onSubmit:function(e){var n;v(null==e||null===(n=e.businesService)||void 0===n?void 0:n.businesService),E(null==e?void 0:e.locality),s(function(n){var t,r,l={businesService:null==e||null===(t=e.businesService)||void 0===t?void 0:t.businesService,url:null==e||null===(r=e.businesService)||void 0===r?void 0:r.url,billActive:"ACTIVE",locality:[null==e?void 0:e.locality],consumerCode:null==e?void 0:e.consumerCode};return""===(null==e?void 0:e.consumerCode)&&delete l.consumerCode,l})},isLoading:h,data:null==g?void 0:g.Bills,count:null==g||null===(e=g.Bills)||void 0===e?void 0:e.length,resultOk:!h,serviceType:f,locality:_})},z=function(e){var r,l,u,c=e.register,s=e.control,d=e.reset,f=e.t,v=e.previousPage,m=e.formState,_=Digit.Hooks.useCommonMDMS(e.tenantId,"BillingService","BillsGenieKey"),E=_.isLoading,p=_.data,h=null==p||null===(r=p.BillingService)||void 0===r||null===(l=r.BusinessService)||void 0===l?void 0:l.filter(function(e){return e.billGineiURL}),g=[];h&&(g=h.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}}));var C,S=null==m?void 0:m.errors,L={maxlength:10,pattern:"[6-9][0-9]{9}",title:f("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"},b=(f("ERR_DEFAULT_INPUT_FIELD_MSG"),o.useWatch({control:s,name:"serviceCategory",defaultValue:""}));return t.createElement(n.Fragment,null,E?t.createElement(i.Loader,null):t.createElement(i.SearchField,null,t.createElement("label",null,f("ABG_SERVICE_CATEGORY_LABEL")+" *"),t.createElement(o.Controller,{control:s,rules:{required:f("REQUIRED_FIELD")},name:"serviceCategory",render:function(e){return t.createElement(i.Dropdown,{name:"serviceCategory",t:f,option:g,onBlur:e.onBlur,selected:e.value,select:e.onChange,optionKey:"name",optionCardStyles:{zIndex:"20"}})}}),S&&(null==S?void 0:S.serviceCategory)&&"required"===(null==S||null===(u=S.serviceCategory)||void 0===u?void 0:u.type)&&t.createElement(i.CardLabelError,null,f("CS_COMMON_REQUIRED"))),t.createElement(i.SearchField,null,t.createElement("label",null,f("ABG_BILL_NUMBER_LABEL")),t.createElement(i.TextInput,{name:"billNo",inputRef:c({})})),t.createElement(i.SearchField,null,t.createElement("label",null,f("WS"!==(C=null==b?void 0:b.businesService)&&"SW"!==C&&C?"ABG_COMMON_TABLE_COL_PROPERTY_ID":"ABG_COMMON_TABLE_COL_CONSUMER_ID")),t.createElement(i.TextInput,{name:"consumerCode",inputRef:c({})})),t.createElement(i.SearchField,null,t.createElement("label",null,f("ABG_MOBILE_NO_LABEL")),t.createElement(i.MobileNumber,a({name:"mobileNumber",inputRef:c({})},L))),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:f("ES_COMMON_SEARCH"),submit:!0}),t.createElement("p",{onClick:function(){d({serviceCategory:"",consumerCode:"",billNo:"",mobileNumber:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),v()}},f("ES_COMMON_CLEAR_ALL"))))},V=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Y=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],K=function(e){var l=e.Controller,o=e.register,c=e.control,s=e.t,d=e.reset,f=e.previousPage,_=e.handleSubmit,E=e.tenantId,p=e.data,h=e.onSubmit,g=e.isLoading,C=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),S=C[0],L=C[1],b=function(){L({type:"remove"})},A=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},y=function(){return t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:b},t.createElement(i.CloseSvg,null))},N={Controller:l,register:o,control:c,t:s,reset:d,previousPage:f},B=n.useState([]),I=B[0],O=B[1],T=function(e){return t.createElement("div",{onClick:e.onClick},t.createElement(i.DownloadBtnCommon,null))};n.useEffect(function(){(null==p?void 0:p.length)>0&&O([null==p?void 0:p.map(function(e){var n={};return n[s("ABG_COMMON_TABLE_COL_BILL_NO")]=null==e?void 0:e.billNumber,n[s("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=null==e?void 0:e.payerName,n[s("ABG_COMMON_TABLE_COL_BILL_DATE")]=A(null==e?void 0:e.billDate),n[s("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=null==e?void 0:e.totalAmount,n[s("ABG_COMMON_TABLE_COL_STATUS")]=null==e?void 0:e.status,a({},n)})])},[p]);var M=n.useCallback(function(e){return function(e){var n=e.currentlyActiveMobileModal,r=e.searchFormFieldsComponentProps,l=e.tenantId,o=u(e,V),c=o.closeMobilePopupModal;switch(n){case"SearchFormComponent":return t.createElement(i.SearchForm,o,t.createElement(y,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,s("ABG_SEARCH_BILL_COMMON_HEADER"),":")),t.createElement(z,a({},r,{closeMobilePopupModal:c,tenantId:l,t:s})));default:return t.createElement("span",null)}}(a({currentlyActiveMobileModal:e.currentlyActiveMobileModal,searchFormFieldsComponentProps:e.searchFormFieldsComponentProps,tenantId:e.tenantId},u(e,Y)))},[S]),R=function(e){return t.createElement("span",{className:"cell-text"},e)},P=n.useMemo(function(){return null!=p&&p.display||""===p?[]:null==p?void 0:p.map(function(e){var n,l,i,o,a,u,c,d,f,_,E,p;return(i={})[s("ABG_COMMON_TABLE_COL_BILL_NO")]=function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},R(v(null==e?void 0:e.businessService,null==e?void 0:e.consumerCode,null==e?void 0:e.billNumber))))}(e),i[s("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=null!=e&&null!==(n=e.user)&&void 0!==n&&n.name?s(""+(null==e||null===(l=e.user)||void 0===l?void 0:l.name)):"NA",i[s("ABG_COMMON_TABLE_COL_BILL_DATE")]=R(A(null==e?void 0:e.billDate)),i[s("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=R((null==e?void 0:e.totalAmount)||"NA"),i[s("ABG_COMMON_TABLE_COL_STATUS")]=R((null==e?void 0:e.status)||"NA"),i[s("ABG_COMMON_TABLE_COL_ACTION")]=R((null==(o=e)?void 0:o.totalAmount)>0?"ACTIVE"===(null==o?void 0:o.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null==o?void 0:o.businessService)+"/"+(null!=o&&null!==(a=o.consumerCode)&&void 0!==a&&a.includes("WS")||null!=o&&null!==(u=o.consumerCode)&&void 0!==u&&u.includes("SW")?encodeURIComponent(null==o?void 0:o.consumerCode,"/","+"):null==o?void 0:o.consumerCode)+"/tenantId="+(null==o?void 0:o.tenantId)+"?workflow="+(null!=o&&null!==(c=o.consumerCode)&&void 0!==c&&c.includes("WS")||null!=o&&null!==(d=o.consumerCode)&&void 0!==d&&d.includes("SW")?"WS":"mcollect")}},s("ABG_COLLECT")))):"CANCELLED"===(null==o?void 0:o.status)||"EXPIRED"===(null==o?void 0:o.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null==o?void 0:o.businessService)+"/"+(null!=o&&null!==(f=o.consumerCode)&&void 0!==f&&f.includes("WS")||null!=o&&null!==(_=o.consumerCode)&&void 0!==_&&_.includes("SW")?encodeURIComponent(null==o?void 0:o.consumerCode,"/","+"):null==o?void 0:o.consumerCode)+"/tenantId="+(null==o?void 0:o.tenantId)+"?workflow="+(null!=o&&null!==(E=o.consumerCode)&&void 0!==E&&E.includes("WS")||null!=o&&null!==(p=o.consumerCode)&&void 0!==p&&p.includes("SW")?"WS":"mcollect")}},s("ABG_GENERATE_NEW_BILL")))):"PAID"===(null==o?void 0:o.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,null,t.createElement("a",{href:"javascript:void(0)",style:{color:"#FE7A51",cursor:"pointer"},onClick:function(e){m(null==o?void 0:o.businessService,null==o?void 0:o.consumerCode)}}," ",s("ABG_DOWNLOAD_RECEIPT")," ")))):void 0:R(s("CS_NA"))),i})},[p]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"sideContent",style:{marginLeft:"65%",marginTop:"-12%"}},t.createElement(T,{className:"mrlg cursorPointer",onClick:function(){return function(e){if(void 0!==(null==e?void 0:e[0]))return Digit.Download.Excel(null==e?void 0:e[0],"Bills")}(I)}})),t.createElement(i.Header,null,s("ABG_SEARCH_BILL_COMMON_HEADER"),":"),t.createElement("div",{className:"searchBox"},t.createElement(i.SearchAction,{text:s("ES_COMMON_SEARCH"),handleActionClick:function(){return L({type:"set",payload:"SearchFormComponent"})},tenantId:E,t:s})),S?t.createElement(i.PopUp,null,t.createElement(M,{onSubmit:function(e){L({type:"remove"}),h(e)},handleSubmit:_,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:N,currentlyActiveMobileModal:S,closeMobilePopupModal:b,tenantId:E})):null,g&&t.createElement(i.Loader,null),t.createElement(i.DetailsCard,{data:P,serviceRequestIdKey:s("CR_COMMON_TABLE_COL_RECEIPT_NO")}))},q=function(e){var l=e.showTable,u=e.showLoader,c=e.isLoading,s=e.tenantId,d=e.t,m=e.onSubmit,_=e.data,E=e.count,p=e.success,h=Digit.SessionStorage.get("BILLS_SEARCH_APPLICATION_DETAIL")||{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"},g=o.useForm({defaultValues:h}),C=g.register,S=g.control,L=g.handleSubmit,b=g.setValue,A=g.getValues,y=g.reset,N=g.formState,B=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},I=n.useState([]),O=I[0],T=I[1],M=function(e){return t.createElement("div",{onClick:e.onClick},t.createElement(i.DownloadBtnCommon,null))};n.useEffect(function(){C("offset",0),C("limit",10),C("sortBy","commencementDate"),C("sortOrder","DESC")},[C]),n.useEffect(function(){(null==_?void 0:_.length)>0&&T([null==_?void 0:_.map(function(e){var n={};return n[d("ABG_COMMON_TABLE_COL_BILL_NO")]=null==e?void 0:e.billNumber,n[d("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=null==e?void 0:e.payerName,n[d("ABG_COMMON_TABLE_COL_BILL_DATE")]=B(null==e?void 0:e.billDate),n[d("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=null==e?void 0:e.totalAmount,n[d("ABG_COMMON_TABLE_COL_STATUS")]=null==e?void 0:e.status,a({},n)})])},[_]);var R=n.useCallback(function(e){0!==e.length&&(b("sortBy",e.id),b("sortOrder",e.desc?"DESC":"ASC"))},[]);function P(){b("offset",A("offset")-A("limit")),L(m)()}if(window.Digit.Utils.browser.isMobile())return t.createElement(K,{showTable:l,showLoader:u,isLoading:c,Controller:o.Controller,register:C,control:S,t:d,reset:y,previousPage:P,handleSubmit:L,tenantId:s,data:_,onSubmit:m});var D=function(e){return t.createElement("span",{className:"cell-text"},e)},w=n.useMemo(function(){return[{Header:d("ABG_COMMON_TABLE_COL_BILL_NO"),disableSortBy:!0,Cell:function(e){var n,r,l,i=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},D(v(null===(n=i.original)||void 0===n?void 0:n.businessService,null===(r=i.original)||void 0===r?void 0:r.consumerCode,null===(l=i.original)||void 0===l?void 0:l.billNumber))))}},{Header:d("ABG_COMMON_TABLE_COL_CONSUMER_NAME"),disableSortBy:!0,Cell:function(e){var n;return D(""+(null===(n=e.row.original)||void 0===n?void 0:n.payerName))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_DATE"),disableSortBy:!0,Cell:function(e){var n,t,r=e.row,l="NA"===(null===(n=r.original)||void 0===n?void 0:n.billDate)?d("CS_NA"):B(null===(t=r.original)||void 0===t?void 0:t.billDate);return D(d(""+l))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_AMOUNT"),disableSortBy:!0,Cell:function(e){var n;return D(""+(null===(n=e.row.original)||void 0===n?void 0:n.totalAmount))}},{Header:d("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n;return D(""+(null===(n=e.row.original)||void 0===n?void 0:n.status))}},{Header:d("ABG_COMMON_TABLE_COL_ACTION"),disableSortBy:!0,Cell:function(e){var n,t,r=e.row,l=null===(n=r.original)||void 0===n?void 0:n.totalAmount;return D(l>0?x(null===(t=r.original)||void 0===t?void 0:t.status,r):d("CS_NA"))}}]},[]),x=function(e,n){var l,i,o,a,u,c,s,v,m,_,E,p,h,g,C,S,L,b,A,y,N,B,I,O,T,M;if(window.location.href.includes("/digit-ui/employee/bills/group-bill"))return null;switch(e){case"ACTIVE":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null===(l=n.original)||void 0===l?void 0:l.businessService)+"/"+(null!==(i=n.original)&&void 0!==i&&null!==(o=i.consumerCode)&&void 0!==o&&o.includes("WS")||null!==(a=n.original)&&void 0!==a&&null!==(u=a.consumerCode)&&void 0!==u&&u.includes("SW")?encodeURIComponent(null===(c=n.original)||void 0===c?void 0:c.consumerCode,"/","+"):null===(s=n.original)||void 0===s?void 0:s.consumerCode)+"/tenantId="+(null===(v=n.original)||void 0===v?void 0:v.tenantId)+"?workflow="+(null!==(m=n.original)&&void 0!==m&&null!==(_=m.consumerCode)&&void 0!==_&&_.includes("WS")||null!==(E=n.original)&&void 0!==E&&null!==(p=E.consumerCode)&&void 0!==p&&p.includes("SW")?"WS":"mcollect")}},d("ABG_COLLECT")," ")));case"CANCELLED":case"EXPIRED":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/employee/payment/collect/"+(null===(h=n.original)||void 0===h?void 0:h.businessService)+"/"+(null!==(g=n.original)&&void 0!==g&&null!==(C=g.consumerCode)&&void 0!==C&&C.includes("WS")||null!==(S=n.original)&&void 0!==S&&null!==(L=S.consumerCode)&&void 0!==L&&L.includes("SW")?encodeURIComponent(null===(b=n.original)||void 0===b?void 0:b.consumerCode,"/","+"):null===(A=n.original)||void 0===A?void 0:A.consumerCode)+"/tenantId="+(null===(y=n.original)||void 0===y?void 0:y.tenantId)+"?workflow="+(null!==(N=n.original)&&void 0!==N&&null!==(B=N.consumerCode)&&void 0!==B&&B.includes("WS")||null!==(I=n.original)&&void 0!==I&&null!==(O=I.consumerCode)&&void 0!==O&&O.includes("SW")?"WS":"mcollect")}},d("ABG_GENERATE_NEW_BILL"))));case"PAID":return t.createElement("div",null,t.createElement("span",{className:"link"},f(null===(T=n.original)||void 0===T?void 0:T.businessService,null===(M=n.original)||void 0===M?void 0:M.consumerCode)))}};return t.createElement(t.Fragment,null,t.createElement(i.Header,null,d("ABG_SEARCH_BILL_COMMON_HEADER")),t.createElement(i.Card,{className:"card-search-heading"},t.createElement("span",{style:{color:"#505A5F"}},d("WS_INFO_VALIDATION"))),t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:m,handleSubmit:L},t.createElement(z,{register:C,control:S,reset:y,tenantId:s,t:d,previousPage:P,formState:N})),c&&t.createElement(i.Loader,null),_&&0==(null==_?void 0:_.length)?t.createElement(i.Card,{style:{backgroundColor:"white",textAlign:"center"}},d("ES_COMMON_NO_DATA")):p&&_&&_.length>0&&t.createElement("div",{style:{backgroundColor:"white"}},t.createElement("div",{className:"sideContent",style:{float:"left",padding:"20px 10px",fontSize:"24px",fontWeight:"700",fontFamily:"Roboto"}},d("ABG_SEARCH_RESULTS_HEADER")),t.createElement("div",{className:"sideContent",style:{float:"right",padding:"10px 30px"}},t.createElement("span",{className:"table-search-wrapper"},t.createElement(M,{className:"mrlg cursorPointer",onClick:function(){return function(e){if(void 0!==(null==e?void 0:e[0]))return Digit.Download.Excel(null==e?void 0:e[0],"Bills")}(O)}}))),t.createElement(i.Table,{t:d,data:_,totalRecords:E,columns:w,getCellProps:function(e){return{style:{minWidth:e.column.Header===d("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:function(e){b("limit",Number(e.target.value)),L(m)()},currentPage:A("offset")/A("limit"),onNextPage:function(){b("offset",A("offset")+A("limit")),L(m)()},manualPagination:!1,onPrevPage:P,pageSizeLimit:A("limit"),onSort:R,disableSort:!1,sortParams:[{id:A("sortBy"),desc:"DESC"===A("sortOrder")}]})))},X=["isFetching","isLoading","count","isLoading","searchResponseKey","data","searchFields"],$=function(e){var r,i=l.useTranslation().t,o=Digit.ULBService.getCurrentTenantId(),c=n.useState({}),s=c[0],d=c[1];n.useEffect(function(){var e=Digit.SessionStorage.get("BILL_SEARCH_APPLICATION_DETAIL")||{};if(e){var n=a({},e);d(Object.keys(n).filter(function(e){return n[e]}).reduce(function(e,t){var r;return a({},e,((r={})[t]="object"==typeof n[t]?n[t].code:n[t],r))},{}))}},[]);var f=a({},s),v=null==s?void 0:s.serviceCategory;delete f.serviceCategory;var m=Digit.Hooks.useBillSearch({tenantId:o,filters:a({},f,{url:null==v?void 0:v.url,businesService:null==v?void 0:v.businesService}),config:{}}),_=m.isLoading,E=m.data;return u(m,X),t.createElement(t.Fragment,null,t.createElement(q,{t:i,tenantId:o,onSubmit:function(e){Digit.SessionStorage.set("BILL_SEARCH_APPLICATION_DETAIL",{serviceCategory:null==e?void 0:e.serviceCategory,consumerCode:null==e?void 0:e.consumerCode,billNumber:null==e?void 0:e.billNumber,mobileNumber:null==e?void 0:e.mobileNumber,offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"});var n=a({},e);d(Object.keys(n).filter(function(e){return n[e]}).reduce(function(e,t){var r;return a({},e,((r={})[t]=n[t],r))},{}))},data:null==E?void 0:E.Bills,count:null==E||null===(r=E.Bills)||void 0===r?void 0:r.length,success:!_,isLoading:_}))},Z=function(e){var n=e.location,o=l.useTranslation().t,a=r.useLocation().search,u=new URLSearchParams(a).get("from")||null,c=[{path:"/digit-ui/employee",content:o("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/bills/cancel-bill",content:o("ABG_CANCEL_BILL"),show:!!n.pathname.includes("/cancel-bill")},{path:"/digit-ui/employee/bills/bill-details",content:u?o(u)+" / "+o("ABG_BILL_DETAILS_HEADER"):o("ABG_BILL_DETAILS_HEADER"),show:!!n.pathname.includes("/bill-details"),isBack:u&&!0},{path:"/digit-ui/employee/bills/group-bill",content:o("ABG_COMMON_HEADER"),show:!!n.pathname.includes("/group-bill")},{path:"/digit-ui/employee/bills/inbox",content:o("ABG_SEARCH_BILL_COMMON_HEADER"),show:!!n.pathname.includes("/inbox")},{path:"/digit-ui/employee/bills/download-bill-pdf",content:o("ABG_VIEW_DOWNLOADS_HEADER"),show:!!n.pathname.includes("/download-bill-pdf")}];return t.createElement(i.BreadCrumb,{crumbs:c,spanStyle:{maxWidth:"min-content"}})},Q=function(e){var n,o,a=e.path,u=(l.useTranslation(),r.useLocation()),c=innerWidth<=640,s=Digit.ULBService.getCurrentTenantId(),d={searchParams:{}},f=Digit.Hooks.useCommonMDMS(s,"BillingService","BillsGenieKey").data,v=null==f||null===(n=f.BillingService)||void 0===n||null===(o=n.BusinessService)||void 0===o?void 0:o.filter(function(e){return e.billGineiURL});return null==v||v.forEach(function(e){}),Digit.ComponentRegistryService.getComponent("BillInbox"),t.createElement(r.Switch,null,t.createElement(t.Fragment,null,t.createElement("div",{className:"ground-container"},t.createElement("p",{className:"breadcrumb",style:{marginLeft:c?"2vw":"revert"}},t.createElement(Z,{location:u})),t.createElement(i.PrivateRoute,{path:a+"/inbox",component:function(){return t.createElement($,{parentRoute:a,filterComponent:"BILLS_INBOX_FILTER",initialStates:d,isInbox:!0})}}),t.createElement(i.PrivateRoute,{path:a+"/group-bill",component:function(){return t.createElement(j,{parentRoute:a,filterComponent:"BILLS_INBOX_FILTER",initialStates:d,isInbox:!0})}}),t.createElement(i.PrivateRoute,{path:a+"/group-billold",component:function(){var e;return t.createElement(M,{parentRoute:a,filterComponent:"BILLS_GROUP_FILTER",initialStates:{},isInbox:!0,keys:null==f||null===(e=f["common-masters"])||void 0===e?void 0:e.uiCommonPay})}}),t.createElement(i.PrivateRoute,{path:a+"/download-bill-pdf",component:function(){var e;return t.createElement(O,{parentRoute:a,filterComponent:"BILLS_GROUP_FILTER",initialStates:{},isInbox:!0,keys:null==f||null===(e=f["common-masters"])||void 0===e?void 0:e.uiCommonPay})}}),t.createElement(i.PrivateRoute,{path:a+"/cancel-bill",component:function(){return t.createElement(H,{parentRoute:a,filterComponent:"BILLS_INBOX_FILTER",initialStates:d,isInbox:!0})}}),t.createElement(i.PrivateRoute,{path:a+"/response-cancelBill",component:function(){return t.createElement(P,{parentRoute:a})}}),t.createElement(i.PrivateRoute,{path:a+"/bill-details",component:function(){return t.createElement(F,{parentRoute:a})}}))))},J=["isFetching","isLoading","searchResponseKey","data","searchFields"],ee=["isLoading","isError","errors","data"],ne=function(e){var l,o,c=e.t,s=e.closeModal,d=e.applicationData,f=r.useHistory(),v=n.useState({}),m=v[0],_=v[1],E=n.useState([]),p=E[0],h=E[1],g=n.useState(""),C=g[0],S=g[1],L=Digit.ULBService.getStateId(),b=Digit.Hooks.receipts.useReceiptsMDMS(L,"CancelReceiptReason"),A=b.isLoading,y=b.data;u(b,ee),n.useEffect(function(){return _(function(e){var n=e.t,r=e.selectedReason,l=e.Reasons,o=e.selectReason;return{label:{heading:"CR_COMMON_HEADER",submit:"CR_CANCEL_RECEIPT_BUTTON"},form:[{body:[{label:n("CR_RECEIPT_CANCELLATION_REASON_LABEL"),type:"dropdown",isMandatory:!0,name:"reason",populators:t.createElement(i.Dropdown,{isMandatory:!0,selected:r,optionKey:"name",option:l,select:o,t:n})},{label:n("CR_MORE_DETAILS_LABEL"),type:"text",populators:{name:"otherDetails"},disable:"OTHER"!=(null==r?void 0:r.code)},{label:n("CR_ADDITIONAL_PENALTY"),type:"text",populators:{name:"penalty",disable:!0},disable:!0}]}]}}({t:c,selectedReason:C,Reasons:p,selectReason:B}))},[p,C]);var N=function(e){return t.createElement("h1",{className:"heading-m"},e.label)};function B(e){S(e)}var I=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},O=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(I,null))};return n.useEffect(function(){h(null==y?void 0:y.dropdownData)},[y]),A?t.createElement(i.Loader,null):null!=m&&m.form?t.createElement(i.Modal,{headerBarMain:t.createElement(N,{label:c(null==m||null===(l=m.label)||void 0===l?void 0:l.heading)}),headerBarEnd:t.createElement(O,{onClick:s}),actionCancelOnSubmit:s,actionSaveLabel:c(null==m||null===(o=m.label)||void 0===o?void 0:o.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isDisabled:!C},t.createElement(i.FormComposer,{config:null==m?void 0:m.form,noBoxShadow:!0,inline:!0,disabled:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n,t,r,l;f.replace("/digit-ui/employee/receipts/response",{paymentWorkflow:{action:"CANCEL",additionalDetails:a({},e.otherDetails,{selectedReasonMessage:c("CR_REASON_"+C.code)}),paymentId:null==d||null===(n=d.Payments[0])||void 0===n?void 0:n.id,reason:C.code,tenantId:null==d||null===(t=d.Payments[0])||void 0===t?void 0:t.tenantId},key:"UPDATE",action:"CANCELLATION",businessService:null==d||null===(r=d.Payments[0])||void 0===r||null===(l=r.paymentDetails[0])||void 0===l?void 0:l.businessService})},formId:"modal-action"})):t.createElement(i.Loader,null)},te=function(e){return t.createElement(ne,e)},re=["isLoading","isError","error","data"],le=["searchParams","onFilterChange","controlSearchForm","defaultSearchParams","statuses"],ie=function(e){var r,o,c,s,d,f,v,m=e.searchParams,_=e.onFilterChange,E=u(e,le),p=l.useTranslation().t,h=n.useState(function(){return m}),g=h[0],C=h[1],S=n.useState([]),L=S[0],b=S[1],A=n.useState([]),y=A[0],N=A[1],B=null===(r=Digit.SessionStorage.get("User"))||void 0===r||null===(o=r.info)||void 0===o?void 0:o.tenantId,I=function(e){var n=e.delete,t=a({},g,e);n&&n.forEach(function(e){return delete t[e]}),delete e.delete,C(a({},t))},O=function(){b([]),_([])};n.useEffect(function(){L&&C(a({},L))},[L]);var T=Digit.Hooks.useCommonMDMS(B,"BillingService","BillsGenieKey"),M=T.isLoading,R=T.data,P=null==R||null===(c=R.BillingService)||void 0===c||null===(s=c.BusinessService)||void 0===s?void 0:s.filter(function(e){return e.billGineiURL}),D=null==R||null===(d=R.tenant)||void 0===d||null===(f=d.tenants)||void 0===f?void 0:f.filter(function(e){return e.code===B});n.useEffect(function(){D&&N(D[0])},[]);var w=[];P&&(w=P.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}}));var x=n.useMemo(function(){return!g.businesService||!g.locality},[g]),k=[];return M?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{className:"filter"},t.createElement("div",{className:"filter-card"},t.createElement("div",{className:"heading",style:{alignItems:"center"}},t.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},t.createElement("span",null,t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),t.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},p("ES_COMMON_FILTER_BY"),":")),t.createElement("div",{className:"clearAll",onClick:O},p("ES_COMMON_CLEAR_ALL")),"desktop"===E.type&&t.createElement("span",{className:"clear-search",onClick:O,style:{border:"1px solid #e0e0e0",padding:"6px"}},t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===E.type&&t.createElement("span",{onClick:E.onClose},t.createElement(i.CloseSvg,null))),t.createElement("div",null,t.createElement("div",null,t.createElement("div",{className:"filter-label"},p("LABEL_FOR_ULB")),t.createElement(i.Dropdown,{option:k,optionKey:"name",value:y,selected:y,select:N,t:p,disable:k})),t.createElement("div",null,t.createElement("div",{className:"filter-label"},p("ABG_SERVICE_CATEGORY_LABEL")),t.createElement(i.Dropdown,{t:p,option:w,value:L,selected:L,select:b,optionKey:"name"})),t.createElement("div",null,t.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},p("ES_INBOX_LOCALITY"),":"),t.createElement(i.Localities,{selectLocality:function(e){I({locality:[].concat((null==g?void 0:g.locality)||[],[e])})},tenantId:B,boundaryType:"revenue"}),t.createElement("div",{className:"tag-container"},null==g||null===(v=g.locality)||void 0===v?void 0:v.map(function(e,n){return t.createElement(i.RemoveableTag,{key:n,text:p(e.i18nkey),onClick:function(){I({locality:null==g?void 0:g.locality.filter(function(n){return n.code!==e.code})})}})}))),t.createElement("div",null,t.createElement(i.SubmitBar,{disabled:x,onSubmit:function(){return _(g)},label:p("ES_COMMON_APPLY")}))))))},oe=["searchParams","onFilterChange","defaultSearchParams","statuses"],ae=function(e){var r,o,c,s,d,f=e.searchParams,v=e.onFilterChange,m=u(e,oe),_=l.useTranslation().t,E=n.useState(function(){return f}),p=E[0],h=E[1],g=n.useState([]),C=g[0],S=g[1],L=n.useState([]),A=L[0],y=L[1],N=null===(r=Digit.Hooks.useTenantsBills())||void 0===r?void 0:r.sort(function(e,n){var t,r;return null==e||null===(t=e.i18nKey)||void 0===t||null===(r=t.localeCompare)||void 0===r?void 0:r.call(t,null==n?void 0:n.i18nKey)}),B=[],I=null===(o=Digit.SessionStorage.get("User"))||void 0===o||null===(c=o.info)||void 0===c?void 0:c.tenantId,O=function(){S([]),y([]),v([])};n.useEffect(function(){C&&A&&h(a({},C,{tenantId:A.tenantId}))},[C,A]);var T=Digit.Hooks.useCommonMDMS(I,"BillingService","BillsGenieKey"),M=T.isLoading,R=T.data,P=null==R||null===(s=R.BillingService)||void 0===s||null===(d=s.BusinessService)||void 0===d?void 0:d.filter(function(e){return e.billGineiURL}),D=[];return P&&(D=P.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}})),N&&(B=N.map(function(e){return{tenantId:e.code}})),M?t.createElement(i.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{className:"filter citizen-filter"},t.createElement("div",{className:"filter-card"},t.createElement("div",{className:"heading",style:{alignItems:"center"}},t.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},t.createElement("span",null,t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),t.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},_("ES_COMMON_FILTER_BY"),":")),t.createElement("div",{className:"clearAll",onClick:O},_("ES_COMMON_CLEAR_ALL")),"desktop"===m.type&&t.createElement("span",{className:"clear-search",onClick:O,style:{border:"1px solid #e0e0e0",padding:"6px"}},t.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===m.type&&t.createElement("span",{onClick:m.onClose},t.createElement(i.CloseSvg,null))),t.createElement("div",null,t.createElement("div",null,t.createElement("div",{className:"filter-label"},_("LABEL_FOR_ULB")),t.createElement(i.Dropdown,{option:B,optionKey:"tenantId",value:A,select:y,t:_})),t.createElement("div",null,t.createElement("div",{className:"filter-label"},_("ABG_SERVICE_CATEGORY_LABEL")),t.createElement(i.Dropdown,{t:_,option:D,value:C,selected:C,select:S,optionKey:"name"})),t.createElement("div",null,t.createElement(i.SubmitBar,{disabled:b.isEqual(p,f),onSubmit:function(){return v(p)},label:_("ES_COMMON_APPLY")}))))))},ue=["pattern","name","maxLength","minLength","errorMessages"],ce={date:i.DatePicker,mobileNumber:i.MobileNumber},se=function(e){var r,c,s=e.onSearch,d=e.type,f=e.onClose,v=e.searchFields,m=e.searchParams,_=e.isInboxPage,E=l.useTranslation().t,p=o.useForm({defaultValues:m}),h=p.register,g=p.handleSubmit,C=p.reset,S=p.watch,L=p.control,b=p.setError,A=p.clearErrors,y=p.formState,N=n.useState(null),B=N[0],I=N[1],O=S(),T=innerWidth<=640,M=n.useState(""),R=M[0],P=M[1];n.useEffect(function(){var e,n;P(null===(e=Digit.SessionStorage.get("User"))||void 0===e||null===(n=e.info)||void 0===n?void 0:n.mobileNumber)},[]);var D=function(){I(null)};function w(){var e=v.reduce(function(e,n){var t;return a({},e,((t={})[null==n?void 0:n.name]="",t))},{});C(e);var n=a({},m);n.delete=[],v.forEach(function(e){n.delete.push(null==e?void 0:e.name)}),s(a({},n),!0),"mobile"===d&&f()}setTimeout(function(){D()},1e4),n.useEffect(function(){v.forEach(function(e){var n=e.pattern,t=e.name,r=e.maxLength,l=e.minLength,i=e.errorMessages,o=(u(e,ue),O[t]),a=y.errors[t];n&&(new RegExp(n).test(o)||a?new RegExp(n).test(o)&&"pattern"===(null==a?void 0:a.type)&&A([t]):b(t,{type:"pattern",message:E(null==i?void 0:i.pattern)||E("PATTERN_"+t.toUpperCase()+"_FAILED")})),l&&((null==o?void 0:o.length)<l&&!a?b(t,{type:"minLength",message:E((null==i?void 0:i.minLength)||"MINLENGTH_"+t.toUpperCase()+"_FAILED")}):(null==o?void 0:o.length)>=l&&"minLength"===(null==a?void 0:a.type)&&A([t])),r&&((null==o?void 0:o.length)>r&&!a?b(t,{type:"maxLength",message:E((null==i?void 0:i.maxLength)||"MAXLENGTH_"+t.toUpperCase()+"_FAILED")}):(null==o?void 0:o.length)<=r&&"maxLength"===(null==a?void 0:a.type)&&A([t]))})},[O,y,b,A]);var x=function(e){return t.createElement(i.LinkLabel,{style:a({display:"inline"},e?{margin:0}:{}),onClick:w},E("ABG_RESET_BUTTON"))};return t.createElement(t.Fragment,null,t.createElement("form",{onSubmit:g(function(e){m.businesService?(e.mobileNumber||delete e.mobileNumber,e.delete=[],v.forEach(function(n){e[n.name]||e.delete.push(n.name)}),s(e),"mobile"===d&&f()):I({key:!0,label:"ABG_SEARCH_SELECT_AT_LEAST_SERVICE_TOAST_MESSAGE"})})},t.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:_?"24px":"revert"}},t.createElement("div",{className:"search-complaint-container"},("mobile"===d||T)&&t.createElement("div",{className:"complaint-header",style:{display:"flex",justifyContent:"space-between"}},t.createElement("h2",null,E("ES_COMMON_SEARCH_BY")),t.createElement("span",{onClick:f},t.createElement(i.CloseSvg,null))),t.createElement("div",{className:"complaint-input-container group-complaint-input-container ",style:{width:"100%"}},null==v||null===(r=v.filter(function(e){return!0}))||void 0===r?void 0:r.map(function(e,n){var r,l,u;return t.createElement("div",{key:e.name,className:"input-fields"},t.createElement("span",{className:"mobile-input"},t.createElement(i.Label,null,E(e.label)),t.createElement(o.Controller,e.type?{render:function(n){return t.createElement(null==ce?void 0:ce[e.type],{onChange:n.onChange,value:n.value})},name:e.name,control:L,defaultValue:""}:{render:function(n){return t.createElement("div",{className:"field-container"},null!=e&&e.componentInFront?t.createElement("span",{className:"employee-card-input employee-card-input--front",style:{flex:"none"}},null==e?void 0:e.componentInFront):null,t.createElement(i.TextInput,a({},e,{value:"mobileNumber"===e.name?R:O[e.name],inputRef:h(),watch:S,shouldUpdate:!0,disabled:"mobileNumber"===e.name})))},name:e.name,control:L,defaultValue:""})),null!=y&&null!==(r=y.dirtyFields)&&void 0!==r&&r[e.name]?t.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==y||null===(l=y.errors)||void 0===l||null===(u=l[e.name])||void 0===u?void 0:u.message):null)}),"desktop"===d&&!T&&!_&&t.createElement("div",{className:"search-action-wrapper"},t.createElement(i.SubmitBar,{className:"submit-bar-search",label:E("ABG_SEARCH_BUTTON"),submit:!0}),t.createElement("div",{style:(c={width:"100%",textAlign:"right"},c.width="240px",c.textAlign="right",c.marginLeft="96px",c.marginTop="8px",c)},x()))),_&&t.createElement("div",{className:"inbox-action-container"},"desktop"===d&&!T&&t.createElement("span",{style:{paddingTop:"9px"},className:"clear-search"},x()),"desktop"===d&&!T&&t.createElement(i.SubmitBar,{style:{marginTop:"unset"},className:"submit-bar-search",label:E("ABG_SEARCH_BUTTON"),submit:!0})))),("mobile"===d||T)&&t.createElement(i.ActionBar,{className:"clear-search-container"},t.createElement("button",{className:"clear-search",style:{flex:1}},x(T)),t.createElement(i.SubmitBar,{label:E("ABG_SEARCH_BUTTON"),style:{flex:1},submit:!0}))),B&&t.createElement(i.Toast,{error:B.key,label:E(B.label),onClose:D}))},de=function(e){var r=e.t,l=e.data,o=e.onFilterChange,a=e.onSearch,u=e.serviceRequestIdKey,c=e.isFstpOperator,s=e.isLoading,d=e.isSearch,f=e.searchParams,v=e.searchFields,m=e.sortParams,_=e.linkPrefix,E=e.defaultSearchParams,p=n.useState(d?"SEARCH":""),h=p[0],g=p[1],C=n.useState(!!d),S=C[0],L=C[1],b=n.useState(f)[1],A=n.useState(m)[1];n.useEffect(function(){h&&L(!0)},[h]);var y,N=function(){L(!1),g(""),b(f),A(m)};return s?t.createElement(i.Loader,null):(l&&0!==(null==l?void 0:l.length)?l&&(null==l?void 0:l.length)>0&&(y=t.createElement(i.DetailsCard,{data:l,serviceRequestIdKey:u,linkPrefix:_||"/digit-ui/employee/bills"})):y=t.createElement(i.Card,{style:{marginTop:20}},r("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})),t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},a&&t.createElement(i.SearchAction,{text:"SEARCH",handleActionClick:function(){g("SEARCH"),L(!0)}}),!d&&o&&t.createElement(i.FilterAction,{text:"FILTER",handleActionClick:function(){g("FILTER"),L(!0)}})),y,S&&t.createElement(i.PopUp,null,"FILTER"===h&&t.createElement("div",{className:"popup-module"},t.createElement(ae,{defaultSearchParams:E,onFilterChange:function(e){o(e,!0),L(!1)},searchParams:f,type:"mobile",onClose:N})),"SEARCH"===h&&t.createElement("div",{className:"popup-module"},t.createElement(se,{type:"mobile",onClose:N,onSearch:a,isFstpOperator:c,searchParams:f,searchFields:v})))))},fe=function(e){return t.createElement("span",{className:"sla-cell"},e)},ve=function(e){var n,i=e.data,o=e.isLoading,a=e.isSearch,u=e.searchFields,c=e.onFilterChange,s=e.onSearch,d=e.onSort,f=e.searchParams,v=e.sortParams,_=e.linkPrefix,E=e.filterComponent,p=e.defaultSearchParams,h=l.useTranslation().t;return t.createElement("div",{style:{padding:0}},t.createElement("div",{className:"inbox-container"},t.createElement("div",{className:"filters-container"},t.createElement(de,{t:h,data:null==i||null===(n=i.Bills)||void 0===n?void 0:n.map(function(e){var n,l;return(n={})[h("ABG_COMMON_TABLE_COL_BILL_NO")]=fe(null==e?void 0:e.billNumber),n[h("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=fe(null==e?void 0:e.payerName),n[h("ABG_COMMON_TABLE_COL_BILL_EXP_DATE")]=(l=new Date(null==e?void 0:e.billDate),t.createElement("span",{className:"sla-cell"},null==l?void 0:l.toLocaleDateString())),n[h("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=fe(null==e?void 0:e.totalAmount),n[h("ABG_COMMON_TABLE_COL_STATUS")]=fe(null==e?void 0:e.status),n[h("ABG_COMMON_TABLE_COL_ACTION")]=function(e){return(null==e?void 0:e.totalAmount)>0?"ACTIVE"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==e?void 0:e.businessService)+"/"+(null==e?void 0:e.consumerCode)+"/tenantId="+(null==e?void 0:e.tenantId)}},h("ABG_PAY")))):"CANCELLED"===(null==e?void 0:e.status)||"EXPIRED"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==e?void 0:e.businessService)+"/"+(null==e?void 0:e.consumerCode)+"/tenantId="+(null==e?void 0:e.tenantId)}},h("ABG_GENERATE_NEW_BILL")))):"PAID"===(null==e?void 0:e.status)?t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,null,t.createElement("a",{href:"javascript:void(0)",style:{color:"#FE7A51",cursor:"pointer"},onClick:function(n){m(null==e?void 0:e.businessService,null==e?void 0:e.consumerCode)}}," ",h("ABG_DOWNLOAD_RECEIPT")," ")))):void 0:fe(h("CS_NA"))}(e),n}),onFilterChange:c,isLoading:o,isSearch:a,onSearch:s,onSort:d,defaultSearchParams:p,searchParams:f,searchFields:u,linkPrefix:_,sortParams:v,filterComponent:E,serviceRequestIdKey:function(e){return(null==f?void 0:f.businessServices)+"/"+encodeURIComponent(null==e?void 0:e[h("CR_COMMON_TABLE_COL_RECEIPT_NO")])}}))))},me=["tableConfig","filterComponent"],_e=function(e){var o,a,c=e.filterComponent,s=u(e,me),d=l.useTranslation().t,m=Digit.SessionStorage.get("HRMS_TENANTS"),_=null==s||null===(o=s.data)||void 0===o?void 0:o.Bills,p=n.useState(function(){var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(c)})[0],h=function(e){return t.createElement("span",{className:"cell-text"},e)},g=t.useMemo(function(){return[{Header:d("ABG_COMMON_TABLE_COL_BILL_NO"),disableSortBy:!0,Cell:function(e){var n,r,l,i=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},h(v(null===(n=i.original)||void 0===n?void 0:n.businessService,null===(r=i.original)||void 0===r?void 0:r.consumerCode,null===(l=i.original)||void 0===l?void 0:l.billNumber))))}},{Header:d("ABG_COMMON_TABLE_COL_CONSUMER_NAME"),disableSortBy:!0,Cell:function(e){var n;return h(""+(null===(n=e.row.original)||void 0===n?void 0:n.payerName))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_EXP_DATE"),disableSortBy:!0,Cell:function(e){var n,t,r=e.row,l="NA"===(null===(n=r.original)||void 0===n?void 0:n.billDate)?d("CS_NA"):function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()}(null===(t=r.original)||void 0===t?void 0:t.billDate);return h(d(""+l))}},{Header:d("ABG_COMMON_TABLE_COL_BILL_AMOUNT"),disableSortBy:!0,Cell:function(e){var n;return h(""+(null===(n=e.row.original)||void 0===n?void 0:n.totalAmount))}},{Header:d("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n;return h(""+(null===(n=e.row.original)||void 0===n?void 0:n.status))}},{Header:d("ABG_COMMON_TABLE_COL_ACTION"),Cell:function(e){var n,t,r=e.row,l=null===(n=r.original)||void 0===n?void 0:n.totalAmount;return h(l>0?C(null===(t=r.original)||void 0===t?void 0:t.status,r):d("CS_NA"))}}]},[]),C=function(e,n){var l,i,o,a,u,c,s,v;switch(e){case"ACTIVE":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+(null===(l=n.original)||void 0===l?void 0:l.businessService)+"/"+(null===(i=n.original)||void 0===i?void 0:i.consumerCode)+"/tenantId="+(null===(o=n.original)||void 0===o?void 0:o.tenantId)+"?workflow=mcollect"}},d("ABG_PAY"))));case"CANCELLED":case"EXPIRED":return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(r.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+(null===(a=n.original)||void 0===a?void 0:a.businessService)+"/"+(null===(u=n.original)||void 0===u?void 0:u.consumerCode)+"/tenantId="+(null===(c=n.original)||void 0===c?void 0:c.tenantId)+"?workflow=mcollect"}},d("ABG_GENERATE_NEW_BILL"))));case"PAID":return t.createElement("div",null,t.createElement("span",{className:"link"},f(null===(s=n.original)||void 0===s?void 0:s.businessService,null===(v=n.original)||void 0===v?void 0:v.consumerCode)))}};return s.isLoading?a=t.createElement(i.Loader,null):0===(null==_?void 0:_.length)?a=t.createElement(i.Card,{style:{marginTop:20}},d("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})):(null==_?void 0:_.length)>0&&(a=t.createElement(E,{t:d,data:_,columns:g,getCellProps:function(e){return{style:{maxWidth:e.column.Header===d("HR_EMP_ID_LABEL")?"140px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:s.onPageSizeChange,currentPage:s.currentPage,onNextPage:s.onNextPage,onPrevPage:s.onPrevPage,onLastPage:s.onLastPage,onFirstPage:s.onFirstPage,pageSizeLimit:s.pageSizeLimit,onSort:s.onSort,disableSort:s.disableSort,sortParams:s.sortParams,totalRecords:s.totalRecords})),t.createElement("div",{className:"inbox-container"},!s.isSearch&&t.createElement("div",{className:"filters-container"},t.createElement("div",null,t.createElement(p,{defaultSearchParams:s.defaultSearchParams,onFilterChange:s.onFilterChange,searchParams:s.searchParams,type:"desktop",tenantIds:m}))),t.createElement("div",{style:{flex:1}},t.createElement(se,{defaultSearchParams:s.defaultSearchParams,onSearch:s.onSearch,type:"desktop",tenantIds:m,searchFields:s.searchFields,isInboxPage:!(null!=s&&s.isSearch),searchParams:s.searchParams}),t.createElement("div",{className:"result",style:{marginLeft:null!=s&&s.isSearch?"":"24px",flex:1}},a)))},Ee=["isFetching","isLoading","searchResponseKey","data","searchFields"],pe=function(e){var r,o,c,s,d,f,v=e.parentRoute,m=e.initialStates,_=e.businessService,E=e.filterComponent,p=e.isInbox,h=Digit.ULBService.getCurrentTenantId(),g=n.useState(function(){return p?{}:{enabled:!1}})[1],C=l.useTranslation().t,S=n.useState(0),L=S[0],b=S[1],A=n.useState(0),y=A[0],N=A[1],B=n.useState(10),I=B[0],O=B[1],T=n.useState((null==m?void 0:m.sortParams)||[{id:"applicationDate",desc:!1}]),M=T[0],R=T[1],P=n.useState(!1),D=P[0],w=P[1],x=n.useState(function(){return(null==m?void 0:m.searchParams)||{}}),k=x[0],G=x[1],F=window.Digit.Utils.browser.isMobile(),U=F?{limit:10,offset:0,sortBy:null==M||null===(r=M[0])||void 0===r?void 0:r.id,sortOrder:null!=M&&null!==(o=M[0])&&void 0!==o&&o.desc?"DESC":"ASC"}:{limit:I,mobileNumber:null===(c=Digit.SessionStorage.get("User"))||void 0===c||null===(s=c.info)||void 0===s?void 0:s.mobileNumber,offset:L,sortBy:null==M||null===(d=M[0])||void 0===d?void 0:d.id,sortOrder:null!=M&&null!==(f=M[0])&&void 0!==f&&f.desc?"DESC":"ASC"},H=Digit.Hooks.useBillSearch({tenantId:h,filters:a({},k,{businessService:_},U,{sortParams:M}),config:{enabled:!1}}),W=H.isLoading,j=H.data,z=u(H,Ee);n.useEffect(function(){var e;N(null==j||null===(e=j.Bills)||void 0===e?void 0:e.length)},[j]),n.useEffect(function(){b(0)},[k]);var V=function(e){var n,t=null==e?void 0:e.delete,r={};r=F?a({},e):a({},k,e),t&&t.forEach(function(e){return delete r[e]}),null===(n=r)||void 0===n||delete n.delete,null==e||delete e.delete,w(!0),G(a({},r)),g({enabled:!0})},Y=n.useCallback(function(e){0!==e.length&&R(e)},[]),K=function(){return[{label:C("ABG_BILL_NUMBER_LABEL"),name:"billNo"},{label:C("ABG_CONSUMER_ID_LABEL"),name:"consumerCode"},{label:C("ABG_MOBILE_NO_LABEL"),name:"mobileNumber",maxlength:10,pattern:Digit.Utils.getPattern("MobileNo"),title:C("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"}]};return F?t.createElement(ve,{data:j,isLoading:W,searchFields:K(),onFilterChange:V,onSearch:V,onSort:Y,parentRoute:v,searchParams:k,sortParams:M,totalRecords:y}):t.createElement("div",null,p&&t.createElement(i.Header,null,C("ABG_SEARCH_BILL_COMMON_HEADER")),t.createElement(_e,{data:j,tableConfig:null==z?void 0:z.tableConfig,isLoading:W,defaultSearchParams:m.searchParams,isSearch:!p,onFilterChange:V,searchFields:K(),setSearchFieldsBackToOriginalState:D,setSetSearchFieldsBackToOriginalState:w,onSearch:V,onSort:Y,onNextPage:function(){b(function(e){return e+I})},onPrevPage:function(){b(function(e){return e-I})},onFirstPage:function(){b(function(e){return 0})},onLastPage:function(){b(y&&10*Math.ceil(y/10)-I)},currentPage:Math.floor(L/I),pageSizeLimit:10,disableSort:!1,onPageSizeChange:function(e){O(Number(e.target.value))},parentRoute:v,searchParams:k,sortParams:M,totalRecords:y,filterComponent:E}))},he=["path","url"],ge=function(){var e=r.useRouteMatch(),n=e.path,o=(u(e,he),l.useTranslation(),{searchParams:{}});return t.createElement("span",{className:"bill-citizen"},t.createElement(r.Switch,null,t.createElement(i.AppContainer,null,t.createElement(i.BackButton,null,"Back"),t.createElement(i.PrivateRoute,{path:n+"/billSearch",component:function(e){return t.createElement(pe,{filterComponent:"CITIZEN_SEARCH_FILTER",initialStates:o,isInbox:!0})}}))))},Ce=function(e){var r,l,u,c,s,d=e.register,f=e.control,v=e.reset,m=e.tenantId,_=e.t,E=e.formState,p=null==E?void 0:E.errors,h={maxlength:10,pattern:"[6-9][0-9]{9}",title:_("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"},g=(_("ERR_DEFAULT_INPUT_FIELD_MSG"),Digit.Hooks.useCommonMDMS(m,"BillingService","BillsGenieKey").data),C=(null==g||null===(r=g.BillingService)||void 0===r||null===(l=r.BusinessService)||void 0===l||l.filter(function(e){return e.billGineiURL}),null==g||null===(u=g["common-masters"])||void 0===u?void 0:u.uiCommonPay.filter(function(e){return null==e?void 0:e.cancelBill})),S=[];C&&C.length>0&&C.forEach(function(e){var n;null==g||null===(n=g.BillingService)||void 0===n||n.BusinessService.forEach(function(n){n.code===e.code&&S.push(n)})}),S=null===(c=S)||void 0===c?void 0:c.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}});var L,b=o.useWatch({control:f,name:"businesService",defaultValue:""});return t.createElement(n.Fragment,null,t.createElement(i.SearchField,null,t.createElement("label",null,_("ABG_COMMON_TABLE_COL_SERVICE_CATEGORY")+" *"),t.createElement(o.Controller,{control:f,rules:{required:_("REQUIRED_FIELD")},name:"businesService",render:function(e){return t.createElement(i.Dropdown,{option:S,select:function(n){e.onChange(n)},optionKey:"name",onBlur:e.onBlur,t:_,selected:e.value,optionCardStyles:{zIndex:"20"}})}}),p&&(null==p?void 0:p.businesService)&&"required"===(null==p||null===(s=p.businesService)||void 0===s?void 0:s.type)&&t.createElement(i.CardLabelError,null,_("CS_COMMON_REQUIRED"))),t.createElement(i.SearchField,null,t.createElement("label",null,_("ABG_BILL_NUMBER_LABEL")),t.createElement(i.TextInput,{name:"billNo",inputRef:d({})})),t.createElement(i.SearchField,null,t.createElement("label",null,_("WS"!==(L=null==b?void 0:b.businesService)&&"SW"!==L&&L?"ABG_COMMON_TABLE_COL_PROPERTY_ID":"ABG_COMMON_TABLE_COL_CONSUMER_ID")),t.createElement(i.TextInput,{name:"consumerCode",inputRef:d({})})),t.createElement(i.SearchField,null,t.createElement("label",null,_("ABG_MOBILE_NO_LABEL")),t.createElement(i.MobileNumber,a({name:"mobileNumber",inputRef:d({})},h))),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:_("ABG_GROUP_BILL_SEARCH_BUTTON"),submit:!0}),t.createElement("p",{onClick:function(){v({businesService:"",mobileNumber:"",consumerCode:"",billNo:""})}},_("CS_COMMON_CLEAR_SEARCH"))))},Se=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Le=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],be=function(e){var l=e.Controller,o=e.register,c=e.control,s=e.t,d=e.reset,f=e.handleSubmit,v=e.tenantId,m=e.data,_=e.onSubmit,E=e.isLoading,p=e.resultOk,h=r.useHistory(),g=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),C=g[0],S=g[1],L=function(){S({type:"remove"})},b=function(){return t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:L},t.createElement(i.CloseSvg,null))},A={Controller:l,register:o,control:c,t:s,reset:d},y=n.useCallback(function(e){return function(e){var n=e.currentlyActiveMobileModal,r=e.searchFormFieldsComponentProps,l=e.tenantId,o=u(e,Se),c=o.closeMobilePopupModal;switch(n){case"SearchFormComponent":return t.createElement(i.SearchForm,o,t.createElement(b,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,s("ABG_CANCEL_BILL"),":")),t.createElement(Ce,a({},r,{closeMobilePopupModal:c,tenantId:l,t:s})));default:return t.createElement("span",null)}}(a({currentlyActiveMobileModal:e.currentlyActiveMobileModal,searchFormFieldsComponentProps:e.searchFormFieldsComponentProps,tenantId:e.tenantId},u(e,Le)))},[C]),N=n.useState(!1),B=N[0],I=N[1],O=function(e){var n,t;I(!1);var r={tenantId:v,consumerCodes:[null==M?void 0:M.consumerCode],businessService:null==M?void 0:M.businessService,statusToBeUpdated:"CANCELLED",additionalDetails:{reason:null==e||null===(n=e.reason)||void 0===n?void 0:n.code,description:(null==e?void 0:e.details)||"",reasonMessage:s(null==e||null===(t=e.reason)||void 0===t?void 0:t.message)}};h.push("/digit-ui/employee/bills/response-cancelBill",{filters:r,currentBill:M})},T=n.useState(""),M=T[0],R=T[1],P=function(e){return t.createElement("span",{className:"cell-text"},e)},D=n.useMemo(function(){return E?[]:null==m?void 0:m.map(function(e){var n,r,l;return(l={})[s("ABG_BILL_NUMBER_LABEL")]=function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:function(){!function(e){h.push("/digit-ui/employee/bills/bill-details?connectionNumber="+(null==e?void 0:e.consumerCode)+"&tenantId="+v+"&service="+(null==e?void 0:e.businessService),e)}(e)}},(null==e?void 0:e.billNumber)||"NA")))}(e),l[s("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=null!=e&&null!==(n=e.user)&&void 0!==n&&n.name?s(""+(null==e||null===(r=e.user)||void 0===r?void 0:r.name)):"NA",l[s("ABG_COMMON_TABLE_COL_BILL_DATE")]=P(function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()}(null==e?void 0:e.billDate)),l[s("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=P((null==e?void 0:e.totalAmount)||"NA"),l[s("ABG_COMMON_TABLE_COL_STATUS")]=P((null==e?void 0:e.status)||"NA"),l[s("ABG_COMMON_TABLE_COL_ACTION")]=P(function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:function(){!function(e){I(!0),R(e)}(e)}},s("ABG_CANCEL_BILL")," ")))}(e)),l})},[m]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},t.createElement(i.SearchAction,{text:s("ABG_CANCEL_BILL"),handleActionClick:function(){return S({type:"set",payload:"SearchFormComponent"})},tenantId:v,t:s})),C?t.createElement(i.PopUp,null,t.createElement(y,{onSubmit:function(e){S({type:"remove"}),_(e)},handleSubmit:f,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:A,currentlyActiveMobileModal:C,closeMobilePopupModal:L,tenantId:v})):null,E&&t.createElement(i.Loader,null),!E&&p&&t.createElement(i.DetailsCard,{handleSelect:function(e){},handleDetailCardClick:function(e){},data:D,serviceRequestIdKey:s("ABG_BILL_NUMBER_LABEL")}),B&&t.createElement(G,{t:s,closeModal:function(){return I(!1)},actionCancelLabel:"ABG_BACK",actionCancelOnSubmit:function(){return I(!1)},actionSaveLabel:"ABG_CANCEL_BILL",actionSaveOnSubmit:O,onSubmit:O}))},Ae=function(e){var r,l,a,u,c=e.register,s=e.control,d=e.reset,f=e.tenantId,v=e.t,m=e.formState,_=e.tenantlocalties,E=null==m?void 0:m.errors,p=(v("ES_SEARCH_APPLICATION_MOBILE_INVALID"),v("ERR_DEFAULT_INPUT_FIELD_MSG"),Digit.Hooks.useCommonMDMS(f,"BillingService","BillsGenieKey").data),h=null==p||null===(r=p.BillingService)||void 0===r||null===(l=r.BusinessService)||void 0===l?void 0:l.filter(function(e){return e.billGineiURL}),g=[];h&&(g=h.map(function(e){return{name:Digit.Utils.locale.getTransformedLocale("BILLINGSERVICE_BUSINESSSERVICE_"+e.code),url:e.billGineiURL,businesService:e.code}}));var C,S=o.useWatch({control:s,name:"businesService",defaultValue:""}),L=window.Digit.Utils.browser.isMobile();return t.createElement(n.Fragment,null,t.createElement(i.SearchField,null,t.createElement("label",null,v("ABG_COMMON_TABLE_COL_SERVICE_CATEGORY")+" *"),t.createElement(o.Controller,{control:s,rules:{required:v("REQUIRED_FIELD")},name:"businesService",render:function(e){return t.createElement(i.Dropdown,{option:g,select:function(n){e.onChange(n)},optionKey:"name",onBlur:e.onBlur,t:v,selected:e.value,style:L?{}:{width:"125%"},optionCardStyles:{zIndex:"20"}})}}),E&&(null==E?void 0:E.businesService)&&"required"===(null==E||null===(a=E.businesService)||void 0===a?void 0:a.type)&&t.createElement(i.CardLabelError,null,v("CS_COMMON_REQUIRED"))),t.createElement(i.SearchField,null,t.createElement("label",{style:L?{}:{width:"125%",marginLeft:"-40px"}},v("CS_INBOX_LOCALITY_FILTER")+" *"),t.createElement(o.Controller,{control:s,rules:{required:v("REQUIRED_FIELD")},name:"locality",render:function(e){return t.createElement(i.Dropdown,{option:_,select:function(n){e.onChange(n)},optionKey:"name",onBlur:e.onBlur,t:v,selected:e.value,style:L?{}:{width:"125%",marginLeft:"-40px"}})}}),E&&(null==E?void 0:E.locality)&&"required"===(null==E||null===(u=E.locality)||void 0===u?void 0:u.type)&&t.createElement(i.CardLabelError,{style:{marginLeft:"-35px"}},v("CS_COMMON_REQUIRED"))),t.createElement(i.SearchField,null,t.createElement("label",{style:L?{}:{marginLeft:"-80px",width:"120%"}},v("WS"!==(C=null==S?void 0:S.businesService)&&"SW"!==C&&C?"ABG_COMMON_TABLE_COL_PROPERTY_ID":"ABG_COMMON_TABLE_COL_CONSUMER_ID")),t.createElement(i.TextInput,{name:"consumerCode",style:L?{}:{marginLeft:"-80px",width:"120%"},inputRef:c({})})),t.createElement(i.SearchField,{className:"submit"},t.createElement(i.SubmitBar,{label:v("ABG_GROUP_BILL_SEARCH_BUTTON"),submit:!0}),t.createElement("p",{onClick:function(){d({businesService:"",locality:""})}},v("CS_COMMON_CLEAR_SEARCH"))))},ye=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Ne=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Be=function(e){var l=e.Controller,o=e.register,c=e.control,s=e.t,d=e.reset,f=e.handleSubmit,m=e.tenantId,_=e.data,E=e.onSubmit,p=e.isLoading,h=e.resultOk,g=e.serviceType,C=e.locality,S=e.tenantlocalties;r.useHistory();var L=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),b=L[0],A=L[1],y=function(){A({type:"remove"})},N=function(){return t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:y},t.createElement(i.CloseSvg,null))},B={Controller:l,register:o,control:c,t:s,reset:d,tenantlocalties:S},I=n.useCallback(function(e){return function(e){var n=e.currentlyActiveMobileModal,r=e.searchFormFieldsComponentProps,l=e.tenantId,o=u(e,ye),c=o.closeMobilePopupModal;switch(n){case"SearchFormComponent":return t.createElement(i.SearchForm,o,t.createElement(N,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,s("ABG_GROUP_BILL"),":")),t.createElement(Ae,a({},r,{closeMobilePopupModal:c,tenantId:l,t:s,tenantlocalties:S})));default:return t.createElement("span",null)}}(a({currentlyActiveMobileModal:e.currentlyActiveMobileModal,searchFormFieldsComponentProps:e.searchFormFieldsComponentProps,tenantId:e.tenantId},u(e,Ne)))},[b]),O=function(e){return t.createElement("span",{className:"cell-text"},e)},T=n.useMemo(function(){return p?[]:null==_?void 0:_.map(function(e){var n,r,l;return(l={})[s("ABG_BILL_NUMBER_LABEL")]=function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},O(v(null==e?void 0:e.businessService,null==e?void 0:e.consumerCode,null==e?void 0:e.billNumber))))}(e),l[s("WS"===g||"SW"===g?"PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID":"PROPERTY_ID")]=null!=e&&e.consumerCode?s(""+(null==e?void 0:e.consumerCode)):"NA",l[s("WS"===g||"SW"===g?"ABG_COMMON_TABLE_COL_CONSUMER_NAME":"OWNER_NAME")]=null!=e&&null!==(n=e.user)&&void 0!==n&&n.name?s(""+(null==e||null===(r=e.user)||void 0===r?void 0:r.name)):"NA",l[s("ABG_COMMON_TABLE_COL_BILL_DATE")]=O(function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()}(null==e?void 0:e.billDate)||s("CS_NA")),l[s("ABG_COMMON_TABLE_COL_STATUS")]=O((null==e?void 0:e.status)||"NA"),l})},[_]),M=n.useState(null),R=M[0],P=M[1],D=function(e,n){void 0===n&&(n="ws-bill");try{return Promise.resolve(Digit.WSService.wnsGroupBill({key:n||"ws-bill",tenantId:m,locality:null==C?void 0:C.code,isConsolidated:e,bussinessService:g})).then(function(e){P({label:s("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)})})}catch(e){return Promise.reject(e)}},w=n.useState(!1),x=w[0],k=w[1],G="WS"===g?[{order:1,label:s("ABG_WATER_BILLS"),onClick:function(){return D(!1)}},{order:2,label:s("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return D(!0)}}]:"SW"===g?[{order:1,label:s("ABG_SEWERAGE_BILLS"),onClick:function(){return D(!1)}},{order:2,label:s("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return D(!0)}}]:[{order:1,label:s("BILLS_MERGE_AND_DOWNLOAD"),onClick:function(){"PT"==g?D(!0,"pt-bill"):downloadBills()}}];return t.createElement(t.Fragment,null,t.createElement("div",null,_&&(null==_?void 0:_.length)>=0&&t.createElement(i.MultiLink,{className:"multilinkWrapper",onHeadClick:function(){return k(!x)},displayOptions:x,options:G,label:s("BILLS_MERGE_AND_DOWNLOAD")})),t.createElement("div",{className:"searchBox"},t.createElement(i.SearchAction,{text:s("ABG_GROUP_BILL"),handleActionClick:function(){return A({type:"set",payload:"SearchFormComponent"})},tenantId:m,t:s})),b?t.createElement(i.PopUp,null,t.createElement(I,{onSubmit:function(e){A({type:"remove"}),E(e)},handleSubmit:f,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:B,currentlyActiveMobileModal:b,closeMobilePopupModal:y,tenantId:m})):null,p&&t.createElement(i.Loader,null),!p&&h&&t.createElement(i.DetailsCard,{handleSelect:function(e){},handleDetailCardClick:function(e){},data:T,serviceRequestIdKey:s("ABG_BILL_NUMBER_LABEL")}),R&&t.createElement(i.Toast,{label:null==R?void 0:R.label,onClose:function(){return P(null)}}))},Ie=function(e){var n,l=e.stateCode,i=e.userType,o=e.tenants,a=["abg","ws","pt","common",(null===(n=Digit.SessionStorage.get("CITIZEN.COMMON.HOME.CITY"))||void 0===n?void 0:n.code)||Digit.ULBService.getCurrentTenantId(),"bill-amend"],u=Digit.StoreData.getCurrentLanguage(),c=(Digit.Services.useStore({stateCode:l,moduleCode:a,language:u}),r.useRouteMatch()),s=c.path,d=c.url;return Digit.SessionStorage.set("BILLS_TENANTS",o),"employee"===i?t.createElement(Q,{path:s,url:d,userType:"employee"}):t.createElement(ge,null)},Oe=function(e){var n=e.matchPath,r=l.useTranslation().t,o=[{link:n+"/billSearch",i18nKey:r("ABG_SEARCH_BILL_COMMON_HEADER")}];return t.createElement(i.CitizenHomeCard,{header:r("ACTION_TEST_BILLGENIE"),links:o,Icon:function(){return t.createElement(i.CollectionIcon,{className:"fill-path-primary-main"})}})},Te={BillsModule:Ie,BillsCard:function(){var e,n,r=l.useTranslation().t;if(!(null===(e=Digit.SessionStorage.get("User"))||void 0===e||null===(n=e.info)||void 0===n?void 0:n.roles).find(function(e){return"SUPERUSER"===e.code}))return null;var o={Icon:t.createElement(i.CollectionIcon,null),moduleName:r("ACTION_TEST_BILLGENIE"),links:[{label:r("ABG_SEARCH_BILL_COMMON_HEADER"),link:"/digit-ui/employee/bills/inbox"},{label:r("ACTION_TEST_GROUP_BILLS"),link:"/digit-ui/employee/bills/group-bill"},{label:r("ACTION_TEST_CANCEL_BILL"),link:"/digit-ui/employee/bills/cancel-bill"},{label:r("ACTION_TEST_DOWNLOAD_BILL_PDF"),link:"/digit-ui/employee/bills/download-bill-pdf"}]};return t.createElement(i.EmployeeModuleCard,o)},BillInbox:function(e){var r,o,c,s,d=e.parentRoute,f=e.initialStates,v=e.businessService,m=e.filterComponent,_=e.isInbox,E=Digit.ULBService.getCurrentTenantId(),p=n.useState(function(){return _?{}:{enabled:!1}})[1],h=l.useTranslation().t,g=n.useState(0),C=g[0],L=g[1],b=n.useState(0),A=b[0],y=b[1],N=n.useState(10),B=N[0],O=N[1],T=n.useState((null==f?void 0:f.sortParams)||[{id:"applicationDate",desc:!1}]),M=T[0],R=T[1],P=n.useState(!1),D=P[0],w=P[1],x=n.useState(function(){return(null==f?void 0:f.searchParams)||{}}),k=x[0],G=x[1],F=window.Digit.Utils.browser.isMobile(),U=F?{limit:10,offset:0,sortBy:null==M||null===(r=M[0])||void 0===r?void 0:r.id,sortOrder:null!=M&&null!==(o=M[0])&&void 0!==o&&o.desc?"DESC":"ASC"}:{limit:B,offset:C,sortBy:null==M||null===(c=M[0])||void 0===c?void 0:c.id,sortOrder:null!=M&&null!==(s=M[0])&&void 0!==s&&s.desc?"DESC":"ASC"},H=Digit.Hooks.useBillSearch({tenantId:E,filters:a({},k,{businessService:v},U,{sortParams:M}),config:{cacheTime:0}}),W=H.isLoading,j=H.data,z=u(H,J);n.useEffect(function(){var e;y(null==j||null===(e=j.Bills)||void 0===e?void 0:e.length)},[j]),n.useEffect(function(){L(0)},[k]);var V=function(e){var n,t=null==e?void 0:e.delete,r={};r=F?a({},e):a({},k,e),t&&t.forEach(function(e){return delete r[e]}),null===(n=r)||void 0===n||delete n.delete,null==e||delete e.delete,w(!0),G(a({},r)),p({enabled:!0})},Y=n.useCallback(function(e){0!==e.length&&R(e)},[]),K=function(){return[{label:h("ABG_BILL_NUMBER_LABEL"),name:"billNo"},{label:h("ABG_PT_CONSUMER_CODE_LABEL"),name:"consumerCode"},{label:h("ABG_MOBILE_NO_LABEL"),name:"mobileNumber",maxlength:10,pattern:Digit.Utils.getPattern("MobileNo"),type:"mobileNumber",title:h("ES_SEARCH_APPLICATION_MOBILE_INVALID"),componentInFront:"+91"}]};return F?t.createElement(I,{data:j,isLoading:W,searchFields:K(),onFilterChange:V,onSearch:V,onSort:Y,parentRoute:d,searchParams:k,sortParams:M,totalRecords:A}):t.createElement("div",null,_&&t.createElement(i.Header,null,h("ABG_SEARCH_BILL_COMMON_HEADER")),t.createElement(S,{data:j,tableConfig:null==z?void 0:z.tableConfig,isLoading:W,defaultSearchParams:f.searchParams,isSearch:!_,onFilterChange:V,searchFields:K(),setSearchFieldsBackToOriginalState:D,setSetSearchFieldsBackToOriginalState:w,onSearch:V,onSort:Y,onNextPage:function(){L(function(e){return e+B})},onPrevPage:function(){L(function(e){return e-B})},onFirstPage:function(){L(function(e){return 0})},onLastPage:function(){L(A&&10*Math.ceil(A/10)-B)},currentPage:Math.floor(C/B),pageSizeLimit:10,disableSort:!1,onPageSizeChange:function(e){O(Number(e.target.value))},parentRoute:d,searchParams:k,sortParams:M,totalRecords:A,filterComponent:m}))},BillDetails:function(){var e,o,a,c,f,v,m,_,E,p,h,g,C,S,L,b=n.useState(!1),A=b[0],y=b[1],N=l.useTranslation().t,B=r.useParams(),I=B.id,O=B.service,T=Digit.ULBService.getCurrentTenantId(),M=Digit.SessionStorage.get("isupdate"),R=Digit.Hooks.receipts.useReceiptsSearch({receiptNumbers:decodeURIComponent(I),businessServices:O},T,{},M),P=R.isLoading,D=R.data,w=u(R,re);n.useEffect(function(){return function(){null==w||w.revalidate()}},[]);var x=Digit.Hooks.useSessionStorage("EMPLOYEE_RECEIPT_MUTATION_HAPPENED",!1)[1],k=Digit.Hooks.useSessionStorage("EMPLOYEE_RECEIPT_MUTATION_SUCCESS_DATA",!1)[2],G=Digit.Hooks.useSessionStorage("EMPLOYEE_RECEIPT_ERROR_DATA",!1)[2];if(n.useEffect(function(){x(!1),k(),G()},[]),P)return t.createElement(i.Loader,null);var F,U,H,W,j,z,V,Y,K,q=!P&&(null==D||null===(e=D.Payments)||void 0===e?void 0:e.length)>0?D.Payments[0]:{};return t.createElement(t.Fragment,null,t.createElement("div",{style:{width:"30%",fontFamily:"calibri",color:"#FF0000"}},t.createElement(i.Header,null,N("CR_RECEIPT_SUMMARY"))),!P&&(null==D||null===(o=D.Payments)||void 0===o?void 0:o.length)>0?t.createElement("div",null,t.createElement(i.Card,null,t.createElement(i.StatusTable,null,t.createElement(i.Row,{label:N("CR_RECEIPT_NUMBER"),text:(null==q||null===(a=q.paymentDetails[0])||void 0===a?void 0:a.receiptNumber)||"NA",textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{label:N("CR_RECEIPT_CONSUMER_NUMBER"),text:(null==q||null===(c=q.paymentDetails[0])||void 0===c||null===(f=c.bill)||void 0===f?void 0:f.consumerCode)||"NA",textStyle:{whiteSpace:"pre"}}),t.createElement(i.Row,{label:N("CR_RECEIPT_PAYMENT_DATE"),text:s(null==q||null===(v=q.paymentDetails[0])||void 0===v?void 0:v.receiptDate)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_PAYER_NAME"),text:(null==q?void 0:q.payerName)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_PAYER_NUMBER"),text:(null==q?void 0:q.mobileNumber)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_SERVICE_TYPE"),text:N(d(null==q||null===(m=q.paymentDetails[0])||void 0===m?void 0:m.businessService,"BILLINGSERVICE_BUSINESSSERVICE"))||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_BILL_PERIOD"),text:(z=null==q||null===(_=q.paymentDetails[0])||void 0===_||null===(E=_.bill)||void 0===E||null===(p=E.billDetails[0])||void 0===p?void 0:p.fromPeriod,V=null==q||null===(h=q.paymentDetails[0])||void 0===h||null===(g=h.bill)||void 0===g||null===(C=g.billDetails[0])||void 0===C?void 0:C.toPeriod,Y=new Date(z),K=new Date(V),(K.getYear()-Y.getYear()!=0?"FY"+(Y.getYear()+1900)+"-"+(K.getYear()-100):Y.toLocaleDateString()+"-"+K.toLocaleDateString())||"NA")}),t.createElement(i.Row,{label:N("CR_RECEIPT_AMOUNT"),text:"₹"+(null==q?void 0:q.totalAmountPaid)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_PENDING_AMOUNT"),text:"₹"+(null==q?void 0:q.totalDue)||"₹0"}),t.createElement(i.Row,{label:N("CR_RECEIPT_PAYMENT_MODE"),text:null!=q&&q.paymentMode&&N("COMMON_MASTERS_PAYMENTMODE_"+(null==q?void 0:q.paymentMode))||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_TXN_ID"),text:(null==q?void 0:q.transactionNumber)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_G8_RECEIPT_NO"),text:(null==q||null===(S=q.paymentDetails[0])||void 0===S?void 0:S.manualReceiptNumber)||"NA"}),t.createElement(i.Row,{label:N("CR_RECEIPT_G8_RECEIPT_DATE"),text:s(null==q||null===(L=q.paymentDetails[0])||void 0===L?void 0:L.manualReceiptDate)||"NA"})))):null,A?t.createElement(te,{t:N,tenantId:T,applicationData:D,closeModal:function(){y(!1)},submitAction:function(e){}}):null,t.createElement(i.ActionBar,null,(void 0===(F=q)&&(F={}),"CANCELLED"!==(null===(U=F)||void 0===U?void 0:U.paymentStatus)&&"DEPOSITED"!==(null===(H=F)||void 0===H?void 0:H.paymentStatus)&&("APPROVED"==(null===(W=F)||void 0===W?void 0:W.instrumentStatus)||"REMITTED"==(null===(j=F)||void 0===j?void 0:j.instrumentStatus))&&t.createElement(i.SubmitBar,{label:N("CR_CANCEL_RECEIPT_BUTTON"),onSubmit:function(){y(!0)}}))))},ActionModal:te,Banner:function(e){var n,r=e.t,l=e.config;return t.createElement(i.LabelFieldPair,null,t.createElement(i.CardLabel,{className:"card-label-smaller",style:{color:"white"}},"."),t.createElement("span",{className:"form-field",style:{color:"gray"}},r(null==l||null===(n=l.texts)||void 0===n?void 0:n.header)))},CitizenInbox:_e,SearchCitizen:se,ApplicationCitizenCard:de,SearchCitizenFilter:ae,CitizenMobileInbox:ve,BillsLinks:Oe,CancelBills:function(e){var u=e.tenantId,c=e.onSubmit,s=e.data,d=e.count,f=e.isLoading,v=e.resultOk,m=r.useHistory(),_=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},E=l.useTranslation().t,p=o.useForm({defaultValues:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",searchType:"CONNECTION"}}),h=p.register,g=p.control,C=p.handleSubmit,S=p.reset,L=p.formState;if(window.Digit.Utils.browser.isMobile())return t.createElement(be,{Controller:o.Controller,register:h,control:g,t:E,reset:S,handleSubmit:C,tenantId:u,data:s,onSubmit:c,isLoading:f,resultOk:v});var b=function(e){return t.createElement("div",{onClick:e.onClick},t.createElement(i.DownloadBtnCommon,null))},A=n.useState([]),y=A[0],N=A[1];n.useEffect(function(){""!==s&&N([null==s?void 0:s.map(function(e){var n={};return n[E("ABG_COMMON_TABLE_COL_BILL_NO")]=null==e?void 0:e.billNumber,n[E("ABG_COMMON_TABLE_COL_CONSUMER_NAME")]=null==e?void 0:e.payerName,n[E("ABG_COMMON_TABLE_COL_BILL_DATE")]=_(null==e?void 0:e.billDate),n[E("ABG_COMMON_TABLE_COL_BILL_AMOUNT")]=null==e?void 0:e.totalAmount,n[E("ABG_COMMON_TABLE_COL_STATUS")]=null==e?void 0:e.status,a({},n)})])},[s]);var B=function(e){return t.createElement("span",{className:"cell-text"},e)},I=n.useMemo(function(){return[{Header:E("ABG_BILL_NUMBER_LABEL"),disableSortBy:!0,accessor:"billNumber",Cell:function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:function(){!function(e){m.push("/digit-ui/employee/bills/bill-details?connectionNumber="+(null==e?void 0:e.consumerCode)+"&tenantId="+u+"&service="+(null==e?void 0:e.businessService)+"&from=ABG_CANCEL_BILL",e)}(null==n?void 0:n.original)}},(null==(n=e.row)?void 0:n.original.billNumber)||"NA")));var n}},{Header:E("ABG_COMMON_TABLE_COL_CONSUMER_NAME"),disableSortBy:!0,Cell:function(e){var n,t;return B((null===(n=e.row.original)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.name)||"NA")}},{Header:E("ABG_COMMON_TABLE_COL_BILL_DATE"),disableSortBy:!0,Cell:function(e){var n,t=e.row;return B(_(null==t||null===(n=t.original)||void 0===n?void 0:n.billDate))}},{Header:E("ABG_COMMON_TABLE_COL_BILL_AMOUNT"),disableSortBy:!0,Cell:function(e){var n,t=e.row;return B((null==t||null===(n=t.original)||void 0===n?void 0:n.totalAmount)||"NA")}},{Header:E("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n,t=e.row;return B((null==t||null===(n=t.original)||void 0===n?void 0:n.status)||"NA")}},{Header:E("ABG_COMMON_TABLE_COL_ACTION"),disableSortBy:!0,Cell:function(e){return B(x(e.row))}}]},[]),O=n.useState(!1),T=O[0],M=O[1],R=function(e){var n,t;M(!1);var r={tenantId:u,consumerCodes:[null==D?void 0:D.consumerCode],businessService:null==D?void 0:D.businessService,statusToBeUpdated:"CANCELLED",additionalDetails:{reason:null==e||null===(n=e.reason)||void 0===n?void 0:n.code,description:(null==e?void 0:e.details)||"",reasonMessage:E(null==e||null===(t=e.reason)||void 0===t?void 0:t.message)}};m.push("/digit-ui/employee/bills/response-cancelBill",{filters:r,currentBill:D})},P=n.useState(""),D=P[0],w=P[1],x=function(e){return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement("button",{onClick:function(){!function(e){M(!0),w(e)}(null==e?void 0:e.original)}},E("ABG_CANCEL_BILL")," ")))};return t.createElement(n.Fragment,null,t.createElement(i.Header,{styles:{fontSize:"32px"}},E("ABG_CANCEL_BILL")),t.createElement(i.Card,{className:"card-search-heading"},t.createElement("span",{style:{color:"#505A5F"}},E("WS_INFO_VALIDATION"))),t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:c,handleSubmit:C},t.createElement(Ce,{register:h,control:g,reset:S,tenantId:u,t:E,formState:L})),f&&t.createElement(i.Loader,null),s&&0==(null==s?void 0:s.length)?t.createElement(i.Card,{style:{backgroundColor:"white",textAlign:"center"}},E("ES_COMMON_NO_DATA")):!1===f&&v&&t.createElement("div",{style:{backgroundColor:"white"}},t.createElement("div",{className:"sideContent",style:{float:"left",padding:"20px 10px",fontSize:"24px",fontWeight:"700",fontFamily:"Roboto"}},E("ABG_SEARCH_RESULTS_HEADER")),t.createElement("div",{className:"sideContent",style:{float:"right",padding:"10px 30px"}},t.createElement("span",{className:"table-search-wrapper"},t.createElement(b,{className:"mrlg cursorPointer",onClick:function(){return function(e){if(void 0!==(null==e?void 0:e[0]))return Digit.Download.Excel(null==e?void 0:e[0],"Bills")}(y)}}))),t.createElement(i.Table,{t:E,data:s,totalRecords:d,columns:I,getCellProps:function(e){return{style:{minWidth:e.column.Header===E("ABG_BILL_NUMBER_LABEL")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},manualPagination:!1})),T&&t.createElement(G,{t:E,closeModal:function(){return M(!1)},actionCancelLabel:"ABG_BACK",actionCancelOnSubmit:function(){return M(!1)},actionSaveLabel:"ABG_CANCEL_BILL",actionSaveOnSubmit:R,onSubmit:R}))},GroupBills:function(e){var a,u=e.tenantId,c=e.onSubmit,s=e.data,d=e.count,f=e.isLoading,m=e.resultOk,_=e.serviceType,E=e.locality,p=(r.useHistory(),l.useTranslation().t),h=Digit.Hooks.useBoundaryLocalities(u,"revenue",{},p).data,g=o.useForm({defaultValues:{offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",searchType:"CONNECTION"}}),C=g.register,S=g.control,L=g.handleSubmit,b=g.reset,A=g.formState;if(window.Digit.Utils.browser.isMobile())return t.createElement(Be,{Controller:o.Controller,register:C,control:S,t:p,reset:b,handleSubmit:L,tenantId:u,data:s,onSubmit:c,isLoading:f,resultOk:m,serviceType:_,locality:E,tenantlocalties:h});var y=function(e){return t.createElement("span",{className:"cell-text"},e)},N=n.useMemo(function(){return[{Header:p("ABG_BILL_NUMBER_LABEL"),disableSortBy:!0,accessor:"billNumber",Cell:function(e){var n,r,l,i=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},y(v(null===(n=i.original)||void 0===n?void 0:n.businessService,null===(r=i.original)||void 0===r?void 0:r.consumerCode,null===(l=i.original)||void 0===l?void 0:l.billNumber))))}},{Header:p("WS"===_||"SW"===_?"PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID":"PROPERTY_ID"),disableSortBy:!0,Cell:function(e){var n;return y((null===(n=e.row.original)||void 0===n?void 0:n.consumerCode)||"NA")}},{Header:p("WS"===_||"SW"===_?"ABG_COMMON_TABLE_COL_CONSUMER_NAME":"OWNER_NAME"),disableSortBy:!0,Cell:function(e){var n,t;return y((null===(n=e.row.original)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.name)||"NA")}},{Header:p("ABG_COMMON_TABLE_COL_BILL_DATE"),disableSortBy:!0,Cell:function(e){var n,t=e.row;return y(function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,r=n.getDate();return(r=(r>9?"":"0")+r)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()}(null==t||null===(n=t.original)||void 0===n?void 0:n.billDate))}},{Header:p("ABG_COMMON_TABLE_COL_STATUS"),disableSortBy:!0,Cell:function(e){var n,t=e.row;return y((null==t||null===(n=t.original)||void 0===n?void 0:n.status)||"NA")}}]},[_]),B=(n.useState(!1),n.useState(""),Digit.Hooks.useCommonMDMS(u,"BillingService","BillsGenieKey").data),I=null==B||null===(a=B["common-masters"])||void 0===a?void 0:a.uiCommonPay,O=n.useState(null),T=O[0],M=O[1],R=function(e,n){void 0===n&&(n="ws-bill");try{return Promise.resolve(Digit.WSService.wnsGroupBill({key:n||"ws-bill",tenantId:u,locality:null==E?void 0:E.code,isConsolidated:e,bussinessService:_})).then(function(e){M({label:p("GRP_JOB_INITIATED_STATUS")+" "+(null==e?void 0:e.jobId)})})}catch(e){return Promise.reject(e)}},P=n.useState(!1),D=P[0],w=P[1],x="WS"===_?[{order:1,label:p("ABG_WATER_BILLS"),onClick:function(){return R(!1)}},{order:2,label:p("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return R(!0)}}]:"SW"===_?[{order:1,label:p("ABG_SEWERAGE_BILLS"),onClick:function(){return R(!1)}},{order:2,label:p("ABG_WATER_SEWERAGE_BILLS"),onClick:function(){return R(!0)}}]:[{order:1,label:p("BILLS_MERGE_AND_DOWNLOAD"),onClick:function(){"PT"==_?R(!0,"pt-bill"):function(){try{var e=I.filter(function(e){return e.code===_});Promise.resolve(Digit.PaymentService.generatePdf(u,{Bill:s},e[0].billKey)).then(function(e){return Promise.resolve(Digit.UploadServices.Filefetch(null==e?void 0:e.filestoreIds,u)).then(function(e){!function(e){e.map(function(e){window.open(e.url)})}(e.data.fileStoreIds)})})}catch(e){return Promise.reject(e)}}()}}];return t.createElement(n.Fragment,null,t.createElement("div",{className:"custom-group-merge-container employee-application-details"},t.createElement(i.Header,{styles:{fontSize:"32px"}},p("ABG_COMMON_HEADER")),s&&(null==s?void 0:s.length)>=0&&t.createElement(i.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:function(){return w(!D)},displayOptions:D,options:x,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className",label:p("BILLS_MERGE_AND_DOWNLOAD")})),t.createElement(i.SearchForm,{className:"ws-custom-wrapper",onSubmit:c,handleSubmit:L},t.createElement(Ae,{register:C,control:S,reset:b,tenantId:u,t:p,formState:A,tenantlocalties:h})),f&&t.createElement(i.Loader,null),s&&0==(null==s?void 0:s.length)?t.createElement(i.Card,{style:{backgroundColor:"white",textAlign:"center"}},p("ES_COMMON_NO_DATA")):!1===f&&s&&t.createElement("div",{style:{backgroundColor:"white"}},t.createElement("div",{className:"sideContent",style:{float:"left",padding:"20px 10px",fontSize:"24px",fontWeight:"700",fontFamily:"Roboto"}},p("ABG_SEARCH_RESULTS_HEADER")),t.createElement(i.Table,{t:p,data:s,totalRecords:d,columns:N,getCellProps:function(e){return{style:{minWidth:e.column.Header===p("ABG_BILL_NUMBER_LABEL")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},manualPagination:!1})),T&&t.createElement(i.Toast,{label:null==T?void 0:T.label,onClose:function(){return M(null)}}))},BILLS_INBOX_FILTER:function(e){return t.createElement(y,e)},BILLS_GROUP_FILTER:function(e){return t.createElement(ie,e)},CITIZEN_SEARCH_FILTER:function(e){return t.createElement(ae,e)}};exports.BillsLinks=Oe,exports.BillsModule=Ie,exports.initBillsComponents=function(){Object.entries(Te).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
