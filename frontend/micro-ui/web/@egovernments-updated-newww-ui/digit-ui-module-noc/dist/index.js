var e,t=require("@egovernments/digit-ui-react-components"),n=require("react"),i=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,l=require("react-router-dom"),o=require("react-i18next"),r=require("react-query"),a=require("react-hook-form");function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,l={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(l[n]=e[n]);return l}var d=function(e){if(e){var t=new Date(e),n=t.getMonth()+1,i=t.getDate();return(i=(i>9?"":"0")+i)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()}return null},s=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e},v=function(e){void 0===e&&(e=!1);var t=window.location.href.includes("/search"),n=[{code:t?"FIRE_NOC":"FIRE_NOC_SRV",active:!0,roles:["FIRE_NOC_APPROVER"],i18nKey:"WF_FIRE_NOC_FIRE_NOC_SRV"},{code:t?"AIRPORT_AUTHORITY":"AIRPORT_NOC_SRV",active:!0,roles:["AIRPORT_AUTHORITY_APPROVER"],i18nKey:"WF_FIRE_NOC_AIRPORT_NOC_SRV"}],i=[],l=Digit.UserService.getUser().info.roles;return n.map(function(t,o){t.roles.map(function(t){l.map(function(l){var r;l.code===t&&i.push(e?null==n||null===(r=n[o])||void 0===r?void 0:r.code:null==n?void 0:n[o])})})}),i},f=function(e,t){return e===t||e!=e&&t!=t},p=function(e,t){for(var n=e.length;n--;)if(f(e[n][0],t))return n;return-1},m=Array.prototype.splice;function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}h.prototype.clear=function(){this.__data__=[],this.size=0},h.prototype.delete=function(e){var t=this.__data__,n=p(t,e);return!(n<0||(n==t.length-1?t.pop():m.call(t,n,1),--this.size,0))},h.prototype.get=function(e){var t=this.__data__,n=p(t,e);return n<0?void 0:t[n][1]},h.prototype.has=function(e){return p(this.__data__,e)>-1},h.prototype.set=function(e,t){var n=this.__data__,i=p(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var g=h,E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(e,t){return e(t={exports:{}},t.exports),t.exports}var b,S="object"==typeof E&&E&&E.Object===Object&&E,A="object"==typeof self&&self&&self.Object===Object&&self,C=S||A||Function("return this")(),T=C.Symbol,D=Object.prototype,w=D.hasOwnProperty,O=D.toString,x=T?T.toStringTag:void 0,N=Object.prototype.toString,L=T?T.toStringTag:void 0,I=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":L&&L in Object(e)?function(e){var t=w.call(e,x),n=e[x];try{e[x]=void 0;var i=!0}catch(e){}var l=O.call(e);return i&&(t?e[x]=n:delete e[x]),l}(e):function(e){return N.call(e)}(e)},P=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},F=function(e){if(!P(e))return!1;var t=I(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},R=C["__core-js_shared__"],M=(b=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",B=Function.prototype.toString,U=function(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""},k=/^\[object .+?Constructor\]$/,W=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!P(e)||(t=e,M&&M in t))&&(F(e)?W:k).test(U(e));var t}(n)?n:void 0},H=j(C,"Map"),z=j(Object,"create"),V=Object.prototype.hasOwnProperty,Y=Object.prototype.hasOwnProperty;function q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}q.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},q.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return V.call(t,e)?t[e]:void 0},q.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:Y.call(t,e)},q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this};var G=q,K=function(e,t){var n,i,l=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?l["string"==typeof t?"string":"hash"]:l.map};function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}X.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(H||g),string:new G}},X.prototype.delete=function(e){var t=K(this,e).delete(e);return this.size-=t?1:0,t},X.prototype.get=function(e){return K(this,e).get(e)},X.prototype.has=function(e){return K(this,e).has(e)},X.prototype.set=function(e,t){var n=K(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var $=X;function J(e){var t=this.__data__=new g(e);this.size=t.size}J.prototype.clear=function(){this.__data__=new g,this.size=0},J.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var n=this.__data__;if(n instanceof g){var i=n.__data__;if(!H||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new $(i)}return n.set(e,t),this.size=n.size,this};var Z=J,Q=function(){try{var e=j(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ee=function(e,t,n){"__proto__"==t&&Q?Q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},te=Object.prototype.hasOwnProperty,ne=function(e,t,n){var i=e[t];te.call(e,t)&&f(i,n)&&(void 0!==n||t in e)||ee(e,t,n)},ie=function(e,t,n,i){var l=!n;n||(n={});for(var o=-1,r=t.length;++o<r;){var a=t[o],u=i?i(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),l?ee(n,a,u):ne(n,a,u)}return n},le=function(e){return null!=e&&"object"==typeof e},oe=function(e){return le(e)&&"[object Arguments]"==I(e)},re=Object.prototype,ae=re.hasOwnProperty,ue=re.propertyIsEnumerable,ce=oe(function(){return arguments}())?oe:function(e){return le(e)&&ae.call(e,"callee")&&!ue.call(e,"callee")},de=Array.isArray,se=function(){return!1},ve=y(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,l=i&&i.exports===n?C.Buffer:void 0;e.exports=(l?l.isBuffer:void 0)||se}),fe=/^(?:0|[1-9]\d*)$/,pe=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&fe.test(e))&&e>-1&&e%1==0&&e<t},me=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},he={};he["[object Float32Array]"]=he["[object Float64Array]"]=he["[object Int8Array]"]=he["[object Int16Array]"]=he["[object Int32Array]"]=he["[object Uint8Array]"]=he["[object Uint8ClampedArray]"]=he["[object Uint16Array]"]=he["[object Uint32Array]"]=!0,he["[object Arguments]"]=he["[object Array]"]=he["[object ArrayBuffer]"]=he["[object Boolean]"]=he["[object DataView]"]=he["[object Date]"]=he["[object Error]"]=he["[object Function]"]=he["[object Map]"]=he["[object Number]"]=he["[object Object]"]=he["[object RegExp]"]=he["[object Set]"]=he["[object String]"]=he["[object WeakMap]"]=!1;var ge=function(e){return function(t){return e(t)}},Ee=y(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,l=i&&i.exports===n&&S.process,o=function(){try{return i&&i.require&&i.require("util").types||l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=o}),_e=Ee&&Ee.isTypedArray,ye=_e?ge(_e):function(e){return le(e)&&me(e.length)&&!!he[I(e)]},be=Object.prototype.hasOwnProperty,Se=function(e,t){var n=de(e),i=!n&&ce(e),l=!n&&!i&&ve(e),o=!n&&!i&&!l&&ye(e),r=n||i||l||o,a=r?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],u=a.length;for(var c in e)!t&&!be.call(e,c)||r&&("length"==c||l&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,u))||a.push(c);return a},Ae=Object.prototype,Ce=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)},Te=function(e,t){return function(n){return e(t(n))}},De=Te(Object.keys,Object),we=Object.prototype.hasOwnProperty,Oe=function(e){return null!=e&&me(e.length)&&!F(e)},xe=function(e){return Oe(e)?Se(e):function(e){if(!Ce(e))return De(e);var t=[];for(var n in Object(e))we.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Ne=Object.prototype.hasOwnProperty,Le=function(e){return Oe(e)?Se(e,!0):function(e){if(!P(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ce(e),n=[];for(var i in e)("constructor"!=i||!t&&Ne.call(e,i))&&n.push(i);return n}(e)},Ie=y(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,l=i&&i.exports===n?C.Buffer:void 0,o=l?l.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=o?o(n):new e.constructor(n);return e.copy(i),i}}),Pe=function(){return[]},Fe=Object.prototype.propertyIsEnumerable,Re=Object.getOwnPropertySymbols,Me=Re?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var i=-1,l=null==t?0:t.length,o=0,r=[];++i<l;){var a=t[i];Fe.call(e,a)&&(r[o++]=a)}return r}(Re(e)))}:Pe,Be=function(e,t){for(var n=-1,i=t.length,l=e.length;++n<i;)e[l+n]=t[n];return e},Ue=Te(Object.getPrototypeOf,Object),ke=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Be(t,Me(e)),e=Ue(e);return t}:Pe,We=function(e,t,n){var i=t(e);return de(e)?i:Be(i,n(e))},je=function(e){return We(e,xe,Me)},He=function(e){return We(e,Le,ke)},ze=j(C,"DataView"),Ve=j(C,"Promise"),Ye=j(C,"Set"),qe=j(C,"WeakMap"),Ge=U(ze),Ke=U(H),Xe=U(Ve),$e=U(Ye),Je=U(qe),Ze=I;(ze&&"[object DataView]"!=Ze(new ze(new ArrayBuffer(1)))||H&&"[object Map]"!=Ze(new H)||Ve&&"[object Promise]"!=Ze(Ve.resolve())||Ye&&"[object Set]"!=Ze(new Ye)||qe&&"[object WeakMap]"!=Ze(new qe))&&(Ze=function(e){var t=I(e),n="[object Object]"==t?e.constructor:void 0,i=n?U(n):"";if(i)switch(i){case Ge:return"[object DataView]";case Ke:return"[object Map]";case Xe:return"[object Promise]";case $e:return"[object Set]";case Je:return"[object WeakMap]"}return t});var Qe=Ze,et=Object.prototype.hasOwnProperty,tt=C.Uint8Array,nt=function(e){var t=new e.constructor(e.byteLength);return new tt(t).set(new tt(e)),t},it=/\w*$/,lt=T?T.prototype:void 0,ot=lt?lt.valueOf:void 0,rt=Object.create,at=function(){function e(){}return function(t){if(!P(t))return{};if(rt)return rt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),ut=Ee&&Ee.isMap,ct=ut?ge(ut):function(e){return le(e)&&"[object Map]"==Qe(e)},dt=Ee&&Ee.isSet,st=dt?ge(dt):function(e){return le(e)&&"[object Set]"==Qe(e)},vt={};vt["[object Arguments]"]=vt["[object Array]"]=vt["[object ArrayBuffer]"]=vt["[object DataView]"]=vt["[object Boolean]"]=vt["[object Date]"]=vt["[object Float32Array]"]=vt["[object Float64Array]"]=vt["[object Int8Array]"]=vt["[object Int16Array]"]=vt["[object Int32Array]"]=vt["[object Map]"]=vt["[object Number]"]=vt["[object Object]"]=vt["[object RegExp]"]=vt["[object Set]"]=vt["[object String]"]=vt["[object Symbol]"]=vt["[object Uint8Array]"]=vt["[object Uint8ClampedArray]"]=vt["[object Uint16Array]"]=vt["[object Uint32Array]"]=!0,vt["[object Error]"]=vt["[object Function]"]=vt["[object WeakMap]"]=!1;var ft=function e(t,n,i,l,o,r){var a,u=1&n,c=2&n,d=4&n;if(i&&(a=o?i(t,l,o,r):i(t)),void 0!==a)return a;if(!P(t))return t;var s=de(t);if(s){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&et.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!u)return function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(t,a)}else{var v=Qe(t),f="[object Function]"==v||"[object GeneratorFunction]"==v;if(ve(t))return Ie(t,u);if("[object Object]"==v||"[object Arguments]"==v||f&&!o){if(a=c||f?{}:function(e){return"function"!=typeof e.constructor||Ce(e)?{}:at(Ue(e))}(t),!u)return c?function(e,t){return ie(e,ke(e),t)}(t,function(e,t){return e&&ie(t,Le(t),e)}(a,t)):function(e,t){return ie(e,Me(e),t)}(t,function(e,t){return e&&ie(t,xe(t),e)}(a,t))}else{if(!vt[v])return o?t:{};a=function(e,t,n){var i,l,o=e.constructor;switch(t){case"[object ArrayBuffer]":return nt(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?nt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?nt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(l=new(i=e).constructor(i.source,it.exec(i))).lastIndex=i.lastIndex,l;case"[object Set]":return new o;case"[object Symbol]":return ot?Object(ot.call(e)):{}}}(t,v,u)}}r||(r=new Z);var p=r.get(t);if(p)return p;r.set(t,a),st(t)?t.forEach(function(l){a.add(e(l,n,i,l,t,r))}):ct(t)&&t.forEach(function(l,o){a.set(o,e(l,n,i,o,t,r))});var m=s?void 0:(d?c?He:je:c?Le:xe)(t);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n););}(m||t,function(l,o){m&&(l=t[o=l]),ne(a,o,e(l,n,i,o,t,r))}),a},pt=function(e){return ft(e,5)},mt=function(e){var l,r,a=o.useTranslation().t,c=Digit.ULBService.getCurrentTenantId(),d=Digit.ComponentRegistryService.getComponent("NOCSearchApplication"),s=v(),f=[];1==(null==s?void 0:s.length)&&(f=[null==s||null===(l=s[0])||void 0===l?void 0:l.code]),(null==s?void 0:s.length)>1&&(null==s||s.forEach(function(e){f.push(e.code)}));var p=n.useState({offset:0,limit:10,tenantId:c,nocType:f[0]}),m=p[0],h=p[1],g={offset:0,limit:10,tenantId:c,nocType:f[0]},E=window.Digit.Utils.browser.isMobile(),_=Digit.Hooks.noc.useNOCSearchApplication(c,m,{}),y=_.data,b=_.isLoading,S=_.isSuccess,A=_.error;return i.createElement("div",null,i.createElement(t.CardHeader,{styles:E?{fontSize:"32px",fontWeight:"700",paddingLeft:"10px"}:{fontSize:"32px",fontWeight:"700"}},a("ACTION_TEST_SEARCH_NOC_APPLICATION")),i.createElement(d,{t:a,tenantId:c,onSubmit:function(e,t){void 0===t&&(t=!1);for(var n=pt(e),i=g,l=0,o=Object.entries(e);l<o.length;l++){var r,a=o[l],c=a[1];null!=c&&null!=c&&""!=c&&(i=u({},i,((r={})[a[0]]=c,r)))}h(1==t?n:i)},isLoading:b,Count:null==y?void 0:y.count,error:A,data:!b&&S&&(null==y||null===(r=y.Noc)||void 0===r?void 0:r.length)>0?y.Noc:[{display:"ES_COMMON_NO_DATA"}]}))},ht=function(e){var n,r,a=e.location.state,u=o.useTranslation().t,c=l.useHistory(),d=null==a||null===(n=a.data)||void 0===n||null===(r=n.Noc)||void 0===r?void 0:r[0];return i.createElement("div",null,i.createElement(t.Card,null,i.createElement(t.Banner,{message:u("NOC_"+s(null==d?void 0:d.nocType,".","_")+"_"+s(null==d?void 0:d.applicationStatus,".","_")+"_HEADER"),applicationNumber:null==d?void 0:d.nocNo,info:"REJECTED"==(null==d?void 0:d.applicationStatus)?"":u("NOC_"+s(null==d?void 0:d.nocType,".","_")+"_APPROVAL_NUMBER"),successful:"REJECTED"!=(null==d?void 0:d.applicationStatus),style:{padding:"10px"},headerStyles:{fontSize:"32px",wordBreak:"break-word"}}),"REJECTED"!==(null==d?void 0:d.applicationStatus)?i.createElement(t.CardText,null,u("NOC_"+s(null==d?void 0:d.nocType,".","_")+"_"+s(null==d?void 0:d.applicationStatus,".","_")+"_SUB_HEADER")):null,i.createElement(t.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},i.createElement(t.SubmitBar,{label:u("CORE_COMMON_GO_TO_HOME"),onSubmit:function(){c.push("/digit-ui/employee")}}))))},gt=function(e){var n=e.location,l=o.useTranslation().t,r=[{path:"/digit-ui/employee",content:l("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/noc/inbox",content:l("ES_COMMON_INBOX"),show:!!n.pathname.includes("noc/inbox")},{path:"/digit-ui/employee/noc/inbox/application-overview/:id",content:l("NOC_APP_OVER_VIEW_HEADER"),show:!!n.pathname.includes("noc/inbox/application-overview")},{path:"/digit-ui/employee/noc/search",content:l("ES_COMMON_APPLICATION_SEARCH"),show:!!n.pathname.includes("/digit-ui/employee/noc/search")},{path:"/digit-ui/employee/noc/search/application-overview/:id",content:l("NOC_APP_OVER_VIEW_HEADER"),show:!!n.pathname.includes("/digit-ui/employee/noc/search/application-overview")}];return i.createElement(t.BreadCrumb,{crumbs:r})},Et=function(e){var r,a,c,d,s=e.path,v=l.useLocation(),f=(o.useTranslation(),null===(r=Digit)||void 0===r||null===(a=r.ComponentRegistryService)||void 0===a?void 0:a.getComponent("NOCApplicationOverview")),p=null===(c=Digit)||void 0===c||null===(d=c.ComponentRegistryService)||void 0===d?void 0:d.getComponent("NOCInbox"),m=window.location.href.includes("/response"),h=window.Digit.Utils.browser.isMobile();return i.createElement(n.Fragment,null,m?null:i.createElement("div",{style:window.location.href.includes("application-overview")||h?{marginLeft:"10px"}:{}},i.createElement(gt,{location:v})),i.createElement(l.Switch,null,i.createElement(t.PrivateRoute,{path:s+"/inbox/application-overview/:id",component:f}),i.createElement(t.PrivateRoute,{path:s+"/search/application-overview/:id",component:f}),i.createElement(t.PrivateRoute,{path:s+"/inbox",component:function(e){return i.createElement(p,u({},e,{parentRoute:s}))}}),i.createElement(t.PrivateRoute,{path:s+"/search",component:function(e){return i.createElement(mt,u({},e,{parentRoute:s}))}}),i.createElement(t.PrivateRoute,{path:s+"/response",component:ht})))};function _t(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var yt=function(e){return i.createElement("h1",{className:"heading-m"},e.label)},bt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},St=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(bt,null))},At=function(e){var l,o,r=e.t,a=e.action,c=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,f=e.businessService,p=e.moduleCode,m=Digit.Hooks.useEmployeeSearch(c,{roles:null==a||null===(l=a.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),h=m.data,g=m.isLoading,E=Digit.Hooks.pt.useMDMS(c,f,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),_=E.isLoading,y=E.data,b=n.useState({}),S=b[0],A=b[1],C=n.useState({})[0],T=n.useState([]),D=T[0],w=T[1],O=n.useState(null),x=O[0],N=O[1],L=n.useState(null),I=L[0],P=L[1],F=n.useState(null),R=F[0],M=F[1],B=n.useState(null)[1],U=n.useState([]),k=U[0],W=U[1],j=n.useState(null),H=j[0],z=j[1];function V(e){P(e.target.files[0])}return n.useState(!1),n.useEffect(function(){var e;y&&y["egf-master"]&&W(null===(e=y["egf-master"])||void 0===e?void 0:e.FinancialYear)},[y]),n.useEffect(function(){var e;w(null==h||null===(e=h.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[h]),n.useEffect(function(){!function(){try{B(null);var e=function(){if(I){var e=function(){if(I.size>=5242880)B(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",I,Digit.ULBService.getStateId())).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?M(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):B(r("CS_FILE_UPLOAD_ERROR"))})},function(){B(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(function(){a&&A(null!=a&&a.showFinancialYearsModal?function(e){var n=e.action,l=e.financialYears,o=e.selectedFinancialYear,r=e.setSelectedFinancialYear;return{label:{heading:"WF_"+n.action+"_APPLICATION",submit:"WF_PT.CREATE_"+n.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:(0,e.t)("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:i.createElement(t.RadioButtons,{options:l,optionsKey:"name",onSelect:r,selectedOption:o})}]}]}}({t:r,action:a,financialYears:k,selectedFinancialYear:H,setSelectedFinancialYear:z}):function(e){var n,l=e.t,o=e.action,r=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile;return{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==o?void 0:o.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||"SENDBACKTOCITIZEN"===(null==o?void 0:o.action)?null:i.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:l("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("ES_PT_ATTACH_FILE")+(o.docUploadRequired?" *":""),populators:i.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},showHint:!0,hintText:l("PT_ATTACH_RESTRICTIONS_SIZE"),message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}}({t:r,action:a,approvers:D,selectedApprover:x,setSelectedApprover:N,selectFile:V,uploadedFile:R,setUploadedFile:M,businessService:f}))},[a,D,k,H,R]),a&&S.form?i.createElement(t.Modal,{headerBarMain:i.createElement(yt,{label:r(S.label.heading)}),headerBarEnd:i.createElement(St,{onClick:d}),actionCancelLabel:r(S.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(S.label.submit),actionSaveOnSubmit:function(){},isDisabled:a.showFinancialYearsModal?!H:g||(null==a?void 0:a.docUploadRequired)&&!R,formId:"modal-action"},_?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:S.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if(null!=a&&a.showFinancialYearsModal)s({customFunctionToExecute:null==a?void 0:a.customFunctionToExecute,Assessment:{financialYear:null==H?void 0:H.name,propertyId:null==v?void 0:v.propertyId,tenantId:c,source:null==v?void 0:v.source,channel:null==v?void 0:v.channel,assessmentDate:Date.now()}});else{var t={action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,businessService:f,moduleName:p};t.assignes=null!=a&&a.isTerminateState||!x?[]:[x],R&&(t.documents=[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:R}]),s({Property:u({},v,{workflow:t})})}},defaultValues:C,formId:"modal-action"})):i.createElement(t.Loader,null)},Ct=function(e){return i.createElement("h1",{className:"heading-m"},e.label)},Tt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Dt=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(Tt,null))},wt=function(e){var l,o,r=e.t,a=e.action,c=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,f=e.businessService,p=Digit.Hooks.useEmployeeSearch(c,{roles:null==a||null===(l=a.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}).data,m=Digit.Hooks.pt.useMDMS(c,f,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),h=m.isLoading,g=m.data,E=n.useState({}),_=E[0],y=E[1],b=n.useState({})[0],S=n.useState([]),A=S[0],C=S[1],T=n.useState({}),D=T[0],w=T[1],O=n.useState(null),x=O[0],N=O[1],L=n.useState(null),I=L[0],P=L[1],F=n.useState(null)[1],R=n.useState([]),M=R[0],B=R[1],U=n.useState(null)[0];function k(e){N(e.target.files[0])}return n.useEffect(function(){var e;g&&g["egf-master"]&&B(null===(e=g["egf-master"])||void 0===e?void 0:e.FinancialYear)},[g]),n.useEffect(function(){var e;C(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(x){var e=function(){if(x.size>=5242880)F(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",x,Digit.ULBService.getStateId())).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?P(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):F(r("CS_FILE_UPLOAD_ERROR"))})},function(){F(r("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[x]),n.useEffect(function(){a&&y(function(e){var n=e.t,l=e.action,o=e.approvers,r=e.selectedApprover,a=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,d=e.setUploadedFile,s=e.businessService,v=!0;return"SENDBACKTOCITIZEN"!=(null==l?void 0:l.action)&&"APPROVE"!=(null==l?void 0:l.action)||(v=!1),l.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:v?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?i.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:r}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){d(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}}({t:r,action:a,approvers:A,selectedApprover:D,setSelectedApprover:w,selectFile:k,uploadedFile:I,setUploadedFile:P,businessService:f}))},[a,A,M,U,I]),a&&_.form?i.createElement(t.Modal,{headerBarMain:i.createElement(Ct,{label:r(_.label.heading)}),headerBarEnd:i.createElement(Dt,{onClick:d}),actionCancelLabel:r(_.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},h?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=u({},v,{action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=D&&D.uuid?[null==D?void 0:D.uuid]:null,wfDocuments:I?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==x?void 0:x.name,fileStoreId:I}]:null}),s({Licenses:[v]})},defaultValues:b,formId:"modal-action"})):i.createElement(t.Loader,null)},Ot=function(e){return i.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},xt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Nt=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(xt,null))},Lt=function(e){var l,o,r=e.t,a=e.action,c=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,f=e.businessService,p=Digit.Hooks.useEmployeeSearch(c,{roles:null==a||null===(l=a.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),m=p.data,h=p.isLoading,g=n.useState({}),E=g[0],_=g[1],y=n.useState({})[0],b=n.useState([]),S=b[0],A=b[1],C=n.useState({}),T=C[0],D=C[1],w=n.useState(null),O=w[0],x=w[1],N=n.useState(null),L=N[0],I=N[1],P=n.useState(null),F=P[0],R=P[1],M=!!Digit.Utils.browser.isMobile();function B(e){x(e.target.files[0])}return n.useEffect(function(){var e;A(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(function(){!function(){try{R(null);var e=function(){if(O){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(O.size>=5242880)R(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=O&&O.type&&!e.test(null==O?void 0:O.type))R(r("NOT_SUPPORTED_FILE_TYPE"));else{var t=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",O,Digit.ULBService.getStateId()||(null==c?void 0:c.split(".")[0]))).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?I(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):R(r("CS_FILE_UPLOAD_ERROR"))})},function(){R(r("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]),n.useEffect(function(){a&&_(function(e){var n=e.t,l=e.action,o=e.approvers,r=e.selectedApprover,a=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,d=e.setUploadedFile,s=e.businessService,v=e.error,f=!0;return"SENDBACKTOCITIZEN"==(null==l?void 0:l.action)&&(f=!1),l.isTerminateState&&(f=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:f?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:f?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:f?i.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:a,selected:r}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){d(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:r,action:a,approvers:S,selectedApprover:T,setSelectedApprover:D,selectFile:B,uploadedFile:L,setUploadedFile:I,businessService:f,error:F}))},[a,S,L,F]),a&&E.form?i.createElement(t.Modal,{headerBarMain:i.createElement(Ot,{label:r(E.label.heading)}),headerBarEnd:i.createElement(Nt,{onClick:d}),actionCancelLabel:r(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(E.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:M?{width:"720px"}:{},style:M?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:M?{paddingLeft:"5px"}:{}},h?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:E.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=u({},v,{action:null==a?void 0:a.action,comment:null==e?void 0:e.comments,assignee:null!=T&&T.uuid?[null==T?void 0:T.uuid]:null,wfDocuments:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:null}),s({Licenses:[v]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:y,formId:"modal-action"})):i.createElement(t.Loader,null)},It=function(e){return i.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Pt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ft=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(Pt,null))},Rt=function(e){var l,o,a,c,d,s,v,f,p,m,h,g,E=e.t,_=e.action,y=e.tenantId,b=e.closeModal,S=e.submitAction,A=e.applicationDetails,C=e.applicationData,T=e.businessService,D=e.workflowDetails,w=(Digit.Hooks.obps.useObpsAPI(null!==(l=C)&&void 0!==l&&null!==(o=l.landInfo)&&void 0!==o&&null!==(a=o.address)&&void 0!==a&&a.city?null===(c=C)||void 0===c||null===(d=c.landInfo)||void 0===d||null===(s=d.address)||void 0===s?void 0:s.city:y,!1),Digit.Hooks.useEmployeeSearch(y,{roles:null==D||null===(v=D.data)||void 0===v||null===(f=v.initialActionState)||void 0===f||null===(p=f.nextActions)||void 0===p||null===(m=p.filter(function(e){return(null==e?void 0:e.action)==(null==_?void 0:_.action)}))||void 0===m||null===(h=m[0])||void 0===h||null===(g=h.assigneeRoles)||void 0===g?void 0:g.map(function(e){return{code:e}}),isActive:!0},{enabled:!(null!=_&&_.isTerminateState)})),O=w.data,x=w.isLoading,N=(r.useQueryClient(),n.useState({})),L=N[0],I=N[1],P=n.useState({})[0],F=n.useState([]),R=F[0],M=F[1],B=n.useState({}),U=B[0],k=B[1],W=n.useState(null),j=W[0],H=W[1],z=n.useState(null),V=z[0],Y=z[1],q=n.useState(null),G=q[0],K=q[1],X=n.useState(null)[0],$=!!Digit.Utils.browser.isMobile();function J(e){H(e.target.files[0])}n.useEffect(function(){var e;M(null==O||null===(e=O.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[O]),n.useEffect(function(){!function(){try{K(null);var e=function(){if(j){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(j.size>=5242880)K(E("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=j&&j.type&&!e.test(null==j?void 0:j.type))K(E("NOT_SUPPORTED_FILE_TYPE"));else{var t=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",j,Digit.ULBService.getStateId()||(null==y?void 0:y.split(".")[0]))).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?Y(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):K(E("CS_FILE_UPLOAD_ERROR"))})},function(){K(E("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[j]);var Z=function(e){var t,n=[];for(t=0;t<(null==e?void 0:e.questionLength);t++){var i;n.push({remarks:e["Remarks_"+t],question:null==e?void 0:e.questionList[t].question,value:null==e||null===(i=e["question_"+t])||void 0===i?void 0:i.code})}return n},Q=function(e){var t,n,i,l,o=[],r=[];return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(n=t.fieldinspection_pending)||void 0===n?void 0:n.length)>0&&(r=null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?((null===(l=o=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")))||void 0===l?void 0:l.length)>0&&o.map(function(e,t){var n,i;r.push({docs:(n=e.Documents,i=[],n&&n.map(function(e,t){i.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),i),date:e.InspectionDate,questions:Z(e),time:null==e?void 0:e.InspectionTime})}),r=r.filter(function(e){return e.docs&&e.docs.length>0})):sessionStorage.removeItem("INSPECTION_DATA"),[].concat(r)};return n.useEffect(function(){_&&I(function(e){var n,l=e.t,o=e.action,r=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.error,f=!1;"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"SKIP_PAYMENT"!=o.action&&"SEND_BACK_TO_CITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(f=!0);var p=!1;return"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)||(p=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==o?void 0:o.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:o.isTerminateState||f?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||f?null:i.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:p,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:E,action:_,approvers:R,selectedApprover:U,setSelectedApprover:k,selectFile:J,uploadedFile:V,setUploadedFile:Y,businessService:T,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:G}))},[_,R,X,V,G]),_&&L.form?i.createElement(t.Modal,{headerBarMain:i.createElement(It,{label:E(L.label.heading)}),headerBarEnd:i.createElement(Ft,{onClick:b}),actionCancelLabel:E(L.label.cancel),actionCancelOnSubmit:b,actionSaveLabel:E(L.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:$?{width:"720px"}:{},style:$?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:$?{paddingLeft:"5px"}:{}},x?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:L.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var t,n,i,l,o,r;C=u({},C,{documents:(p=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),m=[],p.map(function(e){var t,n,i,l,o,r;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.values)||void 0===i?void 0:i.length)>0&&(m=[].concat(m,null==e||null===(l=e.uploadedDocuments)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.values)),(null==e||null===(r=e.newUploadedDocs)||void 0===r?void 0:r.length)>0&&(m=[].concat(m,null==e?void 0:e.newUploadedDocs))}),m),additionalDetails:u({},null===(t=C)||void 0===t?void 0:t.additionalDetails,{fieldinspection_pending:Q(C),pendingapproval:(s=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),v=Digit.SessionStorage.get("OBPS_NEW_APPROVALS"),f=null==s?void 0:s.reduce(function(e,t){return null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e},[]),null===(d=f)||void 0===d?void 0:d.concat(null!==v?v.filter(function(e){return""!==e.label}).map(function(e){return null==e?void 0:e.label}):[]))}),workflow:{action:null==_?void 0:_.action,comment:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(i=e.comments)||void 0===i?void 0:i.length)>0?null==e?void 0:e.comments:null,assignee:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,assignes:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,varificationDocuments:V?[{documentType:(null==_?void 0:_.action)+" DOC",fileName:null==j?void 0:j.name,fileStoreId:V}]:null},action:null==_?void 0:_.action,comment:null==e?void 0:e.comments,assignee:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,wfDocuments:V?[{documentType:(null==_?void 0:_.action)+" DOC",fileName:null==j?void 0:j.name,fileStoreId:V}]:null});var a=null==A||null===(l=A.nocData)||void 0===l?void 0:l.map(function(e){var t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:u({},e,{documents:[].concat(null!=e&&e.documents?null==e?void 0:e.documents:[],t||[])})}}),c={sourceRefId:null==a||null===(o=a[0])||void 0===o||null===(r=o.Noc)||void 0===r?void 0:r.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(y,c)).then(function(e){var t,n=!0,i=!0;null==e||null===(t=e.Noc)||void 0===t||t.map(function(e){var t,l,o,r,a;"APPROVED"!==(null==e||null===(t=e.applicationStatus)||void 0===t?void 0:t.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(l=e.applicationStatus)||void 0===l?void 0:l.toUpperCase())&&"REJECTED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"VOIDED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())||1!=n&&1!=i||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?n=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(i=!1))});var l=[];a&&a.map(function(e){var t,o,r,a,u,c,d,s,v,f,p,m;("APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(o=t.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(r=e.Noc)||void 0===r||null===(a=r.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(c=u.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(d=e.Noc)||void 0===d||null===(s=d.applicationStatus)||void 0===s?void 0:s.toUpperCase())&&"VOIDED"!=(null==e||null===(v=e.Noc)||void 0===v||null===(f=v.applicationStatus)||void 0===f?void 0:f.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(p=e.Noc)||void 0===p?void 0:p.nocType)&&n||"FIRE_NOC"===(null==e||null===(m=e.Noc)||void 0===m?void 0:m.nocType)&&i)&&l.push(e)}),S({BPA:C},(null==l?void 0:l.length)>0&&l,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}var d,s,v,f,p,m},defaultValues:P,formId:"modal-action"})):i.createElement(t.Loader,null)},Mt=function(e){return i.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Bt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ut=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(Bt,null))},kt=function(e){var o,a,c=e.t,d=e.action,s=e.tenantId,v=e.closeModal,f=e.submitAction,p=e.applicationData,m=e.businessService,h=Digit.Hooks.useEmployeeSearch(s,{roles:null==d||null===(o=d.assigneeRoles)||void 0===o||null===(a=o.map)||void 0===a?void 0:a.call(o,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=d&&d.isTerminateState)}),g=h.data,E=h.isLoading,_=(r.useQueryClient(),n.useState({})),y=_[0],b=_[1],S=n.useState({})[0],A=n.useState([]),C=A[0],T=A[1],D=n.useState({}),w=D[0],O=D[1],x=n.useState(null),N=x[0],L=x[1],I=n.useState(null),P=I[0],F=I[1],R=n.useState(null),M=R[0],B=R[1],U=!!Digit.Utils.browser.isMobile();function k(e){L(e.target.files[0])}return l.useHistory(),n.useEffect(function(){var e;T(null==g||null===(e=g.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[g]),n.useEffect(function(){!function(){try{B(null);var e=function(){if(N){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(N.size>=5242880)B(c("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=N&&N.type&&!e.test(null==N?void 0:N.type))B(c("NOT_SUPPORTED_FILE_TYPE"));else{var t=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",N,Digit.ULBService.getStateId()||(null==s?void 0:s.split(".")[0]))).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?F(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):B(c("CS_FILE_UPLOAD_ERROR"))})},function(){B(c("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(function(){d&&b(function(e){var n,l=e.t,o=e.action,r=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.error,f=!1;"REVOCATE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)||(f=!0);var p=!1;return"APPROVE"!=(null==o?void 0:o.action)&&"REJECT"!=(null==o?void 0:o.action)&&"AUTO_APPROVE"!=o.action&&"AUTO_REJECT"!=o.action||(p=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==o?void 0:o.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:o.isTerminateState||p?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=o.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:o.isTerminateState||p?null:i.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:f,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){s(null)},showHint:!0,message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:c,action:d,approvers:C,selectedApprover:w,setSelectedApprover:O,selectFile:k,uploadedFile:P,setUploadedFile:F,businessService:m,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:M}))},[d,C,P,M]),d&&y.form?i.createElement(t.Modal,{headerBarMain:i.createElement(Mt,{label:c(y.label.heading)}),headerBarEnd:i.createElement(Ut,{onClick:v}),actionCancelLabel:c(y.label.cancel),actionCancelOnSubmit:v,actionSaveLabel:c(y.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:U?{width:"720px"}:{},style:U?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:U?{paddingLeft:"5px"}:{}},E?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:y.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,i,l=JSON.parse(sessionStorage.getItem("NewNOCDocs")),o=(null===(t=p)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0?[].concat(null===(i=p)||void 0===i?void 0:i.documents):[];l.map(function(e,t){o.push(e)}),p=u({},p,{workflow:{action:null==d?void 0:d.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=w&&w.uuid?[null==w?void 0:w.uuid]:null,documents:P?[{documentType:(null==d?void 0:d.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:P}]:null},documents:o}),f({Noc:p},!1,{isNoc:!0})},defaultValues:S,formId:"modal-action"})):i.createElement(t.Loader,null)},Wt=function(e){return i.createElement("h1",{className:"heading-m"},e.label)},jt=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ht=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(jt,null))},zt=function(e,t){void 0===t&&(t="dayend");try{var n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),i=new Date(Date.UTC(n[1],n[2]-1,n[3]));return i.setMinutes(i.getMinutes()+i.getTimezoneOffset()),"dayend"===t&&(i.setHours(i.getHours()+24),i.setSeconds(i.getSeconds()-1)),i.getTime()}catch(t){return e}},Vt=function(e){var l,o,r=e.t,a=e.action,c=e.tenantId,d=e.closeModal,s=e.submitAction,v=e.applicationData,f=e.businessService,p=Digit.Hooks.useEmployeeSearch(c,{roles:null==a||null===(l=a.assigneeRoles)||void 0===l||null===(o=l.map)||void 0===o?void 0:o.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=a&&a.isTerminateState)}),m=p.data,h=p.isLoading,g=n.useState({}),E=g[0],_=g[1],y=n.useState({})[0],b=n.useState([]),S=b[0],A=b[1],C=n.useState({}),T=C[0],D=C[1],w=n.useState(null),O=w[0],x=w[1],N=n.useState(null),L=N[0],I=N[1],P=n.useState(null),F=P[0],R=P[1],M=window.Digit.Utils.browser.isMobile(),B=window.location.href.includes("/employee");function U(e){x(e.target.files[0])}return n.useEffect(function(){var e;A(null==m||null===(e=m.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[m]),n.useEffect(function(){!function(){try{R(null);var e=function(){if(O){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(O.size>=5242880)R(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=O&&O.type&&!e.test(null==O?void 0:O.type))R(r("NOT_SUPPORTED_FILE_TYPE"));else{var t=_t(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",O,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,n,i,l;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?I(null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId):R(r("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),R(r("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]),n.useEffect(function(){var e,n,l,o;"DisconnectWSConnection"==(null===(e=v)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(l=v)||void 0===l||null===(o=l.processInstance)||void 0===o?void 0:o.businessService)?a&&_(function(e){var n,l=e.t,o=e.action,r=e.approvers,a=e.selectedApprover,c=e.setSelectedApprover,d=e.selectFile,s=e.uploadedFile,v=e.setUploadedFile,f=e.businessService,p=e.error,m=!0,h=!1;return(null!=o&&null!==(n=o.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==o?void 0:o.action)||"RESUBMIT_APPLICATION"==(null==o?void 0:o.action))&&(m=!1),o.isTerminateState&&(m=!1),"EXECUTE_DISCONNECTION"!=(null==o?void 0:o.action)&&"DISCONNECTION_EXECUTED"!=(null==o?void 0:o.action)||(h=!0),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==f?void 0:f.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?i.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:c,selected:a}):null},h&&{label:l("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!h,type:"custom",populators:h?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:function(e,n){return i.createElement(t.DatePicker,u({onChange:e.onChange,date:e.value},n))}}:null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:function(){v(null)},message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:r,action:a,approvers:S,selectedApprover:T,setSelectedApprover:D,selectFile:U,uploadedFile:L,setUploadedFile:I,businessService:f,error:F})):a&&_(function(e){var n,l=e.t,o=e.action,r=e.approvers,a=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,d=e.uploadedFile,s=e.setUploadedFile,v=e.businessService,f=e.error,p=!0;return(null!=o&&null!==(n=o.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==o?void 0:o.action))&&(p=!1),o.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:p?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?i.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:a}):null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:i.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:c,onDelete:function(){s(null)},message:d?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:f,iserror:f,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:r,action:a,approvers:S,selectedApprover:T,setSelectedApprover:D,selectFile:U,uploadedFile:L,setUploadedFile:I,businessService:f,error:F}))},[a,S,L,F]),a&&E.form?i.createElement(t.Modal,{headerBarMain:i.createElement(Wt,{label:r(E.label.heading)}),headerBarEnd:i.createElement(Ht,{onClick:d}),actionCancelLabel:r(E.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:r(E.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",style:M&&B?{width:"100%",height:"auto"}:{}},h?i.createElement(t.Loader,null):i.createElement(t.FormComposer,{config:E.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,i,l,o,r,d,f;if(null!==(t=v)&&void 0!==t&&t.isBillAmend){var p,m,h,g,E,_,y,b,S,A=u({},null===(p=v)||void 0===p||null===(m=p.billAmendmentDetails)||void 0===m?void 0:m.additionalDetails,{comments:null!=e&&e.comments?e.comments:null}),C=u({},null===(h=v)||void 0===h?void 0:h.billAmendmentDetails,{workflow:{businessId:null===(g=v)||void 0===g||null===(E=g.billAmendmentDetails)||void 0===E?void 0:E.amendmentId,action:null==a?void 0:a.action,tenantId:c,businessService:null!==(_=v)&&void 0!==_&&null!==(y=_.applicationType)&&void 0!==y&&y.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(b=v)&&void 0!==b&&null!==(S=b.applicationType)&&void 0!==S&&S.includes("WATER")?"WS":"SW",assignes:null!=T&&T.uuid?[{uuid:null==T?void 0:T.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:[]},additionalDetails:A,comment:(null==e?void 0:e.comments)||"",wfDocuments:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:null,processInstance:{action:null==a?void 0:a.action,assignes:null!=T&&T.uuid?[{uuid:null==T?void 0:T.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:[]}});s({AmendmentUpdate:C})}else{if(v=u({},v,{action:null==a?void 0:a.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=T&&T.uuid?[null==T?void 0:T.uuid]:[],assignes:null!=T&&T.uuid?[{uuid:null==T?void 0:T.uuid}]:[],wfDocuments:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:null,processInstance:u({},null===(n=v)||void 0===n?void 0:n.processInstance,{action:null==a?void 0:a.action,assignes:null!=T&&T.uuid?[{uuid:null==T?void 0:T.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:L?[{documentType:(null==a?void 0:a.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:L}]:[]})}),null!=e&&e.date&&null!==(i=v)&&void 0!==i&&null!==(l=i.applicationType)&&void 0!==l&&l.includes("DISCONNECT")){var D=pt(null==e?void 0:e.date);v.disconnectionExecutionDate=zt(D)}else if(null!=e&&e.date){var w=pt(null==e?void 0:e.date);v.connectionExecutionDate=zt(w)}if("DisconnectWSConnection"==(null===(o=v)||void 0===o||null===(r=o.processInstance)||void 0===r?void 0:r.businessService)||"DisconnectSWConnection"==(null===(d=v)||void 0===d||null===(f=d.processInstance)||void 0===f?void 0:f.businessService)||window.location.href.includes("disconnection")){var x;"WATER"==(null===(x=v)||void 0===x?void 0:x.serviceType)?s({WaterConnection:v,disconnectRequest:!0}):s({SewerageConnection:v,disconnectRequest:!0})}else{var N,I,P,F,R,M,B,U,k,W,j,H,z,V=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),Y=V?JSON.parse(V):"";null!=Y&&null!==(N=Y.value)&&void 0!==N&&N.adhocPenalty&&(v.additionalDetails.adhocPenalty=parseInt(null==Y||null===(I=Y.value)||void 0===I?void 0:I.adhocPenalty)||""),null!=Y&&null!==(P=Y.value)&&void 0!==P&&P.adhocPenaltyComment&&(v.additionalDetails.adhocPenaltyComment=(null==Y||null===(F=Y.value)||void 0===F?void 0:F.adhocPenaltyComment)||""),null!=Y&&null!==(R=Y.value)&&void 0!==R&&R.adhocPenaltyReason&&(v.additionalDetails.adhocPenaltyReason=(null==Y||null===(M=Y.value)||void 0===M?void 0:M.adhocPenaltyReason)||""),null!=Y&&null!==(B=Y.value)&&void 0!==B&&B.adhocRebate&&(v.additionalDetails.adhocRebate=parseInt(null==Y||null===(U=Y.value)||void 0===U?void 0:U.adhocRebate)||""),null!=Y&&null!==(k=Y.value)&&void 0!==k&&k.adhocRebateComment&&(v.additionalDetails.adhocRebateComment=(null==Y||null===(W=Y.value)||void 0===W?void 0:W.adhocRebateComment)||""),null!=Y&&null!==(j=Y.value)&&void 0!==j&&j.adhocRebateReason&&(v.additionalDetails.adhocRebateReason=(null==Y||null===(H=Y.value)||void 0===H?void 0:H.adhocRebateReason)||""),"WATER"==(null===(z=v)||void 0===z?void 0:z.serviceType)?s({WaterConnection:v}):s({SewerageConnection:v})}}},defaultValues:y,formId:"modal-action"})):i.createElement(t.Loader,null)},Yt=function(e){return null!=e&&e.businessService.includes("PT")?i.createElement(At,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?i.createElement(wt,e):null!=e&&e.moduleCode.includes("BPAREG")?i.createElement(Lt,e):null!=e&&e.moduleCode.includes("BPA")?i.createElement(Rt,e):null!=e&&e.moduleCode.includes("NOC")?i.createElement(kt,e):null!=e&&e.moduleCode.includes("WS")?i.createElement(Vt,e):void 0};function qt(e){var n=e.documents,l=e.svgStyles,r=void 0===l?{}:l,a=e.isSendBackFlow,u=void 0!==a&&a,c=e.isHrLine,d=void 0!==c&&c,s=e.titleStyles,v=o.useTranslation().t,f=window.location.href.includes("stakeholder");return i.createElement("div",{style:{marginTop:"19px"}},!f&&(null==n?void 0:n.map(function(e,l){var o;return i.createElement(i.Fragment,{key:l},null!=e&&e.title?i.createElement(t.CardSubHeader,{style:s||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,i.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var l,o;return i.createElement("a",{target:"_",href:null==e?void 0:e.url,style:(l={minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},l.minWidth="100px",l),key:n},i.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.createElement(t.PDFSvg,null)),i.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},v(null==e?void 0:e.title)),u?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?i.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType.split(".")[1])):i.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&i.createElement("div",null,i.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),d&&(null==n?void 0:n.length)!=l+1?i.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),f&&(null==n?void 0:n.map(function(e,n){var l;return i.createElement(i.Fragment,{key:n},null!=e&&e.title?i.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,i.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return i.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=r&&r.minWidth?null==r?void 0:r.minWidth:"160px",marginRight:"20px"},key:n},i.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},i.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},v(null==e?void 0:e.title)),null!=e&&e.docInfo?i.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+v(null==e?void 0:e.docInfo)):null,i.createElement(t.PDFSvg,null),i.createElement("p",{style:(l={marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center"},l.color="#505A5F",l)},""+v(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&i.createElement("div",null,i.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}y(function(e,t){(function(){var n="Expected a function",i="__lodash_placeholder__",l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",r="[object Array]",a="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",s="[object GeneratorFunction]",v="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",h="[object Set]",g="[object String]",_="[object Symbol]",y="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",A="[object Float32Array]",C="[object Float64Array]",T="[object Int8Array]",D="[object Int16Array]",w="[object Int32Array]",O="[object Uint8Array]",x="[object Uint16Array]",N="[object Uint32Array]",L=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,R=/[&<>"']/g,M=RegExp(F.source),B=RegExp(R.source),U=/<%-([\s\S]+?)%>/g,k=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(V.source),q=/^\s+/,G=/\s/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Z=/[()=,{}\[\]\/\s]/,Q=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,re=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,ce=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="["+se+"]",fe="["+de+"]",pe="\\d+",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",he="[^\\ud800-\\udfff"+se+pe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ge="\\ud83c[\\udffb-\\udfff]",Ee="[^\\ud800-\\udfff]",_e="(?:\\ud83c[\\udde6-\\uddff]){2}",ye="[\\ud800-\\udbff][\\udc00-\\udfff]",be="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Se="(?:"+me+"|"+he+")",Ae="(?:"+be+"|"+he+")",Ce="(?:"+fe+"|"+ge+")?",Te="[\\ufe0e\\ufe0f]?"+Ce+"(?:\\u200d(?:"+[Ee,_e,ye].join("|")+")[\\ufe0e\\ufe0f]?"+Ce+")*",De="(?:"+["[\\u2700-\\u27bf]",_e,ye].join("|")+")"+Te,we="(?:"+[Ee+fe+"?",fe,_e,ye,"[\\ud800-\\udfff]"].join("|")+")",Oe=RegExp("[']","g"),xe=RegExp(fe,"g"),Ne=RegExp(ge+"(?="+ge+")|"+we+Te,"g"),Le=RegExp([be+"?"+me+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[ve,be,"$"].join("|")+")",Ae+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[ve,be+Se,"$"].join("|")+")",be+"?"+Se+"+(?:['](?:d|ll|m|re|s|t|ve))?",be+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pe,De].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Re=-1,Me={};Me[A]=Me[C]=Me[T]=Me[D]=Me[w]=Me[O]=Me["[object Uint8ClampedArray]"]=Me[x]=Me[N]=!0,Me[o]=Me[r]=Me[b]=Me[a]=Me[S]=Me[u]=Me[c]=Me[d]=Me[v]=Me[f]=Me[p]=Me[m]=Me[h]=Me[g]=Me[y]=!1;var Be={};Be[o]=Be[r]=Be[b]=Be[S]=Be[a]=Be[u]=Be[A]=Be[C]=Be[T]=Be[D]=Be[w]=Be[v]=Be[f]=Be[p]=Be[m]=Be[h]=Be[g]=Be[_]=Be[O]=Be["[object Uint8ClampedArray]"]=Be[x]=Be[N]=!0,Be[c]=Be[d]=Be[y]=!1;var Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ke=parseFloat,We=parseInt,je="object"==typeof E&&E&&E.Object===Object&&E,He="object"==typeof self&&self&&self.Object===Object&&self,ze=je||He||Function("return this")(),Ve=t&&!t.nodeType&&t,Ye=Ve&&e&&!e.nodeType&&e,qe=Ye&&Ye.exports===Ve,Ge=qe&&je.process,Ke=function(){try{return Ye&&Ye.require&&Ye.require("util").types||Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),Xe=Ke&&Ke.isArrayBuffer,$e=Ke&&Ke.isDate,Je=Ke&&Ke.isMap,Ze=Ke&&Ke.isRegExp,Qe=Ke&&Ke.isSet,et=Ke&&Ke.isTypedArray;function tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function nt(e,t,n,i){for(var l=-1,o=null==e?0:e.length;++l<o;){var r=e[l];t(i,r,n(r),e)}return i}function it(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function rt(e,t){for(var n=-1,i=null==e?0:e.length,l=0,o=[];++n<i;){var r=e[n];t(r,n,e)&&(o[l++]=r)}return o}function at(e,t){return!(null==e||!e.length)&&gt(e,t,0)>-1}function ut(e,t,n){for(var i=-1,l=null==e?0:e.length;++i<l;)if(n(t,e[i]))return!0;return!1}function ct(e,t){for(var n=-1,i=null==e?0:e.length,l=Array(i);++n<i;)l[n]=t(e[n],n,e);return l}function dt(e,t){for(var n=-1,i=t.length,l=e.length;++n<i;)e[l+n]=t[n];return e}function st(e,t,n,i){var l=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++l]);++l<o;)n=t(n,e[l],l,e);return n}function vt(e,t,n,i){var l=null==e?0:e.length;for(i&&l&&(n=e[--l]);l--;)n=t(n,e[l],l,e);return n}function ft(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var pt=bt("length");function mt(e,t,n){var i;return n(e,function(e,n,l){if(t(e,n,l))return i=n,!1}),i}function ht(e,t,n,i){for(var l=e.length,o=n+(i?1:-1);i?o--:++o<l;)if(t(e[o],o,e))return o;return-1}function gt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,l=e.length;++i<l;)if(e[i]===t)return i;return-1}(e,t,n):ht(e,_t,n)}function Et(e,t,n,i){for(var l=n-1,o=e.length;++l<o;)if(i(e[l],t))return l;return-1}function _t(e){return e!=e}function yt(e,t){var n=null==e?0:e.length;return n?Ct(e,t)/n:NaN}function bt(e){return function(t){return null==t?void 0:t[e]}}function St(e){return function(t){return null==e?void 0:e[t]}}function At(e,t,n,i,l){return l(e,function(e,l,o){n=i?(i=!1,e):t(n,e,l,o)}),n}function Ct(e,t){for(var n,i=-1,l=e.length;++i<l;){var o=t(e[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Tt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Dt(e){return e?e.slice(0,Vt(e)+1).replace(q,""):e}function wt(e){return function(t){return e(t)}}function Ot(e,t){return ct(t,function(t){return e[t]})}function xt(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,i=e.length;++n<i&&gt(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length;n--&&gt(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var Pt=St({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Ft=St({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Rt(e){return"\\"+Ue[e]}function Mt(e){return Ie.test(e)}function Bt(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function Ut(e,t){return function(n){return e(t(n))}}function kt(e,t){for(var n=-1,l=e.length,o=0,r=[];++n<l;){var a=e[n];a!==t&&a!==i||(e[n]=i,r[o++]=n)}return r}function Wt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function jt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Ht(e){return Mt(e)?function(e){for(var t=Ne.lastIndex=0;Ne.test(e);)++t;return t}(e):pt(e)}function zt(e){return Mt(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.split("")}(e)}function Vt(e){for(var t=e.length;t--&&G.test(e.charAt(t)););return t}var Yt=St({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qt=function e(t){var E=(t=null==t?ze:qt.defaults(ze.Object(),t,qt.pick(ze,Fe))).Array,G=t.Date,de=t.Error,se=t.Function,ve=t.Math,fe=t.Object,pe=t.RegExp,me=t.String,he=t.TypeError,ge=E.prototype,Ee=fe.prototype,_e=t["__core-js_shared__"],ye=se.prototype.toString,be=Ee.hasOwnProperty,Se=0,Ae=function(){var e=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ce=Ee.toString,Te=ye.call(fe),De=ze._,we=pe("^"+ye.call(be).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=qe?t.Buffer:void 0,Ie=t.Symbol,Ue=t.Uint8Array,je=Ne?Ne.allocUnsafe:void 0,He=Ut(fe.getPrototypeOf,fe),Ve=fe.create,Ye=Ee.propertyIsEnumerable,Ge=ge.splice,Ke=Ie?Ie.isConcatSpreadable:void 0,pt=Ie?Ie.iterator:void 0,St=Ie?Ie.toStringTag:void 0,Gt=function(){try{var e=Jl(fe,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kt=t.clearTimeout!==ze.clearTimeout&&t.clearTimeout,Xt=G&&G.now!==ze.Date.now&&G.now,$t=t.setTimeout!==ze.setTimeout&&t.setTimeout,Jt=ve.ceil,Zt=ve.floor,Qt=fe.getOwnPropertySymbols,en=Ne?Ne.isBuffer:void 0,tn=t.isFinite,nn=ge.join,ln=Ut(fe.keys,fe),on=ve.max,rn=ve.min,an=G.now,un=t.parseInt,cn=ve.random,dn=ge.reverse,sn=Jl(t,"DataView"),vn=Jl(t,"Map"),fn=Jl(t,"Promise"),pn=Jl(t,"Set"),mn=Jl(t,"WeakMap"),hn=Jl(fe,"create"),gn=mn&&new mn,En={},_n=wo(sn),yn=wo(vn),bn=wo(fn),Sn=wo(pn),An=wo(mn),Cn=Ie?Ie.prototype:void 0,Tn=Cn?Cn.valueOf:void 0,Dn=Cn?Cn.toString:void 0;function wn(e){if(Vr(e)&&!Pr(e)&&!(e instanceof Ln)){if(e instanceof Nn)return e;if(be.call(e,"__wrapped__"))return Oo(e)}return new Nn(e)}var On=function(){function e(){}return function(t){if(!zr(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function xn(){}function Nn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ln(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Fn;++t<n;)this.add(e[t])}function Mn(e){var t=this.__data__=new Pn(e);this.size=t.size}function Bn(e,t){var n=Pr(e),i=!n&&Ir(e),l=!n&&!i&&Br(e),o=!n&&!i&&!l&&Zr(e),r=n||i||l||o,a=r?Tt(e.length,me):[],u=a.length;for(var c in e)!t&&!be.call(e,c)||r&&("length"==c||l&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||lo(c,u))||a.push(c);return a}function Un(e){var t=e.length;return t?e[Fi(0,t-1)]:void 0}function kn(e,t){return So(ml(e),Kn(t,0,e.length))}function Wn(e){return So(ml(e))}function jn(e,t,n){(void 0!==n&&!xr(e[t],n)||void 0===n&&!(t in e))&&qn(e,t,n)}function Hn(e,t,n){var i=e[t];be.call(e,t)&&xr(i,n)&&(void 0!==n||t in e)||qn(e,t,n)}function zn(e,t){for(var n=e.length;n--;)if(xr(e[n][0],t))return n;return-1}function Vn(e,t,n,i){return Qn(e,function(e,l,o){t(i,e,n(e),o)}),i}function Yn(e,t){return e&&hl(t,ya(t),e)}function qn(e,t,n){"__proto__"==t&&Gt?Gt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gn(e,t){for(var n=-1,i=t.length,l=E(i),o=null==e;++n<i;)l[n]=o?void 0:ma(e,t[n]);return l}function Kn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Xn(e,t,n,i,l,r){var c,E=1&t,y=2&t,L=4&t;if(n&&(c=l?n(e,i,l,r):n(e)),void 0!==c)return c;if(!zr(e))return e;var I=Pr(e);if(I){if(c=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!E)return ml(e,c)}else{var P=eo(e),F=P==d||P==s;if(Br(e))return cl(e,E);if(P==p||P==o||F&&!l){if(c=y||F?{}:no(e),!E)return y?function(e,t){return hl(e,Ql(e),t)}(e,function(e,t){return e&&hl(t,ba(t),e)}(c,e)):function(e,t){return hl(e,Zl(e),t)}(e,Yn(c,e))}else{if(!Be[P])return l?e:{};c=function(e,t,n){var i=e.constructor;switch(t){case b:return dl(e);case a:case u:return new i(+e);case S:return function(e,t){var n=t?dl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case A:case C:case T:case D:case w:case O:case"[object Uint8ClampedArray]":case x:case N:return sl(e,n);case v:return new i;case f:case g:return new i(e);case m:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case h:return new i;case _:return Tn?fe(Tn.call(e)):{}}}(e,P,E)}}r||(r=new Mn);var R=r.get(e);if(R)return R;r.set(e,c),Xr(e)?e.forEach(function(i){c.add(Xn(i,t,n,i,e,r))}):Yr(e)&&e.forEach(function(i,l){c.set(l,Xn(i,t,n,l,e,r))});var M=I?void 0:(L?y?Vl:zl:y?ba:ya)(e);return it(M||e,function(i,l){M&&(i=e[l=i]),Hn(c,l,Xn(i,t,n,l,e,r))}),c}function $n(e,t,n){var i=n.length;if(null==e)return!i;for(e=fe(e);i--;){var l=n[i],o=e[l];if(void 0===o&&!(l in e)||!(0,t[l])(o))return!1}return!0}function Jn(e,t,i){if("function"!=typeof e)throw new he(n);return Eo(function(){e.apply(void 0,i)},t)}function Zn(e,t,n,i){var l=-1,o=at,r=!0,a=e.length,u=[],c=t.length;if(!a)return u;n&&(t=ct(t,wt(n))),i?(o=ut,r=!1):t.length>=200&&(o=xt,r=!1,t=new Rn(t));e:for(;++l<a;){var d=e[l],s=null==n?d:n(d);if(d=i||0!==d?d:0,r&&s==s){for(var v=c;v--;)if(t[v]===s)continue e;u.push(d)}else o(t,s,i)||u.push(d)}return u}wn.templateSettings={escape:U,evaluate:k,interpolate:W,variable:"",imports:{_:wn}},(wn.prototype=xn.prototype).constructor=wn,(Nn.prototype=On(xn.prototype)).constructor=Nn,(Ln.prototype=On(xn.prototype)).constructor=Ln,In.prototype.clear=function(){this.__data__=hn?hn(null):{},this.size=0},In.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},In.prototype.get=function(e){var t=this.__data__;if(hn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return be.call(t,e)?t[e]:void 0},In.prototype.has=function(e){var t=this.__data__;return hn?void 0!==t[e]:be.call(t,e)},In.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=hn&&void 0===t?"__lodash_hash_undefined__":t,this},Pn.prototype.clear=function(){this.__data__=[],this.size=0},Pn.prototype.delete=function(e){var t=this.__data__,n=zn(t,e);return!(n<0||(n==t.length-1?t.pop():Ge.call(t,n,1),--this.size,0))},Pn.prototype.get=function(e){var t=this.__data__,n=zn(t,e);return n<0?void 0:t[n][1]},Pn.prototype.has=function(e){return zn(this.__data__,e)>-1},Pn.prototype.set=function(e,t){var n=this.__data__,i=zn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new In,map:new(vn||Pn),string:new In}},Fn.prototype.delete=function(e){var t=Xl(this,e).delete(e);return this.size-=t?1:0,t},Fn.prototype.get=function(e){return Xl(this,e).get(e)},Fn.prototype.has=function(e){return Xl(this,e).has(e)},Fn.prototype.set=function(e,t){var n=Xl(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Rn.prototype.add=Rn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Rn.prototype.has=function(e){return this.__data__.has(e)},Mn.prototype.clear=function(){this.__data__=new Pn,this.size=0},Mn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Mn.prototype.get=function(e){return this.__data__.get(e)},Mn.prototype.has=function(e){return this.__data__.has(e)},Mn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pn){var i=n.__data__;if(!vn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fn(i)}return n.set(e,t),this.size=n.size,this};var Qn=_l(ai),ei=_l(ui,!0);function ti(e,t){var n=!0;return Qn(e,function(e,i,l){return n=!!t(e,i,l)}),n}function ni(e,t,n){for(var i=-1,l=e.length;++i<l;){var o=e[i],r=t(o);if(null!=r&&(void 0===a?r==r&&!Jr(r):n(r,a)))var a=r,u=o}return u}function ii(e,t){var n=[];return Qn(e,function(e,i,l){t(e,i,l)&&n.push(e)}),n}function li(e,t,n,i,l){var o=-1,r=e.length;for(n||(n=io),l||(l=[]);++o<r;){var a=e[o];t>0&&n(a)?t>1?li(a,t-1,n,i,l):dt(l,a):i||(l[l.length]=a)}return l}var oi=yl(),ri=yl(!0);function ai(e,t){return e&&oi(e,t,ya)}function ui(e,t){return e&&ri(e,t,ya)}function ci(e,t){return rt(t,function(t){return Wr(e[t])})}function di(e,t){for(var n=0,i=(t=ol(t,e)).length;null!=e&&n<i;)e=e[Do(t[n++])];return n&&n==i?e:void 0}function si(e,t,n){var i=t(e);return Pr(e)?i:dt(i,n(e))}function vi(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":St&&St in fe(e)?function(e){var t=be.call(e,St),n=e[St];try{e[St]=void 0;var i=!0}catch(e){}var l=Ce.call(e);return i&&(t?e[St]=n:delete e[St]),l}(e):function(e){return Ce.call(e)}(e)}function fi(e,t){return e>t}function pi(e,t){return null!=e&&be.call(e,t)}function mi(e,t){return null!=e&&t in fe(e)}function hi(e,t,n){for(var i=n?ut:at,l=e[0].length,o=e.length,r=o,a=E(o),u=Infinity,c=[];r--;){var d=e[r];r&&t&&(d=ct(d,wt(t))),u=rn(d.length,u),a[r]=!n&&(t||l>=120&&d.length>=120)?new Rn(r&&d):void 0}d=e[0];var s=-1,v=a[0];e:for(;++s<l&&c.length<u;){var f=d[s],p=t?t(f):f;if(f=n||0!==f?f:0,!(v?xt(v,p):i(c,p,n))){for(r=o;--r;){var m=a[r];if(!(m?xt(m,p):i(e[r],p,n)))continue e}v&&v.push(p),c.push(f)}}return c}function gi(e,t,n){var i=null==(e=po(e,t=ol(t,e)))?e:e[Do(ko(t))];return null==i?void 0:tt(i,e,n)}function Ei(e){return Vr(e)&&vi(e)==o}function _i(e,t,n,i,l){return e===t||(null==e||null==t||!Vr(e)&&!Vr(t)?e!=e&&t!=t:function(e,t,n,i,l,d){var s=Pr(e),E=Pr(t),y=s?r:eo(e),A=E?r:eo(t),C=(y=y==o?p:y)==p,T=(A=A==o?p:A)==p,D=y==A;if(D&&Br(e)){if(!Br(t))return!1;s=!0,C=!1}if(D&&!C)return d||(d=new Mn),s||Zr(e)?jl(e,t,n,i,l,d):function(e,t,n,i,l,o,r){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!o(new Ue(e),new Ue(t)));case a:case u:case f:return xr(+e,+t);case c:return e.name==t.name&&e.message==t.message;case m:case g:return e==t+"";case v:var d=Bt;case h:if(d||(d=Wt),e.size!=t.size&&!(1&i))return!1;var s=r.get(e);if(s)return s==t;i|=2,r.set(e,t);var p=jl(d(e),d(t),i,l,o,r);return r.delete(e),p;case _:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,y,n,i,l,d);if(!(1&n)){var w=C&&be.call(e,"__wrapped__"),O=T&&be.call(t,"__wrapped__");if(w||O){var x=w?e.value():e,N=O?t.value():t;return d||(d=new Mn),l(x,N,n,i,d)}}return!!D&&(d||(d=new Mn),function(e,t,n,i,l,o){var r=1&n,a=zl(e),u=a.length;if(u!=zl(t).length&&!r)return!1;for(var c=u;c--;){var d=a[c];if(!(r?d in t:be.call(t,d)))return!1}var s=o.get(e),v=o.get(t);if(s&&v)return s==t&&v==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=r;++c<u;){var m=e[d=a[c]],h=t[d];if(i)var g=r?i(h,m,d,t,e,o):i(m,h,d,e,t,o);if(!(void 0===g?m===h||l(m,h,n,i,o):g)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var E=e.constructor,_=t.constructor;E==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,i,l,d))}(e,t,n,i,_i,l))}function yi(e,t,n,i){var l=n.length,o=l,r=!i;if(null==e)return!o;for(e=fe(e);l--;){var a=n[l];if(r&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++l<o;){var u=(a=n[l])[0],c=e[u],d=a[1];if(r&&a[2]){if(void 0===c&&!(u in e))return!1}else{var s=new Mn;if(i)var v=i(c,d,u,e,t,s);if(!(void 0===v?_i(d,c,3,i,s):v))return!1}}return!0}function bi(e){return!(!zr(e)||(t=e,Ae&&Ae in t))&&(Wr(e)?we:le).test(wo(e));var t}function Si(e){return"function"==typeof e?e:null==e?qa:"object"==typeof e?Pr(e)?wi(e[0],e[1]):Di(e):tu(e)}function Ai(e){if(!co(e))return ln(e);var t=[];for(var n in fe(e))be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ci(e,t){return e<t}function Ti(e,t){var n=-1,i=Rr(e)?E(e.length):[];return Qn(e,function(e,l,o){i[++n]=t(e,l,o)}),i}function Di(e){var t=$l(e);return 1==t.length&&t[0][2]?vo(t[0][0],t[0][1]):function(n){return n===e||yi(n,e,t)}}function wi(e,t){return ro(e)&&so(t)?vo(Do(e),t):function(n){var i=ma(n,e);return void 0===i&&i===t?ha(n,e):_i(t,i,3)}}function Oi(e,t,n,i,l){e!==t&&oi(t,function(o,r){if(l||(l=new Mn),zr(o))!function(e,t,n,i,l,o,r){var a=ho(e,n),u=ho(t,n),c=r.get(u);if(c)jn(e,n,c);else{var d=o?o(a,u,n+"",e,t,r):void 0,s=void 0===d;if(s){var v=Pr(u),f=!v&&Br(u),p=!v&&!f&&Zr(u);d=u,v||f||p?Pr(a)?d=a:Mr(a)?d=ml(a):f?(s=!1,d=cl(u,!0)):p?(s=!1,d=sl(u,!0)):d=[]:Gr(u)||Ir(u)?(d=a,Ir(a)?d=ra(a):zr(a)&&!Wr(a)||(d=no(u))):s=!1}s&&(r.set(u,d),l(d,u,i,o,r),r.delete(u)),jn(e,n,d)}}(e,t,r,n,Oi,i,l);else{var a=i?i(ho(e,r),o,r+"",e,t,l):void 0;void 0===a&&(a=o),jn(e,r,a)}},ba)}function xi(e,t){var n=e.length;if(n)return lo(t+=t<0?n:0,n)?e[t]:void 0}function Ni(e,t,n){t=t.length?ct(t,function(e){return Pr(e)?function(t){return di(t,1===e.length?e[0]:e)}:e}):[qa];var i=-1;return t=ct(t,wt(Kl())),function(e,t){var i=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var i=-1,l=e.criteria,o=t.criteria,r=l.length,a=n.length;++i<r;){var u=vl(l[i],o[i]);if(u)return i>=a?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)});i--;)e[i]=e[i].value;return e}(Ti(e,function(e,n,l){return{criteria:ct(t,function(t){return t(e)}),index:++i,value:e}}))}function Li(e,t,n){for(var i=-1,l=t.length,o={};++i<l;){var r=t[i],a=di(e,r);n(a,r)&&ki(o,ol(r,e),a)}return o}function Ii(e,t,n,i){var l=i?Et:gt,o=-1,r=t.length,a=e;for(e===t&&(t=ml(t)),n&&(a=ct(e,wt(n)));++o<r;)for(var u=0,c=t[o],d=n?n(c):c;(u=l(a,d,u,i))>-1;)a!==e&&Ge.call(a,u,1),Ge.call(e,u,1);return e}function Pi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var l=t[n];if(n==i||l!==o){var o=l;lo(l)?Ge.call(e,l,1):Ji(e,l)}}return e}function Fi(e,t){return e+Zt(cn()*(t-e+1))}function Ri(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Mi(e,t){return _o(fo(e,t,qa),e+"")}function Bi(e){return Un(xa(e))}function Ui(e,t){var n=xa(e);return So(n,Kn(t,0,n.length))}function ki(e,t,n,i){if(!zr(e))return e;for(var l=-1,o=(t=ol(t,e)).length,r=o-1,a=e;null!=a&&++l<o;){var u=Do(t[l]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(l!=r){var d=a[u];void 0===(c=i?i(d,u,a):void 0)&&(c=zr(d)?d:lo(t[l+1])?[]:{})}Hn(a,u,c),a=a[u]}return e}var Wi=gn?function(e,t){return gn.set(e,t),e}:qa,ji=Gt?function(e,t){return Gt(e,"toString",{configurable:!0,enumerable:!1,value:za(t),writable:!0})}:qa;function Hi(e){return So(xa(e))}function zi(e,t,n){var i=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(n=n>l?l:n)<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var o=E(l);++i<l;)o[i]=e[i+t];return o}function Vi(e,t){var n;return Qn(e,function(e,i,l){return!(n=t(e,i,l))}),!!n}function Yi(e,t,n){var i=0,l=null==e?i:e.length;if("number"==typeof t&&t==t&&l<=2147483647){for(;i<l;){var o=i+l>>>1,r=e[o];null!==r&&!Jr(r)&&(n?r<=t:r<t)?i=o+1:l=o}return l}return qi(e,t,qa,n)}function qi(e,t,n,i){var l=0,o=null==e?0:e.length;if(0===o)return 0;for(var r=(t=n(t))!=t,a=null===t,u=Jr(t),c=void 0===t;l<o;){var d=Zt((l+o)/2),s=n(e[d]),v=void 0!==s,f=null===s,p=s==s,m=Jr(s);if(r)var h=i||p;else h=c?p&&(i||v):a?p&&v&&(i||!f):u?p&&v&&!f&&(i||!m):!f&&!m&&(i?s<=t:s<t);h?l=d+1:o=d}return rn(o,4294967294)}function Gi(e,t){for(var n=-1,i=e.length,l=0,o=[];++n<i;){var r=e[n],a=t?t(r):r;if(!n||!xr(a,u)){var u=a;o[l++]=0===r?0:r}}return o}function Ki(e){return"number"==typeof e?e:Jr(e)?NaN:+e}function Xi(e){if("string"==typeof e)return e;if(Pr(e))return ct(e,Xi)+"";if(Jr(e))return Dn?Dn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $i(e,t,n){var i=-1,l=at,o=e.length,r=!0,a=[],u=a;if(n)r=!1,l=ut;else if(o>=200){var c=t?null:Rl(e);if(c)return Wt(c);r=!1,l=xt,u=new Rn}else u=t?[]:a;e:for(;++i<o;){var d=e[i],s=t?t(d):d;if(d=n||0!==d?d:0,r&&s==s){for(var v=u.length;v--;)if(u[v]===s)continue e;t&&u.push(s),a.push(d)}else l(u,s,n)||(u!==a&&u.push(s),a.push(d))}return a}function Ji(e,t){return null==(e=po(e,t=ol(t,e)))||delete e[Do(ko(t))]}function Zi(e,t,n,i){return ki(e,t,n(di(e,t)),i)}function Qi(e,t,n,i){for(var l=e.length,o=i?l:-1;(i?o--:++o<l)&&t(e[o],o,e););return n?zi(e,i?0:o,i?o+1:l):zi(e,i?o+1:0,i?l:o)}function el(e,t){var n=e;return n instanceof Ln&&(n=n.value()),st(t,function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))},n)}function tl(e,t,n){var i=e.length;if(i<2)return i?$i(e[0]):[];for(var l=-1,o=E(i);++l<i;)for(var r=e[l],a=-1;++a<i;)a!=l&&(o[l]=Zn(o[l]||r,e[a],t,n));return $i(li(o,1),t,n)}function nl(e,t,n){for(var i=-1,l=e.length,o=t.length,r={};++i<l;)n(r,e[i],i<o?t[i]:void 0);return r}function il(e){return Mr(e)?e:[]}function ll(e){return"function"==typeof e?e:qa}function ol(e,t){return Pr(e)?e:ro(e,t)?[e]:To(aa(e))}var rl=Mi;function al(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:zi(e,t,n)}var ul=Kt||function(e){return ze.clearTimeout(e)};function cl(e,t){if(t)return e.slice();var n=e.length,i=je?je(n):new e.constructor(n);return e.copy(i),i}function dl(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function sl(e,t){var n=t?dl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vl(e,t){if(e!==t){var n=void 0!==e,i=null===e,l=e==e,o=Jr(e),r=void 0!==t,a=null===t,u=t==t,c=Jr(t);if(!a&&!c&&!o&&e>t||o&&r&&u&&!a&&!c||i&&r&&u||!n&&u||!l)return 1;if(!i&&!o&&!c&&e<t||c&&n&&l&&!i&&!o||a&&n&&l||!r&&l||!u)return-1}return 0}function fl(e,t,n,i){for(var l=-1,o=e.length,r=n.length,a=-1,u=t.length,c=on(o-r,0),d=E(u+c),s=!i;++a<u;)d[a]=t[a];for(;++l<r;)(s||l<o)&&(d[n[l]]=e[l]);for(;c--;)d[a++]=e[l++];return d}function pl(e,t,n,i){for(var l=-1,o=e.length,r=-1,a=n.length,u=-1,c=t.length,d=on(o-a,0),s=E(d+c),v=!i;++l<d;)s[l]=e[l];for(var f=l;++u<c;)s[f+u]=t[u];for(;++r<a;)(v||l<o)&&(s[f+n[r]]=e[l++]);return s}function ml(e,t){var n=-1,i=e.length;for(t||(t=E(i));++n<i;)t[n]=e[n];return t}function hl(e,t,n,i){var l=!n;n||(n={});for(var o=-1,r=t.length;++o<r;){var a=t[o],u=i?i(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),l?qn(n,a,u):Hn(n,a,u)}return n}function gl(e,t){return function(n,i){var l=Pr(n)?nt:Vn,o=t?t():{};return l(n,e,Kl(i,2),o)}}function El(e){return Mi(function(t,n){var i=-1,l=n.length,o=l>1?n[l-1]:void 0,r=l>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(l--,o):void 0,r&&oo(n[0],n[1],r)&&(o=l<3?void 0:o,l=1),t=fe(t);++i<l;){var a=n[i];a&&e(t,a,i,o)}return t})}function _l(e,t){return function(n,i){if(null==n)return n;if(!Rr(n))return e(n,i);for(var l=n.length,o=t?l:-1,r=fe(n);(t?o--:++o<l)&&!1!==i(r[o],o,r););return n}}function yl(e){return function(t,n,i){for(var l=-1,o=fe(t),r=i(t),a=r.length;a--;){var u=r[e?a:++l];if(!1===n(o[u],u,o))break}return t}}function bl(e){return function(t){var n=Mt(t=aa(t))?zt(t):void 0,i=n?n[0]:t.charAt(0),l=n?al(n,1).join(""):t.slice(1);return i[e]()+l}}function Sl(e){return function(t){return st(Wa(Ia(t).replace(Oe,"")),e,"")}}function Al(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),i=e.apply(n,t);return zr(i)?i:n}}function Cl(e){return function(t,n,i){var l=fe(t);if(!Rr(t)){var o=Kl(n,3);t=ya(t),n=function(e){return o(l[e],e,l)}}var r=e(t,n,i);return r>-1?l[o?t[r]:r]:void 0}}function Tl(e){return Hl(function(t){var i=t.length,l=i,o=Nn.prototype.thru;for(e&&t.reverse();l--;){var r=t[l];if("function"!=typeof r)throw new he(n);if(o&&!a&&"wrapper"==ql(r))var a=new Nn([],!0)}for(l=a?l:i;++l<i;){var u=ql(r=t[l]),c="wrapper"==u?Yl(r):void 0;a=c&&ao(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[ql(c[0])].apply(a,c[3]):1==r.length&&ao(r)?a[u]():a.thru(r)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&Pr(n))return a.plant(n).value();for(var l=0,o=i?t[l].apply(this,e):n;++l<i;)o=t[l].call(this,o);return o}})}function Dl(e,t,n,i,l,o,r,a,u,c){var d=128&t,s=1&t,v=2&t,f=24&t,p=512&t,m=v?void 0:Al(e);return function h(){for(var g=arguments.length,_=E(g),y=g;y--;)_[y]=arguments[y];if(f)var b=Gl(h),S=It(_,b);if(i&&(_=fl(_,i,l,f)),o&&(_=pl(_,o,r,f)),g-=S,f&&g<c){var A=kt(_,b);return Pl(e,t,Dl,h.placeholder,n,_,A,a,u,c-g)}var C=s?n:this,T=v?C[e]:e;return g=_.length,a?_=mo(_,a):p&&g>1&&_.reverse(),d&&u<g&&(_.length=u),this&&this!==ze&&this instanceof h&&(T=m||Al(T)),T.apply(C,_)}}function wl(e,t){return function(n,i){return function(e,t,n,i){return ai(e,function(e,l,o){t(i,n(e),l,o)}),i}(n,e,t(i),{})}}function Ol(e,t){return function(n,i){var l;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(l=n),void 0!==i){if(void 0===l)return i;"string"==typeof n||"string"==typeof i?(n=Xi(n),i=Xi(i)):(n=Ki(n),i=Ki(i)),l=e(n,i)}return l}}function xl(e){return Hl(function(t){return t=ct(t,wt(Kl())),Mi(function(n){var i=this;return e(t,function(e){return tt(e,i,n)})})})}function Nl(e,t){var n=(t=void 0===t?" ":Xi(t)).length;if(n<2)return n?Ri(t,e):t;var i=Ri(t,Jt(e/Ht(t)));return Mt(t)?al(zt(i),0,e).join(""):i.slice(0,e)}function Ll(e){return function(t,n,i){return i&&"number"!=typeof i&&oo(t,n,i)&&(n=i=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,i){for(var l=-1,o=on(Jt((t-e)/(n||1)),0),r=E(o);o--;)r[i?o:++l]=e,e+=n;return r}(t,n,i=void 0===i?t<n?1:-1:na(i),e)}}function Il(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=oa(t),n=oa(n)),e(t,n)}}function Pl(e,t,n,i,l,o,r,a,u,c){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var s=[e,t,l,d?o:void 0,d?r:void 0,d?void 0:o,d?void 0:r,a,u,c],v=n.apply(void 0,s);return ao(e)&&go(v,s),v.placeholder=i,yo(v,e,t)}function Fl(e){var t=ve[e];return function(e,n){if(e=oa(e),(n=null==n?0:rn(ia(n),292))&&tn(e)){var i=(aa(e)+"e").split("e");return+((i=(aa(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Rl=pn&&1/Wt(new pn([,-0]))[1]==1/0?function(e){return new pn(e)}:Ja;function Ml(e){return function(t){var n=eo(t);return n==v?Bt(t):n==h?jt(t):function(e,t){return ct(t,function(t){return[t,e[t]]})}(t,e(t))}}function Bl(e,t,l,o,r,a,u,c){var d=2&t;if(!d&&"function"!=typeof e)throw new he(n);var s=o?o.length:0;if(s||(t&=-97,o=r=void 0),u=void 0===u?u:on(ia(u),0),c=void 0===c?c:ia(c),s-=r?r.length:0,64&t){var v=o,f=r;o=r=void 0}var p=d?void 0:Yl(e),m=[e,t,l,o,r,v,f,a,u,c];if(p&&function(e,t){var n=e[1],l=t[1],o=n|l;if(!(o<131||128==l&&8==n||128==l&&256==n&&e[7].length<=t[8]||384==l&&t[7].length<=t[8]&&8==n))return e;1&l&&(e[2]=t[2],o|=1&n?0:4);var r=t[3];if(r){var a=e[3];e[3]=a?fl(a,r,t[4]):r,e[4]=a?kt(e[3],i):t[4]}(r=t[5])&&(e[5]=(a=e[5])?pl(a,r,t[6]):r,e[6]=a?kt(e[5],i):t[6]),(r=t[7])&&(e[7]=r),128&l&&(e[8]=null==e[8]?t[8]:rn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(m,p),e=m[0],t=m[1],l=m[2],o=m[3],r=m[4],!(c=m[9]=void 0===m[9]?d?0:e.length:on(m[9]-s,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?function(e,t,n){var i=Al(e);return function l(){for(var o=arguments.length,r=E(o),a=o,u=Gl(l);a--;)r[a]=arguments[a];var c=o<3&&r[0]!==u&&r[o-1]!==u?[]:kt(r,u);if((o-=c.length)<n)return Pl(e,t,Dl,l.placeholder,void 0,r,c,void 0,void 0,n-o);var d=this&&this!==ze&&this instanceof l?i:e;return tt(d,this,r)}}(e,t,c):32!=t&&33!=t||r.length?Dl.apply(void 0,m):function(e,t,n,i){var l=1&t,o=Al(e);return function t(){for(var r=-1,a=arguments.length,u=-1,c=i.length,d=E(c+a),s=this&&this!==ze&&this instanceof t?o:e;++u<c;)d[u]=i[u];for(;a--;)d[u++]=arguments[++r];return tt(s,l?n:this,d)}}(e,t,l,o);else var h=function(e,t,n){var i=1&t,l=Al(e);return function t(){var o=this&&this!==ze&&this instanceof t?l:e;return o.apply(i?n:this,arguments)}}(e,t,l);return yo((p?Wi:go)(h,m),e,t)}function Ul(e,t,n,i){return void 0===e||xr(e,Ee[n])&&!be.call(i,n)?t:e}function kl(e,t,n,i,l,o){return zr(e)&&zr(t)&&(o.set(t,e),Oi(e,t,void 0,kl,o),o.delete(t)),e}function Wl(e){return Gr(e)?void 0:e}function jl(e,t,n,i,l,o){var r=1&n,a=e.length,u=t.length;if(a!=u&&!(r&&u>a))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var s=-1,v=!0,f=2&n?new Rn:void 0;for(o.set(e,t),o.set(t,e);++s<a;){var p=e[s],m=t[s];if(i)var h=r?i(m,p,s,t,e,o):i(p,m,s,e,t,o);if(void 0!==h){if(h)continue;v=!1;break}if(f){if(!ft(t,function(e,t){if(!xt(f,t)&&(p===e||l(p,e,n,i,o)))return f.push(t)})){v=!1;break}}else if(p!==m&&!l(p,m,n,i,o)){v=!1;break}}return o.delete(e),o.delete(t),v}function Hl(e){return _o(fo(e,void 0,Fo),e+"")}function zl(e){return si(e,ya,Zl)}function Vl(e){return si(e,ba,Ql)}var Yl=gn?function(e){return gn.get(e)}:Ja;function ql(e){for(var t=e.name+"",n=En[t],i=be.call(En,t)?n.length:0;i--;){var l=n[i],o=l.func;if(null==o||o==e)return l.name}return t}function Gl(e){return(be.call(wn,"placeholder")?wn:e).placeholder}function Kl(){var e=wn.iteratee||Ga;return e=e===Ga?Si:e,arguments.length?e(arguments[0],arguments[1]):e}function Xl(e,t){var n,i,l=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?l["string"==typeof t?"string":"hash"]:l.map}function $l(e){for(var t=ya(e),n=t.length;n--;){var i=t[n],l=e[i];t[n]=[i,l,so(l)]}return t}function Jl(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return bi(n)?n:void 0}var Zl=Qt?function(e){return null==e?[]:(e=fe(e),rt(Qt(e),function(t){return Ye.call(e,t)}))}:lu,Ql=Qt?function(e){for(var t=[];e;)dt(t,Zl(e)),e=He(e);return t}:lu,eo=vi;function to(e,t,n){for(var i=-1,l=(t=ol(t,e)).length,o=!1;++i<l;){var r=Do(t[i]);if(!(o=null!=e&&n(e,r)))break;e=e[r]}return o||++i!=l?o:!!(l=null==e?0:e.length)&&Hr(l)&&lo(r,l)&&(Pr(e)||Ir(e))}function no(e){return"function"!=typeof e.constructor||co(e)?{}:On(He(e))}function io(e){return Pr(e)||Ir(e)||!!(Ke&&e&&e[Ke])}function lo(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&re.test(e))&&e>-1&&e%1==0&&e<t}function oo(e,t,n){if(!zr(n))return!1;var i=typeof t;return!!("number"==i?Rr(n)&&lo(t,n.length):"string"==i&&t in n)&&xr(n[t],e)}function ro(e,t){if(Pr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Jr(e))||H.test(e)||!j.test(e)||null!=t&&e in fe(t)}function ao(e){var t=ql(e),n=wn[t];if("function"!=typeof n||!(t in Ln.prototype))return!1;if(e===n)return!0;var i=Yl(n);return!!i&&e===i[0]}(sn&&eo(new sn(new ArrayBuffer(1)))!=S||vn&&eo(new vn)!=v||fn&&"[object Promise]"!=eo(fn.resolve())||pn&&eo(new pn)!=h||mn&&eo(new mn)!=y)&&(eo=function(e){var t=vi(e),n=t==p?e.constructor:void 0,i=n?wo(n):"";if(i)switch(i){case _n:return S;case yn:return v;case bn:return"[object Promise]";case Sn:return h;case An:return y}return t});var uo=_e?Wr:ou;function co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ee)}function so(e){return e==e&&!zr(e)}function vo(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in fe(n))}}function fo(e,t,n){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,l=-1,o=on(i.length-t,0),r=E(o);++l<o;)r[l]=i[t+l];l=-1;for(var a=E(t+1);++l<t;)a[l]=i[l];return a[t]=n(r),tt(e,this,a)}}function po(e,t){return t.length<2?e:di(e,zi(t,0,-1))}function mo(e,t){for(var n=e.length,i=rn(t.length,n),l=ml(e);i--;){var o=t[i];e[i]=lo(o,n)?l[o]:void 0}return e}function ho(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var go=bo(Wi),Eo=$t||function(e,t){return ze.setTimeout(e,t)},_o=bo(ji);function yo(e,t,n){var i=t+"";return _o(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return it(l,function(n){var i="_."+n[0];t&n[1]&&!at(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(X);return t?t[1].split($):[]}(i),n)))}function bo(e){var t=0,n=0;return function(){var i=an(),l=16-(i-n);if(n=i,l>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function So(e,t){var n=-1,i=e.length,l=i-1;for(t=void 0===t?i:t;++n<t;){var o=Fi(n,l),r=e[o];e[o]=e[n],e[n]=r}return e.length=t,e}var Ao,Co,To=(Ao=Ar(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(z,function(e,n,i,l){t.push(i?l.replace(Q,"$1"):n||e)}),t},function(e){return 500===Co.size&&Co.clear(),e}),Co=Ao.cache,Ao);function Do(e){if("string"==typeof e||Jr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function wo(e){if(null!=e){try{return ye.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oo(e){if(e instanceof Ln)return e.clone();var t=new Nn(e.__wrapped__,e.__chain__);return t.__actions__=ml(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var xo=Mi(function(e,t){return Mr(e)?Zn(e,li(t,1,Mr,!0)):[]}),No=Mi(function(e,t){var n=ko(t);return Mr(n)&&(n=void 0),Mr(e)?Zn(e,li(t,1,Mr,!0),Kl(n,2)):[]}),Lo=Mi(function(e,t){var n=ko(t);return Mr(n)&&(n=void 0),Mr(e)?Zn(e,li(t,1,Mr,!0),void 0,n):[]});function Io(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var l=null==n?0:ia(n);return l<0&&(l=on(i+l,0)),ht(e,Kl(t,3),l)}function Po(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var l=i-1;return void 0!==n&&(l=ia(n),l=n<0?on(i+l,0):rn(l,i-1)),ht(e,Kl(t,3),l,!0)}function Fo(e){return null!=e&&e.length?li(e,1):[]}function Ro(e){return e&&e.length?e[0]:void 0}var Mo=Mi(function(e){var t=ct(e,il);return t.length&&t[0]===e[0]?hi(t):[]}),Bo=Mi(function(e){var t=ko(e),n=ct(e,il);return t===ko(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?hi(n,Kl(t,2)):[]}),Uo=Mi(function(e){var t=ko(e),n=ct(e,il);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?hi(n,void 0,t):[]});function ko(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Wo=Mi(jo);function jo(e,t){return e&&e.length&&t&&t.length?Ii(e,t):e}var Ho=Hl(function(e,t){var n=null==e?0:e.length,i=Gn(e,t);return Pi(e,ct(t,function(e){return lo(e,n)?+e:e}).sort(vl)),i});function zo(e){return null==e?e:dn.call(e)}var Vo=Mi(function(e){return $i(li(e,1,Mr,!0))}),Yo=Mi(function(e){var t=ko(e);return Mr(t)&&(t=void 0),$i(li(e,1,Mr,!0),Kl(t,2))}),qo=Mi(function(e){var t=ko(e);return t="function"==typeof t?t:void 0,$i(li(e,1,Mr,!0),void 0,t)});function Go(e){if(!e||!e.length)return[];var t=0;return e=rt(e,function(e){if(Mr(e))return t=on(e.length,t),!0}),Tt(t,function(t){return ct(e,bt(t))})}function Ko(e,t){if(!e||!e.length)return[];var n=Go(e);return null==t?n:ct(n,function(e){return tt(t,void 0,e)})}var Xo=Mi(function(e,t){return Mr(e)?Zn(e,t):[]}),$o=Mi(function(e){return tl(rt(e,Mr))}),Jo=Mi(function(e){var t=ko(e);return Mr(t)&&(t=void 0),tl(rt(e,Mr),Kl(t,2))}),Zo=Mi(function(e){var t=ko(e);return t="function"==typeof t?t:void 0,tl(rt(e,Mr),void 0,t)}),Qo=Mi(Go),er=Mi(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Ko(e,n)});function tr(e){var t=wn(e);return t.__chain__=!0,t}function nr(e,t){return t(e)}var ir=Hl(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,l=function(t){return Gn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Ln&&lo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:nr,args:[l],thisArg:void 0}),new Nn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(l)}),lr=gl(function(e,t,n){be.call(e,n)?++e[n]:qn(e,n,1)}),or=Cl(Io),rr=Cl(Po);function ar(e,t){return(Pr(e)?it:Qn)(e,Kl(t,3))}function ur(e,t){return(Pr(e)?lt:ei)(e,Kl(t,3))}var cr=gl(function(e,t,n){be.call(e,n)?e[n].push(t):qn(e,n,[t])}),dr=Mi(function(e,t,n){var i=-1,l="function"==typeof t,o=Rr(e)?E(e.length):[];return Qn(e,function(e){o[++i]=l?tt(t,e,n):gi(e,t,n)}),o}),sr=gl(function(e,t,n){qn(e,n,t)});function vr(e,t){return(Pr(e)?ct:Ti)(e,Kl(t,3))}var fr=gl(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),pr=Mi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&oo(e,t[0],t[1])?t=[]:n>2&&oo(t[0],t[1],t[2])&&(t=[t[0]]),Ni(e,li(t,1),[])}),mr=Xt||function(){return ze.Date.now()};function hr(e,t,n){return t=n?void 0:t,Bl(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function gr(e,t){var i;if("function"!=typeof t)throw new he(n);return e=ia(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=void 0),i}}var Er=Mi(function(e,t,n){var i=1;if(n.length){var l=kt(n,Gl(Er));i|=32}return Bl(e,i,t,n,l)}),_r=Mi(function(e,t,n){var i=3;if(n.length){var l=kt(n,Gl(_r));i|=32}return Bl(t,i,e,n,l)});function yr(e,t,i){var l,o,r,a,u,c,d=0,s=!1,v=!1,f=!0;if("function"!=typeof e)throw new he(n);function p(t){var n=l,i=o;return l=o=void 0,d=t,a=e.apply(i,n)}function m(e){return d=e,u=Eo(g,t),s?p(e):a}function h(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-d>=r}function g(){var e=mr();if(h(e))return E(e);u=Eo(g,function(e){var n=t-(e-c);return v?rn(n,r-(e-d)):n}(e))}function E(e){return u=void 0,f&&l?p(e):(l=o=void 0,a)}function _(){var e=mr(),n=h(e);if(l=arguments,o=this,c=e,n){if(void 0===u)return m(c);if(v)return ul(u),u=Eo(g,t),p(c)}return void 0===u&&(u=Eo(g,t)),a}return t=oa(t)||0,zr(i)&&(s=!!i.leading,r=(v="maxWait"in i)?on(oa(i.maxWait)||0,t):r,f="trailing"in i?!!i.trailing:f),_.cancel=function(){void 0!==u&&ul(u),d=0,l=c=o=u=void 0},_.flush=function(){return void 0===u?a:E(mr())},_}var br=Mi(function(e,t){return Jn(e,1,t)}),Sr=Mi(function(e,t,n){return Jn(e,oa(t)||0,n)});function Ar(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new he(n);var i=function n(){var i=arguments,l=t?t.apply(this,i):i[0],o=n.cache;if(o.has(l))return o.get(l);var r=e.apply(this,i);return n.cache=o.set(l,r)||o,r};return i.cache=new(Ar.Cache||Fn),i}function Cr(e){if("function"!=typeof e)throw new he(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ar.Cache=Fn;var Tr=rl(function(e,t){var n=(t=1==t.length&&Pr(t[0])?ct(t[0],wt(Kl())):ct(li(t,1),wt(Kl()))).length;return Mi(function(i){for(var l=-1,o=rn(i.length,n);++l<o;)i[l]=t[l].call(this,i[l]);return tt(e,this,i)})}),Dr=Mi(function(e,t){return Bl(e,32,void 0,t,kt(t,Gl(Dr)))}),wr=Mi(function(e,t){return Bl(e,64,void 0,t,kt(t,Gl(wr)))}),Or=Hl(function(e,t){return Bl(e,256,void 0,void 0,void 0,t)});function xr(e,t){return e===t||e!=e&&t!=t}var Nr=Il(fi),Lr=Il(function(e,t){return e>=t}),Ir=Ei(function(){return arguments}())?Ei:function(e){return Vr(e)&&be.call(e,"callee")&&!Ye.call(e,"callee")},Pr=E.isArray,Fr=Xe?wt(Xe):function(e){return Vr(e)&&vi(e)==b};function Rr(e){return null!=e&&Hr(e.length)&&!Wr(e)}function Mr(e){return Vr(e)&&Rr(e)}var Br=en||ou,Ur=$e?wt($e):function(e){return Vr(e)&&vi(e)==u};function kr(e){if(!Vr(e))return!1;var t=vi(e);return t==c||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Gr(e)}function Wr(e){if(!zr(e))return!1;var t=vi(e);return t==d||t==s||"[object AsyncFunction]"==t||"[object Proxy]"==t}function jr(e){return"number"==typeof e&&e==ia(e)}function Hr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function zr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Vr(e){return null!=e&&"object"==typeof e}var Yr=Je?wt(Je):function(e){return Vr(e)&&eo(e)==v};function qr(e){return"number"==typeof e||Vr(e)&&vi(e)==f}function Gr(e){if(!Vr(e)||vi(e)!=p)return!1;var t=He(e);if(null===t)return!0;var n=be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ye.call(n)==Te}var Kr=Ze?wt(Ze):function(e){return Vr(e)&&vi(e)==m},Xr=Qe?wt(Qe):function(e){return Vr(e)&&eo(e)==h};function $r(e){return"string"==typeof e||!Pr(e)&&Vr(e)&&vi(e)==g}function Jr(e){return"symbol"==typeof e||Vr(e)&&vi(e)==_}var Zr=et?wt(et):function(e){return Vr(e)&&Hr(e.length)&&!!Me[vi(e)]},Qr=Il(Ci),ea=Il(function(e,t){return e<=t});function ta(e){if(!e)return[];if(Rr(e))return $r(e)?zt(e):ml(e);if(pt&&e[pt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[pt]());var t=eo(e);return(t==v?Bt:t==h?Wt:xa)(e)}function na(e){return e?(e=oa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ia(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function la(e){return e?Kn(ia(e),0,4294967295):0}function oa(e){if("number"==typeof e)return e;if(Jr(e))return NaN;if(zr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Dt(e);var n=ie.test(e);return n||oe.test(e)?We(e.slice(2),n?2:8):ne.test(e)?NaN:+e}function ra(e){return hl(e,ba(e))}function aa(e){return null==e?"":Xi(e)}var ua=El(function(e,t){if(co(t)||Rr(t))hl(t,ya(t),e);else for(var n in t)be.call(t,n)&&Hn(e,n,t[n])}),ca=El(function(e,t){hl(t,ba(t),e)}),da=El(function(e,t,n,i){hl(t,ba(t),e,i)}),sa=El(function(e,t,n,i){hl(t,ya(t),e,i)}),va=Hl(Gn),fa=Mi(function(e,t){e=fe(e);var n=-1,i=t.length,l=i>2?t[2]:void 0;for(l&&oo(t[0],t[1],l)&&(i=1);++n<i;)for(var o=t[n],r=ba(o),a=-1,u=r.length;++a<u;){var c=r[a],d=e[c];(void 0===d||xr(d,Ee[c])&&!be.call(e,c))&&(e[c]=o[c])}return e}),pa=Mi(function(e){return e.push(void 0,kl),tt(Aa,void 0,e)});function ma(e,t,n){var i=null==e?void 0:di(e,t);return void 0===i?n:i}function ha(e,t){return null!=e&&to(e,t,mi)}var ga=wl(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n},za(qa)),Ea=wl(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),be.call(e,t)?e[t].push(n):e[t]=[n]},Kl),_a=Mi(gi);function ya(e){return Rr(e)?Bn(e):Ai(e)}function ba(e){return Rr(e)?Bn(e,!0):function(e){if(!zr(e))return function(e){var t=[];if(null!=e)for(var n in fe(e))t.push(n);return t}(e);var t=co(e),n=[];for(var i in e)("constructor"!=i||!t&&be.call(e,i))&&n.push(i);return n}(e)}var Sa=El(function(e,t,n){Oi(e,t,n)}),Aa=El(function(e,t,n,i){Oi(e,t,n,i)}),Ca=Hl(function(e,t){var n={};if(null==e)return n;var i=!1;t=ct(t,function(t){return t=ol(t,e),i||(i=t.length>1),t}),hl(e,Vl(e),n),i&&(n=Xn(n,7,Wl));for(var l=t.length;l--;)Ji(n,t[l]);return n}),Ta=Hl(function(e,t){return null==e?{}:function(e,t){return Li(e,t,function(t,n){return ha(e,n)})}(e,t)});function Da(e,t){if(null==e)return{};var n=ct(Vl(e),function(e){return[e]});return t=Kl(t),Li(e,n,function(e,n){return t(e,n[0])})}var wa=Ml(ya),Oa=Ml(ba);function xa(e){return null==e?[]:Ot(e,ya(e))}var Na=Sl(function(e,t,n){return t=t.toLowerCase(),e+(n?La(t):t)});function La(e){return ka(aa(e).toLowerCase())}function Ia(e){return(e=aa(e))&&e.replace(ae,Pt).replace(xe,"")}var Pa=Sl(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Fa=Sl(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ra=bl("toLowerCase"),Ma=Sl(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ba=Sl(function(e,t,n){return e+(n?" ":"")+ka(t)}),Ua=Sl(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ka=bl("toUpperCase");function Wa(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return Pe.test(e)}(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.match(J)||[]}(e):e.match(t)||[]}var ja=Mi(function(e,t){try{return tt(e,void 0,t)}catch(e){return kr(e)?e:new de(e)}}),Ha=Hl(function(e,t){return it(t,function(t){t=Do(t),qn(e,t,Er(e[t],e))}),e});function za(e){return function(){return e}}var Va=Tl(),Ya=Tl(!0);function qa(e){return e}function Ga(e){return Si("function"==typeof e?e:Xn(e,1))}var Ka=Mi(function(e,t){return function(n){return gi(n,e,t)}}),Xa=Mi(function(e,t){return function(n){return gi(e,n,t)}});function $a(e,t,n){var i=ya(t),l=ci(t,i);null!=n||zr(t)&&(l.length||!i.length)||(n=t,t=e,e=this,l=ci(t,ya(t)));var o=!(zr(n)&&"chain"in n&&!n.chain),r=Wr(e);return it(l,function(n){var i=t[n];e[n]=i,r&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),l=n.__actions__=ml(this.__actions__);return l.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,dt([this.value()],arguments))})}),e}function Ja(){}var Za=xl(ct),Qa=xl(ot),eu=xl(ft);function tu(e){return ro(e)?bt(Do(e)):function(e){return function(t){return di(t,e)}}(e)}var nu=Ll(),iu=Ll(!0);function lu(){return[]}function ou(){return!1}var ru,au=Ol(function(e,t){return e+t},0),uu=Fl("ceil"),cu=Ol(function(e,t){return e/t},1),du=Fl("floor"),su=Ol(function(e,t){return e*t},1),vu=Fl("round"),fu=Ol(function(e,t){return e-t},0);return wn.after=function(e,t){if("function"!=typeof t)throw new he(n);return e=ia(e),function(){if(--e<1)return t.apply(this,arguments)}},wn.ary=hr,wn.assign=ua,wn.assignIn=ca,wn.assignInWith=da,wn.assignWith=sa,wn.at=va,wn.before=gr,wn.bind=Er,wn.bindAll=Ha,wn.bindKey=_r,wn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Pr(e)?e:[e]},wn.chain=tr,wn.chunk=function(e,t,n){t=(n?oo(e,t,n):void 0===t)?1:on(ia(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var l=0,o=0,r=E(Jt(i/t));l<i;)r[o++]=zi(e,l,l+=t);return r},wn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,l=[];++t<n;){var o=e[t];o&&(l[i++]=o)}return l},wn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=E(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return dt(Pr(n)?ml(n):[n],li(t,1))},wn.cond=function(e){var t=null==e?0:e.length,i=Kl();return e=t?ct(e,function(e){if("function"!=typeof e[1])throw new he(n);return[i(e[0]),e[1]]}):[],Mi(function(n){for(var i=-1;++i<t;){var l=e[i];if(tt(l[0],this,n))return tt(l[1],this,n)}})},wn.conforms=function(e){return function(e){var t=ya(e);return function(n){return $n(n,e,t)}}(Xn(e,1))},wn.constant=za,wn.countBy=lr,wn.create=function(e,t){var n=On(e);return null==t?n:Yn(n,t)},wn.curry=function e(t,n,i){var l=Bl(t,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return l.placeholder=e.placeholder,l},wn.curryRight=function e(t,n,i){var l=Bl(t,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return l.placeholder=e.placeholder,l},wn.debounce=yr,wn.defaults=fa,wn.defaultsDeep=pa,wn.defer=br,wn.delay=Sr,wn.difference=xo,wn.differenceBy=No,wn.differenceWith=Lo,wn.drop=function(e,t,n){var i=null==e?0:e.length;return i?zi(e,(t=n||void 0===t?1:ia(t))<0?0:t,i):[]},wn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?zi(e,0,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t):[]},wn.dropRightWhile=function(e,t){return e&&e.length?Qi(e,Kl(t,3),!0,!0):[]},wn.dropWhile=function(e,t){return e&&e.length?Qi(e,Kl(t,3),!0):[]},wn.fill=function(e,t,n,i){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&oo(e,t,n)&&(n=0,i=l),function(e,t,n,i){var l=e.length;for((n=ia(n))<0&&(n=-n>l?0:l+n),(i=void 0===i||i>l?l:ia(i))<0&&(i+=l),i=n>i?0:la(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},wn.filter=function(e,t){return(Pr(e)?rt:ii)(e,Kl(t,3))},wn.flatMap=function(e,t){return li(vr(e,t),1)},wn.flatMapDeep=function(e,t){return li(vr(e,t),1/0)},wn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ia(n),li(vr(e,t),n)},wn.flatten=Fo,wn.flattenDeep=function(e){return null!=e&&e.length?li(e,1/0):[]},wn.flattenDepth=function(e,t){return null!=e&&e.length?li(e,t=void 0===t?1:ia(t)):[]},wn.flip=function(e){return Bl(e,512)},wn.flow=Va,wn.flowRight=Ya,wn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var l=e[t];i[l[0]]=l[1]}return i},wn.functions=function(e){return null==e?[]:ci(e,ya(e))},wn.functionsIn=function(e){return null==e?[]:ci(e,ba(e))},wn.groupBy=cr,wn.initial=function(e){return null!=e&&e.length?zi(e,0,-1):[]},wn.intersection=Mo,wn.intersectionBy=Bo,wn.intersectionWith=Uo,wn.invert=ga,wn.invertBy=Ea,wn.invokeMap=dr,wn.iteratee=Ga,wn.keyBy=sr,wn.keys=ya,wn.keysIn=ba,wn.map=vr,wn.mapKeys=function(e,t){var n={};return t=Kl(t,3),ai(e,function(e,i,l){qn(n,t(e,i,l),e)}),n},wn.mapValues=function(e,t){var n={};return t=Kl(t,3),ai(e,function(e,i,l){qn(n,i,t(e,i,l))}),n},wn.matches=function(e){return Di(Xn(e,1))},wn.matchesProperty=function(e,t){return wi(e,Xn(t,1))},wn.memoize=Ar,wn.merge=Sa,wn.mergeWith=Aa,wn.method=Ka,wn.methodOf=Xa,wn.mixin=$a,wn.negate=Cr,wn.nthArg=function(e){return e=ia(e),Mi(function(t){return xi(t,e)})},wn.omit=Ca,wn.omitBy=function(e,t){return Da(e,Cr(Kl(t)))},wn.once=function(e){return gr(2,e)},wn.orderBy=function(e,t,n,i){return null==e?[]:(Pr(t)||(t=null==t?[]:[t]),Pr(n=i?void 0:n)||(n=null==n?[]:[n]),Ni(e,t,n))},wn.over=Za,wn.overArgs=Tr,wn.overEvery=Qa,wn.overSome=eu,wn.partial=Dr,wn.partialRight=wr,wn.partition=fr,wn.pick=Ta,wn.pickBy=Da,wn.property=tu,wn.propertyOf=function(e){return function(t){return null==e?void 0:di(e,t)}},wn.pull=Wo,wn.pullAll=jo,wn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ii(e,t,Kl(n,2)):e},wn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ii(e,t,void 0,n):e},wn.pullAt=Ho,wn.range=nu,wn.rangeRight=iu,wn.rearg=Or,wn.reject=function(e,t){return(Pr(e)?rt:ii)(e,Cr(Kl(t,3)))},wn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,l=[],o=e.length;for(t=Kl(t,3);++i<o;){var r=e[i];t(r,i,e)&&(n.push(r),l.push(i))}return Pi(e,l),n},wn.rest=function(e,t){if("function"!=typeof e)throw new he(n);return Mi(e,t=void 0===t?t:ia(t))},wn.reverse=zo,wn.sampleSize=function(e,t,n){return t=(n?oo(e,t,n):void 0===t)?1:ia(t),(Pr(e)?kn:Ui)(e,t)},wn.set=function(e,t,n){return null==e?e:ki(e,t,n)},wn.setWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:ki(e,t,n,i)},wn.shuffle=function(e){return(Pr(e)?Wn:Hi)(e)},wn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&oo(e,t,n)?(t=0,n=i):(t=null==t?0:ia(t),n=void 0===n?i:ia(n)),zi(e,t,n)):[]},wn.sortBy=pr,wn.sortedUniq=function(e){return e&&e.length?Gi(e):[]},wn.sortedUniqBy=function(e,t){return e&&e.length?Gi(e,Kl(t,2)):[]},wn.split=function(e,t,n){return n&&"number"!=typeof n&&oo(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!Kr(t))&&!(t=Xi(t))&&Mt(e)?al(zt(e),0,n):e.split(t,n):[]},wn.spread=function(e,t){if("function"!=typeof e)throw new he(n);return t=null==t?0:on(ia(t),0),Mi(function(n){var i=n[t],l=al(n,0,t);return i&&dt(l,i),tt(e,this,l)})},wn.tail=function(e){var t=null==e?0:e.length;return t?zi(e,1,t):[]},wn.take=function(e,t,n){return e&&e.length?zi(e,0,(t=n||void 0===t?1:ia(t))<0?0:t):[]},wn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?zi(e,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t,i):[]},wn.takeRightWhile=function(e,t){return e&&e.length?Qi(e,Kl(t,3),!1,!0):[]},wn.takeWhile=function(e,t){return e&&e.length?Qi(e,Kl(t,3)):[]},wn.tap=function(e,t){return t(e),e},wn.throttle=function(e,t,i){var l=!0,o=!0;if("function"!=typeof e)throw new he(n);return zr(i)&&(l="leading"in i?!!i.leading:l,o="trailing"in i?!!i.trailing:o),yr(e,t,{leading:l,maxWait:t,trailing:o})},wn.thru=nr,wn.toArray=ta,wn.toPairs=wa,wn.toPairsIn=Oa,wn.toPath=function(e){return Pr(e)?ct(e,Do):Jr(e)?[e]:ml(To(aa(e)))},wn.toPlainObject=ra,wn.transform=function(e,t,n){var i=Pr(e),l=i||Br(e)||Zr(e);if(t=Kl(t,4),null==n){var o=e&&e.constructor;n=l?i?new o:[]:zr(e)&&Wr(o)?On(He(e)):{}}return(l?it:ai)(e,function(e,i,l){return t(n,e,i,l)}),n},wn.unary=function(e){return hr(e,1)},wn.union=Vo,wn.unionBy=Yo,wn.unionWith=qo,wn.uniq=function(e){return e&&e.length?$i(e):[]},wn.uniqBy=function(e,t){return e&&e.length?$i(e,Kl(t,2)):[]},wn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?$i(e,void 0,t):[]},wn.unset=function(e,t){return null==e||Ji(e,t)},wn.unzip=Go,wn.unzipWith=Ko,wn.update=function(e,t,n){return null==e?e:Zi(e,t,ll(n))},wn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:Zi(e,t,ll(n),i)},wn.values=xa,wn.valuesIn=function(e){return null==e?[]:Ot(e,ba(e))},wn.without=Xo,wn.words=Wa,wn.wrap=function(e,t){return Dr(ll(t),e)},wn.xor=$o,wn.xorBy=Jo,wn.xorWith=Zo,wn.zip=Qo,wn.zipObject=function(e,t){return nl(e||[],t||[],Hn)},wn.zipObjectDeep=function(e,t){return nl(e||[],t||[],ki)},wn.zipWith=er,wn.entries=wa,wn.entriesIn=Oa,wn.extend=ca,wn.extendWith=da,$a(wn,wn),wn.add=au,wn.attempt=ja,wn.camelCase=Na,wn.capitalize=La,wn.ceil=uu,wn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==t&&(t=(t=oa(t))==t?t:0),Kn(oa(e),t,n)},wn.clone=function(e){return Xn(e,4)},wn.cloneDeep=function(e){return Xn(e,5)},wn.cloneDeepWith=function(e,t){return Xn(e,5,t="function"==typeof t?t:void 0)},wn.cloneWith=function(e,t){return Xn(e,4,t="function"==typeof t?t:void 0)},wn.conformsTo=function(e,t){return null==t||$n(e,t,ya(t))},wn.deburr=Ia,wn.defaultTo=function(e,t){return null==e||e!=e?t:e},wn.divide=cu,wn.endsWith=function(e,t,n){e=aa(e),t=Xi(t);var i=e.length,l=n=void 0===n?i:Kn(ia(n),0,i);return(n-=t.length)>=0&&e.slice(n,l)==t},wn.eq=xr,wn.escape=function(e){return(e=aa(e))&&B.test(e)?e.replace(R,Ft):e},wn.escapeRegExp=function(e){return(e=aa(e))&&Y.test(e)?e.replace(V,"\\$&"):e},wn.every=function(e,t,n){var i=Pr(e)?ot:ti;return n&&oo(e,t,n)&&(t=void 0),i(e,Kl(t,3))},wn.find=or,wn.findIndex=Io,wn.findKey=function(e,t){return mt(e,Kl(t,3),ai)},wn.findLast=rr,wn.findLastIndex=Po,wn.findLastKey=function(e,t){return mt(e,Kl(t,3),ui)},wn.floor=du,wn.forEach=ar,wn.forEachRight=ur,wn.forIn=function(e,t){return null==e?e:oi(e,Kl(t,3),ba)},wn.forInRight=function(e,t){return null==e?e:ri(e,Kl(t,3),ba)},wn.forOwn=function(e,t){return e&&ai(e,Kl(t,3))},wn.forOwnRight=function(e,t){return e&&ui(e,Kl(t,3))},wn.get=ma,wn.gt=Nr,wn.gte=Lr,wn.has=function(e,t){return null!=e&&to(e,t,pi)},wn.hasIn=ha,wn.head=Ro,wn.identity=qa,wn.includes=function(e,t,n,i){e=Rr(e)?e:xa(e),n=n&&!i?ia(n):0;var l=e.length;return n<0&&(n=on(l+n,0)),$r(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&gt(e,t,n)>-1},wn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var l=null==n?0:ia(n);return l<0&&(l=on(i+l,0)),gt(e,t,l)},wn.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=rn(t,n)&&e<on(t,n)}(e=oa(e),t,n)},wn.invoke=_a,wn.isArguments=Ir,wn.isArray=Pr,wn.isArrayBuffer=Fr,wn.isArrayLike=Rr,wn.isArrayLikeObject=Mr,wn.isBoolean=function(e){return!0===e||!1===e||Vr(e)&&vi(e)==a},wn.isBuffer=Br,wn.isDate=Ur,wn.isElement=function(e){return Vr(e)&&1===e.nodeType&&!Gr(e)},wn.isEmpty=function(e){if(null==e)return!0;if(Rr(e)&&(Pr(e)||"string"==typeof e||"function"==typeof e.splice||Br(e)||Zr(e)||Ir(e)))return!e.length;var t=eo(e);if(t==v||t==h)return!e.size;if(co(e))return!Ai(e).length;for(var n in e)if(be.call(e,n))return!1;return!0},wn.isEqual=function(e,t){return _i(e,t)},wn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?_i(e,t,void 0,n):!!i},wn.isError=kr,wn.isFinite=function(e){return"number"==typeof e&&tn(e)},wn.isFunction=Wr,wn.isInteger=jr,wn.isLength=Hr,wn.isMap=Yr,wn.isMatch=function(e,t){return e===t||yi(e,t,$l(t))},wn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,yi(e,t,$l(t),n)},wn.isNaN=function(e){return qr(e)&&e!=+e},wn.isNative=function(e){if(uo(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bi(e)},wn.isNil=function(e){return null==e},wn.isNull=function(e){return null===e},wn.isNumber=qr,wn.isObject=zr,wn.isObjectLike=Vr,wn.isPlainObject=Gr,wn.isRegExp=Kr,wn.isSafeInteger=function(e){return jr(e)&&e>=-9007199254740991&&e<=9007199254740991},wn.isSet=Xr,wn.isString=$r,wn.isSymbol=Jr,wn.isTypedArray=Zr,wn.isUndefined=function(e){return void 0===e},wn.isWeakMap=function(e){return Vr(e)&&eo(e)==y},wn.isWeakSet=function(e){return Vr(e)&&"[object WeakSet]"==vi(e)},wn.join=function(e,t){return null==e?"":nn.call(e,t)},wn.kebabCase=Pa,wn.last=ko,wn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var l=i;return void 0!==n&&(l=(l=ia(n))<0?on(i+l,0):rn(l,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,l):ht(e,_t,l,!0)},wn.lowerCase=Fa,wn.lowerFirst=Ra,wn.lt=Qr,wn.lte=ea,wn.max=function(e){return e&&e.length?ni(e,qa,fi):void 0},wn.maxBy=function(e,t){return e&&e.length?ni(e,Kl(t,2),fi):void 0},wn.mean=function(e){return yt(e,qa)},wn.meanBy=function(e,t){return yt(e,Kl(t,2))},wn.min=function(e){return e&&e.length?ni(e,qa,Ci):void 0},wn.minBy=function(e,t){return e&&e.length?ni(e,Kl(t,2),Ci):void 0},wn.stubArray=lu,wn.stubFalse=ou,wn.stubObject=function(){return{}},wn.stubString=function(){return""},wn.stubTrue=function(){return!0},wn.multiply=su,wn.nth=function(e,t){return e&&e.length?xi(e,ia(t)):void 0},wn.noConflict=function(){return ze._===this&&(ze._=De),this},wn.noop=Ja,wn.now=mr,wn.pad=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;if(!t||i>=t)return e;var l=(t-i)/2;return Nl(Zt(l),n)+e+Nl(Jt(l),n)},wn.padEnd=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;return t&&i<t?e+Nl(t-i,n):e},wn.padStart=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;return t&&i<t?Nl(t-i,n)+e:e},wn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(aa(e).replace(q,""),t||0)},wn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&oo(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var l=cn();return rn(e+l*(t-e+ke("1e-"+((l+"").length-1))),t)}return Fi(e,t)},wn.reduce=function(e,t,n){var i=Pr(e)?st:At,l=arguments.length<3;return i(e,Kl(t,4),n,l,Qn)},wn.reduceRight=function(e,t,n){var i=Pr(e)?vt:At,l=arguments.length<3;return i(e,Kl(t,4),n,l,ei)},wn.repeat=function(e,t,n){return t=(n?oo(e,t,n):void 0===t)?1:ia(t),Ri(aa(e),t)},wn.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},wn.result=function(e,t,n){var i=-1,l=(t=ol(t,e)).length;for(l||(l=1,e=void 0);++i<l;){var o=null==e?void 0:e[Do(t[i])];void 0===o&&(i=l,o=n),e=Wr(o)?o.call(e):o}return e},wn.round=vu,wn.runInContext=e,wn.sample=function(e){return(Pr(e)?Un:Bi)(e)},wn.size=function(e){if(null==e)return 0;if(Rr(e))return $r(e)?Ht(e):e.length;var t=eo(e);return t==v||t==h?e.size:Ai(e).length},wn.snakeCase=Ma,wn.some=function(e,t,n){var i=Pr(e)?ft:Vi;return n&&oo(e,t,n)&&(t=void 0),i(e,Kl(t,3))},wn.sortedIndex=function(e,t){return Yi(e,t)},wn.sortedIndexBy=function(e,t,n){return qi(e,t,Kl(n,2))},wn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Yi(e,t);if(i<n&&xr(e[i],t))return i}return-1},wn.sortedLastIndex=function(e,t){return Yi(e,t,!0)},wn.sortedLastIndexBy=function(e,t,n){return qi(e,t,Kl(n,2),!0)},wn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Yi(e,t,!0)-1;if(xr(e[n],t))return n}return-1},wn.startCase=Ba,wn.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:Kn(ia(n),0,e.length),t=Xi(t),e.slice(n,n+t.length)==t},wn.subtract=fu,wn.sum=function(e){return e&&e.length?Ct(e,qa):0},wn.sumBy=function(e,t){return e&&e.length?Ct(e,Kl(t,2)):0},wn.template=function(e,t,n){var i=wn.templateSettings;n&&oo(e,t,n)&&(t=void 0),e=aa(e),t=da({},t,i,Ul);var l,o,r=da({},t.imports,i.imports,Ul),a=ya(r),u=Ot(r,a),c=0,d=t.interpolate||ue,s="__p += '",v=pe((t.escape||ue).source+"|"+d.source+"|"+(d===W?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),f="//# sourceURL="+(be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Re+"]")+"\n";e.replace(v,function(t,n,i,r,a,u){return i||(i=r),s+=e.slice(c,u).replace(ce,Rt),n&&(l=!0,s+="' +\n__e("+n+") +\n'"),a&&(o=!0,s+="';\n"+a+";\n__p += '"),i&&(s+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),s+="';\n";var p=be.call(t,"variable")&&t.variable;if(p){if(Z.test(p))throw new de("Invalid `variable` option passed into `_.template`")}else s="with (obj) {\n"+s+"\n}\n";s=(o?s.replace(L,""):s).replace(I,"$1").replace(P,"$1;"),s="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var m=ja(function(){return se(a,f+"return "+s).apply(void 0,u)});if(m.source=s,kr(m))throw m;return m},wn.times=function(e,t){if((e=ia(e))<1||e>9007199254740991)return[];var n=4294967295,i=rn(e,4294967295);e-=4294967295;for(var l=Tt(i,t=Kl(t));++n<e;)t(n);return l},wn.toFinite=na,wn.toInteger=ia,wn.toLength=la,wn.toLower=function(e){return aa(e).toLowerCase()},wn.toNumber=oa,wn.toSafeInteger=function(e){return e?Kn(ia(e),-9007199254740991,9007199254740991):0===e?e:0},wn.toString=aa,wn.toUpper=function(e){return aa(e).toUpperCase()},wn.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return Dt(e);if(!e||!(t=Xi(t)))return e;var i=zt(e),l=zt(t);return al(i,Nt(i,l),Lt(i,l)+1).join("")},wn.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.slice(0,Vt(e)+1);if(!e||!(t=Xi(t)))return e;var i=zt(e);return al(i,0,Lt(i,zt(t))+1).join("")},wn.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(q,"");if(!e||!(t=Xi(t)))return e;var i=zt(e);return al(i,Nt(i,zt(t))).join("")},wn.truncate=function(e,t){var n=30,i="...";if(zr(t)){var l="separator"in t?t.separator:l;n="length"in t?ia(t.length):n,i="omission"in t?Xi(t.omission):i}var o=(e=aa(e)).length;if(Mt(e)){var r=zt(e);o=r.length}if(n>=o)return e;var a=n-Ht(i);if(a<1)return i;var u=r?al(r,0,a).join(""):e.slice(0,a);if(void 0===l)return u+i;if(r&&(a+=u.length-a),Kr(l)){if(e.slice(a).search(l)){var c,d=u;for(l.global||(l=pe(l.source,aa(te.exec(l))+"g")),l.lastIndex=0;c=l.exec(d);)var s=c.index;u=u.slice(0,void 0===s?a:s)}}else if(e.indexOf(Xi(l),a)!=a){var v=u.lastIndexOf(l);v>-1&&(u=u.slice(0,v))}return u+i},wn.unescape=function(e){return(e=aa(e))&&M.test(e)?e.replace(F,Yt):e},wn.uniqueId=function(e){var t=++Se;return aa(e)+t},wn.upperCase=Ua,wn.upperFirst=ka,wn.each=ar,wn.eachRight=ur,wn.first=Ro,$a(wn,(ru={},ai(wn,function(e,t){be.call(wn.prototype,t)||(ru[t]=e)}),ru),{chain:!1}),wn.VERSION="4.17.21",it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){wn[e].placeholder=wn}),it(["drop","take"],function(e,t){Ln.prototype[e]=function(n){n=void 0===n?1:on(ia(n),0);var i=this.__filtered__&&!t?new Ln(this):this.clone();return i.__filtered__?i.__takeCount__=rn(n,i.__takeCount__):i.__views__.push({size:rn(n,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},Ln.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),it(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;Ln.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Kl(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),it(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ln.prototype[e]=function(){return this[n](1).value()[0]}}),it(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ln.prototype[e]=function(){return this.__filtered__?new Ln(this):this[n](1)}}),Ln.prototype.compact=function(){return this.filter(qa)},Ln.prototype.find=function(e){return this.filter(e).head()},Ln.prototype.findLast=function(e){return this.reverse().find(e)},Ln.prototype.invokeMap=Mi(function(e,t){return"function"==typeof e?new Ln(this):this.map(function(n){return gi(n,e,t)})}),Ln.prototype.reject=function(e){return this.filter(Cr(Kl(e)))},Ln.prototype.slice=function(e,t){e=ia(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ln(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ia(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ln.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},ai(Ln.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),l=wn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);l&&(wn.prototype[t]=function(){var t=this.__wrapped__,r=i?[1]:arguments,a=t instanceof Ln,u=r[0],c=a||Pr(t),d=function(e){var t=l.apply(wn,dt([e],r));return i&&s?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(a=c=!1);var s=this.__chain__,v=!!this.__actions__.length,f=o&&!s,p=a&&!v;if(!o&&c){t=p?t:new Ln(this);var m=e.apply(t,r);return m.__actions__.push({func:nr,args:[d],thisArg:void 0}),new Nn(m,s)}return f&&p?e.apply(this,r):(m=this.thru(d),f?i?m.value()[0]:m.value():m)})}),it(["pop","push","shift","sort","splice","unshift"],function(e){var t=ge[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);wn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(Pr(l)?l:[],e)}return this[n](function(n){return t.apply(Pr(n)?n:[],e)})}}),ai(Ln.prototype,function(e,t){var n=wn[t];if(n){var i=n.name+"";be.call(En,i)||(En[i]=[]),En[i].push({name:t,func:n})}}),En[Dl(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var e=new Ln(this.__wrapped__);return e.__actions__=ml(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ml(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ml(this.__views__),e},Ln.prototype.reverse=function(){if(this.__filtered__){var e=new Ln(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ln.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Pr(e),i=t<0,l=n?e.length:0,o=function(e,t,n){for(var i=-1,l=n.length;++i<l;){var o=n[i],r=o.size;switch(o.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=rn(t,e+r);break;case"takeRight":e=on(e,t-r)}}return{start:e,end:t}}(0,l,this.__views__),r=o.start,a=o.end,u=a-r,c=i?a:r-1,d=this.__iteratees__,s=d.length,v=0,f=rn(u,this.__takeCount__);if(!n||!i&&l==u&&f==u)return el(e,this.__actions__);var p=[];e:for(;u--&&v<f;){for(var m=-1,h=e[c+=t];++m<s;){var g=d[m],E=g.type,_=(0,g.iteratee)(h);if(2==E)h=_;else if(!_){if(1==E)continue e;break e}}p[v++]=h}return p},wn.prototype.at=ir,wn.prototype.chain=function(){return tr(this)},wn.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},wn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},wn.prototype.plant=function(e){for(var t,n=this;n instanceof xn;){var i=Oo(n);i.__index__=0,i.__values__=void 0,t?l.__wrapped__=i:t=i;var l=i;n=n.__wrapped__}return l.__wrapped__=e,t},wn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ln){var t=e;return this.__actions__.length&&(t=new Ln(this)),(t=t.reverse()).__actions__.push({func:nr,args:[zo],thisArg:void 0}),new Nn(t,this.__chain__)}return this.thru(zo)},wn.prototype.toJSON=wn.prototype.valueOf=wn.prototype.value=function(){return el(this.__wrapped__,this.__actions__)},wn.prototype.first=wn.prototype.head,pt&&(wn.prototype[pt]=function(){return this}),wn}();Ye?((Ye.exports=qt)._=qt,Ve._=qt):ze._=qt}).call(E)});var Gt=function(e){var t,l,o=e.t,r=e.formData,a=e.applicationData,u=e.docs,c=e.bpaActionsDetails,d=(null==a?void 0:a.status)||"",s=(null==c||null===(t=c.data)||void 0===t?void 0:t.nextActions)||[],v=Digit.ULBService.getStateId(),f=n.useState((null==r||null===(l=r.documents)||void 0===l?void 0:l.documents)||[]),p=f[0],m=f[1],h=n.useState(null),g=h[0],E=h[1],_=n.useState([]),y=_[0],b=_[1],S=n.useState(!0)[1],A=n.useState(!1),C=A[0],T=A[1],D=n.useState(!1),w=D[0],O=D[1],x=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"]),N=x.isLoading,L=x.data,I=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]),P=I.data;return n.useEffect(function(){var e,t,n,i,l,o,r=[];null!=L&&null!==(e=L.BPA)&&void 0!==e&&e.DocTypeMapping&&(r=null==L||null===(l=L.BPA)||void 0===l||null===(o=l.DocTypeMapping)||void 0===o?void 0:o.filter(function(e){var t,n;return e.WFState==(null==a?void 0:a.status)?null==a?void 0:a.status:e.RiskType==(null==a?void 0:a.riskType)&&e.ServiceType==(null==a||null===(t=a.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==a||null===(n=a.additionalDetails)||void 0===n?void 0:n.applicationType)}));var c=[];null===(t=r)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.docTypes)||void 0===i||i.forEach(function(e){var t,n,i,l,o=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==P||null===(t=P["common-masters"])||void 0===t||null===(n=t.DocumentType)||void 0===n||n.forEach(function(t){var n=t.code.slice(0,o.length);o===n&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(i=u[0])||void 0===i||null===(l=i.values)||void 0===l||l.map(function(t){var n,i;o===(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==t||null===(i=t.documentType)||void 0===i?void 0:i.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),c.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)),b(c)},[!N,!I.isLoading]),n.useEffect(function(){var e=0;y.map(function(t){var n=!1;p.map(function(e){t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(n=!0)}),!n&&t.required&&(e+=1)}),S("0"!=e&&0!=e||!(p.length>0))},[p,C]),n.useEffect(function(){O("DOC_VERIFICATION_INPROGRESS"===d&&(null==s?void 0:s.length)>0)},[a,c]),i.createElement("div",null,null==y?void 0:y.map(function(e,t){return i.createElement("div",null,i.createElement(Kt,{key:t,index:t,document:e,t:o,error:g,setError:E,setDocuments:m,documents:p,setCheckRequiredFields:T,applicationStatus:d,actions:s,bpaTaxDocuments:y,checkEnablingDocs:w}))}))};function Kt(e){var l,o,r=e.t,a=e.document,c=e.setDocuments,d=e.documents,s=e.index,v=e.bpaTaxDocuments,f=e.checkEnablingDocs,p=null==d?void 0:d.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==a?void 0:a.code)})[0],m=Digit.ULBService.getStateId(),h=n.useState(p?u({},p,{active:!0,code:null==p?void 0:p.documentType,i18nKey:null==p?void 0:p.documentType}):1===(null==a||null===(l=a.dropdownData)||void 0===l?void 0:l.length)?null==a?void 0:a.dropdownData[0]:{}),g=h[0],E=h[1],_=n.useState(null),y=_[0],b=_[1],S=n.useState(function(){return(null==p?void 0:p.fileStoreId)||null})[0],A=n.useState([]),C=A[0],T=A[1];return n.useEffect(function(){null!=g&&g.code&&c(function(e){var t,n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==g?void 0:g.code)});if(0===(null==S?void 0:S.length)||null===S)return n;var i=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==S});return[].concat(i,[{documentType:null==g?void 0:g.code,fileStoreId:S,documentUid:S,fileName:(null==y?void 0:y.name)||"",id:d?null===(t=d.find(function(e){return e.documentType===(null==g?void 0:g.code)}))||void 0===t?void 0:t.id:void 0}])})},[S,g]),n.useEffect(function(){try{C.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),a.newUploadedDocs=[],C.map(function(e){var t,n,i;null!=g&&g.code&&a.newUploadedDocs.push({documentType:null==g?void 0:g.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(i=e.fileStoreId)||void 0===i?void 0:i.tenantId})}),v[s]=a,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(v)))}catch(e){Promise.reject(e)}},[C,g]),n.useEffect(function(){},[y]),i.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},i.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+r(null==a?void 0:a.code)),(null==a||null===(o=a.uploadedDocuments)||void 0===o?void 0:o.length)&&i.createElement(qt,{documents:null==a?void 0:a.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),f?i.createElement("div",{style:{marginTop:"20px"}},i.createElement(t.LabelFieldPair,{style:{width:"100%"}},i.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=a&&a.required?r(null==a?void 0:a.code)+"* ":""+r(null==a?void 0:a.code)),i.createElement(t.Dropdown,{className:"form-field",t:r,isMandatory:!1,option:null==a?void 0:a.dropdownData,selected:g,optionKey:"i18nKey",select:function(e){return E(e)},style:{width:"100%"}})),i.createElement(t.LabelFieldPair,{style:{width:"100%"}},i.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),i.createElement("div",{className:"field",style:{width:"100%"}},i.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:function(e){return function(e,t){var n,i=Object.fromEntries(t),l=Object.values(i);0!==Object.keys(i).length&&T(l),(n=l[l.length-1])&&b(n.file)}(0,e)},t:r,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function Xt(e){var n=e.fiReport,l=e.isCitizen,r=void 0!==l&&l,a=o.useTranslation().t;return i.createElement(i.Fragment,null,i.createElement("div",{style:{marginTop:"10px"}},i.createElement(r?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+a("BPA_FI_REPORT")),n.map(function(e,l){var o,r,u,c,d,s;return i.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},i.createElement(t.StatusTable,null,i.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+a("BPA_FI_REPORT"):a("BPA_FI_REPORT")+" - "+(l+1)),i.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(o=e.date)||void 0===o?void 0:o.split("-")[2])+"/"+(null===(r=e.date)||void 0===r?void 0:r.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),i.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(c=e.questions)||void 0===c?void 0:c.length)&&(null==e||null===(d=e.questions)||void 0===d?void 0:d.map(function(e){return i.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},i.createElement(t.Row,{className:"border-none",label:""+a(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),i.createElement(t.Row,{className:"border-none",label:""+a("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"}))})),i.createElement(qt,{documents:(s=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==s?void 0:s.map(function(e){var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function $t(e){var l=e.t,o=e.document,r=e.setNocDocuments,a=e.setError,u=e.nocDocuments,c=null==u?void 0:u.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==o?void 0:o.code)})[0],d=Digit.ULBService.getStateId(),s=(n.useState(),n.useState(null)),v=s[0],f=s[1],p=n.useState(function(){return(null==c?void 0:c.fileStoreId)||null}),m=p[0],h=p[1];return n.useEffect(function(){var e,t;null!=o&&null!==(e=o.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&r(function(e){var t,n=null==e?void 0:e.filter(function(e){var t,n;return(null==e?void 0:e.documentType)!==(null==o||null===(t=o.dropdownData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.code)});if(0===(null==m?void 0:m.length)||null===m)return n;var i=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==m});return[].concat(i,[{documentType:null==o||null===(t=o.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:m,documentUid:m,fileName:(null==v?void 0:v.name)||""}])})},[m]),n.useEffect(function(){!function(){try{a(null);var e=function(){if(v){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(v.size>=5242880)a(l("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=v&&v.type&&!e.test(null==v?void 0:v.type))a(l("NOT_SUPPORTED_FILE_TYPE"));else{var t=_t(function(){return h(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",v,Digit.ULBService.getStateId())).then(function(e){var t,n,i,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?h(null==e||null===(i=e.data)||void 0===i||null===(o=i.files[0])||void 0===o?void 0:o.fileStoreId):a(l("CS_FILE_UPLOAD_ERROR"))})},function(){a(l("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[v]),i.createElement("div",{style:{}},i.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},i.createElement(t.CardLabel,{style:{width:"100%"}},null!=o&&o.required?l("TL_BUTTON_UPLOAD FILE")+"*":""+l("TL_BUTTON_UPLOAD FILE")),i.createElement("div",{className:"field",style:{width:"100%"}},i.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:d,getFormState:function(e){return function(e){var t,n=Object.fromEntries(e),i=Object.values(n);(t=i[i.length-1])&&f(t.file)}(e)},t:l,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var Jt=function(e){var l,o=e.t,r=e.noc,a=e.docs,u=e.isNoc,c=e.applicationData,d=e.NOCdata,s=e.bpaActionsDetails,v=(Digit.ULBService.getStateId(),Digit.ULBService.getStateId()),f=(null==c?void 0:c.status)||"",p=(null==s||null===(l=s.data)||void 0===l?void 0:l.nextActions)||[],m=Digit.Hooks.obps.useMDMS(v,"NOC",["DocumentTypeMapping"],{enabled:u}).data,h=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"],{enabled:!u}).data,g=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]).data,E=n.useState([]),_=E[0],y=E[1],b=n.useState([]),S=b[0],A=b[1],C=n.useState(!1),T=C[0],D=C[1],w=Digit.Hooks.useSessionStorage(null==r?void 0:r.nocType,[]),O=w[0],x=w[1],N=n.useState(null),L=N[0],I=N[1],P=window.location.href.includes("/employee/");return n.useEffect(function(){var e;y(null==g||null===(e=g["common-masters"])||void 0===e?void 0:e.DocumentType)},[g]),n.useEffect(function(){var e,t,n,i,l,o,a,d,s=[];null!==(e=i=u?null==m||null===(l=m.NOC)||void 0===l||null===(o=l.DocumentTypeMapping)||void 0===o?void 0:o.filter(function(e){return(null==e?void 0:e.applicationType)===(null==r?void 0:r.applicationType)&&(null==e?void 0:e.nocType)===(null==r?void 0:r.nocType)}):null==h||null===(a=h.BPA)||void 0===a||null===(d=a.DocTypeMapping)||void 0===d?void 0:d.filter(function(e){var t,n;return e.WFState==(null==c?void 0:c.status)&&e.RiskType==(null==c?void 0:c.riskType)&&e.ServiceType==(null==c||null===(t=c.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==c||null===(n=c.additionalDetails)||void 0===n?void 0:n.applicationType)}))&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(n=t.docTypes)&&void 0!==n&&n[0]&&(i[0].docTypes[0].nocType=i[0].nocType,i[0].docTypes[0].additionalDetails={submissionDetails:null==r?void 0:r.additionalDetails,applicationStatus:null==r?void 0:r.applicationStatus,appNumberLink:null==r?void 0:r.applicationNo,nocNo:null==r?void 0:r.nocNo},s.push(i[0].docTypes[0]));var v=[];s&&s.length>0&&(s.map(function(e){var t=e.documentType;e.dropdownData=[],null==_||_.forEach(function(n){var i=n.code.slice(0,null==t?void 0:t.length);t===i&&(e.hasDropdown=!0,e.dropdownData.push(n))}),v.push(e)}),A(v))},[m,_]),n.useEffect(function(){D("NOC_VERIFICATION_INPROGRESS"===f&&(null==p?void 0:p.length)>0)},[c,s]),i.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},i.createElement(t.StatusTable,null,i.createElement(t.Row,{label:P?""+o("BPA_"+(null==r?void 0:r.nocType)+"_HEADER"):o("BPA_"+(null==r?void 0:r.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),d&&d.map(function(e,n){if(null!=e&&e.value)return i.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:P?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:P?""+o(null==e?void 0:e.title):o(null==e?void 0:e.title),text:o(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),i.createElement(qt,{documents:a,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),T&&(null==S?void 0:S.map(function(e,t){return i.createElement($t,{key:t,document:e,t:o,error:L,setError:I,setNocDocuments:x,nocDocuments:O,checkEnablingDocs:T})})))},Zt=function(e){var l=e.permissions,o=e.t,r=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==l?void 0:l.map(function(e){return{label:e,checked:!1}})),a=r[0],c=r[1],d=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]),s=d[0],v=d[1];n.useEffect(function(){return function(){Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")}},[]);var f=window.Digit.Utils.browser.isMobile();return i.createElement("div",null,i.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},o("BPA_PERMIT_CONDITIONS")),null==a?void 0:a.map(function(e,n){return i.createElement(t.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:f?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:function(e){return function(e,t,n){var i=e.target.checked;c(function(){return null==a?void 0:a.map(function(e,t){return n===t?u({},e,{checked:i}):e})})}(e,0,n)},isLabelFirst:!0,index:n})}),null==s?void 0:s.map(function(e,n){return i.createElement("div",null,i.createElement(t.TextInput,{key:n,value:null==e?void 0:e.label,onChange:function(e){return function(e,t){v(function(){return null==s?void 0:s.map(function(n,i){var l;return t===i?{label:null==e||null===(l=e.target)||void 0===l?void 0:l.value}:n})})}(e,n)},textInputStyle:{maxWidth:f?"96%":"830px",width:f?"96%":"830px"},style:f?{paddingRight:"10%"}:{},placeholder:o("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),i.createElement(t.LinkButton,{label:i.createElement("div",null,i.createElement("span",null,i.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:f?"5%":"35%"}}))),style:{},onClick:function(e){return function(e){var t=[].concat(s);t.splice(e,1),v([].concat(t))}(n)}}))}),i.createElement(t.LinkButton,{style:{color:"#a82227",maxWidth:f?"fit-content":"10%",marginRight:"3%"},label:o("BPA_ADD_MORE"),onClick:function(){v([].concat(s,[{label:""}]))}}))};function Qt(e){var l=e.documents,r=e.svgStyles,a=void 0===r?{}:r,u=e.isSendBackFlow,c=void 0!==u&&u,d=o.useTranslation().t,s=n.useState(function(){return[]}),v=s[0],f=s[1],p=(Digit.ULBService.getCurrentTenantId(),n.useState({})),m=p[0],h=p[1];n.useEffect(function(){var e,t=[];null==l||l.forEach(function(e,n,i){t=[].concat(t,e.values?e.values:[])}),f(null===(e=t)||void 0===e?void 0:e.map(function(e){return null==e?void 0:e.fileStoreId}))},[l]),n.useEffect(function(){var e;null!=v&&v.length&&"BillAmend"===(null==l||null===(e=l[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(v,Digit.ULBService.getCurrentTenantId()).then(function(e){h(null==e?void 0:e.data)}):null!=v&&v.length&&Digit.UploadServices.Filefetch(v,Digit.ULBService.getStateId()).then(function(e){h(null==e?void 0:e.data)})},[v]);var g=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),E=window.location.href.includes("stakeholder");return i.createElement("div",{style:{marginTop:"19px"}},!E&&(null==l?void 0:l.map(function(e,n){var l;return i.createElement(i.Fragment,{key:n},null!=e&&e.title?i.createElement(t.CardSubHeader,{style:g?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,i.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l,o;return i.createElement("a",{target:"_",href:null===(l=m[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},i.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.createElement(t.PDFSvg,null)),i.createElement("p",{style:g?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},d(null==e?void 0:e.title)),c?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?i.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType.split(".")[1])):i.createElement("p",{style:{textAlign:"center"}},d(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&i.createElement("div",null,i.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),E&&(null==l?void 0:l.map(function(e,n){var l;return i.createElement(i.Fragment,{key:n},null!=e&&e.title?i.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},d(null==e?void 0:e.title)):null,i.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return i.createElement("a",{target:"_",href:null===(l=m[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},i.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},i.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},d(null==e?void 0:e.title)),null!=e&&e.docInfo?i.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+d(null==e?void 0:e.docInfo)):null,i.createElement(t.PDFSvg,null),i.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+d(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&i.createElement("div",null,i.createElement("p",null,d("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function en(e){var n=e.taxHeadEstimatesCalculation,l=n.taxHeadEstimates,r=o.useTranslation().t;return i.createElement("div",{style:{marginTop:"40px"}},i.createElement(t.StatusTable,null,i.createElement(t.Row,{label:r("ES_PT_TITLE_TAX_HEADS"),text:r("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),i.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==l?void 0:l.map(function(e,n){return i.createElement(t.Row,{key:r(e.taxHeadCode),label:r(e.taxHeadCode),text:" "+e.estimateAmount||"N/A",last:n===(null==l?void 0:l.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})}),i.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),i.createElement(t.Row,{label:r("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:" "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function tn(e){var n=e.floors,l=o.useTranslation().t;return i.createElement(i.Fragment,null,n.map(function(e){var n;return i.createElement("div",{key:l(null==e?void 0:e.title),style:{marginTop:"19px"}},i.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},l(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e,n){var o;return i.createElement(i.Fragment,{key:n},i.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},l(e.title)),i.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},i.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return i.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:l(e.title),label:l(e.title),text:i.createElement("img",{src:l(e.value),alt:""})}:{key:l(e.title),label:l(e.title),text:l(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function nn(e){var n=e.owners,l=o.useTranslation().t,r=(null==n?void 0:n.length)||1,a={marginTop:"19px"},c={position:"relative",padding:"8px"},d={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(r)>1?a={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(r)>1||(a={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},c={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(a=u({},a,{maxWidth:"950px"}),a=u({},a,{maxWidth:"950px"}),d={}),i.createElement(i.Fragment,null,n.map(function(e,n){var o;return i.createElement("div",{key:l(null==e?void 0:e.title),style:a},i.createElement(t.CardSubHeader,{style:Number(r)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(r)>1?l(null==e?void 0:e.title)+" "+(n+1):l(null==e?void 0:e.title)),i.createElement(i.Fragment,{key:n},i.createElement(t.StatusTable,{style:c},i.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return!0===e.map&&"N/A"!==e.value?i.createElement(t.Row,{key:l(e.title),label:l(e.title),text:i.createElement("img",{src:l(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):i.createElement("span",null,i.createElement(t.Row,{key:l(e.title),label:""+l(e.title),text:l(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:d}))}))))}))}var ln=function(e){var l,r,a,u=e.scrutinyDetails,c=o.useTranslation().t,d=function(e){return null!=e&&e.value&&null!=e&&e.isTransLate?i.createElement("span",{style:{color:"#00703C"}},c(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?c(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void c("NA")};return i.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&i.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},i.createElement(t.StatusTable,null,i.createElement("div",null,null==u||null===(l=u.values)||void 0===l?void 0:l.map(function(e,n){return null!=e&&e.isUnit?i.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+c(""+e.title),text:null!=e&&e.value?d(e)+" "+c(null==e?void 0:e.isUnit):c("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?i.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+c(""+e.title),text:d(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):i.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},c(null==e?void 0:e.title)):i.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},c(null==e?void 0:e.title))}),null==u||null===(r=u.permit)||void 0===r?void 0:r.map(function(e,n){return i.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title)})),i.createElement("div",null,null==u||null===(a=u.scruntinyDetails)||void 0===a?void 0:a.map(function(e,l){return i.createElement(n.Fragment,null,i.createElement(t.Row,{className:"border-none",label:""+c(null==e?void 0:e.title),labelStyle:{width:"150%"}}),i.createElement("a",{href:null==e?void 0:e.value}," ",i.createElement(t.PDFSvg,null)," "),i.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},c(null==e?void 0:e.text)))})))))},on=function(e){var l,r,a,u,c,d=e.edcrDetails,s=e.applicationData,v=o.useTranslation().t,f=window.Digit.Utils.browser.isMobile(),p=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],m=n.useMemo(function(){return p.map(function(e){return{Header:v(""+e.name),accessor:(t=e.id,n=t,function(e,t,i){return e[n]}),id:e.id};var t,n})});function h(e){var t,n=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(function(e){var t,i,l,o,r,a,u,c;n.push({Floor:v("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:v(""+(null===(t=e.occupancies)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.type)),BuildupArea:null===(l=e.occupancies)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(r=e.occupancies)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.CarpetArea)||0,key:v("BPA_FLOOR_NAME_"+e.number)})}),n}function g(e){var t,n=null==s||null===(t=s.landInfo)||void 0===t?void 0:t.unit,i="";if((null==n?void 0:n.length)>0){var l,o,r=null===(l=n[e])||void 0===l||null===(o=l.usageCategory)||void 0===o?void 0:o.split(",");null!=r&&r.length&&(i=r.map(function(e){return e?""+v("BPA_SUBOCCUPANCYTYPE_"+function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA"}).join(", "))}return i||"NA"}return i.createElement(n.Fragment,null,i.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},i.createElement(t.StatusTable,null,null==d||null===(l=d.values)||void 0===l?void 0:l.map(function(e,n){return null!=e&&e.isHeader?i.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},v(null==e?void 0:e.title)):i.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+v(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),null==d||null===(r=d.subOccupancyTableDetails)||void 0===r||null===(a=r[0])||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.planDetail)||void 0===c?void 0:c.blocks.map(function(e,n){var l,o,r,a,u;return i.createElement("div",{key:n,style:(null==d||null===(l=d.subOccupancyTableDetails)||void 0===l||null===(o=l[0])||void 0===o||null===(r=o.value)||void 0===r||null===(a=r.planDetail)||void 0===a||null===(u=a.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},i.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},v("BPA_BLOCK_SUBHEADER")," ",n+1),i.createElement(t.StatusTable,null,i.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+v("BPA_SUB_OCCUPANCY_LABEL"),text:g(n)})),i.createElement("div",{style:window.location.href.includes("citizen")||f?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},i.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:v,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:h(e),columns:m,getCellProps:function(e){return{style:{}}}})))})))},rn=function(e){var t=e.otherComment;return i.createElement("div",{className:"checkpoint-comments-wrap"},i.createElement("h4",null,e.headComment),i.createElement("p",null,t))},an=function(e){var n,l,r,a=e.data,u=e.OpenImage,c=e.privacy,d=void 0===c?{}:c,s=o.useTranslation().t;return i.createElement("div",null,a.date&&i.createElement("p",null,a.date),i.createElement("p",null,a.name),a.mobileNumber&&i.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},i.createElement(t.TelePhone,{mobile:a.mobileNumber,privacy:d}),i.createElement("p",null,"")),a.source&&i.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+a.source.toUpperCase())),a.comment&&i.createElement(rn,{otherComment:null==a?void 0:a.otherComment,headComment:null==a?void 0:a.comment}),null!=a&&a.wfComment?i.createElement("div",null,null==a||null===(n=a.wfComment)||void 0===n?void 0:n.map(function(e){return i.createElement("div",{className:"TLComments"},i.createElement("h3",null,s("WF_COMMON_COMMENTS")),i.createElement("p",null,e))})):null,(null==a||null===(l=a.thumbnailsToShow)||void 0===l||null===(r=l.thumbs)||void 0===r?void 0:r.length)>0?i.createElement("div",{className:"TLComments"},i.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),i.createElement(t.DisplayPhotos,{srcs:null==a?void 0:a.thumbnailsToShow.thumbs,onClick:function(e,t){u(e,t,null==a?void 0:a.thumbnailsToShow)}})):null)};function un(e){var n=e.units,l=o.useTranslation().t;return i.createElement(i.Fragment,null,n.map(function(e,n){var o;return i.createElement("div",{key:l(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},i.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},l(null==e?void 0:e.title)+" "+(n+1)),i.createElement(i.Fragment,{key:n},i.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},i.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return i.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:l(e.title),label:l(e.title),text:i.createElement("img",{src:l(e.value),alt:""})}:{key:l(e.title),label:l(e.title)+":",text:l(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function cn(e){var n=e.units,l=o.useTranslation().t;return i.createElement(i.Fragment,null,n.map(function(e,n){var o;return i.createElement("div",{key:l(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},i.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},l(null==e?void 0:e.title)+" "+(n+1)),i.createElement(i.Fragment,{key:n},i.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},i.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map(function(e,n){var o;return i.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:l(e.title),label:l(e.title),text:i.createElement("img",{src:l(e.value),alt:""})}:{key:l(e.title),label:l(e.title)+":",text:l(e.value)||"NA",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}var dn=function(e){var l,r,a,u,c,d=e.wsAdditionalDetails,s=o.useTranslation().t,v=(c=location.search)?(/^[?#]/.test(c)?c.slice(1):c).split("&").reduce(function(e,t){var n=t.split("="),i=n[1];return e[n[0]]=i?decodeURIComponent(i.replace(/\+/g," ")):"",e},{}):{},f=null==v?void 0:v.mode,p=(null==d?void 0:d.additionalDetails)||{connectionDetails:[],plumberDetails:[]},m=p.connectionDetails,h=p.plumberDetails,g=p.roadCuttingDetails,E=p.activationDetails;return i.createElement(n.Fragment,null,i.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==d||null===(l=d.additionalDetails)||void 0===l?void 0:l.connectionDetails)&&i.createElement(t.StatusTable,null,i.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),i.createElement("div",null,i.createElement("div",{className:"connection-details-new-value-wrapper"},null==m?void 0:m.map(function(e,n){return i.createElement("div",null,i.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""}))})))),(null==d||null===(r=d.additionalDetails)||void 0===r?void 0:r.plumberDetails)&&"MODIFY"!=f&&i.createElement(t.StatusTable,null,i.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),i.createElement("div",null,i.createElement("div",{className:"plumber-details-new-value-wrapper"},null==h?void 0:h.map(function(e,n){return i.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy})})))),(null==d||null===(a=d.additionalDetails)||void 0===a?void 0:a.roadCuttingDetails)&&"MODIFY"!=f&&i.createElement(t.StatusTable,null,i.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),i.createElement("div",null,i.createElement("div",{className:"plumber-details-new-value-wrapper"},null==g?void 0:g.map(function(e){var n;return i.createElement("div",{style:(null==g?void 0:g.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e){return i.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))})))),(null==d||null===(u=d.additionalDetails)||void 0===u?void 0:u.activationDetails)&&i.createElement(t.StatusTable,null,i.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),i.createElement("div",null,i.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map(function(e,n){return i.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))))))},sn=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],vn=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],fn=function(e){var l,r,a,c,d=e.wsAdditionalDetails,s=o.useTranslation().t,v=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),f=v[0],p=v[1],m=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{})[1],h=!(null==d||null===(l=d.additionalDetails)||void 0===l||!l.isPaid),g=n.useState(!1),E=g[0],y=g[1],b=n.useState(f||{}),S=b[0],A=b[1],C=n.useState(null),T=C[0],D=C[1],w=n.useState(d.additionalDetails.data?d.additionalDetails.data:{}),O=w[0],x=w[1],N=n.useState(d.additionalDetails.values?d.additionalDetails.values:[]),L=N[0],I=N[1],P=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(P,"BillingService",["TaxHeadMaster"]),n.useEffect(function(){var e,t,n,l=u({},null==d||null===(e=d.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails);if((null==f||null===(n=f.billDetails)||void 0===n?void 0:n.length)>0){var o,r,a,c,s,v,m,h=[{title:"WS_APPLICATION_FEE_HEADER",value:i.createElement("span",null,"",null==f||null===(o=f.billDetails)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.fee)},{title:"WS_SERVICE_FEE_HEADER",value:i.createElement("span",null,"",null==f||null===(a=f.billDetails)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.charge)},{title:"WS_TAX_HEADER",value:i.createElement("span",null,"",null==f||null===(s=f.billDetails)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount)}];I(h),x(null==f||null===(m=f.billDetails)||void 0===m?void 0:m[0])}else p(l),A(l)},[]);var F=function(e){return i.createElement("h1",{className:"heading-m"},e.label)},R=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},M=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(R,null))},B=function(e,t,n){void 0===t&&(t=!1);var i=u({},S);if("adhocPenalty"!=e&&"adhocRebate"!=e||!n.target.value)t?(i[e+"_data"]=n,i[e]=n.title,"PT_OTHERS"==n.title&&"adhocPenaltyReason"==e&&(i.adhocPenaltyComment=""),"PT_OTHERS"==n.title&&"adhocRebateReason"==e&&(i.adhocRebateComment="")):i[e]=n.target.value;else{var l,o,r=0==(null==n||null===(l=n.target)||void 0===l?void 0:l.value)?1:Math.sign(null==n||null===(o=n.target)||void 0===o?void 0:o.value)||-1;i[e]=1==r?n.target.value:""}A(i)};return i.createElement(n.Fragment,null,i.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},L&&i.createElement(t.StatusTable,null,i.createElement("div",null,null==L?void 0:L.map(function(e,n){return i.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),i.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),i.createElement("div",null,i.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+s("WS_COMMON_TOTAL_AMT"),text:i.createElement("span",null,"",(null==O?void 0:O.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),i.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+s("CS_INBOX_STATUS_FILTER"),text:s(h?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:h?{color:"#00703C"}:{color:"#D4351C"}}))),null!=d&&null!==(r=d.additionalDetails)&&void 0!==r&&r.isAdhocRebate?i.createElement("div",{onClick:function(e){y(!0)}},i.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},s("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,E&&i.createElement(t.Modal,{headerBarMain:i.createElement(F,{label:s("PT_ADD_REBATE_PENALITY")}),headerBarEnd:i.createElement(M,{onClick:function(){A(f),y(!1)}}),actionCancelLabel:s("PT_CANCEL"),actionCancelOnSubmit:function(){A(f),y(!1)},actionSaveLabel:s("PT_ADD"),actionSaveOnSubmit:function(e){return function(e){var t,n,i=null!=S&&S.adhocPenalty?Number(null==S?void 0:S.adhocPenalty):0,l=null!=S&&S.adhocRebate?Number(null==S?void 0:S.adhocRebate):0;if(i||l)if(l>(null==d||null===(t=d.additionalDetails)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.totalAmount))D({isError:!1,isWarning:!0,key:"error",message:s("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var o,r,a,c,v,f,h,g,E,b,A=null==d||null===(o=d.additionalDetails)||void 0===o||null===(r=o.appDetails)||void 0===r?void 0:r.applicationNo,C=null==d||null===(a=d.additionalDetails)||void 0===a||null===(c=a.appDetails)||void 0===c?void 0:c.tenantId,T=u({},null==d||null===(v=d.additionalDetails)||void 0===v||null===(f=v.appDetails)||void 0===f?void 0:f.additionalDetails,S);d.additionalDetails.appDetails.additionalDetails=T;var w={CalculationCriteria:"WATER"==(null==d||null===(h=d.additionalDetails)||void 0===h||null===(g=h.appDetails)||void 0===g?void 0:g.service)?[{applicationNo:A,tenantId:C,waterConnection:d.additionalDetails.appDetails}]:[{applicationNo:A,tenantId:C,sewerageConnection:d.additionalDetails.appDetails}],isconnectionCalculation:!1},O="WATER"==(null==d||null===(E=d.additionalDetails)||void 0===E||null===(b=E.appDetails)||void 0===b?void 0:b.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(w,O).then(function(e,t){var n,i,l,o,r,a,u,c,d,s,v,f,h,g,E;(null==e||null===(n=e.Calculation)||void 0===n||null===(i=n[0])||void 0===i||null===(l=i.taxHeadEstimates)||void 0===l?void 0:l.length)>0&&(null==e||null===(h=e.Calculation)||void 0===h||null===(g=h[0])||void 0===g||null===(E=g.taxHeadEstimates)||void 0===E||E.forEach(function(e){return e.amount=e.estimateAmount})),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(o=e.Calculation)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.taxHeadEstimates,"category");var b=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(a=e.Calculation)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.charge},{title:"WS_TAX_HEADER",value:null===(s=e.Calculation)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount}];m(pt(e.Calculation[0])),x(null==e||null===(f=e.Calculation)||void 0===f?void 0:f[0]),I(b),S.billDetails=null==e?void 0:e.Calculation,p(S),y(!1)}).catch(function(e){var t,n,i,l,o,r;D({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(i=n.Errors[0])&&void 0!==i&&i.message?s(""+(null==e||null===(l=e.response)||void 0===l||null===(o=l.data)||void 0===o||null===(r=o.Errors[0])||void 0===r?void 0:r.code)):s("PT_COMMON_ADD_REBATE_PENALITY")})})}else D({isError:!1,isWarning:!0,key:"warning",message:s("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})}()},hideSubmit:!1,popupStyles:{overflowY:"auto"}},i.createElement("div",null,i.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},i.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_PENALTY")),i.createElement(t.CardLabel,null,s("PT_TX_HEADS")),i.createElement("div",{className:"field"},i.createElement(t.Dropdown,{isMandatory:!0,option:sn,optionKey:"title",select:function(e){return B("adhocPenaltyReason",!0,e)},selected:(null==S?void 0:S.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:s})),"PT_OTHERS"===(null==S||null===(a=S.adhocPenaltyReason_data)||void 0===a?void 0:a.title)&&i.createElement("div",{className:"field"},i.createElement(t.CardLabel,null,s("PT_REASON")),i.createElement("div",{className:"field"},i.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==S?void 0:S.adhocPenaltyComment)||"",onChange:function(e){return B("adhocPenaltyComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")})))),i.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),i.createElement("div",{className:"field"},i.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==S?void 0:S.adhocPenalty)||"",onChange:function(e){return B("adhocPenalty",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))),i.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},i.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_REBATE")),i.createElement(t.CardLabel,null,s("PT_TX_HEADS")),i.createElement("div",{className:"field"},i.createElement(t.Dropdown,{isMandatory:!0,option:vn,optionKey:"title",select:function(e){return B("adhocRebateReason",!0,e)},selected:(null==S?void 0:S.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:s})),"PT_OTHERS"===(null==S||null===(c=S.adhocRebateReason_data)||void 0===c?void 0:c.title)&&i.createElement("div",{className:"field"},i.createElement(t.CardLabel,null,s("PT_REASON")),i.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==S?void 0:S.adhocRebateComment)||"",onChange:function(e){return B("adhocRebateComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")}))),i.createElement(t.CardLabel,null,s("PT_HEAD_AMT")),i.createElement("div",{className:"field"},i.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==S?void 0:S.adhocRebate)||"",onChange:function(e){return B("adhocRebate",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),T&&i.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==T?void 0:T.isWarning,error:null==T||!T.isWarning,label:s(null==T?void 0:T.message),onClose:function(){D(!1)},isDleteBtn:!0})))},pn=function(e){return i.createElement("span",null,i.createElement("svg",{style:u({},e.style),display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#F47738"})))},mn=function(e){var n=e.t,l=e.userType,o=void 0!==l&&l,r=e.infoBannerLabel,a=void 0===r?"":r,u=e.infoClickLable,c=void 0===u?"":u,d=e.infoClickInfoLabel,s=void 0===d?"":d,v=e.infoClickInfoLabel1,f=void 0===v?"":v;o=o||Digit.SessionStorage.get("userType");var p=window.Digit.Utils.browser.isMobile();return i.createElement(i.Fragment,null,i.createElement("div",{style:p?{}:{width:"80%"}},i.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},i.createElement("div",null,i.createElement(t.InfoBannerIcon,null),i.createElement("h2",{style:{color:"#3498DB"}},n(a))),n(c)+" ",i.createElement(pn,{style:{display:"inline",marginBottom:"5px"}})," "+n(s),i.createElement("div",null," "+n(f)))))},hn=function(e){var l,r,a,u,c,d,s,v=e.wsAdditionalDetails,f=o.useTranslation().t,p=n.useState(!1),m=p[0],h=p[1],g=n.useState({}),E=g[0],_=g[1],y=function(e){return i.createElement("h1",{className:"heading-m"},e.label)},b=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},S=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(b,null))};return i.createElement(n.Fragment,null,i.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=v&&null!==(l=v.additionalDetails)&&void 0!==l&&l.isViewBreakup?i.createElement("div",{onClick:function(e){return n=v.additionalDetails.data||{},null!=(l=(i=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"))?JSON.parse(i):{})&&null!==(t=l.value)&&void 0!==t&&t.totalAmount&&(n=null==l?void 0:l.value),_(n),void h(!0);var t,n,i,l},style:{marginTop:"12px"}},i.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},f("WS_PAYMENT_VIEW_BREAKUP"))):null,m&&i.createElement(t.Modal,{headerBarMain:i.createElement(y,{label:f("WS_CALCULATION_BREAKUP")}),headerBarEnd:i.createElement(S,{onClick:function(){h(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},i.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},i.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},f("WS_APPLICATION_FEE_HEADER")),null==E||null===(r=E.billSlabData)||void 0===r||null===(a=r.FEE)||void 0===a?void 0:a.map(function(e){return i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+f(""+(null==e?void 0:e.taxHeadCode)),text:i.createElement("span",null,"",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),i.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+f("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:i.createElement("span",null,"",Number(null==E?void 0:E.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),i.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},f("WS_SERVICE_FEE_HEADER")),null==E||null===(u=E.billSlabData)||void 0===u||null===(c=u.CHARGES)||void 0===c?void 0:c.map(function(e){return i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+f(""+(null==e?void 0:e.taxHeadCode)),text:i.createElement("span",null,"",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),i.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+f("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:i.createElement("span",null,"",Number(null==E?void 0:E.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==E||null===(d=E.billSlabData)||void 0===d||null===(s=d.TAX)||void 0===s?void 0:s.map(function(e){return i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+f(""+(null==e?void 0:e.taxHeadCode)),text:i.createElement("span",null,"",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),i.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),i.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+f("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:i.createElement("span",null,"",Number(null==E?void 0:E.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))};function gn(e){var r,a,u,c,d,s,v,f,p,m,h,g=e.applicationDetails,E=e.workflowDetails,y=e.isDataLoading,b=e.applicationData,S=e.timelineStatusPrefix,A=e.showTimeLine,C=void 0===A||A,T=e.statusAttribute,D=void 0===T?"status":T,w=e.paymentsList,O=e.oldValue,x=e.isInfoLabel,N=void 0!==x&&x,L=o.useTranslation().t;function I(e,t,n){var i;window.open(null==n||null===(i=n.fullImage)||void 0===i?void 0:i[0],"_blank")}var P=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,i=t.getDate();return(i=(i>9?"":"0")+i)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()},F=function(e,t){if(void 0===t&&(t=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var n,l={date:P(null==b||null===(n=b.auditDetails)||void 0===n?void 0:n.createdTime),source:(null==b?void 0:b.channel)||""};return i.createElement(an,{data:l})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var o,r,a,u,c,d,s,v,f,p,m,h,E,y,S,A,C,T,D={uuid:null==e||null===(o=e.assignes)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==g?void 0:g.tenantId,businessIds:null==g?void 0:g.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:function(e){return"+91 "+_.get(e,"ProcessInstances["+t+"].assignes[0].mobileNumber")}}},w={date:null==e||null===(a=e.auditDetails)||void 0===a?void 0:a.lastModified,name:null==e||null===(u=e.assignes)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.name,mobileNumber:(null==b||null===(d=b.processInstance)||void 0===d||null===(s=d.assignes)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.uuid)===(null==e||null===(f=e.assignes)||void 0===f||null===(p=f[0])||void 0===p?void 0:p.uuid)&&null!=b&&null!==(m=b.processInstance)&&void 0!==m&&null!==(h=m.assignes)&&void 0!==h&&null!==(E=h[0])&&void 0!==E&&E.mobileNumber?null==b||null===(y=b.processInstance)||void 0===y||null===(S=y.assignes)||void 0===S||null===(A=S[0])||void 0===A?void 0:A.mobileNumber:null==e||null===(C=e.assignes)||void 0===C||null===(T=C[0])||void 0===T?void 0:T.mobileNumber,comment:L(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return i.createElement(an,{data:w,OpenImage:I,privacy:D})}var O,x,N,F,R,M={date:P(null==b||null===(O=b.auditDetails)||void 0===O?void 0:O.lastModifiedTime),name:null==e||null===(x=e.assignes)||void 0===x||null===(N=x[0])||void 0===N?void 0:N.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(F=e.assignes)||void 0===F||null===(R=F[0])||void 0===R?void 0:R.mobileNumber};return i.createElement(an,{data:M})},R=function(e,t){return e?t?e:L(e):L("NA")},M=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),B=window.location.href.includes("employee/noc"),U=window.location.href.includes("employee/obps"),k=(window.location.href.includes("employee/ws"),function(){return window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||M?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}}),W=function(e){return null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?R(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+L(null==e?void 0:e.isUnit):L("N/A"):null!=e&&e.value?R(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):L("N/A")};return i.createElement(t.Card,{style:{position:"relative"},className:"employeeCard-override"},N?i.createElement(mn,{t:L,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==g||null===(r=g.applicationDetails)||void 0===r?void 0:r.map(function(e,o){var r,a,u,c,d,s,v,f,p,m,h,_,y,b,S,A,C,T,D,x,N,I,P,F,R,j,H,z,V,Y,q,G,K,X,$,J,Z,Q,ee;return i.createElement(i.Fragment,{key:o},i.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:M?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==o||e.asSectionHeader?i.createElement(i.Fragment,null,i.createElement(t.CardSectionHeader,{style:0==o&&M?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},B?""+L(e.title):L(e.title),null!=e&&e.Component?i.createElement(e.Component,null):null)):i.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},L(e.title)),(null==e?void 0:e.isTable)&&i.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},i.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(function(e){return i.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},L(e))})),null==e?void 0:e.tableRows.map(function(t,l){return l===(null==e?void 0:e.tableRows.length)-1?i.createElement(n.Fragment,null,i.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),i.createElement("tr",null,t.map(function(e){return i.createElement("td",{style:{textAlign:"left"}},L(e))}))):i.createElement("tr",null,t.map(function(e){return i.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},L(e))}))})),i.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||M?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(r=e.values)||void 0===r?void 0:r.map(function(n,o){var r,a;return!0===n.map&&"N/A"!==n.value?i.createElement(t.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:L(n.title),label:L(n.title),text:i.createElement("img",{src:L(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?i.createElement(t.Row,{key:L(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?i.createElement("div",{style:{width:"200%"}},i.createElement(l.Link,{to:null==n?void 0:n.to},i.createElement("span",{className:"link",style:{color:"#a82227"}},L(null==n?void 0:n.title)))):B||U?""+L(n.title):L(n.title),text:i.createElement("div",null,i.createElement(l.Link,{to:null==n?void 0:n.to},i.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:o===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:k(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):i.createElement("div",null,window.location.href.includes("modify")?i.createElement(t.Row,{className:"border-none",key:""+n.title,label:""+L(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):i.createElement(t.Row,{key:L(n.title),label:L(n.title),text:W(n),last:o===(null==e||null===(r=e.values)||void 0===r?void 0:r.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:k(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}))})))),(null==e?void 0:e.belowComponent)&&i.createElement(e.belowComponent,null),(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.inspectionReport)&&i.createElement(ln,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:w}),(null==g||null===(u=g.applicationData)||void 0===u||null===(c=u.additionalDetails)||void 0===c||null===(d=c.fieldinspection_pending)||void 0===d?void 0:d.length)>0&&(null==e||null===(s=e.additionalDetails)||void 0===s?void 0:s.fiReport)&&i.createElement(Xt,{fiReport:null==g||null===(v=g.applicationData)||void 0===v||null===(f=v.additionalDetails)||void 0===f?void 0:f.fieldinspection_pending}),(null==e||null===(p=e.additionalDetails)||void 0===p?void 0:p.floors)&&i.createElement(tn,{floors:null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.floors}),(null==e||null===(h=e.additionalDetails)||void 0===h?void 0:h.owners)&&i.createElement(nn,{owners:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners}),(null==e||null===(y=e.additionalDetails)||void 0===y?void 0:y.units)&&i.createElement(cn,{units:null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.units}),(null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.accessories)&&i.createElement(un,{units:null==e||null===(A=e.additionalDetails)||void 0===A?void 0:A.accessories}),(null==e||null===(C=e.additionalDetails)||void 0===C?void 0:C.permissions)&&(null==E||null===(T=E.data)||void 0===T||null===(D=T.nextActions)||void 0===D?void 0:D.length)>0&&i.createElement(Zt,{applicationData:null==g?void 0:g.applicationData,t:L,permissions:null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.permissions}),(null==e||null===(N=e.additionalDetails)||void 0===N?void 0:N.obpsDocuments)&&i.createElement(Gt,{t:L,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:E}),(null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.noc)&&i.createElement(Jt,{t:L,isNoc:!0,NOCdata:e.values,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.noc,noc:null===(P=e.additionalDetails)||void 0===P?void 0:P.data,bpaActionsDetails:E}),(null==e||null===(F=e.additionalDetails)||void 0===F?void 0:F.scruntinyDetails)&&i.createElement(ln,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(R=e.additionalDetails)||void 0===R?void 0:R.buildingExtractionDetails)&&i.createElement(ln,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.subOccupancyTableDetails)&&i.createElement(on,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==g?void 0:g.applicationData}),(null==e||null===(H=e.additionalDetails)||void 0===H?void 0:H.documentsWithUrl)&&i.createElement(qt,{documents:null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.documentsWithUrl}),(null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.documents)&&i.createElement(Qt,{documents:null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.documents}),(null==e||null===(q=e.additionalDetails)||void 0===q?void 0:q.taxHeadEstimatesCalculation)&&i.createElement(en,{taxHeadEstimatesCalculation:null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&i.createElement(dn,{wsAdditionalDetails:e,oldValue:O}),(null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.redirectUrl)&&i.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},i.createElement(l.Link,{to:null==e||null===(X=e.additionalDetails)||void 0===X||null===($=X.redirectUrl)||void 0===$?void 0:$.url},i.createElement("span",{className:"link",style:{color:"#F47738"}},null==e||null===(J=e.additionalDetails)||void 0===J||null===(Z=J.redirectUrl)||void 0===Z?void 0:Z.title))),(null==e||null===(Q=e.additionalDetails)||void 0===Q?void 0:Q.estimationDetails)&&i.createElement(fn,{wsAdditionalDetails:e,workflowDetails:E}),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&i.createElement(hn,{wsAdditionalDetails:e,workflowDetails:E}))}),C&&(null==E||null===(a=E.data)||void 0===a||null===(u=a.timeline)||void 0===u?void 0:u.length)>0&&i.createElement(i.Fragment,null,i.createElement(t.BreakLine,null),((null==E?void 0:E.isLoading)||y)&&i.createElement(t.Loader,null),!(null!=E&&E.isLoading)&&!y&&i.createElement(n.Fragment,null,i.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},L("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=E&&null!==(c=E.data)&&void 0!==c&&c.timeline&&1===(null==E||null===(d=E.data)||void 0===d||null===(s=d.timeline)||void 0===s?void 0:s.length)?i.createElement(t.CheckPoint,{isCompleted:!0,label:L(""+S+(null==E||null===(v=E.data)||void 0===v||null===(f=v.timeline[0])||void 0===f?void 0:f.state)),customChild:F(null==E||null===(p=E.data)||void 0===p?void 0:p.timeline[0])}):i.createElement(t.ConnectingCheckPoints,null,(null==E||null===(m=E.data)||void 0===m?void 0:m.timeline)&&(null==E||null===(h=E.data)||void 0===h?void 0:h.timeline.map(function(e,n,l){var o,r,a,u,c,d,s="";return window.location.href.includes("/obps/")&&(s=null!=E&&null!==(o=E.data)&&void 0!==o&&null!==(r=o.timeline[n-1])&&void 0!==r&&null!==(a=r.state)&&void 0!==a&&a.includes("BACK_FROM")||null!=E&&null!==(u=E.data)&&void 0!==u&&null!==(c=u.timeline[n-1])&&void 0!==c&&null!==(d=c.state)&&void 0!==d&&d.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),i.createElement(i.Fragment,{key:n},i.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:L(""+S+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[D])+s),customChild:F(e,n)}))}))))))}function En(e){var n,l,o,r,a,u,c,d,s,v,f,p,m,h,g,E,_,y,b=e.t,S=e.showToast,A=e.closeToast,C=e.businessService;if(null!=C&&C.includes("NewTL")||null!=C&&C.includes("TL")||null!=C&&C.includes("EDITRENEWAL")){var T,D="";switch(null==S||null===(T=S.action)||void 0===T?void 0:T.action){case"SENDBACK":D="error"===(null==S?void 0:S.key)?null==S||null===(n=S.error)||void 0===n?void 0:n.message:b("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":D="error"===(null==S?void 0:S.key)?null==S||null===(l=S.error)||void 0===l?void 0:l.message:b("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":D="error"===(null==S?void 0:S.key)?null==S||null===(o=S.error)||void 0===o?void 0:o.message:b("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":D="error"===(null==S?void 0:S.key)?null==S||null===(r=S.error)||void 0===r?void 0:r.message:b("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":D="error"===(null==S?void 0:S.key)?null==S||null===(a=S.error)||void 0===a?void 0:a.message:b("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":D="error"===(null==S?void 0:S.key)?null==S||null===(u=S.error)||void 0===u?void 0:u.message:b("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":D="error"===(null==S?void 0:S.key)?null==S||null===(c=S.error)||void 0===c?void 0:c.message:b("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:D="error"===(null==S?void 0:S.key)?null==S||null===(d=S.error)||void 0===d?void 0:d.message:b("ES_"+C+"_"+(null==S||null===(s=S.action)||void 0===s?void 0:s.action)+"_UPDATE_SUCCESS")}return i.createElement(i.Fragment,null,S&&i.createElement(t.Toast,{error:"error"===S.key,label:D,onClose:A}))}if(null!=C&&C.includes("BPA")||null!=C&&C.includes("BPA_LOW")||null!=C&&C.includes("BPA_OC")){var w,O=function(e){var t;return void 0===e&&(e=[]),2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=C&&C.includes("BPA_OC")?b(e[1]):b(e[0])},x="";switch(null==S||null===(w=S.action)||void 0===w?void 0:w.action){case"REVOCATE":x="error"===(null==S?void 0:S.key)?null==S||null===(v=S.error)||void 0===v?void 0:v.message:O(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":x="error"===(null==S?void 0:S.key)?null==S||null===(f=S.error)||void 0===f?void 0:f.message:O(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":x="error"===(null==S?void 0:S.key)?null==S||null===(p=S.error)||void 0===p?void 0:p.message:O(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":x="error"===(null==S?void 0:S.key)?null==S||null===(m=S.error)||void 0===m?void 0:m.message:O(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":x="error"===(null==S?void 0:S.key)?null==S||null===(h=S.error)||void 0===h?void 0:h.message:O(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":x="error"===(null==S?void 0:S.key)?null==S||null===(g=S.error)||void 0===g?void 0:g.message:O(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":x="error"===(null==S?void 0:S.key)?null==S||null===(E=S.error)||void 0===E?void 0:E.message:O(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:x="error"===(null==S?void 0:S.key)?null==S||null===(_=S.error)||void 0===_?void 0:_.message:b("ES_"+C+"_"+(null==S||null===(y=S.action)||void 0===y?void 0:y.action)+"_UPDATE_SUCCESS")}return i.createElement(i.Fragment,null,S&&i.createElement(t.Toast,{error:"error"===S.key,label:x,onClose:A}))}var N,L,I="error"===(null==S?void 0:S.key)?null==S||null===(N=S.error)||void 0===N?void 0:N.message:"ES_"+C+"_"+(null==S||null===(L=S.action)||void 0===L?void 0:L.action)+"_UPDATE_SUCCESS";return i.createElement(i.Fragment,null,S&&i.createElement(t.Toast,{error:"error"===S.key,label:b(I),onClose:A}))}function _n(e){var l,r,a,c,d,s,v,f,p,m,h,g,E,_,y,b,S=e.workflowDetails,A=e.displayMenu,C=e.onActionSelect,T=e.setDisplayMenu,D=e.businessService,w=e.forcedActionPrefix,O=e.ActionBarStyle,x=void 0===O?{}:O,N=e.MenuStyle,L=void 0===N?{}:N,I=o.useTranslation().t,P=Digit.UserService.getUser(),F=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){var R=sessionStorage.getItem("Digit.citizen.userRequestObject"),M=R?JSON.parse(R):{};P=null==M?void 0:M.value}var B=null===(l=P)||void 0===l||null===(r=l.info)||void 0===r||null===(a=r.roles)||void 0===a?void 0:a.map(function(e){return e.code}),U=!1,k=!1,W=(null==S||null===(c=S.data)||void 0===c||null===(d=c.actionState)||void 0===d||null===(s=d.nextActions)||void 0===s?void 0:s.filter(function(e){return(null==B?void 0:B.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles}))||(null==S||null===(v=S.data)||void 0===v||null===(f=v.nextActions)||void 0===f?void 0:f.filter(function(e){return(null==B?void 0:B.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles}));return Digit.Hooks.useClickOutside(F,function(){T(!1)},A),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==W?void 0:W.length)||null!=W&&null!==(p=W[0])&&void 0!==p&&null!==(m=p.redirectionUrl)&&void 0!==m&&m.pathname.includes("/pt/property-details/")&&1==(null==W?void 0:W.length)?(k=!1,U=!0):(null==W?void 0:W.length)>0&&(k=!0,U=!1),i.createElement(i.Fragment,null,!(null!=S&&S.isLoading)&&k&&!U&&i.createElement(t.ActionBar,{style:u({},x)},A&&(null!=S&&null!==(h=S.data)&&void 0!==h&&null!==(g=h.actionState)&&void 0!==g&&g.nextActions||null!=S&&null!==(E=S.data)&&void 0!==E&&E.nextActions)?i.createElement(t.Menu,{localeKeyPrefix:w||"WF_EMPLOYEE_"+(null==D?void 0:D.toUpperCase()),options:W,optionKey:"action",t:I,onSelect:C,style:L}):null,i.createElement(t.SubmitBar,{ref:F,label:I("WF_TAKE_ACTION"),onSubmit:function(){return T(!A)}})),!(null!=S&&S.isLoading)&&!k&&U&&i.createElement(t.ActionBar,{style:u({},x)},i.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==W||null===(_=W[0])||void 0===_?void 0:_.action,value:null==W||null===(y=W[0])||void 0===y?void 0:y.action,onClick:function(e){C((null==W?void 0:W[0])||{})}},I((w||"WF_EMPLOYEE_"+(null==D?void 0:D.toUpperCase()))+"_"+(null==W||null===(b=W[0])||void 0===b?void 0:b.action)))))}var yn=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},bn=function(e){return i.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},i.createElement(yn,null))};function Sn(e){var n=e.action,l=e.closeWarningPopup,r=o.useTranslation().t,a=window.Digit.Utils.browser.isMobile();return i.createElement(i.Fragment,null,i.createElement(t.Modal,{headerBarMain:i.createElement("h1",{className:"heading-m"},r("PT_DUES_ARE_PENDING")),headerBarEnd:i.createElement(bn,{onClick:function(){l()}}),hideSubmit:!0,isDisabled:!1,popupStyles:a?{}:{width:"29%",marginTop:"auto"}},i.createElement(t.Card,null,i.createElement("div",{style:{marginBottom:"30px"}},i.createElement("h1",null,r("PT_YOU_HAVE")," ",null==n?void 0:n.AmountDueForPay," ",r("PT_DUE_WARNING_MSG2"))),i.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+r("PT_AMOUNT_DUE"),text:""+r(null==n?void 0:n.AmountDueForPay)}),i.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},i.createElement(t.ButtonSelector,{theme:"border",label:r("ES_PT_COMMON_CANCEL"),onSubmit:l,style:{marginLeft:"10px"}}),i.createElement(t.ButtonSelector,{label:r("PT_COLLECT"),onSubmit:function(){var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}var An=function(e){var a,c=Digit.ULBService.getCurrentTenantId(),d=Digit.ULBService.getStateId(),s=o.useTranslation().t,v=l.useHistory(),f=l.useParams().id,p=n.useState(!1),m=p[0],h=p[1],g=n.useState(null),E=g[0],_=g[1],y=n.useState(!1),b=y[0],S=y[1],A=n.useState(!1),C=A[0],T=A[1],D=n.useState(!1),w=D[0],O=D[1],x=e.applicationDetails,N=e.showToast,L=e.setShowToast,I=e.isLoading,P=e.isDataLoading,F=e.applicationData,R=e.mutate,M=e.nocMutation,B=e.workflowDetails,U=e.businessService,k=e.closeToast,W=e.moduleCode,j=e.timelineStatusPrefix,H=e.forcedActionPrefix,z=e.statusAttribute,V=e.ActionBarStyle,Y=e.MenuStyle,q=e.paymentsList,G=e.showTimeLine,K=void 0===G||G,X=e.oldValue,$=e.isInfoLabel,J=void 0!==$&&$,Z=e.clearDataDetails;n.useEffect(function(){N&&B.revalidate()},[N]);var Q=r.useQueryClient(),ee=function(){_(null),S(!1)};return I||C?i.createElement(t.Loader,null):i.createElement(i.Fragment,null,I?i.createElement(t.Loader,null):i.createElement(i.Fragment,null,i.createElement(gn,{applicationDetails:x,workflowDetails:B,isDataLoading:P,applicationData:F,businessService:U,timelineStatusPrefix:j,statusAttribute:z,paymentsList:q,showTimeLine:K,oldValue:X,isInfoLabel:J}),b?i.createElement(Yt,{t:s,action:E,tenantId:c,state:d,id:f,applicationDetails:x,applicationData:null==x?void 0:x.applicationData,closeModal:ee,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{var i=function(t){if(l)return t;R&&(T(!0),R(e,{onError:function(e,t){T(!1),L({key:"error",error:e}),setTimeout(k,5e3)},onSuccess:function(e,t){var i,l,o,r,a,u,c,d,f;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),T(!1),null!=n&&n.bpa&&(e.selectedAction=E,v.replace("/digit-ui/employee/obps/response",{data:e})),null!=n&&n.isStakeholder&&(e.selectedAction=E,v.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=n&&n.isNoc&&v.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(i=e.Amendments)||void 0===i?void 0:i.length)>0?null!=t&&null!==(l=t.AmendmentUpdate)&&void 0!==l&&null!==(o=l.workflow)&&void 0!==o&&o.action.includes("SEND_BACK")?L({key:"success",label:s("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(r=t.AmendmentUpdate)&&void 0!==r&&null!==(a=r.workflow)&&void 0!==a&&a.action.includes("RE-SUBMIT")?L({key:"success",label:s("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(u=t.AmendmentUpdate)&&void 0!==u&&null!==(c=u.workflow)&&void 0!==c&&c.action.includes("APPROVE")?L({key:"success",label:s("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(d=t.AmendmentUpdate)&&void 0!==d&&null!==(f=d.workflow)&&void 0!==f&&f.action.includes("REJECT")&&L({key:"success",label:s("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(L({key:"success",action:E}),Z&&setTimeout(Z,3e3),setTimeout(k,5e3),Q.clear(),Q.refetchQueries("APPLICATION_SEARCH"))}})),ee()},l=!1;T(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute(u({},e)));var o=function(){if(!1!==t&&M){var e,n=null===(e=t)||void 0===e?void 0:e.map(function(e){return null==M?void 0:M.mutateAsync(e)}),i=_t(function(){return T(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(function(e){var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,i,o,r,a,u,c,d,v,f,p;T(!1);var m=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(i=n.Errors)&&void 0!==i&&null!==(o=i[0])&&void 0!==o&&o.code?s(null==e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a||null===(u=a.Errors)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.code):(null==e||null===(d=e.response)||void 0===d||null===(v=d.data)||void 0===v||null===(f=v.Errors)||void 0===f||null===(p=f[0])||void 0===p?void 0:p.message)||e;ee(),L({key:"error",error:{message:m}}),setTimeout(k,5e3),l=!0});if(i&&i.then)return i.then(function(){})}}();return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(e){return Promise.reject(e)}},actionData:null==B||null===(a=B.data)||void 0===a?void 0:a.timeline,businessService:U,workflowDetails:B,moduleCode:W}):null,w?i.createElement(Sn,{action:E,workflowDetails:B,businessService:U,isWarningPop:w,closeWarningPopup:function(){O(!1)}}):null,i.createElement(En,{t:s,showToast:N,closeToast:k,businessService:U}),i.createElement(_n,{workflowDetails:B,displayMenu:m,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)L({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(k,5e3);else if(null!=e&&e.isWarningPopUp)O(!0);else if(null!=e&&e.redirectionUrll){var t,n,i,l,o;if("ACTIVATE_CONNECTION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action))v.push(""+(null==e||null===(i=e.redirectionUrll)||void 0===i?void 0:i.pathname),JSON.stringify({data:null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.state,url:""+(null===(o=location)||void 0===o?void 0:o.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action)){var r,a;v.push(""+(null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.pathname),{data:null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.state})}else{var c;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(c=e.redirectionUrll)||void 0===c?void 0:c.pathname))}}else if(null!=e&&e.redirectionUrl){var d,s;v.push({pathname:null===(d=e.redirectionUrl)||void 0===d?void 0:d.pathname,state:u({},null===(s=e.redirectionUrl)||void 0===s?void 0:s.state)})}else S(!0);_(e),h(!1)},setDisplayMenu:h,businessService:U,forcedActionPrefix:H,ActionBarStyle:V,MenuStyle:Y})))};function Cn(e){var l,o=e.t,r=e.document,a=e.setNocDocuments,u=e.nocDocuments,c=null==u?void 0:u.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==r?void 0:r.code)})[0],d=Digit.ULBService.getStateId(),s=n.useState(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l[0])[0],v=n.useState(null),f=v[0],p=v[1],m=n.useState(function(){return(null==c?void 0:c.fileStoreId)||null})[0];return n.useEffect(function(){null!=s&&s.code&&a(function(e){if(0===(null==m?void 0:m.length)||null===m)return e;var t=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.fileStoreId)!==m});return[].concat(t,[{documentType:null==s?void 0:s.code,fileStoreId:m,documentUid:m,fileName:(null==f?void 0:f.name)||""}])})},[m,s]),i.createElement("div",null,i.createElement(t.LabelFieldPair,null,i.createElement(t.CardLabel,{className:"card-label-smaller",style:{fontWeight:"700",width:"50%"}},""+o("NOC_UPLOAD_FILE_LABEL")),i.createElement("div",{className:"field"},i.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:d,getFormState:function(e){return function(e){var t,n=Object.fromEntries(e),i=Object.values(n),l=i&&(null==i?void 0:i.map(function(e){var t,n,i;return{documentType:null==s?void 0:s.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,fileName:(null==e||null===(i=e.file)||void 0===i?void 0:i.name)||""}}));sessionStorage.setItem("NewNOCDocs",JSON.stringify(l)),(t=i[i.length-1])&&p(t.file)}(e)},t:o,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var Tn=function(e){var l=e.registerRef,r=e.searchFieldComponents,a=o.useTranslation().t;return window.Digit.Utils.browser.isMobile()?i.createElement(n.Fragment,null,i.createElement(t.SearchField,null,i.createElement("label",null,a("NOC_APPLICATION_NUMBER_LABEL")),i.createElement(t.TextInput,{name:"applicationNo",inputRef:l({})})),i.createElement(t.SearchField,null,i.createElement("label",null,a("NOC_BPA_APPLICATION_NUMBER_LABEL")),i.createElement(t.TextInput,{name:"sourceRefId",inputRef:l({})}))):i.createElement(i.Fragment,null,i.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:"24px"}},i.createElement("div",{className:"search-complaint-container"},i.createElement("div",{className:"complaint-input-container",style:{textAlign:"start"}},i.createElement(t.SearchField,null,i.createElement("label",null,a("NOC_APPLICATION_NUMBER_LABEL")),i.createElement(t.TextInput,{name:"applicationNo",inputRef:l({})})),i.createElement(t.SearchField,null,i.createElement("label",null,a("NOC_BPA_APPLICATION_NUMBER_LABEL")),i.createElement(t.TextInput,{name:"sourceRefId",inputRef:l({})})),i.createElement("div",{className:"search-action-wrapper",style:{width:"100%"}},r)))))},Dn=function(e){var l=e.statuses,r=e.isInboxLoading,u=e.controlFilterForm,c=e.setFilterFormValue,d=e.applicationTypesOfBPA,s=o.useTranslation().t,f=(Digit.ULBService.getStateId(),[{code:"ASSIGNED_TO_ME",name:""+s("ES_INBOX_ASSIGNED_TO_ME")},{code:"ASSIGNED_TO_ALL",name:""+s("ES_INBOX_ASSIGNED_TO_ALL")}]);null==d||d.forEach(function(e){e.name=s("WF_BPA_"+e.code),e.i18nKey=s("WF_BPA_"+e.code)});var p=a.useWatch({control:u,name:"businessService",defaultValue:null});return i.createElement(n.Fragment,null,i.createElement(t.FilterFormField,null,i.createElement(a.Controller,{name:"assignee",control:u,render:function(e){return i.createElement(t.RadioButtons,{onSelect:function(t){e.onChange(t.code)},selectedOption:f.filter(function(t){return t.code===e.value})[0],optionsKey:"name",options:f})}})),i.createElement(t.FilterFormField,null,i.createElement(a.Controller,{name:"businessService",control:u,render:function(e){return i.createElement(n.Fragment,null,i.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},s("BUSINESS_SERVICE")),i.createElement(t.RadioButtons,{onSelect:function(t){c("applicationStatus",[]),e.onChange(t)},selectedOption:e.value,optionsKey:"i18nKey",options:v()||[]}))}})),p?i.createElement(t.FilterFormField,null,i.createElement(a.Controller,{name:"applicationStatus",control:u,render:function(e){var o=n.useMemo(function(){var n;return null==l||null===(n=l.filter(function(e){return e.businessservice===p.code}))||void 0===n?void 0:n.map(function(n){var l;return i.createElement(t.CheckBox,{onChange:function(t){var i,l;return l=t.target.checked?[].concat(e.value,[null==n?void 0:n.statusid]):null===(i=e.value)||void 0===i?void 0:i.filter(function(e){return e!==(null==n?void 0:n.statusid)}),void e.onChange(l)},checked:null===(l=e.value)||void 0===l?void 0:l.includes(null==n?void 0:n.statusid),label:s("WF_"+n.businessservice+"_"+n.applicationstatus.split("_").pop())+" ("+n.count+")"})})},[e.value,l,p]);return i.createElement(n.Fragment,null,i.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},s("ACTION_TEST_APPLICATION_STATUS")),r?i.createElement(t.Loader,null):i.createElement(n.Fragment,null,o))}})):null)};function wn(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function On(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function xn(e){On(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Nn(e,t){On(2,arguments);var n=xn(e).getTime(),i=wn(t);return new Date(n+i)}function Ln(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function In(e){return On(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Pn(e){if(On(1,arguments),!In(e)&&"number"!=typeof e)return!1;var t=xn(e);return!isNaN(Number(t))}var Fn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Rn(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,i=e.formats[n]||e.formats[e.defaultWidth];return i}}var Mn={date:Rn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Rn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Rn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Un(e){return function(t,n){var i,l=n||{};if("formatting"===(l.context?String(l.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,r=l.width?String(l.width):o;i=e.formattingValues[r]||e.formattingValues[o]}else{var a=e.defaultWidth,u=l.width?String(l.width):e.defaultWidth;i=e.values[u]||e.values[a]}return i[e.argumentCallback?e.argumentCallback(t):t]}}function kn(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,l=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],o=t.match(l);if(!o)return null;var r,a=o[0],u=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?jn(u,function(e){return e.test(a)}):Wn(u,function(e){return e.test(a)});r=e.valueCallback?e.valueCallback(c):c,r=n.valueCallback?n.valueCallback(r):r;var d=t.slice(a.length);return{value:r,rest:d}}}function Wn(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function jn(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var Hn,zn={code:"en-US",formatDistance:function(e,t,n){var i,l=Fn[e];return i="string"==typeof l?l:1===t?l.one:l.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Mn,formatRelative:function(e,t,n,i){return Bn[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Un({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Un({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Un({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Un({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Un({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Hn={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Hn.matchPattern);if(!n)return null;var i=n[0],l=e.match(Hn.parsePattern);if(!l)return null;var o=Hn.valueCallback?Hn.valueCallback(l[0]):l[0];o=t.valueCallback?t.valueCallback(o):o;var r=e.slice(i.length);return{value:o,rest:r}}),era:kn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:kn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:kn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vn(e,t){On(2,arguments);var n=wn(t);return Nn(e,-n)}function Yn(e){On(1,arguments);var t=1,n=xn(e),i=n.getUTCDay(),l=(i<t?7:0)+i-t;return n.setUTCDate(n.getUTCDate()-l),n.setUTCHours(0,0,0,0),n}function qn(e){On(1,arguments);var t=xn(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var l=Yn(i),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var r=Yn(o);return t.getTime()>=l.getTime()?n+1:t.getTime()>=r.getTime()?n:n-1}function Gn(e){On(1,arguments);var t=qn(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var i=Yn(n);return i}function Kn(e,t){On(1,arguments);var n=t||{},i=n.locale,l=i&&i.options&&i.options.weekStartsOn,o=null==l?0:wn(l),r=null==n.weekStartsOn?o:wn(n.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=xn(e),u=a.getUTCDay(),c=(u<r?7:0)+u-r;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function Xn(e,t){On(1,arguments);var n=xn(e),i=n.getUTCFullYear(),l=t||{},o=l.locale,r=o&&o.options&&o.options.firstWeekContainsDate,a=null==r?1:wn(r),u=null==l.firstWeekContainsDate?a:wn(l.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(i+1,0,u),c.setUTCHours(0,0,0,0);var d=Kn(c,t),s=new Date(0);s.setUTCFullYear(i,0,u),s.setUTCHours(0,0,0,0);var v=Kn(s,t);return n.getTime()>=d.getTime()?i+1:n.getTime()>=v.getTime()?i:i-1}function $n(e,t){On(1,arguments);var n=t||{},i=n.locale,l=i&&i.options&&i.options.firstWeekContainsDate,o=null==l?1:wn(l),r=null==n.firstWeekContainsDate?o:wn(n.firstWeekContainsDate),a=Xn(e,t),u=new Date(0);u.setUTCFullYear(a,0,r),u.setUTCHours(0,0,0,0);var c=Kn(u,t);return c}function Jn(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}var Zn={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear();return n.ordinalNumber(i>0?i:1-i,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return Jn("yy"===t?i%100:i,t.length)}(e,t)},Y:function(e,t,n,i){var l=Xn(e,i),o=l>0?l:1-l;return"YY"===t?Jn(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Jn(o,t.length)},R:function(e,t){return Jn(qn(e),t.length)},u:function(e,t){return Jn(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Jn(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Jn(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Jn(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return Jn(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var l=function(e,t){On(1,arguments);var n=xn(e),i=Kn(n,t).getTime()-$n(n,t).getTime();return Math.round(i/6048e5)+1}(e,i);return"wo"===t?n.ordinalNumber(l,{unit:"week"}):Jn(l,t.length)},I:function(e,t,n){var i=function(e){On(1,arguments);var t=xn(e),n=Yn(t).getTime()-Gn(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):Jn(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return Jn(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var i=function(e){On(1,arguments);var t=xn(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),l=n-i;return Math.floor(l/864e5)+1}(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):Jn(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var l=e.getUTCDay(),o=(l-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Jn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(l,{width:"short",context:"formatting"});case"eeee":default:return n.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var l=e.getUTCDay(),o=(l-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Jn(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(l,{width:"narrow",context:"standalone"});case"cccccc":return n.day(l,{width:"short",context:"standalone"});case"cccc":default:return n.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),l=0===i?7:i;switch(t){case"i":return String(l);case"ii":return Jn(l,t.length);case"io":return n.ordinalNumber(l,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,l=e.getUTCHours();switch(i=12===l?"noon":0===l?"midnight":l/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,l=e.getUTCHours();switch(i=l>=17?"evening":l>=12?"afternoon":l>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return function(e,t){return Jn(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return Jn(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):Jn(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):Jn(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return Jn(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return Jn(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,i=e.getUTCMilliseconds();return Jn(Math.floor(i*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,i){var l=(i._originalDate||e).getTimezoneOffset();if(0===l)return"Z";switch(t){case"X":return ei(l);case"XXXX":case"XX":return ti(l);case"XXXXX":case"XXX":default:return ti(l,":")}},x:function(e,t,n,i){var l=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return ei(l);case"xxxx":case"xx":return ti(l);case"xxxxx":case"xxx":default:return ti(l,":")}},O:function(e,t,n,i){var l=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qn(l,":");case"OOOO":default:return"GMT"+ti(l,":")}},z:function(e,t,n,i){var l=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qn(l,":");case"zzzz":default:return"GMT"+ti(l,":")}},t:function(e,t,n,i){return Jn(Math.floor((i._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,i){return Jn((i._originalDate||e).getTime(),t.length)}};function Qn(e,t){var n=e>0?"-":"+",i=Math.abs(e),l=Math.floor(i/60),o=i%60;if(0===o)return n+String(l);var r=t||"";return n+String(l)+r+Jn(o,2)}function ei(e,t){return e%60==0?(e>0?"-":"+")+Jn(Math.abs(e)/60,2):ti(e,t)}function ti(e,t){var n=t||"",i=e>0?"-":"+",l=Math.abs(e);return i+Jn(Math.floor(l/60),2)+n+Jn(l%60,2)}function ni(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function ii(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var li={p:ii,P:function(e,t){var n,i=e.match(/(P+)(p+)?/)||[],l=i[1],o=i[2];if(!o)return ni(e,t);switch(l){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",ni(l,t)).replace("{{time}}",ii(o,t))}},oi=["D","DD"],ri=["YY","YYYY"];function ai(e){return-1!==oi.indexOf(e)}function ui(e){return-1!==ri.indexOf(e)}function ci(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var di=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,si=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vi=/^'([^]*?)'?$/,fi=/''/g,pi=/[a-zA-Z]/;function mi(e,t,n){On(2,arguments);var i=String(t),l=n||{},o=l.locale||zn,r=o.options&&o.options.firstWeekContainsDate,a=null==r?1:wn(r),u=null==l.firstWeekContainsDate?a:wn(l.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,d=null==c?0:wn(c),s=null==l.weekStartsOn?d:wn(l.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var v=xn(e);if(!Pn(v))throw new RangeError("Invalid time value");var f=Ln(v),p=Vn(v,f),m={firstWeekContainsDate:u,weekStartsOn:s,locale:o,_originalDate:v},h=i.match(si).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,li[t])(e,o.formatLong,m):e}).join("").match(di).map(function(n){if("''"===n)return"'";var i=n[0];if("'"===i)return hi(n);var r=Zn[i];if(r)return!l.useAdditionalWeekYearTokens&&ui(n)&&ci(n,t,e),!l.useAdditionalDayOfYearTokens&&ai(n)&&ci(n,t,e),r(p,n,o.localize,m);if(i.match(pi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return n}).join("");return h}function hi(e){return e.match(vi)[1].replace(fi,"'")}var gi=function(e){var l,r,u=a.useFormContext(),c=u.register,d=u.control,s=u.setValue,f=u.getValues,p=u.reset,m=u.formState,h=o.useTranslation().t,g=v();return i.createElement(n.Fragment,null,i.createElement(t.SearchField,null,i.createElement("label",null,h("NOC_APP_NO_LABEL")),i.createElement(t.TextInput,{name:"applicationNo",inputRef:c({})})),i.createElement(t.SearchField,null,i.createElement("label",null,h("NOC_SOURCE_MODULE_NUMBER")),i.createElement(t.TextInput,{name:"sourceRefId",inputRef:c({})})),i.createElement(t.SearchField,null,i.createElement("label",null,h("NOC_TYPE_LABEL")),i.createElement(a.Controller,{control:d,name:"nocType",render:function(e){return i.createElement(t.Dropdown,{selected:1==(null==g?void 0:g.length)?g[0]:e.value,select:e.onChange,onBlur:e.onBlur,option:g||[],optionKey:"i18nKey",t:h,disable:1==(null==g?void 0:g.length)})}})),i.createElement(t.SearchField,null,i.createElement("label",null,h("NOC_APP_MOBILE_NO_SEARCH_PARAM")),i.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:c({minLength:{value:10,message:h("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:h("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:h("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:i.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),i.createElement(t.CardLabelError,null,null==m||null===(l=m.errors)||void 0===l||null===(r=l.mobileNumber)||void 0===r?void 0:r.message)),i.createElement(t.SearchField,null,i.createElement("label",null,h("NOC_NUMBER_LABEL")),i.createElement(t.TextInput,{name:"nocNo",inputRef:c({})})),i.createElement(t.SearchField,{className:"submit"},i.createElement(t.SubmitBar,{label:h("ES_COMMON_SEARCH"),submit:!0}),i.createElement("p",{style:{marginTop:"24px"},onClick:function(){var t,n;s("applicationNo",null),s("sourceRefId",null),s("mobileNumber",null),s("nocType",null==g||null===(t=g[0])||void 0===t?void 0:t.code),s("offset",0),s("limit",10),s("sortBy","commencementDate"),s("sortOrder","DESC"),s("isSubmitSuccessful","false"),p({applicationNo:"",sourceRefId:"",nocType:"",nocNo:"",mobileNumber:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",isSubmitSuccessful:!1}),s("offset",f("offset")-f("limit")),null==e||e.onSubmit({nocType:null==g||null===(n=g[0])||void 0===n?void 0:n.code,offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"},!0),null!=e&&e.isMobileView&&e.closeMobilePopupModal()}},h("ES_COMMON_CLEAR_ALL"))))},Ei=["currentlyActiveMobileModal"],_i=["currentlyActiveMobileModal"],yi=function(e){var l,r,d=e.SearchFormFieldsComponent,s=e.propsMobileInboxCards,v=e.isLoading,f=e.data,p=e.onSubmit,m=o.useTranslation().t,h=a.useFormContext().handleSubmit,g=n.useReducer(function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}},!1),E=g[0],_=g[1],y=function(){_({type:"remove"})},b=function(){return i.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:y},i.createElement(t.CloseSvg,null))},S=n.useCallback(function(e){return function(e){var n=e.currentlyActiveMobileModal,l=c(e,Ei),o=l.closeMobilePopupModal;switch(n){case"SearchFormComponent":return i.createElement(t.SearchForm,l,i.createElement(b,null),i.createElement("div",{className:"MobilePopupHeadingWrapper"},i.createElement("h2",null,m("ACTION_TEST_SEARCH_NOC_APPLICATION"),":")),i.createElement(d,{onSubmit:p,handleSubmit:h,isMobileView:!0,closeMobilePopupModal:o}));default:return i.createElement("span",null)}}(u({currentlyActiveMobileModal:e.currentlyActiveMobileModal},c(e,_i)))},[E]);return v?i.createElement(t.Loader,null):i.createElement(i.Fragment,null,i.createElement("div",{className:"searchBox"},i.createElement(t.SearchAction,{text:m("ES_COMMON_SEARCH"),handleActionClick:function(){return _({type:"set",payload:"SearchFormComponent"})}})),E?i.createElement(t.PopUp,null,i.createElement(S,{onSubmit:function(e){_({type:"remove"}),p(e)},handleSubmit:h,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",currentlyActiveMobileModal:E,closeMobilePopupModal:y})):null,null!=f&&null!==(l=f[0])&&void 0!==l&&l.display?i.createElement(t.Card,{style:{marginTop:20}},m(null==f||null===(r=f[0])||void 0===r?void 0:r.display).split("\\n").map(function(e,t){return i.createElement("p",{key:t,style:{textAlign:"center"}},e)})):i.createElement(t.DetailsCard,{data:s,isTwoDynamicPrefix:!1,linkPrefix:"/digit-ui/employee/noc/search/application-overview/",serviceRequestIdKey:m("NOC_APP_NO_LABEL")}))},bi=function(e){var l=e.columns,r=e.SearchFormFieldsComponent,u=e.onSubmit,c=e.data,d=e.isLoading,s=e.Count,v=a.useFormContext(),f=v.handleSubmit,p=v.setValue,m=v.getValues;null==m("offset")&&p("offset",0),null==m("limit")&&p("limit",10);var h=n.useState(Number(m("offset"))/Number(m("limit"))),g=h[0],E=h[1],_=o.useTranslation().t,y=function(){p("offset",s&&10*Math.ceil(s/10)-m("limit")),f(u)()},b=function(){p("offset",0),f(u)()},S=n.useCallback(function(e){0!==e.length&&(p("sortBy",e.id),p("sortOrder",e.desc?"DESC":"ASC"))},[]);function A(e){p("limit",Number(e.target.value)),f(u)()}function C(){p("offset",Number(m("offset"))+Number(m("limit"))),f(u)()}function T(){p("offset",Number(m("offset"))-Number(m("limit"))),f(u)()}n.useEffect(function(){null!=m("offset")&&null!=m("limit")&&E(Number(m("offset"))/Number(m("limit")))},[m("offset"),m("limit")]);var D=function(){return d?i.createElement(t.Loader,null):null!=c&&null!==(e=c[0])&&void 0!==e&&e.display?i.createElement(t.Card,{style:{marginTop:20}},_(null==c||null===(n=c[0])||void 0===n?void 0:n.display).split("\\n").map(function(e,t){return i.createElement("p",{key:t,style:{textAlign:"center"}},e)})):i.createElement(t.Table,{t:_,data:c,columns:l,getCellProps:function(e){return{style:{minWidth:e.column.Header===_("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:A,currentPage:g,onNextPage:C,onPrevPage:T,pageSizeLimit:Number(m("limit")),onSort:S,totalRecords:s,disableSort:!1,onLastPage:y,onFirstPage:b,sortParams:[{id:m("sortBy"),desc:"DESC"===m("sortOrder")}]});var e,n};return i.createElement(i.Fragment,null,i.createElement(t.SearchForm,{onSubmit:u,handleSubmit:f},i.createElement(r,{onSubmit:u,handleSubmit:f,isMobileView:!1})),i.createElement(D,null))},Si={NOCModule:function(e){var n=e.stateCode,o=e.userType,r=e.tenants,a=l.useRouteMatch().path,u=Digit.StoreData.getCurrentLanguage(),c=Digit.Services.useStore({stateCode:n,moduleCode:"common-noc",language:u}).isLoading;return Digit.SessionStorage.set("NOC_TENANTS",r),c?i.createElement(t.Loader,null):"citizen"===o?i.createElement("div",null):i.createElement(Et,{path:a,stateCode:n})},NOCCard:function(){var e,r,a=o.useTranslation().t,c=l.useLocation(),d=Digit.ULBService.getCurrentTenantId();if(!Digit.Utils.NOCAccess())return null;var s={filterForm:{moduleName:"noc-services",applicationStatus:"",locality:[],assignee:"ASSIGNED_TO_ALL",businessServiceArray:v(!0)||[]},searchForm:{},tableForm:{limit:10,offset:0}},f=Digit.Hooks.noc.useInbox({tenantId:d,filters:u({},s),config:{enabled:(null==s||null===(e=s.filterForm)||void 0===e||null===(r=e.businessServiceArray)||void 0===r?void 0:r.length)>0}}),p=f.isLoading,m=f.data,h=void 0===m?{}:m,g=h.totalCount,E=h.nearingSlaCount,_=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},i.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z",fill:"white"}))};n.useEffect(function(){"/digit-ui/employee"===c.pathname&&Digit.SessionStorage.del("NOC.INBOX")},[c.pathname]);var y=n.useMemo(function(){return{Icon:i.createElement(_,null),moduleName:a("ACTION_TEST_NOC"),kpis:[{count:p?"":g,label:a("TOTAL_FSM"),link:"/digit-ui/employee/obps/inbox"},{count:p?"-":E,label:a("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/obps/inbox"}],links:[{count:g,label:a("ES_COMMON_INBOX"),link:"/digit-ui/employee/noc/inbox"},{label:a("ES_COMMON_APPLICATION_SEARCH"),link:"/digit-ui/employee/noc/search"}]}},[p,g]);return Digit.Utils.NOCAccess()?i.createElement(t.EmployeeModuleCard,y):null},NOCApplicationOverview:function(){var e,r,a,c,v,f,p,m,h,g,E,_=l.useParams().id,y=o.useTranslation().t,b=Digit.ULBService.getCurrentTenantId(),S=null==b?void 0:b.split(".")[0],A=n.useState({}),C=A[0],T=A[1],D=n.useState(null),w=D[0],O=D[1],x={},N=n.useState(function(){return(null==x?void 0:x.fileStoreId)||null})[0],L=n.useState(null),I=L[0],P=L[1],F=n.useState([]),R=F[0],M=F[1],B=n.useState([]),U=B[0],k=B[1],W=n.useState([]),j=W[0],H=W[1],z=n.useState([]),V=z[0],Y=z[1],q=n.useState([]),G=q[0],K=q[1],X=n.useState({}),$=X[0],J=X[1],Z=n.useState(function(){return[]}),Q=Z[0],ee=Z[1],te=n.useState(!1),ne=te[0],ie=te[1],le=window.Digit.Utils.browser.isMobile(),oe=Digit.Hooks.obps.useMDMS(S,"NOC",["DocumentTypeMapping"]).data,re=Digit.Hooks.obps.useMDMS(S,"common-masters",["DocumentType"]).data,ae=Digit.Hooks.noc.useNOCDetails(y,b,{applicationNo:_}),ue=ae.isLoading,ce=ae.data,de=Digit.Hooks.noc.useNOCApplicationActions(b).mutate,se=Digit.Hooks.useWorkflowDetails({tenantId:b,id:_,moduleCode:"NOC"});null!=se&&null!==(e=se.data)&&void 0!==e&&null!==(r=e.actionState)&&void 0!==r&&r.nextActions&&!se.isLoading&&(se.data.actionState.nextActions=[].concat(null==se||null===(a=se.data)||void 0===a?void 0:a.nextActions)),se&&se.data&&!se.isLoading&&(se.data.initialActionState=(null==se||null===(g=se.data)||void 0===g?void 0:g.initialActionState)||u({},null==se||null===(E=se.data)||void 0===E?void 0:E.actionState)||{},se.data.actionState=u({},se.data)),n.useEffect(function(){k([null==ce?void 0:ce.applicationData])},[null==ce?void 0:ce.applicationData]),n.useEffect(function(){var e;H(null==oe||null===(e=oe.NOC)||void 0===e?void 0:e.DocumentTypeMapping)},[oe]),n.useEffect(function(){var e;Y(null==re||null===(e=re["common-masters"])||void 0===e?void 0:e.DocumentType)},[re]),n.useEffect(function(){sessionStorage.setItem("NewNOCDocs",JSON.stringify(G))},[G]),n.useEffect(function(){if(null!=U&&U.length&&null!=j&&j.length){var e=[];U.map(function(t){var n,i,l=j.filter(function(e){return(null==e?void 0:e.applicationType)===(null==t?void 0:t.applicationType)&&(null==e?void 0:e.nocType)===(null==t?void 0:t.nocType)});null!=l&&null!==(n=l[0])&&void 0!==n&&null!==(i=n.docTypes)&&void 0!==i&&i[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:t.additionalDetails,applicationStatus:t.applicationStatus,appNumberLink:t.applicationNo,nocNo:t.nocNo},e.push(l[0].docTypes[0]))});var t=[];e&&e.length>0&&e.map(function(e){var n=e.documentType;e.dropdownData=[],V.forEach(function(t){var i=t.code.slice(0,n.length);n===i&&(e.hasDropdown=!0,e.dropdownData.push(t))}),t.push(e)}),t.forEach(function(e){e.code=e.documentType,e.dropdownData.forEach(function(e){e.i18nKey=e.code})}),M(t)}},[U,j,V]),n.useEffect(function(){var e,t,n=[];null==U||null===(e=U[0])||void 0===e||null===(t=e.documents)||void 0===t||t.forEach(function(e,t,i){n.push(null==e?void 0:e.fileStoreId)}),ee(null==n?void 0:n.map(function(e){return e}))},[null==U||null===(c=U[0])||void 0===c?void 0:c.documents]),n.useEffect(function(){null!=Q&&Q.length&&Digit.UploadServices.Filefetch(Q,Digit.ULBService.getStateId()).then(function(e){J(null==e?void 0:e.data)})},[Q]);var ve=function(e){var l=e.t,o=e.nocDataDetails,r=e.nocDocumentsList;if(null!=o&&o.length&&null!=r&&r.length&&null!=(null==o?void 0:o[0])){var a,u,c,v,f,p,m,h,g,E,_,y,b,S,A,C,T,D,w,O,x="WF_"+(null==o||null===(a=o[0])||void 0===a?void 0:a.additionalDetails.workflowCode)+"_"+(null==o||null===(u=o[0])||void 0===u?void 0:u.applicationStatus);return i.createElement(n.Fragment,null,i.createElement("div",{style:{border:"1px solid #D6D5D4",background:"#FAFAFA",boxSizing:"border-box",borderRadius:"4px",padding:"8px",maxWidth:"950px",minWidth:"280px"}},i.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",fontSize:"20px"}},""+l("NOC_MAIN_"+s(null==r||null===(c=r[0])||void 0===c?void 0:c.code,".","_")+"_LABEL")),i.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},i.createElement(t.Row,{className:"border-none",label:""+l("NOC_"+(null==o||null===(v=o[0])||void 0===v?void 0:v.nocType)+"_APPLICATION_LABEL"),text:l(null==o||null===(f=o[0])||void 0===f?void 0:f.applicationNo)||"NA"}),i.createElement(t.Row,{className:"border-none",label:""+l("NOC_STATUS_LABEL"),text:l(x)||"NA",textStyle:"APPROVED"==(null==o||null===(p=o[0])||void 0===p?void 0:p.applicationStatus)||"AUTO_APPROVED"==(null==o||null===(m=o[0])||void 0===m?void 0:m.applicationStatus)?{color:"#00703C"}:{color:"#D4351C"}}),i.createElement(t.Row,{className:"border-none",label:""+l("NOC_SUBMITED_ON_LABEL"),text:null!=o&&null!==(h=o[0])&&void 0!==h&&null!==(g=h.additionalDetails)&&void 0!==g&&g.SubmittedOn?d(Number(null==o||null===(E=o[0])||void 0===E||null===(_=E.additionalDetails)||void 0===_?void 0:_.SubmittedOn)):"NA"}),i.createElement(t.Row,{className:"border-none",label:""+l("NOC_APPROVAL_NO_LABEL"),text:(null==o||null===(y=o[0])||void 0===y?void 0:y.nocNo)||"NA"}),i.createElement(t.Row,{className:"border-none",label:""+l("NOC_APPROVED_ON_LABEL"),text:"APPROVED"===x||"REJECTED"===x||"AUTO_APPROVED"===x||"AUTO_REJECTED"===x?d(Number(null==o||null===(b=o[0])||void 0===b||null===(S=b.auditDetails)||void 0===S?void 0:S.lastModifiedTime)):"NA"}),i.createElement(t.Row,{className:"border-none",label:""+l("Documents"),text:""})),null!=o&&null!==(A=o[0])&&void 0!==A&&A.documents&&(null==o||null===(C=o[0])||void 0===C?void 0:C.documents.length)>0?i.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null==o||null===(T=o[0])||void 0===T||null===(D=T.documents)||void 0===D?void 0:D.map(function(e,n){var o,a;return i.createElement("a",{target:"_",href:null===(o=$[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},i.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.createElement(t.PDFSvg,null)),i.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",width:"100px",color:"#505A5F"}},l("NOC_MAIN_"+s(null==r||null===(a=r[0])||void 0===a?void 0:a.code,".","_")+"_LABEL")))})):i.createElement("div",null,i.createElement("p",null,l("BPA_NO_DOCUMENTS_UPLOADED_LABEL"))),i.createElement("div",null,(null==se||null===(w=se.data)||void 0===w||null===(O=w.nextActions)||void 0===O?void 0:O.length)>0?null==R?void 0:R.map(function(e,t){return i.createElement(Cn,{key:t,document:e,t:l,error:I,setError:P,setNocDocuments:K,nocDocuments:G})}):null)))}return i.createElement(t.Loader,null)};return n.useEffect(function(){var e,l;ce&&(ie(!0),T(u({},ce,{applicationDetails:[null===(l=ce.applicationDetails,void 0===l&&(l=[]),e=l.map(function(e){return{title:e.title,belowComponent:function(){return i.createElement(n.Fragment,null,i.createElement("div",{style:{maxWidth:"950px"}},i.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},e.values.map(function(e){return i.createElement(t.Row,{className:"border-none",label:""+y(null==e?void 0:e.title),text:(null==e?void 0:e.value)||"NA"})}))))}}}))||void 0===e?void 0:e[0],{title:"NOC_DETAILS_SUMMARY_LABEL",belowComponent:function(){return i.createElement(ve,{t:y,data:ce,nocDataDetails:U,nocDocumentsList:R})}}]})),ie(!1))},[ce,R,U,N,Q,$]),i.createElement("div",{className:"employee-main-application-details"},i.createElement("div",null,i.createElement(t.Header,{styles:{fontSize:"32px"}},y("NOC_APP_OVER_VIEW_HEADER"))),i.createElement(An,{applicationDetails:C,isLoading:ue||ne,isDataLoading:ue,applicationData:null==ce?void 0:ce.applicationData,mutate:de,workflowDetails:se,businessService:null!=se&&null!==(v=se.data)&&void 0!==v&&v.applicationBusinessService?null==se||null===(f=se.data)||void 0===f?void 0:f.applicationBusinessService:null==ce||null===(p=ce.applicationData)||void 0===p?void 0:p.businessService,moduleCode:"NOC",ActionBarStyle:le?{}:{paddingRight:"50px"},MenuStyle:le?{}:{right:"50px"},showToast:w,setShowToast:O,closeToast:function(){O(null)},timelineStatusPrefix:"WF_"+(null==ce||null===(m=ce.applicationData)||void 0===m||null===(h=m.additionalDetails)||void 0===h?void 0:h.workflowCode)+"_"}))},NOCInbox:function(e){var r=e.parentRoute,c=o.useTranslation().t,d=Digit.ULBService.getCurrentTenantId(),s={},f={moduleName:"noc-services",applicationStatus:[],businessService:null,locality:[],assignee:"ASSIGNED_TO_ALL",businessServiceArray:v(!0)||[]},p={sortBy:"",limit:window.Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"DESC"},m=Digit.SessionStorage.get("NOC.INBOX"),h=n.useMemo(function(){return m||{filterForm:f,searchForm:s,tableForm:p}},[Object.values((null==m?void 0:m.filterForm)||{}),Object.values((null==m?void 0:m.searchForm)||{}),Object.values((null==m?void 0:m.tableForm)||{})]),g=n.useReducer(function(e,t){switch(t.action){case"mutateSearchForm":return Digit.SessionStorage.set("NOC.INBOX",u({},e,{searchForm:t.data})),u({},e,{searchForm:t.data});case"mutateFilterForm":return Digit.SessionStorage.set("NOC.INBOX",u({},e,{filterForm:t.data})),u({},e,{filterForm:t.data});case"mutateTableForm":return Digit.SessionStorage.set("NOC.INBOX",u({},e,{tableForm:t.data})),u({},e,{tableForm:t.data})}},h),E=g[0],_=g[1],y=Digit.Hooks.useBoundaryLocalities(d,"revenue",{},c),b=y.data,S=y.isLoading,A=Digit.Hooks.noc.useInbox({tenantId:d,filters:u({},E)}),C=A.isLoading,T=A.data,D=void 0===T?{}:T,w=D.table,O=D.statuses,x=D.totalCount,N={logoIcon:i.createElement(t.ComplaintIcon,null),headerText:"ACTION_TEST_NOC",links:[{text:c("ES_COMMON_APPLICATION_SEARCH"),link:"/digit-ui/employee/noc/search"}]},L=n.useCallback(function(e){return i.createElement(Tn,{registerRef:e.registerRef,searchFormState:e.searchFormState,searchFieldComponents:e.searchFieldComponents})},[]),I=n.useCallback(function(e){return i.createElement(Dn,{statuses:O,isInboxLoading:C,registerRef:e.registerRef,controlFilterForm:e.controlFilterForm,setFilterFormValue:e.setFilterFormValue,filterFormState:null==E?void 0:E.filterForm,getFilterFormValue:e.getFilterFormValue,localitiesForEmployeesCurrentTenant:b,loadingLocalitiesForEmployeesCurrentTenant:S})},[O,C,b,S]),P={SearchFormFields:L,onSearchFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:u({},p)}),_({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==E?void 0:E.searchForm,resetSearchFormDefaultValues:s,onSearchFormReset:function(e){e("sourceRefId",null),e("applicationNo",null),_({action:"mutateSearchForm",data:s})}},F={FilterFormFields:I,onFilterFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:u({},p)}),_({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==E?void 0:E.filterForm,resetFilterFormDefaultValues:f,onFilterFormReset:function(e){e("moduleName","bpa-services"),e("applicationStatus",""),e("locality",[]),e("assignee","ASSIGNED_TO_ALL"),e("applicationType",[]),_({action:"mutateFilterForm",data:f})}},R=function(e){var t,r,a,c,d=e.parentRoute,s=e.onPageSizeChange,v=e.formState,f=e.totalCount,p=e.table,m=e.dispatch,h=e.onSortingByData,g=o.useTranslation().t,E=n.useMemo(function(){return[{Header:g("NOC_APP_NO_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:function(e){var t=e.row;return i.createElement("div",null,i.createElement(l.Link,{to:d+"/inbox/application-overview/"+t.original.applicationId},i.createElement("span",{className:"link"},t.original.applicationId)))}},{Header:g("TL_COMMON_TABLE_COL_APP_DATE"),accessor:"applicationDate",Cell:function(e){var t,n,l,o=e.row;return null!==(t=o.original)&&void 0!==t&&t.date?(l=mi(new Date(null===(n=o.original)||void 0===n?void 0:n.date),"dd/MM/yyyy"),i.createElement("span",{className:"cell-text styled-cell"},l)):""}},{Header:g("NOC_MODULE_SOURCE_LABEL"),accessor:function(e){return g("MODULE_"+(null==e?void 0:e.source))},disableSortBy:!0},{Header:g("NOC_STATUS_LABEL"),accessor:function(e){return g(null==e?void 0:e.status)},disableSortBy:!0},{Header:g("WF_INBOX_HEADER_CURRENT_OWNER"),accessor:function(e){return null==e?void 0:e.owner},disableSortBy:!0},{Header:g("ES_INBOX_SLA_DAYS_REMAINING"),accessor:function(e){return"CS_NA"===(t=null==e?void 0:e.sla)?g(t):i.createElement("span","Active"===t||t>0?{className:"sla-cell-success"}:{className:"sla-cell-error"},t);var t}}]});return{getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},disableSort:!1,autoSort:!1,manualPagination:!0,initSortId:"applicationDate",onPageSizeChange:s,currentPage:(null===(t=v.tableForm)||void 0===t?void 0:t.offset)/(null===(r=v.tableForm)||void 0===r?void 0:r.limit),onNextPage:function(){var e,t;return m({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(t=v.tableForm)||void 0===t?void 0:t.limit)})})},onPrevPage:function(){var e,t;return m({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(t=v.tableForm)||void 0===t?void 0:t.limit)})})},pageSizeLimit:null===(a=v.tableForm)||void 0===a?void 0:a.limit,onSort:h,totalRecords:f,onSearch:null==v||null===(c=v.searchForm)||void 0===c?void 0:c.message,onLastPage:function(){var e;return m({action:"mutateTableForm",data:u({},v.tableForm,{offset:10*Math.ceil(f/10)-parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.limit)})})},onFirstPage:function(){return m({action:"mutateTableForm",data:u({},v.tableForm,{offset:0})})},data:p,columns:E}}(u({},{parentRoute:r,onPageSizeChange:function(e){_({action:"mutateTableForm",data:u({},E.tableForm,{limit:e.target.value})})},formState:E,totalCount:x,table:w,dispatch:_,onSortingByData:function(e){if(e.length>0){var t=e[0],n=t.id,i=t.desc;E.tableForm.sortBy===n&&E.tableForm.sortOrder===(i?"DESC":"ASC")||_({action:"mutateTableForm",data:u({},E.tableForm,{sortBy:n,sortOrder:i?"DESC":"ASC"})})}}})),M=function(e){var n=e.parentRoute,l=e.table,r=o.useTranslation().t;return{data:null==l?void 0:l.map(function(e){var t,n=e.applicationId,i=e.date,l=e.source,o=e.status,a=e.owner,u=e.sla;return(t={})[r("NOC_APP_NO_LABEL")]=n,t[r("TL_COMMON_TABLE_COL_APP_DATE")]=mi(new Date(i),"dd/MM/yyyy"),t[r("NOC_MODULE_SOURCE_LABEL")]=r("MODULE_"+l),t[r("NOC_STATUS_LABEL")]=r(o),t[r("WF_INBOX_HEADER_CURRENT_OWNER")]=a,t[r("ES_INBOX_SLA_DAYS_REMAINING")]=r(u),t}),linkPrefix:n+"/inbox/application-overview/",serviceRequestIdKey:r("NOC_APP_NO_LABEL"),MobileSortFormValues:function(){var e=[{code:"DESC",i18nKey:"ES_COMMON_SORT_BY_DESC"},{code:"ASC",i18nKey:"ES_COMMON_SORT_BY_ASC"}],n=a.useFormContext();return i.createElement(t.SearchField,null,i.createElement(a.Controller,{name:"sortOrder",control:n.control,render:function(n){var l=n.onChange,o=n.value;return i.createElement(t.RadioButtons,{onSelect:function(e){l(e.code)},selectedOption:e.filter(function(e){return e.code===o})[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}}({parentRoute:r,table:w}),B={onMobileSortOrderData:function(e){_({action:"mutateTableForm",data:u({},E.tableForm,{sortOrder:e.sortOrder})})},sortFormDefaultValues:null==E?void 0:E.tableForm,onSortFormReset:function(e){e("sortOrder","DESC"),_({action:"mutateTableForm",data:p})}};return i.createElement(n.Fragment,null,i.createElement(t.Header,null,c("ES_COMMON_INBOX"),x?i.createElement("p",{className:"inbox-count"},x):null),i.createElement(t.InboxComposer,u({isInboxLoading:C,PropsForInboxLinks:N},P,F,B,{propsForInboxTable:R,propsForInboxMobileCards:M,formState:E})))},NOCSearchApplication:function(e){var t=e.t,r=e.onSubmit,u=e.data,c=e.error,d=e.isLoading,s=e.Count,v=(n.useState(null),a.useForm({defaultValues:{}}));n.useEffect(function(){v.register("offset",0),v.register("limit",10),v.register("sortBy","commencementDate"),v.register("sortOrder","DESC")},[v.register]);var f=function(){var e=o.useTranslation().t,t=function(e){return i.createElement("span",{className:"cell-text"},e)};return n.useMemo(function(){return[{Header:e("NOC_APP_NO_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:function(e){var t=e.row;return i.createElement("div",null,i.createElement("span",{className:"link"},i.createElement(l.Link,{to:"/digit-ui/employee/noc/search/application-overview/"+(t.original.applicationNo||t.original.applicationNumber)},t.original.applicationNo||t.original.applicationNumber)))}},{Header:e("NOC_COMMON_TABLE_COL_APP_DATE_LABEL"),disableSortBy:!0,accessor:function(e){var n,i;return t(null!=e&&null!==(n=e.auditDetails)&&void 0!==n&&n.createdTime?Digit.DateUtils.ConvertEpochToDate(null==e||null===(i=e.auditDetails)||void 0===i?void 0:i.createdTime):"-")}},{Header:e("NOC_APPLICANTS_NAME_LABEL"),disableSortBy:!0,accessor:function(e){var n,i;return t(null!=e&&null!==(n=e.additionalDetails)&&void 0!==n&&n.applicantName?null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.applicantName:"-")}},{Header:e("NOC_SOURCE_MODULE_LABEL"),disableSortBy:!0,accessor:function(n){return t(e("MODULE_"+(null==n?void 0:n.source)||"-"))}},{Header:e("NOC_SOURCE_MODULE_NUMBER"),disableSortBy:!0,accessor:function(e){return t((null==e?void 0:e.sourceRefId)||"-")}},{Header:e("NOC_STATUS_LABEL"),accessor:function(n){return t(e((null==n?void 0:n.applicationStatus)&&""+n.applicationStatus||"-"))},disableSortBy:!0},{Header:e("WF_INBOX_HEADER_CURRENT_OWNER"),accessor:function(n){var i,l;return t(e((null==n||null===(i=n.additionalDetails)||void 0===i?void 0:i.currentOwner)&&""+(null==n||null===(l=n.additionalDetails)||void 0===l?void 0:l.currentOwner)||"-"))},disableSortBy:!0}]},[])}(),p=window.Digit.Utils.browser.isMobile(),m=n.useMemo(function(){return null==u?void 0:u.map(function(e){var n,i,l,o;return(o={})[t("NOC_APP_NO_LABEL")]=e.applicationNo,o[t("NOC_COMMON_TABLE_COL_APP_DATE_LABEL")]=Digit.DateUtils.ConvertEpochToDate(null===(n=e.auditDetails)||void 0===n?void 0:n.createdTime)||"-",o[t("NOC_APPLICANTS_NAME_LABEL")]=(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.applicantName)||"-",o[t("NOC_SOURCE_MODULE_LABEL")]=e.source?t("MODULE_"+e.source):"-",o[t("NOC_SOURCE_MODULE_NUMBER")]=(null==e?void 0:e.sourceRefId)||"-",o[t("WF_INBOX_HEADER_CURRENT_OWNER")]=(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.currentOwner)||"-",o[t("NOC_STATUS_LABEL")]=e.applicationStatus?t(""+e.applicationStatus):"-",o})},[u]);return i.createElement(a.FormProvider,v,p?i.createElement(yi,{SearchFormFieldsComponent:gi,propsMobileInboxCards:m,isLoading:d,data:u,getRedirectionLink:function(){return"noc/inbox/application-overview"},onSubmit:r}):i.createElement(bi,{columns:f,SearchFormFieldsComponent:gi,onSubmit:r,data:u,error:c,isLoading:d,Count:s}))}};exports.initNOCComponents=function(){Object.entries(Si).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
