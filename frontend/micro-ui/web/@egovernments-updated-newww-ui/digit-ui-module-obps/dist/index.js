var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,l=require("react-i18next"),i=require("react-router-dom"),o=require("@egovernments/digit-ui-react-components"),a=require("react-hook-form");require("react-dom");var r=require("react-query");function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}function d(e,n){if(null==e)return{};var t,l,i={},o=Object.keys(e);for(l=0;l<o.length;l++)n.indexOf(t=o[l])>=0||(i[t]=e[t]);return i}function c(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var s=function(e,n){return e===n||e!=e&&n!=n},v=function(e,n){for(var t=e.length;t--;)if(s(e[t][0],n))return t;return-1},p=Array.prototype.splice;function m(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}m.prototype.clear=function(){this.__data__=[],this.size=0},m.prototype.delete=function(e){var n=this.__data__,t=v(n,e);return!(t<0||(t==n.length-1?n.pop():p.call(n,t,1),--this.size,0))},m.prototype.get=function(e){var n=this.__data__,t=v(n,e);return t<0?void 0:n[t][1]},m.prototype.has=function(e){return v(this.__data__,e)>-1},m.prototype.set=function(e,n){var t=this.__data__,l=v(t,e);return l<0?(++this.size,t.push([e,n])):t[l][1]=n,this};var f=m,E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(e,n){return e(n={exports:{}},n.exports),n.exports}var A,S="object"==typeof E&&E&&E.Object===Object&&E,h="object"==typeof self&&self&&self.Object===Object&&self,b=S||h||Function("return this")(),y=b.Symbol,T=Object.prototype,C=T.hasOwnProperty,D=T.toString,P=y?y.toStringTag:void 0,N=Object.prototype.toString,I=y?y.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?function(e){var n=C.call(e,P),t=e[P];try{e[P]=void 0;var l=!0}catch(e){}var i=D.call(e);return l&&(n?e[P]=t:delete e[P]),i}(e):function(e){return N.call(e)}(e)},B=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)},O=function(e){if(!B(e))return!1;var n=L(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},R=b["__core-js_shared__"],x=(A=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",w=Function.prototype.toString,M=function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""},k=/^\[object .+?Constructor\]$/,F=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=function(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return function(e){return!(!B(e)||(n=e,x&&x in n))&&(O(e)?F:k).test(M(e));var n}(t)?t:void 0},H=U(b,"Map"),W=U(Object,"create"),j=Object.prototype.hasOwnProperty,z=Object.prototype.hasOwnProperty;function Y(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}Y.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},Y.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Y.prototype.get=function(e){var n=this.__data__;if(W){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return j.call(n,e)?n[e]:void 0},Y.prototype.has=function(e){var n=this.__data__;return W?void 0!==n[e]:z.call(n,e)},Y.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=W&&void 0===n?"__lodash_hash_undefined__":n,this};var K=Y,G=function(e,n){var t,l,i=e.__data__;return("string"==(l=typeof(t=n))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==t:null===t)?i["string"==typeof n?"string":"hash"]:i.map};function V(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}V.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(H||f),string:new K}},V.prototype.delete=function(e){var n=G(this,e).delete(e);return this.size-=n?1:0,n},V.prototype.get=function(e){return G(this,e).get(e)},V.prototype.has=function(e){return G(this,e).has(e)},V.prototype.set=function(e,n){var t=G(this,e),l=t.size;return t.set(e,n),this.size+=t.size==l?0:1,this};var X=V;function q(e){var n=this.__data__=new f(e);this.size=n.size}q.prototype.clear=function(){this.__data__=new f,this.size=0},q.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},q.prototype.get=function(e){return this.__data__.get(e)},q.prototype.has=function(e){return this.__data__.has(e)},q.prototype.set=function(e,n){var t=this.__data__;if(t instanceof f){var l=t.__data__;if(!H||l.length<199)return l.push([e,n]),this.size=++t.size,this;t=this.__data__=new X(l)}return t.set(e,n),this.size=t.size,this};var J=q,Z=function(){try{var e=U(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Q=function(e,n,t){"__proto__"==n&&Z?Z(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},$=Object.prototype.hasOwnProperty,ee=function(e,n,t){var l=e[n];$.call(e,n)&&s(l,t)&&(void 0!==t||n in e)||Q(e,n,t)},ne=function(e,n,t,l){var i=!t;t||(t={});for(var o=-1,a=n.length;++o<a;){var r=n[o],u=l?l(t[r],e[r],r,t,e):void 0;void 0===u&&(u=e[r]),i?Q(t,r,u):ee(t,r,u)}return t},te=function(e){return null!=e&&"object"==typeof e},le=function(e){return te(e)&&"[object Arguments]"==L(e)},ie=Object.prototype,oe=ie.hasOwnProperty,ae=ie.propertyIsEnumerable,re=le(function(){return arguments}())?le:function(e){return te(e)&&oe.call(e,"callee")&&!ae.call(e,"callee")},ue=Array.isArray,de=function(){return!1},ce=g(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,i=l&&l.exports===t?b.Buffer:void 0;e.exports=(i?i.isBuffer:void 0)||de}),se=/^(?:0|[1-9]\d*)$/,ve=function(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&se.test(e))&&e>-1&&e%1==0&&e<n},pe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},me={};me["[object Float32Array]"]=me["[object Float64Array]"]=me["[object Int8Array]"]=me["[object Int16Array]"]=me["[object Int32Array]"]=me["[object Uint8Array]"]=me["[object Uint8ClampedArray]"]=me["[object Uint16Array]"]=me["[object Uint32Array]"]=!0,me["[object Arguments]"]=me["[object Array]"]=me["[object ArrayBuffer]"]=me["[object Boolean]"]=me["[object DataView]"]=me["[object Date]"]=me["[object Error]"]=me["[object Function]"]=me["[object Map]"]=me["[object Number]"]=me["[object Object]"]=me["[object RegExp]"]=me["[object Set]"]=me["[object String]"]=me["[object WeakMap]"]=!1;var fe=function(e){return function(n){return e(n)}},Ee=g(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,i=l&&l.exports===t&&S.process,o=function(){try{return l&&l.require&&l.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),_e=Ee&&Ee.isTypedArray,ge=_e?fe(_e):function(e){return te(e)&&pe(e.length)&&!!me[L(e)]},Ae=Object.prototype.hasOwnProperty,Se=function(e,n){var t=ue(e),l=!t&&re(e),i=!t&&!l&&ce(e),o=!t&&!l&&!i&&ge(e),a=t||l||i||o,r=a?function(e,n){for(var t=-1,l=Array(e);++t<e;)l[t]=n(t);return l}(e.length,String):[],u=r.length;for(var d in e)!n&&!Ae.call(e,d)||a&&("length"==d||i&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ve(d,u))||r.push(d);return r},he=Object.prototype,be=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||he)},ye=function(e,n){return function(t){return e(n(t))}},Te=ye(Object.keys,Object),Ce=Object.prototype.hasOwnProperty,De=function(e){return null!=e&&pe(e.length)&&!O(e)},Pe=function(e){return De(e)?Se(e):function(e){if(!be(e))return Te(e);var n=[];for(var t in Object(e))Ce.call(e,t)&&"constructor"!=t&&n.push(t);return n}(e)},Ne=Object.prototype.hasOwnProperty,Ie=function(e){return De(e)?Se(e,!0):function(e){if(!B(e))return function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=be(e),t=[];for(var l in e)("constructor"!=l||!n&&Ne.call(e,l))&&t.push(l);return t}(e)},Le=g(function(e,n){var t=n&&!n.nodeType&&n,l=t&&e&&!e.nodeType&&e,i=l&&l.exports===t?b.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,n){if(n)return e.slice();var t=e.length,l=o?o(t):new e.constructor(t);return e.copy(l),l}}),Be=function(){return[]},Oe=Object.prototype.propertyIsEnumerable,Re=Object.getOwnPropertySymbols,xe=Re?function(e){return null==e?[]:(e=Object(e),function(n,t){for(var l=-1,i=null==n?0:n.length,o=0,a=[];++l<i;){var r=n[l];Oe.call(e,r)&&(a[o++]=r)}return a}(Re(e)))}:Be,we=function(e,n){for(var t=-1,l=n.length,i=e.length;++t<l;)e[i+t]=n[t];return e},Me=ye(Object.getPrototypeOf,Object),ke=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)we(n,xe(e)),e=Me(e);return n}:Be,Fe=function(e,n,t){var l=n(e);return ue(e)?l:we(l,t(e))},Ue=function(e){return Fe(e,Pe,xe)},He=function(e){return Fe(e,Ie,ke)},We=U(b,"DataView"),je=U(b,"Promise"),ze=U(b,"Set"),Ye=U(b,"WeakMap"),Ke=M(We),Ge=M(H),Ve=M(je),Xe=M(ze),qe=M(Ye),Je=L;(We&&"[object DataView]"!=Je(new We(new ArrayBuffer(1)))||H&&"[object Map]"!=Je(new H)||je&&"[object Promise]"!=Je(je.resolve())||ze&&"[object Set]"!=Je(new ze)||Ye&&"[object WeakMap]"!=Je(new Ye))&&(Je=function(e){var n=L(e),t="[object Object]"==n?e.constructor:void 0,l=t?M(t):"";if(l)switch(l){case Ke:return"[object DataView]";case Ge:return"[object Map]";case Ve:return"[object Promise]";case Xe:return"[object Set]";case qe:return"[object WeakMap]"}return n});var Ze=Je,Qe=Object.prototype.hasOwnProperty,$e=b.Uint8Array,en=function(e){var n=new e.constructor(e.byteLength);return new $e(n).set(new $e(e)),n},nn=/\w*$/,tn=y?y.prototype:void 0,ln=tn?tn.valueOf:void 0,on=Object.create,an=function(){function e(){}return function(n){if(!B(n))return{};if(on)return on(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}(),rn=Ee&&Ee.isMap,un=rn?fe(rn):function(e){return te(e)&&"[object Map]"==Ze(e)},dn=Ee&&Ee.isSet,cn=dn?fe(dn):function(e){return te(e)&&"[object Set]"==Ze(e)},sn={};sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object DataView]"]=sn["[object Boolean]"]=sn["[object Date]"]=sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object Symbol]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Error]"]=sn["[object Function]"]=sn["[object WeakMap]"]=!1;var vn=function e(n,t,l,i,o,a){var r,u=1&t,d=2&t,c=4&t;if(l&&(r=o?l(n,i,o,a):l(n)),void 0!==r)return r;if(!B(n))return n;var s=ue(n);if(s){if(r=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&Qe.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(n),!u)return function(e,n){var t=-1,l=e.length;for(n||(n=Array(l));++t<l;)n[t]=e[t];return n}(n,r)}else{var v=Ze(n),p="[object Function]"==v||"[object GeneratorFunction]"==v;if(ce(n))return Le(n,u);if("[object Object]"==v||"[object Arguments]"==v||p&&!o){if(r=d||p?{}:function(e){return"function"!=typeof e.constructor||be(e)?{}:an(Me(e))}(n),!u)return d?function(e,n){return ne(e,ke(e),n)}(n,function(e,n){return e&&ne(n,Ie(n),e)}(r,n)):function(e,n){return ne(e,xe(e),n)}(n,function(e,n){return e&&ne(n,Pe(n),e)}(r,n))}else{if(!sn[v])return o?n:{};r=function(e,n,t){var l,i,o=e.constructor;switch(n){case"[object ArrayBuffer]":return en(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,n){var t=n?en(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,n){var t=n?en(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,t);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(i=new(l=e).constructor(l.source,nn.exec(l))).lastIndex=l.lastIndex,i;case"[object Set]":return new o;case"[object Symbol]":return ln?Object(ln.call(e)):{}}}(n,v,u)}}a||(a=new J);var m=a.get(n);if(m)return m;a.set(n,r),cn(n)?n.forEach(function(i){r.add(e(i,t,l,i,n,a))}):un(n)&&n.forEach(function(i,o){r.set(o,e(i,t,l,o,n,a))});var f=s?void 0:(c?d?He:Ue:d?Ie:Pe)(n);return function(e,n){for(var t=-1,l=null==e?0:e.length;++t<l&&!1!==n(e[t],t););}(f||n,function(i,o){f&&(i=n[o=i]),ee(r,o,e(i,t,l,o,n,a))}),r},pn=function(e){return vn(e,5)},mn=function(e){switch(e){case"Name":return/^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i;case"MobileNo":return/^[6-9]{1}[0-9]{9}$/i}},fn=function(e,n,t){if(void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),""==n)return e;for(;e.includes(n);)e=e.replace(n,t);return e},En=function(){return require("uuid/v4")()},_n=function(e,n){var t,l,i={Noc:e},o=(null==n||null===(t=n.nocDocuments)||void 0===t?void 0:t.nocDocuments.length)>0&&(null==n||null===(l=n.nocDocuments)||void 0===l?void 0:l.nocDocuments.filter(function(n){var t;return n.documentType.includes(null==e||null===(t=e.nocType)||void 0===t?void 0:t.split("_")[0])}).map(function(e){return{fileName:(null==e?void 0:e.fileName)||"",name:(null==e?void 0:e.name)||"",fileStoreId:null==e?void 0:e.fileStoreId,fileUrl:"",isClickable:!0,link:"",title:null==e?void 0:e.documentType,documentType:null==e?void 0:e.documentType,id:null==e?void 0:e.id,additionalDetails:{}}}))||[];return o=[].concat(o,null!=n&&n.PrevStateNocDocuments?null==n?void 0:n.PrevStateNocDocuments.filter(function(n){var t;return n.documentType.includes(null==e||null===(t=e.nocType)||void 0===t?void 0:t.split("_")[0])}):[]),i.Noc.documents=o,i},gn=function(e,n,t,l){try{return Promise.resolve(Digit.OBPSService.scrutinyDetails(null==e?void 0:e.tenantId,{edcrNumber:null==e?void 0:e.edcrNumber})).then(function(i){var o,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z=null==i?void 0:i.edcrDetail[0];e.BlockIds=(k=null==e||null===(o=e.landInfo)||void 0===o?void 0:o.unit,F={},k&&k.map(function(e,n){F["Block_"+(n+1)]=e.id}),F),e.address=null==e||null===(a=e.landInfo)||void 0===a?void 0:a.address,e.address.locality.i18nkey=""+l(fn(null==e||null===(r=e.landInfo)||void 0===r||null===(d=r.address)||void 0===d?void 0:d.tenantId,".","_").toUpperCase()+"_REVENUE_"+(null==e||null===(c=e.landInfo)||void 0===c||null===(s=c.address)||void 0===s||null===(v=s.locality)||void 0===v?void 0:v.code)),e.placeName=(null==e||null===(p=e.additionalDetails)||void 0===p?void 0:p.GISPlaceName)||"",e.data={scrutinyNumber:{edcrNumber:null==z?void 0:z.edcrNumber},applicantName:null==z||null===(m=z.planDetail)||void 0===m||null===(f=m.planInformation)||void 0===f?void 0:f.applicantName,applicationDate:null==e||null===(E=e.auditDetails)||void 0===E?void 0:E.createdTime,applicationType:null==z?void 0:z.appliactionType,holdingNumber:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.holdingNo,occupancyType:null==z||null===(g=z.planDetail)||void 0===g||null===(A=g.planInformation)||void 0===A?void 0:A.occupancy,registrationDetails:null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.registrationDetails,riskType:Digit.Utils.obps.calculateRiskType(null==n||null===(h=n.BPA)||void 0===h?void 0:h.RiskTypeComputation,null==z||null===(b=z.planDetail)||void 0===b||null===(y=b.plot)||void 0===y?void 0:y.area,null==z||null===(T=z.planDetail)||void 0===T?void 0:T.blocks),serviceType:(null==e||null===(C=e.additionalDetails)||void 0===C?void 0:C.serviceType)||(null==z?void 0:z.applicationSubType)},null==e||e.landInfo.owners.map(function(e,n){e.gender={active:!0,code:e.gender,i18nKey:"COMMON_GENDER_"+e.gender}}),e.owners={owners:null==e||null===(D=e.landInfo)||void 0===D?void 0:D.owners,ownershipCategory:{active:!0,code:null==e||null===(P=e.landInfo)||void 0===P?void 0:P.ownershipCategory,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==e||null===(N=e.landInfo)||void 0===N?void 0:N.ownershipCategory.replaceAll(".","_"))}},e.riskType=Digit.Utils.obps.calculateRiskType(null==n||null===(I=n.BPA)||void 0===I?void 0:I.RiskTypeComputation,null==z||null===(L=z.planDetail)||void 0===L||null===(B=L.plot)||void 0===B?void 0:B.area,null==z||null===(O=z.planDetail)||void 0===O?void 0:O.blocks),e.subOccupancy=function(e){var n=[],t=[],i={};return e&&e.map(function(e,o){var a,r;n=null==e||null===(a=e.usageCategory)||void 0===a?void 0:a.split(","),t=[],n&&(null===(r=n)||void 0===r?void 0:r.length)>0&&""!=n&&n.map(function(e,n){t.push({code:e,i18nKey:"BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"),name:l("BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"))})}),i["Block_"+(o+1)]=t}),i}(null==e||null===(R=e.landInfo)||void 0===R?void 0:R.unit),e.uiFlow={flow:null!=e&&e.businessService.includes("OC")?"OCBPA":null==e||null===(x=e.businessService)||void 0===x?void 0:x.split(".")[0],applicationType:(null==e||null===(w=e.additionalDetails)||void 0===w?void 0:w.applicationType)||(null==z?void 0:z.appliactionType),serviceType:(null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.serviceType)||(null==z?void 0:z.applicationSubType)},null!=e&&e.businessService.includes("OC")?(sessionStorage.setItem("BPAintermediateValue",JSON.stringify(u({},e))),t.push("/digit-ui/citizen/obps/ocbpa/"+(null==e||null===(U=e.additionalDetails)||void 0===U?void 0:U.applicationType.toLowerCase())+"/"+(null==e||null===(H=e.additionalDetails)||void 0===H?void 0:H.serviceType.toLowerCase()))):(sessionStorage.setItem("BPAintermediateValue",JSON.stringify(u({},e))),t.push("/digit-ui/citizen/obps/bpa/"+(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.applicationType.toLowerCase())+"/"+(null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.serviceType.toLowerCase())))})}catch(e){return Promise.reject(e)}},An=function(e,n){var t=[];return e&&e.map(function(e){t.push(e.id?{documentType:e.documentType,fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",fileUrl:"",additionalDetails:{},id:e.id}:{documentType:e.documentType,fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",fileUrl:"",additionalDetails:{}})}),t=[].concat(t,n||[])};function Sn(e){var n="";return e.map(function(e,t){n=n+(0!==t?",":"")+e.code}),n}var hn=function(e){var n,t=[],l=null==e?void 0:e.subOccupancy;if(l){var i,o=Object.entries(l);null==e||null===(i=e.landInfo)||void 0===i||i.unit.map(function(e,n){o.map(function(n,l){var i;e.id&&e.floorNo===(null===(i=n[0])||void 0===i?void 0:i.split("_")[1])&&t.push(u({},e,{usageCategory:Sn(n[1])}))})}),o&&o.map(function(e,n){var l;t.length>0&&(null==t?void 0:t.some(function(n){var t;return(null==n?void 0:n.floorNo)===(null===(t=e[0])||void 0===t?void 0:t.split("_")[1])}))||t.push({blockIndex:n,floorNo:null===(l=e[0])||void 0===l?void 0:l.split("_")[1],unitType:"Block",usageCategory:Sn(e[1])})})}return t.length>0?t:null==e||null===(n=e.landInfo)||void 0===n?void 0:n.unit},bn=function(e,n){var t,l,i;if(n)return e.landInfo.owners;var o=pn(null==e||null===(t=e.owners)||void 0===t?void 0:t.owners);return o&&(null==o||o.forEach(function(e){var n,t;null!=e&&null!==(n=e.gender)&&void 0!==n&&n.code&&(e.gender=null===(t=e.gender)||void 0===t?void 0:t.code),null!=e&&e.fatherOrHusbandName||(e.fatherOrHusbandName="NAME"),e.active=!0})),null==e||null===(l=e.landInfo)||void 0===l||null===(i=l.owners)||void 0===i||i.map(function(e){(null==o?void 0:o.length)>0&&(null==o?void 0:o.some(function(n){return n.id===e.id}))||null==o||o.push(u({},e,{active:!1}))}),o},yn=function(e,n){var t,l;return n?null==e||null===(t=e.landInfo)||void 0===t?void 0:t.ownershipCategory:e.owners.ownershipCategory.code||(null==e||null===(l=e.landInfo)||void 0===l?void 0:l.ownershipCategory)},Tn=function(e,n,t){var l,i,o,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I;return void 0===n&&(n=!1),void 0===t&&(t=!1),n?(e.landInfo=e.landInfo,e.landInfo.owners.forEach(function(n,t){var l,i;null!=n&&null!==(l=n.gender)&&void 0!==l&&l.code&&(e.landInfo.owners[t].gender=null==n||null===(i=n.gender)||void 0===i?void 0:i.code)})):(e.landInfo.owners.map(function(n,t){var l;e.landInfo.owners[t].gender=null==n||null===(l=n.gender)||void 0===l?void 0:l.code}),e.landInfo.address.pincode=null==e||null===(p=e.address)||void 0===p?void 0:p.pincode,e.landInfo.address.city=null==e||null===(m=e.address)||void 0===m||null===(f=m.city)||void 0===f?void 0:f.code,e.landInfo.address.locality=null==e||null===(E=e.address)||void 0===E?void 0:E.locality,e.landInfo.address.landmark=null==e||null===(_=e.address)||void 0===_?void 0:_.landmark,e.landInfo.address.street=null!=e&&null!==(g=e.address)&&void 0!==g&&g.street?null==e||null===(A=e.address)||void 0===A?void 0:A.street:null,e.landInfo.address.city=(null==e||null===(S=e.landInfo)||void 0===S||null===(h=S.address)||void 0===h||null===(b=h.city)||void 0===b?void 0:b.code)||(null==e||null===(y=e.landInfo)||void 0===y||null===(T=y.address)||void 0===T?void 0:T.tenantId),e.landInfo.unit=null!=e&&null!==(C=e.landInfo)&&void 0!==C&&C.unit&&(null==e||null===(D=e.landInfo)||void 0===D?void 0:D.unit.length)>0?(N=null==e||null===(P=e.landInfo)||void 0===P?void 0:P.unit,I=[],N&&N.map(function(e,n){I.push({blockIndex:n,usageCategory:e.usageCategory,occupancyType:e.occupancyType,floorNo:e.floorNo,unitType:e.unitType,id:e.id})}),I):null!=e&&e.subOccupancy?function(e){var n=[];return e&&Object.entries(e).map(function(e,t){var l;n.push({blockIndex:t,floorNo:null===(l=e[0])||void 0===l?void 0:l.split("_")[1],unitType:"Block",usageCategory:Sn(e[1])})}),n}(null==e?void 0:e.subOccupancy):[]),{BPA:{id:null==e?void 0:e.id,applicationNo:null==e?void 0:e.applicationNo,approvalNo:null==e?void 0:e.approvalNo,accountId:null==e?void 0:e.accountId,edcrNumber:null==e?void 0:e.edcrNumber,riskType:null==e?void 0:e.riskType,businessService:null==e?void 0:e.businessService,landId:null==e?void 0:e.landId,tenantId:(null==e?void 0:e.tenantId)||(null==e||null===(l=e.address)||void 0===l?void 0:l.tenantId),approvalDate:null==e?void 0:e.approvalDate,applicationDate:null==e?void 0:e.applicationDate,status:t||e.status?e.status:"INITIATED",documents:An(null==e||null===(i=e.documents)||void 0===i?void 0:i.documents,null==e?void 0:e.PrevStateDocuments),landInfo:n?null==e?void 0:e.landInfo:u({},null==e?void 0:e.landInfo,{ownershipCategory:yn(e,n),owners:bn(e,n),unit:hn(e)}),assignee:t?e.assignee:[],workflow:{action:"SEND_TO_CITIZEN",assignes:null,comments:null,varificationDocuments:null},auditDetails:null==e?void 0:e.auditDetails,additionalDetails:u({},null==e?void 0:e.additionalDetails,{GISPlaceName:null==e||null===(o=e.address)||void 0===o?void 0:o.placeName,holdingNo:null!=e&&null!==(a=e.data)&&void 0!==a&&a.holdingNumber?null==e||null===(r=e.data)||void 0===r?void 0:r.holdingNumber:null==e||null===(d=e.additionalDetails)||void 0===d?void 0:d.holdingNo,registrationDetails:null!=e&&null!==(c=e.data)&&void 0!==c&&c.registrationDetails?null==e||null===(s=e.data)||void 0===s?void 0:s.registrationDetails:null==e||null===(v=e.additionalDetails)||void 0===v?void 0:v.registrationDetails}),applicationType:"BUILDING_PLAN_SCRUTINY",serviceType:"NEW_CONSTRUCTION",occupancyType:"A"}}},Cn=function(e,n){void 0===n&&(n="dayend");try{var t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[2]-1,t[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}},Dn=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,l=n.getDate();return(l=(l>9?"":"0")+l)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},Pn=function(e,n,t,l,i){try{var o,a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B;e.BlockIds=(x=null==e||null===(o=e.landInfo)||void 0===o?void 0:o.unit,w={},x&&x.map(function(e,n){w["Block_"+(n+1)]=e.id}),w),e.address=null==e||null===(a=e.landInfo)||void 0===a?void 0:a.address,e.data={applicantName:null==n||null===(r=n.planDetail)||void 0===r||null===(u=r.planInformation)||void 0===u?void 0:u.applicantName,applicationDate:null==e||null===(d=e.auditDetails)||void 0===d?void 0:d.createdTime,applicationType:null==n?void 0:n.appliactionType,holdingNumber:null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.holdingNo,occupancyType:null==n||null===(s=n.planDetail)||void 0===s||null===(v=s.planInformation)||void 0===v?void 0:v.occupancy,registrationDetails:null==e||null===(p=e.additionalDetails)||void 0===p?void 0:p.registrationDetails,riskType:Digit.Utils.obps.calculateRiskType(null==t||null===(m=t.BPA)||void 0===m?void 0:m.RiskTypeComputation,null==n||null===(f=n.planDetail)||void 0===f||null===(E=f.plot)||void 0===E?void 0:E.area,null==n||null===(_=n.planDetail)||void 0===_?void 0:_.blocks),serviceType:(null==e||null===(g=e.additionalDetails)||void 0===g?void 0:g.serviceType)||(null==n?void 0:n.applicationSubType),edcrDetails:n,scrutinyNumber:{edcrNumber:null==n?void 0:n.edcrNumber}};var O=[];null==e||e.documents.map(function(e){return O.push(e)}),e.PrevStateDocuments=pn(O),e.documents={documents:[]};var R=[];return l&&l.map(function(e,n){e.documents&&e.documents.map(function(e,n){R.push(e)})}),e.PrevStateNocDocuments=R,e.nocDocuments={NocDetails:l,nocDocuments:[]},null==e||e.landInfo.owners.map(function(e,n){e.gender={active:!0,code:e.gender,i18nKey:"COMMON_GENDER_"+e.gender}}),e.owners={owners:null==e||null===(A=e.landInfo)||void 0===A?void 0:A.owners,ownershipCategory:{active:!0,code:null==e||null===(S=e.landInfo)||void 0===S?void 0:S.ownershipCategory,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==e||null===(h=e.landInfo)||void 0===h?void 0:h.ownershipCategory.replaceAll(".","_"))}},e.riskType=Digit.Utils.obps.calculateRiskType(null==t||null===(b=t.BPA)||void 0===b?void 0:b.RiskTypeComputation,null==n||null===(y=n.planDetail)||void 0===y||null===(T=y.plot)||void 0===T?void 0:T.area,null==n||null===(C=n.planDetail)||void 0===C?void 0:C.blocks),e.subOccupancy=function(e){var n=[],t=[],l={};return e&&e.map(function(e,o){var a;n=null==e||null===(a=e.usageCategory)||void 0===a?void 0:a.split(","),t=[],n&&n.map(function(e,n){t.push({code:e,i18nKey:"BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"),name:i("BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"))})}),l["Block_"+(o+1)]=t}),l}(null==e||null===(D=e.landInfo)||void 0===D?void 0:D.unit),null==t||null===(P=t.BPA)||void 0===P||null===(N=P.homePageUrlLinks)||void 0===N||N.map(function(e){}),e.uiFlow={flow:null!=e&&e.businessService.includes("OC")?"OCBPA":null==e||null===(I=e.businessService)||void 0===I?void 0:I.split(".")[0],applicationType:(null==e||null===(L=e.additionalDetails)||void 0===L?void 0:L.applicationType)||(null==n?void 0:n.appliactionType),serviceType:(null==e||null===(B=e.additionalDetails)||void 0===B?void 0:B.serviceType)||(null==n?void 0:n.applicationSubType)},sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS",JSON.stringify(!0)),Promise.resolve(e)}catch(e){return Promise.reject(e)}var x,w},Nn=function(e,n){return n&&Object.keys(n).map(function(t){e=e.replace(":"+t,n[t])}),e},In=function(e){try{var n=e.match(/(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2}):(\d{2})/);return Date.UTC(+n[3],n[2]-1,+n[1],+n[4],+n[5])}catch(n){return e}},Ln=function(e,n){var t="BPA.NC_APP_FEE";return"BPA_LOW"===e?t="BPA.LOW_RISK_PERMIT_FEE":"BPA"===e?t="PENDING_APPL_FEE"==n?"BPA.NC_APP_FEE":"BPA.NC_SAN_FEE":"BPA_OC"===e&&(t="PENDING_APPL_FEE"==n?"BPA.NC_OC_APP_FEE":"BPA.NC_OC_SAN_FEE"),t},Bn=function(e,n){if(window.mSewaApp&&window.mSewaApp.isMsewaApp()&&window.mSewaApp.downloadBase64File){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){mSewaApp.downloadBase64File(t.result,n)}}else{var l=document.createElement("a");l.href=URL.createObjectURL(e),l.download=n,document.body.append(l),l.click(),l.remove(),setTimeout(function(){return URL.revokeObjectURL(l.href)},7e3)}},On=function(e){var n=URL.createObjectURL(e),t=window.open(n);null!=t&&t.addEventListener("load",function(e){t.focus(),t.print()})},Rn=function(e,n,t,l,i){void 0===l&&(l="download"),void 0===i&&(i="consolidatedreceipt");try{return Promise.resolve(Digit.OBPSService.receipt_download(e,n,t,{pdfKey:i})).then(function(e){var t=parseInt(e.status,10);201!==t&&200!==t||("print"==l?On(new Blob([e.data],{type:"application/pdf"})):Bn(new Blob([e.data],{type:"application/pdf"}),"RECEIPT-"+n+".pdf"))})}catch(e){return Promise.reject(e)}},xn=function(e,n){try{return Promise.resolve(Digit.OBPSService.scrutinyDetails(n,{edcrNumber:e})).then(function(t){return Promise.resolve(Digit.OBPSService.BPASearch(n,{edcrNumber:e})).then(function(e){var n,l,i,o,a,r,u,d,c,s,v,p;return 0==(null==e||null===(n=e.BPA)||void 0===n?void 0:n.length)?null!=t&&null!==(c=t.edcrDetail)&&void 0!==c&&c[0]?null==t||null===(s=t.edcrDetail)||void 0===s?void 0:s[0]:{type:"ERROR",message:"BPA_NO_RECORD_FOUND"}:(null==e||null===(l=e.BPA)||void 0===l?void 0:l.length)>0&&("INITIATED"==(null==e||null===(i=e.BPA)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.status)||"REJECTED"==(null==e||null===(a=e.BPA)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.status)||"PERMIT REVOCATION"==(null==e||null===(u=e.BPA)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.status))?null!=t&&null!==(v=t.edcrDetail)&&void 0!==v&&v[0]?null==t||null===(p=t.edcrDetail)||void 0===p?void 0:p[0]:{type:"ERROR",message:"BPA_NO_RECORD_FOUND"}:{type:"ERROR",message:"APPLICATION_NUMBER_ALREADY_EXISTS"}})})}catch(e){return Promise.reject(e)}},wn=function(e,n){void 0===n&&(n=!1);var t=[];if((null==e?void 0:e.length)>0){var l=e.filter(function(n,t){return e.findIndex(function(e){var t,l,i,o,a,r;return(null==e||null===(t=e.documentType)||void 0===t||null===(l=t.split("."))||void 0===l||null===(i=l.slice(0,2))||void 0===i?void 0:i.join("_"))===(null==n||null===(o=n.documentType)||void 0===o||null===(a=o.split("."))||void 0===a||null===(r=a.slice(0,2))||void 0===r?void 0:r.join("_"))})===t});null==l||l.map(function(l){var i,o,a,r,u=null==e?void 0:e.filter(function(e){var n,t,i,o,a,r;return(null==l||null===(n=l.documentType)||void 0===n||null===(t=n.split("."))||void 0===t||null===(i=t.slice(0,2))||void 0===i?void 0:i.join("_"))==(null==e||null===(o=e.documentType)||void 0===o||null===(a=o.split("."))||void 0===a||null===(r=a.slice(0,2))||void 0===r?void 0:r.join("_"))});null==u||u.forEach(function(e){return e.title=e.documentType}),t.push({title:n?"":null==u||null===(i=u[0])||void 0===i||null===(o=i.documentType)||void 0===o||null===(a=o.split("."))||void 0===a||null===(r=a.slice(0,2))||void 0===r?void 0:r.join("_"),values:u})})}return t},Mn=function(e){var l,i,r,u,d,c,s,v=e.formState,p=e.Controller,m=e.register,f=e.control,E=e.t,_=e.reset,g=e.previousPage,A=Digit.ULBService.getStateId(),S=Digit.ULBService.getCurrentTenantId(),h=sessionStorage.getItem("Digit.citizen.userRequestObject"),b=h?JSON.parse(h):{},y=null==b||null===(l=b.value)||void 0===l?void 0:l.info,T=null==y?void 0:y.mobileNumber,C=a.useWatch({control:f,name:"applicationType"}),D=sessionStorage.getItem("search_application")||"";D&&"undefined"!=D&&(null===(i=JSON.parse(D))||void 0===i?void 0:i.code)!==(null==C?void 0:C.code)&&f.setValue("status",""),sessionStorage.setItem("search_application",JSON.stringify(C));var P,N=Digit.Hooks.obps.useServiceTypeFromApplicationType({Applicationtype:(null==C?void 0:C.code)||((null==y||null===(r=y.roles)||void 0===r?void 0:r.filter(function(e){return e.code.includes("BPAREG_")}).length)>0&&(null==y||null===(u=y.roles)||void 0===u?void 0:u.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?"BPA_STAKEHOLDER_REGISTRATION":"BUILDING_PLAN_SCRUTINY"),tenantId:A}),I=N.applicationTypes,L=N.ServiceTypes,B=Digit.Hooks.obps.useBusinessServiceData(S,"BPA,BPA_LOW,BPA_OC,ARCHITECT,BUILDER,ENGINEER,STRUCTURALENGINEER",{}).data,O=[],R=[],x=[];null==B||null===(d=B.BusinessServices)||void 0===d||d.map(function(e){e.states.map(function(n){n.state&&n.applicationStatus&&("BPAREG"==e.business?x.push({code:n.applicationStatus,i18nKey:"WF_ARCHITECT_"+n.state,module:e.business}):"BPA_OC"==(null==e?void 0:e.businessService)?R.push({code:n.applicationStatus,i18nKey:"WF_BPA_"+n.state,module:e.business}):O.push({code:n.applicationStatus,i18nKey:"WF_BPA_"+n.state,module:e.business}))})});var w,M=[],k=[];for(w=0;w<O.length;w++)M[O[w].code]||(M[O[w].code]=!0,k.push(O[w].code));var F,U=[],H=[];for(F=0;F<R.length;F++)U[R[F].code]||(U[R[F].code]=!0,H.push(R[F].code));var W,j=[],z=[];for(W=0;W<x.length;W++)j[x[W].code]||(j[x[W].code]=!0,z.push(x[W].code));var Y=[],K=[],G=[];return k.forEach(function(e){return Y.push({i18nKey:"WF_BPA_"+e,code:e})}),H.forEach(function(e){return K.push({i18nKey:"WF_BPA_"+e,code:e})}),z.forEach(function(e){return G.push({i18nKey:"WF_BPA_"+e,code:e})}),Y.forEach(function(e){O.map(function(n){(null==e?void 0:e.code)==(null==n?void 0:n.code)&&(e.i18nKey=n.i18nKey)})}),K.forEach(function(e){R.map(function(n){(null==e?void 0:e.code)==(null==n?void 0:n.code)&&(e.i18nKey=n.i18nKey)})}),G.forEach(function(e){x.map(function(n){(null==e?void 0:e.code)==(null==n?void 0:n.code)&&(e.i18nKey=n.i18nKey)})}),P="BPA_STAKEHOLDER_REGISTRATION"===(null==C?void 0:C.code)?G:"BUILDING_PLAN_SCRUTINY"===(null==C?void 0:C.code)?Y:"BUILDING_OC_PLAN_SCRUTINY"===(null==C?void 0:C.code)?K:[],t.createElement(n.Fragment,null,t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_SEARCH_APPLICATION_NO_LABEL")),t.createElement(o.TextInput,{name:"applicationNo",inputRef:m({})})),!window.location.href.includes("citizen/obps/search/application")&&t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APP_MOBILE_NO_SEARCH_PARAM")),t.createElement(o.MobileNumber,{name:"mobileNumber",disable:!!window.location.href.includes("obps/search/obps-application"),inputRef:m({minLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:E("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:t.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),t.createElement(o.CardLabelError,null,null==v||null===(c=v.errors)||void 0===c||null===(s=c.mobileNumber)||void 0===s?void 0:s.message)),t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_SEARCH_APPLICATION_TYPE_LABEL")),t.createElement(p,{control:f,name:"applicationType",render:function(e){return t.createElement(o.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:I,optionKey:"i18nKey",t:E})}})),t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")),t.createElement(p,{control:f,name:"serviceType",render:function(e){return t.createElement(o.Dropdown,{selected:L&&(null==L?void 0:L.length)>0?e.value:L[0],select:e.onChange,onBlur:e.onBlur,option:L,optionKey:"i18nKey",t:E,isBPAREG:!!(L&&(null==L?void 0:L.length)>0)})}})),t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APP_FROM_DATE_SEARCH_PARAM")),t.createElement(p,{render:function(e){return t.createElement(o.DatePicker,{date:e.value,onChange:e.onChange})},name:"fromDate",control:f})),t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APP_TO_DATE_SEARCH_PARAM")),t.createElement(p,{render:function(e){return t.createElement(o.DatePicker,{date:e.value,onChange:e.onChange})},name:"toDate",control:f})),t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_SEARCH_APPLICATION_STATUS_LABEL")),t.createElement(p,{control:f,name:"status",render:function(e){return t.createElement(o.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:P,optionKey:"i18nKey",t:E})}})),window.location.href.includes("citizen/obps/search/application")&&t.createElement(o.SearchField,null),t.createElement(o.SearchField,{className:"submit"},t.createElement(o.SubmitBar,{label:E("ES_COMMON_SEARCH"),submit:!0}),t.createElement("p",{style:{marginTop:"24px"},onClick:function(){var e,n,t,l,i,o,a,r,u,d,c,s;_({applicationNo:"",mobileNumber:window.location.href.includes("/search/obps-application")?T:"",fromDate:"",toDate:"",status:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",applicationType:(null==y||null===(e=y.roles)||void 0===e||null===(n=e.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===n?void 0:n.length)<=0&&(null==y||null===(t=y.roles)||void 0===t?void 0:t.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)>0?{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"}:(null==y||null===(l=y.roles)||void 0===l||null===(i=l.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===i?void 0:i.length)>0&&(null==y||null===(o=y.roles)||void 0===o?void 0:o.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?{code:"BPA_STAKEHOLDER_REGISTRATION",i18nKey:"WF_BPA_BPA_STAKEHOLDER_REGISTRATION"}:{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"},serviceType:(null==y||null===(a=y.roles)||void 0===a||null===(r=a.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===r?void 0:r.length)<=0&&(null==y||null===(u=y.roles)||void 0===u?void 0:u.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)>0?{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"}:(null==y||null===(d=y.roles)||void 0===d||null===(c=d.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===c?void 0:c.length)>0&&(null==y||null===(s=y.roles)||void 0===s?void 0:s.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?"":{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"},isSubmitSuccessful:!1}),g()}},E("ES_COMMON_CLEAR_ALL"))))},kn=["currentlyActiveMobileModal","searchFormFieldsComponentProps"],Fn=["currentlyActiveMobileModal","searchFormFieldsComponentProps"],Un=function(e){var o,a,r,d,c,s,v,p,m=sessionStorage.getItem("Digit.citizen.userRequestObject"),f=m?JSON.parse(m):{},E=null==f||null===(o=f.value)||void 0===o?void 0:o.info,_=l.useTranslation().t,g=Digit.ULBService.getCurrentTenantId(),A=i.useLocation(),S=n.useState((null==E||null===(r=E.roles)||void 0===r||null===(d=r.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===d?void 0:d.length)<=0&&(null==E||null===(c=E.roles)||void 0===c?void 0:c.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)>0?"BUILDING_PLAN_SCRUTINY":(null==E||null===(s=E.roles)||void 0===s||null===(v=s.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===v?void 0:v.length)>0&&(null==E||null===(p=E.roles)||void 0===p?void 0:p.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?"BPA_STAKEHOLDER_REGISTRATION":"BUILDING_PLAN_SCRUTINY"),h=S[0],b=S[1],y=n.useState({}),T=y[0],C=y[1],D=n.useState({}),P=D[0],N=D[1];n.useEffect(function(){"/digit-ui/citizen/obps/search/application"!==A.pathname&&"/digit-ui/employee/obps/search/application"!==A.pathname||(Digit.SessionStorage.del("OBPS.INBOX"),Digit.SessionStorage.del("STAKEHOLDER.INBOX"))},[A.pathname]);var I=Digit.ComponentRegistryService.getComponent("OBPSSearchApplication"),L=n.useState(""),B=L[0],O=L[1],R={},x={};if(h&&h.includes("STAKEHOLDER")||Object.keys(T).length>0&&null!=T&&T.applicationType&&null!=T&&T.applicationType.includes("STAKEHOLDER"))Object.entries(T).length<=2&&0==Object.keys(T).filter(function(e){return"applicationType"===e}).length||(T.applicationNo&&(T.applicationNumber=T.applicationNo,T.applicationNo=""),T&&T.applicationType&&delete T.applicationType,T&&T.serviceType&&(T.tradeType=T.serviceType,delete T.serviceType),R=u({},T,{tenantId:Digit.ULBService.getStateId()}));else{if(0===Object.keys(T).length){var w,M,k=u({applicationType:"BUILDING_PLAN_SCRUTINY",serviceType:"NEW_CONSTRUCTION"},window.location.href.includes("/search/obps-application")&&{mobileNumber:null===(w=Digit.UserService.getUser())||void 0===w||null===(M=w.info)||void 0===M?void 0:M.mobileNumber});C(u({},T,k))}x=T}var F=Digit.Hooks.obps.useOBPSSearch(h,T,g,x,R,{enabled:""===B}),U=F.data,H=void 0===U?[]:U,W=F.isLoading;return t.createElement(I,{t:_,tenantId:g,onSubmit:function(e){var n,t,l;"BPA_STAKEHOLDER_REGISTRATION"===(null==e||null===(n=e.applicationType)||void 0===n?void 0:n.code)&&(function(e){return""!==(null==e?void 0:e.applicationNo)||""!==(null==e?void 0:e.fromDate)||""!==(null==e?void 0:e.mobileNumber)||""!==(null==e?void 0:e.serviceType)||""!==(null==e?void 0:e.status)||""!==(null==e?void 0:e.toDate)}(e)||O("BPA_ADD_MORE_PARAM_STAKEHOLDER")),N(e);var i=new Date(null==e?void 0:e.fromDate);null==i||i.setSeconds((null==i?void 0:i.getSeconds())-19800);var o=new Date(null==e?void 0:e.toDate);b(null!=e&&null!==(t=e.applicationType)&&void 0!==t&&t.code?null==e||null===(l=e.applicationType)||void 0===l?void 0:l.code:h),null==o||o.setSeconds((null==o?void 0:o.getSeconds())+86399-19800);var a=u({},e,e.toDate?{toDate:null==o?void 0:o.getTime()}:{},e.fromDate?{fromDate:null==i?void 0:i.getTime()}:{});C(Object.keys(a).filter(function(e){return a[e]}).reduce(function(e,n){var t;return u({},e,((t={})[n]="object"==typeof a[n]?a[n].code:a[n],t))},{}))},searchData:P,isLoading:W,Count:null==H||null===(a=H[0])||void 0===a?void 0:a.Count,error:B,data:!W&&F.isSuccess&&(null==H?void 0:H.length)>0?H:[{display:"ES_COMMON_NO_DATA"}],setparamerror:O})},Hn=function(){var e,a,r,d,c,s,v,p=l.useTranslation().t,m=i.useHistory(),f=n.useState([]),E=f[0],_=f[1],g=n.useState(!1),A=g[0],S=g[1],h=Digit.ULBService.getCurrentTenantId(),b=sessionStorage.getItem("Digit.citizen.userRequestObject"),y=b?JSON.parse(b):{},T=null==y?void 0:y.value,C=null==T||null===(e=T.info)||void 0===e?void 0:e.mobileNumber,D=Digit.Hooks.obps.useBPAREGSearch(h,{},{mobileNumber:C},{cacheTime:0}),P=D.data,N=D.isLoading,I=D.revalidate,L=Digit.Hooks.obps.useBPASearch(h,{requestor:C,mobileNumber:C,limit:50-(null!=P&&null!==(a=P.Licenses)&&void 0!==a&&a.length?Number(null==P||null===(r=P.Licenses)||void 0===r?void 0:r.length):0),offset:0},{enabled:!N}),B=L.data,O=L.isLoading,R=L.revalidate,x=Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(),"BPA",["RiskTypeComputation"]).data;return n.useEffect(function(){return function(){_([]),null==I||I(),null==R||R()}},[]),n.useEffect(function(){if(!N&&!O){var e,n,t,l,i,o,a,r,u,d,c=[];null!=P&&null!==(e=P.Licenses)&&void 0!==e&&e.length&&(null==P||null===(d=P.Licenses)||void 0===d||d.forEach(function(e){e.sortNumber=0,e.modifiedTime=e.auditDetails.lastModifiedTime,e.type="BPAREG",c.push(e)})),null!=B&&B.length&&(null==B||B.forEach(function(e){e.sortNumber=0,e.modifiedTime=e.auditDetails.lastModifiedTime,e.type="BPA",c.push(e)})),u=[].slice.call(c).sort(function(e,n){return new Date(n.modifiedTime)-new Date(e.modifiedTime)||e.sortNumber-n.sortNumber}),_(u);var s=sessionStorage.getItem("Digit.citizen.userRequestObject"),v=s?JSON.parse(s):{};1==(null==v||null===(n=v.value)||void 0===n||null===(t=n.info)||void 0===t||null===(l=t.roles)||void 0===l?void 0:l.length)&&"CITIZEN"==(null==v||null===(i=v.value)||void 0===i||null===(o=i.info)||void 0===o||null===(a=o.roles)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.code)&&S(!0)}},[N,O,B,P]),N||O?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement(o.Header,{styles:{marginLeft:"10px"}},p("BPA_MY_APPLICATIONS")+" "+(v=0,"number"==typeof(c=null==P||null===(d=P.Licenses)||void 0===d?void 0:d.length)&&(v+=c),"number"==typeof(s=null==B?void 0:B.length)&&(v+=s),v>0?"("+v+")":"")),null==E?void 0:E.map(function(e,n){var l,a,r,d,c,s,v,f,E,_,g,S,h;return"BPAREG"===e.type?t.createElement(o.Card,{key:n},t.createElement(o.KeyNote,{keyValue:p("BPA_APPLICATION_NUMBER_LABEL"),note:null==e?void 0:e.applicationNumber}),t.createElement(o.KeyNote,{keyValue:p("BPA_LICENSE_TYPE"),note:p("TRADELICENSE_TRADETYPE_"+(null==e||null===(l=e.tradeLicenseDetail)||void 0===l||null===(a=l.tradeUnits)||void 0===a||null===(r=a[0])||void 0===r||null===(d=r.tradeType)||void 0===d?void 0:d.split(".")[0]))}),(null==e||null===(c=e.tradeLicenseDetail)||void 0===c||null===(s=c.tradeUnits)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.tradeType.includes("ARCHITECT"))&&t.createElement(o.KeyNote,{keyValue:p("BPA_COUNCIL_OF_ARCH_NO_LABEL"),note:null==e||null===(f=e.tradeLicenseDetail)||void 0===f||null===(E=f.additionalDetail)||void 0===E?void 0:E.counsilForArchNo}),t.createElement(o.KeyNote,{keyValue:p("BPA_APPLICANT_NAME_LABEL"),note:null==e||null===(_=e.tradeLicenseDetail)||void 0===_||null===(g=_.owners)||void 0===g||null===(S=g[0])||void 0===S?void 0:S.name}),t.createElement(o.KeyNote,{keyValue:p("TL_COMMON_TABLE_COL_STATUS"),note:p("WF_ARCHITECT_"+(null==e?void 0:e.status)),noteStyle:"APPROVED"===(null==e?void 0:e.status)?{color:"#00703C"}:{color:"#D4351C"}}),"INITIATED"!==e.status?t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/obps/stakeholder/"+(null==e?void 0:e.applicationNumber),state:{tenantId:""}}},t.createElement(o.SubmitBar,{label:p("TL_VIEW_DETAILS")})):t.createElement(o.SubmitBar,{label:p("BPA_COMP_WORKFLOW"),onSubmit:function(){return function(e){var n,t,l,i,o,a,r,d,c,s,v,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z,Y,K,G,V,X,q,J,Z,Q,$,ee,ne,te,le,ie,oe,ae,re,ue,de,ce,se,ve,pe,me,fe,Ee=e,_e={Correspondenceaddress:(null==Ee||null===(n=Ee.tradeLicenseDetail)||void 0===n||null===(t=n.owners)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.correspondenceAddress)||(null!=Ee&&null!==(i=Ee.tradeLicenseDetail)&&void 0!==i&&null!==(o=i.address)&&void 0!==o&&o.doorNo?(null==Ee||null===(a=Ee.tradeLicenseDetail)||void 0===a||null===(r=a.address)||void 0===r?void 0:r.doorNo)+", ":"")+" "+(null!=Ee&&null!==(d=Ee.tradeLicenseDetail)&&void 0!==d&&null!==(c=d.address)&&void 0!==c&&c.street?(null==Ee||null===(s=Ee.tradeLicenseDetail)||void 0===s||null===(v=s.address)||void 0===v?void 0:v.street)+", ":"")+(null!=Ee&&null!==(f=Ee.tradeLicenseDetail)&&void 0!==f&&null!==(E=f.address)&&void 0!==E&&E.landmark?(null==Ee||null===(_=Ee.tradeLicenseDetail)||void 0===_||null===(g=_.address)||void 0===g?void 0:g.landmark)+", ":"")+p(null==Ee||null===(A=Ee.tradeLicenseDetail)||void 0===A||null===(S=A.address)||void 0===S?void 0:S.locality.code)+", "+p(null!=Ee&&null!==(h=Ee.tradeLicenseDetail)&&void 0!==h&&null!==(b=h.address)&&void 0!==b&&b.city?null==Ee||null===(y=Ee.tradeLicenseDetail)||void 0===y||null===(T=y.address)||void 0===T?void 0:T.city.code:"")+","+(p(null==Ee||null===(C=Ee.tradeLicenseDetail)||void 0===C||null===(D=C.address)||void 0===D?void 0:D.pincode)?""+(null===(P=Ee.tradeLicenseDetail)||void 0===P||null===(N=P.address)||void 0===N?void 0:N.pincode):" "),formData:{LicneseDetails:{PanNumber:null==Ee||null===(I=Ee.tradeLicenseDetail)||void 0===I||null===(L=I.owners)||void 0===L||null===(B=L[0])||void 0===B?void 0:B.pan,PermanentAddress:null==Ee||null===(O=Ee.tradeLicenseDetail)||void 0===O||null===(R=O.owners)||void 0===R||null===(x=R[0])||void 0===x?void 0:x.permanentAddress,email:null==Ee||null===(w=Ee.tradeLicenseDetail)||void 0===w||null===(M=w.owners)||void 0===M||null===(k=M[0])||void 0===k?void 0:k.emailId,gender:{code:null==Ee||null===(F=Ee.tradeLicenseDetail)||void 0===F||null===(U=F.owners)||void 0===U||null===(H=U[0])||void 0===H?void 0:H.gender,i18nKey:"COMMON_GENDER_"+(null==Ee||null===(W=Ee.tradeLicenseDetail)||void 0===W||null===(j=W.owners)||void 0===j||null===(z=j[0])||void 0===z?void 0:z.gender),value:null==Ee||null===(Y=Ee.tradeLicenseDetail)||void 0===Y||null===(K=Y.owners)||void 0===K||null===(G=K[0])||void 0===G?void 0:G.gender},mobileNumber:null==Ee||null===(V=Ee.tradeLicenseDetail)||void 0===V||null===(X=V.owners)||void 0===X||null===(q=X[0])||void 0===q?void 0:q.mobileNumber,name:null==Ee||null===(J=Ee.tradeLicenseDetail)||void 0===J||null===(Z=J.owners)||void 0===Z||null===(Q=Z[0])||void 0===Q?void 0:Q.name},LicneseType:{LicenseType:{i18nKey:"TRADELICENSE_TRADETYPE_"+(null==Ee||null===($=Ee.tradeLicenseDetail)||void 0===$||null===(ee=$.tradeUnits)||void 0===ee||null===(ne=ee[0])||void 0===ne?void 0:ne.tradeType.split(".")[0]),role:["BPA_"+(null==Ee||null===(te=Ee.tradeLicenseDetail)||void 0===te||null===(le=te.tradeUnits)||void 0===le||null===(ie=le[0])||void 0===ie?void 0:ie.tradeType.split(".")[0])],tradeType:null==Ee||null===(oe=Ee.tradeLicenseDetail)||void 0===oe||null===(ae=oe.tradeUnits)||void 0===ae||null===(re=ae[0])||void 0===re?void 0:re.tradeType},ArchitectNo:(null==Ee||null===(ue=Ee.tradeLicenseDetail)||void 0===ue||null===(de=ue.additionalDetail)||void 0===de?void 0:de.counsilForArchNo)||null}},isAddressSame:(null==Ee||null===(ce=Ee.tradeLicenseDetail)||void 0===ce||null===(se=ce.owners)||void 0===se||null===(ve=se[0])||void 0===ve?void 0:ve.correspondenceAddress)===(null==Ee||null===(pe=Ee.tradeLicenseDetail)||void 0===pe||null===(me=pe.owners)||void 0===me||null===(fe=me[0])||void 0===fe?void 0:fe.permanentAddress),result:{Licenses:[u({},e)]},initiationFlow:!0};sessionStorage.setItem("BPAREGintermediateValue",JSON.stringify(_e)),m.push("/digit-ui/citizen/obps/stakeholder/apply/stakeholder-docs-required")}(e)}})):t.createElement(o.Card,{key:n},t.createElement(o.KeyNote,{keyValue:p("BPA_APPLICATION_NUMBER_LABEL"),note:null==e?void 0:e.applicationNo}),t.createElement(o.KeyNote,{keyValue:p("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),note:p("BPA_OC"!==(null==e?void 0:e.businessService)?"WF_BPA_BUILDING_PLAN_SCRUTINY":"WF_BPA_BUILDING_OC_PLAN_SCRUTINY")}),t.createElement(o.KeyNote,{keyValue:p("BPA_COMMON_SERVICE"),note:p("BPA_SERVICETYPE_NEW_CONSTRUCTION")}),t.createElement(o.KeyNote,{keyValue:p("TL_COMMON_TABLE_COL_STATUS"),note:p("WF_BPA_"+(null==e?void 0:e.state)),noteStyle:"APPROVED"===(null==e?void 0:e.status)?{color:"#00703C"}:{color:"#D4351C"}}),t.createElement(o.KeyNote,{keyValue:p("BPA_COMMON_SLA"),note:"string"==typeof(null==e?void 0:e.sla)&&null!=e&&null!==(h=e.sla)&&void 0!==h&&h.includes("NA")?p("CS_NA"):null==e?void 0:e.sla}),"SEND_TO_ARCHITECT"===e.action||"INITIATED"!==e.status?t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/obps/bpa/"+(null==e?void 0:e.applicationNo),state:{tenantId:""}}},t.createElement(o.SubmitBar,{label:p("TL_VIEW_DETAILS")})):t.createElement("div",null,A?t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/obps/bpa/"+(null==e?void 0:e.applicationNo),state:{tenantId:""}}},t.createElement(o.SubmitBar,{label:p("TL_VIEW_DETAILS")})):t.createElement(o.SubmitBar,{label:p("BPA_COMP_WORKFLOW"),onSubmit:function(){return gn(e,x,m,p)}})))}),t.createElement("div",{style:{marginLeft:"16px",marginTop:"16px",marginBottom:"46px"}},t.createElement("span",null,p("BPA_NOT_ABLE_TO_FIND_APP_MSG")+" "," "),t.createElement("span",{className:"link"},t.createElement(i.Link,{to:"/digit-ui/citizen/obps/search/obps-application"},p("BPA_CLICK_HERE_TO_SEARCH_LINK")))))},Wn=function(e){var n=e.otherComment;return t.createElement("div",{className:"checkpoint-comments-wrap"},t.createElement("h4",null,e.headComment),t.createElement("p",null,n))},jn=function(e){var n,i,a,r=e.data,u=e.OpenImage,d=l.useTranslation().t;return t.createElement("div",null,r.date&&t.createElement("p",null,r.date),t.createElement("p",null,r.name),r.mobileNumber&&t.createElement(o.TelePhone,{mobile:r.mobileNumber}),r.source&&t.createElement("p",null,d("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&t.createElement(Wn,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?t.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(function(e){return t.createElement("div",{className:"TLComments"},t.createElement("h3",null,d("WF_COMMON_COMMENTS")),t.createElement("p",null,e))})):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?t.createElement("div",{className:"TLComments"},t.createElement("h3",null,d("CS_COMMON_ATTACHMENTS")),t.createElement(o.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:function(e,n){u(e,n,null==r?void 0:r.thumbnailsToShow)}})):null)},zn=function(e){var a,r,u,d,c=e.id,s=e.tenantId,v=l.useTranslation().t,p=Digit.Hooks.useWorkflowDetails({tenantId:s,id:c,moduleCode:"OBPS"}),m=p.isLoading,f=p.data;if(m)return t.createElement(o.Loader,null);function E(e,n,t){var l;window.open(null==t||null===(l=t.fullImage)||void 0===l?void 0:l[0],"_blank")}var _=function(e){var n,l,i,o,a,r={date:null==e||null===(n=e.auditDetails)||void 0===n?void 0:n.lastModified,name:null==e||null===(l=e.assignes)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.name,mobileNumber:null==e||null===(o=e.assignes)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.mobileNumber,comment:v(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return t.createElement(jn,{data:r,OpenImage:E})};return t.createElement(t.Fragment,null,!m&&t.createElement(n.Fragment,null,(null==f||null===(a=f.timeline)||void 0===a?void 0:a.length)>0&&t.createElement(o.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},v("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=f&&f.timeline&&1===(null==f||null===(r=f.timeline)||void 0===r?void 0:r.length)?t.createElement(o.CheckPoint,{isCompleted:!0,label:v((null==f||null===(u=f.timeline[0])||void 0===u?void 0:u.state)&&"WF_ARCHITECT_"+f.timeline[0].state||"NA"),customChild:_(null==f?void 0:f.timeline[0])}):t.createElement(o.ConnectingCheckPoints,null,(null==f?void 0:f.timeline)&&(null==f?void 0:f.timeline.map(function(e,n,l){var i,a,r,u,d="";return window.location.href.includes("/obps")&&(d=null!=f&&null!==(i=f.timeline[n-1])&&void 0!==i&&null!==(a=i.state)&&void 0!==a&&a.includes("BACK_FROM")||null!=f&&null!==(r=f.timeline[n-1])&&void 0!==r&&null!==(u=r.state)&&void 0!==u&&u.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),t.createElement(t.Fragment,{key:n},t.createElement(o.CheckPoint,{keyValue:n,isCompleted:0===n,label:e.state?v("WF_ARCHITECT_"+e.state+d):"NA",customChild:_(e)}))})))),f&&function(e){var n,l,a,r,u,d;switch(null==e?void 0:e.action){case"PAY":return t.createElement("div",{style:{marginTop:"24px"},className:"action-bar-wrap"},t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+(null==f||null===(n=f.processInstances)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.moduleName)+"/"+(null==f||null===(a=f.processInstances)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.businessId),state:{tenantId:null==f||null===(u=f.processInstances)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.tenantId}}},t.createElement(o.SubmitBar,{label:v("TL_COMMON_BUTTON_CITIZEN_MAKE_PAYMENT")})));case"SUBMIT_FEEDBACK":return t.createElement("div",{style:{marginTop:"24px"}},t.createElement(i.Link,{to:"/digit-ui/citizen/fsm/rate/"+props.id},t.createElement(o.SubmitBar,{label:v("CS_APPLICATION_DETAILS_RATE")})))}}(null==f||null===(d=f.nextActions)||void 0===d?void 0:d[0]))},Yn=function(){var e,a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z,Y,K,G,V=i.useParams().id,X=l.useTranslation().t,q=n.useState({}),J=q[0],Z=q[1],Q=Digit.ULBService.getCurrentTenantId(),$=n.useState(!1),ee=$[0],ne=$[1],te=n.useState([]),le=te[0],ie=te[1],oe={applicationNumber:i.useParams().id},ae=Digit.ULBService.getStateId(),re=window.Digit.Utils.browser.isMobile(),ue=Digit.Hooks.obps.useBPAREGSearch(ae,{},oe),de=ue.data,ce=ue.isLoading,se=null==de||null===(e=de.Licenses)||void 0===e?void 0:e[0],ve=Digit.Hooks.obps.useMDMS(ae,"StakeholderRegistraition","TradeTypetoRoleMapping").data,pe=Digit.Hooks.useRecieptSearch({tenantId:ae,businessService:"BPAREG",consumerCodes:V,isEmployee:!1},{}).data;return n.useEffect(function(){var e,n;if(null!=se&&null!==(e=se.tradeLicenseDetail)&&void 0!==e&&null!==(n=e.applicationDocuments)&&void 0!==n&&n.length){var t,l,i=null==se||null===(t=se.tradeLicenseDetail)||void 0===t||null===(l=t.applicationDocuments)||void 0===l?void 0:l.map(function(e){return null==e?void 0:e.fileStoreId});Digit.UploadServices.Filefetch(i,Q.split(".")[0]).then(function(e){return Z(null==e?void 0:e.data)})}},[se]),n.useEffect(function(){var e,n,t;se&&((null==pe||null===(e=pe.Payments)||void 0===e?void 0:e.length)>0&&ie([{label:X("TL_RECEIPT"),onClick:function(){var e,n,t,l;return Rn((null==pe||null===(e=pe.Payments)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.paymentDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.businessService)||"BPAREG",null==se?void 0:se.applicationNumber,null==se?void 0:se.tenantId)}}]),null==se||null===(n=se.tradeLicenseDetail)||void 0===n||null===(t=n.applicationDocuments)||void 0===t||t.map(function(e){return null==e?void 0:e.fileStoreId}))},[se,pe]),null!=se&&null!==(a=se.tradeLicenseDetail)&&void 0!==a&&null!==(r=a.applicationDocuments)&&void 0!==r&&r.length&&(null==ve||null===(u=ve.StakeholderRegistraition)||void 0===u||null===(d=u.TradeTypetoRoleMapping)||void 0===d?void 0:d.length)>0&&(null==ve||null===(K=ve.StakeholderRegistraition)||void 0===K||null===(G=K.TradeTypetoRoleMapping)||void 0===G||G.map(function(e){var n,t,l,i,o;(null==e||null===(n=e.docTypes)||void 0===n?void 0:n.length)>0&&(null==e?void 0:e.tradeType)==(null==se||null===(t=se.tradeLicenseDetail)||void 0===t||null===(l=t.tradeUnits)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.tradeType)&&(null==e||null===(o=e.docTypes)||void 0===o||o.map(function(e){var n,t;null==se||null===(n=se.tradeLicenseDetail)||void 0===n||null===(t=n.applicationDocuments)||void 0===t||t.forEach(function(n){(null==e?void 0:e.code)==(null==n?void 0:n.documentType)&&null!=e&&e.info&&(n.info=null==e?void 0:e.info)})}))})),ce?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"cardHeaderWithOptions",style:re?{}:{maxWidth:"980px"}},t.createElement(o.Header,{styles:{fontSize:"32px",marginLeft:re?"0px":"10px"}},X("BPA_TASK_DETAILS_HEADER")),(null==pe||null===(c=pe.Payments)||void 0===c?void 0:c.length)>0&&t.createElement(o.MultiLink,{className:"multilinkWrapper",onHeadClick:function(){return ne(!ee)},displayOptions:ee,options:le,style:{top:"90px"}})),t.createElement("div",null,t.createElement(o.Card,null,t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:X("BPA_APPLICATION_NUMBER_LABEL"),text:(null==se?void 0:se.applicationNumber)||"NA"}))),t.createElement(o.Card,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},X("BPA_LICENSE_DETAILS_LABEL")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:X("BPA_LICENSE_TYPE"),text:X("TRADELICENSE_TRADETYPE_"+(null==se||null===(s=se.tradeLicenseDetail)||void 0===s||null===(v=s.tradeUnits)||void 0===v||null===(p=v[0])||void 0===p||null===(m=p.tradeType)||void 0===m?void 0:m.split(".")[0]))}),(null==se||null===(f=se.tradeLicenseDetail)||void 0===f||null===(E=f.tradeUnits)||void 0===E||null===(_=E[0])||void 0===_?void 0:_.tradeType.includes("ARCHITECT"))&&t.createElement(o.Row,{className:"border-none",label:X("BPA_COUNCIL_OF_ARCH_NO_LABEL"),text:null==se||null===(g=se.tradeLicenseDetail)||void 0===g||null===(A=g.additionalDetail)||void 0===A?void 0:A.counsilForArchNo}))),t.createElement(o.Card,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},X("BPA_LICENSE_DET_CAPTION")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:X("BPA_APPLICANT_NAME_LABEL"),text:X(null==se||null===(S=se.tradeLicenseDetail)||void 0===S||null===(h=S.owners)||void 0===h||null===(b=h[0])||void 0===b?void 0:b.name)}),t.createElement(o.Row,{className:"border-none",label:X("BPA_APPLICANT_GENDER_LABEL"),text:X(null==se||null===(y=se.tradeLicenseDetail)||void 0===y||null===(T=y.owners)||void 0===T||null===(C=T[0])||void 0===C?void 0:C.gender)}),t.createElement(o.Row,{className:"border-none",label:X("BPA_OWNER_MOBILE_NO_LABEL"),text:null==se||null===(D=se.tradeLicenseDetail)||void 0===D||null===(P=D.owners)||void 0===P||null===(N=P[0])||void 0===N?void 0:N.mobileNumber}),t.createElement(o.Row,{className:"border-none",label:X("BPA_APPLICANT_EMAIL_LABEL"),text:(null==se||null===(I=se.tradeLicenseDetail)||void 0===I||null===(L=I.owners)||void 0===L||null===(B=L[0])||void 0===B?void 0:B.emailId)||X("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:X("BPA_APPLICANT_PAN_NO"),text:(null==se||null===(O=se.tradeLicenseDetail)||void 0===O||null===(R=O.owners)||void 0===R||null===(x=R[0])||void 0===x?void 0:x.pan)||X("CS_NA")}))),t.createElement(o.Card,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},X("BPA_LICENSEE_PERMANENT_LABEL")),t.createElement(o.Row,{className:"border-none",text:(null==se||null===(w=se.tradeLicenseDetail)||void 0===w||null===(M=w.owners)||void 0===M||null===(k=M[0])||void 0===k?void 0:k.permanentAddress)||X("CS_NA")})),t.createElement(o.Card,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},X("BPA_CORRESPONDANCE_ADDRESS_LABEL")),t.createElement(o.Row,{className:"border-none",text:(null==se||null===(F=se.tradeLicenseDetail)||void 0===F||null===(U=F.owners)||void 0===U||null===(H=U[0])||void 0===H?void 0:H.correspondenceAddress)||X("CS_NA")})),(null==se||null===(W=se.tradeLicenseDetail)||void 0===W||null===(j=W.applicationDocuments)||void 0===j?void 0:j.length)>0&&t.createElement(o.Card,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},X("BPA_DOC_DETAILS_SUMMARY")),null==se||null===(z=se.tradeLicenseDetail)||void 0===z||null===(Y=z.applicationDocuments)||void 0===Y?void 0:Y.map(function(e,l){var i,a,r,u,d,c;return t.createElement(n.Fragment,null,t.createElement("div",null,t.createElement(o.CardSectionHeader,{styles:{fontSize:"18px"}},X("BPAREG_HEADER_"+fn(null==e||null===(i=e.documentType)||void 0===i?void 0:i.toUpperCase(),".","_"))),null!=e&&e.info?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",margin:"10px 0px"}},""+X(null==e?void 0:e.info)):null,t.createElement("a",{target:"_blank",href:null===(a=J[e.fileStoreId])||void 0===a?void 0:a.split(",")[0]},t.createElement(o.PDFSvg,null)),t.createElement("p",{style:(r={marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"},r.fontWeight="400",r)},X("BPAREG_HEADER_"+fn(null==e||null===(u=e.documentType)||void 0===u?void 0:u.toUpperCase(),".","_")))),(null==se||null===(d=se.tradeLicenseDetail)||void 0===d||null===(c=d.applicationDocuments)||void 0===c?void 0:c.length)!=l+1?t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),t.createElement(o.Card,null,t.createElement(zn,{id:V,tenantId:null==se?void 0:se.tenantId}))))},Kn=function(e){var a,r,u=e.location.state,d=l.useTranslation().t,c=Digit.ULBService.getCurrentTenantId(),s=null==u||null===(a=u.data)||void 0===a||null===(r=a.BPA)||void 0===r?void 0:r[0],v=n.useState({}),p=v[0],m=v[1],f=n.useState(!0),E=f[0],_=f[1],g=i.useHistory(),A=n.useState(""),S=A[0],h=A[1],b=n.useState(null),y=b[0],T=b[1],C=null==p?void 0:p.businessService,D=null==p?void 0:p.status;"BPA_LOW"==C&&(C="BPA");var P=Digit.Hooks.useWorkflowDetails({tenantId:null==s?void 0:s.tenantId,id:null==s?void 0:s.applicationNo,moduleCode:"BPA"});n.useEffect(function(){try{return _(!0),Promise.resolve(Digit.OBPSService.BPASearch(c,{applicationNo:null==s?void 0:s.applicationNo})).then(function(e){var n,t,l,i;return Promise.resolve(Ln(null==e||null===(n=e.BPA)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.businessService,null==e||null===(l=e.BPA)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.status)).then(function(n){var t,l;return Promise.resolve(Digit.PaymentService.fetchBill(c,{consumerCode:null==e||null===(t=e.BPA)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo,businessService:n})).then(function(n){var t,l,i,o;"APPROVED"==(null==e||null===(t=e.BPA)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.status)&&null!=n&&n.Bill[0]&&0!=(null==n||null===(i=n.Bill[0])||void 0===i?void 0:i.totalAmount)&&h("_SAN_FEE"),_(!1),m(null==e||null===(o=e.BPA)||void 0===o?void 0:o[0]),T(null==n?void 0:n.Bill)})})})}catch(e){return Promise.reject(e)}},[]);var N,I,L,B,O,R,x=!1;return!P||null==P||!P.data||null!=P&&P.isLoading||null==P||null===(N=P.data)||void 0===N||null===(I=N.nextActions)||void 0===I||I.forEach(function(e){"PAY"!=e.action||x||(x=!0)}),t.createElement("div",null,E||null!=P&&P.isLoading?t.createElement(o.Loader,null):t.createElement(o.Card,null,t.createElement(o.Banner,{message:d("BPA_HEADER_"+C+"_"+(null==s||null===(R=s.workflow)||void 0===R?void 0:R.action)+"_"+fn(D," ","_").toUpperCase()+(S||"")),applicationNumber:null==p?void 0:p.applicationNo,info:d("BPA"==C?"BPA_PERMIT_APPLICATION_NUMBER_LABEL":"BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL"),successful:"PERMIT REVOCATION"!=(null==p?void 0:p.status)&&"REJECTED"!=(null==p?void 0:p.status),style:{padding:"10px"},headerStyles:{fontSize:"32px",wordBreak:"break-word"}}),t.createElement(o.CardText,{style:{paddingBottom:"10px",marginBottom:"10px"}},d("BPA_SUB_HEADER_"+C+"_"+(null==s||null===(L=s.workflow)||void 0===L?void 0:L.action)+"_"+(null!=s&&null!==(B=s.additionalDetails)&&void 0!==B&&B.typeOfArchitect?null==s||null===(O=s.additionalDetails)||void 0===O?void 0:O.typeOfArchitect:"ARCHITECT")+"_"+fn(D," ","_").toUpperCase()+(S||""))),"PERMIT REVOCATION"==(null==p?void 0:p.status)?t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:function(){try{return Promise.resolve(Digit.PaymentService.generatePdf(c,{Bpa:[p]},"bpa-revocation")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(c,{fileStoreIds:e.filestoreIds[0]})).then(function(n){window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),d("BPA_REVOCATION_PDF_LABEL")):null,window.location.href.includes("/citizen")?t.createElement("div",null,("PENDING_APPL_FEE"==(null==p?void 0:p.status)||"PENDING_FEE"==(null==p?void 0:p.status)||"PENDING_SANC_FEE_PAYMENT"==(null==p?void 0:p.status))&&(null==y?void 0:y.length)>0&&x?t.createElement("div",null,t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+Ln(null==p?void 0:p.businessService,null==p?void 0:p.status)+"/"+(null==p?void 0:p.applicationNo)+"/"+(null==p?void 0:p.tenantId)+"?tenantId="+(null==p?void 0:p.tenantId)}},t.createElement(o.SubmitBar,{label:d("WF_BPA_PAY"),style:{margin:"10px 0px 0px 0px"}})),t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.LinkButton,{label:d("CORE_COMMON_GO_TO_HOME")}))):t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen"}},t.createElement(o.SubmitBar,{label:d("CORE_COMMON_GO_TO_HOME"),style:{margin:"10px 10px 0px 0px"}}))):t.createElement(o.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement("div",null,("PENDING_APPL_FEE"==(null==p?void 0:p.status)||"PENDING_FEE"==(null==p?void 0:p.status)||"PENDING_SANC_FEE_PAYMENT"==(null==p?void 0:p.status))&&(null==y?void 0:y.length)>0&&x?t.createElement("div",null,t.createElement(o.SubmitBar,{label:d("WF_BPA_PAY"),onSubmit:function(){g.push("/digit-ui/employee/payment/collect/"+Ln(null==p?void 0:p.businessService,null==p?void 0:p.status)+"/"+(null==p?void 0:p.applicationNo)+"/"+(null==p?void 0:p.tenantId)+"?tenantId="+(null==p?void 0:p.tenantId))},style:{margin:"10px 0px 0px 0px"}}),t.createElement(i.Link,{to:"/digit-ui/employee"},t.createElement("span",{style:{color:"#a82227",margin:"0px 10px"}},d("CORE_COMMON_GO_TO_HOME")))):t.createElement(o.SubmitBar,{label:d("CORE_COMMON_GO_TO_HOME"),onSubmit:function(){g.push("/digit-ui/employee")},style:{margin:"10px 10px 0px 0px"}})))))},Gn=function(e){var i=e.statuses,r=e.isInboxLoading,u=e.controlFilterForm,d=e.setFilterFormValue,c=e.filterFormState,s=e.localitiesForEmployeesCurrentTenant,v=e.loadingLocalitiesForEmployeesCurrentTenant,p=l.useTranslation().t,m=Digit.ULBService.getCurrentTenantId(),f=Digit.Hooks.obps.SearchMdmsTypes.useApplicationTypes(m),E=f.data,_=f.isLoading,g=[{code:"ASSIGNED_TO_ME",name:""+p("ES_INBOX_ASSIGNED_TO_ME")},{code:"ASSIGNED_TO_ALL",name:""+p("ES_INBOX_ASSIGNED_TO_ALL")}],A=a.useWatch({control:u,name:"applicationType",defaultValue:(null==c?void 0:c.applicationType)||null}),S=Digit.Hooks.obps.useBusinessServiceBasedOnServiceType({applicationType:A}),h=a.useWatch({control:u,name:"businessService",defaultValue:(null==c?void 0:c.businessService)||null}),b=function(e,n){var t=e.map(function(e){return e[1]});return n.onChange(t)};return t.createElement(n.Fragment,null,window.location.href.includes("/citizen")?null:t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"assignee",control:u,render:function(e){return t.createElement(o.RadioButtons,{onSelect:function(n){e.onChange(n.code)},selectedOption:g.filter(function(n){return n.code===e.value})[0],optionsKey:"name",name:"assignee",options:g})}})),window.location.href.includes("/citizen")?null:t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"locality",control:u,render:function(e){var l=n.useMemo(function(){var n;return null==e||null===(n=e.value)||void 0===n?void 0:n.map(function(n,l){return t.createElement(o.RemoveableTag,{key:l,text:n.i18nkey,onClick:function(){var t;e.onChange(null==e||null===(t=e.value)||void 0===t?void 0:t.filter(function(e){return e.code!==n.code}))}})})},[null==e?void 0:e.value]);return v?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},p("ES_INBOX_LOCALITY")),t.createElement(o.MultiSelectDropdown,{options:s||[],optionsKey:"i18nkey",props:e,isPropsNeeded:!0,onSelect:b,selected:null==e?void 0:e.value,defaultLabel:p("ES_BPA_ALL_SELECTED"),defaultUnit:p("BPA_SELECTED_TEXT")}),t.createElement("div",{className:"tag-container"},l))}})),t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"applicationType",control:u,render:function(e){return _?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},p("BPA_SEARCH_APPLICATION_TYPE_LABEL")),t.createElement(o.RadioButtons,{onSelect:function(n){e.onChange(n.code),d("applicationStatus",[]),d("businessService",[])},selectedOption:E.filter(function(n){return n.code===e.value})[0],optionsKey:"i18nKey",name:"applicationType",options:E}))}})),(null==A?void 0:A.length)>0&&"BUILDING_OC_PLAN_SCRUTINY"!=A?t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"businessService",control:u,render:function(e){return t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},p("ES_INBOX_RISK_TYPE")),t.createElement(o.RadioButtons,{onSelect:function(n){e.onChange(n.code),d("applicationStatus",[])},selectedOption:S.filter(function(n){return n.code===e.value})[0],optionsKey:"i18nKey",name:"businessService",options:S}))}})):null,"BUILDING_OC_PLAN_SCRUTINY"==A||(null==A?void 0:A.length)>0&&(null==h?void 0:h.length)>0?t.createElement(o.FilterFormField,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},p("ACTION_TEST_APPLICATION_STATUS")),t.createElement(a.Controller,{name:"applicationStatus",control:u,render:function(e){function l(n){e.onChange(n)}var a=n.useMemo(function(){var n;return null==i||null===(n=i.filter(function(e){var n=pn(h);return"BUILDING_OC_PLAN_SCRUTINY"==A&&(n="BPA_OC"),e.businessservice===n}))||void 0===n?void 0:n.map(function(n,i){var a;return t.createElement(o.CheckBox,{key:i,onChange:function(t){if(t.target.checked&&null!=e&&e.value)l([].concat(null==e?void 0:e.value,[null==n?void 0:n.statusid]));else if(t.target.checked)l([null==n?void 0:n.statusid]);else{var i;l(null==e||null===(i=e.value)||void 0===i?void 0:i.filter(function(e){return e!==(null==n?void 0:n.statusid)}))}},checked:null==e||null===(a=e.value)||void 0===a?void 0:a.includes(null==n?void 0:n.statusid),label:p("WF_STATE_"+n.businessservice+"_"+n.applicationstatus)+" ("+n.count+")"})})},[e.value,i,h,A]);return t.createElement(n.Fragment,null,r?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,a))}})):null)},Vn=function(e){var i,a,r,u,d,c,s,v,p=e.registerRef,m=e.searchFormState,f=e.searchFieldComponents,E=l.useTranslation().t;return window.Digit.Utils.browser.isMobile()?t.createElement(n.Fragment,null,t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNo",inputRef:p({})})),window.location.href.includes("/citizen")?null:t.createElement(o.SearchField,null,t.createElement("label",null,E("CORE_COMMON_MOBILE_NUMBER")),t.createElement(o.MobileNumber,{name:"mobileNumber",type:"number",inputRef:p({minLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:E("CORE_COMMON_MOBILE_ERROR")}})}),null!=m&&null!==(i=m.errors)&&void 0!==i&&null!==(a=i.mobileNumber)&&void 0!==a&&a.message?t.createElement(o.CardLabelError,null,null==m||null===(r=m.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message):null)):t.createElement(t.Fragment,null,t.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:"24px"}},t.createElement("div",{className:"search-complaint-container"},t.createElement("div",{className:"complaint-input-container",style:window.location.href.includes("/citizen")?{gridTemplateColumns:"33.33% 67.33%",textAlign:"start"}:{textAlign:"start"}},t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNo",inputRef:p({})})),window.location.href.includes("/citizen")?null:t.createElement(o.SearchField,null,t.createElement("label",null,E("CORE_COMMON_MOBILE_NUMBER")),t.createElement(o.MobileNumber,{name:"mobileNumber",type:"number",inputRef:p({minLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:E("CORE_COMMON_MOBILE_ERROR")}})}),null!=m&&null!==(d=m.errors)&&void 0!==d&&null!==(c=d.mobileNumber)&&void 0!==c&&c.message?t.createElement(o.CardLabelError,null,null==m||null===(s=m.errors)||void 0===s||null===(v=s.mobileNumber)||void 0===v?void 0:v.message):null),t.createElement("div",{className:"search-action-wrapper",style:{width:"100%"}},f)))))};function Xn(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function qn(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function Jn(e){qn(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Zn(e,n){qn(2,arguments);var t=Jn(e).getTime(),l=Xn(n);return new Date(t+l)}function Qn(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}function $n(e){return qn(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function et(e){if(qn(1,arguments),!$n(e)&&"number"!=typeof e)return!1;var n=Jn(e);return!isNaN(Number(n))}var nt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function tt(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth,l=e.formats[t]||e.formats[e.defaultWidth];return l}}var lt={date:tt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},it={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ot(e){return function(n,t){var l,i=t||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;l=e.formattingValues[a]||e.formattingValues[o]}else{var r=e.defaultWidth,u=i.width?String(i.width):e.defaultWidth;l=e.values[u]||e.values[r]}return l[e.argumentCallback?e.argumentCallback(n):n]}}function at(e){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=t.width,i=l&&e.matchPatterns[l]||e.matchPatterns[e.defaultMatchWidth],o=n.match(i);if(!o)return null;var a,r=o[0],u=l&&e.parsePatterns[l]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?ut(u,function(e){return e.test(r)}):rt(u,function(e){return e.test(r)});a=e.valueCallback?e.valueCallback(d):d,a=t.valueCallback?t.valueCallback(a):a;var c=n.slice(r.length);return{value:a,rest:c}}}function rt(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}function ut(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t}var dt,ct={code:"en-US",formatDistance:function(e,n,t){var l,i=nt[e];return l="string"==typeof i?i:1===n?i.one:i.other.replace("{{count}}",n.toString()),null!=t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+l:l+" ago":l},formatLong:lt,formatRelative:function(e,n,t,l){return it[e]},localize:{ordinalNumber:function(e,n){var t=Number(e),l=t%100;if(l>20||l<10)switch(l%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:ot({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ot({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ot({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ot({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ot({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(dt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.match(dt.matchPattern);if(!t)return null;var l=t[0],i=e.match(dt.parsePattern);if(!i)return null;var o=dt.valueCallback?dt.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(l.length);return{value:o,rest:a}}),era:at({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:at({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:at({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:at({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:at({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function st(e,n){qn(2,arguments);var t=Xn(n);return Zn(e,-t)}function vt(e){qn(1,arguments);var n=1,t=Jn(e),l=t.getUTCDay(),i=(l<n?7:0)+l-n;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function pt(e){qn(1,arguments);var n=Jn(e),t=n.getUTCFullYear(),l=new Date(0);l.setUTCFullYear(t+1,0,4),l.setUTCHours(0,0,0,0);var i=vt(l),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var a=vt(o);return n.getTime()>=i.getTime()?t+1:n.getTime()>=a.getTime()?t:t-1}function mt(e){qn(1,arguments);var n=pt(e),t=new Date(0);t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0);var l=vt(t);return l}function ft(e,n){qn(1,arguments);var t=n||{},l=t.locale,i=l&&l.options&&l.options.weekStartsOn,o=null==i?0:Xn(i),a=null==t.weekStartsOn?o:Xn(t.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var r=Jn(e),u=r.getUTCDay(),d=(u<a?7:0)+u-a;return r.setUTCDate(r.getUTCDate()-d),r.setUTCHours(0,0,0,0),r}function Et(e,n){qn(1,arguments);var t=Jn(e),l=t.getUTCFullYear(),i=n||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,r=null==a?1:Xn(a),u=null==i.firstWeekContainsDate?r:Xn(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(l+1,0,u),d.setUTCHours(0,0,0,0);var c=ft(d,n),s=new Date(0);s.setUTCFullYear(l,0,u),s.setUTCHours(0,0,0,0);var v=ft(s,n);return t.getTime()>=c.getTime()?l+1:t.getTime()>=v.getTime()?l:l-1}function _t(e,n){qn(1,arguments);var t=n||{},l=t.locale,i=l&&l.options&&l.options.firstWeekContainsDate,o=null==i?1:Xn(i),a=null==t.firstWeekContainsDate?o:Xn(t.firstWeekContainsDate),r=Et(e,n),u=new Date(0);u.setUTCFullYear(r,0,a),u.setUTCHours(0,0,0,0);var d=ft(u,n);return d}function gt(e,n){for(var t=e<0?"-":"",l=Math.abs(e).toString();l.length<n;)l="0"+l;return t+l}var At={G:function(e,n,t){var l=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(l,{width:"abbreviated"});case"GGGGG":return t.era(l,{width:"narrow"});case"GGGG":default:return t.era(l,{width:"wide"})}},y:function(e,n,t){if("yo"===n){var l=e.getUTCFullYear();return t.ordinalNumber(l>0?l:1-l,{unit:"year"})}return function(e,n){var t=e.getUTCFullYear(),l=t>0?t:1-t;return gt("yy"===n?l%100:l,n.length)}(e,n)},Y:function(e,n,t,l){var i=Et(e,l),o=i>0?i:1-i;return"YY"===n?gt(o%100,2):"Yo"===n?t.ordinalNumber(o,{unit:"year"}):gt(o,n.length)},R:function(e,n){return gt(pt(e),n.length)},u:function(e,n){return gt(e.getUTCFullYear(),n.length)},Q:function(e,n,t){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(l);case"QQ":return gt(l,2);case"Qo":return t.ordinalNumber(l,{unit:"quarter"});case"QQQ":return t.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(l,{width:"wide",context:"formatting"})}},q:function(e,n,t){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(l);case"qq":return gt(l,2);case"qo":return t.ordinalNumber(l,{unit:"quarter"});case"qqq":return t.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(l,{width:"wide",context:"standalone"})}},M:function(e,n,t){var l=e.getUTCMonth();switch(n){case"M":case"MM":return function(e,n){var t=e.getUTCMonth();return"M"===n?String(t+1):gt(t+1,2)}(e,n);case"Mo":return t.ordinalNumber(l+1,{unit:"month"});case"MMM":return t.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(l,{width:"wide",context:"formatting"})}},L:function(e,n,t){var l=e.getUTCMonth();switch(n){case"L":return String(l+1);case"LL":return gt(l+1,2);case"Lo":return t.ordinalNumber(l+1,{unit:"month"});case"LLL":return t.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(l,{width:"wide",context:"standalone"})}},w:function(e,n,t,l){var i=function(e,n){qn(1,arguments);var t=Jn(e),l=ft(t,n).getTime()-_t(t,n).getTime();return Math.round(l/6048e5)+1}(e,l);return"wo"===n?t.ordinalNumber(i,{unit:"week"}):gt(i,n.length)},I:function(e,n,t){var l=function(e){qn(1,arguments);var n=Jn(e),t=vt(n).getTime()-mt(n).getTime();return Math.round(t/6048e5)+1}(e);return"Io"===n?t.ordinalNumber(l,{unit:"week"}):gt(l,n.length)},d:function(e,n,t){return"do"===n?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,n){return gt(e.getUTCDate(),n.length)}(e,n)},D:function(e,n,t){var l=function(e){qn(1,arguments);var n=Jn(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var l=n.getTime(),i=t-l;return Math.floor(i/864e5)+1}(e);return"Do"===n?t.ordinalNumber(l,{unit:"dayOfYear"}):gt(l,n.length)},E:function(e,n,t){var l=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return t.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(l,{width:"short",context:"formatting"});case"EEEE":default:return t.day(l,{width:"wide",context:"formatting"})}},e:function(e,n,t,l){var i=e.getUTCDay(),o=(i-l.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return gt(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,t,l){var i=e.getUTCDay(),o=(i-l.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return gt(o,n.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,t){var l=e.getUTCDay(),i=0===l?7:l;switch(n){case"i":return String(i);case"ii":return gt(i,n.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(l,{width:"short",context:"formatting"});case"iiii":default:return t.day(l,{width:"wide",context:"formatting"})}},a:function(e,n,t){var l=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,n,t){var l,i=e.getUTCHours();switch(l=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,n,t){var l,i=e.getUTCHours();switch(l=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",n){case"B":case"BB":case"BBB":return t.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,n,t){if("ho"===n){var l=e.getUTCHours()%12;return 0===l&&(l=12),t.ordinalNumber(l,{unit:"hour"})}return function(e,n){return gt(e.getUTCHours()%12||12,n.length)}(e,n)},H:function(e,n,t){return"Ho"===n?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,n){return gt(e.getUTCHours(),n.length)}(e,n)},K:function(e,n,t){var l=e.getUTCHours()%12;return"Ko"===n?t.ordinalNumber(l,{unit:"hour"}):gt(l,n.length)},k:function(e,n,t){var l=e.getUTCHours();return 0===l&&(l=24),"ko"===n?t.ordinalNumber(l,{unit:"hour"}):gt(l,n.length)},m:function(e,n,t){return"mo"===n?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,n){return gt(e.getUTCMinutes(),n.length)}(e,n)},s:function(e,n,t){return"so"===n?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,n){return gt(e.getUTCSeconds(),n.length)}(e,n)},S:function(e,n){return function(e,n){var t=n.length,l=e.getUTCMilliseconds();return gt(Math.floor(l*Math.pow(10,t-3)),n.length)}(e,n)},X:function(e,n,t,l){var i=(l._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(n){case"X":return ht(i);case"XXXX":case"XX":return bt(i);case"XXXXX":case"XXX":default:return bt(i,":")}},x:function(e,n,t,l){var i=(l._originalDate||e).getTimezoneOffset();switch(n){case"x":return ht(i);case"xxxx":case"xx":return bt(i);case"xxxxx":case"xxx":default:return bt(i,":")}},O:function(e,n,t,l){var i=(l._originalDate||e).getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+St(i,":");case"OOOO":default:return"GMT"+bt(i,":")}},z:function(e,n,t,l){var i=(l._originalDate||e).getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+St(i,":");case"zzzz":default:return"GMT"+bt(i,":")}},t:function(e,n,t,l){return gt(Math.floor((l._originalDate||e).getTime()/1e3),n.length)},T:function(e,n,t,l){return gt((l._originalDate||e).getTime(),n.length)}};function St(e,n){var t=e>0?"-":"+",l=Math.abs(e),i=Math.floor(l/60),o=l%60;if(0===o)return t+String(i);var a=n||"";return t+String(i)+a+gt(o,2)}function ht(e,n){return e%60==0?(e>0?"-":"+")+gt(Math.abs(e)/60,2):bt(e,n)}function bt(e,n){var t=n||"",l=e>0?"-":"+",i=Math.abs(e);return l+gt(Math.floor(i/60),2)+t+gt(i%60,2)}function yt(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function Tt(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}var Ct={p:Tt,P:function(e,n){var t,l=e.match(/(P+)(p+)?/)||[],i=l[1],o=l[2];if(!o)return yt(e,n);switch(i){case"P":t=n.dateTime({width:"short"});break;case"PP":t=n.dateTime({width:"medium"});break;case"PPP":t=n.dateTime({width:"long"});break;case"PPPP":default:t=n.dateTime({width:"full"})}return t.replace("{{date}}",yt(i,n)).replace("{{time}}",Tt(o,n))}},Dt=["D","DD"],Pt=["YY","YYYY"];function Nt(e){return-1!==Dt.indexOf(e)}function It(e){return-1!==Pt.indexOf(e)}function Lt(e,n,t){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}var Bt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ot=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rt=/^'([^]*?)'?$/,xt=/''/g,wt=/[a-zA-Z]/;function Mt(e,n,t){qn(2,arguments);var l=String(n),i=t||{},o=i.locale||ct,a=o.options&&o.options.firstWeekContainsDate,r=null==a?1:Xn(a),u=null==i.firstWeekContainsDate?r:Xn(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=o.options&&o.options.weekStartsOn,c=null==d?0:Xn(d),s=null==i.weekStartsOn?c:Xn(i.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var v=Jn(e);if(!et(v))throw new RangeError("Invalid time value");var p=Qn(v),m=st(v,p),f={firstWeekContainsDate:u,weekStartsOn:s,locale:o,_originalDate:v},E=l.match(Ot).map(function(e){var n=e[0];return"p"===n||"P"===n?(0,Ct[n])(e,o.formatLong,f):e}).join("").match(Bt).map(function(t){if("''"===t)return"'";var l=t[0];if("'"===l)return kt(t);var a=At[l];if(a)return!i.useAdditionalWeekYearTokens&&It(t)&&Lt(t,n,e),!i.useAdditionalDayOfYearTokens&&Nt(t)&&Lt(t,n,e),a(m,t,o.localize,f);if(l.match(wt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return t}).join("");return E}function kt(e){return e.match(Rt)[1].replace(xt,"'")}var Ft=function(e){var r=e.parentRoute;window.scroll(0,0);var d=l.useTranslation().t,c=Digit.ULBService.getCurrentTenantId(),s={},v={moduleName:"bpa-services",applicationStatus:[],locality:[],assignee:"ASSIGNED_TO_ALL",applicationType:[]},p={sortBy:"",limit:Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"DESC"},m=Digit.SessionStorage.get("OBPS.INBOX"),f=n.useMemo(function(){return m||{filterForm:v,searchForm:s,tableForm:p}},[Object.values((null==m?void 0:m.filterForm)||{}),Object.values((null==m?void 0:m.searchForm)||{}),Object.values((null==m?void 0:m.tableForm)||{})]),E=n.useReducer(function(e,n){switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("OBPS.INBOX",u({},e,{searchForm:n.data})),u({},e,{searchForm:n.data});case"mutateFilterForm":return Digit.SessionStorage.set("OBPS.INBOX",u({},e,{filterForm:n.data})),u({},e,{filterForm:n.data});case"mutateTableForm":return Digit.SessionStorage.set("OBPS.INBOX",u({},e,{tableForm:n.data})),u({},e,{tableForm:n.data})}},f),_=E[0],g=E[1],A=Digit.Hooks.useBoundaryLocalities(c,"revenue",{},d),S=A.data,h=A.isLoading,b=Digit.Hooks.obps.useBPAInbox({tenantId:c,filters:u({},_)}),y=b.isLoading,T=b.data,C=void 0===T?{}:T,D=C.table,P=C.statuses,N=C.totalCount,I={logoIcon:t.createElement(o.CaseIcon,null),headerText:"CS_COMMON_OBPS",links:[{text:d("BPA_SEARCH_PAGE_TITLE"),link:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/search/application":"/digit-ui/employee/obps/search/application",businessService:"BPA",roles:["BPAREG_EMPLOYEE","BPAREG_APPROVER","BPAREG_DOC_VERIFIER","BPAREG_DOC_VERIFIER"]}]},L=n.useCallback(function(e){return t.createElement(Vn,{registerRef:e.registerRef,searchFormState:e.searchFormState,searchFieldComponents:e.searchFieldComponents})},[]),B=n.useCallback(function(e){return t.createElement(Gn,{statuses:P,isInboxLoading:y,registerRef:e.registerRef,controlFilterForm:e.controlFilterForm,setFilterFormValue:e.setFilterFormValue,filterFormState:null==_?void 0:_.filterForm,getFilterFormValue:e.getFilterFormValue,localitiesForEmployeesCurrentTenant:S,loadingLocalitiesForEmployeesCurrentTenant:h})},[P,y,S,h]),O={SearchFormFields:L,onSearchFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),g({action:"mutateTableForm",data:u({},p)}),g({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==_?void 0:_.searchForm,resetSearchFormDefaultValues:s,onSearchFormReset:function(e){e("mobileNumber",null),e("applicationNo",null),g({action:"mutateSearchForm",data:s})}},R={FilterFormFields:B,onFilterFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),g({action:"mutateTableForm",data:u({},p)}),g({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==_?void 0:_.filterForm,resetFilterFormDefaultValues:v,onFilterFormReset:function(e){e("moduleName","bpa-services"),e("applicationStatus",""),e("locality",[]),e("assignee","ASSIGNED_TO_ALL"),e("applicationType",[]),g({action:"mutateFilterForm",data:v})}},x=function(e){var o,a,r,d,c=e.parentRoute,s=e.onPageSizeChange,v=e.formState,p=e.totalCount,m=e.table,f=e.dispatch,E=e.onSortingByData,_=l.useTranslation().t,g=n.useMemo(function(){return[{Header:_("BPA_APPLICATION_NUMBER_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:function(e){var n=e.row;return t.createElement("div",null,t.createElement(i.Link,{to:window.location.href.includes("/citizen")?c+"/bpa/"+n.original.applicationId:c+"/inbox/bpa/"+n.original.applicationId},t.createElement("span",{className:"link"},n.original.applicationId)))}},{Header:_("CS_APPLICATION_DETAILS_APPLICATION_DATE"),accessor:"applicationDate",Cell:function(e){var n,l,i,o=e.row;return null!==(n=o.original)&&void 0!==n&&n.date?(i=Mt(new Date(null===(l=o.original)||void 0===l?void 0:l.date),"dd/MM/yyyy"),t.createElement("span",{className:"cell-text styled-cell"},i)):""}},{Header:_("ES_INBOX_LOCALITY"),accessor:function(e){return _(null==e?void 0:e.locality)},disableSortBy:!0},{Header:_("EVENTS_STATUS_LABEL"),accessor:function(e){return _(null!=e&&e.state?"WF_"+(null==e?void 0:e.businessService)+"_"+(null==e?void 0:e.state):"WF_"+(null==e?void 0:e.businessService)+"_"+(null==e?void 0:e.status))},disableSortBy:!0},{Header:_("WF_INBOX_HEADER_CURRENT_OWNER"),accessor:function(e){return _(null==e?void 0:e.owner)},disableSortBy:!0},{Header:_("BPA_SEARCH_APPLICATION_TYPE_LABEL"),accessor:function(e){return _(null==e?void 0:e.applicationType)},disableSortBy:!0},{Header:_("ES_INBOX_SLA_DAYS_REMAINING"),accessor:function(e){return"CS_NA"===(n=null==e?void 0:e.sla)?_(n):t.createElement("span","Active"===n||n>0?{className:"sla-cell-success"}:{className:"sla-cell-error"},n);var n}}]});return{getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},disableSort:!1,autoSort:!1,manualPagination:!0,initSortId:"applicationDate",onPageSizeChange:s,currentPage:(null===(o=v.tableForm)||void 0===o?void 0:o.offset)/(null===(a=v.tableForm)||void 0===a?void 0:a.limit),onNextPage:function(){var e,n;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(n=v.tableForm)||void 0===n?void 0:n.limit)})})},onPrevPage:function(){var e,n;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(n=v.tableForm)||void 0===n?void 0:n.limit)})})},pageSizeLimit:null===(r=v.tableForm)||void 0===r?void 0:r.limit,onSort:E,totalRecords:p,onSearch:null==v||null===(d=v.searchForm)||void 0===d?void 0:d.message,onLastPage:function(){var e;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:10*Math.ceil(p/10)-parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.limit)})})},onFirstPage:function(){return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:0})})},data:m,columns:g}}(u({},{parentRoute:r,onPageSizeChange:function(e){g({action:"mutateTableForm",data:u({},_.tableForm,{limit:e.target.value})})},formState:_,totalCount:N,table:D,dispatch:g,onSortingByData:function(e){if(e.length>0){var n=e[0],t=n.id,l=n.desc;_.tableForm.sortBy===t&&_.tableForm.sortOrder===(l?"DESC":"ASC")||g({action:"mutateTableForm",data:u({},_.tableForm,{sortBy:t,sortOrder:l?"DESC":"ASC"})})}}})),w=function(e){var n=e.table,i=e.getRedirectionLink,r=l.useTranslation().t;return{data:null==n?void 0:n.map(function(e){var n,t=e.applicationId,l=e.date,i=e.applicationType,o=e.businessService,a=e.locality,u=e.status,d=e.owner,c=e.sla,s=e.state;return(n={})[r("BPA_APPLICATION_NUMBER_LABEL")]=t,n[r("CS_APPLICATION_DETAILS_APPLICATION_DATE")]=Mt(new Date(l),"dd/MM/yyyy"),n[r("BPA_SEARCH_APPLICATION_TYPE_LABEL")]=r(i),n[r("ES_INBOX_LOCALITY")]=r(a),n[r("EVENTS_STATUS_LABEL")]=r(s?"WF_"+o+"_"+s:"WF_"+o+"_"+u),n[r("WF_INBOX_HEADER_CURRENT_OWNER")]=d,n[r("ES_INBOX_SLA_DAYS_REMAINING")]=c,n}),isTwoDynamicPrefix:!0,linkPrefix:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/":"/digit-ui/employee/obps/",getRedirectionLink:i,serviceRequestIdKey:"applicationNo",MobileSortFormValues:function(){var e=[{code:"DESC",i18nKey:"ES_COMMON_SORT_BY_DESC"},{code:"ASC",i18nKey:"ES_COMMON_SORT_BY_ASC"}],n=a.useFormContext();return t.createElement(o.SearchField,null,t.createElement(a.Controller,{name:"sortOrder",control:n.control,render:function(n){var l=n.onChange,i=n.value;return t.createElement(o.RadioButtons,{onSelect:function(e){l(e.code)},selectedOption:e.filter(function(e){return e.code===i})[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}}({parentRoute:r,table:D,getRedirectionLink:function(e){return"BPAREG"===e?"search/application/stakeholder":window.location.href.includes("/citizen")?"bpa":"search/application/bpa"}}),M={onMobileSortOrderData:function(e){g({action:"mutateTableForm",data:u({},_.tableForm,{sortOrder:e.sortOrder})})},sortFormDefaultValues:null==_?void 0:_.tableForm,onSortFormReset:function(e){e("sortOrder","DESC"),g({action:"mutateTableForm",data:p})}};return t.createElement(n.Fragment,null,t.createElement(o.Header,null,d("ES_COMMON_INBOX"),N?t.createElement("p",{className:"inbox-count"},N):null),Digit.Utils.browser.isMobile()&&t.createElement("div",{style:{marginLeft:"12px"}},t.createElement(i.Link,{to:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/search/application":"/digit-ui/employee/obps/search/application"},t.createElement("span",{className:"link"},d("BPA_SEARCH_PAGE_TITLE")))),t.createElement(o.InboxComposer,u({isInboxLoading:y,PropsForInboxLinks:I},O,R,M,{propsForInboxTable:x,propsForInboxMobileCards:w,formState:_})))},Ut=function(e){var n,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L=e.path,B=i.useLocation(),O=l.useTranslation().t,R=null===(n=Digit)||void 0===n||null===(a=n.ComponentRegistryService)||void 0===a?void 0:a.getComponent("BPACitizenHomeScreen"),x=null===(r=Digit)||void 0===r||null===(d=r.ComponentRegistryService)||void 0===d?void 0:d.getComponent("ObpsCreateEDCR"),w=null===(c=Digit)||void 0===c||null===(s=c.ComponentRegistryService)||void 0===s?void 0:s.getComponent("ObpsCreateOCEDCR"),M=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("ObpsNewBuildingPermit"),k=null===(m=Digit)||void 0===m||null===(f=m.ComponentRegistryService)||void 0===f?void 0:f.getComponent("ObpsOCBuildingPermit"),F=null===(E=Digit)||void 0===E||null===(_=E.ComponentRegistryService)||void 0===_?void 0:_.getComponent("ObpsStakeholderRegistration"),U=null===(g=Digit)||void 0===g||null===(A=g.ComponentRegistryService)||void 0===A?void 0:A.getComponent("ObpsEdcrInbox"),H=null===(S=Digit)||void 0===S||null===(h=S.ComponentRegistryService)||void 0===h?void 0:h.getComponent("ObpsCitizenBpaApplicationDetail"),W=null===(b=Digit)||void 0===b||null===(y=b.ComponentRegistryService)||void 0===y?void 0:y.getComponent("ObpsBPASendToArchitect"),j=null===(T=Digit)||void 0===T||null===(C=T.ComponentRegistryService)||void 0===C?void 0:C.getComponent("ObpsOCSendToArchitect"),z=null===(D=Digit)||void 0===D||null===(P=D.ComponentRegistryService)||void 0===P?void 0:P.getComponent("ObpsBPASendBackToCitizen"),Y=null===(N=Digit)||void 0===N||null===(I=N.ComponentRegistryService)||void 0===I?void 0:I.getComponent("ObpsOCSendBackToCitizen"),K="true"===sessionStorage.getItem("clickOnBPAApplyAfterEDCR");return t.createElement(t.Fragment,null,t.createElement("div",{className:"ws-citizen-wrapper"},!B.pathname.includes("response")&&!B.pathname.includes("openlink/stakeholder")&&!B.pathname.includes("/acknowledgement")&&!K&&t.createElement(o.BackButton,{style:{border:"none"}},O("CS_COMMON_BACK")),t.createElement(i.Switch,null,t.createElement(o.PrivateRoute,{path:L+"/home",component:R}),t.createElement(o.PrivateRoute,{path:L+"/search/application",component:function(e){return t.createElement(Un,u({},e,{parentRoute:L}))}}),t.createElement(o.PrivateRoute,{path:L+"/search/obps-application",component:function(e){return t.createElement(Un,u({},e,{parentRoute:L}))}}),t.createElement(o.PrivateRoute,{path:L+"/edcrscrutiny/apply",component:x}),t.createElement(o.PrivateRoute,{path:L+"/edcrscrutiny/oc-apply",component:w}),t.createElement(o.PrivateRoute,{path:L+"/bpa/:applicationType/:serviceType",component:M}),t.createElement(o.PrivateRoute,{path:L+"/ocbpa/:applicationType/:serviceType",component:k}),t.createElement(o.PrivateRoute,{path:L+"/stakeholder/apply",component:F}),t.createElement(i.Route,{path:L+"/openlink/stakeholder/apply",component:F}),t.createElement(o.PrivateRoute,{path:L+"/my-applications",component:Hn}),t.createElement(o.PrivateRoute,{path:L+"/bpa/inbox",component:function(e){return t.createElement(Ft,u({},e,{parentRoute:L}))}}),t.createElement(o.PrivateRoute,{path:L+"/edcr/inbox",component:function(e){return t.createElement(U,u({},e,{parentRoute:L}))}}),t.createElement(o.PrivateRoute,{path:L+"/stakeholder/:id",component:Yn}),t.createElement(o.PrivateRoute,{path:L+"/bpa/:id",component:H}),t.createElement(o.PrivateRoute,{path:L+"/editApplication/bpa/:tenantId/:applicationNo",component:W}),t.createElement(o.PrivateRoute,{path:L+"/editApplication/ocbpa/:tenantId/:applicationNo",component:j}),t.createElement(o.PrivateRoute,{path:L+"/sendbacktocitizen/bpa/:tenantId/:applicationNo",component:z}),t.createElement(o.PrivateRoute,{path:L+"/sendbacktocitizen/ocbpa/:tenantId/:applicationNo",component:Y}),t.createElement(o.PrivateRoute,{path:L+"/response",component:Kn}))))},Ht=function(e){var i=e.statuses,r=e.isInboxLoading,u=e.controlFilterForm,d=e.setFilterFormValue,c=l.useTranslation().t,s=[{code:"ASSIGNED_TO_ME",name:""+c("ES_INBOX_ASSIGNED_TO_ME")},{code:"ASSIGNED_TO_ALL",name:""+c("ES_INBOX_ASSIGNED_TO_ALL")}],v=Digit.ULBService.getStateId(),p=Digit.Hooks.obps.useMDMS(v,"StakeholderRegistraition","TradeTypetoRoleMapping",{select:function(e){var n;return null==e||null===(n=e.StakeholderRegistraition)||void 0===n?void 0:n.TradeTypetoRoleMapping.reduce(function(e,n){var t=n.tradeType.split(".")[0];return e.find(function(e){return e.i18nKey.includes(t)})?e:[].concat(e,[{role:n.role[0],i18nKey:"TRADELICENSE_TRADETYPE_"+n.tradeType.split(".")[0],tradeType:n.tradeType,identifier:t}])},[])}}),m=p.data,f=p.isLoading,E=a.useWatch({control:u,name:"businessService",defaultValue:null});return t.createElement(n.Fragment,null,t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"assignee",control:u,render:function(e){return t.createElement(o.RadioButtons,{onSelect:function(n){e.onChange(n.code)},selectedOption:s.filter(function(n){return n.code===e.value})[0],optionsKey:"name",name:"assignee",options:s})}})),t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"businessService",control:u,render:function(e){return f?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontSize:"18px",fontWeight:"600"}},c("BPA_LICENSE_TYPE")),t.createElement(o.RadioButtons,{onSelect:function(n){d("applicationStatus",[]),e.onChange(n)},selectedOption:e.value,optionsKey:"i18nKey",options:m}))}})),E?t.createElement(o.FilterFormField,null,t.createElement("div",{className:"filter-label",style:{fontSize:"18px",fontWeight:"600"}},c("ACTION_TEST_APPLICATION_STATUS")),t.createElement(a.Controller,{name:"applicationStatus",control:u,render:function(e){var l=n.useMemo(function(){var n;return null==i||null===(n=i.filter(function(e){return e.businessservice===E.identifier}))||void 0===n?void 0:n.map(function(n,l){var i;return t.createElement(o.CheckBox,{key:l,onChange:function(t){var l,i;return i=t.target.checked?[].concat(e.value,[null==n?void 0:n.statusid]):null===(l=e.value)||void 0===l?void 0:l.filter(function(e){return e!==(null==n?void 0:n.statusid)}),void e.onChange(i)},checked:null===(i=e.value)||void 0===i?void 0:i.includes(null==n?void 0:n.statusid),label:c("WF_"+n.businessservice+"_"+n.applicationstatus)+" ("+n.count+")"})})},[e.value,i,E]);return t.createElement(n.Fragment,null,r?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,l))}})):null)},Wt=function(e){var i,a,r,u,d,c,s,v,p=e.registerRef,m=e.searchFormState,f=e.searchFieldComponents,E=l.useTranslation().t;return window.Digit.Utils.browser.isMobile()?t.createElement(n.Fragment,null,t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNo",inputRef:p({})})),t.createElement(o.SearchField,null,t.createElement("label",null,E("CORE_COMMON_MOBILE_NUMBER")),t.createElement(o.MobileNumber,{name:"mobileNumber",type:"number",inputRef:p({minLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:E("CORE_COMMON_MOBILE_ERROR")}})}),null!=m&&null!==(i=m.errors)&&void 0!==i&&null!==(a=i.mobileNumber)&&void 0!==a&&a.message?t.createElement(o.CardLabelError,null,null==m||null===(r=m.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message):null)):t.createElement(t.Fragment,null,t.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:"24px"}},t.createElement("div",{className:"search-complaint-container"},t.createElement("div",{className:"complaint-input-container",style:{textAlign:"start"}},t.createElement(o.SearchField,null,t.createElement("label",null,E("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNo",inputRef:p({})})),t.createElement(o.SearchField,null,t.createElement("label",null,E("CORE_COMMON_MOBILE_NUMBER")),t.createElement(o.MobileNumber,{name:"mobileNumber",type:"number",inputRef:p({minLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:E("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:E("CORE_COMMON_MOBILE_ERROR")}})}),null!=m&&null!==(d=m.errors)&&void 0!==d&&null!==(c=d.mobileNumber)&&void 0!==c&&c.message?t.createElement(o.CardLabelError,null,null==m||null===(s=m.errors)||void 0===s||null===(v=s.mobileNumber)||void 0===v?void 0:v.message):null),t.createElement("div",{className:"search-action-wrapper",style:{width:"100%"}},f)))))},jt=[],zt=function(e){var n=e.currentStep,i=void 0===n?1:n,a=e.flow,r=void 0===a?"":a,u=l.useTranslation().t,d=window.Digit.Utils.browser.isMobile();return function(e){switch(e){case"STAKEHOLDER":jt=["BPA_LICENSE_DETAILS_LABEL","BPA_NEW_ADDRESS_HEADER_DETAILS","BPA_DOC_DETAILS_SUMMARY","BPA_STEPPER_SUMMARY_HEADER"];break;case"OCBPA":jt=["BPA_BASIC_AND_PLOT_DETAILS_LABEL","BPA_SCRUTINY_DETAILS","BPA_DOCUMENT_AND_NOC_DETAILS_LABEL","BPA_STEPPER_SUMMARY_HEADER"];break;default:jt=["BPA_STEPPER_SCRUTINY_DETAILS_HEADER","BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL","BPA_NOC_DETAILS_SUMMARY","BPA_STEPPER_SUMMARY_HEADER"]}}(r),t.createElement("div",{className:"timeline-container",style:d?{}:{margin:"0 8px 15px"}},jt.map(function(e,n,l){return t.createElement("div",{className:"timeline-checkpoint",key:n},t.createElement("div",{className:"timeline-content"},t.createElement("span",{className:"circle "+(n<=i-1&&"active")},n<i-1?t.createElement(o.TickMark,null):n+1),t.createElement("span",{className:"secondary-color"},u(e))),n<l.length-1&&t.createElement("span",{className:"line "+(n<i-1&&"active")}))}))};function Yt(e){var n=e.documents,i=e.svgStyles,a=void 0===i?{}:i,r=e.isSendBackFlow,u=void 0!==r&&r,d=e.isHrLine,c=void 0!==d&&d,s=e.titleStyles,v=l.useTranslation().t,p=window.location.href.includes("stakeholder");return t.createElement("div",{style:{marginTop:"19px"}},!p&&(null==n?void 0:n.map(function(e,l){var i;return t.createElement(t.Fragment,{key:l},null!=e&&e.title?t.createElement(o.CardSubHeader,{style:s||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map(function(e,n){var l,i;return t.createElement("a",{target:"_",href:null==e?void 0:e.url,style:(l={minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},l.minWidth="100px",l),key:n},t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(o.PDFSvg,null)),t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},v(null==e?void 0:e.title)),u?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?t.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType.split(".")[1])):t.createElement("p",{style:{textAlign:"center"}},v(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),c&&(null==n?void 0:n.length)!=l+1?t.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),p&&(null==n?void 0:n.map(function(e,n){var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(o.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},v(null==e?void 0:e.title)):null,t.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return t.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},t.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},v(null==e?void 0:e.title)),null!=e&&e.docInfo?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+v(null==e?void 0:e.docInfo)):null,t.createElement(o.PDFSvg,null),t.createElement("p",{style:(l={marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center"},l.color="#505A5F",l)},""+v(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,v("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}var Kt=t.memo(function(e){var l,i,a,r=e.t,d=e.document,c=e.setDocuments,s=e.documents,v=e.formData,p=e.beforeUploadDocuments,m=(null==s?void 0:s.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==d?void 0:d.code)})[0])||(null==p?void 0:p.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==d?void 0:d.code)})[0]),f=Digit.ULBService.getStateId(),E=n.useState(m?u({},m,{active:!0,code:null==m?void 0:m.documentType,i18nKey:null==m?void 0:m.documentType}):(null==d||null===(l=d.dropdownData)||void 0===l?void 0:l.length)>0?null==d?void 0:d.dropdownData[0]:{}),_=E[0],g=E[1],A=n.useState(null),S=A[0],h=A[1],b=n.useState(function(){return(null==s?void 0:s.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==d?void 0:d.code)}).map(function(e){return{fileStoreId:null==e?void 0:e.fileStoreId,fileName:(null==e?void 0:e.fileName)||""}}))||null})[0],y=n.useState([])[1],T=n.useState([]),C=T[0],D=T[1],P=n.useState([]||(null==v||null===(i=v.documents)||void 0===i?void 0:i.documents.filter(function(e){return e.documentType===_.code}))),N=P[0],I=P[1];n.useEffect(function(){C.length>0&&null!=_&&_.code&&(c(function(e){if(null===b||null==(null==b?void 0:b.fileStoreId))return e;var n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b.fileStoreId}),t=[];return C&&C.map(function(e,n){var l,i;t.push({documentType:null==_?void 0:_.code,fileStoreId:e.fileStoreId,additionalDetails:{category:null==_?void 0:_.code.split(".").slice(0,2).join("_")},documentUid:e.fileStoreId,fileName:(null===(l=N[n])||void 0===l?void 0:l.name)||"",id:s?null===(i=s.find(function(e){return e.documentType===(null==_?void 0:_.code)}))||void 0===i?void 0:i.id:void 0})}),[].concat(n,t)}),D([])),null!=_&&_.code&&c(function(e){var n;if(null===b||null==(null==b?void 0:b.fileStoreId))return(null==e?void 0:e.length)>0&&(null==e||e.forEach(function(e){var n,t,l,i,o;(null==e||null===(n=e.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==e||null===(t=e.documentType)||void 0===t?void 0:t.split(".")[1])==(null==_||null===(l=_.code)||void 0===l?void 0:l.split(".")[0])+"."+(null==_||null===(i=_.code)||void 0===i?void 0:i.split(".")[1])&&(null!=e&&e.documentType&&(e.documentType=null==_?void 0:_.code),null!=e&&null!==(o=e.file)&&void 0!==o&&o.documentType&&(e.file.documentType=null==_?void 0:_.code))})),e;var t=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b.fileStoreId});return[].concat(t,[{documentType:null==_?void 0:_.code,fileStoreId:b.fileStoreId,documentUid:b.fileStoreId,fileName:(null==S?void 0:S.name)||b.fileName||"document",id:s?null===(n=s.find(function(e){return e.documentType===(null==_?void 0:_.code)}))||void 0===n?void 0:n.id:void 0}])})},[b,_]),n.useEffect(function(){_.code||null===b||D([].concat(C,[b]))},[b]);var L=n.useMemo(function(){var e,n,t=[];return null==v||null===(e=v.documents)||void 0===e||null===(n=e.documents)||void 0===n||n.filter(function(e){return e.documentType===_.code}).forEach(function(e){return t.push([e.fileName,{file:{name:e.fileName,type:e.documentType},fileStoreId:{fileStoreId:e.fileStoreId,tenantId:f}}])}),t},[v]);return t.createElement("div",null,t.createElement(o.CardLabel,null,null!=d&&d.required?r(null==d?void 0:d.code)+" *":""+r(null==d?void 0:d.code)),t.createElement(o.Dropdown,{t:r,isMandatory:!1,option:Digit.Utils.locale.sortDropdownNames(null==d?void 0:d.dropdownData,"i18nKey",r),selected:_,optionKey:"i18nKey",select:function(e){if(null!=m&&m.documentType){m.documentType=null==e?void 0:e.code;var n=null==s?void 0:s.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==d?void 0:d.code)});n.map(function(n){return n.documentType=null==e?void 0:e.code});var t=[].concat(null==s?void 0:s.filter(function(e){var n;return!(null!=e&&null!==(n=e.documentType)&&void 0!==n&&n.includes(null==d?void 0:d.code))}),n);c(t)}g(e)}}),t.createElement(o.MultiUploadWrapper,{module:"BPA",tenantId:f,getFormState:function(e){var n,t,l,i=_.code;if((null==e?void 0:e.length)>0){var o,a;t=Object.fromEntries(e),l=Object.values(t),l=null==v||null===(o=v.documents)||void 0===o||null===(a=o.documents)||void 0===a?void 0:a.filter(function(e){return e.documentType===_.code}),y(l);var r=[];null==e||e.map(function(e,n){var t,l,i,o;r.push({documentType:null==_?void 0:_.code,additionalDetails:{category:null==_?void 0:_.code.split(".").slice(0,2).join("_")},fileStoreId:null==e||null===(t=e[1])||void 0===t||null===(l=t.fileStoreId)||void 0===l?void 0:l.fileStoreId,documentUid:null==e||null===(i=e[1].fileStoreId)||void 0===i?void 0:i.fileStoreId,fileName:(null==e?void 0:e[0])||"",id:s?null===(o=s.find(function(e){return e.documentType===(null==_?void 0:_.code)}))||void 0===o?void 0:o.id:void 0})});var u=[].concat(s.filter(function(e){return e.documentType!==i}),r);c(u)}else if(0==(null==e?void 0:e.length)){var d=[].concat(s.filter(function(e){return e.documentType!==i}));c(d)}null===(n=l)||void 0===n||n.map(function(e){null!=e&&e.file||(e.file={}),e.file.documentType=i,function(e,n){e&&h(e.file),e&&I([].concat(N,[e.file]))}(e)})},setuploadedstate:L,t:r,extraStyleName:"OBPS",allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}),(null==d||null===(a=d.uploadedDocuments)||void 0===a?void 0:a.length)&&t.createElement(Yt,{isSendBackFlow:!0,documents:null==d?void 0:d.uploadedDocuments}))});function Gt(e){var i=e.documents,a=e.svgStyles,r=void 0===a?{}:a,u=e.isSendBackFlow,d=void 0!==u&&u,c=l.useTranslation().t,s=n.useState(function(){return[]}),v=s[0],p=s[1],m=(Digit.ULBService.getCurrentTenantId(),n.useState({})),f=m[0],E=m[1];n.useEffect(function(){var e,n=[];null==i||i.forEach(function(e,t,l){n=[].concat(n,e.values?e.values:[])}),p(null===(e=n)||void 0===e?void 0:e.map(function(e){return null==e?void 0:e.fileStoreId}))},[i]),n.useEffect(function(){var e;null!=v&&v.length&&"BillAmend"===(null==i||null===(e=i[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(v,Digit.ULBService.getCurrentTenantId()).then(function(e){E(null==e?void 0:e.data)}):null!=v&&v.length&&Digit.UploadServices.Filefetch(v,Digit.ULBService.getStateId()).then(function(e){E(null==e?void 0:e.data)})},[v]);var _=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),g=window.location.href.includes("stakeholder");return t.createElement("div",{style:{marginTop:"19px"}},!g&&(null==i?void 0:i.map(function(e,n){var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(o.CardSubHeader,{style:_?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},c(null==e?void 0:e.title)):null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l,i;return t.createElement("a",{target:"_",href:null===(l=f[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(o.PDFSvg,null)),t.createElement("p",{style:_?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},c(null==e?void 0:e.title)),d?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?t.createElement("p",{style:{textAlign:"center"}},c(null==e?void 0:e.documentType.split(".")[1])):t.createElement("p",{style:{textAlign:"center"}},c(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,c("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),g&&(null==i?void 0:i.map(function(e,n){var l;return t.createElement(t.Fragment,{key:n},null!=e&&e.title?t.createElement(o.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},c(null==e?void 0:e.title)):null,t.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return t.createElement("a",{target:"_",href:null===(l=f[e.fileStoreId])||void 0===l?void 0:l.split(",")[0],style:{minWidth:null!=r&&r.minWidth?null==r?void 0:r.minWidth:"160px",marginRight:"20px"},key:n},t.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},t.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},c(null==e?void 0:e.title)),null!=e&&e.docInfo?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+c(null==e?void 0:e.docInfo)):null,t.createElement(o.PDFSvg,null),t.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+c(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&t.createElement("div",null,t.createElement("p",null,c("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function Vt(e){var l,i,a,r=e.t,u=e.document,d=e.setNocDocuments,c=e.nocDocuments,s=e.formData,v=e.beforeUploadNocDocuments,p=e.pdfLoading,m=((null==c?void 0:c.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==u?void 0:u.code)})[0])||null==v||v.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==u?void 0:u.code)}),Digit.ULBService.getStateId()),f=n.useState(null==u||null===(l=u.dropdownData)||void 0===l?void 0:l[0]),E=f[0],_=f[1],g=n.useState(null)[1],A=n.useState(function(){var e,n;return{fileStoreId:null==c||null===(e=c.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==u?void 0:u.code)})[0])||void 0===e?void 0:e.fileStoreId,fileName:null==c||null===(n=c.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==u?void 0:u.code)})[0])||void 0===n?void 0:n.fileName}||null})[0],S=n.useState([]),h=S[0],b=S[1];n.useEffect(function(){null==E||!E.documentType||0!=c.filter(function(e){return e.documentType===(null==E?void 0:E.documentType)}).length&&h.filter(function(e){var n;return(null==e||null===(n=e.file)||void 0===n?void 0:n.documentType)===(null==E?void 0:E.documentType)}).length===c.filter(function(e){return e.documentType===(null==E?void 0:E.documentType)}).length||d(function(e){var n,t;if(null===A||null==(null==A?void 0:A.fileStoreId))return e;var l=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.fileStoreId)!==A.fileStoreId});return[].concat(l,[{documentType:null==u||null===(n=u.dropdownData)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.code,fileStoreId:A.fileStoreId,documentUid:A.fileStoreId,fileName:(null==A?void 0:A.fileName)||""}])})},[A,E]);var y=n.useMemo(function(){var e,n,t=[],l=E.code;return null==s||null===(e=s.nocDocuments)||void 0===e||null===(n=e.nocDocuments)||void 0===n||n.filter(function(e){return e.documentType===l}).forEach(function(e){return t.push([e.fileName,{file:{name:e.fileName,type:e.documentType},fileStoreId:{fileStoreId:e.fileStoreId,tenantId:m}}])}),t},[s]);return t.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 8px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",marginTop:"5px"}},t.createElement("div",null,t.createElement("h1",{style:{color:"#0B0C0C",lineHeight:"37px",fontWeight:"700",fontSize:"32px",fontFamily:"Roboto Condensed",paddingBottom:"24px"}},r("BPA_"+(null==u?void 0:u.nocType)+"_HEADER")),t.createElement("div",{style:{display:"flex",paddingBottom:"24px"}},t.createElement("h1",{style:{color:"#0B0C0C",lineHeight:"19px",fontWeight:"700",fontSize:"16px",fontFamily:"Roboto",marginRight:"10px"}},r("BPA_"+(null==u?void 0:u.nocType)+"_LABEL")),t.createElement("h1",null,null==u||null===(i=u.additionalDetails)||void 0===i?void 0:i.appNumberLink))),!window.location.href.includes("sendbacktocitizen")&&t.createElement(o.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:function(e){return function(e,n){var t,l,i;if((null==e?void 0:e.length)>0){var o;l=Object.fromEntries(e),i=Object.values(l),i=null==s||null===(o=s.nocDocuments)||void 0===o?void 0:o.nocDocuments.filter(function(e){return e.documentType===n}),b(i);var a=[];null==e||e.map(function(e,t){var l,i,o,r;a.push({documentType:n,fileStoreId:null==e||null===(l=e[1])||void 0===l||null===(i=l.fileStoreId)||void 0===i?void 0:i.fileStoreId,documentUid:null==e||null===(o=e[1].fileStoreId)||void 0===o?void 0:o.fileStoreId,fileName:(null==e?void 0:e[0])||"",id:c?null===(r=c.find(function(e){return e.documentType===n}))||void 0===r?void 0:r.id:void 0})});var r=[].concat(c.filter(function(e){return e.documentType!==n}),a);d(r)}null===(t=i)||void 0===t||t.map(function(e){null!=e&&e.file||(e.file={}),e.file.documentType=n,function(e,n){e&&_({documentType:n}),e&&g(e.file)}(e,n)})}(e,u.dropdownData[0].code)},setuploadedstate:y,t:r,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}),(null==u||null===(a=u.uploadedDocuments)||void 0===a?void 0:a.length)&&!p&&t.createElement(Yt,{documents:null==u?void 0:u.uploadedDocuments,svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}}))}var Xt=function(e){var l,i,a=e.t,r=e.onSelect,u=e.formData,d=void 0===u?{}:u,c=e.handleRemove,s=e.onSave,v=n.useState((null==d||null===(l=d.address)||void 0===l?void 0:l.pincode)||""),p=v[0],m=v[1],f=n.useState((null==d||null===(i=d.address)||void 0===i?void 0:i.geoLocation)||{}),E=f[0],_=f[1],g=Digit.Hooks.obps.useTenants(),A=n.useState(null),S=A[0],h=A[1],b=n.useState(""),y=b[0],T=b[1],C=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),!Digit.Utils.browser.isMobile());return t.createElement("div",{style:{position:"fixed",background:"#00000050",width:"100%",height:"100vh",top:"0",left:"0"}},t.createElement("div",{style:{position:"relative",marginTop:"60px"}},t.createElement("div",{style:C?{marginLeft:"25%",marginRight:"25%"}:{}},t.createElement(o.LocationSearchCard,{style:{position:"relative",marginTop:"100px",marginBottom:"-100px"},header:a("BPA_GIS_LABEL"),cardText:a(""),nextText:a("BPA_PIN_LOCATION_LABEL"),skip:function(){return r()},t:a,position:E,onSave:function(){return s(E,p,y)},onChange:function(e,n,t){return function(e,n,t){h(null),(null==g?void 0:g.find(function(n){var t;return null===(t=n.pincode)||void 0===t?void 0:t.find(function(n){return n==e})}))?(m(e),_(n),T(t)):(h("BPA_COMMON_PINCODE_NOT_SERVICABLE"),m(""),_({}),T(""))}(e,n,t)},disabled:""===p,forcedError:a(S),isPlaceRequired:!0,handleRemove:c,Webview:C,isPopUp:!0}))))},qt=[{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"home",component:"EDCRForm",nextStep:"",hideInEmployee:!0,key:"ScrutinyDetails",texts:{headerCaption:"",header:"EDCR_COMMON_APPL_NEW",cardText:"BPA_PROVIDE_REQ_FOR_NEW_BPA",submitBarLabel:"EDCR_SCRUTINY_SUBMIT_BUTTON",skipText:"EDCR_CLEAR_FORM"}}]}],Jt=[{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"docs-required",component:"OCEDCRDocsRequired",key:"data",nextStep:"home"},{route:"home",component:"OCeDCRScrutiny",nextStep:"upload-diagram",hideInEmployee:!0,key:"ScrutinyDetails"},{route:"upload-diagram",component:"OCUploadPlanDiagram",nextStep:null,hideInEmployee:!0,key:"uploadData",texts:{headerCaption:"BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL",header:"BPA_UPLOAD_OC_PLAN_DIAGRAM_LABEL",cardText:"",submitBarLabel:"BPA_COMMON_BUTTON_SUBMIT",skipText:""}}]}],Zt=[{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"docs-required",component:"DocsRequired",key:"data",nextStep:"basic-details"},{route:"basic-details",component:"BasicDetails",key:"data",nextStep:"plot-details"},{route:"plot-details",component:"PlotDetails",key:"data",nextStep:"scrutiny-details",texts:{headerCaption:"BPA_SCRUTINY_DETAILS",header:"BPA_PLOT_DETAILS_TITLE",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},inputs:[{label:"BPA_HOLDING_NUMBER_LABEL",type:"text",validation:{},name:"holdingNumber"},{label:"BPA_BOUNDARY_LAND_REG_DETAIL_LABEL",type:"textarea",validation:{},name:"registrationDetails"}]},{route:"scrutiny-details",component:"ScrutinyDetails",nextStep:"location",hideInEmployee:!0,key:"subOccupancy",texts:{headerCaption:"BPA_STEPPER_SCRUTINY_DETAILS_HEADER",header:"BPA_STEPPER_SCRUTINY_DETAILS_HEADER",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"location",component:"LocationDetails",nextStep:"owner-details",hideInEmployee:!0,key:"address",texts:{headerCaption:"BPA_STEPPER_SCRUTINY_DETAILS_HEADER",header:"BPA_NEW_TRADE_DETAILS_HEADER_DETAILS",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipAndContinueText:""}},{route:"owner-details",component:"OwnerDetails",nextStep:"document-details",key:"owners",texts:{headerCaption:"BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",header:"BPA_APPLICANT_DETAILS_HEADER",submitBarLabel:"CS_COMMON_NEXT"}},{route:"document-details",component:"DocumentDetails",nextStep:"noc-details",key:"documents",texts:{headerCaption:"BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",header:"BPA_DOCUMENT_DETAILS_LABEL",submitBarLabel:"CS_COMMON_NEXT"}},{route:"noc-details",component:"NOCDetails",nextStep:null,key:"nocDocuments",texts:{headerCaption:"BPA_NOC_DETAILS_SUMMARY",header:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"}}]}],Qt=function(e,n){return n&&Object.keys(n).map(function(t){e=e.replace(":"+t,n[t])}),e},$t=[{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"docs-required",component:"DocsRequired",key:"data",nextStep:"basic-details"},{route:"basic-details",component:"OCBasicDetails",key:"data",nextStep:"plot-details"},{route:"plot-details",component:"PlotDetails",key:"data",nextStep:"scrutiny-details",texts:{headerCaption:"BPA_SCRUTINY_DETAILS",header:"BPA_PLOT_DETAILS_TITLE",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},inputs:[{label:"BPA_HOLDING_NUMBER_LABEL",type:"text",validation:{},name:"holdingNumber"},{label:"BPA_BOUNDARY_LAND_REG_DETAIL_LABEL",type:"textarea",validation:{},name:"registrationDetails"}]},{route:"scrutiny-details",component:"ScrutinyDetails",nextStep:"document-details",hideInEmployee:!0,key:"subOccupancy",texts:{headerCaption:"BPA_STEPPER_SCRUTINY_DETAILS_HEADER",header:"BPA_STEPPER_SCRUTINY_DETAILS_HEADER",cardText:"",submitBarLabel:"CS_COMMON_NEXT",skipAndContinueText:""}},{route:"document-details",component:"DocumentDetails",nextStep:"noc-details",key:"documents",texts:{headerCaption:"BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",header:"BPA_DOCUMENT_DETAILS_LABEL",submitBarLabel:"CS_COMMON_NEXT"}},{route:"noc-details",component:"NOCDetails",nextStep:null,key:"nocDocuments",texts:{headerCaption:"BPA_NOC_DETAILS_SUMMARY",header:"",submitBarLabel:"CS_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"}}]}],el=function(e,n){return n&&Object.keys(n).map(function(t){e=e.replace(":"+t,n[t])}),e},nl=[{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"stakeholder-docs-required",component:"StakeholderDocsRequired",key:"data",nextStep:"provide-license-type"},{type:"component",route:"provide-license-type",isMandatory:!0,component:"LicenseType",texts:{headerCaption:"BPA_LICENSE_DET_CAPTION",header:"BPA_LICENSE_TYPE",cardText:"BPA_LICENSE_TYPE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},nextStep:"license-details",key:"LicneseType",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"license-details",isMandatory:!0,component:"LicenseDetails",texts:{headerCaption:"BPA_LICENSE_DET_CAPTION",header:"BPA_LICENSE_DET_CAPTION",cardText:"BPA_LICENSE_DETAILS_TEXT",submitBarLabel:"CS_COMMON_NEXT"},nextStep:"Permanent-address",key:"LicneseDetails",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"Permanent-address",isMandatory:!0,component:"PermanentAddress",texts:{headerCaption:"BPA_NEW_ADDRESS_HEADER_DETAILS",header:"BPA_LICENSEE_PERM_ADDR_HEADER",cardText:"BPA_LICENSEE_PERMANENT_TEXT",submitBarLabel:"CS_COMMON_NEXT"},nextStep:"correspondence-address",key:"LicneseDetails",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"correspondence-address",isMandatory:!0,component:"CorrospondenceAddress",texts:{headerCaption:"BPA_NEW_ADDRESS_HEADER_DETAILS",header:"BPA_LICENSEE_CORRESPONDENCE_LABEL",cardText:"BPA_LICENSEE_CORRESPONDENCE_TEXT",submitBarLabel:"CS_COMMON_NEXT"},nextStep:"stakeholder-document-details",key:"LicneseDetails",withoutLabel:!0,hideInEmployee:!0},{route:"stakeholder-document-details",component:"StakeholderDocuments",nextStep:null,key:"documents",texts:{headerCaption:"BPA_DOCUMENT_DETAILS_LABEL",header:"BPA_LICENSEE_DOCUMENT_DETAILS_HEADER",submitBarLabel:"CS_COMMON_NEXT"}}]}],tl=function(e){var i,a,r,u,d,c=l.useTranslation().t,s=null===(i=e.application)||void 0===i?void 0:i.businessService,v=Digit.Hooks.useWorkflowDetails({tenantId:null===(a=e.application)||void 0===a?void 0:a.tenantId,id:e.id,moduleCode:s}),p=v.isLoading,m=v.data;function f(e,n,t){var l;window.open(null==t||null===(l=t.fullImage)||void 0===l?void 0:l[0],"_blank")}var E=function(e){var n,l,i,o,a,r={date:null==e||null===(n=e.auditDetails)||void 0===n?void 0:n.lastModified,name:null==e||null===(l=e.assignes)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.name,mobileNumber:null==e||null===(o=e.assignes)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.mobileNumber,comment:c(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return t.createElement(jn,{data:r,OpenImage:f})};return p?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,!p&&t.createElement(n.Fragment,null,(null==m||null===(r=m.timeline)||void 0===r?void 0:r.length)>0&&t.createElement(o.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},c("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=m&&m.timeline&&1===(null==m||null===(u=m.timeline)||void 0===u?void 0:u.length)?t.createElement(o.CheckPoint,{isCompleted:!0,label:c((null==m||null===(d=m.timeline[0])||void 0===d?void 0:d.state)&&"WF_"+s+"_"+m.timeline[0].state||"NA"),customChild:E(null==m?void 0:m.timeline[0])}):t.createElement(o.ConnectingCheckPoints,null,(null==m?void 0:m.timeline)&&(null==m?void 0:m.timeline.map(function(e,n,l){var i,a,r,u,d="";return window.location.href.includes("/obps")&&(d=null!=m&&null!==(i=m.timeline[n-1])&&void 0!==i&&null!==(a=i.state)&&void 0!==a&&a.includes("BACK_FROM")||null!=m&&null!==(r=m.timeline[n-1])&&void 0!==r&&null!==(u=r.state)&&void 0!==u&&u.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),t.createElement(t.Fragment,{key:n},t.createElement(o.CheckPoint,{keyValue:n,isCompleted:0===n,label:e.state?c("WF_"+s+"_"+e.state+d):"NA",customChild:E(e)}))})))))},ll=function(e){var n=e.t,l=e.selectFile,i=e.uploadedFile,a=e.error,r=e.isCommentRequired,u=void 0===r||r,d=e.setUploadedFile;return{label:{heading:"BPA_FORWARD_APPLICATION_HEADER",submit:"BPA_"+e.action+"_BUTTON",cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:n("ES_OBPS_ACTION_COMMENTS"),isMandatory:u,type:"textarea",populators:{name:"comments",validation:{required:u}}},{label:""+n("WF_APPROVAL_UPLOAD_HEAD"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:l,onDelete:function(){d(null)},message:i?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:a})}]}]}},il=function(e){return t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},ol=function(){return t.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"#0B0C0C"}))},al=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick,style:{backgroundColor:"#FFFFFF"}},t.createElement(ol,null))},rl=function(e){var l,i,a,r,d,s=e.t,v=e.closeModal,p=e.submitAction,m=e.action,f=e.applicationData,E=n.useState({}),_=E[0],g=E[1],A=n.useState(null),S=A[0],h=A[1],b=n.useState(null),y=b[0],T=b[1],C=n.useState({})[0],D=n.useState(null),P=D[0],N=D[1],I=n.useState(!1),L=I[0],B=I[1],O=!!Digit.Utils.browser.isMobile(),R=function(e){h(e.target.files[0])};return n.useEffect(function(){var e,n;switch(m){case"APPROVE":var t;g(ll(((t={t:s,action:m,selectFile:R,uploadedFile:y,error:P,isCommentRequired:!1,setUploadedFile:T,file:S}).error=P,t)));break;case"SEND_TO_ARCHITECT":g(ll(((e={t:s,action:m,selectFile:R,uploadedFile:y,error:P,setUploadedFile:T,file:S}).error=P,e)));break;case"TERMS_AND_CONDITIONS":B(!0),g(function(e){return{label:{heading:"",submit:null,cancel:null,hideSubmit:!0},data:[function(e,n){return"CITIZEN_APPROVAL_INPROCESS"==(null==n?void 0:n.status)?""+e("BPA_CITIZEN_1_DECLARAION_LABEL")+e("BPA_CITIZEN_2_DECLARAION_LABEL"):"INPROGRESS"==(null==n?void 0:n.status)?""+e("BPA_STAKEHOLDER_1_DECLARAION_LABEL")+e("BPA_STAKEHOLDER_2_DECLARAION_LABEL"):void 0}(e.t,e.applicationData)]}}({t:s,applicationData:f}));break;default:g(ll(((n={t:s,action:m,selectFile:R,uploadedFile:y,error:P,isCommentRequired:!1,setUploadedFile:T,file:S}).error=P,n)))}},[m,y,P]),n.useEffect(function(){!function(){try{N(null);var e=function(){if(S){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(S.size>=5242880)N(s("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=S&&S.type&&!e.test(null==S?void 0:S.type))N(s("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return T(null),Promise.resolve(Digit.UploadServices.Filestorage("BPA",S,Digit.ULBService.getStateId())).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?T(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):N(s("CS_FILE_UPLOAD_ERROR"))})},function(){N(s("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[S]),t.createElement(o.Modal,{headerBarMain:t.createElement(il,{label:s(null==_||null===(l=_.label)||void 0===l?void 0:l.heading)}),headerBarEnd:t.createElement(al,{onClick:v}),actionCancelLabel:s(null==_||null===(i=_.label)||void 0===i?void 0:i.cancel),actionCancelOnSubmit:v,actionSaveLabel:s(null==_||null===(a=_.label)||void 0===a?void 0:a.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isDisabled:!1,isOBPSFlow:!0,popupStyles:O?{width:"720px"}:{},style:O?{minHeight:"45px",height:"auto",width:"160px"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},hideSubmit:!(null==_||null===(r=_.label)||void 0===r||!r.hideSubmit),popupModuleMianStyles:"TERMS_AND_CONDITIONS"==m?{height:"92%",boxSizing:"border-box"}:O?{paddingLeft:"0px"}:{},headerBarMainStyle:"TERMS_AND_CONDITIONS"==m?{margin:"0px",height:"35px"}:{}},null!=_&&_.form?t.createElement(o.FormComposer,{cardStyle:{minWidth:"unset",paddingRight:"unset",marginRight:"18px",paddingBottom:"64px"},config:null==_?void 0:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n={action:m};y&&(n.varificationDocuments=[{documentType:"Document - 1",fileName:(null==S?void 0:S.name)||"",fileStoreId:y}]),null!=e&&e.comments||delete e.comments,p(u({},e,n))},defaultValues:C,formId:"modal-action"}):null,L?t.createElement("div",{style:{height:"100%"}},t.createElement("div",{style:{height:"95%"}},t.createElement("div",{style:{fontSize:"18px",paddingBottom:"16px",color:"#000000",fontWeight:"700"}},s("TERMS_AND_CONDITIONS")),(null==_?void 0:_.data)&&(null==_||null===(d=_.data)||void 0===d?void 0:d.map(function(e,n){return t.createElement("div",{style:{height:"90%",overflow:"auto"}},""+e)}))),t.createElement("div",{style:{display:"flex",justifyContent:"center",minHeight:"5%"}},t.createElement(o.ButtonSelector,{label:s("BPA_GO_BACK_LABEL"),onSubmit:v,style:{minWidth:"240px"}}))):null)};function ul(e){var n,i,a,r=e.value,u=void 0===r?{}:r,d=e.Code,c=e.index,s=e.isNOC,v=void 0!==s&&s,p=e.isStakeHolder,m=void 0!==p&&p,f=l.useTranslation().t,E=Digit.Hooks.obps.useOBPSDocumentSearch({value:u},{value:u},d,c,v),_=E.isLoading,g=E.data,A=[];return v?null!=u&&u.nocDocuments?(null==u||null===(n=u.nocDocuments)||void 0===n?void 0:n.nocDocuments.length)>0&&(null==u||null===(i=u.nocDocuments)||void 0===i||i.nocDocuments.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(d)}).map(function(e){A.push(e)})):(null==u?void 0:u.length)>0&&(null==u||u.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(d)}).map(function(e){A.push(e)})):null!=u&&u.documents?null==u||null===(a=u.documents)||void 0===a||a.documents.filter(function(e){return(null==e?void 0:e.documentType)===d}).map(function(e){A.push(e)}):u.filter(function(e){return(null==e?void 0:e.documentType)===d}).map(function(e){A.push(e)}),_?t.createElement(o.Loader,null):t.createElement("div",{style:{marginTop:"19px"}},t.createElement(t.Fragment,null,t.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},A.length>0?t.createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap"}},null==A?void 0:A.map(function(e,n){var l=function(e,n,t){void 0===e&&(e={}),void 0===n&&(n="");var l=e[n]||"",i=(null==l?void 0:l.split(","))||[],o="";return i.length>0&&i.map(function(e){e.includes("large")||e.includes("medium")||e.includes("small")||(o=e)}),o}(g.pdfFiles,null==e?void 0:e.fileStoreId);return t.createElement("a",{target:"_blank",href:l,style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},t.createElement("div",{style:{display:"flex",justifyContent:"center"}},t.createElement(o.PDFSvg,null)),m?t.createElement("p",{style:{marginTop:"8px",textAlign:"center",color:"#505A5F"}},f("BPAREG_HEADER_"+fn(null==d?void 0:d.toUpperCase(),".","_"))):null,"  ",m?null:t.createElement("p",{style:{marginTop:"8px",textAlign:"center",color:"#505A5F"}},""+f(d)))})):t.createElement(o.CardText,null,f("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))}var dl=function(e){var i,a,r,u,d,c=e.edcrDetails,s=e.applicationData,v=l.useTranslation().t,p=window.Digit.Utils.browser.isMobile(),m=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],f=n.useMemo(function(){return m.map(function(e){return{Header:v(""+e.name),accessor:(n=e.id,t=n,function(e,n,l){return e[t]}),id:e.id};var n,t})});function E(e){var n,t=[];return null==e||null===(n=e.building)||void 0===n||n.floors.map(function(e){var n,l,i,o,a,r,u,d;t.push({Floor:v("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:v(""+(null===(n=e.occupancies)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:v("BPA_FLOOR_NAME_"+e.number)})}),t}function _(e){var n,t=null==s||null===(n=s.landInfo)||void 0===n?void 0:n.unit,l="";if((null==t?void 0:t.length)>0){var i,o,a=null===(i=t[e])||void 0===i||null===(o=i.usageCategory)||void 0===o?void 0:o.split(",");null!=a&&a.length&&(l=a.map(function(e){return e?""+v("BPA_SUBOCCUPANCYTYPE_"+function(e,n,t){if(void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),""==n)return e;for(;e.includes(n);)e=e.replace(n,t);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA"}).join(", "))}return l||"NA"}return t.createElement(n.Fragment,null,t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},t.createElement(o.StatusTable,null,null==c||null===(i=c.values)||void 0===i?void 0:i.map(function(e,n){return null!=e&&e.isHeader?t.createElement(o.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},v(null==e?void 0:e.title)):t.createElement(o.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+v(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),null==c||null===(a=c.subOccupancyTableDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.value)||void 0===u||null===(d=u.planDetail)||void 0===d?void 0:d.blocks.map(function(e,n){var l,i,a,r,u;return t.createElement("div",{key:n,style:(null==c||null===(l=c.subOccupancyTableDetails)||void 0===l||null===(i=l[0])||void 0===i||null===(a=i.value)||void 0===a||null===(r=a.planDetail)||void 0===r||null===(u=r.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},t.createElement(o.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},v("BPA_BLOCK_SUBHEADER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+v("BPA_SUB_OCCUPANCY_LABEL"),text:_(n)})),t.createElement("div",{style:window.location.href.includes("citizen")||p?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},t.createElement(o.Table,{className:"customTable table-fixed-first-column table-border-style",t:v,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:E(e),columns:f,getCellProps:function(e){return{style:{}}}})))})))};function cl(e){var n=e.fiReport,i=e.isCitizen,a=void 0!==i&&i,r=l.useTranslation().t;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginTop:"10px"}},t.createElement(a?o.CardHeader:o.CardSectionHeader,{style:{fontSize:"24px"}},""+r("BPA_FI_REPORT")),n.map(function(e,l){var i,a,u,d,c,s;return t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+r("BPA_FI_REPORT"):r("BPA_FI_REPORT")+" - "+(l+1)),t.createElement(o.Row,{className:"border-none",label:""+r("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(i=e.date)||void 0===i?void 0:i.split("-")[2])+"/"+(null===(a=e.date)||void 0===a?void 0:a.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),t.createElement(o.Row,{className:"border-none",label:""+r("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(d=e.questions)||void 0===d?void 0:d.length)&&(null==e||null===(c=e.questions)||void 0===c?void 0:c.map(function(e){return t.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},t.createElement(o.Row,{className:"border-none",label:""+r(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),t.createElement(o.Row,{className:"border-none",label:""+r("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"}))})),t.createElement(Yt,{documents:(s=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==s?void 0:s.map(function(e){var n;return{title:null==e||null===(n=e.documentType)||void 0===n?void 0:n.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}var sl=function(e){var i,a,r,u=e.scrutinyDetails,d=l.useTranslation().t,c=function(e){return null!=e&&e.value&&null!=e&&e.isTransLate?t.createElement("span",{style:{color:"#00703C"}},d(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?d(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void d("NA")};return t.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},t.createElement(o.StatusTable,null,t.createElement("div",null,null==u||null===(i=u.values)||void 0===i?void 0:i.map(function(e,n){return null!=e&&e.isUnit?t.createElement(o.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.value?c(e)+" "+d(null==e?void 0:e.isUnit):d("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?t.createElement(o.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+d(""+e.title),text:c(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):t.createElement(o.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},d(null==e?void 0:e.title)):t.createElement(o.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},d(null==e?void 0:e.title))}),null==u||null===(a=u.permit)||void 0===a?void 0:a.map(function(e,n){return t.createElement(o.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title)})),t.createElement("div",null,null==u||null===(r=u.scruntinyDetails)||void 0===r?void 0:r.map(function(e,l){return t.createElement(n.Fragment,null,t.createElement(o.Row,{className:"border-none",label:""+d(null==e?void 0:e.title),labelStyle:{width:"150%"}}),t.createElement("a",{href:null==e?void 0:e.value}," ",t.createElement(o.PDFSvg,null)," "),t.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},d(null==e?void 0:e.text)))})))))},vl=["tenantId"],pl=["tenantId","payments"],ml=function(e,n){return n&&Object.keys(n).map(function(t){e=e.replace(":"+t,n[t])}),e},fl=function(e,n){return n&&Object.keys(n).map(function(t){e=e.replace(":"+t,n[t])}),e},El=function(e){var i=e.controlFilterForm,r=l.useTranslation().t,u=Digit.ULBService.getCurrentTenantId(),d=Digit.Hooks.obps.SearchMdmsTypes.useApplicationTypes(u),c=d.data,s=d.isLoading,v=[{code:"Accepted",name:""+r("EDCR_ACCEPTED")},{code:"Not Accepted",name:""+r("EDCR_NOT_ACCEPTED")}];return t.createElement(n.Fragment,null,t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"status",control:i,render:function(e){return t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontWeight:"400",fontSize:"16px"}},r("BPA_COMMON_TABLE_COL_APP_STATUS_LABEL")),t.createElement(o.RadioButtons,{onSelect:function(n){e.onChange(n.code),Digit.SessionStorage.set("EDCR_BACK","")},selectedOption:v.filter(function(n){return n.code===e.value})[0],optionsKey:"name",name:"status",options:v}))}})),t.createElement(o.FilterFormField,null,t.createElement(a.Controller,{name:"appliactionType",control:i,render:function(e){return s?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:"filter-label sub-filter-label",style:{fontWeight:"400",fontSize:"16px"}},r("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")),t.createElement(o.Dropdown,{t:r,option:c,selected:c.filter(function(n){return n.code===e.value})[0],optionKey:"i18nKey",select:function(n){e.onChange(n.code),Digit.SessionStorage.set("EDCR_BACK","")}}))}})))},_l=function(e){var i=e.registerRef,a=e.searchFieldComponents,r=l.useTranslation().t;return window.Digit.Utils.browser.isMobile()?t.createElement(n.Fragment,null,t.createElement(o.SearchField,null,t.createElement("label",null,r("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNumber",inputRef:i({})})),t.createElement(o.SearchField,null,t.createElement("label",null,r("BPA_EDCR_NO_LABEL")),t.createElement(o.TextInput,{name:"edcrNumber",inputRef:i({})}))):t.createElement(t.Fragment,null,t.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:"24px"}},t.createElement("div",{className:"search-complaint-container"},t.createElement("div",{className:"complaint-input-container",style:{textAlign:"start"}},t.createElement(o.SearchField,null,t.createElement("label",null,r("BPA_APPLICATION_NUMBER_LABEL")),t.createElement(o.TextInput,{name:"applicationNumber",inputRef:i({})})),t.createElement(o.SearchField,null,t.createElement("label",null,r("BPA_EDCR_NO_LABEL")),t.createElement(o.TextInput,{name:"edcrNumber",inputRef:i({})})),t.createElement("div",{className:"search-action-wrapper",style:{width:"100%"}},a)))))},gl=function(e){var l=e.dowloadOptions,i=n.useState(!1),a=i[0],r=i[1];return t.createElement("div",null,t.createElement(o.MultiLink,{className:"multilinkWrapper",onHeadClick:function(){return r(!a)},displayOptions:a,options:l,style:{right:"0",position:"unset",top:"0px",margin:"0px"},optionsStyle:{right:"10px",top:"unset",margin:"0px",position:"absolute"}}))};function Al(e){var l,i,a,r=e.t,d=e.document,s=e.setDocuments,v=e.error,p=e.setError,m=e.documents,f=e.setCheckRequiredFields,E=null==m?void 0:m.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==d?void 0:d.code)})[0],_=Digit.ULBService.getCurrentTenantId(),g=(n.useState(E?u({},E,{active:!0,code:null==E?void 0:E.documentType,i18nKey:null==E?void 0:E.documentType}):1===(null==d||null===(l=d.dropdownData)||void 0===l?void 0:l.length)?null==d?void 0:d.dropdownData[0]:{}),n.useState(null)),A=g[0],S=g[1],h=n.useState(function(){return(null==E?void 0:E.fileStoreId)||null}),b=h[0],y=h[1];return n.useEffect(function(){s(function(e){var n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==d?void 0:d.code)});if(0===(null==b?void 0:b.length)||null===b)return n;var t=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b});return[].concat(t,[{documentType:null==d?void 0:d.code,fileStoreId:b,documentUid:b,fileName:(null==A?void 0:A.name)||"",info:(null==d?void 0:d.info)||""}])})},[b,A]),n.useEffect(function(){!function(){try{p(null);var e=function(){if(A){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(A.size>=5242880)p(r("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=A&&A.type&&!e.test(null==A?void 0:A.type))p(r("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return y(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",A,null==_?void 0:_.split(".")[0])).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?y(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):p(r("CS_FILE_UPLOAD_ERROR"))})},function(){p(r("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[A]),t.createElement("div",{style:{marginBottom:"24px"}},t.createElement(o.CardLabel,{style:{marginBottom:"10px"}},null!=d&&d.required?r("BPAREG_HEADER_"+(null==d||null===(i=d.code)||void 0===i?void 0:i.replace(".","_")))+" *":""+r("BPAREG_HEADER_"+(null==d||null===(a=d.code)||void 0===a?void 0:a.replace(".","_")))),null!=d&&d.info?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+r(null==d?void 0:d.info)):null,t.createElement(o.UploadFile,{extraStyleName:"OBPS",accept:"image/*, .pdf, .png, .jpeg, .jpg",onUpload:function(e){S(e.target.files[0])},onDelete:function(){y(null),f(!0)},message:b?"1 "+r("CS_ACTION_FILEUPLOADED"):r("CS_ACTION_NO_FILEUPLOADED"),iserror:v}))}var Sl=function(e){var n,a,r,u,d,c,s=e.location.state,v=l.useTranslation().t,p=i.useHistory(),m=null==s||null===(n=s.data)||void 0===n||null===(a=n.Licenses)||void 0===a?void 0:a[0];return null==m||null===(r=m.tradeLicenseDetail)||void 0===r||null===(u=r.tradeUnits)||void 0===u||null===(d=u[0])||void 0===d||null===(c=d.tradeType)||void 0===c||c.split("."),t.createElement("div",null,t.createElement(o.Card,null,t.createElement(o.Banner,{message:v("BPA_ARCHITECT_"+(null==m?void 0:m.status)+"_MAIN_HEAD"),applicationNumber:null==m?void 0:m.applicationNumber,info:v("BPA_NEW_STAKEHOLDER_REGISTRATION_APP_LABEL"),successful:"REJECTED"!=(null==m?void 0:m.status),style:{padding:"10px"},headerStyles:{fontSize:"32px",wordBreak:"break-word"}}),t.createElement(o.CardText,{style:{paddingBottom:"10px",marginBottom:"10px"}},v("BPA_ARCHITECT_"+(null==m?void 0:m.status)+"_SUB_MAIN_HEAD")),t.createElement(o.ActionBar,{style:{display:"flex",justifyContent:"flex-end",alignItems:"baseline"}},t.createElement(o.SubmitBar,{label:v("CORE_COMMON_GO_TO_HOME"),onSubmit:function(){p.push("/digit-ui/employee")}}))))},hl=function(e){var n=e.location,i=l.useTranslation().t,a=[{path:"/digit-ui/employee",content:i("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/obps/inbox",content:i("ES_COMMON_OBPS_INBOX_LABEL"),show:!!n.pathname.includes("obps/inbox")},{path:"/digit-ui/employee/obps/stakeholder-inbox",content:i("ES_COMMON_STAKEHOLDER_INBOX_LABEL"),show:!!n.pathname.includes("obps/stakeholder-inbox")},{path:"/digit-ui/employee/obps/inbox/bpa/:id",content:i("ES_OBPS_SEARCH_BPA"),show:!!n.pathname.includes("obps/inbox/bpa")},{path:"/digit-ui/employee/obps/inbox/stakeholder/:id",content:i("ES_OBPS_SEARCH_BPA"),show:!!n.pathname.includes("obps/stakeholder-inbox/stakeholder")},{path:"/digit-ui/employee/obps/search/application",content:i("ES_OBPS_SEARCH"),show:!!n.pathname.includes("/obps/search/application")},{path:"/digit-ui/employee/obps/search/application/bpa/:id",content:i("ES_OBPS_SEARCH_BPA"),show:!!n.pathname.includes("/obps/search/application/bpa")},{path:"/digit-ui/employee/obps/search/application/stakeholder/:id",content:i("ES_OBPS_SEARCH_BPA"),show:!!n.pathname.includes("/obps/search/application/stakeholder/")}];return t.createElement(o.BreadCrumb,{crumbs:a})},bl=function(e){var a=e.path,r=i.useLocation(),d=l.useTranslation().t,c=Digit.ComponentRegistryService.getComponent("BPAInbox"),s=Digit.ComponentRegistryService.getComponent("StakeholderInbox"),v=Digit.ComponentRegistryService.getComponent("ObpsEmpApplicationDetail"),p=Digit.ComponentRegistryService.getComponent("ObpsEmployeeBpaApplicationDetail"),m=window.location.href.includes("bpa")||window.location.href.includes("stakeholder-inbox/stakeholder")||window.location.href.includes("application"),f=window.location.href.includes("digit-ui/employee/obps/bpa/"),E=window.location.href.includes("obps/response")||window.location.href.includes("obps/stakeholder-response");return t.createElement(n.Fragment,null,f||E?null:t.createElement("div",{style:m?{marginLeft:"10px"}:{}},t.createElement(hl,{location:r})),f?t.createElement(o.BackButton,{style:{border:"none",margin:"0",padding:"0"}},d("CS_COMMON_BACK")):null,t.createElement(i.Switch,null,t.createElement(o.PrivateRoute,{path:a+"/stakeholder-inbox/stakeholder/:id",component:v}),t.createElement(o.PrivateRoute,{path:a+"/search/application/stakeholder/:id",component:v}),t.createElement(o.PrivateRoute,{path:a+"/search/application/bpa/:id",component:p}),t.createElement(o.PrivateRoute,{path:a+"/search/application",component:function(e){return t.createElement(Un,u({},e,{parentRoute:a}))}}),t.createElement(o.PrivateRoute,{path:a+"/inbox/bpa/:id",component:p}),t.createElement(o.PrivateRoute,{path:a+"/inbox",component:function(e){return t.createElement(c,u({},e,{parentRoute:a}))}}),t.createElement(o.PrivateRoute,{path:a+"/stakeholder-inbox",component:function(e){return t.createElement(s,u({},e,{parentRoute:a}))}}),t.createElement(o.PrivateRoute,{path:a+"/bpa/:id",component:p}),t.createElement(o.PrivateRoute,{path:a+"/response",component:Kn}),t.createElement(o.PrivateRoute,{path:a+"/stakeholder-response",component:Sl})))},yl=g(function(e,n){(function(){var t="Expected a function",l="__lodash_placeholder__",i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",a="[object Array]",r="[object Boolean]",u="[object Date]",d="[object Error]",c="[object Function]",s="[object GeneratorFunction]",v="[object Map]",p="[object Number]",m="[object Object]",f="[object RegExp]",_="[object Set]",g="[object String]",A="[object Symbol]",S="[object WeakMap]",h="[object ArrayBuffer]",b="[object DataView]",y="[object Float32Array]",T="[object Float64Array]",C="[object Int8Array]",D="[object Int16Array]",P="[object Int32Array]",N="[object Uint8Array]",I="[object Uint16Array]",L="[object Uint32Array]",B=/\b__p \+= '';/g,O=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,w=/[&<>"']/g,M=RegExp(x.source),k=RegExp(w.source),F=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,K=RegExp(Y.source),G=/^\s+/,V=/\s/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,q=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,$=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,ie=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,de=/['\n\r\u2028\u2029\\]/g,ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="["+se+"]",pe="["+ce+"]",me="\\d+",fe="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ee="[^\\ud800-\\udfff"+se+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",ge="[^\\ud800-\\udfff]",Ae="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",be="(?:"+fe+"|"+Ee+")",ye="(?:"+he+"|"+Ee+")",Te="(?:"+pe+"|"+_e+")?",Ce="[\\ufe0e\\ufe0f]?"+Te+"(?:\\u200d(?:"+[ge,Ae,Se].join("|")+")[\\ufe0e\\ufe0f]?"+Te+")*",De="(?:"+["[\\u2700-\\u27bf]",Ae,Se].join("|")+")"+Ce,Pe="(?:"+[ge+pe+"?",pe,Ae,Se,"[\\ud800-\\udfff]"].join("|")+")",Ne=RegExp("['’]","g"),Ie=RegExp(pe,"g"),Le=RegExp(_e+"(?="+_e+")|"+Pe+Ce,"g"),Be=RegExp([he+"?"+fe+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ve,he,"$"].join("|")+")",ye+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ve,he+be,"$"].join("|")+")",he+"?"+be+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,De].join("|"),"g"),Oe=RegExp("[\\u200d\\ud800-\\udfff"+ce+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],we=-1,Me={};Me[y]=Me[T]=Me[C]=Me[D]=Me[P]=Me[N]=Me["[object Uint8ClampedArray]"]=Me[I]=Me[L]=!0,Me[o]=Me[a]=Me[h]=Me[r]=Me[b]=Me[u]=Me[d]=Me[c]=Me[v]=Me[p]=Me[m]=Me[f]=Me[_]=Me[g]=Me[S]=!1;var ke={};ke[o]=ke[a]=ke[h]=ke[b]=ke[r]=ke[u]=ke[y]=ke[T]=ke[C]=ke[D]=ke[P]=ke[v]=ke[p]=ke[m]=ke[f]=ke[_]=ke[g]=ke[A]=ke[N]=ke["[object Uint8ClampedArray]"]=ke[I]=ke[L]=!0,ke[d]=ke[c]=ke[S]=!1;var Fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ue=parseFloat,He=parseInt,We="object"==typeof E&&E&&E.Object===Object&&E,je="object"==typeof self&&self&&self.Object===Object&&self,ze=We||je||Function("return this")(),Ye=n&&!n.nodeType&&n,Ke=Ye&&e&&!e.nodeType&&e,Ge=Ke&&Ke.exports===Ye,Ve=Ge&&We.process,Xe=function(){try{return Ke&&Ke.require&&Ke.require("util").types||Ve&&Ve.binding&&Ve.binding("util")}catch(e){}}(),qe=Xe&&Xe.isArrayBuffer,Je=Xe&&Xe.isDate,Ze=Xe&&Xe.isMap,Qe=Xe&&Xe.isRegExp,$e=Xe&&Xe.isSet,en=Xe&&Xe.isTypedArray;function nn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function tn(e,n,t,l){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];n(l,a,t(a),e)}return l}function ln(e,n){for(var t=-1,l=null==e?0:e.length;++t<l&&!1!==n(e[t],t,e););return e}function on(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function an(e,n){for(var t=-1,l=null==e?0:e.length;++t<l;)if(!n(e[t],t,e))return!1;return!0}function rn(e,n){for(var t=-1,l=null==e?0:e.length,i=0,o=[];++t<l;){var a=e[t];n(a,t,e)&&(o[i++]=a)}return o}function un(e,n){return!(null==e||!e.length)&&gn(e,n,0)>-1}function dn(e,n,t){for(var l=-1,i=null==e?0:e.length;++l<i;)if(t(n,e[l]))return!0;return!1}function cn(e,n){for(var t=-1,l=null==e?0:e.length,i=Array(l);++t<l;)i[t]=n(e[t],t,e);return i}function sn(e,n){for(var t=-1,l=n.length,i=e.length;++t<l;)e[i+t]=n[t];return e}function vn(e,n,t,l){var i=-1,o=null==e?0:e.length;for(l&&o&&(t=e[++i]);++i<o;)t=n(t,e[i],i,e);return t}function pn(e,n,t,l){var i=null==e?0:e.length;for(l&&i&&(t=e[--i]);i--;)t=n(t,e[i],i,e);return t}function mn(e,n){for(var t=-1,l=null==e?0:e.length;++t<l;)if(n(e[t],t,e))return!0;return!1}var fn=bn("length");function En(e,n,t){var l;return t(e,function(e,t,i){if(n(e,t,i))return l=t,!1}),l}function _n(e,n,t,l){for(var i=e.length,o=t+(l?1:-1);l?o--:++o<i;)if(n(e[o],o,e))return o;return-1}function gn(e,n,t){return n==n?function(e,n,t){for(var l=t-1,i=e.length;++l<i;)if(e[l]===n)return l;return-1}(e,n,t):_n(e,Sn,t)}function An(e,n,t,l){for(var i=t-1,o=e.length;++i<o;)if(l(e[i],n))return i;return-1}function Sn(e){return e!=e}function hn(e,n){var t=null==e?0:e.length;return t?Cn(e,n)/t:NaN}function bn(e){return function(n){return null==n?void 0:n[e]}}function yn(e){return function(n){return null==e?void 0:e[n]}}function Tn(e,n,t,l,i){return i(e,function(e,i,o){t=l?(l=!1,e):n(t,e,i,o)}),t}function Cn(e,n){for(var t,l=-1,i=e.length;++l<i;){var o=n(e[l]);void 0!==o&&(t=void 0===t?o:t+o)}return t}function Dn(e,n){for(var t=-1,l=Array(e);++t<e;)l[t]=n(t);return l}function Pn(e){return e?e.slice(0,Kn(e)+1).replace(G,""):e}function Nn(e){return function(n){return e(n)}}function In(e,n){return cn(n,function(n){return e[n]})}function Ln(e,n){return e.has(n)}function Bn(e,n){for(var t=-1,l=e.length;++t<l&&gn(n,e[t],0)>-1;);return t}function On(e,n){for(var t=e.length;t--&&gn(n,e[t],0)>-1;);return t}function Rn(e,n){for(var t=e.length,l=0;t--;)e[t]===n&&++l;return l}var xn=yn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wn=yn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mn(e){return"\\"+Fe[e]}function kn(e){return Oe.test(e)}function Fn(e){var n=-1,t=Array(e.size);return e.forEach(function(e,l){t[++n]=[l,e]}),t}function Un(e,n){return function(t){return e(n(t))}}function Hn(e,n){for(var t=-1,i=e.length,o=0,a=[];++t<i;){var r=e[t];r!==n&&r!==l||(e[t]=l,a[o++]=t)}return a}function Wn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}function jn(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=[e,e]}),t}function zn(e){return kn(e)?function(e){for(var n=Le.lastIndex=0;Le.test(e);)++n;return n}(e):fn(e)}function Yn(e){return kn(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}function Kn(e){for(var n=e.length;n--&&V.test(e.charAt(n)););return n}var Gn=yn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Vn=function e(n){var E=(n=null==n?ze:Vn.defaults(ze.Object(),n,Vn.pick(ze,xe))).Array,V=n.Date,ce=n.Error,se=n.Function,ve=n.Math,pe=n.Object,me=n.RegExp,fe=n.String,Ee=n.TypeError,_e=E.prototype,ge=pe.prototype,Ae=n["__core-js_shared__"],Se=se.prototype.toString,he=ge.hasOwnProperty,be=0,ye=function(){var e=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Te=ge.toString,Ce=Se.call(pe),De=ze._,Pe=me("^"+Se.call(he).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=Ge?n.Buffer:void 0,Oe=n.Symbol,Fe=n.Uint8Array,We=Le?Le.allocUnsafe:void 0,je=Un(pe.getPrototypeOf,pe),Ye=pe.create,Ke=ge.propertyIsEnumerable,Ve=_e.splice,Xe=Oe?Oe.isConcatSpreadable:void 0,fn=Oe?Oe.iterator:void 0,yn=Oe?Oe.toStringTag:void 0,Xn=function(){try{var e=Zi(pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),qn=n.clearTimeout!==ze.clearTimeout&&n.clearTimeout,Jn=V&&V.now!==ze.Date.now&&V.now,Zn=n.setTimeout!==ze.setTimeout&&n.setTimeout,Qn=ve.ceil,$n=ve.floor,et=pe.getOwnPropertySymbols,nt=Le?Le.isBuffer:void 0,tt=n.isFinite,lt=_e.join,it=Un(pe.keys,pe),ot=ve.max,at=ve.min,rt=V.now,ut=n.parseInt,dt=ve.random,ct=_e.reverse,st=Zi(n,"DataView"),vt=Zi(n,"Map"),pt=Zi(n,"Promise"),mt=Zi(n,"Set"),ft=Zi(n,"WeakMap"),Et=Zi(pe,"create"),_t=ft&&new ft,gt={},At=Po(st),St=Po(vt),ht=Po(pt),bt=Po(mt),yt=Po(ft),Tt=Oe?Oe.prototype:void 0,Ct=Tt?Tt.valueOf:void 0,Dt=Tt?Tt.toString:void 0;function Pt(e){if(Ya(e)&&!Ra(e)&&!(e instanceof Bt)){if(e instanceof Lt)return e;if(he.call(e,"__wrapped__"))return No(e)}return new Lt(e)}var Nt=function(){function e(){}return function(n){if(!za(n))return{};if(Ye)return Ye(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function It(){}function Lt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=void 0}function Bt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ot(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function Rt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function xt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var l=e[n];this.set(l[0],l[1])}}function wt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new xt;++n<t;)this.add(e[n])}function Mt(e){var n=this.__data__=new Rt(e);this.size=n.size}function kt(e,n){var t=Ra(e),l=!t&&Oa(e),i=!t&&!l&&ka(e),o=!t&&!l&&!i&&Qa(e),a=t||l||i||o,r=a?Dn(e.length,fe):[],u=r.length;for(var d in e)!n&&!he.call(e,d)||a&&("length"==d||i&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||io(d,u))||r.push(d);return r}function Ft(e){var n=e.length;return n?e[xl(0,n-1)]:void 0}function Ut(e,n){return bo(fi(e),Xt(n,0,e.length))}function Ht(e){return bo(fi(e))}function Wt(e,n,t){(void 0!==t&&!Ia(e[n],t)||void 0===t&&!(n in e))&&Gt(e,n,t)}function jt(e,n,t){var l=e[n];he.call(e,n)&&Ia(l,t)&&(void 0!==t||n in e)||Gt(e,n,t)}function zt(e,n){for(var t=e.length;t--;)if(Ia(e[t][0],n))return t;return-1}function Yt(e,n,t,l){return $t(e,function(e,i,o){n(l,e,t(e),o)}),l}function Kt(e,n){return e&&Ei(n,Sr(n),e)}function Gt(e,n,t){"__proto__"==n&&Xn?Xn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Vt(e,n){for(var t=-1,l=n.length,i=E(l),o=null==e;++t<l;)i[t]=o?void 0:fr(e,n[t]);return i}function Xt(e,n,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==n&&(e=e>=n?e:n)),e}function qt(e,n,t,l,i,a){var d,E=1&n,S=2&n,B=4&n;if(t&&(d=i?t(e,l,i,a):t(e)),void 0!==d)return d;if(!za(e))return e;var O=Ra(e);if(O){if(d=function(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&he.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(e),!E)return fi(e,d)}else{var R=eo(e),x=R==c||R==s;if(ka(e))return di(e,E);if(R==m||R==o||x&&!i){if(d=S||x?{}:to(e),!E)return S?function(e,n){return Ei(e,$i(e),n)}(e,function(e,n){return e&&Ei(n,hr(n),e)}(d,e)):function(e,n){return Ei(e,Qi(e),n)}(e,Kt(d,e))}else{if(!ke[R])return i?e:{};d=function(e,n,t){var l=e.constructor;switch(n){case h:return ci(e);case r:case u:return new l(+e);case b:return function(e,n){var t=n?ci(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case y:case T:case C:case D:case P:case N:case"[object Uint8ClampedArray]":case I:case L:return si(e,t);case v:return new l;case p:case g:return new l(e);case f:return function(e){var n=new e.constructor(e.source,ne.exec(e));return n.lastIndex=e.lastIndex,n}(e);case _:return new l;case A:return Ct?pe(Ct.call(e)):{}}}(e,R,E)}}a||(a=new Mt);var w=a.get(e);if(w)return w;a.set(e,d),qa(e)?e.forEach(function(l){d.add(qt(l,n,t,l,e,a))}):Ka(e)&&e.forEach(function(l,i){d.set(i,qt(l,n,t,i,e,a))});var M=O?void 0:(B?S?Yi:zi:S?hr:Sr)(e);return ln(M||e,function(l,i){M&&(l=e[i=l]),jt(d,i,qt(l,n,t,i,e,a))}),d}function Jt(e,n,t){var l=t.length;if(null==e)return!l;for(e=pe(e);l--;){var i=t[l],o=e[i];if(void 0===o&&!(i in e)||!(0,n[i])(o))return!1}return!0}function Zt(e,n,l){if("function"!=typeof e)throw new Ee(t);return go(function(){e.apply(void 0,l)},n)}function Qt(e,n,t,l){var i=-1,o=un,a=!0,r=e.length,u=[],d=n.length;if(!r)return u;t&&(n=cn(n,Nn(t))),l?(o=dn,a=!1):n.length>=200&&(o=Ln,a=!1,n=new wt(n));e:for(;++i<r;){var c=e[i],s=null==t?c:t(c);if(c=l||0!==c?c:0,a&&s==s){for(var v=d;v--;)if(n[v]===s)continue e;u.push(c)}else o(n,s,l)||u.push(c)}return u}Pt.templateSettings={escape:F,evaluate:U,interpolate:H,variable:"",imports:{_:Pt}},(Pt.prototype=It.prototype).constructor=Pt,(Lt.prototype=Nt(It.prototype)).constructor=Lt,(Bt.prototype=Nt(It.prototype)).constructor=Bt,Ot.prototype.clear=function(){this.__data__=Et?Et(null):{},this.size=0},Ot.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Ot.prototype.get=function(e){var n=this.__data__;if(Et){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return he.call(n,e)?n[e]:void 0},Ot.prototype.has=function(e){var n=this.__data__;return Et?void 0!==n[e]:he.call(n,e)},Ot.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Et&&void 0===n?"__lodash_hash_undefined__":n,this},Rt.prototype.clear=function(){this.__data__=[],this.size=0},Rt.prototype.delete=function(e){var n=this.__data__,t=zt(n,e);return!(t<0||(t==n.length-1?n.pop():Ve.call(n,t,1),--this.size,0))},Rt.prototype.get=function(e){var n=this.__data__,t=zt(n,e);return t<0?void 0:n[t][1]},Rt.prototype.has=function(e){return zt(this.__data__,e)>-1},Rt.prototype.set=function(e,n){var t=this.__data__,l=zt(t,e);return l<0?(++this.size,t.push([e,n])):t[l][1]=n,this},xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ot,map:new(vt||Rt),string:new Ot}},xt.prototype.delete=function(e){var n=qi(this,e).delete(e);return this.size-=n?1:0,n},xt.prototype.get=function(e){return qi(this,e).get(e)},xt.prototype.has=function(e){return qi(this,e).has(e)},xt.prototype.set=function(e,n){var t=qi(this,e),l=t.size;return t.set(e,n),this.size+=t.size==l?0:1,this},wt.prototype.add=wt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},wt.prototype.has=function(e){return this.__data__.has(e)},Mt.prototype.clear=function(){this.__data__=new Rt,this.size=0},Mt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Mt.prototype.get=function(e){return this.__data__.get(e)},Mt.prototype.has=function(e){return this.__data__.has(e)},Mt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Rt){var l=t.__data__;if(!vt||l.length<199)return l.push([e,n]),this.size=++t.size,this;t=this.__data__=new xt(l)}return t.set(e,n),this.size=t.size,this};var $t=Ai(rl),el=Ai(ul,!0);function nl(e,n){var t=!0;return $t(e,function(e,l,i){return t=!!n(e,l,i)}),t}function tl(e,n,t){for(var l=-1,i=e.length;++l<i;){var o=e[l],a=n(o);if(null!=a&&(void 0===r?a==a&&!Za(a):t(a,r)))var r=a,u=o}return u}function ll(e,n){var t=[];return $t(e,function(e,l,i){n(e,l,i)&&t.push(e)}),t}function il(e,n,t,l,i){var o=-1,a=e.length;for(t||(t=lo),i||(i=[]);++o<a;){var r=e[o];n>0&&t(r)?n>1?il(r,n-1,t,l,i):sn(i,r):l||(i[i.length]=r)}return i}var ol=Si(),al=Si(!0);function rl(e,n){return e&&ol(e,n,Sr)}function ul(e,n){return e&&al(e,n,Sr)}function dl(e,n){return rn(n,function(n){return Ha(e[n])})}function cl(e,n){for(var t=0,l=(n=oi(n,e)).length;null!=e&&t<l;)e=e[Do(n[t++])];return t&&t==l?e:void 0}function sl(e,n,t){var l=n(e);return Ra(e)?l:sn(l,t(e))}function vl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yn&&yn in pe(e)?function(e){var n=he.call(e,yn),t=e[yn];try{e[yn]=void 0;var l=!0}catch(e){}var i=Te.call(e);return l&&(n?e[yn]=t:delete e[yn]),i}(e):function(e){return Te.call(e)}(e)}function pl(e,n){return e>n}function ml(e,n){return null!=e&&he.call(e,n)}function fl(e,n){return null!=e&&n in pe(e)}function El(e,n,t){for(var l=t?dn:un,i=e[0].length,o=e.length,a=o,r=E(o),u=Infinity,d=[];a--;){var c=e[a];a&&n&&(c=cn(c,Nn(n))),u=at(c.length,u),r[a]=!t&&(n||i>=120&&c.length>=120)?new wt(a&&c):void 0}c=e[0];var s=-1,v=r[0];e:for(;++s<i&&d.length<u;){var p=c[s],m=n?n(p):p;if(p=t||0!==p?p:0,!(v?Ln(v,m):l(d,m,t))){for(a=o;--a;){var f=r[a];if(!(f?Ln(f,m):l(e[a],m,t)))continue e}v&&v.push(m),d.push(p)}}return d}function _l(e,n,t){var l=null==(e=mo(e,n=oi(n,e)))?e:e[Do(Uo(n))];return null==l?void 0:nn(l,e,t)}function gl(e){return Ya(e)&&vl(e)==o}function Al(e,n,t,l,i){return e===n||(null==e||null==n||!Ya(e)&&!Ya(n)?e!=e&&n!=n:function(e,n,t,l,i,c){var s=Ra(e),E=Ra(n),S=s?a:eo(e),y=E?a:eo(n),T=(S=S==o?m:S)==m,C=(y=y==o?m:y)==m,D=S==y;if(D&&ka(e)){if(!ka(n))return!1;s=!0,T=!1}if(D&&!T)return c||(c=new Mt),s||Qa(e)?Wi(e,n,t,l,i,c):function(e,n,t,l,i,o,a){switch(t){case b:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case h:return!(e.byteLength!=n.byteLength||!o(new Fe(e),new Fe(n)));case r:case u:case p:return Ia(+e,+n);case d:return e.name==n.name&&e.message==n.message;case f:case g:return e==n+"";case v:var c=Fn;case _:if(c||(c=Wn),e.size!=n.size&&!(1&l))return!1;var s=a.get(e);if(s)return s==n;l|=2,a.set(e,n);var m=Wi(c(e),c(n),l,i,o,a);return a.delete(e),m;case A:if(Ct)return Ct.call(e)==Ct.call(n)}return!1}(e,n,S,t,l,i,c);if(!(1&t)){var P=T&&he.call(e,"__wrapped__"),N=C&&he.call(n,"__wrapped__");if(P||N){var I=P?e.value():e,L=N?n.value():n;return c||(c=new Mt),i(I,L,t,l,c)}}return!!D&&(c||(c=new Mt),function(e,n,t,l,i,o){var a=1&t,r=zi(e),u=r.length;if(u!=zi(n).length&&!a)return!1;for(var d=u;d--;){var c=r[d];if(!(a?c in n:he.call(n,c)))return!1}var s=o.get(e),v=o.get(n);if(s&&v)return s==n&&v==e;var p=!0;o.set(e,n),o.set(n,e);for(var m=a;++d<u;){var f=e[c=r[d]],E=n[c];if(l)var _=a?l(E,f,c,n,e,o):l(f,E,c,e,n,o);if(!(void 0===_?f===E||i(f,E,t,l,o):_)){p=!1;break}m||(m="constructor"==c)}if(p&&!m){var g=e.constructor,A=n.constructor;g==A||!("constructor"in e)||!("constructor"in n)||"function"==typeof g&&g instanceof g&&"function"==typeof A&&A instanceof A||(p=!1)}return o.delete(e),o.delete(n),p}(e,n,t,l,i,c))}(e,n,t,l,Al,i))}function Sl(e,n,t,l){var i=t.length,o=i,a=!l;if(null==e)return!o;for(e=pe(e);i--;){var r=t[i];if(a&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++i<o;){var u=(r=t[i])[0],d=e[u],c=r[1];if(a&&r[2]){if(void 0===d&&!(u in e))return!1}else{var s=new Mt;if(l)var v=l(d,c,u,e,n,s);if(!(void 0===v?Al(c,d,3,l,s):v))return!1}}return!0}function hl(e){return!(!za(e)||(n=e,ye&&ye in n))&&(Ha(e)?Pe:ie).test(Po(e));var n}function bl(e){return"function"==typeof e?e:null==e?Gr:"object"==typeof e?Ra(e)?Pl(e[0],e[1]):Dl(e):nu(e)}function yl(e){if(!co(e))return it(e);var n=[];for(var t in pe(e))he.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Tl(e,n){return e<n}function Cl(e,n){var t=-1,l=wa(e)?E(e.length):[];return $t(e,function(e,i,o){l[++t]=n(e,i,o)}),l}function Dl(e){var n=Ji(e);return 1==n.length&&n[0][2]?vo(n[0][0],n[0][1]):function(t){return t===e||Sl(t,e,n)}}function Pl(e,n){return ao(e)&&so(n)?vo(Do(e),n):function(t){var l=fr(t,e);return void 0===l&&l===n?Er(t,e):Al(n,l,3)}}function Nl(e,n,t,l,i){e!==n&&ol(n,function(o,a){if(i||(i=new Mt),za(o))!function(e,n,t,l,i,o,a){var r=Eo(e,t),u=Eo(n,t),d=a.get(u);if(d)Wt(e,t,d);else{var c=o?o(r,u,t+"",e,n,a):void 0,s=void 0===c;if(s){var v=Ra(u),p=!v&&ka(u),m=!v&&!p&&Qa(u);c=u,v||p||m?Ra(r)?c=r:Ma(r)?c=fi(r):p?(s=!1,c=di(u,!0)):m?(s=!1,c=si(u,!0)):c=[]:Va(u)||Oa(u)?(c=r,Oa(r)?c=ar(r):za(r)&&!Ha(r)||(c=to(u))):s=!1}s&&(a.set(u,c),i(c,u,l,o,a),a.delete(u)),Wt(e,t,c)}}(e,n,a,t,Nl,l,i);else{var r=l?l(Eo(e,a),o,a+"",e,n,i):void 0;void 0===r&&(r=o),Wt(e,a,r)}},hr)}function Il(e,n){var t=e.length;if(t)return io(n+=n<0?t:0,t)?e[n]:void 0}function Ll(e,n,t){n=n.length?cn(n,function(e){return Ra(e)?function(n){return cl(n,1===e.length?e[0]:e)}:e}):[Gr];var l=-1;return n=cn(n,Nn(Xi())),function(e,n){var l=e.length;for(e.sort(function(e,n){return function(e,n,t){for(var l=-1,i=e.criteria,o=n.criteria,a=i.length,r=t.length;++l<a;){var u=vi(i[l],o[l]);if(u)return l>=r?u:u*("desc"==t[l]?-1:1)}return e.index-n.index}(e,n,t)});l--;)e[l]=e[l].value;return e}(Cl(e,function(e,t,i){return{criteria:cn(n,function(n){return n(e)}),index:++l,value:e}}))}function Bl(e,n,t){for(var l=-1,i=n.length,o={};++l<i;){var a=n[l],r=cl(e,a);t(r,a)&&Ul(o,oi(a,e),r)}return o}function Ol(e,n,t,l){var i=l?An:gn,o=-1,a=n.length,r=e;for(e===n&&(n=fi(n)),t&&(r=cn(e,Nn(t)));++o<a;)for(var u=0,d=n[o],c=t?t(d):d;(u=i(r,c,u,l))>-1;)r!==e&&Ve.call(r,u,1),Ve.call(e,u,1);return e}function Rl(e,n){for(var t=e?n.length:0,l=t-1;t--;){var i=n[t];if(t==l||i!==o){var o=i;io(i)?Ve.call(e,i,1):Zl(e,i)}}return e}function xl(e,n){return e+$n(dt()*(n-e+1))}function wl(e,n){var t="";if(!e||n<1||n>9007199254740991)return t;do{n%2&&(t+=e),(n=$n(n/2))&&(e+=e)}while(n);return t}function Ml(e,n){return Ao(po(e,n,Gr),e+"")}function kl(e){return Ft(Ir(e))}function Fl(e,n){var t=Ir(e);return bo(t,Xt(n,0,t.length))}function Ul(e,n,t,l){if(!za(e))return e;for(var i=-1,o=(n=oi(n,e)).length,a=o-1,r=e;null!=r&&++i<o;){var u=Do(n[i]),d=t;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var c=r[u];void 0===(d=l?l(c,u,r):void 0)&&(d=za(c)?c:io(n[i+1])?[]:{})}jt(r,u,d),r=r[u]}return e}var Hl=_t?function(e,n){return _t.set(e,n),e}:Gr,Wl=Xn?function(e,n){return Xn(e,"toString",{configurable:!0,enumerable:!1,value:zr(n),writable:!0})}:Gr;function jl(e){return bo(Ir(e))}function zl(e,n,t){var l=-1,i=e.length;n<0&&(n=-n>i?0:i+n),(t=t>i?i:t)<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var o=E(i);++l<i;)o[l]=e[l+n];return o}function Yl(e,n){var t;return $t(e,function(e,l,i){return!(t=n(e,l,i))}),!!t}function Kl(e,n,t){var l=0,i=null==e?l:e.length;if("number"==typeof n&&n==n&&i<=2147483647){for(;l<i;){var o=l+i>>>1,a=e[o];null!==a&&!Za(a)&&(t?a<=n:a<n)?l=o+1:i=o}return i}return Gl(e,n,Gr,t)}function Gl(e,n,t,l){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(n=t(n))!=n,r=null===n,u=Za(n),d=void 0===n;i<o;){var c=$n((i+o)/2),s=t(e[c]),v=void 0!==s,p=null===s,m=s==s,f=Za(s);if(a)var E=l||m;else E=d?m&&(l||v):r?m&&v&&(l||!p):u?m&&v&&!p&&(l||!f):!p&&!f&&(l?s<=n:s<n);E?i=c+1:o=c}return at(o,4294967294)}function Vl(e,n){for(var t=-1,l=e.length,i=0,o=[];++t<l;){var a=e[t],r=n?n(a):a;if(!t||!Ia(r,u)){var u=r;o[i++]=0===a?0:a}}return o}function Xl(e){return"number"==typeof e?e:Za(e)?NaN:+e}function ql(e){if("string"==typeof e)return e;if(Ra(e))return cn(e,ql)+"";if(Za(e))return Dt?Dt.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Jl(e,n,t){var l=-1,i=un,o=e.length,a=!0,r=[],u=r;if(t)a=!1,i=dn;else if(o>=200){var d=n?null:wi(e);if(d)return Wn(d);a=!1,i=Ln,u=new wt}else u=n?[]:r;e:for(;++l<o;){var c=e[l],s=n?n(c):c;if(c=t||0!==c?c:0,a&&s==s){for(var v=u.length;v--;)if(u[v]===s)continue e;n&&u.push(s),r.push(c)}else i(u,s,t)||(u!==r&&u.push(s),r.push(c))}return r}function Zl(e,n){return null==(e=mo(e,n=oi(n,e)))||delete e[Do(Uo(n))]}function Ql(e,n,t,l){return Ul(e,n,t(cl(e,n)),l)}function $l(e,n,t,l){for(var i=e.length,o=l?i:-1;(l?o--:++o<i)&&n(e[o],o,e););return t?zl(e,l?0:o,l?o+1:i):zl(e,l?o+1:0,l?i:o)}function ei(e,n){var t=e;return t instanceof Bt&&(t=t.value()),vn(n,function(e,n){return n.func.apply(n.thisArg,sn([e],n.args))},t)}function ni(e,n,t){var l=e.length;if(l<2)return l?Jl(e[0]):[];for(var i=-1,o=E(l);++i<l;)for(var a=e[i],r=-1;++r<l;)r!=i&&(o[i]=Qt(o[i]||a,e[r],n,t));return Jl(il(o,1),n,t)}function ti(e,n,t){for(var l=-1,i=e.length,o=n.length,a={};++l<i;)t(a,e[l],l<o?n[l]:void 0);return a}function li(e){return Ma(e)?e:[]}function ii(e){return"function"==typeof e?e:Gr}function oi(e,n){return Ra(e)?e:ao(e,n)?[e]:Co(rr(e))}var ai=Ml;function ri(e,n,t){var l=e.length;return t=void 0===t?l:t,!n&&t>=l?e:zl(e,n,t)}var ui=qn||function(e){return ze.clearTimeout(e)};function di(e,n){if(n)return e.slice();var t=e.length,l=We?We(t):new e.constructor(t);return e.copy(l),l}function ci(e){var n=new e.constructor(e.byteLength);return new Fe(n).set(new Fe(e)),n}function si(e,n){var t=n?ci(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function vi(e,n){if(e!==n){var t=void 0!==e,l=null===e,i=e==e,o=Za(e),a=void 0!==n,r=null===n,u=n==n,d=Za(n);if(!r&&!d&&!o&&e>n||o&&a&&u&&!r&&!d||l&&a&&u||!t&&u||!i)return 1;if(!l&&!o&&!d&&e<n||d&&t&&i&&!l&&!o||r&&t&&i||!a&&i||!u)return-1}return 0}function pi(e,n,t,l){for(var i=-1,o=e.length,a=t.length,r=-1,u=n.length,d=ot(o-a,0),c=E(u+d),s=!l;++r<u;)c[r]=n[r];for(;++i<a;)(s||i<o)&&(c[t[i]]=e[i]);for(;d--;)c[r++]=e[i++];return c}function mi(e,n,t,l){for(var i=-1,o=e.length,a=-1,r=t.length,u=-1,d=n.length,c=ot(o-r,0),s=E(c+d),v=!l;++i<c;)s[i]=e[i];for(var p=i;++u<d;)s[p+u]=n[u];for(;++a<r;)(v||i<o)&&(s[p+t[a]]=e[i++]);return s}function fi(e,n){var t=-1,l=e.length;for(n||(n=E(l));++t<l;)n[t]=e[t];return n}function Ei(e,n,t,l){var i=!t;t||(t={});for(var o=-1,a=n.length;++o<a;){var r=n[o],u=l?l(t[r],e[r],r,t,e):void 0;void 0===u&&(u=e[r]),i?Gt(t,r,u):jt(t,r,u)}return t}function _i(e,n){return function(t,l){var i=Ra(t)?tn:Yt,o=n?n():{};return i(t,e,Xi(l,2),o)}}function gi(e){return Ml(function(n,t){var l=-1,i=t.length,o=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&oo(t[0],t[1],a)&&(o=i<3?void 0:o,i=1),n=pe(n);++l<i;){var r=t[l];r&&e(n,r,l,o)}return n})}function Ai(e,n){return function(t,l){if(null==t)return t;if(!wa(t))return e(t,l);for(var i=t.length,o=n?i:-1,a=pe(t);(n?o--:++o<i)&&!1!==l(a[o],o,a););return t}}function Si(e){return function(n,t,l){for(var i=-1,o=pe(n),a=l(n),r=a.length;r--;){var u=a[e?r:++i];if(!1===t(o[u],u,o))break}return n}}function hi(e){return function(n){var t=kn(n=rr(n))?Yn(n):void 0,l=t?t[0]:n.charAt(0),i=t?ri(t,1).join(""):n.slice(1);return l[e]()+i}}function bi(e){return function(n){return vn(Hr(Or(n).replace(Ne,"")),e,"")}}function yi(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Nt(e.prototype),l=e.apply(t,n);return za(l)?l:t}}function Ti(e){return function(n,t,l){var i=pe(n);if(!wa(n)){var o=Xi(t,3);n=Sr(n),t=function(e){return o(i[e],e,i)}}var a=e(n,t,l);return a>-1?i[o?n[a]:a]:void 0}}function Ci(e){return ji(function(n){var l=n.length,i=l,o=Lt.prototype.thru;for(e&&n.reverse();i--;){var a=n[i];if("function"!=typeof a)throw new Ee(t);if(o&&!r&&"wrapper"==Gi(a))var r=new Lt([],!0)}for(i=r?i:l;++i<l;){var u=Gi(a=n[i]),d="wrapper"==u?Ki(a):void 0;r=d&&ro(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?r[Gi(d[0])].apply(r,d[3]):1==a.length&&ro(a)?r[u]():r.thru(a)}return function(){var e=arguments,t=e[0];if(r&&1==e.length&&Ra(t))return r.plant(t).value();for(var i=0,o=l?n[i].apply(this,e):t;++i<l;)o=n[i].call(this,o);return o}})}function Di(e,n,t,l,i,o,a,r,u,d){var c=128&n,s=1&n,v=2&n,p=24&n,m=512&n,f=v?void 0:yi(e);return function _(){for(var g=arguments.length,A=E(g),S=g;S--;)A[S]=arguments[S];if(p)var h=Vi(_),b=Rn(A,h);if(l&&(A=pi(A,l,i,p)),o&&(A=mi(A,o,a,p)),g-=b,p&&g<d){var y=Hn(A,h);return Ri(e,n,Di,_.placeholder,t,A,y,r,u,d-g)}var T=s?t:this,C=v?T[e]:e;return g=A.length,r?A=fo(A,r):m&&g>1&&A.reverse(),c&&u<g&&(A.length=u),this&&this!==ze&&this instanceof _&&(C=f||yi(C)),C.apply(T,A)}}function Pi(e,n){return function(t,l){return function(e,n,t,l){return rl(e,function(e,i,o){n(l,t(e),i,o)}),l}(t,e,n(l),{})}}function Ni(e,n){return function(t,l){var i;if(void 0===t&&void 0===l)return n;if(void 0!==t&&(i=t),void 0!==l){if(void 0===i)return l;"string"==typeof t||"string"==typeof l?(t=ql(t),l=ql(l)):(t=Xl(t),l=Xl(l)),i=e(t,l)}return i}}function Ii(e){return ji(function(n){return n=cn(n,Nn(Xi())),Ml(function(t){var l=this;return e(n,function(e){return nn(e,l,t)})})})}function Li(e,n){var t=(n=void 0===n?" ":ql(n)).length;if(t<2)return t?wl(n,e):n;var l=wl(n,Qn(e/zn(n)));return kn(n)?ri(Yn(l),0,e).join(""):l.slice(0,e)}function Bi(e){return function(n,t,l){return l&&"number"!=typeof l&&oo(n,t,l)&&(t=l=void 0),n=tr(n),void 0===t?(t=n,n=0):t=tr(t),function(e,n,t,l){for(var i=-1,o=ot(Qn((n-e)/(t||1)),0),a=E(o);o--;)a[l?o:++i]=e,e+=t;return a}(n,t,l=void 0===l?n<t?1:-1:tr(l),e)}}function Oi(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=or(n),t=or(t)),e(n,t)}}function Ri(e,n,t,l,i,o,a,r,u,d){var c=8&n;n|=c?32:64,4&(n&=~(c?64:32))||(n&=-4);var s=[e,n,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,r,u,d],v=t.apply(void 0,s);return ro(e)&&_o(v,s),v.placeholder=l,So(v,e,n)}function xi(e){var n=ve[e];return function(e,t){if(e=or(e),(t=null==t?0:at(lr(t),292))&&tt(e)){var l=(rr(e)+"e").split("e");return+((l=(rr(n(l[0]+"e"+(+l[1]+t)))+"e").split("e"))[0]+"e"+(+l[1]-t))}return n(e)}}var wi=mt&&1/Wn(new mt([,-0]))[1]==1/0?function(e){return new mt(e)}:Zr;function Mi(e){return function(n){var t=eo(n);return t==v?Fn(n):t==_?jn(n):function(e,n){return cn(n,function(n){return[n,e[n]]})}(n,e(n))}}function ki(e,n,i,o,a,r,u,d){var c=2&n;if(!c&&"function"!=typeof e)throw new Ee(t);var s=o?o.length:0;if(s||(n&=-97,o=a=void 0),u=void 0===u?u:ot(lr(u),0),d=void 0===d?d:lr(d),s-=a?a.length:0,64&n){var v=o,p=a;o=a=void 0}var m=c?void 0:Ki(e),f=[e,n,i,o,a,v,p,r,u,d];if(m&&function(e,n){var t=e[1],i=n[1],o=t|i;if(!(o<131||128==i&&8==t||128==i&&256==t&&e[7].length<=n[8]||384==i&&n[7].length<=n[8]&&8==t))return e;1&i&&(e[2]=n[2],o|=1&t?0:4);var a=n[3];if(a){var r=e[3];e[3]=r?pi(r,a,n[4]):a,e[4]=r?Hn(e[3],l):n[4]}(a=n[5])&&(e[5]=(r=e[5])?mi(r,a,n[6]):a,e[6]=r?Hn(e[5],l):n[6]),(a=n[7])&&(e[7]=a),128&i&&(e[8]=null==e[8]?n[8]:at(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=o}(f,m),e=f[0],n=f[1],i=f[2],o=f[3],a=f[4],!(d=f[9]=void 0===f[9]?c?0:e.length:ot(f[9]-s,0))&&24&n&&(n&=-25),n&&1!=n)_=8==n||16==n?function(e,n,t){var l=yi(e);return function i(){for(var o=arguments.length,a=E(o),r=o,u=Vi(i);r--;)a[r]=arguments[r];var d=o<3&&a[0]!==u&&a[o-1]!==u?[]:Hn(a,u);if((o-=d.length)<t)return Ri(e,n,Di,i.placeholder,void 0,a,d,void 0,void 0,t-o);var c=this&&this!==ze&&this instanceof i?l:e;return nn(c,this,a)}}(e,n,d):32!=n&&33!=n||a.length?Di.apply(void 0,f):function(e,n,t,l){var i=1&n,o=yi(e);return function n(){for(var a=-1,r=arguments.length,u=-1,d=l.length,c=E(d+r),s=this&&this!==ze&&this instanceof n?o:e;++u<d;)c[u]=l[u];for(;r--;)c[u++]=arguments[++a];return nn(s,i?t:this,c)}}(e,n,i,o);else var _=function(e,n,t){var l=1&n,i=yi(e);return function n(){var o=this&&this!==ze&&this instanceof n?i:e;return o.apply(l?t:this,arguments)}}(e,n,i);return So((m?Hl:_o)(_,f),e,n)}function Fi(e,n,t,l){return void 0===e||Ia(e,ge[t])&&!he.call(l,t)?n:e}function Ui(e,n,t,l,i,o){return za(e)&&za(n)&&(o.set(n,e),Nl(e,n,void 0,Ui,o),o.delete(n)),e}function Hi(e){return Va(e)?void 0:e}function Wi(e,n,t,l,i,o){var a=1&t,r=e.length,u=n.length;if(r!=u&&!(a&&u>r))return!1;var d=o.get(e),c=o.get(n);if(d&&c)return d==n&&c==e;var s=-1,v=!0,p=2&t?new wt:void 0;for(o.set(e,n),o.set(n,e);++s<r;){var m=e[s],f=n[s];if(l)var E=a?l(f,m,s,n,e,o):l(m,f,s,e,n,o);if(void 0!==E){if(E)continue;v=!1;break}if(p){if(!mn(n,function(e,n){if(!Ln(p,n)&&(m===e||i(m,e,t,l,o)))return p.push(n)})){v=!1;break}}else if(m!==f&&!i(m,f,t,l,o)){v=!1;break}}return o.delete(e),o.delete(n),v}function ji(e){return Ao(po(e,void 0,xo),e+"")}function zi(e){return sl(e,Sr,Qi)}function Yi(e){return sl(e,hr,$i)}var Ki=_t?function(e){return _t.get(e)}:Zr;function Gi(e){for(var n=e.name+"",t=gt[n],l=he.call(gt,n)?t.length:0;l--;){var i=t[l],o=i.func;if(null==o||o==e)return i.name}return n}function Vi(e){return(he.call(Pt,"placeholder")?Pt:e).placeholder}function Xi(){var e=Pt.iteratee||Vr;return e=e===Vr?bl:e,arguments.length?e(arguments[0],arguments[1]):e}function qi(e,n){var t,l,i=e.__data__;return("string"==(l=typeof(t=n))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==t:null===t)?i["string"==typeof n?"string":"hash"]:i.map}function Ji(e){for(var n=Sr(e),t=n.length;t--;){var l=n[t],i=e[l];n[t]=[l,i,so(i)]}return n}function Zi(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return hl(t)?t:void 0}var Qi=et?function(e){return null==e?[]:(e=pe(e),rn(et(e),function(n){return Ke.call(e,n)}))}:iu,$i=et?function(e){for(var n=[];e;)sn(n,Qi(e)),e=je(e);return n}:iu,eo=vl;function no(e,n,t){for(var l=-1,i=(n=oi(n,e)).length,o=!1;++l<i;){var a=Do(n[l]);if(!(o=null!=e&&t(e,a)))break;e=e[a]}return o||++l!=i?o:!!(i=null==e?0:e.length)&&ja(i)&&io(a,i)&&(Ra(e)||Oa(e))}function to(e){return"function"!=typeof e.constructor||co(e)?{}:Nt(je(e))}function lo(e){return Ra(e)||Oa(e)||!!(Xe&&e&&e[Xe])}function io(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&ae.test(e))&&e>-1&&e%1==0&&e<n}function oo(e,n,t){if(!za(t))return!1;var l=typeof n;return!!("number"==l?wa(t)&&io(n,t.length):"string"==l&&n in t)&&Ia(t[n],e)}function ao(e,n){if(Ra(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Za(e))||j.test(e)||!W.test(e)||null!=n&&e in pe(n)}function ro(e){var n=Gi(e),t=Pt[n];if("function"!=typeof t||!(n in Bt.prototype))return!1;if(e===t)return!0;var l=Ki(t);return!!l&&e===l[0]}(st&&eo(new st(new ArrayBuffer(1)))!=b||vt&&eo(new vt)!=v||pt&&"[object Promise]"!=eo(pt.resolve())||mt&&eo(new mt)!=_||ft&&eo(new ft)!=S)&&(eo=function(e){var n=vl(e),t=n==m?e.constructor:void 0,l=t?Po(t):"";if(l)switch(l){case At:return b;case St:return v;case ht:return"[object Promise]";case bt:return _;case yt:return S}return n});var uo=Ae?Ha:ou;function co(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||ge)}function so(e){return e==e&&!za(e)}function vo(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in pe(t))}}function po(e,n,t){return n=ot(void 0===n?e.length-1:n,0),function(){for(var l=arguments,i=-1,o=ot(l.length-n,0),a=E(o);++i<o;)a[i]=l[n+i];i=-1;for(var r=E(n+1);++i<n;)r[i]=l[i];return r[n]=t(a),nn(e,this,r)}}function mo(e,n){return n.length<2?e:cl(e,zl(n,0,-1))}function fo(e,n){for(var t=e.length,l=at(n.length,t),i=fi(e);l--;){var o=n[l];e[l]=io(o,t)?i[o]:void 0}return e}function Eo(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var _o=ho(Hl),go=Zn||function(e,n){return ze.setTimeout(e,n)},Ao=ho(Wl);function So(e,n,t){var l=n+"";return Ao(e,function(e,n){var t=n.length;if(!t)return e;var l=t-1;return n[l]=(t>1?"& ":"")+n[l],n=n.join(t>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+n+"] */\n")}(l,function(e,n){return ln(i,function(t){var l="_."+t[0];n&t[1]&&!un(e,l)&&e.push(l)}),e.sort()}(function(e){var n=e.match(q);return n?n[1].split(J):[]}(l),t)))}function ho(e){var n=0,t=0;return function(){var l=rt(),i=16-(l-t);if(t=l,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function bo(e,n){var t=-1,l=e.length,i=l-1;for(n=void 0===n?l:n;++t<n;){var o=xl(t,i),a=e[o];e[o]=e[t],e[t]=a}return e.length=n,e}var yo,To,Co=(yo=ya(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(z,function(e,t,l,i){n.push(l?i.replace($,"$1"):t||e)}),n},function(e){return 500===To.size&&To.clear(),e}),To=yo.cache,yo);function Do(e){if("string"==typeof e||Za(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Po(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function No(e){if(e instanceof Bt)return e.clone();var n=new Lt(e.__wrapped__,e.__chain__);return n.__actions__=fi(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Io=Ml(function(e,n){return Ma(e)?Qt(e,il(n,1,Ma,!0)):[]}),Lo=Ml(function(e,n){var t=Uo(n);return Ma(t)&&(t=void 0),Ma(e)?Qt(e,il(n,1,Ma,!0),Xi(t,2)):[]}),Bo=Ml(function(e,n){var t=Uo(n);return Ma(t)&&(t=void 0),Ma(e)?Qt(e,il(n,1,Ma,!0),void 0,t):[]});function Oo(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var i=null==t?0:lr(t);return i<0&&(i=ot(l+i,0)),_n(e,Xi(n,3),i)}function Ro(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var i=l-1;return void 0!==t&&(i=lr(t),i=t<0?ot(l+i,0):at(i,l-1)),_n(e,Xi(n,3),i,!0)}function xo(e){return null!=e&&e.length?il(e,1):[]}function wo(e){return e&&e.length?e[0]:void 0}var Mo=Ml(function(e){var n=cn(e,li);return n.length&&n[0]===e[0]?El(n):[]}),ko=Ml(function(e){var n=Uo(e),t=cn(e,li);return n===Uo(t)?n=void 0:t.pop(),t.length&&t[0]===e[0]?El(t,Xi(n,2)):[]}),Fo=Ml(function(e){var n=Uo(e),t=cn(e,li);return(n="function"==typeof n?n:void 0)&&t.pop(),t.length&&t[0]===e[0]?El(t,void 0,n):[]});function Uo(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}var Ho=Ml(Wo);function Wo(e,n){return e&&e.length&&n&&n.length?Ol(e,n):e}var jo=ji(function(e,n){var t=null==e?0:e.length,l=Vt(e,n);return Rl(e,cn(n,function(e){return io(e,t)?+e:e}).sort(vi)),l});function zo(e){return null==e?e:ct.call(e)}var Yo=Ml(function(e){return Jl(il(e,1,Ma,!0))}),Ko=Ml(function(e){var n=Uo(e);return Ma(n)&&(n=void 0),Jl(il(e,1,Ma,!0),Xi(n,2))}),Go=Ml(function(e){var n=Uo(e);return n="function"==typeof n?n:void 0,Jl(il(e,1,Ma,!0),void 0,n)});function Vo(e){if(!e||!e.length)return[];var n=0;return e=rn(e,function(e){if(Ma(e))return n=ot(e.length,n),!0}),Dn(n,function(n){return cn(e,bn(n))})}function Xo(e,n){if(!e||!e.length)return[];var t=Vo(e);return null==n?t:cn(t,function(e){return nn(n,void 0,e)})}var qo=Ml(function(e,n){return Ma(e)?Qt(e,n):[]}),Jo=Ml(function(e){return ni(rn(e,Ma))}),Zo=Ml(function(e){var n=Uo(e);return Ma(n)&&(n=void 0),ni(rn(e,Ma),Xi(n,2))}),Qo=Ml(function(e){var n=Uo(e);return n="function"==typeof n?n:void 0,ni(rn(e,Ma),void 0,n)}),$o=Ml(Vo),ea=Ml(function(e){var n=e.length,t=n>1?e[n-1]:void 0;return t="function"==typeof t?(e.pop(),t):void 0,Xo(e,t)});function na(e){var n=Pt(e);return n.__chain__=!0,n}function ta(e,n){return n(e)}var la=ji(function(e){var n=e.length,t=n?e[0]:0,l=this.__wrapped__,i=function(n){return Vt(n,e)};return!(n>1||this.__actions__.length)&&l instanceof Bt&&io(t)?((l=l.slice(t,+t+(n?1:0))).__actions__.push({func:ta,args:[i],thisArg:void 0}),new Lt(l,this.__chain__).thru(function(e){return n&&!e.length&&e.push(void 0),e})):this.thru(i)}),ia=_i(function(e,n,t){he.call(e,t)?++e[t]:Gt(e,t,1)}),oa=Ti(Oo),aa=Ti(Ro);function ra(e,n){return(Ra(e)?ln:$t)(e,Xi(n,3))}function ua(e,n){return(Ra(e)?on:el)(e,Xi(n,3))}var da=_i(function(e,n,t){he.call(e,t)?e[t].push(n):Gt(e,t,[n])}),ca=Ml(function(e,n,t){var l=-1,i="function"==typeof n,o=wa(e)?E(e.length):[];return $t(e,function(e){o[++l]=i?nn(n,e,t):_l(e,n,t)}),o}),sa=_i(function(e,n,t){Gt(e,t,n)});function va(e,n){return(Ra(e)?cn:Cl)(e,Xi(n,3))}var pa=_i(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]}),ma=Ml(function(e,n){if(null==e)return[];var t=n.length;return t>1&&oo(e,n[0],n[1])?n=[]:t>2&&oo(n[0],n[1],n[2])&&(n=[n[0]]),Ll(e,il(n,1),[])}),fa=Jn||function(){return ze.Date.now()};function Ea(e,n,t){return n=t?void 0:n,ki(e,128,void 0,void 0,void 0,void 0,n=e&&null==n?e.length:n)}function _a(e,n){var l;if("function"!=typeof n)throw new Ee(t);return e=lr(e),function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=void 0),l}}var ga=Ml(function(e,n,t){var l=1;if(t.length){var i=Hn(t,Vi(ga));l|=32}return ki(e,l,n,t,i)}),Aa=Ml(function(e,n,t){var l=3;if(t.length){var i=Hn(t,Vi(Aa));l|=32}return ki(n,l,e,t,i)});function Sa(e,n,l){var i,o,a,r,u,d,c=0,s=!1,v=!1,p=!0;if("function"!=typeof e)throw new Ee(t);function m(n){var t=i,l=o;return i=o=void 0,c=n,r=e.apply(l,t)}function f(e){return c=e,u=go(_,n),s?m(e):r}function E(e){var t=e-d;return void 0===d||t>=n||t<0||v&&e-c>=a}function _(){var e=fa();if(E(e))return g(e);u=go(_,function(e){var t=n-(e-d);return v?at(t,a-(e-c)):t}(e))}function g(e){return u=void 0,p&&i?m(e):(i=o=void 0,r)}function A(){var e=fa(),t=E(e);if(i=arguments,o=this,d=e,t){if(void 0===u)return f(d);if(v)return ui(u),u=go(_,n),m(d)}return void 0===u&&(u=go(_,n)),r}return n=or(n)||0,za(l)&&(s=!!l.leading,a=(v="maxWait"in l)?ot(or(l.maxWait)||0,n):a,p="trailing"in l?!!l.trailing:p),A.cancel=function(){void 0!==u&&ui(u),c=0,i=d=o=u=void 0},A.flush=function(){return void 0===u?r:g(fa())},A}var ha=Ml(function(e,n){return Zt(e,1,n)}),ba=Ml(function(e,n,t){return Zt(e,or(n)||0,t)});function ya(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Ee(t);var l=function t(){var l=arguments,i=n?n.apply(this,l):l[0],o=t.cache;if(o.has(i))return o.get(i);var a=e.apply(this,l);return t.cache=o.set(i,a)||o,a};return l.cache=new(ya.Cache||xt),l}function Ta(e){if("function"!=typeof e)throw new Ee(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}ya.Cache=xt;var Ca=ai(function(e,n){var t=(n=1==n.length&&Ra(n[0])?cn(n[0],Nn(Xi())):cn(il(n,1),Nn(Xi()))).length;return Ml(function(l){for(var i=-1,o=at(l.length,t);++i<o;)l[i]=n[i].call(this,l[i]);return nn(e,this,l)})}),Da=Ml(function(e,n){return ki(e,32,void 0,n,Hn(n,Vi(Da)))}),Pa=Ml(function(e,n){return ki(e,64,void 0,n,Hn(n,Vi(Pa)))}),Na=ji(function(e,n){return ki(e,256,void 0,void 0,void 0,n)});function Ia(e,n){return e===n||e!=e&&n!=n}var La=Oi(pl),Ba=Oi(function(e,n){return e>=n}),Oa=gl(function(){return arguments}())?gl:function(e){return Ya(e)&&he.call(e,"callee")&&!Ke.call(e,"callee")},Ra=E.isArray,xa=qe?Nn(qe):function(e){return Ya(e)&&vl(e)==h};function wa(e){return null!=e&&ja(e.length)&&!Ha(e)}function Ma(e){return Ya(e)&&wa(e)}var ka=nt||ou,Fa=Je?Nn(Je):function(e){return Ya(e)&&vl(e)==u};function Ua(e){if(!Ya(e))return!1;var n=vl(e);return n==d||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Va(e)}function Ha(e){if(!za(e))return!1;var n=vl(e);return n==c||n==s||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Wa(e){return"number"==typeof e&&e==lr(e)}function ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function za(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Ya(e){return null!=e&&"object"==typeof e}var Ka=Ze?Nn(Ze):function(e){return Ya(e)&&eo(e)==v};function Ga(e){return"number"==typeof e||Ya(e)&&vl(e)==p}function Va(e){if(!Ya(e)||vl(e)!=m)return!1;var n=je(e);if(null===n)return!0;var t=he.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Se.call(t)==Ce}var Xa=Qe?Nn(Qe):function(e){return Ya(e)&&vl(e)==f},qa=$e?Nn($e):function(e){return Ya(e)&&eo(e)==_};function Ja(e){return"string"==typeof e||!Ra(e)&&Ya(e)&&vl(e)==g}function Za(e){return"symbol"==typeof e||Ya(e)&&vl(e)==A}var Qa=en?Nn(en):function(e){return Ya(e)&&ja(e.length)&&!!Me[vl(e)]},$a=Oi(Tl),er=Oi(function(e,n){return e<=n});function nr(e){if(!e)return[];if(wa(e))return Ja(e)?Yn(e):fi(e);if(fn&&e[fn])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[fn]());var n=eo(e);return(n==v?Fn:n==_?Wn:Ir)(e)}function tr(e){return e?(e=or(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function lr(e){var n=tr(e),t=n%1;return n==n?t?n-t:n:0}function ir(e){return e?Xt(lr(e),0,4294967295):0}function or(e){if("number"==typeof e)return e;if(Za(e))return NaN;if(za(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=za(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Pn(e);var t=le.test(e);return t||oe.test(e)?He(e.slice(2),t?2:8):te.test(e)?NaN:+e}function ar(e){return Ei(e,hr(e))}function rr(e){return null==e?"":ql(e)}var ur=gi(function(e,n){if(co(n)||wa(n))Ei(n,Sr(n),e);else for(var t in n)he.call(n,t)&&jt(e,t,n[t])}),dr=gi(function(e,n){Ei(n,hr(n),e)}),cr=gi(function(e,n,t,l){Ei(n,hr(n),e,l)}),sr=gi(function(e,n,t,l){Ei(n,Sr(n),e,l)}),vr=ji(Vt),pr=Ml(function(e,n){e=pe(e);var t=-1,l=n.length,i=l>2?n[2]:void 0;for(i&&oo(n[0],n[1],i)&&(l=1);++t<l;)for(var o=n[t],a=hr(o),r=-1,u=a.length;++r<u;){var d=a[r],c=e[d];(void 0===c||Ia(c,ge[d])&&!he.call(e,d))&&(e[d]=o[d])}return e}),mr=Ml(function(e){return e.push(void 0,Ui),nn(yr,void 0,e)});function fr(e,n,t){var l=null==e?void 0:cl(e,n);return void 0===l?t:l}function Er(e,n){return null!=e&&no(e,n,fl)}var _r=Pi(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),e[n]=t},zr(Gr)),gr=Pi(function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Te.call(n)),he.call(e,n)?e[n].push(t):e[n]=[t]},Xi),Ar=Ml(_l);function Sr(e){return wa(e)?kt(e):yl(e)}function hr(e){return wa(e)?kt(e,!0):function(e){if(!za(e))return function(e){var n=[];if(null!=e)for(var t in pe(e))n.push(t);return n}(e);var n=co(e),t=[];for(var l in e)("constructor"!=l||!n&&he.call(e,l))&&t.push(l);return t}(e)}var br=gi(function(e,n,t){Nl(e,n,t)}),yr=gi(function(e,n,t,l){Nl(e,n,t,l)}),Tr=ji(function(e,n){var t={};if(null==e)return t;var l=!1;n=cn(n,function(n){return n=oi(n,e),l||(l=n.length>1),n}),Ei(e,Yi(e),t),l&&(t=qt(t,7,Hi));for(var i=n.length;i--;)Zl(t,n[i]);return t}),Cr=ji(function(e,n){return null==e?{}:function(e,n){return Bl(e,n,function(n,t){return Er(e,t)})}(e,n)});function Dr(e,n){if(null==e)return{};var t=cn(Yi(e),function(e){return[e]});return n=Xi(n),Bl(e,t,function(e,t){return n(e,t[0])})}var Pr=Mi(Sr),Nr=Mi(hr);function Ir(e){return null==e?[]:In(e,Sr(e))}var Lr=bi(function(e,n,t){return n=n.toLowerCase(),e+(t?Br(n):n)});function Br(e){return Ur(rr(e).toLowerCase())}function Or(e){return(e=rr(e))&&e.replace(re,xn).replace(Ie,"")}var Rr=bi(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),xr=bi(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),wr=hi("toLowerCase"),Mr=bi(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}),kr=bi(function(e,n,t){return e+(t?" ":"")+Ur(n)}),Fr=bi(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Ur=hi("toUpperCase");function Hr(e,n,t){return e=rr(e),void 0===(n=t?void 0:n)?function(e){return Re.test(e)}(e)?function(e){return e.match(Be)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(n)||[]}var Wr=Ml(function(e,n){try{return nn(e,void 0,n)}catch(e){return Ua(e)?e:new ce(e)}}),jr=ji(function(e,n){return ln(n,function(n){n=Do(n),Gt(e,n,ga(e[n],e))}),e});function zr(e){return function(){return e}}var Yr=Ci(),Kr=Ci(!0);function Gr(e){return e}function Vr(e){return bl("function"==typeof e?e:qt(e,1))}var Xr=Ml(function(e,n){return function(t){return _l(t,e,n)}}),qr=Ml(function(e,n){return function(t){return _l(e,t,n)}});function Jr(e,n,t){var l=Sr(n),i=dl(n,l);null!=t||za(n)&&(i.length||!l.length)||(t=n,n=e,e=this,i=dl(n,Sr(n)));var o=!(za(t)&&"chain"in t&&!t.chain),a=Ha(e);return ln(i,function(t){var l=n[t];e[t]=l,a&&(e.prototype[t]=function(){var n=this.__chain__;if(o||n){var t=e(this.__wrapped__),i=t.__actions__=fi(this.__actions__);return i.push({func:l,args:arguments,thisArg:e}),t.__chain__=n,t}return l.apply(e,sn([this.value()],arguments))})}),e}function Zr(){}var Qr=Ii(cn),$r=Ii(an),eu=Ii(mn);function nu(e){return ao(e)?bn(Do(e)):function(e){return function(n){return cl(n,e)}}(e)}var tu=Bi(),lu=Bi(!0);function iu(){return[]}function ou(){return!1}var au,ru=Ni(function(e,n){return e+n},0),uu=xi("ceil"),du=Ni(function(e,n){return e/n},1),cu=xi("floor"),su=Ni(function(e,n){return e*n},1),vu=xi("round"),pu=Ni(function(e,n){return e-n},0);return Pt.after=function(e,n){if("function"!=typeof n)throw new Ee(t);return e=lr(e),function(){if(--e<1)return n.apply(this,arguments)}},Pt.ary=Ea,Pt.assign=ur,Pt.assignIn=dr,Pt.assignInWith=cr,Pt.assignWith=sr,Pt.at=vr,Pt.before=_a,Pt.bind=ga,Pt.bindAll=jr,Pt.bindKey=Aa,Pt.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ra(e)?e:[e]},Pt.chain=na,Pt.chunk=function(e,n,t){n=(t?oo(e,n,t):void 0===n)?1:ot(lr(n),0);var l=null==e?0:e.length;if(!l||n<1)return[];for(var i=0,o=0,a=E(Qn(l/n));i<l;)a[o++]=zl(e,i,i+=n);return a},Pt.compact=function(e){for(var n=-1,t=null==e?0:e.length,l=0,i=[];++n<t;){var o=e[n];o&&(i[l++]=o)}return i},Pt.concat=function(){var e=arguments.length;if(!e)return[];for(var n=E(e-1),t=arguments[0],l=e;l--;)n[l-1]=arguments[l];return sn(Ra(t)?fi(t):[t],il(n,1))},Pt.cond=function(e){var n=null==e?0:e.length,l=Xi();return e=n?cn(e,function(e){if("function"!=typeof e[1])throw new Ee(t);return[l(e[0]),e[1]]}):[],Ml(function(t){for(var l=-1;++l<n;){var i=e[l];if(nn(i[0],this,t))return nn(i[1],this,t)}})},Pt.conforms=function(e){return function(e){var n=Sr(e);return function(t){return Jt(t,e,n)}}(qt(e,1))},Pt.constant=zr,Pt.countBy=ia,Pt.create=function(e,n){var t=Nt(e);return null==n?t:Kt(t,n)},Pt.curry=function e(n,t,l){var i=ki(n,8,void 0,void 0,void 0,void 0,void 0,t=l?void 0:t);return i.placeholder=e.placeholder,i},Pt.curryRight=function e(n,t,l){var i=ki(n,16,void 0,void 0,void 0,void 0,void 0,t=l?void 0:t);return i.placeholder=e.placeholder,i},Pt.debounce=Sa,Pt.defaults=pr,Pt.defaultsDeep=mr,Pt.defer=ha,Pt.delay=ba,Pt.difference=Io,Pt.differenceBy=Lo,Pt.differenceWith=Bo,Pt.drop=function(e,n,t){var l=null==e?0:e.length;return l?zl(e,(n=t||void 0===n?1:lr(n))<0?0:n,l):[]},Pt.dropRight=function(e,n,t){var l=null==e?0:e.length;return l?zl(e,0,(n=l-(n=t||void 0===n?1:lr(n)))<0?0:n):[]},Pt.dropRightWhile=function(e,n){return e&&e.length?$l(e,Xi(n,3),!0,!0):[]},Pt.dropWhile=function(e,n){return e&&e.length?$l(e,Xi(n,3),!0):[]},Pt.fill=function(e,n,t,l){var i=null==e?0:e.length;return i?(t&&"number"!=typeof t&&oo(e,n,t)&&(t=0,l=i),function(e,n,t,l){var i=e.length;for((t=lr(t))<0&&(t=-t>i?0:i+t),(l=void 0===l||l>i?i:lr(l))<0&&(l+=i),l=t>l?0:ir(l);t<l;)e[t++]=n;return e}(e,n,t,l)):[]},Pt.filter=function(e,n){return(Ra(e)?rn:ll)(e,Xi(n,3))},Pt.flatMap=function(e,n){return il(va(e,n),1)},Pt.flatMapDeep=function(e,n){return il(va(e,n),1/0)},Pt.flatMapDepth=function(e,n,t){return t=void 0===t?1:lr(t),il(va(e,n),t)},Pt.flatten=xo,Pt.flattenDeep=function(e){return null!=e&&e.length?il(e,1/0):[]},Pt.flattenDepth=function(e,n){return null!=e&&e.length?il(e,n=void 0===n?1:lr(n)):[]},Pt.flip=function(e){return ki(e,512)},Pt.flow=Yr,Pt.flowRight=Kr,Pt.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,l={};++n<t;){var i=e[n];l[i[0]]=i[1]}return l},Pt.functions=function(e){return null==e?[]:dl(e,Sr(e))},Pt.functionsIn=function(e){return null==e?[]:dl(e,hr(e))},Pt.groupBy=da,Pt.initial=function(e){return null!=e&&e.length?zl(e,0,-1):[]},Pt.intersection=Mo,Pt.intersectionBy=ko,Pt.intersectionWith=Fo,Pt.invert=_r,Pt.invertBy=gr,Pt.invokeMap=ca,Pt.iteratee=Vr,Pt.keyBy=sa,Pt.keys=Sr,Pt.keysIn=hr,Pt.map=va,Pt.mapKeys=function(e,n){var t={};return n=Xi(n,3),rl(e,function(e,l,i){Gt(t,n(e,l,i),e)}),t},Pt.mapValues=function(e,n){var t={};return n=Xi(n,3),rl(e,function(e,l,i){Gt(t,l,n(e,l,i))}),t},Pt.matches=function(e){return Dl(qt(e,1))},Pt.matchesProperty=function(e,n){return Pl(e,qt(n,1))},Pt.memoize=ya,Pt.merge=br,Pt.mergeWith=yr,Pt.method=Xr,Pt.methodOf=qr,Pt.mixin=Jr,Pt.negate=Ta,Pt.nthArg=function(e){return e=lr(e),Ml(function(n){return Il(n,e)})},Pt.omit=Tr,Pt.omitBy=function(e,n){return Dr(e,Ta(Xi(n)))},Pt.once=function(e){return _a(2,e)},Pt.orderBy=function(e,n,t,l){return null==e?[]:(Ra(n)||(n=null==n?[]:[n]),Ra(t=l?void 0:t)||(t=null==t?[]:[t]),Ll(e,n,t))},Pt.over=Qr,Pt.overArgs=Ca,Pt.overEvery=$r,Pt.overSome=eu,Pt.partial=Da,Pt.partialRight=Pa,Pt.partition=pa,Pt.pick=Cr,Pt.pickBy=Dr,Pt.property=nu,Pt.propertyOf=function(e){return function(n){return null==e?void 0:cl(e,n)}},Pt.pull=Ho,Pt.pullAll=Wo,Pt.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?Ol(e,n,Xi(t,2)):e},Pt.pullAllWith=function(e,n,t){return e&&e.length&&n&&n.length?Ol(e,n,void 0,t):e},Pt.pullAt=jo,Pt.range=tu,Pt.rangeRight=lu,Pt.rearg=Na,Pt.reject=function(e,n){return(Ra(e)?rn:ll)(e,Ta(Xi(n,3)))},Pt.remove=function(e,n){var t=[];if(!e||!e.length)return t;var l=-1,i=[],o=e.length;for(n=Xi(n,3);++l<o;){var a=e[l];n(a,l,e)&&(t.push(a),i.push(l))}return Rl(e,i),t},Pt.rest=function(e,n){if("function"!=typeof e)throw new Ee(t);return Ml(e,n=void 0===n?n:lr(n))},Pt.reverse=zo,Pt.sampleSize=function(e,n,t){return n=(t?oo(e,n,t):void 0===n)?1:lr(n),(Ra(e)?Ut:Fl)(e,n)},Pt.set=function(e,n,t){return null==e?e:Ul(e,n,t)},Pt.setWith=function(e,n,t,l){return l="function"==typeof l?l:void 0,null==e?e:Ul(e,n,t,l)},Pt.shuffle=function(e){return(Ra(e)?Ht:jl)(e)},Pt.slice=function(e,n,t){var l=null==e?0:e.length;return l?(t&&"number"!=typeof t&&oo(e,n,t)?(n=0,t=l):(n=null==n?0:lr(n),t=void 0===t?l:lr(t)),zl(e,n,t)):[]},Pt.sortBy=ma,Pt.sortedUniq=function(e){return e&&e.length?Vl(e):[]},Pt.sortedUniqBy=function(e,n){return e&&e.length?Vl(e,Xi(n,2)):[]},Pt.split=function(e,n,t){return t&&"number"!=typeof t&&oo(e,n,t)&&(n=t=void 0),(t=void 0===t?4294967295:t>>>0)?(e=rr(e))&&("string"==typeof n||null!=n&&!Xa(n))&&!(n=ql(n))&&kn(e)?ri(Yn(e),0,t):e.split(n,t):[]},Pt.spread=function(e,n){if("function"!=typeof e)throw new Ee(t);return n=null==n?0:ot(lr(n),0),Ml(function(t){var l=t[n],i=ri(t,0,n);return l&&sn(i,l),nn(e,this,i)})},Pt.tail=function(e){var n=null==e?0:e.length;return n?zl(e,1,n):[]},Pt.take=function(e,n,t){return e&&e.length?zl(e,0,(n=t||void 0===n?1:lr(n))<0?0:n):[]},Pt.takeRight=function(e,n,t){var l=null==e?0:e.length;return l?zl(e,(n=l-(n=t||void 0===n?1:lr(n)))<0?0:n,l):[]},Pt.takeRightWhile=function(e,n){return e&&e.length?$l(e,Xi(n,3),!1,!0):[]},Pt.takeWhile=function(e,n){return e&&e.length?$l(e,Xi(n,3)):[]},Pt.tap=function(e,n){return n(e),e},Pt.throttle=function(e,n,l){var i=!0,o=!0;if("function"!=typeof e)throw new Ee(t);return za(l)&&(i="leading"in l?!!l.leading:i,o="trailing"in l?!!l.trailing:o),Sa(e,n,{leading:i,maxWait:n,trailing:o})},Pt.thru=ta,Pt.toArray=nr,Pt.toPairs=Pr,Pt.toPairsIn=Nr,Pt.toPath=function(e){return Ra(e)?cn(e,Do):Za(e)?[e]:fi(Co(rr(e)))},Pt.toPlainObject=ar,Pt.transform=function(e,n,t){var l=Ra(e),i=l||ka(e)||Qa(e);if(n=Xi(n,4),null==t){var o=e&&e.constructor;t=i?l?new o:[]:za(e)&&Ha(o)?Nt(je(e)):{}}return(i?ln:rl)(e,function(e,l,i){return n(t,e,l,i)}),t},Pt.unary=function(e){return Ea(e,1)},Pt.union=Yo,Pt.unionBy=Ko,Pt.unionWith=Go,Pt.uniq=function(e){return e&&e.length?Jl(e):[]},Pt.uniqBy=function(e,n){return e&&e.length?Jl(e,Xi(n,2)):[]},Pt.uniqWith=function(e,n){return n="function"==typeof n?n:void 0,e&&e.length?Jl(e,void 0,n):[]},Pt.unset=function(e,n){return null==e||Zl(e,n)},Pt.unzip=Vo,Pt.unzipWith=Xo,Pt.update=function(e,n,t){return null==e?e:Ql(e,n,ii(t))},Pt.updateWith=function(e,n,t,l){return l="function"==typeof l?l:void 0,null==e?e:Ql(e,n,ii(t),l)},Pt.values=Ir,Pt.valuesIn=function(e){return null==e?[]:In(e,hr(e))},Pt.without=qo,Pt.words=Hr,Pt.wrap=function(e,n){return Da(ii(n),e)},Pt.xor=Jo,Pt.xorBy=Zo,Pt.xorWith=Qo,Pt.zip=$o,Pt.zipObject=function(e,n){return ti(e||[],n||[],jt)},Pt.zipObjectDeep=function(e,n){return ti(e||[],n||[],Ul)},Pt.zipWith=ea,Pt.entries=Pr,Pt.entriesIn=Nr,Pt.extend=dr,Pt.extendWith=cr,Jr(Pt,Pt),Pt.add=ru,Pt.attempt=Wr,Pt.camelCase=Lr,Pt.capitalize=Br,Pt.ceil=uu,Pt.clamp=function(e,n,t){return void 0===t&&(t=n,n=void 0),void 0!==t&&(t=(t=or(t))==t?t:0),void 0!==n&&(n=(n=or(n))==n?n:0),Xt(or(e),n,t)},Pt.clone=function(e){return qt(e,4)},Pt.cloneDeep=function(e){return qt(e,5)},Pt.cloneDeepWith=function(e,n){return qt(e,5,n="function"==typeof n?n:void 0)},Pt.cloneWith=function(e,n){return qt(e,4,n="function"==typeof n?n:void 0)},Pt.conformsTo=function(e,n){return null==n||Jt(e,n,Sr(n))},Pt.deburr=Or,Pt.defaultTo=function(e,n){return null==e||e!=e?n:e},Pt.divide=du,Pt.endsWith=function(e,n,t){e=rr(e),n=ql(n);var l=e.length,i=t=void 0===t?l:Xt(lr(t),0,l);return(t-=n.length)>=0&&e.slice(t,i)==n},Pt.eq=Ia,Pt.escape=function(e){return(e=rr(e))&&k.test(e)?e.replace(w,wn):e},Pt.escapeRegExp=function(e){return(e=rr(e))&&K.test(e)?e.replace(Y,"\\$&"):e},Pt.every=function(e,n,t){var l=Ra(e)?an:nl;return t&&oo(e,n,t)&&(n=void 0),l(e,Xi(n,3))},Pt.find=oa,Pt.findIndex=Oo,Pt.findKey=function(e,n){return En(e,Xi(n,3),rl)},Pt.findLast=aa,Pt.findLastIndex=Ro,Pt.findLastKey=function(e,n){return En(e,Xi(n,3),ul)},Pt.floor=cu,Pt.forEach=ra,Pt.forEachRight=ua,Pt.forIn=function(e,n){return null==e?e:ol(e,Xi(n,3),hr)},Pt.forInRight=function(e,n){return null==e?e:al(e,Xi(n,3),hr)},Pt.forOwn=function(e,n){return e&&rl(e,Xi(n,3))},Pt.forOwnRight=function(e,n){return e&&ul(e,Xi(n,3))},Pt.get=fr,Pt.gt=La,Pt.gte=Ba,Pt.has=function(e,n){return null!=e&&no(e,n,ml)},Pt.hasIn=Er,Pt.head=wo,Pt.identity=Gr,Pt.includes=function(e,n,t,l){e=wa(e)?e:Ir(e),t=t&&!l?lr(t):0;var i=e.length;return t<0&&(t=ot(i+t,0)),Ja(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&gn(e,n,t)>-1},Pt.indexOf=function(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var i=null==t?0:lr(t);return i<0&&(i=ot(l+i,0)),gn(e,n,i)},Pt.inRange=function(e,n,t){return n=tr(n),void 0===t?(t=n,n=0):t=tr(t),function(e,n,t){return e>=at(n,t)&&e<ot(n,t)}(e=or(e),n,t)},Pt.invoke=Ar,Pt.isArguments=Oa,Pt.isArray=Ra,Pt.isArrayBuffer=xa,Pt.isArrayLike=wa,Pt.isArrayLikeObject=Ma,Pt.isBoolean=function(e){return!0===e||!1===e||Ya(e)&&vl(e)==r},Pt.isBuffer=ka,Pt.isDate=Fa,Pt.isElement=function(e){return Ya(e)&&1===e.nodeType&&!Va(e)},Pt.isEmpty=function(e){if(null==e)return!0;if(wa(e)&&(Ra(e)||"string"==typeof e||"function"==typeof e.splice||ka(e)||Qa(e)||Oa(e)))return!e.length;var n=eo(e);if(n==v||n==_)return!e.size;if(co(e))return!yl(e).length;for(var t in e)if(he.call(e,t))return!1;return!0},Pt.isEqual=function(e,n){return Al(e,n)},Pt.isEqualWith=function(e,n,t){var l=(t="function"==typeof t?t:void 0)?t(e,n):void 0;return void 0===l?Al(e,n,void 0,t):!!l},Pt.isError=Ua,Pt.isFinite=function(e){return"number"==typeof e&&tt(e)},Pt.isFunction=Ha,Pt.isInteger=Wa,Pt.isLength=ja,Pt.isMap=Ka,Pt.isMatch=function(e,n){return e===n||Sl(e,n,Ji(n))},Pt.isMatchWith=function(e,n,t){return t="function"==typeof t?t:void 0,Sl(e,n,Ji(n),t)},Pt.isNaN=function(e){return Ga(e)&&e!=+e},Pt.isNative=function(e){if(uo(e))throw new ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return hl(e)},Pt.isNil=function(e){return null==e},Pt.isNull=function(e){return null===e},Pt.isNumber=Ga,Pt.isObject=za,Pt.isObjectLike=Ya,Pt.isPlainObject=Va,Pt.isRegExp=Xa,Pt.isSafeInteger=function(e){return Wa(e)&&e>=-9007199254740991&&e<=9007199254740991},Pt.isSet=qa,Pt.isString=Ja,Pt.isSymbol=Za,Pt.isTypedArray=Qa,Pt.isUndefined=function(e){return void 0===e},Pt.isWeakMap=function(e){return Ya(e)&&eo(e)==S},Pt.isWeakSet=function(e){return Ya(e)&&"[object WeakSet]"==vl(e)},Pt.join=function(e,n){return null==e?"":lt.call(e,n)},Pt.kebabCase=Rr,Pt.last=Uo,Pt.lastIndexOf=function(e,n,t){var l=null==e?0:e.length;if(!l)return-1;var i=l;return void 0!==t&&(i=(i=lr(t))<0?ot(l+i,0):at(i,l-1)),n==n?function(e,n,t){for(var l=t+1;l--;)if(e[l]===n)return l;return l}(e,n,i):_n(e,Sn,i,!0)},Pt.lowerCase=xr,Pt.lowerFirst=wr,Pt.lt=$a,Pt.lte=er,Pt.max=function(e){return e&&e.length?tl(e,Gr,pl):void 0},Pt.maxBy=function(e,n){return e&&e.length?tl(e,Xi(n,2),pl):void 0},Pt.mean=function(e){return hn(e,Gr)},Pt.meanBy=function(e,n){return hn(e,Xi(n,2))},Pt.min=function(e){return e&&e.length?tl(e,Gr,Tl):void 0},Pt.minBy=function(e,n){return e&&e.length?tl(e,Xi(n,2),Tl):void 0},Pt.stubArray=iu,Pt.stubFalse=ou,Pt.stubObject=function(){return{}},Pt.stubString=function(){return""},Pt.stubTrue=function(){return!0},Pt.multiply=su,Pt.nth=function(e,n){return e&&e.length?Il(e,lr(n)):void 0},Pt.noConflict=function(){return ze._===this&&(ze._=De),this},Pt.noop=Zr,Pt.now=fa,Pt.pad=function(e,n,t){e=rr(e);var l=(n=lr(n))?zn(e):0;if(!n||l>=n)return e;var i=(n-l)/2;return Li($n(i),t)+e+Li(Qn(i),t)},Pt.padEnd=function(e,n,t){e=rr(e);var l=(n=lr(n))?zn(e):0;return n&&l<n?e+Li(n-l,t):e},Pt.padStart=function(e,n,t){e=rr(e);var l=(n=lr(n))?zn(e):0;return n&&l<n?Li(n-l,t)+e:e},Pt.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),ut(rr(e).replace(G,""),n||0)},Pt.random=function(e,n,t){if(t&&"boolean"!=typeof t&&oo(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=tr(e),void 0===n?(n=e,e=0):n=tr(n)),e>n){var l=e;e=n,n=l}if(t||e%1||n%1){var i=dt();return at(e+i*(n-e+Ue("1e-"+((i+"").length-1))),n)}return xl(e,n)},Pt.reduce=function(e,n,t){var l=Ra(e)?vn:Tn,i=arguments.length<3;return l(e,Xi(n,4),t,i,$t)},Pt.reduceRight=function(e,n,t){var l=Ra(e)?pn:Tn,i=arguments.length<3;return l(e,Xi(n,4),t,i,el)},Pt.repeat=function(e,n,t){return n=(t?oo(e,n,t):void 0===n)?1:lr(n),wl(rr(e),n)},Pt.replace=function(){var e=arguments,n=rr(e[0]);return e.length<3?n:n.replace(e[1],e[2])},Pt.result=function(e,n,t){var l=-1,i=(n=oi(n,e)).length;for(i||(i=1,e=void 0);++l<i;){var o=null==e?void 0:e[Do(n[l])];void 0===o&&(l=i,o=t),e=Ha(o)?o.call(e):o}return e},Pt.round=vu,Pt.runInContext=e,Pt.sample=function(e){return(Ra(e)?Ft:kl)(e)},Pt.size=function(e){if(null==e)return 0;if(wa(e))return Ja(e)?zn(e):e.length;var n=eo(e);return n==v||n==_?e.size:yl(e).length},Pt.snakeCase=Mr,Pt.some=function(e,n,t){var l=Ra(e)?mn:Yl;return t&&oo(e,n,t)&&(n=void 0),l(e,Xi(n,3))},Pt.sortedIndex=function(e,n){return Kl(e,n)},Pt.sortedIndexBy=function(e,n,t){return Gl(e,n,Xi(t,2))},Pt.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var l=Kl(e,n);if(l<t&&Ia(e[l],n))return l}return-1},Pt.sortedLastIndex=function(e,n){return Kl(e,n,!0)},Pt.sortedLastIndexBy=function(e,n,t){return Gl(e,n,Xi(t,2),!0)},Pt.sortedLastIndexOf=function(e,n){if(null!=e&&e.length){var t=Kl(e,n,!0)-1;if(Ia(e[t],n))return t}return-1},Pt.startCase=kr,Pt.startsWith=function(e,n,t){return e=rr(e),t=null==t?0:Xt(lr(t),0,e.length),n=ql(n),e.slice(t,t+n.length)==n},Pt.subtract=pu,Pt.sum=function(e){return e&&e.length?Cn(e,Gr):0},Pt.sumBy=function(e,n){return e&&e.length?Cn(e,Xi(n,2)):0},Pt.template=function(e,n,t){var l=Pt.templateSettings;t&&oo(e,n,t)&&(n=void 0),e=rr(e),n=cr({},n,l,Fi);var i,o,a=cr({},n.imports,l.imports,Fi),r=Sr(a),u=In(a,r),d=0,c=n.interpolate||ue,s="__p += '",v=me((n.escape||ue).source+"|"+c.source+"|"+(c===H?ee:ue).source+"|"+(n.evaluate||ue).source+"|$","g"),p="//# sourceURL="+(he.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++we+"]")+"\n";e.replace(v,function(n,t,l,a,r,u){return l||(l=a),s+=e.slice(d,u).replace(de,Mn),t&&(i=!0,s+="' +\n__e("+t+") +\n'"),r&&(o=!0,s+="';\n"+r+";\n__p += '"),l&&(s+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),d=u+n.length,n}),s+="';\n";var m=he.call(n,"variable")&&n.variable;if(m){if(Q.test(m))throw new ce("Invalid `variable` option passed into `_.template`")}else s="with (obj) {\n"+s+"\n}\n";s=(o?s.replace(B,""):s).replace(O,"$1").replace(R,"$1;"),s="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var f=Wr(function(){return se(r,p+"return "+s).apply(void 0,u)});if(f.source=s,Ua(f))throw f;return f},Pt.times=function(e,n){if((e=lr(e))<1||e>9007199254740991)return[];var t=4294967295,l=at(e,4294967295);e-=4294967295;for(var i=Dn(l,n=Xi(n));++t<e;)n(t);return i},Pt.toFinite=tr,Pt.toInteger=lr,Pt.toLength=ir,Pt.toLower=function(e){return rr(e).toLowerCase()},Pt.toNumber=or,Pt.toSafeInteger=function(e){return e?Xt(lr(e),-9007199254740991,9007199254740991):0===e?e:0},Pt.toString=rr,Pt.toUpper=function(e){return rr(e).toUpperCase()},Pt.trim=function(e,n,t){if((e=rr(e))&&(t||void 0===n))return Pn(e);if(!e||!(n=ql(n)))return e;var l=Yn(e),i=Yn(n);return ri(l,Bn(l,i),On(l,i)+1).join("")},Pt.trimEnd=function(e,n,t){if((e=rr(e))&&(t||void 0===n))return e.slice(0,Kn(e)+1);if(!e||!(n=ql(n)))return e;var l=Yn(e);return ri(l,0,On(l,Yn(n))+1).join("")},Pt.trimStart=function(e,n,t){if((e=rr(e))&&(t||void 0===n))return e.replace(G,"");if(!e||!(n=ql(n)))return e;var l=Yn(e);return ri(l,Bn(l,Yn(n))).join("")},Pt.truncate=function(e,n){var t=30,l="...";if(za(n)){var i="separator"in n?n.separator:i;t="length"in n?lr(n.length):t,l="omission"in n?ql(n.omission):l}var o=(e=rr(e)).length;if(kn(e)){var a=Yn(e);o=a.length}if(t>=o)return e;var r=t-zn(l);if(r<1)return l;var u=a?ri(a,0,r).join(""):e.slice(0,r);if(void 0===i)return u+l;if(a&&(r+=u.length-r),Xa(i)){if(e.slice(r).search(i)){var d,c=u;for(i.global||(i=me(i.source,rr(ne.exec(i))+"g")),i.lastIndex=0;d=i.exec(c);)var s=d.index;u=u.slice(0,void 0===s?r:s)}}else if(e.indexOf(ql(i),r)!=r){var v=u.lastIndexOf(i);v>-1&&(u=u.slice(0,v))}return u+l},Pt.unescape=function(e){return(e=rr(e))&&M.test(e)?e.replace(x,Gn):e},Pt.uniqueId=function(e){var n=++be;return rr(e)+n},Pt.upperCase=Fr,Pt.upperFirst=Ur,Pt.each=ra,Pt.eachRight=ua,Pt.first=wo,Jr(Pt,(au={},rl(Pt,function(e,n){he.call(Pt.prototype,n)||(au[n]=e)}),au),{chain:!1}),Pt.VERSION="4.17.21",ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Pt[e].placeholder=Pt}),ln(["drop","take"],function(e,n){Bt.prototype[e]=function(t){t=void 0===t?1:ot(lr(t),0);var l=this.__filtered__&&!n?new Bt(this):this.clone();return l.__filtered__?l.__takeCount__=at(t,l.__takeCount__):l.__views__.push({size:at(t,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},Bt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),ln(["filter","map","takeWhile"],function(e,n){var t=n+1,l=1==t||3==t;Bt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:Xi(e,3),type:t}),n.__filtered__=n.__filtered__||l,n}}),ln(["head","last"],function(e,n){var t="take"+(n?"Right":"");Bt.prototype[e]=function(){return this[t](1).value()[0]}}),ln(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");Bt.prototype[e]=function(){return this.__filtered__?new Bt(this):this[t](1)}}),Bt.prototype.compact=function(){return this.filter(Gr)},Bt.prototype.find=function(e){return this.filter(e).head()},Bt.prototype.findLast=function(e){return this.reverse().find(e)},Bt.prototype.invokeMap=Ml(function(e,n){return"function"==typeof e?new Bt(this):this.map(function(t){return _l(t,e,n)})}),Bt.prototype.reject=function(e){return this.filter(Ta(Xi(e)))},Bt.prototype.slice=function(e,n){e=lr(e);var t=this;return t.__filtered__&&(e>0||n<0)?new Bt(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),void 0!==n&&(t=(n=lr(n))<0?t.dropRight(-n):t.take(n-e)),t)},Bt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Bt.prototype.toArray=function(){return this.take(4294967295)},rl(Bt.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),i=Pt[l?"take"+("last"==n?"Right":""):n],o=l||/^find/.test(n);i&&(Pt.prototype[n]=function(){var n=this.__wrapped__,a=l?[1]:arguments,r=n instanceof Bt,u=a[0],d=r||Ra(n),c=function(e){var n=i.apply(Pt,sn([e],a));return l&&s?n[0]:n};d&&t&&"function"==typeof u&&1!=u.length&&(r=d=!1);var s=this.__chain__,v=!!this.__actions__.length,p=o&&!s,m=r&&!v;if(!o&&d){n=m?n:new Bt(this);var f=e.apply(n,a);return f.__actions__.push({func:ta,args:[c],thisArg:void 0}),new Lt(f,s)}return p&&m?e.apply(this,a):(f=this.thru(c),p?l?f.value()[0]:f.value():f)})}),ln(["pop","push","shift","sort","splice","unshift"],function(e){var n=_e[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);Pt.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var i=this.value();return n.apply(Ra(i)?i:[],e)}return this[t](function(t){return n.apply(Ra(t)?t:[],e)})}}),rl(Bt.prototype,function(e,n){var t=Pt[n];if(t){var l=t.name+"";he.call(gt,l)||(gt[l]=[]),gt[l].push({name:n,func:t})}}),gt[Di(void 0,2).name]=[{name:"wrapper",func:void 0}],Bt.prototype.clone=function(){var e=new Bt(this.__wrapped__);return e.__actions__=fi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fi(this.__views__),e},Bt.prototype.reverse=function(){if(this.__filtered__){var e=new Bt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Bt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Ra(e),l=n<0,i=t?e.length:0,o=function(e,n,t){for(var l=-1,i=t.length;++l<i;){var o=t[l],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":n-=a;break;case"take":n=at(n,e+a);break;case"takeRight":e=ot(e,n-a)}}return{start:e,end:n}}(0,i,this.__views__),a=o.start,r=o.end,u=r-a,d=l?r:a-1,c=this.__iteratees__,s=c.length,v=0,p=at(u,this.__takeCount__);if(!t||!l&&i==u&&p==u)return ei(e,this.__actions__);var m=[];e:for(;u--&&v<p;){for(var f=-1,E=e[d+=n];++f<s;){var _=c[f],g=_.type,A=(0,_.iteratee)(E);if(2==g)E=A;else if(!A){if(1==g)continue e;break e}}m[v++]=E}return m},Pt.prototype.at=la,Pt.prototype.chain=function(){return na(this)},Pt.prototype.commit=function(){return new Lt(this.value(),this.__chain__)},Pt.prototype.next=function(){void 0===this.__values__&&(this.__values__=nr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Pt.prototype.plant=function(e){for(var n,t=this;t instanceof It;){var l=No(t);l.__index__=0,l.__values__=void 0,n?i.__wrapped__=l:n=l;var i=l;t=t.__wrapped__}return i.__wrapped__=e,n},Pt.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Bt){var n=e;return this.__actions__.length&&(n=new Bt(this)),(n=n.reverse()).__actions__.push({func:ta,args:[zo],thisArg:void 0}),new Lt(n,this.__chain__)}return this.thru(zo)},Pt.prototype.toJSON=Pt.prototype.valueOf=Pt.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},Pt.prototype.first=Pt.prototype.head,fn&&(Pt.prototype[fn]=function(){return this}),Pt}();Ke?((Ke.exports=Vn)._=Vn,Ye._=Vn):ze._=Vn}).call(E)}),Tl=function(e){var l,a,r=e.t,d=e.config,c=e.formData,s=e.setError,v=e.clearErrors,p=e.formState,m=e.index,f=e.setFieldReports,E=e.documentList,_=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),g=n.useState((null==c||null===(l=c.FeildReports)||void 0===l||null===(a=l[m])||void 0===a?void 0:a.Documents)||[]),A=g[0],S=g[1],h=n.useState(null),b=h[0],y=h[1],T=(n.useState((null==c?void 0:c.tradedetils1)||[]),"create");i.useLocation().pathname.includes("/modify-application/")&&(T="update");var C=Digit.Hooks.pt.usePropertyMDMS(_,"TradeLicense",["documentObj"]).isLoading,D=(window.location.href.includes("renew-application-details"),[]);return E&&E.map(function(e){D.push({documentType:e.code,code:e.code})}),n.useEffect(function(){var e;(e=c)&&null!=e&&e.FieldReports&&(null==e?void 0:e.FieldReports.length)>0&&(null==A?void 0:A.length)>0&&(e.FieldReports[m]=u({},e.FieldReports[m],{Documents:A})),e&&null!=e&&e.FieldReports&&(null==e?void 0:e.FieldReports.length)>0&&A.length>0&&f(e.FieldReports)},[A]),C?t.createElement(o.Loader,null):t.createElement("div",null,null==D?void 0:D.map(function(e,n){return t.createElement("div",null,t.createElement(Cl,{key:n,document:e,action:T,t:r,id:"obps-doc-"+n,error:b,setError:y,setDocuments:S,documents:A,formData:c,setFormError:s,clearFormErrors:v,config:d,formState:p,stateId:_}))}),b&&t.createElement(o.Toast,{label:b,onClose:function(){return y(null)},error:!0}))};function Cl(e){var l=e.t,i=e.document,a=e.setDocuments,r=e.documents,u=e.formData,d=e.setFormError,c=e.clearFormErrors,s=e.config,v=e.formState,p=e.stateId,m=void 0===p?{stateId:m}:p,f=null==r?void 0:r.filter(function(e){return null==e?void 0:e.documentType}),E=Digit.ULBService.getCurrentTenantId(),_=n.useState(""),g=_[0],A=_[1],S=n.useState(null)[1],h=n.useState(function(){return(null==f?void 0:f.fileStoreId)||null}),b=h[0],y=h[1],T=n.useState(!1)[0],C=n.useState([]),D=C[0],P=C[1],N=function(){var e,n,t=null===(e=v.errors)||void 0===e||null===(n=e[s.key])||void 0===n?void 0:n.type;Array.isArray(t)||(t=[]),t.includes(null==i?void 0:i.documentType)&&((t=t.filter(function(e){return e!=(null==i?void 0:i.documentType)})).length?d(s.key,{type:t}):c(s.key))};return n.useEffect(function(){var e,n,t;null==g||!g.documentType||0!=r.filter(function(e){return e.documentType===(null==g?void 0:g.documentType)}).length&&D.filter(function(e){var n;return(null==e||null===(n=e.file)||void 0===n?void 0:n.documentType)===(null==g?void 0:g.documentType)}).length===r.filter(function(e){return e.documentType===(null==g?void 0:g.documentType)}).length||a(function(e){if(0===(null==b?void 0:b.length)||null===b)return e;var n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b}),t=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==g?void 0:g.documentType)});if(null!=g&&g.id)return[].concat(n,[{documentType:null==g?void 0:g.documentType,fileStoreId:b,tenantId:E,id:null==g?void 0:g.id}]);var l=[];return D.map(function(e){var n,t;l.push({documentType:null==g?void 0:g.documentType,fileStoreId:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.tenantId})}),[].concat(t,l)}),T?T&&N():window.location.href.includes("renew-application-details")||(b&&null!=g&&g.documentType?b&&null!=g&&g.documentType&&N():(t=null===(e=v.errors)||void 0===e||null===(n=e[s.key])||void 0===n?void 0:n.type,Array.isArray(t)||(t=[]),t.includes(i.documentType)||(t.push(i.documentType),d(s.key,{type:t}))))},[b,g,T]),n.useEffect(function(){var e,n;if(i&&(null==u||null===(e=u.documents)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.length)>0)for(var t=0;t<(null==u||null===(l=u.documents)||void 0===l||null===(o=l.documents)||void 0===o?void 0:o.length);t++){var l,o,a,r,d,c,s,v,p,m,f,E,_,g;(null==i?void 0:i.documentType)===(null==u||null===(a=u.documents)||void 0===a||null===(r=a.documents)||void 0===r||null===(d=r[t])||void 0===d?void 0:d.documentType)&&(A({documentType:null==u||null===(c=u.documents)||void 0===c||null===(s=c.documents)||void 0===s||null===(v=s[t])||void 0===v?void 0:v.documentType,id:null==u||null===(p=u.documents)||void 0===p||null===(m=p.documents)||void 0===m||null===(f=m[t])||void 0===f?void 0:f.id}),y(null==u||null===(E=u.documents)||void 0===E||null===(_=E.documents)||void 0===_||null===(g=_[t])||void 0===g?void 0:g.fileStoreId))}},[i]),t.createElement("div",{style:{marginBottom:"24px"}},t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{className:"card-label-smaller",style:{width:"100%"}},"OLDLICENCENO"!=(null==i?void 0:i.documentType)?l(""+(null==i?void 0:i.documentType.replaceAll(".","_")))+"*":""+l(""+(null==i?void 0:i.documentType.replaceAll(".","_")))),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(o.MultiUploadWrapper,{module:"BPA",tenantId:m,getFormState:function(e){return function(e,n){var t=Object.fromEntries(e),l=Object.values(t);P(l),r&&l&&r.filter(function(e){return e.documentType===n}).length>l.length&&a(r.filter(function(e){return e.documentType!==n})),l&&l.map(function(e){e.file.documentType=n,function(e,n){var t;e&&A({documentType:n}),e&&S(e.file),e&&y(null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId)}(e,n)})}(e,null==i?void 0:i.documentType.replaceAll(".","_"))},t:l,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var Dl=function(){return{InspectionDate:"",InspectionTime:"",Checklist:[],Documents:[],key:Date.now()}},Pl=function(e){var l,i=e.unit,r=e.index,d=e.allFieldReport,c=e.removeUnit,s=e.setFieldReports,v=e.t,p=e.formData,m=e.config,f=e.onSelect,E=e.userType,_=e.setError,g=e.clearErrors,A=e.formState,S=e.isErrors,h=e.setIsErrors,b=e.questionList,y=e.documentList,T=a.useForm(),C=T.control,D=T.formState,P=T.trigger,N=T.getValues,I=(0,T.watch)(),L=D.errors,B=n.useMemo(function(){var e;return null==p||null===(e=p.ownershipCategory)||void 0===e?void 0:e.code.includes("INDIVIDUAL")},[null==p||null===(l=p.ownershipCategory)||void 0===l?void 0:l.code]);return n.useEffect(function(){P()},[]),n.useEffect(function(){var e=Object.keys(I),n={};e.forEach(function(e){return n[e]=i[e]});var t=B?{}:{ownerType:{code:"NONE"}},l=b?{questionLength:b.length}:{questionLength:0},o=b?{questionList:b}:{questionList:[]};yl.isEqual(I,n)||(Object.keys(I).map(function(e){"key"==e||null==I[e]||""==I[e]||null==I[e]||S||h(!0)}),s(function(e){return e.map(function(e){return e.key&&e.key===i.key?u({},e,I,t,l,o):u({},e)})}),P())},[I]),n.useEffect(function(){var e;Object.keys(L).length&&!yl.isEqual((null===(e=A.errors[m.key])||void 0===e?void 0:e.type)||{},L)?_(m.key,{type:L}):!Object.keys(L).length&&A.errors[m.key]&&S&&g(m.key)},[L]),window.location.href.includes("renew-application-details"),window.location.href.includes("edit-application-details"),t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:"16px",maxWidth:"950px"}},t.createElement("div",{className:"fieldInspectionWrapper"},(null==d?void 0:d.length)>1?t.createElement(o.LinkButton,{label:t.createElement(o.DeleteIcon,{style:{float:"right",position:"relative",bottom:"-6px"},fill:1!=d.length?"#494848":"#FAFAFA"}),style:{width:"100px",display:"inline",background:"black"},onClick:function(e){return c(i)}}):null,t.createElement(o.CardSectionHeader,null,(null==d?void 0:d.length)>1?v("BPA_FI_REPORT")+"-"+(r+1):""+v("BPA_FI_REPORT")),t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{style:{marginTop:"0px",width:"100%"},className:"card-label-smaller"},v("BPA_FI_DATE_LABEL")+" * "),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(a.Controller,{name:"InspectionDate",rules:{required:v("REQUIRED_FIELD")},control:C,render:function(e){return t.createElement(o.DatePicker,{date:e.value,name:"InspectionDate",onChange:e.onChange})}}))),t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{style:{marginTop:"0px",width:"100%"},className:"card-label-smaller"},v("ES_COMMON_TIME")+" * "),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(a.Controller,{name:"InspectionTime",rules:{required:v("REQUIRED_FIELD")},control:C,render:function(e){return t.createElement(o.TextInput,{name:"InspectionTime",type:"time",value:e.value,onChange:e.onChange})}}))),t.createElement(o.CardSectionHeader,null,v("BPA_CHECK_LIST_DETAILS")),b&&b.map(function(e,n){return t.createElement("div",{key:n,className:"fieldInsepctionInsideWrapper",style:{maxWidth:"100%"}},t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{style:{marginRight:"30px",width:"100%"},className:"card-label-smaller"},v(e.question)+"*"),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(a.Controller,{control:C,name:"question_"+n,rules:{required:v("REQUIRED_FIELD")},render:function(l){return t.createElement(o.Dropdown,{className:"form-field",style:{width:"100%",maxWidth:"100%"},selected:N("question"+n),disable:!1,option:(i=e.fieldType,a=[],i.split("/").map(function(e){a.push({i18nKey:"SCORE_"+e,code:e})}),a),select:function(e){var n;if((null==l||null===(n=l.value)||void 0===n?void 0:n.code)==(null==e?void 0:e.code))return!0;l.onChange(e)},optionKey:"i18nKey",onBlur:l.onBlur,t:v});var i,a}}))),t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{style:{marginRight:"30px",width:"100%"},className:"card-label-smaller"},v("BPA_ENTER_REMARKS")),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(a.Controller,{control:C,name:"Remarks_"+n,defaultValue:null==i?void 0:i.uomValue,render:function(e){return t.createElement(o.TextInput,{value:N("Remarks"+n),onChange:function(n){e.onChange(n)},onBlur:e.onBlur})}}))))}),t.createElement(o.CardSectionHeader,{style:{marginTop:"20px"}},v("BPA_FIELD_INSPECTION_DOCUMENTS")),t.createElement(Tl,{t:v,config:m,onSelect:f,userType:E,formData:p,setError:_,clearErrors:g,formState:A,index:r,setFieldReports:s,documentList:y}))))},Nl=function(e){return t.createElement("h1",{className:"heading-m"},e.label)},Il=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ll=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Il,null))},Bl=function(e){var l,i,a=e.t,r=e.action,d=e.tenantId,s=e.closeModal,v=e.submitAction,p=e.applicationData,m=e.businessService,f=e.moduleCode,E=Digit.Hooks.useEmployeeSearch(d,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(i=l.map)||void 0===i?void 0:i.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),_=E.data,g=E.isLoading,A=Digit.Hooks.pt.useMDMS(d,m,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),S=A.isLoading,h=A.data,b=n.useState({}),y=b[0],T=b[1],C=n.useState({})[0],D=n.useState([]),P=D[0],N=D[1],I=n.useState(null),L=I[0],B=I[1],O=n.useState(null),R=O[0],x=O[1],w=n.useState(null),M=w[0],k=w[1],F=n.useState(null)[1],U=n.useState([]),H=U[0],W=U[1],j=n.useState(null),z=j[0],Y=j[1];function K(e){x(e.target.files[0])}return n.useState(!1),n.useEffect(function(){var e;h&&h["egf-master"]&&W(null===(e=h["egf-master"])||void 0===e?void 0:e.FinancialYear)},[h]),n.useEffect(function(){var e;N(null==_||null===(e=_.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[_]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(R){var e=function(){if(R.size>=5242880)F(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",R,Digit.ULBService.getStateId())).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?k(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):F(a("CS_FILE_UPLOAD_ERROR"))})},function(){F(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[R]),n.useEffect(function(){r&&T(null!=r&&r.showFinancialYearsModal?function(e){var n=e.action,l=e.financialYears,i=e.selectedFinancialYear,a=e.setSelectedFinancialYear;return{label:{heading:"WF_"+n.action+"_APPLICATION",submit:"WF_PT.CREATE_"+n.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:(0,e.t)("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:t.createElement(o.RadioButtons,{options:l,optionsKey:"name",onSelect:a,selectedOption:i})}]}]}}({t:a,action:r,financialYears:H,selectedFinancialYear:z,setSelectedFinancialYear:Y}):function(e){var n,l=e.t,i=e.action,a=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,d=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile;return{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:t.createElement(o.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("ES_PT_ATTACH_FILE")+(i.docUploadRequired?" *":""),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:function(){s(null)},showHint:!0,hintText:l("PT_ATTACH_RESTRICTIONS_SIZE"),message:c?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}}({t:a,action:r,approvers:P,selectedApprover:L,setSelectedApprover:B,selectFile:K,uploadedFile:M,setUploadedFile:k,businessService:m}))},[r,P,H,z,M]),r&&y.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Nl,{label:a(y.label.heading)}),headerBarEnd:t.createElement(Ll,{onClick:s}),actionCancelLabel:a(y.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(y.label.submit),actionSaveOnSubmit:function(){},isDisabled:r.showFinancialYearsModal?!z:g||(null==r?void 0:r.docUploadRequired)&&!M,formId:"modal-action"},S?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:y.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if(null!=r&&r.showFinancialYearsModal)v({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Assessment:{financialYear:null==z?void 0:z.name,propertyId:null==p?void 0:p.propertyId,tenantId:d,source:null==p?void 0:p.source,channel:null==p?void 0:p.channel,assessmentDate:Date.now()}});else{var n={action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,businessService:m,moduleName:f};n.assignes=null!=r&&r.isTerminateState||!L?[]:[L],M&&(n.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==R?void 0:R.name,fileStoreId:M}]),v({Property:u({},p,{workflow:n})})}},defaultValues:C,formId:"modal-action"})):t.createElement(o.Loader,null)},Ol=function(e){return t.createElement("h1",{className:"heading-m"},e.label)},Rl=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},xl=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Rl,null))},wl=function(e){var l,i,a=e.t,r=e.action,d=e.tenantId,s=e.closeModal,v=e.submitAction,p=e.applicationData,m=e.businessService,f=Digit.Hooks.useEmployeeSearch(d,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(i=l.map)||void 0===i?void 0:i.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}).data,E=Digit.Hooks.pt.useMDMS(d,m,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),_=E.isLoading,g=E.data,A=n.useState({}),S=A[0],h=A[1],b=n.useState({})[0],y=n.useState([]),T=y[0],C=y[1],D=n.useState({}),P=D[0],N=D[1],I=n.useState(null),L=I[0],B=I[1],O=n.useState(null),R=O[0],x=O[1],w=n.useState(null)[1],M=n.useState([]),k=M[0],F=M[1],U=n.useState(null)[0];function H(e){B(e.target.files[0])}return n.useEffect(function(){var e;g&&g["egf-master"]&&F(null===(e=g["egf-master"])||void 0===e?void 0:e.FinancialYear)},[g]),n.useEffect(function(){var e;C(null==f||null===(e=f.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[f]),n.useEffect(function(){!function(){try{w(null);var e=function(){if(L){var e=function(){if(L.size>=5242880)w(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",L,Digit.ULBService.getStateId())).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?x(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):w(a("CS_FILE_UPLOAD_ERROR"))})},function(){w(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[L]),n.useEffect(function(){r&&h(function(e){var n=e.t,l=e.action,i=e.approvers,a=e.selectedApprover,r=e.setSelectedApprover,u=e.selectFile,d=e.uploadedFile,c=e.setUploadedFile,s=e.businessService,v=!0;return"SENDBACKTOCITIZEN"!=(null==l?void 0:l.action)&&"APPROVE"!=(null==l?void 0:l.action)||(v=!1),l.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:v?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?t.createElement(o.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){c(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}}({t:a,action:r,approvers:T,selectedApprover:P,setSelectedApprover:N,selectFile:H,uploadedFile:R,setUploadedFile:x,businessService:m}))},[r,T,k,U,R]),r&&S.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Ol,{label:a(S.label.heading)}),headerBarEnd:t.createElement(xl,{onClick:s}),actionCancelLabel:a(S.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(S.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},_?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:S.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){p=u({},p,{action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,wfDocuments:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:R}]:null}),v({Licenses:[p]})},defaultValues:b,formId:"modal-action"})):t.createElement(o.Loader,null)},Ml=function(e){return t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},kl=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Fl=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(kl,null))},Ul=function(e){var l,i,a=e.t,r=e.action,d=e.tenantId,s=e.closeModal,v=e.submitAction,p=e.applicationData,m=e.businessService,f=Digit.Hooks.useEmployeeSearch(d,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(i=l.map)||void 0===i?void 0:i.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),E=f.data,_=f.isLoading,g=n.useState({}),A=g[0],S=g[1],h=n.useState({})[0],b=n.useState([]),y=b[0],T=b[1],C=n.useState({}),D=C[0],P=C[1],N=n.useState(null),I=N[0],L=N[1],B=n.useState(null),O=B[0],R=B[1],x=n.useState(null),w=x[0],M=x[1],k=!!Digit.Utils.browser.isMobile();function F(e){L(e.target.files[0])}return n.useEffect(function(){var e;T(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[E]),n.useEffect(function(){!function(){try{M(null);var e=function(){if(I){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(I.size>=5242880)M(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=I&&I.type&&!e.test(null==I?void 0:I.type))M(a("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",I,Digit.ULBService.getStateId()||(null==d?void 0:d.split(".")[0]))).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):M(a("CS_FILE_UPLOAD_ERROR"))})},function(){M(a("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(function(){r&&S(function(e){var n=e.t,l=e.action,i=e.approvers,a=e.selectedApprover,r=e.setSelectedApprover,u=e.selectFile,d=e.uploadedFile,c=e.setUploadedFile,s=e.businessService,v=e.error,p=!0;return"SENDBACKTOCITIZEN"==(null==l?void 0:l.action)&&(p=!1),l.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==l?void 0:l.action)+"_APPLICATION",submit:"WF_"+(null==s?void 0:s.toUpperCase())+"_"+(null==l?void 0:l.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:p?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?t.createElement(o.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){c(null)},message:d?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:a,action:r,approvers:y,selectedApprover:D,setSelectedApprover:P,selectFile:F,uploadedFile:O,setUploadedFile:R,businessService:m,error:w}))},[r,y,O,w]),r&&A.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Ml,{label:a(A.label.heading)}),headerBarEnd:t.createElement(Fl,{onClick:s}),actionCancelLabel:a(A.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(A.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:k?{width:"720px"}:{},style:k?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:k?{paddingLeft:"5px"}:{}},_?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:A.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){p=u({},p,{action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=D&&D.uuid?[null==D?void 0:D.uuid]:null,wfDocuments:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:null}),v({Licenses:[p]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:h,formId:"modal-action"})):t.createElement(o.Loader,null)},Hl=function(e){return t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Wl=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},jl=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Wl,null))},zl=function(e){var l,i,a,d,s,v,p,m,f,E,_,g,A=e.t,S=e.action,h=e.tenantId,b=e.closeModal,y=e.submitAction,T=e.applicationDetails,C=e.applicationData,D=e.businessService,P=e.workflowDetails,N=(Digit.Hooks.obps.useObpsAPI(null!==(l=C)&&void 0!==l&&null!==(i=l.landInfo)&&void 0!==i&&null!==(a=i.address)&&void 0!==a&&a.city?null===(d=C)||void 0===d||null===(s=d.landInfo)||void 0===s||null===(v=s.address)||void 0===v?void 0:v.city:h,!1),Digit.Hooks.useEmployeeSearch(h,{roles:null==P||null===(p=P.data)||void 0===p||null===(m=p.initialActionState)||void 0===m||null===(f=m.nextActions)||void 0===f||null===(E=f.filter(function(e){return(null==e?void 0:e.action)==(null==S?void 0:S.action)}))||void 0===E||null===(_=E[0])||void 0===_||null===(g=_.assigneeRoles)||void 0===g?void 0:g.map(function(e){return{code:e}}),isActive:!0},{enabled:!(null!=S&&S.isTerminateState)})),I=N.data,L=N.isLoading,B=(r.useQueryClient(),n.useState({})),O=B[0],R=B[1],x=n.useState({})[0],w=n.useState([]),M=w[0],k=w[1],F=n.useState({}),U=F[0],H=F[1],W=n.useState(null),j=W[0],z=W[1],Y=n.useState(null),K=Y[0],G=Y[1],V=n.useState(null),X=V[0],q=V[1],J=n.useState(null)[0],Z=!!Digit.Utils.browser.isMobile();function Q(e){z(e.target.files[0])}n.useEffect(function(){var e;k(null==I||null===(e=I.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[I]),n.useEffect(function(){!function(){try{q(null);var e=function(){if(j){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(j.size>=5242880)q(A("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=j&&j.type&&!e.test(null==j?void 0:j.type))q(A("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",j,Digit.ULBService.getStateId()||(null==h?void 0:h.split(".")[0]))).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?G(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):q(A("CS_FILE_UPLOAD_ERROR"))})},function(){q(A("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[j]);var $=function(e){var n,t=[];for(n=0;n<(null==e?void 0:e.questionLength);n++){var l;t.push({remarks:e["Remarks_"+n],question:null==e?void 0:e.questionList[n].question,value:null==e||null===(l=e["question_"+n])||void 0===l?void 0:l.code})}return t},ee=function(e){var n,t,l,i,o=[],a=[];return(null==e||null===(n=e.additionalDetails)||void 0===n||null===(t=n.fieldinspection_pending)||void 0===t?void 0:t.length)>0&&(a=null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?((null===(i=o=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")))||void 0===i?void 0:i.length)>0&&o.map(function(e,n){var t,l;a.push({docs:(t=e.Documents,l=[],t&&t.map(function(e,n){l.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),l),date:e.InspectionDate,questions:$(e),time:null==e?void 0:e.InspectionTime})}),a=a.filter(function(e){return e.docs&&e.docs.length>0})):sessionStorage.removeItem("INSPECTION_DATA"),[].concat(a)};return n.useEffect(function(){S&&R(function(e){var n,l=e.t,i=e.action,a=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,d=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile,v=e.error,p=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"SKIP_PAYMENT"!=i.action&&"SEND_BACK_TO_CITIZEN"!=(null==i?void 0:i.action)&&"APPROVE"!=(null==i?void 0:i.action)||(p=!0);var m=!1;return"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(m=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:i.isTerminateState||p?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||p?null:t.createElement(o.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:m,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:function(){s(null)},message:c?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:A,action:S,approvers:M,selectedApprover:U,setSelectedApprover:H,selectFile:Q,uploadedFile:K,setUploadedFile:G,businessService:D,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:X}))},[S,M,J,K,X]),S&&O.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Hl,{label:A(O.label.heading)}),headerBarEnd:t.createElement(jl,{onClick:b}),actionCancelLabel:A(O.label.cancel),actionCancelOnSubmit:b,actionSaveLabel:A(O.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:Z?{width:"720px"}:{},style:Z?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:Z?{paddingLeft:"5px"}:{}},L?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:O.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var n,t,l,i,o,a;C=u({},C,{documents:(m=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),f=[],m.map(function(e){var n,t,l,i,o,a;(null==e||null===(n=e.uploadedDocuments)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.values)||void 0===l?void 0:l.length)>0&&(f=[].concat(f,null==e||null===(i=e.uploadedDocuments)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.values)),(null==e||null===(a=e.newUploadedDocs)||void 0===a?void 0:a.length)>0&&(f=[].concat(f,null==e?void 0:e.newUploadedDocs))}),f),additionalDetails:u({},null===(n=C)||void 0===n?void 0:n.additionalDetails,{fieldinspection_pending:ee(C),pendingapproval:(s=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),v=Digit.SessionStorage.get("OBPS_NEW_APPROVALS"),p=null==s?void 0:s.reduce(function(e,n){return null!=n&&n.checked?e.push(null==n?void 0:n.label)&&e:e},[]),null===(c=p)||void 0===c?void 0:c.concat(null!==v?v.filter(function(e){return""!==e.label}).map(function(e){return null==e?void 0:e.label}):[]))}),workflow:{action:null==S?void 0:S.action,comment:(null==e||null===(t=e.comments)||void 0===t?void 0:t.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,assignes:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,varificationDocuments:K?[{documentType:(null==S?void 0:S.action)+" DOC",fileName:null==j?void 0:j.name,fileStoreId:K}]:null},action:null==S?void 0:S.action,comment:null==e?void 0:e.comments,assignee:null!=U&&U.uuid?[null==U?void 0:U.uuid]:null,wfDocuments:K?[{documentType:(null==S?void 0:S.action)+" DOC",fileName:null==j?void 0:j.name,fileStoreId:K}]:null});var r=null==T||null===(i=T.nocData)||void 0===i?void 0:i.map(function(e){var n=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:u({},e,{documents:[].concat(null!=e&&e.documents?null==e?void 0:e.documents:[],n||[])})}}),d={sourceRefId:null==r||null===(o=r[0])||void 0===o||null===(a=o.Noc)||void 0===a?void 0:a.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(h,d)).then(function(e){var n,t=!0,l=!0;null==e||null===(n=e.Noc)||void 0===n||n.map(function(e){var n,i,o,a,r;"APPROVED"!==(null==e||null===(n=e.applicationStatus)||void 0===n?void 0:n.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"REJECTED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"VOIDED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())||1!=t&&1!=l||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?t=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(l=!1))});var i=[];r&&r.map(function(e){var n,o,a,r,u,d,c,s,v,p,m,f;("APPROVED"!=(null==e||null===(n=e.Noc)||void 0===n||null===(o=n.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(a=e.Noc)||void 0===a||null===(r=a.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(d=u.applicationStatus)||void 0===d?void 0:d.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(c=e.Noc)||void 0===c||null===(s=c.applicationStatus)||void 0===s?void 0:s.toUpperCase())&&"VOIDED"!=(null==e||null===(v=e.Noc)||void 0===v||null===(p=v.applicationStatus)||void 0===p?void 0:p.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(m=e.Noc)||void 0===m?void 0:m.nocType)&&t||"FIRE_NOC"===(null==e||null===(f=e.Noc)||void 0===f?void 0:f.nocType)&&l)&&i.push(e)}),y({BPA:C},(null==i?void 0:i.length)>0&&i,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}var c,s,v,p,m,f},defaultValues:x,formId:"modal-action"})):t.createElement(o.Loader,null)},Yl=function(e){return t.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Kl=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Gl=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(Kl,null))},Vl=function(e){var l,a,d=e.t,s=e.action,v=e.tenantId,p=e.closeModal,m=e.submitAction,f=e.applicationData,E=e.businessService,_=Digit.Hooks.useEmployeeSearch(v,{roles:null==s||null===(l=s.assigneeRoles)||void 0===l||null===(a=l.map)||void 0===a?void 0:a.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=s&&s.isTerminateState)}),g=_.data,A=_.isLoading,S=(r.useQueryClient(),n.useState({})),h=S[0],b=S[1],y=n.useState({})[0],T=n.useState([]),C=T[0],D=T[1],P=n.useState({}),N=P[0],I=P[1],L=n.useState(null),B=L[0],O=L[1],R=n.useState(null),x=R[0],w=R[1],M=n.useState(null),k=M[0],F=M[1],U=!!Digit.Utils.browser.isMobile();function H(e){O(e.target.files[0])}return i.useHistory(),n.useEffect(function(){var e;D(null==g||null===(e=g.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[g]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(B){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(B.size>=5242880)F(d("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=B&&B.type&&!e.test(null==B?void 0:B.type))F(d("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",B,Digit.ULBService.getStateId()||(null==v?void 0:v.split(".")[0]))).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?w(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):F(d("CS_FILE_UPLOAD_ERROR"))})},function(){F(d("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[B]),n.useEffect(function(){s&&b(function(e){var n,l=e.t,i=e.action,a=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,d=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile,v=e.error,p=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(p=!0);var m=!1;return"APPROVE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"AUTO_APPROVE"!=i.action&&"AUTO_REJECT"!=i.action||(m=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:i.isTerminateState||m?null:l(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||m?null:t.createElement(o.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:l("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:p,populators:{name:"comments"}},{label:""+l("WF_APPROVAL_UPLOAD_HEAD"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",onUpload:d,onDelete:function(){s(null)},showHint:!0,message:c?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}}({t:d,action:s,approvers:C,selectedApprover:N,setSelectedApprover:I,selectFile:H,uploadedFile:x,setUploadedFile:w,businessService:E,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:k}))},[s,C,x,k]),s&&h.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Yl,{label:d(h.label.heading)}),headerBarEnd:t.createElement(Gl,{onClick:p}),actionCancelLabel:d(h.label.cancel),actionCancelOnSubmit:p,actionSaveLabel:d(h.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:U?{width:"720px"}:{},style:U?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:U?{paddingLeft:"5px"}:{}},A?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:h.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n,t,l,i=JSON.parse(sessionStorage.getItem("NewNOCDocs")),o=(null===(n=f)||void 0===n||null===(t=n.documents)||void 0===t?void 0:t.length)>0?[].concat(null===(l=f)||void 0===l?void 0:l.documents):[];i.map(function(e,n){o.push(e)}),f=u({},f,{workflow:{action:null==s?void 0:s.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:null,documents:x?[{documentType:(null==s?void 0:s.action)+" DOC",fileName:null==B?void 0:B.name,fileStoreId:x}]:null},documents:o}),m({Noc:f},!1,{isNoc:!0})},defaultValues:y,formId:"modal-action"})):t.createElement(o.Loader,null)},Xl=function(e){return t.createElement("h1",{className:"heading-m"},e.label)},ql=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Jl=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(ql,null))},Zl=function(e,n){void 0===n&&(n="dayend");try{var t=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(t[1],t[2]-1,t[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===n&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(n){return e}},Ql=function(e){var l,i,a=e.t,r=e.action,d=e.tenantId,s=e.closeModal,v=e.submitAction,p=e.applicationData,m=e.businessService,f=Digit.Hooks.useEmployeeSearch(d,{roles:null==r||null===(l=r.assigneeRoles)||void 0===l||null===(i=l.map)||void 0===i?void 0:i.call(l,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),E=f.data,_=f.isLoading,g=n.useState({}),A=g[0],S=g[1],h=n.useState({})[0],b=n.useState([]),y=b[0],T=b[1],C=n.useState({}),D=C[0],P=C[1],N=n.useState(null),I=N[0],L=N[1],B=n.useState(null),O=B[0],R=B[1],x=n.useState(null),w=x[0],M=x[1],k=window.Digit.Utils.browser.isMobile(),F=window.location.href.includes("/employee");function U(e){L(e.target.files[0])}return n.useEffect(function(){var e;T(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(function(e){var n;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(n=e.user)||void 0===n?void 0:n.name}}))},[E]),n.useEffect(function(){!function(){try{M(null);var e=function(){if(I){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(I.size>=5242880)M(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=I&&I.type&&!e.test(null==I?void 0:I.type))M(a("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",I,Digit.ULBService.getCurrentTenantId())).then(function(e){var n,t,l,i;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):M(a("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),M(a("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(function(){var e,n,l,i;"DisconnectWSConnection"==(null===(e=p)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(l=p)||void 0===l||null===(i=l.processInstance)||void 0===i?void 0:i.businessService)?r&&S(function(e){var n,l=e.t,i=e.action,a=e.approvers,r=e.selectedApprover,d=e.setSelectedApprover,c=e.selectFile,s=e.uploadedFile,v=e.setUploadedFile,p=e.businessService,m=e.error,f=!0,E=!1;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==i?void 0:i.action)||"RESUBMIT_APPLICATION"==(null==i?void 0:i.action))&&(f=!1),i.isTerminateState&&(f=!1),"EXECUTE_DISCONNECTION"!=(null==i?void 0:i.action)&&"DISCONNECTION_EXECUTED"!=(null==i?void 0:i.action)||(E=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==p?void 0:p.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:f?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:f?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:f?t.createElement(o.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:d,selected:r}):null},E&&{label:l("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!E,type:"custom",populators:E?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:function(e,n){return t.createElement(o.DatePicker,u({onChange:e.onChange,date:e.value},n))}}:null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:c,onDelete:function(){v(null)},message:s?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:m,iserror:m,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:a,action:r,approvers:y,selectedApprover:D,setSelectedApprover:P,selectFile:U,uploadedFile:O,setUploadedFile:R,businessService:m,error:w})):r&&S(function(e){var n,l=e.t,i=e.action,a=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,d=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile,v=e.businessService,p=e.error,m=!0;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==i?void 0:i.action))&&(m=!1),i.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:m?l("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?l("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?t.createElement(o.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},{label:l("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:l("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:t.createElement(o.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:function(){s(null)},message:c?"1 "+l("ES_PT_ACTION_FILEUPLOADED"):l("CS_ACTION_NO_FILEUPLOADED"),error:p,iserror:p,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}}({t:a,action:r,approvers:y,selectedApprover:D,setSelectedApprover:P,selectFile:U,uploadedFile:O,setUploadedFile:R,businessService:m,error:w}))},[r,y,O,w]),r&&A.form?t.createElement(o.Modal,{headerBarMain:t.createElement(Xl,{label:a(A.label.heading)}),headerBarEnd:t.createElement(Jl,{onClick:s}),actionCancelLabel:a(A.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(A.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",style:k&&F?{width:"100%",height:"auto"}:{}},_?t.createElement(o.Loader,null):t.createElement(o.FormComposer,{config:A.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var n,t,l,i,o,a,c,s;if(null!==(n=p)&&void 0!==n&&n.isBillAmend){var m,f,E,_,g,A,S,h,b,y=u({},null===(m=p)||void 0===m||null===(f=m.billAmendmentDetails)||void 0===f?void 0:f.additionalDetails,{comments:null!=e&&e.comments?e.comments:null}),T=u({},null===(E=p)||void 0===E?void 0:E.billAmendmentDetails,{workflow:{businessId:null===(_=p)||void 0===_||null===(g=_.billAmendmentDetails)||void 0===g?void 0:g.amendmentId,action:null==r?void 0:r.action,tenantId:d,businessService:null!==(A=p)&&void 0!==A&&null!==(S=A.applicationType)&&void 0!==S&&S.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(h=p)&&void 0!==h&&null!==(b=h.applicationType)&&void 0!==b&&b.includes("WATER")?"WS":"SW",assignes:null!=D&&D.uuid?[{uuid:null==D?void 0:D.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:[]},additionalDetails:y,comment:(null==e?void 0:e.comments)||"",wfDocuments:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:null,processInstance:{action:null==r?void 0:r.action,assignes:null!=D&&D.uuid?[{uuid:null==D?void 0:D.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:[]}});v({AmendmentUpdate:T})}else{if(p=u({},p,{action:null==r?void 0:r.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=D&&D.uuid?[null==D?void 0:D.uuid]:[],assignes:null!=D&&D.uuid?[{uuid:null==D?void 0:D.uuid}]:[],wfDocuments:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:null,processInstance:u({},null===(t=p)||void 0===t?void 0:t.processInstance,{action:null==r?void 0:r.action,assignes:null!=D&&D.uuid?[{uuid:null==D?void 0:D.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:O?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:O}]:[]})}),null!=e&&e.date&&null!==(l=p)&&void 0!==l&&null!==(i=l.applicationType)&&void 0!==i&&i.includes("DISCONNECT")){var C=pn(null==e?void 0:e.date);p.disconnectionExecutionDate=Zl(C)}else if(null!=e&&e.date){var P=pn(null==e?void 0:e.date);p.connectionExecutionDate=Zl(P)}if("DisconnectWSConnection"==(null===(o=p)||void 0===o||null===(a=o.processInstance)||void 0===a?void 0:a.businessService)||"DisconnectSWConnection"==(null===(c=p)||void 0===c||null===(s=c.processInstance)||void 0===s?void 0:s.businessService)||window.location.href.includes("disconnection")){var N;"WATER"==(null===(N=p)||void 0===N?void 0:N.serviceType)?v({WaterConnection:p,disconnectRequest:!0}):v({SewerageConnection:p,disconnectRequest:!0})}else{var L,B,R,x,w,M,k,F,U,H,W,j,z,Y=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),K=Y?JSON.parse(Y):"";null!=K&&null!==(L=K.value)&&void 0!==L&&L.adhocPenalty&&(p.additionalDetails.adhocPenalty=parseInt(null==K||null===(B=K.value)||void 0===B?void 0:B.adhocPenalty)||""),null!=K&&null!==(R=K.value)&&void 0!==R&&R.adhocPenaltyComment&&(p.additionalDetails.adhocPenaltyComment=(null==K||null===(x=K.value)||void 0===x?void 0:x.adhocPenaltyComment)||""),null!=K&&null!==(w=K.value)&&void 0!==w&&w.adhocPenaltyReason&&(p.additionalDetails.adhocPenaltyReason=(null==K||null===(M=K.value)||void 0===M?void 0:M.adhocPenaltyReason)||""),null!=K&&null!==(k=K.value)&&void 0!==k&&k.adhocRebate&&(p.additionalDetails.adhocRebate=parseInt(null==K||null===(F=K.value)||void 0===F?void 0:F.adhocRebate)||""),null!=K&&null!==(U=K.value)&&void 0!==U&&U.adhocRebateComment&&(p.additionalDetails.adhocRebateComment=(null==K||null===(H=K.value)||void 0===H?void 0:H.adhocRebateComment)||""),null!=K&&null!==(W=K.value)&&void 0!==W&&W.adhocRebateReason&&(p.additionalDetails.adhocRebateReason=(null==K||null===(j=K.value)||void 0===j?void 0:j.adhocRebateReason)||""),"WATER"==(null===(z=p)||void 0===z?void 0:z.serviceType)?v({WaterConnection:p}):v({SewerageConnection:p})}}},defaultValues:h,formId:"modal-action"})):t.createElement(o.Loader,null)},$l=function(e){return null!=e&&e.businessService.includes("PT")?t.createElement(Bl,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?t.createElement(wl,e):null!=e&&e.moduleCode.includes("BPAREG")?t.createElement(Ul,e):null!=e&&e.moduleCode.includes("BPA")?t.createElement(zl,e):null!=e&&e.moduleCode.includes("NOC")?t.createElement(Vl,e):null!=e&&e.moduleCode.includes("WS")?t.createElement(Ql,e):void 0},ei=function(e){var l,i,o=e.t,a=e.formData,r=e.applicationData,u=e.docs,d=e.bpaActionsDetails,c=(null==r?void 0:r.status)||"",s=(null==d||null===(l=d.data)||void 0===l?void 0:l.nextActions)||[],v=Digit.ULBService.getStateId(),p=n.useState((null==a||null===(i=a.documents)||void 0===i?void 0:i.documents)||[]),m=p[0],f=p[1],E=n.useState(null),_=E[0],g=E[1],A=n.useState([]),S=A[0],h=A[1],b=n.useState(!0)[1],y=n.useState(!1),T=y[0],C=y[1],D=n.useState(!1),P=D[0],N=D[1],I=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"]),L=I.isLoading,B=I.data,O=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]),R=O.data;return n.useEffect(function(){var e,n,t,l,i,o,a=[];null!=B&&null!==(e=B.BPA)&&void 0!==e&&e.DocTypeMapping&&(a=null==B||null===(i=B.BPA)||void 0===i||null===(o=i.DocTypeMapping)||void 0===o?void 0:o.filter(function(e){var n,t;return e.WFState==(null==r?void 0:r.status)?null==r?void 0:r.status:e.RiskType==(null==r?void 0:r.riskType)&&e.ServiceType==(null==r||null===(n=r.additionalDetails)||void 0===n?void 0:n.serviceType)&&e.applicationType==(null==r||null===(t=r.additionalDetails)||void 0===t?void 0:t.applicationType)}));var d=[];null===(n=a)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.docTypes)||void 0===l||l.forEach(function(e){var n,t,l,i,o=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==R||null===(n=R["common-masters"])||void 0===n||null===(t=n.DocumentType)||void 0===t||t.forEach(function(n){var t=n.code.slice(0,o.length);o===t&&(e.hasDropdown=!0,n.i18nKey=n.code,e.dropdownData.push(n))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(i=l.values)||void 0===i||i.map(function(n){var t,l;o===(null==n||null===(t=n.documentType)||void 0===t?void 0:t.split(".")[0])+"."+(null==n||null===(l=n.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(n)}),d.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(d)),h(d)},[!L,!O.isLoading]),n.useEffect(function(){var e=0;S.map(function(n){var t=!1;m.map(function(e){n.required&&n.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(t=!0)}),!t&&n.required&&(e+=1)}),b("0"!=e&&0!=e||!(m.length>0))},[m,T]),n.useEffect(function(){N("DOC_VERIFICATION_INPROGRESS"===c&&(null==s?void 0:s.length)>0)},[r,d]),t.createElement("div",null,null==S?void 0:S.map(function(e,n){return t.createElement("div",null,t.createElement(ni,{key:n,index:n,document:e,t:o,error:_,setError:g,setDocuments:f,documents:m,setCheckRequiredFields:C,applicationStatus:c,actions:s,bpaTaxDocuments:S,checkEnablingDocs:P}))}))};function ni(e){var l,i,a=e.t,r=e.document,d=e.setDocuments,c=e.documents,s=e.index,v=e.bpaTaxDocuments,p=e.checkEnablingDocs,m=null==c?void 0:c.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==r?void 0:r.code)})[0],f=Digit.ULBService.getStateId(),E=n.useState(m?u({},m,{active:!0,code:null==m?void 0:m.documentType,i18nKey:null==m?void 0:m.documentType}):1===(null==r||null===(l=r.dropdownData)||void 0===l?void 0:l.length)?null==r?void 0:r.dropdownData[0]:{}),_=E[0],g=E[1],A=n.useState(null),S=A[0],h=A[1],b=n.useState(function(){return(null==m?void 0:m.fileStoreId)||null})[0],y=n.useState([]),T=y[0],C=y[1];return n.useEffect(function(){null!=_&&_.code&&d(function(e){var n,t=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==_?void 0:_.code)});if(0===(null==b?void 0:b.length)||null===b)return t;var l=null==t?void 0:t.filter(function(e){return(null==e?void 0:e.fileStoreId)!==b});return[].concat(l,[{documentType:null==_?void 0:_.code,fileStoreId:b,documentUid:b,fileName:(null==S?void 0:S.name)||"",id:c?null===(n=c.find(function(e){return e.documentType===(null==_?void 0:_.code)}))||void 0===n?void 0:n.id:void 0}])})},[b,_]),n.useEffect(function(){try{T.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),r.newUploadedDocs=[],T.map(function(e){var n,t,l;null!=_&&_.code&&r.newUploadedDocs.push({documentType:null==_?void 0:_.code,fileStoreId:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,documentUid:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),v[s]=r,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(v)))}catch(e){Promise.reject(e)}},[T,_]),n.useEffect(function(){},[S]),t.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},t.createElement(o.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+a(null==r?void 0:r.code)),(null==r||null===(i=r.uploadedDocuments)||void 0===i?void 0:i.length)&&t.createElement(Yt,{documents:null==r?void 0:r.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),p?t.createElement("div",{style:{marginTop:"20px"}},t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=r&&r.required?a(null==r?void 0:r.code)+"* ":""+a(null==r?void 0:r.code)),t.createElement(o.Dropdown,{className:"form-field",t:a,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:_,optionKey:"i18nKey",select:function(e){return g(e)},style:{width:"100%"}})),t.createElement(o.LabelFieldPair,{style:{width:"100%"}},t.createElement(o.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(o.MultiUploadWrapper,{module:"BPA",tenantId:f,getFormState:function(e){return function(e,n){var t,l=Object.fromEntries(n),i=Object.values(l);0!==Object.keys(l).length&&C(i),(t=i[i.length-1])&&h(t.file)}(0,e)},t:a,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function ti(e){var l=e.t,i=e.document,a=e.setNocDocuments,r=e.setError,u=e.nocDocuments,d=null==u?void 0:u.filter(function(e){var n;return null==e||null===(n=e.documentType)||void 0===n?void 0:n.includes(null==i?void 0:i.code)})[0],s=Digit.ULBService.getStateId(),v=(n.useState(),n.useState(null)),p=v[0],m=v[1],f=n.useState(function(){return(null==d?void 0:d.fileStoreId)||null}),E=f[0],_=f[1];return n.useEffect(function(){var e,n;null!=i&&null!==(e=i.dropdownData)&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&n.code&&a(function(e){var n,t=null==e?void 0:e.filter(function(e){var n,t;return(null==e?void 0:e.documentType)!==(null==i||null===(n=i.dropdownData)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.code)});if(0===(null==E?void 0:E.length)||null===E)return t;var l=null==t?void 0:t.filter(function(e){return(null==e?void 0:e.fileStoreId)!==E});return[].concat(l,[{documentType:null==i||null===(n=i.dropdownData)||void 0===n?void 0:n[0].code,fileStoreId:E,documentUid:E,fileName:(null==p?void 0:p.name)||""}])})},[E]),n.useEffect(function(){!function(){try{r(null);var e=function(){if(p){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,n=function(){if(p.size>=5242880)r(l("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var n=function(){if(null!=p&&p.type&&!e.test(null==p?void 0:p.type))r(l("NOT_SUPPORTED_FILE_TYPE"));else{var n=c(function(){return _(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",p,Digit.ULBService.getStateId())).then(function(e){var n,t,i,o;(null==e||null===(n=e.data)||void 0===n||null===(t=n.files)||void 0===t?void 0:t.length)>0?_(null==e||null===(i=e.data)||void 0===i||null===(o=i.files[0])||void 0===o?void 0:o.fileStoreId):r(l("CS_FILE_UPLOAD_ERROR"))})},function(){r(l("CS_FILE_UPLOAD_ERROR"))});if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[p]),t.createElement("div",{style:{}},t.createElement(o.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},t.createElement(o.CardLabel,{style:{width:"100%"}},null!=i&&i.required?l("TL_BUTTON_UPLOAD FILE")+"*":""+l("TL_BUTTON_UPLOAD FILE")),t.createElement("div",{className:"field",style:{width:"100%"}},t.createElement(o.MultiUploadWrapper,{module:"NOC",tenantId:s,getFormState:function(e){return function(e){var n,t=Object.fromEntries(e),l=Object.values(t);(n=l[l.length-1])&&m(n.file)}(e)},t:l,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var li=function(e){var l,i=e.t,a=e.noc,r=e.docs,u=e.isNoc,d=e.applicationData,c=e.NOCdata,s=e.bpaActionsDetails,v=(Digit.ULBService.getStateId(),Digit.ULBService.getStateId()),p=(null==d?void 0:d.status)||"",m=(null==s||null===(l=s.data)||void 0===l?void 0:l.nextActions)||[],f=Digit.Hooks.obps.useMDMS(v,"NOC",["DocumentTypeMapping"],{enabled:u}).data,E=Digit.Hooks.obps.useMDMS(v,"BPA",["DocTypeMapping"],{enabled:!u}).data,_=Digit.Hooks.obps.useMDMS(v,"common-masters",["DocumentType"]).data,g=n.useState([]),A=g[0],S=g[1],h=n.useState([]),b=h[0],y=h[1],T=n.useState(!1),C=T[0],D=T[1],P=Digit.Hooks.useSessionStorage(null==a?void 0:a.nocType,[]),N=P[0],I=P[1],L=n.useState(null),B=L[0],O=L[1],R=window.location.href.includes("/employee/");return n.useEffect(function(){var e;S(null==_||null===(e=_["common-masters"])||void 0===e?void 0:e.DocumentType)},[_]),n.useEffect(function(){var e,n,t,l,i,o,r,c,s=[];null!==(e=l=u?null==f||null===(i=f.NOC)||void 0===i||null===(o=i.DocumentTypeMapping)||void 0===o?void 0:o.filter(function(e){return(null==e?void 0:e.applicationType)===(null==a?void 0:a.applicationType)&&(null==e?void 0:e.nocType)===(null==a?void 0:a.nocType)}):null==E||null===(r=E.BPA)||void 0===r||null===(c=r.DocTypeMapping)||void 0===c?void 0:c.filter(function(e){var n,t;return e.WFState==(null==d?void 0:d.status)&&e.RiskType==(null==d?void 0:d.riskType)&&e.ServiceType==(null==d||null===(n=d.additionalDetails)||void 0===n?void 0:n.serviceType)&&e.applicationType==(null==d||null===(t=d.additionalDetails)||void 0===t?void 0:t.applicationType)}))&&void 0!==e&&null!==(n=e[0])&&void 0!==n&&null!==(t=n.docTypes)&&void 0!==t&&t[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==a?void 0:a.additionalDetails,applicationStatus:null==a?void 0:a.applicationStatus,appNumberLink:null==a?void 0:a.applicationNo,nocNo:null==a?void 0:a.nocNo},s.push(l[0].docTypes[0]));var v=[];s&&s.length>0&&(s.map(function(e){var n=e.documentType;e.dropdownData=[],null==A||A.forEach(function(t){var l=t.code.slice(0,null==n?void 0:n.length);n===l&&(e.hasDropdown=!0,e.dropdownData.push(t))}),v.push(e)}),y(v))},[f,A]),n.useEffect(function(){D("NOC_VERIFICATION_INPROGRESS"===p&&(null==m?void 0:m.length)>0)},[d,s]),t.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{label:R?""+i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"):i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),c&&c.map(function(e,n){if(null!=e&&e.value)return t.createElement(o.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:R?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:R?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),t.createElement(Yt,{documents:r,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),C&&(null==b?void 0:b.map(function(e,n){return t.createElement(ti,{key:n,document:e,t:i,error:B,setError:O,setNocDocuments:I,nocDocuments:N,checkEnablingDocs:C})})))},ii=function(e){var l=e.permissions,i=e.t,a=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==l?void 0:l.map(function(e){return{label:e,checked:!1}})),r=a[0],d=a[1],c=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]),s=c[0],v=c[1];n.useEffect(function(){return function(){Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")}},[]);var p=window.Digit.Utils.browser.isMobile();return t.createElement("div",null,t.createElement(o.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},i("BPA_PERMIT_CONDITIONS")),null==r?void 0:r.map(function(e,n){return t.createElement(o.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:p?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:function(e){return function(e,n,t){var l=e.target.checked;d(function(){return null==r?void 0:r.map(function(e,n){return t===n?u({},e,{checked:l}):e})})}(e,0,n)},isLabelFirst:!0,index:n})}),null==s?void 0:s.map(function(e,n){return t.createElement("div",null,t.createElement(o.TextInput,{key:n,value:null==e?void 0:e.label,onChange:function(e){return function(e,n){v(function(){return null==s?void 0:s.map(function(t,l){var i;return n===l?{label:null==e||null===(i=e.target)||void 0===i?void 0:i.value}:t})})}(e,n)},textInputStyle:{maxWidth:p?"96%":"830px",width:p?"96%":"830px"},style:p?{paddingRight:"10%"}:{},placeholder:i("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),t.createElement(o.LinkButton,{label:t.createElement("div",null,t.createElement("span",null,t.createElement(o.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:p?"5%":"35%"}}))),style:{},onClick:function(e){return function(e){var n=[].concat(s);n.splice(e,1),v([].concat(n))}(n)}}))}),t.createElement(o.LinkButton,{style:{color:"#a82227",maxWidth:p?"fit-content":"10%",marginRight:"3%"},label:i("BPA_ADD_MORE"),onClick:function(){v([].concat(s,[{label:""}]))}}))};function oi(e){var n=e.taxHeadEstimatesCalculation,i=n.taxHeadEstimates,a=l.useTranslation().t;return t.createElement("div",{style:{marginTop:"40px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{label:a("ES_PT_TITLE_TAX_HEADS"),text:a("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),t.createElement(o.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==i?void 0:i.map(function(e,n){return t.createElement(o.Row,{key:a(e.taxHeadCode),label:a(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==i?void 0:i.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})}),t.createElement(o.BreakLine,{style:{margin:"16px 0",width:"40%"}}),t.createElement(o.Row,{label:a("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function ai(e){var n=e.floors,i=l.useTranslation().t;return t.createElement(t.Fragment,null,n.map(function(e){var n;return t.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px"}},t.createElement(o.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},i(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e,n){var l;return t.createElement(t.Fragment,{key:n},t.createElement(o.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},i(e.title)),t.createElement(o.StatusTable,{style:{position:"relative",padding:"8px"}},t.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return t.createElement(o.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:t.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function ri(e){var n=e.owners,i=l.useTranslation().t,a=(null==n?void 0:n.length)||1,r={marginTop:"19px"},d={position:"relative",padding:"8px"},c={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(a)>1?r={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(a)>1||(r={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},d={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(r=u({},r,{maxWidth:"950px"}),r=u({},r,{maxWidth:"950px"}),c={}),t.createElement(t.Fragment,null,n.map(function(e,n){var l;return t.createElement("div",{key:i(null==e?void 0:e.title),style:r},t.createElement(o.CardSubHeader,{style:Number(a)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(a)>1?i(null==e?void 0:e.title)+" "+(n+1):i(null==e?void 0:e.title)),t.createElement(t.Fragment,{key:n},t.createElement(o.StatusTable,{style:d},t.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return!0===e.map&&"N/A"!==e.value?t.createElement(o.Row,{key:i(e.title),label:i(e.title),text:t.createElement("img",{src:i(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):t.createElement("span",null,t.createElement(o.Row,{key:i(e.title),label:""+i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:c}))}))))}))}var ui=function(e){var n=e.otherComment;return t.createElement("div",{className:"checkpoint-comments-wrap"},t.createElement("h4",null,e.headComment),t.createElement("p",null,n))},di=function(e){var n,i,a,r=e.data,u=e.OpenImage,d=e.privacy,c=void 0===d?{}:d,s=l.useTranslation().t;return t.createElement("div",null,r.date&&t.createElement("p",null,r.date),t.createElement("p",null,r.name),r.mobileNumber&&t.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},t.createElement(o.TelePhone,{mobile:r.mobileNumber,privacy:c}),t.createElement("p",null,"    ")),r.source&&t.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&t.createElement(ui,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?t.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(function(e){return t.createElement("div",{className:"TLComments"},t.createElement("h3",null,s("WF_COMMON_COMMENTS")),t.createElement("p",null,e))})):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?t.createElement("div",{className:"TLComments"},t.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),t.createElement(o.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:function(e,n){u(e,n,null==r?void 0:r.thumbnailsToShow)}})):null)};function ci(e){var n=e.units,i=l.useTranslation().t;return t.createElement(t.Fragment,null,n.map(function(e,n){var l;return t.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},t.createElement(o.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),t.createElement(t.Fragment,{key:n},t.createElement(o.StatusTable,{style:{position:"relative",marginTop:"19px"}},t.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return t.createElement(o.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:t.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"N/A",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function si(e){var n=e.units,i=l.useTranslation().t;return t.createElement(t.Fragment,null,n.map(function(e,n){var l;return t.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},t.createElement(o.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),t.createElement(t.Fragment,{key:n},t.createElement(o.StatusTable,{style:{position:"relative",marginTop:"19px"}},t.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(l=e.values)||void 0===l?void 0:l.map(function(e,n){var l;return t.createElement(o.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:t.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"NA",last:n===(null==e||null===(l=e.values)||void 0===l?void 0:l.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}var vi=function(e){var i,a,r,u,d,c=e.wsAdditionalDetails,s=l.useTranslation().t,v=(d=location.search)?(/^[?#]/.test(d)?d.slice(1):d).split("&").reduce(function(e,n){var t=n.split("="),l=t[1];return e[t[0]]=l?decodeURIComponent(l.replace(/\+/g," ")):"",e},{}):{},p=null==v?void 0:v.mode,m=(null==c?void 0:c.additionalDetails)||{connectionDetails:[],plumberDetails:[]},f=m.connectionDetails,E=m.plumberDetails,_=m.roadCuttingDetails,g=m.activationDetails;return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==c||null===(i=c.additionalDetails)||void 0===i?void 0:i.connectionDetails)&&t.createElement(o.StatusTable,null,t.createElement(o.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_CONNECTION_DETAIL")),t.createElement("div",null,t.createElement("div",{className:"connection-details-new-value-wrapper"},null==f?void 0:f.map(function(e,n){return t.createElement("div",null,t.createElement(o.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""}))})))),(null==c||null===(a=c.additionalDetails)||void 0===a?void 0:a.plumberDetails)&&"MODIFY"!=p&&t.createElement(o.StatusTable,null,t.createElement(o.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_COMMON_PLUMBER_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map(function(e,n){return t.createElement(o.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy})})))),(null==c||null===(r=c.additionalDetails)||void 0===r?void 0:r.roadCuttingDetails)&&"MODIFY"!=p&&t.createElement(o.StatusTable,null,t.createElement(o.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ROAD_CUTTING_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map(function(e){var n;return t.createElement("div",{style:(null==_?void 0:_.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e){return t.createElement(o.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))})))),(null==c||null===(u=c.additionalDetails)||void 0===u?void 0:u.activationDetails)&&t.createElement(o.StatusTable,null,t.createElement(o.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},s("WS_ACTIVATION_DETAILS")),t.createElement("div",null,t.createElement("div",{className:"plumber-details-new-value-wrapper"},null==g?void 0:g.map(function(e,n){return t.createElement(o.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})}))))))},pi=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],mi=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],fi=function(e){var i,a,r,d,c=e.wsAdditionalDetails,s=l.useTranslation().t,v=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),p=v[0],m=v[1],f=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{})[1],E=!(null==c||null===(i=c.additionalDetails)||void 0===i||!i.isPaid),g=n.useState(!1),A=g[0],S=g[1],h=n.useState(p||{}),b=h[0],y=h[1],T=n.useState(null),C=T[0],D=T[1],P=n.useState(c.additionalDetails.data?c.additionalDetails.data:{}),N=P[0],I=P[1],L=n.useState(c.additionalDetails.values?c.additionalDetails.values:[]),B=L[0],O=L[1],R=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(R,"BillingService",["TaxHeadMaster"]),n.useEffect(function(){var e,n,l,i=u({},null==c||null===(e=c.additionalDetails)||void 0===e||null===(n=e.appDetails)||void 0===n?void 0:n.additionalDetails);if((null==p||null===(l=p.billDetails)||void 0===l?void 0:l.length)>0){var o,a,r,d,s,v,f,E=[{title:"WS_APPLICATION_FEE_HEADER",value:t.createElement("span",null,"₹",null==p||null===(o=p.billDetails)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.fee)},{title:"WS_SERVICE_FEE_HEADER",value:t.createElement("span",null,"₹",null==p||null===(r=p.billDetails)||void 0===r||null===(d=r[0])||void 0===d?void 0:d.charge)},{title:"WS_TAX_HEADER",value:t.createElement("span",null,"₹",null==p||null===(s=p.billDetails)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount)}];O(E),I(null==p||null===(f=p.billDetails)||void 0===f?void 0:f[0])}else m(i),y(i)},[]);var x=function(e){return t.createElement("h1",{className:"heading-m"},e.label)},w=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},M=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(w,null))},k=function(e,n,t){void 0===n&&(n=!1);var l=u({},b);if("adhocPenalty"!=e&&"adhocRebate"!=e||!t.target.value)n?(l[e+"_data"]=t,l[e]=t.title,"PT_OTHERS"==t.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==t.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=t.target.value;else{var i,o,a=0==(null==t||null===(i=t.target)||void 0===i?void 0:i.value)?1:Math.sign(null==t||null===(o=t.target)||void 0===o?void 0:o.value)||-1;l[e]=1==a?t.target.value:""}y(l)};return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},B&&t.createElement(o.StatusTable,null,t.createElement("div",null,null==B?void 0:B.map(function(e,n){return t.createElement(o.Row,{className:"border-none",key:""+e.title,label:""+s(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),t.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),t.createElement("div",null,t.createElement(o.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+s("WS_COMMON_TOTAL_AMT"),text:t.createElement("span",null,"₹",(null==N?void 0:N.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),t.createElement(o.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+s("CS_INBOX_STATUS_FILTER"),text:s(E?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:E?{color:"#00703C"}:{color:"#D4351C"}}))),null!=c&&null!==(a=c.additionalDetails)&&void 0!==a&&a.isAdhocRebate?t.createElement("div",{onClick:function(e){S(!0)}},t.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},s("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,A&&t.createElement(o.Modal,{headerBarMain:t.createElement(x,{label:s("PT_ADD_REBATE_PENALITY")}),headerBarEnd:t.createElement(M,{onClick:function(){y(p),S(!1)}}),actionCancelLabel:s("PT_CANCEL"),actionCancelOnSubmit:function(){y(p),S(!1)},actionSaveLabel:s("PT_ADD"),actionSaveOnSubmit:function(e){return function(e){var n,t,l=null!=b&&b.adhocPenalty?Number(null==b?void 0:b.adhocPenalty):0,i=null!=b&&b.adhocRebate?Number(null==b?void 0:b.adhocRebate):0;if(l||i)if(i>(null==c||null===(n=c.additionalDetails)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.totalAmount))D({isError:!1,isWarning:!0,key:"error",message:s("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var o,a,r,d,v,p,E,g,A,h,y=null==c||null===(o=c.additionalDetails)||void 0===o||null===(a=o.appDetails)||void 0===a?void 0:a.applicationNo,T=null==c||null===(r=c.additionalDetails)||void 0===r||null===(d=r.appDetails)||void 0===d?void 0:d.tenantId,C=u({},null==c||null===(v=c.additionalDetails)||void 0===v||null===(p=v.appDetails)||void 0===p?void 0:p.additionalDetails,b);c.additionalDetails.appDetails.additionalDetails=C;var P={CalculationCriteria:"WATER"==(null==c||null===(E=c.additionalDetails)||void 0===E||null===(g=E.appDetails)||void 0===g?void 0:g.service)?[{applicationNo:y,tenantId:T,waterConnection:c.additionalDetails.appDetails}]:[{applicationNo:y,tenantId:T,sewerageConnection:c.additionalDetails.appDetails}],isconnectionCalculation:!1},N="WATER"==(null==c||null===(A=c.additionalDetails)||void 0===A||null===(h=A.appDetails)||void 0===h?void 0:h.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(P,N).then(function(e,n){var t,l,i,o,a,r,u,d,c,s,v,p,E,g,A;(null==e||null===(t=e.Calculation)||void 0===t||null===(l=t[0])||void 0===l||null===(i=l.taxHeadEstimates)||void 0===i?void 0:i.length)>0&&(null==e||null===(E=e.Calculation)||void 0===E||null===(g=E[0])||void 0===g||null===(A=g.taxHeadEstimates)||void 0===A||A.forEach(function(e){return e.amount=e.estimateAmount})),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(o=e.Calculation)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.taxHeadEstimates,"category");var h=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(r=e.Calculation)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(d=e.Calculation)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.charge},{title:"WS_TAX_HEADER",value:null===(s=e.Calculation)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.taxAmount}];f(pn(e.Calculation[0])),I(null==e||null===(p=e.Calculation)||void 0===p?void 0:p[0]),O(h),b.billDetails=null==e?void 0:e.Calculation,m(b),S(!1)}).catch(function(e){var n,t,l,i,o,a;D({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&null!==(l=t.Errors[0])&&void 0!==l&&l.message?s(""+(null==e||null===(i=e.response)||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.Errors[0])||void 0===a?void 0:a.code)):s("PT_COMMON_ADD_REBATE_PENALITY")})})}else D({isError:!1,isWarning:!0,key:"warning",message:s("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})}()},hideSubmit:!1,popupStyles:{overflowY:"auto"}},t.createElement("div",null,t.createElement(o.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},t.createElement(o.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_PENALTY")),t.createElement(o.CardLabel,null,s("PT_TX_HEADS")),t.createElement("div",{className:"field"},t.createElement(o.Dropdown,{isMandatory:!0,option:pi,optionKey:"title",select:function(e){return k("adhocPenaltyReason",!0,e)},selected:(null==b?void 0:b.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:s})),"PT_OTHERS"===(null==b||null===(r=b.adhocPenaltyReason_data)||void 0===r?void 0:r.title)&&t.createElement("div",{className:"field"},t.createElement(o.CardLabel,null,s("PT_REASON")),t.createElement("div",{className:"field"},t.createElement(o.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==b?void 0:b.adhocPenaltyComment)||"",onChange:function(e){return k("adhocPenaltyComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")})))),t.createElement(o.CardLabel,null,s("PT_HEAD_AMT")),t.createElement("div",{className:"field"},t.createElement(o.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==b?void 0:b.adhocPenalty)||"",onChange:function(e){return k("adhocPenalty",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))),t.createElement(o.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},t.createElement(o.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},s("PT_AD_REBATE")),t.createElement(o.CardLabel,null,s("PT_TX_HEADS")),t.createElement("div",{className:"field"},t.createElement(o.Dropdown,{isMandatory:!0,option:mi,optionKey:"title",select:function(e){return k("adhocRebateReason",!0,e)},selected:(null==b?void 0:b.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:s})),"PT_OTHERS"===(null==b||null===(d=b.adhocRebateReason_data)||void 0===d?void 0:d.title)&&t.createElement("div",{className:"field"},t.createElement(o.CardLabel,null,s("PT_REASON")),t.createElement(o.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==b?void 0:b.adhocRebateComment)||"",onChange:function(e){return k("adhocRebateComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:s("TL_NAME_ERROR_MESSAGE")}))),t.createElement(o.CardLabel,null,s("PT_HEAD_AMT")),t.createElement("div",{className:"field"},t.createElement(o.TextInput,u({style:{background:"#FAFAFA"},t:s,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==b?void 0:b.adhocRebate)||"",onChange:function(e){return k("adhocRebate",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:s("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),C&&t.createElement(o.Toast,{style:{zIndex:"10000"},warning:null==C?void 0:C.isWarning,error:null==C||!C.isWarning,label:s(null==C?void 0:C.message),onClose:function(){D(!1)},isDleteBtn:!0})))},Ei=function(e){return t.createElement("span",null,t.createElement("svg",{style:u({},e.style),display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#F47738"})))},_i=function(e){var n=e.t,l=e.userType,i=void 0!==l&&l,a=e.infoBannerLabel,r=void 0===a?"":a,u=e.infoClickLable,d=void 0===u?"":u,c=e.infoClickInfoLabel,s=void 0===c?"":c,v=e.infoClickInfoLabel1,p=void 0===v?"":v;i=i||Digit.SessionStorage.get("userType");var m=window.Digit.Utils.browser.isMobile();return t.createElement(t.Fragment,null,t.createElement("div",{style:m?{}:{width:"80%"}},t.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},t.createElement("div",null,t.createElement(o.InfoBannerIcon,null),t.createElement("h2",{style:{color:"#3498DB"}},n(r))),n(d)+" ",t.createElement(Ei,{style:{display:"inline",marginBottom:"5px"}})," "+n(s),t.createElement("div",null," "+n(p)))))},gi=function(e){var i,a,r,u,d,c,s,v=e.wsAdditionalDetails,p=l.useTranslation().t,m=n.useState(!1),f=m[0],E=m[1],_=n.useState({}),g=_[0],A=_[1],S=function(e){return t.createElement("h1",{className:"heading-m"},e.label)},h=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},b=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(h,null))};return t.createElement(n.Fragment,null,t.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=v&&null!==(i=v.additionalDetails)&&void 0!==i&&i.isViewBreakup?t.createElement("div",{onClick:function(e){return t=v.additionalDetails.data||{},null!=(i=(l=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"))?JSON.parse(l):{})&&null!==(n=i.value)&&void 0!==n&&n.totalAmount&&(t=null==i?void 0:i.value),A(t),void E(!0);var n,t,l,i},style:{marginTop:"12px"}},t.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},p("WS_PAYMENT_VIEW_BREAKUP"))):null,f&&t.createElement(o.Modal,{headerBarMain:t.createElement(S,{label:p("WS_CALCULATION_BREAKUP")}),headerBarEnd:t.createElement(b,{onClick:function(){E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},t.createElement(o.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},t.createElement(o.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_APPLICATION_FEE_HEADER")),null==g||null===(a=g.billSlabData)||void 0===a||null===(r=a.FEE)||void 0===r?void 0:r.map(function(e){return t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==g?void 0:g.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),t.createElement(o.CardSectionHeader,{style:{margin:"10px 0px"}},p("WS_SERVICE_FEE_HEADER")),null==g||null===(u=g.billSlabData)||void 0===u||null===(d=u.CHARGES)||void 0===d?void 0:d.map(function(e){return t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==g?void 0:g.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==g||null===(c=g.billSlabData)||void 0===c||null===(s=c.TAX)||void 0===s?void 0:s.map(function(e){return t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+p(""+(null==e?void 0:e.taxHeadCode)),text:t.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),t.createElement(o.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+p("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:t.createElement("span",null,"₹",Number(null==g?void 0:g.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))};function Ai(e){var a,r,u,d,c,s,v,p,m,f,E,g=e.applicationDetails,A=e.workflowDetails,S=e.isDataLoading,h=e.applicationData,b=e.timelineStatusPrefix,y=e.showTimeLine,T=void 0===y||y,C=e.statusAttribute,D=void 0===C?"status":C,P=e.paymentsList,N=e.oldValue,I=e.isInfoLabel,L=void 0!==I&&I,B=l.useTranslation().t;function O(e,n,t){var l;window.open(null==t||null===(l=t.fullImage)||void 0===l?void 0:l[0],"_blank")}var R=function(e){if(null==e||null==e||""==e)return"NA";var n=new Date(e),t=n.getMonth()+1,l=n.getDate();return(l=(l>9?"":"0")+l)+"/"+(t=(t>9?"":"0")+t)+"/"+n.getFullYear()},x=function(e,n){if(void 0===n&&(n=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var l,i={date:R(null==h||null===(l=h.auditDetails)||void 0===l?void 0:l.createdTime),source:(null==h?void 0:h.channel)||""};return t.createElement(di,{data:i})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var o,a,r,u,d,c,s,v,p,m,f,E,A,S,b,y,T,C,D={uuid:null==e||null===(o=e.assignes)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==g?void 0:g.tenantId,businessIds:null==g?void 0:g.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:function(e){return"+91 "+_.get(e,"ProcessInstances["+n+"].assignes[0].mobileNumber")}}},P={date:null==e||null===(r=e.auditDetails)||void 0===r?void 0:r.lastModified,name:null==e||null===(u=e.assignes)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.name,mobileNumber:(null==h||null===(c=h.processInstance)||void 0===c||null===(s=c.assignes)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.uuid)===(null==e||null===(p=e.assignes)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.uuid)&&null!=h&&null!==(f=h.processInstance)&&void 0!==f&&null!==(E=f.assignes)&&void 0!==E&&null!==(A=E[0])&&void 0!==A&&A.mobileNumber?null==h||null===(S=h.processInstance)||void 0===S||null===(b=S.assignes)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.mobileNumber:null==e||null===(T=e.assignes)||void 0===T||null===(C=T[0])||void 0===C?void 0:C.mobileNumber,comment:B(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return t.createElement(di,{data:P,OpenImage:O,privacy:D})}var N,I,L,x,w,M={date:R(null==h||null===(N=h.auditDetails)||void 0===N?void 0:N.lastModifiedTime),name:null==e||null===(I=e.assignes)||void 0===I||null===(L=I[0])||void 0===L?void 0:L.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(x=e.assignes)||void 0===x||null===(w=x[0])||void 0===w?void 0:w.mobileNumber};return t.createElement(di,{data:M})},w=function(e,n){return e?n?e:B(e):B("NA")},M=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),k=window.location.href.includes("employee/noc"),F=window.location.href.includes("employee/obps"),U=(window.location.href.includes("employee/ws"),function(){return window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||M?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}}),H=function(e){return null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?w(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+B(null==e?void 0:e.isUnit):B("N/A"):null!=e&&e.value?w(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):B("N/A")};return t.createElement(o.Card,{style:{position:"relative"},className:"employeeCard-override"},L?t.createElement(_i,{t:B,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==g||null===(a=g.applicationDetails)||void 0===a?void 0:a.map(function(e,l){var a,r,u,d,c,s,v,p,m,f,E,_,S,h,b,y,T,C,D,I,L,O,R,x,w,W,j,z,Y,K,G,V,X,q,J,Z,Q,$,ee;return t.createElement(t.Fragment,{key:l},t.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:M?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==l||e.asSectionHeader?t.createElement(t.Fragment,null,t.createElement(o.CardSectionHeader,{style:0==l&&M?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},k?""+B(e.title):B(e.title),null!=e&&e.Component?t.createElement(e.Component,null):null)):t.createElement(o.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},B(e.title)),(null==e?void 0:e.isTable)&&t.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},t.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(function(e){return t.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},B(e))})),null==e?void 0:e.tableRows.map(function(l,i){return i===(null==e?void 0:e.tableRows.length)-1?t.createElement(n.Fragment,null,t.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),t.createElement("tr",null,l.map(function(e){return t.createElement("td",{style:{textAlign:"left"}},B(e))}))):t.createElement("tr",null,l.map(function(e){return t.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},B(e))}))})),t.createElement(o.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||M?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(n,l){var a,r;return!0===n.map&&"N/A"!==n.value?t.createElement(o.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:B(n.title),label:B(n.title),text:t.createElement("img",{src:B(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?t.createElement(o.Row,{key:B(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?t.createElement("div",{style:{width:"200%"}},t.createElement(i.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#a82227"}},B(null==n?void 0:n.title)))):k||F?""+B(n.title):B(n.title),text:t.createElement("div",null,t.createElement(i.Link,{to:null==n?void 0:n.to},t.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:l===(null==e||null===(r=e.values)||void 0===r?void 0:r.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):t.createElement("div",null,window.location.href.includes("modify")?t.createElement(o.Row,{className:"border-none",key:""+n.title,label:""+B(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):t.createElement(o.Row,{key:B(n.title),label:B(n.title),text:H(n),last:l===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}))})))),(null==e?void 0:e.belowComponent)&&t.createElement(e.belowComponent,null),(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.inspectionReport)&&t.createElement(sl,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:P}),(null==g||null===(u=g.applicationData)||void 0===u||null===(d=u.additionalDetails)||void 0===d||null===(c=d.fieldinspection_pending)||void 0===c?void 0:c.length)>0&&(null==e||null===(s=e.additionalDetails)||void 0===s?void 0:s.fiReport)&&t.createElement(cl,{fiReport:null==g||null===(v=g.applicationData)||void 0===v||null===(p=v.additionalDetails)||void 0===p?void 0:p.fieldinspection_pending}),(null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.floors)&&t.createElement(ai,{floors:null==e||null===(f=e.additionalDetails)||void 0===f?void 0:f.floors}),(null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.owners)&&t.createElement(ri,{owners:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners}),(null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.units)&&t.createElement(si,{units:null==e||null===(h=e.additionalDetails)||void 0===h?void 0:h.units}),(null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.accessories)&&t.createElement(ci,{units:null==e||null===(y=e.additionalDetails)||void 0===y?void 0:y.accessories}),(null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.permissions)&&(null==A||null===(C=A.data)||void 0===C||null===(D=C.nextActions)||void 0===D?void 0:D.length)>0&&t.createElement(ii,{applicationData:null==g?void 0:g.applicationData,t:B,permissions:null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.permissions}),(null==e||null===(L=e.additionalDetails)||void 0===L?void 0:L.obpsDocuments)&&t.createElement(ei,{t:B,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:A}),(null==e||null===(O=e.additionalDetails)||void 0===O?void 0:O.noc)&&t.createElement(li,{t:B,isNoc:!0,NOCdata:e.values,applicationData:null==g?void 0:g.applicationData,docs:e.additionalDetails.noc,noc:null===(R=e.additionalDetails)||void 0===R?void 0:R.data,bpaActionsDetails:A}),(null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.scruntinyDetails)&&t.createElement(sl,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(w=e.additionalDetails)||void 0===w?void 0:w.buildingExtractionDetails)&&t.createElement(sl,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.subOccupancyTableDetails)&&t.createElement(dl,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==g?void 0:g.applicationData}),(null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.documentsWithUrl)&&t.createElement(Yt,{documents:null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.documentsWithUrl}),(null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.documents)&&t.createElement(Gt,{documents:null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.documents}),(null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.taxHeadEstimatesCalculation)&&t.createElement(oi,{taxHeadEstimatesCalculation:null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&t.createElement(vi,{wsAdditionalDetails:e,oldValue:N}),(null==e||null===(X=e.additionalDetails)||void 0===X?void 0:X.redirectUrl)&&t.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},t.createElement(i.Link,{to:null==e||null===(q=e.additionalDetails)||void 0===q||null===(J=q.redirectUrl)||void 0===J?void 0:J.url},t.createElement("span",{className:"link",style:{color:"#F47738"}},null==e||null===(Z=e.additionalDetails)||void 0===Z||null===(Q=Z.redirectUrl)||void 0===Q?void 0:Q.title))),(null==e||null===($=e.additionalDetails)||void 0===$?void 0:$.estimationDetails)&&t.createElement(fi,{wsAdditionalDetails:e,workflowDetails:A}),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&t.createElement(gi,{wsAdditionalDetails:e,workflowDetails:A}))}),T&&(null==A||null===(r=A.data)||void 0===r||null===(u=r.timeline)||void 0===u?void 0:u.length)>0&&t.createElement(t.Fragment,null,t.createElement(o.BreakLine,null),((null==A?void 0:A.isLoading)||S)&&t.createElement(o.Loader,null),!(null!=A&&A.isLoading)&&!S&&t.createElement(n.Fragment,null,t.createElement(o.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},B("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=A&&null!==(d=A.data)&&void 0!==d&&d.timeline&&1===(null==A||null===(c=A.data)||void 0===c||null===(s=c.timeline)||void 0===s?void 0:s.length)?t.createElement(o.CheckPoint,{isCompleted:!0,label:B(""+b+(null==A||null===(v=A.data)||void 0===v||null===(p=v.timeline[0])||void 0===p?void 0:p.state)),customChild:x(null==A||null===(m=A.data)||void 0===m?void 0:m.timeline[0])}):t.createElement(o.ConnectingCheckPoints,null,(null==A||null===(f=A.data)||void 0===f?void 0:f.timeline)&&(null==A||null===(E=A.data)||void 0===E?void 0:E.timeline.map(function(e,n,l){var i,a,r,u,d,c,s="";return window.location.href.includes("/obps/")&&(s=null!=A&&null!==(i=A.data)&&void 0!==i&&null!==(a=i.timeline[n-1])&&void 0!==a&&null!==(r=a.state)&&void 0!==r&&r.includes("BACK_FROM")||null!=A&&null!==(u=A.data)&&void 0!==u&&null!==(d=u.timeline[n-1])&&void 0!==d&&null!==(c=d.state)&&void 0!==c&&c.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),t.createElement(t.Fragment,{key:n},t.createElement(o.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:B(""+b+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[D])+s),customChild:x(e,n)}))}))))))}function Si(e){var n,l,i,a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h=e.t,b=e.showToast,y=e.closeToast,T=e.businessService;if(null!=T&&T.includes("NewTL")||null!=T&&T.includes("TL")||null!=T&&T.includes("EDITRENEWAL")){var C,D="";switch(null==b||null===(C=b.action)||void 0===C?void 0:C.action){case"SENDBACK":D="error"===(null==b?void 0:b.key)?null==b||null===(n=b.error)||void 0===n?void 0:n.message:h("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":D="error"===(null==b?void 0:b.key)?null==b||null===(l=b.error)||void 0===l?void 0:l.message:h("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":D="error"===(null==b?void 0:b.key)?null==b||null===(i=b.error)||void 0===i?void 0:i.message:h("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":D="error"===(null==b?void 0:b.key)?null==b||null===(a=b.error)||void 0===a?void 0:a.message:h("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":D="error"===(null==b?void 0:b.key)?null==b||null===(r=b.error)||void 0===r?void 0:r.message:h("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":D="error"===(null==b?void 0:b.key)?null==b||null===(u=b.error)||void 0===u?void 0:u.message:h("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":D="error"===(null==b?void 0:b.key)?null==b||null===(d=b.error)||void 0===d?void 0:d.message:h("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:D="error"===(null==b?void 0:b.key)?null==b||null===(c=b.error)||void 0===c?void 0:c.message:h("ES_"+T+"_"+(null==b||null===(s=b.action)||void 0===s?void 0:s.action)+"_UPDATE_SUCCESS")}return t.createElement(t.Fragment,null,b&&t.createElement(o.Toast,{error:"error"===b.key,label:D,onClose:y}))}if(null!=T&&T.includes("BPA")||null!=T&&T.includes("BPA_LOW")||null!=T&&T.includes("BPA_OC")){var P,N=function(e){var n;return void 0===e&&(e=[]),2==(null===(n=e)||void 0===n?void 0:n.length)&&null!=T&&T.includes("BPA_OC")?h(e[1]):h(e[0])},I="";switch(null==b||null===(P=b.action)||void 0===P?void 0:P.action){case"REVOCATE":I="error"===(null==b?void 0:b.key)?null==b||null===(v=b.error)||void 0===v?void 0:v.message:N(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":I="error"===(null==b?void 0:b.key)?null==b||null===(p=b.error)||void 0===p?void 0:p.message:N(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":I="error"===(null==b?void 0:b.key)?null==b||null===(m=b.error)||void 0===m?void 0:m.message:N(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":I="error"===(null==b?void 0:b.key)?null==b||null===(f=b.error)||void 0===f?void 0:f.message:N(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":I="error"===(null==b?void 0:b.key)?null==b||null===(E=b.error)||void 0===E?void 0:E.message:N(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":I="error"===(null==b?void 0:b.key)?null==b||null===(_=b.error)||void 0===_?void 0:_.message:N(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":I="error"===(null==b?void 0:b.key)?null==b||null===(g=b.error)||void 0===g?void 0:g.message:N(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:I="error"===(null==b?void 0:b.key)?null==b||null===(A=b.error)||void 0===A?void 0:A.message:h("ES_"+T+"_"+(null==b||null===(S=b.action)||void 0===S?void 0:S.action)+"_UPDATE_SUCCESS")}return t.createElement(t.Fragment,null,b&&t.createElement(o.Toast,{error:"error"===b.key,label:I,onClose:y}))}var L,B,O="error"===(null==b?void 0:b.key)?null==b||null===(L=b.error)||void 0===L?void 0:L.message:"ES_"+T+"_"+(null==b||null===(B=b.action)||void 0===B?void 0:B.action)+"_UPDATE_SUCCESS";return t.createElement(t.Fragment,null,b&&t.createElement(o.Toast,{error:"error"===b.key,label:h(O),onClose:y}))}function hi(e){var i,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b=e.workflowDetails,y=e.displayMenu,T=e.onActionSelect,C=e.setDisplayMenu,D=e.businessService,P=e.forcedActionPrefix,N=e.ActionBarStyle,I=void 0===N?{}:N,L=e.MenuStyle,B=void 0===L?{}:L,O=l.useTranslation().t,R=Digit.UserService.getUser(),x=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){var w=sessionStorage.getItem("Digit.citizen.userRequestObject"),M=w?JSON.parse(w):{};R=null==M?void 0:M.value}var k=null===(i=R)||void 0===i||null===(a=i.info)||void 0===a||null===(r=a.roles)||void 0===r?void 0:r.map(function(e){return e.code}),F=!1,U=!1,H=(null==b||null===(d=b.data)||void 0===d||null===(c=d.actionState)||void 0===c||null===(s=c.nextActions)||void 0===s?void 0:s.filter(function(e){return(null==k?void 0:k.some(function(n){var t;return null===(t=e.roles)||void 0===t?void 0:t.includes(n)}))||!e.roles}))||(null==b||null===(v=b.data)||void 0===v||null===(p=v.nextActions)||void 0===p?void 0:p.filter(function(e){return(null==k?void 0:k.some(function(n){var t;return null===(t=e.roles)||void 0===t?void 0:t.includes(n)}))||!e.roles}));return Digit.Hooks.useClickOutside(x,function(){C(!1)},y),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==H?void 0:H.length)||null!=H&&null!==(m=H[0])&&void 0!==m&&null!==(f=m.redirectionUrl)&&void 0!==f&&f.pathname.includes("/pt/property-details/")&&1==(null==H?void 0:H.length)?(U=!1,F=!0):(null==H?void 0:H.length)>0&&(U=!0,F=!1),t.createElement(t.Fragment,null,!(null!=b&&b.isLoading)&&U&&!F&&t.createElement(o.ActionBar,{style:u({},I)},y&&(null!=b&&null!==(E=b.data)&&void 0!==E&&null!==(_=E.actionState)&&void 0!==_&&_.nextActions||null!=b&&null!==(g=b.data)&&void 0!==g&&g.nextActions)?t.createElement(o.Menu,{localeKeyPrefix:P||"WF_EMPLOYEE_"+(null==D?void 0:D.toUpperCase()),options:H,optionKey:"action",t:O,onSelect:T,style:B}):null,t.createElement(o.SubmitBar,{ref:x,label:O("WF_TAKE_ACTION"),onSubmit:function(){return C(!y)}})),!(null!=b&&b.isLoading)&&!U&&F&&t.createElement(o.ActionBar,{style:u({},I)},t.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==H||null===(A=H[0])||void 0===A?void 0:A.action,value:null==H||null===(S=H[0])||void 0===S?void 0:S.action,onClick:function(e){T((null==H?void 0:H[0])||{})}},O((P||"WF_EMPLOYEE_"+(null==D?void 0:D.toUpperCase()))+"_"+(null==H||null===(h=H[0])||void 0===h?void 0:h.action)))))}var bi=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},t.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},yi=function(e){return t.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},t.createElement(bi,null))};function Ti(e){var n=e.action,i=e.closeWarningPopup,a=l.useTranslation().t,r=window.Digit.Utils.browser.isMobile();return t.createElement(t.Fragment,null,t.createElement(o.Modal,{headerBarMain:t.createElement("h1",{className:"heading-m"},a("PT_DUES_ARE_PENDING")),headerBarEnd:t.createElement(yi,{onClick:function(){i()}}),hideSubmit:!0,isDisabled:!1,popupStyles:r?{}:{width:"29%",marginTop:"auto"}},t.createElement(o.Card,null,t.createElement("div",{style:{marginBottom:"30px"}},t.createElement("h1",null,a("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",a("PT_DUE_WARNING_MSG2"))),t.createElement(o.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+a("PT_AMOUNT_DUE"),text:"₹"+a(null==n?void 0:n.AmountDueForPay)}),t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},t.createElement(o.ButtonSelector,{theme:"border",label:a("ES_PT_COMMON_CANCEL"),onSubmit:i,style:{marginLeft:"10px"}}),t.createElement(o.ButtonSelector,{label:a("PT_COLLECT"),onSubmit:function(){var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}var Ci=function(e){var a,d=Digit.ULBService.getCurrentTenantId(),s=Digit.ULBService.getStateId(),v=l.useTranslation().t,p=i.useHistory(),m=i.useParams().id,f=n.useState(!1),E=f[0],_=f[1],g=n.useState(null),A=g[0],S=g[1],h=n.useState(!1),b=h[0],y=h[1],T=n.useState(!1),C=T[0],D=T[1],P=n.useState(!1),N=P[0],I=P[1],L=e.applicationDetails,B=e.showToast,O=e.setShowToast,R=e.isLoading,x=e.isDataLoading,w=e.applicationData,M=e.mutate,k=e.nocMutation,F=e.workflowDetails,U=e.businessService,H=e.closeToast,W=e.moduleCode,j=e.timelineStatusPrefix,z=e.forcedActionPrefix,Y=e.statusAttribute,K=e.ActionBarStyle,G=e.MenuStyle,V=e.paymentsList,X=e.showTimeLine,q=void 0===X||X,J=e.oldValue,Z=e.isInfoLabel,Q=void 0!==Z&&Z,$=e.clearDataDetails;n.useEffect(function(){B&&F.revalidate()},[B]);var ee=r.useQueryClient(),ne=function(){S(null),y(!1)};return R||C?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,R?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement(Ai,{applicationDetails:L,workflowDetails:F,isDataLoading:x,applicationData:w,businessService:U,timelineStatusPrefix:j,statusAttribute:Y,paymentsList:V,showTimeLine:q,oldValue:J,isInfoLabel:Q}),b?t.createElement($l,{t:v,action:A,tenantId:d,state:s,id:m,applicationDetails:L,applicationData:null==L?void 0:L.applicationData,closeModal:ne,submitAction:function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t={});try{var l=function(n){if(i)return n;M&&(D(!0),M(e,{onError:function(e,n){D(!1),O({key:"error",error:e}),setTimeout(H,5e3)},onSuccess:function(e,n){var l,i,o,a,r,u,d,c,s;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),D(!1),null!=t&&t.bpa&&(e.selectedAction=A,p.replace("/digit-ui/employee/obps/response",{data:e})),null!=t&&t.isStakeholder&&(e.selectedAction=A,p.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=t&&t.isNoc&&p.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(l=e.Amendments)||void 0===l?void 0:l.length)>0?null!=n&&null!==(i=n.AmendmentUpdate)&&void 0!==i&&null!==(o=i.workflow)&&void 0!==o&&o.action.includes("SEND_BACK")?O({key:"success",label:v("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=n&&null!==(a=n.AmendmentUpdate)&&void 0!==a&&null!==(r=a.workflow)&&void 0!==r&&r.action.includes("RE-SUBMIT")?O({key:"success",label:v("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=n&&null!==(u=n.AmendmentUpdate)&&void 0!==u&&null!==(d=u.workflow)&&void 0!==d&&d.action.includes("APPROVE")?O({key:"success",label:v("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=n&&null!==(c=n.AmendmentUpdate)&&void 0!==c&&null!==(s=c.workflow)&&void 0!==s&&s.action.includes("REJECT")&&O({key:"success",label:v("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(O({key:"success",action:A}),$&&setTimeout($,3e3),setTimeout(H,5e3),ee.clear(),ee.refetchQueries("APPLICATION_SEARCH"))}})),ne()},i=!1;D(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute(u({},e)));var o=function(){if(!1!==n&&k){var e,t=null===(e=n)||void 0===e?void 0:e.map(function(e){return null==k?void 0:k.mutateAsync(e)}),l=c(function(){return D(!0),Promise.resolve(Promise.all(t)).then(function(e){e&&e.map(function(e){var n,t;Digit.SessionStorage.del(null==e||null===(n=e.Noc)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.nocType)})})},function(e){var n,t,l,o,a,r,u,d,c,s,p,m;D(!1);var f=null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&null!==(l=t.Errors)&&void 0!==l&&null!==(o=l[0])&&void 0!==o&&o.code?v(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.code):(null==e||null===(c=e.response)||void 0===c||null===(s=c.data)||void 0===s||null===(p=s.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;ne(),O({key:"error",error:{message:f}}),setTimeout(H,5e3),i=!0});if(l&&l.then)return l.then(function(){})}}();return Promise.resolve(o&&o.then?o.then(l):l(o))}catch(e){return Promise.reject(e)}},actionData:null==F||null===(a=F.data)||void 0===a?void 0:a.timeline,businessService:U,workflowDetails:F,moduleCode:W}):null,N?t.createElement(Ti,{action:A,workflowDetails:F,businessService:U,isWarningPop:N,closeWarningPopup:function(){I(!1)}}):null,t.createElement(Si,{t:v,showToast:B,closeToast:H,businessService:U}),t.createElement(hi,{workflowDetails:F,displayMenu:E,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)O({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(H,5e3);else if(null!=e&&e.isWarningPopUp)I(!0);else if(null!=e&&e.redirectionUrll){var n,t,l,i,o;if("ACTIVATE_CONNECTION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action))p.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),JSON.stringify({data:null==e||null===(i=e.redirectionUrll)||void 0===i?void 0:i.state,url:""+(null===(o=location)||void 0===o?void 0:o.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action)){var a,r;p.push(""+(null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.pathname),{data:null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.state})}else{var d;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(d=e.redirectionUrll)||void 0===d?void 0:d.pathname))}}else if(null!=e&&e.redirectionUrl){var c,s;p.push({pathname:null===(c=e.redirectionUrl)||void 0===c?void 0:c.pathname,state:u({},null===(s=e.redirectionUrl)||void 0===s?void 0:s.state)})}else y(!0);S(e),_(!1)},setDisplayMenu:_,businessService:U,forcedActionPrefix:z,ActionBarStyle:K,MenuStyle:G})))},Di=[{head:"",body:[{type:"component",component:"InspectionReport",key:"FieldReports",withoutLabel:!0,hideInCitizen:!0}]}],Pi=function(e){return"symbol"==typeof e||te(e)&&"[object Symbol]"==L(e)},Ni=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ii=/^\w*$/,Li=function(e,n){if(ue(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Pi(e))||Ii.test(e)||!Ni.test(e)||null!=n&&e in Object(n)};function Bi(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function t(){var l=arguments,i=n?n.apply(this,l):l[0],o=t.cache;if(o.has(i))return o.get(i);var a=e.apply(this,l);return t.cache=o.set(i,a)||o,a};return t.cache=new(Bi.Cache||X),t}Bi.Cache=X;var Oi,Ri,xi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/\\(\\)?/g,Mi=(Oi=Bi(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(xi,function(e,t,l,i){n.push(l?i.replace(wi,"$1"):t||e)}),n},function(e){return 500===Ri.size&&Ri.clear(),e}),Ri=Oi.cache,Oi),ki=function(e,n){for(var t=-1,l=null==e?0:e.length,i=Array(l);++t<l;)i[t]=n(e[t],t,e);return i},Fi=y?y.prototype:void 0,Ui=Fi?Fi.toString:void 0,Hi=function(e,n){return ue(e)?e:Li(e,n)?[e]:Mi(function(e){return null==e?"":function e(n){if("string"==typeof n)return n;if(ue(n))return ki(n,e)+"";if(Pi(n))return Ui?Ui.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}(e)}(e))},Wi=function(e){if("string"==typeof e||Pi(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},ji=function(e,n){for(var t=0,l=(n=Hi(n,e)).length;null!=e&&t<l;)e=e[Wi(n[t++])];return t&&t==l?e:void 0},zi=function(e,n,t){var l=null==e?void 0:ji(e,n);return void 0===l?t:l};function Yi(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new X;++n<t;)this.add(e[n])}Yi.prototype.add=Yi.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Yi.prototype.has=function(e){return this.__data__.has(e)};var Ki=Yi,Gi=function(e,n){for(var t=-1,l=null==e?0:e.length;++t<l;)if(n(e[t],t,e))return!0;return!1},Vi=function(e,n){return e.has(n)},Xi=function(e,n,t,l,i,o){var a=1&t,r=e.length,u=n.length;if(r!=u&&!(a&&u>r))return!1;var d=o.get(e),c=o.get(n);if(d&&c)return d==n&&c==e;var s=-1,v=!0,p=2&t?new Ki:void 0;for(o.set(e,n),o.set(n,e);++s<r;){var m=e[s],f=n[s];if(l)var E=a?l(f,m,s,n,e,o):l(m,f,s,e,n,o);if(void 0!==E){if(E)continue;v=!1;break}if(p){if(!Gi(n,function(e,n){if(!Vi(p,n)&&(m===e||i(m,e,t,l,o)))return p.push(n)})){v=!1;break}}else if(m!==f&&!i(m,f,t,l,o)){v=!1;break}}return o.delete(e),o.delete(n),v},qi=function(e){var n=-1,t=Array(e.size);return e.forEach(function(e,l){t[++n]=[l,e]}),t},Ji=function(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t},Zi=y?y.prototype:void 0,Qi=Zi?Zi.valueOf:void 0,$i=Object.prototype.hasOwnProperty,eo=Object.prototype.hasOwnProperty,no=function e(n,t,l,i,o){return n===t||(null==n||null==t||!te(n)&&!te(t)?n!=n&&t!=t:function(e,n,t,l,i,o){var a=ue(e),r=ue(n),u=a?"[object Array]":Ze(e),d=r?"[object Array]":Ze(n),c="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),v="[object Object]"==(d="[object Arguments]"==d?"[object Object]":d),p=u==d;if(p&&ce(e)){if(!ce(n))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new J),a||ge(e)?Xi(e,n,t,l,i,o):function(e,n,t,l,i,o,a){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!o(new $e(e),new $e(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var r=qi;case"[object Set]":if(r||(r=Ji),e.size!=n.size&&!(1&l))return!1;var u=a.get(e);if(u)return u==n;l|=2,a.set(e,n);var d=Xi(r(e),r(n),l,i,o,a);return a.delete(e),d;case"[object Symbol]":if(Qi)return Qi.call(e)==Qi.call(n)}return!1}(e,n,u,t,l,i,o);if(!(1&t)){var m=c&&eo.call(e,"__wrapped__"),f=v&&eo.call(n,"__wrapped__");if(m||f){var E=m?e.value():e,_=f?n.value():n;return o||(o=new J),i(E,_,t,l,o)}}return!!p&&(o||(o=new J),function(e,n,t,l,i,o){var a=1&t,r=Ue(e),u=r.length;if(u!=Ue(n).length&&!a)return!1;for(var d=u;d--;){var c=r[d];if(!(a?c in n:$i.call(n,c)))return!1}var s=o.get(e),v=o.get(n);if(s&&v)return s==n&&v==e;var p=!0;o.set(e,n),o.set(n,e);for(var m=a;++d<u;){var f=e[c=r[d]],E=n[c];if(l)var _=a?l(E,f,c,n,e,o):l(f,E,c,e,n,o);if(!(void 0===_?f===E||i(f,E,t,l,o):_)){p=!1;break}m||(m="constructor"==c)}if(p&&!m){var g=e.constructor,A=n.constructor;g==A||!("constructor"in e)||!("constructor"in n)||"function"==typeof g&&g instanceof g&&"function"==typeof A&&A instanceof A||(p=!1)}return o.delete(e),o.delete(n),p}(e,n,t,l,i,o))}(n,t,l,i,e,o))},to=function(e){return e==e&&!B(e)},lo=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}},io=function(e,n){return null!=e&&n in Object(e)},oo=function(e){return e},ao=function(e){return"function"==typeof e?e:null==e?oo:"object"==typeof e?ue(e)?(i=e[1],Li(l=e[0])&&to(i)?lo(Wi(l),i):function(e){var n=zi(e,l);return void 0===n&&n===i?function(e,n){return null!=e&&function(e,n,t){for(var l=-1,i=(n=Hi(n,e)).length,o=!1;++l<i;){var a=Wi(n[l]);if(!(o=null!=e&&t(e,a)))break;e=e[a]}return o||++l!=i?o:!!(i=null==e?0:e.length)&&pe(i)&&ve(a,i)&&(ue(e)||re(e))}(e,n,io)}(e,l):no(i,n,3)}):1==(t=function(e){for(var n=Pe(e),t=n.length;t--;){var l=n[t],i=e[l];n[t]=[l,i,to(i)]}return n}(n=e)).length&&t[0][2]?lo(t[0][0],t[0][1]):function(e){return e===n||function(e,n,t,l){var i=t.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=t[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var r=(a=t[i])[0],u=e[r],d=a[1];if(a[2]){if(void 0===u&&!(r in e))return!1}else{var c=new J;if(!no(d,u,3,void 0,c))return!1}}return!0}(e,0,t)}:function(e){return Li(e)?(n=Wi(e),function(e){return null==e?void 0:e[n]}):function(e){return function(n){return ji(n,e)}}(e);var n}(e);var n,t,l,i},ro=function(e,n){if(e!==n){var t=void 0!==e,l=null===e,i=e==e,o=Pi(e),a=void 0!==n,r=null===n,u=n==n,d=Pi(n);if(!r&&!d&&!o&&e>n||o&&a&&u&&!r&&!d||l&&a&&u||!t&&u||!i)return 1;if(!l&&!o&&!d&&e<n||d&&t&&i&&!l&&!o||r&&t&&i||!a&&i||!u)return-1}return 0},uo=["tenantId"],co=["tenantId","payments"],so=function(e){var n,t,l,i,o,a,r,u,d=null==e||null===(n=e.data)||void 0===n||null===(t=n.BPA)||void 0===t?void 0:t[0],c=null!=e&&null!==(l=e.data)&&void 0!==l&&null!==(i=l.BPA)&&void 0!==i&&null!==(o=i[0])&&void 0!==o&&o.businessService?null==e||null===(a=e.data)||void 0===a||null===(r=a.BPA)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.businessService:"BPA",s=null==d?void 0:d.status;"BPA_LOW"==c&&(c="BPA");var v,p,m,f,E=sessionStorage.getItem("BPA_SUBMIT_APP")?JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")):null;return e.isSuccess?"BPA_SUBMIT_APP"==E?window.location.href.includes("editApplication")?null==e?void 0:e.t("BPA_SUBMIT_HEADER_"+c+"_"+(null==d||null===(p=d.workflow)||void 0===p?void 0:p.action)+"_"+fn(s," ","_").toUpperCase()):null==e?void 0:e.t("BPA_SUBMIT_HEADER_"+c+"_"+(null==d||null===(v=d.workflow)||void 0===v?void 0:v.action)+"_"+fn(s," ","_").toUpperCase()):window.location.href.includes("editApplication")?null==e?void 0:e.t("BPA_HEADER_"+c+"_"+(null==d||null===(f=d.workflow)||void 0===f?void 0:f.action)+"_"+fn(s," ","_").toUpperCase()):null==e?void 0:e.t("BPA_HEADER_"+c+"_"+(null==d||null===(m=d.workflow)||void 0===m?void 0:m.action)+"_"+fn(s," ","_").toUpperCase()):e.isLoading?(window.location.href.includes("editApplication"),null==e?void 0:e.t("CS_BPA_APPLICATION_PENDING")):e.isSuccess?void 0:(window.location.href.includes("editApplication"),null==e?void 0:e.t("CS_BPA_APPLICATION_FAILED"))},vo=function(e){var n,t,l,i,o=null!=e&&null!==(n=e.BPA)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.businessService?null==e||null===(l=e.BPA)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.businessService:"BPA";return"BPA_LOW"==o&&(o="BPA"),"BPA"==o?null==e?void 0:e.t("BPA_PERMIT_APPLICATION_NUMBER_LABEL"):null==e?void 0:e.t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL")},po=function(e){var n;return t.createElement(o.Banner,{message:so(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.BPA[0].applicationNo,info:e.isSuccess?vo(e):"",successful:e.isSuccess,headerStyles:{fontSize:"32px"}})},mo=function(e){var n,t,l,i,o,a,r,u,d=null==e||null===(n=e.data)||void 0===n||null===(t=n.BPA)||void 0===t?void 0:t[0],c=null!=e&&null!==(l=e.data)&&void 0!==l&&null!==(i=l.BPA)&&void 0!==i&&null!==(o=i[0])&&void 0!==o&&o.businessService?null==e||null===(a=e.data)||void 0===a||null===(r=a.BPA)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.businessService:"BPA",s=null==d?void 0:d.status;"BPA_LOW"==c&&(c="BPA");var v,p,m,f,E=sessionStorage.getItem("BPA_SUBMIT_APP")?JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")):null;return e.isSuccess?"BPA_SUBMIT_APP"==E?window.location.href.includes("editApplication")?null==e?void 0:e.t("BPA_SUBMIT_HEADER_"+c+"_"+(null==d||null===(p=d.workflow)||void 0===p?void 0:p.action)+"_"+fn(s," ","_").toUpperCase()):null==e?void 0:e.t("BPA_SUBMIT_HEADER_"+c+"_"+(null==d||null===(v=d.workflow)||void 0===v?void 0:v.action)+"_"+fn(s," ","_").toUpperCase()):window.location.href.includes("editApplication")?null==e?void 0:e.t("BPA_HEADER_"+c+"_"+(null==d||null===(f=d.workflow)||void 0===f?void 0:f.action)+"_"+fn(s," ","_").toUpperCase()):null==e?void 0:e.t("BPA_HEADER_"+c+"_"+(null==d||null===(m=d.workflow)||void 0===m?void 0:m.action)+"_"+fn(s," ","_").toUpperCase()):e.isLoading?(window.location.href.includes("editApplication"),null==e?void 0:e.t("CS_BPA_APPLICATION_PENDING")):e.isSuccess?void 0:(window.location.href.includes("editApplication"),null==e?void 0:e.t("CS_BPA_APPLICATION_FAILED"))},fo=function(e){var n,t,l,i,o=null!=e&&null!==(n=e.BPA)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.businessService?null==e||null===(l=e.BPA)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.businessService:"BPA";return"BPA_LOW"==o&&(o="BPA"),"BPA"==o?null==e?void 0:e.t("BPA_PERMIT_APPLICATION_NUMBER_LABEL"):null==e?void 0:e.t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL")},Eo=function(e){var n;return t.createElement(o.Banner,{message:mo(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.BPA[0].applicationNo,info:e.isSuccess?fo(e):"",successful:e.isSuccess,headerStyles:{fontSize:"32px"}})},_o=function(e){var n=l.useTranslation().t;return e.isSuccess?window.location.href.includes("edit-application")?n("CS_PROPERTY_UPDATE_APPLICATION_SUCCESS"):n("CS_STAKEHOLDER_APPLICATION_SUCCESS"):e.isLoading?window.location.href.includes("edit-application")?n("CS_PROPERTY_UPDATE_APPLICATION_PENDING"):n("CS_STAKEHOLDER_APPLICATION_PENDING"):e.isSuccess?void 0:window.location.href.includes("edit-application")?n("CS_PROPERTY_UPDATE_APPLICATION_FAILED"):n("CS_STAKEHOLDER_APPLICATION_FAILED")},go=function(e){var n;return t.createElement(o.Banner,{message:_o(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.Licenses[0].applicationNumber,info:e.isSuccess?e.t("BPA_NEW_STAKEHOLDER_REGISTRATION_APP_LABEL"):"",successful:e.isSuccess,style:{padding:"10px"},headerStyles:{fontSize:"32px"}})},Ao={OBPSModule:function(e){var n=e.stateCode,l=e.userType,a=e.tenants,r=i.useRouteMatch().path,u=Digit.StoreData.getCurrentLanguage(),d=Digit.Services.useStore({stateCode:n,moduleCode:["bpa","bpareg","common"],language:u}).isLoading;return Digit.SessionStorage.set("OBPS_TENANTS",a),d?t.createElement(o.Loader,null):t.createElement("citizen"===l?Ut:bl,{path:r,stateCode:n})},OBPSLinks:function(e){var n=e.matchPath,i=l.useTranslation().t,a=[{link:n+"/my-applications",i18nKey:i("BPA_CITIZEN_HOME_VIEW_APP_BY_CITIZEN_LABEL")},{link:n+"/stakeholder/apply/stakeholder-docs-required",i18nKey:i("BPA_CITIZEN_HOME_STAKEHOLDER_LOGIN_LABEL")},{link:n+"/home",i18nKey:i("BPA_CITIZEN_HOME_ARCHITECT_LOGIN_LABEL")}];return t.createElement(o.CitizenHomeCard,{header:i("ACTION_TEST_BUILDING_PLAN_APPROVAL"),links:a,Icon:function(){return t.createElement(o.OBPSIcon,null)},Info:function(){return t.createElement(o.CitizenInfoLabel,{style:{margin:"0px",padding:"10px"},info:i("CS_FILE_APPLICATION_INFO_LABEL"),text:i("BPA_CITIZEN_HOME_STAKEHOLDER_INCLUDES_INFO_LABEL")})},isInfo:!0})},OBPSCard:function(){var e=n.useState(0),a=e[0],r=e[1],d=n.useState(0),c=d[0],s=d[1],v=l.useTranslation().t,p=i.useLocation(),m=Digit.ULBService.getCurrentTenantId(),f=Digit.ULBService.getStateId(),E=function(e){var n;void 0===e&&(e=[]);var t=sessionStorage.getItem("Digit.citizen.userRequestObject"),l=t?JSON.parse(t):{},i=[];return null===(n=e)||void 0===n||n.map(function(e){var n,t,o;null==l||null===(n=l.value)||void 0===n||null===(t=n.info)||void 0===t||null===(o=t.roles)||void 0===o||o.map(function(n){n.code===e.code&&n.tenantId===e.tenantId&&i.push(n)})}),null==i?void 0:i.length}([{code:"BPAREG_DOC_VERIFIER",tenantId:f},{code:"BPAREG_APPROVER",tenantId:f}]),_=function(e){var n;void 0===e&&(e=[]);var t=Digit.UserService.getUser(),l=Digit.ULBService.getCurrentTenantId(),i=[];return null===(n=e)||void 0===n||n.map(function(e){var n,o;null==t||null===(n=t.info)||void 0===n||null===(o=n.roles)||void 0===o||o.map(function(n){n.code==e&&n.tenantId===l&&i.push(n)})}),null==i?void 0:i.length}(["BPA_FIELD_INSPECTOR","BPA_NOC_VERIFIER","BPA_APPROVER","BPA_VERIFIER","CEMP"]),g=Digit.Hooks.obps.useBPAInbox({tenantId:m,filters:u({},{filterForm:{moduleName:"BPAREG",applicationStatus:"",locality:[],assignee:"ASSIGNED_TO_ALL"},searchForm:{},tableForm:{sortBy:"",limit:10,offset:0,sortOrder:"DESC"}}),config:{enabled:!!E}}),A=g.isLoading,S=g.data,h=Digit.Hooks.obps.useBPAInbox({tenantId:m,filters:u({},{filterForm:{moduleName:"bpa-services",applicationStatus:"",locality:[],assignee:"ASSIGNED_TO_ALL",applicationType:[]},searchForm:{},tableForm:{sortBy:"",limit:10,offset:0,sortOrder:"DESC"}}),config:{enabled:!!_}}),b=h.isLoading,y=h.data;n.useEffect(function(){b||A||(r((null!=y&&y.totalCount?null==y?void 0:y.totalCount:0)+(null!=S&&S.totalCount?null==S?void 0:S.totalCount:0)),s((null==y?void 0:y.nearingSlaCount)||0+(null==S?void 0:S.nearingSlaCount)||0))},[y,S]),n.useEffect(function(){"/digit-ui/employee"===p.pathname&&(Digit.SessionStorage.del("OBPS.INBOX"),Digit.SessionStorage.del("STAKEHOLDER.INBOX"))},[p.pathname]);var T=n.useMemo(function(){return{Icon:t.createElement(o.OBPSIconSolidBg,null),moduleName:v("MODULE_OBPS"),kpis:[{count:b||A?"":a,label:v("TOTAL_FSM"),link:"/digit-ui/employee/obps/inbox"},{count:b||A?"":c,label:v("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/obps/inbox"}],links:[{count:A?"":null==S?void 0:S.totalCount,label:v("ES_COMMON_STAKEHOLDER_INBOX_LABEL"),link:"/digit-ui/employee/obps/stakeholder-inbox",field:"STAKEHOLDER"},{count:b?"":null==y?void 0:y.totalCount,label:v("ES_COMMON_OBPS_INBOX_LABEL"),link:"/digit-ui/employee/obps/inbox",field:"BPA"},{label:v("ES_COMMON_SEARCH_APPLICATION"),link:"/digit-ui/employee/obps/search/application"}]}},[b,A,S,y,a,c]);return E||(T.links=T.links.filter(function(e){return"STAKEHOLDER"!==e.field})),_||(T.links=T.links.filter(function(e){return"BPA"!==e.field})),_||E?t.createElement(o.EmployeeModuleCard,T):null},BPACitizenHomeScreen:function(e){var a,r,d,c,s=Digit.UserService.getUser(),v=null==s||null===(a=s.info)||void 0===a||null===(r=a.roles)||void 0===r?void 0:r.map(function(e){return e.code}),p=Digit.ULBService.getStateId(),m=n.useState(!1),f=m[0],E=m[1],_=Digit.Hooks.obps.useMDMS(p,"StakeholderRegistraition","TradeTypetoRoleMapping"),g=_.data,A=_.isLoading,S=n.useState([]),h=S[0],b=S[1],y=Digit.ULBService.getStateId(),T=l.useTranslation().t,C=i.useLocation(),D=Digit.Hooks.useSessionStorage("BPA_HOME_CREATE",{})[2],P=Digit.Hooks.obps.useMDMS(y,"BPA",["homePageUrlLinks"]),N=P.data,I=P.isLoading,L=n.useState(null),B=L[0],O=L[1],R=n.useState("-"),x=R[0],w=R[1],M=n.useState({applicationStatus:[]})[0],k=(window.Digit.Utils.browser.isMobile(),n.useState(0)[0]),F=n.useState(window.Digit.Utils.browser.isMobile()?50:10)[0],U=n.useState([{id:"createdTime",sortOrder:"DESC"}])[0],H=Digit.Hooks.obps.useArchitectInbox({tenantId:p,moduleName:"bpa-services",businessService:["BPA_LOW","BPA","BPA_OC"],filters:{searchForm:u({},M),tableForm:{sortBy:null==U||null===(d=U[0])||void 0===d?void 0:d.id,limit:F,offset:k,sortOrder:null==U||null===(c=U[0])||void 0===c?void 0:c.sortOrder},filterForm:{moduleName:"bpa-services",businessService:[],applicationStatus:null==M?void 0:M.applicationStatus,locality:[],assignee:"ASSIGNED_TO_ALL"}},config:{},withEDCRData:!1}),W=H.isLoading,j=H.data,z=Digit.Hooks.obps.useEDCRInbox({tenantId:p,filters:{filterForm:{},searchForm:{},tableForm:{limit:10,offset:0}}}),Y=z.isLoading,K=z.data,G=(void 0===K?{}:K).totalCount;if(n.useEffect(function(){"/digit-ui/citizen/obps/home"===C.pathname&&(Digit.SessionStorage.del("OBPS.INBOX"),Digit.SessionStorage.del("STAKEHOLDER.INBOX"))},[C.pathname]),n.useEffect(function(){W||w((null==j?void 0:j.totalCount)||0)},[j]),n.useEffect(function(){if(!A){var e,n,t=[];null==g||null===(e=g.StakeholderRegistraition)||void 0===e||null===(n=e.TradeTypetoRoleMapping)||void 0===n||n.map(function(e){var n;null==e||null===(n=e.role)||void 0===n||n.map(function(e){t.push(e)})});var l=null==t?void 0:t.filter(function(e,n,t){return t.indexOf(e)===n}),i=!1;null==l||l.map(function(e){null!=v&&v.includes(e)&&!i&&(i=!0)}),i?E(!0):(E(!1),O({key:"true",message:T("BPA_LOGIN_HOME_VALIDATION_MESSAGE_LABEL")}))}},[A]),n.useEffect(function(){var e,n;if(!I&&(null==N||null===(e=N.BPA)||void 0===e||null===(n=e.homePageUrlLinks)||void 0===n?void 0:n.length)>0){var t,l,i=[];null==N||null===(t=N.BPA)||void 0===t||null===(l=t.homePageUrlLinks)||void 0===l||l.map(function(e){var n,t,l;i.push({link:(null==e||null===(n=e.flow)||void 0===n?void 0:n.toLowerCase())+"/"+(null==e||null===(t=e.applicationType)||void 0===t?void 0:t.toLowerCase())+"/"+(null==e||null===(l=e.serviceType)||void 0===l?void 0:l.toLowerCase())+"/docs-required",i18nKey:T("BPA_HOME_"+(null==e?void 0:e.applicationType)+"_"+(null==e?void 0:e.serviceType)+"_LABEL"),state:{linkData:e},linkState:!0})}),b(i)}},[!I]),n.useEffect(function(){D()},[]),Digit.SessionStorage.set("EDCR_BACK","IS_EDCR_BACK"),B)return t.createElement(o.Toast,{error:!0,label:T(null==B?void 0:B.message),isDleteBtn:!0,onClose:function(){window.location.replace("/digit-ui/citizen/all-services"),O(null)}});if(A||!f||W)return t.createElement(o.Loader,null);var V=[{Icon:t.createElement(o.BPAHomeIcon,null),moduleName:T("ACTION_TEST_BPA_STAKE_HOLDER_HOME"),name:"employeeCard",isCitizen:!0,kpis:[{count:!W&&!Y&&x&&G?x+G:"-",label:T("BPA_PDF_TOTAL"),link:"/digit-ui/citizen/obps/bpa/inbox"}],links:[{count:W?"-":x,label:T("ES_COMMON_OBPS_INBOX_LABEL"),link:"/digit-ui/citizen/obps/bpa/inbox"},{count:Y?"-":G,label:T("ES_COMMON_EDCR_INBOX_LABEL"),link:"/digit-ui/citizen/obps/edcr/inbox"}],className:"CitizenHomeCard",styles:{padding:"0px",minWidth:"90%",minHeight:"90%"}},{title:T("ACTION_TEST_EDCR_SCRUTINY"),Icon:t.createElement(o.EDCRIcon,{className:"fill-path-primary-main"}),links:[{link:"edcrscrutiny/apply",i18nKey:T("BPA_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")},{link:"edcrscrutiny/oc-apply",i18nKey:T("BPA_OC_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")}],styles:{minWidth:"90%",minHeight:"90%"}},{title:T("ACTION_TEST_BPA_STAKE_HOLDER_HOME"),Icon:t.createElement(o.BPAIcon,{className:"fill-path-primary-main"}),links:h,styles:{minWidth:"90%",minHeight:"90%"}}],X=t.createElement("div",{className:"mainContent"},V.map(function(e){return t.createElement("div",null,"employeeCard"===e.name?t.createElement(o.EmployeeModuleCard,e):t.createElement(o.CitizenHomeCard,{header:e.title,links:e.links,Icon:function(){return e.Icon},styles:null==e?void 0:e.styles}))}));return sessionStorage.setItem("isPermitApplication",!0),sessionStorage.setItem("isEDCRDisable",JSON.stringify(!1)),X},EDCRForm:function(e){var l,a,r,d,c,s,v=e.t,p=e.config,m=e.onSelect,f=e.formData,E=e.isShowToast,_=e.isSubmitBtnDisable,g=e.setIsShowToast,A=(i.useLocation(),Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),S=n.useState([]),h=S[0],b=S[1],y=n.useState(null==f||null===(l=f.Scrutiny)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.applicantName),T=y[0],C=y[1],D=n.useState(null==f||null===(r=f.Scrutiny)||void 0===r||null===(d=r[0])||void 0===d?void 0:d.tenantIdData),P=D[0],N=D[1],I=n.useState(function(){var e,n,t;return(null==f||null===(e=f.Scrutiny)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.proofIdentity)||void 0===t?void 0:t.fileStoreId)||null}),L=I[0],B=I[1],O=n.useState(null==f||null===(c=f.owners)||void 0===c||null===(s=c.documents)||void 0===s?void 0:s.proofIdentity),R=O[0],x=O[1],w=n.useState(null)[0],M=n.useState(""),k=M[0],F=M[1],U=(n.useState(null),i.useHistory()),H=Digit.Hooks.obps.useMDMS(A,"tenant",["citymodule"]),W=H.isLoading,j=H.data;return n.useEffect(function(){var e,n,t,l;if((null==j||null===(e=j.tenant)||void 0===e||null===(n=e.citymodule)||void 0===n?void 0:n.length)>0){var i,o,a,r,u,d,c,s=null==j||null===(i=j.tenant)||void 0===i||null===(o=i.citymodule)||void 0===o?void 0:o.filter(function(e){return"BPAAPPLY"==e.code});null==s||null===(a=s[0])||void 0===a||null===(r=a.tenants)||void 0===r||r.forEach(function(e){var n;e.i18nKey="TENANT_TENANTS_"+fn(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),".","_")}),Array.isArray(null==s||null===(u=s[0])||void 0===u?void 0:u.tenants)&&(null==s||null===(d=s[0])||void 0===d||d.tenants.reverse());var p=(t=null==s||null===(c=s[0])||void 0===c?void 0:c.tenants,l=v,t.sort(function(e,n){return l(e.code).localeCompare(l(n.code))}));b(p)}},[j]),n.useEffect(function(){(k||E)&&(C(""),N(""),B(null),x(""),F("")),E&&U.replace("/digit-ui/citizen/obps/edcrscrutiny/apply/acknowledgement",{data:null!=E&&E.label?null==E?void 0:E.label:"BPA_INTERNAL_SERVER_ERROR",type:"ERROR"})},[k,E,_]),W||_?t.createElement(o.Loader,null):t.createElement(o.FormStep,{t:v,config:p,onSelect:function(){var e={};e.tenantId=P,e.applicantName=T,e.file=R,m(p.key,e)},onSkip:function(){F("NEED TO DELETE")},isDisabled:!P||!T||!R||_,onAdd:function(){F("NEED TO DELETE")},isMultipleAllow:!0},t.createElement(o.CardLabel,null,v("EDCR_SCRUTINY_CITY")+" *"),t.createElement(o.Dropdown,{t:v,isMandatory:!1,option:h,selected:P,optionKey:"i18nKey",select:function(e){N(e)},uploadMessage:k}),t.createElement(o.CardLabel,null,v("EDCR_SCRUTINY_NAME_LABEL")+" *"),t.createElement(o.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:v,name:"applicantName",onChange:function(e){C(e.target.value)},uploadMessage:k,value:T},{isRequired:!0,pattern:"^[a-zA-Z]+(( )+[a-zA-z]+)*$",type:"text",title:v("TL_NAME_ERROR_MESSAGE")})),t.createElement(o.CardLabel,null,v("BPA_PLAN_DIAGRAM_LABEL")+" *"),t.createElement(o.UploadFile,{id:"edcr-doc",extraStyleName:"propertyCreate",onUpload:function(e){B(e.target.files[0]),x(e.target.files[0])},onDelete:function(){B(null),x("")},message:L?"1 "+v("PT_ACTION_FILEUPLOADED"):v("ES_NO_FILE_SELECTED_LABEL"),error:w,uploadMessage:k}),t.createElement("div",{style:{disabled:"true",height:"30px",width:"100%",fontSize:"14px"}},v("EDCR_UPLOAD_FILE_LIMITS_LABEL")),E&&t.createElement(o.Toast,{error:E.key,label:v(E.label),onClose:function(){return g(null)},isDleteBtn:!0}))},BasicDetails:function(e){var i,a,r,u,d,c,s,v,p,m,f,E,_=e.formData,g=e.onSelect,A=e.config,S=n.useState(null),h=S[0],b=S[1],y=n.useState((null==_||null===(i=_.data)||void 0===i?void 0:i.edcrDetails)||null),T=y[0],C=y[1],D=n.useState(null==_||null===(a=_.data)||void 0===a?void 0:a.scrutinyNumber),P=D[0],N=D[1],I=(n.useState(!(null==_||null===(r=_.data)||void 0===r||!r.scrutinyNumber)),l.useTranslation().t),L=Digit.ULBService.getStateId(),B=window.Digit.Utils.browser.isMobile(),O=Digit.Hooks.obps.useMDMS(L,"BPA",["RiskTypeComputation"]).data,R=Digit.Utils.obps.calculateRiskType(null==O||null===(u=O.BPA)||void 0===u?void 0:u.RiskTypeComputation,null==T||null===(d=T.planDetail)||void 0===d||null===(c=d.plot)||void 0===c?void 0:c.area,null==T||null===(s=T.planDetail)||void 0===s?void 0:s.blocks),x=sessionStorage.getItem("isEDCRDisable");if(x=JSON.parse(x)){var w=sessionStorage.getItem("isEDCRAPIType");(w=!!w&&JSON.parse(w))&&T||(sessionStorage.setItem("isEDCRAPIType",JSON.stringify(!0)),function(){try{Promise.resolve(xn(null==P?void 0:P.edcrNumber,L)).then(function(e){"ERROR"==(null==e?void 0:e.type)&&(b({message:null==e?void 0:e.message}),C(null)),null!=e&&e.edcrNumber&&(C(e),b(null))})}catch(e){return Promise.reject(e)}}())}return t.createElement("div",null,h&&t.createElement(o.Toast,{error:!0,label:I(""+(null==h?void 0:h.message)),onClose:function(){b(null)},isDleteBtn:!0}),t.createElement(zt,null),t.createElement("div",{className:B?"obps-search":"",style:B?{}:{margin:"8px"}},t.createElement(o.Label,null,I("OBPS_SEARCH_EDCR_NUMBER")),t.createElement(o.TextInput,{className:"searchInput",onKeyPress:function(e){try{return Promise.resolve(function(){if("Enter"===e.key){if(null==P||!P.edcrNumber)return;return Promise.resolve(xn(null==P?void 0:P.edcrNumber,L)).then(function(e){"ERROR"==(null==e?void 0:e.type)&&(b({message:null==e?void 0:e.message}),C(null)),null!=e&&e.edcrNumber&&(C(e),b(null))})}}())}catch(e){return Promise.reject(e)}},onChange:function(e){return N({edcrNumber:e.target.value})},value:null==P?void 0:P.edcrNumber,signature:!0,signatureImg:!x&&t.createElement(o.SearchIconSvg,{className:"signature-img",onClick:!x&&null!=P&&P.edcrNumber?function(){return function(e){try{return Promise.resolve(xn(null==P?void 0:P.edcrNumber,L)).then(function(e){"ERROR"==(null==e?void 0:e.type)&&(b({message:null==e?void 0:e.message}),C(null)),null!=e&&e.edcrNumber&&(C(e),b(null))})}catch(e){return Promise.reject(e)}}()}:null}),disable:x,style:{marginBottom:"10px"}})),T&&t.createElement(o.Card,null,t.createElement(o.CardCaption,null,I("BPA_SCRUTINY_DETAILS")),t.createElement(o.CardHeader,null,I("BPA_BASIC_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_APP_DATE_LABEL"),text:null!=T&&T.applicationDate?Mt(new Date(null==T?void 0:T.applicationDate),"dd/MM/yyyy"):null==T?void 0:T.applicationDate}),t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),text:I("WF_BPA_"+(null==T?void 0:T.appliactionType))}),t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:I(null==T?void 0:T.applicationSubType)}),t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),text:null==T||null===(v=T.planDetail)||void 0===v||null===(p=v.planInformation)||void 0===p?void 0:p.occupancy}),t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),text:I("WF_BPA_"+R)}),t.createElement(o.Row,{className:"border-none",label:I("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),text:null==T||null===(m=T.planDetail)||void 0===m||null===(f=m.planInformation)||void 0===f?void 0:f.applicantName})),R?t.createElement(o.SubmitBar,{label:I("CS_COMMON_NEXT"),onSubmit:function(e){var n,t,l,i,o,a,r,u;g(null==A?void 0:A.key,{scrutinyNumber:P,applicantName:null==T||null===(n=T.planDetail)||void 0===n||null===(t=n.planInformation)||void 0===t?void 0:t.applicantName,occupancyType:null==T||null===(l=T.planDetail)||void 0===l||null===(i=l.planInformation)||void 0===i?void 0:i.occupancy,applicationType:null==T?void 0:T.appliactionType,serviceType:null==T?void 0:T.applicationSubType,applicationDate:null==T?void 0:T.applicationDate,riskType:Digit.Utils.obps.calculateRiskType(null==O||null===(o=O.BPA)||void 0===o?void 0:o.RiskTypeComputation,null==T||null===(a=T.planDetail)||void 0===a||null===(r=a.plot)||void 0===r?void 0:r.area,null==T||null===(u=T.planDetail)||void 0===u?void 0:u.blocks),edcrDetails:T})},disabled:!(null!=P&&null!==(E=P.edcrNumber)&&void 0!==E&&E.length)}):t.createElement(o.Loader,null)))},DocsRequired:function(e){var a,r,u=e.onSelect,d=l.useTranslation().t,c=Digit.ULBService.getCurrentTenantId(),s=Digit.ULBService.getStateId(),v=(i.useHistory(),i.useParams(),n.useState([])),p=v[0],m=v[1],f=n.useState([]),E=f[0],_=f[1],g=Digit.Hooks.obps.useMDMS(s,"BPA","DocumentTypes"),A=g.data,S=g.isLoading,h=Digit.Hooks.obps.useMDMS(s,"common-masters",["DocumentType"]).data,b=(Digit.Hooks.obps.useMDMS(s,"BPA",["RiskTypeComputation"]),Digit.UserService.getUser()),y={0:{tenantId:s},1:{id:null==b||null===(a=b.info)||void 0===a?void 0:a.id}},T=Digit.Hooks.obps.useBPAREGSearch(c,y).data,C=window.location.href.includes("ocbpa");sessionStorage.removeItem("clickOnBPAApplyAfterEDCR");var D=Digit.Hooks.obps.useMDMS(s,"BPA",["homePageUrlLinks"]),P=D.data,N=D.isLoading;return n.useEffect(function(){for(var e="",n=!0,t=0;t<(null==T||null===(l=T.Licenses)||void 0===l?void 0:l.length);t++){var l,i,o,a,r,u,d,c,s;"APPROVED"===(null==T||null===(i=T.Licenses)||void 0===i||null===(o=i[t])||void 0===o?void 0:o.status)&&n&&(n=!1,e=(null==T||null===(a=T.Licenses)||void 0===a||null===(r=a[t])||void 0===r||null===(u=r.tradeLicenseDetail)||void 0===u||null===(d=u.tradeUnits)||void 0===d||null===(c=d[0])||void 0===c||null===(s=c.tradeType)||void 0===s?void 0:s.split(".")[0])||"ARCHITECT",sessionStorage.setItem("BPA_ARCHITECT_NAME",JSON.stringify(e)))}},[T]),n.useEffect(function(){if(!N){var e,n,t=window.location.href.split("/"),l=t[t.length-2],i=t[t.length-3];null==P||null===(e=P.BPA)||void 0===e||null===(n=e.homePageUrlLinks)||void 0===n||n.map(function(e){(null==i?void 0:i.toUpperCase())===(null==e?void 0:e.applicationType)&&(null==l?void 0:l.toUpperCase())===(null==e?void 0:e.serviceType)&&_({flow:null==e?void 0:e.flow,applicationType:null==e?void 0:e.applicationType,serviceType:null==e?void 0:e.serviceType})})}},[!N]),n.useEffect(function(){if(!S){for(var e=[],n=[],t=[],l=window.location.href.split("/"),i=l[l.length-2],o=l[l.length-3],a=0;a<A.length;a++)e[A[a].applicationType]||e[A[a].ServiceType]||(n.push(A[a].applicationType),e[A[a].applicationType]=A[a]);Object.values(e).map(function(e){var n;(null==e?void 0:e.applicationType)==(null==o?void 0:o.toUpperCase())&&(null==e?void 0:e.ServiceType)==(null==i?void 0:i.toUpperCase())&&t.push(null==e?void 0:e.docTypes),null==t||null===(n=t[0])||void 0===n||n.forEach(function(e){var n,t,l=e.code;e.dropdownData=[],null==h||null===(n=h["common-masters"])||void 0===n||null===(t=n.DocumentType)||void 0===t||t.forEach(function(n){var t=n.code.slice(0,l.length);l===t&&(e.hasDropdown=!0,n.i18nKey=n.code,e.dropdownData.push(n))})}),m(t)})}},[!S]),S?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement(o.Card,null,t.createElement(o.CardHeader,null,d(C?"BPA_OOCUPANCY_CERTIFICATE_APP_LABEL":"OBPS_NEW_BUILDING_PERMIT")),t.createElement(o.CardText,{style:{color:"#0B0C0C",marginTop:"12px",fontSize:"16px",fontWeight:"400",lineHeight:"24px"}},d("OBPS_NEW_BUILDING_PERMIT_DESCRIPTION")),S?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,null==p||null===(r=p[0])||void 0===r?void 0:r.map(function(e,n){var l;return t.createElement("div",null,t.createElement("div",{style:{fontWeight:700,marginBottom:"8px"},key:n},t.createElement("div",{style:{display:"flex"}},t.createElement("div",null,n+1+"."," "),t.createElement("div",null," "+d(null==e?void 0:e.code.replace(".","_"))))),t.createElement("div",{style:{marginBottom:"16px"}},null==e||null===(l=e.dropdownData)||void 0===l?void 0:l.map(function(n,l){var i;return(null==e||null===(i=e.dropdownData)||void 0===i?void 0:i.length)!==l+1?t.createElement("span",null,d(null==n?void 0:n.i18nKey)+", "):t.createElement("span",null,""+d(null==n?void 0:n.i18nKey))})))})),t.createElement(o.SubmitBar,{label:d("CS_COMMON_NEXT"),onSubmit:function(){if(null!==JSON.parse(sessionStorage.getItem("BPAintermediateValue"))){var e=JSON.parse(sessionStorage.getItem("BPAintermediateValue"));sessionStorage.setItem("BPAintermediateValue",null),u("",e)}else u("uiFlow",E)}})),t.createElement(o.CitizenInfoLabel,{info:d("CS_FILE_APPLICATION_INFO_LABEL"),text:d("OBPS_DOCS_FILE_SIZE"),className:"info-banner-wrap-citizen-override"}))},PlotDetails:function(e){var i,a,r,d,c,s,v,p,m,f,E=e.formData,_=e.onSelect,g=e.config,A=l.useTranslation().t,S=(n.useState(""),n.useState(""),Digit.ULBService.getCurrentTenantId(),null==E||null===(i=E.uiFlow)||void 0===i?void 0:i.flow),h=Digit.ULBService.getStateId(),b=Digit.Hooks.obps.useScrutinyDetails(h,null==E||null===(a=E.data)||void 0===a?void 0:a.scrutinyNumber),y=b.data;return b.isLoading?t.createElement(o.Loader,null):t.createElement("div",null,t.createElement(zt,{flow:"OCBPA"===S?"OCBPA":""}),t.createElement(o.FormStep,{config:g,onSelect:function(e){_(null==g?void 0:g.key,u({},e))},childrenAtTheBottom:!1,t:A,_defaultValues:null==E?void 0:E.data,onSkip:function(){return _()}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:A("BPA_BOUNDARY_PLOT_AREA_LABEL"),text:null!=y&&null!==(r=y.planDetail)&&void 0!==r&&null!==(d=r.planInformation)&&void 0!==d&&d.plotArea?(null==y||null===(c=y.planDetail)||void 0===c||null===(s=c.planInformation)||void 0===s?void 0:s.plotArea)+" "+A("BPA_SQ_FT_LABEL"):"NA"}),t.createElement(o.Row,{className:"border-none",label:A("BPA_PLOT_NUMBER_LABEL"),text:null==y||null===(v=y.planDetail)||void 0===v||null===(p=v.planInformation)||void 0===p?void 0:p.plotNo}),t.createElement(o.Row,{className:"border-none",label:A("BPA_KHATHA_NUMBER_LABEL"),text:null==y||null===(m=y.planDetail)||void 0===m||null===(f=m.planInformation)||void 0===f?void 0:f.khataNo}))))},ScrutinyDetails:function(e){var a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M=e.onSelect,k=e.formData,F=e.config,U=l.useTranslation().t,H=(i.useHistory(),n.useState([])[1]),W=n.useState((null==k?void 0:k.subOccupancy)||(null==k||null===(a=k.landInfo)||void 0===a?void 0:a.unit)||{}),j=W[0],z=W[1],Y=(n.useState([]),n.useState([]),Digit.UserService.getUser()),K=(null==Y||null===(r=Y.info)||void 0===r?void 0:r.permanentCity)||Digit.ULBService.getCurrentTenantId(),G=null==k||null===(u=k.uiFlow)||void 0===u?void 0:u.flow,V=n.useState(null),X=V[0],q=V[1],J=Digit.ULBService.getStateId(),Z=Digit.Hooks.obps.useMDMS(J,"BPA",["SubOccupancyType"]),Q=Z.isMdmsLoading,$=Z.data,ee=Digit.Hooks.obps.useScrutinyDetails(K,null==k||null===(d=k.data)||void 0===d?void 0:d.scrutinyNumber,{enabled:!0}).data;function ne(e){var n,t,l=[];return null==e||null===(n=e.building)||void 0===n||null===(t=n.floors)||void 0===t||t.map(function(e){var n,t,i,o,a,r,u,d;l.push({Floor:U("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:U(""+(null===(n=e.occupancies)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:U("BPA_FLOOR_NAME_"+e.number)})}),l}var te=function(e){var n=e.label,a=e.jumpTo,r=l.useTranslation().t;return i.useHistory(),t.createElement(o.LinkButton,{label:r(n),onClick:function(){location.href=a}})},le=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],ie=n.useMemo(function(){return null==le?void 0:le.map(function(e){return{Header:U(""+e.name),accessor:(n=e.id,t=n,function(e,n,l){return e[t]}),id:e.id};var n,t})});function oe(e){var n,t,l,i,o,a=null==k||null===(n=k.data)||void 0===n||null===(t=n.bpaData)||void 0===t||null===(l=t.bpaApprovalResponse)||void 0===l||null===(i=l[0])||void 0===i||null===(o=i.landInfo)||void 0===o?void 0:o.unit,r="";if((null==a?void 0:a.length)>0){var u,d,c=null===(u=a[e])||void 0===u||null===(d=u.usageCategory)||void 0===d?void 0:d.split(",");null!=c&&c.length&&(r=(null==c?void 0:c.map(function(e){return e?""+U("BPA_SUBOCCUPANCYTYPE_"+fn(null==e?void 0:e.toUpperCase(),"-","_")):"NA"})).join(", "))}return r||"NA"}return Q?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement(zt,{currentStep:"OCBPA"===G?2:1,flow:"OCBPA"===G?"OCBPA":""}),t.createElement(o.FormStep,{t:U,config:F,onSelect:function(){if("OCBPA"===G)if(null!=k&&k.id)M("",k,"",!0);else{var e,n,t,l,i,o,a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C={};C.edcrNumber=null!=k&&null!==(e=k.edcrNumber)&&void 0!==e&&e.edcrNumber?null==k||null===(n=k.edcrNumber)||void 0===n?void 0:n.edcrNumber:null==k||null===(t=k.data)||void 0===t||null===(l=t.scrutinyNumber)||void 0===l?void 0:l.edcrNumber,C.riskType=null==k||null===(i=k.data)||void 0===i?void 0:i.riskType,C.applicationType=null==k||null===(o=k.data)||void 0===o?void 0:o.applicationType,C.serviceType=null==k||null===(a=k.data)||void 0===a?void 0:a.serviceType;var D=Digit.UserService.getUser(),P=null==D||null===(r=D.info)||void 0===r?void 0:r.uuid;C.tenantId=null==k||null===(u=k.data)||void 0===u||null===(d=u.bpaData)||void 0===d||null===(c=d.bpaApprovalResponse)||void 0===c||null===(s=c[0])||void 0===s||null===(v=s.landInfo)||void 0===v?void 0:v.tenantId,C.workflow={action:"INITIATE",assignes:[null==D||null===(p=D.info)||void 0===p?void 0:p.uuid]},C.accountId=P,C.documents=null,C.additionalDetails={},null!=k&&null!==(m=k.data)&&void 0!==m&&m.holdingNumber&&(C.additionalDetails.holdingNo=null==k||null===(f=k.data)||void 0===f?void 0:f.holdingNumber),null!=k&&null!==(E=k.data)&&void 0!==E&&E.registrationDetails&&(C.additionalDetails.registrationDetails=null==k||null===(_=k.data)||void 0===_?void 0:_.registrationDetails),null!=k&&null!==(g=k.data)&&void 0!==g&&g.applicationType&&(C.additionalDetails.applicationType=null==k||null===(A=k.data)||void 0===A?void 0:A.applicationType),null!=k&&null!==(S=k.data)&&void 0!==S&&S.serviceType&&(C.additionalDetails.serviceType=null==k||null===(h=k.data)||void 0===h?void 0:h.serviceType),C.landInfo=(null==k||null===(b=k.data)||void 0===b||null===(y=b.bpaData)||void 0===y||null===(T=y.bpaApprovalResponse)||void 0===T?void 0:T[0].landInfo)||{};var N=sessionStorage.getItem("BPA_ARCHITECT_NAME"),I=N?JSON.parse(N):"ARCHITECT";C.additionalDetails.typeOfArchitect=I,Digit.OBPSService.create({BPA:C},K).then(function(e,n){var t;(null==e||null===(t=e.BPA)||void 0===t?void 0:t.length)>0&&(e.BPA[0].data=k.data,e.BPA[0].uiFlow=null==k?void 0:k.uiFlow,M("",e.BPA[0],"",!0))}).catch(function(e){var n,t,l;q({key:"true",message:(null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null})})}else M(F.key,j)},onSkip:function(){return M()}},t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},U("BPA_EDCR_DETAILS")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",style:{border:"none"},label:U("OCBPA"===G?"BPA_OC_EDCR_NO_LABEL":"BPA_EDCR_NO_LABEL"),text:null==ee?void 0:ee.edcrNumber,labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}),t.createElement(o.Row,{className:"border-none",label:U("BPA_UPLOADED_PLAN_DIAGRAM"),text:t.createElement(te,{label:U("BPA_UPLOADED_PLAN_DXF"),jumpTo:null==ee?void 0:ee.updatedDxfFile})}),t.createElement(o.Row,{className:"border-none",label:U("BPA_SCRUNTINY_REPORT_OUTPUT"),text:t.createElement(te,{label:U("BPA_SCRUTINY_REPORT_PDF"),jumpTo:null==ee?void 0:ee.planReport})})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},U("OCBPA"===G?"BPA_ACTUAL_BUILDING_EXTRACT_HEADER":"BPA_BUILDING_EXTRACT_HEADER")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:U("BPA_TOTAL_BUILT_UP_AREA_HEADER"),text:null!=ee&&null!==(c=ee.planDetail)&&void 0!==c&&null!==(s=c.blocks)&&void 0!==s&&null!==(v=s[0])&&void 0!==v&&null!==(p=v.building)&&void 0!==p&&p.totalBuitUpArea?(null==ee||null===(m=ee.planDetail)||void 0===m||null===(f=m.blocks)||void 0===f||null===(E=f[0])||void 0===E||null===(_=E.building)||void 0===_?void 0:_.totalBuitUpArea)+" "+U("BPA_SQ_MTRS_LABEL"):U("NA")}),t.createElement(o.Row,{className:"border-none",label:U("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),text:null==ee||null===(g=ee.planDetail)||void 0===g||null===(A=g.blocks)||void 0===A||null===(S=A[0])||void 0===S||null===(h=S.building)||void 0===h?void 0:h.totalFloors}),t.createElement(o.Row,{className:"border-none",label:U("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),text:null!=ee&&null!==(b=ee.planDetail)&&void 0!==b&&null!==(y=b.blocks)&&void 0!==y&&null!==(T=y[0])&&void 0!==T&&null!==(C=T.building)&&void 0!==C&&C.declaredBuildingHeight?(null==ee||null===(D=ee.planDetail)||void 0===D||null===(P=D.blocks)||void 0===P||null===(N=P[0])||void 0===N||null===(I=N.building)||void 0===I?void 0:I.declaredBuildingHeight)+" "+U("BPA_MTRS_LABEL"):U("NA")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},U("BPA_OCC_SUBOCC_HEADER")),null==ee||null===(L=ee.planDetail)||void 0===L||null===(B=L.blocks)||void 0===B?void 0:B.map(function(e,n){var l,i,a,r;return t.createElement("div",{key:n,style:{marginTop:"20px"}},t.createElement(o.CardSubHeader,{style:{fontSize:"18px"}},U("BPA_BLOCK_SUBHEADER")," ",n+1),"OCBPA"!==G?t.createElement(o.CardSectionHeader,{style:{fontWeight:"normal"},className:"card-label-smaller"},U("BPA_SUB_OCCUPANCY_LABEL")):null,"OCBPA"!==G?t.createElement(o.MultiSelectDropdown,{BlockNumber:e.number,className:"form-field",isMandatory:!0,defaultUnit:"Selected",selected:j["Block_"+e.number],options:(r=[],null==$||null===(i=$.BPA)||void 0===i||null===(a=i.SubOccupancyType)||void 0===a||a.map(function(e){var n;r.push({code:e.code,name:e.name,i18nKey:"BPA_SUBOCCUPANCYTYPE_"+fn(null==e||null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),"-","_")})}),Digit.Utils.locale.sortDropdownNames(r,"i18nKey",U)),onSelect:function(n){return function(e,n,t){var l=j,i=[];e&&(null==e||e.map(function(e){i.push(null==e?void 0:e[1])})),l["Block_"+t]=i,H(i),z(l)}(n,0,e.number)},isOBPSMultiple:!0,optionsKey:"i18nKey",ServerStyle:{width:"100%",overflowX:"hidden"},t:U}):null,"OCBPA"!==G?t.createElement("div",{className:"tag-container"},j["Block_"+e.number]&&j["Block_"+e.number].length>0&&(null===(l=j["Block_"+e.number])||void 0===l?void 0:l.map(function(n,l){return t.createElement(o.RemoveableTag,{key:l,text:""+U(n.i18nKey),onClick:function(){return function(e,n,t){var l=j["Block_"+t].filter(function(n,t){return t!==e});H(l);var i=j;i["Block_"+t]=l,z(i)}(l,0,e.number)}})}))):null,"OCBPA"!==G?j["Block_"+e.number]&&j["Block_"+e.number].length>0&&t.createElement(o.LinkButton,{style:{textAlign:"left"},label:"Clear All",onClick:function(){return(t=j)["Block_"+e.number]=n=[],H(n),void z(t);var n,t}}):null,t.createElement("div",{style:{marginTop:"20px"}},"OCBPA"===G?t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:""+U("BPA_SUB_OCCUPANCY_LABEL"),text:oe(n)})):null,t.createElement("div",{style:{overflowX:"scroll"}},t.createElement(o.Table,{className:"customTable table-fixed-first-column table-border-style",t:U,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:ne(e),columns:ie,getCellProps:function(e){return{style:{}}}}))))}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},U("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{label:U("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),text:null!=ee&&null!==(O=ee.planDetail)&&void 0!==O&&null!==(R=O.planInformation)&&void 0!==R&&R.demolitionArea?(null==ee||null===(x=ee.planDetail)||void 0===x||null===(w=x.planInformation)||void 0===w?void 0:w.demolitionArea)+" "+U("BPA_SQ_MTRS_LABEL"):U("CS_NA")}))),X&&t.createElement(o.Toast,{error:!0,label:U(null==X?void 0:X.message),isDleteBtn:!0,onClose:function(){q(null)}}))},OwnerDetails:function(e){var l,i,a,r,d,c,s,v=e.t,p=e.config,m=e.onSelect,f=e.formData;sessionStorage.removeItem("currentPincode");var E=window.location.href.includes("edit-application"),_=window.location.href.includes("renew-trade"),g=Digit.ULBService.getCurrentTenantId(),A=Digit.ULBService.getStateId(),S=n.useState(!E&&!_),h=S[0],b=S[1],y=n.useState([]),T=y[0],C=y[1],D=n.useState([]),P=D[0],N=D[1],I=n.useState(null==f||null===(l=f.owners)||void 0===l?void 0:l.ownershipCategory),L=I[0],B=I[1],O=n.useState((null==f||null===(i=f.owners)||void 0===i?void 0:i.name)||"")[1],R=n.useState(!1)[1],x=n.useState(null==f||null===(a=f.owners)||void 0===a?void 0:a.gender)[1],w=n.useState((null==f||null===(r=f.owners)||void 0===r?void 0:r.mobileNumber)||"")[1],M=n.useState(null),k=M[0],F=M[1],U=n.useState(!1),H=U[0],W=U[1],j=n.useState({}),z=j[0],Y=j[1],K=(Digit.Utils.browser.isMobile(),!(null==L||!L.code.includes("MULTIPLEOWNERS")));null==f||null===(d=f.owners)||void 0===d||null===(c=d.owners)||void 0===c||c.forEach(function(e){"false"==e.isPrimaryOwner&&(e.isPrimaryOwner=!1)});var G=n.useState((null==f?void 0:f.owners)&&(null==f||null===(s=f.owners)||void 0===s?void 0:s.owners)||[{name:"",gender:"",mobileNumber:null,isPrimaryOwner:!0}]),V=G[0],X=G[1];n.useEffect(function(){var e=0;V.map(function(n){n.isPrimaryOwner&&(e=1),b(!(n.name&&n.mobileNumber&&n.gender))}),h||!L||null!=L&&L.code.includes("SINGLEOWNER")||b(1!=e)},[V]),n.useEffect(function(){var e=pn(V);L&&!K&&(null==e?void 0:e.length)>1&&X([u({},e[0],{isPrimaryOwner:!0})])},[L]);var q=Digit.Hooks.obps.useMDMS(A,"common-masters",["OwnerShipCategory"]),J=q.isLoading,Z=q.data,Q=Digit.Hooks.obps.useMDMS(A,"common-masters",["GenderType"]).data;n.useEffect(function(){var e,n=null==Z||null===(e=Z["common-masters"])||void 0===e?void 0:e.OwnerShipCategory;if(n&&(null==n?void 0:n.length)>0){var t=n.filter(function(e){var n;return null==e||null===(n=e.code)||void 0===n?void 0:n.includes("INDIVIDUAL")});t.forEach(function(e){e.i18nKey="COMMON_MASTERS_OWNERSHIPCATEGORY_"+fn(null==e?void 0:e.code,".","_")}),C(t)}},[Z]),n.useEffect(function(){var e,n=(null==Q||null===(e=Q["common-masters"])||void 0===e?void 0:e.GenderType)||[];if(n&&(null==n?void 0:n.length)>0){var t=n.filter(function(e){return e.active});t.forEach(function(e){e.i18nKey="COMMON_GENDER_"+e.code}),N(t)}},[Q]);var $,ee=n.useState(null),ne=ee[0],te=ee[1];return t.createElement("div",null,t.createElement(zt,{currentStep:2}),t.createElement(o.FormStep,{config:p,onSelect:function(){try{return te(null),Promise.resolve(function(e,n){try{var t=!1,l=[];return l=null==V?void 0:V.map(function(e,n){var t;return Digit.UserService.userSearch(Digit.ULBService.getStateId(),{userName:null==V||null===(t=V[n])||void 0===t?void 0:t.mobileNumber},{}).then(function(e){return e})}),Promise.resolve(Promise.all(l)).then(function(e){var n,i=[],o=!1;return(l=e)&&(null===(n=l)||void 0===n?void 0:n.length)>0&&l.map(function(e){var n,l,a,r,u,d;o=null==e||null===(n=e.user)||void 0===n||null===(l=n[0])||void 0===l||null===(a=l.roles)||void 0===a||null===(r=a.filter(function(e){return"BPA_ARCHITECT"===e.code||"BPA_SUPERVISOR"===e.code}))||void 0===r?void 0:r[0],V.find(function(n){var t,l,i,a,r,u;return!(null!=n&&n.uuid&&!o)&&((null==n?void 0:n.name)===(null==e||null===(t=e.user)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.name)&&(null==n?void 0:n.mobileNumber)===(null==e||null===(i=e.user)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.mobileNumber)||(null==n?void 0:n.mobileNumber)===(null==e||null===(r=e.user)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.mobileNumber)&&o)})&&(t=!0,i.push(null==e||null===(u=e.user)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.mobileNumber))}),(null==i?void 0:i.length)>0&&F({key:"true",error:!0,message:v("BPA_OWNER_VALIDATION_1")+" "+(null==i?void 0:i.join(", "))+" "+v("BPA_OWNER_VALIDATION_2")}),1!=t})}catch(e){return Promise.reject(e)}}()).then(function(e){if(e)if(1==K&&1==V.length)window.scrollTo(0,0),te("BPA_ERROR_MULTIPLE_OWNER");else{var n,t=f.owners;if(n=u({},t,{owners:V,ownershipCategory:L}),null!=f&&f.id)m(p.key,n);else{var l,i,o,a,r,d,c,s,v,E,_,A,S,h,b,y,T,C,D,P,N,I,B,O,R,x,w,M,k,U,H,j,z,Y,G,X,q,J,Z,Q;W(!0);var $=[];null===(l=n)||void 0===l||null===(i=l.owners)||void 0===i||i.map(function(e){$.push(u({},e,{active:!0,name:e.name,mobileNumber:e.mobileNumber,isPrimaryOwner:e.isPrimaryOwner,gender:e.gender.code,fatherOrHusbandName:"NAME"}))});var ee={};ee.edcrNumber=null!=f&&null!==(o=f.edcrNumber)&&void 0!==o&&o.edcrNumber?null==f||null===(a=f.edcrNumber)||void 0===a?void 0:a.edcrNumber:null==f||null===(r=f.data)||void 0===r||null===(d=r.scrutinyNumber)||void 0===d?void 0:d.edcrNumber,ee.riskType=null==f||null===(c=f.data)||void 0===c?void 0:c.riskType,ee.applicationType=null==f||null===(s=f.data)||void 0===s?void 0:s.applicationType,ee.serviceType=null==f||null===(v=f.data)||void 0===v?void 0:v.serviceType;var ne=Digit.UserService.getUser(),le=null==ne||null===(E=ne.info)||void 0===E?void 0:E.uuid;ee.tenantId=null==f||null===(_=f.address)||void 0===_||null===(A=_.city)||void 0===A?void 0:A.code,ee.workflow={action:"INITIATE",assignes:[null==ne||null===(S=ne.info)||void 0===S?void 0:S.uuid]},ee.accountId=le,ee.documents=null,ee.additionalDetails={GISPlaceName:null==f||null===(h=f.address)||void 0===h?void 0:h.placeName},null!=f&&null!==(b=f.data)&&void 0!==b&&b.holdingNumber&&(ee.additionalDetails.holdingNo=null==f||null===(y=f.data)||void 0===y?void 0:y.holdingNumber),null!=f&&null!==(T=f.data)&&void 0!==T&&T.registrationDetails&&(ee.additionalDetails.registrationDetails=null==f||null===(C=f.data)||void 0===C?void 0:C.registrationDetails),null!=f&&null!==(D=f.data)&&void 0!==D&&D.applicationType&&(ee.additionalDetails.applicationType=null==f||null===(P=f.data)||void 0===P?void 0:P.applicationType),null!=f&&null!==(N=f.data)&&void 0!==N&&N.serviceType&&(ee.additionalDetails.serviceType=null==f||null===(I=f.data)||void 0===I?void 0:I.serviceType),ee.landInfo={},ee.landInfo.address={},null!=f&&null!==(B=f.address)&&void 0!==B&&null!==(O=B.city)&&void 0!==O&&O.code&&(ee.landInfo.address.city=null==f||null===(R=f.address)||void 0===R||null===(x=R.city)||void 0===x?void 0:x.code),null!=f&&null!==(w=f.address)&&void 0!==w&&null!==(M=w.locality)&&void 0!==M&&M.code&&(ee.landInfo.address.locality={code:null==f||null===(k=f.address)||void 0===k||null===(U=k.locality)||void 0===U?void 0:U.code}),null!=f&&null!==(H=f.address)&&void 0!==H&&H.pincode&&(ee.landInfo.address.pincode=null==f||null===(j=f.address)||void 0===j?void 0:j.pincode),null!=f&&null!==(z=f.address)&&void 0!==z&&z.landmark&&(ee.landInfo.address.landmark=null==f||null===(Y=f.address)||void 0===Y?void 0:Y.landmark),null!=f&&null!==(G=f.address)&&void 0!==G&&G.street&&(ee.landInfo.address.street=null==f||null===(X=f.address)||void 0===X?void 0:X.street),null!=f&&null!==(q=f.address)&&void 0!==q&&q.geoLocation&&(ee.landInfo.address.geoLocation=null==f||null===(J=f.address)||void 0===J?void 0:J.geoLocation),ee.landInfo.owners=$,ee.landInfo.ownershipCategory=L.code,ee.landInfo.tenantId=null==f||null===(Z=f.address)||void 0===Z||null===(Q=Z.city)||void 0===Q?void 0:Q.code,ee.landInfo.unit=(se=(null==(ae=f)||null===(re=ae.data)||void 0===re||null===(ue=re.edcrDetails)||void 0===ue||null===(de=ue.planDetail)||void 0===de?void 0:de.blocks)||[],ve=[],(ce=null==ae?void 0:ae.subOccupancy)&&Object.entries(ce).map(function(e,n){var t,l,i,o,a,r,u,d;ve.push({blockIndex:n,floorNo:e[0].split("_")[1],unitType:"Block",occupancyType:(null==se||null===(t=se[n])||void 0===t||null===(l=t.building)||void 0===l||null===(i=l.occupancies)||void 0===i||null===(o=i[0])||void 0===o||null===(a=o.typeHelper)||void 0===a||null===(r=a.type)||void 0===r?void 0:r.code)||"A",usageCategory:(u=e[1],d="",u.map(function(e,n){d=d+(0!==n?",":"")+e.code}),d)})}),ve);var ie=sessionStorage.getItem("BPA_ARCHITECT_NAME"),oe=ie?JSON.parse(ie):"ARCHITECT";ee.additionalDetails.typeOfArchitect=oe,Digit.OBPSService.create({BPA:ee},g).then(function(e,n){var l,i,o,a,r,d,c,s,v,p,E,_,g;(null==e||null===(l=e.BPA)||void 0===l?void 0:l.length)>0&&(null==e||null===(i=e.BPA)||void 0===i||null===(o=i[0])||void 0===o||null===(a=o.landInfo)||void 0===a||null===(r=a.owners)||void 0===r||r.forEach(function(e){e.gender={code:e.gender,active:!0,i18nKey:"COMMON_GENDER_"+e.gender}}),e.BPA[0].owners=u({},t,{owners:null==e||null===(d=e.BPA)||void 0===d||null===(c=d[0])||void 0===c||null===(s=c.landInfo)||void 0===s?void 0:s.owners,ownershipCategory:L}),e.BPA[0].address=null==e||null===(v=e.BPA)||void 0===v||null===(p=v[0])||void 0===p||null===(E=p.landInfo)||void 0===E?void 0:E.address,e.BPA[0].address.city=f.address.city,e.BPA[0].address.locality=f.address.locality,e.BPA[0].placeName=null==f||null===(_=f.address)||void 0===_?void 0:_.placeName,e.BPA[0].data=f.data,e.BPA[0].BlockIds=(g={},e.BPA[0].landInfo.unit.map(function(e,n){g["Block_"+e.floorNo]=e.id}),g),e.BPA[0].subOccupancy=null==f?void 0:f.subOccupancy,e.BPA[0].uiFlow=null==f?void 0:f.uiFlow,W(!1),m("",e.BPA[0],"",!0))}).catch(function(e){var n,t,l;W(!1),F({key:"true",error:!0,message:null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message})})}}var ae,re,ue,de,ce,se,ve})}catch(e){return Promise.reject(e)}},onSkip:function(){return m()},t:v,isDisabled:h||($=0,V&&(null==V||V.map(function(e){var n;1===$||null!=e&&e.name&&null!=e&&e.mobileNumber&&null!=e&&null!==(n=e.gender)&&void 0!==n&&n.code||($=1)})),0!=$)||!L||H||k,forcedError:v(ne)},J?t.createElement(o.Loader,null):t.createElement("div",{style:{marginBottom:"10px"}},t.createElement("div",null,t.createElement(o.CardLabel,null,v("BPA_TYPE_OF_OWNER_LABEL")+" *"),t.createElement(o.RadioButtons,{isMandatory:p.isMandatory,options:T,selectedOption:L,optionsKey:"i18nKey",onSelect:function(e){B(e)},value:L,labelKey:"PT_OWNERSHIP",isDependent:!0})),V.map(function(e,n){return t.createElement("div",{key:e+"-"+n},t.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},t.createElement(o.CardLabel,{style:{marginBottom:"-15px"}},v("CORE_COMMON_MOBILE_NUMBER")+" *"),K&&t.createElement(o.LinkButton,{label:t.createElement(o.DeleteIcon,{style:{float:"right",position:"relative",bottom:"5px"},fill:1!=V.length?"#494848":"#FAFAFA"}),style:{width:"100px",display:"inline",background:"black"},onClick:function(e){return function(e){var n=[].concat(V);1!=n.length&&(n.splice(e,1),1==n.length&&(n[0]=u({},n[0],{isPrimaryOwner:!0})),X(n))}(n)}}),t.createElement("div",{style:{marginTop:"30px"}},t.createElement("div",{className:"field-container"},t.createElement("div",{style:{position:"relative",zIndex:"100",left:"35px",marginTop:"-24.5px",marginLeft:"-25px"}},"+91"),t.createElement(o.TextInput,u({style:{background:"#FAFAFA",padding:"0px 35px"},type:"text",t:v,isMandatory:!1,optionKey:"i18nKey",name:"mobileNumber",value:e.mobileNumber,onChange:function(e){return function(e,n){var t=[].concat(V);t[e].mobileNumber=n.target.value,w(n.target.value),X(t),t[e].gender&&t[e].mobileNumber&&t[e].name&&b(!1)}(n,e)}},{isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:v("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")})),t.createElement("div",{style:{position:"relative",zIndex:"100",right:"35px",marginTop:"-24px",marginRight:"-20px"},onClick:function(e){return function(e,n){try{var t,l,i=pn(V),o=(null==i||null===(t=i[e])||void 0===t?void 0:t.mobileNumber)||"";if(F(null),!o.match(mn("MobileNo")))return F({key:"true",error:!0,message:"ERR_MOBILE_NUMBER_INCORRECT"}),Promise.resolve();if(o===(null==i||null===(l=i[e])||void 0===l?void 0:l.userName)&&"BPA_ARCHITECT"!==(null==z?void 0:z.code)&&"BPA_SUPERVISOR"!==(null==z?void 0:z.code))return F({key:"true",error:!0,message:"ERR_OWNER_ALREADY_ADDED_TOGGLE_MSG"}),Promise.resolve();var a=i.findIndex(function(e){return e.userName===o});return Promise.resolve(function(){var n;if(!(a>-1&&"BPA_ARCHITECT"!==(null==z?void 0:z.code)&&"BPA_SUPERVISOR"!==(null==z?void 0:z.code)))return Promise.resolve(Digit.UserService.userSearch(Digit.ULBService.getStateId(),{userName:null==V||null===(n=V[e])||void 0===n?void 0:n.mobileNumber},{})).then(function(n){var t,l,o,a,r,u=null==n||null===(t=n.user)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.roles)||void 0===o||null===(a=o.filter(function(e){return"BPA_ARCHITECT"===e.code||"BPA_SUPERVISOR"===e.code}))||void 0===a?void 0:a[0];if(0===(null==n||null===(r=n.user)||void 0===r?void 0:r.length))F({key:"true",warning:!0,message:"ERR_MOBILE_NUMBER_NOT_REGISTERED"});else{var d,c,s,v,p,m=null==n||null===(d=n.user)||void 0===d?void 0:d[0];m.gender=m.gender?{code:m.gender,active:!0,i18nKey:"COMMON_GENDER_"+m.gender}:"",null!=m&&m.dob&&(m.dob=Cn(null==m?void 0:m.dob)),null!=m&&m.createdDate&&(m.createdDate=In(null==m?void 0:m.createdDate),m.lastModifiedDate=In(null==m?void 0:m.lastModifiedDate),m.pwdExpiryDate=In(null==m?void 0:m.pwdExpiryDate));var f,E=[].concat(i);E[e]&&(E[e]=m,E[e].isPrimaryOwner=(null===(f=V[e])||void 0===f?void 0:f.isPrimaryOwner)||!1),X(E),null!==(c=E[e])&&void 0!==c&&c.mobileNumber&&null!==(s=E[e])&&void 0!==s&&s.name&&null!==(v=E[e])&&void 0!==v&&null!==(p=v.gender)&&void 0!==p&&p.code?b(!0):b(!1),u&&(b(!1),Y(u),F({key:"true",error:!0,message:"BPA_OWNER_VALIDATION_"+(null==u?void 0:u.code)}))}});F({key:"true",error:!0,message:"ERR_OWNER_ALREADY_ADDED"})}())}catch(e){return Promise.reject(e)}}(n)}}," ",t.createElement(o.SearchIcon,null)," "))),t.createElement(o.CardLabel,null,v("CORE_COMMON_NAME")+" *"),t.createElement(o.TextInput,u({style:{background:"#FAFAFA"},t:v,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name",value:e.name,onChange:function(e){return function(e,n){var t=[].concat(V);t[e].name=n.target.value,O(n.target.value),X(t),t[e].gender&&t[e].mobileNumber&&t[e].name&&b(!1)}(n,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:v("TL_NAME_ERROR_MESSAGE")})),t.createElement(o.CardLabel,null,v("BPA_APPLICANT_GENDER_LABEL")+" *"),t.createElement(o.RadioOrSelect,{name:"gender",options:P,selectedOption:e.gender,optionKey:"i18nKey",onSelect:function(e){return t=n,l=e,(i=[].concat(V))[t].gender=l,x(l),X(i),void(i[t].gender&&i[t].mobileNumber&&i[t].name&&b(!1));var t,l,i},t:v}),K&&t.createElement(o.CheckBox,{label:v("BPA_IS_PRIMARY_OWNER_LABEL"),onChange:function(e){return function(e,n){var t=[].concat(V);t.map(function(e){e.isPrimaryOwner=!1}),t[e].isPrimaryOwner=!K||n.target.checked,R(n.target.checked),X(t)}(n,e)},value:e.isPrimaryOwner,checked:e.isPrimaryOwner,style:{paddingTop:"10px"}})))}),K?t.createElement("div",null,t.createElement("div",{style:{display:"flex",paddingBottom:"15px",color:"#FF8C00"}},t.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:function(){return(e=[].concat(V)).push({name:"",gender:"",mobileNumber:null,isPrimaryOwner:!1}),X(e),void b(!0);var e}},v("BPA_ADD_OWNER")))):null)),k&&t.createElement(o.Toast,{error:null==k?void 0:k.error,warning:null==k?void 0:k.warning,label:v(null==k?void 0:k.message),isDleteBtn:!0,onClose:function(){F(null)}}))},DocumentDetails:function(e){var l,i,a=e.t,r=e.config,d=e.onSelect,c=e.formData,s=Digit.ULBService.getStateId(),v=n.useState((null==c||null===(l=c.documents)||void 0===l?void 0:l.documents)||[]),p=v[0],m=v[1],f=n.useState(null),E=f[0],_=f[1],g=n.useState(!0),A=g[0],S=g[1],h=n.useState(!1),b=h[0],y=h[1],T=null==c||null===(i=c.uiFlow)||void 0===i?void 0:i.flow,C=pn((null==c?void 0:c.PrevStateDocuments)||[]),D=Digit.Hooks.obps.useBPATaxDocuments(s,c,C||[]),P=D.data,N=D.isLoading;return n.useEffect(function(){var e=P.filter(function(e){return e.required}).map(function(e){return e.code}),n=e.filter(function(e){return p.reduce(function(n,t){var l,i,o,a;return e==(null==t||null===(l=t.documentType)||void 0===l||null===(i=l.split("."))||void 0===i?void 0:i[0])+"."+(null==t||null===(o=t.documentType)||void 0===o||null===(a=o.split("."))||void 0===a?void 0:a[1])||n},!1)});S(!(n.length==e.length&&p.length>0))},[p,b]),t.createElement("div",null,t.createElement(zt,{currentStep:"OCBPA"===T?3:2,flow:"OCBPA"===T?"OCBPA":""}),N?t.createElement(o.Loader,null):t.createElement(o.FormStep,{t:a,config:r,onSelect:function(){var e,n=c.documents,t=[];P&&P.map(function(e){p&&p.filter(function(n){return e.code===fn(null==n?void 0:n.additionalDetails.category,"_",".")}).map(function(e){t.push(e)})}),e=u({},n,{documents:t}),d(r.key,e)},onSkip:function(){return d()},isDisabled:!window.location.href.includes("editApplication")&&!window.location.href.includes("sendbacktocitizen")&&A,onAdd:function(){}},null==P?void 0:P.map(function(e,n){return t.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"600px",minWidth:"280px",marginBottom:"15px",paddingTop:"15px"}},t.createElement(Kt,{key:n,document:e,t:a,error:E,setError:_,setDocuments:m,documents:p,setCheckRequiredFields:y,formData:c,beforeUploadDocuments:C||[]}))}),E&&t.createElement(o.Toast,{label:E,onClose:function(){return _(null)},error:!0})),(window.location.href.includes("/bpa/building_plan_scrutiny/new_construction")||window.location.href.includes("/ocbpa/building_oc_plan_scrutiny/new_construction"))&&null!=c&&c.applicationNo?t.createElement(o.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("BPA_APPLICATION_NUMBER_LABEL")+" "+(null==c?void 0:c.applicationNo)+" "+a("BPA_DOCS_INFORMATION"),className:"info-banner-wrap-citizen-override"}):"")},NOCDetails:function(e){var l,i,a=e.t,r=e.config,d=e.onSelect,c=e.formData,s=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),v=n.useState((null==c||null===(l=c.nocDocuments)||void 0===l?void 0:l.nocDocuments)||[]),p=v[0],m=v[1],f=n.useState(null),E=f[0],_=f[1],g=n.useState([]),A=g[0],S=g[1],h=(n.useState(!0),n.useState(!1)[1]),b=n.useState(null!=c&&c.PrevStateNocDocuments?pn(null==c?void 0:c.PrevStateNocDocuments):[]),y=b[0],T=b[1],C=null==c||null===(i=c.uiFlow)||void 0===i?void 0:i.flow,D=n.useState(null==c?void 0:c.applicationNo)[0],P=n.useState([]),N=P[0],I=P[1],L=n.useState([]),B=L[0],O=L[1],R=n.useState([]),x=R[0],w=R[1],M=Digit.Hooks.obps.useNocDetails(null==c?void 0:c.tenantId,{sourceRefId:D}).data,k=Digit.Hooks.obps.useMDMS(s,"NOC",["DocumentTypeMapping"]),F=k.isLoading,U=k.data,H=Digit.Hooks.obps.useMDMS(s,"common-masters",["DocumentType"]).data,W=Digit.Hooks.useDocumentSearch(y,{enabled:(null==y?void 0:y.length)>0}),j=W.data,z=W.isLoading;return n.useEffect(function(){var e,n;(null==j||null===(e=j.pdfFiles)||void 0===e?void 0:e.length)>0&&(null==j||null===(n=j.pdfFiles)||void 0===n||n.forEach(function(e){return e.title=null==e?void 0:e.documentType}),T(null==j?void 0:j.pdfFiles))},[null==j?void 0:j.pdfFiles]),n.useEffect(function(){I(M)},[M]),n.useEffect(function(){var e;O(null==U||null===(e=U.NOC)||void 0===e?void 0:e.DocumentTypeMapping)},[U]),n.useEffect(function(){var e;w(null==H||null===(e=H["common-masters"])||void 0===e?void 0:e.DocumentType)},[H]),n.useEffect(function(){if(null!=N&&N.length&&null!=B&&B.length){var e=[];N.map(function(n){var t,l,i=B.filter(function(e){return e.applicationType===n.applicationType&&e.nocType===n.nocType});null!=i&&null!==(t=i[0])&&void 0!==t&&null!==(l=t.docTypes)&&void 0!==l&&l[0]&&(i[0].docTypes[0].nocType=i[0].nocType,i[0].docTypes[0].additionalDetails={submissionDetails:n.additionalDetails,applicationStatus:n.applicationStatus,appNumberLink:n.applicationNo,nocNo:n.nocNo},e.push(i[0].docTypes[0]))});var n=[];e&&e.length>0&&e.map(function(e){var t=e.documentType;e.dropdownData=[],e.uploadedDocuments=[],x&&x.forEach(function(n){var l=n.code.slice(0,t.length);t===l&&(e.hasDropdown=!0,e.dropdownData.push(n))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],y.map(function(n){var l,i;t===(null==n||null===(l=n.documentType)||void 0===l?void 0:l.split(".")[0])+"."+(null==n||null===(i=n.documentType)||void 0===i?void 0:i.split(".")[1])&&e.uploadedDocuments[0].values.push(n)}),n.push(e)}),n.forEach(function(e){e.code=e.documentType,e.dropdownData.forEach(function(e){e.i18nKey=e.code})}),S(n)}},[N,B,x,y]),t.createElement("div",null,t.createElement(zt,{currentStep:3,flow:"OCBPA"===C?"OCBPA":""}),F?t.createElement(o.Loader,null):t.createElement(o.FormStep,{t:a,config:r,onSelect:function(){var e;e=u({},c.nocDocuments,{nocDocuments:p,NocDetails:N,nocTaxDocuments:A}),d(r.key,e)},onSkip:function(){var e;e=u({},c.nocDocuments,{nocDocuments:p,NocDetails:N,nocTaxDocuments:A}),d(r.key,e)},onAdd:function(){}},null==A?void 0:A.map(function(e,n){return t.createElement(Vt,{key:n,document:e,t:a,error:E,setError:_,setNocDocuments:m,nocDocuments:p,setCheckRequiredFields:h,formData:c,beforeUploadNocDocuments:y,pdfLoading:z})}),E&&t.createElement(o.Toast,{label:E,onClose:function(){return _(null)},error:!0})))},LocationDetails:function(e){var l,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N=e.t,I=e.config,L=e.onSelect,B=e.userType,O=e.formData,R=JSON.parse(sessionStorage.getItem("currentCity"))||{},x=sessionStorage.getItem("currentPincode"),w=(JSON.parse(sessionStorage.getItem("currentLocality")),Digit.Hooks.obps.useTenants()),M=(i.useLocation(),Digit.ULBService.getCurrentTenantId()),k=(Digit.ULBService.getStateId(),n.useState(null)),F=k[0],U=k[1],H=n.useState(!1),W=H[0],j=H[1],z=n.useState(x||(null===(l=O)||void 0===l||null===(a=l.address)||void 0===a?void 0:a.pincode)||""),Y=z[0],K=z[1],G=n.useState((null===(r=O)||void 0===r||null===(d=r.address)||void 0===d?void 0:d.geoLocation)||""),V=G[0],X=G[1],q=(n.useState(null===(c=O)||void 0===c||null===(s=c.Scrutiny)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.tenantIdData),n.useState(function(){var e,n;return(null===(e=O)||void 0===e||null===(n=e.address)||void 0===n?void 0:n.city)||R||null})),J=q[0],Z=q[1],Q=n.useState((null===(p=O)||void 0===p||null===(m=p.address)||void 0===m?void 0:m.street)||""),$=Q[0],ee=Q[1],ne=n.useState((null===(f=O)||void 0===f||null===(E=f.address)||void 0===E?void 0:E.landmark)||(null===(_=O)||void 0===_||null===(g=_.address)||void 0===g?void 0:g.Landmark)||""),te=ne[0],le=ne[1],ie=n.useState((null===(A=O)||void 0===A||null===(S=A.address)||void 0===S?void 0:S.placeName)||(null===(h=O)||void 0===h?void 0:h.placeName)||""),oe=ie[0],ae=ie[1],re=n.useState(w),ue=re[0],de=re[1],ce=null===(b=O)||void 0===b||null===(y=b.data)||void 0===y||null===(T=y.edcrDetails)||void 0===T?void 0:T.tenantId;O={address:u({},null===(C=O)||void 0===C?void 0:C.address)};var se=window.Digit.Utils.browser.isMobile();n.useEffect(function(){var e;if(!J||!Ee)if(ue=B&&"employee"===B?w.filter(function(e){return e.code===M}):Y?w.filter(function(e){var n;return null==e||null===(n=e.pincode)||void 0===n?void 0:n.some(function(e){return e==Number(Y)})}):w,de(ue),0==(null===(e=ue)||void 0===e?void 0:e.length))U("BPA_PIN_NOT_VALID_ERROR");else if(1==ue.length){var n;(null===(n=ue)||void 0===n?void 0:n[0].code)!=(null!=J&&J.code?null==J?void 0:J.code:J||"")&&U("BPA_PIN_NOT_VALID_ERROR")}},[Y]),n.useEffect(function(){ue.map(function(e,n){e.code===ce&&(Z(e),sessionStorage.setItem("currentCity",JSON.stringify(e)))})},[ue,null===(D=O)||void 0===D?void 0:D.data]),n.useEffect(function(){var e;ue&&1===ue.length&&(null===(e=ue)||void 0===e?void 0:e[0].code)===(null==J?void 0:J.code)&&(Z(ue[0]),sessionStorage.setItem("currentCity",JSON.stringify(ue[0])))},[ue]);var ve=Digit.Hooks.useBoundaryLocalities(null==J?void 0:J.code,"revenue",{enabled:!!J},N).data,pe=window.location.href.includes("editApplication"),me=window.location.href.includes("sendbacktocitizen"),fe=n.useState(),Ee=fe[0],_e=fe[1],ge=n.useState(O.address.locality||null),Ae=ge[0],Se=ge[1];function he(e){U(null),""!==("object"==typeof e&&null!==e?e.target.value:e)&&(("object"==typeof e&&null!==e?e.target.value:e).match(/^[1-9][0-9]{5}$/)||U("BPA_PIN_NOT_VALID_ERROR")),O.address.pincode="object"==typeof e&&null!==e?e.target.value:e,K("object"==typeof e&&null!==e?e.target.value:e),sessionStorage.setItem("currentPincode","object"==typeof e&&null!==e?e.target.value:e),sessionStorage.setItem("currentCity",JSON.stringify({})),sessionStorage.setItem("currLocality",JSON.stringify({})),Se(null),_e(null)}return n.useEffect(function(){if(J&&ve&&!F){var e,n,t,l,i,o,a,r,u,d,c=ve,s=[];null!==(e=O)&&void 0!==e&&null!==(n=e.address)&&void 0!==n&&n.locality&&(null===(t=O)||void 0===t||null===(l=t.address)||void 0===l||null===(i=l.locality)||void 0===i?void 0:i.code)===(null==Ae?void 0:Ae.code)&&Se(O.address.locality),(null!==(o=O)&&void 0!==o&&null!==(a=o.address)&&void 0!==a&&a.pincode||Y)&&!F&&(s=c.filter(function(e){var n;return null===(n=e.pincode)||void 0===n?void 0:n.find(function(e){return e==Y})}),(null===(u=O)||void 0===u||null===(d=u.address)||void 0===d||!d.locality)&&s.length<=0&&Se()),(!Ee||s.length>0&&Ee.length!==s.length||s.length<=0&&Ee&&Ee.length!==c.length)&&_e(function(){return s.length>0?s:c}),1===s.length&&(null==Ae||Ae&&(null===(r=s[0])||void 0===r?void 0:r.code)!==(null==Ae?void 0:Ae.code))&&(Se(s[0]),sessionStorage.setItem("currLocality",JSON.stringify(s[0])))}},[J,null===(P=O)||void 0===P?void 0:P.pincode,ve,Y,V]),t.createElement("div",null,!W&&t.createElement(zt,null),W&&t.createElement(Xt,{t:N,onSelect:L,formData:O,handleRemove:function(){j(!W)},onSave:function(e,n,t){he(n),sessionStorage.setItem("currentPincode",n),X(e),ae(t),j(!1),U(null)}}),!W&&t.createElement(o.FormStep,{t:N,config:I,onSelect:function(){var e={};e.pincode=Y,e.city=J,e.locality=Ae,e.street=$,e.landmark=te,e.geoLocation=V,e.placeName=oe,L(I.key,e)},isDisabled:!J||!Ae||F,isMultipleAllow:!0,forcedError:N(F)},t.createElement(o.CardLabel,null,""+N("BPA_GIS_LABEL")),t.createElement("div",{style:{}},t.createElement(o.TextInput,{style:{},isMandatory:!1,optionKey:"i18nKey",t:N,name:"gis",value:pe||me?null!==V.latitude?V.latitude+", "+V.longitude:"":oe,onChange:function(e){O.address.geoLocation="object"==typeof e&&null!==e?e.target.value:e,X("object"==typeof e&&null!==e?e.target.value:e),ae("object"==typeof e&&null!==e?e.target.value:e),sessionStorage.setItem("currentPincode",""),sessionStorage.setItem("currentCity",JSON.stringify({})),sessionStorage.setItem("currLocality",JSON.stringify({})),K(""),Se(null)}}),t.createElement(o.LinkButton,{label:t.createElement("div",null,t.createElement("span",null,t.createElement("svg",{style:se?{float:"right",position:"relative",bottom:"35px",marginTop:"-20px",marginRight:"5px"}:{position:"relative",left:"515px",bottom:"35px",marginTop:"-20px"},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M11 7C8.79 7 7 8.79 7 11C7 13.21 8.79 15 11 15C13.21 15 15 13.21 15 11C15 8.79 13.21 7 11 7ZM19.94 10C19.48 5.83 16.17 2.52 12 2.06V0H10V2.06C5.83 2.52 2.52 5.83 2.06 10H0V12H2.06C2.52 16.17 5.83 19.48 10 19.94V22H12V19.94C16.17 19.48 19.48 16.17 19.94 12H22V10H19.94ZM11 18C7.13 18 4 14.87 4 11C4 7.13 7.13 4 11 4C14.87 4 18 7.13 18 11C18 14.87 14.87 18 11 18Z",fill:"#505A5F"})))),style:{},onClick:function(e){j(!W)}})),t.createElement(o.CardLabel,null,""+N("BPA_DETAILS_PIN_LABEL")),!W&&t.createElement(o.TextInput,{isMandatory:!1,optionKey:"i18nKey",type:"text",t:N,name:"pincode",onChange:he,value:Y}),t.createElement(o.CardLabel,null,N("BPA_CITY_LABEL")+"*"),!W&&t.createElement(o.RadioOrSelect,{options:ue.sort(function(e,n){return e.name.localeCompare(n.name)}),selectedOption:J,optionKey:"code",onSelect:function(e){Se(null),_e(null),Z(e),sessionStorage.setItem("currentCity",JSON.stringify(e)),O.address.city=e},t:N,isDependent:!0,disabled:!0}),!W&&J&&Ee&&t.createElement("span",{className:"form-pt-dropdown-only"},t.createElement(o.CardLabel,null,N("BPA_LOC_MOHALLA_LABEL")+"*"),t.createElement(o.RadioOrSelect,{optionCardStyles:{maxHeight:"20vmax",overflow:"scroll"},isMandatory:I.isMandatory,options:Ee.sort(function(e,n){return e.name.localeCompare(n.name)}),selectedOption:Ae,optionKey:"i18nkey",onSelect:function(e){var n,t;null!==(n=O)&&void 0!==n&&null!==(t=n.address)&&void 0!==t&&t.locality&&(O.address.locality=e),Se(e),sessionStorage.setItem("currLocality",JSON.stringify(e))},t:N,isDependent:!0,labelKey:fn(null==J?void 0:J.code,".","_").toUpperCase()+"_REVENUE"})),t.createElement(o.CardLabel,null,""+N("BPA_DETAILS_SRT_NAME_LABEL")),!W&&t.createElement(o.TextInput,{style:{},isMandatory:!1,optionKey:"i18nKey",t:N,name:"street",onChange:function(e){ee(e.target.value)},value:$}),t.createElement(o.CardLabel,null,""+N("ES_NEW_APPLICATION_LOCATION_LANDMARK")),!W&&t.createElement(o.TextInput,{style:{},isMandatory:!1,optionKey:"i18nKey",t:N,name:"landmark",onChange:function(e){le(e.target.value)},value:te})))},GIS:Xt,OCEDCRDocsRequired:function(e){var i=e.onSelect,a=l.useTranslation().t,r=[{code:"BPA_PERMIT_NUMBER_OC_SCRUTINY_LABEL"},{code:"BPA_PERMIT_DATE_LABEL"},{code:"BPA_OC_PLAN_DXF_FILE"}];return t.createElement(n.Fragment,null,t.createElement(o.Card,null,t.createElement(o.CardHeader,null,a("BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL")),t.createElement(o.CardText,{style:{color:"#0B0C0C",marginTop:"12px",fontSize:"16px",fontWeight:"400",lineHeight:"24px"}},a("OBPS_OCEDCR_BUILDING_PERMIT_DESCRIPTION")),t.createElement(n.Fragment,null,null==r?void 0:r.map(function(e,n){return t.createElement(o.CardLabel,{style:{fontWeight:700},key:n},t.createElement("div",{style:{display:"flex"}},t.createElement("div",null,n+1+"."," "),t.createElement("div",null," "+a(null==e?void 0:e.code.replace(".","_")))))})),t.createElement(o.SubmitBar,{label:a("CS_COMMON_NEXT"),onSubmit:function(){i()}})),t.createElement(o.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("OBPS_OC_DOCS_FILE_SIZE"),className:"info-banner-wrap-citizen-override"}))},OCeDCRScrutiny:function(e){var l,i,a,r,d,c,s,v,p,m=e.t,f=e.config,E=e.onSelect,_=e.formData,g=Digit.ULBService.getCurrentTenantId(),A=(Digit.ULBService.getStateId(),n.useState(null==_||null===(l=_.ScrutinyDetails)||void 0===l?void 0:l.ocPermitNumber)),S=A[0],h=A[1],b=n.useState(null==_||null===(i=_.ScrutinyDetails)||void 0===i?void 0:i.ocPermitdate),y=b[0],T=b[1],C=n.useState(null==_?void 0:_.ScrutinyDetails),D=C[0],P=C[1],N=n.useState(null),I=N[0],L=N[1];function B(){}var O=function(){},R=function(){var e={};e.file=file,E(f.key,e)};return t.createElement("div",null,t.createElement(o.FormStep,{t:m,config:f,onSelect:R,onSkip:O,isDisabled:!S,onAdd:B,isMultipleAllow:!0},t.createElement(o.CardCaption,null,""+m("BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL")),t.createElement(o.CardHeader,null,""+m("BPA_OC_EDCR_SCRUTINY_LABEL")),t.createElement(o.CardText,null,""+m("BPA_PROVIDE_BPN_AND_BPD_APP_LABEL")),t.createElement(o.CardLabel,null,m("EDCR_BUILDING_PERMIT_NUM_LABEL")+" *"),t.createElement(o.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:m,name:"permitNumber",onChange:function(e){h(e.target.value)},value:S},{isRequired:!0,pattern:mn("Name"),title:m("BPA_INVALID_NAME")})),t.createElement(o.CardLabel,null,m("EDCR_BUILDING_PERMIT_DATE_LABEL")+" *"),t.createElement(o.DatePicker,{date:y,name:"permitDate",onChange:function(e){T(e)}}),t.createElement("div",{onClick:function(){try{P({}),L(null);var e={permitDate:Cn(y),approvalNo:S};return Digit.OBPSService.BPASearch(g,e).then(function(e,n){var t,l;if((null==e||null===(t=e.BPA)||void 0===t?void 0:t.length)>0){var i,o,a,r,u,d,c=null==e||null===(i=e.BPA)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.edcrNumber,s=null==e||null===(a=e.BPA)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.tenantId;y===function(e){if(e){var n=new Date(e),t=n.getMonth()+1,l=n.getDate();return n.getFullYear()+"-"+(t=(t>9?"":"0")+t)+"-"+(l>9?"":"0")+l}return null}(null==e||null===(u=e.BPA)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.approvalDate)?Digit.OBPSService.scrutinyDetails(s,{edcrNumber:c}).then(function(n){var t,l;Digit.WorkflowService.getAllApplication(s,{businessIds:null==e||null===(t=e.BPA)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.applicationNo,history:!0}).then(function(t,l){var i,o,a,r,u,d=null==t||null===(i=t.ProcessInstances)||void 0===i?void 0:i[(null==t||null===(o=t.ProcessInstances)||void 0===o?void 0:o.length)-1],c=(null==d||null===(a=d.assignes)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.name)||"";if((null==n||null===(u=n.edcrDetail)||void 0===u?void 0:u.length)>0){var s,v,p,m,f,E,_=null==e||null===(s=e.BPA)||void 0===s||null===(v=s[0])||void 0===v||null===(p=v.landInfo)||void 0===p||null===(m=p.owners)||void 0===m?void 0:m.filter(function(e){return e.isPrimaryOwner&&"false"!=e.isPrimaryOwner});n.edcrDetail[0].applicantName=null==_||null===(f=_[0])||void 0===f?void 0:f.name,n.edcrDetail[0].ocPermitNumber=S,n.edcrDetail[0].ocPermitdate=y,n.edcrDetail[0].appliedBy=c,P(null==n||null===(E=n.edcrDetail)||void 0===E?void 0:E[0])}}).catch(function(e){var n,t,l;L({key:"error",error:!0,message:(null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null})})}).catch(function(e){var n,t,l;L({key:"error",error:!0,message:(null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null})}):L({key:"error",warning:!0,message:m("ERR_FILL_EDCR_PERMIT_INCORRECT_DATE")})}else 0==(null==e||null===(l=e.BPA)||void 0===l?void 0:l.length)&&L({key:"error",error:!0,message:m("BPA_NO_REC_FOUND_LABEL")})}).catch(function(e){var n,t,l;L({key:"error",error:!0,message:(null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null})}),Promise.resolve()}catch(e){return Promise.reject(e)}}},t.createElement(o.SubmitBar,{label:m("ACTION_TEST_BPA_STAKE_HOLDER_SEARCH"),disabled:!S||!y})),I&&t.createElement(o.Toast,{error:null==I?void 0:I.error,warning:null==I?void 0:I.warning,label:m(null==I?void 0:I.message),isDleteBtn:!0,onClose:function(){L(null)}})),null!=D&&D.edcrNumber?t.createElement(o.FormStep,{t:m,config:f,onSelect:R,onSkip:O,isDisabled:!S,onAdd:B,isMultipleAllow:!0},t.createElement(o.StatusTable,null,t.createElement(o.Row,{label:""+m("REPORT_FSM_RESULT_APPLICANTNAME"),text:m(null==D?void 0:D.applicantName),className:"border-none"}),t.createElement(o.Row,{label:""+m("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:m(null==D?void 0:D.applicationSubType),className:"border-none"}),t.createElement(o.Row,{label:""+m("EDCR_TOTAL_BUILD_UP_AREA_LABEL"),text:m(null==D||null===(a=D.planDetail)||void 0===a||null===(r=a.virtualBuilding)||void 0===r?void 0:r.totalBuitUpArea),className:"border-none"}),t.createElement(o.Row,{label:""+m("EDCR_BUILDING_HEIGHT_LABEL"),text:m(null==D||null===(d=D.planDetail)||void 0===d||null===(c=d.blocks[0])||void 0===c||null===(s=c.building)||void 0===s?void 0:s.buildingHeight),className:"border-none"}),t.createElement(o.Row,{label:""+m("BPA_ARCHITECT_NAME_LABEL"),text:m(null==D?void 0:D.appliedBy),className:"border-none"})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement("h1",{style:{fontSize:"18px",lineHeight:"21px",fontWeight:"700",padding:"0px 0px 16px 0px"}},""+m("BPA_PERMIT_EDCR_DETAILS_LABEL")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{label:""+m("BPA_EDCR_NO_LABEL"),text:m(null==D?void 0:D.edcrNumber),className:"border-none"})),t.createElement("h1",{style:{fontSize:"18px",lineHeight:"21px",fontWeight:"700",padding:"0px 0px 16px 0px"}},""+m("BPA_UPLOADED_PLAN_DIAGRAM_LABEL")),t.createElement("a",{target:"_",href:null==D?void 0:D.updatedDxfFile,style:{minWidth:"160px",marginRight:"20px"},key:null==D?void 0:D.updatedDxfFile},t.createElement(o.PDFSvg,null),t.createElement("p",{style:(v={marginTop:"8px",fontWeight:"bold",fontSize:"14px",lineHeight:"19px",color:"#505A5F"},v.fontWeight="400",v)},m("BPA_UPLOADED_PLAN_DXF"))),t.createElement("h1",{style:{fontSize:"18px",lineHeight:"21px",fontWeight:"700",padding:"0px 0px 16px 0px"}},""+m("BPA_SCRUTINY_REPORT_OUTPUT_LABEL")),t.createElement("a",{target:"_",href:null==D?void 0:D.planReport,style:{minWidth:"160px",marginRight:"20px"},key:null==D?void 0:D.planReport},t.createElement(o.PDFSvg,null),t.createElement("p",{style:(p={marginTop:"8px",fontWeight:"bold",fontSize:"14px",lineHeight:"19px",color:"#505A5F"},p.fontWeight="400",p)},m("BPA_SCRUTINY_REPORT_PDF"))),t.createElement("div",{onClick:function(){E(f.key,D)}},t.createElement(o.SubmitBar,{label:m("BPA_PROCEED_OC_SCRUTINY_LABEL")}))):null)},OCUploadPlanDiagram:function(e){var l,a=e.t,r=e.config,u=e.onSelect,d=e.formData,c=e.isShowToast,s=e.isSubmitBtnDisable,v=e.setIsShowToast,p=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),n.useState(function(){var e;return(null==d||null===(e=d.uploadData)||void 0===e?void 0:e.file)||null})),m=p[0],f=p[1],E=n.useState(null==d||null===(l=d.uploadData)||void 0===l?void 0:l.file),_=E[0],g=E[1],A=n.useState(""),S=A[0],h=A[1],b=i.useHistory();return n.useEffect(function(){(S||c)&&(f(null),g(""),h("")),c&&b.push("/digit-ui/citizen/obps/edcrscrutiny/oc-apply/acknowledgement",{data:null!=c&&c.label?null==c?void 0:c.label:"BPA_INTERNAL_SERVER_ERROR",type:"ERROR"})},[S,c,s]),s?t.createElement(o.Loader,null):t.createElement(o.FormStep,{t:a,config:r,onSelect:function(){var e={};e.file=_,u(r.key,e,!0,!0)},onSkip:function(){},isDisabled:!_||s,onAdd:function(){},isMultipleAllow:!0},t.createElement(o.CardLabel,null,a("BPA_OC_PLAN_DIAGRAM_DXF")+" *"),t.createElement(o.UploadFile,{id:"oc-doc",extraStyleName:"propertyCreate",onUpload:function(e){f(e.target.files[0]),g(e.target.files[0])},onDelete:function(){f(null),g("")},message:m?"1 "+a("PT_ACTION_FILEUPLOADED"):a("ES_NO_FILE_SELECTED_LABEL"),uploadMessage:S}),t.createElement("div",{style:{disabled:"true",height:"30px",width:"100%",fontSize:"14px"}}),c&&t.createElement(o.Toast,{error:c.key,label:a(c.label),onClose:function(){return v(null)},isDleteBtn:!0}))},StakeholderDocsRequired:function(e){var a,r,u,d,c=e.onSelect,s=l.useTranslation().t,v=Digit.ULBService.getCurrentTenantId(),p=Digit.ULBService.getStateId(),m=(i.useHistory(),Digit.Hooks.obps.useMDMS(p,"StakeholderRegistraition","TradeTypetoRoleMapping")),f=m.data,E=m.isLoading,_=window.location.href.includes("/openlink/");return Digit.Utils.browser.isMobile(),n.useEffect(function(){v&&Digit.LocalizationService.getLocale({modules:["rainmaker-bpareg"],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+v})},[v]),E?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,t.createElement("div",{className:_?"OpenlinkContainer":""},t.createElement(o.Card,null,t.createElement(o.CardHeader,null,s("BPA_NEW_BUILDING_HEADER")),t.createElement(o.CardText,{style:{color:"#0B0C0C",marginTop:"12px",fontSize:"16px",fontWeight:"400",lineHeight:"24px"}},s("BPA_NEW_BUILDING_PERMIT_DESCRIPTION")),E?t.createElement(o.Loader,null):t.createElement(n.Fragment,null,null==f||null===(a=f.StakeholderRegistraition)||void 0===a||null===(r=a.TradeTypetoRoleMapping)||void 0===r||null===(u=r[0])||void 0===u||null===(d=u.docTypes)||void 0===d?void 0:d.map(function(e,n){return t.createElement("div",null,t.createElement("div",{style:{fontWeight:700,marginBottom:"8px"},key:n},t.createElement("div",{style:{display:"flex"}},t.createElement("div",{style:{minWidth:"20px"}},n+1+"."," "),t.createElement("div",null," "+s("BPAREG_HEADER_"+(null==e?void 0:e.code.replace(".","_")))))),t.createElement("div",{style:{marginBottom:"16px"}},t.createElement("div",{style:{display:"flex"}},t.createElement("div",{style:{minWidth:"20px"}}),null!=e&&e.info?t.createElement("div",{style:{color:"#505A5F",fontSize:"16px"}},""+s(null==e?void 0:e.info.replace(".","_"))):null)))})),t.createElement(o.SubmitBar,{label:s("CS_COMMON_NEXT"),onSubmit:c})),t.createElement(o.CitizenInfoLabel,{info:s("CS_FILE_APPLICATION_INFO_LABEL"),text:s("OBPS_DOCS_FILE_SIZE"),className:"info-banner-wrap-citizen-override"})))},LicenseType:function(e){var l,i,a,r,u,d,c,s,v,p,m=e.t,f=e.config,E=e.onSelect,_=e.formData;null!==JSON.parse(sessionStorage.getItem("BPAREGintermediateValue"))?(_=JSON.parse(sessionStorage.getItem("BPAREGintermediateValue")),sessionStorage.setItem("BPAREGintermediateValue",null)):_=_,window.location.href.split("/").pop(),Digit.ULBService.getCurrentTenantId();var g,A,S=Digit.ULBService.getStateId(),h=n.useState((null===(l=_)||void 0===l||null===(i=l.LicneseType)||void 0===i?void 0:i.LicenseType)||(null===(a=_)||void 0===a||null===(r=a.formData)||void 0===r||null===(u=r.LicneseType)||void 0===u?void 0:u.LicenseType)||""),b=h[0],y=h[1],T=n.useState((null===(d=_)||void 0===d||null===(c=d.LicneseType)||void 0===c?void 0:c.ArchitectNo)||(null===(s=_)||void 0===s||null===(v=s.formData)||void 0===v||null===(p=v.LicneseType)||void 0===p?void 0:p.ArchitectNo)||null),C=T[0],D=T[1],P=Digit.Hooks.obps.useMDMS(S,"StakeholderRegistraition","TradeTypetoRoleMapping").data,N=window.location.href.includes("/openlink/");return Digit.Utils.browser.isMobile(),N&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")}),t.createElement("div",null,t.createElement("div",{className:N?"OpenlinkContainer":""},N&&t.createElement(o.BackButton,{style:{border:"none"}},m("CS_COMMON_BACK")),t.createElement(zt,{currentStep:1,flow:"STAKEHOLDER"}),t.createElement(o.FormStep,{t:m,config:f,onSelect:function(){var e,n,t,l;if(null!==(e=_)&&void 0!==e&&e.result&&null!==(n=_)&&void 0!==n&&null!==(t=n.result)&&void 0!==t&&null!==(l=t.Licenses[0])&&void 0!==l&&l.id){var i,o=null===(i=_)||void 0===i?void 0:i.formData;o.LicneseType.LicenseType=b,o.LicneseType.ArchitectNo=C,E("",_)}else E(f.key,{LicenseType:b,ArchitectNo:C})},onSkip:function(){return E()},isDisabled:b&&null!=b&&b.i18nKey.includes("ARCHITECT")?!b||!C:!b},t.createElement(o.CardLabel,null,m("BPA_LICENSE_TYPE"),"*"),t.createElement("div",{className:"form-pt-dropdown-only"},P&&t.createElement(o.RadioOrSelect,{t:m,optionKey:"i18nKey",isMandatory:f.isMandatory,options:(A=[],null==P||null===(g=P.StakeholderRegistraition)||void 0===g||g.TradeTypetoRoleMapping.map(function(e){A.some(function(n){return n.i18nKey.includes(e.tradeType.split(".")[0])})||A.push({role:e.role,i18nKey:"TRADELICENSE_TRADETYPE_"+e.tradeType.split(".")[0],tradeType:e.tradeType})}),A||{}),selectedOption:b,onSelect:function(e){y(e)}})),b&&(null==b?void 0:b.i18nKey.includes("ARCHITECT"))&&t.createElement("div",null,t.createElement(o.CardLabel,null,m("BPA_COUNCIL_NUMBER")+"*"),t.createElement(o.TextInput,{t:m,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"ArchitectNo",value:C,onChange:function(e){D(e.target.value)}})))))},LicenseDetails:function(e){var l,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R=e.t,x=e.config,w=e.onSelect,M=e.formData,k=(i.useLocation(),Digit.UserService.getUser()),F=Digit.ULBService.getCurrentTenantId(),U=window.location.href.includes("openlink"),H=null==k||null===(l=k.info)||void 0===l?void 0:l.uuid,W=Digit.Hooks.useUserSearch(F,{uuid:[H]},{},{enabled:!!H}),j=W.data,z=W.isLoading,Y=n.useState((U?"":null==k||null===(a=k.info)||void 0===a?void 0:a.name)||(null==M||null===(r=M.LicneseDetails)||void 0===r?void 0:r.name)||(null==M||null===(d=M.formData)||void 0===d||null===(c=d.LicneseDetails)||void 0===c?void 0:c.name)||""),K=Y[0],G=Y[1],V=n.useState((U?"":null==k||null===(s=k.info)||void 0===s?void 0:s.emailId)||(null==M||null===(v=M.LicneseDetails)||void 0===v?void 0:v.email)||(null==M||null===(p=M.formData)||void 0===p||null===(m=p.LicneseDetails)||void 0===m?void 0:m.email)||""),X=V[0],q=V[1],J=n.useState((!U&&j?{i18nKey:"COMMON_GENDER_"+(null==j||null===(f=j.user)||void 0===f||null===(E=f[0])||void 0===E?void 0:E.gender),code:null==j||null===(_=j.user)||void 0===_||null===(g=_[0])||void 0===g?void 0:g.gender,value:null==j||null===(A=j.user)||void 0===A||null===(S=A[0])||void 0===S?void 0:S.gender}:"")||(null==M||null===(h=M.LicneseDetails)||void 0===h?void 0:h.gender)||(null==M||null===(b=M.formData)||void 0===b||null===(y=b.LicneseDetails)||void 0===y?void 0:y.gender)),Z=J[0],Q=J[1],$=n.useState((U?"":null==k||null===(T=k.info)||void 0===T?void 0:T.mobileNumber)||(null==M||null===(C=M.LicneseDetails)||void 0===C?void 0:C.mobileNumber)||(null==M||null===(D=M.formData)||void 0===D||null===(P=D.LicneseDetails)||void 0===P?void 0:P.mobileNumber)||""),ee=$[0],ne=$[1],te=n.useState((null==M||null===(N=M.LicneseDetails)||void 0===N?void 0:N.PanNumber)||(null==M||null===(I=M.formData)||void 0===I||null===(L=I.LicneseDetails)||void 0===L?void 0:L.PanNumber)||""),le=te[0],ie=te[1];n.useEffect(function(){var e,n,t,l,i,o,a,r;null!=Z&&Z.code||null==j||null===(e=j.user)||void 0===e||null===(n=e[0])||void 0===n||!n.gender||U||Q({i18nKey:"COMMON_GENDER_"+(null==j||null===(t=j.user)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.gender),code:null==j||null===(i=j.user)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.gender,value:null==j||null===(a=j.user)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.gender})},[j]);var oe=Digit.ULBService.getStateId();Digit.Utils.browser.isMobile(),U&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")});var ae=Digit.Hooks.obps.useMDMS(oe,"common-masters",["GenderType"]),re=ae.isLoading,ue=ae.data,de=[];return ue&&ue["common-masters"].GenderType.filter(function(e){return e.active}).map(function(e){de.push({i18nKey:"COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})}),z?t.createElement(o.Loader,null):t.createElement("div",null,t.createElement("div",{className:U?"OpenlinkContainer":""},U&&t.createElement(o.BackButton,{style:{border:"none"}},R("CS_COMMON_BACK")),t.createElement(zt,{currentStep:1,flow:"STAKEHOLDER"}),re&&z?t.createElement(o.Loader,null):t.createElement(o.FormStep,{config:x,onSelect:function(){var e,n;if(null!=M&&M.result&&null!=M&&null!==(e=M.result)&&void 0!==e&&null!==(n=e.Licenses[0])&&void 0!==n&&n.id){var t=null==M?void 0:M.formData;t.LicneseDetails.name=K,t.LicneseDetails.mobileNumber=ee,t.LicneseDetails.gender=Z,t.LicneseDetails.email=X,t.LicneseDetails.PanNumber=le,w("",M)}else w(x.key,{name:K,mobileNumber:ee,gender:Z,email:X,PanNumber:le})},onSkip:function(){return w()},t:R,isDisabled:!K||!ee||!Z},t.createElement("div",null,t.createElement(o.CardLabel,null,R("BPA_APPLICANT_NAME_LABEL")+"*"),t.createElement(o.TextInput,u({t:R,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name",value:K,onChange:function(e){G(e.target.value)},disable:!(!K||U)},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:R("PT_NAME_ERROR_MESSAGE")})),t.createElement(o.CardLabel,null,R("BPA_APPLICANT_GENDER_LABEL")+"*"),t.createElement(o.RadioButtons,{t:R,options:de,optionsKey:"code",name:"gender",value:Z,selectedOption:Z,onSelect:function(e){Q(e)},isDependent:!0,labelKey:"COMMON_GENDER",disable:!(!Z||U)}),t.createElement(o.CardLabel,null,R("BPA_OWNER_MOBILE_NO_LABEL")+"*"),t.createElement(o.MobileNumber,{value:ee,name:"mobileNumber",onChange:function(e){ne({value:e}.value)},disable:!(!ee||U),required:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:R("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}),t.createElement(o.CardLabel,null,R("BPA_APPLICANT_EMAIL_LABEL")),t.createElement(o.TextInput,((O={t:R,type:"email",isMandatory:!1,optionKey:"i18nKey",name:"email",value:X,onChange:function(e){q(e.target.value)},disable:!(null==k||null===(B=k.info)||void 0===B||!B.emailId||U),required:!0,pattern:"[A-Za-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$"}).type="email",O.title=R("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID"),O)),t.createElement(o.CardLabel,null,""+R("BPA_APPLICANT_PAN_NO")),t.createElement(o.TextInput,{t:R,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"PanNumber",value:le,onChange:function(e){ie(e.target.value)},required:!0,pattern:"[A-Z]{5}[0-9]{4}[A-Z]{1}",title:R("BPA_INVALID_PAN_NO")})))))},CorrospondenceAddress:function(e){var l,i,a=e.t,r=e.config,u=e.onSelect,d=e.formData,c=n.useState((null==d?void 0:d.Correspondenceaddress)||(null==d||null===(l=d.formData)||void 0===l?void 0:l.Correspondenceaddress)||""),s=c[0],v=c[1],p=n.useState((null==d?void 0:d.isAddressSame)||(null==d||null===(i=d.formData)||void 0===i?void 0:i.isAddressSame)||!1),m=p[0],f=p[1],E=n.useState(null),_=E[0],g=E[1],A=n.useState(null),S=A[0],h=A[1],b=n.useState(!1),y=b[0],T=b[1],C=Digit.ULBService.getCurrentTenantId(),D=Digit.ULBService.getStateId(),P=window.location.href.includes("/openlink/");return Digit.Utils.browser.isMobile(),P&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")}),t.createElement(t.Fragment,null,t.createElement("div",{className:P?"OpenlinkContainer":""},P&&t.createElement(o.BackButton,{style:{border:"none"}},a("CS_COMMON_BACK")),t.createElement(zt,{currentStep:2,flow:"STAKEHOLDER"}),t.createElement(o.FormStep,{config:r,onSelect:function(){var e,n;if(null!=d&&d.result&&null!=d&&null!==(e=d.result)&&void 0!==e&&null!==(n=e.Licenses[0])&&void 0!==n&&n.id)d.Correspondenceaddress=s,d.isAddressSame=m,u("",d,"",!0);else{var t,l,i,o,a,r,c,v,p,f;T(!0);var E={Licenses:[{tradeLicenseDetail:{owners:[{gender:null==d||null===(t=d.LicneseDetails)||void 0===t||null===(l=t.gender)||void 0===l?void 0:l.code,mobileNumber:null==d||null===(i=d.LicneseDetails)||void 0===i?void 0:i.mobileNumber,name:null==d||null===(o=d.LicneseDetails)||void 0===o?void 0:o.name,dob:null,emailId:null==d||null===(a=d.LicneseDetails)||void 0===a?void 0:a.email,permanentAddress:null==d||null===(r=d.LicneseDetails)||void 0===r?void 0:r.PermanentAddress,correspondenceAddress:s,pan:null==d||null===(c=d.LicneseDetails)||void 0===c?void 0:c.PanNumber}],subOwnerShipCategory:"INDIVIDUAL",tradeUnits:[{tradeType:null==d||null===(v=d.LicneseType)||void 0===v||null===(p=v.LicenseType)||void 0===p?void 0:p.tradeType}],additionalDetail:{counsilForArchNo:null==d||null===(f=d.LicneseType)||void 0===f?void 0:f.ArchitectNo},address:{city:"",landmark:"",pincode:""},institution:null,applicationDocuments:null},licenseType:"PERMANENT",businessService:"BPAREG",tenantId:D,action:"NOWORKFLOW"}]};Digit.OBPSService.BPAREGCreate(E,C).then(function(e,n){T(!1),u("",{result:e,formData:d,Correspondenceaddress:s,isAddressSame:m},"",!0)}).catch(function(e){var n,t,l;T(!1),h({key:"error"}),g((null==e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.Errors[0])||void 0===l?void 0:l.message)||null)})}},onSkip:function(){return u()},t:a,isDisabled:y},t.createElement(o.CheckBox,{label:a("BPA_SAME_AS_PERMANENT_ADDRESS"),onChange:function(e){var n,t,l,i;0==m?(f(!0),v(null!=d&&null!==(n=d.LicneseDetails)&&void 0!==n&&n.PermanentAddress?null==d||null===(t=d.LicneseDetails)||void 0===t?void 0:t.PermanentAddress:null==d||null===(l=d.formData)||void 0===l||null===(i=l.LicneseDetails)||void 0===i?void 0:i.PermanentAddress)):(Array.from(document.querySelectorAll("input")).forEach(function(e){return e.value=""}),f(!1),v(""))},checked:m,style:{paddingBottom:"10px",paddingTop:"10px"}}),t.createElement(o.CardLabel,null,""+a("BPA_APPLICANT_CORRESPONDENCE_ADDRESS_LABEL")),t.createElement(o.TextArea,{t:a,isMandatory:!1,type:"text",optionKey:"i18nKey",name:"Correspondenceaddress",onChange:function(e){v(e.target.value)},value:s,disable:m}))),t.createElement("div",{style:{disabled:"true",height:"30px",width:"100%",fontSize:"14px"}}),S&&t.createElement(o.Toast,{error:"error"===(null==S?void 0:S.key),label:_,isDleteBtn:!0,onClose:function(){h(null),g(null)}}))},PermanentAddress:function(e){var l,i,a,r=e.t,u=e.config,d=e.onSelect,c=e.formData,s=n.useState((null==c||null===(l=c.LicneseDetails)||void 0===l?void 0:l.PermanentAddress)||(null==c||null===(i=c.formData)||void 0===i||null===(a=i.LicneseDetails)||void 0===a?void 0:a.PermanentAddress)),v=s[0],p=s[1],m=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),window.location.href.includes("/openlink/"));return Digit.Utils.browser.isMobile(),m&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")}),t.createElement(t.Fragment,null,t.createElement("div",{className:m?"OpenlinkContainer":""},m&&t.createElement(o.BackButton,{style:{border:"none"}},r("CS_COMMON_BACK")),t.createElement(zt,{currentStep:2,flow:"STAKEHOLDER"}),t.createElement(o.FormStep,{config:u,onSelect:function(){var e,n;null!=c&&c.result&&null!=c&&null!==(e=c.result)&&void 0!==e&&null!==(n=e.Licenses[0])&&void 0!==n&&n.id?((null==c?void 0:c.formData).LicneseDetails.PermanentAddress=v,d("",c)):d(u.key,{PermanentAddress:v})},onSkip:function(){return d()},t:r,isDisabled:!v},t.createElement(o.CardLabel,null,r("BPA_PERMANANT_ADDRESS_LABEL")+"*"),t.createElement(o.TextArea,{t:r,isMandatory:!1,type:"text",optionKey:"i18nKey",name:"PermanentAddress",onChange:function(e){p(e.target.value)},value:v}))))},StakeholderDocuments:function(e){var l,i,a,r,d=e.t,c=e.config,s=e.onSelect,v=e.formData,p=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),m=n.useState((null==v||null===(l=v.documents)||void 0===l?void 0:l.documents)||[]),f=m[0],E=m[1],_=n.useState(null),g=_[0],A=_[1],S=n.useState([]),h=S[0],b=S[1],y=n.useState(!0),T=y[0],C=y[1],D=n.useState(!1),P=D[0],N=D[1],I=!!Digit.Utils.browser.isMobile(),L=window.location.href.includes("/openlink/");L&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")});var B=Digit.Hooks.obps.useMDMS(p,"StakeholderRegistraition","TradeTypetoRoleMapping"),O=B.data,R=B.isLoading;return n.useEffect(function(){var e,n,t,l,i,o,a=[];null!=O&&null!==(e=O.StakeholderRegistraition)&&void 0!==e&&e.TradeTypetoRoleMapping&&(a=null==O||null===(i=O.StakeholderRegistraition)||void 0===i||null===(o=i.TradeTypetoRoleMapping)||void 0===o?void 0:o.filter(function(e){var n,t,l;return e.tradeType===(null==v||null===(n=v.formData)||void 0===n||null===(t=n.LicneseType)||void 0===t||null===(l=t.LicenseType)||void 0===l?void 0:l.tradeType)}));var r=[];null===(n=a)||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.docTypes)||void 0===l||l.forEach(function(e){r.push(e)}),b(r)},[!R]),n.useEffect(function(){var e=0;h.map(function(n){var t=!1;f.map(function(e){n.required&&null!==e&&e&&n.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(t=!0)}),!t&&n.required&&(e+=1)}),C("0"!=e&&0!=e||!(f.length>0))},[f,P]),t.createElement("div",null,t.createElement("div",{className:L?"OpenlinkContainer":""},L&&t.createElement(o.BackButton,{style:{border:"none"}},d("CS_COMMON_BACK")),t.createElement(zt,{currentStep:3,flow:"STAKEHOLDER"}),R?t.createElement(o.Loader,null):t.createElement(o.FormStep,{t:d,config:c,onSelect:function(){var e,n=v.documents,t=[];h&&f&&null!==f&&h.map(function(e,n){var l=f.find(function(n){return n&&null!==n&&n.documentType===e.code});l&&t.push(l)}),e=u({},n,{documents:t}),s(c.key,e)},onSkip:function(){return s()},isDisabled:T,onAdd:function(){},cardStyle:{paddingRight:"16px"}},null==h?void 0:h.map(function(e,n){return t.createElement(Al,{key:n,document:e,t:d,error:g,setError:A,setDocuments:E,documents:f,setCheckRequiredFields:N,isCitizenUrl:I})}),g&&t.createElement(o.Toast,{label:g,isDleteBtn:!0,onClose:function(){return A(null)},error:!0})),!(null!=v&&v.initiationFlow)&&t.createElement(o.CitizenInfoLabel,{info:d("CS_FILE_APPLICATION_INFO_LABEL"),text:d("BPA_APPLICATION_NUMBER_LABEL")+" "+(null==v||null===(i=v.result)||void 0===i||null===(a=i.Licenses)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.applicationNumber)+" "+d("BPA_DOCS_INFORMATION"),className:"info-banner-wrap-citizen-override"})))},OCBasicDetails:function(e){var i,a,r,u,d,s,v,p,m,f,E,_,g,A,S,h,b=e.formData,y=e.onSelect,T=e.config,C=n.useState(null),D=C[0],P=C[1],N=n.useState(null==b||null===(i=b.data)||void 0===i?void 0:i.scrutinyNumber),I=N[0],L=N[1],B=window.Digit.Utils.browser.isMobile(),O=n.useState(!(null==b||null===(a=b.data)||void 0===a||!a.scrutinyNumber))[0],R=l.useTranslation().t,x=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),w=n.useState((null==b||null===(r=b.data)||void 0===r?void 0:r.bpaData)||{}),M=w[0],k=w[1],F=n.useState((null==b||null===(u=b.data)||void 0===u?void 0:u.edcrDetails)||null),U=F[0],H=F[1],W=n.useState(!1),j=W[0],z=W[1],Y=Digit.Hooks.obps.useMDMS(x,"BPA",["RiskTypeComputation"]),K=Y.isMdmsLoading,G=Y.data;Digit.Utils.obps.calculateRiskType(null==G||null===(d=G.BPA)||void 0===d?void 0:d.RiskTypeComputation,null==U||null===(s=U.planDetail)||void 0===s||null===(v=s.plot)||void 0===v?void 0:v.area,null==U||null===(p=U.planDetail)||void 0===p?void 0:p.blocks),n.useEffect(function(){},D);var V=function(){try{return H(null),k(null),z(!0),Promise.resolve((e=null==I?void 0:I.edcrNumber,n=x,Promise.resolve(function(e,n){try{return Promise.resolve(c(function(){return Promise.resolve(Digit.OBPSService.scrutinyDetails(n,{edcrNumber:e}))},function(e){var n,t;return null!=e&&null!==(n=e.response)&&void 0!==n&&n.statusText?null==e||null===(t=e.response)||void 0===t?void 0:t.statusText:"BPA_INTERNAL_SERVER_ERROR"}))}catch(e){return Promise.reject(e)}}(e,n)).then(function(t){var l,i,o,a;return null!=t&&null!==(l=t.edcrDetail)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.edcrNumber?Promise.resolve(Digit.OBPSService.BPASearch(n,{approvalNo:null==t||null===(o=t.edcrDetail)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.permitNumber})).then(function(l){var i,o,a,r,u=null==l||null===(i=l.BPA)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.edcrNumber;return n=null==l||null===(a=l.BPA)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.tenantId,Promise.resolve(Digit.OBPSService.scrutinyDetails(n,{edcrNumber:u})).then(function(i){return Promise.resolve(Digit.OBPSService.BPASearch(n,{edcrNumber:e})).then(function(e){var n,o,a,r,u;return null!=t&&null!==(n=t.edcrDetail)&&void 0!==n&&null!==(o=n[0])&&void 0!==o&&o.edcrNumber?null!=t&&null!==(a=t.edcrDetail)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.edcrNumber?{ocEdcrDetails:null==t||null===(u=t.edcrDetail)||void 0===u?void 0:u[0],otherDetails:{bpaApprovalResponse:null==l?void 0:l.BPA,edcrDetails:null==i?void 0:i.edcrDetail,bpaResponse:null==e?void 0:e.BPA}}:{type:"ERROR",message:"BPA_NO_RECORD_FOUND"}:{type:"ERROR",message:t||"BPA_NO_RECORD_FOUND"}})})}):{type:"ERROR",message:t||"BPA_NO_RECORD_FOUND"}}))).then(function(e){var n,t,l;z(!1),"ERROR"==(null==e?void 0:e.type)&&(P({key:"true",message:null==e?void 0:e.message}),H(null),k(null));var i=null==e?void 0:e.otherDetails,o=null==e?void 0:e.ocEdcrDetails;if(i&&o&&null!=o&&o.tenantId&&null!=i&&null!==(n=i.edcrDetails)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.tenantId){var a,r,u,d,c,s,v,p,m,f;if((null==i||null===(a=i.edcrDetails)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.tenantId)!=(null==o?void 0:o.tenantId))return void P({key:"true",message:"BPA_INVALID_PERMIT_CITY"});if((null==i||null===(u=i.bpaApprovalResponse)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.edcrNumber)===(null==o?void 0:o.edcrNumber)&&("REJECTED"!=(null==i||null===(c=i.bpaResponse)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.status)&&"PERMIT REVOCATION"!=(null==i||null===(v=i.bpaResponse)||void 0===v||null===(p=v[0])||void 0===p?void 0:p.status)||"INITIATED"!=(null==i||null===(m=i.bpaResponse)||void 0===m||null===(f=m[0])||void 0===f?void 0:f.status)))return void P({key:"true",message:"APPLICATION_NUMBER_ALREADY_EXISTS"});sessionStorage.setItem("checkForProcced",JSON.stringify(!1)),P(null),H(U)}null!=e&&null!==(l=e.ocEdcrDetails)&&void 0!==l&&l.edcrNumber&&(H(null==e?void 0:e.ocEdcrDetails),k(null==e?void 0:e.otherDetails),P(null))})}catch(e){return Promise.reject(e)}var e,n},X=sessionStorage.getItem("isEDCRDisable");X=JSON.parse(X),n.useEffect(function(){if(X){var e=sessionStorage.getItem("isEDCRAPIType");(e=!!e&&JSON.parse(e))&&U||(sessionStorage.setItem("isEDCRAPIType",JSON.stringify(!0)),Promise.resolve(V()).then(function(){}))}},[]);var q=function(e){var n,t,l,i,o,a,r,u,d=!1;if(M&&U){var c,s,v,p,m,f,E,_,g,A,S,h,b,C,D,N,L,B=(null==M||null===(c=M.edcrDetails)||void 0===c?void 0:c[0])||{},O=U||{},x=null==O||null===(s=O.planDetail)||void 0===s||null===(v=s.planInformation)||void 0===v?void 0:v.khataNo,w=null==B||null===(p=B.planDetail)||void 0===p||null===(m=p.planInformation)||void 0===m?void 0:m.khataNo,k=null==O||null===(f=O.planDetail)||void 0===f||null===(E=f.planInformation)||void 0===E?void 0:E.plotNo,F=null==B||null===(_=B.planDetail)||void 0===_||null===(g=_.planInformation)||void 0===g?void 0:g.plotNo,H={LOW:0,MEDIUM:1,HIGH:2},W=Digit.Utils.obps.calculateRiskType(null==G||null===(A=G.BPA)||void 0===A?void 0:A.RiskTypeComputation,null==O||null===(S=O.planDetail)||void 0===S||null===(h=S.plot)||void 0===h?void 0:h.area,null==U||null===(b=U.planDetail)||void 0===b?void 0:b.blocks),j=Digit.Utils.obps.calculateRiskType(null==G||null===(C=G.BPA)||void 0===C?void 0:C.RiskTypeComputation,null==B||null===(D=B.planDetail)||void 0===D||null===(N=D.plot)||void 0===N?void 0:N.area,null==U||null===(L=U.planDetail)||void 0===L?void 0:L.blocks);if(x&&w&&k&&F){if(k!=F||x!=w)return x!=w&&k==F?(d=!1,P({key:"true",message:"Khata number from permit order XXXX(permit order number) is not matching with the khata number from occupancy certificate. You cannot proceed with the application"})):k!=F&&x==w?(d=!1,P({key:"true",message:"Plot number from permit order XXXX(permit order number) is not matching with the Plot number from occupancy certificate. You cannot proceed with the application"})):k!=F&&x!=w&&(d=!1,P({key:"true",message:"Khata No and plot No from permit order XXXX(permit order number) is not matching with the Khata No and plot No from occupancy certificate. You cannot proceed with the application"})),!1;d=!0}H[j]<H[W]?(d=!1,P({key:"true",message:R("BPA_RISK_TYPE_VALIDATION_ERROR"),labelName:"The Risk type from permit order XXXX(permit order number) to occupancy certificate application is changed from Low to high .You cannot proceed with the application."})):H[j]>H[W]?(d=JSON.parse(sessionStorage.getItem("checkForProcced")),P({warning:"true",message:R("BPA_RISK_TYPE_VALIDATION_WARNING"),labelName:"The Risk type in permit order XXXX is high where as the risk type in occupancy is Low , do you want to continue"})):d=!0}d&&y(null==T?void 0:T.key,{scrutinyNumber:I,applicantName:null==U||null===(n=U.planDetail)||void 0===n||null===(t=n.planInformation)||void 0===t?void 0:t.applicantName,occupancyType:null==U||null===(l=U.planDetail)||void 0===l||null===(i=l.planInformation)||void 0===i?void 0:i.occupancy,applicationType:null==U?void 0:U.appliactionType,serviceType:null==U?void 0:U.applicationSubType,applicationDate:null==U?void 0:U.applicationDate,riskType:Digit.Utils.obps.calculateRiskType(null==G||null===(o=G.BPA)||void 0===o?void 0:o.RiskTypeComputation,null==U||null===(a=U.planDetail)||void 0===a||null===(r=a.plot)||void 0===r?void 0:r.area,null==U||null===(u=U.planDetail)||void 0===u?void 0:u.blocks),bpaData:M,edcrDetails:U})};return K?t.createElement(o.Loader,null):t.createElement("div",null,t.createElement(zt,{currentStep:1,flow:"OCBPA"}),t.createElement("div",{className:B?"obps-search":"",style:B?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},t.createElement(o.Label,null,R("OBPS_SEARCH_EDCR_NUMBER")),t.createElement(o.TextInput,{className:"searchInput",onKeyPress:function(e){try{var n=function(){var n;if(null!=I&&null!==(n=I.edcrNumber)&&void 0!==n&&n.startsWith("OC")){var t=function(){if("Enter"===e.key)return Promise.resolve(V()).then(function(){})}();if(t&&t.then)return t.then(function(){})}else P({key:"true",message:R("BPA_INVALID_OCEDCR_NO"),labelName:"Please enter the valid OCeDCR Number."})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},onChange:function(e){return L({edcrNumber:e.target.value})},value:null==I?void 0:I.edcrNumber,signature:!0,signatureImg:!X&&t.createElement(o.SearchIconSvg,{className:"signature-img",onClick:!X&&null!=I&&I.edcrNumber?function(){return function(e){try{var n=function(){var e;if(null!=I&&null!==(e=I.edcrNumber)&&void 0!==e&&e.startsWith("OC"))return Promise.resolve(V()).then(function(){});P({key:"true",message:R("BPA_INVALID_OCEDCR_NO"),labelName:"Please enter the valid OCeDCR Number."})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()}:null}),disable:O,style:{marginBottom:"10px"}})),j?t.createElement(o.Loader,null):null,U&&t.createElement(o.Card,null,t.createElement(o.CardCaption,null,R("BPA_SCRUTINY_DETAILS")),t.createElement(o.CardHeader,null,R("BPA_BASIC_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_APP_DATE_LABEL"),text:null!=U&&U.applicationDate?Mt(new Date(null==U?void 0:U.applicationDate),"dd/MM/yyyy"):null==U?void 0:U.applicationDate}),t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),text:R("WF_BPA_"+(null==U?void 0:U.appliactionType))}),t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:R(null==U?void 0:U.applicationSubType)}),t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),text:null==U||null===(m=U.planDetail)||void 0===m||null===(f=m.planInformation)||void 0===f?void 0:f.occupancy}),t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),text:R("WF_BPA_"+Digit.Utils.obps.calculateRiskType(null==G||null===(E=G.BPA)||void 0===E?void 0:E.RiskTypeComputation,null==U||null===(_=U.planDetail)||void 0===_||null===(g=_.plot)||void 0===g?void 0:g.area,null==U||null===(A=U.planDetail)||void 0===A?void 0:A.blocks))}),t.createElement(o.Row,{className:"border-none",label:R("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),text:null==U||null===(S=U.planDetail)||void 0===S||null===(h=S.planInformation)||void 0===h?void 0:h.applicantName})),t.createElement(o.SubmitBar,{label:R("CS_COMMON_NEXT"),onSubmit:q})),D&&t.createElement(o.Toast,{error:!(null==D||!D.key),warning:!(null==D||!D.warning),label:R(null==D?void 0:D.message),isDleteBtn:!0,onClose:function(){P(null)},onNo:function(){P(null)},onYes:function(){sessionStorage.setItem("checkForProcced",JSON.stringify(!0)),q()},isWarningButtons:!0}))},OBPSSearchApplication:function(e){var l,r,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C=e.t,D=e.onSubmit,P=e.data,N=e.error,I=e.searchData,L=e.isLoading,B=e.Count,O=e.setparamerror,R=n.useState(null),x=R[0],w=R[1],M=sessionStorage.getItem("Digit.citizen.userRequestObject"),k=M?JSON.parse(M):{},F=null==k||null===(l=k.value)||void 0===l?void 0:l.info,U=null==k||null===(r=k.value)||void 0===r||null===(c=r.info)||void 0===c?void 0:c.mobileNumber,H=a.useForm({defaultValues:u({applicationNo:"",mobileNumber:window.location.href.includes("/search/obps-application")?U:"",fromDate:"",toDate:"",status:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",applicationType:(null==F||null===(s=F.roles)||void 0===s||null===(v=s.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===v?void 0:v.length)<=0&&(null==F||null===(p=F.roles)||void 0===p?void 0:p.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)>0?{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"}:(null==F||null===(m=F.roles)||void 0===m||null===(f=m.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===f?void 0:f.length)>0&&(null==F||null===(E=F.roles)||void 0===E?void 0:E.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?{code:"BPA_STAKEHOLDER_REGISTRATION",i18nKey:"WF_BPA_BPA_STAKEHOLDER_REGISTRATION"}:{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"},serviceType:(null==F||null===(_=F.roles)||void 0===_||null===(g=_.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===g?void 0:g.length)<=0&&(null==F||null===(A=F.roles)||void 0===A?void 0:A.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)>0?{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"}:(null==F||null===(S=F.roles)||void 0===S||null===(h=S.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===h?void 0:h.length)>0&&(null==F||null===(b=F.roles)||void 0===b?void 0:b.filter(function(e){return e.code.includes("BPA_")||e.code.includes("CITIZEN")}).length)<=0?"":{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"}},I)}),W=H.register,j=H.control,z=H.handleSubmit,Y=H.setValue,K=H.getValues,G=H.reset,V=H.formState;n.useEffect(function(){W("offset",0),W("limit",10),W("sortBy","commencementDate"),W("sortOrder","DESC")},[W]),t.useEffect(function(){var e,n,t,l,i,o,a,r,d,c,s,v,p,m;V.isSubmitSuccessful&&G(u({applicationNo:"",mobileNumber:window.location.href.includes("/search/obps-application")?null===(e=Digit.UserService.getUser())||void 0===e||null===(n=e.info)||void 0===n?void 0:n.mobileNumber:"",fromDate:"",toDate:"",status:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC",applicationType:(null==F||null===(t=F.roles)||void 0===t||null===(l=t.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===l?void 0:l.length)<=0&&(null==F||null===(i=F.roles)||void 0===i?void 0:i.filter(function(e){return e.code.includes("BPA_")||e.code.includes("citizen")}).length)>0?{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"}:(null==F||null===(o=F.roles)||void 0===o||null===(a=o.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===a?void 0:a.length)>0&&(null==F||null===(r=F.roles)||void 0===r?void 0:r.filter(function(e){return e.code.includes("BPA_")||e.code.includes("citizen")}).length)<=0?{code:"BPA_STAKEHOLDER_REGISTRATION",i18nKey:"WF_BPA_BPA_STAKEHOLDER_REGISTRATION"}:{code:"BUILDING_PLAN_SCRUTINY",i18nKey:"WF_BPA_BUILDING_PLAN_SCRUTINY"},serviceType:(null==F||null===(d=F.roles)||void 0===d||null===(c=d.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===c?void 0:c.length)<=0&&(null==F||null===(s=F.roles)||void 0===s?void 0:s.filter(function(e){return e.code.includes("BPA_")||e.code.includes("citizen")}).length)>0?{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"}:(null==F||null===(v=F.roles)||void 0===v||null===(p=v.filter(function(e){return e.code.includes("BPAREG_")}))||void 0===p?void 0:p.length)>0&&(null==F||null===(m=F.roles)||void 0===m?void 0:m.filter(function(e){return e.code.includes("BPA_")||e.code.includes("citizen")}).length)<=0?"":{applicationType:["BUILDING_PLAN_SCRUTINY","BUILDING_OC_PLAN_SCRUTINY"],code:"NEW_CONSTRUCTION",i18nKey:"BPA_SERVICETYPE_NEW_CONSTRUCTION"}},I,{isSubmitSuccessful:!1}))},[V]);var X=function(e){var l=e.t,o=function(e){var n="BPAREG"===e?"search/application/stakeholder":"search/application/bpa";return window.location.href.includes("/citizen")&&(n="BPAREG"===e?"stakeholder":"bpa"),n},a=function(e){return t.createElement("span",{className:"cell-text"},e)};return n.useMemo(function(){return[{Header:l("BPA_APPLICATION_NUMBER_LABEL"),accessor:"applicationNo",disableSortBy:!0,Cell:function(e){var n=e.row;return t.createElement("div",null,t.createElement("span",{className:"link"},t.createElement(i.Link,{to:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/"+(o(n.original.businessService)||"--")+"/"+(n.original.applicationNo||n.original.applicationNumber):"/digit-ui/employee/obps/"+(o(n.original.businessService)||"--")+"/"+(n.original.applicationNo||n.original.applicationNumber)},n.original.applicationNo||n.original.applicationNumber)))}},{Header:l("BPA_COMMON_TABLE_COL_APP_DATE_LABEL"),disableSortBy:!0,accessor:function(e){var n,t;return a(null!=e&&null!==(n=e.auditDetails)&&void 0!==n&&n.createdTime?Dn(null==e||null===(t=e.auditDetails)||void 0===t?void 0:t.createdTime):"")}},{Header:l("BPA_SEARCH_APPLICATION_TYPE_LABEL"),disableSortBy:!0,accessor:"applicationType",Cell:function(e){var n,i,o,a,r,u,d=e.row;return t.createElement("div",null,t.createElement("span",{className:"cell-text"},null!==(n=d.original)&&void 0!==n&&null!==(i=n.additionalDetails)&&void 0!==i&&i.applicationType?l("WF_BPA_"+(null===(o=d.original)||void 0===o||null===(a=o.additionalDetails)||void 0===a?void 0:a.applicationType)):null!==(r=d.original)&&void 0!==r&&r.businessService?l("BPA_APPLICATIONTYPE_"+(null==d||null===(u=d.original)||void 0===u?void 0:u.businessService)):"-"))}},{Header:l("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),disableSortBy:!0,accessor:function(e){var n,t,i,o,r;return a(l((null===(n=e.additionalDetails)||void 0===n?void 0:n.serviceType)||l("TRADELICENSE_TRADETYPE_"+(null==e||null===(t=e.tradeLicenseDetail)||void 0===t||null===(i=t.tradeUnits)||void 0===i||null===(o=i[0])||void 0===o||null===(r=o.tradeType)||void 0===r?void 0:r.split(".")[0]))||"-"))}},{Header:l("BPA_CURRENT_OWNER_HEAD"),accessor:function(e){return a((null==e?void 0:e.assignee)||"-")},disableSortBy:!0},{Header:l("BPA_STATUS_LABEL"),accessor:function(e){return a(l((null==e?void 0:e.state)&&"WF_BPA_"+e.state||(null==e?void 0:e.state)&&"WF_BPA_"+e.status||"NA"))},disableSortBy:!0}]},[])}({t:C}),q=n.useState(K("offset")/K("limit")),J=q[0],Z=q[1];n.useEffect(function(){""!==N&&(O(""),w({key:!0,label:N}))},[N]);var Q=n.useCallback(function(e){0!==e.length&&(Y("sortBy",e.id),Y("sortOrder",e.desc?"DESC":"ASC"))},[]);function $(){Y("offset",K("offset")-K("limit")),z(D)()}n.useEffect(function(){null!=K("offset")&&null!=K("limit")&&Z(K("offset")/K("limit"))},[K("offset"),K("limit")]);var ee=window.Digit.Utils.browser.isMobile(),ne={formState:V,Controller:a.Controller,register:W,control:j,t:C,reset:G,previousPage:$},te=n.useMemo(function(){return null==P?void 0:P.map(function(e){var n,t,l,i,o,a,r,u,d;return(d={})[C("BPA_APPLICATION_NUMBER_LABEL")]=e.applicationNo||e.applicationNumber,d[C("BPA_COMMON_TABLE_COL_APP_DATE_LABEL")]=Dn(null===(n=e.auditDetails)||void 0===n?void 0:n.createdTime)||"",d[C("BPA_SEARCH_APPLICATION_TYPE_LABEL")]=null!=e&&null!==(t=e.additionalDetails)&&void 0!==t&&t.applicationType?C("WF_BPA_"+(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.applicationType)):C(null!=e&&e.businessService?"BPA_APPLICATIONTYPE_"+(null==e?void 0:e.businessService):"CS_NA"),d[C("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")]=C((null===(i=e.additionalDetails)||void 0===i?void 0:i.serviceType)||C("TRADELICENSE_TRADETYPE_"+(null==e||null===(o=e.tradeLicenseDetail)||void 0===o||null===(a=o.tradeUnits)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.tradeType)||void 0===u?void 0:u.split(".")[0]))||C("CS_NA")),d[C("BPA_CURRENT_OWNER_HEAD")]=(null==e?void 0:e.assignee)||C("CS_NA"),d[C("BPA_STATUS_LABEL")]=C((null==e?void 0:e.state)&&"WF_BPA_"+e.state||(null==e?void 0:e.state)&&"WF_BPA_"+e.status||C("CS_NA")),d})},[P]);if(ee){var le,ie,oe=n.useReducer(function(e,n){switch(n.type){case"set":return n.payload;case"remove":return!1}},!1),ae=oe[0],re=oe[1],ue=function(){re({type:"remove"})},de=function(){return t.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:ue},t.createElement(o.CloseSvg,null))},ce=n.useCallback(function(e){return function(e){var l=e.currentlyActiveMobileModal,i=e.searchFormFieldsComponentProps,a=d(e,kn),r=a.closeMobilePopupModal;switch(l){case"SearchFormComponent":return t.createElement(n.Fragment,null,t.createElement(o.SearchForm,a,t.createElement(de,null),t.createElement("div",{className:"MobilePopupHeadingWrapper"},t.createElement("h2",null,C("ES_COMMON_SEARCH_APPLICATION"),":")),window.location.href.includes("citizen/obps/search/application")&&t.createElement("div",{style:{background:"#ffffff",padding:"20px 0px",color:"#00000099"}},t.createElement("label",null,C("BPA_SEARCH_CREATED_BY_STAKEHOLDER_LABEL"))),t.createElement(Mn,u({},i,{closeMobilePopupModal:r}))));default:return t.createElement("span",null)}}(u({currentlyActiveMobileModal:e.currentlyActiveMobileModal,searchFormFieldsComponentProps:e.searchFormFieldsComponentProps},d(e,Fn)))},[ae]);return L?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement("div",{className:"searchBox"},t.createElement(o.SearchAction,{text:C("ES_COMMON_SEARCH_APPLICATION"),handleActionClick:function(){return re({type:"set",payload:"SearchFormComponent"})}})),ae?t.createElement(o.PopUp,null,t.createElement(ce,{onSubmit:function(e){re({type:"remove"}),D(e)},handleSubmit:z,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:ne,currentlyActiveMobileModal:ae,closeMobilePopupModal:ue})):null,null!=P&&null!==(le=P[0])&&void 0!==le&&le.display?t.createElement(o.Card,{style:{marginTop:20}},C(null==P||null===(ie=P[0])||void 0===ie?void 0:ie.display).split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})):t.createElement(o.DetailsCard,{data:te,isTwoDynamicPrefix:!0,linkPrefix:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/":"/digit-ui/employee/obps/",getRedirectionLink:function(e){var n,t="BPAREG"==(null==P||null===(n=P[0])||void 0===n?void 0:n.businessService)?"BPAREG":e,l="BPAREG"===t?"search/application/stakeholder":"search/application/bpa";return window.location.href.includes("/citizen")&&(l="BPAREG"===t?"stakeholder":"bpa"),l},serviceRequestIdKey:"applicationNo"}))}return t.createElement(t.Fragment,null,t.createElement(o.Header,null,C("ES_COMMON_SEARCH_APPLICATION")),window.location.href.includes("citizen/obps/search/application")&&t.createElement("div",{style:{background:"#ffffff",paddingLeft:"25px",paddingTop:"10px",color:"#00000099"}},t.createElement("label",null,C("BPA_SEARCH_CREATED_BY_STAKEHOLDER_LABEL"))),t.createElement(o.SearchForm,{onSubmit:D,handleSubmit:z},t.createElement(Mn,ne)),!L&&null!=P&&null!==(y=P[0])&&void 0!==y&&y.display?t.createElement(o.Card,{style:{marginTop:20}},C(null==P||null===(T=P[0])||void 0===T?void 0:T.display).split("\\n").map(function(e,n){return t.createElement("p",{key:n,style:{textAlign:"center"}},e)})):x?"":L?t.createElement(o.Loader,null):t.createElement(o.Table,{t:C,data:P,columns:X,getCellProps:function(e){return{style:{minWidth:e.column.Header===C("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:function(e){Y("limit",Number(e.target.value)),z(D)()},currentPage:J,onNextPage:function(){Y("offset",K("offset")+K("limit")),z(D)()},onPrevPage:$,pageSizeLimit:K("limit"),onSort:Q,totalRecords:B,disableSort:!1,onLastPage:function(){Y("offset",B&&10*Math.ceil(B/10)-K("limit")),z(D)()},onFirstPage:function(){Y("offset",0),z(D)()},sortParams:[{id:K("sortBy"),desc:"DESC"===K("sortOrder")}]}),x&&t.createElement(o.Toast,{warning:"BPA_ADD_MORE_PARAM_STAKEHOLDER"==x.label,error:"BPA_ADD_MORE_PARAM_STAKEHOLDER"!=x.label&&x.key,label:C(x.label),isDleteBtn:!0,onClose:function(){w(null)}}))},InspectionReport:function(e){var a=e.config,r=e.onSelect,d=e.userType,c=e.formData,s=e.setError,v=e.formState,p=e.clearErrors,m=l.useTranslation().t,f=i.useLocation().pathname.includes("/modify-application/"),E=n.useState((null==c?void 0:c.FieldReports)||[Dl()]),_=E[0],g=E[1],A=n.useState({index:-1,type:""}),S=A[0],h=A[1],b=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),y=n.useState([]),T=y[0],C=y[1],D=n.useState([]),P=D[0],N=D[1],I=n.useState([]),L=I[0],B=I[1],O=n.useState([]),R=O[0],x=O[1],w=n.useState([]),M=w[0],k=w[1],F=n.useState([]),U=F[0],H=F[1],W=n.useState(!1),j=W[0],z=W[1],Y=n.useState((null==c?void 0:c.tradedetils1)||[]),K=Y[0],G=Y[1];window.location.href.includes("tl/renew-application-details"),window.location.href.includes("tl/renew-application-details");var V=Digit.Hooks.tl.useTradeLicenseMDMS(b,"TradeLicense","TradeUnits","[?(@.type=='TL')]"),X=V.data,q=V.isLoading,J=Digit.Hooks.obps.useMDMS(b,"BPA",["CheckList"]).data;n.useEffect(function(){var e=_.map(function(e){return e});r(null==a?void 0:a.key,e),sessionStorage.setItem("INSPECTION_DATA",JSON.stringify(e))},[_]),n.useEffect(function(){r("tradedetils1",K)},[K]),n.useEffect(function(){var e=[],n=[];J&&J.BPA.CheckList.map(function(t){"LOW"===(null==t?void 0:t.RiskType)&&"FIELDINSPECTION_PENDING"===(null==t?void 0:t.WFState)&&(e=[].concat(t.questions),n=[].concat(t.docTypes))}),k(n),x(e)},[J]);var Z={focusIndex:S,allFieldReport:_,setFocusIndex:h,removeUnit:function(e){g(function(n){return n.filter(function(n){return n.key!=e.key})})},formData:c,formState:v,setFieldReports:g,t:m,setError:s,clearErrors:p,config:a,onSelect:r,userType:d,tradeCategoryValues:P,tradeTypeOptionsList:L,setTradeTypeOptionsList:B,tradeTypeMdmsData:T,tradeSubTypeOptionsList:U,setTradeSubTypeOptionsList:H,setTradeTypeMdmsData:C,setTradeCategoryValues:N,tradeMdmsData:X,isErrors:j,setIsErrors:z,previousLicenseDetails:K,setPreviousLicenseDetails:G,isLoading:q,bpaDocs:J,type:"LOW",questionList:R,setquestionList:x,documentList:M};return f?t.createElement(t.Fragment,null):t.createElement("div",null,t.createElement(t.Fragment,null,_&&_.map(function(e,n){return t.createElement(Pl,u({key:e.key,index:n,unit:e},Z))})),t.createElement(o.LinkButton,{label:m("BPA_ADD_FIELD_INSPECTION"),onClick:function(){var e=Dl();g(function(n){return[].concat(n,[e])})},style:{color:"#a82227",width:"fit-content"}}))},BPAInbox:Ft,StakeholderInbox:function(e){var r=e.parentRoute,d=l.useTranslation().t,c=Digit.ULBService.getStateId(),s={},v={moduleName:"BPAREG",applicationStatus:[],businessService:null,locality:[],assignee:"ASSIGNED_TO_ALL"},p={sortBy:"",limit:window.Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"DESC"},m=Digit.SessionStorage.get("STAKEHOLDER.INBOX"),f=n.useMemo(function(){return m||{filterForm:v,searchForm:s,tableForm:p}},[Object.values((null==m?void 0:m.filterForm)||{}),Object.values((null==m?void 0:m.searchForm)||{}),Object.values((null==m?void 0:m.tableForm)||{})]),E=n.useReducer(function(e,n){switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("STAKEHOLDER.INBOX",u({},e,{searchForm:n.data})),u({},e,{searchForm:n.data});case"mutateFilterForm":return Digit.SessionStorage.set("STAKEHOLDER.INBOX",u({},e,{filterForm:n.data})),u({},e,{filterForm:n.data});case"mutateTableForm":return Digit.SessionStorage.set("STAKEHOLDER.INBOX",u({},e,{tableForm:n.data})),u({},e,{tableForm:n.data})}},f),_=E[0],g=E[1],A=Digit.Hooks.useBoundaryLocalities(c,"revenue",{},d),S=A.data,h=A.isLoading,b=Digit.Hooks.obps.useBPAInbox({tenantId:c,filters:u({},_)}),y=b.isLoading,T=b.data,C=void 0===T?{}:T,D=C.table,P=C.statuses,N=C.totalCount,I={logoIcon:t.createElement(o.CaseIcon,null),headerText:"CS_COMMON_OBPS",links:[{text:d("BPA_SEARCH_PAGE_TITLE"),link:"/digit-ui/employee/obps/search/application",businessService:"BPA",roles:["BPAREG_EMPLOYEE","BPAREG_APPROVER","BPAREG_DOC_VERIFIER","BPAREG_DOC_VERIFIER"]}]},L=n.useCallback(function(e){return t.createElement(Wt,{registerRef:e.registerRef,searchFormState:e.searchFormState,searchFieldComponents:e.searchFieldComponents})},[]),B=n.useCallback(function(e){return t.createElement(Ht,{statuses:P,isInboxLoading:y,registerRef:e.registerRef,controlFilterForm:e.controlFilterForm,setFilterFormValue:e.setFilterFormValue,filterFormState:null==_?void 0:_.filterForm,getFilterFormValue:e.getFilterFormValue,localitiesForEmployeesCurrentTenant:S,loadingLocalitiesForEmployeesCurrentTenant:h})},[P,y,S,h]),O={SearchFormFields:L,onSearchFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),g({action:"mutateTableForm",data:u({},p)}),g({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==_?void 0:_.searchForm,resetSearchFormDefaultValues:s,onSearchFormReset:function(e){e("mobileNumber",null),e("applicationNo",null),g({action:"mutateSearchForm",data:s})}},R={FilterFormFields:B,onFilterFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),g({action:"mutateTableForm",data:u({},p)}),g({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==_?void 0:_.filterForm,resetFilterFormDefaultValues:v,onFilterFormReset:function(e){e("moduleName","BPAREG"),e("applicationStatus",""),e("locality",[]),e("assignee","ASSIGNED_TO_ALL"),g({action:"mutateFilterForm",data:v})}},x=function(e){var o,a,r,d,c=e.parentRoute,s=e.onPageSizeChange,v=e.formState,p=e.totalCount,m=e.table,f=e.dispatch,E=e.onSortingByData,_=l.useTranslation().t,g=n.useMemo(function(){return[{Header:_("BPA_APPLICATION_NUMBER_LABEL"),accessor:"applicationNo",Cell:function(e){var n=e.row;return t.createElement("div",null,t.createElement(i.Link,{to:c+"/stakeholder-inbox/stakeholder/"+n.original.applicationId},t.createElement("span",{className:"link"},n.original.applicationId)))}},{Header:_("CS_APPLICATION_DETAILS_APPLICATION_DATE"),accessor:"applicationDate",Cell:function(e){var n,l,i,o=e.row;return null!==(n=o.original)&&void 0!==n&&n.date?(i=Mt(new Date(null===(l=o.original)||void 0===l?void 0:l.date),"dd/MM/yyyy"),t.createElement("span",{className:"cell-text styled-cell"},i)):""}},{Header:_("EVENTS_STATUS_LABEL"),accessor:function(e){return _("WF_"+(null==e?void 0:e.businessService)+"_"+(null==e?void 0:e.status))}},{Header:_("WF_INBOX_HEADER_CURRENT_OWNER"),accessor:function(e){return null==e?void 0:e.owner}},{Header:_("ES_INBOX_SLA_DAYS_REMAINING"),accessor:function(e){return t.createElement("span","Active"===(n=null==e?void 0:e.sla)||n>0?{className:"sla-cell-success"}:{className:"sla-cell-error"},n);var n}}]});return{getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},disableSort:!1,autoSort:!1,manualPagination:!0,initSortI:"applicationDate",onPageSizeChange:s,currentPage:(null===(o=v.tableForm)||void 0===o?void 0:o.offset)/(null===(a=v.tableForm)||void 0===a?void 0:a.limit),onNextPage:function(){var e,n;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(n=v.tableForm)||void 0===n?void 0:n.limit)})})},onPrevPage:function(){var e,n;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(n=v.tableForm)||void 0===n?void 0:n.limit)})})},pageSizeLimit:null===(r=v.tableForm)||void 0===r?void 0:r.limit,onSort:E,totalRecords:p,onSearch:null==v||null===(d=v.searchForm)||void 0===d?void 0:d.message,onLastPage:function(){var e;return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:10*Math.ceil(p/10)-parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.limit)})})},onFirstPage:function(){return f({action:"mutateTableForm",data:u({},v.tableForm,{offset:0})})},data:m,columns:g}}(u({},{parentRoute:r,onPageSizeChange:function(e){g({action:"mutateTableForm",data:u({},_.tableForm,{limit:e.target.value})})},formState:_,totalCount:N,table:D,dispatch:g,onSortingByData:function(e){if(e.length>0){var n=e[0],t=n.id,l=n.desc;_.tableForm.sortBy===t&&_.tableForm.sortOrder===(l?"DESC":"ASC")||g({action:"mutateTableForm",data:u({},_.tableForm,{sortBy:t,sortOrder:l?"DESC":"ASC"})})}}})),w=function(e){var n=e.parentRoute,i=e.table,r=l.useTranslation().t;return{data:null==i?void 0:i.map(function(e){var n,t=e.applicationId,l=e.date,i=e.businessService,o=e.status,a=e.owner,u=e.sla;return(n={})[r("BPA_APPLICATION_NUMBER_LABEL")]=t,n[r("CS_APPLICATION_DETAILS_APPLICATION_DATE")]=Mt(new Date(l),"dd/MM/yyyy"),n[r("EVENTS_STATUS_LABEL")]=r("WF_"+i+"_"+o),n[r("WF_INBOX_HEADER_CURRENT_OWNER")]=a,n[r("ES_INBOX_SLA_DAYS_REMAINING")]=u,n}),linkPrefix:n+"/stakeholder-inbox/stakeholder/",serviceRequestIdKey:r("BPA_APPLICATION_NUMBER_LABEL"),MobileSortFormValues:function(){var e=[{code:"DESC",i18nKey:"ES_COMMON_SORT_BY_DESC"},{code:"ASC",i18nKey:"ES_COMMON_SORT_BY_ASC"}],n=a.useFormContext();return t.createElement(o.SearchField,null,t.createElement(a.Controller,{name:"sortOrder",control:n.control,render:function(n){var l=n.onChange,i=n.value;return t.createElement(o.RadioButtons,{onSelect:function(e){l(e.code)},selectedOption:e.filter(function(e){return e.code===i})[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}}({parentRoute:r,table:D}),M={onMobileSortOrderData:function(e){g({action:"mutateTableForm",data:u({},_.tableForm,{sortOrder:e.sortOrder})})},sortFormDefaultValues:null==_?void 0:_.tableForm,onSortFormReset:function(e){e("sortOrder","DESC"),g({action:"mutateTableForm",data:p})}};return t.createElement(n.Fragment,null,t.createElement(o.Header,null,d("ES_COMMON_INBOX"),N?t.createElement("p",{className:"inbox-count"},N):null),Digit.Utils.browser.isMobile()&&t.createElement("div",{style:{marginLeft:"12px"}},t.createElement(i.Link,{to:window.location.href.includes("/citizen")?"/digit-ui/citizen/obps/search/application":"/digit-ui/employee/obps/search/application"},t.createElement("span",{className:"link"},d("BPA_SEARCH_PAGE_TITLE")))),t.createElement(o.InboxComposer,u({isInboxLoading:y,PropsForInboxLinks:I},O,R,M,{propsForInboxTable:x,propsForInboxMobileCards:w,formState:_})))},StakeholderCheckPage:function(e){var n,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U=e.onSubmit,H=e.value,W=l.useTranslation().t,j=i.useHistory(),z=(i.useRouteMatch(),Digit.UserService.getUser()),Y=z&&null!=z&&z.info&&null!=z&&null!==(n=z.info)&&void 0!==n&&n.permanentCity?null==z||null===(a=z.info)||void 0===a?void 0:a.permanentCity:Digit.ULBService.getCurrentTenantId(),K=Digit.ULBService.getStateId(),G=window.location.href.includes("/openlink/"),V=window.Digit.Utils.browser.isMobile();Digit.Utils.browser.isMobile(),G&&(window.onunload=function(){sessionStorage.removeItem("Digit.BUILDING_PERMIT")});var X=H.result,q=H.formData,J=H.documents,Z=null==H||null===(r=H.result)||void 0===r?void 0:r.Licenses[0].applicationNumber,Q=Digit.Hooks.obps.useBPAREGgetbill(u({businessService:"BPAREG"},{consumerCode:Z},{tenantId:K||Y.split(".")[0]}),{enabled:!!Z,retry:!1}).data,$=G?"/digit-ui/citizen/obps/openlink/stakeholder/apply":"/digit-ui/citizen/obps/stakeholder/apply";function ee(e){j.push(e)}return t.createElement(t.Fragment,null,t.createElement("div",{className:G?"OpenlinkContainer":""},t.createElement("div",null,G&&t.createElement(o.BackButton,{style:{border:"none"}},W("CS_COMMON_BACK")),t.createElement(zt,{currentStep:4,flow:"STAKEHOLDER"}),t.createElement(o.Header,{styles:{fontSize:"32px",marginLeft:"10px"}},W("BPA_STEPPER_SUMMARY_HEADER")),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:W("BPA_APPLICATION_NUMBER_LABEL"),text:null!=X&&null!==(d=X.Licenses)&&void 0!==d&&null!==(c=d[0])&&void 0!==c&&c.applicationNumber?null==X||null===(s=X.Licenses)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.applicationNumber:""}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_LICENSE_DETAILS_LABEL")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-15px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return ee($+"/provide-license-type")}}),t.createElement(o.Row,{className:"border-none",label:W("BPA_LICENSE_TYPE"),textStyle:{paddingLeft:"12px"},text:W(null==q||null===(p=q.LicneseType)||void 0===p||null===(m=p.LicenseType)||void 0===m?void 0:m.i18nKey)}),(null==q||null===(f=q.LicneseType)||void 0===f||null===(E=f.LicenseType)||void 0===E?void 0:E.i18nKey.includes("ARCHITECT"))&&t.createElement(o.Row,{className:"border-none",label:W("BPA_COUNCIL_NUMBER"),text:null==q||null===(_=q.LicneseType)||void 0===_?void 0:_.ArchitectNo}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_LICENSE_DET_CAPTION")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-15px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return ee($+"/license-details")}}),t.createElement(o.Row,{className:"border-none",label:W("BPA_APPLICANT_NAME_LABEL"),textStyle:{paddingLeft:"12px"},text:W(null==q||null===(g=q.LicneseDetails)||void 0===g?void 0:g.name)}),t.createElement(o.Row,{className:"border-none",label:W("BPA_APPLICANT_GENDER_LABEL"),text:W(null==q||null===(A=q.LicneseDetails)||void 0===A?void 0:A.gender.i18nKey)}),t.createElement(o.Row,{className:"border-none",label:W("BPA_OWNER_MOBILE_NO_LABEL"),text:null==q||null===(S=q.LicneseDetails)||void 0===S?void 0:S.mobileNumber}),t.createElement(o.Row,{className:"border-none",label:W("BPA_APPLICANT_EMAIL_LABEL"),text:(null==q||null===(h=q.LicneseDetails)||void 0===h?void 0:h.email)||W("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:W("BPA_APPLICANT_PAN_NO"),text:(null==q||null===(b=q.LicneseDetails)||void 0===b?void 0:b.PanNumber)||W("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement("div",{style:{marginRight:"24px"}},t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_LICENSEE_PERMANENT_LABEL"))),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-15px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return ee($+"/Permanent-address")}}),t.createElement(o.CardText,{style:V?{color:"black"}:{color:"black",fontSize:"16px"}},W(null==q||null===(y=q.LicneseDetails)||void 0===y?void 0:y.PermanentAddress)))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement("div",{style:{marginRight:"24px"}},t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_COMMUNICATION_ADDRESS_HEADER_DETAILS"))),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-15px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return ee($+"/correspondence-address")}}),t.createElement(o.CardText,{style:V?{color:"black"}:{color:"black",fontSize:"16px"}},W(null==H?void 0:H.Correspondenceaddress)))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_DOC_DETAILS_SUMMARY")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-15px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return ee($+"/stakeholder-document-details")}}),null==J?void 0:J.documents.map(function(e,n){var l,i;return t.createElement("div",{key:n},t.createElement(o.CardSectionHeader,{styles:{fontSize:"18px"}},W("BPAREG_HEADER_"+(null==e||null===(l=e.documentType)||void 0===l?void 0:l.replace(".","_")))),null!=e&&e.info?t.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px"}},""+W(null==e?void 0:e.info)):null,t.createElement(o.StatusTable,null,t.createElement(ul,{value:H,Code:null==e?void 0:e.documentType,index:n,isNOC:!1,svgStyles:{},isStakeHolder:!0}),(null==J||null===(i=J.documents)||void 0===i?void 0:i.length)!=n+1?t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null))}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_SUMMARY_FEE_EST")),t.createElement(o.StatusTable,null,null==Q||null===(T=Q.billResponse)||void 0===T||null===(C=T.Bill[0])||void 0===C||null===(D=C.billDetails[0])||void 0===D?void 0:D.billAccountDetails.map(function(e,n){return t.createElement("div",{key:n},t.createElement(o.Row,{className:"border-none",label:W(""+e.taxHeadCode),text:"₹ "+(null==e?void 0:e.amount)||W("CS_NA")}))}),t.createElement(o.Row,{className:"border-none",label:W("BPA_COMMON_TOTAL_AMT"),text:"₹ "+(null==Q||null===(P=Q.billResponse)||void 0===P||null===(N=P.Bill)||void 0===N||null===(I=N[0])||void 0===I||null===(L=I.billDetails[0])||void 0===L?void 0:L.amount)||W("CS_NA")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardHeader,{styles:{fontSize:"24px"}},W("BPA_COMMON_TOTAL_AMT")),t.createElement(o.CardHeader,null,"₹ ",null==Q||null===(B=Q.billResponse)||void 0===B||null===(O=B.Bill)||void 0===O||null===(R=O[0])||void 0===R||null===(x=R.billDetails[0])||void 0===x?void 0:x.amount),t.createElement(o.SubmitBar,{label:W("CS_COMMON_SUBMIT"),onSubmit:U,disabled:null==Q||null===(w=Q.billResponse)||void 0===w||null===(M=w.Bill)||void 0===M||null===(k=M[0])||void 0===k||null===(F=k.billDetails[0])||void 0===F||!F.amount})))))},BPACheckPage:function(e){var a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z,Y,K,G,V,X,q,J=e.onSubmit,Z=e.value,Q=l.useTranslation().t,$=(i.useHistory(),i.useRouteMatch(),Digit.UserService.getUser()),ee=(null==$||null===(a=$.info)||void 0===a?void 0:a.permanentCity)||(null==Z?void 0:Z.tenantId)||Digit.ULBService.getCurrentTenantId();"BPA_LOW"===Z.businessService?q="BPA.LOW_RISK_PERMIT_FEE":"BPA"===Z.businessService&&(q="BPA.NC_APP_FEE");var ne=Z.data,te=Z.address,le=Z.owners,ie=Z.nocDocuments,oe=Z.documents,ae=Z.additionalDetails,re=Z.subOccupancy,ue=Z.PrevStateDocuments,de=Z.PrevStateNocDocuments,ce=Z.applicationNo,se=window.location.href.includes("editApplication"),ve=[];null==ue||ue.map(function(e){ve.push(u({},e,{module:"OBPS"}))}),null==oe||null===(r=oe.documents)||void 0===r||r.map(function(e){ve.push(u({},e,{module:"OBPS"}))}),null==de||de.map(function(e){ve.push(u({},e,{module:"NOC"}))}),null==ie||null===(d=ie.nocDocuments)||void 0===d||d.map(function(e){ve.push(u({},e,{module:"NOC"}))});var pe,me=Digit.Hooks.useDocumentSearch(ve,{enabled:(null==ve?void 0:ve.length)>0}),fe=me.data,Ee=me.isLoading,_e=[],ge=[];(null==fe||null===(c=fe.pdfFiles)||void 0===c?void 0:c.length)>0&&(null==fe||null===(pe=fe.pdfFiles)||void 0===pe||pe.map(function(e){"OBPS"==(null==e?void 0:e.module)&&_e.push(e),"NOC"==(null==e?void 0:e.module)&&ge.push(e)}));var Ae=Digit.Hooks.obps.useScrutinyDetails(ee,null==Z||null===(s=Z.data)||void 0===s?void 0:s.scrutinyNumber,{enabled:!(null==Z||null===(v=Z.data)||void 0===v||!v.scrutinyNumber)}),Se=Ae.data,he=Ae.isLoading,be=null==Z?void 0:Z.applicationNo,ye=Digit.Hooks.useFetchBillsForBuissnessService(u({businessService:q},{consumerCode:be},{tenantId:ee}),{enabled:!!be,retry:!1}).data,Te=window.location.href.includes("sendbacktocitizen"),Ce="/digit-ui/citizen/obps/bpa/"+(null==ae?void 0:ae.applicationType.toLowerCase())+"/"+(null==ae?void 0:ae.serviceType.toLowerCase());se&&(Ce="/digit-ui/citizen/obps/editApplication/bpa/"+(null==Z?void 0:Z.tenantId)+"/"+(null==Z?void 0:Z.applicationNo)),Te&&(Ce="/digit-ui/citizen/obps/sendbacktocitizen/bpa/"+(null==Z?void 0:Z.tenantId)+"/"+(null==Z?void 0:Z.applicationNo));var De=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],Pe=n.useMemo(function(){return De.map(function(e){return{Header:Q(""+e.name),accessor:(n=e.id,t=n,function(e,n,l){return e[t]}),id:e.id};var n,t})});function Ne(e){var n,t=[];return null==e||null===(n=e.building)||void 0===n||n.floors.map(function(e){var n,l,i,o,a,r,u,d;t.push({Floor:Q("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:Q(""+(null===(n=e.occupancies)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:Q("BPA_FLOOR_NAME_"+e.number)})}),t}function Ie(e){location.href=e}function Le(e){var n=[];return re&&re["Block_"+(e+1)]&&re["Block_"+(e+1)].map(function(e){var t;n.push(""+Q(fn(null==e||null===(t=e.i18nKey)||void 0===t?void 0:t.toUpperCase(),"-","_")))}),null!=n&&n.length?n.join(", "):"NA"}return Ee||he?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement(zt,{currentStep:4}),t.createElement(o.Header,{styles:{marginLeft:"10px"}},Q("BPA_STEPPER_SUMMARY_HEADER")),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Q("BPA_APPLICATION_NUMBER_LABEL"),text:ce||""}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Q("BPA_BASIC_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_APP_DATE_LABEL"),text:Dn(Number(null==ne?void 0:ne.applicationDate))}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),text:Q("WF_BPA_"+(null==ne?void 0:ne.applicationType))}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:Q(null==ne?void 0:ne.serviceType)}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),text:null==ne?void 0:ne.occupancyType}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),text:Q("WF_BPA_"+(null==ne?void 0:ne.riskType))}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),text:null==ne?void 0:ne.applicantName}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Q("BPA_PLOT_DETAILS_TITLE")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Ce+"/plot-details")}}),t.createElement(o.Row,{className:"border-none",textStyle:{paddingLeft:"12px"},label:Q("BPA_BOUNDARY_PLOT_AREA_LABEL"),text:null!=Se&&null!==(p=Se.planDetail)&&void 0!==p&&null!==(m=p.planInformation)&&void 0!==m&&m.plotArea?(null==Se||null===(f=Se.planDetail)||void 0===f||null===(E=f.planInformation)||void 0===E?void 0:E.plotArea)+" "+Q("BPA_SQ_FT_LABEL"):Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_PLOT_NUMBER_LABEL"),text:(null==Se||null===(_=Se.planDetail)||void 0===_||null===(g=_.planInformation)||void 0===g?void 0:g.plotNo)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_KHATHA_NUMBER_LABEL"),text:(null==Se||null===(A=Se.planDetail)||void 0===A||null===(S=A.planInformation)||void 0===S?void 0:S.khataNo)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_HOLDING_NUMBER_LABEL"),text:(null==ne?void 0:ne.holdingNumber)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),text:(null==ne?void 0:ne.registrationDetails)||Q("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Q("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},Q("BPA_EDCR_DETAILS")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:Q("BPA_EDCR_NO_LABEL"),text:null==ne||null===(h=ne.scrutinyNumber)||void 0===h?void 0:h.edcrNumber}),t.createElement(o.CardSubHeader,null,Q("BPA_UPLOADED_PLAN_DIAGRAM")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return Ie(null==Se?void 0:Se.updatedDxfFile)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},Q("BPA_UPLOADED_PLAN_DXF")),t.createElement(o.CardSubHeader,null,Q("BPA_SCRUNTINY_REPORT_OUTPUT")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return Ie(null==Se?void 0:Se.planReport)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},Q("BPA_SCRUTINY_REPORT_PDF"))),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},Q("BPA_BUILDING_EXTRACT_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Q("BPA_TOTAL_BUILT_UP_AREA_HEADER"),text:(null==Se||null===(b=Se.planDetail)||void 0===b||null===(y=b.blocks)||void 0===y||null===(T=y[0])||void 0===T||null===(C=T.building)||void 0===C?void 0:C.totalBuitUpArea)+" "+Q("BPA_SQ_MTRS_LABEL")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),text:null==Se||null===(D=Se.planDetail)||void 0===D||null===(P=D.blocks)||void 0===P||null===(N=P[0])||void 0===N||null===(I=N.building)||void 0===I?void 0:I.totalFloors}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),text:(null==Se||null===(L=Se.planDetail)||void 0===L||null===(B=L.blocks)||void 0===B||null===(O=B[0])||void 0===O||null===(R=O.building)||void 0===R?void 0:R.declaredBuildingHeight)+" "+Q("BPA_MTRS_LABEL")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},Q("BPA_OCC_SUBOCC_HEADER")),null==Se||null===(x=Se.planDetail)||void 0===x?void 0:x.blocks.map(function(e,n){var l,i;return t.createElement("div",{key:n,style:(null==Se||null===(l=Se.planDetail)||void 0===l||null===(i=l.blocks)||void 0===i?void 0:i.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},t.createElement(o.CardSubHeader,{style:{marginTop:"15px",fontSize:"18px"}},Q("BPA_BLOCK_SUBHEADER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:Q("BPA_SUB_OCCUPANCY_LABEL"),text:""===Le(n)?Q("CS_NA"):Le(n)})),t.createElement("div",{style:{overflow:"scroll"}},t.createElement(o.Table,{className:"customTable table-fixed-first-column table-border-style",t:Q,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:Ne(e),columns:Pe,getCellProps:function(e){return{style:{}}}})))}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},Q("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:Q("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),text:null!=Se&&null!==(w=Se.planDetail)&&void 0!==w&&null!==(M=w.planInformation)&&void 0!==M&&M.demolitionArea?(null==Se||null===(k=Se.planDetail)||void 0===k||null===(F=k.planInformation)||void 0===F?void 0:F.demolitionArea)+" "+Q("BPA_SQ_MTRS_LABEL"):Q("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Q("BPA_NEW_TRADE_DETAILS_HEADER_DETAILS")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Ce+"/location")}}),t.createElement(o.Row,{className:"border-none",textStyle:{paddingLeft:"12px"},label:Q("BPA_DETAILS_PIN_LABEL"),text:(null==te?void 0:te.pincode)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_CITY_LABEL"),text:(null==te||null===(U=te.city)||void 0===U?void 0:U.name)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_LOC_MOHALLA_LABEL"),text:(null==te||null===(H=te.locality)||void 0===H?void 0:H.name)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_DETAILS_SRT_NAME_LABEL"),text:(null==te?void 0:te.street)||Q("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Q("ES_NEW_APPLICATION_LOCATION_LANDMARK"),text:(null==te?void 0:te.landmark)||Q("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Q("BPA_APPLICANT_DETAILS_HEADER")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Ce+"/owner-details")}}),(null==le?void 0:le.owners)&&(null==le?void 0:le.owners.map(function(e,n){var l,i;return t.createElement("div",{key:n,style:(null==le||null===(l=le.owners)||void 0===l?void 0:l.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},le.owners.length>1&&t.createElement(o.CardSubHeader,null,Q("COMMON_OWNER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",textStyle:0==n&&1==le.owners.length?{paddingLeft:"12px"}:{},label:Q("CORE_COMMON_NAME"),text:null==e?void 0:e.name}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_APPLICANT_GENDER_LABEL"),text:Q(null==e||null===(i=e.gender)||void 0===i?void 0:i.i18nKey)}),t.createElement(o.Row,{className:"border-none",label:Q("CORE_COMMON_MOBILE_NUMBER"),text:null==e?void 0:e.mobileNumber}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_IS_PRIMARY_OWNER_LABEL"),text:""+(null==e?void 0:e.isPrimaryOwner)})))})))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Q("BPA_DOCUMENT_DETAILS_LABEL")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Ce+"/document-details")}}),t.createElement(Yt,{documents:wn(_e),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Q("BPA_NOC_DETAILS_SUMMARY")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Ce+"/noc-details")}}),ie&&(null==ie?void 0:ie.NocDetails.map(function(e,n){var l,i,a,r,u;return t.createElement("div",{key:"noc-"+n,style:(null==ie||null===(l=ie.NocDetails)||void 0===l?void 0:l.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},t.createElement(o.CardSectionHeader,{style:{marginBottom:"24px"}},""+Q("BPA_"+(null==e?void 0:e.nocType)+"_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Q("BPA_"+(null==e?void 0:e.nocType)+"_LABEL"),text:null==e?void 0:e.applicationNo}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_NOC_STATUS"),text:Q(""+(null==e?void 0:e.applicationStatus)),textStyle:"APPROVED"==(null==e?void 0:e.applicationStatus)||"AUTO_APPROVED"==(null==e?void 0:e.applicationStatus)?{color:"#00703C"}:{color:"#D4351C"}}),null!=e&&null!==(i=e.additionalDetails)&&void 0!==i&&i.SubmittedOn?t.createElement(o.Row,{className:"border-none",label:""+Q("BPA_NOC_SUBMISSION_DATE"),text:null!=e&&null!==(a=e.additionalDetails)&&void 0!==a&&a.SubmittedOn?Dn(Number(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.SubmittedOn)):"NA"}):null,null!=e&&e.nocNo?t.createElement(o.Row,{className:"border-none",label:""+Q("BPA_APPROVAL_NUMBER_LABEL"),text:(null==e?void 0:e.nocNo)||"NA"}):null,"APPROVED"===(null==e?void 0:e.applicationStatus)||"REJECTED"===(null==e?void 0:e.applicationStatus)||"AUTO_APPROVED"===(null==e?void 0:e.applicationStatus)||"AUTO_REJECTED"===(null==e?void 0:e.applicationStatus)?t.createElement(o.Row,{className:"border-none",label:""+Q("BPA_APPROVED_REJECTED_ON_LABEL"),text:Dn(Number(null==e||null===(u=e.auditDetails)||void 0===u?void 0:u.lastModifiedTime))}):null,t.createElement(o.Row,{className:"border-none",label:Q("BPA_DOCUMENT_DETAILS_LABEL"),text:""}),t.createElement(Yt,{documents:wn(null==ge?void 0:ge.filter(function(n){var t,l,i;return null==n||null===(t=n.documentType)||void 0===t?void 0:t.includes(null==e||null===(l=e.nocType)||void 0===l||null===(i=l.split("_"))||void 0===i?void 0:i[0])}),!0),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}})))})))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardSubHeader,null,Q("BPA_SUMMARY_FEE_EST")),t.createElement(o.StatusTable,null,null==ye||null===(W=ye.Bill[0])||void 0===W||null===(j=W.billDetails[0])||void 0===j?void 0:j.billAccountDetails.map(function(e,n){return t.createElement("div",{key:n},t.createElement(o.Row,{className:"border-none",label:Q(""+e.taxHeadCode),text:"₹ "+(null==e?void 0:e.amount)}))}),t.createElement(o.Row,{className:"border-none",label:Q("BPA_COMMON_TOTAL_AMT"),text:"₹ "+((null==ye||null===(z=ye.Bill)||void 0===z||null===(Y=z[0])||void 0===Y||null===(K=Y.billDetails[0])||void 0===K?void 0:K.amount)||"0")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardHeader,null,Q("BPA_COMMON_TOTAL_AMT")),t.createElement(o.CardHeader,null,"₹ ",(null==ye||null===(G=ye.Bill)||void 0===G||null===(V=G[0])||void 0===V||null===(X=V.billDetails[0])||void 0===X?void 0:X.amount)||"0"),t.createElement(o.SubmitBar,{label:Q("BPA_SEND_TO_CITIZEN_LABEL"),onSubmit:J})))},OCBPACheckPage:function(e){var a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z,Y,K,G,V,X,q,J,Z,Q=e.onSubmit,$=e.value,ee=l.useTranslation().t,ne=(i.useHistory(),i.useRouteMatch(),Digit.UserService.getUser());"BPA_LOW"===$.businessService?Z="BPA.LOW_RISK_PERMIT_FEE":"BPA"===$.businessService?Z="BPA.NC_APP_FEE":"BPA_OC"===$.businessService&&(Z="BPA.NC_OC_APP_FEE");var te=$.data,le=$.nocDocuments,ie=$.documents,oe=$.additionalDetails,ae=$.PrevStateDocuments,re=$.PrevStateNocDocuments,ue=$.applicationNo,de=$.uiFlow,ce=(null==ne||null===(a=ne.info)||void 0===a?void 0:a.permanentCity)||(null==$?void 0:$.tenantId)||Digit.ULBService.getCurrentTenantId(),se=window.location.href.includes("editApplication"),ve=[];null==ae||ae.map(function(e){ve.push(u({},e,{module:"OBPS"}))}),null==ie||null===(r=ie.documents)||void 0===r||r.map(function(e){ve.push(u({},e,{module:"OBPS"}))}),null==re||re.map(function(e){ve.push(u({},e,{module:"NOC"}))}),null==le||null===(d=le.nocDocuments)||void 0===d||d.map(function(e){ve.push(u({},e,{module:"NOC"}))});var pe,me=Digit.Hooks.useDocumentSearch(ve,{enabled:(null==ve?void 0:ve.length)>0}),fe=me.data,Ee=me.isLoading,_e=[],ge=[];(null==fe||null===(c=fe.pdfFiles)||void 0===c?void 0:c.length)>0&&(null==fe||null===(pe=fe.pdfFiles)||void 0===pe||pe.map(function(e){"OBPS"==(null==e?void 0:e.module)&&_e.push(e),"NOC"==(null==e?void 0:e.module)&&ge.push(e)}));var Ae=Digit.Hooks.obps.useScrutinyDetails(ce,null==$||null===(s=$.data)||void 0===s?void 0:s.scrutinyNumber,{enabled:!(null==$||null===(v=$.data)||void 0===v||!v.scrutinyNumber)}),Se=Ae.data,he=Ae.isLoading,be=null==$?void 0:$.applicationNo,ye=Digit.Hooks.useFetchBillsForBuissnessService(u({businessService:Z},{consumerCode:be},{tenantId:ce||(null==$?void 0:$.tenantId)}),{enabled:!!be,retry:!1}).data,Te=se?"/digit-ui/citizen/obps/editApplication/ocbpa/"+(null==$?void 0:$.tenantId)+"/"+(null==$?void 0:$.applicationNo):"/digit-ui/citizen/obps/ocbpa/"+(null==oe?void 0:oe.applicationType.toLowerCase())+"/"+(null==oe?void 0:oe.serviceType.toLowerCase()),Ce=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],De=n.useMemo(function(){return Ce.map(function(e){return{Header:ee(""+e.name),accessor:(n=e.id,t=n,function(e,n,l){return e[t]}),id:e.id};var n,t})});function Pe(e){var n,t=[];return null==e||null===(n=e.building)||void 0===n||n.floors.map(function(e){var n,l,i,o,a,r,u,d;t.push({Floor:ee("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:ee(""+(null===(n=e.occupancies)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:ee("BPA_FLOOR_NAME_"+e.number)})}),t}function Ne(e){var n,t,l,i,o=null==te||null===(n=te.bpaData)||void 0===n||null===(t=n.bpaApprovalResponse)||void 0===t||null===(l=t[0])||void 0===l||null===(i=l.landInfo)||void 0===i?void 0:i.unit,a="";if((null==o?void 0:o.length)>0){var r,u,d=null===(r=o[e])||void 0===r||null===(u=r.usageCategory)||void 0===u?void 0:u.split(",");null!=d&&d.length&&(a=d.map(function(e){return e?""+ee("BPA_SUBOCCUPANCYTYPE_"+fn(null==e?void 0:e.toUpperCase(),"-","_")):"NA"}).join(", "))}return a||"NA"}function Ie(e){location.href=e}return Ee||he?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement(zt,{currentStep:4,flow:"OCBPA"===(null==de?void 0:de.flow)?"OCBPA":""}),t.createElement(o.Header,{styles:{marginLeft:"10px"}},ee("BPA_STEPPER_SUMMARY_HEADER")),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:ee("BPA_APPLICATION_NUMBER_LABEL"),text:ue||""}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,ee("BPA_BASIC_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_APP_DATE_LABEL"),text:Dn(Number(null==te?void 0:te.applicationDate))}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),text:ee("WF_BPA_"+(null==te?void 0:te.applicationType))}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:ee(null==te?void 0:te.serviceType)}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),text:null==te?void 0:te.occupancyType}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),text:ee("WF_BPA_"+(null==te?void 0:te.riskType))}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),text:null==te?void 0:te.applicantName}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,ee("BPA_PLOT_DETAILS_TITLE")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Te+"/plot-details")}}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BOUNDARY_PLOT_AREA_LABEL"),text:null!=Se&&null!==(p=Se.planDetail)&&void 0!==p&&null!==(m=p.planInformation)&&void 0!==m&&m.plotArea?(null==Se||null===(f=Se.planDetail)||void 0===f||null===(E=f.planInformation)||void 0===E?void 0:E.plotArea)+" "+ee("BPA_SQ_FT_LABEL"):ee("CS_NA"),textStyle:{paddingLeft:"12px"}}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_PLOT_NUMBER_LABEL"),text:(null==Se||null===(_=Se.planDetail)||void 0===_||null===(g=_.planInformation)||void 0===g?void 0:g.plotNo)||ee("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_KHATHA_NUMBER_LABEL"),text:(null==Se||null===(A=Se.planDetail)||void 0===A||null===(S=A.planInformation)||void 0===S?void 0:S.khataNo)||ee("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_HOLDING_NUMBER_LABEL"),text:(null==te?void 0:te.holdingNumber)||ee("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),text:(null==te?void 0:te.registrationDetails)||ee("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,""+ee("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")),t.createElement(o.CardSubHeader,null,""+ee("BPA_EDCR_DETAILS")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_OC_EDCR_NO_LABEL"),text:null==te||null===(h=te.scrutinyNumber)||void 0===h?void 0:h.edcrNumber}),t.createElement(o.CardSubHeader,null,ee("BPA_UPLOADED_PLAN_DIAGRAM")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return Ie(null==Se?void 0:Se.updatedDxfFile)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},ee("BPA_UPLOADED_PLAN_DXF")),t.createElement(o.CardSubHeader,null,ee("BPA_SCRUNTINY_REPORT_OUTPUT")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return Ie(null==Se?void 0:Se.planReport)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},ee("BPA_SCRUTINY_REPORT_PDF"))),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,""+ee("BPA_ACTUAL_BUILDING_EXTRACT_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_TOTAL_BUILT_UP_AREA_HEADER"),text:null!=Se&&null!==(b=Se.planDetail)&&void 0!==b&&null!==(y=b.blocks)&&void 0!==y&&null!==(T=y[0])&&void 0!==T&&null!==(C=T.building)&&void 0!==C&&C.totalBuitUpArea?(null==Se||null===(D=Se.planDetail)||void 0===D||null===(P=D.blocks)||void 0===P||null===(N=P[0])||void 0===N||null===(I=N.building)||void 0===I?void 0:I.totalBuitUpArea)+" "+ee("BPA_SQ_MTRS_LABEL"):ee("NA")}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),text:null==Se||null===(L=Se.planDetail)||void 0===L||null===(B=L.blocks)||void 0===B||null===(O=B[0])||void 0===O||null===(R=O.building)||void 0===R?void 0:R.totalFloors}),t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),text:(null==Se||null===(x=Se.planDetail)||void 0===x||null===(w=x.blocks)||void 0===w||null===(M=w[0])||void 0===M||null===(k=M.building)||void 0===k?void 0:k.declaredBuildingHeight)+" "+ee("BPA_MTRS_LABEL")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,""+ee("BPA_OCC_SUBOCC_HEADER")),null==Se||null===(F=Se.planDetail)||void 0===F?void 0:F.blocks.map(function(e,n){var l,i;return t.createElement("div",{key:n,style:(null==Se||null===(l=Se.planDetail)||void 0===l||null===(i=l.blocks)||void 0===i?void 0:i.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},t.createElement(o.CardSubHeader,{style:{marginTop:"15px"}},""+ee("BPA_BLOCK_SUBHEADER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+ee("BPA_SUB_OCCUPANCY_LABEL"),text:Ne(n)})),t.createElement("div",{style:{overflowX:"scroll"}},t.createElement(o.Table,{className:"customTable table-fixed-first-column table-border-style",t:ee,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:Pe(e),columns:De,getCellProps:function(e){return{style:{}}}})))}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,""+ee("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),text:null!=Se&&null!==(U=Se.planDetail)&&void 0!==U&&null!==(H=U.planInformation)&&void 0!==H&&H.demolitionArea?(null==Se||null===(W=Se.planDetail)||void 0===W||null===(j=W.planInformation)||void 0===j?void 0:j.demolitionArea)+" "+ee("BPA_SQ_MTRS_LABEL"):ee("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,ee("BPA_DOCUMENT_DETAILS_LABEL")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Te+"/document-details")}}),t.createElement(Yt,{documents:wn(_e),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,ee("BPA_NOC_DETAILS_SUMMARY")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return Ie(Te+"/noc-details")}}),le&&(null==le?void 0:le.NocDetails.map(function(e,n){var l,i,a,r,u;return t.createElement("div",{key:n,style:(null==le||null===(l=le.NocDetails)||void 0===l?void 0:l.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},t.createElement(o.CardSectionHeader,{style:{marginBottom:"24px"}},""+ee("BPA_"+(null==e?void 0:e.nocType)+"_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:ee("BPA_"+(null==e?void 0:e.nocType)+"_LABEL"),text:null==e?void 0:e.applicationNo}),t.createElement(o.Row,{className:"border-none",label:ee("BPA_NOC_STATUS"),text:ee(""+(null==e?void 0:e.applicationStatus)),textStyle:"APPROVED"==(null==e?void 0:e.applicationStatus)||"AUTO_APPROVED"==(null==e?void 0:e.applicationStatus)?{color:"#00703C"}:{color:"#D4351C"}}),null!=e&&null!==(i=e.additionalDetails)&&void 0!==i&&i.SubmittedOn?t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_NOC_SUBMISSION_DATE"),text:null!=e&&null!==(a=e.additionalDetails)&&void 0!==a&&a.SubmittedOn?Dn(Number(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.SubmittedOn)):"NA"}):null,null!=e&&e.nocNo?t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_APPROVAL_NUMBER_LABEL"),text:(null==e?void 0:e.nocNo)||"NA"}):null,"APPROVED"===(null==e?void 0:e.applicationStatus)||"REJECTED"===(null==e?void 0:e.applicationStatus)||"AUTO_APPROVED"===(null==e?void 0:e.applicationStatus)||"AUTO_REJECTED"===(null==e?void 0:e.applicationStatus)?t.createElement(o.Row,{className:"border-none",label:""+ee("BPA_APPROVED_REJECTED_ON_LABEL"),text:Dn(Number(null==e||null===(u=e.auditDetails)||void 0===u?void 0:u.lastModifiedTime))}):null,t.createElement(o.Row,{className:"border-none",label:ee("BPA_DOCUMENT_DETAILS_LABEL"),text:""}),t.createElement(Yt,{documents:wn(null==ge?void 0:ge.filter(function(n){var t,l,i;return null==n||null===(t=n.documentType)||void 0===t?void 0:t.includes(null==e||null===(l=e.nocType)||void 0===l||null===(i=l.split("_"))||void 0===i?void 0:i[0])}),!0),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}})))})))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardSubHeader,null,""+ee("BPA_SUMMARY_FEE_EST")),t.createElement(o.StatusTable,null,null==ye||null===(z=ye.Bill[0])||void 0===z||null===(Y=z.billDetails[0])||void 0===Y?void 0:Y.billAccountDetails.map(function(e,n){return t.createElement("div",{key:n},t.createElement(o.Row,{className:"border-none",label:""+ee(""+e.taxHeadCode),text:"₹ "+(null==e?void 0:e.amount)}))}),t.createElement(o.Row,{className:"border-none",label:ee("BPA_COMMON_TOTAL_AMT"),text:"₹ "+((null==ye||null===(K=ye.Bill)||void 0===K||null===(G=K[0])||void 0===G||null===(V=G.billDetails[0])||void 0===V?void 0:V.amount)||"0")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardHeader,null,ee("BPA_COMMON_TOTAL_AMT")),t.createElement(o.CardHeader,null,"₹ ",(null==ye||null===(X=ye.Bill)||void 0===X||null===(q=X[0])||void 0===q||null===(J=q.billDetails[0])||void 0===J?void 0:J.amount)||"0"),t.createElement(o.SubmitBar,{label:ee("BPA_SEND_TO_CITIZEN_LABEL"),onSubmit:Q})))},OCBPASendBackCheckPage:function(e){var a,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z,Y,K,G,V,X,q,J,Z,Q,$,ee,ne,te,le,ie,oe,ae,re,ue,de,ce,se,ve,pe,me,fe,Ee,_e,ge,Ae=e.value,Se=l.useTranslation().t,he=i.useHistory(),be=(i.useRouteMatch(),Digit.UserService.getUser()),ye=null==be||null===(a=be.info)||void 0===a?void 0:a.permanentCity,Te=n.useState(null),Ce=Te[0],De=Te[1],Pe=n.useState(!1),Ne=Pe[0],Ie=Pe[1],Le=n.useState(null),Be=Le[0],Oe=Le[1],Re=null==Ae||null===(d=Ae.data)||void 0===d?void 0:d.edcrDetails,xe=r.useQueryClient(),we=Ae.data,Me=Ae.address,ke=Ae.owners,Fe=Ae.nocDocuments,Ue=Ae.documents,He=Ae.subOccupancy,We=Ae.PrevStateDocuments,je=Ae.PrevStateNocDocuments,ze=Ae.applicationNo,Ye="/digit-ui/citizen/obps/sendbacktocitizen/"+("BPA_OC"==Ae.businessService?"ocbpa":"bpa")+"/"+(null==Ae?void 0:Ae.tenantId)+"/"+(null==Ae?void 0:Ae.applicationNo);"OCBPA"===(null==Ae||null===(c=Ae.uiFlow)||void 0===c?void 0:c.flow)&&(Ye="/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/"+(null==Ae?void 0:Ae.tenantId)+"/"+(null==Ae?void 0:Ae.applicationNo)),ge="BPA_LOW"===Ae.businessService?"BPA.LOW_RISK_PERMIT_FEE":"BPA"===Ae.businessService?"BPA.NC_APP_FEE":"BPA.NC_OC_APP_FEE";var Ke=[];null==We||We.map(function(e){Ke.push(u({},e,{module:"OBPS"}))}),null==Ue||null===(s=Ue.documents)||void 0===s||s.map(function(e){Ke.push(u({},e,{module:"OBPS"}))}),null==je||je.map(function(e){Ke.push(u({},e,{module:"NOC"}))}),null==Fe||null===(v=Fe.nocDocuments)||void 0===v||v.map(function(e){Ke.push(u({},e,{module:"NOC"}))});var Ge,Ve=Digit.Hooks.useDocumentSearch(Ke,{enabled:(null==Ke?void 0:Ke.length)>0}),Xe=Ve.data,qe=Ve.isLoading,Je=[],Ze=[];(null==Xe||null===(p=Xe.pdfFiles)||void 0===p?void 0:p.length)>0&&(null==Xe||null===(Ge=Xe.pdfFiles)||void 0===Ge||Ge.map(function(e){"OBPS"==(null==e?void 0:e.module)&&Je.push(e),"NOC"==(null==e?void 0:e.module)&&Ze.push(e)}));var Qe=Digit.Hooks.useRecieptSearch({tenantId:null==Ae?void 0:Ae.tenantId,businessService:ge,consumerCodes:null==Ae?void 0:Ae.applicationNo},{enabled:!!(null!=Ae&&Ae.applicationNo&&ge&&null!=Ae&&Ae.tenantId)}),$e=Qe.data,en=Qe.isLoading,nn=Digit.Hooks.obps.useObpsAPI(null==Ae?void 0:Ae.tenantId,!1),tn=Digit.Hooks.useWorkflowDetails({tenantId:null==Ae?void 0:Ae.tenantId,id:null==Ae?void 0:Ae.applicationNo,moduleCode:"OBPS",config:{enabled:!(null==Ae||!Ae.applicationNo||null==Ae||!Ae.tenantId)}}),ln=function(){Oe(null)},on=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],an=n.useMemo(function(){return on.map(function(e){return{Header:Se(""+e.name),accessor:(n=e.id,t=n,function(e,n,l){return e[t]}),id:e.id};var n,t})});function rn(e){var n,t=[];return null==e||null===(n=e.building)||void 0===n||n.floors.map(function(e){var n,l,i,o,a,r,u,d;t.push({Floor:Se("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:Se(""+(null===(n=e.occupancies)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.type)),BuildupArea:null===(i=e.occupancies)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.CarpetArea)||0,key:Se("BPA_FLOOR_NAME_"+e.number)})}),t}function un(e){location.href=e}function dn(e){var n="";return He["Block_"+(e+1)]&&He["Block_"+(e+1)].map(function(e){var t;n+=Se(fn(null==e||null===(t=e.i18nKey)||void 0===t?void 0:t.toUpperCase(),"-","_"))+", "}),n}return n.useEffect(function(){switch(Ce){case"FORWARD":Ie(!0)}},[Ce]),qe||en?t.createElement(o.Loader,null):t.createElement(t.Fragment,null,t.createElement(zt,{currentStep:4,flow:"OCBPA"===(null==Ae||null===(m=Ae.uiFlow)||void 0===m?void 0:m.flow)?"OCBPA":""}),t.createElement(o.Header,{styles:{marginLeft:"10px"}},Se("BPA_STEPPER_SUMMARY_HEADER")),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_APPLICATION_NUMBER_LABEL"),text:ze||""}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_BASIC_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_APP_DATE_LABEL"),text:Dn(Number(null==we?void 0:we.applicationDate))}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),text:Se("WF_BPA_"+(null==we?void 0:we.applicationType))}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),text:Se(null==we?void 0:we.serviceType)}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),text:null==we?void 0:we.occupancyType}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),text:Se("WF_BPA_"+(null==we?void 0:we.riskType))}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),text:null==we?void 0:we.applicantName}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_PLOT_DETAILS_TITLE")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_BOUNDARY_PLOT_AREA_LABEL"),text:null!=Re&&null!==(f=Re.planDetail)&&void 0!==f&&null!==(E=f.planInformation)&&void 0!==E&&E.plotArea?(null==Re||null===(_=Re.planDetail)||void 0===_||null===(g=_.planInformation)||void 0===g?void 0:g.plotArea)+" "+Se("BPA_SQ_FT_LABEL"):Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_PLOT_NUMBER_LABEL"),text:(null==Re||null===(A=Re.planDetail)||void 0===A||null===(S=A.planInformation)||void 0===S?void 0:S.plotNo)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_KHATHA_NUMBER_LABEL"),text:(null==Re||null===(h=Re.planDetail)||void 0===h||null===(b=h.planInformation)||void 0===b?void 0:b.khataNo)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_HOLDING_NUMBER_LABEL"),text:(null==we?void 0:we.holdingNumber)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),text:(null==we?void 0:we.registrationDetails)||Se("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")),t.createElement(o.CardSubHeader,null,Se("OCBPA"===(null==Ae||null===(y=Ae.uiFlow)||void 0===y?void 0:y.flow)?"BPA_OC_EDCR_NO_LABEL":"BPA_EDCR_DETAILS")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:Se("BPA_EDCR_NO_LABEL"),text:(null==we||null===(T=we.scrutinyNumber)||void 0===T?void 0:T.edcrNumber)||Se("CS_NA")}),t.createElement(o.CardSubHeader,null,Se("BPA_UPLOADED_PLAN_DIAGRAM")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return un(null==Re?void 0:Re.updatedDxfFile)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},Se("BPA_UPLOADED_PLAN_DXF")),t.createElement(o.CardSubHeader,null,Se("BPA_SCRUNTINY_REPORT_OUTPUT")),t.createElement(o.LinkButton,{label:t.createElement(o.PDFSvg,null),onClick:function(){return un(null==Re?void 0:Re.planReport)}}),t.createElement("p",{style:{marginTop:"8px",marginBottom:"20px",textAlign:"Left",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},Se("BPA_SCRUTINY_REPORT_PDF"))),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,"OCBPA"===(null==Ae||null===(C=Ae.uiFlow)||void 0===C?void 0:C.flow)?Se("BPA_ACTUAL_BUILDING_EXTRACT_HEADER"):Se("BPA_BUILDING_EXTRACT_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_TOTAL_BUILT_UP_AREA_HEADER"),text:null!=Re&&null!==(D=Re.planDetail)&&void 0!==D&&null!==(P=D.blocks)&&void 0!==P&&null!==(N=P[0])&&void 0!==N&&null!==(I=N.building)&&void 0!==I&&I.totalBuitUpArea?(null==Re||null===(L=Re.planDetail)||void 0===L||null===(B=L.blocks)||void 0===B||null===(O=B[0])||void 0===O||null===(R=O.building)||void 0===R?void 0:R.totalBuitUpArea)+" "+Se("BPA_SQ_MTRS_LABEL"):Se("NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),text:null==Re||null===(x=Re.planDetail)||void 0===x||null===(w=x.blocks)||void 0===w||null===(M=w[0])||void 0===M||null===(k=M.building)||void 0===k?void 0:k.totalFloors}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),text:(null==Re||null===(F=Re.planDetail)||void 0===F||null===(U=F.blocks)||void 0===U||null===(H=U[0])||void 0===H||null===(W=H.building)||void 0===W?void 0:W.declaredBuildingHeight)+" "+Se("BPA_MTRS_LABEL")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,Se("BPA_OCC_SUBOCC_HEADER")),null==Re||null===(j=Re.planDetail)||void 0===j?void 0:j.blocks.map(function(e,n){return t.createElement("div",{key:n},t.createElement(o.CardSubHeader,{style:{marginTop:"15px"}},Se("BPA_BLOCK_SUBHEADER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:Se("BPA_SUB_OCCUPANCY_LABEL"),text:""===dn(n)?Se("CS_NA"):dn(n)})),t.createElement("div",{style:{overflow:"scroll"}},t.createElement(o.Table,{className:"customTable table-fixed-first-column table-border-style",t:Se,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:rn(e),columns:an,getCellProps:function(e){return{style:{}}}})))}),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardSubHeader,null,Se("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")),t.createElement(o.StatusTable,{style:{border:"none"}},t.createElement(o.Row,{className:"border-none",label:Se("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),text:null!=Re&&null!==(z=Re.planDetail)&&void 0!==z&&null!==(Y=z.planInformation)&&void 0!==Y&&Y.demolitionArea?(null==Re||null===(K=Re.planDetail)||void 0===K||null===(G=K.planInformation)||void 0===G?void 0:G.demolitionArea)+" "+Se("BPA_SQ_MTRS_LABEL")+" ":Se("CS_NA")}))),"OCBPA"!==(null==Ae||null===(V=Ae.uiFlow)||void 0===V?void 0:V.flow)?t.createElement("div",null,t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_NEW_TRADE_DETAILS_HEADER_DETAILS")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_DETAILS_PIN_LABEL"),text:(null==Me?void 0:Me.pincode)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_CITY_LABEL"),text:(null==Me||null===(X=Me.city)||void 0===X?void 0:X.name)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_LOC_MOHALLA_LABEL"),text:(null==Me||null===(q=Me.locality)||void 0===q?void 0:q.name)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_DETAILS_SRT_NAME_LABEL"),text:(null==Me?void 0:Me.street)||Se("CS_NA")}),t.createElement(o.Row,{className:"border-none",label:Se("ES_NEW_APPLICATION_LOCATION_LANDMARK"),text:(null==Me?void 0:Me.landmark)||Se("CS_NA")}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_APPLICANT_DETAILS_HEADER")),(null==ke?void 0:ke.owners)&&(null==ke?void 0:ke.owners.map(function(e,n){var l;return t.createElement("div",{key:n},ke.owners.length>1&&t.createElement(o.CardSubHeader,null,Se("COMMON_OWNER")," ",n+1),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("CORE_COMMON_NAME"),text:null==e?void 0:e.name}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_APPLICANT_GENDER_LABEL"),text:Se(null==e||null===(l=e.gender)||void 0===l?void 0:l.i18nKey)}),t.createElement(o.Row,{className:"border-none",label:Se("CORE_COMMON_MOBILE_NUMBER"),text:null==e?void 0:e.mobileNumber}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_IS_PRIMARY_OWNER_LABEL"),text:""+(null==e?void 0:e.isPrimaryOwner)})))})))):null,t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.StatusTable,null,t.createElement(o.CardHeader,null,Se("BPA_DOCUMENT_DETAILS_LABEL")),t.createElement(o.LinkButton,{label:t.createElement(o.EditIcon,{style:{marginTop:"-10px",float:"right",position:"relative",bottom:"32px"}}),style:{width:"100px",display:"inline"},onClick:function(){return un(Ye+"/document-details")}}),t.createElement(Yt,{documents:wn(Je),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardHeader,null,Se("BPA_NOC_DETAILS_SUMMARY")),Fe&&(null==Fe?void 0:Fe.NocDetails.map(function(e,n){var l;return t.createElement("div",{key:n,style:(null==Fe||null===(l=Fe.NocDetails)||void 0===l?void 0:l.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}:{}},t.createElement(o.CardSectionHeader,{style:{marginBottom:"24px"}},""+Se("BPA_"+(null==e?void 0:e.nocType)+"_HEADER")),t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:Se("BPA_"+(null==e?void 0:e.nocType)+"_LABEL"),text:null==e?void 0:e.applicationNo}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_NOC_STATUS"),text:Se(""+(null==e?void 0:e.applicationStatus)),textStyle:"APPROVED"==(null==e?void 0:e.applicationStatus)||"AUTO_APPROVED"==(null==e?void 0:e.applicationStatus)?{color:"#00703C"}:{color:"#D4351C"}}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_DOCUMENT_DETAILS_LABEL"),text:""}),t.createElement(Yt,{documents:wn(null==Ze?void 0:Ze.filter(function(n){var t,l,i;return null==n||null===(t=n.documentType)||void 0===t?void 0:t.includes(null==e||null===(l=e.nocType)||void 0===l||null===(i=l.split("_"))||void 0===i?void 0:i[0])}),!0),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}})))}))),t.createElement(o.Card,{style:{paddingRight:"16px"}},t.createElement(o.CardSubHeader,null,Se("BPA_SUMMARY_FEE_EST")),t.createElement(o.StatusTable,null,null==$e||null===(J=$e.Payments)||void 0===J||null===(Z=J[0])||void 0===Z||null===(Q=Z.paymentDetails)||void 0===Q||null===($=Q[0])||void 0===$||null===(ee=$.bill)||void 0===ee||null===(ne=ee.billDetails)||void 0===ne||null===(te=ne[0])||void 0===te?void 0:te.billAccountDetails.map(function(e,n){return t.createElement("div",{key:n},t.createElement(o.Row,{className:"border-none",label:Se(""+e.taxHeadCode),text:"₹ "+(null==e?void 0:e.amount)}))}),t.createElement(o.Row,{className:"border-none",label:Se("BPA_COMMON_TOTAL_AMT"),text:"₹ "+((null==$e||null===(le=$e.Payments)||void 0===le||null===(ie=le[0])||void 0===ie||null===(oe=ie.paymentDetails)||void 0===oe||null===(ae=oe[0])||void 0===ae||null===(re=ae.bill)||void 0===re||null===(ue=re.billDetails)||void 0===ue||null===(de=ue[0])||void 0===de?void 0:de.amount)||"0")})),t.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",height:"2px",marginTop:"20px",marginBottom:"20px"}}),t.createElement(o.CardHeader,null,Se("BPA_COMMON_TOTAL_AMT")),t.createElement(o.CardHeader,null,"₹ ",(null==$e||null===(ce=$e.Payments)||void 0===ce||null===(se=ce[0])||void 0===se||null===(ve=se.paymentDetails)||void 0===ve||null===(pe=ve[0])||void 0===pe||null===(me=pe.bill)||void 0===me||null===(fe=me.billDetails)||void 0===fe||null===(Ee=fe[0])||void 0===Ee?void 0:Ee.amount)||"0"),t.createElement(o.SubmitBar,{label:Se("BPA_COMMON_BUTTON_SUBMIT"),onSubmit:function(e){De("FORWARD"),Ie(!0)}})),Ne?t.createElement(rl,{t:Se,action:Ce,tenantId:ye,id:null==Ae?void 0:Ae.applicationNo,closeModal:function(){De(null),Ie(!1)},submitAction:function(e){var n,t=pn(Ae);t.assignee=[];var l="OCBPA"===(null==Ae||null===(n=Ae.uiFlow)||void 0===n?void 0:n.flow),i=Tn(t,l,!0);nn.mutate({BPA:u({},null==i?void 0:i.BPA,{workflow:e})},{onError:function(e,n){var t,l,i;Ie(!1),Oe({key:"error",action:(null==e||null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l||null===(i=l.Errors[0])||void 0===i?void 0:i.message)||e}),setTimeout(ln,5e3)},onSuccess:function(e,n){Ie(!1),Oe({key:"success",action:Ce}),setTimeout(ln,5e3),xe.invalidateQueries("BPA_DETAILS_PAGE"),xe.invalidateQueries("workFlowDetails"),he.replace("/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/"+(null==Ae?void 0:Ae.tenantId)+"/"+(null==Ae?void 0:Ae.applicationNo)+"/acknowledgement",{data:null==Ae?void 0:Ae.applicationNo})}})},actionData:null==tn||null===(_e=tn.data)||void 0===_e?void 0:_e.timeline}):null,Be&&t.createElement(o.Toast,{error:"error"===Be.key,label:Se("success"===Be.key?"ES_OBPS_"+Be.action+"_UPDATE_SUCCESS":Be.action),onClose:ln}))},EDCRAcknowledgement:function(e){var a,r,u,d,c,s,v,p,m=l.useTranslation().t,f=(i.useHistory(),n.useState(!1)),E=f[0],_=f[1];if(n.useEffect(function(){var n;"ERROR"!=(null==e||null===(n=e.data)||void 0===n?void 0:n.type)||E||_(!0)},[null==e||null===(a=e.data)||void 0===a?void 0:a.data]),"ERROR"==(null==e||null===(r=e.data)||void 0===r?void 0:r.type))return t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("CS_BPA_APPLICATION_FAILED"),applicationNumber:"",info:"",successful:!1,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement("div",{style:{padding:"10px",paddingBottom:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")}))),E?t.createElement(o.Toast,{error:"error",label:m(null==e||null===(p=e.data)||void 0===p?void 0:p.data),onClose:function(){return _(null)},isDleteBtn:!0}):null);sessionStorage.setItem("isPermitApplication",!0),sessionStorage.setItem("isEDCRDisable",JSON.stringify(!0));var g=null==e||null===(u=e.data)||void 0===u?void 0:u[0],A=n.useState({}),S=A[0],h=A[1],b=Digit.ULBService.getStateId(),y=(window.Digit.Utils.browser.isMobile(),Digit.Hooks.obps.useMDMS(b,"BPA",["homePageUrlLinks"])),T=y.data,C=y.isLoading;Digit.Hooks.obps.useMDMS(b,"BPA",["RiskTypeComputation"]),n.useEffect(function(){var e,n,t,l;!C&&(null==T||null===(e=T.BPA)||void 0===e||null===(n=e.homePageUrlLinks)||void 0===n?void 0:n.length)>0&&(null==T||null===(t=T.BPA)||void 0===t||null===(l=t.homePageUrlLinks)||void 0===l||l.map(function(e){(null==e?void 0:e.applicationType)===(null==g?void 0:g.appliactionType)&&(null==e?void 0:e.serviceType)===(null==g?void 0:g.applicationSubType)&&h({linkData:e,edcrNumber:null==g?void 0:g.edcrNumber})}))},[!C]);var D=function(){try{var e=window.open(g.planReport,"_blank");return e&&e.focus(),Promise.resolve()}catch(e){return Promise.reject(e)}};return t.createElement("div",null,"Accepted"==g.status?t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("EDCR_ACKNOWLEDGEMENT_SUCCESS_MESSAGE_LABEL"),applicationNumber:null==g?void 0:g.edcrNumber,info:m("EDCR_SCRUTINY_NUMBER_LABEL"),successful:!0,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL")+" - "+(null==g?void 0:g.applicationNumber)),t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:D},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),m("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")),t.createElement("div",{style:{padding:"0px 10px"}},t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/obps/"+(null==S||null===(d=S.linkData)||void 0===d||null===(c=d.flow)||void 0===c?void 0:c.toLowerCase())+"/"+(null==g||null===(s=g.appliactionType)||void 0===s?void 0:s.toLowerCase())+"/"+(null==g||null===(v=g.applicationSubType)||void 0===v?void 0:v.toLowerCase())+"/docs-required",state:S},replace:!0},t.createElement(o.SubmitBar,{label:m("BPA_APPLY_FOR_BPA_LABEL"),onSubmit:function(){return sessionStorage.setItem("clickOnBPAApplyAfterEDCR",!0)}}),t.createElement(o.CardText,{className:"button-sub-text",style:{fontSize:"14px",lineHeight:"16px",textAlign:"center",margin:"0px",marginTop:"4px",fontWeight:"400",color:"#0B0C0C"}},m("BPA_FOR_NEW_CONSTRUCTION_LABEL"))),t.createElement("div",{style:{marginTop:"12px",paddingBottom:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.LinkButton,{label:m("CORE_COMMON_GO_TO_HOME")}))))):t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_LABEL"),applicationNumber:"",info:"",successful:!1,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_TEXT_LABEL")),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL")+" - "+(null==g?void 0:g.applicationNumber)),t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:D},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),m("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")),t.createElement("div",{style:{padding:"10px",paddingBottom:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")})))))},OCEDCRAcknowledgement:function(e){var a,r,u,d,c,s,v,p,m=l.useTranslation().t,f=(i.useHistory(),n.useState(!1)),E=f[0],_=f[1];if(n.useEffect(function(){var n;"ERROR"!=(null==e||null===(n=e.data)||void 0===n?void 0:n.type)||E||_(!0)},[null==e||null===(a=e.data)||void 0===a?void 0:a.data]),"ERROR"==(null==e||null===(r=e.data)||void 0===r?void 0:r.type))return t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("CS_BPA_APPLICATION_FAILED"),applicationNumber:"",info:"",successful:!1,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement("div",{style:{padding:"10px",paddingBottom:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")}))),E?t.createElement(o.Toast,{error:"error",label:m(null==e||null===(p=e.data)||void 0===p?void 0:p.data),onClose:function(){return _(null)},isDleteBtn:!0}):null);sessionStorage.setItem("isEDCRDisable",JSON.stringify(!0)),sessionStorage.setItem("isPermitApplication",!0);var g=null==e||null===(u=e.data)||void 0===u?void 0:u[0],A=n.useState({}),S=A[0],h=A[1],b=Digit.ULBService.getStateId(),y=Digit.Hooks.obps.useMDMS(b,"BPA",["homePageUrlLinks"]),T=y.data,C=y.isLoading;Digit.Hooks.obps.useMDMS(b,"BPA",["RiskTypeComputation"]),n.useEffect(function(){var e,n,t,l;!C&&(null==T||null===(e=T.BPA)||void 0===e||null===(n=e.homePageUrlLinks)||void 0===n?void 0:n.length)>0&&(null==T||null===(t=T.BPA)||void 0===t||null===(l=t.homePageUrlLinks)||void 0===l||l.map(function(e){(null==e?void 0:e.applicationType)===(null==g?void 0:g.appliactionType)&&(null==e?void 0:e.serviceType)===(null==g?void 0:g.applicationSubType)&&h({linkData:e,edcrNumber:null==g?void 0:g.edcrNumber})}))},[!C]);var D=function(){try{var e=window.open(g.planReport,"_blank");return e&&e.focus(),Promise.resolve()}catch(e){return Promise.reject(e)}};return t.createElement("div",null,"Accepted"==(null==g?void 0:g.status)?t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("BPA_OC_EDCR_ACKNOWLEDGEMENT_SUCCESS_MESSAGE_LABEL"),applicationNumber:null==g?void 0:g.edcrNumber,info:m("EDCR_SCRUTINY_NUMBER_LABEL"),successful:!0,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL")+" - "+(null==g?void 0:g.applicationNumber)),t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:D},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),m("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")),t.createElement("div",{style:{padding:"0px 10px"}},t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/obps/"+(null==S||null===(d=S.linkData)||void 0===d||null===(c=d.flow)||void 0===c?void 0:c.toLowerCase())+"/"+(null==g||null===(s=g.appliactionType)||void 0===s?void 0:s.toLowerCase())+"/"+(null==g||null===(v=g.applicationSubType)||void 0===v?void 0:v.toLowerCase())+"/docs-required",state:S},replace:!0},t.createElement(o.SubmitBar,{label:m("BPA_APPLY_OC_FOR_BPA_LABEL"),className:"oc-aknowledgement-screen",onSubmit:function(){return sessionStorage.setItem("clickOnBPAApplyAfterEDCR",!0)}}))),t.createElement("div",{style:{marginTop:"12px",paddingBottom:"10px",paddingLeft:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.LinkButton,{label:m("CORE_COMMON_GO_TO_HOME")})))):t.createElement(o.Card,{style:{padding:"0px"}},t.createElement(o.Banner,{message:m("BPA_OC_EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_LABEL"),applicationNumber:"",info:"",successful:!1,infoStyles:{fontSize:"18px",lineHeight:"21px",fontWeight:"bold",textAlign:"center",padding:"0px 15px"},applicationNumberStyles:{fontSize:"24px",lineHeight:"28px",fontWeight:"bold",marginTop:"10px"},style:{width:"100%",padding:"10px"}}),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_TEXT_LABEL")),t.createElement(o.CardText,{style:{padding:"0px 8px",marginBottom:"10px"}},m("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL")+" - "+(null==g?void 0:g.applicationNumber)),t.createElement("div",{className:"primary-label-btn d-grid",style:{marginLeft:"unset",marginBottom:"10px",padding:"0px 8px"},onClick:D},t.createElement("svg",{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",fill:"#a82227"})),m("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")),t.createElement("div",{style:{padding:"10px",paddingBottom:"10px",paddingLeft:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")})))))},BPAAcknowledgement:function(e){var a,r,u,d,c,s,v=e.data,p=e.onSuccess,m=l.useTranslation().t,f=Digit.ULBService.getCurrentTenantId(),E=Digit.Hooks.obps.useObpsAPI(null!=v&&null!==(a=v.address)&&void 0!==a&&a.city?null===(r=v.address)||void 0===r||null===(u=r.city)||void 0===u?void 0:u.code:f,!0),_=Digit.Hooks.obps.useObpsAPI(null!=v&&null!==(d=v.address)&&void 0!==d&&d.city?null===(c=v.address)||void 0===c||null===(s=c.city)||void 0===s?void 0:s.code:f,!1);return Digit.Hooks.useStore.getInitData(),n.useEffect(function(){try{var e,n,t,l,i=null!=v&&null!==(e=v.address)&&void 0!==e&&e.city?null===(n=v.address)||void 0===n||null===(t=n.city)||void 0===t?void 0:t.code:f;v.tenantId=i;var o={};null==v||null===(l=v.nocDocuments)||void 0===l||l.NocDetails.map(function(e){o=_n(e,v),E.mutate(o,{onSuccess:p})}),o=Tn(v),_.mutate(o,{onSuccess:p})}catch(e){}},[]),_.isLoading||_.isIdle?t.createElement(o.Loader,null):t.createElement(o.Card,null,t.createElement(po,{t:m,data:_.data,isSuccess:_.isSuccess,isLoading:_.isIdle||_.isLoading}),_.isSuccess&&t.createElement(o.CardText,null,function(e,n){var t,l,i,o,a,r,u,d,c,s,v,p=null==n||null===(t=n.BPA)||void 0===t?void 0:t[0],m=null!=n&&null!==(l=n.BPA)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.businessService?null==n||null===(o=n.BPA)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.businessService:"BPA",f=null==p?void 0:p.status;return"BPA_LOW"==m&&(m="BPA"),e("BPA_SUBMIT_APP"==(sessionStorage.getItem("BPA_SUBMIT_APP")?JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")):null)?"BPA_SUBMIT_SUB_HEADER_"+m+"_"+(null==p||null===(r=p.workflow)||void 0===r?void 0:r.action)+"_"+(null!=p&&null!==(u=p.additionalDetails)&&void 0!==u&&u.typeOfArchitect?null==p||null===(d=p.additionalDetails)||void 0===d?void 0:d.typeOfArchitect:"ARCHITECT")+"_"+fn(f," ","_").toUpperCase():"BPA_SUB_HEADER_"+m+"_"+(null==p||null===(c=p.workflow)||void 0===c?void 0:c.action)+"_"+(null!=p&&null!==(s=p.additionalDetails)&&void 0!==s&&s.typeOfArchitect?null==p||null===(v=p.additionalDetails)||void 0===v?void 0:v.typeOfArchitect:"ARCHITECT")+"_"+fn(f," ","_").toUpperCase())}(m,_.data)),!_.isSuccess&&t.createElement(o.CardText,null,m("CS_FILE_PROPERTY_FAILED_RESPONSE")),t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen"}},t.createElement(o.SubmitBar,{label:m("CORE_COMMON_GO_TO_HOME")})))},OCBPAAcknowledgement:function(e){var a=e.data,r=e.onSuccess,u=l.useTranslation().t,d=Digit.ULBService.getCurrentTenantId(),c=Digit.Hooks.obps.useObpsAPI(null!=a&&a.tenantId?null==a?void 0:a.tenantId:d,!0),s=Digit.Hooks.obps.useObpsAPI(null!=a&&a.tenantId?null==a?void 0:a.tenantId:d,!1);return Digit.Hooks.useStore.getInitData(),n.useEffect(function(){try{var e;a.tenantId=null==a?void 0:a.tenantId;var n={};null==a||null===(e=a.nocDocuments)||void 0===e||e.NocDetails.map(function(e){n=_n(e,a),c.mutate(n,{onSuccess:r})}),n=Tn(a,!0),s.mutate(n,{onSuccess:r})}catch(e){}},[]),s.isLoading||s.isIdle?t.createElement(o.Loader,null):t.createElement(o.Card,null,t.createElement(Eo,{t:u,data:s.data,isSuccess:s.isSuccess,isLoading:s.isIdle||s.isLoading}),s.isSuccess&&t.createElement(o.CardText,null,function(e,n){var t,l,i,o,a,r,u,d,c,s,v,p=null==n||null===(t=n.BPA)||void 0===t?void 0:t[0],m=null!=n&&null!==(l=n.BPA)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.businessService?null==n||null===(o=n.BPA)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.businessService:"BPA",f=null==p?void 0:p.status;return"BPA_LOW"==m&&(m="BPA"),"BPA_SUBMIT_APP"==(sessionStorage.getItem("BPA_SUBMIT_APP")?JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")):null)&&e("BPA_SUBMIT_SUB_HEADER_"+m+"_"+(null==p||null===(r=p.workflow)||void 0===r?void 0:r.action)+"_"+(null!=p&&null!==(u=p.additionalDetails)&&void 0!==u&&u.typeOfArchitect?null==p||null===(d=p.additionalDetails)||void 0===d?void 0:d.typeOfArchitect:"ARCHITECT")+"_"+fn(f," ","_").toUpperCase()),e("BPA_SUB_HEADER_"+m+"_"+(null==p||null===(c=p.workflow)||void 0===c?void 0:c.action)+"_"+(null!=p&&null!==(s=p.additionalDetails)&&void 0!==s&&s.typeOfArchitect?null==p||null===(v=p.additionalDetails)||void 0===v?void 0:v.typeOfArchitect:"ARCHITECT")+"_"+fn(f," ","_").toUpperCase())}(u,s.data)),!s.isSuccess&&t.createElement(o.CardText,null,u(Digit.Utils.locale.getTransformedLocale(s.error.message))),t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen"}},t.createElement(o.SubmitBar,{label:u("CORE_COMMON_GO_TO_HOME")})))},OCSendBackAcknowledgement:function(e){var n,a,r,u=null==e?void 0:e.data,d=l.useTranslation().t,c=sessionStorage.getItem("BPA_SUBMIT_APP")?JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")):null,s=null!=u&&u.businessService?null==u?void 0:u.businessService:"BPA",v=null==u?void 0:u.status,p=null!=u&&null!==(n=u.workflow)&&void 0!==n&&n.action?null==u||null===(a=u.workflow)||void 0===a?void 0:a.action:"VERIFY_FORWARD",m=null==u||null===(r=u.additionalDetails)||void 0===r?void 0:r.typeOfArchitect;return"BPA_LOW"==s&&(s="BPA"),t.createElement("div",null,t.createElement(o.Card,null,t.createElement(o.Banner,{message:d("BPA_SUBMIT_APP"==c?"BPA_SUBMIT_HEADER_"+s+"_"+p+"_"+fn(v," ","_").toUpperCase():"BPA_HEADER_"+s+"_"+p+"_"+fn(v," ","_").toUpperCase()),applicationNumber:null==u?void 0:u.applicationNo,info:d("BPA"==s?"BPA_PERMIT_APPLICATION_NUMBER_LABEL":"BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL"),successful:!0,style:{padding:"10px"},headerStyles:{fontSize:"32px"}}),t.createElement(o.CardText,null,d("BPA_SUBMIT_APP"==c?"BPA_SUBMIT_SUB_HEADER_"+s+"_"+p+"_"+(m||"ARCHITECT")+"_"+fn(v," ","_").toUpperCase():"BPA_SUB_HEADER_"+s+"_"+p+"_"+(m||"ARCHITECT")+"_"+fn(v," ","_").toUpperCase())),t.createElement("div",{style:{marginTop:"12px",padding:"10px"}},t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.SubmitBar,{label:d("CORE_COMMON_GO_TO_HOME")})))))},StakeholderAcknowledgement:function(e){var a,r,d,c,s,v,p,m,f,E,_=e.data,g=e.onSuccess,A=l.useTranslation().t,S=Digit.ULBService.getCurrentTenantId(),h=Digit.Hooks.obps.useStakeholderAPI(null!=_&&null!==(a=_.address)&&void 0!==a&&a.city?null===(r=_.address)||void 0===r||null===(d=r.city)||void 0===d?void 0:d.code:S,!0),b=(Digit.Hooks.useStore.getInitData(),window.location.href.includes("openlink")),y=(Digit.Utils.browser.isMobile(),(null==h||null===(c=h.data)||void 0===c||null===(s=c.Licenses)||void 0===s||null===(v=s[0])||void 0===v||null===(p=v.tradeLicenseDetail)||void 0===p||null===(m=p.tradeUnits)||void 0===m||null===(f=m[0])||void 0===f||null===(E=f.tradeType)||void 0===E?void 0:E.split(".")[0])||"ARCHITECT");return n.useEffect(function(){try{var e,n,t,l,i,o=null!=_&&null!==(e=_.result)&&void 0!==e&&null!==(n=e.Licenses[0])&&void 0!==n&&n.tenantId?null==_||null===(t=_.result)||void 0===t||null===(l=t.Licenses[0])||void 0===l?void 0:l.tenantId:o;_.tenantId=o,i=function(e){var n,t,l,i,o,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W,j,z;return{Licenses:[u({},null==e||null===(n=e.result)||void 0===n?void 0:n.Licenses[0],{action:"APPLY",tradeLicenseDetail:u({},null==e||null===(t=e.result)||void 0===t||null===(l=t.Licenses[0])||void 0===l?void 0:l.tradeLicenseDetail,{additionalDetail:{counsilForArchNo:null==e||null===(i=e.formData)||void 0===i||null===(o=i.LicneseType)||void 0===o?void 0:o.ArchitectNo},tradeUnits:[u({},null==e||null===(a=e.result)||void 0===a||null===(r=a.Licenses[0])||void 0===r||null===(d=r.tradeLicenseDetail)||void 0===d||null===(c=d.tradeUnits)||void 0===c?void 0:c[0],{tradeType:null==e||null===(s=e.formData)||void 0===s||null===(v=s.LicneseType)||void 0===v||null===(p=v.LicenseType)||void 0===p?void 0:p.tradeType,id:null==e||null===(m=e.result)||void 0===m||null===(f=m.Licenses[0])||void 0===f||null===(E=f.tradeLicenseDetail)||void 0===E||null===(_=E.tradeUnits)||void 0===_||null===(g=_[0])||void 0===g?void 0:g.id})],owners:[u({},null==e||null===(A=e.result)||void 0===A||null===(S=A.Licenses[0])||void 0===S||null===(h=S.tradeLicenseDetail)||void 0===h||null===(b=h.owners)||void 0===b?void 0:b[0],{gender:null==e||null===(y=e.formData)||void 0===y||null===(T=y.LicneseDetails)||void 0===T||null===(C=T.gender)||void 0===C?void 0:C.code,mobileNumber:null==e||null===(D=e.formData)||void 0===D||null===(P=D.LicneseDetails)||void 0===P?void 0:P.mobileNumber,name:null==e||null===(N=e.formData)||void 0===N||null===(I=N.LicneseDetails)||void 0===I?void 0:I.name,dob:null,emailId:null==e||null===(L=e.formData)||void 0===L||null===(B=L.LicneseDetails)||void 0===B?void 0:B.email,permanentAddress:null==e||null===(O=e.formData)||void 0===O||null===(R=O.LicneseDetails)||void 0===R?void 0:R.PermanentAddress,correspondenceAddress:null==e?void 0:e.Correspondenceaddress,pan:null==e||null===(x=e.formData)||void 0===x||null===(w=x.LicneseDetails)||void 0===w?void 0:w.PanNumber,uuid:null==e||null===(M=e.result)||void 0===M||null===(k=M.Licenses[0])||void 0===k||null===(F=k.tradeLicenseDetail)||void 0===F||null===(U=F.owners)||void 0===U||null===(H=U[0])||void 0===H?void 0:H.uuid})],applicationDocuments:(W=e,z=[],null===(j=W.documents)||void 0===j||j.documents.map(function(e){var n,t;z.push({fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:e.fileName,fileUrl:"",documentType:e.documentType,tenantId:null==W||null===(n=W.result)||void 0===n||null===(t=n.Licenses[0])||void 0===t?void 0:t.tenantId})}),z)})})]}}(_),h.mutate(i,{onSuccess:g})}catch(e){}},[]),h.isLoading||h.isIdle?t.createElement(o.Loader,null):t.createElement("div",null,t.createElement("div",{className:b?"OpenlinkContainer":""},b&&t.createElement(o.BackButton,{style:{border:"none"}},A("CS_COMMON_BACK")),t.createElement(o.Card,null,t.createElement(go,{t:A,data:h.data,isSuccess:h.isSuccess,isLoading:h.isIdle||h.isLoading}),h.isSuccess&&t.createElement(o.CardText,null,""+A("TRADELICENSE_TRADETYPE_"+y)+A("CS_FILE_STAKEHOLDER_RESPONSE")),!h.isSuccess&&t.createElement(o.CardText,null,A("CS_FILE_PROPERTY_FAILED_RESPONSE")),h.isSuccess&&!b&&t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/payment/collect/"+h.data.Licenses[0].businessService+"/"+h.data.Licenses[0].applicationNumber+"/"+h.data.Licenses[0].tenantId+"?tenantId="+h.data.Licenses[0].tenantId,state:{tenantId:h.data.Licenses[0].tenantId}}},t.createElement(o.SubmitBar,{label:A("COMMON_MAKE_PAYMENT")})),!b&&t.createElement(i.Link,{to:"/digit-ui/citizen"},t.createElement(o.LinkButton,{label:A("CORE_COMMON_GO_TO_HOME")})),h.isSuccess&&b&&t.createElement(i.Link,{to:{pathname:"/digit-ui/citizen"}},t.createElement(o.SubmitBar,{label:A("BPA_COMMON_PROCEED_NEXT")})))))},ObpsCreateEDCR:function(e){var o,a,d,c,s=r.useQueryClient(),v=i.useRouteMatch(),p=l.useTranslation().t,m=(i.useLocation(),i.useHistory()),f=[],E=Digit.Hooks.useSessionStorage("EDCR_CREATE",{}),_=E[0],g=E[1],A=n.useState(null),S=A[0],h=A[1],b=n.useState(!1),y=b[0],T=b[1];Digit.SessionStorage.set("EDCR_BACK","IS_EDCR_BACK");var C=Digit.ULBService.getStateId(),D=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(C,[]).data;function P(e,n,t,l){var i,o,a;T(!0);var r=Digit.UserService.getUser(),d={transactionNumber:"",edcrNumber:"",planFile:null,tenantId:"",RequestInfo:{apiId:"",ver:"",ts:"",action:"",did:"",authToken:"",key:"",msgId:"",correlationId:"",userInfo:{id:null==r||null===(i=r.info)||void 0===i?void 0:i.uuid,tenantId:null==r||null===(o=r.info)||void 0===o?void 0:o.tenantId}}},c=null==n?void 0:n.applicantName,s=null==n?void 0:n.file,v=null==n||null===(a=n.tenantId)||void 0===a?void 0:a.code,p=En();d=u({},d,{tenantId:v}),d=u({},d,{transactionNumber:p}),d=u({},d,{applicantName:c}),d=u({},d,{appliactionType:"BUILDING_PLAN_SCRUTINY"}),d=u({},d,{applicationSubType:"NEW_CONSTRUCTION"});var f=new FormData;f.append("edcrRequest",JSON.stringify(d)),f.append("planFile",s),Digit.EDCRService.create({data:f},v).then(function(e,n){var t,l,i;T(!1),null!=e&&null!==(t=e.data)&&void 0!==t&&t.edcrDetail&&(g(null==e||null===(l=e.data)||void 0===l?void 0:l.edcrDetail),m.replace("/digit-ui/citizen/obps/edcrscrutiny/apply/acknowledgement",{data:null==e||null===(i=e.data)||void 0===i?void 0:i.edcrDetail}))}).catch(function(e){var n,t,l,i,o,a,r,u;g({data:null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.errorCode?null==e||null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errorCode:"BPA_INTERNAL_SERVER_ERROR",type:"ERROR"}),T(!1),h({key:!0,label:null!=e&&null!==(o=e.response)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.errorCode?null==e||null===(r=e.response)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.errorCode:"BPA_INTERNAL_SERVER_ERROR"})})}var N=function(){},I=function(){};(D=null!==(o=D)&&void 0!==o&&o.EdcrConfig?null===(a=D)||void 0===a?void 0:a.EdcrConfig:qt).forEach(function(e){f=f.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),f.indexRoute="home";var L=null===(d=Digit)||void 0===d||null===(c=d.ComponentRegistryService)||void 0===c?void 0:c.getComponent("EDCRAcknowledgement");return t.createElement(i.Switch,null,f.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:v.path+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:P,onSkip:N,t:p,formData:_,onAdd:I,isShowToast:S,isSubmitBtnDisable:y,setIsShowToast:h}))}),t.createElement(i.Route,{path:v.path+"/acknowledgement"},t.createElement(L,{data:_,onSuccess:function(){sessionStorage.removeItem("CurrentFinancialYear"),s.invalidateQueries("TL_CREATE_TRADE")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:v.path+"/"+f.indexRoute})))},ObpsCreateOCEDCR:function(e){var o,a,d,c,s=r.useQueryClient(),v=i.useRouteMatch(),p=l.useTranslation().t,m=i.useLocation().pathname,f=i.useRouteMatch().path,E=i.useHistory(),_=[],g=Digit.Hooks.useSessionStorage("OC_EDCR_CREATE",{}),A=g[0],S=g[1],h=n.useState(null),b=h[0],y=h[1],T=n.useState(!1),C=T[0],D=T[1];Digit.SessionStorage.set("EDCR_BACK","IS_EDCR_BACK");var P=Digit.ULBService.getStateId(),N=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(P,[]).data,I=function(e,n,t,l){var i;l?function(e,n,t,l){var i,o,a,r,d,c,s,v;D(!0);var p=A,m=Digit.UserService.getUser(),f={transactionNumber:"",edcrNumber:"",planFile:null,tenantId:"",RequestInfo:{apiId:"",ver:"",ts:"",action:"",did:"",authToken:"",key:"",msgId:"",correlationId:"",userInfo:{id:null==m||null===(i=m.info)||void 0===i?void 0:i.uuid,tenantId:null==m||null===(o=m.info)||void 0===o?void 0:o.tenantId}}},_=En(),g=null==p||null===(a=p.ScrutinyDetails)||void 0===a?void 0:a.edcrNumber,h=null==p||null===(r=p.ScrutinyDetails)||void 0===r?void 0:r.tenantId,b=null==p||null===(d=p.ScrutinyDetails)||void 0===d?void 0:d.applicantName,T=Cn(null==p||null===(c=p.ScrutinyDetails)||void 0===c?void 0:c.ocPermitdate),C=null==p||null===(s=p.ScrutinyDetails)||void 0===s?void 0:s.ocPermitNumber,P=null==p||null===(v=p.ScrutinyDetails)||void 0===v?void 0:v.edcrNumber,N=null==n?void 0:n.file;f=u({},f,{transactionNumber:_}),f=u({},f,{edcrNumber:g}),f=u({},f,{tenantId:h}),f=u({},f,{applicantName:b}),f=u({},f,{appliactionType:"BUILDING_OC_PLAN_SCRUTINY"}),f=u({},f,{applicationSubType:"NEW_CONSTRUCTION"}),f=u({},f,{permitDate:T}),f=u({},f,{permitNumber:C}),f=u({},f,{comparisonEdcrNumber:P});var I=new FormData;I.append("edcrRequest",JSON.stringify(f)),I.append("planFile",N),Digit.EDCRService.create({data:I},h).then(function(e,n){var t,l,i;D(!1),null!=e&&null!==(t=e.data)&&void 0!==t&&t.edcrDetail&&(S(null==e||null===(l=e.data)||void 0===l?void 0:l.edcrDetail),E.replace("/digit-ui/citizen/obps/edcrscrutiny/oc-apply/acknowledgement",{data:null==e||null===(i=e.data)||void 0===i?void 0:i.edcrDetail}))}).catch(function(e){var n,t,l,i,o,a,r,u;S({data:null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.errorCode?null==e||null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errorCode:"BPA_INTERNAL_SERVER_ERROR",type:"ERROR"}),D(!1),y({key:!0,label:null!=e&&null!==(o=e.response)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.errorCode?null==e||null===(r=e.response)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.errorCode:"BPA_INTERNAL_SERVER_ERROR"})})}(0,n):S(u({},A,((i={})[e]=u({},A[e],n),i))),t||function(e){var n=m.split("/").pop(),t=_.find(function(e){return e.route===n}).nextStep,l=E.push;if(null===t)return l(f+"/check");l(f+"/"+t)}()},L=function(){},B=function(){};(N=null!==(o=N)&&void 0!==o&&o.OCEdcrConfig?null===(a=N)||void 0===a?void 0:a.OCEdcrConfig:Jt).forEach(function(e){_=_.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),_.indexRoute="docs-required";var O=null===(d=Digit)||void 0===d||null===(c=d.ComponentRegistryService)||void 0===c?void 0:c.getComponent("OCEDCRAcknowledgement");return t.createElement(i.Switch,null,_.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:v.path+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:I,onSkip:L,t:p,formData:A,onAdd:B,isShowToast:b,isSubmitBtnDisable:C,setIsShowToast:y}))}),t.createElement(i.Route,{path:v.path+"/acknowledgement"},t.createElement(O,{data:A,onSuccess:function(){sessionStorage.removeItem("CurrentFinancialYear"),s.invalidateQueries("TL_CREATE_TRADE")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:v.path+"/"+_.indexRoute})))},ObpsNewBuildingPermit:function(){var e,o,a,d,c,s,v=r.useQueryClient(),p=l.useTranslation().t,m=(i.useRouteMatch(),i.useLocation()),f=m.pathname,E=m.state,_=i.useRouteMatch(),g=i.useHistory();i.useLocation(),sessionStorage.removeItem("BPA_SUBMIT_APP"),Digit.ULBService.getCurrentTenantId();var A=Digit.Hooks.useSessionStorage("BUILDING_PERMIT",null!=E&&E.edcrNumber?{data:{scrutinyNumber:{edcrNumber:null==E?void 0:E.edcrNumber}}}:{}),S=A[0],h=A[1],b=A[2],y=Digit.ULBService.getStateId(),T=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(y,[]).data,C=function(e,n,t,l){var i;h(l?n:""===e?u({},n):u({},S,((i={})[e]=u({},S[e],n),i))),function(e){var n=f.split("/").pop(),t=P.find(function(e){return e.route===n}).nextStep,l=g.push;if(null===t)return l(Qt(_.path,_.params)+"/check");l(Qt(_.path,_.params)+"/"+t)}()},D=function(){},P=[];(T=null!==(e=T)&&void 0!==e&&e.BuildingPermitConfig?null===(o=T)||void 0===o?void 0:o.BuildingPermitConfig:Zt).forEach(function(e){P=P.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),P.indexRoute="docs-required",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(b(),sessionStorage.setItem("isPermitApplication",!1))},[]);var N=null===(a=Digit)||void 0===a||null===(d=a.ComponentRegistryService)||void 0===d?void 0:d.getComponent("BPACheckPage"),I=null===(c=Digit)||void 0===c||null===(s=c.ComponentRegistryService)||void 0===s?void 0:s.getComponent("BPAAcknowledgement");return t.createElement(i.Switch,null,P.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:Qt(_.path,_.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:C,onSkip:D,t:p,formData:S}))}),t.createElement(i.Route,{path:Qt(_.path,_.params)+"/check"},t.createElement(N,{onSubmit:function(){try{return g.push(Qt(_.path,_.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:S})),t.createElement(i.Route,{path:Qt(_.path,_.params)+"/acknowledgement"},t.createElement(I,{data:S,onSuccess:function(){v.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:Qt(_.path,_.params)+"/"+P.indexRoute})))},ObpsOCBuildingPermit:function(){var e,o,a,d,c,s,v=r.useQueryClient(),p=l.useTranslation().t,m=(i.useRouteMatch(),i.useLocation()),f=m.pathname,E=m.state,_=i.useHistory(),g=i.useRouteMatch();sessionStorage.removeItem("BPA_SUBMIT_APP"),Digit.ULBService.getCurrentTenantId();var A=Digit.Hooks.useSessionStorage("BUILDING_PERMIT",null!=E&&E.edcrNumber?{data:{scrutinyNumber:{edcrNumber:null==E?void 0:E.edcrNumber}}}:{}),S=A[0],h=A[1],b=A[2],y=Digit.ULBService.getStateId(),T=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(y,[]).data,C=function(e,n,t,l){var i;h(l?n:""===e?u({},n):u({},S,((i={})[e]=u({},S[e],n),i))),function(e){var n=f.split("/").pop(),t=P.find(function(e){return e.route===n}).nextStep,l=_.push;if(null===t)return l(el(g.path,g.params)+"/check");l(el(g.path,g.params)+"/"+t)}()},D=function(){},P=[];(T=null!==(e=T)&&void 0!==e&&e.OCBuildingPermitConfig?null===(o=T)||void 0===o?void 0:o.OCBuildingPermitConfig:$t).forEach(function(e){P=P.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),P.indexRoute="docs-required",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(b(),sessionStorage.setItem("isPermitApplication",!1))},[]);var N=null===(a=Digit)||void 0===a||null===(d=a.ComponentRegistryService)||void 0===d?void 0:d.getComponent("OCBPACheckPage"),I=null===(c=Digit)||void 0===c||null===(s=c.ComponentRegistryService)||void 0===s?void 0:s.getComponent("OCBPAAcknowledgement");return t.createElement(i.Switch,null,P.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:el(g.path,g.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:C,onSkip:D,t:p,formData:S}))}),t.createElement(i.Route,{path:el(g.path,g.params)+"/check"},t.createElement(N,{onSubmit:function(){try{return _.push(el(g.path,g.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:S})),t.createElement(i.Route,{path:el(g.path,g.params)+"/acknowledgement"},t.createElement(I,{data:S,onSuccess:function(){v.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:el(g.path,g.params)+"/"+P.indexRoute})))},ObpsStakeholderRegistration:function(){var e,o,a,d,c,s,v=r.useQueryClient(),p=l.useTranslation().t,m=i.useRouteMatch().path,f=i.useLocation(),E=f.pathname,_=f.state,g=i.useHistory(),A=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.useSessionStorage("BUILDING_PERMIT",null!=_&&_.edcrNumber?{data:{scrutinyNumber:{edcrNumber:null==_?void 0:_.edcrNumber}}}:{})),S=A[0],h=A[1],b=A[2],y=Digit.ULBService.getStateId(),T=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(y,[]).data,C=function(e,n,t,l){var i;h(l?n:""===e?u({},n):u({},S,((i={})[e]=u({},S[e],n),i))),function(e){var n=E.split("/").pop(),t=P.find(function(e){return e.route===n}).nextStep,l=g.push;if(null===t)return l(m+"/check");l(m+"/"+t)}()},D=function(){},P=[];(T=null!==(e=T)&&void 0!==e&&e.StakeholderConfig?null===(o=T)||void 0===o?void 0:o.StakeholderConfig:nl).forEach(function(e){P=P.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),P.indexRoute="stakeholder-docs-required",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(b(),sessionStorage.setItem("isPermitApplication",!1))},[]);var N=null===(a=Digit)||void 0===a||null===(d=a.ComponentRegistryService)||void 0===d?void 0:d.getComponent("StakeholderCheckPage"),I=null===(c=Digit)||void 0===c||null===(s=c.ComponentRegistryService)||void 0===s?void 0:s.getComponent("StakeholderAcknowledgement");return t.createElement(i.Switch,null,P.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:m+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:C,onSkip:D,t:p,formData:S}))}),t.createElement(i.Route,{path:m+"/check"},t.createElement(N,{onSubmit:function(){try{return g.push(m+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:S})),t.createElement(i.Route,{path:m+"/acknowledgement"},t.createElement(I,{data:S,onSuccess:function(){b(),v.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:m+"/"+P.indexRoute})))},ObpsCitizenBpaApplicationDetail:function(){var e,a,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B=function(e,n,t){var l=e.tenantId;void 0===t&&(t="download");try{var i=new Date;Ae.applicationData.additionalDetails.runDate=Cn(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate());var o=u({},null==Ae?void 0:Ae.applicationData,{edcrDetail:[u({},null==Ae?void 0:Ae.edcrDetails)]});return Promise.resolve(Digit.PaymentService.generatePdf(l,{Bpa:[o]},n)).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(l,{fileStoreIds:e.filestoreIds[0]})).then(function(n){var l,i;return window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank"),o.applicationType=null==Ae||null===(l=Ae.applicationData)||void 0===l||null===(i=l.additionalDetails)||void 0===i?void 0:i.applicationType,Promise.resolve(Digit.OBPSService.edcr_report_download({BPA:u({},o)})).then(function(e){var n=parseInt(e.status,10);201!==n&&200!==n||("print"==t?On(new Blob([e.data],{type:"application/pdf"})):Bn(new Blob([e.data],{type:"application/pdf"}),"edcrReport.pdf"))})})})}catch(e){return Promise.reject(e)}},O=function(e){var n=e.tenantId,t=e.payments;d(e,pl);try{var l={filestoreIds:[null==t?void 0:t.fileStoreId]};return Promise.resolve(Digit.PaymentService.generatePdf(n,{Payments:[u({},t)]},"consolidatedreceipt")).then(function(e){return l=e,Promise.resolve(Digit.PaymentService.printReciept(n,{fileStoreIds:l.filestoreIds[0]})).then(function(e){var n;window.open(e[null===(n=l)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}},R=i.useParams().id,x=l.useTranslation().t,w=Digit.ULBService.getCurrentTenantId(),M=Digit.ULBService.getStateId(),k=window.Digit.Utils.browser.isMobile(),F=r.useQueryClient(),U=n.useState(null),H=U[0],W=U[1],j=n.useState(!1),z=j[0],Y=j[1],K=n.useState(!1),G=K[0],V=K[1],X=n.useState(!1),q=X[0],J=X[1],Z=n.useState(!1),Q=Z[0],$=Z[1],ee=n.useState(null),ne=ee[0],te=ee[1],le=n.useState(!1),ie=le[0],oe=le[1],ae=n.useState(!1),re=ae[0],ue=ae[1],de=n.useState(!1),ce=de[0],se=de[1];sessionStorage.removeItem("BPA_SUBMIT_APP"),sessionStorage.setItem("isEDCRDisable",JSON.stringify(!0)),sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS",JSON.stringify(!1));var ve=i.useHistory();sessionStorage.setItem("bpaApplicationDetails",!1);var pe=!1,me=Digit.Hooks.obps.useMDMS(M,"StakeholderRegistraition","TradeTypetoRoleMapping").data,fe=Digit.Hooks.obps.useMDMS(M,"BPA",["DocTypeMapping"]),Ee=fe.isLoading,_e=fe.data,ge=Digit.Hooks.obps.useBPADetailsPage(w,{applicationNo:R}),Ae=ge.data,Se=ge.isLoading,he=Digit.Hooks.obps.useMDMS(w.split(".")[0],"BPA",["RiskTypeComputation"]).data,be=Digit.Hooks.obps.useObpsAPI(null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.tenantId,!1),ye=Digit.Hooks.useWorkflowDetails({tenantId:null==Ae||null===(a=Ae.applicationData)||void 0===a?void 0:a.tenantId,id:R,moduleCode:"OBPS",config:{enabled:!!Ae}});n.useEffect(function(){if(!Ee&&!Se){var e,n=[];if(null!=_e&&null!==(e=_e.BPA)&&void 0!==e&&e.DocTypeMapping){var t,l,i,o,a,r,d,c,s,v,p;n=null==_e||null===(t=_e.BPA)||void 0===t||null===(l=t.DocTypeMapping)||void 0===l?void 0:l.filter(function(e){var n,t,l,i,o;return"INPROGRESS"==e.WFState&&e.RiskType==(null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.riskType)&&e.ServiceType==(null==Ae||null===(t=Ae.applicationData)||void 0===t||null===(l=t.additionalDetails)||void 0===l?void 0:l.serviceType)&&e.applicationType==(null==Ae||null===(i=Ae.applicationData)||void 0===i||null===(o=i.additionalDetails)||void 0===o?void 0:o.applicationType)});var m=null==Ae||null===(i=Ae.applicationDetails)||void 0===i||null===(o=i.filter(function(e){return"BPA_DOCUMENT_DETAILS_LABEL"===e.title})[0])||void 0===o||null===(a=o.additionalDetails)||void 0===a||null===(r=a.obpsDocuments)||void 0===r||null===(d=r[0])||void 0===d?void 0:d.values,f=[];n&&(null===(c=n)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.docTypes)&&(null===(v=n)||void 0===v||null===(p=v[0])||void 0===p||p.docTypes.map(function(e){m&&m.filter(function(n){return e.code===n.documentType.slice(0,n.documentType.lastIndexOf("."))}).map(function(e){f.push(e)})}));var E=null==Ae?void 0:Ae.applicationDetails.map(function(e){return"BPA_DOCUMENT_DETAILS_LABEL"===e.title?u({},e,{additionalDetails:{obpsDocuments:[{title:"",values:f}]}}):e});Ae.applicationDetails=[].concat(E)}}},[_e,Ae]),n.useEffect(function(){var e,n;"CITIZEN_APPROVAL_INPROCESS"==(null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.status)||"INPROGRESS"==(null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.status)?ue(!0):ue(!1)},[Ae]);var Te=function(e,n){return e?n?e:x(e):x("NA")};n.useEffect(function(){switch(ne){case"APPROVE":case"SEND_TO_ARCHITECT":case"APPLY":case"SKIP_PAYMENT":J(!0)}},[ne]);var Ce=function(){W(null)};function De(e){var n,t,l,i,o,a,r,u,d="BPA_OC"==(null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.businessService)?"ocbpa":"bpa";"FORWARD"===e&&ve.replace("/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/"+(null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.tenantId)+"/"+(null==Ae||null===(l=Ae.applicationData)||void 0===l?void 0:l.applicationNo)+"/check",{data:null==Ae?void 0:Ae.applicationData,edcrDetails:null==Ae?void 0:Ae.edcrDetails}),"PAY"===e&&window.location.assign(window.location.origin+"/digit-ui/citizen/payment/collect/"+Ln(null==Ae?void 0:Ae.businessService,null==Ae?void 0:Ae.applicationStatus)+"/"+R+"/"+(null==Ae?void 0:Ae.tenantId)+"?tenantId="+(null==Ae?void 0:Ae.tenantId)),"SEND_TO_CITIZEN"===e&&((null===(i=ye)||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.processInstances)||void 0===a?void 0:a.length)>2?window.location.replace("/digit-ui/citizen/obps/editApplication/"+d+"/"+(null==Ae||null===(r=Ae.applicationData)||void 0===r?void 0:r.tenantId)+"/"+(null==Ae||null===(u=Ae.applicationData)||void 0===u?void 0:u.applicationNo)):gn(null==Ae?void 0:Ae.applicationData,he,ve,x)),te(e),V(!1)}function Pe(){return!!re&&(pe?!pe:!z)}var Ne=function(e){se(!0),be.mutate({BPA:u({},null==Ae?void 0:Ae.applicationData,{workflow:e})},{onError:function(e,n){var t,l,i,o,a,r;se(!1),J(!1),W({key:"error",action:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(i=l.Errors[0])&&void 0!==i&&i.message?null==e||null===(o=e.response)||void 0===o||null===(a=o.data)||void 0===a||null===(r=a.Errors[0])||void 0===r?void 0:r.message:e}),setTimeout(Ce,5e3)},onSuccess:function(e,n){se(!1),ve.replace("/digit-ui/citizen/obps/response",{data:e}),J(!1),W({key:"success",action:ne}),setTimeout(Ce,5e3),F.invalidateQueries("BPA_DETAILS_PAGE"),F.invalidateQueries("workFlowDetails")}})};if((null===(c=ye)||void 0===c||null===(s=c.data)||void 0===s||null===(v=s.nextActions)||void 0===v?void 0:v.length)>0&&"CITIZEN_APPROVAL_INPROCESS"==(null==Ae||null===(p=Ae.applicationData)||void 0===p?void 0:p.status)){var Ie,Le,Be,Oe,Re,xe,we=Digit.UserService.getUser(),Me=null==we||null===(Ie=we.info)||void 0===Ie?void 0:Ie.roles;if("CITIZEN_APPROVAL_INPROCESS"==(null==Ae||null===(Le=Ae.applicationData)||void 0===Le?void 0:Le.status))ye.data.nextActions=1==(null==Me?void 0:Me.length)&&"CITIZEN"==(null==Me||null===(Oe=Me[0])||void 0===Oe?void 0:Oe.code)?null===(Re=ye)||void 0===Re||null===(xe=Re.data)||void 0===xe?void 0:xe.nextActions:[];else if("INPROGRESS"==(null==Ae||null===(Be=Ae.applicationData)||void 0===Be?void 0:Be.status)){var ke,Fe,Ue=!1;null==me||null===(ke=me.StakeholderRegistraition)||void 0===ke||null===(Fe=ke.TradeTypetoRoleMapping)||void 0===Fe||Fe.map(function(e){var n;null==e||null===(n=e.role)||void 0===n||n.map(function(e){roles.push(e)})});var He,We,je=roles.filter(function(e,n,t){return t.indexOf(e)===n});(null==Me?void 0:Me.length)>1&&Me.forEach(function(e){je.includes(e.code)&&(Ue=!0)}),ye.data.nextActions=Ue?null===(He=ye)||void 0===He||null===(We=He.data)||void 0===We?void 0:We.nextActions:[]}}if("SEND_BACK_TO_CITIZEN"===(null===(m=ye)||void 0===m||null===(f=m.data)||void 0===f||null===(E=f.processInstances)||void 0===E||null===(_=E[0])||void 0===_?void 0:_.action)){var ze;z&&Y(!0),pe=!0;var Ye,Ke,Ge,Ve=Digit.UserService.getUser(),Xe=null==Ve||null===(ze=Ve.info)||void 0===ze?void 0:ze.roles;1!==(null==Xe?void 0:Xe.length)&&(ye=u({},ye,((Ge={data:u({},null===(Ye=ye)||void 0===Ye?void 0:Ye.data,{actionState:{nextActions:[]}})}).data=u({},null===(Ke=ye)||void 0===Ke?void 0:Ke.data,{nextActions:[]}),Ge)))}if(Se||ce)return t.createElement(o.Loader,null);var qe,Je,Ze,Qe,$e,en,nn,tn,ln,on,an,rn,un,dn=[];if((null==Ae||null===(g=Ae.collectionBillDetails)||void 0===g?void 0:g.length)>0&&pn(null==Ae?void 0:Ae.collectionBillDetails).forEach(function(e){var n,t,l,i,o;"BPA.NC_OC_APP_FEE"===(null==e||null===(n=e.paymentDetails[0])||void 0===n?void 0:n.businessService)&&dn.push({order:1,label:x("BPA_APP_FEE_RECEIPT"),onClick:function(){var n,t;return O({tenantId:null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_OC_SAN_FEE"===(null==e||null===(t=e.paymentDetails[0])||void 0===t?void 0:t.businessService)&&dn.push({order:2,label:x("BPA_OC_DEV_PEN_RECEIPT"),onClick:function(){var n,t;return O({tenantId:null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.LOW_RISK_PERMIT_FEE"===(null==e||null===(l=e.paymentDetails[0])||void 0===l?void 0:l.businessService)&&dn.push({order:1,label:x("BPA_FEE_RECEIPT"),onClick:function(){var n,t;return O({tenantId:null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_APP_FEE"===(null==e||null===(i=e.paymentDetails[0])||void 0===i?void 0:i.businessService)&&dn.push({order:1,label:x("BPA_APP_FEE_RECEIPT"),onClick:function(){var n,t;return O({tenantId:null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_SAN_FEE"===(null==e||null===(o=e.paymentDetails[0])||void 0===o?void 0:o.businessService)&&dn.push({order:2,label:x("BPA_SAN_FEE_RECEIPT"),onClick:function(){var n,t;return O({tenantId:null==Ae||null===(n=Ae.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==Ae||null===(t=Ae.applicationData)||void 0===t?void 0:t.applicationNo})}})}),Ae&&"BPA_LOW"===(null==Ae||null===(A=Ae.applicationData)||void 0===A?void 0:A.businessService)&&(null==Ae||null===(S=Ae.collectionBillDetails)||void 0===S?void 0:S.length)>0)(null==Ae||null===(qe=Ae.applicationData)||void 0===qe||!qe.status.includes("REVOCATION"))&&dn.push({order:3,label:x("BPA_PERMIT_ORDER"),onClick:function(){var e;return B({tenantId:null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.tenantId},"buildingpermit-low")}}),(null==Ae||null===(Je=Ae.applicationData)||void 0===Je?void 0:Je.status.includes("REVOCATION"))&&dn.push({order:3,label:x("BPA_REVOCATION_PDF_LABEL"),onClick:function(){var e;return function(e){var n=e.tenantId;d(e,vl);try{var t=u({},null==Ae?void 0:Ae.applicationData);return Promise.resolve(Digit.PaymentService.generatePdf(n,{Bpa:[t]},"bpa-revocation")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(n,{fileStoreIds:e.filestoreIds[0]})).then(function(n){window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}({tenantId:null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.tenantId})}});else if(Ae&&"BPA"===(null==Ae||null===(h=Ae.applicationData)||void 0===h?void 0:h.businessService)&&(null==Ae||null===(b=Ae.collectionBillDetails)||void 0===b?void 0:b.length)>0){var cn;"APPROVED"===(null==Ae||null===(cn=Ae.applicationData)||void 0===cn?void 0:cn.status)&&dn.push({order:3,label:x("BPA_PERMIT_ORDER"),onClick:function(){var e;return B({tenantId:null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.tenantId},"buildingpermit")}})}else{var sn;"APPROVED"===(null==Ae||null===(sn=Ae.applicationData)||void 0===sn?void 0:sn.status)&&dn.push({order:3,label:x("BPA_OC_CERTIFICATE"),onClick:function(){var e;return B({tenantId:null==Ae||null===(e=Ae.applicationData)||void 0===e?void 0:e.tenantId},"occupancy-certificate")}})}null!=Ae&&Ae.comparisionReport&&dn.push({order:4,label:x("BPA_COMPARISON_REPORT_LABEL"),onClick:function(){var e;return window.open(null==Ae||null===(e=Ae.comparisionReport)||void 0===e?void 0:e.comparisonReport,"_blank")}}),dn.sort(function(e,n){return e.order-n.order}),(null===(y=ye)||void 0===y||null===(T=y.data)||void 0===T||null===(C=T.nextActions)||void 0===C?void 0:C.length)>0&&(ye.data.nextActions=null===(Ze=ye)||void 0===Ze||null===(Qe=Ze.data)||void 0===Qe||null===($e=Qe.nextActions)||void 0===$e?void 0:$e.filter(function(e){return"INITIATE"!==e.action}),ye.data.nextActions=null===(en=ye)||void 0===en||null===(nn=en.data)||void 0===nn||null===(tn=nn.nextActions)||void 0===tn?void 0:tn.filter(function(e){return"ADHOC"!==e.action}),ye.data.nextActions=null===(ln=ye)||void 0===ln||null===(on=ln.data)||void 0===on||null===(an=on.nextActions)||void 0===an?void 0:an.filter(function(e){return"SKIP_PAYMENT"!==e.action})),(null==Ae||null===(D=Ae.applicationDetails)||void 0===D?void 0:D.length)>0&&(Ae.applicationDetails=(null==Ae||null===(rn=Ae.applicationDetails)||void 0===rn?void 0:rn.length)>0&&(null==Ae||null===(un=Ae.applicationDetails)||void 0===un?void 0:un.filter(function(e){return 0!==Object.keys(e).length})));var vn=null==Ae||null===(P=Ae.applicationDetails)||void 0===P?void 0:P.filter(function(e){return 0!==Object.keys(e).length});return(null==vn?void 0:vn.length)>0&&(Ae.applicationDetails=vn),t.createElement(n.Fragment,null,t.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto",maxWidth:"960px"}},t.createElement(o.Header,{styles:{fontSize:"32px",marginLeft:"10px"}},x("CS_TITLE_APPLICATION_DETAILS")),dn&&dn.length>0&&t.createElement(o.MultiLink,{className:"multilinkWrapper",onHeadClick:function(){return oe(!ie)},displayOptions:ie,options:dn})),null==Ae||null===(N=Ae.applicationDetails)||void 0===N?void 0:N.filter(function(e){return Object.keys(e).length>0}).map(function(e,l,a){var r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,w,M,F,U,H,W,j,K,X,q,J,Z,ee,ne,te,le,ie,oe,ae,ue,de,ce,se,ve,me,fe,Ee,_e,ge,Se,he,be,Ce,Ne,Ie;return t.createElement("div",null,null!=e&&e.isNotAllowed?null:t.createElement(o.Card,{key:l,style:null!=e&&null!==(r=e.additionalDetails)&&void 0!==r&&r.fiReport||""!==(null==e?void 0:e.title)?{}:{marginTop:"-30px"}},null!=e&&e.isTitleVisible?null:t.createElement(o.CardSubHeader,{style:{fontSize:"24px"}},x(null==e?void 0:e.title)),t.createElement("div",{style:null!=e&&e.isBackGroundColor?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:{}},t.createElement(o.StatusTable,null,null!=e&&e.isCommon&&(null==e||null===(u=e.values)||void 0===u?void 0:u.length)>0?null==e||null===(d=e.values)||void 0===d?void 0:d.map(function(e){return t.createElement(o.Row,null!=e&&e.isUnit?{className:"border-none",label:x(null==e?void 0:e.title),text:null!=e&&e.value?Te(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+x(null==e?void 0:e.isUnit):x("CS_NA")}:null!=e&&e.isLink?{className:"border-none",label:x(null==e?void 0:e.title),text:t.createElement("div",null,t.createElement(i.Link,{to:null==e?void 0:e.to},t.createElement("span",{className:"link",style:{color:"#a82227"}},null==e?void 0:e.value)))}:{className:"border-none",label:x(null==e?void 0:e.title),text:Te(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)||x("CS_NA")})}):null,(null==e||!e.isFeeDetails)&&(null==e||null===(c=e.additionalDetails)||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)>0?null==e||null===(v=e.additionalDetails)||void 0===v||null===(p=v.values)||void 0===p?void 0:p.map(function(n){return t.createElement("div",null,null!=e&&e.isTitleRepeat||null!=n&&n.isHeader||null!=n&&n.isUnit?null:t.createElement(o.Row,{className:"border-none",label:x(null==n?void 0:n.title),textStyle:"Paid"===(null==n?void 0:n.value)?{color:"darkgreen"}:"Unpaid"===(null==n?void 0:n.value)?{color:"red"}:{},text:null!=n&&n.value?Te(null==n?void 0:n.value,null==n?void 0:n.isNotTranslated):x("CS_NA")}),null!=e&&e.isTitleRepeat||null==n||!n.isUnit?null:t.createElement(o.Row,{className:"border-none",label:x(null==n?void 0:n.title),text:null!=n&&n.value?Te(null==n?void 0:n.value,null==n?void 0:n.isNotTranslated)+" "+x(null==n?void 0:n.isUnit):x("CS_NA")}),null!=e&&e.isTitleRepeat||null==n||!n.isHeader?null:t.createElement(o.CardSubHeader,{style:{fontSize:"20px"}},x(null==n?void 0:n.title)))}):null,null!=e&&e.isSubOccupancyTable&&null!=e&&null!==(m=e.additionalDetails)&&void 0!==m&&m.subOccupancyTableDetails?t.createElement(dl,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==Ae?void 0:Ae.applicationData}):null,null!=e&&e.isScrutinyDetails&&(null==e||null===(f=e.additionalDetails)||void 0===f||null===(E=f.scruntinyDetails)||void 0===E?void 0:E.length)>0?null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.scruntinyDetails.map(function(e){var l;return t.createElement(n.Fragment,null,t.createElement(o.Row,{className:"border-none",label:x(null==e?void 0:e.title)}),t.createElement(o.LinkButton,{onClick:function(){location.href=null==e?void 0:e.value},label:t.createElement(o.PDFSvg,null)}),t.createElement("p",{style:(l={marginTop:"8px",marginBottom:"20px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"},l.fontWeight="400",l)},x(null==e?void 0:e.text)))}):null,null!=e&&e.isOwnerDetails&&(null==e||null===(g=e.additionalDetails)||void 0===g||null===(A=g.owners)||void 0===A?void 0:A.length)>0?null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.owners.map(function(n,l){var i,a,r,u;return t.createElement("div",{key:l,style:(null==e||null===(i=e.additionalDetails)||void 0===i||null===(a=i.owners)||void 0===a?void 0:a.length)>1?{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:{}},(null==e||null===(r=e.additionalDetails)||void 0===r||null===(u=r.owners)||void 0===u?void 0:u.length)>1?t.createElement(o.Row,{className:"border-none",label:x("Owner")+" - "+(l+1)}):null,null==n?void 0:n.values.map(function(e){return t.createElement(o.Row,{className:"border-none",label:x(null==e?void 0:e.title),text:Te(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)||x("CS_NA")})}))}):null,(null==e?void 0:e.isDocumentDetails)&&(null==e||null===(h=e.additionalDetails)||void 0===h||null===(b=h.obpsDocuments)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.values)&&t.createElement("div",{style:{marginTop:"-8px"}},t.createElement(Yt,{documents:wn(null==e||null===(T=e.additionalDetails)||void 0===T||null===(C=T.obpsDocuments)||void 0===C||null===(D=C[0])||void 0===D?void 0:D.values),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"20px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}})),null!=e&&e.isFieldInspection&&(null==Ae||null===(P=Ae.applicationData)||void 0===P||null===(N=P.additionalDetails)||void 0===N||null===(I=N.fieldinspection_pending)||void 0===I?void 0:I.length)>0?t.createElement(cl,{isCitizen:!0,fiReport:null==Ae||null===(L=Ae.applicationData)||void 0===L||null===(B=L.additionalDetails)||void 0===B?void 0:B.fieldinspection_pending}):null,(null==e||null===(O=e.additionalDetails)||void 0===O||null===(w=O.noc)||void 0===w?void 0:w.length)>0?null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.noc.map(function(n,l){var i,a,r,u,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,w,M,k,F,U,H,W,j,z,Y,K,G,V;return t.createElement("div",{key:l,style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"960px",minWidth:"280px"}},t.createElement(o.StatusTable,null,t.createElement(o.Row,{className:"border-none",label:x("BPA_"+(null==e||null===(i=e.additionalDetails)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.nocType)+"_HEADER"),labelStyle:{fontSize:"20px"}}),t.createElement(o.Row,{className:"border-none",label:x(""+(null==e||null===(r=e.values)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.title)),textStyle:{marginLeft:"10px"},text:Te(null==e||null===(d=e.values)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.value,null==e||null===(s=e.values)||void 0===s||null===(v=s[0])||void 0===v?void 0:v.isNotTranslated)}),t.createElement(o.Row,{className:"border-none",label:x(""+(null==e||null===(p=e.values)||void 0===p||null===(m=p[1])||void 0===m?void 0:m.title)),textStyle:"APPROVED"==(null==e||null===(f=e.values)||void 0===f||null===(E=f[1])||void 0===E?void 0:E.value)||"AUTO_APPROVED"==(null==e||null===(_=e.values)||void 0===_||null===(g=_[1])||void 0===g?void 0:g.value)?{marginLeft:"10px",color:"#00703C"}:{marginLeft:"10px",color:"#D4351C"},text:Te(null==e||null===(A=e.values)||void 0===A||null===(S=A[1])||void 0===S?void 0:S.value,null==e||null===(h=e.values)||void 0===h||null===(b=h[1])||void 0===b?void 0:b.isNotTranslated)}),null!=e&&null!==(y=e.values)&&void 0!==y&&null!==(T=y[2])&&void 0!==T&&T.value?t.createElement(o.Row,{className:"border-none",label:x(""+(null==e||null===(C=e.values)||void 0===C||null===(D=C[2])||void 0===D?void 0:D.title)),textStyle:{marginLeft:"10px"},text:Te(null==e||null===(P=e.values)||void 0===P||null===(N=P[2])||void 0===N?void 0:N.value,null==e||null===(I=e.values)||void 0===I||null===(L=I[2])||void 0===L?void 0:L.isNotTranslated)}):null,null!=e&&null!==(B=e.values)&&void 0!==B&&null!==(O=B[3])&&void 0!==O&&O.value?t.createElement(o.Row,{className:"border-none",label:x(""+(null==e||null===(R=e.values)||void 0===R||null===(w=R[3])||void 0===w?void 0:w.title)),textStyle:{marginLeft:"10px"},text:Te(null==e||null===(M=e.values)||void 0===M||null===(k=M[3])||void 0===k?void 0:k.value,null==e||null===(F=e.values)||void 0===F||null===(U=F[3])||void 0===U?void 0:U.isNotTranslated)}):null,null!=e&&null!==(H=e.values)&&void 0!==H&&null!==(W=H[3])&&void 0!==W&&W.value?t.createElement(o.Row,{className:"border-none",label:x(""+(null==e||null===(j=e.values)||void 0===j||null===(z=j[4])||void 0===z?void 0:z.title)),textStyle:{marginLeft:"10px"},text:Te(null==e||null===(Y=e.values)||void 0===Y||null===(K=Y[4])||void 0===K?void 0:K.value,null==e||null===(G=e.values)||void 0===G||null===(V=G[4])||void 0===V?void 0:V.isNotTranslated)}):null,t.createElement(o.Row,{className:"border-none",label:x(""+(null==n?void 0:n.title))})),t.createElement(o.StatusTable,null,null!=n&&n.values?t.createElement(Yt,{documents:wn(null==n?void 0:n.values,!0),svgStyles:{},isSendBackFlow:!1,isHrLine:!0,titleStyles:{fontSize:"18px",lineHeight:"24px",fontWeight:700,marginBottom:"10px"}}):t.createElement("div",null,t.createElement(o.CardText,null,x("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))}):null,(null==e||!e.isTitleVisible)&&(null==e||null===(F=e.additionalDetails)||void 0===F||null===(U=F.permit)||void 0===U?void 0:U.length)>0?null==e||null===(H=e.additionalDetails)||void 0===H||null===(W=H.permit)||void 0===W?void 0:W.map(function(e){return t.createElement(o.CardText,null,null==e?void 0:e.title)}):null,(null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.inspectionReport)&&(null==e?void 0:e.isFeeDetails)&&t.createElement(sl,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:[]})))),l===a.length-1&&t.createElement(o.Card,null,t.createElement(n.Fragment,null,t.createElement(tl,{application:null==Ae?void 0:Ae.applicationData,id:R}),!(null!==(K=ye)&&void 0!==K&&K.isLoading)&&(null===(X=ye)||void 0===X||null===(q=X.data)||void 0===q||null===(J=q.nextActions)||void 0===J?void 0:J.length)>0&&!pe&&re&&t.createElement(o.CheckBox,{styles:{margin:"20px 0 40px",paddingTop:"10px"},checked:z,label:t.createElement("div",null,t.createElement("span",null,x("BPA_I_AGREE_THE_LABEL")+" "),t.createElement("span",{style:{color:"#a82227",cursor:"pointer"},onClick:function(){return $(!Q)}},x("BPA_TERMS_AND_CONDITIONS_LABEL"))),onChange:function(){Y(!z),z&&V(!z)}}),!(null!==(Z=ye)&&void 0!==Z&&Z.isLoading)&&(null===(ee=ye)||void 0===ee||null===(ne=ee.data)||void 0===ne||null===(te=ne.nextActions)||void 0===te?void 0:te.length)>1&&t.createElement(o.ActionBar,null,t.createElement("div",{style:{width:"100%"}},G&&null!==(le=ye)&&void 0!==le&&null!==(ie=le.data)&&void 0!==ie&&ie.nextActions?t.createElement(o.Menu,{localeKeyPrefix:"WF_BPA",options:null===(oe=ye)||void 0===oe||null===(ae=oe.data)||void 0===ae?void 0:ae.nextActions.map(function(e){return e.action}),t:x,onSelect:De}):null,t.createElement(o.SubmitBar,{disabled:Pe(),label:x("ES_COMMON_TAKE_ACTION"),onSubmit:function(){return V(!G)}}))),!(null!==(ue=ye)&&void 0!==ue&&ue.isLoading)&&1==(null===(de=ye)||void 0===de||null===(ce=de.data)||void 0===ce||null===(se=ce.nextActions)||void 0===se?void 0:se.length)&&t.createElement(o.ActionBar,null,t.createElement("div",{style:{width:"100%"}},t.createElement("button",{style:{color:"#FFFFFF",fontSize:k?"19px":"initial"},className:Pe()?"submit-bar-disabled":"submit-bar",disabled:Pe(),name:null===(ve=ye)||void 0===ve||null===(me=ve.data)||void 0===me||null===(fe=me.nextActions)||void 0===fe||null===(Ee=fe[0])||void 0===Ee?void 0:Ee.action,value:null===(_e=ye)||void 0===_e||null===(ge=_e.data)||void 0===ge||null===(Se=ge.nextActions)||void 0===Se||null===(he=Se[0])||void 0===he?void 0:he.action,onClick:function(e){De(e.target.value)}},x("WF_BPA_"+(null===(be=ye)||void 0===be||null===(Ce=be.data)||void 0===Ce||null===(Ne=Ce.nextActions)||void 0===Ne||null===(Ie=Ne[0])||void 0===Ie?void 0:Ie.action))))))))}),Q?t.createElement(rl,{t:x,action:"TERMS_AND_CONDITIONS",tenantId:w,id:R,closeModal:function(){$(!1)},submitAction:Ne,applicationData:(null==Ae?void 0:Ae.applicationData)||{}}):null,q?t.createElement(rl,{t:x,action:ne,tenantId:w,id:R,closeModal:function(){te(null),J(!1)},submitAction:Ne,actionData:null===(I=ye)||void 0===I||null===(L=I.data)||void 0===L?void 0:L.timeline}):null,H&&t.createElement(o.Toast,{error:"error"===H.key,label:x("success"===H.key?"ES_OBPS_"+H.action+"_UPDATE_SUCCESS":H.action),onClose:Ce,style:{zIndex:"1000"}}))},ObpsBPASendToArchitect:function(e){var a,d,c,s,v,p,m;sessionStorage.setItem("BPA_SUBMIT_APP",JSON.stringify("BPA_SUBMIT_APP"));var f=r.useQueryClient(),E=i.useRouteMatch(),_=l.useTranslation().t,g=i.useParams(),A=g.applicationNo,S=g.tenantId,h=i.useLocation().pathname,b=i.useHistory(),y=[],T={},C=Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW",{}),D=C[0],P=C[1],N=C[2],I=Digit.ULBService.getStateId(),L=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(I,[]).data,B=Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(),"BPA",["RiskTypeComputation"]).data,O=Digit.Hooks.obps.useBPASearch(S,{applicationNo:A}),R=O.data,x=O.isLoading,w={edcrNumber:null==R||null===(a=R[0])||void 0===a?void 0:a.edcrNumber},M=Digit.Hooks.obps.useScrutinyDetails(Digit.ULBService.getStateId(),w,{enabled:!!w.edcrNumber}),k=M.data,F=M.isLoading,U=Digit.Hooks.obps.useNocDetails(S,{sourceRefId:A}),H=U.data,W=U.isLoading,j=window.location.href.includes("editApplication");n.useEffect(function(){try{var e=sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");e=!e||JSON.parse(e);var n=function(){if(!(e||W||x||F)){T=R?R[0]:{};var n=function(){if(k&&H)return T=R[0],j&&(T.isEditApplication=!0),sessionStorage.setItem("bpaInitialObject",JSON.stringify(u({},T))),Promise.resolve(function(e,n,t,l,i){try{var o,a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O,R,x,w,M,k,F,U,H,W;e.BlockIds=(z=null==e||null===(o=e.landInfo)||void 0===o?void 0:o.unit,Y={},z&&z.map(function(e,n){Y["Block_"+(n+1)]=e.id}),Y),e.address=null==e||null===(a=e.landInfo)||void 0===a?void 0:a.address,e.address.city={code:null==e||null===(r=e.landInfo)||void 0===r||null===(d=r.address)||void 0===d?void 0:d.city,name:null==e||null===(c=e.landInfo)||void 0===c||null===(s=c.address)||void 0===s||null===(v=s.city)||void 0===v?void 0:v.split(".")[1]},e.address.locality=u({},null==e||null===(p=e.landInfo)||void 0===p||null===(m=p.address)||void 0===m?void 0:m.locality,{i18nkey:null==e||null===(f=e.landInfo)||void 0===f||null===(E=f.address)||void 0===E||null===(_=E.locality)||void 0===_?void 0:_.name}),e.data={applicantName:null==n||null===(g=n.planDetail)||void 0===g||null===(A=g.planInformation)||void 0===A?void 0:A.applicantName,applicationDate:null==e||null===(S=e.auditDetails)||void 0===S?void 0:S.createdTime,applicationType:null==n?void 0:n.appliactionType,holdingNumber:null==e||null===(h=e.additionalDetails)||void 0===h?void 0:h.holdingNo,occupancyType:null==n||null===(b=n.planDetail)||void 0===b||null===(y=b.planInformation)||void 0===y?void 0:y.occupancy,registrationDetails:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.registrationDetails,riskType:Digit.Utils.obps.calculateRiskType(null==t||null===(C=t.BPA)||void 0===C?void 0:C.RiskTypeComputation,null==n||null===(D=n.planDetail)||void 0===D||null===(P=D.plot)||void 0===P?void 0:P.area,null==n||null===(N=n.planDetail)||void 0===N?void 0:N.blocks),serviceType:(null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.serviceType)||(null==n?void 0:n.applicationSubType),scrutinyNumber:{edcrNumber:null==e?void 0:e.edcrNumber}},e.PrevStateDocuments=null==e?void 0:e.documents,e.documents={documents:[]};var j=[];return l&&l.map(function(e,n){e.documents&&e.documents.map(function(e,n){j.push(e)})}),e.PrevStateNocDocuments=j,e.nocDocuments={NocDetails:l,nocDocuments:[]},null==e||e.landInfo.owners.map(function(e,n){e.gender={active:!0,code:e.gender,i18nKey:"COMMON_GENDER_"+e.gender}}),e.owners={owners:null==e||null===(L=e.landInfo)||void 0===L?void 0:L.owners,ownershipCategory:{active:!0,code:null==e||null===(B=e.landInfo)||void 0===B?void 0:B.ownershipCategory,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==e||null===(O=e.landInfo)||void 0===O?void 0:O.ownershipCategory.replaceAll(".","_"))}},e.riskType=Digit.Utils.obps.calculateRiskType(null==t||null===(R=t.BPA)||void 0===R?void 0:R.RiskTypeComputation,null==n||null===(x=n.planDetail)||void 0===x||null===(w=x.plot)||void 0===w?void 0:w.area,null==n||null===(M=n.planDetail)||void 0===M?void 0:M.blocks),e.subOccupancy=function(e){var n=[],t=[],l={};return e&&e.map(function(e,o){var a;n=null!=e&&e.usageCategory?null==e||null===(a=e.usageCategory)||void 0===a?void 0:a.split(","):[],t=[],n&&n.map(function(e,n){t.push({code:e,i18nKey:"BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"),name:i("BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"))})}),t&&(l["Block_"+(o+1)]=t)}),l}(null==e||null===(k=e.landInfo)||void 0===k?void 0:k.unit),e.uiFlow={flow:null==e||null===(F=e.businessService)||void 0===F||null===(U=F.split("."))||void 0===U?void 0:U[0],applicationType:(null==e||null===(H=e.additionalDetails)||void 0===H?void 0:H.applicationType)||(null==n?void 0:n.appliactionType),serviceType:(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.serviceType)||(null==n?void 0:n.applicationSubType)},sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS",JSON.stringify(!0)),Promise.resolve(e)}catch(e){return Promise.reject(e)}var z,Y}(T,k,B,H,_)).then(function(e){P(u({},D,e))})}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[R,k,B,H]);var z=function(e,n,t,l){var i;P(l?n:u({},D,((i={})[e]=u({},D[e],n),i))),function(e){var n,t=null==h||null===(n=h.split("/"))||void 0===n?void 0:n.pop(),l=y.find(function(e){return e.route===t}).nextStep,i=b.push;if(null===l)return i(ml(E.path,E.params)+"/check");i(ml(E.path,E.params)+"/"+l)}()},Y=function(){};(L=null!==(d=L)&&void 0!==d&&d.BuildingPermitConfig?null===(c=L)||void 0===c?void 0:c.BuildingPermitConfig:Zt).forEach(function(e){y=y.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),y.indexRoute="check",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(N(),sessionStorage.setItem("isPermitApplication",!1))},[]);var K=null===(s=Digit)||void 0===s||null===(v=s.ComponentRegistryService)||void 0===v?void 0:v.getComponent("BPACheckPage"),G=null===(p=Digit)||void 0===p||null===(m=p.ComponentRegistryService)||void 0===m?void 0:m.getComponent("BPAAcknowledgement");return W||x||F?t.createElement(o.Loader,null):t.createElement(i.Switch,null,y.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:ml(E.path,E.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:z,onSkip:Y,t:_,formData:D}))}),t.createElement(i.Route,{path:ml(E.path,E.params)+"/check"},t.createElement(K,{onSubmit:function(){try{return b.push(ml(E.path,E.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:D})),t.createElement(i.Route,{path:ml(E.path,E.params)+"/acknowledgement"},t.createElement(G,{data:D,onSuccess:function(){f.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,k&&t.createElement(i.Redirect,{to:ml(E.path,E.params)+"/"+y.indexRoute})))},ObpsOCSendToArchitect:function(e){var a,d,c,s,v,p,m,f;sessionStorage.setItem("BPA_SUBMIT_APP",JSON.stringify("BPA_SUBMIT_APP"));var E=r.useQueryClient(),_=i.useRouteMatch(),g=l.useTranslation().t,A=i.useParams(),S=A.applicationNo,h=A.tenantId,b=i.useLocation().pathname,y=i.useHistory(),T=[],C={},D=Digit.Hooks.useSessionStorage("OC_BUILDING_PERMIT_EDITFLOW",{}),P=D[0],N=D[1],I=D[2],L=Digit.ULBService.getStateId(),B=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(L,[]).data,O=Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(),"BPA",["RiskTypeComputation"]).data,R=Digit.Hooks.obps.useBPASearch(h,{applicationNo:S}),x=R.data,w=R.isLoading,M={edcrNumber:null==x||null===(a=x[0])||void 0===a?void 0:a.edcrNumber},k=Digit.Hooks.obps.useScrutinyDetails(Digit.ULBService.getStateId(),M,{enabled:!(null==x||null===(d=x[0])||void 0===d||!d.edcrNumber)}),F=k.data,U=k.isLoading,H=null==F?void 0:F.permitNumber,W=Digit.Hooks.obps.useOCEdcrSearch(h,{approvalNo:H},{enabled:!(!H||null==F||!F.permitNumber)},M).data,j=Digit.Hooks.obps.useNocDetails(h,{sourceRefId:S}),z=j.data,Y=j.isLoading,K=window.location.href.includes("editApplication");JSON.parse(sessionStorage.getItem("tl-trade")),n.useEffect(function(){try{var e=sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");e=!e||JSON.parse(e);var n=function(){if(!(e||Y||w||U)){C=x?x[0]:{};var n=function(){if(F&&W)return C=x[0],K&&(C.isEditApplication=!0),sessionStorage.setItem("bpaInitialObject",JSON.stringify(u({},C))),Promise.resolve(function(e,n,t,l,i,o){try{var a,r,d,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I;e.address=null==e||null===(a=e.landInfo)||void 0===a?void 0:a.address,e.additionalDetails=u({},null==e?void 0:e.additionalDetails,{applicationType:null==n?void 0:n.appliactionType,holdingNo:null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.holdingNo,landId:null==e||null===(d=e.landInfo)||void 0===d?void 0:d.id,serviceType:(null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.serviceType)||(null==n?void 0:n.applicationSubType)}),e.data={applicantName:null==n||null===(s=n.planDetail)||void 0===s||null===(v=s.planInformation)||void 0===v?void 0:v.applicantName,applicationDate:null==e||null===(p=e.auditDetails)||void 0===p?void 0:p.createdTime,applicationType:null==n?void 0:n.appliactionType,holdingNumber:null==e||null===(m=e.additionalDetails)||void 0===m?void 0:m.holdingNo,bpaData:o,occupancyType:null==n||null===(f=n.planDetail)||void 0===f||null===(E=f.planInformation)||void 0===E?void 0:E.occupancy,registrationDetails:null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.registrationDetails,riskType:Digit.Utils.obps.calculateRiskType(null==t||null===(g=t.BPA)||void 0===g?void 0:g.RiskTypeComputation,null==n||null===(A=n.planDetail)||void 0===A||null===(S=A.plot)||void 0===S?void 0:S.area,null==n||null===(h=n.planDetail)||void 0===h?void 0:h.blocks),serviceType:(null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.serviceType)||(null==n?void 0:n.applicationSubType),edcrDetails:n,scrutinyNumber:{edcrNumber:null==n?void 0:n.edcrNumber}},e.PrevStateDocuments=null==e?void 0:e.documents,e.documents={documents:[]};var L=[];return l&&l.map(function(e,n){e.documents&&e.documents.map(function(e,n){L.push(e)})}),e.PrevStateNocDocuments=L,e.nocDocuments={NocDetails:l,nocDocuments:[]},e.riskType=Digit.Utils.obps.calculateRiskType(null==t||null===(y=t.BPA)||void 0===y?void 0:y.RiskTypeComputation,null==n||null===(T=n.planDetail)||void 0===T||null===(C=T.plot)||void 0===C?void 0:C.area,null==n||null===(D=n.planDetail)||void 0===D?void 0:D.blocks),e.subOccupancy=(B=null==e||null===(P=e.landInfo)||void 0===P?void 0:P.unit,O=[],R=[],x={},B&&B.map(function(e,n){var t;O=null!=e&&e.usageCategory?null==e||null===(t=e.usageCategory)||void 0===t?void 0:t.split(","):[],R=[],O&&O.map(function(e,n){R.push({code:e,i18nKey:"BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"),name:i("BPA_SUBOCCUPANCYTYPE_"+e.replaceAll(".","_"))})}),R&&(x["Block_"+(n+1)]=R)}),x),e.uiFlow={flow:"OCBPA",applicationType:(null==e||null===(N=e.additionalDetails)||void 0===N?void 0:N.applicationType)||(null==n?void 0:n.appliactionType),serviceType:(null==e||null===(I=e.additionalDetails)||void 0===I?void 0:I.serviceType)||(null==n?void 0:n.applicationSubType)},sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS",JSON.stringify(!0)),Promise.resolve(e)}catch(e){return Promise.reject(e)}var B,O,R,x}(C,F,O,z,g,W)).then(function(e){N(u({},P,e))})}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[x,F,O,z,W]);var G=function(e,n,t,l){var i;N(l?n:u({},P,((i={})[e]=u({},P[e],n),i))),function(e){var n,t=null==b||null===(n=b.split("/"))||void 0===n?void 0:n.pop(),l=T.find(function(e){return e.route===t}).nextStep,i=y.push;if(null===l)return i(fl(_.path,_.params)+"/check");i(fl(_.path,_.params)+"/"+l)}()},V=function(){};(B=null!==(c=B)&&void 0!==c&&c.OCBuildingPermitConfig?null===(s=B)||void 0===s?void 0:s.OCBuildingPermitConfig:$t).forEach(function(e){T=T.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),T.indexRoute="check",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(I(),sessionStorage.setItem("isPermitApplication",!1))},[]);var X=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("OCBPACheckPage"),q=null===(m=Digit)||void 0===m||null===(f=m.ComponentRegistryService)||void 0===f?void 0:f.getComponent("OCBPAAcknowledgement");return Y||w||U?t.createElement(o.Loader,null):t.createElement(i.Switch,null,T.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:fl(_.path,_.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:G,onSkip:V,t:g,formData:P}))}),t.createElement(i.Route,{path:fl(_.path,_.params)+"/check"},t.createElement(X,{onSubmit:function(){try{return y.push(fl(_.path,_.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:P})),t.createElement(i.Route,{path:fl(_.path,_.params)+"/acknowledgement"},t.createElement(q,{data:P,onSuccess:function(){E.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,F&&W&&t.createElement(i.Redirect,{to:fl(_.path,_.params)+"/"+T.indexRoute})))},ObpsBPASendBackToCitizen:function(e){var a,d,c,s,v,p,m,f,E=l.useTranslation().t,_=r.useQueryClient(),g=i.useRouteMatch(),A=i.useLocation().pathname,S=i.useHistory(),h=Digit.ULBService.getStateId(),b=i.useParams(),y=b.applicationNo,T=b.tenantId;sessionStorage.setItem("BPA_SUBMIT_APP",JSON.stringify("BPA_SUBMIT_APP"));var C=[],D={},P=Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW",{}),N=P[0],I=P[1],L=P[2],B=Digit.ULBService.getStateId(),O=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(B,[]).data,R=Digit.Hooks.obps.useMDMS(h,"BPA",["RiskTypeComputation"]).data,x=Digit.Hooks.obps.useBPASearch(T,{applicationNo:y}),w=x.data,M=x.isLoading,k={edcrNumber:null==w||null===(a=w[0])||void 0===a?void 0:a.edcrNumber},F=y,U=Digit.Hooks.obps.useScrutinyDetails(h,k,{enabled:!(null==w||null===(d=w[0])||void 0===d||!d.edcrNumber)}),H=U.data,W=U.isLoading,j=Digit.Hooks.obps.useNocDetails(T,{sourceRefId:F}),z=j.data,Y=j.isLoading,K=window.location.href.includes("editApplication");n.useEffect(function(){try{var e=sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");e=!e||JSON.parse(e);var n=function(){if(!(e||Y||M||W)){D=w?w[0]:{};var n=function(){if(w&&D&&H&&R&&z)return D=w[0],K&&(D.isEditApplication=!0),sessionStorage.setItem("bpaInitialObject",JSON.stringify(u({},D))),Promise.resolve(Pn(D,H,R,z,E)).then(function(e){I(u({},N,e))})}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[w,H,R,z]);var G=function(e,n,t,l){var i;I(l?n:u({},N,((i={})[e]=u({},N[e],n),i))),function(e){var n=A.split("/").pop(),t=C.find(function(e){return e.route===n}).nextStep,l=S.push;if(null===t)return l(Nn(g.path,g.params)+"/check");l(Nn(g.path,g.params)+"/"+t)}()},V=function(){};(O=null!==(c=O)&&void 0!==c&&c.BuildingPermitConfig?null===(s=O)||void 0===s?void 0:s.BuildingPermitConfig:Zt).forEach(function(e){C=C.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),C.indexRoute="check",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(L(),sessionStorage.setItem("isPermitApplication",!1))},[]);var X=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("OCBPASendBackCheckPage"),q=null===(m=Digit)||void 0===m||null===(f=m.ComponentRegistryService)||void 0===f?void 0:f.getComponent("OCSendBackAcknowledgement");return Y||M||W?t.createElement(o.Loader,null):t.createElement(i.Switch,null,C.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:Nn(g.path,g.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:G,onSkip:V,t:E,formData:N}))}),t.createElement(i.Route,{path:Nn(g.path,g.params)+"/check"},t.createElement(X,{onSubmit:function(){try{return S.push(Nn(g.path,g.params)+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:N})),t.createElement(i.Route,{path:Nn(g.path,g.params)+"/acknowledgement"},t.createElement(q,{data:N,onSuccess:function(){_.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:Nn(g.path,g.params)+"/"+C.indexRoute})))},ObpsOCSendBackToCitizen:function(e){var a,d,c,s,v,p,m,f;sessionStorage.setItem("BPA_SUBMIT_APP",JSON.stringify("BPA_SUBMIT_APP"));var E=l.useTranslation().t,_=r.useQueryClient(),g=i.useRouteMatch(),A=i.useLocation().pathname,S=i.useHistory(),h=Digit.ULBService.getStateId(),b=i.useParams(),y=b.applicationNo,T=b.tenantId,C=[],D={},P=Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW",{}),N=P[0],I=P[1],L=P[2],B=Digit.ULBService.getStateId(),O=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(B,[]).data,R=Digit.Hooks.obps.useMDMS(h,"BPA",["RiskTypeComputation","homePageUrlLinks"]),x=R.isMdmsLoading,w=R.data,M=Digit.Hooks.obps.useBPASearch(T,{applicationNo:y}),k=M.data,F=M.isLoading,U={edcrNumber:null==k||null===(a=k[0])||void 0===a?void 0:a.edcrNumber},H=y,W=Digit.Hooks.obps.useScrutinyDetails(h,U,{enabled:!(null==k||null===(d=k[0])||void 0===d||!d.edcrNumber)}),j=W.data,z=W.isLoading,Y=Digit.Hooks.obps.useNocDetails(T,{sourceRefId:H}),K=Y.data,G=Y.isLoading,V=window.location.href.includes("editApplication");n.useEffect(function(){try{var e=sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");e=!e||JSON.parse(e);var n=function(){if(!(e||G||F||z||x)){D=k?k[0]:{};var n=function(){if(k&&D&&j&&w&&K)return D=k[0],V&&(D.isEditApplication=!0),sessionStorage.setItem("bpaInitialObject",JSON.stringify(u({},D))),Promise.resolve(Pn(D,j,w,K,E)).then(function(e){I(u({},N,e))})}();if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[k,j,w,K]);var X=function(e,n,t,l){var i;I(l?n:u({},N,((i={})[e]=u({},N[e],n),i))),function(e){var n=A.split("/").pop(),t=C.find(function(e){return e.route===n}).nextStep,l=S.push;if(null===t)return l(Nn(g.path,g.params)+"/check");l(Nn(g.path,g.params)+"/"+t)}()},q=function(){};(O=null!==(c=O)&&void 0!==c&&c.OCBuildingPermitConfig?null===(s=O)||void 0===s?void 0:s.OCBuildingPermitConfig:$t).forEach(function(e){C=C.concat(e.body.filter(function(e){return!e.hideInCitizen}))}),C.indexRoute="check",n.useEffect(function(){sessionStorage.getItem("isPermitApplication")&&"true"==sessionStorage.getItem("isPermitApplication")&&(L(),sessionStorage.setItem("isPermitApplication",!1))},[]);var J=null===(v=Digit)||void 0===v||null===(p=v.ComponentRegistryService)||void 0===p?void 0:p.getComponent("OCBPASendBackCheckPage"),Z=null===(m=Digit)||void 0===m||null===(f=m.ComponentRegistryService)||void 0===f?void 0:f.getComponent("OCSendBackAcknowledgement");return G||F||z?t.createElement(o.Loader,null):t.createElement(i.Switch,null,C.map(function(e,n){var l=e.component,o=e.texts,a=e.inputs,r=e.key,u="string"==typeof l?Digit.ComponentRegistryService.getComponent(l):l;return t.createElement(i.Route,{path:Nn(g.path,g.params)+"/"+e.route,key:n},t.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:X,onSkip:q,t:E,formData:N}))}),t.createElement(i.Route,{path:Nn(g.path,g.params)+"/check"},t.createElement(J,{onSubmit:function(){return Promise.resolve()},value:N})),t.createElement(i.Route,{path:Nn(g.path,g.params)+"/acknowledgement"},t.createElement(Z,{data:N,onSuccess:function(){_.invalidateQueries("PT_CREATE_PROPERTY")}})),t.createElement(i.Route,null,t.createElement(i.Redirect,{to:Nn(g.path,g.params)+"/"+C.indexRoute})))},ObpsEdcrInbox:function(e){var i=e.parentRoute;window.scroll(0,0);var r=l.useTranslation().t,d=Digit.ULBService.getCurrentTenantId(),c={},s={appliactionType:"",status:""},v={sortBy:"createdDate",limit:Digit.Utils.browser.isMobile()?50:10,offset:0,sortOrder:"DESC"},p=Digit.SessionStorage.get("EDCR.INBOX"),m=n.useMemo(function(){return"IS_EDCR_BACK"===Digit.SessionStorage.get("EDCR_BACK")?{filterForm:s,searchForm:c,tableForm:v}:p||{filterForm:s,searchForm:c,tableForm:v}},[Object.values((null==p?void 0:p.filterForm)||{}),Object.values((null==p?void 0:p.searchForm)||{}),Object.values((null==p?void 0:p.tableForm)||{})]),f=n.useReducer(function(e,n){switch(n.action){case"mutateSearchForm":return Digit.SessionStorage.set("EDCR.INBOX",u({},e,{searchForm:n.data})),u({},e,{searchForm:n.data});case"mutateFilterForm":return Digit.SessionStorage.set("EDCR.INBOX",u({},e,{filterForm:n.data})),u({},e,{filterForm:n.data});case"mutateTableForm":return Digit.SessionStorage.set("EDCR.INBOX",u({},e,{tableForm:n.data})),u({},e,{tableForm:n.data})}},m),E=f[0],_=f[1],g=Digit.Hooks.obps.useEDCRInbox({tenantId:d,filters:u({},E)}),A=g.isLoading,S=g.data,h=void 0===S?{}:S,b=h.table,y=h.totalCount,T={logoIcon:t.createElement(o.CaseIcon,null),headerText:"ACTION_TEST_EDCR_SCRUTINY",links:[{link:"/digit-ui/citizen/obps/edcrscrutiny/apply",text:r("BPA_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")},{link:"/digit-ui/citizen/obps/edcrscrutiny/oc-apply",text:r("BPA_OC_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")}]},C=n.useCallback(function(e){return t.createElement(_l,{registerRef:e.registerRef,searchFormState:e.searchFormState,searchFieldComponents:e.searchFieldComponents})},[]),D=n.useCallback(function(e){return t.createElement(El,{isInboxLoading:A,registerRef:e.registerRef,controlFilterForm:e.controlFilterForm,setFilterFormValue:e.setFilterFormValue,filterFormState:null==E?void 0:E.filterForm,getFilterFormValue:e.getFilterFormValue})},[A]),P={SearchFormFields:C,onSearchFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:u({},v)}),_({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==E?void 0:E.searchForm,resetSearchFormDefaultValues:c,onSearchFormReset:function(e){e("edcrNumber",null),e("applicationNumber",null),_({action:"mutateSearchForm",data:c})}},N={FilterFormFields:D,onFilterFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),_({action:"mutateTableForm",data:u({},v)}),_({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==E?void 0:E.filterForm,resetFilterFormDefaultValues:s,onFilterFormReset:function(e){e("status",""),e("appliactionType",""),_({action:"mutateFilterForm",data:s})}},I=function(e){var i,o,a,r,d=e.onPageSizeChange,c=e.formState,s=e.totalCount,v=e.table,p=e.dispatch,m=e.onSortingByData,f=l.useTranslation().t,E=n.useMemo(function(){return[{Header:f("EDCR_COMMON_TABLE_APPL_NO"),disableSortBy:!0,Cell:function(e){return t.createElement("div",null,t.createElement("span",{className:""},e.row.original.applicationId))}},{Header:f("CS_APPLICATION_DETAILS_APPLICATION_DATE"),accessor:"createdDate",Cell:function(e){var n,l,i,o=e.row;return null!==(n=o.original)&&void 0!==n&&n.date?(i=Mt(new Date(null===(l=o.original)||void 0===l?void 0:l.date),"dd/MM/yyyy"),t.createElement("span",{className:"cell-text styled-cell"},i)):""}},{Header:f("EDCR_COMMON_TABLE_CITY_LABEL"),accessor:function(e){return f(null==e?void 0:e.locality)},disableSortBy:!0},{Header:f("EDCR_COMMON_TABLE_APPL_NAME"),accessor:function(e){return null==e?void 0:e.owner},disableSortBy:!0},{Header:f("EDCR_COMMON_TABLE_SCRUTINY_NO"),disableSortBy:!0,Cell:function(e){var n,l=e.row;return t.createElement("div",null,"null"!==(null===(n=l.original)||void 0===n?void 0:n.edcrNumber)?t.createElement("span",{className:""},l.original.edcrNumber):"NA")}},{Header:f("EDCR_COMMON_TABLE_COL_STATUS"),accessor:function(e){return t.createElement("span","Accepted"===(n=null==e?void 0:e.status)?{className:"sla-cell-success ",style:{background:"none",padding:"unset"}}:{className:"sla-cell-error",style:{background:"none",padding:"unset"}},n);var n},disableSortBy:!0},{Header:f("PT_COMMON_TABLE_COL_ACTION_LABEL"),Cell:function(e){var n=e.row;return t.createElement(gl,{dowloadOptions:[{label:f("BPA_UPLOADED_PLAN_DXF"),onClick:function(){return window.open(""+n.original.dxfFileurl)}},{label:f("EDCR_SCUTINY_REPORT"),onClick:function(){return window.open(""+n.original.planReportUrl)}}]})},disableSortBy:!0}]});return{getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},className:"table edcr-citizen-inbox",disableSort:!1,autoSort:!1,manualPagination:!0,initSortId:"createdDate",onPageSizeChange:d,currentPage:(null===(i=c.tableForm)||void 0===i?void 0:i.offset)/(null===(o=c.tableForm)||void 0===o?void 0:o.limit),onNextPage:function(){var e,n;return p({action:"mutateTableForm",data:u({},c.tableForm,{offset:parseInt(null===(e=c.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(n=c.tableForm)||void 0===n?void 0:n.limit)})})},onPrevPage:function(){var e,n;return p({action:"mutateTableForm",data:u({},c.tableForm,{offset:parseInt(null===(e=c.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(n=c.tableForm)||void 0===n?void 0:n.limit)})})},pageSizeLimit:null===(a=c.tableForm)||void 0===a?void 0:a.limit,onSort:m,totalRecords:s,onSearch:null==c||null===(r=c.searchForm)||void 0===r?void 0:r.message,onLastPage:function(){var e;return p({action:"mutateTableForm",data:u({},c.tableForm,{offset:10*Math.ceil(s/10)-parseInt(null===(e=c.tableForm)||void 0===e?void 0:e.limit)})})},onFirstPage:function(){return p({action:"mutateTableForm",data:u({},c.tableForm,{offset:0})})},data:v,columns:E}}(u({},{parentRoute:i,onPageSizeChange:function(e){_({action:"mutateTableForm",data:u({},E.tableForm,{limit:e.target.value})})},formState:E,totalCount:y,table:b,dispatch:_,onSortingByData:function(e){if(e.length>0){var n=e[0],t=n.id,l=n.desc;E.tableForm.sortBy===t&&E.tableForm.sortOrder===(l?"DESC":"ASC")||_({action:"mutateTableForm",data:u({},E.tableForm,{sortBy:t,sortOrder:l?"DESC":"ASC"})})}}})),L=function(e){var n=e.table,i=l.useTranslation().t;return{data:null==n?void 0:n.map(function(e){var n,l=e.applicationId,o=e.edcrNumber,a=e.date,r=e.planReportUrl,u=e.dxfFileurl,d=e.locality,c=e.status,s=e.owner;return(n={})[i("EDCR_COMMON_TABLE_APPL_NO")]=l,n[i("CS_APPLICATION_DETAILS_APPLICATION_DATE")]=a?Mt(new Date(a),"dd/MM/yyyy"):"NA",n[i("EDCR_COMMON_TABLE_CITY_LABEL")]=i(d),n[i("EDCR_COMMON_TABLE_APPL_NAME")]=s,n[i("EDCR_COMMON_TABLE_SCRUTINY_NO")]=o,n[i("EDCR_COMMON_TABLE_COL_STATUS")]=t.createElement("span","Accepted"===c?{className:"sla-cell-success ",style:{background:"none",padding:"0px"}}:{className:"sla-cell-error",style:{background:"none",padding:"0px"}},c),n[i("BPA_UPLOADED_PLAN_DXF")]=t.createElement("a",{href:""+u},t.createElement("span",{className:"link"},i("BPA_DOWNLOAD"))),n[i("EDCR_SCUTINY_REPORT")]=t.createElement("a",{href:""+r},t.createElement("span",{className:"link"},i("BPA_DOWNLOAD"))),n}),isTwoDynamicPrefix:!0,getRedirectionLink:function(){},handleClickEnabled:!1,serviceRequestIdKey:"applicationNo",MobileSortFormValues:function(){var e=[{code:"DESC",i18nKey:"ES_INBOX_DATE_LATEST_FIRST"},{code:"ASC",i18nKey:"ES_INBOX_DATE_LATEST_LAST"}],n=a.useFormContext();return t.createElement(o.SearchField,null,t.createElement(a.Controller,{name:"sortOrder",control:n.control,render:function(n){var l=n.onChange,i=n.value;return t.createElement(o.RadioButtons,{onSelect:function(e){l(e.code)},selectedOption:e.filter(function(e){return e.code===i})[0],optionsKey:"i18nKey",name:"sortOrder",options:e})}}))}}}({table:b}),B={onMobileSortOrderData:function(e){_({action:"mutateTableForm",data:u({},E.tableForm,{sortOrder:e.sortOrder})})},sortFormDefaultValues:null==E?void 0:E.tableForm,onSortFormReset:function(e){e("sortOrder","DESC"),_({action:"mutateTableForm",data:v})}};return t.createElement(n.Fragment,null,t.createElement(o.Header,null,r("ES_COMMON_INBOX"),y?t.createElement("p",{className:"inbox-count"},y):null),t.createElement(o.InboxComposer,u({isInboxLoading:A,PropsForInboxLinks:T},P,N,B,{propsForInboxTable:I,propsForInboxMobileCards:L,formState:E})))},ObpsEmpApplicationDetail:function(){var e,a,r,u,d,c=i.useParams().id,s=l.useTranslation().t,v=Digit.ULBService.getCurrentTenantId(),p=null==v?void 0:v.split(".")[0],m=n.useState(null),f=m[0],E=m[1],_=n.useState(!1),g=_[0],A=_[1],S=Digit.Hooks.obps.useLicenseDetails(p,{applicationNumber:c,tenantId:p},{}),h=S.isLoading,b=S.data,y=window.Digit.Utils.browser.isMobile(),T=Digit.Hooks.obps.useBPAREGApplicationActions(v).mutate,C=Digit.Hooks.useWorkflowDetails({tenantId:null==v?void 0:v.split(".")[0],id:c,moduleCode:"BPAREG"}),D=[];return(null==b||null===(e=b.payments)||void 0===e?void 0:e.length)>0&&D.push({label:s("TL_RECEIPT"),onClick:function(){var e,n,t,l,i,o;return Rn((null==b||null===(e=b.payments)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.paymentDetails)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.businessService)||"BPAREG",null==b||null===(i=b.applicationData)||void 0===i?void 0:i.applicationNumber,null==b||null===(o=b.applicationData)||void 0===o?void 0:o.tenantId)}}),t.createElement("div",{className:"employee-main-application-details"},t.createElement("div",{className:"employee-application-details"},t.createElement(o.Header,null,s("CS_TITLE_APPLICATION_DETAILS")),(null==b||null===(a=b.payments)||void 0===a?void 0:a.length)>0&&t.createElement(o.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:function(){return A(!g)},displayOptions:g,options:D,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className"})),t.createElement(Ci,{applicationDetails:b,isLoading:h,isDataLoading:h,applicationData:null==b?void 0:b.applicationData,mutate:T,workflowDetails:C,businessService:null!=C&&null!==(r=C.data)&&void 0!==r&&r.applicationBusinessService?null==C||null===(u=C.data)||void 0===u?void 0:u.applicationBusinessService:null==b||null===(d=b.applicationData)||void 0===d?void 0:d.businessService,moduleCode:"BPAREG",showToast:f,setShowToast:E,ActionBarStyle:y?{}:{paddingRight:"50px"},MenuStyle:y?{}:{right:"50px"},closeToast:function(){E(null)},timelineStatusPrefix:"WF_NEWTL_"}))},ObpsEmployeeBpaApplicationDetail:function(){var e,a,r,c,s,v,p,m,f,E,_,g,A,S,h,b,y,T,C,D,P,N,I,L,B,O=function(e,n,t){var l=e.tenantId;void 0===t&&(t="download");try{var i=new Date;ne.applicationData.additionalDetails.runDate=Cn(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate());var o=u({},null==ne?void 0:ne.applicationData,{edcrDetail:[u({},null==ne?void 0:ne.edcrDetails)]});return Promise.resolve(Digit.PaymentService.generatePdf(l,{Bpa:[o]},n)).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(l,{fileStoreIds:e.filestoreIds[0]})).then(function(n){var l,i;return window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank"),o.applicationType=null==ne||null===(l=ne.applicationData)||void 0===l||null===(i=l.additionalDetails)||void 0===i?void 0:i.applicationType,Promise.resolve(Digit.OBPSService.edcr_report_download({BPA:u({},o)})).then(function(e){var n=parseInt(e.status,10);201!==n&&200!==n||("print"==t?On(new Blob([e.data],{type:"application/pdf"})):Bn(new Blob([e.data],{type:"application/pdf"}),"edcrReport.pdf"))})})})}catch(e){return Promise.reject(e)}},R=function(e){var n=e.tenantId,t=e.payments;d(e,co);try{var l={filestoreIds:[null==t?void 0:t.fileStoreId]};return Promise.resolve(Digit.PaymentService.generatePdf(n,{Payments:[u({},t)]},"consolidatedreceipt")).then(function(e){return l=e,Promise.resolve(Digit.PaymentService.printReciept(n,{fileStoreIds:l.filestoreIds[0]})).then(function(e){var n;window.open(e[null===(n=l)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}},x=i.useParams().id,w=l.useTranslation().t,M=Digit.ULBService.getCurrentTenantId(),k=n.useState(null),F=k[0],U=k[1],H=n.useState(!1),W=H[0],j=H[1],z=(i.useHistory(),Digit.Hooks.useSessionStorage("store-data",null),Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1)[1]),Y=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{})[2],K=n.useState(null)[1],G=Digit.ULBService.getStateId(),V=window.Digit.Utils.browser.isMobile(),X=Digit.Hooks.obps.useMDMS(G,"BPA",["DocTypeMapping"]),q=X.isLoading,J=X.data,Z=Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(G,[]).data,Q=Digit.Hooks.obps.useMDMS(G,"BPA",["RiskTypeComputation"]).data,$=Digit.Hooks.obps.useBPADetailsPage(M,{applicationNo:x}),ee=$.data,ne=void 0===ee?{}:ee,te=$.isLoading;n.useEffect(function(){if(!q&&!te){var e,n=[];if(null!=J&&null!==(e=J.BPA)&&void 0!==e&&e.DocTypeMapping){var t,l,i,o,a,r,d,c,s,v,p;n=null==J||null===(t=J.BPA)||void 0===t||null===(l=t.DocTypeMapping)||void 0===l?void 0:l.filter(function(e){var n,t,l,i,o;return"INPROGRESS"==e.WFState&&e.RiskType==(null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.riskType)&&e.ServiceType==(null==ne||null===(t=ne.applicationData)||void 0===t||null===(l=t.additionalDetails)||void 0===l?void 0:l.serviceType)&&e.applicationType==(null==ne||null===(i=ne.applicationData)||void 0===i||null===(o=i.additionalDetails)||void 0===o?void 0:o.applicationType)});var m=null==ne||null===(i=ne.applicationDetails)||void 0===i||null===(o=i.filter(function(e){return"BPA_DOCUMENT_DETAILS_LABEL"===e.title})[0])||void 0===o||null===(a=o.additionalDetails)||void 0===a||null===(r=a.obpsDocuments)||void 0===r||null===(d=r[0])||void 0===d?void 0:d.values,f=[];n&&(null===(c=n)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.docTypes)&&(null===(v=n)||void 0===v||null===(p=v[0])||void 0===p||p.docTypes.map(function(e){m&&m.filter(function(n){return e.code===n.documentType.slice(0,n.documentType.lastIndexOf("."))}).map(function(e){f.push(e)})}));var E=ne.applicationDetails&&ne.applicationDetails.map(function(e){return"BPA_DOCUMENT_DETAILS_LABEL"===e.title?u({},e,{additionalDetails:{obpsDocuments:[{title:"",values:f}]}}):e});ne.applicationDetails=E&&E.length>0?[].concat(E):null==ne?void 0:ne.applicationDetails}}},[J,ne]);var le=n.useState(!1),ie=le[0],oe=le[1],ae=Digit.Hooks.obps.useApplicationActions(M).mutate,re=Digit.Hooks.obps.useObpsAPI(M,!0),de="";sessionStorage.setItem("bpaApplicationDetails",!0),n.useEffect(function(){z(!1),Y()},[]);var ce,se,ve,pe,me,Ee,_e,ge,Ae,Se=null!=Z&&Z.InspectionReportConfig?null==Z?void 0:Z.InspectionReportConfig:Di,he=Digit.Hooks.useWorkflowDetails({tenantId:M,id:x,moduleCode:"BPA"});he&&he.data&&!he.isLoading&&(he.data.initialActionState=(null==he||null===(ce=he.data)||void 0===ce?void 0:ce.initialActionState)||u({},null==he||null===(se=he.data)||void 0===se?void 0:se.actionState)||{},he.data.actionState=u({},he.data)),null!=Q&&null!==(e=Q.BPA)&&void 0!==e&&e.RiskTypeComputation&&null!=ne&&ne.edcrDetails&&(de=Digit.Utils.obps.calculateRiskType(null==Q||null===(ve=Q.BPA)||void 0===ve?void 0:ve.RiskTypeComputation,null==ne||null===(pe=ne.edcrDetails)||void 0===pe||null===(me=pe.planDetail)||void 0===me||null===(Ee=me.plot)||void 0===Ee?void 0:Ee.area,null==ne||null===(_e=ne.edcrDetails)||void 0===_e||null===(ge=_e.planDetail)||void 0===ge?void 0:ge.blocks),null==ne||null===(Ae=ne.applicationDetails)||void 0===Ae||Ae.map(function(e){var n;null!=e&&e.isInsert&&(null===(n=e.values)||void 0===n||n.forEach(function(e){null!=e&&e.isInsert&&(e.value="WF_BPA_"+de)}))}));var be,ye,Te,Ce,Ne,Ie,Le,Be,Oe,Re=Digit.UserService.getUser(),xe=null==Re||null===(a=Re.info)||void 0===a?void 0:a.roles.filter(function(e){if("CEMP"==e.code&&e.tenantId===M||"CITIZEN"==e.code)return!0});if((null==he||null===(r=he.data)||void 0===r||null===(c=r.processInstances)||void 0===c?void 0:c.length)>0){var we,Me,ke,Fe=(Be=["action"],Oe=["desc"],null==(Le=null===(we=zi(null==he||null===(Me=he.data)||void 0===Me?void 0:Me.processInstances[0],"nextActions",[]))||void 0===we?void 0:we.filter(function(e){return"ADHOC"!=e.action}))?[]:(ue(Be)||(Be=null==Be?[]:[Be]),ue(Oe=Oe)||(Oe=null==Oe?[]:[Oe]),function(e,n,t){n=n.length?ki(n,function(e){return ue(e)?function(n){return ji(n,1===e.length?e[0]:e)}:e}):[oo];var l=-1;return n=ki(n,fe(ao)),function(e,n){var l=e.length;for(e.sort(function(e,n){return function(e,n,t){for(var l=-1,i=e.criteria,o=n.criteria,a=i.length,r=t.length;++l<a;){var u=ro(i[l],o[l]);if(u)return l>=r?u:u*("desc"==t[l]?-1:1)}return e.index-n.index}(e,n,t)});l--;)e[l]=e[l].value;return e}(function(e,n){var t=-1,l=De(e)?Array(e.length):[];return function(e,n){if(null==e)return e;if(!De(e))return function(e,n){return e&&function(e,n,t){for(var l=-1,i=Object(e),o=t(e),a=o.length;a--;){var r=o[++l];if(!1===n(i[r],r,i))break}return e}(e,n,Pe)}(e,n);for(var t=e.length,l=-1,i=Object(e);++l<t&&!1!==n(i[l]););}(e,function(e,i,o){l[++t]=n(e)}),l}(e,function(e,t,i){return{criteria:ki(n,function(n){return n(e)}),index:++l,value:e}}))}(Le,Be,Oe)));Fe&&0!=(null==Fe?void 0:Fe.length)||null==he||null===(ke=he.data)||void 0===ke||!ke.actionState||(he.data.actionState.nextActions=[])}(null==he||null===(s=he.data)||void 0===s||null===(v=s.nextActions)||void 0===v?void 0:v.length)>0&&(he.data.nextActions=null==he||null===(be=he.data)||void 0===be||null===(ye=be.nextActions)||void 0===ye?void 0:ye.filter(function(e){return"INITIATE"!==e.action}),he.data.nextActions=null==he||null===(Te=he.data)||void 0===Te||null===(Ce=Te.nextActions)||void 0===Ce?void 0:Ce.filter(function(e){return"ADHOC"!==e.action})),xe&&(null==he||null===(Ne=he.data)||void 0===Ne||null===(Ie=Ne.nextActions)||void 0===Ie||Ie.forEach(function(e){var n,t,l;"PAY"===(null==e?void 0:e.action)&&(e.redirectionUrll={pathname:Ln(null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.businessService,null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.status)+"/"+(null==ne||null===(l=ne.applicationData)||void 0===l?void 0:l.applicationNo)+"/"+M+"?tenantId="+M,state:M})}));var Ue,He,We,je,ze,Ye,Ke=[];if((null==ne||null===(p=ne.collectionBillDetails)||void 0===p?void 0:p.length)>0&&pn(null==ne?void 0:ne.collectionBillDetails).forEach(function(e){var n,t,l,i,o;"BPA.NC_OC_APP_FEE"===(null==e||null===(n=e.paymentDetails[0])||void 0===n?void 0:n.businessService)&&Ke.push({order:1,label:w("BPA_APP_FEE_RECEIPT"),onClick:function(){var n,t;return R({tenantId:null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_OC_SAN_FEE"===(null==e||null===(t=e.paymentDetails[0])||void 0===t?void 0:t.businessService)&&Ke.push({order:2,label:w("BPA_OC_DEV_PEN_RECEIPT"),onClick:function(){var n,t;return R({tenantId:null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.LOW_RISK_PERMIT_FEE"===(null==e||null===(l=e.paymentDetails[0])||void 0===l?void 0:l.businessService)&&Ke.push({order:1,label:w("BPA_FEE_RECEIPT"),onClick:function(){var n,t;return R({tenantId:null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_APP_FEE"===(null==e||null===(i=e.paymentDetails[0])||void 0===i?void 0:i.businessService)&&Ke.push({order:1,label:w("BPA_APP_FEE_RECEIPT"),onClick:function(){var n,t;return R({tenantId:null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.applicationNo})}}),"BPA.NC_SAN_FEE"===(null==e||null===(o=e.paymentDetails[0])||void 0===o?void 0:o.businessService)&&Ke.push({order:2,label:w("BPA_SAN_FEE_RECEIPT"),onClick:function(){var n,t;return R({tenantId:null==ne||null===(n=ne.applicationData)||void 0===n?void 0:n.tenantId,payments:e,consumerCodes:null==ne||null===(t=ne.applicationData)||void 0===t?void 0:t.applicationNo})}})}),ne&&"BPA_LOW"===(null==ne||null===(m=ne.applicationData)||void 0===m?void 0:m.businessService)&&(null==ne||null===(f=ne.collectionBillDetails)||void 0===f?void 0:f.length)>0)(null==ne||null===(Ue=ne.applicationData)||void 0===Ue||!Ue.status.includes("REVOCATION"))&&Ke.push({order:3,label:w("BPA_PERMIT_ORDER"),onClick:function(){var e;return O({tenantId:null==ne||null===(e=ne.applicationData)||void 0===e?void 0:e.tenantId},"buildingpermit-low")}}),(null==ne||null===(He=ne.applicationData)||void 0===He?void 0:He.status.includes("REVOCATION"))&&Ke.push({order:3,label:w("BPA_REVOCATION_PDF_LABEL"),onClick:function(){var e;return function(e){var n=e.tenantId;d(e,uo);try{var t=u({},null==ne?void 0:ne.applicationData);return Promise.resolve(Digit.PaymentService.generatePdf(n,{Bpa:[t]},"bpa-revocation")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(n,{fileStoreIds:e.filestoreIds[0]})).then(function(n){window.open(n[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}({tenantId:null==ne||null===(e=ne.applicationData)||void 0===e?void 0:e.tenantId})}});else if(ne&&"BPA"===(null==ne||null===(E=ne.applicationData)||void 0===E?void 0:E.businessService)&&(null==ne||null===(_=ne.collectionBillDetails)||void 0===_?void 0:_.length)>0){var Ge;"APPROVED"===(null==ne||null===(Ge=ne.applicationData)||void 0===Ge?void 0:Ge.status)&&Ke.push({order:3,label:w("BPA_PERMIT_ORDER"),onClick:function(){var e;return O({tenantId:null==ne||null===(e=ne.applicationData)||void 0===e?void 0:e.tenantId},"buildingpermit")}})}else{var Ve;"APPROVED"===(null==ne||null===(Ve=ne.applicationData)||void 0===Ve?void 0:Ve.status)&&Ke.push({order:3,label:w("BPA_OC_CERTIFICATE"),onClick:function(){var e;return O({tenantId:null==ne||null===(e=ne.applicationData)||void 0===e?void 0:e.tenantId},"occupancy-certificate")}})}null!=ne&&ne.comparisionReport&&ne&&"BPA_OC"===(null==ne||null===(g=ne.applicationData)||void 0===g?void 0:g.businessService)&&Ke.push({order:4,label:w("BPA_COMPARISON_REPORT_LABEL"),onClick:function(){var e;return window.open(null==ne||null===(e=ne.comparisionReport)||void 0===e?void 0:e.comparisonReport,"_blank")}}),Ke.sort(function(e,n){return e.order-n.order}),(null==he||null===(A=he.data)||void 0===A||null===(S=A.nextActions)||void 0===S?void 0:S.length)>0&&(he.data.nextActions=null==he||null===(We=he.data)||void 0===We||null===(je=We.nextActions)||void 0===je?void 0:je.filter(function(e){return"SKIP_PAYMENT"!==e.action})),(null==he||null===(h=he.data)||void 0===h||null===(b=h.nextActions)||void 0===b?void 0:b.length)>0&&(he.data.nextActions=null==he||null===(ze=he.data)||void 0===ze||null===(Ye=ze.nextActions)||void 0===Ye?void 0:Ye.filter(function(e){return"SKIP_PAYMENT"!==e.action}));var Xe=null==ne||null===(y=ne.applicationDetails)||void 0===y?void 0:y.filter(function(e){return 0!==Object.keys(e).length});return ne.applicationDetails=Xe,t.createElement(n.Fragment,null,t.createElement("div",{className:"employee-main-application-details"},t.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},t.createElement(o.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},w("CS_TITLE_APPLICATION_DETAILS")),Ke&&Ke.length>0&&t.createElement(o.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:function(){return oe(!ie)},displayOptions:ie,options:Ke,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className"})),"FIELDINSPECTION_INPROGRESS"===(null==ne||null===(T=ne.applicationData)||void 0===T?void 0:T.status)&&(null==Re||null===(C=Re.info)||void 0===C?void 0:C.roles.filter(function(e){return"BPA_FIELD_INSPECTOR"===e.code})).length>0&&t.createElement(o.FormComposer,{heading:w(""),isDisabled:!W,config:Se.map(function(e){return u({},e,{body:e.body.filter(function(e){return!e.hideInEmployee}),head:(n=e.head,"ES_NEW_APPLICATION_LOCATION_DETAILS"===n?"TL_CHECK_ADDRESS":"ES_NEW_APPLICATION_OWNERSHIP_DETAILS"===n?"TL_OWNERSHIP_DETAILS_HEADER":n)});var n}),fieldStyle:{marginRight:0},submitInForm:!1,defaultValues:{},onFormValueChange:function(e,n,t){j(!Object.keys(t.errors).length)},breaklineStyle:{border:"0px"},className:"employeeCard-override",cardClassName:"employeeCard-override"}),t.createElement(Ci,{applicationDetails:ne,isLoading:te,isDataLoading:te,applicationData:null==ne?void 0:ne.applicationData,nocMutation:re,mutate:ae,workflowDetails:he,businessService:null!=he&&null!==(D=he.data)&&void 0!==D&&D.applicationBusinessService?null==he||null===(P=he.data)||void 0===P?void 0:P.applicationBusinessService:null==ne||null===(N=ne.applicationData)||void 0===N?void 0:N.businessService,moduleCode:"BPA",showToast:F,ActionBarStyle:V?{}:{paddingRight:"50px"},MenuStyle:V?{}:{right:"50px"},setShowToast:U,closeToast:function(){U(null),K(null)},statusAttribute:"state",timelineStatusPrefix:"WF_"+(null!=he&&null!==(I=he.data)&&void 0!==I&&I.applicationBusinessService?null==he||null===(L=he.data)||void 0===L?void 0:L.applicationBusinessService:null==ne||null===(B=ne.applicationData)||void 0===B?void 0:B.businessService)+"_"})))}};exports.initOBPSComponents=function(){Object.entries(Ao).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
